"use strict";(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[5528],{5528:($,T,o)=>{o.r(T),o.d(T,{ExampleTuiEditorUploadFilesModule:()=>Z});var f=o(12057),u=o(24751),p=o(33982),m=o(29851),d=o(48014),D=o(68339),r=o(76040),t=o(74788),h=o(88331),O=o(66596),S=o(57068),v=o(35758),L=o(68939);function I(n){return i=>(n.loading$.next(!0),(0,v.D)(i.map(e=>n.upload(e))).pipe((0,L.x)(()=>n.loading$.next(!1))))}var M=o(64762),g=o(26215),U=o(94402),A=o(88002),C=o(53585);let c=(()=>{class n{constructor(){this.loading$=new g.X(!1)}upload(e){const{host:l,expires:s,autoDelete:a}=C.N.fileIO,E=new FormData;return E.append("file",e,e.name),E.append("expires",s),E.append("autoDelete",a),(0,U.D)(fetch(l,{method:"POST",body:E}).then(F=>(0,M.mG)(this,void 0,void 0,function*(){return F.json()}))).pipe((0,A.U)(F=>({name:F.name,link:F.link})))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var N=o(23184),R=o(69303),x=o(20179);let P=(()=>{class n{constructor(e){this.fileIoService=e,this.builtInTools=[d.TuiEditorTool.Undo,d.TuiEditorTool.Link,d.TuiEditorTool.Attach],this.control=new u.NI("")}attach(e){e.forEach(l=>{var s,a;return null===(a=null===(s=this.wysiwyg)||void 0===s?void 0:s.editor)||void 0===a?void 0:a.setFileLink(l)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tui-editor-upload-files-example-1"]],viewQuery:function(e,l){if(1&e&&t.Gf(d.TuiEditorComponent,5),2&e){let s;t.iGM(s=t.CRH())&&(l.wysiwyg=s.first)}},features:[t._Bn([{provide:d.TUI_EDITOR_EXTENSIONS,useValue:[Promise.resolve().then(o.bind(o,2823)).then(({StarterKit:i})=>i),Promise.resolve().then(o.bind(o,84402)).then(({TextStyle:i})=>i),Promise.resolve().then(o.bind(o,57734)).then(({TuiLink:i})=>i),o.e(54058).then(o.bind(o,54058)).then(({TuiJumpAnchor:i})=>i),Promise.resolve().then(o.bind(o,93763)).then(({TuiFileLink:i})=>i)]},{provide:d.TUI_ATTACH_FILES_LOADER,deps:[c],useFactory:I}])],decls:10,vars:7,consts:[[3,"showLoader"],[1,"editor",3,"formControl","tools","fileAttached"],[3,"content"]],template:function(e,l){1&e&&(t.TgZ(0,"tui-loader",0),t.ALo(1,"async"),t.TgZ(2,"tui-editor",1),t.NdJ("fileAttached",function(a){return l.attach(a)}),t.qZA(),t.qZA(),t.TgZ(3,"h4"),t._uU(4,"HTML:"),t.qZA(),t._UZ(5,"tui-editor-socket",2),t.TgZ(6,"h4"),t._uU(7,"Text:"),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.qZA()),2&e&&(t.Q6J("showLoader",!!t.lcZ(1,5,l.fileIoService.loading$)),t.xp6(2),t.Q6J("formControl",l.control)("tools",l.builtInTools),t.xp6(3),t.Q6J("content",l.control.value||""),t.xp6(4),t.Oqu(l.control.value))},directives:[N.k,R.a,u.JJ,u.oH,x.D],pipes:[f.Ov],styles:[".editor[_ngcontent-%COMP%]     .tui-editor-socket .ProseMirror{min-height:10rem}"],changeDetection:0}),n})(),y=(()=>{class n{constructor(){this.example1={TypeScript:o.e(18692).then(o.t.bind(o,18692,17)),HTML:o.e(70672).then(o.t.bind(o,70672,17)),LESS:o.e(22540).then(o.t.bind(o,22540,17)),"./filesio.service.ts":o.e(14614).then(o.t.bind(o,14614,17)),"./file-loader.ts":o.e(30954).then(o.t.bind(o,30954,17))}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["editor-upload-files"]],features:[t._Bn([{provide:d.TUI_EDITOR_EXTENSIONS,useValue:d.defaultEditorExtensions}])],decls:7,vars:1,consts:function(){let i,e;return i=$localize`:␟c1a95de6ffd08f110496afe73d9e3e9631407ea9␟2361436632859407436: Rich Text Editor based on ${"\ufffd#3\ufffd"}:START_LINK: TipTap Editor ${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_LINK: for using with Angular forms. For safety reasons use a ${"\ufffd#4\ufffd"}:START_LINK_1: sanitizer ${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_LINK: with this component. `,i=t.Zx4(i),e=$localize`:␟a36f29be0cdb63b5651ae82369e06f9913916d3b␟5744880155732837230:Upload files`,[["header","Editor","package","ADDON-EDITOR","type","components"],i,["tuiLink","","href","https://www.tiptap.dev/"],["tuiLink","","routerLink","/icon-set","fragment","sanitizer"],["id","upload-file","heading",e,"description","100 uploads per day, 2GB file size limit, files auto-deleted after 1 download",3,"content"]]},template:function(e,l){1&e&&(t.TgZ(0,"tui-doc-page",0),t.TgZ(1,"p"),t.tHW(2,1),t._UZ(3,"a",2),t._UZ(4,"a",3),t.N_p(),t.qZA(),t.TgZ(5,"tui-doc-example",4),t._UZ(6,"tui-editor-upload-files-example-1"),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("content",l.example1))},directives:[h.q,O.V,p.yS,S.f,P],encapsulation:2,changeDetection:0}),n})(),Z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[f.ez,D.TuiActiveZoneModule,r.TuiSvgModule,r.TuiLinkModule,r.TuiHostedDropdownModule,r.TuiButtonModule,m.fV,u.u5,u.UX,d.TuiEditorModule,r.TuiLoaderModule,d.TuiEditorSocketModule,p.Bz.forChild((0,m.Ve)(y))]]}),n})()}}]);