"use strict";var Qo=Object.defineProperty,Go=Object.defineProperties,Xo=Object.getOwnPropertyDescriptors,_o=Object.getOwnPropertySymbols,Zo=Object.prototype.hasOwnProperty,Yo=Object.prototype.propertyIsEnumerable,jo=(Yt,vt,c)=>vt in Yt?Qo(Yt,vt,{enumerable:!0,configurable:!0,writable:!0,value:c}):Yt[vt]=c,Gt=(Yt,vt)=>{for(var c in vt||(vt={}))Zo.call(vt,c)&&jo(Yt,c,vt[c]);if(_o)for(var c of _o(vt))Yo.call(vt,c)&&jo(Yt,c,vt[c]);return Yt},me=(Yt,vt)=>Go(Yt,Xo(vt)),Vo=(Yt,vt)=>{var c={};for(var v in Yt)Zo.call(Yt,v)&&vt.indexOf(v)<0&&(c[v]=Yt[v]);if(null!=Yt&&_o)for(var v of _o(Yt))vt.indexOf(v)<0&&Yo.call(Yt,v)&&(c[v]=Yt[v]);return c};(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[48014],{77361:(Yt,vt,c)=>{c.d(vt,{_:()=>y});var v=c(79765),l=c(74788);let y=(()=>{class P{constructor(){this.stateChange$=new v.xQ,this.valueChange$=new v.xQ}}return P.\u0275fac=function(ot){return new(ot||P)},P.\u0275dir=l.lG2({type:P}),P})()},97019:(Yt,vt,c)=>{c.d(vt,{h:()=>kt});var v=c(64762),l=c(74788),y=c(50259),P=c(50170),g=c(1414),ot=c(10200),H=c(33250),X=c(68874),et=c(24751),_t=c(52219),dt=c(12057),Mt=c(65009),rt=c(10383),ft=c(20933),Ot=c(35065),St=c(63060),Pt=c(62733),Dt=c(48214),pt=c(11189),tt=c(91030);function F(yt,Bt){if(1&yt&&(l.TgZ(0,"button",7),l._uU(1),l.qZA()),2&yt){const Ht=Bt.$implicit;l.Q6J("value",Ht),l.xp6(1),l.hij(" ",Ht," ")}}function mt(yt,Bt){if(1&yt&&(l.TgZ(0,"tui-data-list",5),l.YNc(1,F,2,2,"button",6),l.qZA()),2&yt){const Ht=l.oxw();l.xp6(1),l.Q6J("ngForOf",Ht.modes)}}function j(yt,Bt){if(1&yt){const Ht=l.EpF();l.TgZ(0,"tui-primitive-textfield",8),l.NdJ("valueChange",function(ut){return l.CHM(Ht),l.oxw().onHexChange(ut)}),l._UZ(1,"input",9),l.qZA()}if(2&yt){const Ht=l.oxw();l.Q6J("textMask",Ht.hexMask)("tuiTextfieldLabelOutside",!0)("value",Ht.hex)}}function At(yt,Bt){if(1&yt){const Ht=l.EpF();l.TgZ(0,"tui-input-count",10),l.NdJ("ngModelChange",function(ut){l.CHM(Ht);const L=l.oxw();return L.onRgbChange(ut,L.color[1],L.color[2],L.color[3])}),l.qZA(),l.TgZ(1,"tui-input-count",10),l.NdJ("ngModelChange",function(ut){l.CHM(Ht);const L=l.oxw();return L.onRgbChange(L.color[0],ut,L.color[2],L.color[3])}),l.qZA(),l.TgZ(2,"tui-input-count",10),l.NdJ("ngModelChange",function(ut){l.CHM(Ht);const L=l.oxw();return L.onRgbChange(L.color[0],L.color[1],ut,L.color[3])}),l.qZA()}if(2&yt){const Ht=l.oxw();l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Ht.color[0]),l.xp6(1),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Ht.color[1]),l.xp6(1),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Ht.color[2])}}class kt{constructor(){this.color=[0,0,0,1],this.colorChange=new l.vpe,this.hexMask={mask:({length:Bt})=>Array.from({length:Bt},()=>/\d|[a-f]|[A-F]/),guide:!1},this.modes=["HEX","RGB"],this.mode=this.modes[0]}get isHex(){return this.mode===this.modes[0]}get hex(){return(0,y.tuiRgbToHex)(this.color[0],this.color[1],this.color[2]).replace("#","")}get opacity(){return Math.round(100*this.color[3])}onHexChange(Bt){if(6!==Bt.length)return;const Ht=(0,y.tuiHexToRgb)(Bt);this.updateColor([Ht[0],Ht[1],Ht[2],this.color[3]])}onRgbChange(...Bt){this.updateColor(Bt)}updateColor(Bt){this.color=Bt,this.colorChange.emit(Bt)}}kt.\u0275fac=function(Bt){return new(Bt||kt)},kt.\u0275cmp=l.Xpm({type:kt,selectors:[["tui-color-edit"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:6,vars:8,consts:[["tuiTextfieldSize","m","tuiDropdownAlign","left","tuiDropdownLimitWidth","min",1,"t-select","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","ngModel","ngModelChange"],["size","s",4,"tuiDataList"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange",4,"ngIf","ngIfElse"],["rgb",""],["postfix","%","tuiTextfieldSize","m",1,"t-opacity","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"],["size","s"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange"],["tuiTextfield","","maxlength","6"],["tuiTextfieldSize","m",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"]],template:function(Bt,Ht){if(1&Bt&&(l.TgZ(0,"tui-select",0),l.NdJ("ngModelChange",function(ut){return Ht.mode=ut}),l.YNc(1,mt,2,1,"tui-data-list",1),l.qZA(),l.YNc(2,j,2,3,"tui-primitive-textfield",2),l.YNc(3,At,3,12,"ng-template",null,3,l.W1O),l.TgZ(5,"tui-input-count",4),l.NdJ("ngModelChange",function(ut){return Ht.onRgbChange(Ht.color[0],Ht.color[1],Ht.color[2],ut/100)}),l.qZA()),2&Bt){const Kt=l.MAs(4);l.Q6J("tuiTextfieldLabelOutside",!0)("ngModel",Ht.mode),l.xp6(2),l.Q6J("ngIf",Ht.isHex)("ngIfElse",Kt),l.xp6(3),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",100)("ngModel",Ht.opacity)}},directives:[P.u,g.O,ot.s,H.Ek,X.x,et.JJ,et.On,_t.g,dt.O5,Mt.E,rt.a,ft.q,dt.sg,Ot.v,St.y,Pt.B,Dt.n,pt.h,tt.M],styles:["[_nghost-%COMP%]{display:flex}.t-select[_ngcontent-%COMP%]{width:4.875rem}.t-opacity[_ngcontent-%COMP%]{width:4.275rem}"],changeDetection:0}),(0,v.gn)([(0,y.tuiDefaultProp)()],kt.prototype,"color",void 0)},49289:(Yt,vt,c)=>{c.d(vt,{$:()=>H});var v=c(64762),l=c(74788),y=c(91211),P=c(50259),g=c(71424),ot=c(65720);class H{constructor(et){this.sanitizer=et,this.colorChange=new l.vpe,this.point=[0,1],this.hue=0,this.opacity=1}set color(et){if(this.currentColor.every((rt,ft)=>rt===et[ft])&&et[3]===this.opacity)return;const[_t,dt,Mt]=(0,P.tuiRgbToHsv)(et[0],et[1],et[2]);this.opacity=et[3],this.hue=_t/360,this.point=[dt,1-Mt/255]}get currentColor(){return this.getCurrentColor(this.hue,this.point)}get base(){return`rgb(${(0,P.tuiHsvToRgb)(360*this.hue,1,255)})`}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(`linear-gradient(to right, rgba(${this.currentColor.join(",")}, 0), rgb(${this.currentColor.join(",")}))`)}onPointChange(et){this.point=et,this.updateColor()}onHueChange(et){this.hue=et,this.updateColor()}onOpacityChange(et){this.opacity=(0,P.tuiRound)(et,2),this.updateColor()}getCurrentColor(et,_t){return(0,P.tuiHsvToRgb)(360*et,_t[0],255*(1-_t[1]))}updateColor(){this.colorChange.emit([...this.currentColor,this.opacity])}}H.\u0275fac=function(et){return new(et||H)(l.Y36(y.H7))},H.\u0275cmp=l.Xpm({type:H,selectors:[["tui-color-picker"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:5,vars:7,consts:[[1,"t-flat",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_hue"],[1,"t-hue",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_opacity"],[1,"t-opacity",3,"value","valueChange"]],template:function(et,_t){1&et&&(l.TgZ(0,"tui-flat-picker",0),l.NdJ("valueChange",function(Mt){return _t.onPointChange(Mt)}),l.qZA(),l.TgZ(1,"div",1),l.TgZ(2,"tui-linear-picker",2),l.NdJ("valueChange",function(Mt){return _t.onHueChange(Mt)}),l.qZA(),l.qZA(),l.TgZ(3,"div",3),l.TgZ(4,"tui-linear-picker",4),l.NdJ("valueChange",function(Mt){return _t.onOpacityChange(Mt)}),l.qZA(),l.qZA()),2&et&&(l.Udp("background-color",_t.base),l.Q6J("value",_t.point),l.xp6(2),l.Q6J("value",_t.hue),l.xp6(1),l.Udp("background",_t.gradient),l.xp6(1),l.Q6J("value",_t.opacity))},directives:[g.J,ot.P],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block}.t-flat[_ngcontent-%COMP%]{height:14rem;background:linear-gradient(rgba(0,0,0,0),#000000),linear-gradient(to right,#ffffff,rgba(255,255,255,0));margin-bottom:.25rem;overflow:hidden}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1rem 1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper_hue[_ngcontent-%COMP%]{background:#ff0000}.t-wrapper_opacity[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hue[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff0000,#ffff00,#00ff00,#00ffff,#0000ff,#ff00ff,#ff0000);border-radius:inherit;margin:0 .5rem}.t-opacity[_ngcontent-%COMP%]{border-radius:inherit;margin:0 .5rem}'],changeDetection:0}),(0,v.gn)([(0,P.tuiDefaultProp)()],H.prototype,"color",null),(0,v.gn)([P.tuiPure],H.prototype,"getCurrentColor",null)},23999:(Yt,vt,c)=>{c.d(vt,{s:()=>st});var v=c(64762),l=c(74788),y=c(91211),P=c(14309),g=c(27863),ot=c(50259),H=c(62939),X=c(76189),et=c(12057),_t=c(49289),dt=c(34880),Mt=c(20933),rt=c(35065),ft=c(49472),Ot=c(219),St=c(67446),Pt=c(29070),Dt=c(54255),pt=c(15491),tt=c(97019),F=c(39607),mt=c(5451);function j(J,Q){if(1&J&&l._UZ(0,"tui-svg",9),2&J){l.oxw();const nt=l.MAs(1);l.ekj("t-arrow_rotated",nt.open)}}function At(J,Q){1&J&&l._UZ(0,"tui-svg",14)}function kt(J,Q){if(1&J){const nt=l.EpF();l.TgZ(0,"button",12),l.NdJ("keydown.enter.prevent",function(){const Zt=l.CHM(nt).$implicit,ne=l.oxw(2),zt=l.MAs(1);return ne.onModeSelect(Zt,zt)})("keydown.space.prevent",function(){const Zt=l.CHM(nt).$implicit,ne=l.oxw(2),zt=l.MAs(1);return ne.onModeSelect(Zt,zt)})("click",function(){const Zt=l.CHM(nt).$implicit,ne=l.oxw(2),zt=l.MAs(1);return ne.onModeSelect(Zt,zt)}),l._uU(1),l.YNc(2,At,1,0,"tui-svg",13),l.qZA()}if(2&J){const nt=Q.$implicit,wt=l.oxw(2);l.uIk("aria-checked",wt.isModeActive(nt)),l.xp6(1),l.hij(" ",nt," "),l.xp6(1),l.Q6J("ngIf",wt.isModeActive(nt))}}function yt(J,Q){if(1&J&&(l.TgZ(0,"tui-data-list",10),l.YNc(1,kt,3,3,"button",11),l.qZA()),2&J){const nt=l.oxw();l.xp6(1),l.Q6J("ngForOf",nt.modes)}}function Bt(J,Q){if(1&J){const nt=l.EpF();l.TgZ(0,"button",20),l.NdJ("click",function(){const Zt=l.CHM(nt).$implicit;return l.oxw(2).onDirectionChange(Zt)}),l.qZA()}if(2&J){const nt=Q.$implicit,wt=l.oxw(2);l.ekj("t-direction_active",wt.isDirectionActive(nt)),l.Q6J("icon",wt.getIcon(nt))("tuiHint",nt)}}function Ht(J,Q){if(1&J){const nt=l.EpF();l.ynx(0),l._UZ(1,"hr",15),l.TgZ(2,"div",16),l.TgZ(3,"tui-linear-multi-picker",17),l.NdJ("valueChange",function(Jt){return l.CHM(nt),l.oxw().onStopsChange(Jt)})("indexChange",function(Jt){return l.CHM(nt),l.oxw().onIndexChange(Jt)}),l.qZA(),l.qZA(),l.TgZ(4,"div",18),l.YNc(5,Bt,1,4,"button",19),l.qZA(),l.BQk()}if(2&J){const nt=l.oxw();l.xp6(2),l.Udp("background",nt.gradient),l.xp6(1),l.Q6J("value",nt.stopsKeys),l.xp6(2),l.Q6J("ngForOf",nt.buttons)}}function Kt(J,Q){if(1&J){const nt=l.EpF();l.TgZ(0,"tui-color-edit",21),l.NdJ("colorChange",function(Jt){return l.CHM(nt),l.oxw().onColorChange(Jt)}),l.qZA()}if(2&J){const nt=l.oxw();l.Q6J("color",nt.color)}}function ut(J,Q){if(1&J){const nt=l.EpF();l.TgZ(0,"tui-palette",22),l.NdJ("selectedColor",function(Jt){return l.CHM(nt),l.oxw().onPalettePick(Jt)}),l.qZA()}if(2&J){const nt=l.oxw();l.Q6J("colors",nt.palette)}}const L=[0,0,0,0],it=[[0,[0,0,0,1]],[1,[255,255,255,1]]],ct={"to top right":"tuiIconArrowUpRight","to right":"tuiIconArrowRight","to bottom right":"tuiIconArrowDownRight","to bottom":"tuiIconArrowDown","to bottom left":"tuiIconArrowDownLeft","to left":"tuiIconArrowLeft","to top left":"tuiIconArrowUpLeft","to top":"tuiIconArrowUp"};class st{constructor(Q,nt){this.sanitizer=Q,this.modes=nt,this.stops=new Map(it),this.currentStop=0,this.direction="to bottom",this.colors=new Map,this.colorChange=new l.vpe,this.color=[0,0,0,1],this.currentMode=this.modes[0],this.buttons=["to top right","to right","to bottom right","to bottom","to bottom left","to left","to top left","to top"]}set colorSetter(Q){this.parse(Q)}get palette(){return this.filterPalette(this.colors,this.isGradient)}get stopsKeys(){return this.getStopsKeys(this.stops)}get currentColor(){return this.isGradient?this.getStop(this.currentStop):this.color}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(this.getGradient("to right"))}get isGradient(){return this.currentMode===this.modes[1]}getIcon(Q){return ct[Q]}isModeActive(Q){return this.currentMode===Q}isDirectionActive(Q){return this.direction===Q}onPalettePick(Q){this.updateColor(Q)}onDirectionChange(Q){this.direction=Q,this.updateColor(this.getGradient(Q))}onModeSelect(Q,nt){this.currentMode=Q,nt.open=!1,this.updateColor(Q===this.modes[0]?`rgba(${this.color.join(", ")})`:this.getGradient(this.direction))}onIndexChange(Q){this.currentStop=this.stopsKeys[Q]}onColorChange(Q){this.isGradient?(this.stops.set(this.currentStop,Q),this.updateColor(this.getGradient(this.direction))):this.updateColor(`rgba(${Q.join(", ")})`)}onStopsChange(Q){const nt=this.stopsKeys.find(Jt=>!Q.includes(Jt)),wt=Q.find(Jt=>!this.stopsKeys.includes(Jt));void 0===nt&&void 0!==wt&&this.addStop(wt),void 0!==nt&&void 0===wt&&this.removeStop(nt),void 0!==nt&&void 0!==wt&&this.replaceStop(nt,wt),this.updateColor(this.getGradient(this.direction))}getStopsKeys(Q){return Array.from(Q.keys())}filterPalette(Q,nt){const wt=new Map(Q);return wt.forEach((Jt,Zt)=>{(Jt.startsWith("linear-gradient")&&!nt||!Jt.startsWith("linear-gradient")&&nt)&&wt.delete(Zt)}),wt}updateColor(Q){this.colorChange.emit(Q)}getGradient(Q){return`linear-gradient(${Q}, ${[...this.stopsKeys].sort().map(nt=>`rgba(${this.getStop(nt).join(", ")}) ${100*nt}%`).join(", ")})`}getStop(Q){return this.stops.get(Q)||L}addStop(Q){const nt=this.stopsKeys.reduce((wt,Jt)=>Math.abs(Jt-Q)<Math.abs(wt-Q)?Jt:wt,this.stopsKeys[0]);this.stops.set(Q,this.getStop(nt)),this.stops=new Map(this.stops),this.currentStop=Q}removeStop(Q){this.stops.delete(Q),this.stops=new Map(this.stops),this.currentStop=this.stopsKeys[0]}replaceStop(Q,nt){const wt=this.getStop(Q);this.currentStop=nt,this.stops=new Map(this.stopsKeys.map(Jt=>Jt===Q?[nt,wt]:[Jt,this.getStop(Jt)]))}parse(Q){Q.startsWith("linear-gradient")?this.parseGradient(Q):this.parseColor(Q)}parseGradient(Q){if(Q===this.getGradient(this.direction))return;const nt=(0,g._N)((0,g.U5)(Q));this.currentMode=this.modes[1],this.direction=nt.side,this.currentStop=0,this.stops=new Map(nt.stops.length?nt.stops.map(({color:wt,position:Jt})=>[parseFloat(Jt)/100,(0,ot.tuiParseColor)(wt)]):it)}parseColor(Q){this.currentMode=this.modes[0],this.currentStop=0,this.color=(0,ot.tuiParseColor)(Q)}}st.\u0275fac=function(Q){return new(Q||st)(l.Y36(y.H7),l.Y36(P.dj))},st.\u0275cmp=l.Xpm({type:st,selectors:[["tui-color-selector"]],inputs:{colors:"colors",colorSetter:["color","colorSetter"]},outputs:{colorChange:"colorChange"},decls:12,vars:7,consts:[[1,"t-select",3,"content"],["dropdown",""],["tuiButton","","appearance","","size","s","type","button",3,"iconRight"],["arrow",""],["menu",""],[4,"ngIf"],[3,"color","colorChange"],["tuiGroup","","class","t-edit",3,"color","colorChange",4,"ngIf"],["class","t-palette",3,"colors","selectedColor",4,"ngIf"],["src","tuiIconChevronDown",1,"t-arrow"],["role","menu","size","s",1,"t-menu"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click"],["src","tuiIconCheck","class","t-checkmark",4,"ngIf"],["src","tuiIconCheck",1,"t-checkmark"],[1,"t-hr"],[1,"t-wrapper"],[1,"t-gradient",3,"value","valueChange","indexChange"],[1,"t-buttons"],["tuiIconButton","","type","button","size","xs","appearance","","tuiHintDescribe","","class","t-direction",3,"t-direction_active","icon","tuiHint","click",4,"ngFor","ngForOf"],["tuiIconButton","","type","button","size","xs","appearance","","tuiHintDescribe","",1,"t-direction",3,"icon","tuiHint","click"],["tuiGroup","",1,"t-edit",3,"color","colorChange"],[1,"t-palette",3,"colors","selectedColor"]],template:function(Q,nt){if(1&Q&&(l.TgZ(0,"tui-hosted-dropdown",0,1),l.TgZ(2,"button",2),l._uU(3),l.qZA(),l.YNc(4,j,1,2,"ng-template",null,3,l.W1O),l.YNc(6,yt,2,1,"ng-template",null,4,l.W1O),l.qZA(),l.YNc(8,Ht,6,4,"ng-container",5),l.TgZ(9,"tui-color-picker",6),l.NdJ("colorChange",function(Jt){return nt.onColorChange(Jt)}),l.qZA(),l.YNc(10,Kt,1,1,"tui-color-edit",7),l.YNc(11,ut,1,1,"tui-palette",8)),2&Q){const wt=l.MAs(5),Jt=l.MAs(7);l.Q6J("content",Jt),l.xp6(2),l.Q6J("iconRight",wt),l.xp6(1),l.hij(" ",nt.currentMode," "),l.xp6(5),l.Q6J("ngIf",nt.isGradient),l.xp6(1),l.Q6J("color",nt.currentColor),l.xp6(1),l.Q6J("ngIf",!nt.isGradient),l.xp6(1),l.Q6J("ngIf",nt.palette.size)}},directives:[H.o,X.v,et.O5,_t.$,dt.P,Mt.q,et.sg,rt.v,ft.e,Ot.$,St.D,Pt.x,Dt.t,pt.D,tt.h,F.g,mt.R],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block;width:22.6rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hr[_ngcontent-%COMP%]{height:1px;margin:0 0 0 -1px;border:none;background:var(--tui-base-03)}.t-gradient[_ngcontent-%COMP%]{margin:0 .5rem;border-radius:inherit}.t-select[_ngcontent-%COMP%]{margin:.75rem .5rem}.t-arrow[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-arrow_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.t-menu[_ngcontent-%COMP%]{width:11.25rem}.t-checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}.t-buttons[_ngcontent-%COMP%]{display:flex;padding:0 .75rem 1.25rem}.t-direction[_ngcontent-%COMP%]{color:var(--tui-text-02);margin:0 .375rem}.t-direction[_ngcontent-%COMP%]:hover, .t-direction_active[_ngcontent-%COMP%]{color:var(--tui-text-01);background:var(--tui-secondary-hover)}.t-edit[_ngcontent-%COMP%]{margin:1.25rem}.t-palette[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:inset 0 1px var(--tui-base-03)}'],changeDetection:0}),(0,v.gn)([(0,ot.tuiDefaultProp)()],st.prototype,"colors",void 0),(0,v.gn)([(0,ot.tuiRequiredSetter)()],st.prototype,"colorSetter",null),(0,v.gn)([ot.tuiPure],st.prototype,"getStopsKeys",null),(0,v.gn)([ot.tuiPure],st.prototype,"filterPalette",null)},71424:(Yt,vt,c)=>{c.d(vt,{J:()=>g});var v=c(64762),l=c(74788),y=c(62141),P=c(50259);class g{constructor(H){this.value=[0,0],this.valueChange=new l.vpe,H.subscribe(X=>{this.value=X,this.valueChange.emit([X[0],X[1]])})}get left(){return 100*this.value[0]}get top(){return 100*this.value[1]}}g.\u0275fac=function(H){return new(H||g)(l.Y36(y.i))},g.\u0275cmp=l.Xpm({type:g,selectors:[["tui-flat-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[l._Bn([P.TuiDestroyService,y.i])],decls:1,vars:4,consts:[[1,"t-circle"]],template:function(H,X){1&H&&l._UZ(0,"div",0),2&H&&l.Udp("left",X.left,"%")("top",X.top,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:-.5rem 0 0 -.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,v.gn)([(0,P.tuiDefaultProp)()],g.prototype,"value",void 0)},27050:(Yt,vt,c)=>{c.d(vt,{hR:()=>v.h,TD:()=>H,$v:()=>X.$,H9:()=>dt,sV:()=>Mt.s,wl:()=>St,Jd:()=>Pt.J,ui:()=>et,es:()=>Dt.e,GU:()=>ft,P:()=>pt.P,g7:()=>_t,Rh:()=>tt.R,VM:()=>Ot});var v=c(97019),l=c(12057),y=c(24751),P=c(3497),g=c(55908),ot=c(74788);let H=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez,y.u5,g.TextMaskModule,g.TuiValueAccessorModule,g.TuiSelectModule,P.TuiPrimitiveTextfieldModule,P.TuiTextfieldControllerModule,P.TuiDropdownModule,g.TuiInputCountModule,P.TuiDataListModule]]}),F})();var X=c(49289);let et=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez]]}),F})(),_t=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez]]}),F})(),dt=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez,et,_t]]}),F})();var Mt=c(23999),rt=c(50259);let ft=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez]]}),F})(),Ot=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez,P.TuiHintModule]]}),F})(),St=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez,P.TuiButtonModule,P.TuiHostedDropdownModule,dt,ft,P.TuiHintModule,P.TuiSvgModule,P.TuiDataListModule,rt.TuiActiveZoneModule,H,P.TuiGroupModule,Ot]]}),F})();var Pt=c(71424),Dt=c(49472),pt=c(65720),tt=c(5451)},49472:(Yt,vt,c)=>{c.d(vt,{e:()=>H});var v=c(64762),l=c(74788),y=c(62141),P=c(50259),g=c(12057);function ot(X,et){if(1&X){const _t=l.EpF();l.TgZ(0,"div",1),l.NdJ("mousedown",function(){const rt=l.CHM(_t).index;return l.oxw().onMouseDown(rt)})("dblclick",function(){const rt=l.CHM(_t).index;return l.oxw().onClick(rt)}),l.qZA()}2&X&&l.Udp("left",100*et.$implicit,"%")}class H{constructor(et){this.value=[0,1],this.valueChange=new l.vpe,this.indexChange=new l.vpe,this.index=NaN,et.subscribe(([_t])=>{this.onPicker(_t)})}onMouseUp(){this.index=NaN}onMouseDown(et){this.updateIndex(et)}onClick(et){this.value.length>2&&this.updateValue(this.value.filter((_t,dt)=>dt!==et))}onPicker(et){Number.isNaN(this.index)&&(this.updateIndex(this.value.length),this.value=[...this.value,0]),!this.value.some((_t,dt)=>_t===et&&dt!==this.index)&&this.updateValue(this.value.map((_t,dt)=>dt===this.index?et:_t))}updateIndex(et){this.index=et,this.indexChange.emit(et)}updateValue(et){this.value=et,this.valueChange.emit(et)}}H.\u0275fac=function(et){return new(et||H)(l.Y36(y.i))},H.\u0275cmp=l.Xpm({type:H,selectors:[["tui-linear-multi-picker"]],hostBindings:function(et,_t){1&et&&l.NdJ("mouseup",function(){return _t.onMouseUp()},!1,l.evT)},inputs:{value:"value"},outputs:{valueChange:"valueChange",indexChange:"indexChange"},features:[l._Bn([P.TuiDestroyService,y.i])],decls:1,vars:1,consts:[["class","t-circle",3,"left","mousedown","dblclick",4,"ngFor","ngForOf"],[1,"t-circle",3,"mousedown","dblclick"]],template:function(et,_t){1&et&&l.YNc(0,ot,1,2,"div",0),2&et&&l.Q6J("ngForOf",_t.value)},directives:[g.sg],styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,v.gn)([(0,P.tuiDefaultProp)()],H.prototype,"value",void 0)},65720:(Yt,vt,c)=>{c.d(vt,{P:()=>g});var v=c(64762),l=c(74788),y=c(62141),P=c(50259);class g{constructor(H){this.value=0,this.valueChange=new l.vpe,H.subscribe(([X])=>{this.value=X,this.valueChange.emit(X)})}get left(){return 100*this.value}}g.\u0275fac=function(H){return new(H||g)(l.Y36(y.i))},g.\u0275cmp=l.Xpm({type:g,selectors:[["tui-linear-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[l._Bn([P.TuiDestroyService,y.i])],decls:1,vars:2,consts:[[1,"t-circle"]],template:function(H,X){1&H&&l._UZ(0,"div",0),2&H&&l.Udp("left",X.left,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,v.gn)([(0,P.tuiDefaultProp)()],g.prototype,"value",void 0)},5451:(Yt,vt,c)=>{c.d(vt,{R:()=>dt});var v=c(64762),l=c(74788),y=c(50259),P=c(12057),g=c(67446),ot=c(29070),H=c(54255),X=c(15491),et=c(219);function _t(Mt,rt){if(1&Mt){const ft=l.EpF();l.TgZ(0,"button",1),l.NdJ("click",function(){const Pt=l.CHM(ft).$implicit;return l.oxw().selectedColor.emit(Pt.value)}),l.qZA()}if(2&Mt){const ft=rt.$implicit;l.Udp("background",ft.value),l.Q6J("tuiHint",ft.key)("tuiHintDescribe",ft.key)("id",ft.key)}}class dt{constructor(){this.colors=new Map,this.selectedColor=new l.vpe,this.originalOrder=(rt,ft)=>0}}dt.\u0275fac=function(rt){return new(rt||dt)},dt.\u0275cmp=l.Xpm({type:dt,selectors:[["tui-palette"]],inputs:{colors:"colors"},outputs:{selectedColor:"selectedColor"},decls:2,vars:4,consts:[["type","button","class","t-button",3,"background","tuiHint","tuiHintDescribe","id","click",4,"ngFor","ngForOf"],["type","button",1,"t-button",3,"tuiHint","tuiHintDescribe","id","click"]],template:function(rt,ft){1&rt&&(l.YNc(0,_t,1,5,"button",0),l.ALo(1,"keyvalue")),2&rt&&l.Q6J("ngForOf",l.xi3(1,1,ft.colors,ft.originalOrder))},directives:[P.sg,g.D,ot.x,H.t,X.D,et.$],pipes:[P.Nd],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;padding:.875rem}.t-button[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;width:1.5625rem;height:1.5625rem;box-sizing:border-box;margin:.375rem;border-radius:var(--tui-radius-m);border:1px solid rgba(0,0,0,.08)}"],changeDetection:0}),(0,v.gn)([(0,y.tuiDefaultProp)()],dt.prototype,"colors",void 0)},45050:(Yt,vt,c)=>{c.d(vt,{l:()=>Ht});var v=c(64762),l=c(12057),y=c(74788),P=c(84614),g=c(14309),ot=c(50259),H=c(87623),X=c(20986),et=c(24751),_t=c(34880),dt=c(76189),Mt=c(66596),rt=c(3881),ft=c(22613),Ot=c(98266);function St(Kt,ut){1&Kt&&(y.ynx(0),y._uU(1,"Edit anchor"),y.BQk())}function Pt(Kt,ut){1&Kt&&(y.TgZ(0,"span"),y._uU(1,"Link to anchor"),y.qZA())}function Dt(Kt,ut){1&Kt&&(y.TgZ(0,"span"),y._uU(1,"URL"),y.qZA())}function pt(Kt,ut){if(1&Kt&&(y.YNc(0,Pt,2,0,"span",1),y.YNc(1,Dt,2,0,"ng-template",null,12,y.W1O)),2&Kt){const L=y.MAs(2),it=y.oxw(2);y.Q6J("ngIf",it.prefixIsHashMode)("ngIfElse",L)}}function tt(Kt,ut){if(1&Kt&&(y.ynx(0),y._uU(1),y.BQk()),2&Kt){const L=ut.ngIf,it=y.oxw(2);y.xp6(1),y.hij(" ",it.prefixIsHashMode?L.anchorExample:L.urlExample," ")}}function F(Kt,ut){if(1&Kt){const L=y.EpF();y.ynx(0),y.TgZ(1,"label",4),y.TgZ(2,"div",5),y.YNc(3,St,2,0,"ng-container",1),y.YNc(4,pt,3,2,"ng-template",null,6,y.W1O),y.qZA(),y.TgZ(6,"div",7),y.TgZ(7,"div",8),y._uU(8),y.qZA(),y.TgZ(9,"tui-input-inline",9),y.NdJ("ngModelChange",function(ct){return y.CHM(L),y.oxw().url=ct})("input",function(ct){let J;return y.CHM(L),y.oxw().onChange(null==(J=ct.target)?null:J.value)})("keydown.prevent.enter",function(){return y.CHM(L),y.oxw().onSave()})("keydown.backspace",function(){return y.CHM(L),y.oxw().onBackspace()}),y.YNc(10,tt,2,1,"ng-container",3),y.ALo(11,"async"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(12,"tui-svg",10),y.NdJ("click",function(){return y.CHM(L),y.oxw().onClear()}),y.qZA(),y.TgZ(13,"button",11),y.NdJ("click",function(){return y.CHM(L),y.oxw().onSave()}),y.qZA(),y.BQk()}if(2&Kt){const L=y.MAs(5),it=y.oxw();y.xp6(3),y.Q6J("ngIf",it.anchorMode)("ngIfElse",L),y.xp6(5),y.Oqu(it.prefix),y.xp6(1),y.ekj("t-input_filled",it.hasUrl),y.Q6J("ngModel",it.url),y.xp6(1),y.Q6J("ngIf",y.lcZ(11,9,it.texts$)),y.xp6(2),y.ekj("t-cleaner_hidden",!it.hasUrl)}}function mt(Kt,ut){if(1&Kt){const L=y.EpF();y.TgZ(0,"a",13),y._uU(1),y.ALo(2,"tuiShortUrl"),y.qZA(),y.TgZ(3,"button",14),y.NdJ("click",function(){return y.CHM(L),y.oxw().onEdit()}),y.qZA(),y.TgZ(4,"button",15),y.NdJ("click",function(){return y.CHM(L),y.oxw().onRemove()}),y.qZA()}if(2&Kt){const L=y.oxw();y.Q6J("href",L.href,y.LSH),y.xp6(1),y.AsE(" ",L.anchorMode?"#":"","",y.lcZ(2,3,L.url)," ")}}function j(Kt,ut){if(1&Kt){const L=y.EpF();y.TgZ(0,"button",19),y.NdJ("click",function(){const st=y.CHM(L).$implicit;return y.oxw(2).setAnchor(st)}),y._uU(1),y.qZA()}if(2&Kt){const L=ut.$implicit;y.xp6(1),y.hij(" #",L," ")}}function At(Kt,ut){if(1&Kt&&(y.ynx(0),y._UZ(1,"hr",16),y.TgZ(2,"tui-scrollbar"),y.TgZ(3,"div",17),y.YNc(4,j,2,1,"button",18),y.ALo(5,"tuiFilterAnchors"),y.qZA(),y.qZA(),y.BQk()),2&Kt){const L=y.oxw();y.xp6(4),y.Q6J("ngForOf",y.Dn7(5,1,L.anchorIds,L.prefix,L.url))}}const kt="#",yt="http://",Bt="https://";class Ht{constructor(ut,L,it){this.documentRef=ut,this.texts$=L,this.editor=it,this.isOnlyAnchorMode=this.detectAnchorMode(),this.addLink=new y.vpe,this.removeLink=new y.vpe,this.url=this.getHrefOrAnchorId(),this.edit=!this.url,this.prefix=this.makeDefaultPrefix(),this.anchorIds=this.getAllAnchorsIds()}set anchorMode(ut){this.isOnlyAnchorMode=ut,this.prefix=ut?kt:this.makeDefaultPrefix()}get anchorMode(){return this.isOnlyAnchorMode}get prefixIsHashMode(){return this.prefix===kt}get hasUrl(){return!!this.url}get href(){return`${this.prefix}${this.url}`}get showAnchorsList(){return!this.anchorMode&&this.edit&&this.anchorIds.length>0}get isViewMode(){return!this.edit}onSelectionChange(){this.isViewMode&&(this.url=this.getHrefOrAnchorId(),this.anchorMode=this.detectAnchorMode())}onMouseDown(ut){(0,ot.tuiIsElement)(ut.target)&&!ut.target.matches("a, button, input")&&ut.preventDefault()}setAnchor(ut){this.url=ut,this.changePrefix(!0)}changePrefix(ut){this.prefix=ut?kt:yt}onSave(){this.url?this.addLink.emit(this.href):this.removeLink.emit()}onBackspace(){this.url||(this.prefix=this.isOnlyAnchorMode?kt:yt)}onEdit(){this.edit=!0}onRemove(){this.removeLink.emit()}onChange(ut){this.url=this.removePrefix(ut)}onClear(){this.url=""}makeDefaultPrefix(){var ut;const L=this.getAnchorElement();return L&&(!L.getAttribute("href")&&L.getAttribute("id")||(null===(ut=L.getAttribute("href"))||void 0===ut?void 0:ut.startsWith(kt)))?kt:yt}detectAnchorMode(){const ut=this.getAnchorElement();return!(null==ut?void 0:ut.href)&&!!(null==ut?void 0:ut.getAttribute("id"))}getFocusedParentElement(){var ut,L;return(null===(L=null===(ut=this.documentRef.getSelection())||void 0===ut?void 0:ut.focusNode)||void 0===L?void 0:L.parentElement)||null}getAnchorElement(){var ut;return(null===(ut=this.getFocusedParentElement())||void 0===ut?void 0:ut.closest("a"))||null}getHrefOrAnchorId(){const ut=this.getAnchorElement();return ut?this.removePrefix(ut.getAttribute("href")||ut.getAttribute("id")||""):this.url}removePrefix(ut){return ut.startsWith(yt)?(this.prefix=this.isOnlyAnchorMode?kt:yt,ut.replace(yt,"")):ut.startsWith(Bt)?(this.prefix=this.isOnlyAnchorMode?kt:Bt,ut.replace(Bt,"")):ut.startsWith(kt)?(this.prefix=kt,ut.replace(kt,"")):ut}getAllAnchorsIds(){var ut;const L=Array.from(null!==(ut=this.editor.getOriginTiptapEditor().view.dom.querySelectorAll('[data-type="jump-anchor"]'))&&void 0!==ut?ut:[]);return Array.from(L).map(it=>it.getAttribute("id")||"").filter(Boolean)}}Ht.\u0275fac=function(ut){return new(ut||Ht)(y.Y36(l.K0),y.Y36(g.b$),y.Y36(P.$3))},Ht.\u0275cmp=y.Xpm({type:Ht,selectors:[["tui-edit-link"]],hostBindings:function(ut,L){1&ut&&y.NdJ("selectionchange",function(){return L.onSelectionChange()},!1,y.evT)("mousedown",function(ct){return L.onMouseDown(ct)})},inputs:{anchorMode:"anchorMode"},outputs:{addLink:"addLink",removeLink:"removeLink"},decls:5,vars:3,consts:[[1,"t-edit-link"],[4,"ngIf","ngIfElse"],["view",""],[4,"ngIf"],[1,"t-label"],[1,"t-label-properties"],["fullOptions",""],[1,"t-url"],[1,"t-prefix"],["tuiAutoFocus","",1,"t-input",3,"ngModel","ngModelChange","input","keydown.prevent.enter","keydown.backspace"],["src","tuiIconCloseLarge",1,"t-cleaner",3,"click"],["tuiIconButton","","type","button","size","s","title","Insert link","icon","tuiIconCheckCircleLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],["urlTitle",""],["tuiLink","","target","_blank",1,"t-link",3,"href"],["tuiIconButton","","type","button","size","s","title","Change link","icon","tuiIconEdit2Large","shape","rounded","appearance","icon",1,"t-button","t-edit-button",3,"click"],["tuiIconButton","","type","button","size","s","title","Remove link","icon","tuiIconUnlinkLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],[1,"t-hr"],[1,"t-anchor-list"],["type","button","class","t-anchor",3,"click",4,"ngFor","ngForOf"],["type","button",1,"t-anchor",3,"click"]],template:function(ut,L){if(1&ut&&(y.TgZ(0,"div",0),y.YNc(1,F,14,11,"ng-container",1),y.YNc(2,mt,5,5,"ng-template",null,2,y.W1O),y.qZA(),y.YNc(4,At,6,5,"ng-container",3)),2&ut){const it=y.MAs(3);y.xp6(1),y.Q6J("ngIf",L.edit)("ngIfElse",it),y.xp6(3),y.Q6J("ngIf",L.showAnchorsList)}},directives:[l.O5,H.l,X.k,et.JJ,et.On,_t.P,dt.v,Mt.V,rt.I,l.sg],pipes:[l.Ov,ft.X,Ot.b],styles:["[_nghost-%COMP%]{display:block;min-width:18.75rem}.t-edit-link[_ngcontent-%COMP%]{display:flex;min-height:4rem;align-items:center;padding-right:.75rem}.t-label[_ngcontent-%COMP%]{font:var(--tui-font-text-s);height:var(--tui-height-l);box-sizing:border-box;padding:.4375rem 1rem;min-width:12.5rem;max-width:25rem;width:100%}.t-label-properties[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:8.375rem;justify-content:space-between}.t-property_inactive[_ngcontent-%COMP%]{opacity:.5}.t-url[_ngcontent-%COMP%]{display:flex;font:var(--tui-font-text-m);color:var(--tui-text-02)}.t-input[_ngcontent-%COMP%]{flex:1}.t-input_filled[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-button[_ngcontent-%COMP%]{width:2rem;height:2rem;margin:0 .25rem;transition:background .2s}.t-edit-button[_ngcontent-%COMP%]{margin-left:auto}.t-link[_ngcontent-%COMP%]{margin:0 1rem}.t-cleaner[_ngcontent-%COMP%]{transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;color:var(--tui-base-06);cursor:pointer;margin-left:auto}.t-cleaner[_ngcontent-%COMP%]:hover{color:var(--tui-base-07)}.t-cleaner_hidden[_ngcontent-%COMP%]{visibility:hidden}.t-anchor-list[_ngcontent-%COMP%]{display:flex;max-height:12.5rem;flex-direction:column}.t-anchor[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;background:none;font-size:inherit;line-height:inherit;min-height:2.75rem;padding:.375rem .5rem;margin:.125rem .5rem;border-radius:var(--tui-radius-m);text-align:left}.t-anchor[_ngcontent-%COMP%]:hover{background:var(--tui-base-02);cursor:pointer}"],changeDetection:0}),(0,v.gn)([(0,ot.tuiDefaultProp)()],Ht.prototype,"anchorMode",null)},71115:(Yt,vt,c)=>{c.d(vt,{lV:()=>v.l,Fu:()=>X,bL:()=>et.b,X:()=>_t.X});var v=c(45050),l=c(12057),y=c(24751),P=c(50259),g=c(3497),ot=c(55908),H=c(74788);let X=(()=>{class dt{}return dt.\u0275fac=function(rt){return new(rt||dt)},dt.\u0275mod=H.oAB({type:dt}),dt.\u0275inj=H.cJS({imports:[[l.ez,y.u5,P.TuiAutoFocusModule,g.TuiButtonModule,g.TuiSvgModule,g.TuiLinkModule,ot.TuiInputInlineModule,ot.TuiToggleModule,g.TuiScrollbarModule]]}),dt})();var et=c(98266),_t=c(22613)},98266:(Yt,vt,c)=>{c.d(vt,{b:()=>l});var v=c(74788);let l=(()=>{class y{transform(g,ot,H){return"#"===ot?g.filter(X=>X!==H):g}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275pipe=v.Yjl({name:"tuiFilterAnchors",type:y,pure:!0}),y})()},22613:(Yt,vt,c)=>{c.d(vt,{X:()=>g});var v=c(74788);let g=(()=>{class ot{transform(X){return X.length<60?X:`${X.slice(0,Math.max(0,40))}...${X.slice(X.length-10)}`}}return ot.\u0275fac=function(X){return new(X||ot)},ot.\u0275pipe=v.Yjl({name:"tuiShortUrl",type:ot,pure:!0}),ot})()},96570:(Yt,vt,c)=>{c.d(vt,{V:()=>dt});var v=c(74788),l=c(50259),y=c(25126),P=c(39953),g=c(12057);const ot=function(){return[0,1]};function H(Mt,rt){if(1&Mt){const ft=v.EpF();v.TgZ(0,"div",4),v.NdJ("tuiSizeChange",function(St){return v.CHM(ft),v.oxw().sizeChange.emit(St)}),v.qZA()}2&Mt&&v.Q6J("tuiResizer",v.DdM(1,ot))}const X=function(Mt){return[Mt,0]},et=function(){return[1,0]},_t=["*"];let dt=(()=>{class Mt{constructor(){this.autoHeight=!1,this.width=null,this.height=null,this.sizeChange=new v.vpe}get hostWidth(){return(0,l.tuiIsNumber)(this.width)?(0,l.tuiPx)(this.width):this.width}get hostHeight(){return this.autoHeight?null:(0,l.tuiIsNumber)(this.height)?(0,l.tuiPx)(this.height):this.height}}return Mt.\u0275fac=function(ft){return new(ft||Mt)},Mt.\u0275cmp=v.Xpm({type:Mt,selectors:[["tui-editor-resizable"]],hostVars:4,hostBindings:function(ft,Ot){2&ft&&v.Udp("width",Ot.hostWidth)("height",Ot.hostHeight)},inputs:{autoHeight:"autoHeight",width:"width",height:"height"},outputs:{sizeChange:"sizeChange"},ngContentSelectors:_t,decls:5,vars:8,consts:[["tuiResizeable","",1,"t-resizable"],[1,"t-handle","t-handle-left-side",3,"tuiResizer","tuiSizeChange"],["class","t-handle t-handle-bottom-side",3,"tuiResizer","tuiSizeChange",4,"ngIf"],[1,"t-handle","t-handle-right-side",3,"tuiResizer","tuiSizeChange"],[1,"t-handle","t-handle-bottom-side",3,"tuiResizer","tuiSizeChange"]],template:function(ft,Ot){1&ft&&(v.F$t(),v.TgZ(0,"div",0),v.Hsn(1),v.TgZ(2,"div",1),v.NdJ("tuiSizeChange",function(Pt){return Ot.sizeChange.emit(Pt)}),v.qZA(),v.YNc(3,H,1,2,"div",2),v.TgZ(4,"div",3),v.NdJ("tuiSizeChange",function(Pt){return Ot.sizeChange.emit(Pt)}),v.qZA(),v.qZA()),2&ft&&(v.ekj("t-resizable-auto-height",Ot.autoHeight),v.xp6(2),v.Q6J("tuiResizer",v.VKq(5,X,-1)),v.xp6(1),v.Q6J("ngIf",!Ot.autoHeight),v.xp6(1),v.Q6J("tuiResizer",v.DdM(7,et)))},directives:[y.U,P.L,g.O5],styles:['[_nghost-%COMP%]{position:relative;display:inline-block;box-sizing:border-box}[_nghost-%COMP%]   .t-resizable[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]   .t-resizable-auto-height[_ngcontent-%COMP%]{height:auto!important}[_nghost-%COMP%]   iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}[_nghost-%COMP%]:hover   .t-handle[_ngcontent-%COMP%]:after{opacity:1}.t-handle[_ngcontent-%COMP%]{position:absolute;top:0;display:flex;width:.75rem;cursor:col-resize;justify-content:center;align-items:center;height:100%}.t-handle[_ngcontent-%COMP%]:after{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";width:50%;height:33%;box-sizing:border-box;border-radius:var(--tui-radius-m);background:var(--tui-base-08);border:1px solid var(--tui-base-03);opacity:0}.t-handle-left-side[_ngcontent-%COMP%]{left:0}.t-handle-bottom-side[_ngcontent-%COMP%]{top:unset;bottom:.3125rem;height:.95rem;width:100%}.t-handle-right-side[_ngcontent-%COMP%]{right:0}'],changeDetection:0}),Mt})()},95110:(Yt,vt,c)=>{c.d(vt,{_3:()=>ot,V_:()=>H.V,Sl:()=>et});var v=c(40400),l=c(50259),y=c(66682),P=c(46782),g=c(74788);let ot=(()=>{class _t extends v.d{constructor(Mt,rt){super(),this._height=0,this._width=0,(0,y.T)((0,l.tuiTypedFromEvent)(Mt,"touchend"),(0,l.tuiTypedFromEvent)(Mt,"mouseup")).pipe((0,P.R)(rt)).subscribe(()=>this.updateAttributes({width:this.width,height:this.height}))}get attrs(){var Mt;return(null===(Mt=this.node)||void 0===Mt?void 0:Mt.attrs)||{src:""}}get width(){return this._width||this.attrs.width||null}get height(){return this._height||this.attrs.height||null}}return _t.\u0275fac=function(Mt){return new(Mt||_t)(g.Y36(Document),g.Y36(l.TuiDestroyService))},_t.\u0275dir=g.lG2({type:_t,features:[g.qOj]}),_t})();var H=c(96570),X=c(12057);let et=(()=>{class _t{}return _t.\u0275fac=function(Mt){return new(Mt||_t)},_t.\u0275mod=g.oAB({type:_t}),_t.\u0275inj=g.cJS({imports:[[X.ez,l.TuiResizeModule,l.TuiResizerModule]]}),_t})()},20179:(Yt,vt,c)=>{c.d(vt,{D:()=>ot});var v=c(12057),l=c(74788),y=c(82113),P=c(50259),g=c(3497);let ot=(()=>{class H{constructor(et,_t,dt,Mt,rt,ft){this.elementRef=et,this.renderer=_t,this.sanitizer=dt,this.tuiSanitizer=Mt,this.document=rt,this.editor=ft}set content(et){this.renderer.setProperty(this.elementRef.nativeElement,"innerHTML",this.tuiSanitizer?this.tuiSanitizer.sanitize(l.q3G.HTML,et.replace(/colwidth/g,"width")):this.sanitizer.sanitize(l.q3G.HTML,et))}click(et){var _t,dt;if(this.editor||!(0,P.tuiIsElement)(et.target))return;const Mt=(null===(dt=null===(_t=et.target)||void 0===_t?void 0:_t.closest("a"))||void 0===dt?void 0:dt.getAttribute("href"))||"";!Mt.startsWith("#")||(this.document.location.hash=Mt.replace("#",""),et.preventDefault())}}return H.\u0275fac=function(et){return new(et||H)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.Tiy),l.Y36(g.TUI_SANITIZER,8),l.Y36(v.K0),l.Y36(y.JU,8))},H.\u0275cmp=l.Xpm({type:H,selectors:[["tui-editor-socket"]],hostAttrs:[1,"tui-editor-socket"],hostBindings:function(et,_t){1&et&&l.NdJ("click",function(Mt){return _t.click(Mt)})},inputs:{content:"content"},decls:0,vars:0,template:function(et,_t){},styles:['.tui-editor-socket summary{display:flex;align-items:center;min-height:3.5rem;width:100%;padding:0 1.25rem;box-sizing:border-box;border-radius:var(--tui-radius-l);pointer-events:none;outline:none}.tui-editor-socket summary:focus-visible{outline:2px solid var(--tui-link)}.tui-editor-socket summary p{min-width:1px;margin:0}.tui-editor-socket summary::-webkit-details-marker{display:none}.tui-editor-socket details[open] summary{border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-editor-socket .details-arrow,.tui-editor-socket .t-details-arrow{position:absolute;top:1.5rem;right:1.25rem;height:.575rem;width:.575rem;border:1px solid var(--tui-base-06);border-width:0 2px 2px 0;transform:rotate(45deg);transition:var(--tui-duration, .3s);-webkit-appearance:none;-moz-appearance:none;appearance:none;box-sizing:border-box;padding:0;background:none;cursor:pointer;outline:none}.tui-editor-socket details{width:100%;border:1px solid var(--tui-base-04);border-radius:var(--tui-radius-l)}.tui-editor-socket div[data-type=details-content]{padding:1.25rem;min-height:3rem;border:1px solid var(--tui-base-04);border-width:1px 0 0}.tui-editor-socket div[data-type=details-content] h1:first-child,.tui-editor-socket div[data-type=details-content] h2:first-child,.tui-editor-socket div[data-type=details-content] pre:first-child,.tui-editor-socket div[data-type=details-content] ul:first-child,.tui-editor-socket div[data-type=details-content] ol:first-child,.tui-editor-socket div[data-type=details-content] ol li:first-child,.tui-editor-socket div[data-type=details-content] ul li:first-child{margin-top:0}.tui-editor-socket .details-wrapper,.tui-editor-socket .t-details-wrapper{margin-bottom:.5rem;position:relative;display:flex}.tui-editor-socket .details-wrapper_rendered .details-arrow,.tui-editor-socket .t-details-wrapper_rendered .details-arrow,.tui-editor-socket .details-wrapper_rendered .t-details-arrow,.tui-editor-socket .t-details-wrapper_rendered .t-details-arrow{pointer-events:none}.tui-editor-socket .details-wrapper_rendered summary,.tui-editor-socket .t-details-wrapper_rendered summary{transition:transform var(--tui-duration, .3s);cursor:pointer;pointer-events:auto}.tui-editor-socket .details-wrapper_rendered summary:hover,.tui-editor-socket .t-details-wrapper_rendered summary:hover{background:var(--tui-base-02)}.tui-editor-socket details[open]+.details-arrow,.tui-editor-socket details[open]+.t-details-arrow{top:1.75rem;transform:rotate(225deg)}.tui-editor-socket{display:block;margin:0;color:var(--tui-text-01);font:var(--tui-font-text-m)}.tui-editor-socket[tuiTiptapEditor]{overflow:hidden}.tui-editor-socket._preview-image img{cursor:pointer}.tui-editor-socket h1,.tui-editor-socket h2,.tui-editor-socket h3,.tui-editor-socket h4,.tui-editor-socket h5,.tui-editor-socket h6{word-break:break-word;line-height:normal}.tui-editor-socket h1:first-child,.tui-editor-socket h2:first-child,.tui-editor-socket pre:first-child,.tui-editor-socket p:last-child,.tui-editor-socket pre:last-child{margin-bottom:0}.tui-editor-socket a:not([data-type="jump-anchor"]){color:var(--tui-link);text-decoration:none;outline:none}.tui-editor-socket a:not([data-type="jump-anchor"]):hover{color:var(--tui-link-hover);text-decoration:underline}.tui-editor-socket a:not([data-type="jump-anchor"]):active{color:var(--tui-primary-active)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]{text-decoration:underline;-webkit-text-decoration-color:var(--tui-link);text-decoration-color:var(--tui-link)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:before{content:"#"}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:hover{color:var(--tui-link)}.tui-editor-socket .ProseMirror video,.tui-editor-socket .ProseMirror audio{pointer-events:none}.tui-editor-socket .tableWrapper,.tui-editor-socket .tui-table-wrapper{overflow-x:auto}.tui-editor-socket mark{background:unset;color:inherit}.tui-editor-socket .ProseMirror{min-height:5.375rem;padding:.2rem 1rem;outline:none;white-space:pre-wrap}.tui-editor-socket p:empty:after{content:" ";white-space:pre}.tui-editor-socket p:first-child{margin-top:0}.tui-editor-socket ul,.tui-editor-socket ol{list-style-type:none;margin:1rem 1rem 1rem 1.5rem;padding:0}.tui-editor-socket li{margin:1rem 0}.tui-editor-socket li p{display:inline;margin:0 auto;word-break:break-word}.tui-editor-socket ul li p{display:inline-block}.tui-editor-socket ul>li:before{content:"";display:inline-block;width:.5rem;height:.5rem;border-radius:100%;margin:.5rem .875rem .0625rem -1.375rem;background-color:var(--tui-primary);vertical-align:top;box-sizing:border-box}.tui-editor-socket li ul>li:before{background:none;border:.125rem solid var(--tui-primary)}.tui-editor-socket li ul>li>ul>li:before{background:var(--tui-primary);border-radius:0;width:.375rem;height:.375rem}.tui-editor-socket ol{counter-reset:item}.tui-editor-socket ol>li:before{content:counters(item,".") ".";width:1.5rem;margin:0 .75rem 0 -1.5rem;counter-increment:item;color:var(--tui-base-05);vertical-align:top}.tui-editor-socket pre{white-space:pre-wrap;word-break:break-word;border-radius:.25rem;margin:1rem 0;padding:.75rem 1rem;font-family:Courier,monospace;color:var(--tui-text-02);background:var(--tui-base-02)}.tui-editor-socket code{box-shadow:none}.tui-editor-socket pre+pre{margin-top:-1.8125rem;padding-top:0}.tui-editor-socket blockquote{margin:1.25rem 0 1.25rem 1.5rem;padding-left:1.0625rem;border-left:1px solid var(--tui-base-04)}.tui-editor-socket p{margin:1rem 0}.tui-editor-socket hr{border:none;border-top:1px solid var(--tui-base-03);margin:1rem 0}.tui-editor-socket table{border-collapse:collapse;table-layout:fixed;width:100%;margin:0;overflow:hidden}.tui-editor-socket table td{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word}.tui-editor-socket table th{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word;font-weight:bold;text-align:left;background-color:var(--tui-base-02);min-height:2rem}.tui-editor-socket table .column-resize-handle{position:absolute;right:-2px;top:0;bottom:-2px;width:4px;background-color:#adf;pointer-events:none}.tui-editor-socket table td>*{margin-top:0;margin-bottom:0}.tui-editor-socket table th>*{margin-top:0;margin-bottom:0}.tui-editor-socket .resize-cursor{cursor:ew-resize;cursor:col-resize}.tui-editor-socket table .tableWrapper{overflow-x:auto}.tui-editor-socket .selectedCell:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:var(--tui-selection);pointer-events:none}.tui-editor-socket font[face="Courier New"]{display:inline-block;padding:.25rem .5rem;border-radius:.25rem;background-color:#ecf1f7;word-break:break-word}.t-editor-placeholder:before{content:attr(data-placeholder);float:left;color:var(--tui-base-05);pointer-events:none;height:0}.tui-group-node{display:flex;flex-direction:row}.tui-group-node:hover>.tui-group-pointer{pointer-events:auto;opacity:1}.tui-group-pointer{opacity:0;min-height:.8125rem;max-height:.8125rem;min-width:.8125rem;max-width:.8125rem;margin:.3125rem .3125rem 0 0;cursor:-webkit-grab;cursor:grab;background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="black" /></svg>\');background-repeat:no-repeat;background-size:contain;background-position:center}[data-mode=onDark] .tui-group-pointer{background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="white" /></svg>\')}\n'],encapsulation:2,changeDetection:0}),H})()},69303:(Yt,vt,c)=>{c.d(vt,{a:()=>st});var v=c(64762),l=c(12057),y=c(74788),P=c(24751),g=c(17406),ot=c(19074),H=c(84614),X=c(14309),et=c(27863),_t=c(50259),dt=c(79089),Mt=c(40939),rt=c(2697),ft=c(17163),Ot=c(3881),St=c(1433),Pt=c(9872),Dt=c(4997),pt=c(33250),tt=c(26072),F=c(9829),mt=c(82886),j=c(39088),At=c(20179),kt=c(74982),yt=c(45050);function Bt(J,Q){if(1&J){const nt=y.EpF();y.TgZ(0,"tui-toolbar",9),y.NdJ("fileAttached",function(Jt){return y.CHM(nt),y.oxw(2).fileAttached.emit(Jt)}),y.Hsn(1,1),y.qZA()}if(2&J){const nt=y.oxw(2);y.Q6J("tools",nt.tools)("disabled",!nt.interactive)}}function Ht(J,Q){if(1&J&&(y.TgZ(0,"div",10),y._uU(1),y.qZA()),2&J){const nt=y.oxw(2);y.xp6(1),y.hij(" ",nt.exampleText," ")}}function Kt(J,Q){if(1&J){const nt=y.EpF();y.TgZ(0,"div",11),y.TgZ(1,"tui-editor-socket",12),y.NdJ("valueChange",function(Jt){return y.CHM(nt),y.oxw(2).onModelChange(Jt)})("stateChange",function(){return 0}),y.qZA(),y.qZA()}if(2&J){y.oxw();const nt=y.MAs(9),wt=y.oxw();y.Q6J("tuiDropdownSelection",wt.dropdownSelectionHandler)("tuiDropdown",nt),y.xp6(1),y.Q6J("value",wt.value)("editable",wt.interactive)}}function ut(J,Q){if(1&J){const nt=y.EpF();y.TgZ(0,"tui-edit-link",13,14),y.NdJ("addLink",function(Jt){y.CHM(nt);const Zt=y.MAs(1),ne=y.oxw(2);return Zt.anchorMode?ne.addAnchor(Jt):ne.addLink(Jt)})("removeLink",function(){y.CHM(nt);const Jt=y.MAs(1),Zt=y.oxw(2);return Jt.anchorMode?Zt.removeAnchor():Zt.removeLink()}),y.qZA()}}function L(J,Q){if(1&J){const nt=y.EpF();y.TgZ(0,"div",1),y.NdJ("tuiActiveZoneChange",function(Jt){return y.CHM(nt),y.oxw().onActiveZone(Jt)}),y.TgZ(1,"div",2),y.YNc(2,Bt,2,2,"tui-toolbar",3),y.TgZ(3,"div",4),y.Hsn(4),y.qZA(),y.YNc(5,Ht,2,1,"div",5),y.qZA(),y.TgZ(6,"tui-scrollbar",6),y.YNc(7,Kt,2,4,"div",7),y.YNc(8,ut,2,0,"ng-template",null,8,y.W1O),y._UZ(10,"tui-editor-portal-host"),y.qZA(),y.qZA()}if(2&J){const nt=Q.tuiLet,wt=y.oxw();y.Q6J("readOnly",wt.readOnly)("disabled",wt.disabled)("focus",wt.computedFocused)("hover",wt.pseudoHover)("invalid",wt.computedInvalid),y.xp6(2),y.Q6J("ngIf",nt),y.xp6(1),y.ekj("t-placeholder_raised",wt.placeholderRaised),y.xp6(2),y.Q6J("ngIf",wt.hasExampleText),y.xp6(2),y.Q6J("ngIf",nt)}}const it=["*",[["tools"]]];class st extends _t.AbstractTuiControl{constructor(Q,nt,wt,Jt,Zt,ne){super(Q,nt),this.editorLoaded$=wt,this.editorService=Jt,this.contentProcessor=Zt,this.documentRef=ne,this.exampleText="",this.tools=ot.Db,this.fileAttached=new y.vpe,this.focused=!1,this.isSelectionLink=zt=>this.currentFocusedNodeIsAnchor(zt)&&(0,et.nC)(zt)}get nativeFocusableElement(){var Q;return this.computedDisabled?null:(null===(Q=this.element)||void 0===Q?void 0:Q.nativeElement)||null}get dropdownSelectionHandler(){return this.focused?this.isSelectionLink:_t.ALWAYS_FALSE_HANDLER}get editor(){return this.editorService.getOriginTiptapEditor()?this.editorService:null}get placeholderRaised(){return this.computedFocused&&!this.readOnly||this.hasValue}get hasExampleText(){return!!this.exampleText&&this.computedFocused&&!this.hasValue&&!this.readOnly}writeValue(Q){var nt;if(Q===this.value)return;const wt=this.contentProcessor(Q||"");super.writeValue(wt),wt!==Q&&(null===(nt=this.control)||void 0===nt||nt.setValue(wt,{onlySelf:!1,emitEvent:!1,emitModelToViewChange:!1,emitViewToModelChange:!1}))}onActiveZone(Q){var nt;this.focused=Q,this.updateFocused(Q),null===(nt=this.control)||void 0===nt||nt.updateValueAndValidity()}onModelChange(Q){this.updateValue(Q)}addAnchor(Q){var nt;null===(nt=this.editor)||void 0===nt||nt.setAnchor(Q)}removeAnchor(){var Q;null===(Q=this.editor)||void 0===Q||Q.removeAnchor()}addLink(Q){var nt,wt;null===(nt=this.editor)||void 0===nt||nt.selectClosest(),null===(wt=this.editor)||void 0===wt||wt.setLink(Q)}removeLink(){var Q;null===(Q=this.editor)||void 0===Q||Q.unsetLink()}ngOnDestroy(){var Q;null===(Q=this.editor)||void 0===Q||Q.destroy()}getFallbackValue(){return""}currentFocusedNodeIsAnchor(Q){var nt,wt,Jt;return!!(null===(wt=null===(nt=Q.startContainer.parentElement)||void 0===nt?void 0:nt.closest("a"))||void 0===wt?void 0:wt.contains((null===(Jt=this.documentRef.getSelection())||void 0===Jt?void 0:Jt.focusNode)||null))}get hasValue(){return!!this.value}}st.\u0275fac=function(Q){return new(Q||st)(y.Y36(P.a5,10),y.Y36(y.sBO),y.Y36(X.ZW),y.Y36(H.$3),y.Y36(X.F1),y.Y36(l.K0))},st.\u0275cmp=y.Xpm({type:st,selectors:[["tui-editor"]],viewQuery:function(Q,nt){if(1&Q&&(y.Gf(H.JU,5,y.SBq),y.Gf(g.M6,5)),2&Q){let wt;y.iGM(wt=y.CRH())&&(nt.element=wt.first),y.iGM(wt=y.CRH())&&(nt.toolbar=wt.first)}},inputs:{exampleText:"exampleText",tools:"tools"},outputs:{fileAttached:"fileAttached"},features:[y._Bn([(0,_t.tuiAsFocusableItemAccessor)(st),dt.m]),y.qOj],ngContentSelectors:["*","tools"],decls:2,vars:3,consts:[["tuiWrapper","","appearance","textfield","class","t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange",4,"tuiLet"],["tuiWrapper","","appearance","textfield",1,"t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange"],[1,"t-toolbar-wrapper"],[3,"tools","disabled","fileAttached",4,"ngIf"],[1,"t-placeholder"],["class","t-example-text",4,"ngIf"],["tuiEditorPortal","",1,"t-scrollbar"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown",4,"ngIf"],["dropdown",""],[3,"tools","disabled","fileAttached"],[1,"t-example-text"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown"],["tuiTiptapEditor","","spellcheck","false",1,"tui-editor-socket",3,"value","editable","valueChange","stateChange"],[3,"addLink","removeLink"],["link",""]],template:function(Q,nt){1&Q&&(y.F$t(it),y.YNc(0,L,11,10,"div",0),y.ALo(1,"async")),2&Q&&y.Q6J("tuiLet",y.lcZ(1,1,nt.editorLoaded$))},directives:[Mt.L,rt.o,ft.e,l.O5,Ot.I,St.A,Pt.d,Dt.M,pt.Ek,tt.t,F.V,mt.A,j.y,At.D,kt.J,yt.l],pipes:[l.Ov],styles:["[_nghost-%COMP%]{position:relative;z-index:0;display:block;font:var(--tui-font-text-m);border-radius:var(--tui-radius-m)}.t-wrapper[_ngcontent-%COMP%]{display:flex;max-height:inherit;min-height:10rem;cursor:text;overflow:hidden;flex-direction:column;border-radius:inherit}.t-placeholder[_ngcontent-%COMP%]{transition-property:transform,font-size,color,letter-spacing;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;font:var(--tui-font-text-s);color:var(--tui-text-01);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:var(--tui-text-02);pointer-events:none;will-change:transform;transform:translateY(0);position:absolute;left:1rem;margin-top:1rem;width:95%;font-size:.9375rem}.t-placeholder_raised[_ngcontent-%COMP%]{transform:translateY(-.625rem)}[data-size=m][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font:var(--tui-font-text-xs);transform:translateY(-.5rem);letter-spacing:.025rem}._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], ._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill)}[data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], [data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill-night)}._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-03)}[data-size=l][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{font-size:.9375rem}[data-size=l][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font-size:.8156rem}[data-size=m]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01)}[data-mode=onDark][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}[data-size=m][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}@supports (-webkit-hyphens: none){.t-placeholder[_ngcontent-%COMP%]{will-change:unset;transition-property:transform,color,letter-spacing}}.t-placeholder_raised[_ngcontent-%COMP%]{width:110%}.t-example-text[_ngcontent-%COMP%]{position:absolute;left:1rem;margin-top:1.6rem;color:var(--tui-base-06);letter-spacing:normal;text-transform:none}.t-example-text_light[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}.t-example-text_dark[_ngcontent-%COMP%]{color:var(--tui-text-03)}.t-scrollbar[_ngcontent-%COMP%]{display:flex;max-height:inherit;border-top:1.625rem solid transparent;border-bottom:1px solid transparent;box-sizing:border-box}"],changeDetection:0}),(0,v.gn)([(0,_t.tuiDefaultProp)()],st.prototype,"exampleText",void 0),(0,v.gn)([(0,_t.tuiDefaultProp)()],st.prototype,"tools",void 0)},79089:(Yt,vt,c)=>{c.d(vt,{m:()=>_t});var v=c(74788),l=c(84614),y=c(14309),P=c(82298),g=c(9112),ot=c(15257),H=c(88002),X=c(47349),et=c(73825);const _t=[{provide:y.F4,deps:[y.Wf],useFactory:dt=>{const Mt=new P.t(1);return Promise.all(dt).then(rt=>Mt.next(rt)),Mt}},{provide:y.Y1,deps:[v.Qsj],useFactory:dt=>dt.createElement("div")},{provide:y.ZW,deps:[y.Y1,y.F4,y.bG],useFactory:(dt,Mt,rt)=>(0,g.aj)([rt,Mt]).pipe((0,ot.q)(1),(0,H.U)(([ft,Ot])=>new ft({element:dt,extensions:Ot})),(0,X.d)({bufferSize:1,refCount:!0}))},l.$3,et.Y]},9872:(Yt,vt,c)=>{c.d(vt,{d:()=>y});var v=c(50259),l=c(74788);let y=(()=>{class P extends v.AbstractTuiPortalHostComponent{}return P.\u0275fac=function(){let g;return function(H){return(g||(g=l.n5z(P)))(H||P)}}(),P.\u0275cmp=l.Xpm({type:P,selectors:[["tui-editor-portal-host"]],features:[l._Bn([{provide:v.AbstractTuiPortalService,useExisting:v.TuiDropdownPortalService},{provide:v.AbstractTuiPortalHostComponent,useExisting:P}]),l.qOj],decls:2,vars:0,consts:[["viewContainer",""]],template:function(ot,H){1&ot&&l.GkF(0,null,0)},styles:["[_nghost-%COMP%]{position:relative;z-index:1;display:block;height:100%}"],changeDetection:0}),P})()},1433:(Yt,vt,c)=>{c.d(vt,{A:()=>g});var v=c(74788),l=c(50259),y=c(3497),P=c(73825);let g=(()=>{class ot extends y.TuiRectAccessor{constructor(X){super(),this.elementRef=X,this.type="viewport"}getClientRect(){return this.elementRef.nativeElement.getBoundingClientRect()}}return ot.\u0275fac=function(X){return new(X||ot)(v.Y36(v.SBq))},ot.\u0275dir=v.lG2({type:ot,selectors:[["","tuiEditorPortal",""]],features:[v._Bn([{provide:l.TuiDropdownPortalService,useExisting:P.Y},(0,y.tuiAsViewport)(ot)]),v.qOj]}),ot})()},73825:(Yt,vt,c)=>{c.d(vt,{Y:()=>y});var v=c(50259),l=c(74788);let y=(()=>{class P extends v.AbstractTuiPortalService{}return P.\u0275fac=function(){let g;return function(H){return(g||(g=l.n5z(P)))(H||P)}}(),P.\u0275prov=l.Yz7({token:P,factory:P.\u0275fac}),P})()},19769:(Yt,vt,c)=>{c.d(vt,{j:()=>Pt});var v=c(64762),l=c(74788),y=c(24751),P=c(91211),g=c(27863),ot=c(50259),H=c(3497),X=c(62939),et=c(63060),_t=c(62733),dt=c(3729),Mt=c(23999),rt=c(17163);function ft(Dt,pt){if(1&Dt&&l._UZ(0,"div",4),2&Dt){const tt=l.oxw();l.Udp("background",tt.background)}}function Ot(Dt,pt){if(1&Dt){const tt=l.EpF();l.TgZ(0,"tui-color-selector",5),l.NdJ("colorChange",function(mt){return l.CHM(tt),l.oxw().onValueChange(mt)}),l.qZA()}if(2&Dt){const tt=pt.$implicit,F=l.oxw();l.Q6J("tuiActiveZoneParent",tt)("colors",F.colors)("color",F.value)}}class Pt extends ot.AbstractTuiControl{constructor(pt,tt,F){super(pt,tt),this.domSanitizer=F,this.colors=new Map,this.open=!1}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return!!this.dropdown&&this.dropdown.focused}get background(){return this.sanitize(this.value,this.domSanitizer)}onClick(){this.open=!this.open}onValueChange(pt){this.updateValue(pt)}onFocused(pt){this.updateFocused(pt)}getFallbackValue(){return"#000000"}sanitize(pt,tt){return pt.startsWith("linear-gradient(")?tt.bypassSecurityTrustStyle((0,g.CH)((0,g._N)((0,g.U5)(pt)))):pt}}Pt.\u0275fac=function(pt){return new(pt||Pt)(l.Y36(y.a5,10),l.Y36(l.sBO),l.Y36(P.H7))},Pt.\u0275cmp=l.Xpm({type:Pt,selectors:[["tui-input-color"]],viewQuery:function(pt,tt){if(1&pt&&(l.Gf(H.TuiPrimitiveTextfieldComponent,5),l.Gf(H.TuiHostedDropdownComponent,5)),2&pt){let F;l.iGM(F=l.CRH())&&(tt.textfield=F.first),l.iGM(F=l.CRH())&&(tt.dropdown=F.first)}},hostBindings:function(pt,tt){1&pt&&l.NdJ("click",function(){return tt.onClick()})},inputs:{colors:"colors"},features:[l._Bn([],[(0,H.tuiDropdownOptionsProvider)({maxHeight:600})]),l.qOj],ngContentSelectors:["*"],decls:7,vars:12,consts:[[1,"t-wrapper",3,"content","open","openChange"],[1,"t-textfield",3,"tuiTextfieldIconLeft","pseudoFocus","pseudoHover","pseudoActive","invalid","focusable","nativeId","disabled","readOnly","value","valueChange","focusedChange"],["color",""],["picker",""],[1,"t-color"],[3,"tuiActiveZoneParent","colors","color","colorChange"]],template:function(pt,tt){if(1&pt&&(l.F$t(),l.TgZ(0,"tui-hosted-dropdown",0),l.NdJ("openChange",function(mt){return tt.open=mt}),l.TgZ(1,"tui-primitive-textfield",1),l.NdJ("valueChange",function(mt){return tt.onValueChange(mt)})("focusedChange",function(mt){return tt.onFocused(mt)}),l.Hsn(2),l.qZA(),l.qZA(),l.YNc(3,ft,1,2,"ng-template",null,2,l.W1O),l.YNc(5,Ot,1,3,"ng-template",null,3,l.W1O)),2&pt){const F=l.MAs(4),mt=l.MAs(6);l.Q6J("content",mt)("open",tt.open),l.xp6(1),l.Q6J("tuiTextfieldIconLeft",F)("pseudoFocus",tt.computedFocused)("pseudoHover",tt.pseudoHover)("pseudoActive",tt.pseudoActive)("invalid",tt.computedInvalid)("focusable",tt.focusable)("nativeId",tt.nativeId)("disabled",tt.disabled)("readOnly",tt.readOnly)("value",tt.value)}},directives:[X.o,et.y,_t.B,dt.aR,Mt.s,rt.e],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-wrapper[_ngcontent-%COMP%]{display:flex;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-color[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-03-dark);border-radius:.125rem}"],changeDetection:0}),(0,v.gn)([(0,ot.tuiDefaultProp)()],Pt.prototype,"colors",void 0),(0,v.gn)([ot.tuiPure],Pt.prototype,"sanitize",null)},37924:(Yt,vt,c)=>{c.d(vt,{X:()=>Dt});var v=c(84614),l=c(14309),y=c(9112),P=c(88002),g=c(74788),ot=c(12057),H=c(40939),X=c(62939),et=c(76189),_t=c(219),dt=c(67446),Mt=c(29070),rt=c(54255),ft=c(15491);function Ot(pt,tt){if(1&pt){const F=g.EpF();g.TgZ(0,"div",6),g.TgZ(1,"button",7),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.onAlign("left")}),g.qZA(),g.TgZ(2,"button",8),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.onAlign("center")}),g.qZA(),g.TgZ(3,"button",9),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.onAlign("right")}),g.qZA(),g.TgZ(4,"button",10),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.onAlign("justify")}),g.qZA(),g.qZA()}if(2&pt){const F=g.oxw().tuiLet,mt=g.oxw().ngIf;g.xp6(1),g.Q6J("pseudoActive",!(null==F||!F.left))("tuiHint",mt.justifyLeft),g.xp6(1),g.Q6J("pseudoActive",!(null==F||!F.center))("tuiHint",mt.justifyCenter),g.xp6(1),g.Q6J("pseudoActive",!(null==F||!F.right))("tuiHint",mt.justifyRight),g.xp6(1),g.Q6J("pseudoActive",!(null==F||!F.justify))("tuiHint",mt.justifyFull)}}function St(pt,tt){if(1&pt&&(g.TgZ(0,"tui-hosted-dropdown",2,3),g._UZ(2,"button",4),g.YNc(3,Ot,5,8,"ng-template",null,5,g.W1O),g.qZA()),2&pt){const F=g.MAs(1),mt=g.MAs(4),j=g.oxw().ngIf;g.Q6J("content",mt),g.xp6(2),g.Q6J("tuiHint",j.justify)("pseudoActive",F.open)("focusable",F.open)}}function Pt(pt,tt){if(1&pt&&(g.ynx(0),g.YNc(1,St,5,4,"tui-hosted-dropdown",1),g.ALo(2,"async"),g.BQk()),2&pt){const F=g.oxw();g.xp6(1),g.Q6J("tuiLet",g.lcZ(2,1,F.alignState$))}}let Dt=(()=>{class pt{constructor(F,mt){this.editor=F,this.texts$=mt,this.alignState$=(0,y.aj)([this.editor.isActive$({textAlign:"left"}),this.editor.isActive$({textAlign:"right"}),this.editor.isActive$({textAlign:"center"}),this.editor.isActive$({textAlign:"justify"})]).pipe((0,P.U)(([j,At,kt,yt])=>({left:j,right:At,center:kt,justify:yt})))}}return pt.\u0275fac=function(F){return new(F||pt)(g.Y36(v.$3),g.Y36(l.rf))},pt.\u0275cmp=g.Xpm({type:pt,selectors:[["tui-align-content"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["align",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["alignDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignCenterLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignRightLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignJustifyLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"]],template:function(F,mt){1&F&&(g.YNc(0,Pt,3,3,"ng-container",0),g.ALo(1,"async")),2&F&&g.Q6J("ngIf",g.lcZ(1,1,mt.texts$))},directives:[ot.O5,H.L,X.o,et.v,_t.$,dt.D,Mt.x,rt.t,ft.D],pipes:[ot.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),pt})()},15587:(Yt,vt,c)=>{c.d(vt,{T:()=>Dt});var v=c(84614),l=c(14309),y=c(88002),P=c(87519),g=c(74788),ot=c(62939),H=c(76189),X=c(219),et=c(67446),_t=c(29070),dt=c(54255),Mt=c(15491),rt=c(20933),ft=c(12057),Ot=c(35065);function St(pt,tt){if(1&pt){const F=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){const At=g.CHM(F).index;return g.oxw(2).onCode(!!At)}),g._uU(1),g.qZA()}if(2&pt){const F=tt.$implicit;g.xp6(1),g.hij(" ",F," ")}}function Pt(pt,tt){if(1&pt&&(g.TgZ(0,"tui-data-list"),g.YNc(1,St,2,1,"button",4),g.ALo(2,"async"),g.qZA()),2&pt){const F=g.oxw();g.xp6(1),g.Q6J("ngForOf",g.lcZ(2,1,F.codeOptionsTexts$))}}let Dt=(()=>{class pt{constructor(F,mt,j){this.editor=F,this.texts$=mt,this.codeOptionsTexts$=j,this.hintText$=this.texts$.pipe((0,y.U)(At=>At.code)),this.insideCode$=this.editor.stateChange$.pipe((0,y.U)(()=>this.editor.isActive("code")||this.editor.isActive("codeBlock")),(0,P.x)())}onCode(F){F?this.editor.toggleCodeBlock():this.editor.toggleCode()}}return pt.\u0275fac=function(F){return new(F||pt)(g.Y36(v.$3),g.Y36(l.rf),g.Y36(l.Mr))},pt.\u0275cmp=g.Xpm({type:pt,selectors:[["tui-code"]],decls:7,vars:8,consts:[[3,"content"],["codes",""],["tuiIconButton","","type","button","size","s","icon","tuiIconCodeLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["codesDropdown",""],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(F,mt){if(1&F&&(g.TgZ(0,"tui-hosted-dropdown",0,1),g._UZ(2,"button",2),g.ALo(3,"async"),g.ALo(4,"async"),g.YNc(5,Pt,3,3,"ng-template",null,3,g.W1O),g.qZA()),2&F){const j=g.MAs(1),At=g.MAs(6);g.Q6J("content",At),g.xp6(2),g.Q6J("tuiHint",g.lcZ(3,4,mt.hintText$))("pseudoActive",j.open||g.lcZ(4,6,mt.insideCode$))("focusable",j.open)}},directives:[ot.o,H.v,X.$,et.D,_t.x,dt.t,Mt.D,rt.q,ft.sg,Ot.v],pipes:[ft.Ov],encapsulation:2,changeDetection:0}),pt})()},18832:(Yt,vt,c)=>{c.d(vt,{U:()=>ft});var v=c(84614),l=c(14309),y=c(88002),P=c(87519),g=c(74788),ot=c(12057),H=c(76189),X=c(219),et=c(67446),_t=c(29070),dt=c(54255),Mt=c(15491);function rt(Ot,St){if(1&Ot){const Pt=g.EpF();g.TgZ(0,"button",1),g.NdJ("click",function(){return g.CHM(Pt),g.oxw().removeDetails()}),g.ALo(1,"async"),g.qZA()}if(2&Ot){const Pt=St.ngIf,Dt=g.oxw();g.Q6J("tuiHint",Pt.removeDetails)("focusable",!1)("disabled",!!g.lcZ(1,3,Dt.disabled$))}}let ft=(()=>{class Ot{constructor(Pt,Dt){this.editor=Pt,this.texts$=Dt,this.disabled$=this.editor.stateChange$.pipe((0,y.U)(()=>!this.editor.isActive("details")),(0,P.x)())}removeDetails(){this.editor.removeDetails()}}return Ot.\u0275fac=function(Pt){return new(Pt||Ot)(g.Y36(v.$3),g.Y36(l.rf))},Ot.\u0275cmp=g.Xpm({type:Ot,selectors:[["tui-details-remove"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled","click"]],template:function(Pt,Dt){1&Pt&&(g.YNc(0,rt,2,5,"button",0),g.ALo(1,"async")),2&Pt&&g.Q6J("ngIf",g.lcZ(1,1,Dt.texts$))},directives:[ot.O5,H.v,X.$,et.D,_t.x,dt.t,Mt.D],pipes:[ot.Ov],encapsulation:2,changeDetection:0}),Ot})()},50237:(Yt,vt,c)=>{c.d(vt,{y:()=>Mt});var v=c(84614),l=c(14309),y=c(74788),P=c(12057),g=c(76189),ot=c(219),H=c(67446),X=c(29070),et=c(54255),_t=c(15491);function dt(rt,ft){if(1&rt){const Ot=y.EpF();y.TgZ(0,"button",1),y.NdJ("click",function(){return y.CHM(Ot),y.oxw().setDetails()}),y.qZA()}2&rt&&y.Q6J("tuiHint",ft.ngIf.setDetails)("focusable",!1)}let Mt=(()=>{class rt{constructor(Ot,St){this.editor=Ot,this.texts$=St}setDetails(){this.editor.setDetails()}}return rt.\u0275fac=function(Ot){return new(Ot||rt)(y.Y36(v.$3),y.Y36(l.rf))},rt.\u0275cmp=y.Xpm({type:rt,selectors:[["tui-details"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","click"]],template:function(Ot,St){1&Ot&&(y.YNc(0,dt,1,2,"button",0),y.ALo(1,"async")),2&Ot&&y.Q6J("ngIf",y.lcZ(1,1,St.texts$))},directives:[P.O5,g.v,ot.$,H.D,X.x,et.t,_t.D],pipes:[P.Ov],encapsulation:2,changeDetection:0}),rt})()},84985:(Yt,vt,c)=>{c.d(vt,{m:()=>pt});var v=c(84614),l=c(14309),y=c(50259),P=c(88002),g=c(74788),ot=c(62939),H=c(76189),X=c(219),et=c(67446),_t=c(29070),dt=c(54255),Mt=c(15491),rt=c(20933),ft=c(12057),Ot=c(35065);const St=function(){return{}};function Pt(tt,F){if(1&tt){const mt=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){const kt=g.CHM(mt).$implicit;return g.oxw(2).setFontOption(kt)}),g.ALo(1,"lowercase"),g._uU(2),g.qZA()}if(2&tt){const mt=F.$implicit;g.Udp("font-family",mt.family)("font-size",mt.px,"px")("font-weight",mt.weight),g.Q6J("ngClass",(null==mt?null:mt.ngClass)||g.DdM(11,St)),g.uIk("automation-id","tui_font__"+g.lcZ(1,9,mt.name||"")),g.xp6(2),g.hij(" ",mt.name," ")}}function Dt(tt,F){if(1&tt&&(g.TgZ(0,"tui-data-list"),g.YNc(1,Pt,3,12,"button",4),g.ALo(2,"async"),g.qZA()),2&tt){const mt=g.oxw();g.xp6(1),g.Q6J("ngForOf",g.lcZ(2,1,mt.fontsOptions$))}}let pt=(()=>{class tt{constructor(mt,j,At,kt){this.options=mt,this.editor=j,this.texts$=At,this.fontOptionsTexts$=kt,this.fontsOptions$=this.fontOptionsTexts$.pipe((0,P.U)(yt=>this.options.fontOptions(yt))),this.fontText$=this.texts$.pipe((0,P.U)(yt=>yt.font))}onClick({headingLevel:mt,px:j}){this.setFontOption({headingLevel:mt,px:j})}setFontOption({headingLevel:mt,px:j}){this.clearPreviousTextStyles(),mt?this.editor.setHeading(mt):this.editor.setParagraph({fontSize:(0,y.tuiPx)(j||0)})}clearPreviousTextStyles(){this.editor.removeEmptyTextStyle(),this.editor.toggleMark("textStyle")}}return tt.\u0275fac=function(mt){return new(mt||tt)(g.Y36(l.mJ),g.Y36(v.$3),g.Y36(l.rf),g.Y36(l.UN))},tt.\u0275cmp=g.Xpm({type:tt,selectors:[["tui-font-size"]],decls:6,vars:6,consts:[[3,"content"],["fonts",""],["tuiIconButton","","type","button","size","s","appearance","icon","icon","tuiIconFontLarge","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["fontsDropdown",""],["tuiOption","",3,"fontFamily","fontSize","fontWeight","ngClass","click",4,"ngFor","ngForOf"],["tuiOption","",3,"ngClass","click"]],template:function(mt,j){if(1&mt&&(g.TgZ(0,"tui-hosted-dropdown",0,1),g._UZ(2,"button",2),g.ALo(3,"async"),g.YNc(4,Dt,3,3,"ng-template",null,3,g.W1O),g.qZA()),2&mt){const At=g.MAs(1),kt=g.MAs(5);g.Q6J("content",kt),g.xp6(2),g.Q6J("tuiHint",g.lcZ(3,4,j.fontText$))("pseudoActive",At.open)("focusable",At.open)}},directives:[ot.o,H.v,X.$,et.D,_t.x,dt.t,Mt.D,rt.q,ft.sg,Ot.v,ft.mk],pipes:[ft.Ov,ft.i8],encapsulation:2,changeDetection:0}),tt})()},62976:(Yt,vt,c)=>{c.d(vt,{h:()=>j});var v=c(19074),l=c(84614),y=c(48699),P=c(14309),g=c(9112),ot=c(88002),H=c(74788),X=c(12057),et=c(62939),_t=c(76189),dt=c(219),Mt=c(67446),rt=c(29070),ft=c(54255),Ot=c(15491);function St(At,kt){if(1&At){const yt=H.EpF();H.TgZ(0,"button",11),H.NdJ("click",function(){return H.CHM(yt),H.oxw(4).editor.toggleBold()}),H.qZA()}if(2&At){const yt=H.oxw(2).ngIf,Bt=H.oxw().ngIf;H.Q6J("tuiHint",Bt.bold)("pseudoActive",yt.bold)}}function Pt(At,kt){if(1&At){const yt=H.EpF();H.TgZ(0,"button",12),H.NdJ("click",function(){return H.CHM(yt),H.oxw(4).editor.toggleItalic()}),H.qZA()}if(2&At){const yt=H.oxw(2).ngIf,Bt=H.oxw().ngIf;H.Q6J("tuiHint",Bt.italic)("pseudoActive",yt.italic)}}function Dt(At,kt){if(1&At){const yt=H.EpF();H.TgZ(0,"button",13),H.NdJ("click",function(){return H.CHM(yt),H.oxw(4).editor.toggleUnderline()}),H.qZA()}if(2&At){const yt=H.oxw(2).ngIf,Bt=H.oxw().ngIf;H.Q6J("tuiHint",Bt.underline)("pseudoActive",yt.underline)}}function pt(At,kt){if(1&At){const yt=H.EpF();H.TgZ(0,"button",14),H.NdJ("click",function(){return H.CHM(yt),H.oxw(4).editor.toggleStrike()}),H.qZA()}if(2&At){const yt=H.oxw(2).ngIf,Bt=H.oxw().ngIf;H.Q6J("tuiHint",Bt.strikeThrough)("pseudoActive",yt.strike)}}function tt(At,kt){if(1&At&&(H.TgZ(0,"div",6),H.YNc(1,St,1,2,"button",7),H.YNc(2,Pt,1,2,"button",8),H.YNc(3,Dt,1,2,"button",9),H.YNc(4,pt,1,2,"button",10),H.qZA()),2&At){const yt=H.oxw(3);H.xp6(1),H.Q6J("ngIf",yt.isEnabled(yt.TuiEditorTool.Bold)),H.xp6(1),H.Q6J("ngIf",yt.isEnabled(yt.TuiEditorTool.Italic)),H.xp6(1),H.Q6J("ngIf",yt.isEnabled(yt.TuiEditorTool.Underline)),H.xp6(1),H.Q6J("ngIf",yt.isEnabled(yt.TuiEditorTool.Strikethrough))}}function F(At,kt){if(1&At&&(H.TgZ(0,"tui-hosted-dropdown",2,3),H._UZ(2,"button",4),H.YNc(3,tt,5,4,"ng-template",null,5,H.W1O),H.qZA()),2&At){const yt=kt.ngIf,Bt=H.MAs(1),Ht=H.MAs(4),Kt=H.oxw().ngIf;H.Q6J("content",Ht),H.xp6(2),H.Q6J("tuiHint",Kt.fontStyle)("pseudoActive",Bt.open||yt.bold||yt.italic||yt.underline||yt.strike)("focusable",Bt.open)}}function mt(At,kt){if(1&At&&(H.ynx(0),H.YNc(1,F,5,4,"tui-hosted-dropdown",1),H.ALo(2,"async"),H.BQk()),2&At){const yt=H.oxw();H.xp6(1),H.Q6J("ngIf",H.lcZ(2,1,yt.fontStyleState$))}}let j=(()=>{class At{constructor(yt,Bt){this.editor=yt,this.texts$=Bt,this.toolsSet=new Set(v.Db),this.TuiEditorTool=y._,this.fontStyleState$=(0,g.aj)([this.editor.isActive$("bold"),this.editor.isActive$("italic"),this.editor.isActive$("underline"),this.editor.isActive$("strike")]).pipe((0,ot.U)(([Ht,Kt,ut,L])=>({bold:Ht,italic:Kt,underline:ut,strike:L})))}set enabledTools(yt){this.toolsSet=new Set(yt)}isEnabled(yt){return this.toolsSet.has(yt)}}return At.\u0275fac=function(yt){return new(yt||At)(H.Y36(l.$3),H.Y36(P.rf))},At.\u0275cmp=H.Xpm({type:At,selectors:[["tui-font-style"]],inputs:{enabledTools:"enabledTools"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"ngIf"],[3,"content"],["format",""],["tuiIconButton","","type","button","size","s","icon","tuiIconFormatLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__font-style-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["formatDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"]],template:function(yt,Bt){1&yt&&(H.YNc(0,mt,3,3,"ng-container",0),H.ALo(1,"async")),2&yt&&H.Q6J("ngIf",H.lcZ(1,1,Bt.texts$))},directives:[X.O5,et.o,_t.v,dt.$,Mt.D,rt.x,ft.t,Ot.D],pipes:[X.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),At})()},19762:(Yt,vt,c)=>{c.d(vt,{d:()=>rt});var v=c(84614),l=c(14309),y=c(88002),P=c(87519),g=c(74788),ot=c(76189),H=c(219),X=c(67446),et=c(29070),_t=c(54255),dt=c(15491),Mt=c(12057);let rt=(()=>{class ft{constructor(St,Pt){this.editor=St,this.texts$=Pt,this.insertGroupText$=this.texts$.pipe((0,y.U)(Dt=>Dt.insertGroup)),this.removeGroupText$=this.texts$.pipe((0,y.U)(Dt=>Dt.removeGroup)),this.disabled$=this.editor.stateChange$.pipe((0,y.U)(()=>!this.editor.isActive("group")),(0,P.x)())}addGroup(){this.editor.setGroup()}removeGroup(){this.editor.removeGroup()}}return ft.\u0275fac=function(St){return new(St||ft)(g.Y36(v.$3),g.Y36(l.rf))},ft.\u0275cmp=g.Xpm({type:ft,selectors:[["tui-editor-group-tool"]],decls:5,vars:11,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconPlusLarge","appearance","icon","tuiHintDescribe","",3,"focusable","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconCloseLarge","appearance","icon","tuiHintDescribe","",3,"focusable","disabled","tuiHint","click"]],template:function(St,Pt){1&St&&(g.TgZ(0,"button",0),g.NdJ("click",function(){return Pt.addGroup()}),g.ALo(1,"async"),g.qZA(),g.TgZ(2,"button",1),g.NdJ("click",function(){return Pt.removeGroup()}),g.ALo(3,"async"),g.ALo(4,"async"),g.qZA()),2&St&&(g.Q6J("focusable",!1)("tuiHint",g.lcZ(1,5,Pt.insertGroupText$)),g.xp6(2),g.Q6J("focusable",!1)("disabled",!!g.lcZ(3,7,Pt.disabled$))("tuiHint",g.lcZ(4,9,Pt.removeGroupText$)))},directives:[ot.v,H.$,X.D,et.x,_t.t,dt.D],pipes:[Mt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),ft})()},7416:(Yt,vt,c)=>{c.d(vt,{U:()=>j});var v=c(64762),l=c(84614),y=c(14309),P=c(50259),g=c(88002),ot=c(87519),H=c(74788),X=c(40939),et=c(62939),_t=c(33250),dt=c(76189),Mt=c(219),rt=c(67446),ft=c(29070),Ot=c(54255),St=c(15491),Pt=c(12057),Dt=c(5451),pt=c(17163);function tt(At,kt){if(1&At&&H._UZ(0,"div",6),2&At){const yt=H.oxw().tuiLet;H.Udp("background",yt)}}function F(At,kt){if(1&At){const yt=H.EpF();H.TgZ(0,"tui-palette",7),H.NdJ("selectedColor",function(Ht){return H.CHM(yt),H.oxw(2).editor.setBackgroundColor(Ht)}),H.qZA()}if(2&At){const yt=kt.$implicit,Bt=H.oxw(2);H.Q6J("tuiActiveZoneParent",yt)("colors",Bt.colors)}}function mt(At,kt){if(1&At&&(H.TgZ(0,"tui-hosted-dropdown",1,2),H._UZ(2,"button",3),H.ALo(3,"async"),H.YNc(4,tt,1,2,"div",4),H.YNc(5,F,1,2,"ng-template",null,5,H.W1O),H.qZA()),2&At){const yt=kt.tuiLet,Bt=H.MAs(1),Ht=H.MAs(6),Kt=H.oxw();H.Q6J("content",Ht)("tuiDropdownMaxHeight",999),H.xp6(2),H.Q6J("tuiHint",H.lcZ(3,6,Kt.backColorText$))("pseudoActive",Bt.open)("focusable",Bt.open),H.xp6(2),H.Q6J("ngIf",!Kt.isBlankColor(yt||""))}}class j{constructor(kt,yt,Bt){this.editor=kt,this.texts$=yt,this.defaultOptions=Bt,this.colors=this.defaultOptions.colors,this.backgroundColor$=this.editor.stateChange$.pipe((0,g.U)(()=>this.editor.getBackgroundColor()||this.defaultOptions.blankColor),(0,ot.x)()),this.backColorText$=this.texts$.pipe((0,g.U)(Ht=>Ht.backColor))}isBlankColor(kt){return kt===this.defaultOptions.blankColor}}j.\u0275fac=function(kt){return new(kt||j)(H.Y36(l.$3),H.Y36(y.rf),H.Y36(y.mJ))},j.\u0275cmp=H.Xpm({type:j,selectors:[["tui-highlight-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["hilite",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconHiliteLarge","automation-id","toolbar__hilite-button","tuiHintDescribe","",1,"t-tool",3,"tuiHint","pseudoActive","focusable"],["class","t-plate",3,"background",4,"ngIf"],["hiliteDropdown",""],[1,"t-plate"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(kt,yt){1&kt&&(H.YNc(0,mt,7,8,"tui-hosted-dropdown",0),H.ALo(1,"async")),2&kt&&H.Q6J("tuiLet",H.lcZ(1,1,yt.backgroundColor$))},directives:[X.L,et.o,_t.Ek,dt.v,Mt.$,rt.D,ft.x,Ot.t,St.D,Pt.O5,Dt.R,pt.e],pipes:[Pt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,v.gn)([(0,P.tuiDefaultProp)()],j.prototype,"colors",void 0)},93252:(Yt,vt,c)=>{c.d(vt,{Xp:()=>v.X,pu:()=>ot,Tf:()=>H.T,P_:()=>X,yj:()=>et.y,y9:()=>_t,Un:()=>dt.U,dN:()=>St.d,jP:()=>Pt,mK:()=>Mt.m,p7:()=>rt,hr:()=>ft.h,Zv:()=>Ot,UT:()=>Dt.U,XC:()=>tt,w2:()=>F.w,Ur:()=>mt,pH:()=>j.p,mp:()=>At,iN:()=>L.i,lT:()=>kt.l,iA:()=>Ht,YH:()=>Kt.Y,er:()=>ut,_I:()=>L._,__:()=>it,M8:()=>yt.M,kU:()=>Bt,G0:()=>ct.G,_t:()=>st});var v=c(37924),l=c(12057),y=c(50259),P=c(3497),g=c(74788);let ot=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,P.TuiHintModule,y.TuiLetModule]]}),J})();var H=c(15587);let X=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,P.TuiHintModule,P.TuiDataListModule]]}),J})();var et=c(50237);let _t=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiButtonModule,P.TuiHintModule]]}),J})();var dt=c(18832),Mt=c(84985);let rt=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,P.TuiHintModule,P.TuiDataListModule]]}),J})();var ft=c(62976);let Ot=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,P.TuiHintModule]]}),J})();var St=c(19762);let Pt=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiButtonModule,P.TuiHintModule]]}),J})();var Dt=c(7416),pt=c(27050);let tt=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,pt.VM,P.TuiHintModule,P.TuiDropdownModule,y.TuiActiveZoneModule,y.TuiLetModule]]}),J})();var F=c(13441);let mt=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,P.TuiHintModule,y.TuiLetModule]]}),J})();var j=c(95558);let At=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,pt.VM,P.TuiButtonModule,P.TuiHintModule,y.TuiActiveZoneModule,P.TuiDropdownModule,y.TuiLetModule]]}),J})();var kt=c(28962),yt=c(74549);let Bt=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,y.TuiRepeatTimesModule]]}),J})(),Ht=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiDropdownModule,P.TuiButtonModule,P.TuiHintModule,Bt]]}),J})();var Kt=c(76965);let ut=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiButtonModule,P.TuiHintModule,y.TuiLetModule]]}),J})();var L=c(22063);let it=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiHintModule,P.TuiButtonModule,P.TuiDataListModule,y.TuiLetModule]]}),J})();var ct=c(10528);let st=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiButtonModule,P.TuiHostedDropdownModule,P.TuiDropdownModule,P.TuiHintModule,pt.VM,y.TuiActiveZoneModule,y.TuiLetModule]]}),J})()},13441:(Yt,vt,c)=>{c.d(vt,{w:()=>Dt});var v=c(84614),l=c(14309),y=c(9112),P=c(88002),g=c(74788),ot=c(12057),H=c(40939),X=c(62939),et=c(76189),_t=c(219),dt=c(67446),Mt=c(29070),rt=c(54255),ft=c(15491);function Ot(pt,tt){if(1&pt){const F=g.EpF();g.TgZ(0,"div",6),g.TgZ(1,"button",7),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.toggleUnorderedList()}),g.qZA(),g.TgZ(2,"button",8),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.toggleOrderedList()}),g.qZA(),g.TgZ(3,"button",9),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).sinkListItem()}),g.qZA(),g.TgZ(4,"button",10),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).liftListItem()}),g.qZA(),g.qZA()}if(2&pt){const F=g.oxw().tuiLet,mt=g.oxw().ngIf;g.xp6(1),g.Q6J("tuiHint",mt.unorderedList)("pseudoActive",!(null==F||!F.unordered)),g.xp6(1),g.Q6J("tuiHint",mt.orderedList)("pseudoActive",!(null==F||!F.ordered)),g.xp6(1),g.Q6J("tuiHint",mt.indent)("disabled",!(null!=F&&F.ordered||null!=F&&F.unordered)),g.xp6(1),g.Q6J("tuiHint",mt.outdent)("disabled",!(null!=F&&F.ordered||null!=F&&F.unordered))}}function St(pt,tt){if(1&pt&&(g.TgZ(0,"tui-hosted-dropdown",2,3),g._UZ(2,"button",4),g.YNc(3,Ot,5,8,"ng-template",null,5,g.W1O),g.qZA()),2&pt){const F=tt.tuiLet,mt=g.MAs(1),j=g.MAs(4),At=g.oxw().ngIf;g.Q6J("content",j),g.xp6(2),g.Q6J("tuiHint",At.list)("pseudoActive",(null==mt?null:mt.open)||(null==F?null:F.unordered)||(null==F?null:F.ordered)||!1)("focusable",mt.open)}}function Pt(pt,tt){if(1&pt&&(g.ynx(0),g.YNc(1,St,5,4,"tui-hosted-dropdown",1),g.ALo(2,"async"),g.BQk()),2&pt){const F=g.oxw();g.xp6(1),g.Q6J("tuiLet",g.lcZ(2,1,F.listState$))}}let Dt=(()=>{class pt{constructor(F,mt){this.editor=F,this.texts$=mt,this.listState$=(0,y.aj)([this.editor.isActive$("orderedList"),this.editor.isActive$("bulletList")]).pipe((0,P.U)(([j,At])=>({ordered:j,unordered:At})))}sinkListItem(){this.editor.sinkListItem()}liftListItem(){this.editor.liftListItem()}}return pt.\u0275fac=function(F){return new(F||pt)(g.Y36(v.$3),g.Y36(l.rf))},pt.\u0275cmp=g.Xpm({type:pt,selectors:[["tui-list-configs"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["list",""],["tuiIconButton","","type","button","size","s","icon","tuiIconListLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__ordering-list-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["listDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconListLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOLLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconIndentLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","disabled","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOutdentLarge","appearance","icon",1,"t-option",3,"tuiHint","disabled","click"]],template:function(F,mt){1&F&&(g.YNc(0,Pt,3,3,"ng-container",0),g.ALo(1,"async")),2&F&&g.Q6J("ngIf",g.lcZ(1,1,mt.texts$))},directives:[ot.O5,H.L,X.o,et.v,_t.$,dt.D,Mt.x,rt.t,ft.D],pipes:[ot.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),pt})()},95558:(Yt,vt,c)=>{c.d(vt,{p:()=>kt});var v=c(64762),l=c(84614),y=c(14309),P=c(50259),g=c(9112),ot=c(88002),H=c(87519),X=c(74788),et=c(40939),_t=c(62939),dt=c(33250),Mt=c(76189),rt=c(219),ft=c(67446),Ot=c(29070),St=c(54255),Pt=c(15491),Dt=c(12057),pt=c(5451),tt=c(17163);function F(yt,Bt){if(1&yt&&X._UZ(0,"div",7),2&yt){const Ht=X.oxw(2).tuiLet;X.Udp("background",Ht)}}function mt(yt,Bt){if(1&yt){const Ht=X.EpF();X.TgZ(0,"tui-palette",8),X.NdJ("selectedColor",function(ut){X.CHM(Ht),X.oxw();const L=X.MAs(1);return X.oxw(2).setCellColor(ut),L.close()}),X.qZA()}if(2&yt){const Ht=Bt.$implicit,Kt=X.oxw(3);X.Q6J("tuiActiveZoneParent",Ht)("colors",Kt.colors)}}function j(yt,Bt){if(1&yt&&(X.TgZ(0,"tui-hosted-dropdown",2,3),X._UZ(2,"button",4),X.ALo(3,"async"),X.YNc(4,F,1,2,"div",5),X.YNc(5,mt,1,2,"ng-template",null,6,X.W1O),X.qZA()),2&yt){const Ht=Bt.tuiLet,Kt=X.MAs(1),ut=X.MAs(6),L=X.oxw().tuiLet,it=X.oxw();X.Q6J("content",ut)("tuiDropdownMaxHeight",999)("canOpen",!!Ht),X.xp6(2),X.Q6J("tuiHint",X.lcZ(3,8,it.colorText$))("pseudoActive",Kt.open)("focusable",Kt.open)("disabled",!Ht),X.xp6(2),X.Q6J("ngIf",!it.isBlankColor(L||""))}}function At(yt,Bt){if(1&yt&&(X.ynx(0),X.YNc(1,j,7,10,"tui-hosted-dropdown",1),X.ALo(2,"async"),X.BQk()),2&yt){const Ht=X.oxw();X.xp6(1),X.Q6J("tuiLet",X.lcZ(2,1,Ht.isActive$))}}class kt{constructor(Bt,Ht,Kt){this.defaultOptions=Bt,this.editor=Ht,this.texts$=Kt,this.colors=this.defaultOptions.colors,this.colorText$=this.texts$.pipe((0,ot.U)(ut=>this.editor.isActive("group")&&ut.hiliteGroup||this.editor.isActive("table")&&ut.cellColor||"")),this.isActive$=(0,g.aj)([this.editor.isActive$("table"),this.editor.isActive$("group")]).pipe((0,ot.U)(([ut,L])=>ut||L)),this.color$=this.editor.stateChange$.pipe((0,ot.U)(()=>this.editor.getCellColor()||this.editor.getGroupColor()||this.defaultOptions.blankColor),(0,H.x)())}isBlankColor(Bt){return Bt===this.defaultOptions.blankColor}setCellColor(Bt){this.editor.isActive("group")?this.editor.setGroupHilite(Bt):this.editor.isActive("table")&&this.editor.setCellColor(Bt)}}kt.\u0275fac=function(Bt){return new(Bt||kt)(X.Y36(y.mJ),X.Y36(l.$3),X.Y36(y.rf))},kt.\u0275cmp=X.Xpm({type:kt,selectors:[["tui-table-cell-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen"],["colorSelect",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconPaintLarge","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable","disabled"],["class","t-plate t-plate_paint",3,"background",4,"ngIf"],["cellColorDropdown",""],[1,"t-plate","t-plate_paint"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(Bt,Ht){1&Bt&&(X.YNc(0,At,3,3,"ng-container",0),X.ALo(1,"async")),2&Bt&&X.Q6J("tuiLet",X.lcZ(1,1,Ht.color$))},directives:[et.L,_t.o,dt.Ek,Mt.v,rt.$,ft.D,Ot.x,St.t,Pt.D,Dt.O5,pt.R,tt.e],pipes:[Dt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,v.gn)([(0,P.tuiDefaultProp)()],kt.prototype,"colors",void 0)},28962:(Yt,vt,c)=>{c.d(vt,{l:()=>St});var v=c(84614),l=c(14309),y=c(88002),P=c(74788),g=c(62939),ot=c(33250),H=c(76189),X=c(219),et=c(67446),_t=c(29070),dt=c(54255),Mt=c(15491),rt=c(74549),ft=c(12057);function Ot(Pt,Dt){if(1&Pt){const pt=P.EpF();P.TgZ(0,"tui-table-size-selector",4),P.NdJ("onSelectSize",function(F){return P.CHM(pt),P.oxw().addTable(F)}),P.qZA()}}let St=(()=>{class Pt{constructor(pt,tt){this.editor=pt,this.texts$=tt,this.insertTableText$=this.texts$.pipe((0,y.U)(F=>F.insertTable))}addTable({rows:pt,cols:tt}){this.editor.enter();const F=this.editor.state.selection.anchor;this.editor.enter(),this.editor.enter(),this.editor.setTextSelection(F),this.editor.insertTable(pt,tt)}}return Pt.\u0275fac=function(pt){return new(pt||Pt)(P.Y36(v.$3),P.Y36(l.rf))},Pt.\u0275cmp=P.Xpm({type:Pt,selectors:[["tui-table-create"]],decls:6,vars:5,consts:[["tuiDropdownAlign","left","tuiDropdownDirection","bottom",3,"content"],["table",""],["tuiIconButton","","type","button","size","s","icon","tuiIconTableLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable"],["tableDropdown",""],[3,"onSelectSize"]],template:function(pt,tt){if(1&pt&&(P.TgZ(0,"tui-hosted-dropdown",0,1),P._UZ(2,"button",2),P.ALo(3,"async"),P.qZA(),P.YNc(4,Ot,1,0,"ng-template",null,3,P.W1O)),2&pt){const F=P.MAs(1),mt=P.MAs(5);P.Q6J("content",mt),P.xp6(2),P.Q6J("tuiHint",P.lcZ(3,3,tt.insertTableText$))("focusable",F.open)}},directives:[g.o,ot.Ek,H.v,X.$,et.D,_t.x,dt.t,Mt.D,rt.M],pipes:[ft.Ov],encapsulation:2,changeDetection:0}),Pt})()},76965:(Yt,vt,c)=>{c.d(vt,{Y:()=>Pt});var v=c(84614),l=c(14309),y=c(88002),P=c(87519),g=c(74788),ot=c(40939),H=c(12057),X=c(76189),et=c(219),_t=c(67446),dt=c(29070),Mt=c(54255),rt=c(15491);function ft(Dt,pt){if(1&Dt){const tt=g.EpF();g.TgZ(0,"button",2),g.NdJ("click",function(){g.CHM(tt);const mt=g.oxw().tuiLet,j=g.oxw();return mt.mergeCells?j.mergeCells():j.splitCell()}),g.qZA()}if(2&Dt){const tt=pt.ngIf,F=g.oxw().tuiLet;g.Q6J("icon",F.mergeCells?"tuiIconTableMergeLarge":"tuiIconTableSplitLarge")("tuiHint",F.mergeCells?tt.mergeCells:tt.splitCells)("focusable",!1)("disabled",!F.mergeCells&&!F.splitCells)}}function Ot(Dt,pt){if(1&Dt&&(g.ynx(0),g.YNc(1,ft,1,4,"button",1),g.ALo(2,"async"),g.BQk()),2&Dt){const tt=g.oxw();g.xp6(1),g.Q6J("ngIf",g.lcZ(2,1,tt.texts$))}}const St=function(Dt,pt){return{mergeCells:Dt,splitCells:pt}};let Pt=(()=>{class Dt{constructor(tt,F){this.editor=tt,this.texts$=F,this.canMergeCells$=this.editor.stateChange$.pipe((0,y.U)(()=>this.editor.canMergeCells()),(0,P.x)()),this.canSplitCells$=this.editor.stateChange$.pipe((0,y.U)(()=>this.editor.canSplitCells()),(0,P.x)())}mergeCells(){this.editor.mergeCells()}splitCell(){this.editor.splitCell()}}return Dt.\u0275fac=function(tt){return new(tt||Dt)(g.Y36(v.$3),g.Y36(l.rf))},Dt.\u0275cmp=g.Xpm({type:Dt,selectors:[["tui-table-merge-cells"]],decls:3,vars:8,consts:[[4,"tuiLet"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"icon","tuiHint","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"icon","tuiHint","focusable","disabled","click"]],template:function(tt,F){1&tt&&(g.YNc(0,Ot,3,3,"ng-container",0),g.ALo(1,"async"),g.ALo(2,"async")),2&tt&&g.Q6J("tuiLet",g.WLB(5,St,g.lcZ(1,1,F.canMergeCells$),g.lcZ(2,3,F.canSplitCells$)))},directives:[ot.L,H.O5,X.v,et.$,_t.D,dt.x,Mt.t,rt.D],pipes:[H.Ov],encapsulation:2,changeDetection:0}),Dt})()},22063:(Yt,vt,c)=>{c.d(vt,{_:()=>mt,i:()=>F});var v=c(84614),l=c(14309),y=c(88002),P=c(74788),g=c(40939),ot=c(62939),H=c(76189),X=c(219),et=c(67446),_t=c(29070),dt=c(54255),Mt=c(15491),rt=c(20933),ft=c(12057),Ot=c(89786),St=c(35065);function Pt(j,At){if(1&j&&(P.TgZ(0,"tui-hosted-dropdown",2,3),P._UZ(2,"button",4),P.ALo(3,"async"),P.qZA()),2&j){const kt=At.tuiLet,yt=P.MAs(1),Bt=P.oxw(),Ht=P.MAs(3);P.Q6J("content",Ht)("canOpen",!!kt),P.xp6(2),P.Q6J("tuiHint",P.lcZ(3,5,Bt.rowsColumnsManagingText$))("focusable",yt.open)("disabled",!kt)}}function Dt(j,At){if(1&j){const kt=P.EpF();P.TgZ(0,"button",7),P.NdJ("click",function(){const Ht=P.CHM(kt).index,Kt=P.oxw().index;return P.oxw(2).onTableOption(2*Kt+Ht)}),P._uU(1),P.qZA()}if(2&j){const kt=At.$implicit;P.xp6(1),P.hij(" ",kt," ")}}function pt(j,At){if(1&j&&(P.TgZ(0,"tui-opt-group"),P.YNc(1,Dt,2,1,"button",6),P.qZA()),2&j){const kt=At.$implicit;P.xp6(1),P.Q6J("ngForOf",kt)}}function tt(j,At){if(1&j&&(P.TgZ(0,"tui-data-list"),P.YNc(1,pt,2,1,"tui-opt-group",5),P.ALo(2,"async"),P.qZA()),2&j){const kt=P.oxw();P.xp6(1),P.Q6J("ngForOf",P.lcZ(2,1,kt.tableCommandTexts$))}}var F=(()=>{return(j=F||(F={}))[j.InsertColumnBefore=0]="InsertColumnBefore",j[j.InsertColumnAfter=1]="InsertColumnAfter",j[j.InsertRowBefore=2]="InsertRowBefore",j[j.InsertRowAfter=3]="InsertRowAfter",j[j.DeleteColumn=4]="DeleteColumn",j[j.DeleteRow=5]="DeleteRow",F;var j})();let mt=(()=>{class j{constructor(kt,yt,Bt){this.editor=kt,this.texts$=yt,this.tableCommandTexts$=Bt,this.commandsRegistry={[F.InsertColumnAfter]:()=>this.editor.addColumnAfter(),[F.InsertColumnBefore]:()=>this.editor.addColumnBefore(),[F.InsertRowAfter]:()=>this.editor.addRowAfter(),[F.InsertRowBefore]:()=>this.editor.addRowBefore(),[F.DeleteColumn]:()=>this.editor.deleteColumn(),[F.DeleteRow]:()=>this.editor.deleteRow()},this.isActive$=this.editor.isActive$("table"),this.rowsColumnsManagingText$=this.texts$.pipe((0,y.U)(Ht=>Ht.rowsColumnsManaging))}onTableOption(kt){this.commandsRegistry[kt]()}}return j.\u0275fac=function(kt){return new(kt||j)(P.Y36(v.$3),P.Y36(l.rf),P.Y36(l.$i))},j.\u0275cmp=P.Xpm({type:j,selectors:[["tui-table-row-column-manager"]],decls:4,vars:3,consts:[[3,"content","canOpen",4,"tuiLet"],["tableOptionsDropdown",""],[3,"content","canOpen"],["tableCommand",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAddRowLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled"],[4,"ngFor","ngForOf"],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(kt,yt){1&kt&&(P.YNc(0,Pt,4,7,"tui-hosted-dropdown",0),P.ALo(1,"async"),P.YNc(2,tt,3,3,"ng-template",null,1,P.W1O)),2&kt&&P.Q6J("tuiLet",P.lcZ(1,1,yt.isActive$))},directives:[g.L,ot.o,H.v,X.$,et.D,_t.x,dt.t,Mt.D,rt.q,ft.sg,Ot.R,St.v],pipes:[ft.Ov],encapsulation:2,changeDetection:0}),j})()},74549:(Yt,vt,c)=>{c.d(vt,{M:()=>_t});var v=c(74788),l=c(62579),y=c(3497),P=c(36097);function g(dt,Mt){if(1&dt){const rt=v.EpF();v.TgZ(0,"div",4),v.NdJ("mouseenter",function(Ot){const Pt=v.CHM(rt).$implicit,Dt=v.oxw().$implicit;return v.oxw().updateCurrentSize(Pt+1,Dt+1,Ot)})("click",function(){return v.CHM(rt),v.oxw(2).select()}),v.qZA()}if(2&dt){const rt=Mt.$implicit,ft=v.oxw().$implicit,Ot=v.oxw();v.ekj("t-cell_hovered",Ot.tableSelectHovered(rt,ft))}}function ot(dt,Mt){if(1&dt&&(v.TgZ(0,"div",2),v.YNc(1,g,1,2,"div",3),v.qZA()),2&dt){const rt=v.oxw();v.xp6(1),v.Q6J("tuiRepeatTimesOf",rt.rowsNumber)}}let _t=(()=>{class dt{constructor(rt){this.windowRef=rt,this.selectSize=new v.vpe,this.onSelectSize=this.selectSize,this.tableSize={rows:1,cols:1}}get columnsNumber(){return Math.min(Math.max(3,this.tableSize.cols+1),15)}get rowsNumber(){return Math.min(Math.max(3,this.tableSize.rows+1),15)}tableSelectHovered(rt,ft){return rt<this.tableSize.rows&&ft<this.tableSize.cols}updateCurrentSize(rt,ft,Ot){(0,y.tuiGetViewportWidth)(this.windowRef)-Ot.clientX>70&&(this.tableSize={rows:rt,cols:ft})}onClick(){this.select()}select(){this.selectSize.emit(this.tableSize)}}return dt.\u0275fac=function(rt){return new(rt||dt)(v.Y36(l.m9))},dt.\u0275cmp=v.Xpm({type:dt,selectors:[["tui-table-size-selector"]],outputs:{selectSize:"selectSize",onSelectSize:"onSelectSize"},decls:3,vars:3,consts:[["class","t-column",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-description"],[1,"t-column"],["class","t-cell",3,"t-cell_hovered","mouseenter","click",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-cell",3,"mouseenter","click"]],template:function(rt,ft){1&rt&&(v.YNc(0,ot,2,1,"div",0),v.TgZ(1,"div",1),v._uU(2),v.qZA()),2&rt&&(v.Q6J("tuiRepeatTimesOf",ft.columnsNumber),v.xp6(2),v.AsE("",ft.tableSize.cols,"\xd7",ft.tableSize.rows,""))},directives:[P.X],styles:["[_nghost-%COMP%]{display:block;padding:.75rem}.t-cell[_ngcontent-%COMP%]{display:inline-block;background-color:var(--tui-base-01);width:1.25rem;height:1.25rem;border-radius:.25rem;margin:.125rem;border:1px solid var(--tui-base-04);cursor:pointer}.t-cell_hovered[_ngcontent-%COMP%]{background-color:var(--tui-base-02)}.t-column[_ngcontent-%COMP%]{white-space:nowrap}.t-description[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),dt})()},10528:(Yt,vt,c)=>{c.d(vt,{G:()=>mt});var v=c(64762),l=c(84614),y=c(14309),P=c(50259),g=c(88002),ot=c(87519),H=c(74788),X=c(40939),et=c(62939),_t=c(33250),dt=c(76189),Mt=c(219),rt=c(67446),ft=c(29070),Ot=c(54255),St=c(15491),Pt=c(5451),Dt=c(17163),pt=c(12057);function tt(j,At){if(1&j){const kt=H.EpF();H.TgZ(0,"tui-palette",6),H.NdJ("selectedColor",function(Bt){return H.CHM(kt),H.oxw(2).editor.setFontColor(Bt)}),H.qZA()}if(2&j){const kt=At.$implicit,yt=H.oxw(2);H.Q6J("tuiActiveZoneParent",kt)("colors",yt.colors)}}function F(j,At){if(1&j&&(H.TgZ(0,"tui-hosted-dropdown",1,2),H._UZ(2,"button",3),H.ALo(3,"async"),H._UZ(4,"div",4),H.YNc(5,tt,1,2,"ng-template",null,5,H.W1O),H.qZA()),2&j){const kt=At.tuiLet,yt=H.MAs(1),Bt=H.MAs(6),Ht=H.oxw();H.Q6J("content",Bt)("tuiDropdownMaxHeight",999),H.xp6(2),H.Q6J("tuiHint",H.lcZ(3,7,Ht.foreColorText$))("pseudoActive",yt.open)("focusable",yt.open),H.xp6(2),H.Udp("background",kt)}}class mt{constructor(At,kt,yt){this.defaultOptions=At,this.editor=kt,this.texts$=yt,this.colors=this.defaultOptions.colors,this.fontColor$=this.editor.stateChange$.pipe((0,g.U)(()=>this.editor.getFontColor()||this.defaultOptions.blankColor),(0,ot.x)()),this.foreColorText$=this.texts$.pipe((0,g.U)(Bt=>Bt.foreColor))}}mt.\u0275fac=function(At){return new(At||mt)(H.Y36(y.mJ),H.Y36(l.$3),H.Y36(y.rf))},mt.\u0275cmp=H.Xpm({type:mt,selectors:[["tui-text-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["color",""],["tuiIconButton","","type","button","size","s","icon","tuiIconColorLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__color-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],[1,"t-plate"],["colorDropdown",""],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(At,kt){1&At&&(H.YNc(0,F,7,9,"tui-hosted-dropdown",0),H.ALo(1,"async")),2&At&&H.Q6J("tuiLet",H.lcZ(1,1,kt.fontColor$))},directives:[X.L,et.o,_t.Ek,dt.v,Mt.$,rt.D,ft.x,Ot.t,St.D,Pt.R,Dt.e],pipes:[pt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,v.gn)([(0,P.tuiDefaultProp)()],mt.prototype,"colors",void 0)},17406:(Yt,vt,c)=>{c.d(vt,{M6:()=>v.M,yB:()=>X,Bp:()=>et.B});var v=c(4997),l=c(12057),y=c(71115),P=c(93252),g=c(50259),ot=c(3497),H=c(74788);let X=(()=>{class _t{}return _t.\u0275fac=function(Mt){return new(Mt||_t)},_t.\u0275mod=H.oAB({type:_t}),_t.\u0275inj=H.cJS({imports:[[l.ez,ot.TuiHintModule,g.TuiFocusableModule,ot.TuiButtonModule,ot.TuiHostedDropdownModule,y.Fu,P.er,P.mp,P.__,P.iA,P.p7,P.Zv,P.pu,P.Ur,P._t,P.XC,P.P_,P.y9,g.TuiItemModule,P.jP]]}),_t})();var et=c(13044)},13044:(Yt,vt,c)=>{c.d(vt,{B:()=>y});var v=c(74788),l=c(50259);let y=(()=>{class P{constructor(ot){this.elementRef=ot}get toolsContainers(){return Array.from(this.elementRef.nativeElement.querySelectorAll("[tuiItem]"))}onHorizontalNavigation(ot){const{toolsContainers:H}=this,X=H.findIndex(l.tuiIsNativeFocusedIn),_t=H[(0,l.tuiClamp)(X+(ot?-1:1),0,H.length-1)],dt=ot?this.findPreviousTool(_t):this.findNextTool(_t);dt&&dt.focus()}findFirstFocusableTool(ot=!1){const H=ot?this.toolsContainers.slice().reverse():this.toolsContainers;for(const X of H){const et=(0,l.tuiIsNativeMouseFocusable)(X)?X:(0,l.tuiGetClosestFocusable)({initial:X,root:X,keyboard:!1});if(et)return et}return null}findPreviousTool(ot){return(0,l.tuiIsNativeMouseFocusable)(ot)?ot:(0,l.tuiGetClosestFocusable)({initial:ot,root:ot,keyboard:!1})||(0,l.tuiGetClosestFocusable)({initial:ot,root:this.elementRef.nativeElement,previous:!0,keyboard:!1})}findNextTool(ot){return(0,l.tuiIsNativeMouseFocusable)(ot)?ot:(0,l.tuiGetClosestFocusable)({initial:ot,root:this.elementRef.nativeElement,keyboard:!1})}}return P.\u0275fac=function(ot){return new(ot||P)(v.Y36(v.SBq))},P.\u0275dir=v.lG2({type:P,selectors:[["","tuiToolbarNavigationManager",""]],hostBindings:function(ot,H){1&ot&&v.NdJ("keydown.arrowRight.prevent",function(){return H.onHorizontalNavigation(!1)})("keydown.arrowLeft.prevent",function(){return H.onHorizontalNavigation(!0)})}}),P})()},4997:(Yt,vt,c)=>{c.d(vt,{M:()=>O});var v=c(64762),l=c(74788),y=c(19074),P=c(84614),g=c(48699),ot=c(14309),H=c(50259),X=c(15257),et=c(13044),_t=c(12057),dt=c(48893),Mt=c(76189),rt=c(82707),ft=c(219),Ot=c(67446),St=c(29070),Pt=c(54255),Dt=c(15491),pt=c(84985),tt=c(62976),F=c(37924),mt=c(13441),j=c(62939),At=c(45050),kt=c(10528),yt=c(7416),Bt=c(15587),Ht=c(50237),Kt=c(18832),ut=c(19762),L=c(95558),it=c(28962),ct=c(22063),st=c(76965);const J=["dropdown"];function Q(w,V){1&w&&l.GkF(0)}function nt(w,V){if(1&w){const z=l.EpF();l.TgZ(0,"div",6),l.TgZ(1,"button",7),l.NdJ("click",function(){return l.CHM(z),l.oxw(2).undo()}),l.qZA(),l.TgZ(2,"button",8),l.NdJ("click",function(){return l.CHM(z),l.oxw(2).redo()}),l.qZA(),l.qZA()}if(2&w){const z=l.oxw().ngIf,bt=l.oxw();l.xp6(1),l.Q6J("tuiHint",z.undo)("disabled",bt.undoDisabled)("focusable",!1),l.xp6(1),l.Q6J("tuiHint",z.redo)("disabled",bt.redoDisabled)("focusable",!1)}}function wt(w,V){1&w&&(l.TgZ(0,"div",6),l._UZ(1,"tui-font-size",9),l.qZA())}function Jt(w,V){if(1&w&&l._UZ(0,"tui-font-style",15),2&w){const z=l.oxw(3);l.Q6J("enabledTools",z.toolsSet)}}function Zt(w,V){1&w&&l._UZ(0,"tui-align-content",9)}function ne(w,V){1&w&&l._UZ(0,"tui-list-configs",9)}function zt(w,V){if(1&w){const z=l.EpF();l.TgZ(0,"button",16,17),l.NdJ("click",function(){return l.CHM(z),l.oxw(3).toggleQuote()}),l.qZA()}if(2&w){const z=l.oxw(2).ngIf,bt=l.oxw();l.Q6J("tuiHint",z.quote)("pseudoActive",bt.blockquote)("disabled",bt.unorderedList||bt.orderedList)("focusable",!1)}}function ue(w,V){if(1&w){const z=l.EpF();l.TgZ(0,"tui-edit-link",22,23),l.NdJ("addLink",function(Rt){l.CHM(z),l.oxw();const U=l.MAs(1);return l.oxw(3).onLink(U,Rt)})("removeLink",function(){l.CHM(z),l.oxw();const Rt=l.MAs(1);return l.oxw(3).onLink(Rt)}),l.qZA()}}function ye(w,V){if(1&w&&(l.TgZ(0,"tui-hosted-dropdown",18,19),l._UZ(2,"button",20,17),l.YNc(4,ue,2,0,"ng-template",null,21,l.W1O),l.qZA()),2&w){const z=l.MAs(1),bt=l.MAs(5),Rt=l.oxw(2).ngIf,U=l.oxw();l.Q6J("canOpen",U.canOpenAnchor)("content",bt),l.xp6(2),l.Q6J("tuiHint",Rt.link)("pseudoActive",z.open||U.a)("focusable",z.open)}}function Oe(w,V){if(1&w){const z=l.EpF();l.TgZ(0,"tui-edit-link",28),l.NdJ("addLink",function(Rt){l.CHM(z),l.oxw();const U=l.MAs(1);return l.oxw(3).setAnchor(U,Rt)})("removeLink",function(){return l.CHM(z),l.oxw(4).removeAnchor()}),l.qZA()}2&w&&l.Q6J("anchorMode",!0)}function he(w,V){if(1&w&&(l.TgZ(0,"tui-hosted-dropdown",24,25),l._UZ(2,"button",26),l.YNc(3,Oe,1,1,"ng-template",null,27,l.W1O),l.qZA()),2&w){const z=l.MAs(1),bt=l.MAs(4),Rt=l.oxw(2).ngIf,U=l.oxw();l.Q6J("canOpen",U.canOpenAnchor)("content",bt),l.xp6(2),l.Q6J("focusable",!1)("pseudoActive",z.open||U.jumpAnchor)("tuiHint",Rt.insertAnchor)}}function Je(w,V){if(1&w){const z=l.EpF();l.ynx(0),l.TgZ(1,"button",29,17),l.NdJ("click",function(){return l.CHM(z),l.MAs(4).click()}),l.qZA(),l.TgZ(3,"input",30,31),l.NdJ("change",function(){l.CHM(z);const Rt=l.MAs(4);return l.oxw(3).onAttach(Rt)}),l.qZA(),l.BQk()}if(2&w){const z=l.oxw(2).ngIf,bt=l.oxw();l.xp6(1),l.Q6J("tuiHint",z.attach)("focusable",!1),l.xp6(2),l.Q6J("accept",bt.attachOptions.accept)("multiple",bt.attachOptions.multiple)("tuiFocusable",!1)}}function xe(w,V){if(1&w&&(l.TgZ(0,"div",6),l.YNc(1,Jt,1,1,"tui-font-style",10),l.YNc(2,Zt,1,0,"tui-align-content",11),l.YNc(3,ne,1,0,"tui-list-configs",11),l.YNc(4,zt,2,4,"button",12),l.YNc(5,ye,6,5,"tui-hosted-dropdown",13),l.YNc(6,he,5,5,"tui-hosted-dropdown",14),l.YNc(7,Je,5,5,"ng-container",1),l.qZA()),2&w){const z=l.oxw(2);l.xp6(1),l.Q6J("ngIf",z.formatEnabled),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Align)),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.List)),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Quote)),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Link)),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Anchor)),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Attach))}}function Be(w,V){if(1&w){const z=l.EpF();l.TgZ(0,"button",34,17),l.NdJ("click",function(){return l.CHM(z),l.oxw(3).toggleSubscript()}),l.qZA()}if(2&w){const z=l.oxw(2).ngIf,bt=l.oxw();l.Q6J("tuiHint",z.subscript)("pseudoActive",bt.subscript)("focusable",!1)}}function ge(w,V){if(1&w){const z=l.EpF();l.TgZ(0,"button",35,17),l.NdJ("click",function(){return l.CHM(z),l.oxw(3).toggleSuperscript()}),l.qZA()}if(2&w){const z=l.oxw(2).ngIf,bt=l.oxw();l.Q6J("tuiHint",z.superscript)("pseudoActive",bt.superscript)("focusable",!1)}}function Ae(w,V){if(1&w&&(l.TgZ(0,"div",6),l.YNc(1,Be,2,3,"button",32),l.YNc(2,ge,2,3,"button",33),l.qZA()),2&w){const z=l.oxw(2);l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Sub)),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Sup))}}function ve(w,V){if(1&w&&l._UZ(0,"tui-text-color",37),2&w){const z=l.oxw(3);l.Q6J("colors",z.colors)}}function Pe(w,V){if(1&w&&l._UZ(0,"tui-highlight-color",37),2&w){const z=l.oxw(3);l.Q6J("colors",z.colors)}}function Ne(w,V){if(1&w&&(l.TgZ(0,"div",6),l.YNc(1,ve,1,1,"tui-text-color",36),l.YNc(2,Pe,1,1,"tui-highlight-color",36),l.qZA()),2&w){const z=l.oxw(2);l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Color)),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Hilite))}}function Me(w,V){1&w&&l._UZ(0,"tui-code",9)}function Ie(w,V){if(1&w){const z=l.EpF();l.TgZ(0,"button",41,17),l.NdJ("click",function(){return l.CHM(z),l.oxw(3).onTeX()}),l.qZA()}if(2&w){const z=l.oxw(2).ngIf;l.Q6J("tuiHint",z.tex)("focusable",!1)}}function Ye(w,V){if(1&w){const z=l.EpF();l.TgZ(0,"div",42),l.TgZ(1,"button",43,17),l.NdJ("click",function(){return l.CHM(z),l.MAs(4).click()}),l.qZA(),l.TgZ(3,"input",44,45),l.NdJ("change",function(){l.CHM(z);const Rt=l.MAs(4);return l.oxw(3).onImage(Rt)}),l.qZA(),l.qZA()}if(2&w){const z=l.oxw(2).ngIf;l.xp6(1),l.Q6J("tuiHint",z.image)("focusable",!1),l.xp6(2),l.Q6J("tuiFocusable",!1)}}function He(w,V){if(1&w){const z=l.EpF();l.TgZ(0,"button",46,17),l.NdJ("click",function(){return l.CHM(z),l.oxw(3).insertHorizontalRule()}),l.qZA()}if(2&w){const z=l.oxw(2).ngIf;l.Q6J("tuiHint",z.insertHorizontalRule)("focusable",!1)}}function Ue(w,V){if(1&w&&(l.TgZ(0,"div",6),l.YNc(1,Me,1,0,"tui-code",11),l.YNc(2,Ie,2,2,"button",38),l.YNc(3,Ye,5,3,"div",39),l.YNc(4,He,2,2,"button",40),l.qZA()),2&w){const z=l.oxw(2);l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Code)),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Tex)),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Img)),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.HR))}}function Le(w,V){if(1&w){const z=l.EpF();l.TgZ(0,"div",6),l.TgZ(1,"button",47,17),l.NdJ("click",function(){return l.CHM(z),l.oxw(2).removeFormat()}),l.qZA(),l.qZA()}if(2&w){const z=l.oxw().ngIf;l.xp6(1),l.Q6J("tuiHint",z.clear)("focusable",!1)}}function ze(w,V){1&w&&(l.TgZ(0,"div",6),l._UZ(1,"tui-details",48),l._UZ(2,"tui-details-remove",48),l.qZA())}function _e(w,V){if(1&w&&l._UZ(0,"tui-table-cell-color",37),2&w){const z=l.oxw(3);l.Q6J("colors",z.colors)}}function fe(w,V){if(1&w&&(l.TgZ(0,"div",6),l._UZ(1,"tui-editor-group-tool",48),l.YNc(2,_e,1,1,"tui-table-cell-color",36),l.qZA()),2&w){const z=l.oxw(2);l.xp6(2),l.Q6J("ngIf",!z.enabled(z.TuiEditorTool.Table))}}function Ee(w,V){if(1&w&&(l.TgZ(0,"div",6),l._UZ(1,"tui-table-create",48),l._UZ(2,"tui-table-row-column-manager",48),l._UZ(3,"tui-table-merge-cells",48),l._UZ(4,"tui-table-cell-color",37),l.qZA()),2&w){const z=l.oxw(2);l.xp6(4),l.Q6J("colors",z.colors)}}function gt(w,V){if(1&w&&(l.TgZ(0,"section",4),l.YNc(1,nt,3,6,"div",5),l.YNc(2,wt,2,0,"div",5),l.YNc(3,xe,8,7,"div",5),l.YNc(4,Ae,3,2,"div",5),l.YNc(5,Ne,3,2,"div",5),l.YNc(6,Ue,5,4,"div",5),l.YNc(7,Le,3,2,"div",5),l.YNc(8,ze,3,0,"div",5),l.YNc(9,fe,3,1,"div",5),l.YNc(10,Ee,5,1,"div",5),l.TgZ(11,"div",6),l.Hsn(12),l.qZA(),l.qZA()),2&w){const z=l.oxw();l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Undo)),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Size)),l.xp6(1),l.Q6J("ngIf",z.firstBigBlockEnabled),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Sub)||z.enabled(z.TuiEditorTool.Sup)),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Color)||z.enabled(z.TuiEditorTool.Hilite)),l.xp6(1),l.Q6J("ngIf",z.secondBigBlockEnabled),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Clear)),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Details)),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Group)),l.xp6(1),l.Q6J("ngIf",z.enabled(z.TuiEditorTool.Table))}}class O{constructor(V,z,bt,Rt,U,a,p){this.elementRef=V,this.editor=z,this.imageLoader=bt,this.attachOptions=Rt,this.filesLoader=U,this.texts$=a,this.defaultOptions=p,this.dropdowns=H.EMPTY_QUERY,this.colors=this.defaultOptions.colors,this.disabled=!1,this.linkAdded=new l.vpe,this.texClicked=new l.vpe,this.fileAttached=new l.vpe,this.TuiEditorTool=g._,this.toolsSet=new Set(y.Db)}set tools(V){this.toolsSet=new Set(V)}get focused(){return(0,H.tuiIsNativeFocusedIn)(this.elementRef.nativeElement)||!!this.dropdowns.find(({nativeElement:V})=>(0,H.tuiIsNativeFocusedIn)(V))}get focusable(){return!this.focused&&!this.disabled}get unorderedList(){return this.editor.isActive("bulletList")}get orderedList(){return this.editor.isActive("orderedList")}get blockquote(){return this.editor.isActive("blockquote")}get a(){return this.editor.isActive("link")}get jumpAnchor(){return this.editor.isActive("jumpAnchor")}get canOpenAnchor(){return!this.a&&!this.jumpAnchor}get undoDisabled(){return this.editor.undoDisabled()}get redoDisabled(){return this.editor.redoDisabled()}get subscript(){return this.editor.isActive("subscript")}get superscript(){return this.editor.isActive("superscript")}get formatEnabled(){return this.enabled(g._.Bold)||this.enabled(g._.Italic)||this.enabled(g._.Underline)||this.enabled(g._.Strikethrough)}get firstBigBlockEnabled(){return this.formatEnabled||this.enabled(g._.Align)||this.enabled(g._.List)||this.enabled(g._.Quote)||this.enabled(g._.Link)||this.enabled(g._.Anchor)||this.enabled(g._.Attach)}get secondBigBlockEnabled(){return this.enabled(g._.Code)||this.enabled(g._.Tex)||this.enabled(g._.Img)||this.enabled(g._.HR)}onMouseDown(V,z){z.closest("button")||(V.preventDefault(),this.editor.focus())}onBottomFocus(){this.focusLast()}onTopFocus(){this.focusFirst()}onImage(V){var z;const bt=null===(z=V.files)||void 0===z?void 0:z[0];V.value="",bt&&this.imageLoader(bt).pipe((0,X.q)(1)).subscribe(Rt=>{this.addImage(Rt)})}onAttach(V){var z;const bt=Array.from(V.files||[]);V.value="",bt&&(H.tuiAssert.assert(!!this.filesLoader,"Please provide TUI_ATTACH_FILES_LOADER"),null===(z=this.filesLoader)||void 0===z||z.call(this,bt).pipe((0,X.q)(1)).subscribe(Rt=>this.fileAttached.emit(Rt)))}onTeX(){this.texClicked.emit()}onLink(V,z){V.open=!1,z&&this.editor.toggleLink(z)}setAnchor(V,z){V.open=!1,z&&(this.editor.setAnchor(z),this.editor.selectClosest())}removeAnchor(){this.editor.removeAnchor()}enabled(V){return this.toolsSet.has(V)}undo(){this.editor.undo()}redo(){this.editor.redo()}insertHorizontalRule(){this.editor.setHorizontalRule()}removeFormat(){this.editor.removeFormat()}toggleOrderedList(){this.editor.toggleOrderedList()}toggleQuote(){this.editor.toggleBlockquote()}toggleSubscript(){this.editor.toggleSubscript()}toggleSuperscript(){this.editor.toggleSuperscript()}addImage(V){this.editor.setImage(V)}focusFirst(){var V;const z=null===(V=this.navigationManager)||void 0===V?void 0:V.findFirstFocusableTool();z&&z.focus()}focusLast(){var V;const z=null===(V=this.navigationManager)||void 0===V?void 0:V.findFirstFocusableTool(!0);z&&z.focus()}}O.\u0275fac=function(V){return new(V||O)(l.Y36(l.SBq,8),l.Y36(P.$3),l.Y36(ot.p7),l.Y36(ot.dR),l.Y36(ot.zc,8),l.Y36(ot.rf),l.Y36(ot.mJ))},O.\u0275cmp=l.Xpm({type:O,selectors:[["tui-toolbar"]],viewQuery:function(V,z){if(1&V&&(l.Gf(et.B,5),l.Gf(J,5,l.SBq)),2&V){let bt;l.iGM(bt=l.CRH())&&(z.navigationManager=bt.first),l.iGM(bt=l.CRH())&&(z.dropdowns=bt)}},hostAttrs:["role","toolbar"],hostVars:2,hostBindings:function(V,z){1&V&&l.NdJ("mousedown",function(Rt){return z.onMouseDown(Rt,Rt.target)}),2&V&&l.ekj("_disabled",z.disabled)},inputs:{colors:"colors",disabled:"disabled",tools:"tools"},outputs:{linkAdded:"linkAdded",texClicked:"texClicked",fileAttached:"fileAttached"},ngContentSelectors:["*"],decls:7,vars:8,consts:[["type","button",1,"t-prevent-parent-label-behavior"],[4,"ngIf"],[3,"tuiFocusable","focus"],["tuiToolbarNavigationManager","","class","t-tools-wrapper",4,"ngIf"],["tuiToolbarNavigationManager","",1,"t-tools-wrapper"],["class","t-block",4,"ngIf"],[1,"t-block"],["tuiItem","","tuiIconButton","","type","button","size","s","icon","tuiIconUndoLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","disabled","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconRedoLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","disabled","focusable","click"],["tuiItem","",1,"t-tool","t-wrapper"],["tuiItem","","class","t-tool t-wrapper",3,"enabledTools",4,"ngIf"],["tuiItem","","class","t-tool t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","disabled","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",3,"canOpen","content",4,"ngIf"],["class","t-wrapper",3,"canOpen","content",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"enabledTools"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","disabled","focusable","click"],["button",""],["tuiItem","",1,"t-wrapper",3,"canOpen","content"],["link",""],["tuiIconButton","","type","button","size","s","icon","tuiIconLinkLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","pseudoActive","focusable"],["linkDropdown",""],[3,"addLink","removeLink"],["dropdown",""],[1,"t-wrapper",3,"canOpen","content"],["anchor",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAnchorLarge","tuiHintDirection","top-left","appearance","icon","tuiHintDescribe","",3,"focusable","pseudoActive","tuiHint"],["anchorDropdown",""],[3,"anchorMode","addLink","removeLink"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconPaperclipLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["type","file",1,"t-file-upload",3,"accept","multiple","tuiFocusable","change"],["fileUpload",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","focusable","click"],["tuiItem","","class","t-tool t-wrapper",3,"colors",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"colors"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool",3,"tuiHint","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","focusable","click"],["tuiItem","",1,"t-wrapper"],["tuiIconButton","","type","button","size","s","icon","tuiIconImageLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","focusable","click"],["type","file","accept","image/*",1,"t-image",3,"tuiFocusable","change"],["image",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconClearFormatLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["tuiItem","",1,"t-tool","t-tool_margin"]],template:function(V,z){1&V&&(l.F$t(),l._UZ(0,"button",0),l.YNc(1,Q,1,0,"ng-container",1),l.ALo(2,"async"),l.TgZ(3,"div",2),l.NdJ("focus",function(){return z.onTopFocus()}),l.qZA(),l.TgZ(4,"div",2),l.NdJ("focus",function(){return z.onBottomFocus()}),l.qZA(),l.YNc(5,gt,13,10,"section",3),l.ALo(6,"async")),2&V&&(l.xp6(1),l.Q6J("ngIf",l.lcZ(2,4,z.editor.stateChange$)),l.xp6(2),l.Q6J("tuiFocusable",z.focusable),l.xp6(1),l.Q6J("tuiFocusable",z.focusable),l.xp6(1),l.Q6J("ngIf",l.lcZ(6,6,z.texts$)))},directives:[_t.O5,dt.t,et.B,Mt.v,rt.w,ft.$,Ot.D,St.x,Pt.t,Dt.D,pt.m,tt.h,F.X,mt.w,j.o,At.l,kt.G,yt.U,Bt.T,Ht.y,Kt.U,ut.d,L.p,it.l,ct._,st.Y],pipes:[_t.Ov],styles:['.t-tools-wrapper[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;padding:.25rem .75rem;overflow:auto;flex-wrap:wrap;box-shadow:0 .125rem .1875rem rgba(0,0,0,.1)}.t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar, .t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-tools-wrapper._disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:var(--tui-disabled-opacity)}.t-block[_ngcontent-%COMP%]{display:flex;padding:.25rem 0}.t-block[_ngcontent-%COMP%]:not(:last-child):after{content:"";display:block;margin:0 .25rem;width:1px;background:var(--tui-secondary-active)}.t-tool[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}button.t-tool[_ngcontent-%COMP%]:hover, .t-tool[_ngcontent-%COMP%]     button:hover{background:var(--tui-secondary-hover)}.t-tool_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-font[_ngcontent-%COMP%]{padding:.3em 0;outline:none;width:100%;pointer-events:none}.t-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;font-size:0;opacity:0;cursor:pointer}.t-image[_ngcontent-%COMP%]::-webkit-file-upload-button{display:none}.t-file-upload[_ngcontent-%COMP%]{display:none}.t-color-picker[_ngcontent-%COMP%]     tui-hosted-dropdown, .t-color-picker[_ngcontent-%COMP%]     tui-color-picker, .t-color-picker[_ngcontent-%COMP%]     tui-color-edit{display:none}.t-prevent-parent-label-behavior[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),(0,v.gn)([(0,H.tuiDefaultProp)()],O.prototype,"colors",void 0),(0,v.gn)([(0,H.tuiDefaultProp)()],O.prototype,"disabled",void 0),(0,v.gn)([(0,H.tuiDefaultProp)(function(w){return!w.includes(g._.Tex)&&!w.includes(g._.Attach)},"Attach and TeX are not yet implemented in Editor")],O.prototype,"tools",null)},19074:(Yt,vt,c)=>{c.d(vt,{hK:()=>l,sw:()=>v,Db:()=>P,RR:()=>g});const v=new Map([["transparent","transparent"],["color-black-300","#333333"],["color-black-200","#666666"],["color-black-100","#909090"],["color-yellow-100","#FFDD2C"],["color-yellow-200","#FCC521"],["color-yellow-300","#FAB618"],["color-gray-100","#f5f5f6"],["color-gray-200","#e7e8ea"],["color-gray-300","#cbcfd3"],["color-gray-400","#959ba4"],["color-gray-500","#79818c"],["color-gray-600","#616871"],["color-light-blue-100","#ecf1f7"],["color-light-blue-200","#e4ebf3"],["color-light-blue-300","#dde4ed"],["color-blue-100","#1771e6"],["color-blue-200","#1464cc"],["color-blue-300","#0953b3"],["color-green-100","#39b54a"],["color-green-200","#2ca53a"],["color-green-300","#168a21"],["color-red-100","#e01f19"],["color-red-200","#d3120e"],["color-red-300","#c40b08"]]),l="rgb(51, 51, 51)";var y=c(48699);const P=[y._.Undo,y._.Size,y._.Bold,y._.Italic,y._.Underline,y._.Align,y._.List,y._.Quote,y._.Link,y._.Anchor,y._.Color,y._.Hilite,y._.Clear,y._.Strikethrough,y._.Code,y._.Img,y._.HR,y._.Sup,y._.Sub,y._.Table,y._.Details];function g(ot){return[{px:13,name:ot.small},{px:15,name:ot.normal},{px:17,name:ot.large},{px:24,family:"var(--tui-font-heading)",name:ot.subtitle,headingLevel:2,weight:"bold"},{px:30,family:"var(--tui-font-heading)",name:ot.title,headingLevel:1,weight:"bold"}]}},60153:(Yt,vt,c)=>{c.d(vt,{Z:()=>l});var v=c(74788);let l=(()=>{class y{constructor(){this.imagePreview=new v.vpe}click(g){g instanceof HTMLImageElement&&this.imagePreview.emit(g)}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275dir=v.lG2({type:y,selectors:[["tui-editor-socket","imagePreview",""]],hostAttrs:[1,"_preview-image"],hostBindings:function(g,ot){1&g&&v.NdJ("click",function(X){return ot.click(X.target)})},outputs:{imagePreview:"imagePreview"}}),y})()},84614:(Yt,vt,c)=>{c.d(vt,{Zj:()=>v.Z,BN:()=>y,JU:()=>P.JU,mJ:()=>P.mJ,$3:()=>P.$3});var v=c(60153),l=c(74788);let y=(()=>{class g{}return g.\u0275fac=function(H){return new(H||g)},g.\u0275mod=l.oAB({type:g}),g.\u0275inj=l.cJS({}),g})();var P=c(82113)},82113:(Yt,vt,c)=>{c.d(vt,{JU:()=>v.J,mJ:()=>y,$3:()=>P.$});var v=c(74982),l=c(74788);let y=(()=>{class g{}return g.\u0275fac=function(H){return new(H||g)},g.\u0275mod=l.oAB({type:g}),g.\u0275inj=l.cJS({}),g})();var P=c(76954)},74982:(Yt,vt,c)=>{c.d(vt,{J:()=>ot});var v=c(74788),l=c(14309),y=c(50259),P=c(46782),g=c(76954);let ot=(()=>{class H{constructor(et,_t,dt,Mt,rt,ft){this.elementRef=et,this.renderer=_t,this.editor=dt,this.editorContainer=Mt,this.editorLoaded$=rt,this.valueChange=this.editor.valueChange$,this.stateChange=this.editor.stateChange$,this.editorLoaded$.pipe((0,P.R)(ft)).subscribe(()=>{this.renderer.appendChild(this.elementRef.nativeElement,this.editorContainer)})}set value(et){et!==this.editor.html&&this.editor.setValue(et)}set editable(et){this.editor.editable=et}}return H.\u0275fac=function(et){return new(et||H)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(g.$),v.Y36(l.Y1),v.Y36(l.ZW),v.Y36(y.TuiDestroyService,2))},H.\u0275dir=v.lG2({type:H,selectors:[["","tuiTiptapEditor",""]],inputs:{value:"value",editable:"editable"},outputs:{valueChange:"valueChange",stateChange:"stateChange"},features:[v._Bn([y.TuiDestroyService])]}),H})()},76954:(Yt,vt,c)=>{c.d(vt,{$:()=>_t});var v=c(77361),l=c(19074),y=c(14309),P=c(27863),g=c(39761),ot=c(88002),H=c(87519),et=c(74788);let _t=(()=>{class dt extends v._{constructor(rt){super(),this.editorRef=rt,this.editorRef.subscribe(ft=>{this.editor=ft,ft.on("transaction",()=>{this.stateChange$.next()}),ft.on("update",()=>{const Ot=ft.getHTML(),Pt=function(dt){return Array.isArray(dt)&&1===dt.length&&!dt[0].hasOwnProperty("content")}(ft.getJSON().content)?"":Ot;this.valueChange$.next(Pt)})})}get isFocused(){return this.editor.isFocused}get html(){return this.editor.getHTML()}get editable(){return this.editor.isEditable}set editable(rt){this.editor.setEditable(rt)}get state(){return this.editor.state}getOriginTiptapEditor(){return this.editor}undoDisabled(){return!this.editor.can().undo()}redoDisabled(){return!this.editor.can().redo()}getFontColor(){return this.editor.getAttributes("textStyle").fontColor||l.hK}getBackgroundColor(){var rt;return(null===(rt=this.editor)||void 0===rt?void 0:rt.getAttributes("textStyle").backgroundColor)||"transparent"}getCellColor(){return this.editor.getAttributes("tableCell").background||this.editor.getAttributes("tableHeader").background}getGroupColor(){var rt,ft,Ot,St;if(this.editor.isActive("group")){const Pt=null!==(ft=null===(rt=this.editor.getAttributes("group"))||void 0===rt?void 0:rt.style)&&void 0!==ft?ft:"",Dt=(0,P.jx)(Pt);return null!==(St=null!==(Ot=Dt["background-color"])&&void 0!==Ot?Ot:Dt.background)&&void 0!==St?St:""}return""}onAlign(rt){this.editor.chain().focus().setTextAlign(rt).run()}setImage(rt){this.editor.chain().focus().command(({commands:ft,state:Ot})=>{var St;const Pt=null!==(St=ft.setEditableImage)&&void 0!==St?St:ft.setImage;if(Pt){const Dt=Ot.selection.anchor;return Pt({src:rt}),ft.setTextSelection(Dt),ft.insertContent("<p></p>"),!0}return!1}).run()}undo(){this.editor.chain().undo().run()}redo(){this.editor.chain().redo().run()}setHorizontalRule(){this.editor.chain().focus().setHorizontalRule().run()}removeFormat(){this.editor.commands.unsetAllMarks(),this.editor.commands.clearNodes()}setFontColor(rt){this.editor.chain().focus().setFontColor(rt).run()}setBackgroundColor(rt){this.editor.chain().focus().setBackgroundColor(rt).run()}toggleUnderline(){this.editor.chain().focus().toggleUnderline().run()}toggleStrike(){this.editor.chain().focus().toggleStrike().run()}toggleOrderedList(){this.editor.chain().focus().toggleOrderedList().run()}toggleUnorderedList(){this.editor.chain().focus().toggleBulletList().run()}togglePre(){this.editor.chain().focus().toggleCodeBlock().run()}sinkListItem(){this.editor.chain().focus().sinkListItem("listItem").run()}liftListItem(){this.editor.chain().focus().liftListItem("listItem").run()}isActive(rt){return this.editor.isActive(rt)}isActive$(rt){return this.stateChange$.pipe((0,g.O)(null),(0,ot.U)(()=>this.isActive(rt)),(0,H.x)())}toggleBold(){this.editor.chain().focus().toggleBold().run()}toggleCode(){this.editor.chain().focus().toggleCode().run()}toggleItalic(){this.editor.chain().focus().toggleItalic().run()}toggleBlockquote(){this.editor.chain().focus().toggleBlockquote().run()}toggleSubscript(){this.editor.chain().focus().toggleSubscript().run()}toggleSuperscript(){this.editor.chain().focus().toggleSuperscript().run()}toggleCodeBlock(){this.editor.chain().focus().toggleCodeBlock().run()}insertTable(rt,ft){this.editor.chain().focus().insertTable({cols:rt,rows:ft}).run()}addColumnAfter(){this.editor.chain().focus().addColumnAfter().run()}addColumnBefore(){this.editor.chain().focus().addColumnBefore().run()}addRowAfter(){this.editor.chain().focus().addRowAfter().run()}addRowBefore(){this.editor.chain().focus().addRowBefore().run()}deleteColumn(){this.editor.chain().focus().deleteColumn().run()}deleteRow(){this.editor.chain().focus().deleteRow().run()}mergeCells(){this.editor.chain().focus().mergeCells().run()}splitCell(){this.editor.chain().focus().splitCell().run()}canMergeCells(){return this.editor.can().mergeCells()}canSplitCells(){return this.editor.can().splitCell()}setHeading(rt){this.editor.chain().focus().setHeading({level:rt}).run()}setParagraph(rt){this.editor.chain().focus().setParagraph().run(),rt&&this.editor.chain().setMark("textStyle",rt).run()}setHardBreak(){this.editor.chain().setHardBreak().run()}setTextSelection(rt){this.editor.commands.setTextSelection(rt)}toggleLink(rt){this.editor.chain().focus().toggleLink({href:rt}).run()}setLink(rt){this.editor.chain().focus().setLink({href:rt}).run()}unsetLink(){this.editor.chain().focus().unsetLink().run()}focus(){this.editor.chain().focus().run()}setValue(rt){this.editor.commands.setContent(rt)}destroy(){this.editor.destroy()}setCellColor(rt){this.editor.chain().focus().setCellBackground(rt).run()}selectClosest(){const rt=this.editor.state.selection.anchor,{schema:ft,doc:Ot}=this.editor.state,St=(0,P.Yz)(Ot.resolve(rt),ft.marks.link);St&&this.editor.chain().setTextSelection(St).run()}enter(){this.editor.commands.enter()}setDetails(){this.editor.commands.setDetails()}removeDetails(){this.editor.commands.removeDetails()}setGroup(){this.editor.commands.setGroup()}removeGroup(){this.editor.commands.removeGroup()}setGroupHilite(rt){this.editor.commands.setGroupHilite(rt)}setAnchor(rt){this.editor.commands.setAnchor(rt.replace("#",""))}removeAnchor(){this.editor.commands.removeAnchor()}setFileLink(rt){this.editor.commands.setFileLink(rt)}setYoutubeVideo(rt){this.editor.commands.setYoutubeVideo(rt)}setIframe(rt){this.editor.commands.setIframe(rt)}removeEmptyTextStyle(){this.editor.commands.removeEmptyTextStyle()}toggleMark(rt,ft,Ot){this.editor.commands.toggleMark(rt,ft,Ot)}}return dt.\u0275fac=function(rt){return new(rt||dt)(et.LFG(y.ZW))},dt.\u0275prov=et.Yz7({token:dt,factory:dt.\u0275fac}),dt})()},48699:(Yt,vt,c)=>{c.d(vt,{_:()=>v});var v=(()=>{return(l=v||(v={})).Undo="undo",l.Anchor="anchor",l.Size="fontSize",l.Bold="bold",l.Italic="italic",l.Underline="underline",l.Strikethrough="strikeThrough",l.Align="justify",l.List="list",l.Quote="quote",l.Color="foreColor",l.Hilite="hiliteColor",l.Clear="clear",l.Link="link",l.Attach="attach",l.Tex="tex",l.Code="code",l.Img="image",l.HR="insertHorizontalRule",l.Sup="superscript",l.Sub="subscript",l.Table="insertTable",l.MergeCells="mergeCells",l.SplitCells="splitCells",l.RowsColumnsManaging="rowsColumnsManaging",l.Details="details",l.Group="group",v;var l})()},15736:(Yt,vt,c)=>{c.r(vt),c.d(vt,{BackgroundColor:()=>y}),c(84402);const y=c(12867).Extension.create({name:"backgroundColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,renderHTML:({backgroundColor:P})=>P?{style:`background-color: ${P}`}:{},parseHTML:({style:P})=>P.backgroundColor.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setBackgroundColor:P=>({chain:g})=>g().setMark("textStyle",{backgroundColor:P}).run(),unsetBackgroundColor:()=>({chain:P})=>P().setMark("textStyle",{backgroundColor:null}).run()})})},93763:(Yt,vt,c)=>{c.r(vt),c.d(vt,{TuiFileLink:()=>l});const l=c(12867).Extension.create({name:"fileLink",addCommands:()=>({setFileLink:y=>({state:P,chain:g})=>{const{selection:ot}=P,X='<span style="font-size: 15px"> </span>';return(Math.abs(ot.to-ot.from)>0?g().toggleMark("link",{href:y.link},{extendEmptyMarkRange:!0}).setTextSelection(ot.to).insertContent(X):g().insertContent(`<a href="${y.link}">${y.name}</a>${X}`)).setTextSelection(ot.to).run()}})})},52658:(Yt,vt,c)=>{c.r(vt),c.d(vt,{FontColor:()=>y}),c(84402);const y=c(12867).Extension.create({name:"fontColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontColor:{default:null,renderHTML:({fontColor:P})=>P?{style:`color: ${P}`}:{},parseHTML:({style:P})=>P.color.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setFontColor:P=>({chain:g})=>g().setMark("textStyle",{fontColor:P}).run(),unsetFontColor:()=>({chain:P})=>P().setMark("textStyle",{fontColor:null}).run()})})},9492:(Yt,vt,c)=>{c.r(vt),c.d(vt,{TuiFontSize:()=>y}),c(84402);const y=c(12867).Extension.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:({style:P})=>P.fontSize,renderHTML:({fontSize:P})=>P?{style:`font-size: ${P}`}:{}}}}]},addCommands:()=>({setFontSize:P=>({chain:g})=>g().setMark("textStyle",{fontSize:P}).run(),unsetFontSize:()=>({chain:P})=>P().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()})})},54920:(Yt,vt,c)=>{c.r(vt),c.d(vt,{TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>y,createGroupExtension:()=>P});var v=c(27863),l=c(12867);const y={groupNodeClass:"tui-group-node",groupPointerNodeClass:"tui-group-pointer",nested:!0,draggable:!0,createOnEnter:!1},P=(g={})=>{const{draggable:ot,nested:H,groupNodeClass:X,groupPointerNodeClass:et,createOnEnter:_t}=Object.assign(Object.assign({},y),g);return l.Node.create({name:"group",draggable:ot,group:"block",content:H?"block+":"block",addAttributes:()=>({style:{default:null,parseHTML:dt=>dt.getAttribute("style"),renderHTML:dt=>dt.style?{style:dt.style}:{}}}),parseHTML:()=>[{tag:'div[data-type="group"]'}],renderHTML:({HTMLAttributes:dt})=>["div",(0,l.mergeAttributes)(dt,{"data-type":"group"}),0],addNodeView:()=>({HTMLAttributes:dt,node:Mt})=>{const rt=document.createElement("div"),ft=document.createElement("div");if(rt.classList.add(X),ft.setAttribute("data-type","group"),dt.style&&(Mt.attrs.style=dt.style,ft.setAttribute("style",dt.style)),ot){const Ot=document.createElement("div");Ot.classList.add(et),Ot.innerHTML="",Ot.contentEditable="false",rt.append(Ot,ft)}else rt.append(ft);return{dom:rt,contentDOM:ft}},addCommands(){return{setGroup:()=>({commands:dt,state:Mt})=>{this.editor.chain().focus().run();const rt=(0,v.Ap)(Mt,""),Ot=`<div data-type="group">${rt.trim().startsWith("<p>")?rt:`<p>${rt}</p>`}</div>`;return dt.insertContent(Ot)},setGroupHilite:dt=>({editor:Mt})=>{for(let rt=Mt.state.selection.$anchor,ft=rt.depth;ft>0;ft--){const Ot=rt.node(ft);if(Ot.type.name===this.name){setTimeout(()=>Mt.commands.updateAttributes(Ot.type,{style:`background: ${dt}`}));break}}return!0},removeGroup:()=>({state:dt,dispatch:Mt})=>(0,v.yU)(dt,Mt,this.name)}},addKeyboardShortcuts(){return _t?{Enter:()=>this.editor.commands.setGroup()}:{}}})}},20854:(Yt,vt,c)=>{c.r(vt),c.d(vt,{TUI_IFRAME_EDITOR_OPTIONS:()=>ot,TuiIframeEditorComponent:()=>X,TuiIframeEditorModule:()=>Mt,createIframeEditorExtension:()=>dt});var v=c(12057),l=c(91211),y=c(95110),P=c(50259),g=c(74788);const ot=new g.OlP("[TUI_IFRAME_EDITOR_OPTIONS]",{factory:()=>({minWidth:100,maxWidth:1/0,minHeight:100,maxHeight:1/0})});var H=c(96570);let X=(()=>{class rt extends y._3{constructor(Ot,St,Pt,Dt){super(St,Dt),this.options=Ot,this.sanitizer=Pt}get src(){var Ot;return this.sanitizer.bypassSecurityTrustResourceUrl(null!==(Ot=this.attrs.src)&&void 0!==Ot?Ot:"")}updateSize([Ot,St]){this._width=Math.max(this.options.minWidth,Math.min(this.options.maxWidth,Ot)),this._height=Math.max(this.options.minHeight,Math.min(this.options.maxHeight,St))}}return rt.\u0275fac=function(Ot){return new(Ot||rt)(g.Y36(ot),g.Y36(v.K0),g.Y36(l.H7),g.Y36(P.TuiDestroyService,2))},rt.\u0275cmp=g.Xpm({type:rt,selectors:[["tui-iframe-editor"]],features:[g._Bn([P.TuiDestroyService]),g.qOj],decls:2,vars:13,consts:[[3,"width","height","sizeChange"],[3,"src","width","height"]],template:function(Ot,St){1&Ot&&(g.TgZ(0,"tui-editor-resizable",0),g.NdJ("sizeChange",function(Dt){return St.updateSize(Dt)}),g._UZ(1,"iframe",1),g.qZA()),2&Ot&&(g.Q6J("width",St.width)("height",St.height),g.xp6(1),g.Udp("min-width",St.options.minWidth)("min-height",St.options.minHeight)("max-width",St.options.maxWidth)("max-height",St.options.maxHeight),g.Q6J("src",St.src,g.uOi)("width",St.width)("height",St.height))},directives:[H.V],styles:["iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}"],changeDetection:0}),rt})();var et=c(40400),_t=c(12867);const dt=rt=>_t.Node.create({name:"iframe",group:"block",atom:!0,draggable:!1,parseHTML:()=>[{tag:'iframe[data-type="iframe-editor"]'}],addAttributes(){return{src:{default:null,keepOnSplit:!1,parseHTML:ft=>ft.getAttribute("src")},frameborder:{default:0,keepOnSplit:!1,parseHTML:ft=>ft.getAttribute("frameborder")},width:{default:"100%",keepOnSplit:!1,parseHTML:ft=>ft.getAttribute("width")},height:{default:null,keepOnSplit:!1,parseHTML:ft=>ft.getAttribute("height")},allowfullscreen:{keepOnSplit:!1,default:this.options.allowFullscreen,parseHTML:ft=>ft.getAttribute("allowfullscreen")}}},renderHTML:({HTMLAttributes:ft})=>["iframe",(0,_t.mergeAttributes)(ft,{"data-type":"iframe-editor"})],addNodeView:()=>(0,et.x)(X,{injector:rt}),addCommands(){return{setIframe:ft=>({commands:Ot,state:St})=>{const Pt=St.selection.anchor;return Ot.enter(),Ot.setTextSelection(Pt),Ot.insertContent({type:this.name,attrs:ft}),Ot.setTextSelection(St.selection.anchor),!0}}}});let Mt=(()=>{class rt{}return rt.\u0275fac=function(Ot){return new(Ot||rt)},rt.\u0275mod=g.oAB({type:rt}),rt.\u0275inj=g.cJS({imports:[[y.Sl]]}),rt})()},53380:(Yt,vt,c)=>{c.r(vt),c.d(vt,{TUI_EDITOR_MAX_IMAGE_WIDTH:()=>H,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>ot,TUI_IMAGE_EDITOR_OPTIONS:()=>X,TuiImageEditorComponent:()=>_t,TuiImageEditorModule:()=>tt,createImageEditorExtension:()=>Pt,tuiCreateImageEditorExtension:()=>pt});var v=c(12057),l=c(91211),y=c(95110),P=c(50259),g=c(74788);const ot=new g.OlP("[TUI_EDITOR_MIN_IMAGE_WIDTH]",{factory:()=>null}),H=new g.OlP("[TUI_EDITOR_MAX_IMAGE_WIDTH]",{factory:()=>null}),X=new g.OlP("[TUI_IMAGE_EDITOR_OPTIONS]",{factory:()=>({minWidth:100,maxWidth:1/0})});var et=c(96570);let _t=(()=>{class F extends y._3{constructor(j,At,kt,yt,Bt,Ht){super(yt,Ht),this.minWidth=j,this.maxWidth=At,this.options=kt,this.sanitizer=Bt}get dragHandle(){var j;return null!==(j=this.attrs.draggable)&&void 0!==j?j:null}get height(){return null}get alt(){return this.attrs.alt||""}get title(){return this.attrs.title||""}get src(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.attrs.src)}updateSize([j]){var At,kt;const yt=null!==(At=this.minWidth)&&void 0!==At?At:this.options.minWidth,Bt=null!==(kt=this.maxWidth)&&void 0!==kt?kt:this.options.maxWidth;this._width=Math.max(yt,Math.min(Bt,j))}}return F.\u0275fac=function(j){return new(j||F)(g.Y36(ot),g.Y36(H),g.Y36(X),g.Y36(v.K0),g.Y36(l.H7),g.Y36(P.TuiDestroyService,2))},F.\u0275cmp=g.Xpm({type:F,selectors:[["tui-image-editor"]],hostVars:1,hostBindings:function(j,At){2&j&&g.uIk("data-drag-handle",At.dragHandle)},features:[g._Bn([P.TuiDestroyService]),g.qOj],decls:2,vars:10,consts:[[3,"width","autoHeight","sizeChange"],[3,"src","width","alt","title"]],template:function(j,At){1&j&&(g.TgZ(0,"tui-editor-resizable",0),g.NdJ("sizeChange",function(yt){return At.updateSize(yt)}),g._UZ(1,"img",1),g.qZA()),2&j&&(g.Q6J("width",At.width)("autoHeight",!0),g.xp6(1),g.Udp("min-width",At.options.minWidth,"px")("max-width",At.options.maxWidth,"px"),g.Q6J("src",At.src,g.LSH)("width",At.width)("alt",At.alt)("title",At.title))},directives:[et.V],styles:["[data-drag-handle][_nghost-%COMP%]{cursor:move}img[_ngcontent-%COMP%]{pointer-events:none}"],changeDetection:0}),F})();var dt=c(40400),Mt=c(12867),rt=c(44632),ft=c(62463);const Ot=[{tag:'img[data-type="image-editor"]'}],St={src:{default:"",keepOnSplit:!1},width:{default:300,keepOnSplit:!1},alt:{default:"",keepOnSplit:!1},title:{default:"",keepOnSplit:!1}};function Pt(F,{draggable:mt}={}){const j=!(0,P.tuiIsPresent)(mt)||mt;return rt.Image.extend({name:"imageEditor",group:"block",atom:!0,draggable:j,parseHTML:()=>Ot,addAttributes:()=>Object.assign(Object.assign({},St),{draggable:{default:j?"":null,keepOnSplit:!1}}),renderHTML:({HTMLAttributes:At})=>["img",(0,Mt.mergeAttributes)(At,{"data-type":"image-editor"})],addNodeView:()=>(0,dt.x)(_t,{injector:F}),addCommands(){return{setEditableImage:At=>({commands:kt})=>kt.insertContent({type:this.name,attrs:At})}},addProseMirrorPlugins:()=>[new ft.Sy({props:{handleDOMEvents:{paste:Dt,drop:Dt}}})]})}function Dt(F,mt){var j;const At=mt instanceof DragEvent?mt.dataTransfer:mt.clipboardData,kt=Array.from(null!==(j=null==At?void 0:At.files)&&void 0!==j?j:[]).filter(yt=>/image/i.test(yt.type));kt.length&&mt.preventDefault();for(const yt of kt){const Bt=new FileReader;Bt.onload=Ht=>{var Kt;const ut=F.state.schema.nodes.imageEditor.create({src:null===(Kt=Ht.target)||void 0===Kt?void 0:Kt.result}),L=F.state.tr.replaceSelectionWith(ut);setTimeout(()=>F.dispatch(L))},Bt.readAsDataURL(yt)}}function pt({injector:F,draggable:mt}){return Pt(F,{draggable:mt})}let tt=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=g.oAB({type:F}),F.\u0275inj=g.cJS({imports:[[v.ez,y.Sl]]}),F})()},12177:(Yt,vt,c)=>{function l(P){return P.isActive("bulletList")||P.isActive("orderedList")}c.r(vt),c.d(vt,{TuiTabExtension:()=>y,tuiIsOrderedOrBulletList:()=>l});const y=c(12867).Extension.create({name:"indent",addKeyboardShortcuts(){return{Tab:()=>l(this.editor)?null:this.editor.commands.insertContent("\t")}}})},82091:(Yt,vt,c)=>{c.r(vt),c.d(vt,{TuiLink:()=>C});var v=c(27863),l=c(12867);const g=(m,f)=>{for(const M in f)m[M]=f[M];return m},ot="numeric",H="ascii",X="alpha",et="asciinumeric",_t="alphanumeric",dt="domain",Ot="whitespace";function St(m,f){return m in f||(f[m]=[]),f[m]}function Pt(m,f,M){f[ot]&&(f[et]=!0,f[_t]=!0),f[H]&&(f[et]=!0,f[X]=!0),f[et]&&(f[_t]=!0),f[X]&&(f[_t]=!0),f[_t]&&(f[dt]=!0),f.emoji&&(f[dt]=!0);for(const x in f){const R=St(x,M);R.indexOf(m)<0&&R.push(m)}}function pt(m){void 0===m&&(m=null),this.j={},this.jr=[],this.jd=null,this.t=m}pt.groups={},pt.prototype={accepts(){return!!this.t},go(m){const f=this,M=f.j[m];if(M)return M;for(let x=0;x<f.jr.length;x++){const R=f.jr[x][0],Z=f.jr[x][1];if(Z&&R.test(m))return Z}return f.jd},has(m,f){return void 0===f&&(f=!1),f?m in this.j:!!this.go(m)},ta(m,f,M,x){for(let R=0;R<m.length;R++)this.tt(m[R],f,M,x)},tr(m,f,M,x){let R;return x=x||pt.groups,f&&f.j?R=f:(R=new pt(f),M&&x&&Pt(f,M,x)),this.jr.push([m,R]),R},ts(m,f,M,x){let R=this;const Z=m.length;if(!Z)return R;for(let W=0;W<Z-1;W++)R=R.tt(m[W]);return R.tt(m[Z-1],f,M,x)},tt(m,f,M,x){x=x||pt.groups;const R=this;if(f&&f.j)return R.j[m]=f,f;const Z=f;let W,G=R.go(m);if(G?(W=new pt,g(W.j,G.j),W.jr.push.apply(W.jr,G.jr),W.jd=G.jd,W.t=G.t):W=new pt,Z){if(x)if(W.t&&"string"==typeof W.t){const Ct=g(function(m,f){const M={};for(const x in f)f[x].indexOf(m)>=0&&(M[x]=!0);return M}(W.t,x),M);Pt(Z,Ct,x)}else M&&Pt(Z,M,x);W.t=Z}return R.j[m]=W,W}};const tt=(m,f,M,x,R)=>m.ta(f,M,x,R),F=(m,f,M,x,R)=>m.tr(f,M,x,R),mt=(m,f,M,x,R)=>m.ts(f,M,x,R),j=(m,f,M,x,R)=>m.tt(f,M,x,R),At="WORD",kt="UWORD",yt="LOCALHOST",Ht="UTLD",Kt="SCHEME",ut="SLASH_SCHEME",L="NUM",st="OPENBRACE",J="OPENBRACKET",Q="OPENANGLEBRACKET",nt="OPENPAREN",wt="CLOSEBRACE",Jt="CLOSEBRACKET",Zt="CLOSEANGLEBRACKET",ne="CLOSEPAREN",zt="AMPERSAND",ue="APOSTROPHE",ye="ASTERISK",Oe="AT",he="BACKSLASH",Je="BACKTICK",xe="CARET",Be="COLON",ge="COMMA",Ae="DOLLAR",ve="DOT",Pe="EQUALS",Ne="EXCLAMATION",Me="HYPHEN",Ie="PERCENT",Ye="PIPE",He="PLUS",Ue="POUND",Le="QUERY",ze="QUOTE",_e="SEMI",fe="SLASH",Ee="TILDE",gt="UNDERSCORE",b="EMOJI",O="SYM";var k=Object.freeze({__proto__:null,WORD:At,UWORD:kt,LOCALHOST:yt,TLD:"TLD",UTLD:Ht,SCHEME:Kt,SLASH_SCHEME:ut,NUM:L,WS:"WS",NL:"NL",OPENBRACE:st,OPENBRACKET:J,OPENANGLEBRACKET:Q,OPENPAREN:nt,CLOSEBRACE:wt,CLOSEBRACKET:Jt,CLOSEANGLEBRACKET:Zt,CLOSEPAREN:ne,AMPERSAND:zt,APOSTROPHE:ue,ASTERISK:ye,AT:Oe,BACKSLASH:he,BACKTICK:Je,CARET:xe,COLON:Be,COMMA:ge,DOLLAR:Ae,DOT:ve,EQUALS:Pe,EXCLAMATION:Ne,HYPHEN:Me,PERCENT:Ie,PIPE:Ye,PLUS:He,POUND:Ue,QUERY:Le,QUOTE:ze,SEMI:_e,SLASH:fe,TILDE:Ee,UNDERSCORE:gt,EMOJI:b,SYM:O});const w=/[a-z]/,V=/\p{L}/u,z=/\p{Emoji}/u,Rt=/\d/,U=/\s/;let I=null,K=null;function ee(m,f,M,x,R){let Z;const W=f.length;for(let G=0;G<W-1;G++){const Ct=f[G];m.j[Ct]?Z=m.j[Ct]:(Z=new pt(x),Z.jr=R.slice(),m.j[Ct]=Z),m=Z}return Z=new pt(M),Z.jr=R.slice(),m.j[f[W-1]]=Z,Z}function we(m){const f=[],M=[];let x=0;for(;x<m.length;){let Z=0;for(;"0123456789".indexOf(m[x+Z])>=0;)Z++;if(Z>0){f.push(M.join(""));let W=parseInt(m.substring(x,x+Z),10);for(;W>0;W--)M.pop();x+=Z}else"_"===m[x]?(f.push(M.join("")),x++):(M.push(m[x]),x++)}return f}const $e={defaultProtocol:"http",events:null,format:S,formatHref:S,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function $(m,f){void 0===f&&(f=null);let M=g({},$e);m&&(M=g(M,m instanceof $?m.o:m));const x=M.ignoreTags,R=[];for(let Z=0;Z<x.length;Z++)R.push(x[Z].toUpperCase());this.o=M,f&&(this.defaultRender=f),this.ignoreTags=R}function S(m){return m}function Tt(m,f){this.t="token",this.v=m,this.tk=f}function Et(m,f){class M extends Tt{constructor(R,Z){super(R,Z),this.t=m}}for(const x in f)M.prototype[x]=f[x];return M.t=m,M}$.prototype={o:$e,ignoreTags:[],defaultRender:m=>m,check(m){return this.get("validate",m.toString(),m)},get(m,f,M){const x=null!=f;let R=this.o[m];return R&&("object"==typeof R?(R=M.t in R?R[M.t]:$e[m],"function"==typeof R&&x&&(R=R(f,M))):"function"==typeof R&&x&&(R=R(f,M.t,M)),R)},getObj(m,f,M){let x=this.o[m];return"function"==typeof x&&null!=f&&(x=x(f,M.t,M)),x},render(m){const f=m.render(this);return(this.get("render",null,m)||this.defaultRender)(f,m.t,m)}},Tt.prototype={isLink:!1,toString(){return this.v},toHref(m){return this.toString()},toFormattedString(m){const f=this.toString(),M=m.get("truncate",f,this),x=m.get("format",f,this);return M&&x.length>M?x.substring(0,M)+"\u2026":x},toFormattedHref(m){return m.get("formatHref",this.toHref(m.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(m){return void 0===m&&(m=$e.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(m),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(m){return{type:this.t,value:this.toFormattedString(m),isLink:this.isLink,href:this.toFormattedHref(m),start:this.startIndex(),end:this.endIndex()}},validate(m){return m.get("validate",this.toString(),this)},render(m){const f=this,M=this.toFormattedHref(m),x=m.get("tagName",M,f),R=this.toFormattedString(m),Z={},W=m.get("className",M,f),G=m.get("target",M,f),Ct=m.get("rel",M,f),xt=m.getObj("attributes",M,f),Nt=m.getObj("events",M,f);return Z.href=M,W&&(Z.class=W),G&&(Z.target=G),Ct&&(Z.rel=Ct),xt&&g(Z,xt),{tagName:x,attributes:Z,content:R,eventListeners:Nt}}};const Ft=Et("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Wt=Et("text"),Qt=Et("nl"),oe=Et("url",{isLink:!0,toHref(m){return void 0===m&&(m=$e.defaultProtocol),this.hasProtocol()?this.v:`${m}://${this.v}`},hasProtocol(){const m=this.tk;return m.length>=2&&m[0].t!==yt&&m[1].t===Be}}),se=m=>new pt(m);function Re(m,f,M){return new m(f.slice(M[0].s,M[M.length-1].e),M)}const We="undefined"!=typeof console&&console&&console.warn||(()=>{}),de={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function hn(m,f){if(void 0===f&&(f=!1),de.initialized&&We(`linkifyjs: already initialized - will not register custom scheme "${m}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(m))throw new Error('linkifyjs: incorrect scheme format.\n 1. Must only contain digits, lowercase ASCII letters or "-"\n 2. Cannot start or end with "-"\n 3. "-" cannot repeat');de.customSchemes.push([m,f])}function Tn(m){return de.initialized||function(){de.scanner=function(m){void 0===m&&(m=[]);const f={};pt.groups=f;const M=new pt;null==I&&(I=we("aaa1rp3barth4b_ott3vie4c1le2ogado5udhabi7c_ademy5centure6ountant_s9o1tor4d_s1ult4e_g1ro2tna4f_l1rica5g_akhan5ency5i_g1rbus3force5tel5kdn3l_faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m_azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o_l2partments8p_le4q_uarelle8r_ab1mco4chi3my2pa2t_e3s_da2ia2sociates9t_hleta5torney7u_ction5di_ble3o3spost5thor3o_s4vianca6w_s2x_a2z_ure5ba_by2idu3namex3narepublic11d1k2r_celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b_c1t1va3cg1n2d1e_ats2uty4er2ntley5rlin4st_buy5t2f1g1h_arti5i_ble3d1ke2ng_o3o1z2j1lack_friday9ockbuster8g1omberg7ue3m_s1w2n_pparibas9o_ats3ehringer8fa2m1nd2o_k_ing5sch2tik2on4t1utique6x2r_adesco6idgestone9oadway5ker3ther5ussels7s1t1uild_ers6siness6y1zz3v1w1y1z_h3ca_b1fe2l_l1vinklein9m_era3p2non3petown5ital_one8r_avan4ds2e_er_s4s2sa1e1h1ino4t_ering5holic7ba1n1re2s2c1d1enter4o1rn3f_a1d2g1h_anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i_priani6rcle4sco3tadel4i_c2y_eats7k1l_aims4eaning6ick2nic1que6othing5ud3ub_med6m1n1o_ach3des3ffee4llege4ogne5m_cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking_channel11l1p2rsica5untry4pon_s4rses6pa2r_edit_card4union9icket5own3s1uise_s6u_isinella9v1w1x1y_mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e_al_er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si_gn4v2hl2iamonds6et2gital5rect_ory7scount3ver5h2y2j1k1m1np2o_cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c_o2deka3u_cation8e1g1mail3erck5nergy4gineer_ing9terprises10pson4quipment8r_icsson6ni3s_q1tate5t_isalat7u_rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n_s2rm_ers5shion4t3edex3edback6rrari3ero6i_at2delity5o2lm2nal1nce1ial7re_stone6mdale6sh_ing5t_ness6j1k1lickr3ghts4r2orist4wers5y2m1o_o_d_network8tball6rd1ex2sale4um3undation8x2r_ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n_d2rniture7tbol5yi3ga_l_lery3o1up4me_s3p1rden4y2b_iz3d_n2e_a1nt_ing5orge5f1g_ee3h1i_ft_s3ves2ing5l_ass3e1obal2o4m_ail3bh2o1x2n1odaddy5ld_point6f2o_dyear5g_le4p1t1v2p1q1r_ainger5phics5tis4een3ipe3ocery4up4s1t1u_ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc_bank7ealth_care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k_t2m1n1ockey4ldings5iday5medepot5goods5s_ense7nda3rse3spital5t_ing5t_eles2s3mail5use3w2r1sbc3t1u_ghes5yatt3undai7ibm2cbc2e1u2d1e_ee3fm2kano4l1m_amat4db2mo_bilien9n_c1dustries8finiti5o2g1k1stitute6urance4e4t_ernational10uit4vestments10o1piranga7q1r_ish4s_maili5t_anbul7t_au2v3jaguar4va3cb2e_ep2tzt3welry6io2ll2m_p2nj2o_bs1urg4t1y2p_morgan6rs3uegos4niper7kaufen5ddi3e_rryhotels6logistics9properties14fh2g1h1i_a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p_mg2n2r_d1ed3uokgroup8w1y_oto4z2la_caixa5mborghini8er3ncaster5ia3d_rover6xess5salle5t_ino3robe5w_yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i_dl2fe_insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan_s3cker3us3l1ndon4tte1o3ve3pl_financial11r1s1t_d_a3u_ndbeck6xe1ury5v1y2ma_cys3drid4if1son4keup4n_agement7go3p1rket_ing3s4riott5shalls7serati6ttel5ba2c_kinsey7d1e_d_ia3et2lbourne7me1orial6n_u2rckmsd7g1h1iami3crosoft7l1ni1t2t_subishi9k1l_b1s2m_a2n1o_bi_le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to_rcycles9v_ie4p1q1r1s_d2t_n1r2u_seum3ic3tual5v1w1x1y1z2na_b1goya4me2tura4vy3ba2c1e_c1t_bank4flix4work5ustar5w_s2xt_direct7us4f_l2g_o2hk2i_co2ke1on3nja3ssan1y5l1o_kia3rthwesternmutual14on4w_ruz3tv4p1r_a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan_group9dnavy5lo3m_ega4ne1g1l_ine5oo2pen3racle3nge4g_anic5igins6saka4tsuka4t2vh3pa_ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e_t2f_izer5g1h_armacy6d1ilips5one2to_graphy6s4ysio5ics1tet2ures6d1n_g1k2oneer5zza4k1l_ace2y_station9umbing5s3m1n_c2ohl2ker3litie5rn2st3r_america6xi3ess3ime3o_d_uctions8f1gressive8mo2perties3y5tection8u_dential9s1t1ub2w_c2y2qa1pon3uebec3st5racing4dio4e_ad1lestate6tor2y4cipes5d_stone5umbrella9hab3ise_n3t2liance6n_t_als5pair3ort3ublican8st_aurant8view_s5xroth6ich_ardli6oh3l1o1p2o_cher3ks3deo3gers4om3s_vp3u_gby3hr2n2w_e2yukyu6sa_arland6fe_ty4kura4le1on3msclub4ung5ndvik_coromant12ofi4p1rl2s1ve2xo3b_i1s2c_a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e_arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x_y3fr2g1h_angrila6rp2w2ell3ia1ksha5oes2p_ping5uji3w_time7i_lk2na1gles5te3j1k_i_n2y_pe4l_ing4m_art3ile4n_cf3o_ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa_ce3ort2t3r_l2s1t_ada2ples4r1tebank4farm7c_group6ockholm6rage3e3ream4udio2y3yle4u_cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y_dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x_i3c_i2d_k2eam2ch_nology8l1masek5nnis4va3f1g1h_d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j_maxx4x2k_maxx5l1m_all4n1o_day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r_ade1ing4ining5vel_channel7ers_insurance16ust3v2t1ube2i1nes3shu4v_s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va_cations7na1guard7c1e_gas3ntures6risign5m\xf6gensberater2ung14sicherung10t2g1i_ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u_elos6wales2mart4ter4ng_gou5tch_es6eather_channel12bcam3er2site5d_ding5ibo2r3f1hoswho6ien2ki2lliamhill9n_dows4e1ners6me2olterskluwer11odside6rk_s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u_tube6t1un3za_ppos4ra3ero3ip2m1one3uerich6w2")),null==K&&(K=we("\u03b5\u03bb1\u03c52\u0431\u04331\u0435\u043b3\u0434\u0435\u0442\u04384\u0435\u044e2\u043a\u0430\u0442\u043e\u043b\u0438\u043a6\u043e\u043c3\u043c\u043a\u04342\u043e\u043d1\u0441\u043a\u0432\u04306\u043e\u043d\u043b\u0430\u0439\u043d5\u0440\u04333\u0440\u0443\u04412\u04442\u0441\u0430\u0439\u04423\u0440\u04313\u0443\u043a\u04403\u049b\u0430\u04373\u0570\u0561\u05753\u05d9\u05e9\u05e8\u05d0\u05dc5\u05e7\u05d5\u05dd3\u0627\u0628\u0648\u0638\u0628\u064a5\u062a\u0635\u0627\u0644\u0627\u062a6\u0631\u0627\u0645\u0643\u06485\u0644\u0627\u0631\u062f\u06464\u0628\u062d\u0631\u064a\u06465\u062c\u0632\u0627\u0626\u06315\u0633\u0639\u0648\u062f\u064a\u06296\u0639\u0644\u064a\u0627\u06465\u0645\u063a\u0631\u06285\u0645\u0627\u0631\u0627\u062a5\u06cc\u0631\u0627\u06465\u0628\u0627\u0631\u062a2\u0632\u0627\u06314\u064a\u062a\u06433\u06be\u0627\u0631\u062a5\u062a\u0648\u0646\u06334\u0633\u0648\u062f\u0627\u06463\u0631\u064a\u06295\u0634\u0628\u0643\u06294\u0639\u0631\u0627\u06422\u06282\u0645\u0627\u06464\u0641\u0644\u0633\u0637\u064a\u06466\u0642\u0637\u06313\u0643\u0627\u062b\u0648\u0644\u064a\u06436\u0648\u06453\u0645\u0635\u06312\u0644\u064a\u0633\u064a\u06275\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u06277\u0642\u06394\u0647\u0645\u0631\u0627\u06475\u067e\u0627\u06a9\u0633\u062a\u0627\u06467\u0680\u0627\u0631\u062a4\u0915\u0949\u092e3\u0928\u0947\u091f3\u092d\u093e\u0930\u0924_\u092e\u094d3\u094b\u09245\u0938\u0902\u0917\u0920\u09285\u09ac\u09be\u0982\u09b2\u09be5\u09ad\u09be\u09b0\u09a42\u09f0\u09a44\u0a2d\u0a3e\u0a30\u0a244\u0aad\u0abe\u0ab0\u0aa44\u0b2d\u0b3e\u0b30\u0b244\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe6\u0bb2\u0b99\u0bcd\u0b95\u0bc86\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd11\u0c2d\u0c3e\u0c30\u0c24\u0c4d5\u0cad\u0cbe\u0cb0\u0ca44\u0d2d\u0d3e\u0d30\u0d24\u0d025\u0dbd\u0d82\u0d9a\u0dcf4\u0e04\u0e2d\u0e213\u0e44\u0e17\u0e223\u0ea5\u0eb2\u0ea73\u10d2\u10d42\u307f\u3093\u306a3\u30a2\u30de\u30be\u30f34\u30af\u30e9\u30a6\u30c94\u30b0\u30fc\u30b0\u30eb4\u30b3\u30e02\u30b9\u30c8\u30a23\u30bb\u30fc\u30eb3\u30d5\u30a1\u30c3\u30b7\u30e7\u30f36\u30dd\u30a4\u30f3\u30c84\u4e16\u754c2\u4e2d\u4fe11\u56fd1\u570b1\u6587\u7f513\u4e9a\u9a6c\u900a3\u4f01\u4e1a2\u4f5b\u5c712\u4fe1\u606f2\u5065\u5eb72\u516b\u53662\u516c\u53f81\u76ca2\u53f0\u6e7e1\u70632\u5546\u57ce1\u5e971\u68072\u5609\u91cc_\u5927\u9152\u5e975\u5728\u7ebf2\u5927\u62ff2\u5929\u4e3b\u65593\u5a31\u4e502\u5bb6\u96fb2\u5e7f\u4e1c2\u5fae\u535a2\u6148\u55842\u6211\u7231\u4f603\u624b\u673a2\u62db\u80582\u653f\u52a11\u5e9c2\u65b0\u52a0\u57612\u95fb2\u65f6\u5c1a2\u66f8\u7c4d2\u673a\u67842\u6de1\u9a6c\u95213\u6e38\u620f2\u6fb3\u95802\u70b9\u770b2\u79fb\u52a82\u7ec4\u7ec7\u673a\u67844\u7f51\u57401\u5e971\u7ad91\u7edc2\u8054\u901a2\u8c37\u6b4c2\u8d2d\u72692\u901a\u8ca92\u96c6\u56e22\u96fb\u8a0a\u76c8\u79d14\u98de\u5229\u6d663\u98df\u54c12\u9910\u53852\u9999\u683c\u91cc\u62c93\u6e2f2\ub2f7\ub1371\ucef42\uc0bc\uc1312\ud55c\uad6d2")),j(M,"'",ue),j(M,"{",st),j(M,"[",J),j(M,"<",Q),j(M,"(",nt),j(M,"}",wt),j(M,"]",Jt),j(M,">",Zt),j(M,")",ne),j(M,"&",zt),j(M,"*",ye),j(M,"@",Oe),j(M,"`",Je),j(M,"^",xe),j(M,":",Be),j(M,",",ge),j(M,"$",Ae),j(M,".",ve),j(M,"=",Pe),j(M,"!",Ne),j(M,"-",Me),j(M,"%",Ie),j(M,"|",Ye),j(M,"+",He),j(M,"#",Ue),j(M,"?",Le),j(M,'"',ze),j(M,"/",fe),j(M,";",_e),j(M,"~",Ee),j(M,"_",gt),j(M,"\\",he);const x=F(M,Rt,L,{[ot]:!0});F(x,Rt,x);const R=F(M,w,At,{[H]:!0});F(R,w,R);const Z=F(M,V,kt,{[X]:!0});F(Z,w),F(Z,V,Z);const W=F(M,U,"WS",{[Ot]:!0});j(M,"\n","NL",{[Ot]:!0}),j(W,"\n"),F(W,U,W);const G=F(M,z,b,{emoji:!0});F(G,z,G),j(G,"\ufe0f",G);const Ct=j(G,"\u200d");F(Ct,z,G);const xt=[[w,R]],Nt=[[w,null],[V,Z]];for(let Ut=0;Ut<I.length;Ut++)ee(M,I[Ut],"TLD",At,xt);for(let Ut=0;Ut<K.length;Ut++)ee(M,K[Ut],Ht,kt,Nt);Pt("TLD",{tld:!0,ascii:!0},f),Pt(Ht,{utld:!0,alpha:!0},f),ee(M,"file",Kt,At,xt),ee(M,"mailto",Kt,At,xt),ee(M,"http",ut,At,xt),ee(M,"https",ut,At,xt),ee(M,"ftp",ut,At,xt),ee(M,"ftps",ut,At,xt),Pt(Kt,{scheme:!0,ascii:!0},f),Pt(ut,{slashscheme:!0,ascii:!0},f),m=m.sort((Ut,jt)=>Ut[0]>jt[0]?1:-1);for(let Ut=0;Ut<m.length;Ut++){const jt=m[Ut][0],ie=m[Ut][1]?{scheme:!0}:{slashscheme:!0};jt.indexOf("-")>=0?ie[dt]=!0:w.test(jt)?Rt.test(jt)?ie[et]=!0:ie[H]=!0:ie[ot]=!0,mt(M,jt,jt,ie)}return mt(M,"localhost",yt,{ascii:!0}),M.jd=new pt(O),{start:M,tokens:g({groups:f},k)}}(de.customSchemes);for(let m=0;m<de.tokenQueue.length;m++)de.tokenQueue[m][1]({scanner:de.scanner});de.parser=function(m){let{groups:f}=m;const M=f.domain.concat([zt,ye,Oe,he,Je,xe,Ae,Pe,Me,L,Ie,Ye,He,Ue,fe,O,Ee,gt]),x=[ue,Zt,wt,Jt,ne,Be,ge,ve,Ne,Q,st,J,nt,Le,ze,_e],R=[zt,ue,ye,he,Je,xe,wt,Ae,Pe,Me,L,st,Ie,Ye,He,Ue,Le,fe,O,Ee,gt],Z=se(),W=j(Z,Ee);tt(W,R,W),tt(W,f.domain,W);const G=se(),Ct=se(),xt=se();tt(Z,f.domain,G),tt(Z,f.scheme,Ct),tt(Z,f.slashscheme,xt),tt(G,R,W),tt(G,f.domain,G);const Nt=j(G,Oe);j(W,Oe,Nt),j(Ct,Oe,Nt),j(xt,Oe,Nt);const Ut=j(W,ve);tt(Ut,R,W),tt(Ut,f.domain,W);const jt=se();tt(Nt,f.domain,jt),tt(jt,f.domain,jt);const re=j(jt,ve);tt(re,f.domain,jt);const ie=se(Ft);tt(re,f.tld,ie),tt(re,f.utld,ie),j(Nt,yt,ie);const be=j(jt,Me);tt(be,f.domain,jt),tt(ie,f.domain,jt),j(ie,ve,re),j(ie,Me,be);const qe=j(ie,Be);tt(qe,f.numeric,Ft);const je=j(G,Me),Ce=j(G,ve);tt(je,f.domain,G),tt(Ce,R,W),tt(Ce,f.domain,G);const De=se(oe);tt(Ce,f.tld,De),tt(Ce,f.utld,De),tt(De,f.domain,G),tt(De,R,W),j(De,ve,Ce),j(De,Me,je),j(De,Oe,Nt);const dn=j(De,Be),en=se(oe);tt(dn,f.numeric,en);const pe=se(oe),ke=se();tt(pe,M,pe),tt(pe,x,ke),tt(ke,M,pe),tt(ke,x,ke),j(De,fe,pe),j(en,fe,pe);const Fe=j(Ct,Be),Vn=j(xt,Be),Qn=j(Vn,fe);j(Qn,fe,Fe),tt(Ct,f.domain,G),j(Ct,ve,Ce),j(Ct,Me,je),tt(xt,f.domain,G),j(xt,ve,Ce),j(xt,Me,je),tt(Fe,f.domain,pe),j(Fe,fe,pe);const ln=j(pe,st),Xe=j(pe,J),kn=j(pe,Q),vn=j(pe,nt);j(ke,st,ln),j(ke,J,Xe),j(ke,Q,kn),j(ke,nt,vn),j(ln,wt,pe),j(Xe,Jt,pe),j(kn,Zt,pe),j(vn,ne,pe),j(ln,wt,pe);const un=se(oe),mn=se(oe),gn=se(oe),nn=se(oe);tt(ln,M,un),tt(Xe,M,mn),tt(kn,M,gn),tt(vn,M,nn);const xn=se(),Mn=se(),tn=se(),In=se();return tt(ln,x),tt(Xe,x),tt(kn,x),tt(vn,x),tt(un,M,un),tt(mn,M,mn),tt(gn,M,gn),tt(nn,M,nn),tt(un,x,un),tt(mn,x,mn),tt(gn,x,gn),tt(nn,x,nn),tt(xn,M,xn),tt(Mn,M,mn),tt(tn,M,gn),tt(In,M,nn),tt(xn,x,xn),tt(Mn,x,Mn),tt(tn,x,tn),tt(In,x,In),j(mn,Jt,pe),j(gn,Zt,pe),j(nn,ne,pe),j(un,wt,pe),j(Mn,Jt,pe),j(tn,Zt,pe),j(In,ne,pe),j(xn,ne,pe),j(Z,yt,De),j(Z,"NL",Qt),{start:Z,tokens:k}}(de.scanner.tokens);for(let m=0;m<de.pluginQueue.length;m++)de.pluginQueue[m][1]({scanner:de.scanner,parser:de.parser});de.initialized=!0}(),function(m,f,M){let x=M.length,R=0,Z=[],W=[];for(;R<x;){let G=m,Ct=null,xt=null,Nt=0,Ut=null,jt=-1;for(;R<x&&!(Ct=G.go(M[R].t));)W.push(M[R++]);for(;R<x&&(xt=Ct||G.go(M[R].t));)Ct=null,G=xt,G.accepts()?(jt=0,Ut=G):jt>=0&&jt++,R++,Nt++;if(jt<0)R-=Nt,R<x&&(W.push(M[R]),R++);else{W.length>0&&(Z.push(Re(Wt,f,W)),W=[]),R-=jt,Nt-=jt;const re=Ut.t,ie=M.slice(R-Nt,R);Z.push(Re(re,f,ie))}}return W.length>0&&Z.push(Re(Wt,f,W)),Z}(de.parser.start,m,function(m,f){const M=function(m){const f=[],M=m.length;let x=0;for(;x<M;){let Z,R=m.charCodeAt(x),W=R<55296||R>56319||x+1===M||(Z=m.charCodeAt(x+1))<56320||Z>57343?m[x]:m.slice(x,x+2);f.push(W),x+=W.length}return f}(f.replace(/[A-Z]/g,G=>G.toLowerCase())),x=M.length,R=[];let Z=0,W=0;for(;W<x;){let G=m,Ct=null,xt=0,Nt=null,Ut=-1,jt=-1;for(;W<x&&(Ct=G.go(M[W]));)G=Ct,G.accepts()?(Ut=0,jt=0,Nt=G):Ut>=0&&(Ut+=M[W].length,jt++),xt+=M[W].length,Z+=M[W].length,W++;Z-=Ut,W-=jt,xt-=Ut,R.push({t:Nt.t,v:f.slice(Z-xt,Z),s:Z-xt,e:Z})}return R}(de.scanner.start,m))}function On(m,f,M){if(void 0===f&&(f=null),void 0===M&&(M=null),f&&"object"==typeof f){if(M)throw Error(`linkifyjs: Invalid link type ${f}; must be a string`);M=f,f=null}const x=new $(M),R=Tn(m),Z=[];for(let W=0;W<R.length;W++){const G=R[W];G.isLink&&(!f||G.t===f)&&Z.push(G.toFormattedObject(x))}return Z}function Cn(m,f){void 0===f&&(f=null);const M=Tn(m);return 1===M.length&&M[0].isLink&&(!f||M[0].t===f)}var Qe=c(62463);const C=l.Mark.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(m=>{"string"!=typeof m?hn(m.scheme,m.optionalSlashes):hn(m)})},onDestroy(){pt.groups={},de.scanner=null,de.parser=null,de.tokenQueue=[],de.pluginQueue=[],de.customSchemes=[],de.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}),addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML:()=>[{tag:'a[href]:not([href *= "javascript:" i])'}],renderHTML({HTMLAttributes:m}){return["a",(0,l.mergeAttributes)(this.options.HTMLAttributes,m),0]},addCommands(){return{setLink:m=>({chain:f})=>f().setMark(this.name,m).setMeta("preventAutolink",!0).run(),toggleLink:m=>({chain:f})=>f().toggleMark(this.name,m,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:m})=>m().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[(0,l.markPasteRule)({find:m=>On(m).filter(f=>!this.options.validate||this.options.validate(f.value)).filter(f=>f.isLink).map(f=>({text:f.value,index:f.start,data:f})),type:this.type,getAttributes:m=>{var f;return{href:null===(f=m.data)||void 0===f?void 0:f.href}}})]},addProseMirrorPlugins(){const m=[];return this.options.autolink&&m.push(function(m){return new Qe.Sy({key:new Qe.H$("autolink"),appendTransaction:(f,M,x)=>{const R=f.some(Nt=>Nt.docChanged)&&!M.doc.eq(x.doc),Z=f.some(Nt=>Nt.getMeta("preventAutolink"));if(!R||Z)return;const{tr:W}=x,G=(0,l.combineTransactionSteps)(M.doc,[...f]),{mapping:Ct}=G;return(0,l.getChangedRanges)(G).forEach(({oldRange:Nt,newRange:Ut})=>{(0,l.getMarksBetween)(Nt.from,Nt.to,M.doc).filter(be=>be.mark.type===m.type).forEach(be=>{const qe=Ct.map(be.from),je=Ct.map(be.to),Ce=(0,l.getMarksBetween)(qe,je,x.doc).filter(Fe=>Fe.mark.type===m.type);if(!Ce.length)return;const De=Ce[0],dn=M.doc.textBetween(be.from,be.to,void 0," "),en=x.doc.textBetween(De.from,De.to,void 0," "),pe=Cn(dn),ke=Cn(en);pe&&!ke&&W.removeMark(De.from,De.to,m.type)});const jt=(0,l.findChildrenInRange)(x.doc,Ut,be=>be.isTextblock);let re,ie;if(jt.length>1?(re=jt[0],ie=x.doc.textBetween(re.pos,re.pos+re.node.nodeSize,void 0," ")):jt.length&&x.doc.textBetween(Ut.from,Ut.to," "," ").endsWith(" ")&&(re=jt[0],ie=x.doc.textBetween(re.pos,Ut.to,void 0," ")),re&&ie){const be=ie.split(" ").filter(Ce=>""!==Ce);if(be.length<=0)return!1;const qe=be[be.length-1],je=re.pos+ie.lastIndexOf(qe);if(!qe)return!1;On(qe).filter(Ce=>Ce.isLink).filter(Ce=>!m.validate||m.validate(Ce.value)).map(Ce=>me(Gt({},Ce),{from:je+Ce.start+1,to:je+Ce.end+1})).forEach(Ce=>{W.addMark(Ce.from,Ce.to,m.type.create({href:Ce.href}))})}}),W.steps.length?W:void 0}})}({type:this.type,validate:this.options.validate})),this.options.openOnClick&&m.push(function(m){return new Qe.Sy({key:new Qe.H$("handleClickLink"),props:{handleClick:(f,M,x)=>{var R,Z,W;if(0!==x.button)return!1;const G=(0,l.getAttributes)(f.state,m.type.name),Ct=null===(R=x.target)||void 0===R?void 0:R.closest("a"),xt=null!==(Z=null==Ct?void 0:Ct.href)&&void 0!==Z?Z:G.href,Nt=null!==(W=null==Ct?void 0:Ct.target)&&void 0!==W?W:G.target;return!(!Ct||!xt||(window.open(xt,Nt),0))}}})}({type:this.type})),this.options.linkOnPaste&&m.push(function(m){return new Qe.Sy({key:new Qe.H$("handlePasteLink"),props:{handlePaste:(f,M,x)=>{const{state:R}=f,{selection:Z}=R,{empty:W}=Z;if(W)return!1;let G="";x.content.forEach(xt=>{G+=xt.textContent});const Ct=On(G).find(xt=>xt.isLink&&xt.value===G);return!(!G||!Ct||(m.editor.commands.setMark(m.type,{href:Ct.href}),0))}}})}({editor:this.editor,type:this.type})),m}}).extend({addAttributes(){var m;return Object.assign(Object.assign({},null===(m=this.parent)||void 0===m?void 0:m.call(this)),(0,v.x6)(["download"]))},addCommands(){var m;return Object.assign(Object.assign({},null===(m=this.parent)||void 0===m?void 0:m.call(this)),{toggleLink:f=>({chain:M,state:x})=>{{const{selection:R,doc:Z}=x,W=Z.cut(R.to,R.to+1),Ct=" "===(0,l.getHTMLFromFragment)(W.content,x.schema).replace(/<\/?[^>]+(>|$)/g,""),xt=M().toggleMark(this.name,f,{extendEmptyMarkRange:!0});return(Ct?xt.setTextSelection(R.to+1):xt.setTextSelection(R.to).insertContent('<span style="font-size: 15px"> </span>')).run()}}})}}).configure({openOnClick:!1})},41512:(Yt,vt,c)=>{c.r(vt),c.d(vt,{TuiAudio:()=>y,TuiSource:()=>P,TuiVideo:()=>g});var v=c(27863),l=c(12867);const y=l.Node.create({name:"audio",group:"block",content:"source+",addAttributes:()=>(0,v.x6)(["id","class","src","style","controls","loop","muted","preload","autoplay","width","height"]),parseHTML:()=>[{tag:"audio"}],renderHTML:({node:ot,HTMLAttributes:H})=>["audio",H,...(0,v.YX)(ot)]}),P=l.Node.create({name:"source",addAttributes:()=>(0,v.x6)(["src","type","width","height","media","sizes","srcset"]),parseHTML:()=>[{tag:"source"}],renderHTML:({HTMLAttributes:ot})=>["source",(0,l.mergeAttributes)(ot)]}),g=l.Node.create({name:"video",group:"block",content:"source+",addAttributes:()=>(0,v.x6)(["id","class","src","style","controls","loop","muted","preload","autoplay","width","height"]),parseHTML:()=>[{tag:"video"}],renderHTML:({node:ot,HTMLAttributes:H})=>["video",H,...(0,v.YX)(ot)]})},2823:(Yt,vt,c)=>{c.r(vt),c.d(vt,{StarterKit:()=>$e});var v=c(12867);const l=/^\s*>\s$/,y=v.Node.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:$}){return["blockquote",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setBlockquote:()=>({commands:$})=>$.wrapIn(this.name),toggleBlockquote:()=>({commands:$})=>$.toggleWrap(this.name),unsetBlockquote:()=>({commands:$})=>$.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,v.wrappingInputRule)({find:l,type:this.type})]}}),P=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,g=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,ot=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,H=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,X=v.Mark.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:$=>"normal"!==$.style.fontWeight&&null},{style:"font-weight",getAttrs:$=>/^(bold(er)?|[5-9]\d{2,})$/.test($)&&null}],renderHTML({HTMLAttributes:$}){return["strong",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setBold:()=>({commands:$})=>$.setMark(this.name),toggleBold:()=>({commands:$})=>$.toggleMark(this.name),unsetBold:()=>({commands:$})=>$.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,v.markInputRule)({find:P,type:this.type}),(0,v.markInputRule)({find:ot,type:this.type})]},addPasteRules(){return[(0,v.markPasteRule)({find:g,type:this.type}),(0,v.markPasteRule)({find:H,type:this.type})]}}),et=v.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:$}){return["li",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),_t=v.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:$=>!!$.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:$}){return["span",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:$,commands:S})=>{const lt=(0,v.getMarkAttributes)($,this.type);return!!Object.entries(lt).some(([,Et])=>!!Et)||S.unsetMark(this.name)}}}}),dt=/^\s*([-+*])\s$/,Mt=v.Node.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:$}){return["ul",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{toggleBulletList:()=>({commands:$,chain:S})=>this.options.keepAttributes?S().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(et.name,this.editor.getAttributes(_t.name)).run():$.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let $=(0,v.wrappingInputRule)({find:dt,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&($=(0,v.wrappingInputRule)({find:dt,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(_t.name),editor:this.editor})),[$]}}),rt=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,ft=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,Ot=v.Mark.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:$}){return["code",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setCode:()=>({commands:$})=>$.setMark(this.name),toggleCode:()=>({commands:$})=>$.toggleMark(this.name),unsetCode:()=>({commands:$})=>$.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,v.markInputRule)({find:rt,type:this.type})]},addPasteRules(){return[(0,v.markPasteRule)({find:ft,type:this.type})]}});var St=c(62463);const Pt=/^```([a-z]+)?[\s\n]$/,Dt=/^~~~([a-z]+)?[\s\n]$/,pt=v.Node.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:$=>{var S;const{languageClassPrefix:lt}=this.options;return[...(null===(S=$.firstElementChild)||void 0===S?void 0:S.classList)||[]].filter(Wt=>Wt.startsWith(lt)).map(Wt=>Wt.replace(lt,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:$,HTMLAttributes:S}){return["pre",(0,v.mergeAttributes)(this.options.HTMLAttributes,S),["code",{class:$.attrs.language?this.options.languageClassPrefix+$.attrs.language:null},0]]},addCommands(){return{setCodeBlock:$=>({commands:S})=>S.setNode(this.name,$),toggleCodeBlock:$=>({commands:S})=>S.toggleNode(this.name,"paragraph",$)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:$,$anchor:S}=this.editor.state.selection;return!(!$||S.parent.type.name!==this.name)&&!(1!==S.pos&&S.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:$})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:S}=$,{selection:lt}=S,{$from:Tt,empty:Et}=lt;if(!Et||Tt.parent.type!==this.type)return!1;const Ft=Tt.parentOffset===Tt.parent.nodeSize-2,Wt=Tt.parent.textContent.endsWith("\n\n");return!(!Ft||!Wt)&&$.chain().command(({tr:Qt})=>(Qt.delete(Tt.pos-2,Tt.pos),!0)).exitCode().run()},ArrowDown:({editor:$})=>{if(!this.options.exitOnArrowDown)return!1;const{state:S}=$,{selection:lt,doc:Tt}=S,{$from:Et,empty:Ft}=lt;if(!Ft||Et.parent.type!==this.type||Et.parentOffset!==Et.parent.nodeSize-2)return!1;const Qt=Et.after();return void 0!==Qt&&!Tt.nodeAt(Qt)&&$.commands.exitCode()}}},addInputRules(){return[(0,v.textblockTypeInputRule)({find:Pt,type:this.type,getAttributes:$=>({language:$[1]})}),(0,v.textblockTypeInputRule)({find:Dt,type:this.type,getAttributes:$=>({language:$[1]})})]},addProseMirrorPlugins(){return[new St.Sy({key:new St.H$("codeBlockVSCodeHandler"),props:{handlePaste:($,S)=>{if(!S.clipboardData||this.editor.isActive(this.type.name))return!1;const lt=S.clipboardData.getData("text/plain"),Tt=S.clipboardData.getData("vscode-editor-data"),Et=Tt?JSON.parse(Tt):void 0,Ft=null==Et?void 0:Et.mode;if(!lt||!Ft)return!1;const{tr:Wt}=$.state;return Wt.replaceSelectionWith(this.type.create({language:Ft})),Wt.setSelection(St.Bs.near(Wt.doc.resolve(Math.max(0,Wt.selection.from-2)))),Wt.insertText(lt.replace(/\r\n?/g,"\n")),Wt.setMeta("paste",!0),$.dispatch(Wt),!0}}})]}}),tt=v.Node.create({name:"doc",topNode:!0,content:"block+"});var F=c(38480);function mt($={}){return new St.Sy({view:S=>new j(S,$)})}class j{constructor(S,lt){var Tt;this.editorView=S,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(Tt=lt.width)&&void 0!==Tt?Tt:1,this.color=!1===lt.color?void 0:lt.color||"black",this.class=lt.class,this.handlers=["dragover","dragend","drop","dragleave"].map(Et=>{let Ft=Wt=>{this[Et](Wt)};return S.dom.addEventListener(Et,Ft),{name:Et,handler:Ft}})}destroy(){this.handlers.forEach(({name:S,handler:lt})=>this.editorView.dom.removeEventListener(S,lt))}update(S,lt){null!=this.cursorPos&&lt.doc!=S.state.doc&&(this.cursorPos>S.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(S){S!=this.cursorPos&&(this.cursorPos=S,null==S?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let Tt,S=this.editorView.state.doc.resolve(this.cursorPos),lt=!S.parent.inlineContent;if(lt){let Qt=S.nodeBefore,oe=S.nodeAfter;if(Qt||oe){let Te=this.editorView.nodeDOM(this.cursorPos-(Qt?Qt.nodeSize:0));if(Te){let se=Te.getBoundingClientRect(),le=Qt?se.bottom:se.top;Qt&&oe&&(le=(le+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),Tt={left:se.left,right:se.right,top:le-this.width/2,bottom:le+this.width/2}}}}if(!Tt){let Qt=this.editorView.coordsAtPos(this.cursorPos);Tt={left:Qt.left-this.width/2,right:Qt.left+this.width/2,top:Qt.top,bottom:Qt.bottom}}let Ft,Wt,Et=this.editorView.dom.offsetParent;if(this.element||(this.element=Et.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",lt),this.element.classList.toggle("prosemirror-dropcursor-inline",!lt),!Et||Et==document.body&&"static"==getComputedStyle(Et).position)Ft=-pageXOffset,Wt=-pageYOffset;else{let Qt=Et.getBoundingClientRect();Ft=Qt.left-Et.scrollLeft,Wt=Qt.top-Et.scrollTop}this.element.style.left=Tt.left-Ft+"px",this.element.style.top=Tt.top-Wt+"px",this.element.style.width=Tt.right-Tt.left+"px",this.element.style.height=Tt.bottom-Tt.top+"px"}scheduleRemoval(S){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),S)}dragover(S){if(!this.editorView.editable)return;let lt=this.editorView.posAtCoords({left:S.clientX,top:S.clientY}),Tt=lt&&lt.inside>=0&&this.editorView.state.doc.nodeAt(lt.inside),Et=Tt&&Tt.type.spec.disableDropCursor,Ft="function"==typeof Et?Et(this.editorView,lt,S):Et;if(lt&&!Ft){let Wt=lt.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let Qt=(0,F.nj)(this.editorView.state.doc,Wt,this.editorView.dragging.slice);null!=Qt&&(Wt=Qt)}this.setCursor(Wt),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(S){(S.target==this.editorView.dom||!this.editorView.dom.contains(S.relatedTarget))&&this.setCursor(null)}}const At=v.Extension.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[mt(this.options)]}});var kt=c(70768),yt=c(77346),Bt=c(43594);class Ht extends St.Y1{constructor(S){super(S,S)}map(S,lt){let Tt=S.resolve(lt.map(this.head));return Ht.valid(Tt)?new Ht(Tt):St.Y1.near(Tt)}content(){return yt.p2.empty}eq(S){return S instanceof Ht&&S.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(S,lt){if("number"!=typeof lt.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ht(S.resolve(lt.pos))}getBookmark(){return new Kt(this.anchor)}static valid(S){let lt=S.parent;if(lt.isTextblock||!function($){for(let S=$.depth;S>=0;S--){let lt=$.index(S),Tt=$.node(S);if(0!=lt)for(let Et=Tt.child(lt-1);;Et=Et.lastChild){if(0==Et.childCount&&!Et.inlineContent||Et.isAtom||Et.type.spec.isolating)return!0;if(Et.inlineContent)return!1}else if(Tt.type.spec.isolating)return!0}return!0}(S)||!function($){for(let S=$.depth;S>=0;S--){let lt=$.indexAfter(S),Tt=$.node(S);if(lt!=Tt.childCount)for(let Et=Tt.child(lt);;Et=Et.firstChild){if(0==Et.childCount&&!Et.inlineContent||Et.isAtom||Et.type.spec.isolating)return!0;if(Et.inlineContent)return!1}else if(Tt.type.spec.isolating)return!0}return!0}(S))return!1;let Tt=lt.type.spec.allowGapCursor;if(null!=Tt)return Tt;let Et=lt.contentMatchAt(S.index()).defaultType;return Et&&Et.isTextblock}static findGapCursorFrom(S,lt,Tt=!1){t:for(;;){if(!Tt&&Ht.valid(S))return S;let Et=S.pos,Ft=null;for(let Wt=S.depth;;Wt--){let Qt=S.node(Wt);if(lt>0?S.indexAfter(Wt)<Qt.childCount:S.index(Wt)>0){Ft=Qt.child(lt>0?S.indexAfter(Wt):S.index(Wt)-1);break}if(0==Wt)return null;Et+=lt;let oe=S.doc.resolve(Et);if(Ht.valid(oe))return oe}for(;;){let Wt=lt>0?Ft.firstChild:Ft.lastChild;if(!Wt){if(Ft.isAtom&&!Ft.isText&&!St.qv.isSelectable(Ft)){S=S.doc.resolve(Et+Ft.nodeSize*lt),Tt=!1;continue t}break}Ft=Wt,Et+=lt;let Qt=S.doc.resolve(Et);if(Ht.valid(Qt))return Qt}return null}}}Ht.prototype.visible=!1,Ht.findFrom=Ht.findGapCursorFrom,St.Y1.jsonID("gapcursor",Ht);class Kt{constructor(S){this.pos=S}map(S){return new Kt(S.map(this.pos))}resolve(S){let lt=S.resolve(this.pos);return Ht.valid(lt)?new Ht(lt):St.Y1.near(lt)}}const ct=(0,kt.$)({ArrowLeft:st("horiz",-1),ArrowRight:st("horiz",1),ArrowUp:st("vert",-1),ArrowDown:st("vert",1)});function st($,S){const lt="vert"==$?S>0?"down":"up":S>0?"right":"left";return function(Tt,Et,Ft){let Wt=Tt.selection,Qt=S>0?Wt.$to:Wt.$from,oe=Wt.empty;if(Wt instanceof St.Bs){if(!Ft.endOfTextblock(lt)||0==Qt.depth)return!1;oe=!1,Qt=Tt.doc.resolve(S>0?Qt.after():Qt.before())}let Te=Ht.findGapCursorFrom(Qt,S,oe);return!!Te&&(Et&&Et(Tt.tr.setSelection(new Ht(Te))),!0)}}function J($,S,lt){if(!$||!$.editable)return!1;let Tt=$.state.doc.resolve(S);if(!Ht.valid(Tt))return!1;let Et=$.posAtCoords({left:lt.clientX,top:lt.clientY});return!(Et&&Et.inside>-1&&St.qv.isSelectable($.state.doc.nodeAt(Et.inside))||($.dispatch($.state.tr.setSelection(new Ht(Tt))),0))}function Q($,S){if("insertCompositionText"!=S.inputType||!($.state.selection instanceof Ht))return!1;let{$from:lt}=$.state.selection,Tt=lt.parent.contentMatchAt(lt.index()).findWrapping($.state.schema.nodes.text);if(!Tt)return!1;let Et=yt.HY.empty;for(let Wt=Tt.length-1;Wt>=0;Wt--)Et=yt.HY.from(Tt[Wt].createAndFill(null,Et));let Ft=$.state.tr.replace(lt.pos,lt.pos,new yt.p2(Et,0,0));return Ft.setSelection(St.Bs.near(Ft.doc.resolve(lt.pos+1))),$.dispatch(Ft),!1}function nt($){if(!($.selection instanceof Ht))return null;let S=document.createElement("div");return S.className="ProseMirror-gapcursor",Bt.EH.create($.doc,[Bt.p.widget($.selection.head,S,{key:"gapcursor"})])}const wt=v.Extension.create({name:"gapCursor",addProseMirrorPlugins:()=>[new St.Sy({props:{decorations:nt,createSelectionBetween:($,S,lt)=>S.pos==lt.pos&&Ht.valid(lt)?new Ht(lt):null,handleClick:J,handleKeyDown:ct,handleDOMEvents:{beforeinput:Q}}})],extendNodeSchema($){var S;return{allowGapCursor:null!==(S=(0,v.callOrReturn)((0,v.getExtensionField)($,"allowGapCursor",{name:$.name,options:$.options,storage:$.storage})))&&void 0!==S?S:null}}}),Jt=v.Node.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:$}){return["br",(0,v.mergeAttributes)(this.options.HTMLAttributes,$)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:$,chain:S,state:lt,editor:Tt})=>$.first([()=>$.exitCode(),()=>$.command(()=>{const{selection:Et,storedMarks:Ft}=lt;if(Et.$from.parent.type.spec.isolating)return!1;const{keepMarks:Wt}=this.options,{splittableMarks:Qt}=Tt.extensionManager,oe=Ft||Et.$to.parentOffset&&Et.$from.marks();return S().insertContent({type:this.name}).command(({tr:Te,dispatch:se})=>{if(se&&oe&&Wt){const le=oe.filter(ce=>Qt.includes(ce.type.name));Te.ensureMarks(le)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Zt=v.Node.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map($=>({tag:`h${$}`,attrs:{level:$}}))},renderHTML({node:$,HTMLAttributes:S}){return[`h${this.options.levels.includes($.attrs.level)?$.attrs.level:this.options.levels[0]}`,(0,v.mergeAttributes)(this.options.HTMLAttributes,S),0]},addCommands(){return{setHeading:$=>({commands:S})=>!!this.options.levels.includes($.level)&&S.setNode(this.name,$),toggleHeading:$=>({commands:S})=>!!this.options.levels.includes($.level)&&S.toggleNode(this.name,"paragraph",$)}},addKeyboardShortcuts(){return this.options.levels.reduce(($,S)=>me(Gt({},$),{[`Mod-Alt-${S}`]:()=>this.editor.commands.toggleHeading({level:S})}),{})},addInputRules(){return this.options.levels.map($=>(0,v.textblockTypeInputRule)({find:new RegExp(`^(#{1,${$}})\\s$`),type:this.type,getAttributes:{level:$}}))}});var zt=function(){};zt.prototype.append=function(S){return S.length?(S=zt.from(S),!this.length&&S||S.length<200&&this.leafAppend(S)||this.length<200&&S.leafPrepend(this)||this.appendInner(S)):this},zt.prototype.prepend=function(S){return S.length?zt.from(S).append(this):this},zt.prototype.appendInner=function(S){return new ye(this,S)},zt.prototype.slice=function(S,lt){return void 0===S&&(S=0),void 0===lt&&(lt=this.length),S>=lt?zt.empty:this.sliceInner(Math.max(0,S),Math.min(this.length,lt))},zt.prototype.get=function(S){if(!(S<0||S>=this.length))return this.getInner(S)},zt.prototype.forEach=function(S,lt,Tt){void 0===lt&&(lt=0),void 0===Tt&&(Tt=this.length),lt<=Tt?this.forEachInner(S,lt,Tt,0):this.forEachInvertedInner(S,lt,Tt,0)},zt.prototype.map=function(S,lt,Tt){void 0===lt&&(lt=0),void 0===Tt&&(Tt=this.length);var Et=[];return this.forEach(function(Ft,Wt){return Et.push(S(Ft,Wt))},lt,Tt),Et},zt.from=function(S){return S instanceof zt?S:S&&S.length?new ue(S):zt.empty};var ue=function($){function S(Tt){$.call(this),this.values=Tt}$&&(S.__proto__=$),(S.prototype=Object.create($&&$.prototype)).constructor=S;var lt={length:{configurable:!0},depth:{configurable:!0}};return S.prototype.flatten=function(){return this.values},S.prototype.sliceInner=function(Et,Ft){return 0==Et&&Ft==this.length?this:new S(this.values.slice(Et,Ft))},S.prototype.getInner=function(Et){return this.values[Et]},S.prototype.forEachInner=function(Et,Ft,Wt,Qt){for(var oe=Ft;oe<Wt;oe++)if(!1===Et(this.values[oe],Qt+oe))return!1},S.prototype.forEachInvertedInner=function(Et,Ft,Wt,Qt){for(var oe=Ft-1;oe>=Wt;oe--)if(!1===Et(this.values[oe],Qt+oe))return!1},S.prototype.leafAppend=function(Et){if(this.length+Et.length<=200)return new S(this.values.concat(Et.flatten()))},S.prototype.leafPrepend=function(Et){if(this.length+Et.length<=200)return new S(Et.flatten().concat(this.values))},lt.length.get=function(){return this.values.length},lt.depth.get=function(){return 0},Object.defineProperties(S.prototype,lt),S}(zt);zt.empty=new ue([]);var ye=function($){function S(lt,Tt){$.call(this),this.left=lt,this.right=Tt,this.length=lt.length+Tt.length,this.depth=Math.max(lt.depth,Tt.depth)+1}return $&&(S.__proto__=$),(S.prototype=Object.create($&&$.prototype)).constructor=S,S.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},S.prototype.getInner=function(Tt){return Tt<this.left.length?this.left.get(Tt):this.right.get(Tt-this.left.length)},S.prototype.forEachInner=function(Tt,Et,Ft,Wt){var Qt=this.left.length;if(Et<Qt&&!1===this.left.forEachInner(Tt,Et,Math.min(Ft,Qt),Wt)||Ft>Qt&&!1===this.right.forEachInner(Tt,Math.max(Et-Qt,0),Math.min(this.length,Ft)-Qt,Wt+Qt))return!1},S.prototype.forEachInvertedInner=function(Tt,Et,Ft,Wt){var Qt=this.left.length;if(Et>Qt&&!1===this.right.forEachInvertedInner(Tt,Et-Qt,Math.max(Ft,Qt)-Qt,Wt+Qt)||Ft<Qt&&!1===this.left.forEachInvertedInner(Tt,Math.min(Et,Qt),Ft,Wt))return!1},S.prototype.sliceInner=function(Tt,Et){if(0==Tt&&Et==this.length)return this;var Ft=this.left.length;return Et<=Ft?this.left.slice(Tt,Et):Tt>=Ft?this.right.slice(Tt-Ft,Et-Ft):this.left.slice(Tt,Ft).append(this.right.slice(0,Et-Ft))},S.prototype.leafAppend=function(Tt){var Et=this.right.leafAppend(Tt);if(Et)return new S(this.left,Et)},S.prototype.leafPrepend=function(Tt){var Et=this.left.leafPrepend(Tt);if(Et)return new S(Et,this.right)},S.prototype.appendInner=function(Tt){return this.left.depth>=Math.max(this.right.depth,Tt.depth)+1?new S(this.left,new S(this.right,Tt)):new S(this,Tt)},S}(zt);const he=zt;class xe{constructor(S,lt){this.items=S,this.eventCount=lt}popEvent(S,lt){if(0==this.eventCount)return null;let Et,Ft,Tt=this.items.length;for(;;Tt--)if(this.items.get(Tt-1).selection){--Tt;break}lt&&(Et=this.remapping(Tt,this.items.length),Ft=Et.maps.length);let Qt,oe,Wt=S.tr,Te=[],se=[];return this.items.forEach((le,ce)=>{if(!le.step)return Et||(Et=this.remapping(Tt,ce+1),Ft=Et.maps.length),Ft--,void se.push(le);if(Et){se.push(new ge(le.map));let We,Re=le.step.map(Et.slice(Ft));Re&&Wt.maybeStep(Re).doc&&(We=Wt.mapping.maps[Wt.mapping.maps.length-1],Te.push(new ge(We,void 0,void 0,Te.length+se.length))),Ft--,We&&Et.appendMap(We,Ft)}else Wt.maybeStep(le.step);return le.selection?(Qt=Et?le.selection.map(Et.slice(Ft)):le.selection,oe=new xe(this.items.slice(0,Tt).append(se.reverse().concat(Te)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:oe,transform:Wt,selection:Qt}}addTransform(S,lt,Tt,Et){let Ft=[],Wt=this.eventCount,Qt=this.items,oe=!Et&&Qt.length?Qt.get(Qt.length-1):null;for(let se=0;se<S.steps.length;se++){let Re,le=S.steps[se].invert(S.docs[se]),ce=new ge(S.mapping.maps[se],le,lt);(Re=oe&&oe.merge(ce))&&(ce=Re,se?Ft.pop():Qt=Qt.slice(0,Qt.length-1)),Ft.push(ce),lt&&(Wt++,lt=void 0),Et||(oe=ce)}let Te=Wt-Tt.depth;return Te>ve&&(Qt=function($,S){let lt;return $.forEach((Tt,Et)=>{if(Tt.selection&&0==S--)return lt=Et,!1}),$.slice(lt)}(Qt,Te),Wt-=Te),new xe(Qt.append(Ft),Wt)}remapping(S,lt){let Tt=new F.vs;return this.items.forEach((Et,Ft)=>{Tt.appendMap(Et.map,null!=Et.mirrorOffset&&Ft-Et.mirrorOffset>=S?Tt.maps.length-Et.mirrorOffset:void 0)},S,lt),Tt}addMaps(S){return 0==this.eventCount?this:new xe(this.items.append(S.map(lt=>new ge(lt))),this.eventCount)}rebased(S,lt){if(!this.eventCount)return this;let Tt=[],Et=Math.max(0,this.items.length-lt),Ft=S.mapping,Wt=S.steps.length,Qt=this.eventCount;this.items.forEach(ce=>{ce.selection&&Qt--},Et);let oe=lt;this.items.forEach(ce=>{let Re=Ft.getMirror(--oe);if(null==Re)return;Wt=Math.min(Wt,Re);let We=Ft.maps[Re];if(ce.step){let cn=S.steps[Re].invert(S.docs[Re]),de=ce.selection&&ce.selection.map(Ft.slice(oe+1,Re));de&&Qt++,Tt.push(new ge(We,cn,de))}else Tt.push(new ge(We))},Et);let Te=[];for(let ce=lt;ce<Wt;ce++)Te.push(new ge(Ft.maps[ce]));let se=this.items.slice(0,Et).append(Te).append(Tt),le=new xe(se,Qt);return le.emptyItemCount()>500&&(le=le.compress(this.items.length-Tt.length)),le}emptyItemCount(){let S=0;return this.items.forEach(lt=>{lt.step||S++}),S}compress(S=this.items.length){let lt=this.remapping(0,S),Tt=lt.maps.length,Et=[],Ft=0;return this.items.forEach((Wt,Qt)=>{if(Qt>=S)Et.push(Wt),Wt.selection&&Ft++;else if(Wt.step){let oe=Wt.step.map(lt.slice(Tt)),Te=oe&&oe.getMap();if(Tt--,Te&&lt.appendMap(Te,Tt),oe){let se=Wt.selection&&Wt.selection.map(lt.slice(Tt));se&&Ft++;let ce,le=new ge(Te.invert(),oe,se),Re=Et.length-1;(ce=Et.length&&Et[Re].merge(le))?Et[Re]=ce:Et.push(le)}}else Wt.map&&Tt--},this.items.length,0),new xe(he.from(Et.reverse()),Ft)}}xe.empty=new xe(he.empty,0);class ge{constructor(S,lt,Tt,Et){this.map=S,this.step=lt,this.selection=Tt,this.mirrorOffset=Et}merge(S){if(this.step&&S.step&&!S.selection){let lt=S.step.merge(this.step);if(lt)return new ge(lt.getMap().invert(),lt,this.selection)}}}class Ae{constructor(S,lt,Tt,Et){this.done=S,this.undone=lt,this.prevRanges=Tt,this.prevTime=Et}}const ve=20;function Me($){let S=[];return $.forEach((lt,Tt,Et,Ft)=>S.push(Et,Ft)),S}function Ie($,S){if(!$)return null;let lt=[];for(let Tt=0;Tt<$.length;Tt+=2){let Et=S.map($[Tt],1),Ft=S.map($[Tt+1],-1);Et<=Ft&&lt.push(Et,Ft)}return lt}function Ye($,S,lt,Tt){let Et=Le(S),Ft=_e.get(S).spec.config,Wt=(Tt?$.undone:$.done).popEvent(S,Et);if(!Wt)return;let Qt=Wt.selection.resolve(Wt.transform.doc),oe=(Tt?$.done:$.undone).addTransform(Wt.transform,S.selection.getBookmark(),Ft,Et),Te=new Ae(Tt?oe:Wt.remaining,Tt?Wt.remaining:oe,null,0);lt(Wt.transform.setSelection(Qt).setMeta(_e,{redo:Tt,historyState:Te}).scrollIntoView())}let He=!1,Ue=null;function Le($){let S=$.plugins;if(Ue!=S){He=!1,Ue=S;for(let lt=0;lt<S.length;lt++)if(S[lt].spec.historyPreserveItems){He=!0;break}}return He}const _e=new St.H$("history"),fe=new St.H$("closeHistory");function Ee($={}){return new St.Sy({key:_e,state:{init:()=>new Ae(xe.empty,xe.empty,null,0),apply:(S,lt,Tt)=>function($,S,lt,Tt){let Ft,Et=lt.getMeta(_e);if(Et)return Et.historyState;lt.getMeta(fe)&&($=new Ae($.done,$.undone,null,0));let Wt=lt.getMeta("appendedTransaction");if(0==lt.steps.length)return $;if(Wt&&Wt.getMeta(_e))return Wt.getMeta(_e).redo?new Ae($.done.addTransform(lt,void 0,Tt,Le(S)),$.undone,Me(lt.mapping.maps[lt.steps.length-1]),$.prevTime):new Ae($.done,$.undone.addTransform(lt,void 0,Tt,Le(S)),null,$.prevTime);if(!1===lt.getMeta("addToHistory")||Wt&&!1===Wt.getMeta("addToHistory"))return(Ft=lt.getMeta("rebased"))?new Ae($.done.rebased(lt,Ft),$.undone.rebased(lt,Ft),Ie($.prevRanges,lt.mapping),$.prevTime):new Ae($.done.addMaps(lt.mapping.maps),$.undone.addMaps(lt.mapping.maps),Ie($.prevRanges,lt.mapping),$.prevTime);{let Qt=0==$.prevTime||!Wt&&($.prevTime<(lt.time||0)-Tt.newGroupDelay||!function($,S){if(!S)return!1;if(!$.docChanged)return!0;let lt=!1;return $.mapping.maps[0].forEach((Tt,Et)=>{for(let Ft=0;Ft<S.length;Ft+=2)Tt<=S[Ft+1]&&Et>=S[Ft]&&(lt=!0)}),lt}(lt,$.prevRanges)),oe=Wt?Ie($.prevRanges,lt.mapping):Me(lt.mapping.maps[lt.steps.length-1]);return new Ae($.done.addTransform(lt,Qt?S.selection.getBookmark():void 0,Tt,Le(S)),xe.empty,oe,lt.time)}}(lt,Tt,S,$)},config:$={depth:$.depth||100,newGroupDelay:$.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(S,lt){let Tt=lt.inputType,Et="historyUndo"==Tt?gt:"historyRedo"==Tt?b:null;return!!Et&&(lt.preventDefault(),Et(S.state,S.dispatch))}}}})}const gt=($,S)=>{let lt=_e.getState($);return!(!lt||0==lt.done.eventCount||(S&&Ye(lt,$,S,!1),0))},b=($,S)=>{let lt=_e.getState($);return!(!lt||0==lt.undone.eventCount||(S&&Ye(lt,$,S,!0),0))},w=v.Extension.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:$,dispatch:S})=>gt($,S),redo:()=>({state:$,dispatch:S})=>b($,S)}),addProseMirrorPlugins(){return[Ee(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),V=v.Node.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:$}){return["hr",(0,v.mergeAttributes)(this.options.HTMLAttributes,$)]},addCommands(){return{setHorizontalRule:()=>({chain:$})=>$().insertContent({type:this.name}).command(({tr:S,dispatch:lt})=>{var Tt;if(lt){const{$to:Et}=S.selection,Ft=Et.end();if(Et.nodeAfter)S.setSelection(St.Bs.create(S.doc,Et.pos));else{const Wt=null===(Tt=Et.parent.type.contentMatch.defaultType)||void 0===Tt?void 0:Tt.create();Wt&&(S.insert(Ft,Wt),S.setSelection(St.Bs.create(S.doc,Ft)))}S.scrollIntoView()}return!0}).run()}},addInputRules(){return[(0,v.nodeInputRule)({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),z=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,bt=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,Rt=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,U=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,a=v.Mark.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:$=>"normal"!==$.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:$}){return["em",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setItalic:()=>({commands:$})=>$.setMark(this.name),toggleItalic:()=>({commands:$})=>$.toggleMark(this.name),unsetItalic:()=>({commands:$})=>$.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,v.markInputRule)({find:z,type:this.type}),(0,v.markInputRule)({find:Rt,type:this.type})]},addPasteRules(){return[(0,v.markPasteRule)({find:bt,type:this.type}),(0,v.markPasteRule)({find:U,type:this.type})]}}),p=v.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:$}){return["li",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),E=v.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:$}){return["li",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),D=v.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:$=>!!$.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:$}){return["span",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:$,commands:S})=>{const lt=(0,v.getMarkAttributes)($,this.type);return!!Object.entries(lt).some(([,Et])=>!!Et)||S.unsetMark(this.name)}}}}),I=/^(\d+)\.\s$/,K=v.Node.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:$=>$.hasAttribute("start")?parseInt($.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:$}){const Tt=$,{start:S}=Tt,lt=Vo(Tt,["start"]);return 1===S?["ol",(0,v.mergeAttributes)(this.options.HTMLAttributes,lt),0]:["ol",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{toggleOrderedList:()=>({commands:$,chain:S})=>this.options.keepAttributes?S().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(E.name,this.editor.getAttributes(D.name)).run():$.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let $=(0,v.wrappingInputRule)({find:I,type:this.type,getAttributes:S=>({start:+S[1]}),joinPredicate:(S,lt)=>lt.childCount+lt.attrs.start===+S[1]});return(this.options.keepMarks||this.options.keepAttributes)&&($=(0,v.wrappingInputRule)({find:I,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:S=>Gt({start:+S[1]},this.editor.getAttributes(D.name)),joinPredicate:(S,lt)=>lt.childCount+lt.attrs.start===+S[1],editor:this.editor})),[$]}}),at=v.Node.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:$}){return["p",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setParagraph:()=>({commands:$})=>$.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Lt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,te=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,ee=v.Mark.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:$=>!!$.includes("line-through")&&{}}],renderHTML({HTMLAttributes:$}){return["s",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setStrike:()=>({commands:$})=>$.setMark(this.name),toggleStrike:()=>({commands:$})=>$.toggleMark(this.name),unsetStrike:()=>({commands:$})=>$.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,v.markInputRule)({find:Lt,type:this.type})]},addPasteRules(){return[(0,v.markPasteRule)({find:te,type:this.type})]}}),we=v.Node.create({name:"text",group:"inline"}),$e=v.Extension.create({name:"starterKit",addExtensions(){const $=[],S=this.options;return!1!==(null==S?void 0:S.blockquote)&&$.push(y.configure(null==S?void 0:S.blockquote)),!1!==(null==S?void 0:S.bold)&&$.push(X.configure(null==S?void 0:S.bold)),!1!==(null==S?void 0:S.bulletList)&&$.push(Mt.configure(null==S?void 0:S.bulletList)),!1!==(null==S?void 0:S.code)&&$.push(Ot.configure(null==S?void 0:S.code)),!1!==(null==S?void 0:S.codeBlock)&&$.push(pt.configure(null==S?void 0:S.codeBlock)),!1!==(null==S?void 0:S.document)&&$.push(tt.configure(null==S?void 0:S.document)),!1!==(null==S?void 0:S.dropcursor)&&$.push(At.configure(null==S?void 0:S.dropcursor)),!1!==(null==S?void 0:S.gapcursor)&&$.push(wt.configure(null==S?void 0:S.gapcursor)),!1!==(null==S?void 0:S.hardBreak)&&$.push(Jt.configure(null==S?void 0:S.hardBreak)),!1!==(null==S?void 0:S.heading)&&$.push(Zt.configure(null==S?void 0:S.heading)),!1!==(null==S?void 0:S.history)&&$.push(w.configure(null==S?void 0:S.history)),!1!==(null==S?void 0:S.horizontalRule)&&$.push(V.configure(null==S?void 0:S.horizontalRule)),!1!==(null==S?void 0:S.italic)&&$.push(a.configure(null==S?void 0:S.italic)),!1!==(null==S?void 0:S.listItem)&&$.push(p.configure(null==S?void 0:S.listItem)),!1!==(null==S?void 0:S.orderedList)&&$.push(K.configure(null==S?void 0:S.orderedList)),!1!==(null==S?void 0:S.paragraph)&&$.push(at.configure(null==S?void 0:S.paragraph)),!1!==(null==S?void 0:S.strike)&&$.push(ee.configure(null==S?void 0:S.strike)),!1!==(null==S?void 0:S.text)&&$.push(we.configure(null==S?void 0:S.text)),$}})},51919:(Yt,vt,c)=>{c.r(vt),c.d(vt,{TableCellBackground:()=>l});const l=c(12867).Extension.create({addGlobalAttributes:()=>[{types:["tableCell","tableHeader"],attributes:{background:{default:null,renderHTML:({background:y})=>y?{style:`background: ${y}`}:null,parseHTML:({style:y})=>y.background,keepOnSplit:!1}}}],addCommands:()=>({setCellBackground:y=>({chain:P})=>P().updateAttributes("tableCell",{background:y}).updateAttributes("tableHeader",{background:y}).run(),unsetCellBackground:()=>({chain:y})=>y().updateAttributes("tableCell",{background:null}).updateAttributes("tableHeader",{background:null}).run()})})},86624:(Yt,vt,c)=>{c.r(vt),c.d(vt,{TuiTable:()=>sn});var H,X,v=c(12867),l=c(62463),y=c(77346),P=c(43594),g=c(70768),ot=c(38480);if("undefined"!=typeof WeakMap){let _=new WeakMap;H=C=>_.get(C),X=(C,m)=>(_.set(C,m),m)}else{const _=[],C=10;let m=0;H=f=>{for(let M=0;M<_.length;M+=2)if(_[M]==f)return _[M+1]},X=(f,M)=>(m==C&&(m=0),_[m++]=f,_[m++]=M)}var et=class{constructor(_,C,m,f){this.width=_,this.height=C,this.map=m,this.problems=f}findCell(_){for(let C=0;C<this.map.length;C++){const m=this.map[C];if(m!=_)continue;const f=C%this.width,M=C/this.width|0;let x=f+1,R=M+1;for(let Z=1;x<this.width&&this.map[C+Z]==m;Z++)x++;for(let Z=1;R<this.height&&this.map[C+this.width*Z]==m;Z++)R++;return{left:f,top:M,right:x,bottom:R}}throw new RangeError(`No cell with offset ${_} found`)}colCount(_){for(let C=0;C<this.map.length;C++)if(this.map[C]==_)return C%this.width;throw new RangeError(`No cell with offset ${_} found`)}nextCell(_,C,m){const{left:f,right:M,top:x,bottom:R}=this.findCell(_);return"horiz"==C?(m<0?0==f:M==this.width)?null:this.map[x*this.width+(m<0?f-1:M)]:(m<0?0==x:R==this.height)?null:this.map[f+this.width*(m<0?x-1:R)]}rectBetween(_,C){const{left:m,right:f,top:M,bottom:x}=this.findCell(_),{left:R,right:Z,top:W,bottom:G}=this.findCell(C);return{left:Math.min(m,R),top:Math.min(M,W),right:Math.max(f,Z),bottom:Math.max(x,G)}}cellsInRect(_){const C=[],m={};for(let f=_.top;f<_.bottom;f++)for(let M=_.left;M<_.right;M++){const x=f*this.width+M,R=this.map[x];m[R]||(m[R]=!0,!(M==_.left&&M&&this.map[x-1]==R||f==_.top&&f&&this.map[x-this.width]==R)&&C.push(R))}return C}positionAt(_,C,m){for(let f=0,M=0;;f++){const x=M+m.child(f).nodeSize;if(f==_){let R=C+_*this.width;const Z=(_+1)*this.width;for(;R<Z&&this.map[R]<M;)R++;return R==Z?x-1:this.map[R]}M=x}}static get(_){return H(_)||X(_,function(_){if("table"!=_.type.spec.tableRole)throw new RangeError("Not a table node: "+_.type.name);const C=function(_){let C=-1,m=!1;for(let f=0;f<_.childCount;f++){const M=_.child(f);let x=0;if(m)for(let R=0;R<f;R++){const Z=_.child(R);for(let W=0;W<Z.childCount;W++){const G=Z.child(W);R+G.attrs.rowspan>f&&(x+=G.attrs.colspan)}}for(let R=0;R<M.childCount;R++){const Z=M.child(R);x+=Z.attrs.colspan,Z.attrs.rowspan>1&&(m=!0)}-1==C?C=x:C!=x&&(C=Math.max(C,x))}return C}(_),m=_.childCount,f=[];let M=0,x=null;const R=[];for(let G=0,Ct=C*m;G<Ct;G++)f[G]=0;for(let G=0,Ct=0;G<m;G++){const xt=_.child(G);Ct++;for(let jt=0;;jt++){for(;M<f.length&&0!=f[M];)M++;if(jt==xt.childCount)break;const re=xt.child(jt),{colspan:ie,rowspan:be,colwidth:qe}=re.attrs;for(let je=0;je<be;je++){if(je+G>=m){(x||(x=[])).push({type:"overlong_rowspan",pos:Ct,n:be-je});break}const Ce=M+je*C;for(let De=0;De<ie;De++){0==f[Ce+De]?f[Ce+De]=Ct:(x||(x=[])).push({type:"collision",row:G,pos:Ct,n:ie-De});const dn=qe&&qe[De];if(dn){const en=(Ce+De)%C*2,pe=R[en];null==pe||pe!=dn&&1==R[en+1]?(R[en]=dn,R[en+1]=1):pe==dn&&R[en+1]++}}}M+=ie,Ct+=re.nodeSize}const Nt=(G+1)*C;let Ut=0;for(;M<Nt;)0==f[M++]&&Ut++;Ut&&(x||(x=[])).push({type:"missing",row:G,n:Ut}),Ct++}const Z=new et(C,m,f,x);let W=!1;for(let G=0;!W&&G<R.length;G+=2)null!=R[G]&&R[G+1]<m&&(W=!0);return W&&function(_,C,m){_.problems||(_.problems=[]);const f={};for(let M=0;M<_.map.length;M++){const x=_.map[M];if(f[x])continue;f[x]=!0;const R=m.nodeAt(x);if(!R)throw new RangeError(`No cell with offset ${x} found`);let Z=null;const W=R.attrs;for(let G=0;G<W.colspan;G++){const xt=C[(M+G)%_.width*2];null!=xt&&(!W.colwidth||W.colwidth[G]!=xt)&&((Z||(Z=rt(W)))[G]=xt)}Z&&_.problems.unshift({type:"colwidth mismatch",pos:x,colwidth:Z})}}(Z,R,_),Z}(_))}};function rt(_){if(_.colwidth)return _.colwidth.slice();const C=[];for(let m=0;m<_.colspan;m++)C.push(0);return C}function Pt(_){let C=_.cached.tableNodeTypes;if(!C){C=_.cached.tableNodeTypes={};for(const m in _.nodes){const f=_.nodes[m],M=f.spec.tableRole;M&&(C[M]=f)}}return C}var Dt=new l.H$("selectingCells");function pt(_){for(let C=_.depth-1;C>0;C--)if("row"==_.node(C).type.spec.tableRole)return _.node(0).resolve(_.before(C+1));return null}function F(_){const C=_.selection.$head;for(let m=C.depth;m>0;m--)if("row"==C.node(m).type.spec.tableRole)return!0;return!1}function mt(_){const C=_.selection;if("$anchorCell"in C&&C.$anchorCell)return C.$anchorCell.pos>C.$headCell.pos?C.$anchorCell:C.$headCell;if("node"in C&&C.node&&"cell"==C.node.type.spec.tableRole)return C.$anchor;const m=pt(C.$head)||function(_){for(let C=_.nodeAfter,m=_.pos;C;C=C.firstChild,m++){const f=C.type.spec.tableRole;if("cell"==f||"header_cell"==f)return _.doc.resolve(m)}for(let C=_.nodeBefore,m=_.pos;C;C=C.lastChild,m--){const f=C.type.spec.tableRole;if("cell"==f||"header_cell"==f)return _.doc.resolve(m-C.nodeSize)}}(C.$head);if(m)return m;throw new RangeError(`No cell found around position ${C.head}`)}function At(_){return"row"==_.parent.type.spec.tableRole&&!!_.nodeAfter}function yt(_,C){return _.depth==C.depth&&_.pos>=C.start(-1)&&_.pos<=C.end(-1)}function Kt(_,C,m){const f=_.node(-1),M=et.get(f),x=_.start(-1),R=M.nextCell(_.pos-x,C,m);return null==R?null:_.node(0).resolve(x+R)}function ut(_,C,m=1){const f=me(Gt({},_),{colspan:_.colspan-m});return f.colwidth&&(f.colwidth=f.colwidth.slice(),f.colwidth.splice(C,m),f.colwidth.some(M=>M>0)||(f.colwidth=null)),f}function L(_,C,m=1){const f=me(Gt({},_),{colspan:_.colspan+m});if(f.colwidth){f.colwidth=f.colwidth.slice();for(let M=0;M<m;M++)f.colwidth.splice(C,0,0)}return f}var ct=class extends l.Y1{constructor(_,C=_){const m=_.node(-1),f=et.get(m),M=_.start(-1),x=f.rectBetween(_.pos-M,C.pos-M),R=_.node(0),Z=f.cellsInRect(x).filter(G=>G!=C.pos-M);Z.unshift(C.pos-M);const W=Z.map(G=>{const Ct=m.nodeAt(G);if(!Ct)throw RangeError(`No cell with offset ${G} found`);const xt=M+G+1;return new l.xm(R.resolve(xt),R.resolve(xt+Ct.content.size))});super(W[0].$from,W[0].$to,W),this.$anchorCell=_,this.$headCell=C}map(_,C){const m=_.resolve(C.map(this.$anchorCell.pos)),f=_.resolve(C.map(this.$headCell.pos));if(At(m)&&At(f)&&yt(m,f)){const M=this.$anchorCell.node(-1)!=m.node(-1);return M&&this.isRowSelection()?ct.rowSelection(m,f):M&&this.isColSelection()?ct.colSelection(m,f):new ct(m,f)}return l.Bs.between(m,f)}content(){const _=this.$anchorCell.node(-1),C=et.get(_),m=this.$anchorCell.start(-1),f=C.rectBetween(this.$anchorCell.pos-m,this.$headCell.pos-m),M={},x=[];for(let Z=f.top;Z<f.bottom;Z++){const W=[];for(let G=Z*C.width+f.left,Ct=f.left;Ct<f.right;Ct++,G++){const xt=C.map[G];if(M[xt])continue;M[xt]=!0;const Nt=C.findCell(xt);let Ut=_.nodeAt(xt);if(!Ut)throw RangeError(`No cell with offset ${xt} found`);const jt=f.left-Nt.left,re=Nt.right-f.right;if(jt>0||re>0){let ie=Ut.attrs;if(jt>0&&(ie=ut(ie,0,jt)),re>0&&(ie=ut(ie,ie.colspan-re,re)),Nt.left<f.left){if(Ut=Ut.type.createAndFill(ie),!Ut)throw RangeError(`Could not create cell with attrs ${JSON.stringify(ie)}`)}else Ut=Ut.type.create(ie,Ut.content)}if(Nt.top<f.top||Nt.bottom>f.bottom){const ie=me(Gt({},Ut.attrs),{rowspan:Math.min(Nt.bottom,f.bottom)-Math.max(Nt.top,f.top)});Ut=Nt.top<f.top?Ut.type.createAndFill(ie):Ut.type.create(ie,Ut.content)}W.push(Ut)}x.push(_.child(Z).copy(y.HY.from(W)))}const R=this.isColSelection()&&this.isRowSelection()?_:x;return new y.p2(y.HY.from(R),1,1)}replace(_,C=y.p2.empty){const m=_.steps.length,f=this.ranges;for(let x=0;x<f.length;x++){const{$from:R,$to:Z}=f[x],W=_.mapping.slice(m);_.replace(W.map(R.pos),W.map(Z.pos),x?y.p2.empty:C)}const M=l.Y1.findFrom(_.doc.resolve(_.mapping.slice(m).map(this.to)),-1);M&&_.setSelection(M)}replaceWith(_,C){this.replace(_,new y.p2(y.HY.from(C),0,0))}forEachCell(_){const C=this.$anchorCell.node(-1),m=et.get(C),f=this.$anchorCell.start(-1),M=m.cellsInRect(m.rectBetween(this.$anchorCell.pos-f,this.$headCell.pos-f));for(let x=0;x<M.length;x++)_(C.nodeAt(M[x]),f+M[x])}isColSelection(){const _=this.$anchorCell.index(-1),C=this.$headCell.index(-1);return!(Math.min(_,C)>0)&&Math.max(_+this.$anchorCell.nodeAfter.attrs.rowspan,C+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(_,C=_){const m=_.node(-1),f=et.get(m),M=_.start(-1),x=f.findCell(_.pos-M),R=f.findCell(C.pos-M),Z=_.node(0);return x.top<=R.top?(x.top>0&&(_=Z.resolve(M+f.map[x.left])),R.bottom<f.height&&(C=Z.resolve(M+f.map[f.width*(f.height-1)+R.right-1]))):(R.top>0&&(C=Z.resolve(M+f.map[R.left])),x.bottom<f.height&&(_=Z.resolve(M+f.map[f.width*(f.height-1)+x.right-1]))),new ct(_,C)}isRowSelection(){const _=this.$anchorCell.node(-1),C=et.get(_),m=this.$anchorCell.start(-1),f=C.colCount(this.$anchorCell.pos-m),M=C.colCount(this.$headCell.pos-m);return!(Math.min(f,M)>0)&&Math.max(f+this.$anchorCell.nodeAfter.attrs.colspan,M+this.$headCell.nodeAfter.attrs.colspan)==C.width}eq(_){return _ instanceof ct&&_.$anchorCell.pos==this.$anchorCell.pos&&_.$headCell.pos==this.$headCell.pos}static rowSelection(_,C=_){const m=_.node(-1),f=et.get(m),M=_.start(-1),x=f.findCell(_.pos-M),R=f.findCell(C.pos-M),Z=_.node(0);return x.left<=R.left?(x.left>0&&(_=Z.resolve(M+f.map[x.top*f.width])),R.right<f.width&&(C=Z.resolve(M+f.map[f.width*(R.top+1)-1]))):(R.left>0&&(C=Z.resolve(M+f.map[R.top*f.width])),x.right<f.width&&(_=Z.resolve(M+f.map[f.width*(x.top+1)-1]))),new ct(_,C)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(_,C){return new ct(_.resolve(C.anchor),_.resolve(C.head))}static create(_,C,m=C){return new ct(_.resolve(C),_.resolve(m))}getBookmark(){return new st(this.$anchorCell.pos,this.$headCell.pos)}};ct.prototype.visible=!1,l.Y1.jsonID("cell",ct);var st=class{constructor(_,C){this.anchor=_,this.head=C}map(_){return new st(_.map(this.anchor),_.map(this.head))}resolve(_){const C=_.resolve(this.anchor),m=_.resolve(this.head);return"row"==C.parent.type.spec.tableRole&&"row"==m.parent.type.spec.tableRole&&C.index()<C.parent.childCount&&m.index()<m.parent.childCount&&yt(C,m)?new ct(C,m):l.Y1.near(m,1)}};function J(_){if(!(_.selection instanceof ct))return null;const C=[];return _.selection.forEachCell((m,f)=>{C.push(P.p.node(f,f+m.nodeSize,{class:"selectedCell"}))}),P.EH.create(_.doc,C)}var Jt=new l.H$("fix-tables");function Zt(_,C,m,f){const M=_.childCount,x=C.childCount;t:for(let R=0,Z=0;R<x;R++){const W=C.child(R);for(let G=Z,Ct=Math.min(M,R+3);G<Ct;G++)if(_.child(G)==W){Z=G+1,m+=W.nodeSize;continue t}f(W,m),Z<M&&_.child(Z).sameMarkup(W)?Zt(_.child(Z),W,m+1,f):W.nodesBetween(0,W.content.size,f,m+1),m+=W.nodeSize}}function ne(_,C){let m;const f=(M,x)=>{"table"==M.type.spec.tableRole&&(m=function(_,C,m,f){const M=et.get(C);if(!M.problems)return f;f||(f=_.tr);const x=[];for(let W=0;W<M.height;W++)x.push(0);for(let W=0;W<M.problems.length;W++){const G=M.problems[W];if("collision"==G.type){const Ct=C.nodeAt(G.pos);if(!Ct)continue;const xt=Ct.attrs;for(let Nt=0;Nt<xt.rowspan;Nt++)x[G.row+Nt]+=G.n;f.setNodeMarkup(f.mapping.map(m+1+G.pos),null,ut(xt,xt.colspan-G.n,G.n))}else if("missing"==G.type)x[G.row]+=G.n;else if("overlong_rowspan"==G.type){const Ct=C.nodeAt(G.pos);if(!Ct)continue;f.setNodeMarkup(f.mapping.map(m+1+G.pos),null,me(Gt({},Ct.attrs),{rowspan:Ct.attrs.rowspan-G.n}))}else if("colwidth mismatch"==G.type){const Ct=C.nodeAt(G.pos);if(!Ct)continue;f.setNodeMarkup(f.mapping.map(m+1+G.pos),null,me(Gt({},Ct.attrs),{colwidth:G.colwidth}))}}let R,Z;for(let W=0;W<x.length;W++)x[W]&&(null==R&&(R=W),Z=W);for(let W=0,G=m+1;W<M.height;W++){const Ct=C.child(W),xt=G+Ct.nodeSize,Nt=x[W];if(Nt>0){let Ut="cell";Ct.firstChild&&(Ut=Ct.firstChild.type.spec.tableRole);const jt=[];for(let ie=0;ie<Nt;ie++){const be=Pt(_.schema)[Ut].createAndFill();be&&jt.push(be)}f.insert(f.mapping.map(0!=W&&R!=W-1||Z!=W?xt-1:G+1),jt)}G=xt}return f.setMeta(Jt,{fixTables:!0})}(_,M,x,m))};return C?C.doc!=_.doc&&Zt(C.doc,_.doc,0,f):_.doc.descendants(f),m}function Oe(_,C){const m=_.createAndFill();return new ot.wx(m).replace(0,m.content.size,C).doc}function xe(_,C,m,f,M,x,R,Z){if(0==R||R==C.height)return!1;let W=!1;for(let G=M;G<x;G++){const Ct=R*C.width+G,xt=C.map[Ct];if(C.map[Ct-C.width]==xt){W=!0;const Nt=m.nodeAt(xt),{top:Ut,left:jt}=C.findCell(xt);_.setNodeMarkup(_.mapping.slice(Z).map(xt+f),null,me(Gt({},Nt.attrs),{rowspan:R-Ut})),_.insert(_.mapping.slice(Z).map(C.positionAt(R,jt,m)),Nt.type.createAndFill(me(Gt({},Nt.attrs),{rowspan:Ut+Nt.attrs.rowspan-R}))),G+=Nt.attrs.colspan-1}}return W}function Be(_,C,m,f,M,x,R,Z){if(0==R||R==C.width)return!1;let W=!1;for(let G=M;G<x;G++){const Ct=G*C.width+R,xt=C.map[Ct];if(C.map[Ct-1]==xt){W=!0;const Nt=m.nodeAt(xt),Ut=C.colCount(xt),jt=_.mapping.slice(Z).map(xt+f);_.setNodeMarkup(jt,null,ut(Nt.attrs,R-Ut,Nt.attrs.colspan-(R-Ut))),_.insert(jt+Nt.nodeSize,Nt.type.createAndFill(ut(Nt.attrs,0,R-Ut))),G+=Nt.attrs.rowspan-1}}return W}function ge(_,C,m,f,M){let x=m?_.doc.nodeAt(m-1):_.doc;if(!x)throw new Error("No table found");let R=et.get(x);const{top:Z,left:W}=f,G=W+M.width,Ct=Z+M.height,xt=_.tr;let Nt=0;function Ut(){if(x=m?xt.doc.nodeAt(m-1):xt.doc,!x)throw new Error("No table found");R=et.get(x),Nt=xt.mapping.maps.length}(function(_,C,m,f,M,x,R){const W=Pt(_.doc.type.schema);let G,Ct;if(M>C.width)for(let xt=0,Nt=0;xt<C.height;xt++){const Ut=m.child(xt);Nt+=Ut.nodeSize;const jt=[];let re;re=null==Ut.lastChild||Ut.lastChild.type==W.cell?G||(G=W.cell.createAndFill()):Ct||(Ct=W.header_cell.createAndFill());for(let ie=C.width;ie<M;ie++)jt.push(re);_.insert(_.mapping.slice(R).map(Nt-1+f),jt)}if(x>C.height){const xt=[];for(let jt=0,re=(C.height-1)*C.width;jt<Math.max(C.width,M);jt++){const ie=!(jt>=C.width)&&m.nodeAt(C.map[re+jt]).type==W.header_cell;xt.push(ie?Ct||(Ct=W.header_cell.createAndFill()):G||(G=W.cell.createAndFill()))}const Nt=W.row.create(null,y.HY.from(xt)),Ut=[];for(let jt=C.height;jt<x;jt++)Ut.push(Nt);_.insert(_.mapping.slice(R).map(f+m.nodeSize-2),Ut)}return!(!G&&!Ct)})(xt,R,x,m,G,Ct,Nt)&&Ut(),xe(xt,R,x,m,W,G,Z,Nt)&&Ut(),xe(xt,R,x,m,W,G,Ct,Nt)&&Ut(),Be(xt,R,x,m,Z,Ct,W,Nt)&&Ut(),Be(xt,R,x,m,Z,Ct,G,Nt)&&Ut();for(let jt=Z;jt<Ct;jt++){const re=R.positionAt(jt,W,x),ie=R.positionAt(jt,G,x);xt.replace(xt.mapping.slice(Nt).map(re+m),xt.mapping.slice(Nt).map(ie+m),new y.p2(M.rows[jt-Z],0,0))}Ut(),xt.setSelection(new ct(xt.doc.resolve(m+R.positionAt(Z,W,x)),xt.doc.resolve(m+R.positionAt(Ct-1,G-1,x)))),C(xt)}var Ae=(0,g.$)({ArrowLeft:Pe("horiz",-1),ArrowRight:Pe("horiz",1),ArrowUp:Pe("vert",-1),ArrowDown:Pe("vert",1),"Shift-ArrowLeft":Ne("horiz",-1),"Shift-ArrowRight":Ne("horiz",1),"Shift-ArrowUp":Ne("vert",-1),"Shift-ArrowDown":Ne("vert",1),Backspace:Me,"Mod-Backspace":Me,Delete:Me,"Mod-Delete":Me});function ve(_,C,m){return!m.eq(_.selection)&&(C&&C(_.tr.setSelection(m).scrollIntoView()),!0)}function Pe(_,C){return(m,f,M)=>{if(!M)return!1;const x=m.selection;if(x instanceof ct)return ve(m,f,l.Y1.near(x.$headCell,C));if("horiz"!=_&&!x.empty)return!1;const R=Ue(M,_,C);if(null==R)return!1;if("horiz"==_)return ve(m,f,l.Y1.near(m.doc.resolve(x.head+C),C));{const Z=m.doc.resolve(R),W=Kt(Z,_,C);let G;return G=W?l.Y1.near(W,1):C<0?l.Y1.near(m.doc.resolve(Z.before(-1)),-1):l.Y1.near(m.doc.resolve(Z.after(-1)),1),ve(m,f,G)}}}function Ne(_,C){return(m,f,M)=>{if(!M)return!1;const x=m.selection;let R;if(x instanceof ct)R=x;else{const W=Ue(M,_,C);if(null==W)return!1;R=new ct(m.doc.resolve(W))}const Z=Kt(R.$headCell,_,C);return!!Z&&ve(m,f,new ct(R.$anchorCell,Z))}}function Me(_,C){const m=_.selection;if(!(m instanceof ct))return!1;if(C){const f=_.tr,M=Pt(_.schema).cell.createAndFill().content;m.forEachCell((x,R)=>{x.content.eq(M)||f.replace(f.mapping.map(R+1),f.mapping.map(R+x.nodeSize-1),new y.p2(M,0,0))}),f.docChanged&&C(f)}return!0}function Ie(_,C){const f=pt(_.state.doc.resolve(C));return!!f&&(_.dispatch(_.state.tr.setSelection(new ct(f))),!0)}function Ye(_,C,m){if(!F(_.state))return!1;let f=function(_){if(!_.size)return null;let{content:C,openStart:m,openEnd:f}=_;for(;1==C.childCount&&(m>0&&f>0||"table"==C.child(0).type.spec.tableRole);)m--,f--,C=C.child(0).content;const M=C.child(0),x=M.type.spec.tableRole,R=M.type.schema,Z=[];if("row"==x)for(let W=0;W<C.childCount;W++){let G=C.child(W).content;const Ct=W?0:Math.max(0,m-1),xt=W<C.childCount-1?0:Math.max(0,f-1);(Ct||xt)&&(G=Oe(Pt(R).row,new y.p2(G,Ct,xt)).content),Z.push(G)}else{if("cell"!=x&&"header_cell"!=x)return null;Z.push(m||f?Oe(Pt(R).row,new y.p2(C,m,f)).content:C)}return function(_,C){const m=[];for(let M=0;M<C.length;M++){const x=C[M];for(let R=x.childCount-1;R>=0;R--){const{rowspan:Z,colspan:W}=x.child(R).attrs;for(let G=M;G<M+Z;G++)m[G]=(m[G]||0)+W}}let f=0;for(let M=0;M<m.length;M++)f=Math.max(f,m[M]);for(let M=0;M<m.length;M++)if(M>=C.length&&C.push(y.HY.empty),m[M]<f){const x=Pt(_).cell.createAndFill(),R=[];for(let Z=m[M];Z<f;Z++)R.push(x);C[M]=C[M].append(y.HY.from(R))}return{height:C.length,width:f,rows:C}}(R,Z)}(m);const M=_.state.selection;if(M instanceof ct){f||(f={width:1,height:1,rows:[y.HY.from(Oe(Pt(_.state.schema).cell,m))]});const x=M.$anchorCell.node(-1),R=M.$anchorCell.start(-1),Z=et.get(x).rectBetween(M.$anchorCell.pos-R,M.$headCell.pos-R);return f=function({width:_,height:C,rows:m},f,M){if(_!=f){const x=[],R=[];for(let Z=0;Z<m.length;Z++){const W=m[Z],G=[];for(let Ct=x[Z]||0,xt=0;Ct<f;xt++){let Nt=W.child(xt%W.childCount);Ct+Nt.attrs.colspan>f&&(Nt=Nt.type.createChecked(ut(Nt.attrs,Nt.attrs.colspan,Ct+Nt.attrs.colspan-f),Nt.content)),G.push(Nt),Ct+=Nt.attrs.colspan;for(let Ut=1;Ut<Nt.attrs.rowspan;Ut++)x[Z+Ut]=(x[Z+Ut]||0)+Nt.attrs.colspan}R.push(y.HY.from(G))}m=R,_=f}if(C!=M){const x=[];for(let R=0,Z=0;R<M;R++,Z++){const W=[],G=m[Z%C];for(let Ct=0;Ct<G.childCount;Ct++){let xt=G.child(Ct);R+xt.attrs.rowspan>M&&(xt=xt.type.create(me(Gt({},xt.attrs),{rowspan:Math.max(1,M-xt.attrs.rowspan)}),xt.content)),W.push(xt)}x.push(y.HY.from(W))}m=x,C=M}return{width:_,height:C,rows:m}}(f,Z.right-Z.left,Z.bottom-Z.top),ge(_.state,_.dispatch,R,Z,f),!0}if(f){const x=mt(_.state),R=x.start(-1);return ge(_.state,_.dispatch,R,et.get(x.node(-1)).findCell(x.pos-R),f),!0}return!1}function He(_,C){var m;if(C.ctrlKey||C.metaKey)return;const f=Le(_,C.target);let M;if(C.shiftKey&&_.state.selection instanceof ct)x(_.state.selection.$anchorCell,C),C.preventDefault();else if(C.shiftKey&&f&&null!=(M=pt(_.state.selection.$anchor))&&(null==(m=ze(_,C))?void 0:m.pos)!=M.pos)x(M,C),C.preventDefault();else if(!f)return;function x(W,G){let Ct=ze(_,G);const xt=null==Dt.getState(_.state);if(!Ct||!yt(W,Ct)){if(!xt)return;Ct=W}const Nt=new ct(W,Ct);if(xt||!_.state.selection.eq(Nt)){const Ut=_.state.tr.setSelection(Nt);xt&&Ut.setMeta(Dt,W.pos),_.dispatch(Ut)}}function R(){_.root.removeEventListener("mouseup",R),_.root.removeEventListener("dragstart",R),_.root.removeEventListener("mousemove",Z),null!=Dt.getState(_.state)&&_.dispatch(_.state.tr.setMeta(Dt,-1))}function Z(W){const G=W,Ct=Dt.getState(_.state);let xt;if(null!=Ct)xt=_.state.doc.resolve(Ct);else if(Le(_,G.target)!=f&&(xt=ze(_,C),!xt))return R();xt&&x(xt,G)}_.root.addEventListener("mouseup",R),_.root.addEventListener("dragstart",R),_.root.addEventListener("mousemove",Z)}function Ue(_,C,m){if(!(_.state.selection instanceof l.Bs))return null;const{$head:f}=_.state.selection;for(let M=f.depth-1;M>=0;M--){const x=f.node(M);if((m<0?f.index(M):f.indexAfter(M))!=(m<0?0:x.childCount))return null;if("cell"==x.type.spec.tableRole||"header_cell"==x.type.spec.tableRole){const Z=f.before(M);return _.endOfTextblock("vert"==C?m>0?"down":"up":m>0?"right":"left")?Z:null}}return null}function Le(_,C){for(;C&&C!=_.dom;C=C.parentNode)if("TD"==C.nodeName||"TH"==C.nodeName)return C;return null}function ze(_,C){const m=_.posAtCoords({left:C.clientX,top:C.clientY});return m&&m?pt(_.state.doc.resolve(m.pos)):null}var _e=class{constructor(_,C){this.node=_,this.cellMinWidth=C,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),fe(_,this.colgroup,this.table,C),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(_){return _.type==this.node.type&&(this.node=_,fe(_,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(_){return"attributes"==_.type&&(_.target==this.table||this.colgroup.contains(_.target))}};function fe(_,C,m,f,M,x){var R;let Z=0,W=!0,G=C.firstChild;const Ct=_.firstChild;if(Ct){for(let xt=0,Nt=0;xt<Ct.childCount;xt++){const{colspan:Ut,colwidth:jt}=Ct.child(xt).attrs;for(let re=0;re<Ut;re++,Nt++){const ie=M==Nt?x:jt&&jt[re],be=ie?ie+"px":"";Z+=ie||f,ie||(W=!1),G?(G.style.width!=be&&(G.style.width=be),G=G.nextSibling):C.appendChild(document.createElement("col")).style.width=be}}for(;G;){const xt=G.nextSibling;null==(R=G.parentNode)||R.removeChild(G),G=xt}W?(m.style.width=Z+"px",m.style.minWidth=""):(m.style.width="",m.style.minWidth=Z+"px")}}var Ee=new l.H$("tableColumnResizing");function gt({handleWidth:_=5,cellMinWidth:C=25,View:m=_e,lastColumnResizable:f=!0}={}){const M=new l.Sy({key:Ee,state:{init:(x,R)=>(M.spec.props.nodeViews[Pt(R.schema).table.name]=(Z,W)=>new m(Z,C,W),new b(-1,!1)),apply:(x,R)=>R.apply(x)},props:{attributes:x=>{const R=Ee.getState(x);return R&&R.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(x,R)=>{!function(_,C,m,f,M){const x=Ee.getState(_.state);if(x&&!x.dragging){const R=function(_){for(;_&&"TD"!=_.nodeName&&"TH"!=_.nodeName;)_=_.classList&&_.classList.contains("ProseMirror")?null:_.parentNode;return _}(C.target);let Z=-1;if(R){const{left:W,right:G}=R.getBoundingClientRect();C.clientX-W<=m?Z=bt(_,C,"left"):G-C.clientX<=m&&(Z=bt(_,C,"right"))}if(Z!=x.activeHandle){if(!M&&-1!==Z){const W=_.state.doc.resolve(Z),G=W.node(-1),Ct=et.get(G),xt=W.start(-1);if(Ct.colCount(W.pos-xt)+W.nodeAfter.attrs.colspan-1==Ct.width-1)return}U(_,Z)}}}(x,R,_,0,f)},mouseleave:x=>{!function(_){const C=Ee.getState(_.state);C&&C.activeHandle>-1&&!C.dragging&&U(_,-1)}(x)},mousedown:(x,R)=>{!function(_,C,m){const f=Ee.getState(_.state);if(!f||-1==f.activeHandle||f.dragging)return!1;const M=_.state.doc.nodeAt(f.activeHandle),x=function(_,C,{colspan:m,colwidth:f}){const M=f&&f[f.length-1];if(M)return M;const x=_.domAtPos(C);let Z=x.node.childNodes[x.offset].offsetWidth,W=m;if(f)for(let G=0;G<m;G++)f[G]&&(Z-=f[G],W--);return Z/W}(_,f.activeHandle,M.attrs);function R(W){window.removeEventListener("mouseup",R),window.removeEventListener("mousemove",Z);const G=Ee.getState(_.state);(null==G?void 0:G.dragging)&&(function(_,C,m){const f=_.state.doc.resolve(C),M=f.node(-1),x=et.get(M),R=f.start(-1),Z=x.colCount(f.pos-R)+f.nodeAfter.attrs.colspan-1,W=_.state.tr;for(let G=0;G<x.height;G++){const Ct=G*x.width+Z;if(G&&x.map[Ct]==x.map[Ct-x.width])continue;const xt=x.map[Ct],Nt=M.nodeAt(xt).attrs,Ut=1==Nt.colspan?0:Z-x.colCount(xt);if(Nt.colwidth&&Nt.colwidth[Ut]==m)continue;const jt=Nt.colwidth?Nt.colwidth.slice():E(Nt.colspan);jt[Ut]=m,W.setNodeMarkup(R+xt,null,me(Gt({},Nt),{colwidth:jt}))}W.docChanged&&_.dispatch(W)}(_,G.activeHandle,Rt(G.dragging,W,m)),_.dispatch(_.state.tr.setMeta(Ee,{setDragging:null})))}function Z(W){if(!W.which)return R(W);const G=Ee.getState(_.state);if(G&&G.dragging){const Ct=Rt(G.dragging,W,m);!function(_,C,m,f){const M=_.state.doc.resolve(C),x=M.node(-1),R=M.start(-1),Z=et.get(x).colCount(M.pos-R)+M.nodeAfter.attrs.colspan-1;let W=_.domAtPos(M.start(-1)).node;for(;W&&"TABLE"!=W.nodeName;)W=W.parentNode;!W||fe(x,W.firstChild,W,f,Z,m)}(_,G.activeHandle,Ct,m)}}_.dispatch(_.state.tr.setMeta(Ee,{setDragging:{startX:C.clientX,startWidth:x}})),window.addEventListener("mouseup",R),window.addEventListener("mousemove",Z),C.preventDefault()}(x,R,C)}},decorations:x=>{const R=Ee.getState(x);if(R&&R.activeHandle>-1)return function(_,C){const m=[],f=_.doc.resolve(C),M=f.node(-1);if(!M)return P.EH.empty;const x=et.get(M),R=f.start(-1),Z=x.colCount(f.pos-R)+f.nodeAfter.attrs.colspan;for(let W=0;W<x.height;W++){const G=Z+W*x.width-1;if(!(Z!=x.width&&x.map[G]==x.map[G+1]||0!=W&&x.map[G-1]==x.map[G-1-x.width])){const Ct=x.map[G],xt=R+Ct+M.nodeAt(Ct).nodeSize-1,Nt=document.createElement("div");Nt.className="column-resize-handle",m.push(P.p.widget(xt,Nt))}}return P.EH.create(_.doc,m)}(x,R.activeHandle)},nodeViews:{}}});return M}var b=class{constructor(_,C){this.activeHandle=_,this.dragging=C}apply(_){const C=this,m=_.getMeta(Ee);if(m&&null!=m.setHandle)return new b(m.setHandle,!1);if(m&&void 0!==m.setDragging)return new b(C.activeHandle,m.setDragging);if(C.activeHandle>-1&&_.docChanged){let f=_.mapping.map(C.activeHandle,-1);return At(_.doc.resolve(f))||(f=-1),new b(f,C.dragging)}return C}};function bt(_,C,m){const f=_.posAtCoords({left:C.clientX,top:C.clientY});if(!f)return-1;const{pos:M}=f,x=pt(_.state.doc.resolve(M));if(!x)return-1;if("right"==m)return x.pos;const R=et.get(x.node(-1)),Z=x.start(-1),W=R.map.indexOf(x.pos-Z);return W%R.width==0?-1:Z+R.map[W-1]}function Rt(_,C,m){return Math.max(m,_.startWidth+(C.clientX-_.startX))}function U(_,C){_.dispatch(_.state.tr.setMeta(Ee,{setHandle:C}))}function E(_){return Array(_).fill(0)}function I(_){const C=_.selection,m=mt(_),f=m.node(-1),M=m.start(-1),x=et.get(f),R=C instanceof ct?x.rectBetween(C.$anchorCell.pos-M,C.$headCell.pos-M):x.findCell(m.pos-M);return me(Gt({},R),{tableStart:M,map:x,table:f})}function K(_,{map:C,tableStart:m,table:f},M){let x=M>0?-1:0;(function(_,C,m){const f=Pt(C.type.schema).header_cell;for(let M=0;M<_.height;M++)if(C.nodeAt(_.map[m+M*_.width]).type!=f)return!1;return!0})(C,f,M+x)&&(x=0==M||M==C.width?null:0);for(let R=0;R<C.height;R++){const Z=R*C.width+M;if(M>0&&M<C.width&&C.map[Z-1]==C.map[Z]){const W=C.map[Z],G=f.nodeAt(W);_.setNodeMarkup(_.mapping.map(m+W),null,L(G.attrs,M-C.colCount(W))),R+=G.attrs.rowspan-1}else{const W=null==x?Pt(f.type.schema).cell:f.nodeAt(C.map[Z+x]).type,G=C.positionAt(R,M,f);_.insert(_.mapping.map(m+G),W.createAndFill())}}return _}function te(_,{map:C,table:m,tableStart:f},M){const x=_.mapping.maps.length;for(let R=0;R<C.height;){const Z=R*C.width+M,W=C.map[Z],G=m.nodeAt(W),Ct=G.attrs;if(M>0&&C.map[Z-1]==W||M<C.width-1&&C.map[Z+1]==W)_.setNodeMarkup(_.mapping.slice(x).map(f+W),null,ut(Ct,M-C.colCount(W)));else{const xt=_.mapping.slice(x).map(f+W);_.delete(xt,xt+G.nodeSize)}R+=Ct.rowspan}}function $e(_,{map:C,tableStart:m,table:f},M){var x;let R=m;for(let G=0;G<M;G++)R+=f.child(G).nodeSize;const Z=[];let W=M>0?-1:0;(function(_,C,m){var f;const M=Pt(C.type.schema).header_cell;for(let x=0;x<_.width;x++)if((null==(f=C.nodeAt(_.map[x+m*_.width]))?void 0:f.type)!=M)return!1;return!0})(C,f,M+W)&&(W=0==M||M==C.height?null:0);for(let G=0,Ct=C.width*M;G<C.width;G++,Ct++)if(M>0&&M<C.height&&C.map[Ct]==C.map[Ct-C.width]){const xt=C.map[Ct],Nt=f.nodeAt(xt).attrs;_.setNodeMarkup(m+xt,null,me(Gt({},Nt),{rowspan:Nt.rowspan+1})),G+=Nt.colspan-1}else{const xt=null==W?Pt(f.type.schema).cell:null==(x=f.nodeAt(C.map[Ct+W*C.width]))?void 0:x.type,Nt=null==xt?void 0:xt.createAndFill();Nt&&Z.push(Nt)}return _.insert(R,Pt(f.type.schema).row.create(null,Z)),_}function lt(_,{map:C,table:m,tableStart:f},M){let x=0;for(let W=0;W<M;W++)x+=m.child(W).nodeSize;const R=x+m.child(M).nodeSize,Z=_.mapping.maps.length;_.delete(x+f,R+f);for(let W=0,G=M*C.width;W<C.width;W++,G++){const Ct=C.map[G];if(M>0&&Ct==C.map[G-C.width]){const xt=m.nodeAt(Ct).attrs;_.setNodeMarkup(_.mapping.slice(Z).map(Ct+f),null,me(Gt({},xt),{rowspan:xt.rowspan-1})),W+=xt.colspan-1}else if(M<C.width&&Ct==C.map[G+C.width]){const xt=m.nodeAt(Ct),Nt=xt.attrs,Ut=xt.type.create(me(Gt({},Nt),{rowspan:xt.attrs.rowspan-1}),xt.content),jt=C.positionAt(M+1,W,m);_.insert(_.mapping.slice(Z).map(f+jt),Ut),W+=Nt.colspan-1}}}function Et(_){const C=_.content;return 1==C.childCount&&C.child(0).isTextblock&&0==C.child(0).childCount}function Wt(_,C){const m=_.selection;if(!(m instanceof ct)||m.$anchorCell.pos==m.$headCell.pos)return!1;const f=I(_),{map:M}=f;if(function({width:_,height:C,map:m},f){let M=f.top*_+f.left,x=M,R=(f.bottom-1)*_+f.left,Z=M+(f.right-f.left-1);for(let W=f.top;W<f.bottom;W++){if(f.left>0&&m[x]==m[x-1]||f.right<_&&m[Z]==m[Z+1])return!0;x+=_,Z+=_}for(let W=f.left;W<f.right;W++){if(f.top>0&&m[M]==m[M-_]||f.bottom<C&&m[R]==m[R+_])return!0;M++,R++}return!1}(M,f))return!1;if(C){const x=_.tr,R={};let W,G,Z=y.HY.empty;for(let Ct=f.top;Ct<f.bottom;Ct++)for(let xt=f.left;xt<f.right;xt++){const Nt=M.map[Ct*M.width+xt],Ut=f.table.nodeAt(Nt);if(!R[Nt]&&Ut)if(R[Nt]=!0,null==W)W=Nt,G=Ut;else{Et(Ut)||(Z=Z.append(Ut.content));const jt=x.mapping.map(Nt+f.tableStart);x.delete(jt,jt+Ut.nodeSize)}}if(null==W||null==G)return!0;if(x.setNodeMarkup(W+f.tableStart,null,me(Gt({},L(G.attrs,G.attrs.colspan,f.right-f.left-G.attrs.colspan)),{rowspan:f.bottom-f.top})),Z.size){const Ct=W+1+G.content.size,xt=Et(G)?W+1:Ct;x.replaceWith(xt+f.tableStart,Ct+f.tableStart,Z)}x.setSelection(new ct(x.doc.resolve(W+f.tableStart))),C(x)}return!0}function Qt(_,C){const m=Pt(_.schema);return function(_){return(C,m)=>{var f;const M=C.selection;let x,R;if(M instanceof ct){if(M.$anchorCell.pos!=M.$headCell.pos)return!1;x=M.$anchorCell.nodeAfter,R=M.$anchorCell.pos}else{if(x=function(_){for(let C=_.depth;C>0;C--){const m=_.node(C).type.spec.tableRole;if("cell"===m||"header_cell"===m)return _.node(C)}return null}(M.$from),!x)return!1;R=null==(f=pt(M.$from))?void 0:f.pos}if(null==x||null==R||1==x.attrs.colspan&&1==x.attrs.rowspan)return!1;if(m){let Z=x.attrs;const W=[],G=Z.colwidth;Z.rowspan>1&&(Z=me(Gt({},Z),{rowspan:1})),Z.colspan>1&&(Z=me(Gt({},Z),{colspan:1}));const Ct=I(C),xt=C.tr;for(let Ut=0;Ut<Ct.right-Ct.left;Ut++)W.push(G?me(Gt({},Z),{colwidth:G&&G[Ut]?[G[Ut]]:null}):Z);let Nt;for(let Ut=Ct.top;Ut<Ct.bottom;Ut++){let jt=Ct.map.positionAt(Ut,Ct.left,Ct.table);Ut==Ct.top&&(jt+=x.nodeSize);for(let re=Ct.left,ie=0;re<Ct.right;re++,ie++)re==Ct.left&&Ut==Ct.top||xt.insert(Nt=xt.mapping.map(jt+Ct.tableStart,1),_({node:x,row:Ut,col:re}).createAndFill(W[ie]))}xt.setNodeMarkup(R,_({node:x,row:Ct.top,col:Ct.left}),W[0]),M instanceof ct&&xt.setSelection(new ct(xt.doc.resolve(M.$anchorCell.pos),Nt?xt.doc.resolve(Nt):void 0)),m(xt)}return!0}}(({node:f})=>m[f.type.spec.tableRole])(_,C)}function le(_,C,m){const f=C.map.cellsInRect({left:0,top:0,right:"row"==_?C.map.width:1,bottom:"column"==_?C.map.height:1});for(let M=0;M<f.length;M++){const x=C.table.nodeAt(f[M]);if(x&&x.type!==m.header_cell)return!1}return!0}function ce(_,C){return(C=C||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(_){return function(C,m){if(!F(C))return!1;if(m){const f=Pt(C.schema),M=I(C),x=C.tr,R=M.map.cellsInRect("column"==_?{left:M.left,top:0,right:M.right,bottom:M.map.height}:"row"==_?{left:0,top:M.top,right:M.map.width,bottom:M.bottom}:M),Z=R.map(W=>M.table.nodeAt(W));for(let W=0;W<R.length;W++)Z[W].type==f.header_cell&&x.setNodeMarkup(M.tableStart+R[W],f.cell,Z[W].attrs);if(0==x.steps.length)for(let W=0;W<R.length;W++)x.setNodeMarkup(M.tableStart+R[W],f.header_cell,Z[W].attrs);m(x)}return!0}}(_):function(m,f){if(!F(m))return!1;if(f){const M=Pt(m.schema),x=I(m),R=m.tr,Z=le("row",x,M),W=le("column",x,M),Ct=("column"===_?Z:"row"===_&&W)?1:0,Nt="column"==_?W?M.cell:M.header_cell:"row"==_?Z?M.cell:M.header_cell:M.cell;x.map.cellsInRect("column"==_?{left:0,top:Ct,right:1,bottom:x.map.height}:"row"==_?{left:Ct,top:0,right:x.map.width,bottom:1}:x).forEach(Ut=>{const jt=Ut+x.tableStart,re=R.doc.nodeAt(jt);re&&R.setNodeMarkup(jt,Nt,re.attrs)}),f(R)}return!0}}ce("row",{useDeprecatedLogic:!0}),ce("column",{useDeprecatedLogic:!0});var cn=ce("cell",{useDeprecatedLogic:!0});function Pn(_){return function(C,m){if(!F(C))return!1;const f=function(_,C){if(C<0){const m=_.nodeBefore;if(m)return _.pos-m.nodeSize;for(let f=_.index(-1)-1,M=_.before();f>=0;f--){const x=_.node(-1).child(f),R=x.lastChild;if(R)return M-1-R.nodeSize;M-=x.nodeSize}}else{if(_.index()<_.parent.childCount-1)return _.pos+_.nodeAfter.nodeSize;const m=_.node(-1);for(let f=_.indexAfter(-1),M=_.after();f<m.childCount;f++){const x=m.child(f);if(x.childCount)return M+1;M+=x.nodeSize}}return null}(mt(C),_);if(null==f)return!1;if(m){const M=C.doc.resolve(f);m(C.tr.setSelection(l.Bs.between(M,function(_){return _.node(0).resolve(_.pos+_.nodeAfter.nodeSize)}(M))).scrollIntoView())}return!0}}function Un({allowTableNodeSelection:_=!1}={}){return new l.Sy({key:Dt,state:{init:()=>null,apply(C,m){const f=C.getMeta(Dt);if(null!=f)return-1==f?null:f;if(null==m||!C.docChanged)return m;const{deleted:M,pos:x}=C.mapping.mapResult(m);return M?null:x}},props:{decorations:J,handleDOMEvents:{mousedown:He},createSelectionBetween:C=>null!=Dt.getState(C.state)?C.state.selection:null,handleTripleClick:Ie,handleKeyDown:Ae,handlePaste:Ye},appendTransaction:(C,m,f)=>function(_,C,m){const f=(C||_).selection,M=(C||_).doc;let x,R;if(f instanceof l.qv&&(R=f.node.type.spec.tableRole)){if("cell"==R||"header_cell"==R)x=ct.create(M,f.from);else if("row"==R){const Z=M.resolve(f.from+1);x=ct.rowSelection(Z,Z)}else if(!m){const Z=et.get(f.node),W=f.from+1;x=ct.create(M,W+1,W+Z.map[Z.width*Z.height-1])}}else f instanceof l.Bs&&function({$from:_,$to:C}){if(_.pos==C.pos||_.pos<_.pos-6)return!1;let m=_.pos,f=C.pos,M=_.depth;for(;M>=0&&!(_.after(M+1)<_.end(M));M--,m++);for(let x=C.depth;x>=0&&!(C.before(x+1)>C.start(x));x--,f--);return m==f&&/row|table/.test(_.node(M).type.spec.tableRole)}(f)?x=l.Bs.create(M,f.from):f instanceof l.Bs&&function({$from:_,$to:C}){let m,f;for(let M=_.depth;M>0;M--){const x=_.node(M);if("cell"===x.type.spec.tableRole||"header_cell"===x.type.spec.tableRole){m=x;break}}for(let M=C.depth;M>0;M--){const x=C.node(M);if("cell"===x.type.spec.tableRole||"header_cell"===x.type.spec.tableRole){f=x;break}}return m!==f&&0===C.parentOffset}(f)&&(x=l.Bs.create(M,f.$from.start(),f.$from.end()));return x&&(C||(C=_.tr)).setSelection(x),C}(f,ne(f,m),_)})}function hn(_,C,m,f,M,x){let R=0,Z=!0,W=C.firstChild;const G=_.firstChild;for(let Ct=0,xt=0;Ct<G.childCount;Ct+=1){const{colspan:Nt,colwidth:Ut}=G.child(Ct).attrs;for(let jt=0;jt<Nt;jt+=1,xt+=1){const re=M===xt?x:Ut&&Ut[jt],ie=re?`${re}px`:"";R+=re||f,re||(Z=!1),W?(W.style.width!==ie&&(W.style.width=ie),W=W.nextSibling):C.appendChild(document.createElement("col")).style.width=ie}}for(;W;){const Ct=W.nextSibling;W.parentNode.removeChild(W),W=Ct}Z?(m.style.width=`${R}px`,m.style.minWidth=""):(m.style.width="",m.style.minWidth=`${R}px`)}class Sn{constructor(C,m){this.node=C,this.cellMinWidth=m,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),hn(C,this.colgroup,this.table,m),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(C){return C.type===this.node.type&&(this.node=C,hn(C,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(C){return"attributes"===C.type&&(C.target===this.table||this.colgroup.contains(C.target))}}function Tn(_,C){return C?_.createChecked(null,C):_.createAndFill()}const fn=({editor:_})=>{const{selection:C}=_.state;if(!function(_){return _ instanceof ct}(C))return!1;let m=0;const f=(0,v.findParentNodeClosestToPos)(C.ranges[0].$from,x=>"table"===x.type.name);return null==f||f.node.descendants(x=>{if("table"===x.type.name)return!1;["tableCell","tableHeader"].includes(x.type.name)&&(m+=1)}),m===C.ranges.length&&(_.commands.deleteTable(),!0)},sn=v.Node.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Sn,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML({HTMLAttributes:_}){return["table",(0,v.mergeAttributes)(this.options.HTMLAttributes,_),["tbody",0]]},addCommands:()=>({insertTable:({rows:_=3,cols:C=3,withHeaderRow:m=!0}={})=>({tr:f,dispatch:M,editor:x})=>{const R=function(_,C,m,f,M){const x=function(_){if(_.cached.tableNodeTypes)return _.cached.tableNodeTypes;const C={};return Object.keys(_.nodes).forEach(m=>{const f=_.nodes[m];f.spec.tableRole&&(C[f.spec.tableRole]=f)}),_.cached.tableNodeTypes=C,C}(_),R=[],Z=[];for(let G=0;G<m;G+=1){const Ct=Tn(x.cell,M);if(Ct&&Z.push(Ct),f){const xt=Tn(x.header_cell,M);xt&&R.push(xt)}}const W=[];for(let G=0;G<C;G+=1)W.push(x.row.createChecked(null,f&&0===G?R:Z));return x.table.createChecked(null,W)}(x.schema,_,C,m);if(M){const Z=f.selection.anchor+1;f.replaceSelectionWith(R).scrollIntoView().setSelection(l.Bs.near(f.doc.resolve(Z)))}return!0},addColumnBefore:()=>({state:_,dispatch:C})=>function(_,C){if(!F(_))return!1;if(C){const m=I(_);C(K(_.tr,m,m.left))}return!0}(_,C),addColumnAfter:()=>({state:_,dispatch:C})=>function(_,C){if(!F(_))return!1;if(C){const m=I(_);C(K(_.tr,m,m.right))}return!0}(_,C),deleteColumn:()=>({state:_,dispatch:C})=>function(_,C){if(!F(_))return!1;if(C){const m=I(_),f=_.tr;if(0==m.left&&m.right==m.map.width)return!1;for(let M=m.right-1;te(f,m,M),M!=m.left;M--){const x=m.tableStart?f.doc.nodeAt(m.tableStart-1):f.doc;if(!x)throw RangeError("No table found");m.table=x,m.map=et.get(x)}C(f)}return!0}(_,C),addRowBefore:()=>({state:_,dispatch:C})=>function(_,C){if(!F(_))return!1;if(C){const m=I(_);C($e(_.tr,m,m.top))}return!0}(_,C),addRowAfter:()=>({state:_,dispatch:C})=>function(_,C){if(!F(_))return!1;if(C){const m=I(_);C($e(_.tr,m,m.bottom))}return!0}(_,C),deleteRow:()=>({state:_,dispatch:C})=>function(_,C){if(!F(_))return!1;if(C){const m=I(_),f=_.tr;if(0==m.top&&m.bottom==m.map.height)return!1;for(let M=m.bottom-1;lt(f,m,M),M!=m.top;M--){const x=m.tableStart?f.doc.nodeAt(m.tableStart-1):f.doc;if(!x)throw RangeError("No table found");m.table=x,m.map=et.get(m.table)}C(f)}return!0}(_,C),deleteTable:()=>({state:_,dispatch:C})=>function(_,C){const m=_.selection.$anchor;for(let f=m.depth;f>0;f--)if("table"==m.node(f).type.spec.tableRole)return C&&C(_.tr.delete(m.before(f),m.after(f)).scrollIntoView()),!0;return!1}(_,C),mergeCells:()=>({state:_,dispatch:C})=>Wt(_,C),splitCell:()=>({state:_,dispatch:C})=>Qt(_,C),toggleHeaderColumn:()=>({state:_,dispatch:C})=>ce("column")(_,C),toggleHeaderRow:()=>({state:_,dispatch:C})=>ce("row")(_,C),toggleHeaderCell:()=>({state:_,dispatch:C})=>cn(_,C),mergeOrSplit:()=>({state:_,dispatch:C})=>!!Wt(_,C)||Qt(_,C),setCellAttribute:(_,C)=>({state:m,dispatch:f})=>function(_,C){return function(m,f){if(!F(m))return!1;const M=mt(m);if(M.nodeAfter.attrs[_]===C)return!1;if(f){const x=m.tr;m.selection instanceof ct?m.selection.forEachCell((R,Z)=>{R.attrs[_]!==C&&x.setNodeMarkup(Z,null,me(Gt({},R.attrs),{[_]:C}))}):x.setNodeMarkup(M.pos,null,me(Gt({},M.nodeAfter.attrs),{[_]:C})),f(x)}return!0}}(_,C)(m,f),goToNextCell:()=>({state:_,dispatch:C})=>Pn(1)(_,C),goToPreviousCell:()=>({state:_,dispatch:C})=>Pn(-1)(_,C),fixTables:()=>({state:_,dispatch:C})=>(C&&ne(_),!0),setCellSelection:_=>({tr:C,dispatch:m})=>{if(m){const f=ct.create(C.doc,_.anchorCell,_.headCell);C.setSelection(f)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:fn,"Mod-Backspace":fn,Delete:fn,"Mod-Delete":fn}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[gt({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],Un({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema:_=>({tableRole:(0,v.callOrReturn)((0,v.getExtensionField)(_,"tableRole",{name:_.name,options:_.options,storage:_.storage}))})}).extend({renderHTML({node:_,HTMLAttributes:C}){var m,f;let M=0,x=!0;try{const R=(null===(m=_.content)||void 0===m?void 0:m.content)[0];null===(f=null==R?void 0:R.content)||void 0===f||f.content.forEach(Z=>{Z.attrs.colwidth?Z.attrs.colwidth.forEach(W=>{W?M+=W:(x=!1,M+=this.options.cellMinWidth)}):(x=!1,M+=this.options.cellMinWidth*(Z.attrs.colspan||1))})}catch(R){x=!1}return C.style=x&&M>0?`width: ${M}px;`:M&&M>0?`min-width: ${M}px`:null,["div",{class:"tui-table-wrapper"},["table",(0,v.mergeAttributes)(this.options.HTMLAttributes,C),["tbody",0]]]}})},88806:(Yt,vt,c)=>{c.d(vt,{v:()=>l});var v=c(74788);class l{constructor(P,g,ot){const H=g.get(v.z2F),et=g.get(v._Vd).resolveComponentFactory(P);this.componentRef=et.create(g,[]),this.updateProps(ot),H.attachView(this.componentRef.hostView)}get instance(){return this.componentRef.instance}get elementRef(){return this.componentRef.injector.get(v.SBq)}get dom(){return this.elementRef.nativeElement}updateProps(P){Object.entries(P).forEach(([g,ot])=>{this.instance[g]=ot})}detectChanges(){this.componentRef.changeDetectorRef.detectChanges()}destroy(){this.componentRef.destroy()}}},40400:(Yt,vt,c)=>{c.d(vt,{d:()=>P,x:()=>ot});var v=c(12057),l=c(12867),y=c(88806);class P{}class g extends l.NodeView{constructor(){super(...arguments),this.contentDOMElement=null}mount(){const X=this.options.injector,et=X.get(v.K0);this.renderer=new y.v(this.component,X,{editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(dt={})=>this.updateAttributes(dt),deleteNode:()=>this.deleteNode()}),this.extension.config.draggable&&(this.renderer.elementRef.nativeElement.ondragstart=dt=>{this.onDragStart(dt)}),this.contentDOMElement=this.node.isLeaf?null:et.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit",this.renderer.detectChanges())}get dom(){return this.renderer.dom}get contentDOM(){return this.node.isLeaf?null:(this.maybeMoveContentDOM(),this.contentDOMElement)}update(X,et){return this.options.update?this.options.update(X,et):X.type===this.node.type&&(X===this.node&&this.decorations===et||(this.node=X,this.decorations=et,this.renderer.updateProps({node:X,decorations:et}),this.maybeMoveContentDOM()),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy()}maybeMoveContentDOM(){const X=this.dom.querySelector("[data-node-view-content]");this.contentDOMElement&&X&&!X.contains(this.contentDOMElement)&&X.appendChild(this.contentDOMElement)}}const ot=(H,X)=>et=>new g(H,et,X)},48014:(Yt,vt,c)=>{c.r(vt),c.d(vt,{AbstractTuiEditor:()=>v._,AbstractTuiEditorResizable:()=>Dt._3,BackgroundColor:()=>At.BackgroundColor,EDITOR_BLANK_COLOR:()=>mt.hK,FontColor:()=>Bt.FontColor,INITIALIZATION_TIPTAP_CONTAINER:()=>Zt.Y1,LAZY_EDITOR_EXTENSIONS:()=>Zt.F4,LAZY_TIPTAP_EDITOR:()=>Zt.bG,StarterKit:()=>J.StarterKit,TIPTAP_EDITOR:()=>Zt.ZW,TUI_ATTACH_FILES_LOADER:()=>Zt.zc,TUI_ATTACH_FILES_OPTIONS:()=>Zt.dR,TUI_EDITOR_CODE_OPTIONS:()=>Zt.Mr,TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES:()=>Zt.dj,TUI_EDITOR_CONTENT_PROCESSOR:()=>Zt.F1,TUI_EDITOR_DEFAULT_OPTIONS:()=>Zt.HG,TUI_EDITOR_EXTENSIONS:()=>Zt.Wf,TUI_EDITOR_FONT_OPTIONS:()=>Zt.UN,TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>Kt.TUI_EDITOR_GROUP_DEFAULT_OPTIONS,TUI_EDITOR_LINK_TEXTS:()=>Zt.b$,TUI_EDITOR_MAX_IMAGE_WIDTH:()=>L.TUI_EDITOR_MAX_IMAGE_WIDTH,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>L.TUI_EDITOR_MIN_IMAGE_WIDTH,TUI_EDITOR_OPTIONS:()=>Zt.mJ,TUI_EDITOR_PROVIDERS:()=>ft.m,TUI_EDITOR_TABLE_COMMANDS:()=>Zt.$i,TUI_EDITOR_TOOLBAR_TEXTS:()=>Zt.rf,TUI_IFRAME_EDITOR_OPTIONS:()=>ut.TUI_IFRAME_EDITOR_OPTIONS,TUI_IMAGE_EDITOR_OPTIONS:()=>L.TUI_IMAGE_EDITOR_OPTIONS,TUI_IMAGE_LOADER:()=>Zt.p7,TableCellBackground:()=>nt.TableCellBackground,TuiAlignContentComponent:()=>F.Xp,TuiAlignContentModule:()=>F.pu,TuiAudio:()=>st.TuiAudio,TuiCodeComponent:()=>F.Tf,TuiCodeModule:()=>F.P_,TuiColorEditComponent:()=>l.hR,TuiColorEditModule:()=>l.TD,TuiColorPickerComponent:()=>l.$v,TuiColorPickerModule:()=>l.H9,TuiColorSelectorComponent:()=>l.sV,TuiColorSelectorModule:()=>l.wl,TuiComponentRenderer:()=>wt.v,TuiDetailsComponent:()=>F.yj,TuiDetailsModule:()=>F.y9,TuiDetailsRemoveComponent:()=>F.Un,TuiEditLinkComponent:()=>y.lV,TuiEditLinkModule:()=>y.Fu,TuiEditorComponent:()=>P.a,TuiEditorGroupToolComponent:()=>F.dN,TuiEditorImagePreviewDirective:()=>_t.Zj,TuiEditorImagePreviewModule:()=>_t.BN,TuiEditorModule:()=>rt,TuiEditorPortalDirective:()=>Ot.A,TuiEditorPortalHostComponent:()=>Pt.d,TuiEditorPortalService:()=>St.Y,TuiEditorResizableComponent:()=>Dt.V_,TuiEditorResizableModule:()=>Dt.Sl,TuiEditorSocketComponent:()=>ot.D,TuiEditorSocketModule:()=>X,TuiEditorTool:()=>j._,TuiEditorToolGroup:()=>F.jP,TuiFileLink:()=>yt.TuiFileLink,TuiFilterAnchorsPipe:()=>y.bL,TuiFlatPickerComponent:()=>l.Jd,TuiFlatPickerModule:()=>l.ui,TuiFontSize:()=>Ht.TuiFontSize,TuiFontSizeComponent:()=>F.mK,TuiFontSizeModule:()=>F.p7,TuiFontStyleComponent:()=>F.hr,TuiFontStyleModule:()=>F.Zv,TuiHighlightColorComponent:()=>F.UT,TuiHighlightColorModule:()=>F.XC,TuiIframeEditorComponent:()=>ut.TuiIframeEditorComponent,TuiIframeEditorModule:()=>ut.TuiIframeEditorModule,TuiImageEditorComponent:()=>L.TuiImageEditorComponent,TuiImageEditorModule:()=>L.TuiImageEditorModule,TuiInputColorComponent:()=>pt.j,TuiInputColorModule:()=>tt,TuiLinearMultiPickerComponent:()=>l.es,TuiLinearMultiPickerModule:()=>l.GU,TuiLinearPickerComponent:()=>l.P,TuiLinearPickerModule:()=>l.g7,TuiLink:()=>ct.TuiLink,TuiListConfigsComponent:()=>F.w2,TuiListConfigsModule:()=>F.Ur,TuiNodeViewNgComponent:()=>Jt.d,TuiNodeViewRenderer:()=>Jt.x,TuiPaletteComponent:()=>l.Rh,TuiPaletteModule:()=>l.VM,TuiShortUrlPipe:()=>y.X,TuiSource:()=>st.TuiSource,TuiTabExtension:()=>it.TuiTabExtension,TuiTable:()=>Q.TuiTable,TuiTableCellColorComponent:()=>F.pH,TuiTableCellColorModule:()=>F.mp,TuiTableCommands:()=>F.iN,TuiTableCreateComponent:()=>F.lT,TuiTableCreateModule:()=>F.iA,TuiTableMergeCellsComponent:()=>F.YH,TuiTableMergeCellsModule:()=>F.er,TuiTableRowColumnManagerComponent:()=>F._I,TuiTableRowColumnManagerModule:()=>F.__,TuiTableSizeSelectorComponent:()=>F.M8,TuiTableSizeSelectorModule:()=>F.kU,TuiTextColorComponent:()=>F.G0,TuiTextColorModule:()=>F._t,TuiTiptapEditorDirective:()=>_t.JU,TuiTiptapEditorModule:()=>_t.mJ,TuiTiptapEditorService:()=>_t.$3,TuiToolbarComponent:()=>et.M6,TuiToolbarModule:()=>et.yB,TuiToolbarNavigationManagerDirective:()=>et.Bp,TuiVideo:()=>st.TuiVideo,createGroupExtension:()=>Kt.createGroupExtension,createIframeEditorExtension:()=>ut.createIframeEditorExtension,createImageEditorExtension:()=>L.createImageEditorExtension,defaultEditorColors:()=>mt.sw,defaultEditorExtensions:()=>kt,defaultEditorTools:()=>mt.Db,tuiCreateImageEditorExtension:()=>L.tuiCreateImageEditorExtension,tuiDefaultFontOptionsHandler:()=>mt.RR,tuiDeleteNode:()=>ne.yU,tuiEditorOptionsProvider:()=>Zt.Uv,tuiGetElementPoint:()=>ne.Ws,tuiGetGradientData:()=>ne.U5,tuiGetMarkRange:()=>ne.Yz,tuiGetNestedNodes:()=>ne.YX,tuiGetSelectedContent:()=>ne.Ap,tuiInsertHtml:()=>ne.Xd,tuiInsertText:()=>ne.Oi,tuiIsOrderedOrBulletList:()=>it.tuiIsOrderedOrBulletList,tuiIsSafeLinkRange:()=>ne.nC,tuiIsSelectionIn:()=>ne.i0,tuiLegacyEditorConverter:()=>ne.Er,tuiParseGradient:()=>ne._N,tuiParseNodeAttributes:()=>ne.x6,tuiParseStyle:()=>ne.jx,tuiToGradient:()=>ne.CH});var v=c(77361),l=c(27050),y=c(71115),P=c(69303),g=c(12057),ot=c(20179),H=c(74788);let X=(()=>{class zt{}return zt.\u0275fac=function(ye){return new(ye||zt)},zt.\u0275mod=H.oAB({type:zt}),zt.\u0275inj=H.cJS({}),zt})();var et=c(17406),_t=c(84614),dt=c(50259),Mt=c(3497);let rt=(()=>{class zt{}return zt.\u0275fac=function(ye){return new(ye||zt)},zt.\u0275mod=H.oAB({type:zt}),zt.\u0275inj=H.cJS({imports:[[g.ez,et.yB,Mt.TuiWrapperModule,Mt.TuiScrollbarModule,y.Fu,dt.TuiActiveZoneModule,Mt.TuiDropdownModule,_t.mJ,X,dt.TuiLetModule]]}),zt})();var ft=c(79089),Ot=c(1433),St=c(73825),Pt=c(9872),Dt=c(95110),pt=c(19769);let tt=(()=>{class zt{}return zt.\u0275fac=function(ye){return new(ye||zt)},zt.\u0275mod=H.oAB({type:zt}),zt.\u0275inj=H.cJS({imports:[[g.ez,Mt.TuiPrimitiveTextfieldModule,Mt.TuiTextfieldControllerModule,Mt.TuiHostedDropdownModule,l.wl,dt.TuiActiveZoneModule]]}),zt})();var F=c(93252),mt=c(19074),j=c(48699),At=c(15736);const kt=[Promise.resolve().then(c.bind(c,2823)).then(({StarterKit:zt})=>zt).then(zt=>zt.configure({heading:{levels:[1,2]}})),c.e(73336).then(c.bind(c,73336)).then(({default:zt})=>zt.configure({types:["heading","paragraph"]})),Promise.resolve().then(c.bind(c,84402)).then(({default:zt})=>zt),c.e(17991).then(c.bind(c,17991)).then(({default:zt})=>zt),c.e(77147).then(c.bind(c,77147)).then(({default:zt})=>zt),c.e(25034).then(c.bind(c,25034)).then(({default:zt})=>zt),Promise.resolve().then(c.bind(c,52658)).then(({FontColor:zt})=>zt),Promise.resolve().then(c.bind(c,44632)).then(({default:zt})=>zt.configure({inline:!0,allowBase64:!0})),Promise.resolve().then(c.bind(c,82091)).then(({TuiLink:zt})=>zt),c.e(54058).then(c.bind(c,54058)).then(({TuiJumpAnchor:zt})=>zt),Promise.resolve().then(c.bind(c,93763)).then(({TuiFileLink:zt})=>zt),Promise.resolve().then(c.bind(c,15736)).then(({BackgroundColor:zt})=>zt),Promise.resolve().then(c.bind(c,86624)).then(({TuiTable:zt})=>zt.configure({resizable:!0})),c.e(45213).then(c.bind(c,45213)).then(({default:zt})=>zt),c.e(71397).then(c.bind(c,71397)).then(({default:zt})=>zt),c.e(38840).then(c.bind(c,38840)).then(({TableHeader:zt})=>zt),Promise.resolve().then(c.bind(c,12177)).then(({TuiTabExtension:zt})=>zt),Promise.resolve().then(c.bind(c,51919)).then(({TableCellBackground:zt})=>zt),c.e(44312).then(c.bind(c,44312)).then(({TuiDetailsContent:zt})=>zt),c.e(44312).then(c.bind(c,44312)).then(({TuiDetails:zt})=>zt),c.e(44312).then(c.bind(c,44312)).then(({TuiSummary:zt})=>zt),Promise.resolve().then(c.bind(c,9492)).then(({TuiFontSize:zt})=>zt)];var yt=c(93763),Bt=c(52658),Ht=c(9492),Kt=c(54920),ut=c(20854),L=c(53380),it=c(12177),ct=c(82091),st=c(41512),J=c(2823),Q=c(86624),nt=c(51919),wt=c(88806),Jt=c(40400),Zt=c(14309),ne=c(27863)},62141:(Yt,vt,c)=>{c.d(vt,{i:()=>_t});var v=c(12057),l=c(74788),y=c(27863),P=c(50259),g=c(18891),ot=c(43190),H=c(88002),X=c(46782),et=c(39761);let _t=(()=>{class dt extends g.y{constructor(rt,{nativeElement:ft},Ot){const St=(0,P.tuiTypedFromEvent)(ft,"mousedown").pipe((0,P.tuiPreventDefault)(),(0,ot.w)(Pt=>{const Dt=(0,P.tuiTypedFromEvent)(Ot,"mousemove").pipe((0,H.U)(({clientX:pt,clientY:tt})=>(0,y.Ws)(pt,tt,ft)),(0,X.R)((0,P.tuiTypedFromEvent)(Ot,"mouseup")));return Pt.target===ft?Dt.pipe((0,et.O)((0,y.Ws)(Pt.clientX,Pt.clientY,ft))):Dt}),(0,X.R)(rt));super(Pt=>St.subscribe(Pt))}}return dt.\u0275fac=function(rt){return new(rt||dt)(l.LFG(P.TuiDestroyService,2),l.LFG(l.SBq),l.LFG(v.K0))},dt.\u0275prov=l.Yz7({token:dt,factory:dt.\u0275fac}),dt})()},14309:(Yt,vt,c)=>{c.d(vt,{Y1:()=>kt,F4:()=>y,bG:()=>At,ZW:()=>j,zc:()=>dt,dR:()=>_t,Mr:()=>Pt,dj:()=>rt,F1:()=>et,HG:()=>g,Wf:()=>l,UN:()=>Dt,b$:()=>St,mJ:()=>ot,$i:()=>Ot,rf:()=>ft,p7:()=>F,Uv:()=>H});var v=c(74788);const l=new v.OlP("[TUI_EDITOR_EXTENSIONS]"),y=new v.OlP("[LAZY_EDITOR_EXTENSIONS]");var P=c(19074);const g={colors:P.sw,blankColor:P.hK,fontOptions:P.RR},ot=new v.OlP("[TUI_EDITOR_OPTIONS]",{factory:()=>g});function H(yt){return{provide:ot,useValue:Object.assign(Object.assign({},g),yt)}}var X=c(54487);const et=new v.OlP("[TUI_EDITOR_CONTENT_PROCESSOR]",{factory:()=>X.y}),_t=new v.OlP("[TUI_ATTACH_FILES_OPTIONS]",{factory:()=>({accept:"*/*",multiple:!0})}),dt=new v.OlP("[TUI_ATTACH_FILES_LOADER]");var Mt=c(72773);const rt=new v.OlP("[TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES]",{factory:()=>["Solid color","Gradient"]}),ft=new v.OlP("[TUI_EDITOR_TOOLBAR_TEXTS]",{factory:(0,Mt.vv)("toolbarTools")}),Ot=new v.OlP("[TUI_EDITOR_TABLE_COMMANDS]",{factory:(0,Mt.vv)("editorTableCommands")}),St=new v.OlP("[TUI_EDITOR_LINK_TEXTS]",{factory:(0,Mt.vv)("editorEditLink")}),Pt=new v.OlP("[TUI_EDITOR_CODE_OPTIONS]",{factory:(0,Mt.vv)("editorCodeOptions")}),Dt=new v.OlP("[TUI_EDITOR_FONT_OPTIONS]",{factory:(0,Mt.vv)("editorFontOptions")});var pt=c(50259),tt=c(88002);const F=new v.OlP("[TUI_IMAGE_LOADER]",{factory:()=>yt=>{const Bt=new FileReader;return Bt.readAsDataURL(yt),(0,pt.tuiTypedFromEvent)(Bt,"load").pipe((0,tt.U)(()=>String(Bt.result)))}});var mt=c(82298);const j=new v.OlP("[TIPTAP_EDITOR]"),At=new v.OlP("[LAZY_TIPTAP_EDITOR]",{factory:()=>{const yt=new mt.t(1);return Promise.resolve().then(c.bind(c,12867)).then(Bt=>yt.next(Bt.Editor)),yt}}),kt=new v.OlP("[INITIALIZATION_TIPTAP_CONTAINER]")},27863:(Yt,vt,c)=>{function v(st,J,Q){const nt=st.selection.$anchor;for(let wt=nt.depth;wt>0;wt--)if(nt.node(wt).type.name===Q)return J&&J(st.tr.delete(nt.before(wt),nt.after(wt)).scrollIntoView()),!0;return!1}c.d(vt,{yU:()=>v,Ws:()=>y,U5:()=>P,Yz:()=>H,YX:()=>et,Ap:()=>dt,Xd:()=>Mt,Oi:()=>rt,nC:()=>it,i0:()=>ft,Er:()=>Ot,_N:()=>Ht,x6:()=>ut,jx:()=>L,CH:()=>ct});var l=c(50259);function y(st,J,Q){const{left:nt,top:wt,width:Jt,height:Zt}=Q.getBoundingClientRect();return[(0,l.tuiClamp)(st-nt,0,Jt)/Jt,(0,l.tuiClamp)(J-wt,0,Zt)/Zt]}function P(st){return st.slice(0,Math.max(0,st.length-1)).replace("linear-gradient(","")}function ot(st,J,Q={}){return st.find(({attrs:nt,type:wt})=>wt===J&&function(st,J){const Q=Object.keys(J);return!Q.length||!!Q.filter(nt=>J[nt]===st[nt]).length}(nt,Q))||null}function H(st,J,Q={}){if(!st||!J)return null;const{node:nt,offset:wt}=st.parent.childAfter(st.parentOffset);if(!nt)return null;const Jt=ot(nt.marks,J,Q);if(!Jt)return null;let Zt=st.index(),ne=st.start()+wt,zt=Zt+1,ue=ne+nt.nodeSize;for(ot(nt.marks,J,Q);Zt>0&&Jt.isInSet(st.parent.child(Zt-1).marks);)Zt-=1,ne-=st.parent.child(Zt).nodeSize;for(;zt<st.parent.childCount&&ot(st.parent.child(zt).marks,J,Q);)ue+=st.parent.child(zt).nodeSize,zt+=1;return{from:ne,to:ue}}var X=c(77346);function et(st){const J=[];return st.content.forEach(Q=>{Q instanceof X.NB&&J.push([Q.type.name,Q.attrs])}),J}var _t=c(12867);function dt(st,J){const Q=null!=J?J:st.selection.$head.parent.textContent,nt=st.doc.cut(st.selection.from,st.selection.to);return nt.content.size?(0,_t.getHTMLFromFragment)(nt.content,st.schema):Q}function Mt(st,J){if(st.queryCommandSupported("insertHTML"))return void st.execCommand("insertHTML",!1,J);const Q=st.getSelection();if(!Q)throw new l.TuiDocumentSelectionException;st.execCommand("ms-beginUndoUnit");const nt=Q.getRangeAt(0),wt=nt.createContextualFragment(J);nt.deleteContents(),nt.insertNode(wt),st.execCommand("ms-endUndoUnit")}function rt(st,J){if(st.queryCommandSupported("insertText"))return void st.execCommand("insertText",!1,J);const Q=st.getSelection();if(!Q)throw new l.TuiDocumentSelectionException;st.execCommand("ms-beginUndoUnit");const nt=Q.getRangeAt(0);nt.deleteContents(),nt.insertNode(st.createTextNode(J)),st.execCommand("ms-endUndoUnit")}function ft({anchorNode:st,focusNode:J},Q){return!!st&&!!J&&(0,l.tuiIsNodeIn)(st,Q)&&(0,l.tuiIsNodeIn)(J,Q)}function Ot(st){const J=(new DOMParser).parseFromString(st,"text/html");return St(J.body),J.body.innerHTML}function St(st){for(const J of Array.from(st.children))if(J.children.length&&St(J),"FONT"===J.tagName)if(J.hasAttribute("size"))switch(J.getAttribute("size")){case"6":Pt("h1",J);break;case"5":Pt("h2",J);break;case"4":Dt("17px",J);break;case"3":Dt("15px",J);break;case"2":Dt("13px",J)}else J.hasAttribute("color")&&pt(J)}function Pt(st,J){var Q,nt,wt,Jt,Zt,ne,zt,ue,ye;const Oe=document.createElement(st);if(Oe.innerHTML=J.innerHTML,"P"===(null===(Q=J.parentElement)||void 0===Q?void 0:Q.tagName)){const he=null===(wt=null===(nt=J.parentElement)||void 0===nt?void 0:nt.parentElement)||void 0===wt?void 0:wt.insertBefore(Oe,J.parentElement);null===(Jt=J.parentElement)||void 0===Jt||Jt.removeChild(J),(null==he?void 0:he.nextSibling)&&!(null===(ne=null===(Zt=null==he?void 0:he.nextSibling)||void 0===Zt?void 0:Zt.textContent)||void 0===ne?void 0:ne.trim())&&(null===(ue=null===(zt=he.nextSibling)||void 0===zt?void 0:zt.parentElement)||void 0===ue||ue.removeChild(he.nextSibling))}else null===(ye=J.parentElement)||void 0===ye||ye.replaceChild(Oe,J)}function Dt(st,J){var Q;const nt=document.createElement("p"),wt=document.createElement("span");wt.setAttribute("style",`font-size: ${st}`),wt.innerHTML=J.innerHTML,nt.append(wt),null===(Q=J.parentElement)||void 0===Q||Q.replaceChild("P"===J.parentElement.tagName?wt:nt,J)}function pt(st){var J;const Q=document.createElement("span");Q.setAttribute("style",`color: ${st.getAttribute("color")}`),Q.innerHTML=st.innerHTML,null===(J=st.parentElement)||void 0===J||J.replaceChild(Q,st)}const Bt=["\\s*(","(?:","#(?:[a-f0-9]{6}|[a-f0-9]{3})","|","(?:rgb|hsl)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*\\)","|","(?:rgba|hsla)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*,\\s*\\d*\\.?\\d+\\)","|","[_a-z-][_a-z0-9-]*",")",")","(?:\\s+","(","(?:[+-]?\\d*\\.?\\d+)(?:%|[a-z]+)?","))?","(?:","\\s*,\\s*","\\s*)?"];function Ht(st){const J=new RegExp(Bt.join(""),"gi"),Q=st.startsWith("to")||st.match(/^\d/)?st.slice(Math.max(0,st.indexOf(",")+1)).trim():st,nt=st.startsWith("to")?st.split(",")[0]:"to bottom";let wt=[],Jt=J.exec(Q);for(;null!==Jt;)wt=wt.concat({color:Jt[1],position:Kt(Jt[2],wt.length)}),Jt=J.exec(Q);return wt=wt.filter(({color:Zt})=>Zt.startsWith("#")||Zt.startsWith("rgb")),{stops:wt,side:nt}}function Kt(st,J){const Q=1===J?"100%":`${J}%`;return(null==st?void 0:st.includes("%"))?st:Q}function ut(st){return st.reduce((J,Q)=>(J[Q]={parseHTML:nt=>null==nt?void 0:nt.getAttribute(`${Q}`)},J),{})}function L(st){return st.split(";").reduce((J,Q)=>{var nt;const[wt,Jt]=null!==(nt=Q.split(":"))&&void 0!==nt?nt:[];return wt&&Jt&&(J[wt.trim()]=Jt.trim()),J},{})}function it(st){var J;return st.endOffset-st.startOffset>0||0!==st.startOffset&&st.endOffset!==((null===(J=st.endContainer.nodeValue)||void 0===J?void 0:J.length)||0)}function ct({stops:st,side:J}){return`linear-gradient(${J}, ${st.map(({color:Q,position:nt})=>`rgba(${(0,l.tuiParseColor)(Q).join(", ")}) ${nt}`).join(", ")})`}},12867:(Yt,vt,c)=>{c.r(vt),c.d(vt,{CommandManager:()=>b,Editor:()=>Ko,Extension:()=>ce,InputRule:()=>we,Mark:()=>Nn,Node:()=>jn,NodeView:()=>mo,PasteRule:()=>Tt,Tracker:()=>d,callOrReturn:()=>a,combineTransactionSteps:()=>To,createChainableState:()=>gt,createDocument:()=>tn,createNodeFromContent:()=>Ut,createStyleTag:()=>po,defaultBlockAt:()=>eo,deleteProps:()=>Xe,elementFromString:()=>Nt,escapeForRegEx:()=>go,extensions:()=>uo,findChildren:()=>Co,findChildrenInRange:()=>vo,findDuplicates:()=>Qt,findParentNode:()=>wn,findParentNodeClosestToPos:()=>no,fromString:()=>E,generateHTML:()=>oo,generateJSON:()=>Mo,generateText:()=>io,getAttributes:()=>ro,getAttributesFromExtensions:()=>V,getChangedRanges:()=>yo,getDebugJSON:()=>Rn,getExtensionField:()=>k,getHTMLFromFragment:()=>Fn,getMarkAttributes:()=>Gn,getMarkRange:()=>C,getMarkType:()=>m,getMarksBetween:()=>Xn,getNodeAttributes:()=>zn,getNodeType:()=>z,getRenderedAttributes:()=>Rt,getSchema:()=>Kn,getSchemaByResolvedExtensions:()=>K,getSchemaTypeByName:()=>at,getSchemaTypeNameByName:()=>ln,getSplittedAttributes:()=>Ln,getText:()=>Jn,getTextBetween:()=>Re,getTextContentFromNodes:()=>te,getTextSerializersFromSchema:()=>We,injectExtensionAttributesToParseRule:()=>D,inputRulesPlugin:()=>S,isActive:()=>$n,isEmptyObject:()=>p,isExtensionRulesEnabled:()=>Lt,isFunction:()=>U,isList:()=>pn,isMacOS:()=>De,isMarkActive:()=>En,isNodeActive:()=>pe,isNodeEmpty:()=>Zn,isNodeSelection:()=>on,isNumber:()=>lt,isPlainObject:()=>se,isRegExp:()=>ee,isString:()=>r,isTextSelection:()=>x,isiOS:()=>W,markInputRule:()=>Jo,markPasteRule:()=>Lo,mergeAttributes:()=>bt,mergeDeep:()=>le,minMax:()=>R,nodeInputRule:()=>$o,nodePasteRule:()=>o,objectIncludes:()=>rn,pasteRulesPlugin:()=>Wt,posToDOMRect:()=>Bn,removeDuplicates:()=>An,resolveFocusPosition:()=>Z,selectionToInsertionEnd:()=>jt,splitExtensions:()=>w,textInputRule:()=>ho,textPasteRule:()=>s,textblockTypeInputRule:()=>Ro,wrappingInputRule:()=>fo});var v=c(62463),l=c(43594),y=c(70768),P=c(77346),g=c(38480);const ot=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);const X=(e,t,n)=>{let i=function(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}(e,n);if(!i)return!1;let u=ft(i);if(!u){let T=i.blockRange(),A=T&&(0,g.k9)(T);return null!=A&&(t&&t(e.tr.lift(T,A).scrollIntoView()),!0)}let h=u.nodeBefore;if(!h.type.spec.isolating&&ct(e,u,t))return!0;if(0==i.parent.content.size&&(Mt(h,"end")||v.qv.isSelectable(h))){let T=(0,g.dR)(e.doc,i.before(),i.after(),P.p2.empty);if(T&&T.slice.size<T.to-T.from){if(t){let A=e.tr.step(T);A.setSelection(Mt(h,"end")?v.Y1.findFrom(A.doc.resolve(A.mapping.map(u.pos,-1)),-1):v.qv.create(A.doc,u.pos-h.nodeSize)),t(A.scrollIntoView())}return!0}}return!(!h.isAtom||u.depth!=i.depth-1||(t&&t(e.tr.delete(u.pos-h.nodeSize,u.pos).scrollIntoView()),0))};function Mt(e,t,n=!1){for(let i=e;i;i="start"==t?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&1!=i.childCount)return!1}return!1}const rt=(e,t,n)=>{let{$head:i,empty:u}=e.selection,h=i;if(!u)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):i.parentOffset>0)return!1;h=ft(i)}let T=h&&h.nodeBefore;return!(!T||!v.qv.isSelectable(T)||(t&&t(e.tr.setSelection(v.qv.create(e.doc,h.pos-T.nodeSize)).scrollIntoView()),0))};function ft(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}const St=(e,t,n)=>{let i=function(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}(e,n);if(!i)return!1;let u=Dt(i);if(!u)return!1;let h=u.nodeAfter;if(ct(e,u,t))return!0;if(0==i.parent.content.size&&(Mt(h,"start")||v.qv.isSelectable(h))){let T=(0,g.dR)(e.doc,i.before(),i.after(),P.p2.empty);if(T&&T.slice.size<T.to-T.from){if(t){let A=e.tr.step(T);A.setSelection(Mt(h,"start")?v.Y1.findFrom(A.doc.resolve(A.mapping.map(u.pos)),1):v.qv.create(A.doc,A.mapping.map(u.pos))),t(A.scrollIntoView())}return!0}}return!(!h.isAtom||u.depth!=i.depth-1||(t&&t(e.tr.delete(u.pos,u.pos+h.nodeSize).scrollIntoView()),0))},Pt=(e,t,n)=>{let{$head:i,empty:u}=e.selection,h=i;if(!u)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size)return!1;h=Dt(i)}let T=h&&h.nodeAfter;return!(!T||!v.qv.isSelectable(T)||(t&&t(e.tr.setSelection(v.qv.create(e.doc,h.pos)).scrollIntoView()),0))};function Dt(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const mt=(e,t)=>{let{$head:n,$anchor:i}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(i)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))};function j(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const At=(e,t)=>{let{$head:n,$anchor:i}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let u=n.node(-1),h=n.indexAfter(-1),T=j(u.contentMatchAt(h));if(!T||!u.canReplaceWith(h,h,T))return!1;if(t){let A=n.after(),B=e.tr.replaceWith(A,A,T.createAndFill());B.setSelection(v.Y1.near(B.doc.resolve(A),1)),t(B.scrollIntoView())}return!0},kt=(e,t)=>{let n=e.selection,{$from:i,$to:u}=n;if(n instanceof v.C1||i.parent.inlineContent||u.parent.inlineContent)return!1;let h=j(u.parent.contentMatchAt(u.indexAfter()));if(!h||!h.isTextblock)return!1;if(t){let T=(!i.parentOffset&&u.index()<u.parent.childCount?i:u).pos,A=e.tr.insert(T,h.createAndFill());A.setSelection(v.Bs.create(A.doc,T+1)),t(A.scrollIntoView())}return!0},yt=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let h=n.before();if((0,g.Ax)(e.doc,h))return t&&t(e.tr.split(h).scrollIntoView()),!0}let i=n.blockRange(),u=i&&(0,g.k9)(i);return null!=u&&(t&&t(e.tr.lift(i,u).scrollIntoView()),!0)};var e;function ct(e,t,n){let h,T,i=t.nodeBefore,u=t.nodeAfter;if(i.type.spec.isolating||u.type.spec.isolating)return!1;if(function(e,t,n){let i=t.nodeBefore,u=t.nodeAfter,h=t.index();return!(!(i&&u&&i.type.compatibleContent(u.type))||(!i.content.size&&t.parent.canReplace(h-1,h)?(n&&n(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(h,h+1)||!u.isTextblock&&!(0,g.Mn)(e.doc,t.pos)||(n&&n(e.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;let A=t.parent.canReplace(t.index(),t.index()+1);if(A&&(h=(T=i.contentMatchAt(i.childCount)).findWrapping(u.type))&&T.matchType(h[0]||u.type).validEnd){if(n){let q=t.pos+u.nodeSize,ht=P.HY.empty;for(let Vt=h.length-1;Vt>=0;Vt--)ht=P.HY.from(h[Vt].create(null,ht));ht=P.HY.from(i.copy(ht));let It=e.tr.step(new g.FC(t.pos-1,q,t.pos,q,new P.p2(ht,1,0),h.length,!0)),$t=q+2*h.length;(0,g.Mn)(It.doc,$t)&&It.join($t),n(It.scrollIntoView())}return!0}let B=v.Y1.findFrom(t,1),N=B&&B.$from.blockRange(B.$to),Y=N&&(0,g.k9)(N);if(null!=Y&&Y>=t.depth)return n&&n(e.tr.lift(N,Y).scrollIntoView()),!0;if(A&&Mt(u,"start",!0)&&Mt(i,"end")){let q=i,ht=[];for(;ht.push(q),!q.isTextblock;)q=q.lastChild;let It=u,$t=1;for(;!It.isTextblock;It=It.firstChild)$t++;if(q.canReplace(q.childCount,q.childCount,It.content)){if(n){let Vt=P.HY.empty;for(let qt=ht.length-1;qt>=0;qt--)Vt=P.HY.from(ht[qt].copy(Vt));n(e.tr.step(new g.FC(t.pos-ht.length,t.pos+u.nodeSize,t.pos+$t,t.pos+u.nodeSize-$t,new P.p2(Vt,ht.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function st(e){return function(t,n){let i=t.selection,u=e<0?i.$from:i.$to,h=u.depth;for(;u.node(h).isInline;){if(!h)return!1;h--}return!!u.node(h).isTextblock&&(n&&n(t.tr.setSelection(v.Bs.create(t.doc,e<0?u.start(h):u.end(h)))),!0)}}const J=st(-1),Q=st(1);function wt(e,t=null){return function(n,i){let u=!1;for(let h=0;h<n.selection.ranges.length&&!u;h++){let{$from:{pos:T},$to:{pos:A}}=n.selection.ranges[h];n.doc.nodesBetween(T,A,(B,N)=>{if(u)return!1;if(B.isTextblock&&!B.hasMarkup(e,t))if(B.type==e)u=!0;else{let Y=n.doc.resolve(N),q=Y.index();u=Y.parent.canReplaceWith(q,q+1,e)}})}if(!u)return!1;if(i){let h=n.tr;for(let T=0;T<n.selection.ranges.length;T++){let{$from:{pos:A},$to:{pos:B}}=n.selection.ranges[T];h.setBlockType(A,B,e,t)}i(h.scrollIntoView())}return!0}}function ue(...e){return function(t,n,i){for(let u=0;u<e.length;u++)if(e[u](t,n,i))return!0;return!1}}let ye=ue(ot,X,rt),Oe=ue(ot,St,Pt);const he={Enter:ue(mt,kt,yt,(t,n)=>{let{$from:i,$to:u}=t.selection;if(t.selection instanceof v.qv&&t.selection.node.isBlock)return!(!i.parentOffset||!(0,g.Ax)(t.doc,i.pos)||(n&&n(t.tr.split(i.pos).scrollIntoView()),0));if(!i.parent.isBlock)return!1;if(n){let h=u.parentOffset==u.parent.content.size,T=t.tr;(t.selection instanceof v.Bs||t.selection instanceof v.C1)&&T.deleteSelection();let A=0==i.depth?null:j(i.node(-1).contentMatchAt(i.indexAfter(-1))),B=e,N=B?[B]:h&&A?[{type:A}]:void 0,Y=(0,g.Ax)(T.doc,T.mapping.map(i.pos),1,N);if(!N&&!Y&&(0,g.Ax)(T.doc,T.mapping.map(i.pos),1,A?[{type:A}]:void 0)&&(A&&(N=[{type:A}]),Y=!0),Y&&(T.split(T.mapping.map(i.pos),1,N),!h&&!i.parentOffset&&i.parent.type!=A)){let q=T.mapping.map(i.before()),ht=T.doc.resolve(q);A&&i.node(-1).canReplaceWith(ht.index(),ht.index()+1,A)&&T.setNodeMarkup(T.mapping.map(i.before()),A)}n(T.scrollIntoView())}return!0}),"Mod-Enter":At,Backspace:ye,"Mod-Backspace":ye,"Shift-Backspace":ye,Delete:Oe,"Mod-Delete":Oe,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new v.C1(e.doc))),!0)},Je={"Ctrl-h":he.Backspace,"Alt-Backspace":he["Mod-Backspace"],"Ctrl-d":he.Delete,"Ctrl-Alt-Backspace":he["Mod-Delete"],"Alt-Delete":he["Mod-Delete"],"Alt-d":he["Mod-Delete"],"Ctrl-a":J,"Ctrl-e":Q};for(let e in he)Je[e]=he[e];function gt(e){const{state:t,transaction:n}=e;let{selection:i}=n,{doc:u}=n,{storedMarks:h}=n;return me(Gt({},t),{apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),filterTransaction:t.filterTransaction,plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return h},get selection(){return i},get doc(){return u},get tr(){return i=n.selection,u=n.doc,h=n.storedMarks,n}})}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();class b{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:i}=this,{view:u}=n,{tr:h}=i,T=this.buildProps(h);return Object.fromEntries(Object.entries(t).map(([A,B])=>[A,(...Y)=>{const q=B(...Y)(T);return!h.getMeta("preventDispatch")&&!this.hasCustomState&&u.dispatch(h),q}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:i,editor:u,state:h}=this,{view:T}=u,A=[],B=!!t,N=t||h.tr,q=me(Gt({},Object.fromEntries(Object.entries(i).map(([ht,It])=>[ht,(...Vt)=>{const Xt=this.buildProps(N,n),qt=It(...Vt)(Xt);return A.push(qt),q}]))),{run:()=>(!B&&n&&!N.getMeta("preventDispatch")&&!this.hasCustomState&&T.dispatch(N),A.every(ht=>!0===ht))});return q}createCan(t){const{rawCommands:n,state:i}=this,h=t||i.tr,T=this.buildProps(h,!1),A=Object.fromEntries(Object.entries(n).map(([B,N])=>[B,(...Y)=>N(...Y)(me(Gt({},T),{dispatch:void 0}))]));return me(Gt({},A),{chain:()=>this.createChain(h,!1)})}buildProps(t,n=!0){const{rawCommands:i,editor:u,state:h}=this,{view:T}=u;h.storedMarks&&t.setStoredMarks(h.storedMarks);const A={tr:t,editor:u,view:T,state:gt({state:h,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(i).map(([B,N])=>[B,(...Y)=>N(...Y)(A)]))}};return A}}function k(e,t,n){return void 0===e.config[t]&&e.parent?k(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind(me(Gt({},n),{parent:e.parent?k(e.parent,t,n):null})):e.config[t]}function w(e){return{baseExtensions:e.filter(u=>"extension"===u.type),nodeExtensions:e.filter(u=>"node"===u.type),markExtensions:e.filter(u=>"mark"===u.type)}}function V(e){const t=[],{nodeExtensions:n,markExtensions:i}=w(e),u=[...n,...i],h={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(T=>{const B=k(T,"addGlobalAttributes",{name:T.name,options:T.options,storage:T.storage});B&&B().forEach(Y=>{Y.types.forEach(q=>{Object.entries(Y.attributes).forEach(([ht,It])=>{t.push({type:q,name:ht,attribute:Gt(Gt({},h),It)})})})})}),u.forEach(T=>{const B=k(T,"addAttributes",{name:T.name,options:T.options,storage:T.storage});if(!B)return;const N=B();Object.entries(N).forEach(([Y,q])=>{const ht=Gt(Gt({},h),q);"function"==typeof(null==ht?void 0:ht.default)&&(ht.default=ht.default()),(null==ht?void 0:ht.isRequired)&&void 0===(null==ht?void 0:ht.default)&&delete ht.default,t.push({type:T.name,name:Y,attribute:ht})})}),t}function z(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function bt(...e){return e.filter(t=>!!t).reduce((t,n)=>{const i=Gt({},t);return Object.entries(n).forEach(([u,h])=>{i[u]=i[u]?"class"===u?[i[u],h].join(" "):"style"===u?[i[u],h].join("; "):h:h}),i},{})}function Rt(e,t){return t.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,i)=>bt(n,i),{})}function U(e){return"function"==typeof e}function a(e,t,...n){return U(e)?t?e.bind(t)(...n):e(...n):e}function p(e={}){return 0===Object.keys(e).length&&e.constructor===Object}function E(e){return"string"!=typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}function D(e,t){return e.style?e:me(Gt({},e),{getAttrs:n=>{const i=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===i)return!1;const u=t.reduce((h,T)=>{const A=T.attribute.parseHTML?T.attribute.parseHTML(n):E(n.getAttribute(T.name));return null==A?h:me(Gt({},h),{[T.name]:A})},{});return Gt(Gt({},i),u)}})}function I(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>("attrs"!==t||!p(n))&&null!=n))}function K(e,t){var n;const i=V(e),{nodeExtensions:u,markExtensions:h}=w(e),T=null===(n=u.find(N=>k(N,"topNode")))||void 0===n?void 0:n.name,A=Object.fromEntries(u.map(N=>{const Y=i.filter(qt=>qt.type===N.name),q={name:N.name,options:N.options,storage:N.storage,editor:t},ht=e.reduce((qt,Se)=>{const Ke=k(Se,"extendNodeSchema",q);return Gt(Gt({},qt),Ke?Ke(N):{})},{}),It=I(me(Gt({},ht),{content:a(k(N,"content",q)),marks:a(k(N,"marks",q)),group:a(k(N,"group",q)),inline:a(k(N,"inline",q)),atom:a(k(N,"atom",q)),selectable:a(k(N,"selectable",q)),draggable:a(k(N,"draggable",q)),code:a(k(N,"code",q)),defining:a(k(N,"defining",q)),isolating:a(k(N,"isolating",q)),attrs:Object.fromEntries(Y.map(qt=>{var Se;return[qt.name,{default:null===(Se=null==qt?void 0:qt.attribute)||void 0===Se?void 0:Se.default}]}))})),$t=a(k(N,"parseHTML",q));$t&&(It.parseDOM=$t.map(qt=>D(qt,Y)));const Vt=k(N,"renderHTML",q);Vt&&(It.toDOM=qt=>Vt({node:qt,HTMLAttributes:Rt(qt,Y)}));const Xt=k(N,"renderText",q);return Xt&&(It.toText=Xt),[N.name,It]})),B=Object.fromEntries(h.map(N=>{const Y=i.filter(Xt=>Xt.type===N.name),q={name:N.name,options:N.options,storage:N.storage,editor:t},ht=e.reduce((Xt,qt)=>{const Se=k(qt,"extendMarkSchema",q);return Gt(Gt({},Xt),Se?Se(N):{})},{}),It=I(me(Gt({},ht),{inclusive:a(k(N,"inclusive",q)),excludes:a(k(N,"excludes",q)),group:a(k(N,"group",q)),spanning:a(k(N,"spanning",q)),code:a(k(N,"code",q)),attrs:Object.fromEntries(Y.map(Xt=>{var qt;return[Xt.name,{default:null===(qt=null==Xt?void 0:Xt.attribute)||void 0===qt?void 0:qt.default}]}))})),$t=a(k(N,"parseHTML",q));$t&&(It.parseDOM=$t.map(Xt=>D(Xt,Y)));const Vt=k(N,"renderHTML",q);return Vt&&(It.toDOM=Xt=>Vt({mark:Xt,HTMLAttributes:Rt(Xt,Y)})),[N.name,It]}));return new P.V_({topNode:T,nodes:A,marks:B})}function at(e,t){return t.nodes[e]||t.marks[e]||null}function Lt(e,t){return Array.isArray(t)?t.some(n=>("string"==typeof n?n:n.name)===e.name):t}const te=(e,t=500)=>{let n="";const i=e.parentOffset;return e.parent.nodesBetween(Math.max(0,i-t),i,(u,h,T,A)=>{var B,N;n+=((null===(N=(B=u.type.spec).toText)||void 0===N?void 0:N.call(B,{node:u,pos:h,parent:T,index:A}))||u.textContent||"%leaf%").slice(0,Math.max(0,i-h))}),n};function ee(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class we{constructor(t){this.find=t.find,this.handler=t.handler}}function $(e){var t;const{editor:n,from:i,to:u,text:h,rules:T,plugin:A}=e,{view:B}=n;if(B.composing)return!1;const N=B.state.doc.resolve(i);if(N.parent.type.spec.code||(null===(t=N.nodeBefore||N.nodeAfter)||void 0===t?void 0:t.marks.find(ht=>ht.type.spec.code)))return!1;let Y=!1;const q=te(N)+h;return T.forEach(ht=>{if(Y)return;const It=((e,t)=>{if(ee(t))return t.exec(e);const n=t(e);if(!n)return null;const i=[n.text];return i.index=n.index,i.input=e,i.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(n.replaceWith)),i})(q,ht.find);if(!It)return;const $t=B.state.tr,Vt=gt({state:B.state,transaction:$t}),Xt={from:i-(It[0].length-h.length),to:u},{commands:qt,chain:Se,can:Ke}=new b({editor:n,state:Vt});null===ht.handler({state:Vt,range:Xt,match:It,commands:qt,chain:Se,can:Ke})||!$t.steps.length||($t.setMeta(A,{transform:$t,from:i,to:u,text:h}),B.dispatch($t),Y=!0)}),Y}function S(e){const{editor:t,rules:n}=e,i=new v.Sy({state:{init:()=>null,apply:(u,h)=>u.getMeta(i)||(u.selectionSet||u.docChanged?null:h)},props:{handleTextInput:(u,h,T,A)=>$({editor:t,from:h,to:T,text:A,rules:n,plugin:i}),handleDOMEvents:{compositionend:u=>(setTimeout(()=>{const{$cursor:h}=u.state.selection;h&&$({editor:t,from:h.pos,to:h.pos,text:"",rules:n,plugin:i})}),!1)},handleKeyDown(u,h){if("Enter"!==h.key)return!1;const{$cursor:T}=u.state.selection;return!!T&&$({editor:t,from:T.pos,to:T.pos,text:"\n",rules:n,plugin:i})}},isInputRules:!0});return i}function lt(e){return"number"==typeof e}class Tt{constructor(t){this.find=t.find,this.handler=t.handler}}function Wt(e){const{editor:t,rules:n}=e;let i=null,u=!1,h=!1;return n.map(A=>new v.Sy({view(B){const N=Y=>{var q;i=(null===(q=B.dom.parentElement)||void 0===q?void 0:q.contains(Y.target))?B.dom.parentElement:null};return window.addEventListener("dragstart",N),{destroy(){window.removeEventListener("dragstart",N)}}},props:{handleDOMEvents:{drop:B=>(h=i===B.dom.parentElement,!1),paste:(B,N)=>{var Y;const q=null===(Y=N.clipboardData)||void 0===Y?void 0:Y.getData("text/html");return u=!!(null==q?void 0:q.includes("data-pm-slice")),!1}}},appendTransaction:(B,N,Y)=>{const q=B[0],ht="paste"===q.getMeta("uiEvent")&&!u,It="drop"===q.getMeta("uiEvent")&&!h;if(!ht&&!It)return;const $t=N.doc.content.findDiffStart(Y.doc.content),Vt=N.doc.content.findDiffEnd(Y.doc.content);if(!lt($t)||!Vt||$t===Vt.b)return;const Xt=Y.tr,qt=gt({state:Y,transaction:Xt});return function(e){const{editor:t,state:n,from:i,to:u,rule:h}=e,{commands:T,chain:A,can:B}=new b({editor:t,state:n}),N=[];return n.doc.nodesBetween(i,u,(q,ht)=>{if(!q.isTextblock||q.type.spec.code)return;const It=Math.max(i,ht),$t=Math.min(u,ht+q.content.size);((e,t)=>{if(ee(t))return[...e.matchAll(t)];const n=t(e);return n?n.map(i=>{const u=[i.text];return u.index=i.index,u.input=e,u.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),u.push(i.replaceWith)),u}):[]})(q.textBetween(It-ht,$t-ht,void 0,"\ufffc"),h.find).forEach(qt=>{if(void 0===qt.index)return;const Se=It+qt.index+1,Ke=Se+qt[0].length,ae={from:n.tr.mapping.map(Se),to:n.tr.mapping.map(Ke)},Ve=h.handler({state:n,range:ae,match:qt,commands:T,chain:A,can:B});N.push(Ve)})}),N.every(q=>null!==q)}({editor:t,state:qt,from:Math.max($t-1,0),to:Vt.b-1,rule:A})&&Xt.steps.length?Xt:void 0}}))}function Qt(e){const t=e.filter((n,i)=>e.indexOf(n)!==i);return[...new Set(t)]}class oe{constructor(t,n){this.splittableMarks=[],this.editor=n,this.extensions=oe.resolve(t),this.schema=K(this.extensions,n),this.extensions.forEach(i=>{var u;this.editor.extensionStorage[i.name]=i.storage;const h={name:i.name,options:i.options,storage:i.storage,editor:this.editor,type:at(i.name,this.schema)};"mark"===i.type&&(null===(u=a(k(i,"keepOnSplit",h)))||void 0===u||u)&&this.splittableMarks.push(i.name);const T=k(i,"onBeforeCreate",h);T&&this.editor.on("beforeCreate",T);const A=k(i,"onCreate",h);A&&this.editor.on("create",A);const B=k(i,"onUpdate",h);B&&this.editor.on("update",B);const N=k(i,"onSelectionUpdate",h);N&&this.editor.on("selectionUpdate",N);const Y=k(i,"onTransaction",h);Y&&this.editor.on("transaction",Y);const q=k(i,"onFocus",h);q&&this.editor.on("focus",q);const ht=k(i,"onBlur",h);ht&&this.editor.on("blur",ht);const It=k(i,"onDestroy",h);It&&this.editor.on("destroy",It)})}static resolve(t){const n=oe.sort(oe.flatten(t)),i=Qt(n.map(u=>u.name));return i.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${i.map(u=>`'${u}'`).join(", ")}]. This can lead to issues.`),n}static flatten(t){return t.map(n=>{const u=k(n,"addExtensions",{name:n.name,options:n.options,storage:n.storage});return u?[n,...this.flatten(u())]:n}).flat(10)}static sort(t){return t.sort((i,u)=>{const h=k(i,"priority")||100,T=k(u,"priority")||100;return h>T?-1:h<T?1:0})}get commands(){return this.extensions.reduce((t,n)=>{const u=k(n,"addCommands",{name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:at(n.name,this.schema)});return u?Gt(Gt({},t),u()):t},{})}get plugins(){const{editor:t}=this,n=oe.sort([...this.extensions].reverse()),i=[],u=[],h=n.map(T=>{const A={name:T.name,options:T.options,storage:T.storage,editor:t,type:at(T.name,this.schema)},B=[],N=k(T,"addKeyboardShortcuts",A);let Y={};if("mark"===T.type&&T.config.exitable&&(Y.ArrowRight=()=>Nn.handleExit({editor:t,mark:T})),N){const Vt=Object.fromEntries(Object.entries(N()).map(([Xt,qt])=>[Xt,()=>qt({editor:t})]));Y=Gt(Gt({},Y),Vt)}const q=(0,y.h)(Y);B.push(q);const ht=k(T,"addInputRules",A);Lt(T,t.options.enableInputRules)&&ht&&i.push(...ht());const It=k(T,"addPasteRules",A);Lt(T,t.options.enablePasteRules)&&It&&u.push(...It());const $t=k(T,"addProseMirrorPlugins",A);if($t){const Vt=$t();B.push(...Vt)}return B}).flat();return[S({editor:t,rules:i}),...Wt({editor:t,rules:u}),...h]}get attributes(){return V(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:n}=w(this.extensions);return Object.fromEntries(n.filter(i=>!!k(i,"addNodeView")).map(i=>{const u=this.attributes.filter(B=>B.type===i.name),h={name:i.name,options:i.options,storage:i.storage,editor:t,type:z(i.name,this.schema)},T=k(i,"addNodeView",h);return T?[i.name,(B,N,Y,q)=>{const ht=Rt(B,u);return T()({editor:t,node:B,getPos:Y,decorations:q,HTMLAttributes:ht,extension:i})}]:[]}))}}function se(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function le(e,t){const n=Gt({},e);return se(e)&&se(t)&&Object.keys(t).forEach(i=>{se(t[i])?i in e?n[i]=le(e[i],t[i]):Object.assign(n,{[i]:t[i]}):Object.assign(n,{[i]:t[i]})}),n}class ce{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Gt(Gt({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(k(this,"addOptions",{name:this.name}))),this.storage=a(k(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new ce(t)}configure(t={}){const n=this.extend();return n.options=le(this.options,t),n.storage=a(k(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new ce(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=a(k(n,"addOptions",{name:n.name})),n.storage=a(k(n,"addStorage",{name:n.name,options:n.options})),n}}function Re(e,t,n){const{from:i,to:u}=t,{blockSeparator:h="\n\n",textSerializers:T={}}=n||{};let A="",B=!0;return e.nodesBetween(i,u,(N,Y,q,ht)=>{var It;const $t=null==T?void 0:T[N.type.name];$t?(N.isBlock&&!B&&(A+=h,B=!0),q&&(A+=$t({node:N,pos:Y,parent:q,index:ht,range:t}))):N.isText?(A+=null===(It=null==N?void 0:N.text)||void 0===It?void 0:It.slice(Math.max(i,Y)-Y,u-Y),B=!1):N.isBlock&&!B&&(A+=h,B=!0)}),A}function We(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}const cn=ce.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new v.Sy({key:new v.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:i,selection:u}=t,{ranges:h}=u;return Re(i,{from:Math.min(...h.map(Y=>Y.$from.pos)),to:Math.max(...h.map(Y=>Y.$to.pos))},{textSerializers:We(n)})}}})]}});function rn(e,t,n={strict:!0}){const i=Object.keys(t);return!i.length||i.every(u=>n.strict?t[u]===e[u]:ee(t[u])?t[u].test(e[u]):t[u]===e[u])}function sn(e,t,n={}){return e.find(i=>i.type===t&&rn(i.attrs,n))}function _(e,t,n={}){return!!sn(e,t,n)}function C(e,t,n={}){if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if(e.parentOffset===i.offset&&0!==i.offset&&(i=e.parent.childBefore(e.parentOffset)),!i.node)return;const u=sn([...i.node.marks],t,n);if(!u)return;let h=i.index,T=e.start()+i.offset,A=h+1,B=T+i.node.nodeSize;for(sn([...i.node.marks],t,n);h>0&&u.isInSet(e.parent.child(h-1).marks);)h-=1,T-=e.parent.child(h).nodeSize;for(;A<e.parent.childCount&&_([...e.parent.child(A).marks],t,n);)B+=e.parent.child(A).nodeSize,A+=1;return{from:T,to:B}}function m(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function x(e){return e instanceof v.Bs}function R(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Z(e,t=null){if(!t)return null;const n=v.Y1.atStart(e),i=v.Y1.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return i;const u=n.from,h=i.to;return"all"===t?v.Bs.create(e,R(0,u,h),R(e.content.size,u,h)):v.Bs.create(e,R(t,u,h),R(t,u,h))}function W(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Nt(e){const t=`<body>${e}</body>`;return(new window.DOMParser).parseFromString(t,"text/html").body}function Ut(e,t,n){if(n=Gt({slice:!0,parseOptions:{}},n),"object"==typeof e&&null!==e)try{return Array.isArray(e)&&e.length>0?P.HY.fromArray(e.map(i=>t.nodeFromJSON(i))):t.nodeFromJSON(e)}catch(i){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",i),Ut("",t,n)}if("string"==typeof e){const i=P.aw.fromSchema(t);return n.slice?i.parseSlice(Nt(e),n.parseOptions).content:i.parse(Nt(e),n.parseOptions)}return Ut("",t,n)}function jt(e,t,n){const i=e.steps.length-1;if(i<t)return;const u=e.steps[i];if(!(u instanceof g.Pu||u instanceof g.FC))return;let T=0;e.mapping.maps[i].forEach((A,B,N,Y)=>{0===T&&(T=Y)}),e.setSelection(v.Y1.near(e.doc.resolve(T),n))}function De(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function pe(e,t,n={}){const{from:i,to:u,empty:h}=e.selection,T=t?z(t,e.schema):null,A=[];e.doc.nodesBetween(i,u,(q,ht)=>{if(q.isText)return;const It=Math.max(i,ht),$t=Math.min(u,ht+q.nodeSize);A.push({node:q,from:It,to:$t})});const B=u-i,N=A.filter(q=>!T||T.name===q.node.type.name).filter(q=>rn(q.node.attrs,n,{strict:!1}));return h?!!N.length:N.reduce((q,ht)=>q+ht.to-ht.from,0)>=B}function ln(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Xe(e,t){const n="string"==typeof t?[t]:t;return Object.keys(e).reduce((i,u)=>(n.includes(u)||(i[u]=e[u]),i),{})}function tn(e,t,n={}){return Ut(e,t,{slice:!1,parseOptions:n})}function To(e,t){const n=new g.wx(e);return t.forEach(i=>{i.steps.forEach(u=>{n.step(u)})}),n}function eo(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Co(e,t){const n=[];return e.descendants((i,u)=>{t(i)&&n.push({node:i,pos:u})}),n}function vo(e,t,n){const i=[];return e.nodesBetween(t.from,t.to,(u,h)=>{n(u)&&i.push({node:u,pos:h})}),i}function no(e,t){for(let n=e.depth;n>0;n-=1){const i=e.node(n);if(t(i))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:i}}}function wn(e){return t=>no(t.$from,e)}function Fn(e,t){const n=P.PW.fromSchema(t).serializeFragment(e),u=document.implementation.createHTMLDocument().createElement("div");return u.appendChild(n),u.innerHTML}function Kn(e,t){return K(oe.resolve(e),t)}function oo(e,t){const n=Kn(t);return Fn(P.NB.fromJSON(n,e).content,n)}function Mo(e,t){const n=Kn(t),i=Nt(e);return P.aw.fromSchema(n).parse(i).toJSON()}function Jn(e,t){return Re(e,{from:0,to:e.content.size},t)}function io(e,t,n){const{blockSeparator:i="\n\n",textSerializers:u={}}=n||{},h=Kn(t);return Jn(P.NB.fromJSON(h,e),{blockSeparator:i,textSerializers:Gt(Gt({},We(h)),u)})}function Gn(e,t){const n=m(t,e.schema),{from:i,to:u,empty:h}=e.selection,T=[];h?(e.storedMarks&&T.push(...e.storedMarks),T.push(...e.selection.$head.marks())):e.doc.nodesBetween(i,u,B=>{T.push(...B.marks)});const A=T.find(B=>B.type.name===n.name);return A?Gt({},A.attrs):{}}function zn(e,t){const n=z(t,e.schema),{from:i,to:u}=e.selection,h=[];e.doc.nodesBetween(i,u,A=>{h.push(A)});const T=h.reverse().find(A=>A.type.name===n.name);return T?Gt({},T.attrs):{}}function ro(e,t){const n=ln("string"==typeof t?t:t.name,e.schema);return"node"===n?zn(e,t):"mark"===n?Gn(e,t):{}}function An(e,t=JSON.stringify){const n={};return e.filter(i=>{const u=t(i);return!Object.prototype.hasOwnProperty.call(n,u)&&(n[u]=!0)})}function yo(e){const{mapping:t,steps:n}=e,i=[];return t.maps.forEach((u,h)=>{const T=[];if(u.ranges.length)u.forEach((A,B)=>{T.push({from:A,to:B})});else{const{from:A,to:B}=n[h];if(void 0===A||void 0===B)return;T.push({from:A,to:B})}T.forEach(({from:A,to:B})=>{const N=t.slice(h).map(A,-1),Y=t.slice(h).map(B),q=t.invert().map(N,-1),ht=t.invert().map(Y);i.push({oldRange:{from:q,to:ht},newRange:{from:N,to:Y}})})}),function(e){const t=An(e);return 1===t.length?t:t.filter((n,i)=>!t.filter((h,T)=>T!==i).some(h=>n.oldRange.from>=h.oldRange.from&&n.oldRange.to<=h.oldRange.to&&n.newRange.from>=h.newRange.from&&n.newRange.to<=h.newRange.to))}(i)}function Rn(e,t=0){const i=e.type===e.type.schema.topNodeType?0:1,u=t,h=u+e.nodeSize,T=e.marks.map(N=>{const Y={type:N.type.name};return Object.keys(N.attrs).length&&(Y.attrs=Gt({},N.attrs)),Y}),A=Gt({},e.attrs),B={type:e.type.name,from:u,to:h};return Object.keys(A).length&&(B.attrs=A),T.length&&(B.marks=T),e.content.childCount&&(B.content=[],e.forEach((N,Y)=>{var q;null===(q=B.content)||void 0===q||q.push(Rn(N,t+Y+i))})),e.text&&(B.text=e.text),B}function Xn(e,t,n){const i=[];return e===t?n.resolve(e).marks().forEach(u=>{const T=C(n.resolve(e-1),u.type);!T||i.push(Gt({mark:u},T))}):n.nodesBetween(e,t,(u,h)=>{i.push(...u.marks.map(T=>({from:h,to:h+u.nodeSize,mark:T})))}),i}function Ln(e,t,n){return Object.fromEntries(Object.entries(n).filter(([i])=>{const u=e.find(h=>h.type===t&&h.name===i);return!!u&&u.attribute.keepOnSplit}))}function En(e,t,n={}){const{empty:i,ranges:u}=e.selection,h=t?m(t,e.schema):null;if(i)return!!(e.storedMarks||e.selection.$from.marks()).filter(q=>!h||h.name===q.type.name).find(q=>rn(q.attrs,n,{strict:!1}));let T=0;const A=[];if(u.forEach(({$from:q,$to:ht})=>{const It=q.pos,$t=ht.pos;e.doc.nodesBetween(It,$t,(Vt,Xt)=>{if(!Vt.isText&&!Vt.marks.length)return;const qt=Math.max(It,Xt),Se=Math.min($t,Xt+Vt.nodeSize);T+=Se-qt,A.push(...Vt.marks.map(ae=>({mark:ae,from:qt,to:Se})))})}),0===T)return!1;const B=A.filter(q=>!h||h.name===q.mark.type.name).filter(q=>rn(q.mark.attrs,n,{strict:!1})).reduce((q,ht)=>q+ht.to-ht.from,0),N=A.filter(q=>!h||q.mark.type!==h&&q.mark.type.excludes(h)).reduce((q,ht)=>q+ht.to-ht.from,0);return(B>0?B+N:B)>=T}function $n(e,t,n={}){if(!t)return pe(e,null,n)||En(e,null,n);const i=ln(t,e.schema);return"node"===i?pe(e,t,n):"mark"===i&&En(e,t,n)}function pn(e,t){const{nodeExtensions:n}=w(t),i=n.find(T=>T.name===e);if(!i)return!1;const h=a(k(i,"group",{name:i.name,options:i.options,storage:i.storage}));return"string"==typeof h&&h.split(" ").includes("list")}function Zn(e){var t;const n=null===(t=e.type.createAndFill())||void 0===t?void 0:t.toJSON(),i=e.toJSON();return JSON.stringify(n)===JSON.stringify(i)}function on(e){return e instanceof v.qv}function Bn(e,t,n){const u=e.state.doc.content.size,h=R(t,0,u),T=R(n,0,u),A=e.coordsAtPos(h),B=e.coordsAtPos(T,-1),N=Math.min(A.top,B.top),Y=Math.max(A.bottom,B.bottom),q=Math.min(A.left,B.left),ht=Math.max(A.right,B.right),qt={top:N,bottom:Y,left:q,right:ht,width:ht-q,height:Y-N,x:q,y:N};return me(Gt({},qt),{toJSON:()=>qt})}function qn(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const i=n.filter(u=>null==t?void 0:t.includes(u.type.name));e.tr.ensureMarks(i)}}const _n=(e,t)=>{const n=wn(T=>T.type===t)(e.selection);if(!n)return!0;const i=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===i)return!0;const u=e.doc.nodeAt(i);return n.node.type===(null==u?void 0:u.type)&&(0,g.Mn)(e.doc,n.pos)&&e.join(n.pos),!0},Wn=(e,t)=>{const n=wn(T=>T.type===t)(e.selection);if(!n)return!0;const i=e.doc.resolve(n.start).after(n.depth);if(void 0===i)return!0;const u=e.doc.nodeAt(i);return n.node.type===(null==u?void 0:u.type)&&(0,g.Mn)(e.doc,i)&&e.join(i),!0};var Po=Object.freeze({__proto__:null,blur:()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),null===(n=null==window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())}),!0),clearContent:(e=!1)=>({commands:t})=>t.setContent("",e),clearNodes:()=>({state:e,tr:t,dispatch:n})=>{const{selection:i}=t,{ranges:u}=i;return n&&u.forEach(({$from:h,$to:T})=>{e.doc.nodesBetween(h.pos,T.pos,(A,B)=>{if(A.type.isText)return;const{doc:N,mapping:Y}=t,q=N.resolve(Y.map(B)),ht=N.resolve(Y.map(B+A.nodeSize)),It=q.blockRange(ht);if(!It)return;const $t=(0,g.k9)(It);if(A.type.isTextblock){const{defaultType:Vt}=q.parent.contentMatchAt(q.index());t.setNodeMarkup(It.start,Vt)}($t||0===$t)&&t.lift(It,$t)})}),!0},command:e=>t=>e(t),createParagraphNear:()=>({state:e,dispatch:t})=>kt(e,t),deleteCurrentNode:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,i=n.$anchor.node();if(i.content.size>0)return!1;const u=e.selection.$anchor;for(let h=u.depth;h>0;h-=1)if(u.node(h).type===i.type){if(t){const A=u.before(h),B=u.after(h);e.delete(A,B).scrollIntoView()}return!0}return!1},deleteNode:e=>({tr:t,state:n,dispatch:i})=>{const u=z(e,n.schema),h=t.selection.$anchor;for(let T=h.depth;T>0;T-=1)if(h.node(T).type===u){if(i){const B=h.before(T),N=h.after(T);t.delete(B,N).scrollIntoView()}return!0}return!1},deleteRange:e=>({tr:t,dispatch:n})=>{const{from:i,to:u}=e;return n&&t.delete(i,u),!0},deleteSelection:()=>({state:e,dispatch:t})=>ot(e,t),enter:()=>({commands:e})=>e.keyboardShortcut("Enter"),exitCode:()=>({state:e,dispatch:t})=>At(e,t),extendMarkRange:(e,t={})=>({tr:n,state:i,dispatch:u})=>{const h=m(e,i.schema),{doc:T,selection:A}=n,{$from:B,from:N,to:Y}=A;if(u){const q=C(B,h,t);if(q&&q.from<=N&&q.to>=Y){const ht=v.Bs.create(T,q.from,q.to);n.setSelection(ht)}}return!0},first:e=>t=>{const n="function"==typeof e?e(t):e;for(let i=0;i<n.length;i+=1)if(n[i](t))return!0;return!1},focus:(e=null,t={})=>({editor:n,view:i,tr:u,dispatch:h})=>{t=Gt({scrollIntoView:!0},t);const T=()=>{W()&&i.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(i.focus(),(null==t?void 0:t.scrollIntoView)&&n.commands.scrollIntoView())})};if(i.hasFocus()&&null===e||!1===e)return!0;if(h&&null===e&&!x(n.state.selection))return T(),!0;const A=Z(u.doc,e)||n.state.selection,B=n.state.selection.eq(A);return h&&(B||u.setSelection(A),B&&u.storedMarks&&u.setStoredMarks(u.storedMarks),T()),!0},forEach:(e,t)=>n=>e.every((i,u)=>t(i,me(Gt({},n),{index:u}))),insertContent:(e,t)=>({tr:n,commands:i})=>i.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),insertContentAt:(e,t,n)=>({tr:i,dispatch:u,editor:h})=>{if(u){n=Gt({parseOptions:{},updateSelection:!0},n);const T=Ut(t,h.schema,{parseOptions:Gt({preserveWhitespace:"full"},n.parseOptions)});if("<>"===T.toString())return!0;let{from:A,to:B}="number"==typeof e?{from:e,to:e}:e,N=!0,Y=!0;if(((e=>e.toString().startsWith("<"))(T)?T:[T]).forEach(ht=>{ht.check(),N=!!N&&ht.isText&&0===ht.marks.length,Y=!!Y&&ht.isBlock}),A===B&&Y){const{parent:ht}=i.doc.resolve(A);ht.isTextblock&&!ht.type.spec.code&&!ht.childCount&&(A-=1,B+=1)}N?Array.isArray(t)?i.insertText(t.map(ht=>ht.text||"").join(""),A,B):i.insertText("object"==typeof t&&t&&t.text?t.text:t,A,B):i.replaceWith(A,B,T),n.updateSelection&&jt(i,i.steps.length-1,-1)}return!0},joinUp:()=>({state:e,dispatch:t})=>((e,t)=>{let u,n=e.selection,i=n instanceof v.qv;if(i){if(n.node.isTextblock||!(0,g.Mn)(e.doc,n.from))return!1;u=n.from}else if(u=(0,g.GJ)(e.doc,n.from,-1),null==u)return!1;if(t){let h=e.tr.join(u);i&&h.setSelection(v.qv.create(h.doc,u-e.doc.resolve(u).nodeBefore.nodeSize)),t(h.scrollIntoView())}return!0})(e,t),joinDown:()=>({state:e,dispatch:t})=>((e,t)=>{let i,n=e.selection;if(n instanceof v.qv){if(n.node.isTextblock||!(0,g.Mn)(e.doc,n.to))return!1;i=n.to}else if(i=(0,g.GJ)(e.doc,n.to,1),null==i)return!1;return t&&t(e.tr.join(i).scrollIntoView()),!0})(e,t),joinBackward:()=>({state:e,dispatch:t})=>X(e,t),joinForward:()=>({state:e,dispatch:t})=>St(e,t),keyboardShortcut:e=>({editor:t,view:n,tr:i,dispatch:u})=>{const h=function(e){const t=e.split(/-(?!$)/);let i,u,h,T,n=t[t.length-1];"Space"===n&&(n=" ");for(let A=0;A<t.length-1;A+=1){const B=t[A];if(/^(cmd|meta|m)$/i.test(B))T=!0;else if(/^a(lt)?$/i.test(B))i=!0;else if(/^(c|ctrl|control)$/i.test(B))u=!0;else if(/^s(hift)?$/i.test(B))h=!0;else{if(!/^mod$/i.test(B))throw new Error(`Unrecognized modifier name: ${B}`);W()||De()?T=!0:u=!0}}return i&&(n=`Alt-${n}`),u&&(n=`Ctrl-${n}`),T&&(n=`Meta-${n}`),h&&(n=`Shift-${n}`),n}(e).split(/-(?!$)/),T=h.find(N=>!["Alt","Ctrl","Meta","Shift"].includes(N)),A=new KeyboardEvent("keydown",{key:"Space"===T?" ":T,altKey:h.includes("Alt"),ctrlKey:h.includes("Ctrl"),metaKey:h.includes("Meta"),shiftKey:h.includes("Shift"),bubbles:!0,cancelable:!0}),B=t.captureTransaction(()=>{n.someProp("handleKeyDown",N=>N(n,A))});return null==B||B.steps.forEach(N=>{const Y=N.map(i.mapping);Y&&u&&i.maybeStep(Y)}),!0},lift:(e,t={})=>({state:n,dispatch:i})=>!!pe(n,z(e,n.schema),t)&&((e,t)=>{let{$from:n,$to:i}=e.selection,u=n.blockRange(i),h=u&&(0,g.k9)(u);return null!=h&&(t&&t(e.tr.lift(u,h).scrollIntoView()),!0)})(n,i),liftEmptyBlock:()=>({state:e,dispatch:t})=>yt(e,t),liftListItem:e=>({state:t,dispatch:n})=>function(e){return function(t,n){let{$from:i,$to:u}=t.selection,h=i.blockRange(u,T=>T.childCount>0&&T.firstChild.type==e);return!!h&&(!n||(i.node(h.depth-1).type==e?function(e,t,n,i){let u=e.tr,h=i.end,T=i.$to.end(i.depth);h<T&&(u.step(new g.FC(h-1,T,h,T,new P.p2(P.HY.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new P.Ts(u.doc.resolve(i.$from.pos),u.doc.resolve(T),i.depth));const A=(0,g.k9)(i);if(null==A)return!1;u.lift(i,A);let B=u.mapping.map(h,-1)-1;return(0,g.Mn)(u.doc,B)&&u.join(B),t(u.scrollIntoView()),!0}(t,n,e,h):function(e,t,n){let i=e.tr,u=n.parent;for(let It=n.end,$t=n.endIndex-1,Vt=n.startIndex;$t>Vt;$t--)It-=u.child($t).nodeSize,i.delete(It-1,It+1);let h=i.doc.resolve(n.start),T=h.nodeAfter;if(i.mapping.map(n.end)!=n.start+h.nodeAfter.nodeSize)return!1;let A=0==n.startIndex,B=n.endIndex==u.childCount,N=h.node(-1),Y=h.index(-1);if(!N.canReplace(Y+(A?0:1),Y+1,T.content.append(B?P.HY.empty:P.HY.from(u))))return!1;let q=h.pos,ht=q+T.nodeSize;return i.step(new g.FC(q-(A?1:0),ht+(B?1:0),q+1,ht-1,new P.p2((A?P.HY.empty:P.HY.from(u.copy(P.HY.empty))).append(B?P.HY.empty:P.HY.from(u.copy(P.HY.empty))),A?0:1,B?0:1),A?0:1)),t(i.scrollIntoView()),!0}(t,n,h)))}}(z(e,t.schema))(t,n),newlineInCode:()=>({state:e,dispatch:t})=>mt(e,t),resetAttributes:(e,t)=>({tr:n,state:i,dispatch:u})=>{let h=null,T=null;const A=ln("string"==typeof e?e:e.name,i.schema);return!!A&&("node"===A&&(h=z(e,i.schema)),"mark"===A&&(T=m(e,i.schema)),u&&n.selection.ranges.forEach(B=>{i.doc.nodesBetween(B.$from.pos,B.$to.pos,(N,Y)=>{h&&h===N.type&&n.setNodeMarkup(Y,void 0,Xe(N.attrs,t)),T&&N.marks.length&&N.marks.forEach(q=>{T===q.type&&n.addMark(Y,Y+N.nodeSize,T.create(Xe(q.attrs,t)))})})}),!0)},scrollIntoView:()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),selectAll:()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size}),selectNodeBackward:()=>({state:e,dispatch:t})=>rt(e,t),selectNodeForward:()=>({state:e,dispatch:t})=>Pt(e,t),selectParentNode:()=>({state:e,dispatch:t})=>((e,t)=>{let u,{$from:n,to:i}=e.selection,h=n.sharedDepth(i);return 0!=h&&(u=n.before(h),t&&t(e.tr.setSelection(v.qv.create(e.doc,u))),!0)})(e,t),selectTextblockEnd:()=>({state:e,dispatch:t})=>Q(e,t),selectTextblockStart:()=>({state:e,dispatch:t})=>J(e,t),setContent:(e,t=!1,n={})=>({tr:i,editor:u,dispatch:h})=>{const{doc:T}=i,A=tn(e,u.schema,n);return h&&i.replaceWith(0,T.content.size,A).setMeta("preventUpdate",!t),!0},setMark:(e,t={})=>({tr:n,state:i,dispatch:u})=>{const{selection:h}=n,{empty:T,ranges:A}=h,B=m(e,i.schema);if(u)if(T){const N=Gn(i,B);n.addStoredMark(B.create(Gt(Gt({},N),t)))}else A.forEach(N=>{const Y=N.$from.pos,q=N.$to.pos;i.doc.nodesBetween(Y,q,(ht,It)=>{const $t=Math.max(It,Y),Vt=Math.min(It+ht.nodeSize,q);ht.marks.find(qt=>qt.type===B)?ht.marks.forEach(qt=>{B===qt.type&&n.addMark($t,Vt,B.create(Gt(Gt({},qt.attrs),t)))}):n.addMark($t,Vt,B.create(t))})});return function(e,t,n){var i;const{selection:u}=t;let h=null;if(x(u)&&(h=u.$cursor),h){const A=null!==(i=e.storedMarks)&&void 0!==i?i:h.marks();return!!n.isInSet(A)||!A.some(B=>B.type.excludes(n))}const{ranges:T}=u;return T.some(({$from:A,$to:B})=>{let N=0===A.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(A.pos,B.pos,(Y,q,ht)=>{if(N)return!1;if(Y.isInline){const It=!ht||ht.type.allowsMarkType(n),$t=!!n.isInSet(Y.marks)||!Y.marks.some(Vt=>Vt.type.excludes(n));N=It&&$t}return!N}),N})}(i,n,B)},setMeta:(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),setNode:(e,t={})=>({state:n,dispatch:i,chain:u})=>{const h=z(e,n.schema);return h.isTextblock?u().command(({commands:T})=>!!wt(h,t)(n)||T.clearNodes()).command(({state:T})=>wt(h,t)(T,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:i}=t,u=R(e,0,i.content.size),h=v.qv.create(i,u);t.setSelection(h)}return!0},setTextSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:i}=t,{from:u,to:h}="number"==typeof e?{from:e,to:e}:e,T=v.Bs.atStart(i).from,A=v.Bs.atEnd(i).to,B=R(u,T,A),N=R(h,T,A),Y=v.Bs.create(i,B,N);t.setSelection(Y)}return!0},sinkListItem:e=>({state:t,dispatch:n})=>function(e){return function(t,n){let{$from:i,$to:u}=t.selection,h=i.blockRange(u,N=>N.childCount>0&&N.firstChild.type==e);if(!h)return!1;let T=h.startIndex;if(0==T)return!1;let A=h.parent,B=A.child(T-1);if(B.type!=e)return!1;if(n){let N=B.lastChild&&B.lastChild.type==A.type,Y=P.HY.from(N?e.create():null),q=new P.p2(P.HY.from(e.create(null,P.HY.from(A.type.create(null,Y)))),N?3:1,0),ht=h.start,It=h.end;n(t.tr.step(new g.FC(ht-(N?3:1),It,ht,It,q,1,!0)).scrollIntoView())}return!0}}(z(e,t.schema))(t,n),splitBlock:({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:i,editor:u})=>{const{selection:h,doc:T}=t,{$from:A,$to:B}=h,Y=Ln(u.extensionManager.attributes,A.node().type.name,A.node().attrs);if(h instanceof v.qv&&h.node.isBlock)return!(!A.parentOffset||!(0,g.Ax)(T,A.pos)||(i&&(e&&qn(n,u.extensionManager.splittableMarks),t.split(A.pos).scrollIntoView()),0));if(!A.parent.isBlock)return!1;if(i){const q=B.parentOffset===B.parent.content.size;h instanceof v.Bs&&t.deleteSelection();const ht=0===A.depth?void 0:eo(A.node(-1).contentMatchAt(A.indexAfter(-1)));let It=q&&ht?[{type:ht,attrs:Y}]:void 0,$t=(0,g.Ax)(t.doc,t.mapping.map(A.pos),1,It);if(!It&&!$t&&(0,g.Ax)(t.doc,t.mapping.map(A.pos),1,ht?[{type:ht}]:void 0)&&($t=!0,It=ht?[{type:ht,attrs:Y}]:void 0),$t&&(t.split(t.mapping.map(A.pos),1,It),ht&&!q&&!A.parentOffset&&A.parent.type!==ht)){const Vt=t.mapping.map(A.before()),Xt=t.doc.resolve(Vt);A.node(-1).canReplaceWith(Xt.index(),Xt.index()+1,ht)&&t.setNodeMarkup(t.mapping.map(A.before()),ht)}e&&qn(n,u.extensionManager.splittableMarks),t.scrollIntoView()}return!0},splitListItem:e=>({tr:t,state:n,dispatch:i,editor:u})=>{var h;const T=z(e,n.schema),{$from:A,$to:B}=n.selection,N=n.selection.node;if(N&&N.isBlock||A.depth<2||!A.sameParent(B))return!1;const Y=A.node(-1);if(Y.type!==T)return!1;const q=u.extensionManager.attributes;if(0===A.parent.content.size&&A.node(-1).childCount===A.indexAfter(-1)){if(2===A.depth||A.node(-3).type!==T||A.index(-2)!==A.node(-2).childCount-1)return!1;if(i){let Xt=P.HY.empty;const qt=A.index(-1)?1:A.index(-2)?2:3;for(let bn=A.depth-qt;bn>=A.depth-3;bn-=1)Xt=P.HY.from(A.node(bn).copy(Xt));const Se=A.indexAfter(-1)<A.node(-2).childCount?1:A.indexAfter(-2)<A.node(-3).childCount?2:3,Ke=Ln(q,A.node().type.name,A.node().attrs),ae=(null===(h=T.contentMatch.defaultType)||void 0===h?void 0:h.createAndFill(Ke))||void 0;Xt=Xt.append(P.HY.from(T.createAndFill(null,ae)||void 0));const Ve=A.before(A.depth-(qt-1));t.replace(Ve,A.after(-Se),new P.p2(Xt,4-qt,0));let an=-1;t.doc.nodesBetween(Ve,t.doc.content.size,(bn,Bo)=>{if(an>-1)return!1;bn.isTextblock&&0===bn.content.size&&(an=Bo+1)}),an>-1&&t.setSelection(v.Bs.near(t.doc.resolve(an))),t.scrollIntoView()}return!0}const ht=B.pos===A.end()?Y.contentMatchAt(0).defaultType:null,It=Ln(q,Y.type.name,Y.attrs),$t=Ln(q,A.node().type.name,A.node().attrs);t.delete(A.pos,B.pos);const Vt=ht?[{type:T,attrs:It},{type:ht,attrs:$t}]:[{type:T,attrs:It}];if(!(0,g.Ax)(t.doc,A.pos,2))return!1;if(i){const{selection:Xt,storedMarks:qt}=n,{splittableMarks:Se}=u.extensionManager,Ke=qt||Xt.$to.parentOffset&&Xt.$from.marks();if(t.split(A.pos,2,Vt).scrollIntoView(),!Ke||!i)return!0;const ae=Ke.filter(Ve=>Se.includes(Ve.type.name));t.ensureMarks(ae)}return!0},toggleList:(e,t,n,i={})=>({editor:u,tr:h,state:T,dispatch:A,chain:B,commands:N,can:Y})=>{const{extensions:q,splittableMarks:ht}=u.extensionManager,It=z(e,T.schema),$t=z(t,T.schema),{selection:Vt,storedMarks:Xt}=T,{$from:qt,$to:Se}=Vt,Ke=qt.blockRange(Se),ae=Xt||Vt.$to.parentOffset&&Vt.$from.marks();if(!Ke)return!1;const Ve=wn(an=>pn(an.type.name,q))(Vt);if(Ke.depth>=1&&Ve&&Ke.depth-Ve.depth<=1){if(Ve.node.type===It)return N.liftListItem($t);if(pn(Ve.node.type.name,q)&&It.validContent(Ve.node.content)&&A)return B().command(()=>(h.setNodeMarkup(Ve.pos,It),!0)).command(()=>_n(h,It)).command(()=>Wn(h,It)).run()}return n&&ae&&A?B().command(()=>{const an=Y().wrapInList(It,i),bn=ae.filter(Bo=>ht.includes(Bo.type.name));return h.ensureMarks(bn),!!an||N.clearNodes()}).wrapInList(It,i).command(()=>_n(h,It)).command(()=>Wn(h,It)).run():B().command(()=>!!Y().wrapInList(It,i)||N.clearNodes()).wrapInList(It,i).command(()=>_n(h,It)).command(()=>Wn(h,It)).run()},toggleMark:(e,t={},n={})=>({state:i,commands:u})=>{const{extendEmptyMarkRange:h=!1}=n,T=m(e,i.schema);return En(i,T,t)?u.unsetMark(T,{extendEmptyMarkRange:h}):u.setMark(T,t)},toggleNode:(e,t,n={})=>({state:i,commands:u})=>{const h=z(e,i.schema),T=z(t,i.schema);return pe(i,h,n)?u.setNode(T):u.setNode(h,n)},toggleWrap:(e,t={})=>({state:n,commands:i})=>{const u=z(e,n.schema);return pe(n,u,t)?i.lift(u):i.wrapIn(u,t)},undoInputRule:()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let i=0;i<n.length;i+=1){const u=n[i];let h;if(u.spec.isInputRules&&(h=u.getState(e))){if(t){const T=e.tr,A=h.transform;for(let B=A.steps.length-1;B>=0;B-=1)T.step(A.steps[B].invert(A.docs[B]));if(h.text){const B=T.doc.resolve(h.from).marks();T.replaceWith(h.from,h.to,e.schema.text(h.text,B))}else T.delete(h.from,h.to)}return!0}}return!1},unsetAllMarks:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:i,ranges:u}=n;return i||t&&u.forEach(h=>{e.removeMark(h.$from.pos,h.$to.pos)}),!0},unsetMark:(e,t={})=>({tr:n,state:i,dispatch:u})=>{var h;const{extendEmptyMarkRange:T=!1}=t,{selection:A}=n,B=m(e,i.schema),{$from:N,empty:Y,ranges:q}=A;if(!u)return!0;if(Y&&T){let{from:ht,to:It}=A;const $t=null===(h=N.marks().find(Xt=>Xt.type===B))||void 0===h?void 0:h.attrs,Vt=C(N,B,$t);Vt&&(ht=Vt.from,It=Vt.to),n.removeMark(ht,It,B)}else q.forEach(ht=>{n.removeMark(ht.$from.pos,ht.$to.pos,B)});return n.removeStoredMark(B),!0},updateAttributes:(e,t={})=>({tr:n,state:i,dispatch:u})=>{let h=null,T=null;const A=ln("string"==typeof e?e:e.name,i.schema);return!!A&&("node"===A&&(h=z(e,i.schema)),"mark"===A&&(T=m(e,i.schema)),u&&n.selection.ranges.forEach(B=>{const N=B.$from.pos,Y=B.$to.pos;i.doc.nodesBetween(N,Y,(q,ht)=>{h&&h===q.type&&n.setNodeMarkup(ht,void 0,Gt(Gt({},q.attrs),t)),T&&q.marks.length&&q.marks.forEach(It=>{if(T===It.type){const $t=Math.max(ht,N),Vt=Math.min(ht+q.nodeSize,Y);n.addMark($t,Vt,T.create(Gt(Gt({},It.attrs),t)))}})})}),!0)},wrapIn:(e,t={})=>({state:n,dispatch:i})=>function(e,t=null){return function(n,i){let{$from:u,$to:h}=n.selection,T=u.blockRange(h),A=T&&(0,g.nd)(T,e,t);return!!A&&(i&&i(n.tr.wrap(T,A).scrollIntoView()),!0)}}(z(e,n.schema),t)(n,i),wrapInList:(e,t={})=>({state:n,dispatch:i})=>function(e,t=null){return function(n,i){let{$from:u,$to:h}=n.selection,T=u.blockRange(h),A=!1,B=T;if(!T)return!1;if(T.depth>=2&&u.node(T.depth-1).type.compatibleContent(e)&&0==T.startIndex){if(0==u.index(T.depth-1))return!1;let Y=n.doc.resolve(T.start-2);B=new P.Ts(Y,Y,T.depth),T.endIndex<T.parent.childCount&&(T=new P.Ts(u,n.doc.resolve(h.end(T.depth)),T.depth)),A=!0}let N=(0,g.nd)(B,e,t,T);return!!N&&(i&&i(function(e,t,n,i,u){let h=P.HY.empty;for(let Y=n.length-1;Y>=0;Y--)h=P.HY.from(n[Y].type.create(n[Y].attrs,h));e.step(new g.FC(t.start-(i?2:0),t.end,t.start,t.end,new P.p2(h,0,0),n.length,!0));let T=0;for(let Y=0;Y<n.length;Y++)n[Y].type==u&&(T=Y+1);let A=n.length-T,B=t.start+n.length-(i?2:0),N=t.parent;for(let Y=t.startIndex,q=t.endIndex,ht=!0;Y<q;Y++,ht=!1)!ht&&(0,g.Ax)(e.doc,B,A)&&(e.split(B,A),B+=2*A),B+=N.child(Y).nodeSize;return e}(n.tr,T,N,A,e).scrollIntoView()),!0)}}(z(e,n.schema),t)(n,i)});const So=ce.create({name:"commands",addCommands:()=>Gt({},Po)}),ko=ce.create({name:"editable",addProseMirrorPlugins(){return[new v.Sy({key:new v.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Io=ce.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new v.Sy({key:new v.H$("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const i=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1},blur:(t,n)=>{e.isFocused=!1;const i=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1}}}})]}}),co=ce.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:T})=>[()=>T.undoInputRule(),()=>T.command(({tr:A})=>{const{selection:B,doc:N}=A,{empty:Y,$anchor:q}=B,{pos:ht,parent:It}=q,$t=v.Y1.atStart(N).from===ht;return!(!(Y&&$t&&It.type.isTextblock)||It.textContent.length)&&T.clearNodes()}),()=>T.deleteSelection(),()=>T.joinBackward(),()=>T.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:T})=>[()=>T.deleteSelection(),()=>T.deleteCurrentNode(),()=>T.joinForward(),()=>T.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:T})=>[()=>T.newlineInCode(),()=>T.createParagraphNear(),()=>T.liftEmptyBlock(),()=>T.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},u=Gt({},i),h=me(Gt({},i),{"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return W()||De()?h:u},addProseMirrorPlugins(){return[new v.Sy({key:new v.H$("clearDocument"),appendTransaction:(e,t,n)=>{if(!e.some($t=>$t.docChanged)||t.doc.eq(n.doc))return;const{empty:u,from:h,to:T}=t.selection,A=v.Y1.atStart(t.doc).from,B=v.Y1.atEnd(t.doc).to;if(u||h!==A||T!==B||0!==n.doc.textBetween(0,n.doc.content.size," "," ").length)return;const q=n.tr,ht=gt({state:n,transaction:q}),{commands:It}=new b({editor:this.editor,state:ht});return It.clearNodes(),q.steps.length?q:void 0}})]}}),wo=ce.create({name:"tabindex",addProseMirrorPlugins(){return[new v.Sy({key:new v.H$("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var uo=Object.freeze({__proto__:null,ClipboardTextSerializer:cn,Commands:So,Editable:ko,FocusEvents:Io,Keymap:co,Tabindex:wo});function po(e,t){const n=document.querySelector("style[data-tiptap-style]");if(null!==n)return n;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}class Ko extends class{constructor(){this.callbacks={}}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),this}emit(t,...n){const i=this.callbacks[t];return i&&i.forEach(u=>u.apply(this,n)),this}off(t,n){const i=this.callbacks[t];return i&&(n?this.callbacks[t]=i.filter(u=>u!==n):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=po('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(t={}){this.options=Gt(Gt({},this.options),t),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,n=!0){this.setOptions({editable:t}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,n){const i=U(n)?n(t,[...this.state.plugins]):[...this.state.plugins,t],u=this.state.reconfigure({plugins:i});this.view.updateState(u)}unregisterPlugin(t){if(this.isDestroyed)return;const n="string"==typeof t?`${t}$`:t.key,i=this.state.reconfigure({plugins:this.state.plugins.filter(u=>!u.key.startsWith(n))});this.view.updateState(i)}createExtensionManager(){const n=[...this.options.enableCoreExtensions?Object.values(uo):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(null==i?void 0:i.type));this.extensionManager=new oe(n,this)}createCommandManager(){this.commandManager=new b({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=tn(this.options.content,this.schema,this.options.parseOptions),n=Z(t,this.options.autofocus);this.view=new l.tk(this.options.element,me(Gt({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:v.yy.create({doc:t,selection:n||void 0})}));const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach(T=>{var A;return null===(A=this.capturedTransaction)||void 0===A?void 0:A.step(T)}):void(this.capturedTransaction=t);const n=this.state.apply(t),i=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),i&&this.emit("selectionUpdate",{editor:this,transaction:t});const u=t.getMeta("focus"),h=t.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:t}),h&&this.emit("blur",{editor:this,event:h.event,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return ro(this.state,t)}isActive(t,n){return $n(this.state,"string"==typeof t?t:null,"string"==typeof t?n:t)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Fn(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:n="\n\n",textSerializers:i={}}=t||{};return Jn(this.state.doc,{blockSeparator:n,textSerializers:Gt(Gt({},We(this.schema)),i)})}get isEmpty(){return Zn(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}}function Jo(e){return new we({find:e.find,handler:({state:t,range:n,match:i})=>{const u=a(e.getAttributes,void 0,i);if(!1===u||null===u)return null;const{tr:h}=t,T=i[i.length-1],A=i[0];let B=n.to;if(T){const N=A.search(/\S/),Y=n.from+A.indexOf(T),q=Y+T.length;if(Xn(n.from,n.to,t.doc).filter(It=>It.mark.type.excluded.find(Vt=>Vt===e.type&&Vt!==It.mark.type)).filter(It=>It.to>Y).length)return null;q<n.to&&h.delete(q,n.to),Y>n.from&&h.delete(n.from+N,Y),B=n.from+N+T.length,h.addMark(n.from+N,B,e.type.create(u||{})),h.removeStoredMark(e.type)}}})}function $o(e){return new we({find:e.find,handler:({state:t,range:n,match:i})=>{const u=a(e.getAttributes,void 0,i)||{},{tr:h}=t,T=n.from;let A=n.to;if(i[1]){let N=T+i[0].lastIndexOf(i[1]);N>A?N=A:A=N+i[1].length,h.insertText(i[0][i[0].length-1],T+i[0].length-1),h.replaceWith(N,A,e.type.create(u))}else i[0]&&h.replaceWith(T,A,e.type.create(u))}})}function Ro(e){return new we({find:e.find,handler:({state:t,range:n,match:i})=>{const u=t.doc.resolve(n.from),h=a(e.getAttributes,void 0,i)||{};if(!u.node(-1).canReplaceWith(u.index(-1),u.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,h)}})}function ho(e){return new we({find:e.find,handler:({state:t,range:n,match:i})=>{let u=e.replace,h=n.from;const T=n.to;if(i[1]){const A=i[0].lastIndexOf(i[1]);u+=i[0].slice(A+i[1].length),h+=A;const B=h-T;B>0&&(u=i[0].slice(A-B,A)+u,h=T)}t.tr.insertText(u,h,T)}})}function fo(e){return new we({find:e.find,handler:({state:t,range:n,match:i,chain:u})=>{const h=a(e.getAttributes,void 0,i)||{},T=t.tr.delete(n.from,n.to),B=T.doc.resolve(n.from).blockRange(),N=B&&(0,g.nd)(B,e.type,h);if(!N)return null;if(T.wrap(B,N),e.keepMarks&&e.editor){const{selection:q,storedMarks:ht}=t,{splittableMarks:It}=e.editor.extensionManager,$t=ht||q.$to.parentOffset&&q.$from.marks();if($t){const Vt=$t.filter(Xt=>It.includes(Xt.type.name));T.ensureMarks(Vt)}}if(e.keepAttributes){const q="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";u().updateAttributes(q,h).run()}const Y=T.doc.resolve(n.from-1).nodeBefore;Y&&Y.type===e.type&&(0,g.Mn)(T.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(i,Y))&&T.join(n.from-1)}})}class Nn{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Gt(Gt({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(k(this,"addOptions",{name:this.name}))),this.storage=a(k(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Nn(t)}configure(t={}){const n=this.extend();return n.options=le(this.options,t),n.storage=a(k(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new Nn(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=a(k(n,"addOptions",{name:n.name})),n.storage=a(k(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:t,mark:n}){const{tr:i}=t.state,u=t.state.selection.$from;if(u.pos===u.end()){const T=u.marks();if(!T.find(N=>(null==N?void 0:N.type.name)===n.name))return!1;const B=T.find(N=>(null==N?void 0:N.type.name)===n.name);return B&&i.removeStoredMark(B),i.insertText(" ",u.pos),t.view.dispatch(i),!0}return!1}}class jn{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Gt(Gt({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(k(this,"addOptions",{name:this.name}))),this.storage=a(k(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new jn(t)}configure(t={}){const n=this.extend();return n.options=le(this.options,t),n.storage=a(k(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new jn(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=a(k(n,"addOptions",{name:n.name})),n.storage=a(k(n,"addStorage",{name:n.name,options:n.options})),n}}class mo{constructor(t,n,i){this.isDragging=!1,this.component=t,this.editor=n.editor,this.options=Gt({stopEvent:null,ignoreMutation:null},i),this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var n,i,u,h,T,A,B;const{view:N}=this.editor,Y=t.target,q=3===Y.nodeType?null===(n=Y.parentElement)||void 0===n?void 0:n.closest("[data-drag-handle]"):Y.closest("[data-drag-handle]");if(!this.dom||(null===(i=this.contentDOM)||void 0===i?void 0:i.contains(Y))||!q)return;let ht=0,It=0;if(this.dom!==q){const Xt=this.dom.getBoundingClientRect(),qt=q.getBoundingClientRect(),Se=null!==(u=t.offsetX)&&void 0!==u?u:null===(h=t.nativeEvent)||void 0===h?void 0:h.offsetX,Ke=null!==(T=t.offsetY)&&void 0!==T?T:null===(A=t.nativeEvent)||void 0===A?void 0:A.offsetY;ht=qt.x-Xt.x+Se,It=qt.y-Xt.y+Ke}null===(B=t.dataTransfer)||void 0===B||B.setDragImage(this.dom,ht,It);const $t=v.qv.create(N.state.doc,this.getPos()),Vt=N.state.tr.setSelection($t);N.dispatch(Vt)}stopEvent(t){var n;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:t});const i=t.target;if(!this.dom.contains(i)||(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(i)))return!1;const h=t.type.startsWith("drag"),T="drop"===t.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(i.tagName)||i.isContentEditable)&&!T&&!h)return!0;const{isEditable:B}=this.editor,{isDragging:N}=this,Y=!!this.node.type.spec.draggable,q=v.qv.isSelectable(this.node),ht="copy"===t.type,It="paste"===t.type,$t="cut"===t.type,Vt="mousedown"===t.type;if(!Y&&q&&h&&t.preventDefault(),Y&&h&&!N)return t.preventDefault(),!1;if(Y&&B&&!N&&Vt){const Xt=i.closest("[data-drag-handle]");Xt&&(this.dom===Xt||this.dom.contains(Xt))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(N||T||ht||It||$t||Vt&&q)}ignoreMutation(t){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:t}):!(!this.node.isLeaf&&!this.node.isAtom&&("selection"===t.type||this.dom.contains(t.target)&&"childList"===t.type&&W()&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(i=>i.isContentEditable)||(this.contentDOM!==t.target||"attributes"!==t.type)&&this.contentDOM.contains(t.target))))}updateAttributes(t){this.editor.commands.command(({tr:n})=>{const i=this.getPos();return n.setNodeMarkup(i,void 0,Gt(Gt({},this.node.attrs),t)),!0})}deleteNode(){const t=this.getPos();this.editor.commands.deleteRange({from:t,to:t+this.node.nodeSize})}}function Lo(e){return new Tt({find:e.find,handler:({state:t,range:n,match:i})=>{const u=a(e.getAttributes,void 0,i);if(!1===u||null===u)return null;const{tr:h}=t,T=i[i.length-1],A=i[0];let B=n.to;if(T){const N=A.search(/\S/),Y=n.from+A.indexOf(T),q=Y+T.length;if(Xn(n.from,n.to,t.doc).filter(It=>It.mark.type.excluded.find(Vt=>Vt===e.type&&Vt!==It.mark.type)).filter(It=>It.to>Y).length)return null;q<n.to&&h.delete(q,n.to),Y>n.from&&h.delete(n.from+N,Y),B=n.from+N+T.length,h.addMark(n.from+N,B,e.type.create(u||{})),h.removeStoredMark(e.type)}}})}function go(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function r(e){return"string"==typeof e}function o(e){return new Tt({find:e.find,handler({match:t,chain:n,range:i}){const u=a(e.getAttributes,void 0,t);if(!1===u||null===u)return null;t.input&&n().deleteRange(i).insertContentAt(i.from,{type:e.type.name,attrs:u})}})}function s(e){return new Tt({find:e.find,handler:({state:t,range:n,match:i})=>{let u=e.replace,h=n.from;const T=n.to;if(i[1]){const A=i[0].lastIndexOf(i[1]);u+=i[0].slice(A+i[1].length),h+=A;const B=h-T;B>0&&(u=i[0].slice(A-B,A)+u,h=T)}t.tr.insertText(u,h,T)}})}class d{constructor(t){this.transaction=t,this.currentStep=this.transaction.steps.length}map(t){let n=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((u,h)=>{const T=h.getMap().mapResult(u);return T.deleted&&(n=!0),T.pos},t),deleted:n}}}},44632:(Yt,vt,c)=>{c.r(vt),c.d(vt,{Image:()=>y,default:()=>y,inputRegex:()=>l});var v=c(12867);const l=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,y=v.Node.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:P}){return["img",(0,v.mergeAttributes)(this.options.HTMLAttributes,P)]},addCommands(){return{setImage:P=>({commands:g})=>g.insertContent({type:this.name,attrs:P})}},addInputRules(){return[(0,v.nodeInputRule)({find:l,type:this.type,getAttributes:P=>{const[,,g,ot,H]=P;return{src:ot,alt:g,title:H}}})]}})},84402:(Yt,vt,c)=>{c.r(vt),c.d(vt,{TextStyle:()=>l,default:()=>l});var v=c(12867);const l=v.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:y=>!!y.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:y}){return["span",(0,v.mergeAttributes)(this.options.HTMLAttributes,y),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:y,commands:P})=>{const g=(0,v.getMarkAttributes)(y,this.type);return!!Object.entries(g).some(([,H])=>!!H)||P.unsetMark(this.name)}}}})},70768:(Yt,vt,c)=>{c.d(vt,{$:()=>Pt,h:()=>St});for(var v={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},y="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),g=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),ot="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),H=g||y&&+y[1]<57,X=0;X<10;X++)v[48+X]=v[96+X]=String(X);for(X=1;X<=24;X++)v[X+111]="F"+X;for(X=65;X<=90;X++)v[X]=String.fromCharCode(X+32),l[X]=String.fromCharCode(X);for(var et in v)l.hasOwnProperty(et)||(l[et]=v[et]);var dt=c(62463);const Mt="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function rt(Dt){let F,mt,j,At,pt=Dt.split(/-(?!$)/),tt=pt[pt.length-1];"Space"==tt&&(tt=" ");for(let kt=0;kt<pt.length-1;kt++){let yt=pt[kt];if(/^(cmd|meta|m)$/i.test(yt))At=!0;else if(/^a(lt)?$/i.test(yt))F=!0;else if(/^(c|ctrl|control)$/i.test(yt))mt=!0;else if(/^s(hift)?$/i.test(yt))j=!0;else{if(!/^mod$/i.test(yt))throw new Error("Unrecognized modifier name: "+yt);Mt?At=!0:mt=!0}}return F&&(tt="Alt-"+tt),mt&&(tt="Ctrl-"+tt),At&&(tt="Meta-"+tt),j&&(tt="Shift-"+tt),tt}function Ot(Dt,pt,tt=!0){return pt.altKey&&(Dt="Alt-"+Dt),pt.ctrlKey&&(Dt="Ctrl-"+Dt),pt.metaKey&&(Dt="Meta-"+Dt),tt&&pt.shiftKey&&(Dt="Shift-"+Dt),Dt}function St(Dt){return new dt.Sy({props:{handleKeyDown:Pt(Dt)}})}function Pt(Dt){let pt=function(Dt){let pt=Object.create(null);for(let tt in Dt)pt[rt(tt)]=Dt[tt];return pt}(Dt);return function(tt,F){let j,mt=function(Dt){var tt=!(H&&(Dt.ctrlKey||Dt.altKey||Dt.metaKey)||ot&&Dt.shiftKey&&Dt.key&&1==Dt.key.length||"Unidentified"==Dt.key)&&Dt.key||(Dt.shiftKey?l:v)[Dt.keyCode]||Dt.key||"Unidentified";return"Esc"==tt&&(tt="Escape"),"Del"==tt&&(tt="Delete"),"Left"==tt&&(tt="ArrowLeft"),"Up"==tt&&(tt="ArrowUp"),"Right"==tt&&(tt="ArrowRight"),"Down"==tt&&(tt="ArrowDown"),tt}(F),At=pt[Ot(mt,F)];if(At&&At(tt.state,tt.dispatch,tt))return!0;if(1==mt.length&&" "!=mt){if(F.shiftKey){let kt=pt[Ot(mt,F,!1)];if(kt&&kt(tt.state,tt.dispatch,tt))return!0}if((F.shiftKey||F.altKey||F.metaKey||mt.charCodeAt(0)>127)&&(j=v[F.keyCode])&&j!=mt){let kt=pt[Ot(j,F)];if(kt&&kt(tt.state,tt.dispatch,tt))return!0}}return!1}}},77346:(Yt,vt,c)=>{function v(U){this.content=U}c.d(vt,{aw:()=>Me,PW:()=>z,HY:()=>g,vc:()=>et,ZU:()=>ve,NB:()=>ut,Ts:()=>Ht,e4:()=>_t,V_:()=>Pe,p2:()=>dt}),v.prototype={constructor:v,find:function(U){for(var a=0;a<this.content.length;a+=2)if(this.content[a]===U)return a;return-1},get:function(U){var a=this.find(U);return-1==a?void 0:this.content[a+1]},update:function(U,a,p){var E=p&&p!=U?this.remove(p):this,D=E.find(U),I=E.content.slice();return-1==D?I.push(p||U,a):(I[D+1]=a,p&&(I[D]=p)),new v(I)},remove:function(U){var a=this.find(U);if(-1==a)return this;var p=this.content.slice();return p.splice(a,2),new v(p)},addToStart:function(U,a){return new v([U,a].concat(this.remove(U).content))},addToEnd:function(U,a){var p=this.remove(U).content.slice();return p.push(U,a),new v(p)},addBefore:function(U,a,p){var E=this.remove(a),D=E.content.slice(),I=E.find(U);return D.splice(-1==I?D.length:I,0,a,p),new v(D)},forEach:function(U){for(var a=0;a<this.content.length;a+=2)U(this.content[a],this.content[a+1])},prepend:function(U){return(U=v.from(U)).size?new v(U.content.concat(this.subtract(U).content)):this},append:function(U){return(U=v.from(U)).size?new v(this.subtract(U).content.concat(U.content)):this},subtract:function(U){var a=this;U=v.from(U);for(var p=0;p<U.content.length;p+=2)a=a.remove(U.content[p]);return a},toObject:function(){var U={};return this.forEach(function(a,p){U[a]=p}),U},get size(){return this.content.length>>1}},v.from=function(U){if(U instanceof v)return U;var a=[];if(U)for(var p in U)a.push(p,U[p]);return new v(a)};const l=v;function y(U,a,p){for(let E=0;;E++){if(E==U.childCount||E==a.childCount)return U.childCount==a.childCount?null:p;let D=U.child(E),I=a.child(E);if(D!=I){if(!D.sameMarkup(I))return p;if(D.isText&&D.text!=I.text){for(let K=0;D.text[K]==I.text[K];K++)p++;return p}if(D.content.size||I.content.size){let K=y(D.content,I.content,p+1);if(null!=K)return K}p+=D.nodeSize}else p+=D.nodeSize}}function P(U,a,p,E){for(let D=U.childCount,I=a.childCount;;){if(0==D||0==I)return D==I?null:{a:p,b:E};let K=U.child(--D),at=a.child(--I),Lt=K.nodeSize;if(K!=at){if(!K.sameMarkup(at))return{a:p,b:E};if(K.isText&&K.text!=at.text){let te=0,ee=Math.min(K.text.length,at.text.length);for(;te<ee&&K.text[K.text.length-te-1]==at.text[at.text.length-te-1];)te++,p--,E--;return{a:p,b:E}}if(K.content.size||at.content.size){let te=P(K.content,at.content,p-1,E-1);if(te)return te}p-=Lt,E-=Lt}else p-=Lt,E-=Lt}}class g{constructor(a,p){if(this.content=a,this.size=p||0,null==p)for(let E=0;E<a.length;E++)this.size+=a[E].nodeSize}nodesBetween(a,p,E,D=0,I){for(let K=0,at=0;at<p;K++){let Lt=this.content[K],te=at+Lt.nodeSize;if(te>a&&!1!==E(Lt,D+at,I||null,K)&&Lt.content.size){let ee=at+1;Lt.nodesBetween(Math.max(0,a-ee),Math.min(Lt.content.size,p-ee),E,D+ee)}at=te}}descendants(a){this.nodesBetween(0,this.size,a)}textBetween(a,p,E,D){let I="",K=!0;return this.nodesBetween(a,p,(at,Lt)=>{at.isText?(I+=at.text.slice(Math.max(a,Lt)-Lt,p-Lt),K=!E):at.isLeaf?(D?I+="function"==typeof D?D(at):D:at.type.spec.leafText&&(I+=at.type.spec.leafText(at)),K=!E):!K&&at.isBlock&&(I+=E,K=!0)},0),I}append(a){if(!a.size)return this;if(!this.size)return a;let p=this.lastChild,E=a.firstChild,D=this.content.slice(),I=0;for(p.isText&&p.sameMarkup(E)&&(D[D.length-1]=p.withText(p.text+E.text),I=1);I<a.content.length;I++)D.push(a.content[I]);return new g(D,this.size+a.size)}cut(a,p=this.size){if(0==a&&p==this.size)return this;let E=[],D=0;if(p>a)for(let I=0,K=0;K<p;I++){let at=this.content[I],Lt=K+at.nodeSize;Lt>a&&((K<a||Lt>p)&&(at=at.isText?at.cut(Math.max(0,a-K),Math.min(at.text.length,p-K)):at.cut(Math.max(0,a-K-1),Math.min(at.content.size,p-K-1))),E.push(at),D+=at.nodeSize),K=Lt}return new g(E,D)}cutByIndex(a,p){return a==p?g.empty:0==a&&p==this.content.length?this:new g(this.content.slice(a,p))}replaceChild(a,p){let E=this.content[a];if(E==p)return this;let D=this.content.slice(),I=this.size+p.nodeSize-E.nodeSize;return D[a]=p,new g(D,I)}addToStart(a){return new g([a].concat(this.content),this.size+a.nodeSize)}addToEnd(a){return new g(this.content.concat(a),this.size+a.nodeSize)}eq(a){if(this.content.length!=a.content.length)return!1;for(let p=0;p<this.content.length;p++)if(!this.content[p].eq(a.content[p]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(a){let p=this.content[a];if(!p)throw new RangeError("Index "+a+" out of range for "+this);return p}maybeChild(a){return this.content[a]||null}forEach(a){for(let p=0,E=0;p<this.content.length;p++){let D=this.content[p];a(D,E,p),E+=D.nodeSize}}findDiffStart(a,p=0){return y(this,a,p)}findDiffEnd(a,p=this.size,E=a.size){return P(this,a,p,E)}findIndex(a,p=-1){if(0==a)return H(0,a);if(a==this.size)return H(this.content.length,a);if(a>this.size||a<0)throw new RangeError(`Position ${a} outside of fragment (${this})`);for(let E=0,D=0;;E++){let K=D+this.child(E).nodeSize;if(K>=a)return K==a||p>0?H(E+1,K):H(E,D);D=K}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(a=>a.toJSON()):null}static fromJSON(a,p){if(!p)return g.empty;if(!Array.isArray(p))throw new RangeError("Invalid input for Fragment.fromJSON");return new g(p.map(a.nodeFromJSON))}static fromArray(a){if(!a.length)return g.empty;let p,E=0;for(let D=0;D<a.length;D++){let I=a[D];E+=I.nodeSize,D&&I.isText&&a[D-1].sameMarkup(I)?(p||(p=a.slice(0,D)),p[p.length-1]=I.withText(p[p.length-1].text+I.text)):p&&p.push(I)}return new g(p||a,E)}static from(a){if(!a)return g.empty;if(a instanceof g)return a;if(Array.isArray(a))return this.fromArray(a);if(a.attrs)return new g([a],a.nodeSize);throw new RangeError("Can not convert "+a+" to a Fragment"+(a.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}g.empty=new g([],0);const ot={index:0,offset:0};function H(U,a){return ot.index=U,ot.offset=a,ot}function X(U,a){if(U===a)return!0;if(!U||"object"!=typeof U||!a||"object"!=typeof a)return!1;let p=Array.isArray(U);if(Array.isArray(a)!=p)return!1;if(p){if(U.length!=a.length)return!1;for(let E=0;E<U.length;E++)if(!X(U[E],a[E]))return!1}else{for(let E in U)if(!(E in a)||!X(U[E],a[E]))return!1;for(let E in a)if(!(E in U))return!1}return!0}let et=(()=>{class U{constructor(p,E){this.type=p,this.attrs=E}addToSet(p){let E,D=!1;for(let I=0;I<p.length;I++){let K=p[I];if(this.eq(K))return p;if(this.type.excludes(K.type))E||(E=p.slice(0,I));else{if(K.type.excludes(this.type))return p;!D&&K.type.rank>this.type.rank&&(E||(E=p.slice(0,I)),E.push(this),D=!0),E&&E.push(K)}}return E||(E=p.slice()),D||E.push(this),E}removeFromSet(p){for(let E=0;E<p.length;E++)if(this.eq(p[E]))return p.slice(0,E).concat(p.slice(E+1));return p}isInSet(p){for(let E=0;E<p.length;E++)if(this.eq(p[E]))return!0;return!1}eq(p){return this==p||this.type==p.type&&X(this.attrs,p.attrs)}toJSON(){let p={type:this.type.name};for(let E in this.attrs){p.attrs=this.attrs;break}return p}static fromJSON(p,E){if(!E)throw new RangeError("Invalid input for Mark.fromJSON");let D=p.marks[E.type];if(!D)throw new RangeError(`There is no mark type ${E.type} in this schema`);return D.create(E.attrs)}static sameSet(p,E){if(p==E)return!0;if(p.length!=E.length)return!1;for(let D=0;D<p.length;D++)if(!p[D].eq(E[D]))return!1;return!0}static setFrom(p){if(!p||Array.isArray(p)&&0==p.length)return U.none;if(p instanceof U)return[p];let E=p.slice();return E.sort((D,I)=>D.type.rank-I.type.rank),E}}return U.none=[],U})();class _t extends Error{}class dt{constructor(a,p,E){this.content=a,this.openStart=p,this.openEnd=E}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(a,p){let E=rt(this.content,a+this.openStart,p);return E&&new dt(E,this.openStart,this.openEnd)}removeBetween(a,p){return new dt(Mt(this.content,a+this.openStart,p+this.openStart),this.openStart,this.openEnd)}eq(a){return this.content.eq(a.content)&&this.openStart==a.openStart&&this.openEnd==a.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let a={content:this.content.toJSON()};return this.openStart>0&&(a.openStart=this.openStart),this.openEnd>0&&(a.openEnd=this.openEnd),a}static fromJSON(a,p){if(!p)return dt.empty;let E=p.openStart||0,D=p.openEnd||0;if("number"!=typeof E||"number"!=typeof D)throw new RangeError("Invalid input for Slice.fromJSON");return new dt(g.fromJSON(a,p.content),E,D)}static maxOpen(a,p=!0){let E=0,D=0;for(let I=a.firstChild;I&&!I.isLeaf&&(p||!I.type.spec.isolating);I=I.firstChild)E++;for(let I=a.lastChild;I&&!I.isLeaf&&(p||!I.type.spec.isolating);I=I.lastChild)D++;return new dt(a,E,D)}}function Mt(U,a,p){let{index:E,offset:D}=U.findIndex(a),I=U.maybeChild(E),{index:K,offset:at}=U.findIndex(p);if(D==a||I.isText){if(at!=p&&!U.child(K).isText)throw new RangeError("Removing non-flat range");return U.cut(0,a).append(U.cut(p))}if(E!=K)throw new RangeError("Removing non-flat range");return U.replaceChild(E,I.copy(Mt(I.content,a-D-1,p-D-1)))}function rt(U,a,p,E){let{index:D,offset:I}=U.findIndex(a),K=U.maybeChild(D);if(I==a||K.isText)return E&&!E.canReplace(D,D,p)?null:U.cut(0,a).append(p).append(U.cut(a));let at=rt(K.content,a-I-1,p);return at&&U.replaceChild(D,K.copy(at))}function ft(U,a,p){if(p.openStart>U.depth)throw new _t("Inserted content deeper than insertion position");if(U.depth-p.openStart!=a.depth-p.openEnd)throw new _t("Inconsistent open depths");return Ot(U,a,p,0)}function Ot(U,a,p,E){let D=U.index(E),I=U.node(E);if(D==a.index(E)&&E<U.depth-p.openStart){let K=Ot(U,a,p,E+1);return I.copy(I.content.replaceChild(D,K))}if(p.content.size){if(p.openStart||p.openEnd||U.depth!=E||a.depth!=E){let{start:K,end:at}=function(U,a){let p=a.depth-U.openStart,D=a.node(p).copy(U.content);for(let I=p-1;I>=0;I--)D=a.node(I).copy(g.from(D));return{start:D.resolveNoCache(U.openStart+p),end:D.resolveNoCache(D.content.size-U.openEnd-p)}}(p,U);return tt(I,F(U,K,at,a,E))}{let K=U.parent,at=K.content;return tt(K,at.cut(0,U.parentOffset).append(p.content).append(at.cut(a.parentOffset)))}}return tt(I,mt(U,a,E))}function St(U,a){if(!a.type.compatibleContent(U.type))throw new _t("Cannot join "+a.type.name+" onto "+U.type.name)}function Pt(U,a,p){let E=U.node(p);return St(E,a.node(p)),E}function Dt(U,a){let p=a.length-1;p>=0&&U.isText&&U.sameMarkup(a[p])?a[p]=U.withText(a[p].text+U.text):a.push(U)}function pt(U,a,p,E){let D=(a||U).node(p),I=0,K=a?a.index(p):D.childCount;U&&(I=U.index(p),U.depth>p?I++:U.textOffset&&(Dt(U.nodeAfter,E),I++));for(let at=I;at<K;at++)Dt(D.child(at),E);a&&a.depth==p&&a.textOffset&&Dt(a.nodeBefore,E)}function tt(U,a){return U.type.checkContent(a),U.copy(a)}function F(U,a,p,E,D){let I=U.depth>D&&Pt(U,a,D+1),K=E.depth>D&&Pt(p,E,D+1),at=[];return pt(null,U,D,at),I&&K&&a.index(D)==p.index(D)?(St(I,K),Dt(tt(I,F(U,a,p,E,D+1)),at)):(I&&Dt(tt(I,mt(U,a,D+1)),at),pt(a,p,D,at),K&&Dt(tt(K,mt(p,E,D+1)),at)),pt(E,null,D,at),new g(at)}function mt(U,a,p){let E=[];return pt(null,U,p,E),U.depth>p&&Dt(tt(Pt(U,a,p+1),mt(U,a,p+1)),E),pt(a,null,p,E),new g(E)}dt.empty=new dt(g.empty,0,0);class At{constructor(a,p,E){this.pos=a,this.path=p,this.parentOffset=E,this.depth=p.length/3-1}resolveDepth(a){return null==a?this.depth:a<0?this.depth+a:a}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(a){return this.path[3*this.resolveDepth(a)]}index(a){return this.path[3*this.resolveDepth(a)+1]}indexAfter(a){return a=this.resolveDepth(a),this.index(a)+(a!=this.depth||this.textOffset?1:0)}start(a){return 0==(a=this.resolveDepth(a))?0:this.path[3*a-1]+1}end(a){return a=this.resolveDepth(a),this.start(a)+this.node(a).content.size}before(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position before the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]}after(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position after the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]+this.path[3*a].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let a=this.parent,p=this.index(this.depth);if(p==a.childCount)return null;let E=this.pos-this.path[this.path.length-1],D=a.child(p);return E?a.child(p).cut(E):D}get nodeBefore(){let a=this.index(this.depth),p=this.pos-this.path[this.path.length-1];return p?this.parent.child(a).cut(0,p):0==a?null:this.parent.child(a-1)}posAtIndex(a,p){p=this.resolveDepth(p);let E=this.path[3*p],D=0==p?0:this.path[3*p-1]+1;for(let I=0;I<a;I++)D+=E.child(I).nodeSize;return D}marks(){let a=this.parent,p=this.index();if(0==a.content.size)return et.none;if(this.textOffset)return a.child(p).marks;let E=a.maybeChild(p-1),D=a.maybeChild(p);if(!E){let at=E;E=D,D=at}let I=E.marks;for(var K=0;K<I.length;K++)!1===I[K].type.spec.inclusive&&(!D||!I[K].isInSet(D.marks))&&(I=I[K--].removeFromSet(I));return I}marksAcross(a){let p=this.parent.maybeChild(this.index());if(!p||!p.isInline)return null;let E=p.marks,D=a.parent.maybeChild(a.index());for(var I=0;I<E.length;I++)!1===E[I].type.spec.inclusive&&(!D||!E[I].isInSet(D.marks))&&(E=E[I--].removeFromSet(E));return E}sharedDepth(a){for(let p=this.depth;p>0;p--)if(this.start(p)<=a&&this.end(p)>=a)return p;return 0}blockRange(a=this,p){if(a.pos<this.pos)return a.blockRange(this);for(let E=this.depth-(this.parent.inlineContent||this.pos==a.pos?1:0);E>=0;E--)if(a.pos<=this.end(E)&&(!p||p(this.node(E))))return new Ht(this,a,E);return null}sameParent(a){return this.pos-this.parentOffset==a.pos-a.parentOffset}max(a){return a.pos>this.pos?a:this}min(a){return a.pos<this.pos?a:this}toString(){let a="";for(let p=1;p<=this.depth;p++)a+=(a?"/":"")+this.node(p).type.name+"_"+this.index(p-1);return a+":"+this.parentOffset}static resolve(a,p){if(!(p>=0&&p<=a.content.size))throw new RangeError("Position "+p+" out of range");let E=[],D=0,I=p;for(let K=a;;){let{index:at,offset:Lt}=K.content.findIndex(I),te=I-Lt;if(E.push(K,at,D+Lt),!te||(K=K.child(at),K.isText))break;I=te-1,D+=Lt+1}return new At(p,E,I)}static resolveCached(a,p){for(let D=0;D<kt.length;D++){let I=kt[D];if(I.pos==p&&I.doc==a)return I}let E=kt[yt]=At.resolve(a,p);return yt=(yt+1)%Bt,E}}let kt=[],yt=0,Bt=12;class Ht{constructor(a,p,E){this.$from=a,this.$to=p,this.depth=E}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Kt=Object.create(null);class ut{constructor(a,p,E,D=et.none){this.type=a,this.attrs=p,this.marks=D,this.content=E||g.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(a){return this.content.child(a)}maybeChild(a){return this.content.maybeChild(a)}forEach(a){this.content.forEach(a)}nodesBetween(a,p,E,D=0){this.content.nodesBetween(a,p,E,D,this)}descendants(a){this.nodesBetween(0,this.content.size,a)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(a,p,E,D){return this.content.textBetween(a,p,E,D)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(a){return this==a||this.sameMarkup(a)&&this.content.eq(a.content)}sameMarkup(a){return this.hasMarkup(a.type,a.attrs,a.marks)}hasMarkup(a,p,E){return this.type==a&&X(this.attrs,p||a.defaultAttrs||Kt)&&et.sameSet(this.marks,E||et.none)}copy(a=null){return a==this.content?this:new ut(this.type,this.attrs,a,this.marks)}mark(a){return a==this.marks?this:new ut(this.type,this.attrs,this.content,a)}cut(a,p=this.content.size){return 0==a&&p==this.content.size?this:this.copy(this.content.cut(a,p))}slice(a,p=this.content.size,E=!1){if(a==p)return dt.empty;let D=this.resolve(a),I=this.resolve(p),K=E?0:D.sharedDepth(p),at=D.start(K),te=D.node(K).content.cut(D.pos-at,I.pos-at);return new dt(te,D.depth-K,I.depth-K)}replace(a,p,E){return ft(this.resolve(a),this.resolve(p),E)}nodeAt(a){for(let p=this;;){let{index:E,offset:D}=p.content.findIndex(a);if(p=p.maybeChild(E),!p)return null;if(D==a||p.isText)return p;a-=D+1}}childAfter(a){let{index:p,offset:E}=this.content.findIndex(a);return{node:this.content.maybeChild(p),index:p,offset:E}}childBefore(a){if(0==a)return{node:null,index:0,offset:0};let{index:p,offset:E}=this.content.findIndex(a);if(E<a)return{node:this.content.child(p),index:p,offset:E};let D=this.content.child(p-1);return{node:D,index:p-1,offset:E-D.nodeSize}}resolve(a){return At.resolveCached(this,a)}resolveNoCache(a){return At.resolve(this,a)}rangeHasMark(a,p,E){let D=!1;return p>a&&this.nodesBetween(a,p,I=>(E.isInSet(I.marks)&&(D=!0),!D)),D}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let a=this.type.name;return this.content.size&&(a+="("+this.content.toStringInner()+")"),it(this.marks,a)}contentMatchAt(a){let p=this.type.contentMatch.matchFragment(this.content,0,a);if(!p)throw new Error("Called contentMatchAt on a node with invalid content");return p}canReplace(a,p,E=g.empty,D=0,I=E.childCount){let K=this.contentMatchAt(a).matchFragment(E,D,I),at=K&&K.matchFragment(this.content,p);if(!at||!at.validEnd)return!1;for(let Lt=D;Lt<I;Lt++)if(!this.type.allowsMarks(E.child(Lt).marks))return!1;return!0}canReplaceWith(a,p,E,D){if(D&&!this.type.allowsMarks(D))return!1;let I=this.contentMatchAt(a).matchType(E),K=I&&I.matchFragment(this.content,p);return!!K&&K.validEnd}canAppend(a){return a.content.size?this.canReplace(this.childCount,this.childCount,a.content):this.type.compatibleContent(a.type)}check(){this.type.checkContent(this.content);let a=et.none;for(let p=0;p<this.marks.length;p++)a=this.marks[p].addToSet(a);if(!et.sameSet(a,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(p=>p.type.name)}`);this.content.forEach(p=>p.check())}toJSON(){let a={type:this.type.name};for(let p in this.attrs){a.attrs=this.attrs;break}return this.content.size&&(a.content=this.content.toJSON()),this.marks.length&&(a.marks=this.marks.map(p=>p.toJSON())),a}static fromJSON(a,p){if(!p)throw new RangeError("Invalid input for Node.fromJSON");let E=null;if(p.marks){if(!Array.isArray(p.marks))throw new RangeError("Invalid mark data for Node.fromJSON");E=p.marks.map(a.markFromJSON)}if("text"==p.type){if("string"!=typeof p.text)throw new RangeError("Invalid text node in JSON");return a.text(p.text,E)}let D=g.fromJSON(a,p.content);return a.nodeType(p.type).create(p.attrs,D,E)}}ut.prototype.text=void 0;class L extends ut{constructor(a,p,E,D){if(super(a,p,null,D),!E)throw new RangeError("Empty text nodes are not allowed");this.text=E}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):it(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(a,p){return this.text.slice(a,p)}get nodeSize(){return this.text.length}mark(a){return a==this.marks?this:new L(this.type,this.attrs,this.text,a)}withText(a){return a==this.text?this:new L(this.type,this.attrs,a,this.marks)}cut(a=0,p=this.text.length){return 0==a&&p==this.text.length?this:this.withText(this.text.slice(a,p))}eq(a){return this.sameMarkup(a)&&this.text==a.text}toJSON(){let a=super.toJSON();return a.text=this.text,a}}function it(U,a){for(let p=U.length-1;p>=0;p--)a=U[p].type.name+"("+a+")";return a}class ct{constructor(a){this.validEnd=a,this.next=[],this.wrapCache=[]}static parse(a,p){let E=new st(a,p);if(null==E.next)return ct.empty;let D=J(E);E.next&&E.err("Unexpected trailing text");let I=function(U){let a=Object.create(null);return function p(E){let D=[];E.forEach(K=>{U[K].forEach(({term:at,to:Lt})=>{if(!at)return;let te;for(let ee=0;ee<D.length;ee++)D[ee][0]==at&&(te=D[ee][1]);ye(U,Lt).forEach(ee=>{te||D.push([at,te=[]]),-1==te.indexOf(ee)&&te.push(ee)})})});let I=a[E.join(",")]=new ct(E.indexOf(U.length-1)>-1);for(let K=0;K<D.length;K++){let at=D[K][1].sort(ue);I.next.push({type:D[K][0],next:a[at.join(",")]||p(at)})}return I}(ye(U,0))}(function(U){let a=[[]];return D(function I(K,at){if("choice"==K.type)return K.exprs.reduce((Lt,te)=>Lt.concat(I(te,at)),[]);if("seq"!=K.type){if("star"==K.type){let Lt=p();return E(at,Lt),D(I(K.expr,Lt),Lt),[E(Lt)]}if("plus"==K.type){let Lt=p();return D(I(K.expr,at),Lt),D(I(K.expr,Lt),Lt),[E(Lt)]}if("opt"==K.type)return[E(at)].concat(I(K.expr,at));if("range"==K.type){let Lt=at;for(let te=0;te<K.min;te++){let ee=p();D(I(K.expr,Lt),ee),Lt=ee}if(-1==K.max)D(I(K.expr,Lt),Lt);else for(let te=K.min;te<K.max;te++){let ee=p();E(Lt,ee),D(I(K.expr,Lt),ee),Lt=ee}return[E(Lt)]}if("name"==K.type)return[E(at,void 0,K.value)];throw new Error("Unknown expr type")}for(let Lt=0;;Lt++){let te=I(K.exprs[Lt],at);if(Lt==K.exprs.length-1)return te;D(te,at=p())}}(U,0),p()),a;function p(){return a.push([])-1}function E(K,at,Lt){let te={term:Lt,to:at};return a[K].push(te),te}function D(K,at){K.forEach(Lt=>Lt.to=at)}}(D));return function(U,a){for(let p=0,E=[U];p<E.length;p++){let D=E[p],I=!D.validEnd,K=[];for(let at=0;at<D.next.length;at++){let{type:Lt,next:te}=D.next[at];K.push(Lt.name),I&&!(Lt.isText||Lt.hasRequiredAttrs())&&(I=!1),-1==E.indexOf(te)&&E.push(te)}I&&a.err("Only non-generatable nodes ("+K.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(I,E),I}matchType(a){for(let p=0;p<this.next.length;p++)if(this.next[p].type==a)return this.next[p].next;return null}matchFragment(a,p=0,E=a.childCount){let D=this;for(let I=p;D&&I<E;I++)D=D.matchType(a.child(I).type);return D}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let a=0;a<this.next.length;a++){let{type:p}=this.next[a];if(!p.isText&&!p.hasRequiredAttrs())return p}return null}compatible(a){for(let p=0;p<this.next.length;p++)for(let E=0;E<a.next.length;E++)if(this.next[p].type==a.next[E].type)return!0;return!1}fillBefore(a,p=!1,E=0){let D=[this];return function I(K,at){let Lt=K.matchFragment(a,E);if(Lt&&(!p||Lt.validEnd))return g.from(at.map(te=>te.createAndFill()));for(let te=0;te<K.next.length;te++){let{type:ee,next:we}=K.next[te];if(!ee.isText&&!ee.hasRequiredAttrs()&&-1==D.indexOf(we)){D.push(we);let $e=I(we,at.concat(ee));if($e)return $e}}return null}(this,[])}findWrapping(a){for(let E=0;E<this.wrapCache.length;E+=2)if(this.wrapCache[E]==a)return this.wrapCache[E+1];let p=this.computeWrapping(a);return this.wrapCache.push(a,p),p}computeWrapping(a){let p=Object.create(null),E=[{match:this,type:null,via:null}];for(;E.length;){let D=E.shift(),I=D.match;if(I.matchType(a)){let K=[];for(let at=D;at.type;at=at.via)K.push(at.type);return K.reverse()}for(let K=0;K<I.next.length;K++){let{type:at,next:Lt}=I.next[K];!at.isLeaf&&!at.hasRequiredAttrs()&&!(at.name in p)&&(!D.type||Lt.validEnd)&&(E.push({match:at.contentMatch,type:at,via:D}),p[at.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(a){if(a>=this.next.length)throw new RangeError(`There's no ${a}th edge in this content match`);return this.next[a]}toString(){let a=[];return function p(E){a.push(E);for(let D=0;D<E.next.length;D++)-1==a.indexOf(E.next[D].next)&&p(E.next[D].next)}(this),a.map((E,D)=>{let I=D+(E.validEnd?"*":" ")+" ";for(let K=0;K<E.next.length;K++)I+=(K?", ":"")+E.next[K].type.name+"->"+a.indexOf(E.next[K].next);return I}).join("\n")}}ct.empty=new ct(!0);class st{constructor(a,p){this.string=a,this.nodeTypes=p,this.inline=null,this.pos=0,this.tokens=a.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(a){return this.next==a&&(this.pos++||!0)}err(a){throw new SyntaxError(a+" (in content expression '"+this.string+"')")}}function J(U){let a=[];do{a.push(Q(U))}while(U.eat("|"));return 1==a.length?a[0]:{type:"choice",exprs:a}}function Q(U){let a=[];do{a.push(nt(U))}while(U.next&&")"!=U.next&&"|"!=U.next);return 1==a.length?a[0]:{type:"seq",exprs:a}}function nt(U){let a=function(U){if(U.eat("(")){let a=J(U);return U.eat(")")||U.err("Missing closing paren"),a}if(!/\W/.test(U.next)){let a=function(U,a){let p=U.nodeTypes,E=p[a];if(E)return[E];let D=[];for(let I in p){let K=p[I];K.groups.indexOf(a)>-1&&D.push(K)}return 0==D.length&&U.err("No node type or group '"+a+"' found"),D}(U,U.next).map(p=>(null==U.inline?U.inline=p.isInline:U.inline!=p.isInline&&U.err("Mixing inline and block content"),{type:"name",value:p}));return U.pos++,1==a.length?a[0]:{type:"choice",exprs:a}}U.err("Unexpected token '"+U.next+"'")}(U);for(;;)if(U.eat("+"))a={type:"plus",expr:a};else if(U.eat("*"))a={type:"star",expr:a};else if(U.eat("?"))a={type:"opt",expr:a};else{if(!U.eat("{"))break;a=Jt(U,a)}return a}function wt(U){/\D/.test(U.next)&&U.err("Expected number, got '"+U.next+"'");let a=Number(U.next);return U.pos++,a}function Jt(U,a){let p=wt(U),E=p;return U.eat(",")&&(E="}"!=U.next?wt(U):-1),U.eat("}")||U.err("Unclosed braced range"),{type:"range",min:p,max:E,expr:a}}function ue(U,a){return a-U}function ye(U,a){let p=[];return function E(D){let I=U[D];if(1==I.length&&!I[0].term)return E(I[0].to);p.push(D);for(let K=0;K<I.length;K++){let{term:at,to:Lt}=I[K];!at&&-1==p.indexOf(Lt)&&E(Lt)}}(a),p.sort(ue)}function Je(U){let a=Object.create(null);for(let p in U){let E=U[p];if(!E.hasDefault)return null;a[p]=E.default}return a}function xe(U,a){let p=Object.create(null);for(let E in U){let D=a&&a[E];if(void 0===D){let I=U[E];if(!I.hasDefault)throw new RangeError("No value supplied for attribute "+E);D=I.default}p[E]=D}return p}function Be(U){let a=Object.create(null);if(U)for(let p in U)a[p]=new Ae(U[p]);return a}class ge{constructor(a,p,E){this.name=a,this.schema=p,this.spec=E,this.markSet=null,this.groups=E.group?E.group.split(" "):[],this.attrs=Be(E.attrs),this.defaultAttrs=Je(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(E.inline||"text"==a),this.isText="text"==a}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ct.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let a in this.attrs)if(this.attrs[a].isRequired)return!0;return!1}compatibleContent(a){return this==a||this.contentMatch.compatible(a.contentMatch)}computeAttrs(a){return!a&&this.defaultAttrs?this.defaultAttrs:xe(this.attrs,a)}create(a=null,p,E){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ut(this,this.computeAttrs(a),g.from(p),et.setFrom(E))}createChecked(a=null,p,E){return p=g.from(p),this.checkContent(p),new ut(this,this.computeAttrs(a),p,et.setFrom(E))}createAndFill(a=null,p,E){if(a=this.computeAttrs(a),(p=g.from(p)).size){let K=this.contentMatch.fillBefore(p);if(!K)return null;p=K.append(p)}let D=this.contentMatch.matchFragment(p),I=D&&D.fillBefore(g.empty,!0);return I?new ut(this,a,p.append(I),et.setFrom(E)):null}validContent(a){let p=this.contentMatch.matchFragment(a);if(!p||!p.validEnd)return!1;for(let E=0;E<a.childCount;E++)if(!this.allowsMarks(a.child(E).marks))return!1;return!0}checkContent(a){if(!this.validContent(a))throw new RangeError(`Invalid content for node ${this.name}: ${a.toString().slice(0,50)}`)}allowsMarkType(a){return null==this.markSet||this.markSet.indexOf(a)>-1}allowsMarks(a){if(null==this.markSet)return!0;for(let p=0;p<a.length;p++)if(!this.allowsMarkType(a[p].type))return!1;return!0}allowedMarks(a){if(null==this.markSet)return a;let p;for(let E=0;E<a.length;E++)this.allowsMarkType(a[E].type)?p&&p.push(a[E]):p||(p=a.slice(0,E));return p?p.length?p:et.none:a}static compile(a,p){let E=Object.create(null);a.forEach((I,K)=>E[I]=new ge(I,p,K));let D=p.spec.topNode||"doc";if(!E[D])throw new RangeError("Schema is missing its top node type ('"+D+"')");if(!E.text)throw new RangeError("Every schema needs a 'text' type");for(let I in E.text.attrs)throw new RangeError("The text node type should not have attributes");return E}}class Ae{constructor(a){this.hasDefault=Object.prototype.hasOwnProperty.call(a,"default"),this.default=a.default}get isRequired(){return!this.hasDefault}}class ve{constructor(a,p,E,D){this.name=a,this.rank=p,this.schema=E,this.spec=D,this.attrs=Be(D.attrs),this.excluded=null;let I=Je(this.attrs);this.instance=I?new et(this,I):null}create(a=null){return!a&&this.instance?this.instance:new et(this,xe(this.attrs,a))}static compile(a,p){let E=Object.create(null),D=0;return a.forEach((I,K)=>E[I]=new ve(I,D++,p,K)),E}removeFromSet(a){for(var p=0;p<a.length;p++)a[p].type==this&&(a=a.slice(0,p).concat(a.slice(p+1)),p--);return a}isInSet(a){for(let p=0;p<a.length;p++)if(a[p].type==this)return a[p]}excludes(a){return this.excluded.indexOf(a)>-1}}class Pe{constructor(a){this.cached=Object.create(null);let p=this.spec={};for(let D in a)p[D]=a[D];p.nodes=l.from(a.nodes),p.marks=l.from(a.marks||{}),this.nodes=ge.compile(this.spec.nodes,this),this.marks=ve.compile(this.spec.marks,this);let E=Object.create(null);for(let D in this.nodes){if(D in this.marks)throw new RangeError(D+" can not be both a node and a mark");let I=this.nodes[D],K=I.spec.content||"",at=I.spec.marks;I.contentMatch=E[K]||(E[K]=ct.parse(K,this.nodes)),I.inlineContent=I.contentMatch.inlineContent,I.markSet="_"==at?null:at?Ne(this,at.split(" ")):""!=at&&I.inlineContent?null:[]}for(let D in this.marks){let I=this.marks[D],K=I.spec.excludes;I.excluded=null==K?[I]:""==K?[]:Ne(this,K.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(a,p=null,E,D){if("string"==typeof a)a=this.nodeType(a);else{if(!(a instanceof ge))throw new RangeError("Invalid node type: "+a);if(a.schema!=this)throw new RangeError("Node type from different schema used ("+a.name+")")}return a.createChecked(p,E,D)}text(a,p){let E=this.nodes.text;return new L(E,E.defaultAttrs,a,et.setFrom(p))}mark(a,p){return"string"==typeof a&&(a=this.marks[a]),a.create(p)}nodeFromJSON(a){return ut.fromJSON(this,a)}markFromJSON(a){return et.fromJSON(this,a)}nodeType(a){let p=this.nodes[a];if(!p)throw new RangeError("Unknown node type: "+a);return p}}function Ne(U,a){let p=[];for(let E=0;E<a.length;E++){let D=a[E],I=U.marks[D],K=I;if(I)p.push(I);else for(let at in U.marks){let Lt=U.marks[at];("_"==D||Lt.spec.group&&Lt.spec.group.split(" ").indexOf(D)>-1)&&p.push(K=Lt)}if(!K)throw new SyntaxError("Unknown mark type: '"+a[E]+"'")}return p}class Me{constructor(a,p){this.schema=a,this.rules=p,this.tags=[],this.styles=[],p.forEach(E=>{E.tag?this.tags.push(E):E.style&&this.styles.push(E)}),this.normalizeLists=!this.tags.some(E=>{if(!/^(ul|ol)\b/.test(E.tag)||!E.node)return!1;let D=a.nodes[E.node];return D.contentMatch.matchType(D)})}parse(a,p={}){let E=new Ee(this,p,!1);return E.addAll(a,p.from,p.to),E.finish()}parseSlice(a,p={}){let E=new Ee(this,p,!0);return E.addAll(a,p.from,p.to),dt.maxOpen(E.finish())}matchTag(a,p,E){for(let D=E?this.tags.indexOf(E)+1:0;D<this.tags.length;D++){let I=this.tags[D];if(b(a,I.tag)&&(void 0===I.namespace||a.namespaceURI==I.namespace)&&(!I.context||p.matchesContext(I.context))){if(I.getAttrs){let K=I.getAttrs(a);if(!1===K)continue;I.attrs=K||void 0}return I}}}matchStyle(a,p,E,D){for(let I=D?this.styles.indexOf(D)+1:0;I<this.styles.length;I++){let K=this.styles[I],at=K.style;if(!(0!=at.indexOf(a)||K.context&&!E.matchesContext(K.context)||at.length>a.length&&(61!=at.charCodeAt(a.length)||at.slice(a.length+1)!=p))){if(K.getAttrs){let Lt=K.getAttrs(p);if(!1===Lt)continue;K.attrs=Lt||void 0}return K}}}static schemaRules(a){let p=[];function E(D){let I=null==D.priority?50:D.priority,K=0;for(;K<p.length;K++){let at=p[K];if((null==at.priority?50:at.priority)<I)break}p.splice(K,0,D)}for(let D in a.marks){let I=a.marks[D].spec.parseDOM;I&&I.forEach(K=>{E(K=k(K)),K.mark||K.ignore||K.clearMark||(K.mark=D)})}for(let D in a.nodes){let I=a.nodes[D].spec.parseDOM;I&&I.forEach(K=>{E(K=k(K)),K.node||K.ignore||K.mark||(K.node=D)})}return p}static fromSchema(a){return a.cached.domParser||(a.cached.domParser=new Me(a,Me.schemaRules(a)))}}const Ie={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ye={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},He={ol:!0,ul:!0};function _e(U,a,p){return null!=a?(a?1:0)|("full"===a?2:0):U&&"pre"==U.whitespace?3:-5&p}class fe{constructor(a,p,E,D,I,K,at){this.type=a,this.attrs=p,this.marks=E,this.pendingMarks=D,this.solid=I,this.options=at,this.content=[],this.activeMarks=et.none,this.stashMarks=[],this.match=K||(4&at?null:a.contentMatch)}findWrapping(a){if(!this.match){if(!this.type)return[];let p=this.type.contentMatch.fillBefore(g.from(a));if(!p){let D,E=this.type.contentMatch;return(D=E.findWrapping(a.type))?(this.match=E,D):null}this.match=this.type.contentMatch.matchFragment(p)}return this.match.findWrapping(a.type)}finish(a){if(!(1&this.options)){let D,E=this.content[this.content.length-1];if(E&&E.isText&&(D=/[ \t\r\n\u000c]+$/.exec(E.text))){let I=E;E.text.length==D[0].length?this.content.pop():this.content[this.content.length-1]=I.withText(I.text.slice(0,I.text.length-D[0].length))}}let p=g.from(this.content);return!a&&this.match&&(p=p.append(this.match.fillBefore(g.empty,!0))),this.type?this.type.create(this.attrs,p,this.marks):p}popFromStashMark(a){for(let p=this.stashMarks.length-1;p>=0;p--)if(a.eq(this.stashMarks[p]))return this.stashMarks.splice(p,1)[0]}applyPending(a){for(let p=0,E=this.pendingMarks;p<E.length;p++){let D=E[p];(this.type?this.type.allowsMarkType(D.type):w(D.type,a))&&!D.isInSet(this.activeMarks)&&(this.activeMarks=D.addToSet(this.activeMarks),this.pendingMarks=D.removeFromSet(this.pendingMarks))}}inlineContext(a){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:a.parentNode&&!Ie.hasOwnProperty(a.parentNode.nodeName.toLowerCase())}}class Ee{constructor(a,p,E){this.parser=a,this.options=p,this.isOpen=E,this.open=0;let I,D=p.topNode,K=_e(null,p.preserveWhitespace,0)|(E?4:0);I=D?new fe(D.type,D.attrs,et.none,et.none,!0,p.topMatch||D.type.contentMatch,K):new fe(E?null:a.schema.topNodeType,null,et.none,et.none,!0,null,K),this.nodes=[I],this.find=p.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(a){if(3==a.nodeType)this.addTextNode(a);else if(1==a.nodeType){let p=a.getAttribute("style");if(p){let E=this.readStyles(function(U){let p,a=/\s*([\w-]+)\s*:\s*([^;]+)/g,E=[];for(;p=a.exec(U);)E.push(p[1],p[2].trim());return E}(p));if(!E)return;let[D,I]=E,K=this.top;for(let at=0;at<I.length;at++)this.removePendingMark(I[at],K);for(let at=0;at<D.length;at++)this.addPendingMark(D[at]);this.addElement(a);for(let at=0;at<D.length;at++)this.removePendingMark(D[at],K);for(let at=0;at<I.length;at++)this.addPendingMark(I[at])}else this.addElement(a)}}addTextNode(a){let p=a.nodeValue,E=this.top;if(2&E.options||E.inlineContext(a)||/[^ \t\r\n\u000c]/.test(p)){if(1&E.options)p=2&E.options?p.replace(/\r\n?/g,"\n"):p.replace(/\r?\n|\r/g," ");else if(p=p.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(p)&&this.open==this.nodes.length-1){let D=E.content[E.content.length-1],I=a.previousSibling;(!D||I&&"BR"==I.nodeName||D.isText&&/[ \t\r\n\u000c]$/.test(D.text))&&(p=p.slice(1))}p&&this.insertNode(this.parser.schema.text(p)),this.findInText(a)}else this.findInside(a)}addElement(a,p){let D,E=a.nodeName.toLowerCase();He.hasOwnProperty(E)&&this.parser.normalizeLists&&function(U){for(let a=U.firstChild,p=null;a;a=a.nextSibling){let E=1==a.nodeType?a.nodeName.toLowerCase():null;E&&He.hasOwnProperty(E)&&p?(p.appendChild(a),a=p):"li"==E?p=a:E&&(p=null)}}(a);let I=this.options.ruleFromNode&&this.options.ruleFromNode(a)||(D=this.parser.matchTag(a,this,p));if(I?I.ignore:Ye.hasOwnProperty(E))this.findInside(a),this.ignoreFallback(a);else if(!I||I.skip||I.closeParent){I&&I.closeParent?this.open=Math.max(0,this.open-1):I&&I.skip.nodeType&&(a=I.skip);let K,at=this.top,Lt=this.needsBlock;if(Ie.hasOwnProperty(E))at.content.length&&at.content[0].isInline&&this.open&&(this.open--,at=this.top),K=!0,at.type||(this.needsBlock=!0);else if(!a.firstChild)return void this.leafFallback(a);this.addAll(a),K&&this.sync(at),this.needsBlock=Lt}else this.addElementByRule(a,I,!1===I.consuming?D:void 0)}leafFallback(a){"BR"==a.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(a.ownerDocument.createTextNode("\n"))}ignoreFallback(a){"BR"==a.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(a){let p=et.none,E=et.none;t:for(let D=0;D<a.length;D+=2)for(let I;;){let K=this.parser.matchStyle(a[D],a[D+1],this,I);if(!K)continue t;if(K.ignore)return null;if(K.clearMark?this.top.pendingMarks.forEach(at=>{K.clearMark(at)&&(E=at.addToSet(E))}):p=this.parser.schema.marks[K.mark].create(K.attrs).addToSet(p),!1!==K.consuming)break;I=K}return[p,E]}addElementByRule(a,p,E){let D,I,K;p.node?(I=this.parser.schema.nodes[p.node],I.isLeaf?this.insertNode(I.create(p.attrs))||this.leafFallback(a):D=this.enter(I,p.attrs||null,p.preserveWhitespace)):(K=this.parser.schema.marks[p.mark].create(p.attrs),this.addPendingMark(K));let at=this.top;if(I&&I.isLeaf)this.findInside(a);else if(E)this.addElement(a,E);else if(p.getContent)this.findInside(a),p.getContent(a,this.parser.schema).forEach(Lt=>this.insertNode(Lt));else{let Lt=a;"string"==typeof p.contentElement?Lt=a.querySelector(p.contentElement):"function"==typeof p.contentElement?Lt=p.contentElement(a):p.contentElement&&(Lt=p.contentElement),this.findAround(a,Lt,!0),this.addAll(Lt)}D&&this.sync(at)&&this.open--,K&&this.removePendingMark(K,at)}addAll(a,p,E){let D=p||0;for(let I=p?a.childNodes[p]:a.firstChild,K=null==E?null:a.childNodes[E];I!=K;I=I.nextSibling,++D)this.findAtPoint(a,D),this.addDOM(I);this.findAtPoint(a,D)}findPlace(a){let p,E;for(let D=this.open;D>=0;D--){let I=this.nodes[D],K=I.findWrapping(a);if(K&&(!p||p.length>K.length)&&(p=K,E=I,!K.length)||I.solid)break}if(!p)return!1;this.sync(E);for(let D=0;D<p.length;D++)this.enterInner(p[D],null,!1);return!0}insertNode(a){if(a.isInline&&this.needsBlock&&!this.top.type){let p=this.textblockFromContext();p&&this.enterInner(p)}if(this.findPlace(a)){this.closeExtra();let p=this.top;p.applyPending(a.type),p.match&&(p.match=p.match.matchType(a.type));let E=p.activeMarks;for(let D=0;D<a.marks.length;D++)(!p.type||p.type.allowsMarkType(a.marks[D].type))&&(E=a.marks[D].addToSet(E));return p.content.push(a.mark(E)),!0}return!1}enter(a,p,E){let D=this.findPlace(a.create(p));return D&&this.enterInner(a,p,!0,E),D}enterInner(a,p=null,E=!1,D){this.closeExtra();let I=this.top;I.applyPending(a),I.match=I.match&&I.match.matchType(a);let K=_e(a,D,I.options);4&I.options&&0==I.content.length&&(K|=4),this.nodes.push(new fe(a,p,I.activeMarks,I.pendingMarks,E,null,K)),this.open++}closeExtra(a=!1){let p=this.nodes.length-1;if(p>this.open){for(;p>this.open;p--)this.nodes[p-1].content.push(this.nodes[p].finish(a));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(a){for(let p=this.open;p>=0;p--)if(this.nodes[p]==a)return this.open=p,!0;return!1}get currentPos(){this.closeExtra();let a=0;for(let p=this.open;p>=0;p--){let E=this.nodes[p].content;for(let D=E.length-1;D>=0;D--)a+=E[D].nodeSize;p&&a++}return a}findAtPoint(a,p){if(this.find)for(let E=0;E<this.find.length;E++)this.find[E].node==a&&this.find[E].offset==p&&(this.find[E].pos=this.currentPos)}findInside(a){if(this.find)for(let p=0;p<this.find.length;p++)null==this.find[p].pos&&1==a.nodeType&&a.contains(this.find[p].node)&&(this.find[p].pos=this.currentPos)}findAround(a,p,E){if(a!=p&&this.find)for(let D=0;D<this.find.length;D++)null==this.find[D].pos&&1==a.nodeType&&a.contains(this.find[D].node)&&p.compareDocumentPosition(this.find[D].node)&(E?2:4)&&(this.find[D].pos=this.currentPos)}findInText(a){if(this.find)for(let p=0;p<this.find.length;p++)this.find[p].node==a&&(this.find[p].pos=this.currentPos-(a.nodeValue.length-this.find[p].offset))}matchesContext(a){if(a.indexOf("|")>-1)return a.split(/\s*\|\s*/).some(this.matchesContext,this);let p=a.split("/"),E=this.options.context,D=!(this.isOpen||E&&E.parent.type!=this.nodes[0].type),I=(D?0:1)-(E?E.depth+1:0),K=(at,Lt)=>{for(;at>=0;at--){let te=p[at];if(""==te){if(at==p.length-1||0==at)continue;for(;Lt>=I;Lt--)if(K(at-1,Lt))return!0;return!1}{let ee=Lt>0||0==Lt&&D?this.nodes[Lt].type:E&&Lt>=I?E.node(Lt-I).type:null;if(!ee||ee.name!=te&&-1==ee.groups.indexOf(te))return!1;Lt--}}return!0};return K(p.length-1,this.open)}textblockFromContext(){let a=this.options.context;if(a)for(let p=a.depth;p>=0;p--){let E=a.node(p).contentMatchAt(a.indexAfter(p)).defaultType;if(E&&E.isTextblock&&E.defaultAttrs)return E}for(let p in this.parser.schema.nodes){let E=this.parser.schema.nodes[p];if(E.isTextblock&&E.defaultAttrs)return E}}addPendingMark(a){let p=function(U,a){for(let p=0;p<a.length;p++)if(U.eq(a[p]))return a[p]}(a,this.top.pendingMarks);p&&this.top.stashMarks.push(p),this.top.pendingMarks=a.addToSet(this.top.pendingMarks)}removePendingMark(a,p){for(let E=this.open;E>=0;E--){let D=this.nodes[E];if(D.pendingMarks.lastIndexOf(a)>-1)D.pendingMarks=a.removeFromSet(D.pendingMarks);else{D.activeMarks=a.removeFromSet(D.activeMarks);let K=D.popFromStashMark(a);K&&D.type&&D.type.allowsMarkType(K.type)&&(D.activeMarks=K.addToSet(D.activeMarks))}if(D==p)break}}}function b(U,a){return(U.matches||U.msMatchesSelector||U.webkitMatchesSelector||U.mozMatchesSelector).call(U,a)}function k(U){let a={};for(let p in U)a[p]=U[p];return a}function w(U,a){let p=a.schema.nodes;for(let E in p){let D=p[E];if(!D.allowsMarkType(U))continue;let I=[],K=at=>{I.push(at);for(let Lt=0;Lt<at.edgeCount;Lt++){let{type:te,next:ee}=at.edge(Lt);if(te==a||I.indexOf(ee)<0&&K(ee))return!0}};if(K(D.contentMatch))return!0}}class z{constructor(a,p){this.nodes=a,this.marks=p}serializeFragment(a,p={},E){E||(E=Rt(p).createDocumentFragment());let D=E,I=[];return a.forEach(K=>{if(I.length||K.marks.length){let at=0,Lt=0;for(;at<I.length&&Lt<K.marks.length;){let te=K.marks[Lt];if(this.marks[te.type.name]){if(!te.eq(I[at][0])||!1===te.type.spec.spanning)break;at++,Lt++}else Lt++}for(;at<I.length;)D=I.pop()[1];for(;Lt<K.marks.length;){let te=K.marks[Lt++],ee=this.serializeMark(te,K.isInline,p);ee&&(I.push([te,D]),D.appendChild(ee.dom),D=ee.contentDOM||ee.dom)}}D.appendChild(this.serializeNodeInner(K,p))}),E}serializeNodeInner(a,p){let{dom:E,contentDOM:D}=z.renderSpec(Rt(p),this.nodes[a.type.name](a));if(D){if(a.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(a.content,p,D)}return E}serializeNode(a,p={}){let E=this.serializeNodeInner(a,p);for(let D=a.marks.length-1;D>=0;D--){let I=this.serializeMark(a.marks[D],a.isInline,p);I&&((I.contentDOM||I.dom).appendChild(E),E=I.dom)}return E}serializeMark(a,p,E={}){let D=this.marks[a.type.name];return D&&z.renderSpec(Rt(E),D(a,p))}static renderSpec(a,p,E=null){if("string"==typeof p)return{dom:a.createTextNode(p)};if(null!=p.nodeType)return{dom:p};if(p.dom&&null!=p.dom.nodeType)return p;let D=p[0],I=D.indexOf(" ");I>0&&(E=D.slice(0,I),D=D.slice(I+1));let K,at=E?a.createElementNS(E,D):a.createElement(D),Lt=p[1],te=1;if(Lt&&"object"==typeof Lt&&null==Lt.nodeType&&!Array.isArray(Lt)){te=2;for(let ee in Lt)if(null!=Lt[ee]){let we=ee.indexOf(" ");we>0?at.setAttributeNS(ee.slice(0,we),ee.slice(we+1),Lt[ee]):at.setAttribute(ee,Lt[ee])}}for(let ee=te;ee<p.length;ee++){let we=p[ee];if(0===we){if(ee<p.length-1||ee>te)throw new RangeError("Content hole must be the only child of its parent node");return{dom:at,contentDOM:at}}{let{dom:$e,contentDOM:$}=z.renderSpec(a,we,E);if(at.appendChild($e),$){if(K)throw new RangeError("Multiple content holes");K=$}}}return{dom:at,contentDOM:K}}static fromSchema(a){return a.cached.domSerializer||(a.cached.domSerializer=new z(this.nodesFromSchema(a),this.marksFromSchema(a)))}static nodesFromSchema(a){let p=bt(a.nodes);return p.text||(p.text=E=>E.text),p}static marksFromSchema(a){return bt(a.marks)}}function bt(U){let a={};for(let p in U){let E=U[p].spec.toDOM;E&&(a[p]=E)}return a}function Rt(U){return U.document||window.document}},62463:(Yt,vt,c)=>{c.d(vt,{Bs:()=>X,C1:()=>Mt,H$:()=>Kt,Sy:()=>yt,Y1:()=>P,qv:()=>_t,xm:()=>g,yy:()=>At});var v=c(77346),l=c(38480);const y=Object.create(null);class P{constructor(L,it,ct){this.$anchor=L,this.$head=it,this.ranges=ct||[new g(L.min(it),L.max(it))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let L=this.ranges;for(let it=0;it<L.length;it++)if(L[it].$from.pos!=L[it].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(L,it=v.p2.empty){let ct=it.content.lastChild,st=null;for(let nt=0;nt<it.openEnd;nt++)st=ct,ct=ct.lastChild;let J=L.steps.length,Q=this.ranges;for(let nt=0;nt<Q.length;nt++){let{$from:wt,$to:Jt}=Q[nt],Zt=L.mapping.slice(J);L.replaceRange(Zt.map(wt.pos),Zt.map(Jt.pos),nt?v.p2.empty:it),0==nt&&Ot(L,J,(ct?ct.isInline:st&&st.isTextblock)?-1:1)}}replaceWith(L,it){let ct=L.steps.length,st=this.ranges;for(let J=0;J<st.length;J++){let{$from:Q,$to:nt}=st[J],wt=L.mapping.slice(ct),Jt=wt.map(Q.pos),Zt=wt.map(nt.pos);J?L.deleteRange(Jt,Zt):(L.replaceRangeWith(Jt,Zt,it),Ot(L,ct,it.isInline?-1:1))}}static findFrom(L,it,ct=!1){let st=L.parent.inlineContent?new X(L):ft(L.node(0),L.parent,L.pos,L.index(),it,ct);if(st)return st;for(let J=L.depth-1;J>=0;J--){let Q=it<0?ft(L.node(0),L.node(J),L.before(J+1),L.index(J),it,ct):ft(L.node(0),L.node(J),L.after(J+1),L.index(J)+1,it,ct);if(Q)return Q}return null}static near(L,it=1){return this.findFrom(L,it)||this.findFrom(L,-it)||new Mt(L.node(0))}static atStart(L){return ft(L,L,0,0,1)||new Mt(L)}static atEnd(L){return ft(L,L,L.content.size,L.childCount,-1)||new Mt(L)}static fromJSON(L,it){if(!it||!it.type)throw new RangeError("Invalid input for Selection.fromJSON");let ct=y[it.type];if(!ct)throw new RangeError(`No selection type ${it.type} defined`);return ct.fromJSON(L,it)}static jsonID(L,it){if(L in y)throw new RangeError("Duplicate use of selection JSON ID "+L);return y[L]=it,it.prototype.jsonID=L,it}getBookmark(){return X.between(this.$anchor,this.$head).getBookmark()}}P.prototype.visible=!0;class g{constructor(L,it){this.$from=L,this.$to=it}}let ot=!1;function H(ut){!ot&&!ut.parent.inlineContent&&(ot=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+ut.parent.type.name+")"))}class X extends P{constructor(L,it=L){H(L),H(it),super(L,it)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(L,it){let ct=L.resolve(it.map(this.head));if(!ct.parent.inlineContent)return P.near(ct);let st=L.resolve(it.map(this.anchor));return new X(st.parent.inlineContent?st:ct,ct)}replace(L,it=v.p2.empty){if(super.replace(L,it),it==v.p2.empty){let ct=this.$from.marksAcross(this.$to);ct&&L.ensureMarks(ct)}}eq(L){return L instanceof X&&L.anchor==this.anchor&&L.head==this.head}getBookmark(){return new et(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(L,it){if("number"!=typeof it.anchor||"number"!=typeof it.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new X(L.resolve(it.anchor),L.resolve(it.head))}static create(L,it,ct=it){let st=L.resolve(it);return new this(st,ct==it?st:L.resolve(ct))}static between(L,it,ct){let st=L.pos-it.pos;if((!ct||st)&&(ct=st>=0?1:-1),!it.parent.inlineContent){let J=P.findFrom(it,ct,!0)||P.findFrom(it,-ct,!0);if(!J)return P.near(it,ct);it=J.$head}return L.parent.inlineContent||(0==st||(L=(P.findFrom(L,-ct,!0)||P.findFrom(L,ct,!0)).$anchor).pos<it.pos!=st<0)&&(L=it),new X(L,it)}}P.jsonID("text",X);class et{constructor(L,it){this.anchor=L,this.head=it}map(L){return new et(L.map(this.anchor),L.map(this.head))}resolve(L){return X.between(L.resolve(this.anchor),L.resolve(this.head))}}class _t extends P{constructor(L){let it=L.nodeAfter,ct=L.node(0).resolve(L.pos+it.nodeSize);super(L,ct),this.node=it}map(L,it){let{deleted:ct,pos:st}=it.mapResult(this.anchor),J=L.resolve(st);return ct?P.near(J):new _t(J)}content(){return new v.p2(v.HY.from(this.node),0,0)}eq(L){return L instanceof _t&&L.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new dt(this.anchor)}static fromJSON(L,it){if("number"!=typeof it.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new _t(L.resolve(it.anchor))}static create(L,it){return new _t(L.resolve(it))}static isSelectable(L){return!L.isText&&!1!==L.type.spec.selectable}}_t.prototype.visible=!1,P.jsonID("node",_t);class dt{constructor(L){this.anchor=L}map(L){let{deleted:it,pos:ct}=L.mapResult(this.anchor);return it?new et(ct,ct):new dt(ct)}resolve(L){let it=L.resolve(this.anchor),ct=it.nodeAfter;return ct&&_t.isSelectable(ct)?new _t(it):P.near(it)}}class Mt extends P{constructor(L){super(L.resolve(0),L.resolve(L.content.size))}replace(L,it=v.p2.empty){if(it==v.p2.empty){L.delete(0,L.doc.content.size);let ct=P.atStart(L.doc);ct.eq(L.selection)||L.setSelection(ct)}else super.replace(L,it)}toJSON(){return{type:"all"}}static fromJSON(L){return new Mt(L)}map(L){return new Mt(L)}eq(L){return L instanceof Mt}getBookmark(){return rt}}P.jsonID("all",Mt);const rt={map(){return this},resolve:ut=>new Mt(ut)};function ft(ut,L,it,ct,st,J=!1){if(L.inlineContent)return X.create(ut,it);for(let Q=ct-(st>0?0:1);st>0?Q<L.childCount:Q>=0;Q+=st){let nt=L.child(Q);if(nt.isAtom){if(!J&&_t.isSelectable(nt))return _t.create(ut,it-(st<0?nt.nodeSize:0))}else{let wt=ft(ut,nt,it+st,st<0?nt.childCount:0,st,J);if(wt)return wt}it+=nt.nodeSize*st}return null}function Ot(ut,L,it){let ct=ut.steps.length-1;if(ct<L)return;let Q,st=ut.steps[ct];(st instanceof l.Pu||st instanceof l.FC)&&(ut.mapping.maps[ct].forEach((nt,wt,Jt,Zt)=>{null==Q&&(Q=Zt)}),ut.setSelection(P.near(ut.doc.resolve(Q),it)))}class pt extends l.wx{constructor(L){super(L.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=L.selection,this.storedMarks=L.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(L){if(L.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=L,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(L){return this.storedMarks=L,this.updated|=2,this}ensureMarks(L){return v.vc.sameSet(this.storedMarks||this.selection.$from.marks(),L)||this.setStoredMarks(L),this}addStoredMark(L){return this.ensureMarks(L.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(L){return this.ensureMarks(L.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(L,it){super.addStep(L,it),this.updated=-3&this.updated,this.storedMarks=null}setTime(L){return this.time=L,this}replaceSelection(L){return this.selection.replace(this,L),this}replaceSelectionWith(L,it=!0){let ct=this.selection;return it&&(L=L.mark(this.storedMarks||(ct.empty?ct.$from.marks():ct.$from.marksAcross(ct.$to)||v.vc.none))),ct.replaceWith(this,L),this}deleteSelection(){return this.selection.replace(this),this}insertText(L,it,ct){let st=this.doc.type.schema;if(null==it)return L?this.replaceSelectionWith(st.text(L),!0):this.deleteSelection();{if(null==ct&&(ct=it),ct=null==ct?it:ct,!L)return this.deleteRange(it,ct);let J=this.storedMarks;if(!J){let Q=this.doc.resolve(it);J=ct==it?Q.marks():Q.marksAcross(this.doc.resolve(ct))}return this.replaceRangeWith(it,ct,st.text(L,J)),this.selection.empty||this.setSelection(P.near(this.selection.$to)),this}}setMeta(L,it){return this.meta["string"==typeof L?L:L.key]=it,this}getMeta(L){return this.meta["string"==typeof L?L:L.key]}get isGeneric(){for(let L in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function tt(ut,L){return L&&ut?ut.bind(L):ut}class F{constructor(L,it,ct){this.name=L,this.init=tt(it.init,ct),this.apply=tt(it.apply,ct)}}const mt=[new F("doc",{init:ut=>ut.doc||ut.schema.topNodeType.createAndFill(),apply:ut=>ut.doc}),new F("selection",{init:(ut,L)=>ut.selection||P.atStart(L.doc),apply:ut=>ut.selection}),new F("storedMarks",{init:ut=>ut.storedMarks||null,apply:(ut,L,it,ct)=>ct.selection.$cursor?ut.storedMarks:null}),new F("scrollToSelection",{init:()=>0,apply:(ut,L)=>ut.scrolledIntoView?L+1:L})];class j{constructor(L,it){this.schema=L,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=mt.slice(),it&&it.forEach(ct=>{if(this.pluginsByKey[ct.key])throw new RangeError("Adding different instances of a keyed plugin ("+ct.key+")");this.plugins.push(ct),this.pluginsByKey[ct.key]=ct,ct.spec.state&&this.fields.push(new F(ct.key,ct.spec.state,ct))})}}class At{constructor(L){this.config=L}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(L){return this.applyTransaction(L).state}filterTransaction(L,it=-1){for(let ct=0;ct<this.config.plugins.length;ct++)if(ct!=it){let st=this.config.plugins[ct];if(st.spec.filterTransaction&&!st.spec.filterTransaction.call(st,L,this))return!1}return!0}applyTransaction(L){if(!this.filterTransaction(L))return{state:this,transactions:[]};let it=[L],ct=this.applyInner(L),st=null;for(;;){let J=!1;for(let Q=0;Q<this.config.plugins.length;Q++){let nt=this.config.plugins[Q];if(nt.spec.appendTransaction){let wt=st?st[Q].n:0,Jt=st?st[Q].state:this,Zt=wt<it.length&&nt.spec.appendTransaction.call(nt,wt?it.slice(wt):it,Jt,ct);if(Zt&&ct.filterTransaction(Zt,Q)){if(Zt.setMeta("appendedTransaction",L),!st){st=[];for(let ne=0;ne<this.config.plugins.length;ne++)st.push(ne<Q?{state:ct,n:it.length}:{state:this,n:0})}it.push(Zt),ct=ct.applyInner(Zt),J=!0}st&&(st[Q]={state:ct,n:it.length})}}if(!J)return{state:ct,transactions:it}}}applyInner(L){if(!L.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let it=new At(this.config),ct=this.config.fields;for(let st=0;st<ct.length;st++){let J=ct[st];it[J.name]=J.apply(L,this[J.name],this,it)}return it}get tr(){return new pt(this)}static create(L){let it=new j(L.doc?L.doc.type.schema:L.schema,L.plugins),ct=new At(it);for(let st=0;st<it.fields.length;st++)ct[it.fields[st].name]=it.fields[st].init(L,ct);return ct}reconfigure(L){let it=new j(this.schema,L.plugins),ct=it.fields,st=new At(it);for(let J=0;J<ct.length;J++){let Q=ct[J].name;st[Q]=this.hasOwnProperty(Q)?this[Q]:ct[J].init(L,st)}return st}toJSON(L){let it={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(it.storedMarks=this.storedMarks.map(ct=>ct.toJSON())),L&&"object"==typeof L)for(let ct in L){if("doc"==ct||"selection"==ct)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let st=L[ct],J=st.spec.state;J&&J.toJSON&&(it[ct]=J.toJSON.call(st,this[st.key]))}return it}static fromJSON(L,it,ct){if(!it)throw new RangeError("Invalid input for EditorState.fromJSON");if(!L.schema)throw new RangeError("Required config field 'schema' missing");let st=new j(L.schema,L.plugins),J=new At(st);return st.fields.forEach(Q=>{if("doc"==Q.name)J.doc=v.NB.fromJSON(L.schema,it.doc);else if("selection"==Q.name)J.selection=P.fromJSON(J.doc,it.selection);else if("storedMarks"==Q.name)it.storedMarks&&(J.storedMarks=it.storedMarks.map(L.schema.markFromJSON));else{if(ct)for(let nt in ct){let wt=ct[nt],Jt=wt.spec.state;if(wt.key==Q.name&&Jt&&Jt.fromJSON&&Object.prototype.hasOwnProperty.call(it,nt))return void(J[Q.name]=Jt.fromJSON.call(wt,L,it[nt],J))}J[Q.name]=Q.init(L,J)}}),J}}function kt(ut,L,it){for(let ct in ut){let st=ut[ct];st instanceof Function?st=st.bind(L):"handleDOMEvents"==ct&&(st=kt(st,L,{})),it[ct]=st}return it}class yt{constructor(L){this.spec=L,this.props={},L.props&&kt(L.props,this,this.props),this.key=L.key?L.key.key:Ht("plugin")}getState(L){return L[this.key]}}const Bt=Object.create(null);function Ht(ut){return ut in Bt?ut+"$"+ ++Bt[ut]:(Bt[ut]=0,ut+"$")}class Kt{constructor(L="key"){this.key=Ht(L)}get(L){return L.config.pluginsByKey[this.key]}getState(L){return L[this.key]}}},38480:(Yt,vt,c)=>{c.d(vt,{Ax:()=>Jt,FC:()=>j,GJ:()=>ue,Mn:()=>ne,Pu:()=>mt,dR:()=>Je,k9:()=>Kt,nd:()=>L,nj:()=>he,vs:()=>rt,wx:()=>Ee});var v=c(77346);const y=Math.pow(2,16);function P(gt,b){return gt+b*y}function g(gt){return 65535&gt}class dt{constructor(b,O,k){this.pos=b,this.delInfo=O,this.recover=k}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class Mt{constructor(b,O=!1){if(this.ranges=b,this.inverted=O,!b.length&&Mt.empty)return Mt.empty}recover(b){let O=0,k=g(b);if(!this.inverted)for(let w=0;w<k;w++)O+=this.ranges[3*w+2]-this.ranges[3*w+1];return this.ranges[3*k]+O+((gt=b)-(65535&gt))/y;var gt}mapResult(b,O=1){return this._map(b,O,!1)}map(b,O=1){return this._map(b,O,!0)}_map(b,O,k){let w=0,V=this.inverted?2:1,z=this.inverted?1:2;for(let bt=0;bt<this.ranges.length;bt+=3){let Rt=this.ranges[bt]-(this.inverted?w:0);if(Rt>b)break;let U=this.ranges[bt+V],a=this.ranges[bt+z],p=Rt+U;if(b<=p){let D=Rt+w+((U?b==Rt?-1:b==p?1:O:O)<0?0:a);if(k)return D;let I=b==(O<0?Rt:p)?null:P(bt/3,b-Rt),K=b==Rt?2:b==p?1:4;return(O<0?b!=Rt:b!=p)&&(K|=8),new dt(D,K,I)}w+=a-U}return k?b+w:new dt(b+w,0,null)}touches(b,O){let k=0,w=g(O),V=this.inverted?2:1,z=this.inverted?1:2;for(let bt=0;bt<this.ranges.length;bt+=3){let Rt=this.ranges[bt]-(this.inverted?k:0);if(Rt>b)break;let U=this.ranges[bt+V];if(b<=Rt+U&&bt==3*w)return!0;k+=this.ranges[bt+z]-U}return!1}forEach(b){let O=this.inverted?2:1,k=this.inverted?1:2;for(let w=0,V=0;w<this.ranges.length;w+=3){let z=this.ranges[w],bt=z-(this.inverted?V:0),Rt=z+(this.inverted?0:V),U=this.ranges[w+O],a=this.ranges[w+k];b(bt,bt+U,Rt,Rt+a),V+=a-U}}invert(){return new Mt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(b){return 0==b?Mt.empty:new Mt(b<0?[0,-b,0]:[0,0,b])}}Mt.empty=new Mt([]);class rt{constructor(b=[],O,k=0,w=b.length){this.maps=b,this.mirror=O,this.from=k,this.to=w}slice(b=0,O=this.maps.length){return new rt(this.maps,this.mirror,b,O)}copy(){return new rt(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(b,O){this.to=this.maps.push(b),null!=O&&this.setMirror(this.maps.length-1,O)}appendMapping(b){for(let O=0,k=this.maps.length;O<b.maps.length;O++){let w=b.getMirror(O);this.appendMap(b.maps[O],null!=w&&w<O?k+w:void 0)}}getMirror(b){if(this.mirror)for(let O=0;O<this.mirror.length;O++)if(this.mirror[O]==b)return this.mirror[O+(O%2?-1:1)]}setMirror(b,O){this.mirror||(this.mirror=[]),this.mirror.push(b,O)}appendMappingInverted(b){for(let O=b.maps.length-1,k=this.maps.length+b.maps.length;O>=0;O--){let w=b.getMirror(O);this.appendMap(b.maps[O].invert(),null!=w&&w>O?k-w-1:void 0)}}invert(){let b=new rt;return b.appendMappingInverted(this),b}map(b,O=1){if(this.mirror)return this._map(b,O,!0);for(let k=this.from;k<this.to;k++)b=this.maps[k].map(b,O);return b}mapResult(b,O=1){return this._map(b,O,!1)}_map(b,O,k){let w=0;for(let V=this.from;V<this.to;V++){let bt=this.maps[V].mapResult(b,O);if(null!=bt.recover){let Rt=this.getMirror(V);if(null!=Rt&&Rt>V&&Rt<this.to){V=Rt,b=this.maps[Rt].recover(bt.recover);continue}}w|=bt.delInfo,b=bt.pos}return k?b:new dt(b,w,null)}}const ft=Object.create(null);class Ot{getMap(){return Mt.empty}merge(b){return null}static fromJSON(b,O){if(!O||!O.stepType)throw new RangeError("Invalid input for Step.fromJSON");let k=ft[O.stepType];if(!k)throw new RangeError(`No step type ${O.stepType} defined`);return k.fromJSON(b,O)}static jsonID(b,O){if(b in ft)throw new RangeError("Duplicate use of step JSON ID "+b);return ft[b]=O,O.prototype.jsonID=b,O}}class St{constructor(b,O){this.doc=b,this.failed=O}static ok(b){return new St(b,null)}static fail(b){return new St(null,b)}static fromReplace(b,O,k,w){try{return St.ok(b.replace(O,k,w))}catch(V){if(V instanceof v.e4)return St.fail(V.message);throw V}}}function Pt(gt,b,O){let k=[];for(let w=0;w<gt.childCount;w++){let V=gt.child(w);V.content.size&&(V=V.copy(Pt(V.content,b,V))),V.isInline&&(V=b(V,O,w)),k.push(V)}return v.HY.fromArray(k)}class Dt extends Ot{constructor(b,O,k){super(),this.from=b,this.to=O,this.mark=k}apply(b){let O=b.slice(this.from,this.to),k=b.resolve(this.from),w=k.node(k.sharedDepth(this.to)),V=new v.p2(Pt(O.content,(z,bt)=>z.isAtom&&bt.type.allowsMarkType(this.mark.type)?z.mark(this.mark.addToSet(z.marks)):z,w),O.openStart,O.openEnd);return St.fromReplace(b,this.from,this.to,V)}invert(){return new pt(this.from,this.to,this.mark)}map(b){let O=b.mapResult(this.from,1),k=b.mapResult(this.to,-1);return O.deleted&&k.deleted||O.pos>=k.pos?null:new Dt(O.pos,k.pos,this.mark)}merge(b){return b instanceof Dt&&b.mark.eq(this.mark)&&this.from<=b.to&&this.to>=b.from?new Dt(Math.min(this.from,b.from),Math.max(this.to,b.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Dt(O.from,O.to,b.markFromJSON(O.mark))}}Ot.jsonID("addMark",Dt);class pt extends Ot{constructor(b,O,k){super(),this.from=b,this.to=O,this.mark=k}apply(b){let O=b.slice(this.from,this.to),k=new v.p2(Pt(O.content,w=>w.mark(this.mark.removeFromSet(w.marks)),b),O.openStart,O.openEnd);return St.fromReplace(b,this.from,this.to,k)}invert(){return new Dt(this.from,this.to,this.mark)}map(b){let O=b.mapResult(this.from,1),k=b.mapResult(this.to,-1);return O.deleted&&k.deleted||O.pos>=k.pos?null:new pt(O.pos,k.pos,this.mark)}merge(b){return b instanceof pt&&b.mark.eq(this.mark)&&this.from<=b.to&&this.to>=b.from?new pt(Math.min(this.from,b.from),Math.max(this.to,b.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new pt(O.from,O.to,b.markFromJSON(O.mark))}}Ot.jsonID("removeMark",pt);class tt extends Ot{constructor(b,O){super(),this.pos=b,this.mark=O}apply(b){let O=b.nodeAt(this.pos);if(!O)return St.fail("No node at mark step's position");let k=O.type.create(O.attrs,null,this.mark.addToSet(O.marks));return St.fromReplace(b,this.pos,this.pos+1,new v.p2(v.HY.from(k),0,O.isLeaf?0:1))}invert(b){let O=b.nodeAt(this.pos);if(O){let k=this.mark.addToSet(O.marks);if(k.length==O.marks.length){for(let w=0;w<O.marks.length;w++)if(!O.marks[w].isInSet(k))return new tt(this.pos,O.marks[w]);return new tt(this.pos,this.mark)}}return new F(this.pos,this.mark)}map(b){let O=b.mapResult(this.pos,1);return O.deletedAfter?null:new tt(O.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(b,O){if("number"!=typeof O.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new tt(O.pos,b.markFromJSON(O.mark))}}Ot.jsonID("addNodeMark",tt);class F extends Ot{constructor(b,O){super(),this.pos=b,this.mark=O}apply(b){let O=b.nodeAt(this.pos);if(!O)return St.fail("No node at mark step's position");let k=O.type.create(O.attrs,null,this.mark.removeFromSet(O.marks));return St.fromReplace(b,this.pos,this.pos+1,new v.p2(v.HY.from(k),0,O.isLeaf?0:1))}invert(b){let O=b.nodeAt(this.pos);return O&&this.mark.isInSet(O.marks)?new tt(this.pos,this.mark):this}map(b){let O=b.mapResult(this.pos,1);return O.deletedAfter?null:new F(O.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(b,O){if("number"!=typeof O.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new F(O.pos,b.markFromJSON(O.mark))}}Ot.jsonID("removeNodeMark",F);class mt extends Ot{constructor(b,O,k,w=!1){super(),this.from=b,this.to=O,this.slice=k,this.structure=w}apply(b){return this.structure&&At(b,this.from,this.to)?St.fail("Structure replace would overwrite content"):St.fromReplace(b,this.from,this.to,this.slice)}getMap(){return new Mt([this.from,this.to-this.from,this.slice.size])}invert(b){return new mt(this.from,this.from+this.slice.size,b.slice(this.from,this.to))}map(b){let O=b.mapResult(this.from,1),k=b.mapResult(this.to,-1);return O.deletedAcross&&k.deletedAcross?null:new mt(O.pos,Math.max(O.pos,k.pos),this.slice)}merge(b){if(!(b instanceof mt)||b.structure||this.structure)return null;if(this.from+this.slice.size!=b.from||this.slice.openEnd||b.slice.openStart){if(b.to!=this.from||this.slice.openStart||b.slice.openEnd)return null;{let O=this.slice.size+b.slice.size==0?v.p2.empty:new v.p2(b.slice.content.append(this.slice.content),b.slice.openStart,this.slice.openEnd);return new mt(b.from,this.to,O,this.structure)}}{let O=this.slice.size+b.slice.size==0?v.p2.empty:new v.p2(this.slice.content.append(b.slice.content),this.slice.openStart,b.slice.openEnd);return new mt(this.from,this.to+(b.to-b.from),O,this.structure)}}toJSON(){let b={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(b.slice=this.slice.toJSON()),this.structure&&(b.structure=!0),b}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new mt(O.from,O.to,v.p2.fromJSON(b,O.slice),!!O.structure)}}Ot.jsonID("replace",mt);class j extends Ot{constructor(b,O,k,w,V,z,bt=!1){super(),this.from=b,this.to=O,this.gapFrom=k,this.gapTo=w,this.slice=V,this.insert=z,this.structure=bt}apply(b){if(this.structure&&(At(b,this.from,this.gapFrom)||At(b,this.gapTo,this.to)))return St.fail("Structure gap-replace would overwrite content");let O=b.slice(this.gapFrom,this.gapTo);if(O.openStart||O.openEnd)return St.fail("Gap is not a flat range");let k=this.slice.insertAt(this.insert,O.content);return k?St.fromReplace(b,this.from,this.to,k):St.fail("Content does not fit in gap")}getMap(){return new Mt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(b){let O=this.gapTo-this.gapFrom;return new j(this.from,this.from+this.slice.size+O,this.from+this.insert,this.from+this.insert+O,b.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(b){let O=b.mapResult(this.from,1),k=b.mapResult(this.to,-1),w=b.map(this.gapFrom,-1),V=b.map(this.gapTo,1);return O.deletedAcross&&k.deletedAcross||w<O.pos||V>k.pos?null:new j(O.pos,k.pos,w,V,this.slice,this.insert,this.structure)}toJSON(){let b={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(b.slice=this.slice.toJSON()),this.structure&&(b.structure=!0),b}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to||"number"!=typeof O.gapFrom||"number"!=typeof O.gapTo||"number"!=typeof O.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new j(O.from,O.to,O.gapFrom,O.gapTo,v.p2.fromJSON(b,O.slice),O.insert,!!O.structure)}}function At(gt,b,O){let k=gt.resolve(b),w=O-b,V=k.depth;for(;w>0&&V>0&&k.indexAfter(V)==k.node(V).childCount;)V--,w--;if(w>0){let z=k.node(V).maybeChild(k.indexAfter(V));for(;w>0;){if(!z||z.isLeaf)return!0;z=z.firstChild,w--}}return!1}function Ht(gt,b,O){return(0==b||gt.canReplace(b,gt.childCount))&&(O==gt.childCount||gt.canReplace(0,O))}function Kt(gt){let O=gt.parent.content.cutByIndex(gt.startIndex,gt.endIndex);for(let k=gt.depth;;--k){let w=gt.$from.node(k),V=gt.$from.index(k),z=gt.$to.indexAfter(k);if(k<gt.depth&&w.canReplace(V,z,O))return k;if(0==k||w.type.spec.isolating||!Ht(w,V,z))break}return null}function L(gt,b,O=null,k=gt){let w=function(gt,b){let{parent:O,startIndex:k,endIndex:w}=gt,V=O.contentMatchAt(k).findWrapping(b);return V&&O.canReplaceWith(k,w,V.length?V[0]:b)?V:null}(gt,b),V=w&&function(gt,b){let{parent:O,startIndex:k,endIndex:w}=gt,V=O.child(k),z=b.contentMatch.findWrapping(V.type);if(!z)return null;let Rt=(z.length?z[z.length-1]:b).contentMatch;for(let U=k;Rt&&U<w;U++)Rt=Rt.matchType(O.child(U).type);return Rt&&Rt.validEnd?z:null}(k,b);return V?w.map(it).concat({type:b,attrs:O}).concat(V.map(it)):null}function it(gt){return{type:gt,attrs:null}}function Jt(gt,b,O=1,k){let w=gt.resolve(b),V=w.depth-O,z=k&&k[k.length-1]||w.parent;if(V<0||w.parent.type.spec.isolating||!w.parent.canReplace(w.index(),w.parent.childCount)||!z.type.validContent(w.parent.content.cutByIndex(w.index(),w.parent.childCount)))return!1;for(let U=w.depth-1,a=O-2;U>V;U--,a--){let p=w.node(U),E=w.index(U);if(p.type.spec.isolating)return!1;let D=p.content.cutByIndex(E,p.childCount),I=k&&k[a]||p;if(I!=p&&(D=D.replaceChild(0,I.type.create(I.attrs))),!p.canReplace(E+1,p.childCount)||!I.type.validContent(D))return!1}let bt=w.indexAfter(V),Rt=k&&k[0];return w.node(V).canReplaceWith(bt,bt,Rt?Rt.type:w.node(V+1).type)}function ne(gt,b){let O=gt.resolve(b),k=O.index();return zt(O.nodeBefore,O.nodeAfter)&&O.parent.canReplace(k,k+1)}function zt(gt,b){return!(!gt||!b||gt.isLeaf||!gt.canAppend(b))}function ue(gt,b,O=-1){let k=gt.resolve(b);for(let w=k.depth;;w--){let V,z,bt=k.index(w);if(w==k.depth?(V=k.nodeBefore,z=k.nodeAfter):O>0?(V=k.node(w+1),bt++,z=k.node(w).maybeChild(bt)):(V=k.node(w).maybeChild(bt-1),z=k.node(w+1)),V&&!V.isTextblock&&zt(V,z)&&k.node(w).canReplace(bt,bt+1))return b;if(0==w)break;b=O<0?k.before(w):k.after(w)}}function he(gt,b,O){let k=gt.resolve(b);if(!O.content.size)return b;let w=O.content;for(let V=0;V<O.openStart;V++)w=w.firstChild.content;for(let V=1;V<=(0==O.openStart&&O.size?2:1);V++)for(let z=k.depth;z>=0;z--){let bt=z==k.depth?0:k.pos<=(k.start(z+1)+k.end(z+1))/2?-1:1,Rt=k.index(z)+(bt>0?1:0),U=k.node(z),a=!1;if(1==V)a=U.canReplace(Rt,Rt,w);else{let p=U.contentMatchAt(Rt).findWrapping(w.firstChild.type);a=p&&U.canReplaceWith(Rt,Rt,p[0])}if(a)return 0==bt?k.pos:bt<0?k.before(z+1):k.after(z+1)}return null}function Je(gt,b,O=b,k=v.p2.empty){if(b==O&&!k.size)return null;let w=gt.resolve(b),V=gt.resolve(O);return xe(w,V,k)?new mt(b,O,k):new Be(w,V,k).fit()}function xe(gt,b,O){return!O.openStart&&!O.openEnd&&gt.start()==b.start()&&gt.parent.canReplace(gt.index(),b.index(),O.content)}Ot.jsonID("replaceAround",j);class Be{constructor(b,O,k){this.$from=b,this.$to=O,this.unplaced=k,this.frontier=[],this.placed=v.HY.empty;for(let w=0;w<=b.depth;w++){let V=b.node(w);this.frontier.push({type:V.type,match:V.contentMatchAt(b.indexAfter(w))})}for(let w=b.depth;w>0;w--)this.placed=v.HY.from(b.node(w).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let U=this.findFittable();U?this.placeNodes(U):this.openMore()||this.dropNode()}let b=this.mustMoveInline(),O=this.placed.size-this.depth-this.$from.depth,k=this.$from,w=this.close(b<0?this.$to:k.doc.resolve(b));if(!w)return null;let V=this.placed,z=k.depth,bt=w.depth;for(;z&&bt&&1==V.childCount;)V=V.firstChild.content,z--,bt--;let Rt=new v.p2(V,z,bt);return b>-1?new j(k.pos,b,this.$to.pos,this.$to.end(),Rt,O):Rt.size||k.pos!=this.$to.pos?new mt(k.pos,w.pos,Rt):null}findFittable(){let b=this.unplaced.openStart;for(let O=this.unplaced.content,k=0,w=this.unplaced.openEnd;k<b;k++){let V=O.firstChild;if(O.childCount>1&&(w=0),V.type.spec.isolating&&w<=k){b=k;break}O=V.content}for(let O=1;O<=2;O++)for(let k=1==O?b:this.unplaced.openStart;k>=0;k--){let w,V=null;k?(V=ve(this.unplaced.content,k-1).firstChild,w=V.content):w=this.unplaced.content;let z=w.firstChild;for(let bt=this.depth;bt>=0;bt--){let a,{type:Rt,match:U}=this.frontier[bt],p=null;if(1==O&&(z?U.matchType(z.type)||(p=U.fillBefore(v.HY.from(z),!1)):V&&Rt.compatibleContent(V.type)))return{sliceDepth:k,frontierDepth:bt,parent:V,inject:p};if(2==O&&z&&(a=U.findWrapping(z.type)))return{sliceDepth:k,frontierDepth:bt,parent:V,wrap:a};if(V&&U.matchType(V.type))break}}}openMore(){let{content:b,openStart:O,openEnd:k}=this.unplaced,w=ve(b,O);return!(!w.childCount||w.firstChild.isLeaf||(this.unplaced=new v.p2(b,O+1,Math.max(k,w.size+O>=b.size-k?O+1:0)),0))}dropNode(){let{content:b,openStart:O,openEnd:k}=this.unplaced,w=ve(b,O);if(w.childCount<=1&&O>0){let V=b.size-O<=O+w.size;this.unplaced=new v.p2(ge(b,O-1,1),O-1,V?O-1:k)}else this.unplaced=new v.p2(ge(b,O,1),O,k)}placeNodes({sliceDepth:b,frontierDepth:O,parent:k,inject:w,wrap:V}){for(;this.depth>O;)this.closeFrontierNode();if(V)for(let K=0;K<V.length;K++)this.openFrontierNode(V[K]);let z=this.unplaced,bt=k?k.content:z.content,Rt=z.openStart-b,U=0,a=[],{match:p,type:E}=this.frontier[O];if(w){for(let K=0;K<w.childCount;K++)a.push(w.child(K));p=p.matchFragment(w)}let D=bt.size+b-(z.content.size-z.openEnd);for(;U<bt.childCount;){let K=bt.child(U),at=p.matchType(K.type);if(!at)break;U++,(U>1||0==Rt||K.content.size)&&(p=at,a.push(Pe(K.mark(E.allowedMarks(K.marks)),1==U?Rt:0,U==bt.childCount?D:-1)))}let I=U==bt.childCount;I||(D=-1),this.placed=Ae(this.placed,O,v.HY.from(a)),this.frontier[O].match=p,I&&D<0&&k&&k.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let K=0,at=bt;K<D;K++){let Lt=at.lastChild;this.frontier.push({type:Lt.type,match:Lt.contentMatchAt(Lt.childCount)}),at=Lt.content}this.unplaced=I?0==b?v.p2.empty:new v.p2(ge(z.content,b-1,1),b-1,D<0?z.openEnd:b-1):new v.p2(ge(z.content,b,U),z.openStart,z.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let O,b=this.frontier[this.depth];if(!b.type.isTextblock||!Ne(this.$to,this.$to.depth,b.type,b.match,!1)||this.$to.depth==this.depth&&(O=this.findCloseLevel(this.$to))&&O.depth==this.depth)return-1;let{depth:k}=this.$to,w=this.$to.after(k);for(;k>1&&w==this.$to.end(--k);)++w;return w}findCloseLevel(b){t:for(let O=Math.min(this.depth,b.depth);O>=0;O--){let{match:k,type:w}=this.frontier[O],V=O<b.depth&&b.end(O+1)==b.pos+(b.depth-(O+1)),z=Ne(b,O,w,k,V);if(z){for(let bt=O-1;bt>=0;bt--){let{match:Rt,type:U}=this.frontier[bt],a=Ne(b,bt,U,Rt,!0);if(!a||a.childCount)continue t}return{depth:O,fit:z,move:V?b.doc.resolve(b.after(O+1)):b}}}}close(b){let O=this.findCloseLevel(b);if(!O)return null;for(;this.depth>O.depth;)this.closeFrontierNode();O.fit.childCount&&(this.placed=Ae(this.placed,O.depth,O.fit)),b=O.move;for(let k=O.depth+1;k<=b.depth;k++){let w=b.node(k),V=w.type.contentMatch.fillBefore(w.content,!0,b.index(k));this.openFrontierNode(w.type,w.attrs,V)}return b}openFrontierNode(b,O=null,k){let w=this.frontier[this.depth];w.match=w.match.matchType(b),this.placed=Ae(this.placed,this.depth,v.HY.from(b.create(O,k))),this.frontier.push({type:b,match:b.contentMatch})}closeFrontierNode(){let O=this.frontier.pop().match.fillBefore(v.HY.empty,!0);O.childCount&&(this.placed=Ae(this.placed,this.frontier.length,O))}}function ge(gt,b,O){return 0==b?gt.cutByIndex(O,gt.childCount):gt.replaceChild(0,gt.firstChild.copy(ge(gt.firstChild.content,b-1,O)))}function Ae(gt,b,O){return 0==b?gt.append(O):gt.replaceChild(gt.childCount-1,gt.lastChild.copy(Ae(gt.lastChild.content,b-1,O)))}function ve(gt,b){for(let O=0;O<b;O++)gt=gt.firstChild.content;return gt}function Pe(gt,b,O){if(b<=0)return gt;let k=gt.content;return b>1&&(k=k.replaceChild(0,Pe(k.firstChild,b-1,1==k.childCount?O-1:0))),b>0&&(k=gt.type.contentMatch.fillBefore(k).append(k),O<=0&&(k=k.append(gt.type.contentMatch.matchFragment(k).fillBefore(v.HY.empty,!0)))),gt.copy(k)}function Ne(gt,b,O,k,w){let V=gt.node(b),z=w?gt.indexAfter(b):gt.index(b);if(z==V.childCount&&!O.compatibleContent(V.type))return null;let bt=k.fillBefore(V.content,!0,z);return bt&&!function(gt,b,O){for(let k=O;k<b.childCount;k++)if(!gt.allowsMarks(b.child(k).marks))return!0;return!1}(O,V.content,z)?bt:null}function Ie(gt){return gt.spec.defining||gt.spec.definingForContent}function He(gt,b,O,k,w){if(b<O){let V=gt.firstChild;gt=gt.replaceChild(0,V.copy(He(V.content,b+1,O,k,V)))}if(b>k){let V=w.contentMatchAt(0),z=V.fillBefore(gt).append(gt);gt=z.append(V.matchFragment(z).fillBefore(v.HY.empty,!0))}return gt}function ze(gt,b){let O=[];for(let w=Math.min(gt.depth,b.depth);w>=0;w--){let V=gt.start(w);if(V<gt.pos-(gt.depth-w)||b.end(w)>b.pos+(b.depth-w)||gt.node(w).type.spec.isolating||b.node(w).type.spec.isolating)break;(V==b.start(w)||w==gt.depth&&w==b.depth&&gt.parent.inlineContent&&b.parent.inlineContent&&w&&b.start(w-1)==V-1)&&O.push(w)}return O}class _e extends Ot{constructor(b,O,k){super(),this.pos=b,this.attr=O,this.value=k}apply(b){let O=b.nodeAt(this.pos);if(!O)return St.fail("No node at attribute step's position");let k=Object.create(null);for(let V in O.attrs)k[V]=O.attrs[V];k[this.attr]=this.value;let w=O.type.create(k,null,O.marks);return St.fromReplace(b,this.pos,this.pos+1,new v.p2(v.HY.from(w),0,O.isLeaf?0:1))}getMap(){return Mt.empty}invert(b){return new _e(this.pos,this.attr,b.nodeAt(this.pos).attrs[this.attr])}map(b){let O=b.mapResult(this.pos,1);return O.deletedAfter?null:new _e(O.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(b,O){if("number"!=typeof O.pos||"string"!=typeof O.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new _e(O.pos,O.attr,O.value)}}Ot.jsonID("attr",_e);let fe=class extends Error{};fe=function gt(b){let O=Error.call(this,b);return O.__proto__=gt.prototype,O},(fe.prototype=Object.create(Error.prototype)).constructor=fe,fe.prototype.name="TransformError";class Ee{constructor(b){this.doc=b,this.steps=[],this.docs=[],this.mapping=new rt}get before(){return this.docs.length?this.docs[0]:this.doc}step(b){let O=this.maybeStep(b);if(O.failed)throw new fe(O.failed);return this}maybeStep(b){let O=b.apply(this.doc);return O.failed||this.addStep(b,O.doc),O}get docChanged(){return this.steps.length>0}addStep(b,O){this.docs.push(this.doc),this.steps.push(b),this.mapping.appendMap(b.getMap()),this.doc=O}replace(b,O=b,k=v.p2.empty){let w=Je(this.doc,b,O,k);return w&&this.step(w),this}replaceWith(b,O,k){return this.replace(b,O,new v.p2(v.HY.from(k),0,0))}delete(b,O){return this.replace(b,O,v.p2.empty)}insert(b,O){return this.replaceWith(b,b,O)}replaceRange(b,O,k){return function(gt,b,O,k){if(!k.size)return gt.deleteRange(b,O);let w=gt.doc.resolve(b),V=gt.doc.resolve(O);if(xe(w,V,k))return gt.step(new mt(b,O,k));let z=ze(w,gt.doc.resolve(O));0==z[z.length-1]&&z.pop();let bt=-(w.depth+1);z.unshift(bt);for(let E=w.depth,D=w.pos-1;E>0;E--,D--){let I=w.node(E).type.spec;if(I.defining||I.definingAsContext||I.isolating)break;z.indexOf(E)>-1?bt=E:w.before(E)==D&&z.splice(1,0,-E)}let Rt=z.indexOf(bt),U=[],a=k.openStart;for(let E=k.content,D=0;;D++){let I=E.firstChild;if(U.push(I),D==k.openStart)break;E=I.content}for(let E=a-1;E>=0;E--){let D=U[E].type,I=Ie(D);if(I&&w.node(Rt).type!=D)a=E;else if(I||!D.isTextblock)break}for(let E=k.openStart;E>=0;E--){let D=(E+a+1)%(k.openStart+1),I=U[D];if(I)for(let K=0;K<z.length;K++){let at=z[(K+Rt)%z.length],Lt=!0;at<0&&(Lt=!1,at=-at);let te=w.node(at-1),ee=w.index(at-1);if(te.canReplaceWith(ee,ee,I.type,I.marks))return gt.replace(w.before(at),Lt?V.after(at):O,new v.p2(He(k.content,0,k.openStart,D),D,k.openEnd))}}let p=gt.steps.length;for(let E=z.length-1;E>=0&&(gt.replace(b,O,k),!(gt.steps.length>p));E--){let D=z[E];D<0||(b=w.before(D),O=V.after(D))}}(this,b,O,k),this}replaceRangeWith(b,O,k){return function(gt,b,O,k){if(!k.isInline&&b==O&&gt.doc.resolve(b).parent.content.size){let w=function(gt,b,O){let k=gt.resolve(b);if(k.parent.canReplaceWith(k.index(),k.index(),O))return b;if(0==k.parentOffset)for(let w=k.depth-1;w>=0;w--){let V=k.index(w);if(k.node(w).canReplaceWith(V,V,O))return k.before(w+1);if(V>0)return null}if(k.parentOffset==k.parent.content.size)for(let w=k.depth-1;w>=0;w--){let V=k.indexAfter(w);if(k.node(w).canReplaceWith(V,V,O))return k.after(w+1);if(V<k.node(w).childCount)return null}return null}(gt.doc,b,k.type);null!=w&&(b=O=w)}gt.replaceRange(b,O,new v.p2(v.HY.from(k),0,0))}(this,b,O,k),this}deleteRange(b,O){return function(gt,b,O){let k=gt.doc.resolve(b),w=gt.doc.resolve(O),V=ze(k,w);for(let z=0;z<V.length;z++){let bt=V[z],Rt=z==V.length-1;if(Rt&&0==bt||k.node(bt).type.contentMatch.validEnd)return gt.delete(k.start(bt),w.end(bt));if(bt>0&&(Rt||k.node(bt-1).canReplace(k.index(bt-1),w.indexAfter(bt-1))))return gt.delete(k.before(bt),w.after(bt))}for(let z=1;z<=k.depth&&z<=w.depth;z++)if(b-k.start(z)==k.depth-z&&O>k.end(z)&&w.end(z)-O!=w.depth-z)return gt.delete(k.before(z),O);gt.delete(b,O)}(this,b,O),this}lift(b,O){return function(gt,b,O){let{$from:k,$to:w,depth:V}=b,z=k.before(V+1),bt=w.after(V+1),Rt=z,U=bt,a=v.HY.empty,p=0;for(let I=V,K=!1;I>O;I--)K||k.index(I)>0?(K=!0,a=v.HY.from(k.node(I).copy(a)),p++):Rt--;let E=v.HY.empty,D=0;for(let I=V,K=!1;I>O;I--)K||w.after(I+1)<w.end(I)?(K=!0,E=v.HY.from(w.node(I).copy(E)),D++):U++;gt.step(new j(Rt,U,z,bt,new v.p2(a.append(E),p,D),a.size-p,!0))}(this,b,O),this}join(b,O=1){return function(gt,b,O){let k=new mt(b-O,b+O,v.p2.empty,!0);gt.step(k)}(this,b,O),this}wrap(b,O){return function(gt,b,O){let k=v.HY.empty;for(let z=O.length-1;z>=0;z--){if(k.size){let bt=O[z].type.contentMatch.matchFragment(k);if(!bt||!bt.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}k=v.HY.from(O[z].type.create(O[z].attrs,k))}let w=b.start,V=b.end;gt.step(new j(w,V,w,V,new v.p2(k,0,0),O.length,!0))}(this,b,O),this}setBlockType(b,O=b,k,w=null){return function(gt,b,O,k,w){if(!k.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let V=gt.steps.length;gt.doc.nodesBetween(b,O,(z,bt)=>{if(z.isTextblock&&!z.hasMarkup(k,w)&&function(gt,b,O){let k=gt.resolve(b),w=k.index();return k.parent.canReplaceWith(w,w+1,O)}(gt.doc,gt.mapping.slice(V).map(bt),k)){gt.clearIncompatible(gt.mapping.slice(V).map(bt,1),k);let Rt=gt.mapping.slice(V),U=Rt.map(bt,1),a=Rt.map(bt+z.nodeSize,1);return gt.step(new j(U,a,U+1,a-1,new v.p2(v.HY.from(k.create(w,null,z.marks)),0,0),1,!0)),!1}})}(this,b,O,k,w),this}setNodeMarkup(b,O,k=null,w){return function(gt,b,O,k,w){let V=gt.doc.nodeAt(b);if(!V)throw new RangeError("No node at given position");O||(O=V.type);let z=O.create(k,null,w||V.marks);if(V.isLeaf)return gt.replaceWith(b,b+V.nodeSize,z);if(!O.validContent(V.content))throw new RangeError("Invalid content for node type "+O.name);gt.step(new j(b,b+V.nodeSize,b+1,b+V.nodeSize-1,new v.p2(v.HY.from(z),0,0),1,!0))}(this,b,O,k,w),this}setNodeAttribute(b,O,k){return this.step(new _e(b,O,k)),this}addNodeMark(b,O){return this.step(new tt(b,O)),this}removeNodeMark(b,O){if(!(O instanceof v.vc)){let k=this.doc.nodeAt(b);if(!k)throw new RangeError("No node at position "+b);if(!(O=O.isInSet(k.marks)))return this}return this.step(new F(b,O)),this}split(b,O=1,k){return function(gt,b,O=1,k){let w=gt.doc.resolve(b),V=v.HY.empty,z=v.HY.empty;for(let bt=w.depth,Rt=w.depth-O,U=O-1;bt>Rt;bt--,U--){V=v.HY.from(w.node(bt).copy(V));let a=k&&k[U];z=v.HY.from(a?a.type.create(a.attrs,z):w.node(bt).copy(z))}gt.step(new mt(b,b,new v.p2(V.append(z),O,O),!0))}(this,b,O,k),this}addMark(b,O,k){return function(gt,b,O,k){let z,bt,w=[],V=[];gt.doc.nodesBetween(b,O,(Rt,U,a)=>{if(!Rt.isInline)return;let p=Rt.marks;if(!k.isInSet(p)&&a.type.allowsMarkType(k.type)){let E=Math.max(U,b),D=Math.min(U+Rt.nodeSize,O),I=k.addToSet(p);for(let K=0;K<p.length;K++)p[K].isInSet(I)||(z&&z.to==E&&z.mark.eq(p[K])?z.to=D:w.push(z=new pt(E,D,p[K])));bt&&bt.to==E?bt.to=D:V.push(bt=new Dt(E,D,k))}}),w.forEach(Rt=>gt.step(Rt)),V.forEach(Rt=>gt.step(Rt))}(this,b,O,k),this}removeMark(b,O,k){return function(gt,b,O,k){let w=[],V=0;gt.doc.nodesBetween(b,O,(z,bt)=>{if(!z.isInline)return;V++;let Rt=null;if(k instanceof v.ZU){let a,U=z.marks;for(;a=k.isInSet(U);)(Rt||(Rt=[])).push(a),U=a.removeFromSet(U)}else k?k.isInSet(z.marks)&&(Rt=[k]):Rt=z.marks;if(Rt&&Rt.length){let U=Math.min(bt+z.nodeSize,O);for(let a=0;a<Rt.length;a++){let E,p=Rt[a];for(let D=0;D<w.length;D++){let I=w[D];I.step==V-1&&p.eq(w[D].style)&&(E=I)}E?(E.to=U,E.step=V):w.push({style:p,from:Math.max(bt,b),to:U,step:V})}}}),w.forEach(z=>gt.step(new pt(z.from,z.to,z.style)))}(this,b,O,k),this}clearIncompatible(b,O,k){return function(gt,b,O,k=O.contentMatch){let w=gt.doc.nodeAt(b),V=[],z=b+1;for(let bt=0;bt<w.childCount;bt++){let Rt=w.child(bt),U=z+Rt.nodeSize,a=k.matchType(Rt.type);if(a){k=a;for(let p=0;p<Rt.marks.length;p++)O.allowsMarkType(Rt.marks[p].type)||gt.step(new pt(z,U,Rt.marks[p]))}else V.push(new mt(z,U,v.p2.empty));z=U}if(!k.validEnd){let bt=k.fillBefore(v.HY.empty,!0);gt.replace(z,z,new v.p2(bt,0,0))}for(let bt=V.length-1;bt>=0;bt--)gt.step(V[bt])}(this,b,O,k),this}}},43594:(Yt,vt,c)=>{c.d(vt,{EH:()=>Ze,p:()=>on,tk:()=>Ro});var v=c(62463),l=c(77346),y=c(38480);const P=function(r){for(var o=0;;o++)if(!(r=r.previousSibling))return o},g=function(r){let o=r.assignedSlot||r.parentNode;return o&&11==o.nodeType?o.host:o};let ot=null;const H=function(r,o,s){let d=ot||(ot=document.createRange());return d.setEnd(r,null==s?r.nodeValue.length:s),d.setStart(r,o||0),d},X=function(r,o,s,d){return s&&(_t(r,o,s,d,-1)||_t(r,o,s,d,1))},et=/^(img|br|input|textarea|hr)$/i;function _t(r,o,s,d,e){for(;;){if(r==s&&o==d)return!0;if(o==(e<0?0:dt(r))){let t=r.parentNode;if(!t||1!=t.nodeType||rt(r)||et.test(r.nodeName)||"false"==r.contentEditable)return!1;o=P(r)+(e<0?0:1),r=t}else{if(1!=r.nodeType)return!1;if("false"==(r=r.childNodes[o+(e<0?-1:0)]).contentEditable)return!1;o=e<0?dt(r):0}}}function dt(r){return 3==r.nodeType?r.nodeValue.length:r.childNodes.length}function rt(r){let o;for(let s=r;s&&!(o=s.pmViewDesc);s=s.parentNode);return o&&o.node&&o.node.isBlock&&(o.dom==r||o.contentDOM==r)}const ft=function(r){return r.focusNode&&X(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)};function Ot(r,o){let s=document.createEvent("Event");return s.initEvent("keydown",!0,!0),s.keyCode=r,s.key=s.code=o,s}const Pt="undefined"!=typeof navigator?navigator:null,Dt="undefined"!=typeof document?document:null,pt=Pt&&Pt.userAgent||"",tt=/Edge\/(\d+)/.exec(pt),F=/MSIE \d/.exec(pt),mt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(pt),j=!!(F||mt||tt),At=F?document.documentMode:mt?+mt[1]:tt?+tt[1]:0,kt=!j&&/gecko\/(\d+)/i.test(pt);kt&&/Firefox\/(\d+)/.exec(pt);const yt=!j&&/Chrome\/(\d+)/.exec(pt),Bt=!!yt,Ht=yt?+yt[1]:0,Kt=!j&&!!Pt&&/Apple Computer/.test(Pt.vendor),ut=Kt&&(/Mobile\/\w+/.test(pt)||!!Pt&&Pt.maxTouchPoints>2),L=ut||!!Pt&&/Mac/.test(Pt.platform),it=/Android \d/.test(pt),ct=!!Dt&&"webkitFontSmoothing"in Dt.documentElement.style,st=ct?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function J(r){return{left:0,right:r.documentElement.clientWidth,top:0,bottom:r.documentElement.clientHeight}}function Q(r,o){return"number"==typeof r?r:r[o]}function nt(r){let o=r.getBoundingClientRect();return{left:o.left,right:o.left+r.clientWidth*(o.width/r.offsetWidth||1),top:o.top,bottom:o.top+r.clientHeight*(o.height/r.offsetHeight||1)}}function wt(r,o,s){let d=r.someProp("scrollThreshold")||0,e=r.someProp("scrollMargin")||5,t=r.dom.ownerDocument;for(let n=s||r.dom;n;n=g(n)){if(1!=n.nodeType)continue;let i=n,u=i==t.body,h=u?J(t):nt(i),T=0,A=0;if(o.top<h.top+Q(d,"top")?A=-(h.top-o.top+Q(e,"top")):o.bottom>h.bottom-Q(d,"bottom")&&(A=o.bottom-h.bottom+Q(e,"bottom")),o.left<h.left+Q(d,"left")?T=-(h.left-o.left+Q(e,"left")):o.right>h.right-Q(d,"right")&&(T=o.right-h.right+Q(e,"right")),T||A)if(u)t.defaultView.scrollBy(T,A);else{let B=i.scrollLeft,N=i.scrollTop;A&&(i.scrollTop+=A),T&&(i.scrollLeft+=T);let Y=i.scrollLeft-B,q=i.scrollTop-N;o={left:o.left-Y,top:o.top-q,right:o.right-Y,bottom:o.bottom-q}}if(u)break}}function Zt(r){let o=[],s=r.ownerDocument;for(let d=r;d&&(o.push({dom:d,top:d.scrollTop,left:d.scrollLeft}),r!=s);d=g(d));return o}function zt(r,o){for(let s=0;s<r.length;s++){let{dom:d,top:e,left:t}=r[s];d.scrollTop!=e+o&&(d.scrollTop=e+o),d.scrollLeft!=t&&(d.scrollLeft=t)}}let ue=null;function Oe(r,o){let s,e,d=2e8,t=0,n=o.top,i=o.top;for(let u=r.firstChild,h=0;u;u=u.nextSibling,h++){let T;if(1==u.nodeType)T=u.getClientRects();else{if(3!=u.nodeType)continue;T=H(u).getClientRects()}for(let A=0;A<T.length;A++){let B=T[A];if(B.top<=n&&B.bottom>=i){n=Math.max(B.bottom,n),i=Math.min(B.top,i);let N=B.left>o.left?B.left-o.left:B.right<o.left?o.left-B.right:0;if(N<d){s=u,d=N,e=N&&3==s.nodeType?{left:B.right<o.left?B.right:B.left,top:o.top}:o,1==u.nodeType&&N&&(t=h+(o.left>=(B.left+B.right)/2?1:0));continue}}!s&&(o.left>=B.right&&o.top>=B.top||o.left>=B.left&&o.top>=B.bottom)&&(t=h+1)}}return s&&3==s.nodeType?function(r,o){let s=r.nodeValue.length,d=document.createRange();for(let e=0;e<s;e++){d.setEnd(r,e+1),d.setStart(r,e);let t=Pe(d,1);if(t.top!=t.bottom&&Je(o,t))return{node:r,offset:e+(o.left>=(t.left+t.right)/2?1:0)}}return{node:r,offset:0}}(s,e):!s||d&&1==s.nodeType?{node:r,offset:t}:Oe(s,e)}function Je(r,o){return r.left>=o.left-1&&r.left<=o.right+1&&r.top>=o.top-1&&r.top<=o.bottom+1}function Ae(r,o,s){let d=r.childNodes.length;if(d&&s.top<s.bottom)for(let e=Math.max(0,Math.min(d-1,Math.floor(d*(o.top-s.top)/(s.bottom-s.top))-2)),t=e;;){let n=r.childNodes[t];if(1==n.nodeType){let i=n.getClientRects();for(let u=0;u<i.length;u++){let h=i[u];if(Je(o,h))return Ae(n,o,h)}}if((t=(t+1)%d)==e)break}return r}function ve(r,o){let d,s=r.dom.ownerDocument,e=0;if(s.caretPositionFromPoint)try{let u=s.caretPositionFromPoint(o.left,o.top);u&&({offsetNode:d,offset:e}=u)}catch(u){}if(!d&&s.caretRangeFromPoint){let u=s.caretRangeFromPoint(o.left,o.top);u&&({startContainer:d,startOffset:e}=u)}let n,t=(r.root.elementFromPoint?r.root:s).elementFromPoint(o.left,o.top);if(!t||!r.dom.contains(1!=t.nodeType?t.parentNode:t)){let u=r.dom.getBoundingClientRect();if(!Je(o,u)||(t=Ae(r.dom,o,u),!t))return null}if(Kt)for(let u=t;d&&u;u=g(u))u.draggable&&(d=void 0);if(t=function(r,o){let s=r.parentNode;return s&&/^li$/i.test(s.nodeName)&&o.left<r.getBoundingClientRect().left?s:r}(t,o),d){if(kt&&1==d.nodeType&&(e=Math.min(e,d.childNodes.length),e<d.childNodes.length)){let h,u=d.childNodes[e];"IMG"==u.nodeName&&(h=u.getBoundingClientRect()).right<=o.left&&h.bottom>o.top&&e++}d==r.dom&&e==d.childNodes.length-1&&1==d.lastChild.nodeType&&o.top>d.lastChild.getBoundingClientRect().bottom?n=r.state.doc.content.size:(0==e||1!=d.nodeType||"BR"!=d.childNodes[e-1].nodeName)&&(n=function(r,o,s,d){let e=-1;for(let t=o,n=!1;t!=r.dom;){let i=r.docView.nearestDesc(t,!0);if(!i)return null;if(1==i.dom.nodeType&&(i.node.isBlock&&i.parent&&!n||!i.contentDOM)){let u=i.dom.getBoundingClientRect();if(i.node.isBlock&&i.parent&&!n&&(n=!0,u.left>d.left||u.top>d.top?e=i.posBefore:(u.right<d.left||u.bottom<d.top)&&(e=i.posAfter)),!i.contentDOM&&e<0)return(i.node.isBlock?d.top<(u.top+u.bottom)/2:d.left<(u.left+u.right)/2)?i.posBefore:i.posAfter}t=i.dom.parentNode}return e>-1?e:r.docView.posFromDOM(o,s,-1)}(r,d,e,o))}null==n&&(n=function(r,o,s){let{node:d,offset:e}=Oe(o,s),t=-1;if(1==d.nodeType&&!d.firstChild){let n=d.getBoundingClientRect();t=n.left!=n.right&&s.left>(n.left+n.right)/2?1:-1}return r.docView.posFromDOM(d,e,t)}(r,t,o));let i=r.docView.nearestDesc(t,!0);return{pos:n,inside:i?i.posAtStart-i.border:-1}}function Pe(r,o){let s=r.getClientRects();return s.length?s[o<0?0:s.length-1]:r.getBoundingClientRect()}const Ne=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Me(r,o,s){let{node:d,offset:e,atom:t}=r.docView.domFromPos(o,s<0?-1:1),n=ct||kt;if(3==d.nodeType){if(!n||!Ne.test(d.nodeValue)&&(s<0?e:e!=d.nodeValue.length)){let u=e,h=e,T=s<0?1:-1;return s<0&&!e?(h++,T=-1):s>=0&&e==d.nodeValue.length?(u--,T=1):s<0?u--:h++,Ie(Pe(H(d,u,h),1),T<0)}{let u=Pe(H(d,e,e),s);if(kt&&e&&/\s/.test(d.nodeValue[e-1])&&e<d.nodeValue.length){let h=Pe(H(d,e-1,e-1),-1);if(h.top==u.top){let T=Pe(H(d,e,e+1),-1);if(T.top!=u.top)return Ie(T,T.left<h.left)}}return u}}if(!r.state.doc.resolve(o-(t||0)).parent.inlineContent){if(null==t&&e&&(s<0||e==dt(d))){let u=d.childNodes[e-1];if(1==u.nodeType)return Ye(u.getBoundingClientRect(),!1)}if(null==t&&e<dt(d)){let u=d.childNodes[e];if(1==u.nodeType)return Ye(u.getBoundingClientRect(),!0)}return Ye(d.getBoundingClientRect(),s>=0)}if(null==t&&e&&(s<0||e==dt(d))){let u=d.childNodes[e-1],h=3==u.nodeType?H(u,dt(u)-(n?0:1)):1!=u.nodeType||"BR"==u.nodeName&&u.nextSibling?null:u;if(h)return Ie(Pe(h,1),!1)}if(null==t&&e<dt(d)){let u=d.childNodes[e];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let h=u?3==u.nodeType?H(u,0,n?0:1):1==u.nodeType?u:null:null;if(h)return Ie(Pe(h,-1),!0)}return Ie(Pe(3==d.nodeType?H(d):d,-s),s>=0)}function Ie(r,o){if(0==r.width)return r;let s=o?r.left:r.right;return{top:r.top,bottom:r.bottom,left:s,right:s}}function Ye(r,o){if(0==r.height)return r;let s=o?r.top:r.bottom;return{top:s,bottom:s,left:r.left,right:r.right}}function He(r,o,s){let d=r.state,e=r.root.activeElement;d!=o&&r.updateState(o),e!=r.dom&&r.focus();try{return s()}finally{d!=o&&r.updateState(d),e!=r.dom&&e&&e.focus()}}const Le=/[\u0590-\u08ac]/;let _e=null,fe=null,Ee=!1;class V{constructor(o,s,d,e){this.parent=o,this.children=s,this.dom=d,this.contentDOM=e,this.dirty=0,d.pmViewDesc=this}matchesWidget(o){return!1}matchesMark(o){return!1}matchesNode(o,s,d){return!1}matchesHack(o){return!1}parseRule(){return null}stopEvent(o){return!1}get size(){let o=0;for(let s=0;s<this.children.length;s++)o+=this.children[s].size;return o}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let o=0;o<this.children.length;o++)this.children[o].destroy()}posBeforeChild(o){for(let s=0,d=this.posAtStart;;s++){let e=this.children[s];if(e==o)return d;d+=e.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(o,s,d){if(this.contentDOM&&this.contentDOM.contains(1==o.nodeType?o:o.parentNode)){if(d<0){let t,n;if(o==this.contentDOM)t=o.childNodes[s-1];else{for(;o.parentNode!=this.contentDOM;)o=o.parentNode;t=o.previousSibling}for(;t&&(!(n=t.pmViewDesc)||n.parent!=this);)t=t.previousSibling;return t?this.posBeforeChild(n)+n.size:this.posAtStart}{let t,n;if(o==this.contentDOM)t=o.childNodes[s];else{for(;o.parentNode!=this.contentDOM;)o=o.parentNode;t=o.nextSibling}for(;t&&(!(n=t.pmViewDesc)||n.parent!=this);)t=t.nextSibling;return t?this.posBeforeChild(n):this.posAtEnd}}let e;if(o==this.dom&&this.contentDOM)e=s>P(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))e=2&o.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==s)for(let t=o;;t=t.parentNode){if(t==this.dom){e=!1;break}if(t.previousSibling)break}if(null==e&&s==o.childNodes.length)for(let t=o;;t=t.parentNode){if(t==this.dom){e=!0;break}if(t.nextSibling)break}}return(null==e?d>0:e)?this.posAtEnd:this.posAtStart}nearestDesc(o,s=!1){for(let d=!0,e=o;e;e=e.parentNode){let n,t=this.getDesc(e);if(t&&(!s||t.node)){if(!d||!(n=t.nodeDOM)||(1==n.nodeType?n.contains(1==o.nodeType?o:o.parentNode):n==o))return t;d=!1}}}getDesc(o){let s=o.pmViewDesc;for(let d=s;d;d=d.parent)if(d==this)return s}posFromDOM(o,s,d){for(let e=o;e;e=e.parentNode){let t=this.getDesc(e);if(t)return t.localPosFromDOM(o,s,d)}return-1}descAt(o){for(let s=0,d=0;s<this.children.length;s++){let e=this.children[s],t=d+e.size;if(d==o&&t!=d){for(;!e.border&&e.children.length;)e=e.children[0];return e}if(o<t)return e.descAt(o-d-e.border);d=t}}domFromPos(o,s){if(!this.contentDOM)return{node:this.dom,offset:0,atom:o+1};let t,d=0,e=0;for(let t=0;d<this.children.length;d++){let n=this.children[d],i=t+n.size;if(i>o||n instanceof E){e=o-t;break}t=i}if(e)return this.children[d].domFromPos(e-this.children[d].border,s);for(;d&&!(t=this.children[d-1]).size&&t instanceof z&&t.side>=0;d--);if(s<=0){let t,n=!0;for(;t=d?this.children[d-1]:null,t&&t.dom.parentNode!=this.contentDOM;d--,n=!1);return t&&s&&n&&!t.border&&!t.domAtom?t.domFromPos(t.size,s):{node:this.contentDOM,offset:t?P(t.dom)+1:0}}{let t,n=!0;for(;t=d<this.children.length?this.children[d]:null,t&&t.dom.parentNode!=this.contentDOM;d++,n=!1);return t&&n&&!t.border&&!t.domAtom?t.domFromPos(0,s):{node:this.contentDOM,offset:t?P(t.dom):this.contentDOM.childNodes.length}}}parseRange(o,s,d=0){if(0==this.children.length)return{node:this.contentDOM,from:o,to:s,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let e=-1,t=-1;for(let n=d,i=0;;i++){let u=this.children[i],h=n+u.size;if(-1==e&&o<=h){let T=n+u.border;if(o>=T&&s<=h-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(o,s,T);o=n;for(let A=i;A>0;A--){let B=this.children[A-1];if(B.size&&B.dom.parentNode==this.contentDOM&&!B.emptyChildAt(1)){e=P(B.dom)+1;break}o-=B.size}-1==e&&(e=0)}if(e>-1&&(h>s||i==this.children.length-1)){s=h;for(let T=i+1;T<this.children.length;T++){let A=this.children[T];if(A.size&&A.dom.parentNode==this.contentDOM&&!A.emptyChildAt(-1)){t=P(A.dom);break}s+=A.size}-1==t&&(t=this.contentDOM.childNodes.length);break}n=h}return{node:this.contentDOM,from:o,to:s,fromOffset:e,toOffset:t}}emptyChildAt(o){if(this.border||!this.contentDOM||!this.children.length)return!1;let s=this.children[o<0?0:this.children.length-1];return 0==s.size||s.emptyChildAt(o)}domAfterPos(o){let{node:s,offset:d}=this.domFromPos(o,0);if(1!=s.nodeType||d==s.childNodes.length)throw new RangeError("No node after pos "+o);return s.childNodes[d]}setSelection(o,s,d,e=!1){let t=Math.min(o,s),n=Math.max(o,s);for(let B=0,N=0;B<this.children.length;B++){let Y=this.children[B],q=N+Y.size;if(t>N&&n<q)return Y.setSelection(o-N-Y.border,s-N-Y.border,d,e);N=q}let i=this.domFromPos(o,o?-1:1),u=s==o?i:this.domFromPos(s,s?-1:1),h=d.getSelection(),T=!1;if((kt||Kt)&&o==s){let{node:B,offset:N}=i;if(3==B.nodeType){if(T=!(!N||"\n"!=B.nodeValue[N-1]),T&&N==B.nodeValue.length)for(let q,Y=B;Y;Y=Y.parentNode){if(q=Y.nextSibling){"BR"==q.nodeName&&(i=u={node:q.parentNode,offset:P(q)+1});break}let ht=Y.pmViewDesc;if(ht&&ht.node&&ht.node.isBlock)break}}else{let Y=B.childNodes[N-1];T=Y&&("BR"==Y.nodeName||"false"==Y.contentEditable)}}if(kt&&h.focusNode&&h.focusNode!=u.node&&1==h.focusNode.nodeType){let B=h.focusNode.childNodes[h.focusOffset];B&&"false"==B.contentEditable&&(e=!0)}if(!(e||T&&Kt)&&X(i.node,i.offset,h.anchorNode,h.anchorOffset)&&X(u.node,u.offset,h.focusNode,h.focusOffset))return;let A=!1;if((h.extend||o==s)&&!T){h.collapse(i.node,i.offset);try{o!=s&&h.extend(u.node,u.offset),A=!0}catch(B){}}if(!A){if(o>s){let N=i;i=u,u=N}let B=document.createRange();B.setEnd(u.node,u.offset),B.setStart(i.node,i.offset),h.removeAllRanges(),h.addRange(B)}}ignoreMutation(o){return!this.contentDOM&&"selection"!=o.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(o,s){for(let d=0,e=0;e<this.children.length;e++){let t=this.children[e],n=d+t.size;if(d==n?o<=n&&s>=d:o<n&&s>d){let i=d+t.border,u=n-t.border;if(o>=i&&s<=u)return this.dirty=o==d||s==n?2:1,void(o!=i||s!=u||!t.contentLost&&t.dom.parentNode==this.contentDOM?t.markDirty(o-i,s-i):t.dirty=3);t.dirty=t.dom!=t.contentDOM||t.dom.parentNode!=this.contentDOM||t.children.length?3:2}d=n}this.dirty=2}markParentsDirty(){let o=1;for(let s=this.parent;s;s=s.parent,o++){let d=1==o?2:1;s.dirty<d&&(s.dirty=d)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class z extends V{constructor(o,s,d,e){let t,n=s.type.toDOM;if("function"==typeof n&&(n=n(d,()=>t?t.parent?t.parent.posBeforeChild(t):void 0:e)),!s.type.spec.raw){if(1!=n.nodeType){let i=document.createElement("span");i.appendChild(n),n=i}n.contentEditable="false",n.classList.add("ProseMirror-widget")}super(o,[],n,null),this.widget=s,this.widget=s,t=this}matchesWidget(o){return 0==this.dirty&&o.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(o){let s=this.widget.spec.stopEvent;return!!s&&s(o)}ignoreMutation(o){return"selection"!=o.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class bt extends V{constructor(o,s,d,e){super(o,[],s,null),this.textDOM=d,this.text=e}get size(){return this.text.length}localPosFromDOM(o,s){return o!=this.textDOM?this.posAtStart+(s?this.size:0):this.posAtStart+s}domFromPos(o){return{node:this.textDOM,offset:o}}ignoreMutation(o){return"characterData"===o.type&&o.target.nodeValue==o.oldValue}}class Rt extends V{constructor(o,s,d,e){super(o,[],d,e),this.mark=s}static create(o,s,d,e){let t=e.nodeViews[s.type.name],n=t&&t(s,e,d);return(!n||!n.dom)&&(n=l.PW.renderSpec(document,s.type.spec.toDOM(s,d))),new Rt(o,s,n.dom,n.contentDOM||n.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(o){return 3!=this.dirty&&this.mark.eq(o)}markDirty(o,s){if(super.markDirty(o,s),0!=this.dirty){let d=this.parent;for(;!d.node;)d=d.parent;d.dirty<this.dirty&&(d.dirty=this.dirty),this.dirty=0}}slice(o,s,d){let e=Rt.create(this.parent,this.mark,!0,d),t=this.children,n=this.size;s<n&&(t=oe(t,s,n,d)),o>0&&(t=oe(t,0,o,d));for(let i=0;i<t.length;i++)t[i].parent=e;return e.children=t,e}}class U extends V{constructor(o,s,d,e,t,n,i,u,h){super(o,[],t,n),this.node=s,this.outerDeco=d,this.innerDeco=e,this.nodeDOM=i,n&&this.updateChildren(u,h)}static create(o,s,d,e,t,n){let u,i=t.nodeViews[s.type.name],h=i&&i(s,t,()=>u?u.parent?u.parent.posBeforeChild(u):void 0:n,d,e),T=h&&h.dom,A=h&&h.contentDOM;if(s.isText)if(T){if(3!=T.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else T=document.createTextNode(s.text);else T||({dom:T,contentDOM:A}=l.PW.renderSpec(document,s.type.spec.toDOM(s)));!A&&!s.isText&&"BR"!=T.nodeName&&(T.hasAttribute("contenteditable")||(T.contentEditable="false"),s.type.spec.draggable&&(T.draggable=!0));let B=T;return T=we(T,d,s),h?u=new D(o,s,d,e,T,A||null,B,h,t,n+1):s.isText?new p(o,s,d,e,T,B,t):new U(o,s,d,e,T,A||null,B,t,n+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let o={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(o.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let s=this.children.length-1;s>=0;s--){let d=this.children[s];if(this.dom.contains(d.dom.parentNode)){o.contentElement=d.dom.parentNode;break}}o.contentElement||(o.getContent=()=>l.HY.empty)}else o.contentElement=this.contentDOM;else o.getContent=()=>this.node.content;return o}matchesNode(o,s,d){return 0==this.dirty&&o.eq(this.node)&&$e(s,this.outerDeco)&&d.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(o,s){let d=this.node.inlineContent,e=s,t=o.composing?this.localCompositionInfo(o,s):null,n=t&&t.pos>-1?t:null,i=t&&t.pos<0,u=new S(this,n&&n.node,o);(function(r,o,s,d){let e=o.locals(r),t=0;if(0==e.length){for(let h=0;h<r.childCount;h++){let T=r.child(h);d(T,e,o.forChild(t,T),h),t+=T.nodeSize}return}let n=0,i=[],u=null;for(let h=0;;){if(n<e.length&&e[n].to==t){let q,Y=e[n++];for(;n<e.length&&e[n].to==t;)(q||(q=[Y])).push(e[n++]);if(q){q.sort(Tt);for(let ht=0;ht<q.length;ht++)s(q[ht],h,!!u)}else s(Y,h,!!u)}let T,A;if(u)A=-1,T=u,u=null;else{if(!(h<r.childCount))break;A=h,T=r.child(h++)}for(let Y=0;Y<i.length;Y++)i[Y].to<=t&&i.splice(Y--,1);for(;n<e.length&&e[n].from<=t&&e[n].to>t;)i.push(e[n++]);let B=t+T.nodeSize;if(T.isText){let Y=B;n<e.length&&e[n].from<Y&&(Y=e[n].from);for(let q=0;q<i.length;q++)i[q].to<Y&&(Y=i[q].to);Y<B&&(u=T.cut(Y-t),T=T.cut(0,Y-t),B=Y,A=-1)}d(T,T.isInline&&!T.isLeaf?i.filter(Y=>!Y.inline):i.slice(),o.forChild(t,T),A),t=B}})(this.node,this.innerDeco,(h,T,A)=>{h.spec.marks?u.syncToMarks(h.spec.marks,d,o):h.type.side>=0&&!A&&u.syncToMarks(T==this.node.childCount?l.vc.none:this.node.child(T).marks,d,o),u.placeWidget(h,o,e)},(h,T,A,B)=>{let N;u.syncToMarks(h.marks,d,o),u.findNodeMatch(h,T,A,B)||i&&o.state.selection.from>e&&o.state.selection.to<e+h.nodeSize&&(N=u.findIndexWithChild(t.node))>-1&&u.updateNodeAt(h,T,A,N,o)||u.updateNextNode(h,T,A,o,B)||u.addNode(h,T,A,o,e),e+=h.nodeSize}),u.syncToMarks([],d,o),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||2==this.dirty)&&(n&&this.protectLocalComposition(o,n),I(this.contentDOM,this.children,o),ut&&function(r){if("UL"==r.nodeName||"OL"==r.nodeName){let o=r.style.cssText;r.style.cssText=o+"; list-style: square !important",window.getComputedStyle(r),r.style.cssText=o}}(this.dom))}localCompositionInfo(o,s){let{from:d,to:e}=o.state.selection;if(!(o.state.selection instanceof v.Bs)||d<s||e>s+this.node.content.size)return null;let t=o.domSelectionRange(),n=function(r,o){for(;;){if(3==r.nodeType)return r;if(1==r.nodeType&&o>0){if(r.childNodes.length>o&&3==r.childNodes[o].nodeType)return r.childNodes[o];o=dt(r=r.childNodes[o-1])}else{if(!(1==r.nodeType&&o<r.childNodes.length))return null;r=r.childNodes[o],o=0}}}(t.focusNode,t.focusOffset);if(!n||!this.dom.contains(n.parentNode))return null;if(this.node.inlineContent){let i=n.nodeValue,u=function(r,o,s,d){for(let e=0,t=0;e<r.childCount&&t<=d;){let n=r.child(e++),i=t;if(t+=n.nodeSize,!n.isText)continue;let u=n.text;for(;e<r.childCount;){let h=r.child(e++);if(t+=h.nodeSize,!h.isText)break;u+=h.text}if(t>=s){let h=i<d?u.lastIndexOf(o,d-i-1):-1;if(h>=0&&h+o.length+i>=s)return i+h;if(s==d&&u.length>=d+o.length-i&&u.slice(d-i,d-i+o.length)==o)return d}}return-1}(this.node.content,i,d-s,e-s);return u<0?null:{node:n,pos:u,text:i}}return{node:n,pos:-1,text:""}}protectLocalComposition(o,{node:s,pos:d,text:e}){if(this.getDesc(s))return;let t=s;for(;t.parentNode!=this.contentDOM;t=t.parentNode){for(;t.previousSibling;)t.parentNode.removeChild(t.previousSibling);for(;t.nextSibling;)t.parentNode.removeChild(t.nextSibling);t.pmViewDesc&&(t.pmViewDesc=void 0)}let n=new bt(this,t,s,e);o.input.compositionNodes.push(n),this.children=oe(this.children,d,d+e.length,o,n)}update(o,s,d,e){return!(3==this.dirty||!o.sameMarkup(this.node)||(this.updateInner(o,s,d,e),0))}updateInner(o,s,d,e){this.updateOuterDeco(s),this.node=o,this.innerDeco=d,this.contentDOM&&this.updateChildren(e,this.posAtStart),this.dirty=0}updateOuterDeco(o){if($e(o,this.outerDeco))return;let s=1!=this.nodeDOM.nodeType,d=this.dom;this.dom=te(this.dom,this.nodeDOM,Lt(this.outerDeco,this.node,s),Lt(o,this.node,s)),this.dom!=d&&(d.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=o}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function a(r,o,s,d,e){return we(d,o,r),new U(void 0,r,o,s,d,d,d,e,0)}class p extends U{constructor(o,s,d,e,t,n,i){super(o,s,d,e,t,null,n,i,0)}parseRule(){let o=this.nodeDOM.parentNode;for(;o&&o!=this.dom&&!o.pmIsDeco;)o=o.parentNode;return{skip:o||!0}}update(o,s,d,e){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!o.sameMarkup(this.node)||(this.updateOuterDeco(s),(0!=this.dirty||o.text!=this.node.text)&&o.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=o.text,e.trackWrites==this.nodeDOM&&(e.trackWrites=null)),this.node=o,this.dirty=0,0))}inParent(){let o=this.parent.contentDOM;for(let s=this.nodeDOM;s;s=s.parentNode)if(s==o)return!0;return!1}domFromPos(o){return{node:this.nodeDOM,offset:o}}localPosFromDOM(o,s,d){return o==this.nodeDOM?this.posAtStart+Math.min(s,this.node.text.length):super.localPosFromDOM(o,s,d)}ignoreMutation(o){return"characterData"!=o.type&&"selection"!=o.type}slice(o,s,d){let e=this.node.cut(o,s),t=document.createTextNode(e.text);return new p(this.parent,e,this.outerDeco,this.innerDeco,t,t,d)}markDirty(o,s){super.markDirty(o,s),this.dom!=this.nodeDOM&&(0==o||s==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}}class E extends V{parseRule(){return{ignore:!0}}matchesHack(o){return 0==this.dirty&&this.dom.nodeName==o}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class D extends U{constructor(o,s,d,e,t,n,i,u,h,T){super(o,s,d,e,t,n,i,h,T),this.spec=u}update(o,s,d,e){if(3==this.dirty)return!1;if(this.spec.update){let t=this.spec.update(o,s,d);return t&&this.updateInner(o,s,d,e),t}return!(!this.contentDOM&&!o.isLeaf)&&super.update(o,s,d,e)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(o,s,d,e){this.spec.setSelection?this.spec.setSelection(o,s,d):super.setSelection(o,s,d,e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(o){return!!this.spec.stopEvent&&this.spec.stopEvent(o)}ignoreMutation(o){return this.spec.ignoreMutation?this.spec.ignoreMutation(o):super.ignoreMutation(o)}}function I(r,o,s){let d=r.firstChild,e=!1;for(let t=0;t<o.length;t++){let n=o[t],i=n.dom;if(i.parentNode==r){for(;i!=d;)d=$(d),e=!0;d=d.nextSibling}else e=!0,r.insertBefore(i,d);if(n instanceof Rt){let u=d?d.previousSibling:r.lastChild;I(n.contentDOM,n.children,s),d=u?u.nextSibling:r.firstChild}}for(;d;)d=$(d),e=!0;e&&s.trackWrites==r&&(s.trackWrites=null)}const K=function(r){r&&(this.nodeName=r)};K.prototype=Object.create(null);const at=[new K];function Lt(r,o,s){if(0==r.length)return at;let d=s?at[0]:new K,e=[d];for(let t=0;t<r.length;t++){let n=r[t].type.attrs;if(n){n.nodeName&&e.push(d=new K(n.nodeName));for(let i in n){let u=n[i];null!=u&&(s&&1==e.length&&e.push(d=new K(o.isInline?"span":"div")),"class"==i?d.class=(d.class?d.class+" ":"")+u:"style"==i?d.style=(d.style?d.style+";":"")+u:"nodeName"!=i&&(d[i]=u))}}}return e}function te(r,o,s,d){if(s==at&&d==at)return o;let e=o;for(let t=0;t<d.length;t++){let n=d[t],i=s[t];if(t){let u;i&&i.nodeName==n.nodeName&&e!=r&&(u=e.parentNode)&&u.nodeName.toLowerCase()==n.nodeName||(u=document.createElement(n.nodeName),u.pmIsDeco=!0,u.appendChild(e),i=at[0]),e=u}ee(e,i||at[0],n)}return e}function ee(r,o,s){for(let d in o)"class"!=d&&"style"!=d&&"nodeName"!=d&&!(d in s)&&r.removeAttribute(d);for(let d in s)"class"!=d&&"style"!=d&&"nodeName"!=d&&s[d]!=o[d]&&r.setAttribute(d,s[d]);if(o.class!=s.class){let d=o.class?o.class.split(" ").filter(Boolean):[],e=s.class?s.class.split(" ").filter(Boolean):[];for(let t=0;t<d.length;t++)-1==e.indexOf(d[t])&&r.classList.remove(d[t]);for(let t=0;t<e.length;t++)-1==d.indexOf(e[t])&&r.classList.add(e[t]);0==r.classList.length&&r.removeAttribute("class")}if(o.style!=s.style){if(o.style){let e,d=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;e=d.exec(o.style);)r.style.removeProperty(e[1])}s.style&&(r.style.cssText+=s.style)}}function we(r,o,s){return te(r,r,at,Lt(o,s,1!=r.nodeType))}function $e(r,o){if(r.length!=o.length)return!1;for(let s=0;s<r.length;s++)if(!r[s].type.eq(o[s].type))return!1;return!0}function $(r){let o=r.nextSibling;return r.parentNode.removeChild(r),o}class S{constructor(o,s,d){this.lock=s,this.view=d,this.index=0,this.stack=[],this.changed=!1,this.top=o,this.preMatch=function(r,o){let s=o,d=s.children.length,e=r.childCount,t=new Map,n=[];t:for(;e>0;){let i;for(;;)if(d){let h=s.children[d-1];if(!(h instanceof Rt)){i=h,d--;break}s=h,d=h.children.length}else{if(s==o)break t;d=s.parent.children.indexOf(s),s=s.parent}let u=i.node;if(u){if(u!=r.child(e-1))break;--e,t.set(i,e),n.push(i)}}return{index:e,matched:t,matches:n.reverse()}}(o.node.content,o)}destroyBetween(o,s){if(o!=s){for(let d=o;d<s;d++)this.top.children[d].destroy();this.top.children.splice(o,s-o),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(o,s,d){let e=0,t=this.stack.length>>1,n=Math.min(t,o.length);for(;e<n&&(e==t-1?this.top:this.stack[e+1<<1]).matchesMark(o[e])&&!1!==o[e].type.spec.spanning;)e++;for(;e<t;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),t--;for(;t<o.length;){this.stack.push(this.top,this.index+1);let i=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let h=this.top.children[u];if(h.matchesMark(o[t])&&!this.isLocked(h.dom)){i=u;break}}if(i>-1)i>this.index&&(this.changed=!0,this.destroyBetween(this.index,i)),this.top=this.top.children[this.index];else{let u=Rt.create(this.top,o[t],s,d);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,t++}}findNodeMatch(o,s,d,e){let n,t=-1;if(e>=this.preMatch.index&&(n=this.preMatch.matches[e-this.preMatch.index]).parent==this.top&&n.matchesNode(o,s,d))t=this.top.children.indexOf(n,this.index);else for(let i=this.index,u=Math.min(this.top.children.length,i+5);i<u;i++){let h=this.top.children[i];if(h.matchesNode(o,s,d)&&!this.preMatch.matched.has(h)){t=i;break}}return!(t<0||(this.destroyBetween(this.index,t),this.index++,0))}updateNodeAt(o,s,d,e,t){let n=this.top.children[e];return 3==n.dirty&&n.dom==n.contentDOM&&(n.dirty=2),!!n.update(o,s,d,t)&&(this.destroyBetween(this.index,e),this.index++,!0)}findIndexWithChild(o){for(;;){let s=o.parentNode;if(!s)return-1;if(s==this.top.contentDOM){let d=o.pmViewDesc;if(d)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==d)return e;return-1}o=s}}updateNextNode(o,s,d,e,t){for(let n=this.index;n<this.top.children.length;n++){let i=this.top.children[n];if(i instanceof U){let u=this.preMatch.matched.get(i);if(null!=u&&u!=t)return!1;let h=i.dom;if((!this.isLocked(h)||o.isText&&i.node&&i.node.isText&&i.nodeDOM.nodeValue==o.text&&3!=i.dirty&&$e(s,i.outerDeco))&&i.update(o,s,d,e))return this.destroyBetween(this.index,n),i.dom!=h&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(o,s,d,e,t){this.top.children.splice(this.index++,0,U.create(this.top,o,s,d,e,t)),this.changed=!0}placeWidget(o,s,d){let e=this.index<this.top.children.length?this.top.children[this.index]:null;if(!e||!e.matchesWidget(o)||o!=e.widget&&e.widget.type.toDOM.parentNode){let t=new z(this.top,o,s,d);this.top.children.splice(this.index++,0,t),this.changed=!0}else this.index++}addTextblockHacks(){let o=this.top.children[this.index-1],s=this.top;for(;o instanceof Rt;)s=o,o=s.children[s.children.length-1];(!o||!(o instanceof p)||/\n$/.test(o.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(o.node.text))&&((Kt||Bt)&&o&&"false"==o.dom.contentEditable&&this.addHackNode("IMG",s),this.addHackNode("BR",this.top))}addHackNode(o,s){if(s==this.top&&this.index<s.children.length&&s.children[this.index].matchesHack(o))this.index++;else{let d=document.createElement(o);"IMG"==o&&(d.className="ProseMirror-separator",d.alt=""),"BR"==o&&(d.className="ProseMirror-trailingBreak");let e=new E(this.top,[],d,null);s!=this.top?s.children.push(e):s.children.splice(this.index++,0,e),this.changed=!0}}isLocked(o){return this.lock&&(o==this.lock||1==o.nodeType&&o.contains(this.lock.parentNode))}}function Tt(r,o){return r.type.side-o.type.side}function oe(r,o,s,d,e){let t=[];for(let n=0,i=0;n<r.length;n++){let u=r[n],h=i,T=i+=u.size;h>=s||T<=o?t.push(u):(h<o&&t.push(u.slice(0,o-h,d)),e&&(t.push(e),e=void 0),T>s&&t.push(u.slice(s-h,u.size,d)))}return t}function Te(r,o=null){let s=r.domSelectionRange(),d=r.state.doc;if(!s.focusNode)return null;let e=r.docView.nearestDesc(s.focusNode),t=e&&0==e.size,n=r.docView.posFromDOM(s.focusNode,s.focusOffset,1);if(n<0)return null;let u,h,i=d.resolve(n);if(ft(s)){for(u=i;e&&!e.node;)e=e.parent;let T=e.node;if(e&&T.isAtom&&v.qv.isSelectable(T)&&e.parent&&(!T.isInline||!function(r,o,s){for(let d=0==o,e=o==dt(r);d||e;){if(r==s)return!0;let t=P(r);if(!(r=r.parentNode))return!1;d=d&&0==t,e=e&&t==dt(r)}}(s.focusNode,s.focusOffset,e.dom))){let A=e.posBefore;h=new v.qv(n==A?i:d.resolve(A))}}else{let T=r.docView.posFromDOM(s.anchorNode,s.anchorOffset,1);if(T<0)return null;u=d.resolve(T)}return h||(h=hn(r,u,i,"pointer"==o||r.state.selection.head<i.pos&&!t?1:-1)),h}function se(r){return r.editable?r.hasFocus():Tn(r)&&document.activeElement&&document.activeElement.contains(r.dom)}function le(r,o=!1){let s=r.state.selection;if(Hn(r,s),se(r)){if(!o&&r.input.mouseDown&&r.input.mouseDown.allowDefault&&Bt){let d=r.domSelectionRange(),e=r.domObserver.currentSelection;if(d.anchorNode&&e.anchorNode&&X(d.anchorNode,d.anchorOffset,e.anchorNode,e.anchorOffset))return r.input.mouseDown.delayedSelectionSync=!0,void r.domObserver.setCurSelection()}if(r.domObserver.disconnectSelection(),r.cursorWrapper)!function(r){let o=r.domSelection(),s=document.createRange(),d=r.cursorWrapper.dom,e="IMG"==d.nodeName;e?s.setEnd(d.parentNode,P(d)+1):s.setEnd(d,0),s.collapse(!1),o.removeAllRanges(),o.addRange(s),!e&&!r.state.selection.visible&&j&&At<=11&&(d.disabled=!0,d.disabled=!1)}(r);else{let t,n,{anchor:d,head:e}=s;ce&&!(s instanceof v.Bs)&&(s.$from.parent.inlineContent||(t=Re(r,s.from)),!s.empty&&!s.$from.parent.inlineContent&&(n=Re(r,s.to))),r.docView.setSelection(d,e,r.root,o),ce&&(t&&cn(t),n&&cn(n)),s.visible?r.dom.classList.remove("ProseMirror-hideselection"):(r.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(r){let o=r.dom.ownerDocument;o.removeEventListener("selectionchange",r.input.hideSelectionGuard);let s=r.domSelectionRange(),d=s.anchorNode,e=s.anchorOffset;o.addEventListener("selectionchange",r.input.hideSelectionGuard=()=>{(s.anchorNode!=d||s.anchorOffset!=e)&&(o.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(()=>{(!se(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})}(r))}r.domObserver.setCurSelection(),r.domObserver.connectSelection()}}const ce=Kt||Bt&&Ht<63;function Re(r,o){let{node:s,offset:d}=r.docView.domFromPos(o,0),e=d<s.childNodes.length?s.childNodes[d]:null,t=d?s.childNodes[d-1]:null;if(Kt&&e&&"false"==e.contentEditable)return We(e);if(!(e&&"false"!=e.contentEditable||t&&"false"!=t.contentEditable)){if(e)return We(e);if(t)return We(t)}}function We(r){return r.contentEditable="true",Kt&&r.draggable&&(r.draggable=!1,r.wasDraggable=!0),r}function cn(r){r.contentEditable="false",r.wasDraggable&&(r.draggable=!0,r.wasDraggable=null)}function Hn(r,o){if(o instanceof v.qv){let s=r.docView.descAt(o.from);s!=r.lastSelectedViewDesc&&(Un(r),s&&s.selectNode(),r.lastSelectedViewDesc=s)}else Un(r)}function Un(r){r.lastSelectedViewDesc&&(r.lastSelectedViewDesc.parent&&r.lastSelectedViewDesc.deselectNode(),r.lastSelectedViewDesc=void 0)}function hn(r,o,s,d){return r.someProp("createSelectionBetween",e=>e(r,o,s))||v.Bs.between(o,s,d)}function Sn(r){return!(r.editable&&!r.hasFocus())&&Tn(r)}function Tn(r){let o=r.domSelectionRange();if(!o.anchorNode)return!1;try{return r.dom.contains(3==o.anchorNode.nodeType?o.anchorNode.parentNode:o.anchorNode)&&(r.editable||r.dom.contains(3==o.focusNode.nodeType?o.focusNode.parentNode:o.focusNode))}catch(s){return!1}}function Cn(r,o){let{$anchor:s,$head:d}=r.selection,e=o>0?s.max(d):s.min(d),t=e.parent.inlineContent?e.depth?r.doc.resolve(o>0?e.after():e.before()):null:e;return t&&v.Y1.findFrom(t,o)}function Qe(r,o){return r.dispatch(r.state.tr.setSelection(o).scrollIntoView()),!0}function fn(r,o,s){let d=r.state.selection;if(!(d instanceof v.Bs)){if(d instanceof v.qv&&d.node.isInline)return Qe(r,new v.Bs(o>0?d.$to:d.$from));{let e=Cn(r.state,o);return!!e&&Qe(r,e)}}if(!d.empty||s.indexOf("s")>-1)return!1;if(r.endOfTextblock(o>0?"right":"left")){let e=Cn(r.state,o);return!!(e&&e instanceof v.qv)&&Qe(r,e)}if(!(L&&s.indexOf("m")>-1)){let n,e=d.$head,t=e.textOffset?null:o<0?e.nodeBefore:e.nodeAfter;if(!t||t.isText)return!1;let i=o<0?e.pos-t.nodeSize:e.pos;return!!(t.isAtom||(n=r.docView.descAt(i))&&!n.contentDOM)&&(v.qv.isSelectable(t)?Qe(r,new v.qv(o<0?r.state.doc.resolve(e.pos-t.nodeSize):e)):!!ct&&Qe(r,new v.Bs(r.state.doc.resolve(o<0?i:i+t.nodeSize))))}}function rn(r){return 3==r.nodeType?r.nodeValue.length:r.childNodes.length}function sn(r){let o=r.pmViewDesc;return o&&0==o.size&&(r.nextSibling||"BR"!=r.nodeName)}function _(r){let o=r.domSelectionRange(),s=o.focusNode,d=o.focusOffset;if(!s)return;let e,t,n=!1;for(kt&&1==s.nodeType&&d<rn(s)&&sn(s.childNodes[d])&&(n=!0);;)if(d>0){if(1!=s.nodeType)break;{let i=s.childNodes[d-1];if(sn(i))e=s,t=--d;else{if(3!=i.nodeType)break;s=i,d=s.nodeValue.length}}}else{if(m(s))break;{let i=s.previousSibling;for(;i&&sn(i);)e=s.parentNode,t=P(i),i=i.previousSibling;if(i)s=i,d=rn(s);else{if(s=s.parentNode,s==r.dom)break;d=0}}}n?f(r,s,d):e&&f(r,e,t)}function C(r){let o=r.domSelectionRange(),s=o.focusNode,d=o.focusOffset;if(!s)return;let t,n,e=rn(s);for(;;)if(d<e){if(1!=s.nodeType)break;if(!sn(s.childNodes[d]))break;t=s,n=++d}else{if(m(s))break;{let i=s.nextSibling;for(;i&&sn(i);)t=i.parentNode,n=P(i)+1,i=i.nextSibling;if(i)s=i,d=0,e=rn(s);else{if(s=s.parentNode,s==r.dom)break;d=e=0}}}t&&f(r,t,n)}function m(r){let o=r.pmViewDesc;return o&&o.node&&o.node.isBlock}function f(r,o,s){let d=r.domSelection();if(ft(d)){let t=document.createRange();t.setEnd(o,s),t.setStart(o,s),d.removeAllRanges(),d.addRange(t)}else d.extend&&d.extend(o,s);r.domObserver.setCurSelection();let{state:e}=r;setTimeout(()=>{r.state==e&&le(r)},50)}function M(r,o,s){let d=r.state.selection;if(d instanceof v.Bs&&!d.empty||s.indexOf("s")>-1||L&&s.indexOf("m")>-1)return!1;let{$from:e,$to:t}=d;if(!e.parent.inlineContent||r.endOfTextblock(o<0?"up":"down")){let n=Cn(r.state,o);if(n&&n instanceof v.qv)return Qe(r,n)}if(!e.parent.inlineContent){let n=o<0?e:t,i=d instanceof v.C1?v.Y1.near(n,o):v.Y1.findFrom(n,o);return!!i&&Qe(r,i)}return!1}function x(r,o){if(!(r.state.selection instanceof v.Bs))return!0;let{$head:s,$anchor:d,empty:e}=r.state.selection;if(!s.sameParent(d))return!0;if(!e)return!1;if(r.endOfTextblock(o>0?"forward":"backward"))return!0;let t=!s.textOffset&&(o<0?s.nodeBefore:s.nodeAfter);if(t&&!t.isText){let n=r.state.tr;return o<0?n.delete(s.pos-t.nodeSize,s.pos):n.delete(s.pos,s.pos+t.nodeSize),r.dispatch(n),!0}return!1}function R(r,o,s){r.domObserver.stop(),o.contentEditable=s,r.domObserver.start()}function Ct(r,o){r.someProp("transformCopied",N=>{o=N(o,r)});let s=[],{content:d,openStart:e,openEnd:t}=o;for(;e>1&&t>1&&1==d.childCount&&1==d.firstChild.childCount;){e--,t--;let N=d.firstChild;s.push(N.type.name,N.attrs!=N.type.defaultAttrs?N.attrs:null),d=N.content}let n=r.someProp("clipboardSerializer")||l.PW.fromSchema(r.state.schema),i=De(),u=i.createElement("div");u.appendChild(n.serializeFragment(d,{document:i}));let T,h=u.firstChild,A=0;for(;h&&1==h.nodeType&&(T=je[h.nodeName.toLowerCase()]);){for(let N=T.length-1;N>=0;N--){let Y=i.createElement(T[N]);for(;u.firstChild;)Y.appendChild(u.firstChild);u.appendChild(Y),A++}h=u.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",`${e} ${t}${A?` -${A}`:""} ${JSON.stringify(s)}`),{dom:u,text:r.someProp("clipboardTextSerializer",N=>N(o,r))||o.content.textBetween(0,o.content.size,"\n\n")}}function xt(r,o,s,d,e){let n,i,t=e.parent.type.spec.code;if(!s&&!o)return null;let u=o&&(d||t||!s);if(u){if(r.someProp("transformPastedText",B=>{o=B(o,t||d,r)}),t)return o?new l.p2(l.HY.from(r.state.schema.text(o.replace(/\r\n?/g,"\n"))),0,0):l.p2.empty;let A=r.someProp("clipboardTextParser",B=>B(o,e,d,r));if(A)i=A;else{let B=e.marks(),{schema:N}=r.state,Y=l.PW.fromSchema(N);n=document.createElement("div"),o.split(/(?:\r\n?|\n)+/).forEach(q=>{let ht=n.appendChild(document.createElement("p"));q&&ht.appendChild(Y.serializeNode(N.text(q,B)))})}}else r.someProp("transformPastedHTML",A=>{s=A(s,r)}),n=function(r){let o=/^(\s*<meta [^>]*>)*/.exec(r);o&&(r=r.slice(o[0].length));let e,s=De().createElement("div"),d=/<([a-z][^>\s]+)/i.exec(r);if((e=d&&je[d[1].toLowerCase()])&&(r=e.map(t=>"<"+t+">").join("")+r+e.map(t=>"</"+t+">").reverse().join("")),s.innerHTML=r,e)for(let t=0;t<e.length;t++)s=s.querySelector(e[t])||s;return s}(s),ct&&function(r){let o=r.querySelectorAll(Bt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let s=0;s<o.length;s++){let d=o[s];1==d.childNodes.length&&"\xa0"==d.textContent&&d.parentNode&&d.parentNode.replaceChild(r.ownerDocument.createTextNode(" "),d)}}(n);let h=n&&n.querySelector("[data-pm-slice]"),T=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(T&&T[3])for(let A=+T[3];A>0;A--){let B=n.firstChild;for(;B&&1!=B.nodeType;)B=B.nextSibling;if(!B)break;n=B}if(i||(i=(r.someProp("clipboardParser")||r.someProp("domParser")||l.aw.fromSchema(r.state.schema)).parseSlice(n,{preserveWhitespace:!(!u&&!T),context:e,ruleFromNode:B=>"BR"!=B.nodeName||B.nextSibling||!B.parentNode||Nt.test(B.parentNode.nodeName)?null:{ignore:!0}})),T)i=function(r,o){if(!r.size)return r;let d,s=r.content.firstChild.type.schema;try{d=JSON.parse(o)}catch(i){return r}let{content:e,openStart:t,openEnd:n}=r;for(let i=d.length-2;i>=0;i-=2){let u=s.nodes[d[i]];if(!u||u.hasRequiredAttrs())break;e=l.HY.from(u.create(d[i+1],e)),t++,n++}return new l.p2(e,t,n)}(qe(i,+T[1],+T[2]),T[4]);else if(i=l.p2.maxOpen(function(r,o){if(r.childCount<2)return r;for(let s=o.depth;s>=0;s--){let t,e=o.node(s).contentMatchAt(o.index(s)),n=[];if(r.forEach(i=>{if(!n)return;let h,u=e.findWrapping(i.type);if(!u)return n=null;if(h=n.length&&t.length&&re(u,t,i,n[n.length-1],0))n[n.length-1]=h;else{n.length&&(n[n.length-1]=ie(n[n.length-1],t.length));let T=jt(i,u);n.push(T),e=e.matchType(T.type),t=u}}),n)return l.HY.from(n)}return r}(i.content,e),!0),i.openStart||i.openEnd){let A=0,B=0;for(let N=i.content.firstChild;A<i.openStart&&!N.type.spec.isolating;A++,N=N.firstChild);for(let N=i.content.lastChild;B<i.openEnd&&!N.type.spec.isolating;B++,N=N.lastChild);i=qe(i,A,B)}return r.someProp("transformPasted",A=>{i=A(i,r)}),i}const Nt=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function jt(r,o,s=0){for(let d=o.length-1;d>=s;d--)r=o[d].create(null,l.HY.from(r));return r}function re(r,o,s,d,e){if(e<r.length&&e<o.length&&r[e]==o[e]){let t=re(r,o,s,d.lastChild,e+1);if(t)return d.copy(d.content.replaceChild(d.childCount-1,t));if(d.contentMatchAt(d.childCount).matchType(e==r.length-1?s.type:r[e+1]))return d.copy(d.content.append(l.HY.from(jt(s,r,e+1))))}}function ie(r,o){if(0==o)return r;let s=r.content.replaceChild(r.childCount-1,ie(r.lastChild,o-1)),d=r.contentMatchAt(r.childCount).fillBefore(l.HY.empty,!0);return r.copy(s.append(d))}function be(r,o,s,d,e,t){let n=o<0?r.firstChild:r.lastChild,i=n.content;return e<d-1&&(i=be(i,o,s,d,e+1,t)),e>=s&&(i=o<0?n.contentMatchAt(0).fillBefore(i,r.childCount>1||t<=e).append(i):i.append(n.contentMatchAt(n.childCount).fillBefore(l.HY.empty,!0))),r.replaceChild(o<0?0:r.childCount-1,n.copy(i))}function qe(r,o,s){return o<r.openStart&&(r=new l.p2(be(r.content,-1,o,r.openStart,0,r.openEnd),o,r.openEnd)),s<r.openEnd&&(r=new l.p2(be(r.content,1,s,r.openEnd,0,0),r.openStart,s)),r}const je={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Ce=null;function De(){return Ce||(Ce=document.implementation.createHTMLDocument("title"))}const ke={},Fe={},Vn={touchstart:!0,touchmove:!0};class Qn{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Xe(r,o){r.input.lastSelectionOrigin=o,r.input.lastSelectionTime=Date.now()}function vn(r){r.someProp("handleDOMEvents",o=>{for(let s in o)r.input.eventHandlers[s]||r.dom.addEventListener(s,r.input.eventHandlers[s]=d=>un(r,d))})}function un(r,o){return r.someProp("handleDOMEvents",s=>{let d=s[o.type];return!!d&&(d(r,o)||o.defaultPrevented)})}function mn(r,o){if(!o.bubbles)return!0;if(o.defaultPrevented)return!1;for(let s=o.target;s!=r.dom;s=s.parentNode)if(!s||11==s.nodeType||s.pmViewDesc&&s.pmViewDesc.stopEvent(o))return!1;return!0}function nn(r){return{left:r.clientX,top:r.clientY}}function Mn(r,o,s,d,e){if(-1==d)return!1;let t=r.state.doc.resolve(d);for(let n=t.depth+1;n>0;n--)if(r.someProp(o,i=>n>t.depth?i(r,s,t.nodeAfter,t.before(n),e,!0):i(r,s,t.node(n),t.before(n),e,!1)))return!0;return!1}function tn(r,o,s){r.focused||r.focus();let d=r.state.tr.setSelection(o);"pointer"==s&&d.setMeta("pointer",!0),r.dispatch(d)}function Co(r,o,s,d){return Mn(r,"handleDoubleClickOn",o,s,d)||r.someProp("handleDoubleClick",e=>e(r,o,d))}function vo(r,o,s,d){return Mn(r,"handleTripleClickOn",o,s,d)||r.someProp("handleTripleClick",e=>e(r,o,d))||function(r,o,s){if(0!=s.button)return!1;let d=r.state.doc;if(-1==o)return!!d.inlineContent&&(tn(r,v.Bs.create(d,0,d.content.size),"pointer"),!0);let e=d.resolve(o);for(let t=e.depth+1;t>0;t--){let n=t>e.depth?e.nodeAfter:e.node(t),i=e.before(t);if(n.inlineContent)tn(r,v.Bs.create(d,i+1,i+1+n.content.size),"pointer");else{if(!v.qv.isSelectable(n))continue;tn(r,v.qv.create(d,i),"pointer")}return!0}}(r,s,d)}function wn(r){return zn(r)}Fe.keydown=(r,o)=>{let s=o;if(r.input.shiftKey=16==s.keyCode||s.shiftKey,!oo(r,s)&&(r.input.lastKeyCode=s.keyCode,r.input.lastKeyCodeTime=Date.now(),!it||!Bt||13!=s.keyCode))if(229!=s.keyCode&&r.domObserver.forceFlush(),!ut||13!=s.keyCode||s.ctrlKey||s.altKey||s.metaKey)r.someProp("handleKeyDown",d=>d(r,s))||function(r,o){let s=o.keyCode,d=function(r){let o="";return r.ctrlKey&&(o+="c"),r.metaKey&&(o+="m"),r.altKey&&(o+="a"),r.shiftKey&&(o+="s"),o}(o);return 8==s||L&&72==s&&"c"==d?x(r,-1)||_(r):46==s||L&&68==s&&"c"==d?x(r,1)||C(r):13==s||27==s||(37==s||L&&66==s&&"c"==d?fn(r,-1,d)||_(r):39==s||L&&70==s&&"c"==d?fn(r,1,d)||C(r):38==s||L&&80==s&&"c"==d?M(r,-1,d)||_(r):40==s||L&&78==s&&"c"==d?function(r){if(!Kt||r.state.selection.$head.parentOffset>0)return!1;let{focusNode:o,focusOffset:s}=r.domSelectionRange();if(o&&1==o.nodeType&&0==s&&o.firstChild&&"false"==o.firstChild.contentEditable){let d=o.firstChild;R(r,d,"true"),setTimeout(()=>R(r,d,"false"),20)}return!1}(r)||M(r,1,d)||C(r):d==(L?"m":"c")&&(66==s||73==s||89==s||90==s))}(r,s)?s.preventDefault():Xe(r,"key");else{let d=Date.now();r.input.lastIOSEnter=d,r.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{r.input.lastIOSEnter==d&&(r.someProp("handleKeyDown",e=>e(r,Ot(13,"Enter"))),r.input.lastIOSEnter=0)},200)}},Fe.keyup=(r,o)=>{16==o.keyCode&&(r.input.shiftKey=!1)},Fe.keypress=(r,o)=>{let s=o;if(oo(r,s)||!s.charCode||s.ctrlKey&&!s.altKey||L&&s.metaKey)return;if(r.someProp("handleKeyPress",e=>e(r,s)))return void s.preventDefault();let d=r.state.selection;if(!(d instanceof v.Bs&&d.$from.sameParent(d.$to))){let e=String.fromCharCode(s.charCode);!/[\r\n]/.test(e)&&!r.someProp("handleTextInput",t=>t(r,d.$from.pos,d.$to.pos,e))&&r.dispatch(r.state.tr.insertText(e).scrollIntoView()),s.preventDefault()}};const Fn=L?"metaKey":"ctrlKey";ke.mousedown=(r,o)=>{let s=o;r.input.shiftKey=s.shiftKey;let d=wn(r),e=Date.now(),t="singleClick";e-r.input.lastClick.time<500&&function(r,o){let s=o.x-r.clientX,d=o.y-r.clientY;return s*s+d*d<100}(s,r.input.lastClick)&&!s[Fn]&&("singleClick"==r.input.lastClick.type?t="doubleClick":"doubleClick"==r.input.lastClick.type&&(t="tripleClick")),r.input.lastClick={time:e,x:s.clientX,y:s.clientY,type:t};let n=r.posAtCoords(nn(s));!n||("singleClick"==t?(r.input.mouseDown&&r.input.mouseDown.done(),r.input.mouseDown=new Kn(r,n,s,!!d)):("doubleClick"==t?Co:vo)(r,n.pos,n.inside,s)?s.preventDefault():Xe(r,"pointer"))};class Kn{constructor(o,s,d,e){let t,n;if(this.view=o,this.pos=s,this.event=d,this.flushed=e,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=o.state.doc,this.selectNode=!!d[Fn],this.allowDefault=d.shiftKey,s.inside>-1)t=o.state.doc.nodeAt(s.inside),n=s.inside;else{let T=o.state.doc.resolve(s.pos);t=T.parent,n=T.depth?T.before():0}const i=e?null:d.target,u=i?o.docView.nearestDesc(i,!0):null;this.target=u?u.dom:null;let{selection:h}=o.state;(0==d.button&&t.type.spec.draggable&&!1!==t.type.spec.selectable||h instanceof v.qv&&h.from<=n&&h.to>n)&&(this.mightDrag={node:t,pos:n,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!kt||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),o.root.addEventListener("mouseup",this.up=this.up.bind(this)),o.root.addEventListener("mousemove",this.move=this.move.bind(this)),Xe(o,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>le(this.view)),this.view.input.mouseDown=null}up(o){if(this.done(),!this.view.dom.contains(o.target))return;let s=this.pos;this.view.state.doc!=this.startDoc&&(s=this.view.posAtCoords(nn(o))),this.updateAllowDefault(o),this.allowDefault||!s?Xe(this.view,"pointer"):function(r,o,s,d,e){return Mn(r,"handleClickOn",o,s,d)||r.someProp("handleClick",t=>t(r,o,d))||(e?function(r,o){if(-1==o)return!1;let d,e,s=r.state.selection;s instanceof v.qv&&(d=s.node);let t=r.state.doc.resolve(o);for(let n=t.depth+1;n>0;n--){let i=n>t.depth?t.nodeAfter:t.node(n);if(v.qv.isSelectable(i)){e=d&&s.$from.depth>0&&n>=s.$from.depth&&t.before(s.$from.depth+1)==s.$from.pos?t.before(s.$from.depth):t.before(n);break}}return null!=e&&(tn(r,v.qv.create(r.state.doc,e),"pointer"),!0)}(r,s):function(r,o){if(-1==o)return!1;let s=r.state.doc.resolve(o),d=s.nodeAfter;return!!(d&&d.isAtom&&v.qv.isSelectable(d))&&(tn(r,new v.qv(s),"pointer"),!0)}(r,s))}(this.view,s.pos,s.inside,o,this.selectNode)?o.preventDefault():0==o.button&&(this.flushed||Kt&&this.mightDrag&&!this.mightDrag.node.isAtom||Bt&&!this.view.state.selection.visible&&Math.min(Math.abs(s.pos-this.view.state.selection.from),Math.abs(s.pos-this.view.state.selection.to))<=2)?(tn(this.view,v.Y1.near(this.view.state.doc.resolve(s.pos)),"pointer"),o.preventDefault()):Xe(this.view,"pointer")}move(o){this.updateAllowDefault(o),Xe(this.view,"pointer"),0==o.buttons&&this.done()}updateAllowDefault(o){!this.allowDefault&&(Math.abs(this.event.x-o.clientX)>4||Math.abs(this.event.y-o.clientY)>4)&&(this.allowDefault=!0)}}function oo(r,o){return!!r.composing||!!(Kt&&Math.abs(o.timeStamp-r.input.compositionEndedAt)<500)&&(r.input.compositionEndedAt=-2e8,!0)}ke.touchstart=r=>{r.input.lastTouch=Date.now(),wn(r),Xe(r,"pointer")},ke.touchmove=r=>{r.input.lastTouch=Date.now(),Xe(r,"pointer")},ke.contextmenu=r=>wn(r);const Mo=it?5e3:-1;function Jn(r,o){clearTimeout(r.input.composingTimeout),o>-1&&(r.input.composingTimeout=setTimeout(()=>zn(r),o))}function io(r){for(r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=function(){let r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function zn(r,o=!1){if(!(it&&r.domObserver.flushingSoon>=0)){if(r.domObserver.forceFlush(),io(r),o||r.docView&&r.docView.dirty){let s=Te(r);return s&&!s.eq(r.state.selection)?r.dispatch(r.state.tr.setSelection(s)):r.updateState(r.state),!0}return!1}}Fe.compositionstart=Fe.compositionupdate=r=>{if(!r.composing){r.domObserver.flush();let{state:o}=r,s=o.selection.$from;if(o.selection.empty&&(o.storedMarks||!s.textOffset&&s.parentOffset&&s.nodeBefore.marks.some(d=>!1===d.type.spec.inclusive)))r.markCursor=r.state.storedMarks||s.marks(),zn(r,!0),r.markCursor=null;else if(zn(r),kt&&o.selection.empty&&s.parentOffset&&!s.textOffset&&s.nodeBefore.marks.length){let d=r.domSelectionRange();for(let e=d.focusNode,t=d.focusOffset;e&&1==e.nodeType&&0!=t;){let n=t<0?e.lastChild:e.childNodes[t-1];if(!n)break;if(3==n.nodeType){r.domSelection().collapse(n,n.nodeValue.length);break}e=n,t=-1}}r.input.composing=!0}Jn(r,Mo)},Fe.compositionend=(r,o)=>{r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=o.timeStamp,Jn(r,20))};const An=j&&At<15||ut&&st<604;function Rn(r,o,s,d,e){let t=xt(r,o,s,d,r.state.selection.$from);if(r.someProp("handlePaste",u=>u(r,e,t||l.p2.empty)))return!0;if(!t)return!1;let n=function(r){return 0==r.openStart&&0==r.openEnd&&1==r.content.childCount?r.content.firstChild:null}(t),i=n?r.state.tr.replaceSelectionWith(n,r.input.shiftKey):r.state.tr.replaceSelection(t);return r.dispatch(i.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}ke.copy=Fe.cut=(r,o)=>{let s=o,d=r.state.selection,e="cut"==s.type;if(d.empty)return;let t=An?null:s.clipboardData,n=d.content(),{dom:i,text:u}=Ct(r,n);t?(s.preventDefault(),t.clearData(),t.setData("text/html",i.innerHTML),t.setData("text/plain",u)):function(r,o){if(!r.dom.parentNode)return;let s=r.dom.parentNode.appendChild(document.createElement("div"));s.appendChild(o),s.style.cssText="position: fixed; left: -10000px; top: 10px";let d=getSelection(),e=document.createRange();e.selectNodeContents(o),r.dom.blur(),d.removeAllRanges(),d.addRange(e),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s),r.focus()},50)}(r,i),e&&r.dispatch(r.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Fe.paste=(r,o)=>{let s=o;if(r.composing&&!it)return;let d=An?null:s.clipboardData;d&&Rn(r,d.getData("text/plain"),d.getData("text/html"),r.input.shiftKey,s)?s.preventDefault():function(r,o){if(!r.dom.parentNode)return;let s=r.input.shiftKey||r.state.selection.$from.parent.type.spec.code,d=r.dom.parentNode.appendChild(document.createElement(s?"textarea":"div"));s||(d.contentEditable="true"),d.style.cssText="position: fixed; left: -10000px; top: 10px",d.focus(),setTimeout(()=>{r.focus(),d.parentNode&&d.parentNode.removeChild(d),s?Rn(r,d.value,null,r.input.shiftKey,o):Rn(r,d.textContent,d.innerHTML,r.input.shiftKey,o)},50)}(r,s)};class Xn{constructor(o,s){this.slice=o,this.move=s}}const Ln=L?"altKey":"ctrlKey";ke.dragstart=(r,o)=>{let s=o,d=r.input.mouseDown;if(d&&d.done(),!s.dataTransfer)return;let e=r.state.selection,t=e.empty?null:r.posAtCoords(nn(s));if(!(t&&t.pos>=e.from&&t.pos<=(e instanceof v.qv?e.to-1:e.to)))if(d&&d.mightDrag)r.dispatch(r.state.tr.setSelection(v.qv.create(r.state.doc,d.mightDrag.pos)));else if(s.target&&1==s.target.nodeType){let h=r.docView.nearestDesc(s.target,!0);h&&h.node.type.spec.draggable&&h!=r.docView&&r.dispatch(r.state.tr.setSelection(v.qv.create(r.state.doc,h.posBefore)))}let n=r.state.selection.content(),{dom:i,text:u}=Ct(r,n);s.dataTransfer.clearData(),s.dataTransfer.setData(An?"Text":"text/html",i.innerHTML),s.dataTransfer.effectAllowed="copyMove",An||s.dataTransfer.setData("text/plain",u),r.dragging=new Xn(n,!s[Ln])},ke.dragend=r=>{let o=r.dragging;window.setTimeout(()=>{r.dragging==o&&(r.dragging=null)},50)},Fe.dragover=Fe.dragenter=(r,o)=>o.preventDefault(),Fe.drop=(r,o)=>{let s=o,d=r.dragging;if(r.dragging=null,!s.dataTransfer)return;let e=r.posAtCoords(nn(s));if(!e)return;let t=r.state.doc.resolve(e.pos),n=d&&d.slice;n?r.someProp("transformPasted",Y=>{n=Y(n,r)}):n=xt(r,s.dataTransfer.getData(An?"Text":"text/plain"),An?null:s.dataTransfer.getData("text/html"),!1,t);let i=!(!d||s[Ln]);if(r.someProp("handleDrop",Y=>Y(r,s,n||l.p2.empty,i)))return void s.preventDefault();if(!n)return;s.preventDefault();let u=n?(0,y.nj)(r.state.doc,t.pos,n):t.pos;null==u&&(u=t.pos);let h=r.state.tr;i&&h.deleteSelection();let T=h.mapping.map(u),A=0==n.openStart&&0==n.openEnd&&1==n.content.childCount,B=h.doc;if(A?h.replaceRangeWith(T,T,n.content.firstChild):h.replaceRange(T,T,n),h.doc.eq(B))return;let N=h.doc.resolve(T);if(A&&v.qv.isSelectable(n.content.firstChild)&&N.nodeAfter&&N.nodeAfter.sameMarkup(n.content.firstChild))h.setSelection(new v.qv(N));else{let Y=h.mapping.map(u);h.mapping.maps[h.mapping.maps.length-1].forEach((q,ht,It,$t)=>Y=$t),h.setSelection(hn(r,N,h.doc.resolve(Y)))}r.focus(),r.dispatch(h.setMeta("uiEvent","drop"))},ke.focus=r=>{r.input.lastFocus=Date.now(),r.focused||(r.domObserver.stop(),r.dom.classList.add("ProseMirror-focused"),r.domObserver.start(),r.focused=!0,setTimeout(()=>{r.docView&&r.hasFocus()&&!r.domObserver.currentSelection.eq(r.domSelectionRange())&&le(r)},20))},ke.blur=(r,o)=>{let s=o;r.focused&&(r.domObserver.stop(),r.dom.classList.remove("ProseMirror-focused"),r.domObserver.start(),s.relatedTarget&&r.dom.contains(s.relatedTarget)&&r.domObserver.currentSelection.clear(),r.focused=!1)},ke.beforeinput=(r,o)=>{if(Bt&&it&&"deleteContentBackward"==o.inputType){r.domObserver.flushSoon();let{domChangeCount:d}=r.input;setTimeout(()=>{if(r.input.domChangeCount!=d||(r.dom.blur(),r.focus(),r.someProp("handleKeyDown",t=>t(r,Ot(8,"Backspace")))))return;let{$cursor:e}=r.state.selection;e&&e.pos>0&&r.dispatch(r.state.tr.delete(e.pos-1,e.pos).scrollIntoView())},50)}};for(let r in Fe)ke[r]=Fe[r];function En(r,o){if(r==o)return!0;for(let s in r)if(r[s]!==o[s])return!1;for(let s in o)if(!(s in r))return!1;return!0}class $n{constructor(o,s){this.toDOM=o,this.spec=s||Dn,this.side=this.spec.side||0}map(o,s,d,e){let{pos:t,deleted:n}=o.mapResult(s.from+e,this.side<0?-1:1);return n?null:new on(t-d,t-d,this)}valid(){return!0}eq(o){return this==o||o instanceof $n&&(this.spec.key&&this.spec.key==o.spec.key||this.toDOM==o.toDOM&&En(this.spec,o.spec))}destroy(o){this.spec.destroy&&this.spec.destroy(o)}}class pn{constructor(o,s){this.attrs=o,this.spec=s||Dn}map(o,s,d,e){let t=o.map(s.from+e,this.spec.inclusiveStart?-1:1)-d,n=o.map(s.to+e,this.spec.inclusiveEnd?1:-1)-d;return t>=n?null:new on(t,n,this)}valid(o,s){return s.from<s.to}eq(o){return this==o||o instanceof pn&&En(this.attrs,o.attrs)&&En(this.spec,o.spec)}static is(o){return o.type instanceof pn}destroy(){}}class Zn{constructor(o,s){this.attrs=o,this.spec=s||Dn}map(o,s,d,e){let t=o.mapResult(s.from+e,1);if(t.deleted)return null;let n=o.mapResult(s.to+e,-1);return n.deleted||n.pos<=t.pos?null:new on(t.pos-d,n.pos-d,this)}valid(o,s){let t,{index:d,offset:e}=o.content.findIndex(s.from);return e==s.from&&!(t=o.child(d)).isText&&e+t.nodeSize==s.to}eq(o){return this==o||o instanceof Zn&&En(this.attrs,o.attrs)&&En(this.spec,o.spec)}destroy(){}}class on{constructor(o,s,d){this.from=o,this.to=s,this.type=d}copy(o,s){return new on(o,s,this.type)}eq(o,s=0){return this.type.eq(o.type)&&this.from+s==o.from&&this.to+s==o.to}map(o,s,d){return this.type.map(o,this,s,d)}static widget(o,s,d){return new on(o,o,new $n(s,d))}static inline(o,s,d,e){return new on(o,s,new pn(d,e))}static node(o,s,d,e){return new on(o,s,new Zn(d,e))}get spec(){return this.type.spec}get inline(){return this.type instanceof pn}}const Bn=[],Dn={};class Ze{constructor(o,s){this.local=o.length?o:Bn,this.children=s.length?s:Bn}static create(o,s){return s.length?Yn(s,o,0,Dn):Ge}find(o,s,d){let e=[];return this.findInner(null==o?0:o,null==s?1e9:s,e,0,d),e}findInner(o,s,d,e,t){for(let n=0;n<this.local.length;n++){let i=this.local[n];i.from<=s&&i.to>=o&&(!t||t(i.spec))&&d.push(i.copy(i.from+e,i.to+e))}for(let n=0;n<this.children.length;n+=3)if(this.children[n]<s&&this.children[n+1]>o){let i=this.children[n]+1;this.children[n+2].findInner(o-i,s-i,d,e+i,t)}}map(o,s,d){return this==Ge||0==o.maps.length?this:this.mapInner(o,s,0,0,d||Dn)}mapInner(o,s,d,e,t){let n;for(let i=0;i<this.local.length;i++){let u=this.local[i].map(o,d,e);u&&u.type.valid(s,u)?(n||(n=[])).push(u):t.onRemove&&t.onRemove(this.local[i].spec)}return this.children.length?function(r,o,s,d,e,t,n){let i=r.slice();for(let h=0,T=t;h<s.maps.length;h++){let A=0;s.maps[h].forEach((B,N,Y,q)=>{let ht=q-Y-(N-B);for(let It=0;It<i.length;It+=3){let $t=i[It+1];if($t<0||B>$t+T-A)continue;let Vt=i[It]+T-A;N>=Vt?i[It+1]=B<=Vt?-2:-1:Y>=e&&ht&&(i[It]+=ht,i[It+1]+=ht)}A+=ht}),T=s.maps[h].map(T,-1)}let u=!1;for(let h=0;h<i.length;h+=3)if(i[h+1]<0){if(-2==i[h+1]){u=!0,i[h+1]=-1;continue}let T=s.map(r[h]+t),A=T-e;if(A<0||A>=d.content.size){u=!0;continue}let N=s.map(r[h+1]+t,-1)-e,{index:Y,offset:q}=d.content.findIndex(A),ht=d.maybeChild(Y);if(ht&&q==A&&q+ht.nodeSize==N){let It=i[h+2].mapInner(s,ht,T+1,r[h]+t+1,n);It!=Ge?(i[h]=A,i[h+1]=N,i[h+2]=It):(i[h+1]=-2,u=!0)}else u=!0}if(u){let h=function(r,o,s,d,e,t,n){function i(u,h){for(let T=0;T<u.local.length;T++){let A=u.local[T].map(d,e,h);A?s.push(A):n.onRemove&&n.onRemove(u.local[T].spec)}for(let T=0;T<u.children.length;T+=3)i(u.children[T+2],u.children[T]+h+1)}for(let u=0;u<r.length;u+=3)-1==r[u+1]&&i(r[u+2],o[u]+t+1);return s}(i,r,o,s,e,t,n),T=Yn(h,d,0,n);o=T.local;for(let A=0;A<i.length;A+=3)i[A+1]<0&&(i.splice(A,3),A-=3);for(let A=0,B=0;A<T.children.length;A+=3){let N=T.children[A];for(;B<i.length&&i[B]<N;)B+=3;i.splice(B,0,T.children[A],T.children[A+1],T.children[A+2])}}return new Ze(o.sort(_n),i)}(this.children,n||[],o,s,d,e,t):n?new Ze(n.sort(_n),Bn):Ge}add(o,s){return s.length?this==Ge?Ze.create(o,s):this.addInner(o,s,0):this}addInner(o,s,d){let e,t=0;o.forEach((i,u)=>{let T,h=u+d;if(T=qn(s,i,h)){for(e||(e=this.children.slice());t<e.length&&e[t]<u;)t+=3;e[t]==u?e[t+2]=e[t+2].addInner(i,T,h+1):e.splice(t,0,u,u+i.nodeSize,Yn(T,i,h+1,Dn)),t+=3}});let n=so(t?lo(s):s,-d);for(let i=0;i<n.length;i++)n[i].type.valid(o,n[i])||n.splice(i--,1);return new Ze(n.length?this.local.concat(n).sort(_n):this.local,e||this.children)}remove(o){return 0==o.length||this==Ge?this:this.removeInner(o,0)}removeInner(o,s){let d=this.children,e=this.local;for(let t=0;t<d.length;t+=3){let n,i=d[t]+s,u=d[t+1]+s;for(let A,T=0;T<o.length;T++)(A=o[T])&&A.from>i&&A.to<u&&(o[T]=null,(n||(n=[])).push(A));if(!n)continue;d==this.children&&(d=this.children.slice());let h=d[t+2].removeInner(n,i+1);h!=Ge?d[t+2]=h:(d.splice(t,3),t-=3)}if(e.length)for(let n,t=0;t<o.length;t++)if(n=o[t])for(let i=0;i<e.length;i++)e[i].eq(n,s)&&(e==this.local&&(e=this.local.slice()),e.splice(i--,1));return d==this.children&&e==this.local?this:e.length||d.length?new Ze(e,d):Ge}forChild(o,s){if(this==Ge)return this;if(s.isLeaf)return Ze.empty;let d,e;for(let i=0;i<this.children.length;i+=3)if(this.children[i]>=o){this.children[i]==o&&(d=this.children[i+2]);break}let t=o+1,n=t+s.content.size;for(let i=0;i<this.local.length;i++){let u=this.local[i];if(u.from<n&&u.to>t&&u.type instanceof pn){let h=Math.max(t,u.from)-t,T=Math.min(n,u.to)-t;h<T&&(e||(e=[])).push(u.copy(h,T))}}if(e){let i=new Ze(e.sort(_n),Bn);return d?new yn([i,d]):i}return d||Ge}eq(o){if(this==o)return!0;if(!(o instanceof Ze)||this.local.length!=o.local.length||this.children.length!=o.children.length)return!1;for(let s=0;s<this.local.length;s++)if(!this.local[s].eq(o.local[s]))return!1;for(let s=0;s<this.children.length;s+=3)if(this.children[s]!=o.children[s]||this.children[s+1]!=o.children[s+1]||!this.children[s+2].eq(o.children[s+2]))return!1;return!0}locals(o){return Wn(this.localsInner(o))}localsInner(o){if(this==Ge)return Bn;if(o.inlineContent||!this.local.some(pn.is))return this.local;let s=[];for(let d=0;d<this.local.length;d++)this.local[d].type instanceof pn||s.push(this.local[d]);return s}}Ze.empty=new Ze([],[]),Ze.removeOverlap=Wn;const Ge=Ze.empty;class yn{constructor(o){this.members=o}map(o,s){const d=this.members.map(e=>e.map(o,s,Dn));return yn.from(d)}forChild(o,s){if(s.isLeaf)return Ze.empty;let d=[];for(let e=0;e<this.members.length;e++){let t=this.members[e].forChild(o,s);t!=Ge&&(t instanceof yn?d=d.concat(t.members):d.push(t))}return yn.from(d)}eq(o){if(!(o instanceof yn)||o.members.length!=this.members.length)return!1;for(let s=0;s<this.members.length;s++)if(!this.members[s].eq(o.members[s]))return!1;return!0}locals(o){let s,d=!0;for(let e=0;e<this.members.length;e++){let t=this.members[e].localsInner(o);if(t.length)if(s){d&&(s=s.slice(),d=!1);for(let n=0;n<t.length;n++)s.push(t[n])}else s=t}return s?Wn(d?s:s.sort(_n)):Bn}static from(o){switch(o.length){case 0:return Ge;case 1:return o[0];default:return new yn(o.every(s=>s instanceof Ze)?o:o.reduce((s,d)=>s.concat(d instanceof Ze?d:d.members),[]))}}}function so(r,o){if(!o||!r.length)return r;let s=[];for(let d=0;d<r.length;d++){let e=r[d];s.push(new on(e.from+o,e.to+o,e.type))}return s}function qn(r,o,s){if(o.isLeaf)return null;let d=s+o.nodeSize,e=null;for(let n,t=0;t<r.length;t++)(n=r[t])&&n.from>s&&n.to<d&&((e||(e=[])).push(n),r[t]=null);return e}function lo(r){let o=[];for(let s=0;s<r.length;s++)null!=r[s]&&o.push(r[s]);return o}function Yn(r,o,s,d){let e=[],t=!1;o.forEach((i,u)=>{let h=qn(r,i,u+s);if(h){t=!0;let T=Yn(h,i,s+u+1,d);T!=Ge&&e.push(u,u+i.nodeSize,T)}});let n=so(t?lo(r):r,-s).sort(_n);for(let i=0;i<n.length;i++)n[i].type.valid(o,n[i])||(d.onRemove&&d.onRemove(n[i].spec),n.splice(i--,1));return n.length||e.length?new Ze(n,e):Ge}function _n(r,o){return r.from-o.from||r.to-o.to}function Wn(r){let o=r;for(let s=0;s<o.length-1;s++){let d=o[s];if(d.from!=d.to)for(let e=s+1;e<o.length;e++){let t=o[e];if(t.from!=d.from){t.from<d.to&&(o==r&&(o=r.slice()),o[s]=d.copy(d.from,t.from),xo(o,e,d.copy(t.from,d.to)));break}t.to!=d.to&&(o==r&&(o=r.slice()),o[e]=t.copy(t.from,d.to),xo(o,e+1,t.copy(d.to,t.to)))}}return o}function xo(r,o,s){for(;o<r.length&&_n(s,r[o])>0;)o++;r.splice(o,0,s)}function ao(r){let o=[];return r.someProp("decorations",s=>{let d=s(r.state);d&&d!=Ge&&o.push(d)}),r.cursorWrapper&&o.push(Ze.create(r.state.doc,[r.cursorWrapper.deco])),yn.from(o)}const No={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ho=j&&At<=11;class Uo{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(o){this.anchorNode=o.anchorNode,this.anchorOffset=o.anchorOffset,this.focusNode=o.focusNode,this.focusOffset=o.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(o){return o.anchorNode==this.anchorNode&&o.anchorOffset==this.anchorOffset&&o.focusNode==this.focusNode&&o.focusOffset==this.focusOffset}}class zo{constructor(o,s){this.view=o,this.handleDOMChange=s,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Uo,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(d=>{for(let e=0;e<d.length;e++)this.queue.push(d[e]);j&&At<=11&&d.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),Ho&&(this.onCharData=d=>{this.queue.push({target:d.target,type:"characterData",oldValue:d.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,No)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let o=this.observer.takeRecords();if(o.length){for(let s=0;s<o.length;s++)this.queue.push(o[s]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Sn(this.view)){if(this.suppressingSelectionUpdates)return le(this.view);if(j&&At<=11&&!this.view.state.selection.empty){let o=this.view.domSelectionRange();if(o.focusNode&&X(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(o){if(!o.focusNode)return!0;let d,s=new Set;for(let t=o.focusNode;t;t=g(t))s.add(t);for(let t=o.anchorNode;t;t=g(t))if(s.has(t)){d=t;break}let e=d&&this.view.docView.nearestDesc(d);return e&&e.ignoreMutation({type:"selection",target:3==d.nodeType?d.parentNode:d})?(this.setCurSelection(),!0):void 0}flush(){let{view:o}=this;if(!o.docView||this.flushingSoon>-1)return;let s=this.observer?this.observer.takeRecords():[];this.queue.length&&(s=this.queue.concat(s),this.queue.length=0);let d=o.domSelectionRange(),e=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(d)&&Sn(o)&&!this.ignoreSelectionChange(d),t=-1,n=-1,i=!1,u=[];if(o.editable)for(let T=0;T<s.length;T++){let A=this.registerMutation(s[T],u);A&&(t=t<0?A.from:Math.min(A.from,t),n=n<0?A.to:Math.max(A.to,n),A.typeOver&&(i=!0))}if(kt&&u.length>1){let T=u.filter(A=>"BR"==A.nodeName);if(2==T.length){let A=T[0],B=T[1];A.parentNode&&A.parentNode.parentNode==B.parentNode?B.remove():A.remove()}}let h=null;t<0&&e&&o.input.lastFocus>Date.now()-200&&Math.max(o.input.lastTouch,o.input.lastClick.time)<Date.now()-300&&ft(d)&&(h=Te(o))&&h.eq(v.Y1.near(o.state.doc.resolve(0),1))?(o.input.lastFocus=0,le(o),this.currentSelection.set(d),o.scrollToSelection()):(t>-1||e)&&(t>-1&&(o.docView.markDirty(t,n),function(r){if(!Ao.has(r)&&(Ao.set(r,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(r.dom).whiteSpace))){if(r.requiresGeckoHackNode=kt,Do)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Do=!0}}(o)),this.handleDOMChange(t,n,i,u),o.docView&&o.docView.dirty?o.updateState(o.state):this.currentSelection.eq(d)||le(o),this.currentSelection.set(d))}registerMutation(o,s){if(s.indexOf(o.target)>-1)return null;let d=this.view.docView.nearestDesc(o.target);if("attributes"==o.type&&(d==this.view.docView||"contenteditable"==o.attributeName||"style"==o.attributeName&&!o.oldValue&&!o.target.getAttribute("style"))||!d||d.ignoreMutation(o))return null;if("childList"==o.type){for(let T=0;T<o.addedNodes.length;T++)s.push(o.addedNodes[T]);if(d.contentDOM&&d.contentDOM!=d.dom&&!d.contentDOM.contains(o.target))return{from:d.posBefore,to:d.posAfter};let e=o.previousSibling,t=o.nextSibling;if(j&&At<=11&&o.addedNodes.length)for(let T=0;T<o.addedNodes.length;T++){let{previousSibling:A,nextSibling:B}=o.addedNodes[T];(!A||Array.prototype.indexOf.call(o.addedNodes,A)<0)&&(e=A),(!B||Array.prototype.indexOf.call(o.addedNodes,B)<0)&&(t=B)}let n=e&&e.parentNode==o.target?P(e)+1:0,i=d.localPosFromDOM(o.target,n,-1),u=t&&t.parentNode==o.target?P(t):o.target.childNodes.length;return{from:i,to:d.localPosFromDOM(o.target,u,1)}}return"attributes"==o.type?{from:d.posAtStart-d.border,to:d.posAtEnd+d.border}:{from:d.posAtStart,to:d.posAtEnd,typeOver:o.target.nodeValue==o.oldValue}}}let Ao=new WeakMap,Do=!1;function So(r){let o=r.pmViewDesc;if(o)return o.parseRule();if("BR"==r.nodeName&&r.parentNode){if(Kt&&/^(ul|ol)$/i.test(r.parentNode.nodeName)){let s=document.createElement("div");return s.appendChild(document.createElement("li")),{skip:s}}if(r.parentNode.lastChild==r||Kt&&/^(tr|table)$/i.test(r.parentNode.nodeName))return{ignore:!0}}else if("IMG"==r.nodeName&&r.getAttribute("mark-placeholder"))return{ignore:!0};return null}const ko=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function co(r,o,s){return Math.max(s.anchor,s.head)>o.content.size?null:hn(r,o.resolve(s.anchor),o.resolve(s.head))}function to(r,o,s){let d=r.depth,e=o?r.end():r.pos;for(;d>0&&(o||r.indexAfter(d)==r.node(d).childCount);)d--,e++,o=!1;if(s){let t=r.node(d).maybeChild(r.indexAfter(d));for(;t&&!t.isLeaf;)t=t.firstChild,e++}return e}class Ro{constructor(o,s){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Qn,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=s,this.state=s.state,this.directPlugins=s.plugins||[],this.directPlugins.forEach(go),this.dispatch=this.dispatch.bind(this),this.dom=o&&o.mount||document.createElement("div"),o&&(o.appendChild?o.appendChild(this.dom):"function"==typeof o?o(this.dom):o.mount&&(this.mounted=!0)),this.editable=Nn(this),fo(this),this.nodeViews=mo(this),this.docView=a(this.state.doc,ho(this),ao(this),this.dom,this),this.domObserver=new zo(this,(d,e,t,n)=>function(r,o,s,d,e){if(o<0){let ae=r.input.lastSelectionTime>Date.now()-50?r.input.lastSelectionOrigin:null,Ve=Te(r,ae);if(Ve&&!r.state.selection.eq(Ve)){if(Bt&&it&&13===r.input.lastKeyCode&&Date.now()-100<r.input.lastKeyCodeTime&&r.someProp("handleKeyDown",bn=>bn(r,Ot(13,"Enter"))))return;let an=r.state.tr.setSelection(Ve);"pointer"==ae?an.setMeta("pointer",!0):"key"==ae&&an.scrollIntoView(),r.dispatch(an)}return}let t=r.state.doc.resolve(o),n=t.sharedDepth(s);o=t.before(n+1),s=r.state.doc.resolve(s).after(n+1);let A,B,i=r.state.selection,u=function(r,o,s){let h,{node:d,fromOffset:e,toOffset:t,from:n,to:i}=r.docView.parseRange(o,s),u=r.domSelectionRange(),T=u.anchorNode;if(T&&r.dom.contains(1==T.nodeType?T:T.parentNode)&&(h=[{node:T,offset:u.anchorOffset}],ft(u)||h.push({node:u.focusNode,offset:u.focusOffset})),Bt&&8===r.input.lastKeyCode)for(let ht=t;ht>e;ht--){let It=d.childNodes[ht-1],$t=It.pmViewDesc;if("BR"==It.nodeName&&!$t){t=ht;break}if(!$t||$t.size)break}let A=r.state.doc,B=r.someProp("domParser")||l.aw.fromSchema(r.state.schema),N=A.resolve(n),Y=null,q=B.parse(d,{topNode:N.parent,topMatch:N.parent.contentMatchAt(N.index()),topOpen:!0,from:e,to:t,preserveWhitespace:"pre"!=N.parent.type.whitespace||"full",findPositions:h,ruleFromNode:So,context:N});if(h&&null!=h[0].pos){let ht=h[0].pos,It=h[1]&&h[1].pos;null==It&&(It=ht),Y={anchor:ht+n,head:It+n}}return{doc:q,sel:Y,from:n,to:i}}(r,o,s),h=r.state.doc,T=h.slice(u.from,u.to);8===r.input.lastKeyCode&&Date.now()-100<r.input.lastKeyCodeTime?(A=r.state.selection.to,B="end"):(A=r.state.selection.from,B="start"),r.input.lastKeyCode=null;let N=function(r,o,s,d,e){let t=r.findDiffStart(o,s);if(null==t)return null;let{a:n,b:i}=r.findDiffEnd(o,s+r.size,s+o.size);return"end"==e&&(d-=n+Math.max(0,t-Math.min(n,i))-t),n<t&&r.size<o.size?(t-=d<=t&&d>=n?t-d:0,i=t+(i-n),n=t):i<t&&(t-=d<=t&&d>=i?t-d:0,n=t+(n-i),i=t),{start:t,endA:n,endB:i}}(T.content,u.doc.content,u.from,A,B);if((ut&&r.input.lastIOSEnter>Date.now()-225||it)&&e.some(ae=>1==ae.nodeType&&!ko.test(ae.nodeName))&&(!N||N.endA>=N.endB)&&r.someProp("handleKeyDown",ae=>ae(r,Ot(13,"Enter"))))return void(r.input.lastIOSEnter=0);if(!N){if(!(d&&i instanceof v.Bs&&!i.empty&&i.$head.sameParent(i.$anchor))||r.composing||u.sel&&u.sel.anchor!=u.sel.head){if(u.sel){let ae=co(r,r.state.doc,u.sel);ae&&!ae.eq(r.state.selection)&&r.dispatch(r.state.tr.setSelection(ae))}return}N={start:i.from,endA:i.to,endB:i.to}}if(Bt&&r.cursorWrapper&&u.sel&&u.sel.anchor==r.cursorWrapper.deco.from&&u.sel.head==u.sel.anchor){let ae=N.endB-N.start;u.sel={anchor:u.sel.anchor+ae,head:u.sel.anchor+ae}}r.input.domChangeCount++,r.state.selection.from<r.state.selection.to&&N.start==N.endB&&r.state.selection instanceof v.Bs&&(N.start>r.state.selection.from&&N.start<=r.state.selection.from+2&&r.state.selection.from>=u.from?N.start=r.state.selection.from:N.endA<r.state.selection.to&&N.endA>=r.state.selection.to-2&&r.state.selection.to<=u.to&&(N.endB+=r.state.selection.to-N.endA,N.endA=r.state.selection.to)),j&&At<=11&&N.endB==N.start+1&&N.endA==N.start&&N.start>u.from&&" \xa0"==u.doc.textBetween(N.start-u.from-1,N.start-u.from+1)&&(N.start--,N.endA--,N.endB--);let $t,Y=u.doc.resolveNoCache(N.start-u.from),q=u.doc.resolveNoCache(N.endB-u.from),ht=h.resolve(N.start),It=Y.sameParent(q)&&Y.parent.inlineContent&&ht.end()>=N.endA;if((ut&&r.input.lastIOSEnter>Date.now()-225&&(!It||e.some(ae=>"DIV"==ae.nodeName||"P"==ae.nodeName))||!It&&Y.pos<u.doc.content.size&&($t=v.Y1.findFrom(u.doc.resolve(Y.pos+1),1,!0))&&$t.head==q.pos)&&r.someProp("handleKeyDown",ae=>ae(r,Ot(13,"Enter"))))return void(r.input.lastIOSEnter=0);if(r.state.selection.anchor>N.start&&function(r,o,s,d,e){if(!d.parent.isTextblock||s-o<=e.pos-d.pos||to(d,!0,!1)<e.pos)return!1;let t=r.resolve(o);if(t.parentOffset<t.parent.content.size||!t.parent.isTextblock)return!1;let n=r.resolve(to(t,!0,!0));return!(!n.parent.isTextblock||n.pos>s||to(n,!0,!1)<s)&&d.parent.content.cut(d.parentOffset).eq(n.parent.content)}(h,N.start,N.endA,Y,q)&&r.someProp("handleKeyDown",ae=>ae(r,Ot(8,"Backspace"))))return void(it&&Bt&&r.domObserver.suppressSelectionUpdates());Bt&&it&&N.endB==N.start&&(r.input.lastAndroidDelete=Date.now()),it&&!It&&Y.start()!=q.start()&&0==q.parentOffset&&Y.depth==q.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==N.endA&&(N.endB-=2,q=u.doc.resolveNoCache(N.endB-u.from),setTimeout(()=>{r.someProp("handleKeyDown",function(ae){return ae(r,Ot(13,"Enter"))})},20));let qt,Se,Ke,Vt=N.start,Xt=N.endA;if(It)if(Y.pos==q.pos)j&&At<=11&&0==Y.parentOffset&&(r.domObserver.suppressSelectionUpdates(),setTimeout(()=>le(r),20)),qt=r.state.tr.delete(Vt,Xt),Se=h.resolve(N.start).marksAcross(h.resolve(N.endA));else if(N.endA==N.endB&&(Ke=function(r,o){let n,i,u,s=r.firstChild.marks,d=o.firstChild.marks,e=s,t=d;for(let T=0;T<d.length;T++)e=d[T].removeFromSet(e);for(let T=0;T<s.length;T++)t=s[T].removeFromSet(t);if(1==e.length&&0==t.length)i=e[0],n="add",u=T=>T.mark(i.addToSet(T.marks));else{if(0!=e.length||1!=t.length)return null;i=t[0],n="remove",u=T=>T.mark(i.removeFromSet(T.marks))}let h=[];for(let T=0;T<o.childCount;T++)h.push(u(o.child(T)));if(l.HY.from(h).eq(r))return{mark:i,type:n}}(Y.parent.content.cut(Y.parentOffset,q.parentOffset),ht.parent.content.cut(ht.parentOffset,N.endA-ht.start()))))qt=r.state.tr,"add"==Ke.type?qt.addMark(Vt,Xt,Ke.mark):qt.removeMark(Vt,Xt,Ke.mark);else if(Y.parent.child(Y.index()).isText&&Y.index()==q.index()-(q.textOffset?0:1)){let ae=Y.parent.textBetween(Y.parentOffset,q.parentOffset);if(r.someProp("handleTextInput",Ve=>Ve(r,Vt,Xt,ae)))return;qt=r.state.tr.insertText(ae,Vt,Xt)}if(qt||(qt=r.state.tr.replace(Vt,Xt,u.doc.slice(N.start-u.from,N.endB-u.from))),u.sel){let ae=co(r,qt.doc,u.sel);ae&&!(Bt&&it&&r.composing&&ae.empty&&(N.start!=N.endB||r.input.lastAndroidDelete<Date.now()-100)&&(ae.head==Vt||ae.head==qt.mapping.map(Xt)-1)||j&&ae.empty&&ae.head==Vt)&&qt.setSelection(ae)}Se&&qt.ensureMarks(Se),r.dispatch(qt.scrollIntoView())}(this,d,e,t,n)),this.domObserver.start(),function(r){for(let o in ke){let s=ke[o];r.dom.addEventListener(o,r.input.eventHandlers[o]=d=>{mn(r,d)&&!un(r,d)&&(r.editable||!(d.type in Fe))&&s(r,d)},Vn[o]?{passive:!0}:void 0)}Kt&&r.dom.addEventListener("input",()=>null),vn(r)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let o=this._props;this._props={};for(let s in o)this._props[s]=o[s];this._props.state=this.state}return this._props}update(o){o.handleDOMEvents!=this._props.handleDOMEvents&&vn(this);let s=this._props;this._props=o,o.plugins&&(o.plugins.forEach(go),this.directPlugins=o.plugins),this.updateStateInner(o.state,s)}setProps(o){let s={};for(let d in this._props)s[d]=this._props[d];s.state=this.state;for(let d in o)s[d]=o[d];this.update(s)}updateState(o){this.updateStateInner(o,this._props)}updateStateInner(o,s){let d=this.state,e=!1,t=!1;o.storedMarks&&this.composing&&(io(this),t=!0),this.state=o;let n=d.plugins!=o.plugins||this._props.plugins!=s.plugins;if(n||this._props.plugins!=s.plugins||this._props.nodeViews!=s.nodeViews){let B=mo(this);(function(r,o){let s=0,d=0;for(let e in r){if(r[e]!=o[e])return!0;s++}for(let e in o)d++;return s!=d})(B,this.nodeViews)&&(this.nodeViews=B,e=!0)}(n||s.handleDOMEvents!=this._props.handleDOMEvents)&&vn(this),this.editable=Nn(this),fo(this);let i=ao(this),u=ho(this),h=d.plugins==o.plugins||d.doc.eq(o.doc)?o.scrollToSelection>d.scrollToSelection?"to selection":"preserve":"reset",T=e||!this.docView.matchesNode(o.doc,u,i);(T||!o.selection.eq(d.selection))&&(t=!0);let A="preserve"==h&&t&&null==this.dom.style.overflowAnchor&&function(r){let d,e,o=r.dom.getBoundingClientRect(),s=Math.max(0,o.top);for(let t=(o.left+o.right)/2,n=s+1;n<Math.min(innerHeight,o.bottom);n+=5){let i=r.root.elementFromPoint(t,n);if(!i||i==r.dom||!r.dom.contains(i))continue;let u=i.getBoundingClientRect();if(u.top>=s-20){d=i,e=u.top;break}}return{refDOM:d,refTop:e,stack:Zt(r.dom)}}(this);if(t){this.domObserver.stop();let B=T&&(j||Bt)&&!this.composing&&!d.selection.empty&&!o.selection.empty&&function(r,o){let s=Math.min(r.$anchor.sharedDepth(r.head),o.$anchor.sharedDepth(o.head));return r.$anchor.start(s)!=o.$anchor.start(s)}(d.selection,o.selection);if(T){let N=Bt?this.trackWrites=this.domSelectionRange().focusNode:null;(e||!this.docView.update(o.doc,u,i,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=a(o.doc,u,i,this.dom,this)),N&&!this.trackWrites&&(B=!0)}B||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(r){let o=r.docView.domFromPos(r.state.selection.anchor,0),s=r.domSelectionRange();return X(o.node,o.offset,s.anchorNode,s.anchorOffset)}(this))?le(this,B):(Hn(this,o.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(d),"reset"==h?this.dom.scrollTop=0:"to selection"==h?this.scrollToSelection():A&&function({refDOM:r,refTop:o,stack:s}){let d=r?r.getBoundingClientRect().top:0;zt(s,0==d?0:d-o)}(A)}scrollToSelection(){let o=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",s=>s(this)))if(this.state.selection instanceof v.qv){let s=this.docView.domAfterPos(this.state.selection.from);1==s.nodeType&&wt(this,s.getBoundingClientRect(),o)}else wt(this,this.coordsAtPos(this.state.selection.head,1),o)}destroyPluginViews(){let o;for(;o=this.pluginViews.pop();)o.destroy&&o.destroy()}updatePluginViews(o){if(o&&o.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let s=0;s<this.pluginViews.length;s++){let d=this.pluginViews[s];d.update&&d.update(this,o)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let s=0;s<this.directPlugins.length;s++){let d=this.directPlugins[s];d.spec.view&&this.pluginViews.push(d.spec.view(this))}for(let s=0;s<this.state.plugins.length;s++){let d=this.state.plugins[s];d.spec.view&&this.pluginViews.push(d.spec.view(this))}}}someProp(o,s){let e,d=this._props&&this._props[o];if(null!=d&&(e=s?s(d):d))return e;for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n].props[o];if(null!=i&&(e=s?s(i):i))return e}let t=this.state.plugins;if(t)for(let n=0;n<t.length;n++){let i=t[n].props[o];if(null!=i&&(e=s?s(i):i))return e}}hasFocus(){if(j){let o=this.root.activeElement;if(o==this.dom)return!0;if(!o||!this.dom.contains(o))return!1;for(;o&&this.dom!=o&&this.dom.contains(o);){if("false"==o.contentEditable)return!1;o=o.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(r){if(r.setActive)return r.setActive();if(ue)return r.focus(ue);let o=Zt(r);r.focus(null==ue?{get preventScroll(){return ue={preventScroll:!0},!0}}:void 0),ue||(ue=!1,zt(o,0))}(this.dom),le(this),this.domObserver.start()}get root(){let o=this._root;if(null==o)for(let s=this.dom.parentNode;s;s=s.parentNode)if(9==s.nodeType||11==s.nodeType&&s.host)return s.getSelection||(Object.getPrototypeOf(s).getSelection=()=>s.ownerDocument.getSelection()),this._root=s;return o||document}posAtCoords(o){return ve(this,o)}coordsAtPos(o,s=1){return Me(this,o,s)}domAtPos(o,s=0){return this.docView.domFromPos(o,s)}nodeDOM(o){let s=this.docView.descAt(o);return s?s.nodeDOM:null}posAtDOM(o,s,d=-1){let e=this.docView.posFromDOM(o,s,d);if(null==e)throw new RangeError("DOM position not inside the editor");return e}endOfTextblock(o,s){return function(r,o,s){return _e==o&&fe==s?Ee:(_e=o,fe=s,Ee="up"==s||"down"==s?function(r,o,s){let d=o.selection,e="up"==s?d.$from:d.$to;return He(r,o,()=>{let{node:t}=r.docView.domFromPos(e.pos,"up"==s?-1:1);for(;;){let i=r.docView.nearestDesc(t,!0);if(!i)break;if(i.node.isBlock){t=i.contentDOM||i.dom;break}t=i.dom.parentNode}let n=Me(r,e.pos,1);for(let i=t.firstChild;i;i=i.nextSibling){let u;if(1==i.nodeType)u=i.getClientRects();else{if(3!=i.nodeType)continue;u=H(i,0,i.nodeValue.length).getClientRects()}for(let h=0;h<u.length;h++){let T=u[h];if(T.bottom>T.top+1&&("up"==s?n.top-T.top>2*(T.bottom-n.top):T.bottom-n.bottom>2*(n.bottom-T.top)))return!1}}return!0})}(r,o,s):function(r,o,s){let{$head:d}=o.selection;if(!d.parent.isTextblock)return!1;let e=d.parentOffset,t=!e,n=e==d.parent.content.size,i=r.domSelection();return Le.test(d.parent.textContent)&&i.modify?He(r,o,()=>{let{focusNode:u,focusOffset:h,anchorNode:T,anchorOffset:A}=r.domSelectionRange(),B=i.caretBidiLevel;i.modify("move",s,"character");let N=d.depth?r.docView.domAfterPos(d.before()):r.dom,{focusNode:Y,focusOffset:q}=r.domSelectionRange(),ht=Y&&!N.contains(1==Y.nodeType?Y:Y.parentNode)||u==Y&&h==q;try{i.collapse(T,A),u&&(u!=T||h!=A)&&i.extend&&i.extend(u,h)}catch(It){}return null!=B&&(i.caretBidiLevel=B),ht}):"left"==s||"backward"==s?t:n}(r,o,s))}(this,s||this.state,o)}pasteHTML(o,s){return Rn(this,"",o,!1,s||new ClipboardEvent("paste"))}pasteText(o,s){return Rn(this,o,null,!0,s||new ClipboardEvent("paste"))}destroy(){!this.docView||(function(r){r.domObserver.stop();for(let o in r.input.eventHandlers)r.dom.removeEventListener(o,r.input.eventHandlers[o]);clearTimeout(r.input.composingTimeout),clearTimeout(r.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ao(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(o){return function(r,o){!un(r,o)&&ke[o.type]&&(r.editable||!(o.type in Fe))&&ke[o.type](r,o)}(this,o)}dispatch(o){let s=this._props.dispatchTransaction;s?s.call(this,o):this.updateState(this.state.apply(o))}domSelectionRange(){return Kt&&11===this.root.nodeType&&function(r){let o=r.activeElement;for(;o&&o.shadowRoot;)o=o.shadowRoot.activeElement;return o}(this.dom.ownerDocument)==this.dom?function(r){let o;function s(u){u.preventDefault(),u.stopImmediatePropagation(),o=u.getTargetRanges()[0]}r.dom.addEventListener("beforeinput",s,!0),document.execCommand("indent"),r.dom.removeEventListener("beforeinput",s,!0);let d=o.startContainer,e=o.startOffset,t=o.endContainer,n=o.endOffset,i=r.domAtPos(r.state.selection.anchor);return X(i.node,i.offset,t,n)&&([d,e,t,n]=[t,n,d,e]),{anchorNode:d,anchorOffset:e,focusNode:t,focusOffset:n}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function ho(r){let o=Object.create(null);return o.class="ProseMirror",o.contenteditable=String(r.editable),o.translate="no",r.someProp("attributes",s=>{if("function"==typeof s&&(s=s(r.state)),s)for(let d in s)"class"==d&&(o.class+=" "+s[d]),"style"==d?o.style=(o.style?o.style+";":"")+s[d]:!o[d]&&"contenteditable"!=d&&"nodeName"!=d&&(o[d]=String(s[d]))}),[on.node(0,r.state.doc.content.size,o)]}function fo(r){if(r.markCursor){let o=document.createElement("img");o.className="ProseMirror-separator",o.setAttribute("mark-placeholder","true"),o.setAttribute("alt",""),r.cursorWrapper={dom:o,deco:on.widget(r.state.selection.head,o,{raw:!0,marks:r.markCursor})}}else r.cursorWrapper=null}function Nn(r){return!r.someProp("editable",o=>!1===o(r.state))}function mo(r){let o=Object.create(null);function s(d){for(let e in d)Object.prototype.hasOwnProperty.call(o,e)||(o[e]=d[e])}return r.someProp("nodeViews",s),r.someProp("markViews",s),o}function go(r){if(r.spec.state||r.spec.filterTransaction||r.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}}}]);