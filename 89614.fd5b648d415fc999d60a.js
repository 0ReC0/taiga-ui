"use strict";(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[89614],{89614:(J,F,t)=>{t.r(F),t.d(F,{ExampleTuiEditorUploadFilesModule:()=>$});var p=t(12057),u=t(24751),m=t(33982),f=t(29851),d=t(48014),D=t(68339),r=t(76040),o=t(74788),O=t(88331),h=t(37159),v=t(66596),S=t(57068),L=t(35758),g=t(68939),I=t(64762),M=t(26215),U=t(94402),C=t(88002),A=t(53585);let c=(()=>{class i{constructor(){this.loading$=new M.X(!1)}upload(n){const{host:l,expires:s,autoDelete:a}=A.N.fileIO,E=new FormData;return E.append("file",n,n.name),E.append("expires",s),E.append("autoDelete",a),(0,U.D)(fetch(l,{method:"POST",body:E}).then(T=>(0,I.mG)(this,void 0,void 0,function*(){return T.json()}))).pipe((0,C.U)(T=>({name:T.name,link:T.link})))}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var N=t(23184),x=t(69303),R=t(20179);let P=(()=>{class i{constructor(n){this.fileIoService=n,this.builtInTools=[d.TuiEditorTool.Undo,d.TuiEditorTool.Link,d.TuiEditorTool.Attach],this.control=new u.NI("")}attach(n){n.forEach(l=>{var s,a;return null===(a=null===(s=this.wysiwyg)||void 0===s?void 0:s.editor)||void 0===a?void 0:a.setFileLink(l)})}}return i.\u0275fac=function(n){return new(n||i)(o.Y36(c))},i.\u0275cmp=o.Xpm({type:i,selectors:[["tui-editor-upload-files-example-1"]],viewQuery:function(n,l){if(1&n&&o.Gf(d.TuiEditorComponent,5),2&n){let s;o.iGM(s=o.CRH())&&(l.wysiwyg=s.first)}},features:[o._Bn([{provide:d.TUI_EDITOR_EXTENSIONS,useValue:[Promise.resolve().then(t.bind(t,2823)).then(({StarterKit:e})=>e),Promise.resolve().then(t.bind(t,84402)).then(({TextStyle:e})=>e),Promise.resolve().then(t.bind(t,57734)).then(({TuiLink:e})=>e),t.e(54058).then(t.bind(t,54058)).then(({TuiJumpAnchor:e})=>e),Promise.resolve().then(t.bind(t,93763)).then(({TuiFileLink:e})=>e)]},{provide:d.TUI_ATTACH_FILES_LOADER,deps:[c],useFactory:e=>n=>(e.loading$.next(!0),(0,L.D)(n.map(l=>e.upload(l))).pipe((0,g.x)(()=>e.loading$.next(!1))))}])],decls:10,vars:7,consts:[[3,"showLoader"],[1,"editor",3,"formControl","tools","fileAttached"],[3,"content"]],template:function(n,l){1&n&&(o.TgZ(0,"tui-loader",0),o.ALo(1,"async"),o.TgZ(2,"tui-editor",1),o.NdJ("fileAttached",function(a){return l.attach(a)}),o.qZA(),o.qZA(),o.TgZ(3,"h4"),o._uU(4,"HTML:"),o.qZA(),o._UZ(5,"tui-editor-socket",2),o.TgZ(6,"h4"),o._uU(7,"Text:"),o.qZA(),o.TgZ(8,"p"),o._uU(9),o.qZA()),2&n&&(o.Q6J("showLoader",!!o.lcZ(1,5,l.fileIoService.loading$)),o.xp6(2),o.Q6J("formControl",l.control)("tools",l.builtInTools),o.xp6(3),o.Q6J("content",l.control.value||""),o.xp6(4),o.Oqu(l.control.value))},directives:[N.k,x.a,u.JJ,u.oH,R.D],pipes:[p.Ov],styles:[".editor[_ngcontent-%COMP%]     .tui-editor-socket .ProseMirror{min-height:10rem}"],changeDetection:0}),i})();function y(i,e){if(1&i&&(o.TgZ(0,"p"),o.tHW(1,2),o._UZ(2,"a",3),o._UZ(3,"a",4),o.N_p(),o.qZA(),o.TgZ(4,"tui-doc-example",5),o._UZ(5,"tui-editor-upload-files-example-1"),o.qZA()),2&i){const n=o.oxw();o.xp6(4),o.Q6J("content",n.example1)}}let Z=(()=>{class i{constructor(){this.example1={TypeScript:t.e(18692).then(t.t.bind(t,18692,17)),HTML:t.e(70672).then(t.t.bind(t,70672,17)),LESS:t.e(22540).then(t.t.bind(t,22540,17)),"./filesio.service.ts":t.e(14614).then(t.t.bind(t,14614,17))}}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["editor-upload-files"]],features:[o._Bn([{provide:d.TUI_EDITOR_EXTENSIONS,useValue:d.defaultEditorExtensions}])],decls:2,vars:0,consts:function(){let e,n;return e=$localize`:␟7384ac6e9673eac2ca0755fd1c7a8f4cd617d393␟6878290531283347707: Rich Text Editor based on ${"\ufffd#2\ufffd"}:START_LINK: TipTap Editor ${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd]"}:CLOSE_LINK: for using with Angular forms. For safety reasons use a ${"\ufffd#3\ufffd"}:START_LINK_1: sanitizer ${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd]"}:CLOSE_LINK: with this component. `,e=o.Zx4(e),n=$localize`:␟a36f29be0cdb63b5651ae82369e06f9913916d3b␟5744880155732837230:Upload files`,[["header","Editor","package","ADDON-EDITOR","type","components"],["pageTab",""],e,["tuiLink","","href","https://www.tiptap.dev/"],["tuiLink","","routerLink","/icon-set","fragment","sanitizer"],["id","upload-file","heading",n,"description","100 uploads per day, 2GB file size limit, files auto-deleted after 1 download",3,"content"]]},template:function(n,l){1&n&&(o.TgZ(0,"tui-doc-page",0),o.YNc(1,y,6,1,"ng-template",1),o.qZA())},directives:[O.q,h.n,v.V,m.yS,S.f,P],encapsulation:2,changeDetection:0}),i})(),$=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[p.ez,D.TuiActiveZoneModule,r.TuiSvgModule,r.TuiLinkModule,r.TuiHostedDropdownModule,r.TuiButtonModule,f.fV,u.u5,u.UX,d.TuiEditorModule,r.TuiLoaderModule,d.TuiEditorSocketModule,m.Bz.forChild((0,f.Ve)(Z))]]}),i})()}}]);