"use strict";var Fo=Object.defineProperty,Vo=Object.defineProperties,jo=Object.getOwnPropertyDescriptors,Xn=Object.getOwnPropertySymbols,zo=Object.prototype.hasOwnProperty,Uo=Object.prototype.propertyIsEnumerable,Ho=(yt,tt,a)=>tt in yt?Fo(yt,tt,{enumerable:!0,configurable:!0,writable:!0,value:a}):yt[tt]=a,It=(yt,tt)=>{for(var a in tt||(tt={}))zo.call(tt,a)&&Ho(yt,a,tt[a]);if(Xn)for(var a of Xn(tt))Uo.call(tt,a)&&Ho(yt,a,tt[a]);return yt},ee=(yt,tt)=>Vo(yt,jo(tt)),Ko=(yt,tt)=>{var a={};for(var m in yt)zo.call(yt,m)&&tt.indexOf(m)<0&&(a[m]=yt[m]);if(null!=yt&&Xn)for(var m of Xn(yt))tt.indexOf(m)<0&&Uo.call(yt,m)&&(a[m]=yt[m]);return a};(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[44482],{40256:(yt,tt,a)=>{a.r(tt),a.d(tt,{CommandManager:()=>Ut,Editor:()=>gn,Extension:()=>se,InputRule:()=>b,Mark:()=>We,Node:()=>ze,NodeView:()=>Yn,PasteRule:()=>At,Tracker:()=>So,callOrReturn:()=>Q,combineTransactionSteps:()=>$n,defaultBlockAt:()=>vn,escapeForRegEx:()=>Zn,extensions:()=>Kt,findChildren:()=>Co,findChildrenInRange:()=>Eo,findParentNode:()=>we,findParentNodeClosestToPos:()=>Kn,generateHTML:()=>yo,generateJSON:()=>Jn,generateText:()=>Mo,getAttributes:()=>jn,getChangedRanges:()=>Oo,getDebugJSON:()=>Cn,getExtensionField:()=>V,getHTMLFromFragment:()=>Ze,getMarkAttributes:()=>Oe,getMarkRange:()=>xe,getMarkType:()=>$t,getMarksBetween:()=>En,getNodeAttributes:()=>ae,getNodeType:()=>P,getSchema:()=>Qe,getText:()=>hn,getTextBetween:()=>Ae,getTextContentFromNodes:()=>h,getTextSerializersFromSchema:()=>ke,inputRulesPlugin:()=>gt,isActive:()=>mn,isList:()=>dn,isMarkActive:()=>ye,isNodeActive:()=>Ce,isNodeEmpty:()=>_n,isNodeSelection:()=>bo,isTextSelection:()=>Ve,markInputRule:()=>Do,markPasteRule:()=>Io,mergeAttributes:()=>D,nodeInputRule:()=>wo,pasteRulesPlugin:()=>Se,posToDOMRect:()=>yn,textInputRule:()=>Wo,textPasteRule:()=>Gn,textblockTypeInputRule:()=>No,wrappingInputRule:()=>Po});var m=a(62463),r=a(43594),R=a(13903),_=a(35917),f=a(38480);const U=(n,t)=>!n.selection.empty&&(t&&t(n.tr.deleteSelection().scrollIntoView()),!0),v=(n,t,e)=>{let{$cursor:o}=n.selection;if(!o||(e?!e.endOfTextblock("backward",n):o.parentOffset>0))return!1;let i=q(o);if(!i){let c=o.blockRange(),u=c&&(0,f.k9)(c);return null!=u&&(t&&t(n.tr.lift(c,u).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&Et(n,i,t))return!0;if(0==o.parent.content.size&&(G(s,"end")||m.qv.isSelectable(s))){let c=(0,f.dR)(n.doc,o.before(),o.after(),_.p2.empty);if(c&&c.slice.size<c.to-c.from){if(t){let u=n.tr.step(c);u.setSelection(G(s,"end")?m.Y1.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):m.qv.create(u.doc,i.pos-s.nodeSize)),t(u.scrollIntoView())}return!0}}return!(!s.isAtom||i.depth!=o.depth-1||(t&&t(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),0))};function G(n,t,e=!1){for(let o=n;o;o="start"==t?o.firstChild:o.lastChild){if(o.isTextblock)return!0;if(e&&1!=o.childCount)return!1}return!1}const j=(n,t,e)=>{let{$head:o,empty:i}=n.selection,s=o;if(!i)return!1;if(o.parent.isTextblock){if(e?!e.endOfTextblock("backward",n):o.parentOffset>0)return!1;s=q(o)}let c=s&&s.nodeBefore;return!(!c||!m.qv.isSelectable(c)||(t&&t(n.tr.setSelection(m.qv.create(n.doc,s.pos-c.nodeSize)).scrollIntoView()),0))};function q(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){if(n.index(t)>0)return n.doc.resolve(n.before(t+1));if(n.node(t).type.spec.isolating)break}return null}const X=(n,t,e)=>{let{$cursor:o}=n.selection;if(!o||(e?!e.endOfTextblock("forward",n):o.parentOffset<o.parent.content.size))return!1;let i=Z(o);if(!i)return!1;let s=i.nodeAfter;if(Et(n,i,t))return!0;if(0==o.parent.content.size&&(G(s,"start")||m.qv.isSelectable(s))){let c=(0,f.dR)(n.doc,o.before(),o.after(),_.p2.empty);if(c&&c.slice.size<c.to-c.from){if(t){let u=n.tr.step(c);u.setSelection(G(s,"start")?m.Y1.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):m.qv.create(u.doc,u.mapping.map(i.pos))),t(u.scrollIntoView())}return!0}}return!(!s.isAtom||i.depth!=o.depth-1||(t&&t(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),0))},et=(n,t,e)=>{let{$head:o,empty:i}=n.selection,s=o;if(!i)return!1;if(o.parent.isTextblock){if(e?!e.endOfTextblock("forward",n):o.parentOffset<o.parent.content.size)return!1;s=Z(o)}let c=s&&s.nodeAfter;return!(!c||!m.qv.isSelectable(c)||(t&&t(n.tr.setSelection(m.qv.create(n.doc,s.pos)).scrollIntoView()),0))};function Z(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){let e=n.node(t);if(n.index(t)+1<e.childCount)return n.doc.resolve(n.after(t+1));if(e.type.spec.isolating)break}return null}const at=(n,t)=>{let{$head:e,$anchor:o}=n.selection;return!(!e.parent.type.spec.code||!e.sameParent(o)||(t&&t(n.tr.insertText("\n").scrollIntoView()),0))};function w(n){for(let t=0;t<n.edgeCount;t++){let{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}const N=(n,t)=>{let{$head:e,$anchor:o}=n.selection;if(!e.parent.type.spec.code||!e.sameParent(o))return!1;let i=e.node(-1),s=e.indexAfter(-1),c=w(i.contentMatchAt(s));if(!c||!i.canReplaceWith(s,s,c))return!1;if(t){let u=e.after(),p=n.tr.replaceWith(u,u,c.createAndFill());p.setSelection(m.Y1.near(p.doc.resolve(u),1)),t(p.scrollIntoView())}return!0},z=(n,t)=>{let e=n.selection,{$from:o,$to:i}=e;if(e instanceof m.C1||o.parent.inlineContent||i.parent.inlineContent)return!1;let s=w(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let c=(!o.parentOffset&&i.index()<i.parent.childCount?o:i).pos,u=n.tr.insert(c,s.createAndFill());u.setSelection(m.Bs.create(u.doc,c+1)),t(u.scrollIntoView())}return!0},L=(n,t)=>{let{$cursor:e}=n.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let s=e.before();if((0,f.Ax)(n.doc,s))return t&&t(n.tr.split(s).scrollIntoView()),!0}let o=e.blockRange(),i=o&&(0,f.k9)(o);return null!=i&&(t&&t(n.tr.lift(o,i).scrollIntoView()),!0)};function Et(n,t,e){let s,c,o=t.nodeBefore,i=t.nodeAfter;if(o.type.spec.isolating||i.type.spec.isolating)return!1;if(function(n,t,e){let o=t.nodeBefore,i=t.nodeAfter,s=t.index();return!(!(o&&i&&o.type.compatibleContent(i.type))||(!o.content.size&&t.parent.canReplace(s-1,s)?(e&&e(n.tr.delete(t.pos-o.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(s,s+1)||!i.isTextblock&&!(0,f.Mn)(n.doc,t.pos)||(e&&e(n.tr.clearIncompatible(t.pos,o.type,o.contentMatchAt(o.childCount)).join(t.pos).scrollIntoView()),0)))}(n,t,e))return!0;let u=t.parent.canReplace(t.index(),t.index()+1);if(u&&(s=(c=o.contentMatchAt(o.childCount)).findWrapping(i.type))&&c.matchType(s[0]||i.type).validEnd){if(e){let B=t.pos+i.nodeSize,W=_.HY.empty;for(let mt=s.length-1;mt>=0;mt--)W=_.HY.from(s[mt].create(null,W));W=_.HY.from(o.copy(W));let $=n.tr.step(new f.FC(t.pos-1,B,t.pos,B,new _.p2(W,1,0),s.length,!0)),rt=B+2*s.length;(0,f.Mn)($.doc,rt)&&$.join(rt),e($.scrollIntoView())}return!0}let p=m.Y1.findFrom(t,1),E=p&&p.$from.blockRange(p.$to),C=E&&(0,f.k9)(E);if(null!=C&&C>=t.depth)return e&&e(n.tr.lift(E,C).scrollIntoView()),!0;if(u&&G(i,"start",!0)&&G(o,"end")){let B=o,W=[];for(;W.push(B),!B.isTextblock;)B=B.lastChild;let $=i,rt=1;for(;!$.isTextblock;$=$.firstChild)rt++;if(B.canReplace(B.childCount,B.childCount,$.content)){if(e){let mt=_.HY.empty;for(let Ot=W.length-1;Ot>=0;Ot--)mt=_.HY.from(W[Ot].copy(mt));e(n.tr.step(new f.FC(t.pos-W.length,t.pos+i.nodeSize,t.pos+rt,t.pos+i.nodeSize-rt,new _.p2(mt,W.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Mt(n){return function(t,e){let o=t.selection,i=n<0?o.$from:o.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return!!i.node(s).isTextblock&&(e&&e(t.tr.setSelection(m.Bs.create(t.doc,n<0?i.start(s):i.end(s)))),!0)}}const ht=Mt(-1),ot=Mt(1);function J(n,t=null){return function(e,o){let{from:i,to:s}=e.selection,c=!1;return e.doc.nodesBetween(i,s,(u,p)=>{if(c)return!1;if(u.isTextblock&&!u.hasMarkup(n,t))if(u.type==n)c=!0;else{let E=e.doc.resolve(p),C=E.index();c=E.parent.canReplaceWith(C,C+1,n)}}),!!c&&(o&&o(e.tr.setBlockType(i,s,n,t).scrollIntoView()),!0)}}function F(...n){return function(t,e,o){for(let i=0;i<n.length;i++)if(n[i](t,e,o))return!0;return!1}}let ut=F(U,v,j),pt=F(U,X,et);const Tt={Enter:F(at,z,L,(n,t)=>{let{$from:e,$to:o}=n.selection;if(n.selection instanceof m.qv&&n.selection.node.isBlock)return!(!e.parentOffset||!(0,f.Ax)(n.doc,e.pos)||(t&&t(n.tr.split(e.pos).scrollIntoView()),0));if(!e.parent.isBlock)return!1;if(t){let i=o.parentOffset==o.parent.content.size,s=n.tr;(n.selection instanceof m.Bs||n.selection instanceof m.C1)&&s.deleteSelection();let c=0==e.depth?null:w(e.node(-1).contentMatchAt(e.indexAfter(-1))),u=i&&c?[{type:c}]:void 0,p=(0,f.Ax)(s.doc,s.mapping.map(e.pos),1,u);if(!u&&!p&&(0,f.Ax)(s.doc,s.mapping.map(e.pos),1,c?[{type:c}]:void 0)&&(c&&(u=[{type:c}]),p=!0),p&&(s.split(s.mapping.map(e.pos),1,u),!i&&!e.parentOffset&&e.parent.type!=c)){let E=s.mapping.map(e.before()),C=s.doc.resolve(E);c&&e.node(-1).canReplaceWith(C.index(),C.index()+1,c)&&s.setNodeMarkup(s.mapping.map(e.before()),c)}t(s.scrollIntoView())}return!0}),"Mod-Enter":N,Backspace:ut,"Mod-Backspace":ut,"Shift-Backspace":ut,Delete:pt,"Mod-Delete":pt,"Mod-a":(n,t)=>(t&&t(n.tr.setSelection(new m.C1(n.doc))),!0)},Pt={"Ctrl-h":Tt.Backspace,"Alt-Backspace":Tt["Mod-Backspace"],"Ctrl-d":Tt.Delete,"Ctrl-Alt-Backspace":Tt["Mod-Delete"],"Alt-Delete":Tt["Mod-Delete"],"Alt-d":Tt["Mod-Delete"],"Ctrl-a":ht,"Ctrl-e":ot};for(let n in Tt)Pt[n]=Tt[n];function Qt(n){const{state:t,transaction:e}=n;let{selection:o}=e,{doc:i}=e,{storedMarks:s}=e;return ee(It({},t),{apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),filterTransaction:t.filterTransaction,plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return o},get doc(){return i},get tr(){return o=e.selection,i=e.doc,s=e.storedMarks,e}})}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();class Ut{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:o}=this,{view:i}=e,{tr:s}=o,c=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([u,p])=>[u,(...C)=>{const B=p(...C)(c);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),B}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:o,editor:i,state:s}=this,{view:c}=i,u=[],p=!!t,E=t||s.tr,B=ee(It({},Object.fromEntries(Object.entries(o).map(([W,$])=>[W,(...mt)=>{const Ct=this.buildProps(E,e),Ot=$(...mt)(Ct);return u.push(Ot),B}]))),{run:()=>(!p&&e&&!E.getMeta("preventDispatch")&&!this.hasCustomState&&c.dispatch(E),u.every(W=>!0===W))});return B}createCan(t){const{rawCommands:e,state:o}=this,i=void 0,s=t||o.tr,c=this.buildProps(s,i),u=Object.fromEntries(Object.entries(e).map(([p,E])=>[p,(...C)=>E(...C)(ee(It({},c),{dispatch:i}))]));return ee(It({},u),{chain:()=>this.createChain(s,i)})}buildProps(t,e=!0){const{rawCommands:o,editor:i,state:s}=this,{view:c}=i;s.storedMarks&&t.setStoredMarks(s.storedMarks);const u={tr:t,editor:i,view:c,state:Qt({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(o).map(([p,E])=>[p,(...C)=>E(...C)(u)]))}};return u}}function V(n,t,e){return void 0===n.config[t]&&n.parent?V(n.parent,t,e):"function"==typeof n.config[t]?n.config[t].bind(ee(It({},e),{parent:n.parent?V(n.parent,t,e):null})):n.config[t]}function g(n){return{baseExtensions:n.filter(i=>"extension"===i.type),nodeExtensions:n.filter(i=>"node"===i.type),markExtensions:n.filter(i=>"mark"===i.type)}}function M(n){const t=[],{nodeExtensions:e,markExtensions:o}=g(n),i=[...e,...o],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(c=>{const p=V(c,"addGlobalAttributes",{name:c.name,options:c.options,storage:c.storage});p&&p().forEach(C=>{C.types.forEach(B=>{Object.entries(C.attributes).forEach(([W,$])=>{t.push({type:B,name:W,attribute:It(It({},s),$)})})})})}),i.forEach(c=>{const p=V(c,"addAttributes",{name:c.name,options:c.options,storage:c.storage});if(!p)return;const E=p();Object.entries(E).forEach(([C,B])=>{const W=It(It({},s),B);B.isRequired&&void 0===B.default&&delete W.default,t.push({type:c.name,name:C,attribute:W})})}),t}function P(n,t){if("string"==typeof n){if(!t.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return t.nodes[n]}return n}function D(...n){return n.filter(t=>!!t).reduce((t,e)=>{const o=It({},t);return Object.entries(e).forEach(([i,s])=>{o[i]=o[i]?"class"===i?[o[i],s].join(" "):"style"===i?[o[i],s].join("; "):s:s}),o},{})}function H(n,t){return t.filter(e=>e.attribute.rendered).map(e=>e.attribute.renderHTML?e.attribute.renderHTML(n.attrs)||{}:{[e.name]:n.attrs[e.name]}).reduce((e,o)=>D(e,o),{})}function S(n){return"function"==typeof n}function Q(n,t,...e){return S(n)?t?n.bind(t)(...e):n(...e):n}function bt(n,t){return n.style?n:ee(It({},n),{getAttrs:e=>{const o=n.getAttrs?n.getAttrs(e):n.attrs;if(!1===o)return!1;const i=t.reduce((s,c)=>{const u=c.attribute.parseHTML?c.attribute.parseHTML(e):function(n){return"string"!=typeof n?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):"true"===n||"false"!==n&&n}(e.getAttribute(c.name));return null==u?s:ee(It({},s),{[c.name]:u})},{});return It(It({},o),i)}})}function St(n){return Object.fromEntries(Object.entries(n).filter(([t,e])=>("attrs"!==t||!function(n={}){return 0===Object.keys(n).length&&n.constructor===Object}(e))&&null!=e))}function A(n){var t;const e=M(n),{nodeExtensions:o,markExtensions:i}=g(n),s=null===(t=o.find(p=>V(p,"topNode")))||void 0===t?void 0:t.name,c=Object.fromEntries(o.map(p=>{const E=e.filter(Ct=>Ct.type===p.name),C={name:p.name,options:p.options,storage:p.storage},B=n.reduce((Ct,Ot)=>{const Nt=V(Ot,"extendNodeSchema",C);return It(It({},Ct),Nt?Nt(p):{})},{}),W=St(ee(It({},B),{content:Q(V(p,"content",C)),marks:Q(V(p,"marks",C)),group:Q(V(p,"group",C)),inline:Q(V(p,"inline",C)),atom:Q(V(p,"atom",C)),selectable:Q(V(p,"selectable",C)),draggable:Q(V(p,"draggable",C)),code:Q(V(p,"code",C)),defining:Q(V(p,"defining",C)),isolating:Q(V(p,"isolating",C)),attrs:Object.fromEntries(E.map(Ct=>{var Ot;return[Ct.name,{default:null===(Ot=null==Ct?void 0:Ct.attribute)||void 0===Ot?void 0:Ot.default}]}))})),$=Q(V(p,"parseHTML",C));$&&(W.parseDOM=$.map(Ct=>bt(Ct,E)));const rt=V(p,"renderHTML",C);rt&&(W.toDOM=Ct=>rt({node:Ct,HTMLAttributes:H(Ct,E)}));const mt=V(p,"renderText",C);return mt&&(W.toText=mt),[p.name,W]})),u=Object.fromEntries(i.map(p=>{const E=e.filter(mt=>mt.type===p.name),C={name:p.name,options:p.options,storage:p.storage},B=n.reduce((mt,Ct)=>{const Ot=V(Ct,"extendMarkSchema",C);return It(It({},mt),Ot?Ot(p):{})},{}),W=St(ee(It({},B),{inclusive:Q(V(p,"inclusive",C)),excludes:Q(V(p,"excludes",C)),group:Q(V(p,"group",C)),spanning:Q(V(p,"spanning",C)),code:Q(V(p,"code",C)),attrs:Object.fromEntries(E.map(mt=>{var Ct;return[mt.name,{default:null===(Ct=null==mt?void 0:mt.attribute)||void 0===Ct?void 0:Ct.default}]}))})),$=Q(V(p,"parseHTML",C));$&&(W.parseDOM=$.map(mt=>bt(mt,E)));const rt=V(p,"renderHTML",C);return rt&&(W.toDOM=mt=>rt({mark:mt,HTMLAttributes:H(mt,E)})),[p.name,W]}));return new _.V_({topNode:s,nodes:c,marks:u})}function l(n,t){return t.nodes[n]||t.marks[n]||null}function d(n,t){return Array.isArray(t)?t.some(e=>("string"==typeof e?e:e.name)===n.name):t}const h=(n,t=500)=>{let e="";return n.parent.nodesBetween(Math.max(0,n.parentOffset-t),n.parentOffset,(o,i,s,c)=>{var u,p;e+=(null===(p=(u=o.type.spec).toText)||void 0===p?void 0:p.call(u,{node:o,pos:i,parent:s,index:c}))||o.textContent||"%leaf%"}),e};function y(n){return"[object RegExp]"===Object.prototype.toString.call(n)}class b{constructor(t){this.find=t.find,this.handler=t.handler}}function lt(n){var t;const{editor:e,from:o,to:i,text:s,rules:c,plugin:u}=n,{view:p}=e;if(p.composing)return!1;const E=p.state.doc.resolve(o);if(E.parent.type.spec.code||(null===(t=E.nodeBefore||E.nodeAfter)||void 0===t?void 0:t.marks.find(W=>W.type.spec.code)))return!1;let C=!1;const B=h(E)+s;return c.forEach(W=>{if(C)return;const $=((n,t)=>{if(y(t))return t.exec(n);const e=t(n);if(!e)return null;const o=[];return o.push(e.text),o.index=e.index,o.input=n,o.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),o.push(e.replaceWith)),o})(B,W.find);if(!$)return;const rt=p.state.tr,mt=Qt({state:p.state,transaction:rt}),Ct={from:o-($[0].length-s.length),to:i},{commands:Ot,chain:Nt,can:Yt}=new Ut({editor:e,state:mt});null===W.handler({state:mt,range:Ct,match:$,commands:Ot,chain:Nt,can:Yt})||!rt.steps.length||(rt.setMeta(u,{transform:rt,from:o,to:i,text:s}),p.dispatch(rt),C=!0)}),C}function gt(n){const{editor:t,rules:e}=n,o=new m.Sy({state:{init:()=>null,apply:(i,s)=>i.getMeta(o)||(i.selectionSet||i.docChanged?null:s)},props:{handleTextInput:(i,s,c,u)=>lt({editor:t,from:s,to:c,text:u,rules:e,plugin:o}),handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&lt({editor:t,from:s.pos,to:s.pos,text:"",rules:e,plugin:o})}),!1)},handleKeyDown(i,s){if("Enter"!==s.key)return!1;const{$cursor:c}=i.state.selection;return!!c&&lt({editor:t,from:c.pos,to:c.pos,text:"\n",rules:e,plugin:o})}},isInputRules:!0});return o}class At{constructor(t){this.find=t.find,this.handler=t.handler}}function Se(n){const{editor:t,rules:e}=n;let o=null,i=!1,s=!1;return e.map(u=>new m.Sy({view(p){const E=C=>{var B;o=(null===(B=p.dom.parentElement)||void 0===B?void 0:B.contains(C.target))?p.dom.parentElement:null};return window.addEventListener("dragstart",E),{destroy(){window.removeEventListener("dragstart",E)}}},props:{handleDOMEvents:{drop:p=>(s=o===p.dom.parentElement,!1),paste:(p,E)=>{var C;const B=null===(C=E.clipboardData)||void 0===C?void 0:C.getData("text/html");return i=!!(null==B?void 0:B.includes("data-pm-slice")),!1}}},appendTransaction:(p,E,C)=>{const B=p[0],W="paste"===B.getMeta("uiEvent")&&!i,$="drop"===B.getMeta("uiEvent")&&!s;if(!W&&!$)return;const rt=E.doc.content.findDiffStart(C.doc.content),mt=E.doc.content.findDiffEnd(C.doc.content);if(!function(n){return"number"==typeof n}(rt)||!mt||rt===mt.b)return;const Ct=C.tr,Ot=Qt({state:C,transaction:Ct});return function(n){const{editor:t,state:e,from:o,to:i,rule:s}=n,{commands:c,chain:u,can:p}=new Ut({editor:t,state:e}),E=[];return e.doc.nodesBetween(o,i,(B,W)=>{if(!B.isTextblock||B.type.spec.code)return;const $=Math.max(o,W),rt=Math.min(i,W+B.content.size);((n,t)=>{if(y(t))return[...n.matchAll(t)];const e=t(n);return e?e.map(o=>{const i=[];return i.push(o.text),i.index=o.index,i.input=n,i.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(o.replaceWith)),i}):[]})(B.textBetween($-W,rt-W,void 0,"\ufffc"),s.find).forEach(Ot=>{if(void 0===Ot.index)return;const Nt=$+Ot.index+1,Yt=Nt+Ot[0].length,ie={from:e.tr.mapping.map(Nt),to:e.tr.mapping.map(Yt)},Gt=s.handler({state:e,range:ie,match:Ot,commands:c,chain:u,can:p});E.push(Gt)})}),E.every(B=>null!==B)}({editor:t,state:Ot,from:Math.max(rt-1,0),to:mt.b,rule:u})&&Ct.steps.length?Ct:void 0}}))}class ve{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=ve.resolve(t),this.schema=A(this.extensions),this.extensions.forEach(o=>{var i;this.editor.extensionStorage[o.name]=o.storage;const s={name:o.name,options:o.options,storage:o.storage,editor:this.editor,type:l(o.name,this.schema)};"mark"===o.type&&(null===(i=Q(V(o,"keepOnSplit",s)))||void 0===i||i)&&this.splittableMarks.push(o.name);const c=V(o,"onBeforeCreate",s);c&&this.editor.on("beforeCreate",c);const u=V(o,"onCreate",s);u&&this.editor.on("create",u);const p=V(o,"onUpdate",s);p&&this.editor.on("update",p);const E=V(o,"onSelectionUpdate",s);E&&this.editor.on("selectionUpdate",E);const C=V(o,"onTransaction",s);C&&this.editor.on("transaction",C);const B=V(o,"onFocus",s);B&&this.editor.on("focus",B);const W=V(o,"onBlur",s);W&&this.editor.on("blur",W);const $=V(o,"onDestroy",s);$&&this.editor.on("destroy",$)})}static resolve(t){const e=ve.sort(ve.flatten(t)),o=function(n){const t=n.filter((e,o)=>n.indexOf(e)!==o);return[...new Set(t)]}(e.map(i=>i.name));return o.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${o.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),e}static flatten(t){return t.map(e=>{const i=V(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return i?[e,...this.flatten(i())]:e}).flat(10)}static sort(t){return t.sort((o,i)=>{const s=V(o,"priority")||100,c=V(i,"priority")||100;return s>c?-1:s<c?1:0})}get commands(){return this.extensions.reduce((t,e)=>{const i=V(e,"addCommands",{name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:l(e.name,this.schema)});return i?It(It({},t),i()):t},{})}get plugins(){const{editor:t}=this,e=ve.sort([...this.extensions].reverse()),o=[],i=[],s=e.map(c=>{const u={name:c.name,options:c.options,storage:c.storage,editor:t,type:l(c.name,this.schema)},p=[],E=V(c,"addKeyboardShortcuts",u);if(E){const $=Object.fromEntries(Object.entries(E()).map(([mt,Ct])=>[mt,()=>Ct({editor:t})])),rt=(0,R.h)($);p.push(rt)}const C=V(c,"addInputRules",u);d(c,t.options.enableInputRules)&&C&&o.push(...C());const B=V(c,"addPasteRules",u);d(c,t.options.enablePasteRules)&&B&&i.push(...B());const W=V(c,"addProseMirrorPlugins",u);if(W){const $=W();p.push(...$)}return p}).flat();return[gt({editor:t,rules:o}),...Se({editor:t,rules:i}),...s]}get attributes(){return M(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=g(this.extensions);return Object.fromEntries(e.filter(o=>!!V(o,"addNodeView")).map(o=>{const i=this.attributes.filter(p=>p.type===o.name),s={name:o.name,options:o.options,storage:o.storage,editor:t,type:P(o.name,this.schema)},c=V(o,"addNodeView",s);return c?[o.name,(p,E,C,B)=>{const W=H(p,i);return c()({editor:t,node:p,getPos:C,decorations:B,HTMLAttributes:W,extension:o})}]:[]}))}}function qe(n){return"Object"===function(n){return Object.prototype.toString.call(n).slice(8,-1)}(n)&&n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Ue(n,t){const e=It({},n);return qe(n)&&qe(t)&&Object.keys(t).forEach(o=>{qe(t[o])?o in n?e[o]=Ue(n[o],t[o]):Object.assign(e,{[o]:t[o]}):Object.assign(e,{[o]:t[o]})}),e}class se{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=It(It({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Q(V(this,"addOptions",{name:this.name}))),this.storage=Q(V(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new se(t)}configure(t={}){const e=this.extend();return e.options=Ue(this.options,t),e.storage=Q(V(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new se(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=Q(V(e,"addOptions",{name:e.name})),e.storage=Q(V(e,"addStorage",{name:e.name,options:e.options})),e}}function Ae(n,t,e){const{from:o,to:i}=t,{blockSeparator:s="\n\n",textSerializers:c={}}=e||{};let u="",p=!0;return n.nodesBetween(o,i,(E,C,B,W)=>{var $;const rt=null==c?void 0:c[E.type.name];rt?(E.isBlock&&!p&&(u+=s,p=!0),B&&(u+=rt({node:E,pos:C,parent:B,index:W,range:t}))):E.isText?(u+=null===($=null==E?void 0:E.text)||void 0===$?void 0:$.slice(Math.max(o,C)-C,i-C),p=!1):E.isBlock&&!p&&(u+=s,p=!0)}),u}function ke(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,t])=>t.spec.toText).map(([t,e])=>[t,e.spec.toText]))}const Mn=se.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new m.Sy({key:new m.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:t,schema:e}=n,{doc:o,selection:i}=t,{ranges:s}=i;return Ae(o,{from:Math.min(...s.map(C=>C.$from.pos)),to:Math.max(...s.map(C=>C.$to.pos))},{textSerializers:ke(e)})}}})]}});function Re(n,t,e={strict:!0}){const o=Object.keys(t);return!o.length||o.every(i=>e.strict?t[i]===n[i]:y(t[i])?t[i].test(n[i]):t[i]===n[i])}function He(n,t,e={}){return n.find(o=>o.type===t&&Re(o.attrs,e))}function no(n,t,e={}){return!!He(n,t,e)}function xe(n,t,e={}){if(!n||!t)return;let o=n.parent.childAfter(n.parentOffset);if(n.parentOffset===o.offset&&0!==o.offset&&(o=n.parent.childBefore(n.parentOffset)),!o.node)return;const i=He([...o.node.marks],t,e);if(!i)return;let s=o.index,c=n.start()+o.offset,u=s+1,p=c+o.node.nodeSize;for(He([...o.node.marks],t,e);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,c-=n.parent.child(s).nodeSize;for(;u<n.parent.childCount&&no([...n.parent.child(u).marks],t,e);)p+=n.parent.child(u).nodeSize,u+=1;return{from:c,to:p}}function $t(n,t){if("string"==typeof n){if(!t.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return t.marks[n]}return n}function Fe(n){return n&&"object"==typeof n&&!Array.isArray(n)&&!function(n){var t;return"class"===(null===(t=n.constructor)||void 0===t?void 0:t.toString().substring(0,5))}(n)}function Ve(n){return Fe(n)&&n instanceof m.Bs}function le(n=0,t=0,e=0){return Math.min(Math.max(n,t),e)}function je(n,t=null){if(!t)return null;const e=m.Y1.atStart(n),o=m.Y1.atEnd(n);if("start"===t||!0===t)return e;if("end"===t)return o;const i=e.from,s=o.to;return"all"===t?m.Bs.create(n,le(0,i,s),le(n.content.size,i,s)):m.Bs.create(n,le(t,i,s),le(t,i,s))}function Be(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function nn(n){const t=`<body>${n}</body>`;return(new window.DOMParser).parseFromString(t,"text/html").body}function $e(n,t,e){if(e=It({slice:!0,parseOptions:{}},e),"object"==typeof n&&null!==n)try{return Array.isArray(n)?_.HY.fromArray(n.map(o=>t.nodeFromJSON(o))):t.nodeFromJSON(n)}catch(o){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),$e("",t,e)}if("string"==typeof n){const o=_.aw.fromSchema(t);return e.slice?o.parseSlice(nn(n),e.parseOptions).content:o.parse(nn(n),e.parseOptions)}return $e("",t,e)}function on(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function Ce(n,t,e={}){const{from:o,to:i,empty:s}=n.selection,c=t?P(t,n.schema):null,u=[];n.doc.nodesBetween(o,i,(B,W)=>{if(B.isText)return;const $=Math.max(o,W),rt=Math.min(i,W+B.nodeSize);u.push({node:B,from:$,to:rt})});const p=i-o,E=u.filter(B=>!c||c.name===B.node.type.name).filter(B=>Re(B.node.attrs,e,{strict:!1}));return s?!!E.length:E.reduce((B,W)=>B+W.to-W.from,0)>=p}function Je(n,t){return t.nodes[n]?"node":t.marks[n]?"mark":null}function Wn(n,t){const e="string"==typeof t?[t]:t;return Object.keys(n).reduce((o,i)=>(e.includes(i)||(o[i]=n[i]),o),{})}function zn(n,t,e={}){return $e(n,t,{slice:!1,parseOptions:e})}function Oe(n,t){const e=$t(t,n.schema),{from:o,to:i,empty:s}=n.selection,c=[];s?(n.storedMarks&&c.push(...n.storedMarks),c.push(...n.selection.$head.marks())):n.doc.nodesBetween(o,i,p=>{c.push(...p.marks)});const u=c.find(p=>p.type.name===e.name);return u?It({},u.attrs):{}}function Ye(n,t,e){return Object.fromEntries(Object.entries(e).filter(([o])=>{const i=n.find(s=>s.type===t&&s.name===o);return!!i&&i.attribute.keepOnSplit}))}function Un(n,t){const e=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(e){const o=e.filter(i=>null==t?void 0:t.includes(i.type.name));n.tr.ensureMarks(o)}}function Kn(n,t){for(let e=n.depth;e>0;e-=1){const o=n.node(e);if(t(o))return{pos:e>0?n.before(e):0,start:n.start(e),depth:e,node:o}}}function we(n){return t=>Kn(t.$from,n)}function dn(n,t){const{nodeExtensions:e}=g(t),o=e.find(c=>c.name===n);if(!o)return!1;const s=Q(V(o,"group",{name:o.name,options:o.options,storage:o.storage}));return"string"==typeof s&&s.split(" ").includes("list")}const un=(n,t)=>{const e=we(c=>c.type===t)(n.selection);if(!e)return!0;const o=n.doc.resolve(Math.max(0,e.pos-1)).before(e.depth);if(void 0===o)return!0;const i=n.doc.nodeAt(o);return e.node.type===(null==i?void 0:i.type)&&(0,f.Mn)(n.doc,e.pos)&&n.join(e.pos),!0},pn=(n,t)=>{const e=we(c=>c.type===t)(n.selection);if(!e)return!0;const o=n.doc.resolve(e.start).after(e.depth);if(void 0===o)return!0;const i=n.doc.nodeAt(o);return e.node.type===(null==i?void 0:i.type)&&(0,f.Mn)(n.doc,o)&&n.join(o),!0};function ye(n,t,e={}){const{empty:o,ranges:i}=n.selection,s=t?$t(t,n.schema):null;if(o)return!!(n.storedMarks||n.selection.$from.marks()).filter(B=>!s||s.name===B.type.name).find(B=>Re(B.attrs,e,{strict:!1}));let c=0;const u=[];if(i.forEach(({$from:B,$to:W})=>{const $=B.pos,rt=W.pos;n.doc.nodesBetween($,rt,(mt,Ct)=>{if(!mt.isText&&!mt.marks.length)return;const Ot=Math.max($,Ct),Nt=Math.min(rt,Ct+mt.nodeSize);c+=Nt-Ot,u.push(...mt.marks.map(ie=>({mark:ie,from:Ot,to:Nt})))})}),0===c)return!1;const p=u.filter(B=>!s||s.name===B.mark.type.name).filter(B=>Re(B.mark.attrs,e,{strict:!1})).reduce((B,W)=>B+W.to-W.from,0),E=u.filter(B=>!s||B.mark.type!==s&&B.mark.type.excludes(s)).reduce((B,W)=>B+W.to-W.from,0);return(p>0?p+E:p)>=c}var he=Object.freeze({__proto__:null,blur:()=>({editor:n,view:t})=>(requestAnimationFrame(()=>{var e;n.isDestroyed||(t.dom.blur(),null===(e=null==window?void 0:window.getSelection())||void 0===e||e.removeAllRanges())}),!0),clearContent:(n=!1)=>({commands:t})=>t.setContent("",n),clearNodes:()=>({state:n,tr:t,dispatch:e})=>{const{selection:o}=t,{ranges:i}=o;return e&&i.forEach(({$from:s,$to:c})=>{n.doc.nodesBetween(s.pos,c.pos,(u,p)=>{if(u.type.isText)return;const{doc:E,mapping:C}=t,B=E.resolve(C.map(p)),W=E.resolve(C.map(p+u.nodeSize)),$=B.blockRange(W);if(!$)return;const rt=(0,f.k9)($);if(u.type.isTextblock){const{defaultType:mt}=B.parent.contentMatchAt(B.index());t.setNodeMarkup($.start,mt)}(rt||0===rt)&&t.lift($,rt)})}),!0},command:n=>t=>n(t),createParagraphNear:()=>({state:n,dispatch:t})=>z(n,t),deleteNode:n=>({tr:t,state:e,dispatch:o})=>{const i=P(n,e.schema),s=t.selection.$anchor;for(let c=s.depth;c>0;c-=1)if(s.node(c).type===i){if(o){const p=s.before(c),E=s.after(c);t.delete(p,E).scrollIntoView()}return!0}return!1},deleteRange:n=>({tr:t,dispatch:e})=>{const{from:o,to:i}=n;return e&&t.delete(o,i),!0},deleteSelection:()=>({state:n,dispatch:t})=>U(n,t),enter:()=>({commands:n})=>n.keyboardShortcut("Enter"),exitCode:()=>({state:n,dispatch:t})=>N(n,t),extendMarkRange:(n,t={})=>({tr:e,state:o,dispatch:i})=>{const s=$t(n,o.schema),{doc:c,selection:u}=e,{$from:p,from:E,to:C}=u;if(i){const B=xe(p,s,t);if(B&&B.from<=E&&B.to>=C){const W=m.Bs.create(c,B.from,B.to);e.setSelection(W)}}return!0},first:n=>t=>{const e="function"==typeof n?n(t):n;for(let o=0;o<e.length;o+=1)if(e[o](t))return!0;return!1},focus:(n=null,t={})=>({editor:e,view:o,tr:i,dispatch:s})=>{t=It({scrollIntoView:!0},t);const c=()=>{Be()&&o.dom.focus(),requestAnimationFrame(()=>{e.isDestroyed||(o.focus(),(null==t?void 0:t.scrollIntoView)&&e.commands.scrollIntoView())})};if(o.hasFocus()&&null===n||!1===n)return!0;if(s&&null===n&&!Ve(e.state.selection))return c(),!0;const u=je(e.state.doc,n)||e.state.selection,p=e.state.selection.eq(u);return s&&(p||i.setSelection(u),p&&i.storedMarks&&i.setStoredMarks(i.storedMarks),c()),!0},forEach:(n,t)=>e=>n.every((o,i)=>t(o,ee(It({},e),{index:i}))),insertContent:(n,t)=>({tr:e,commands:o})=>o.insertContentAt({from:e.selection.from,to:e.selection.to},n,t),insertContentAt:(n,t,e)=>({tr:o,dispatch:i,editor:s})=>{if(i){e=It({parseOptions:{},updateSelection:!0},e);const c=$e(t,s.schema,{parseOptions:It({preserveWhitespace:"full"},e.parseOptions)});if("<>"===c.toString())return!0;let{from:u,to:p}="number"==typeof n?{from:n,to:n}:n,E=!0,C=!0;if(((n=>n.toString().startsWith("<"))(c)?c:[c]).forEach(W=>{W.check(),E=!!E&&W.isText&&0===W.marks.length,C=!!C&&W.isBlock}),u===p&&C){const{parent:W}=o.doc.resolve(u);W.isTextblock&&!W.type.spec.code&&!W.childCount&&(u-=1,p+=1)}E?o.insertText(t,u,p):o.replaceWith(u,p,c),e.updateSelection&&function(n,t,e){const o=n.steps.length-1;if(o<t)return;const i=n.steps[o];if(!(i instanceof f.Pu||i instanceof f.FC))return;let c=0;n.mapping.maps[o].forEach((u,p,E,C)=>{0===c&&(c=C)}),n.setSelection(m.Y1.near(n.doc.resolve(c),-1))}(o,o.steps.length-1)}return!0},joinBackward:()=>({state:n,dispatch:t})=>v(n,t),joinForward:()=>({state:n,dispatch:t})=>X(n,t),keyboardShortcut:n=>({editor:t,view:e,tr:o,dispatch:i})=>{const s=function(n){const t=n.split(/-(?!$)/);let o,i,s,c,e=t[t.length-1];"Space"===e&&(e=" ");for(let u=0;u<t.length-1;u+=1){const p=t[u];if(/^(cmd|meta|m)$/i.test(p))c=!0;else if(/^a(lt)?$/i.test(p))o=!0;else if(/^(c|ctrl|control)$/i.test(p))i=!0;else if(/^s(hift)?$/i.test(p))s=!0;else{if(!/^mod$/i.test(p))throw new Error(`Unrecognized modifier name: ${p}`);Be()||on()?c=!0:i=!0}}return o&&(e=`Alt-${e}`),i&&(e=`Ctrl-${e}`),c&&(e=`Meta-${e}`),s&&(e=`Shift-${e}`),e}(n).split(/-(?!$)/),c=s.find(E=>!["Alt","Ctrl","Meta","Shift"].includes(E)),u=new KeyboardEvent("keydown",{key:"Space"===c?" ":c,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),p=t.captureTransaction(()=>{e.someProp("handleKeyDown",E=>E(e,u))});return null==p||p.steps.forEach(E=>{const C=E.map(o.mapping);C&&i&&o.maybeStep(C)}),!0},lift:(n,t={})=>({state:e,dispatch:o})=>!!Ce(e,P(n,e.schema),t)&&((n,t)=>{let{$from:e,$to:o}=n.selection,i=e.blockRange(o),s=i&&(0,f.k9)(i);return null!=s&&(t&&t(n.tr.lift(i,s).scrollIntoView()),!0)})(e,o),liftEmptyBlock:()=>({state:n,dispatch:t})=>L(n,t),liftListItem:n=>({state:t,dispatch:e})=>function(n){return function(t,e){let{$from:o,$to:i}=t.selection,s=o.blockRange(i,c=>c.childCount>0&&c.firstChild.type==n);return!!s&&(!e||(o.node(s.depth-1).type==n?function(n,t,e,o){let i=n.tr,s=o.end,c=o.$to.end(o.depth);s<c&&(i.step(new f.FC(s-1,c,s,c,new _.p2(_.HY.from(e.create(null,o.parent.copy())),1,0),1,!0)),o=new _.Ts(i.doc.resolve(o.$from.pos),i.doc.resolve(c),o.depth));const u=(0,f.k9)(o);return null!=u&&(t(i.lift(o,u).scrollIntoView()),!0)}(t,e,n,s):function(n,t,e){let o=n.tr,i=e.parent;for(let $=e.end,rt=e.endIndex-1,mt=e.startIndex;rt>mt;rt--)$-=i.child(rt).nodeSize,o.delete($-1,$+1);let s=o.doc.resolve(e.start),c=s.nodeAfter;if(o.mapping.map(e.end)!=e.start+s.nodeAfter.nodeSize)return!1;let u=0==e.startIndex,p=e.endIndex==i.childCount,E=s.node(-1),C=s.index(-1);if(!E.canReplace(C+(u?0:1),C+1,c.content.append(p?_.HY.empty:_.HY.from(i))))return!1;let B=s.pos,W=B+c.nodeSize;return o.step(new f.FC(B-(u?1:0),W+(p?1:0),B+1,W-1,new _.p2((u?_.HY.empty:_.HY.from(i.copy(_.HY.empty))).append(p?_.HY.empty:_.HY.from(i.copy(_.HY.empty))),u?0:1,p?0:1),u?0:1)),t(o.scrollIntoView()),!0}(t,e,s)))}}(P(n,t.schema))(t,e),newlineInCode:()=>({state:n,dispatch:t})=>at(n,t),resetAttributes:(n,t)=>({tr:e,state:o,dispatch:i})=>{let s=null,c=null;const u=Je("string"==typeof n?n:n.name,o.schema);return!!u&&("node"===u&&(s=P(n,o.schema)),"mark"===u&&(c=$t(n,o.schema)),i&&e.selection.ranges.forEach(p=>{o.doc.nodesBetween(p.$from.pos,p.$to.pos,(E,C)=>{s&&s===E.type&&e.setNodeMarkup(C,void 0,Wn(E.attrs,t)),c&&E.marks.length&&E.marks.forEach(B=>{c===B.type&&e.addMark(C,C+E.nodeSize,c.create(Wn(B.attrs,t)))})})}),!0)},scrollIntoView:()=>({tr:n,dispatch:t})=>(t&&n.scrollIntoView(),!0),selectAll:()=>({tr:n,commands:t})=>t.setTextSelection({from:0,to:n.doc.content.size}),selectNodeBackward:()=>({state:n,dispatch:t})=>j(n,t),selectNodeForward:()=>({state:n,dispatch:t})=>et(n,t),selectParentNode:()=>({state:n,dispatch:t})=>((n,t)=>{let i,{$from:e,to:o}=n.selection,s=e.sharedDepth(o);return 0!=s&&(i=e.before(s),t&&t(n.tr.setSelection(m.qv.create(n.doc,i))),!0)})(n,t),selectTextblockEnd:()=>({state:n,dispatch:t})=>ot(n,t),selectTextblockStart:()=>({state:n,dispatch:t})=>ht(n,t),setContent:(n,t=!1,e={})=>({tr:o,editor:i,dispatch:s})=>{const{doc:c}=o,u=zn(n,i.schema,e),p=m.Bs.create(c,0,c.content.size);return s&&o.setSelection(p).replaceSelectionWith(u,!1).setMeta("preventUpdate",!t),!0},setMark:(n,t={})=>({tr:e,state:o,dispatch:i})=>{const{selection:s}=e,{empty:c,ranges:u}=s,p=$t(n,o.schema);if(i)if(c){const E=Oe(o,p);e.addStoredMark(p.create(It(It({},E),t)))}else u.forEach(E=>{const C=E.$from.pos,B=E.$to.pos;o.doc.nodesBetween(C,B,(W,$)=>{const rt=Math.max($,C),mt=Math.min($+W.nodeSize,B);W.marks.find(Ot=>Ot.type===p)?W.marks.forEach(Ot=>{p===Ot.type&&e.addMark(rt,mt,p.create(It(It({},Ot.attrs),t)))}):e.addMark(rt,mt,p.create(t))})});return!0},setMeta:(n,t)=>({tr:e})=>(e.setMeta(n,t),!0),setNode:(n,t={})=>({state:e,dispatch:o,chain:i})=>{const s=P(n,e.schema);return s.isTextblock?i().command(({commands:c})=>!!J(s,t)(e)||c.clearNodes()).command(({state:c})=>J(s,t)(c,o)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:n=>({tr:t,dispatch:e})=>{if(e){const{doc:o}=t,i=m.Y1.atStart(o).from,s=m.Y1.atEnd(o).to,c=le(n,i,s),u=m.qv.create(o,c);t.setSelection(u)}return!0},setTextSelection:n=>({tr:t,dispatch:e})=>{if(e){const{doc:o}=t,{from:i,to:s}="number"==typeof n?{from:n,to:n}:n,c=m.Bs.atStart(o).from,u=m.Bs.atEnd(o).to,p=le(i,c,u),E=le(s,c,u),C=m.Bs.create(o,p,E);t.setSelection(C)}return!0},sinkListItem:n=>({state:t,dispatch:e})=>function(n){return function(t,e){let{$from:o,$to:i}=t.selection,s=o.blockRange(i,E=>E.childCount>0&&E.firstChild.type==n);if(!s)return!1;let c=s.startIndex;if(0==c)return!1;let u=s.parent,p=u.child(c-1);if(p.type!=n)return!1;if(e){let E=p.lastChild&&p.lastChild.type==u.type,C=_.HY.from(E?n.create():null),B=new _.p2(_.HY.from(n.create(null,_.HY.from(u.type.create(null,C)))),E?3:1,0),W=s.start,$=s.end;e(t.tr.step(new f.FC(W-(E?3:1),$,W,$,B,1,!0)).scrollIntoView())}return!0}}(P(n,t.schema))(t,e),splitBlock:({keepMarks:n=!0}={})=>({tr:t,state:e,dispatch:o,editor:i})=>{const{selection:s,doc:c}=t,{$from:u,$to:p}=s,C=Ye(i.extensionManager.attributes,u.node().type.name,u.node().attrs);if(s instanceof m.qv&&s.node.isBlock)return!(!u.parentOffset||!(0,f.Ax)(c,u.pos)||(o&&(n&&Un(e,i.extensionManager.splittableMarks),t.split(u.pos).scrollIntoView()),0));if(!u.parent.isBlock)return!1;if(o){const B=p.parentOffset===p.parent.content.size;s instanceof m.Bs&&t.deleteSelection();const W=0===u.depth?void 0:function(n){for(let t=0;t<n.edgeCount;t+=1){const{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}(u.node(-1).contentMatchAt(u.indexAfter(-1)));let $=B&&W?[{type:W,attrs:C}]:void 0,rt=(0,f.Ax)(t.doc,t.mapping.map(u.pos),1,$);if(!$&&!rt&&(0,f.Ax)(t.doc,t.mapping.map(u.pos),1,W?[{type:W}]:void 0)&&(rt=!0,$=W?[{type:W,attrs:C}]:void 0),rt&&(t.split(t.mapping.map(u.pos),1,$),W&&!B&&!u.parentOffset&&u.parent.type!==W)){const mt=t.mapping.map(u.before()),Ct=t.doc.resolve(mt);u.node(-1).canReplaceWith(Ct.index(),Ct.index()+1,W)&&t.setNodeMarkup(t.mapping.map(u.before()),W)}n&&Un(e,i.extensionManager.splittableMarks),t.scrollIntoView()}return!0},splitListItem:n=>({tr:t,state:e,dispatch:o,editor:i})=>{var s;const c=P(n,e.schema),{$from:u,$to:p}=e.selection,E=e.selection.node;if(E&&E.isBlock||u.depth<2||!u.sameParent(p))return!1;const C=u.node(-1);if(C.type!==c)return!1;const B=i.extensionManager.attributes;if(0===u.parent.content.size&&u.node(-1).childCount===u.indexAfter(-1)){if(2===u.depth||u.node(-3).type!==c||u.index(-2)!==u.node(-2).childCount-1)return!1;if(o){let Ct=_.HY.empty;const Ot=u.index(-1)?1:u.index(-2)?2:3;for(let ce=u.depth-Ot;ce>=u.depth-3;ce-=1)Ct=_.HY.from(u.node(ce).copy(Ct));const Nt=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,Yt=Ye(B,u.node().type.name,u.node().attrs),ie=(null===(s=c.contentMatch.defaultType)||void 0===s?void 0:s.createAndFill(Yt))||void 0;Ct=Ct.append(_.HY.from(c.createAndFill(null,ie)||void 0));const Gt=u.before(u.depth-(Ot-1));t.replace(Gt,u.after(-Nt),new _.p2(Ct,4-Ot,0));let Pe=-1;t.doc.nodesBetween(Gt,t.doc.content.size,(ce,Rt)=>{if(Pe>-1)return!1;ce.isTextblock&&0===ce.content.size&&(Pe=Rt+1)}),Pe>-1&&t.setSelection(m.Bs.near(t.doc.resolve(Pe))),t.scrollIntoView()}return!0}const W=p.pos===u.end()?C.contentMatchAt(0).defaultType:null,$=Ye(B,C.type.name,C.attrs),rt=Ye(B,u.node().type.name,u.node().attrs);t.delete(u.pos,p.pos);const mt=W?[{type:c,attrs:$},{type:W,attrs:rt}]:[{type:c,attrs:$}];return!!(0,f.Ax)(t.doc,u.pos,2)&&(o&&t.split(u.pos,2,mt).scrollIntoView(),!0)},toggleList:(n,t)=>({editor:e,tr:o,state:i,dispatch:s,chain:c,commands:u,can:p})=>{const{extensions:E}=e.extensionManager,C=P(n,i.schema),B=P(t,i.schema),{selection:W}=i,{$from:$,$to:rt}=W,mt=$.blockRange(rt);if(!mt)return!1;const Ct=we(Ot=>dn(Ot.type.name,E))(W);if(mt.depth>=1&&Ct&&mt.depth-Ct.depth<=1){if(Ct.node.type===C)return u.liftListItem(B);if(dn(Ct.node.type.name,E)&&C.validContent(Ct.node.content)&&s)return c().command(()=>(o.setNodeMarkup(Ct.pos,C),!0)).command(()=>un(o,C)).command(()=>pn(o,C)).run()}return c().command(()=>!!p().wrapInList(C)||u.clearNodes()).wrapInList(C).command(()=>un(o,C)).command(()=>pn(o,C)).run()},toggleMark:(n,t={},e={})=>({state:o,commands:i})=>{const{extendEmptyMarkRange:s=!1}=e,c=$t(n,o.schema);return ye(o,c,t)?i.unsetMark(c,{extendEmptyMarkRange:s}):i.setMark(c,t)},toggleNode:(n,t,e={})=>({state:o,commands:i})=>{const s=P(n,o.schema),c=P(t,o.schema);return Ce(o,s,e)?i.setNode(c):i.setNode(s,e)},toggleWrap:(n,t={})=>({state:e,commands:o})=>{const i=P(n,e.schema);return Ce(e,i,t)?o.lift(i):o.wrapIn(i,t)},undoInputRule:()=>({state:n,dispatch:t})=>{const e=n.plugins;for(let o=0;o<e.length;o+=1){const i=e[o];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(t){const c=n.tr,u=s.transform;for(let p=u.steps.length-1;p>=0;p-=1)c.step(u.steps[p].invert(u.docs[p]));if(s.text){const p=c.doc.resolve(s.from).marks();c.replaceWith(s.from,s.to,n.schema.text(s.text,p))}else c.delete(s.from,s.to)}return!0}}return!1},unsetAllMarks:()=>({tr:n,dispatch:t})=>{const{selection:e}=n,{empty:o,ranges:i}=e;return o||t&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},unsetMark:(n,t={})=>({tr:e,state:o,dispatch:i})=>{var s;const{extendEmptyMarkRange:c=!1}=t,{selection:u}=e,p=$t(n,o.schema),{$from:E,empty:C,ranges:B}=u;if(!i)return!0;if(C&&c){let{from:W,to:$}=u;const rt=null===(s=E.marks().find(Ct=>Ct.type===p))||void 0===s?void 0:s.attrs,mt=xe(E,p,rt);mt&&(W=mt.from,$=mt.to),e.removeMark(W,$,p)}else B.forEach(W=>{e.removeMark(W.$from.pos,W.$to.pos,p)});return e.removeStoredMark(p),!0},updateAttributes:(n,t={})=>({tr:e,state:o,dispatch:i})=>{let s=null,c=null;const u=Je("string"==typeof n?n:n.name,o.schema);return!!u&&("node"===u&&(s=P(n,o.schema)),"mark"===u&&(c=$t(n,o.schema)),i&&e.selection.ranges.forEach(p=>{const E=p.$from.pos,C=p.$to.pos;o.doc.nodesBetween(E,C,(B,W)=>{s&&s===B.type&&e.setNodeMarkup(W,void 0,It(It({},B.attrs),t)),c&&B.marks.length&&B.marks.forEach($=>{if(c===$.type){const rt=Math.max(W,E),mt=Math.min(W+B.nodeSize,C);e.addMark(rt,mt,c.create(It(It({},$.attrs),t)))}})})}),!0)},wrapIn:(n,t={})=>({state:e,dispatch:o})=>function(n,t=null){return function(e,o){let{$from:i,$to:s}=e.selection,c=i.blockRange(s),u=c&&(0,f.nd)(c,n,t);return!!u&&(o&&o(e.tr.wrap(c,u).scrollIntoView()),!0)}}(P(n,e.schema),t)(e,o),wrapInList:(n,t={})=>({state:e,dispatch:o})=>function(n,t=null){return function(e,o){let{$from:i,$to:s}=e.selection,c=i.blockRange(s),u=!1,p=c;if(!c)return!1;if(c.depth>=2&&i.node(c.depth-1).type.compatibleContent(n)&&0==c.startIndex){if(0==i.index(c.depth-1))return!1;let C=e.doc.resolve(c.start-2);p=new _.Ts(C,C,c.depth),c.endIndex<c.parent.childCount&&(c=new _.Ts(i,e.doc.resolve(s.end(c.depth)),c.depth)),u=!0}let E=(0,f.nd)(p,n,t,c);return!!E&&(o&&o(function(n,t,e,o,i){let s=_.HY.empty;for(let C=e.length-1;C>=0;C--)s=_.HY.from(e[C].type.create(e[C].attrs,s));n.step(new f.FC(t.start-(o?2:0),t.end,t.start,t.end,new _.p2(s,0,0),e.length,!0));let c=0;for(let C=0;C<e.length;C++)e[C].type==i&&(c=C+1);let u=e.length-c,p=t.start+e.length-(o?2:0),E=t.parent;for(let C=t.startIndex,B=t.endIndex,W=!0;C<B;C++,W=!1)!W&&(0,f.Ax)(n.doc,p,u)&&(n.split(p,u),p+=2*u),p+=E.child(C).nodeSize;return n}(e.tr,c,E,u,n).scrollIntoView()),!0)}}(P(n,e.schema),t)(e,o)});const fn=se.create({name:"commands",addCommands:()=>It({},he)}),oe=se.create({name:"editable",addProseMirrorPlugins(){return[new m.Sy({key:new m.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),De=se.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new m.Sy({key:new m.H$("focusEvents"),props:{handleDOMEvents:{focus:(t,e)=>{n.isFocused=!0;const o=n.state.tr.setMeta("focus",{event:e}).setMeta("addToHistory",!1);return t.dispatch(o),!1},blur:(t,e)=>{n.isFocused=!1;const o=n.state.tr.setMeta("blur",{event:e}).setMeta("addToHistory",!1);return t.dispatch(o),!1}}}})]}}),Me=se.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:c})=>[()=>c.undoInputRule(),()=>c.command(({tr:u})=>{const{selection:p,doc:E}=u,{empty:C,$anchor:B}=p,{pos:W,parent:$}=B,rt=m.Y1.atStart(E).from===W;return!(!(C&&rt&&$.type.isTextblock)||$.textContent.length)&&c.clearNodes()}),()=>c.deleteSelection(),()=>c.joinBackward(),()=>c.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:c})=>[()=>c.deleteSelection(),()=>c.joinForward(),()=>c.selectNodeForward()]),o={Enter:()=>this.editor.commands.first(({commands:c})=>[()=>c.newlineInCode(),()=>c.createParagraphNear(),()=>c.liftEmptyBlock(),()=>c.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i=It({},o),s=ee(It({},o),{"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return Be()||on()?s:i},addProseMirrorPlugins(){return[new m.Sy({key:new m.H$("clearDocument"),appendTransaction:(n,t,e)=>{if(!n.some(rt=>rt.docChanged)||t.doc.eq(e.doc))return;const{empty:i,from:s,to:c}=t.selection,u=m.Y1.atStart(t.doc).from,p=m.Y1.atEnd(t.doc).to,E=s===u&&c===p,C=0===e.doc.textBetween(0,e.doc.content.size," "," ").length;if(i||!E||!C)return;const B=e.tr,W=Qt({state:e,transaction:B}),{commands:$}=new Ut({editor:this.editor,state:W});return $.clearNodes(),B.steps.length?B:void 0}})]}}),Ht=se.create({name:"tabindex",addProseMirrorPlugins(){return[new m.Sy({key:new m.H$("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Kt=Object.freeze({__proto__:null,ClipboardTextSerializer:Mn,Commands:fn,Editable:oe,FocusEvents:De,Keymap:Me,Tabindex:Ht});function ae(n,t){const e=P(t,n.schema),{from:o,to:i}=n.selection,s=[];n.doc.nodesBetween(o,i,u=>{s.push(u)});const c=s.reverse().find(u=>u.type.name===e.name);return c?It({},c.attrs):{}}function jn(n,t){const e=Je("string"==typeof t?t:t.name,n.schema);return"node"===e?ae(n,t):"mark"===e?Oe(n,t):{}}function Ze(n,t){const e=_.PW.fromSchema(t).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(e),i.innerHTML}function hn(n,t){return Ae(n,{from:0,to:n.content.size},t)}function mn(n,t,e={}){if(!t)return Ce(n,null,e)||ye(n,null,e);const o=Je(t,n.schema);return"node"===o?Ce(n,t,e):"mark"===o&&ye(n,t,e)}function _n(n){var t;const e=null===(t=n.type.createAndFill())||void 0===t?void 0:t.toJSON(),o=n.toJSON();return JSON.stringify(e)===JSON.stringify(o)}class gn extends class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const o=this.callbacks[t];return o&&o.forEach(i=>i.apply(this,e)),this}off(t,e){const o=this.callbacks[t];return o&&(e?this.callbacks[t]=o.filter(i=>i!==e):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(n,t){const e=document.querySelector("style[data-tiptap-style]");if(null!==e)return e;const o=document.createElement("style");return t&&o.setAttribute("nonce",t),o.setAttribute("data-tiptap-style",""),o.innerHTML='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',document.getElementsByTagName("head")[0].appendChild(o),o}(0,this.options.injectNonce))}setOptions(t={}){this.options=It(It({},this.options),t),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t){this.setOptions({editable:t})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,e){const o=S(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],i=this.state.reconfigure({plugins:o});this.view.updateState(i)}unregisterPlugin(t){if(this.isDestroyed)return;const e="string"==typeof t?`${t}$`:t.key,o=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(e))});this.view.updateState(o)}createExtensionManager(){const e=[...this.options.enableCoreExtensions?Object.values(Kt):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(null==o?void 0:o.type));this.extensionManager=new ve(e,this)}createCommandManager(){this.commandManager=new Ut({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=zn(this.options.content,this.schema,this.options.parseOptions),e=je(t,this.options.autofocus);this.view=new r.tk(this.options.element,ee(It({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:m.yy.create({doc:t,selection:e||void 0})}));const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach(c=>{var u;return null===(u=this.capturedTransaction)||void 0===u?void 0:u.step(c)}):void(this.capturedTransaction=t);const e=this.state.apply(t),o=!this.state.selection.eq(e.selection);this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t}),o&&this.emit("selectionUpdate",{editor:this,transaction:t});const i=t.getMeta("focus"),s=t.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:t}),s&&this.emit("blur",{editor:this,event:s.event,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return jn(this.state,t)}isActive(t,e){return mn(this.state,"string"==typeof t?t:null,"string"==typeof t?e:t)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Ze(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e="\n\n",textSerializers:o={}}=t||{};return hn(this.state.doc,{blockSeparator:e,textSerializers:It(It({},o),ke(this.schema))})}get isEmpty(){return _n(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}}function $n(n,t){const e=new f.wx(n);return t.forEach(o=>{o.steps.forEach(i=>{e.step(i)})}),e}function vn(n){for(let t=0;t<n.edgeCount;t+=1){const{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}function Co(n,t){const e=[];return n.descendants((o,i)=>{t(o)&&e.push({node:o,pos:i})}),e}function Eo(n,t,e){const o=[];return n.nodesBetween(t.from,t.to,(i,s)=>{e(i)&&o.push({node:i,pos:s})}),o}function Qe(n){return A(ve.resolve(n))}function yo(n,t){const e=Qe(t);return Ze(_.NB.fromJSON(e,n).content,e)}function Jn(n,t){const e=Qe(t),o=nn(n);return _.aw.fromSchema(e).parse(o).toJSON()}function Mo(n,t,e){const{blockSeparator:o="\n\n",textSerializers:i={}}=e||{},s=Qe(t);return hn(_.NB.fromJSON(s,n),{blockSeparator:o,textSerializers:It(It({},i),ke(s))})}function Oo(n){const{mapping:t,steps:e}=n,o=[];return t.maps.forEach((i,s)=>{const c=[];if(i.ranges.length)i.forEach((u,p)=>{c.push({from:u,to:p})});else{const{from:u,to:p}=e[s];if(void 0===u||void 0===p)return;c.push({from:u,to:p})}c.forEach(({from:u,to:p})=>{const E=t.slice(s).map(u,-1),C=t.slice(s).map(p),B=t.invert().map(E,-1),W=t.invert().map(C);o.push({oldRange:{from:B,to:W},newRange:{from:E,to:C}})})}),function(n){const t=function(n,t=JSON.stringify){const e={};return n.filter(o=>{const i=t(o);return!Object.prototype.hasOwnProperty.call(e,i)&&(e[i]=!0)})}(n);return 1===t.length?t:t.filter((e,o)=>!t.filter((s,c)=>c!==o).some(s=>e.oldRange.from>=s.oldRange.from&&e.oldRange.to<=s.oldRange.to&&e.newRange.from>=s.newRange.from&&e.newRange.to<=s.newRange.to))}(o)}function Cn(n,t=0){const o=n.type===n.type.schema.topNodeType?0:1,i=t,s=i+n.nodeSize,c=n.marks.map(E=>{const C={type:E.type.name};return Object.keys(E.attrs).length&&(C.attrs=It({},E.attrs)),C}),u=It({},n.attrs),p={type:n.type.name,from:i,to:s};return Object.keys(u).length&&(p.attrs=u),c.length&&(p.marks=c),n.content.childCount&&(p.content=[],n.forEach((E,C)=>{var B;null===(B=p.content)||void 0===B||B.push(Cn(E,t+C+o))})),n.text&&(p.text=n.text),p}function En(n,t,e){const o=[];return n===t?e.resolve(n).marks().forEach(i=>{const c=xe(e.resolve(n-1),i.type);!c||o.push(It({mark:i},c))}):e.nodesBetween(n,t,(i,s)=>{o.push(...i.marks.map(c=>({from:s,to:s+i.nodeSize,mark:c})))}),o}function bo(n){return Fe(n)&&n instanceof m.qv}function yn(n,t,e){const i=n.state.doc.content.size,s=le(t,0,i),c=le(e,0,i),u=n.coordsAtPos(s),p=n.coordsAtPos(c,-1),E=Math.min(u.top,p.top),C=Math.max(u.bottom,p.bottom),B=Math.min(u.left,p.left),W=Math.max(u.right,p.right),Ot={top:E,bottom:C,left:B,right:W,width:W-B,height:C-E,x:B,y:E};return ee(It({},Ot),{toJSON:()=>Ot})}function Do(n){return new b({find:n.find,handler:({state:t,range:e,match:o})=>{const i=Q(n.getAttributes,void 0,o);if(!1===i||null===i)return null;const{tr:s}=t,c=o[o.length-1],u=o[0];let p=e.to;if(c){const E=u.search(/\S/),C=e.from+u.indexOf(c),B=C+c.length;if(En(e.from,e.to,t.doc).filter($=>$.mark.type.excluded.find(mt=>mt===n.type&&mt!==$.mark.type)).filter($=>$.to>C).length)return null;B<e.to&&s.delete(B,e.to),C>e.from&&s.delete(e.from+E,C),p=e.from+E+c.length,s.addMark(e.from+E,p,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}function wo(n){return new b({find:n.find,handler:({state:t,range:e,match:o})=>{const i=Q(n.getAttributes,void 0,o)||{},{tr:s}=t,c=e.from;let u=e.to;if(o[1]){let E=c+o[0].lastIndexOf(o[1]);E>u?E=u:u=E+o[1].length,s.insertText(o[0][o[0].length-1],c+o[0].length-1),s.replaceWith(E,u,n.type.create(i))}else o[0]&&s.replaceWith(c,u,n.type.create(i))}})}function No(n){return new b({find:n.find,handler:({state:t,range:e,match:o})=>{const i=t.doc.resolve(e.from),s=Q(n.getAttributes,void 0,o)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;t.tr.delete(e.from,e.to).setBlockType(e.from,e.from,n.type,s)}})}function Wo(n){return new b({find:n.find,handler:({state:t,range:e,match:o})=>{let i=n.replace,s=e.from;const c=e.to;if(o[1]){const u=o[0].lastIndexOf(o[1]);i+=o[0].slice(u+o[1].length),s+=u;const p=s-c;p>0&&(i=o[0].slice(u-p,u)+i,s=c)}t.tr.insertText(i,s,c)}})}function Po(n){return new b({find:n.find,handler:({state:t,range:e,match:o})=>{const i=Q(n.getAttributes,void 0,o)||{},s=t.tr.delete(e.from,e.to),u=s.doc.resolve(e.from).blockRange(),p=u&&(0,f.nd)(u,n.type,i);if(!p)return null;s.wrap(u,p);const E=s.doc.resolve(e.from-1).nodeBefore;E&&E.type===n.type&&(0,f.Mn)(s.doc,e.from-1)&&(!n.joinPredicate||n.joinPredicate(o,E))&&s.join(e.from-1)}})}class We{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=It(It({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Q(V(this,"addOptions",{name:this.name}))),this.storage=Q(V(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new We(t)}configure(t={}){const e=this.extend();return e.options=Ue(this.options,t),e.storage=Q(V(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new We(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=Q(V(e,"addOptions",{name:e.name})),e.storage=Q(V(e,"addStorage",{name:e.name,options:e.options})),e}}class ze{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=It(It({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Q(V(this,"addOptions",{name:this.name}))),this.storage=Q(V(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new ze(t)}configure(t={}){const e=this.extend();return e.options=Ue(this.options,t),e.storage=Q(V(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new ze(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=Q(V(e,"addOptions",{name:e.name})),e.storage=Q(V(e,"addStorage",{name:e.name,options:e.options})),e}}class Yn{constructor(t,e,o){this.isDragging=!1,this.component=t,this.editor=e.editor,this.options=It({stopEvent:null,ignoreMutation:null},o),this.extension=e.extension,this.node=e.node,this.decorations=e.decorations,this.getPos=e.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var e,o,i,s,c,u,p;const{view:E}=this.editor,C=t.target,B=3===C.nodeType?null===(e=C.parentElement)||void 0===e?void 0:e.closest("[data-drag-handle]"):C.closest("[data-drag-handle]");if(!this.dom||(null===(o=this.contentDOM)||void 0===o?void 0:o.contains(C))||!B)return;let W=0,$=0;if(this.dom!==B){const Ct=this.dom.getBoundingClientRect(),Ot=B.getBoundingClientRect(),Nt=null!==(i=t.offsetX)&&void 0!==i?i:null===(s=t.nativeEvent)||void 0===s?void 0:s.offsetX,Yt=null!==(c=t.offsetY)&&void 0!==c?c:null===(u=t.nativeEvent)||void 0===u?void 0:u.offsetY;W=Ot.x-Ct.x+Nt,$=Ot.y-Ct.y+Yt}null===(p=t.dataTransfer)||void 0===p||p.setDragImage(this.dom,W,$);const rt=m.qv.create(E.state.doc,this.getPos()),mt=E.state.tr.setSelection(rt);E.dispatch(mt)}stopEvent(t){var e;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:t});const o=t.target;if(!this.dom.contains(o)||(null===(e=this.contentDOM)||void 0===e?void 0:e.contains(o)))return!1;const s="drop"===t.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(o.tagName)||o.isContentEditable)&&!s)return!0;const{isEditable:u}=this.editor,{isDragging:p}=this,E=!!this.node.type.spec.draggable,C=m.qv.isSelectable(this.node),B="copy"===t.type,W="paste"===t.type,$="cut"===t.type,rt="mousedown"===t.type,mt=t.type.startsWith("drag");if(!E&&C&&mt&&t.preventDefault(),E&&mt&&!p)return t.preventDefault(),!1;if(E&&u&&!p&&rt){const Ct=o.closest("[data-drag-handle]");Ct&&(this.dom===Ct||this.dom.contains(Ct))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(p||s||B||W||$||rt&&C)}ignoreMutation(t){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:t}):!(!this.node.isLeaf&&!this.node.isAtom&&("selection"===t.type||this.dom.contains(t.target)&&"childList"===t.type&&Be()&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(o=>o.isContentEditable)||(this.contentDOM!==t.target||"attributes"!==t.type)&&this.contentDOM.contains(t.target))))}updateAttributes(t){this.editor.commands.command(({tr:e})=>{const o=this.getPos();return e.setNodeMarkup(o,void 0,It(It({},this.node.attrs),t)),!0})}deleteNode(){const t=this.getPos();this.editor.commands.deleteRange({from:t,to:t+this.node.nodeSize})}}function Io(n){return new At({find:n.find,handler:({state:t,range:e,match:o})=>{const i=Q(n.getAttributes,void 0,o);if(!1===i||null===i)return null;const{tr:s}=t,c=o[o.length-1],u=o[0];let p=e.to;if(c){const E=u.search(/\S/),C=e.from+u.indexOf(c),B=C+c.length;if(En(e.from,e.to,t.doc).filter($=>$.mark.type.excluded.find(mt=>mt===n.type&&mt!==$.mark.type)).filter($=>$.to>C).length)return null;B<e.to&&s.delete(B,e.to),C>e.from&&s.delete(e.from+E,C),p=e.from+E+c.length,s.addMark(e.from+E,p,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}function Gn(n){return new At({find:n.find,handler:({state:t,range:e,match:o})=>{let i=n.replace,s=e.from;const c=e.to;if(o[1]){const u=o[0].lastIndexOf(o[1]);i+=o[0].slice(u+o[1].length),s+=u;const p=s-c;p>0&&(i=o[0].slice(u-p,u)+i,s=c)}t.tr.insertText(i,s,c)}})}class So{constructor(t){this.transaction=t,this.currentStep=this.transaction.steps.length}map(t){let e=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((i,s)=>{const c=s.getMap().mapResult(i);return c.deleted&&(e=!0),c.pos},t),deleted:e}}}function Zn(n){return n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}},10763:(yt,tt,a)=>{a.d(tt,{V6:()=>R,ZP:()=>R});var m=a(40256);const r=/^\s*>\s$/,R=m.Node.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:_}){return["blockquote",(0,m.mergeAttributes)(this.options.HTMLAttributes,_),0]},addCommands(){return{setBlockquote:()=>({commands:_})=>_.wrapIn(this.name),toggleBlockquote:()=>({commands:_})=>_.toggleWrap(this.name),unsetBlockquote:()=>({commands:_})=>_.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,m.wrappingInputRule)({find:r,type:this.type})]}})},32892:(yt,tt,a)=>{a.d(tt,{d8:()=>U,ZP:()=>U});var m=a(40256);const r=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,R=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,_=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,f=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,U=m.Mark.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:v=>"normal"!==v.style.fontWeight&&null},{style:"font-weight",getAttrs:v=>/^(bold(er)?|[5-9]\d{2,})$/.test(v)&&null}],renderHTML({HTMLAttributes:v}){return["strong",(0,m.mergeAttributes)(this.options.HTMLAttributes,v),0]},addCommands(){return{setBold:()=>({commands:v})=>v.setMark(this.name),toggleBold:()=>({commands:v})=>v.toggleMark(this.name),unsetBold:()=>({commands:v})=>v.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,m.markInputRule)({find:r,type:this.type}),(0,m.markInputRule)({find:_,type:this.type})]},addPasteRules(){return[(0,m.markPasteRule)({find:R,type:this.type}),(0,m.markPasteRule)({find:f,type:this.type})]}})},12258:(yt,tt,a)=>{a.d(tt,{DY:()=>R,ZP:()=>R});var m=a(40256);const r=/^\s*([-+*])\s$/,R=m.Node.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:_}){return["ul",(0,m.mergeAttributes)(this.options.HTMLAttributes,_),0]},addCommands(){return{toggleBulletList:()=>({commands:_})=>_.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[(0,m.wrappingInputRule)({find:r,type:this.type})]}})},93743:(yt,tt,a)=>{a.d(tt,{dn:()=>f,ZP:()=>f});var m=a(40256),r=a(62463);const R=/^```([a-z]+)?[\s\n]$/,_=/^~~~([a-z]+)?[\s\n]$/,f=m.Node.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:U=>{var v;const{languageClassPrefix:G}=this.options;return[...(null===(v=U.firstElementChild)||void 0===v?void 0:v.classList)||[]].filter(et=>et.startsWith(G)).map(et=>et.replace(G,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:U,HTMLAttributes:v}){return["pre",(0,m.mergeAttributes)(this.options.HTMLAttributes,v),["code",{class:U.attrs.language?this.options.languageClassPrefix+U.attrs.language:null},0]]},addCommands(){return{setCodeBlock:U=>({commands:v})=>v.setNode(this.name,U),toggleCodeBlock:U=>({commands:v})=>v.toggleNode(this.name,"paragraph",U)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:U,$anchor:v}=this.editor.state.selection;return!(!U||v.parent.type.name!==this.name)&&!(1!==v.pos&&v.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:U})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:v}=U,{selection:G}=v,{$from:j,empty:q}=G;if(!q||j.parent.type!==this.type)return!1;const X=j.parentOffset===j.parent.nodeSize-2,et=j.parent.textContent.endsWith("\n\n");return!(!X||!et)&&U.chain().command(({tr:Z})=>(Z.delete(j.pos-2,j.pos),!0)).exitCode().run()},ArrowDown:({editor:U})=>{if(!this.options.exitOnArrowDown)return!1;const{state:v}=U,{selection:G,doc:j}=v,{$from:q,empty:X}=G;if(!X||q.parent.type!==this.type||q.parentOffset!==q.parent.nodeSize-2)return!1;const Z=q.after();return void 0!==Z&&!j.nodeAt(Z)&&U.commands.exitCode()}}},addInputRules(){return[(0,m.textblockTypeInputRule)({find:R,type:this.type,getAttributes:U=>({language:U[1]})}),(0,m.textblockTypeInputRule)({find:_,type:this.type,getAttributes:U=>({language:U[1]})})]},addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("codeBlockVSCodeHandler"),props:{handlePaste:(U,v)=>{if(!v.clipboardData||this.editor.isActive(this.type.name))return!1;const G=v.clipboardData.getData("text/plain"),j=v.clipboardData.getData("vscode-editor-data"),q=j?JSON.parse(j):void 0,X=null==q?void 0:q.mode;if(!G||!X)return!1;const{tr:et}=U.state;return et.replaceSelectionWith(this.type.create({language:X})),et.setSelection(r.Bs.near(et.doc.resolve(Math.max(0,et.selection.from-2)))),et.insertText(G.replace(/\r\n?/g,"\n")),et.setMeta("paste",!0),U.dispatch(et),!0}}})]}})},70837:(yt,tt,a)=>{a.d(tt,{EK:()=>_,ZP:()=>_});var m=a(40256);const r=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,R=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,_=m.Mark.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:f}){return["code",(0,m.mergeAttributes)(this.options.HTMLAttributes,f),0]},addCommands(){return{setCode:()=>({commands:f})=>f.setMark(this.name),toggleCode:()=>({commands:f})=>f.toggleMark(this.name),unsetCode:()=>({commands:f})=>f.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,m.markInputRule)({find:r,type:this.type})]},addPasteRules(){return[(0,m.markPasteRule)({find:R,type:this.type})]}})},44225:(yt,tt,a)=>{a.d(tt,{B:()=>r,Z:()=>r});const r=a(40256).Node.create({name:"doc",topNode:!0,content:"block+"})},81121:(yt,tt,a)=>{a.d(tt,{m:()=>U,Z:()=>U});var m=a(40256),r=a(62463),R=a(38480);function _(v={}){return new r.Sy({view:G=>new f(G,v)})}class f{constructor(G,j){this.editorView=G,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=j.width||1,this.color=j.color||"black",this.class=j.class,this.handlers=["dragover","dragend","drop","dragleave"].map(q=>{let X=et=>{this[q](et)};return G.dom.addEventListener(q,X),{name:q,handler:X}})}destroy(){this.handlers.forEach(({name:G,handler:j})=>this.editorView.dom.removeEventListener(G,j))}update(G,j){null!=this.cursorPos&&j.doc!=G.state.doc&&(this.cursorPos>G.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(G){G!=this.cursorPos&&(this.cursorPos=G,null==G?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let j,G=this.editorView.state.doc.resolve(this.cursorPos);if(!G.parent.inlineContent){let Z=G.nodeBefore,st=G.nodeAfter;if(Z||st){let _t=this.editorView.nodeDOM(this.cursorPos-(Z?Z.nodeSize:0)).getBoundingClientRect(),ft=Z?_t.bottom:_t.top;Z&&st&&(ft=(ft+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),j={left:_t.left,right:_t.right,top:ft-this.width/2,bottom:ft+this.width/2}}}if(!j){let Z=this.editorView.coordsAtPos(this.cursorPos);j={left:Z.left-this.width/2,right:Z.left+this.width/2,top:Z.top,bottom:Z.bottom}}let X,et,q=this.editorView.dom.offsetParent;if(this.element||(this.element=q.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!q||q==document.body&&"static"==getComputedStyle(q).position)X=-pageXOffset,et=-pageYOffset;else{let Z=q.getBoundingClientRect();X=Z.left-q.scrollLeft,et=Z.top-q.scrollTop}this.element.style.left=j.left-X+"px",this.element.style.top=j.top-et+"px",this.element.style.width=j.right-j.left+"px",this.element.style.height=j.bottom-j.top+"px"}scheduleRemoval(G){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),G)}dragover(G){if(!this.editorView.editable)return;let j=this.editorView.posAtCoords({left:G.clientX,top:G.clientY}),q=j&&j.inside>=0&&this.editorView.state.doc.nodeAt(j.inside),X=q&&q.type.spec.disableDropCursor,et="function"==typeof X?X(this.editorView,j):X;if(j&&!et){let Z=j.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(Z=(0,R.nj)(this.editorView.state.doc,Z,this.editorView.dragging.slice),null==Z))return this.setCursor(null);this.setCursor(Z),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(G){(G.target==this.editorView.dom||!this.editorView.dom.contains(G.relatedTarget))&&this.setCursor(null)}}const U=m.Extension.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[_(this.options)]}})},13512:(yt,tt,a)=>{a.d(tt,{f:()=>ft,Z:()=>ft});var m=a(40256),r=a(13903),R=a(62463),_=a(35917),f=a(43594);class U extends R.Y1{constructor(w){super(w,w)}map(w,N){let z=w.resolve(N.map(this.head));return U.valid(z)?new U(z):R.Y1.near(z)}content(){return _.p2.empty}eq(w){return w instanceof U&&w.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(w,N){if("number"!=typeof N.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new U(w.resolve(N.pos))}getBookmark(){return new v(this.anchor)}static valid(w){let N=w.parent;if(N.isTextblock||!function(at){for(let w=at.depth;w>=0;w--){let N=at.index(w),z=at.node(w);if(0!=N)for(let L=z.child(N-1);;L=L.lastChild){if(0==L.childCount&&!L.inlineContent||L.isAtom||L.type.spec.isolating)return!0;if(L.inlineContent)return!1}else if(z.type.spec.isolating)return!0}return!0}(w)||!function(at){for(let w=at.depth;w>=0;w--){let N=at.indexAfter(w),z=at.node(w);if(N!=z.childCount)for(let L=z.child(N);;L=L.firstChild){if(0==L.childCount&&!L.inlineContent||L.isAtom||L.type.spec.isolating)return!0;if(L.inlineContent)return!1}else if(z.type.spec.isolating)return!0}return!0}(w))return!1;let z=N.type.spec.allowGapCursor;if(null!=z)return z;let L=N.contentMatchAt(w.index()).defaultType;return L&&L.isTextblock}static findGapCursorFrom(w,N,z=!1){t:for(;;){if(!z&&U.valid(w))return w;let L=w.pos,Y=null;for(let nt=w.depth;;nt--){let it=w.node(nt);if(N>0?w.indexAfter(nt)<it.childCount:w.index(nt)>0){Y=it.child(N>0?w.indexAfter(nt):w.index(nt)-1);break}if(0==nt)return null;L+=N;let dt=w.doc.resolve(L);if(U.valid(dt))return dt}for(;;){let nt=N>0?Y.firstChild:Y.lastChild;if(!nt){if(Y.isAtom&&!Y.isText&&!R.qv.isSelectable(Y)){w=w.doc.resolve(L+Y.nodeSize*N),z=!1;continue t}break}Y=nt,L+=N;let it=w.doc.resolve(L);if(U.valid(it))return it}return null}}}U.prototype.visible=!1,U.findFrom=U.findGapCursorFrom,R.Y1.jsonID("gapcursor",U);class v{constructor(w){this.pos=w}map(w){return new v(w.map(this.pos))}resolve(w){let N=w.resolve(this.pos);return U.valid(N)?new U(N):R.Y1.near(N)}}const X=(0,r.$)({ArrowLeft:et("horiz",-1),ArrowRight:et("horiz",1),ArrowUp:et("vert",-1),ArrowDown:et("vert",1)});function et(at,w){const N="vert"==at?w>0?"down":"up":w>0?"right":"left";return function(z,L,Y){let nt=z.selection,it=w>0?nt.$to:nt.$from,dt=nt.empty;if(nt instanceof R.Bs){if(!Y.endOfTextblock(N)||0==it.depth)return!1;dt=!1,it=z.doc.resolve(w>0?it.after():it.before())}let ct=U.findGapCursorFrom(it,w,dt);return!!ct&&(L&&L(z.tr.setSelection(new U(ct))),!0)}}function Z(at,w,N){if(!at||!at.editable)return!1;let z=at.state.doc.resolve(w);if(!U.valid(z))return!1;let L=at.posAtCoords({left:N.clientX,top:N.clientY});return!(L&&L.inside>-1&&R.qv.isSelectable(at.state.doc.nodeAt(L.inside))||(at.dispatch(at.state.tr.setSelection(new U(z))),0))}function st(at,w){if("insertCompositionText"!=w.inputType||!(at.state.selection instanceof U))return!1;let{$from:N}=at.state.selection,z=N.parent.contentMatchAt(N.index()).findWrapping(at.state.schema.nodes.text);if(!z)return!1;let L=_.HY.empty;for(let nt=z.length-1;nt>=0;nt--)L=_.HY.from(z[nt].createAndFill(null,L));let Y=at.state.tr.replace(N.pos,N.pos,new _.p2(L,0,0));return Y.setSelection(R.Bs.near(Y.doc.resolve(N.pos+1))),at.dispatch(Y),!1}function _t(at){if(!(at.selection instanceof U))return null;let w=document.createElement("div");return w.className="ProseMirror-gapcursor",f.EH.create(at.doc,[f.p.widget(at.selection.head,w,{key:"gapcursor"})])}const ft=m.Extension.create({name:"gapCursor",addProseMirrorPlugins:()=>[new R.Sy({props:{decorations:_t,createSelectionBetween:(at,w,N)=>w.pos==N.pos&&U.valid(N)?new U(N):null,handleClick:Z,handleKeyDown:X,handleDOMEvents:{beforeinput:st}}})],extendNodeSchema(at){var w;return{allowGapCursor:null!==(w=(0,m.callOrReturn)((0,m.getExtensionField)(at,"allowGapCursor",{name:at.name,options:at.options,storage:at.storage})))&&void 0!==w?w:null}}})},34278:(yt,tt,a)=>{a.d(tt,{U:()=>r,Z:()=>r});var m=a(40256);const r=m.Node.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:R}){return["br",(0,m.mergeAttributes)(this.options.HTMLAttributes,R)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:R,chain:_,state:f,editor:U})=>R.first([()=>R.exitCode(),()=>R.command(()=>{const{selection:v,storedMarks:G}=f;if(v.$from.parent.type.spec.isolating)return!1;const{keepMarks:j}=this.options,{splittableMarks:q}=U.extensionManager,X=G||v.$to.parentOffset&&v.$from.marks();return _().insertContent({type:this.name}).command(({tr:et,dispatch:Z})=>{if(Z&&X&&j){const st=X.filter(_t=>q.includes(_t.type.name));et.ensureMarks(st)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}})},15400:(yt,tt,a)=>{a.d(tt,{X:()=>r,Z:()=>r});var m=a(40256);const r=m.Node.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(R=>({tag:`h${R}`,attrs:{level:R}}))},renderHTML({node:R,HTMLAttributes:_}){return[`h${this.options.levels.includes(R.attrs.level)?R.attrs.level:this.options.levels[0]}`,(0,m.mergeAttributes)(this.options.HTMLAttributes,_),0]},addCommands(){return{setHeading:R=>({commands:_})=>!!this.options.levels.includes(R.level)&&_.setNode(this.name,R),toggleHeading:R=>({commands:_})=>!!this.options.levels.includes(R.level)&&_.toggleNode(this.name,"paragraph",R)}},addKeyboardShortcuts(){return this.options.levels.reduce((R,_)=>ee(It({},R),{[`Mod-Alt-${_}`]:()=>this.editor.commands.toggleHeading({level:_})}),{})},addInputRules(){return this.options.levels.map(R=>(0,m.textblockTypeInputRule)({find:new RegExp(`^(#{1,${R}})\\s$`),type:this.type,getAttributes:{level:R}}))}})},10590:(yt,tt,a)=>{a.d(tt,{A:()=>J,Z:()=>J});var m=a(40256),r=200,R=function(){};R.prototype.append=function(I){return I.length?(I=R.from(I),!this.length&&I||I.length<r&&this.leafAppend(I)||this.length<r&&I.leafPrepend(this)||this.appendInner(I)):this},R.prototype.prepend=function(I){return I.length?R.from(I).append(this):this},R.prototype.appendInner=function(I){return new f(this,I)},R.prototype.slice=function(I,T){return void 0===I&&(I=0),void 0===T&&(T=this.length),I>=T?R.empty:this.sliceInner(Math.max(0,I),Math.min(this.length,T))},R.prototype.get=function(I){if(!(I<0||I>=this.length))return this.getInner(I)},R.prototype.forEach=function(I,T,k){void 0===T&&(T=0),void 0===k&&(k=this.length),T<=k?this.forEachInner(I,T,k,0):this.forEachInvertedInner(I,T,k,0)},R.prototype.map=function(I,T,k){void 0===T&&(T=0),void 0===k&&(k=this.length);var F=[];return this.forEach(function(ut,pt){return F.push(I(ut,pt))},T,k),F},R.from=function(I){return I instanceof R?I:I&&I.length?new _(I):R.empty};var _=function(x){function I(k){x.call(this),this.values=k}x&&(I.__proto__=x),(I.prototype=Object.create(x&&x.prototype)).constructor=I;var T={length:{configurable:!0},depth:{configurable:!0}};return I.prototype.flatten=function(){return this.values},I.prototype.sliceInner=function(F,ut){return 0==F&&ut==this.length?this:new I(this.values.slice(F,ut))},I.prototype.getInner=function(F){return this.values[F]},I.prototype.forEachInner=function(F,ut,pt,Tt){for(var Pt=ut;Pt<pt;Pt++)if(!1===F(this.values[Pt],Tt+Pt))return!1},I.prototype.forEachInvertedInner=function(F,ut,pt,Tt){for(var Pt=ut-1;Pt>=pt;Pt--)if(!1===F(this.values[Pt],Tt+Pt))return!1},I.prototype.leafAppend=function(F){if(this.length+F.length<=r)return new I(this.values.concat(F.flatten()))},I.prototype.leafPrepend=function(F){if(this.length+F.length<=r)return new I(F.flatten().concat(this.values))},T.length.get=function(){return this.values.length},T.depth.get=function(){return 0},Object.defineProperties(I.prototype,T),I}(R);R.empty=new _([]);var f=function(x){function I(T,k){x.call(this),this.left=T,this.right=k,this.length=T.length+k.length,this.depth=Math.max(T.depth,k.depth)+1}return x&&(I.__proto__=x),(I.prototype=Object.create(x&&x.prototype)).constructor=I,I.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},I.prototype.getInner=function(k){return k<this.left.length?this.left.get(k):this.right.get(k-this.left.length)},I.prototype.forEachInner=function(k,F,ut,pt){var Tt=this.left.length;if(F<Tt&&!1===this.left.forEachInner(k,F,Math.min(ut,Tt),pt)||ut>Tt&&!1===this.right.forEachInner(k,Math.max(F-Tt,0),Math.min(this.length,ut)-Tt,pt+Tt))return!1},I.prototype.forEachInvertedInner=function(k,F,ut,pt){var Tt=this.left.length;if(F>Tt&&!1===this.right.forEachInvertedInner(k,F-Tt,Math.max(ut,Tt)-Tt,pt+Tt)||ut<Tt&&!1===this.left.forEachInvertedInner(k,Math.min(F,Tt),ut,pt))return!1},I.prototype.sliceInner=function(k,F){if(0==k&&F==this.length)return this;var ut=this.left.length;return F<=ut?this.left.slice(k,F):k>=ut?this.right.slice(k-ut,F-ut):this.left.slice(k,ut).append(this.right.slice(0,F-ut))},I.prototype.leafAppend=function(k){var F=this.right.leafAppend(k);if(F)return new I(this.left,F)},I.prototype.leafPrepend=function(k){var F=this.left.leafPrepend(k);if(F)return new I(F,this.right)},I.prototype.appendInner=function(k){return this.left.depth>=Math.max(this.right.depth,k.depth)+1?new I(this.left,new I(this.right,k)):new I(this,k)},I}(R);const v=R;var G=a(38480),j=a(62463);class X{constructor(I,T){this.items=I,this.eventCount=T}popEvent(I,T){if(0==this.eventCount)return null;let F,ut,k=this.items.length;for(;;k--)if(this.items.get(k-1).selection){--k;break}T&&(F=this.remapping(k,this.items.length),ut=F.maps.length);let Tt,Pt,pt=I.tr,kt=[],Wt=[];return this.items.forEach((Lt,Bt)=>{if(!Lt.step)return F||(F=this.remapping(k,Bt+1),ut=F.maps.length),ut--,void Wt.push(Lt);if(F){Wt.push(new Z(Lt.map));let Ft,wt=Lt.step.map(F.slice(ut));wt&&pt.maybeStep(wt).doc&&(Ft=pt.mapping.maps[pt.mapping.maps.length-1],kt.push(new Z(Ft,void 0,void 0,kt.length+Wt.length))),ut--,Ft&&F.appendMap(Ft,ut)}else pt.maybeStep(Lt.step);return Lt.selection?(Tt=F?Lt.selection.map(F.slice(ut)):Lt.selection,Pt=new X(this.items.slice(0,k).append(Wt.reverse().concat(kt)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:Pt,transform:pt,selection:Tt}}addTransform(I,T,k,F){let ut=[],pt=this.eventCount,Tt=this.items,Pt=!F&&Tt.length?Tt.get(Tt.length-1):null;for(let Wt=0;Wt<I.steps.length;Wt++){let wt,Lt=I.steps[Wt].invert(I.docs[Wt]),Bt=new Z(I.mapping.maps[Wt],Lt,T);(wt=Pt&&Pt.merge(Bt))&&(Bt=wt,Wt?ut.pop():Tt=Tt.slice(0,Tt.length-1)),ut.push(Bt),T&&(pt++,T=void 0),F||(Pt=Bt)}let kt=pt-k.depth;return kt>_t&&(Tt=function(x,I){let T;return x.forEach((k,F)=>{if(k.selection&&0==I--)return T=F,!1}),x.slice(T)}(Tt,kt),pt-=kt),new X(Tt.append(ut),pt)}remapping(I,T){let k=new G.vs;return this.items.forEach((F,ut)=>{k.appendMap(F.map,null!=F.mirrorOffset&&ut-F.mirrorOffset>=I?k.maps.length-F.mirrorOffset:void 0)},I,T),k}addMaps(I){return 0==this.eventCount?this:new X(this.items.append(I.map(T=>new Z(T))),this.eventCount)}rebased(I,T){if(!this.eventCount)return this;let k=[],F=Math.max(0,this.items.length-T),ut=I.mapping,pt=I.steps.length,Tt=this.eventCount;this.items.forEach(Bt=>{Bt.selection&&Tt--},F);let Pt=T;this.items.forEach(Bt=>{let wt=ut.getMirror(--Pt);if(null==wt)return;pt=Math.min(pt,wt);let Ft=ut.maps[wt];if(Bt.step){let Zt=I.steps[wt].invert(I.docs[wt]),Vt=Bt.selection&&Bt.selection.map(ut.slice(Pt+1,wt));Vt&&Tt++,k.push(new Z(Ft,Zt,Vt))}else k.push(new Z(Ft))},F);let kt=[];for(let Bt=T;Bt<pt;Bt++)kt.push(new Z(ut.maps[Bt]));let Wt=this.items.slice(0,F).append(kt).append(k),Lt=new X(Wt,Tt);return Lt.emptyItemCount()>500&&(Lt=Lt.compress(this.items.length-k.length)),Lt}emptyItemCount(){let I=0;return this.items.forEach(T=>{T.step||I++}),I}compress(I=this.items.length){let T=this.remapping(0,I),k=T.maps.length,F=[],ut=0;return this.items.forEach((pt,Tt)=>{if(Tt>=I)F.push(pt),pt.selection&&ut++;else if(pt.step){let Pt=pt.step.map(T.slice(k)),kt=Pt&&Pt.getMap();if(k--,kt&&T.appendMap(kt,k),Pt){let Wt=pt.selection&&pt.selection.map(T.slice(k));Wt&&ut++;let Bt,Lt=new Z(kt.invert(),Pt,Wt),wt=F.length-1;(Bt=F.length&&F[wt].merge(Lt))?F[wt]=Bt:F.push(Lt)}}else pt.map&&k--},this.items.length,0),new X(v.from(F.reverse()),ut)}}X.empty=new X(v.empty,0);class Z{constructor(I,T,k,F){this.map=I,this.step=T,this.selection=k,this.mirrorOffset=F}merge(I){if(this.step&&I.step&&!I.selection){let T=I.step.merge(this.step);if(T)return new Z(T.getMap().invert(),T,this.selection)}}}class st{constructor(I,T,k,F){this.done=I,this.undone=T,this.prevRanges=k,this.prevTime=F}}const _t=20;function w(x){let I=[];return x.forEach((T,k,F,ut)=>I.push(F,ut)),I}function N(x,I){if(!x)return null;let T=[];for(let k=0;k<x.length;k+=2){let F=I.map(x[k],1),ut=I.map(x[k+1],-1);F<=ut&&T.push(F,ut)}return T}function z(x,I,T,k){let F=nt(I),ut=dt.get(I).spec.config,pt=(k?x.undone:x.done).popEvent(I,F);if(!pt)return;let Tt=pt.selection.resolve(pt.transform.doc),Pt=(k?x.done:x.undone).addTransform(pt.transform,I.selection.getBookmark(),ut,F),kt=new st(k?Pt:pt.remaining,k?pt.remaining:Pt,null,0);T(pt.transform.setSelection(Tt).setMeta(dt,{redo:k,historyState:kt}).scrollIntoView())}let L=!1,Y=null;function nt(x){let I=x.plugins;if(Y!=I){L=!1,Y=I;for(let T=0;T<I.length;T++)if(I[T].spec.historyPreserveItems){L=!0;break}}return L}const dt=new j.H$("history"),ct=new j.H$("closeHistory");function Et(x={}){return new j.Sy({key:dt,state:{init:()=>new st(X.empty,X.empty,null,0),apply:(I,T,k)=>function(x,I,T,k){let ut,F=T.getMeta(dt);if(F)return F.historyState;T.getMeta(ct)&&(x=new st(x.done,x.undone,null,0));let pt=T.getMeta("appendedTransaction");if(0==T.steps.length)return x;if(pt&&pt.getMeta(dt))return pt.getMeta(dt).redo?new st(x.done.addTransform(T,void 0,k,nt(I)),x.undone,w(T.mapping.maps[T.steps.length-1]),x.prevTime):new st(x.done,x.undone.addTransform(T,void 0,k,nt(I)),null,x.prevTime);if(!1===T.getMeta("addToHistory")||pt&&!1===pt.getMeta("addToHistory"))return(ut=T.getMeta("rebased"))?new st(x.done.rebased(T,ut),x.undone.rebased(T,ut),N(x.prevRanges,T.mapping),x.prevTime):new st(x.done.addMaps(T.mapping.maps),x.undone.addMaps(T.mapping.maps),N(x.prevRanges,T.mapping),x.prevTime);{let Tt=0==x.prevTime||!pt&&(x.prevTime<(T.time||0)-k.newGroupDelay||!function(x,I){if(!I)return!1;if(!x.docChanged)return!0;let T=!1;return x.mapping.maps[0].forEach((k,F)=>{for(let ut=0;ut<I.length;ut+=2)k<=I[ut+1]&&F>=I[ut]&&(T=!0)}),T}(T,x.prevRanges)),Pt=pt?N(x.prevRanges,T.mapping):w(T.mapping.maps[T.steps.length-1]);return new st(x.done.addTransform(T,Tt?I.selection.getBookmark():void 0,k,nt(I)),X.empty,Pt,T.time)}}(T,k,I,x)},config:x={depth:x.depth||100,newGroupDelay:x.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(I,T){let k=T.inputType,F="historyUndo"==k?Mt:"historyRedo"==k?ht:null;return!!F&&(T.preventDefault(),F(I.state,I.dispatch))}}}})}const Mt=(x,I)=>{let T=dt.getState(x);return!(!T||0==T.done.eventCount||(I&&z(T,x,I,!1),0))},ht=(x,I)=>{let T=dt.getState(x);return!(!T||0==T.undone.eventCount||(I&&z(T,x,I,!0),0))},J=m.Extension.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:x,dispatch:I})=>Mt(x,I),redo:()=>({state:x,dispatch:I})=>ht(x,I)}),addProseMirrorPlugins(){return[Et(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}})},36129:(yt,tt,a)=>{a.d(tt,{b:()=>R,Z:()=>R});var m=a(40256),r=a(62463);const R=m.Node.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:_}){return["hr",(0,m.mergeAttributes)(this.options.HTMLAttributes,_)]},addCommands(){return{setHorizontalRule:()=>({chain:_})=>_().insertContent({type:this.name}).command(({tr:f,dispatch:U})=>{var v;if(U){const{$to:G}=f.selection,j=G.end();if(G.nodeAfter)f.setSelection(r.Bs.create(f.doc,G.pos));else{const q=null===(v=G.parent.type.contentMatch.defaultType)||void 0===v?void 0:v.create();q&&(f.insert(j,q),f.setSelection(r.Bs.create(f.doc,j)))}f.scrollIntoView()}return!0}).run()}},addInputRules(){return[(0,m.nodeInputRule)({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}})},30440:(yt,tt,a)=>{a.d(tt,{Tx:()=>U,ZP:()=>U});var m=a(40256);const r=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,R=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,_=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,f=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,U=m.Mark.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:v=>"normal"!==v.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:v}){return["em",(0,m.mergeAttributes)(this.options.HTMLAttributes,v),0]},addCommands(){return{setItalic:()=>({commands:v})=>v.setMark(this.name),toggleItalic:()=>({commands:v})=>v.toggleMark(this.name),unsetItalic:()=>({commands:v})=>v.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,m.markInputRule)({find:r,type:this.type}),(0,m.markInputRule)({find:_,type:this.type})]},addPasteRules(){return[(0,m.markPasteRule)({find:R,type:this.type}),(0,m.markPasteRule)({find:f,type:this.type})]}})},82861:(yt,tt,a)=>{a.d(tt,{H:()=>r,Z:()=>r});var m=a(40256);const r=m.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:R}){return["li",(0,m.mergeAttributes)(this.options.HTMLAttributes,R),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}})},94493:(yt,tt,a)=>{a.d(tt,{GS:()=>R,ZP:()=>R});var m=a(40256);const r=/^(\d+)\.\s$/,R=m.Node.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:_=>_.hasAttribute("start")?parseInt(_.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:_}){const v=_,{start:f}=v,U=Ko(v,["start"]);return 1===f?["ol",(0,m.mergeAttributes)(this.options.HTMLAttributes,U),0]:["ol",(0,m.mergeAttributes)(this.options.HTMLAttributes,_),0]},addCommands(){return{toggleOrderedList:()=>({commands:_})=>_.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[(0,m.wrappingInputRule)({find:r,type:this.type,getAttributes:_=>({start:+_[1]}),joinPredicate:(_,f)=>f.childCount+f.attrs.start===+_[1]})]}})},70670:(yt,tt,a)=>{a.d(tt,{n:()=>r,Z:()=>r});var m=a(40256);const r=m.Node.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:R}){return["p",(0,m.mergeAttributes)(this.options.HTMLAttributes,R),0]},addCommands(){return{setParagraph:()=>({commands:R})=>R.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}})},56793:(yt,tt,a)=>{a.d(tt,{Re:()=>_,ZP:()=>_});var m=a(40256);const r=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,R=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,_=m.Mark.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:f=>!!f.includes("line-through")&&{}}],renderHTML({HTMLAttributes:f}){return["s",(0,m.mergeAttributes)(this.options.HTMLAttributes,f),0]},addCommands(){return{setStrike:()=>({commands:f})=>f.setMark(this.name),toggleStrike:()=>({commands:f})=>f.toggleMark(this.name),unsetStrike:()=>({commands:f})=>f.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,m.markInputRule)({find:r,type:this.type})]},addPasteRules(){return[(0,m.markPasteRule)({find:R,type:this.type})]}})},74634:(yt,tt,a)=>{a.r(tt),a.d(tt,{TextStyle:()=>r,default:()=>r});var m=a(40256);const r=m.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:R=>!!R.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:R}){return["span",(0,m.mergeAttributes)(this.options.HTMLAttributes,R),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:R,commands:_})=>{const f=(0,m.getMarkAttributes)(R,this.type);return!!Object.entries(f).some(([,v])=>!!v)||_.unsetMark(this.name)}}}})},28343:(yt,tt,a)=>{a.d(tt,{x:()=>r,Z:()=>r});const r=a(40256).Node.create({name:"text",group:"inline"})},97019:(yt,tt,a)=>{a.d(tt,{h:()=>dt});var m=a(64762),r=a(74788),R=a(40287),_=a(50170),f=a(1414),U=a(10200),v=a(33250),G=a(68874),j=a(23738),q=a(52219),X=a(12057),et=a(65009),Z=a(10383),st=a(20933),_t=a(35065),ft=a(63060),at=a(62733),w=a(48214),N=a(41120),z=a(91030);function L(ct,Et){if(1&ct&&(r.\u0275\u0275elementStart(0,"button",6),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&ct){const Mt=Et.$implicit;r.\u0275\u0275property("value",Mt),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",Mt," ")}}function Y(ct,Et){if(1&ct&&(r.\u0275\u0275elementStart(0,"tui-data-list"),r.\u0275\u0275template(1,L,2,2,"button",5),r.\u0275\u0275elementEnd()),2&ct){const Mt=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",Mt.modes)}}function nt(ct,Et){if(1&ct){const Mt=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-primitive-textfield",7),r.\u0275\u0275listener("valueChange",function(ot){return r.\u0275\u0275restoreView(Mt),r.\u0275\u0275nextContext().onHexChange(ot)}),r.\u0275\u0275element(1,"input",8),r.\u0275\u0275elementEnd()}if(2&ct){const Mt=r.\u0275\u0275nextContext();r.\u0275\u0275property("textMask",Mt.hexMask)("tuiTextfieldLabelOutside",!0)("value",Mt.hex)}}function it(ct,Et){if(1&ct){const Mt=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-input-count",9),r.\u0275\u0275listener("ngModelChange",function(ot){r.\u0275\u0275restoreView(Mt);const O=r.\u0275\u0275nextContext();return O.onRgbChange(ot,O.color[1],O.color[2],O.color[3])}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(1,"tui-input-count",9),r.\u0275\u0275listener("ngModelChange",function(ot){r.\u0275\u0275restoreView(Mt);const O=r.\u0275\u0275nextContext();return O.onRgbChange(O.color[0],ot,O.color[2],O.color[3])}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"tui-input-count",9),r.\u0275\u0275listener("ngModelChange",function(ot){r.\u0275\u0275restoreView(Mt);const O=r.\u0275\u0275nextContext();return O.onRgbChange(O.color[0],O.color[1],ot,O.color[3])}),r.\u0275\u0275elementEnd()}if(2&ct){const Mt=r.\u0275\u0275nextContext();r.\u0275\u0275property("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Mt.color[0]),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Mt.color[1]),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Mt.color[2])}}class dt{constructor(){this.color=[0,0,0,1],this.colorChange=new r.EventEmitter,this.hexMask={mask:({length:Et})=>Array.from({length:Et},()=>/\d|[a-f]|[A-F]/),guide:!1},this.modes=["HEX","RGB"],this.mode=this.modes[0]}get isHex(){return this.mode===this.modes[0]}get hex(){return(0,R.WSX)(this.color[0],this.color[1],this.color[2]).replace("#","")}get opacity(){return Math.round(100*this.color[3])}onHexChange(Et){if(6!==Et.length)return;const Mt=(0,R.ROF)(Et);this.updateColor([Mt[0],Mt[1],Mt[2],this.color[3]])}onRgbChange(...Et){this.updateColor(Et)}updateColor(Et){this.color=Et,this.colorChange.emit(Et)}}dt.\u0275fac=function(Et){return new(Et||dt)},dt.\u0275cmp=r.\u0275\u0275defineComponent({type:dt,selectors:[["tui-color-edit"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:6,vars:8,consts:[["tuiTextfieldSize","m","tuiDropdownAlign","left","tuiDropdownLimitWidth","min",1,"t-select","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","ngModel","ngModelChange"],[4,"tuiDataList"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange",4,"ngIf","ngIfElse"],["rgb",""],["postfix","%","tuiTextfieldSize","m",1,"t-opacity","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"],["size","xs","tuiOption","",3,"value",4,"ngFor","ngForOf"],["size","xs","tuiOption","",3,"value"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange"],["tuiTextfield","","maxlength","6"],["tuiTextfieldSize","m",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"]],template:function(Et,Mt){if(1&Et&&(r.\u0275\u0275elementStart(0,"tui-select",0),r.\u0275\u0275listener("ngModelChange",function(ot){return Mt.mode=ot}),r.\u0275\u0275template(1,Y,2,1,"tui-data-list",1),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(2,nt,2,3,"tui-primitive-textfield",2),r.\u0275\u0275template(3,it,3,12,"ng-template",null,3,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementStart(5,"tui-input-count",4),r.\u0275\u0275listener("ngModelChange",function(ot){return Mt.onRgbChange(Mt.color[0],Mt.color[1],Mt.color[2],ot/100)}),r.\u0275\u0275elementEnd()),2&Et){const ht=r.\u0275\u0275reference(4);r.\u0275\u0275property("tuiTextfieldLabelOutside",!0)("ngModel",Mt.mode),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",Mt.isHex)("ngIfElse",ht),r.\u0275\u0275advance(3),r.\u0275\u0275property("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",100)("ngModel",Mt.opacity)}},directives:[_.u,f.O,U.s,v.Ek,G.x,j.NgControlStatus,j.NgModel,q.g,X.O5,et.E,Z.a,st.q,X.sg,_t.v,ft.y,at.B,w.n,N.hd,z.M],styles:["[_nghost-%COMP%]{display:flex}.t-select[_ngcontent-%COMP%]{width:4.875rem}.t-opacity[_ngcontent-%COMP%]{width:4.275rem}"],changeDetection:0}),(0,m.gn)([(0,R.THR)()],dt.prototype,"color",void 0)},49289:(yt,tt,a)=>{a.d(tt,{$:()=>v});var m=a(64762),r=a(74788),R=a(91211),_=a(40287),f=a(71424),U=a(65720);class v{constructor(j){this.sanitizer=j,this.colorChange=new r.EventEmitter,this.point=[0,1],this.hue=0,this.opacity=1}set color(j){if(this.currentColor.every((Z,st)=>Z===j[st])&&j[3]===this.opacity)return;const[q,X,et]=(0,_.bDt)(j[0],j[1],j[2]);this.opacity=j[3],this.hue=q/360,this.point=[X,1-et/255]}get currentColor(){return this.getCurrentColor(this.hue,this.point)}get base(){return`rgb(${(0,_.qZG)(360*this.hue,1,255)})`}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(`linear-gradient(to right, rgba(${this.currentColor.join(",")}, 0), rgb(${this.currentColor.join(",")}))`)}onPointChange(j){this.point=j,this.updateColor()}onHueChange(j){this.hue=j,this.updateColor()}onOpacityChange(j){this.opacity=(0,_.FGw)(j,2),this.updateColor()}getCurrentColor(j,q){return(0,_.qZG)(360*j,q[0],255*(1-q[1]))}updateColor(){this.colorChange.emit([...this.currentColor,this.opacity])}}v.\u0275fac=function(j){return new(j||v)(r.\u0275\u0275directiveInject(R.DomSanitizer))},v.\u0275cmp=r.\u0275\u0275defineComponent({type:v,selectors:[["tui-color-picker"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:5,vars:7,consts:[[1,"t-flat",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_hue"],[1,"t-hue",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_opacity"],[1,"t-opacity",3,"value","valueChange"]],template:function(j,q){1&j&&(r.\u0275\u0275elementStart(0,"tui-flat-picker",0),r.\u0275\u0275listener("valueChange",function(et){return q.onPointChange(et)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(1,"div",1),r.\u0275\u0275elementStart(2,"tui-linear-picker",2),r.\u0275\u0275listener("valueChange",function(et){return q.onHueChange(et)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",3),r.\u0275\u0275elementStart(4,"tui-linear-picker",4),r.\u0275\u0275listener("valueChange",function(et){return q.onOpacityChange(et)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&j&&(r.\u0275\u0275styleProp("background-color",q.base),r.\u0275\u0275property("value",q.point),r.\u0275\u0275advance(2),r.\u0275\u0275property("value",q.hue),r.\u0275\u0275advance(1),r.\u0275\u0275styleProp("background",q.gradient),r.\u0275\u0275advance(1),r.\u0275\u0275property("value",q.opacity))},directives:[f.J,U.P],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block}.t-flat[_ngcontent-%COMP%]{height:14rem;background:linear-gradient(rgba(0,0,0,0),#000000),linear-gradient(to right,#ffffff,rgba(255,255,255,0));margin-bottom:.25rem;overflow:hidden}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1rem 1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper_hue[_ngcontent-%COMP%]{background:#ff0000}.t-wrapper_opacity[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hue[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff0000,#ffff00,#00ff00,#00ffff,#0000ff,#ff00ff,#ff0000);border-radius:inherit;margin:0 .5rem}.t-opacity[_ngcontent-%COMP%]{border-radius:inherit;margin:0 .5rem}'],changeDetection:0}),(0,m.gn)([(0,_.THR)()],v.prototype,"color",null),(0,m.gn)([_.UMq],v.prototype,"getCurrentColor",null)},23999:(yt,tt,a)=>{a.d(tt,{s:()=>I});var m=a(64762),r=a(74788),R=a(91211),_=a(62842),f=a(66835),U=a(40287),v=a(62939),G=a(76189),j=a(12057),q=a(49289),X=a(34880),et=a(20933),Z=a(35065),st=a(49472),_t=a(67446),ft=a(29070),at=a(54255),w=a(15491),N=a(219),z=a(97019),L=a(28144),Y=a(5451);function nt(T,k){if(1&T&&r.\u0275\u0275element(0,"tui-svg",9),2&T){r.\u0275\u0275nextContext();const F=r.\u0275\u0275reference(1);r.\u0275\u0275classProp("t-arrow_rotated",F.open)}}function it(T,k){1&T&&r.\u0275\u0275element(0,"tui-svg",14)}function dt(T,k){if(1&T){const F=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",12),r.\u0275\u0275listener("keydown.enter.prevent",function(){const Tt=r.\u0275\u0275restoreView(F).$implicit,Pt=r.\u0275\u0275nextContext(2),kt=r.\u0275\u0275reference(1);return Pt.onModeSelect(Tt,kt)})("keydown.space.prevent",function(){const Tt=r.\u0275\u0275restoreView(F).$implicit,Pt=r.\u0275\u0275nextContext(2),kt=r.\u0275\u0275reference(1);return Pt.onModeSelect(Tt,kt)})("click",function(){const Tt=r.\u0275\u0275restoreView(F).$implicit,Pt=r.\u0275\u0275nextContext(2),kt=r.\u0275\u0275reference(1);return Pt.onModeSelect(Tt,kt)}),r.\u0275\u0275text(1),r.\u0275\u0275template(2,it,1,0,"tui-svg",13),r.\u0275\u0275elementEnd()}if(2&T){const F=k.$implicit,ut=r.\u0275\u0275nextContext(2);r.\u0275\u0275attribute("aria-checked",ut.isModeActive(F)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",F," "),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",ut.isModeActive(F))}}function ct(T,k){if(1&T&&(r.\u0275\u0275elementStart(0,"tui-data-list",10),r.\u0275\u0275template(1,dt,3,3,"button",11),r.\u0275\u0275elementEnd()),2&T){const F=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",F.modes)}}function Et(T,k){if(1&T){const F=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",20),r.\u0275\u0275listener("click",function(){const Tt=r.\u0275\u0275restoreView(F).$implicit;return r.\u0275\u0275nextContext(2).onDirectionChange(Tt)}),r.\u0275\u0275elementEnd()}if(2&T){const F=k.$implicit,ut=r.\u0275\u0275nextContext(2);r.\u0275\u0275classProp("t-direction_active",ut.isDirectionActive(F)),r.\u0275\u0275property("icon",ut.getIcon(F))("tuiHint",F)("tuiHintDescribe","")}}function Mt(T,k){if(1&T){const F=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275element(1,"hr",15),r.\u0275\u0275elementStart(2,"div",16),r.\u0275\u0275elementStart(3,"tui-linear-multi-picker",17),r.\u0275\u0275listener("valueChange",function(pt){return r.\u0275\u0275restoreView(F),r.\u0275\u0275nextContext().onStopsChange(pt)})("indexChange",function(pt){return r.\u0275\u0275restoreView(F),r.\u0275\u0275nextContext().onIndexChange(pt)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",18),r.\u0275\u0275template(5,Et,1,5,"button",19),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()}if(2&T){const F=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275styleProp("background",F.gradient),r.\u0275\u0275advance(1),r.\u0275\u0275property("value",F.stopsKeys),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",F.buttons)}}function ht(T,k){if(1&T){const F=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-color-edit",21),r.\u0275\u0275listener("colorChange",function(pt){return r.\u0275\u0275restoreView(F),r.\u0275\u0275nextContext().onColorChange(pt)}),r.\u0275\u0275elementEnd()}if(2&T){const F=r.\u0275\u0275nextContext();r.\u0275\u0275property("color",F.color)}}function ot(T,k){if(1&T){const F=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-palette",22),r.\u0275\u0275listener("selectedColor",function(pt){return r.\u0275\u0275restoreView(F),r.\u0275\u0275nextContext().onPalettePick(pt)}),r.\u0275\u0275elementEnd()}if(2&T){const F=r.\u0275\u0275nextContext();r.\u0275\u0275property("colors",F.palette)}}const O=[0,0,0,0],J=[[0,[0,0,0,1]],[1,[255,255,255,1]]],x={"to top right":"tuiIconArrowUpRight","to right":"tuiIconArrowRight","to bottom right":"tuiIconArrowDownRight","to bottom":"tuiIconArrowDown","to bottom left":"tuiIconArrowDownLeft","to left":"tuiIconArrowLeft","to top left":"tuiIconArrowUpLeft","to top":"tuiIconArrowUp"};class I{constructor(k,F){this.sanitizer=k,this.modes=F,this.stops=new Map(J),this.currentStop=0,this.direction="to bottom",this.colors=new Map,this.colorChange=new r.EventEmitter,this.color=[0,0,0,1],this.currentMode=this.modes[0],this.buttons=["to top right","to right","to bottom right","to bottom","to bottom left","to left","to top left","to top"]}set colorSetter(k){this.parse(k)}get palette(){return this.filterPalette(this.colors,this.isGradient)}get stopsKeys(){return this.getStopsKeys(this.stops)}get currentColor(){return this.isGradient?this.getStop(this.currentStop):this.color}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(this.getGradient("to right"))}get isGradient(){return this.currentMode===this.modes[1]}getIcon(k){return x[k]}isModeActive(k){return this.currentMode===k}isDirectionActive(k){return this.direction===k}onPalettePick(k){this.updateColor(k)}onDirectionChange(k){this.direction=k,this.updateColor(this.getGradient(k))}onModeSelect(k,F){this.currentMode=k,F.open=!1,this.updateColor(k===this.modes[0]?`rgba(${this.color.join(", ")})`:this.getGradient(this.direction))}onIndexChange(k){this.currentStop=this.stopsKeys[k]}onColorChange(k){this.isGradient?(this.stops.set(this.currentStop,k),this.updateColor(this.getGradient(this.direction))):this.updateColor(`rgba(${k.join(", ")})`)}onStopsChange(k){const F=this.stopsKeys.find(pt=>!k.includes(pt)),ut=k.find(pt=>!this.stopsKeys.includes(pt));void 0===F&&void 0!==ut&&this.addStop(ut),void 0!==F&&void 0===ut&&this.removeStop(F),void 0!==F&&void 0!==ut&&this.replaceStop(F,ut),this.updateColor(this.getGradient(this.direction))}getStopsKeys(k){return Array.from(k.keys())}filterPalette(k,F){const ut=new Map(k);return ut.forEach((pt,Tt)=>{(pt.startsWith("linear-gradient")&&!F||!pt.startsWith("linear-gradient")&&F)&&ut.delete(Tt)}),ut}updateColor(k){this.colorChange.emit(k)}getGradient(k){return`linear-gradient(${k}, ${[...this.stopsKeys].sort().map(F=>`rgba(${this.getStop(F).join(", ")}) ${100*F}%`).join(", ")})`}getStop(k){return this.stops.get(k)||O}addStop(k){const F=this.stopsKeys.reduce((ut,pt)=>Math.abs(pt-k)<Math.abs(ut-k)?pt:ut,this.stopsKeys[0]);this.stops.set(k,this.getStop(F)),this.stops=new Map(this.stops),this.currentStop=k}removeStop(k){this.stops.delete(k),this.stops=new Map(this.stops),this.currentStop=this.stopsKeys[0]}replaceStop(k,F){const ut=this.getStop(k);this.currentStop=F,this.stops=new Map(this.stopsKeys.map(pt=>pt===k?[F,ut]:[pt,this.getStop(pt)]))}parse(k){k.startsWith("linear-gradient")?this.parseGradient(k):this.parseColor(k)}parseGradient(k){if(k===this.getGradient(this.direction))return;const F=(0,f._N)((0,f.U5)(k));this.currentMode=this.modes[1],this.direction=F.side,this.currentStop=0,this.stops=new Map(F.stops.length?F.stops.map(({color:ut,position:pt})=>[parseFloat(pt)/100,(0,U.MpC)(ut)]):J)}parseColor(k){this.currentMode=this.modes[0],this.currentStop=0,this.color=(0,U.MpC)(k)}}I.\u0275fac=function(k){return new(k||I)(r.\u0275\u0275directiveInject(R.DomSanitizer),r.\u0275\u0275directiveInject(_.dj))},I.\u0275cmp=r.\u0275\u0275defineComponent({type:I,selectors:[["tui-color-selector"]],inputs:{colors:"colors",colorSetter:["color","colorSetter"]},outputs:{colorChange:"colorChange"},decls:12,vars:7,consts:[[1,"t-select",3,"content"],["dropdown",""],["tuiButton","","appearance","","size","s","type","button",3,"iconRight"],["arrow",""],["menu",""],[4,"ngIf"],[3,"color","colorChange"],["tuiGroup","","class","t-edit",3,"color","colorChange",4,"ngIf"],["class","t-palette",3,"colors","selectedColor",4,"ngIf"],["src","tuiIconChevronDown",1,"t-arrow"],["role","menu",1,"t-menu"],["tuiOption","","size","xs","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","size","xs","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click"],["src","tuiIconCheck","class","t-checkmark",4,"ngIf"],["src","tuiIconCheck",1,"t-checkmark"],[1,"t-hr"],[1,"t-wrapper"],[1,"t-gradient",3,"value","valueChange","indexChange"],[1,"t-buttons"],["tuiIconButton","","type","button","size","xs","appearance","","class","t-direction",3,"t-direction_active","icon","tuiHint","tuiHintDescribe","click",4,"ngFor","ngForOf"],["tuiIconButton","","type","button","size","xs","appearance","",1,"t-direction",3,"icon","tuiHint","tuiHintDescribe","click"],["tuiGroup","",1,"t-edit",3,"color","colorChange"],[1,"t-palette",3,"colors","selectedColor"]],template:function(k,F){if(1&k&&(r.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0,1),r.\u0275\u0275elementStart(2,"button",2),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(4,nt,1,2,"ng-template",null,3,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(6,ct,2,1,"ng-template",null,4,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(8,Mt,6,4,"ng-container",5),r.\u0275\u0275elementStart(9,"tui-color-picker",6),r.\u0275\u0275listener("colorChange",function(pt){return F.onColorChange(pt)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(10,ht,1,1,"tui-color-edit",7),r.\u0275\u0275template(11,ot,1,1,"tui-palette",8)),2&k){const ut=r.\u0275\u0275reference(5),pt=r.\u0275\u0275reference(7);r.\u0275\u0275property("content",pt),r.\u0275\u0275advance(2),r.\u0275\u0275property("iconRight",ut),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",F.currentMode," "),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngIf",F.isGradient),r.\u0275\u0275advance(1),r.\u0275\u0275property("color",F.currentColor),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!F.isGradient),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",F.palette.size)}},directives:[v.o,G.v,j.O5,q.$,X.P,et.q,j.sg,Z.v,st.e,_t.D,ft.x,at.t,w.D,N.$,z.h,L.g,Y.R],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block;width:21.25rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hr[_ngcontent-%COMP%]{height:1px;margin:0 0 0 -1px;border:none;background:var(--tui-base-03)}.t-gradient[_ngcontent-%COMP%]{margin:0 .5rem;border-radius:inherit}.t-select[_ngcontent-%COMP%]{margin:.75rem .5rem}.t-arrow[_ngcontent-%COMP%]{transition-property:transform;transition-duration:.3s;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-arrow_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.t-menu[_ngcontent-%COMP%]{width:11.25rem}.t-checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}.t-buttons[_ngcontent-%COMP%]{display:flex;padding:0 .75rem 1.25rem}.t-direction[_ngcontent-%COMP%]{color:var(--tui-text-02);margin:0 .375rem}.t-direction[_ngcontent-%COMP%]:hover, .t-direction_active[_ngcontent-%COMP%]{color:var(--tui-text-01);background:var(--tui-secondary-hover)}.t-edit[_ngcontent-%COMP%]{margin:1.25rem}.t-palette[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:inset 0 1px var(--tui-base-03)}'],changeDetection:0}),(0,m.gn)([(0,U.THR)()],I.prototype,"colors",void 0),(0,m.gn)([(0,U.NH)()],I.prototype,"colorSetter",null),(0,m.gn)([U.UMq],I.prototype,"getStopsKeys",null),(0,m.gn)([U.UMq],I.prototype,"filterPalette",null)},71424:(yt,tt,a)=>{a.d(tt,{J:()=>f});var m=a(64762),r=a(74788),R=a(62141),_=a(40287);class f{constructor(v){this.value=[0,0],this.valueChange=new r.EventEmitter,v.subscribe(G=>{this.value=G,this.valueChange.emit([G[0],G[1]])})}get left(){return 100*this.value[0]}get top(){return 100*this.value[1]}}f.\u0275fac=function(v){return new(v||f)(r.\u0275\u0275directiveInject(R.i))},f.\u0275cmp=r.\u0275\u0275defineComponent({type:f,selectors:[["tui-flat-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[r.\u0275\u0275ProvidersFeature([_.a31,R.i])],decls:1,vars:4,consts:[[1,"t-circle"]],template:function(v,G){1&v&&r.\u0275\u0275element(0,"div",0),2&v&&r.\u0275\u0275styleProp("left",G.left,"%")("top",G.top,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:-.5rem 0 0 -.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,m.gn)([(0,_.THR)()],f.prototype,"value",void 0)},27050:(yt,tt,a)=>{a.d(tt,{H9:()=>et,wl:()=>at,VM:()=>ft}),a(97019);var r=a(12057),R=a(23738),_=a(66187),f=a(91068),U=a(41120),v=a(74788);let G=(()=>{class Y{}return Y.\u0275fac=function(it){return new(it||Y)},Y.\u0275mod=v.\u0275\u0275defineNgModule({type:Y}),Y.\u0275inj=v.\u0275\u0275defineInjector({imports:[[r.ez,R.FormsModule,U.QA,f.SCC,f.Jyo,_.KWI,_.cnw,_.dpK,f.$HZ,_.pcV]]}),Y})();a(49289);let q=(()=>{class Y{}return Y.\u0275fac=function(it){return new(it||Y)},Y.\u0275mod=v.\u0275\u0275defineNgModule({type:Y}),Y.\u0275inj=v.\u0275\u0275defineInjector({imports:[[r.ez]]}),Y})(),X=(()=>{class Y{}return Y.\u0275fac=function(it){return new(it||Y)},Y.\u0275mod=v.\u0275\u0275defineNgModule({type:Y}),Y.\u0275inj=v.\u0275\u0275defineInjector({imports:[[r.ez]]}),Y})(),et=(()=>{class Y{}return Y.\u0275fac=function(it){return new(it||Y)},Y.\u0275mod=v.\u0275\u0275defineNgModule({type:Y}),Y.\u0275inj=v.\u0275\u0275defineInjector({imports:[[r.ez,q,X]]}),Y})();a(23999);var st=a(40287);let _t=(()=>{class Y{}return Y.\u0275fac=function(it){return new(it||Y)},Y.\u0275mod=v.\u0275\u0275defineNgModule({type:Y}),Y.\u0275inj=v.\u0275\u0275defineInjector({imports:[[r.ez]]}),Y})(),ft=(()=>{class Y{}return Y.\u0275fac=function(it){return new(it||Y)},Y.\u0275mod=v.\u0275\u0275defineNgModule({type:Y}),Y.\u0275inj=v.\u0275\u0275defineInjector({imports:[[r.ez,_.goS]]}),Y})(),at=(()=>{class Y{}return Y.\u0275fac=function(it){return new(it||Y)},Y.\u0275mod=v.\u0275\u0275defineNgModule({type:Y}),Y.\u0275inj=v.\u0275\u0275defineInjector({imports:[[r.ez,_.fNO,_.jhF,et,_t,_.goS,_.EIu,_.pcV,st.Ah6,G,_.n6B,ft]]}),Y})();a(71424),a(49472),a(65720),a(5451)},49472:(yt,tt,a)=>{a.d(tt,{e:()=>v});var m=a(64762),r=a(74788),R=a(62141),_=a(40287),f=a(12057);function U(G,j){if(1&G){const q=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",1),r.\u0275\u0275listener("mousedown",function(){const Z=r.\u0275\u0275restoreView(q).index;return r.\u0275\u0275nextContext().onMouseDown(Z)})("dblclick",function(){const Z=r.\u0275\u0275restoreView(q).index;return r.\u0275\u0275nextContext().onClick(Z)}),r.\u0275\u0275elementEnd()}2&G&&r.\u0275\u0275styleProp("left",100*j.$implicit,"%")}class v{constructor(j){this.value=[0,1],this.valueChange=new r.EventEmitter,this.indexChange=new r.EventEmitter,this.index=NaN,j.subscribe(([q])=>{this.onPicker(q)})}onMouseUp(){this.index=NaN}onMouseDown(j){this.updateIndex(j)}onClick(j){this.value.length>2&&this.updateValue(this.value.filter((q,X)=>X!==j))}onPicker(j){isNaN(this.index)&&(this.updateIndex(this.value.length),this.value=[...this.value,0]),!this.value.some((q,X)=>q===j&&X!==this.index)&&this.updateValue(this.value.map((q,X)=>X===this.index?j:q))}updateIndex(j){this.index=j,this.indexChange.emit(j)}updateValue(j){this.value=j,this.valueChange.emit(j)}}v.\u0275fac=function(j){return new(j||v)(r.\u0275\u0275directiveInject(R.i))},v.\u0275cmp=r.\u0275\u0275defineComponent({type:v,selectors:[["tui-linear-multi-picker"]],hostBindings:function(j,q){1&j&&r.\u0275\u0275listener("mouseup",function(){return q.onMouseUp()},!1,r.\u0275\u0275resolveDocument)},inputs:{value:"value"},outputs:{valueChange:"valueChange",indexChange:"indexChange"},features:[r.\u0275\u0275ProvidersFeature([_.a31,R.i])],decls:1,vars:1,consts:[["class","t-circle",3,"left","mousedown","dblclick",4,"ngFor","ngForOf"],[1,"t-circle",3,"mousedown","dblclick"]],template:function(j,q){1&j&&r.\u0275\u0275template(0,U,1,2,"div",0),2&j&&r.\u0275\u0275property("ngForOf",q.value)},directives:[f.sg],styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,m.gn)([(0,_.THR)()],v.prototype,"value",void 0)},65720:(yt,tt,a)=>{a.d(tt,{P:()=>f});var m=a(64762),r=a(74788),R=a(62141),_=a(40287);class f{constructor(v){this.value=0,this.valueChange=new r.EventEmitter,v.subscribe(([G])=>{this.value=G,this.valueChange.emit(G)})}get left(){return 100*this.value}}f.\u0275fac=function(v){return new(v||f)(r.\u0275\u0275directiveInject(R.i))},f.\u0275cmp=r.\u0275\u0275defineComponent({type:f,selectors:[["tui-linear-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[r.\u0275\u0275ProvidersFeature([_.a31,R.i])],decls:1,vars:2,consts:[[1,"t-circle"]],template:function(v,G){1&v&&r.\u0275\u0275element(0,"div",0),2&v&&r.\u0275\u0275styleProp("left",G.left,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,m.gn)([(0,_.THR)()],f.prototype,"value",void 0)},5451:(yt,tt,a)=>{a.d(tt,{R:()=>X});var m=a(64762),r=a(74788),R=a(40287),_=a(12057),f=a(67446),U=a(29070),v=a(54255),G=a(15491),j=a(219);function q(et,Z){if(1&et){const st=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",1),r.\u0275\u0275listener("click",function(){const at=r.\u0275\u0275restoreView(st).$implicit;return r.\u0275\u0275nextContext().selectedColor.emit(at.value)}),r.\u0275\u0275elementEnd()}if(2&et){const st=Z.$implicit;r.\u0275\u0275styleProp("background",st.value),r.\u0275\u0275property("tuiHint",st.key)("tuiHintDescribe",st.key)("id",st.key)}}class X{constructor(){this.colors=new Map,this.selectedColor=new r.EventEmitter}}X.\u0275fac=function(Z){return new(Z||X)},X.\u0275cmp=r.\u0275\u0275defineComponent({type:X,selectors:[["tui-palette"]],inputs:{colors:"colors"},outputs:{selectedColor:"selectedColor"},decls:2,vars:3,consts:[["type","button","class","t-button",3,"background","tuiHint","tuiHintDescribe","id","click",4,"ngFor","ngForOf"],["type","button",1,"t-button",3,"tuiHint","tuiHintDescribe","id","click"]],template:function(Z,st){1&Z&&(r.\u0275\u0275template(0,q,1,5,"button",0),r.\u0275\u0275pipe(1,"keyvalue")),2&Z&&r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(1,1,st.colors))},directives:[_.sg,f.D,U.x,v.t,G.D,j.$],pipes:[_.Nd],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;padding:.875rem}.t-button[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;width:1.5625rem;height:1.5625rem;box-sizing:border-box;margin:.375rem;border-radius:var(--tui-radius-m);border:1px solid rgba(0,0,0,.08)}"],changeDetection:0}),(0,m.gn)([(0,R.THR)()],X.prototype,"colors",void 0)},45050:(yt,tt,a)=>{a.d(tt,{l:()=>_t});var m=a(12057),r=a(74788),R=a(40287),_=a(87623),f=a(20986),U=a(23738),v=a(34880),G=a(76189),j=a(66596);function q(ft,at){if(1&ft){const w=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"label",2),r.\u0275\u0275text(2," URL "),r.\u0275\u0275elementStart(3,"span",3),r.\u0275\u0275text(4),r.\u0275\u0275elementStart(5,"tui-input-inline",4),r.\u0275\u0275listener("ngModelChange",function(z){return r.\u0275\u0275restoreView(w),r.\u0275\u0275nextContext().onChange(z)})("keydown.prevent.enter",function(){return r.\u0275\u0275restoreView(w),r.\u0275\u0275nextContext().onSave()})("keydown.backspace",function(){return r.\u0275\u0275restoreView(w),r.\u0275\u0275nextContext().onBackspace()}),r.\u0275\u0275text(6," example.com "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"tui-svg",5),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(w),r.\u0275\u0275nextContext().onClear()}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"button",6),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(w),r.\u0275\u0275nextContext().onSave()}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()}if(2&ft){const w=r.\u0275\u0275nextContext();r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate1(" ",w.prefix," "),r.\u0275\u0275advance(1),r.\u0275\u0275classProp("t-input_filled",w.hasUrl),r.\u0275\u0275property("ngModel",w.url),r.\u0275\u0275advance(2),r.\u0275\u0275classProp("t-cleaner_hidden",!w.hasUrl)}}function X(ft,at){if(1&ft){const w=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",7),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"button",8),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(w),r.\u0275\u0275nextContext().onEdit()}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"button",9),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(w),r.\u0275\u0275nextContext().onRemove()}),r.\u0275\u0275elementEnd()}if(2&ft){const w=r.\u0275\u0275nextContext();r.\u0275\u0275property("href",w.href,r.\u0275\u0275sanitizeUrl),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",w.shortUrl," ")}}let _t=(()=>{class ft{constructor(w){this.documentRef=w,this.addLink=new r.EventEmitter,this.removeLink=new r.EventEmitter,this.url=this.makeUrl(),this.edit=!this.url,this.prefix="http://"}get hasUrl(){return!!this.url}get href(){return`${this.prefix}${this.url}`}get shortUrl(){return this.url.length<60?this.url:`${this.url.slice(0,Math.max(0,40))}...${this.url.slice(this.url.length-10)}`}get isViewMode(){return!this.edit}onSelectionChange(){this.isViewMode&&(this.url=this.makeUrl())}onMouseDown(w){(0,R.veZ)(w.target)&&!w.target.matches("a, button, input")&&w.preventDefault()}onSave(){this.url?this.addLink.emit(this.href):this.removeLink.emit()}onBackspace(){this.url||(this.prefix="http://")}onEdit(){this.edit=!0}onRemove(){this.removeLink.emit()}onChange(w){this.url=this.removePrefix(w)}onClear(){this.url=""}makeUrl(){const w=this.documentRef.getSelection();return w?this.getHref(w):""}getHref({focusNode:w}){if(!(null==w?void 0:w.parentElement))return"";const N=w.parentElement.closest("a");return N?this.removePrefix(N.getAttribute("href")||""):this.url}removePrefix(w){return w.startsWith("http://")?(this.prefix="http://",w.replace("http://","")):w.startsWith("https://")?(this.prefix="https://",w.replace("https://","")):w}}return ft.\u0275fac=function(w){return new(w||ft)(r.\u0275\u0275directiveInject(m.K0))},ft.\u0275cmp=r.\u0275\u0275defineComponent({type:ft,selectors:[["tui-edit-link"]],hostBindings:function(w,N){1&w&&r.\u0275\u0275listener("selectionchange",function(){return N.onSelectionChange()},!1,r.\u0275\u0275resolveDocument)("mousedown",function(L){return N.onMouseDown(L)})},outputs:{addLink:"addLink",removeLink:"removeLink"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["view",""],[1,"t-label"],[1,"t-url"],["tuiAutoFocus","",1,"t-input",3,"ngModel","ngModelChange","keydown.prevent.enter","keydown.backspace"],["src","tuiIconCloseLarge",1,"t-cleaner",3,"click"],["tuiIconButton","","type","button","size","s","title","Insert link","icon","tuiIconCheckCircleLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],["tuiLink","","target","_blank",1,"t-link",3,"href"],["tuiIconButton","","type","button","size","s","title","Change link","icon","tuiIconEditLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],["tuiIconButton","","type","button","size","s","title","Remove link","icon","tuiIconTrashLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"]],template:function(w,N){if(1&w&&(r.\u0275\u0275template(0,q,9,6,"ng-container",0),r.\u0275\u0275template(1,X,4,2,"ng-template",null,1,r.\u0275\u0275templateRefExtractor)),2&w){const z=r.\u0275\u0275reference(2);r.\u0275\u0275property("ngIf",N.edit)("ngIfElse",z)}},directives:[m.O5,_.l,f.k,U.NgControlStatus,U.NgModel,v.P,G.v,j.V],styles:["[_nghost-%COMP%]{display:flex;height:var(--tui-height-l);align-items:center;padding-right:.75rem}.t-label[_ngcontent-%COMP%]{font:var(--tui-font-text-s);height:var(--tui-height-l);box-sizing:border-box;padding:.4375rem 1rem;min-width:12.5rem;max-width:25rem}.t-url[_ngcontent-%COMP%]{display:flex;font:var(--tui-font-text-m);color:var(--tui-text-02)}.t-input[_ngcontent-%COMP%]{flex:1}.t-input_filled[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-button[_ngcontent-%COMP%]{width:2rem;height:2rem;margin:0 .25rem;transition:background .2s}.t-link[_ngcontent-%COMP%]{margin:0 1rem}.t-cleaner[_ngcontent-%COMP%]{transition-property:color;transition-duration:.3s;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;color:var(--tui-base-06);cursor:pointer}.t-cleaner[_ngcontent-%COMP%]:hover{color:var(--tui-base-07)}.t-cleaner_hidden[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0}),ft})()},71115:(yt,tt,a)=>{a.d(tt,{F:()=>G}),a(45050);var r=a(12057),R=a(23738),_=a(40287),f=a(66187),U=a(91068),v=a(74788);let G=(()=>{class j{}return j.\u0275fac=function(X){return new(X||j)},j.\u0275mod=v.\u0275\u0275defineNgModule({type:j}),j.\u0275inj=v.\u0275\u0275defineInjector({imports:[[r.ez,R.FormsModule,_.Q7V,f.fNO,f.EIu,f.jzK,U.z$l]]}),j})()},20179:(yt,tt,a)=>{a.d(tt,{D:()=>R});var m=a(74788),r=a(66187);let R=(()=>{class _{constructor(U,v,G,j){this.elementRef=U,this.renderer=v,this.sanitizer=G,this.tuiSanitizer=j}set content(U){this.renderer.setProperty(this.elementRef.nativeElement,"innerHTML",this.tuiSanitizer?this.tuiSanitizer.sanitize(m.SecurityContext.HTML,U.replace(/colwidth/g,"width")):this.sanitizer.sanitize(m.SecurityContext.HTML,U))}}return _.\u0275fac=function(U){return new(U||_)(m.\u0275\u0275directiveInject(m.ElementRef),m.\u0275\u0275directiveInject(m.Renderer2),m.\u0275\u0275directiveInject(m.Sanitizer),m.\u0275\u0275directiveInject(r.hmb,8))},_.\u0275cmp=m.\u0275\u0275defineComponent({type:_,selectors:[["tui-editor-socket"]],hostAttrs:[1,"tui-editor-socket"],inputs:{content:"content"},decls:0,vars:0,template:function(U,v){},styles:['.tui-editor-socket{display:block;margin:0;overflow:hidden;color:var(--tui-text-01);font:var(--tui-font-text-m)}.tui-editor-socket._preview-image img{cursor:pointer}.tui-editor-socket .ProseMirror{min-height:5.375rem;padding:0 1rem;outline:none;white-space:pre-wrap}.tui-editor-socket p:empty:after{content:" ";white-space:pre}.tui-editor-socket p:first-child{margin-top:0}.tui-editor-socket ul,.tui-editor-socket ol{list-style-type:none;margin:1rem 1rem 1rem 1.5rem;padding:0}.tui-editor-socket li{margin:1rem 0}.tui-editor-socket li p{display:inline-block;margin:0 auto}.tui-editor-socket ul li:before{content:"";display:inline-block;width:.5rem;height:.5rem;border-radius:100%;margin:.5rem .875rem .0625rem -1.375rem;background-color:var(--tui-primary);vertical-align:top;box-sizing:border-box}.tui-editor-socket li ul>li:before{background:none;border:.125rem solid var(--tui-primary)}.tui-editor-socket li ul>li>ul>li:before{background:var(--tui-primary);border-radius:0;width:.375rem;height:.375rem}.tui-editor-socket ol{counter-reset:counter}.tui-editor-socket ol li:before{content:counter(counter) ".";width:1.5rem;margin:0 .75rem 0 -1.5rem;counter-increment:counter;color:var(--tui-base-05);vertical-align:top}.tui-editor-socket pre{white-space:pre-wrap;word-break:break-word;border-radius:.25rem;margin:1rem 0;padding:.75rem 1rem;font-family:Courier,monospace;color:var(--tui-text-02);background:var(--tui-base-02)}.tui-editor-socket pre code{box-shadow:none!important}.tui-editor-socket :focus pre{background-color:var(--tui-base-01)}.tui-editor-socket pre+pre{margin-top:-1.8125rem;padding-top:0}.tui-editor-socket blockquote{margin:1.25rem 0 1.25rem 1.5rem!important;padding-left:1.0625rem!important;border-left:1px solid var(--tui-base-04)!important}.tui-editor-socket p{margin:1rem 0}.tui-editor-socket a{color:var(--tui-link);text-decoration:none;outline:none}.tui-editor-socket a:hover{color:var(--tui-link-hover);text-decoration:underline}.tui-editor-socket a:active{color:var(--tui-primary-active)}.tui-editor-socket hr{border:none;border-top:1px solid var(--tui-base-03);margin:1rem 0}.tui-editor-socket table{border-collapse:collapse;table-layout:fixed;width:100%;margin:0;overflow:hidden}.tui-editor-socket table td{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word}.tui-editor-socket table th{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word;font-weight:bold;text-align:left;background-color:var(--tui-base-02);min-height:2rem}.tui-editor-socket table .column-resize-handle{position:absolute;right:-2px;top:0;bottom:-2px;width:4px;background-color:#adf;pointer-events:none}.tui-editor-socket table td>*{margin-top:0!important;margin-bottom:0!important}.tui-editor-socket table th>*{margin-top:0!important;margin-bottom:0!important}.tui-editor-socket .resize-cursor{cursor:ew-resize;cursor:col-resize}.tui-editor-socket table .tableWrapper{overflow-x:auto}.tui-editor-socket .selectedCell:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:var(--tui-selection);pointer-events:none}.tui-editor-socket font[face="Courier New"]{display:inline-block;padding:.25rem .5rem;border-radius:.25rem;background-color:#ecf1f7;word-break:break-word}.tui-editor-socket details{width:100%;border:1px solid var(--tui-base-04);border-radius:var(--tui-radius-l)}.tui-editor-socket summary{display:flex;align-items:center;min-height:3.5rem;width:100%;padding:0 1.25rem;box-sizing:border-box;border-radius:var(--tui-radius-l);pointer-events:none}.tui-editor-socket summary p{min-width:1px;margin:0}.tui-editor-socket summary::-webkit-details-marker{display:none}.tui-editor-socket details[open] summary{border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-editor-socket div[data-type=details-content]{padding:1.25rem;min-height:3rem;border:1px solid var(--tui-base-04);border-width:1px 0 0}.tui-editor-socket .details-wrapper{position:relative;display:flex}.tui-editor-socket .details-arrow{position:absolute;top:1.5rem;right:1.25rem;height:.575rem;width:.575rem;border:1px solid var(--tui-base-06);border-width:0 2px 2px 0;transform:rotate(45deg);transition:.3s;transition:var(--tui-duration, .3s);-webkit-appearance:none;-moz-appearance:none;appearance:none;box-sizing:border-box;padding:0;background:none;cursor:pointer}.tui-editor-socket .details-wrapper_rendered .details-arrow{pointer-events:none}.tui-editor-socket .details-wrapper_rendered summary{transition:transform .3s;transition:transform var(--tui-duration, .3s);cursor:pointer;pointer-events:auto}.tui-editor-socket .details-wrapper_rendered summary:hover{background:var(--tui-base-02)}.tui-editor-socket details[open]+.details-arrow{top:1.75rem;transform:rotate(225deg)}.t-editor-placeholder:before{content:attr(data-placeholder);float:left;color:var(--tui-base-05);pointer-events:none;height:0}.tui-group-node{display:flex;flex-direction:row}.tui-group-node:hover>.tui-group-pointer{pointer-events:auto;opacity:1}.tui-group-pointer{opacity:0;min-height:.8125rem;max-height:.8125rem;min-width:.8125rem;max-width:.8125rem;margin:.3125rem .3125rem 0 0;cursor:-webkit-grab;cursor:grab;background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="black" /></svg>\');background-repeat:no-repeat;background-size:contain;background-position:center}[data-mode=onDark] .tui-group-pointer{background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="white" /></svg>\')}\n'],encapsulation:2,changeDetection:0}),_})()},69303:(yt,tt,a)=>{a.d(tt,{a:()=>J});var m=a(64762),r=a(74788),R=a(23738),_=a(17406),f=a(19074),U=a(40632),v=a(62842),G=a(40287),j=a(79089),q=a(5723),X=a(2697),et=a(17163),Z=a(12057),st=a(3881),_t=a(1433),ft=a(9872),at=a(4997),w=a(33250),N=a(26072),z=a(9829),L=a(82886),Y=a(39088),nt=a(74982),it=a(45050);function dt(x,I){if(1&x&&(r.\u0275\u0275elementStart(0,"tui-toolbar",9),r.\u0275\u0275projection(1,1),r.\u0275\u0275elementEnd()),2&x){const T=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("tools",T.tools)("disabled",!T.interactive)}}function ct(x,I){if(1&x&&(r.\u0275\u0275elementStart(0,"div",10),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&x){const T=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",T.exampleText," ")}}function Et(x,I){if(1&x){const T=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",11),r.\u0275\u0275elementStart(1,"div",12),r.\u0275\u0275listener("valueChange",function(F){return r.\u0275\u0275restoreView(T),r.\u0275\u0275nextContext(2).onModelChange(F)})("stateChange",function(){return 0}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&x){r.\u0275\u0275nextContext();const T=r.\u0275\u0275reference(9),k=r.\u0275\u0275nextContext();r.\u0275\u0275property("tuiDropdownSelection",k.dropdownSelectionHandler)("tuiDropdown",T),r.\u0275\u0275advance(1),r.\u0275\u0275property("value",k.value)("editable",k.interactive)}}function Mt(x,I){if(1&x){const T=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-edit-link",13),r.\u0275\u0275listener("addLink",function(F){return r.\u0275\u0275restoreView(T),r.\u0275\u0275nextContext(2).addLink(F)})("removeLink",function(){return r.\u0275\u0275restoreView(T),r.\u0275\u0275nextContext(2).removeLink()}),r.\u0275\u0275elementEnd()}}function ht(x,I){if(1&x){const T=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",1),r.\u0275\u0275listener("tuiActiveZoneChange",function(F){return r.\u0275\u0275restoreView(T),r.\u0275\u0275nextContext().onActiveZone(F)}),r.\u0275\u0275elementStart(1,"div",2),r.\u0275\u0275template(2,dt,2,2,"tui-toolbar",3),r.\u0275\u0275elementStart(3,"div",4),r.\u0275\u0275projection(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(5,ct,2,1,"div",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"tui-scrollbar",6),r.\u0275\u0275template(7,Et,2,4,"div",7),r.\u0275\u0275template(8,Mt,1,0,"ng-template",null,8,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275element(10,"tui-editor-portal-host"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&x){const T=I.tuiLet,k=r.\u0275\u0275nextContext();r.\u0275\u0275property("readOnly",k.readOnly)("disabled",k.disabled)("focus",k.computedFocused)("hover",k.pseudoHover)("invalid",k.computedInvalid),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",T),r.\u0275\u0275advance(1),r.\u0275\u0275classProp("t-placeholder_raised",k.placeholderRaised),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",k.hasExampleText),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",T)}}const ot=["*",[["tools"]]];class J extends G.M$T{constructor(I,T,k,F,ut){super(I,T),this.editorLoaded$=k,this.editorService=F,this.contentProcessor=ut,this.exampleText="",this.tools=f.Db,this.focused=!1,this.isSelectionLink=({startContainer:pt,endContainer:Tt})=>{var Pt,kt;return!!(null===(kt=null===(Pt=pt.parentElement)||void 0===Pt?void 0:Pt.closest("a"))||void 0===kt?void 0:kt.contains(Tt))}}get nativeFocusableElement(){var I;return this.computedDisabled?null:(null===(I=this.element)||void 0===I?void 0:I.nativeElement)||null}get dropdownSelectionHandler(){return this.focused?this.isSelectionLink:G.IyD}get editor(){return this.editorService.getOriginTiptapEditor()?this.editorService:null}get placeholderRaised(){return this.computedFocused&&!this.readOnly||this.hasValue}get hasExampleText(){return!!this.exampleText&&this.computedFocused&&!this.hasValue&&!this.readOnly}writeValue(I){var T;const k=this.contentProcessor(I||"");super.writeValue(k),k!==I&&(null===(T=this.control)||void 0===T||T.setValue(k))}onActiveZone(I){this.focused=I,this.updateFocused(I)}onModelChange(I){this.updateValue(I)}addLink(I){var T,k;null===(T=this.editor)||void 0===T||T.selectClosest(),null===(k=this.editor)||void 0===k||k.setLink(I)}removeLink(){var I;null===(I=this.editor)||void 0===I||I.unsetLink()}ngOnDestroy(){var I;null===(I=this.editor)||void 0===I||I.destroy()}getFallbackValue(){return""}get hasValue(){return!!this.value}}J.\u0275fac=function(I){return new(I||J)(r.\u0275\u0275directiveInject(R.NgControl,10),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(v.ZW),r.\u0275\u0275directiveInject(U.$3),r.\u0275\u0275directiveInject(v.F1))},J.\u0275cmp=r.\u0275\u0275defineComponent({type:J,selectors:[["tui-editor"]],viewQuery:function(I,T){if(1&I&&(r.\u0275\u0275viewQuery(U.JU,5,r.ElementRef),r.\u0275\u0275viewQuery(_.M6,5)),2&I){let k;r.\u0275\u0275queryRefresh(k=r.\u0275\u0275loadQuery())&&(T.element=k.first),r.\u0275\u0275queryRefresh(k=r.\u0275\u0275loadQuery())&&(T.toolbar=k.first)}},inputs:{exampleText:"exampleText",tools:"tools"},features:[r.\u0275\u0275ProvidersFeature([(0,G.FTc)(J),j.m]),r.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*","tools"],decls:2,vars:3,consts:[["tuiWrapper","","appearance","textfield","class","t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange",4,"tuiLet"],["tuiWrapper","","appearance","textfield",1,"t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange"],[1,"t-toolbar-wrapper"],[3,"tools","disabled",4,"ngIf"],[1,"t-placeholder"],["class","t-example-text",4,"ngIf"],["tuiEditorPortal","",1,"t-scrollbar"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown",4,"ngIf"],["dropdown",""],[3,"tools","disabled"],[1,"t-example-text"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown"],["tuiTiptapEditor","","spellcheck","false",1,"tui-editor-socket",3,"value","editable","valueChange","stateChange"],[3,"addLink","removeLink"]],template:function(I,T){1&I&&(r.\u0275\u0275projectionDef(ot),r.\u0275\u0275template(0,ht,11,10,"div",0),r.\u0275\u0275pipe(1,"async")),2&I&&r.\u0275\u0275property("tuiLet",r.\u0275\u0275pipeBind1(1,1,T.editorLoaded$))},directives:[q.L,X.o,et.e,Z.O5,st.I,_t.A,ft.d,at.M,w.Ek,N.t,z.V,L.A,Y.y,nt.J,it.l],pipes:[Z.Ov],styles:["[_nghost-%COMP%]{position:relative;z-index:0;display:block;font:var(--tui-font-text-m);border-radius:var(--tui-radius-m)}.t-wrapper[_ngcontent-%COMP%]{display:flex;max-height:inherit;min-height:10rem;cursor:text;overflow:hidden;flex-direction:column;border-radius:inherit}.t-placeholder[_ngcontent-%COMP%]{transition-property:transform,font-size,color,letter-spacing;transition-duration:.3s;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;font:var(--tui-font-text-s);color:var(--tui-text-01);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:var(--tui-text-02);pointer-events:none;will-change:transform;transform:translateY(0);position:absolute;left:1rem;margin-top:1rem;width:95%;font-size:.9375rem}.t-placeholder_raised[_ngcontent-%COMP%]{transform:translateY(-.625rem)}[data-size=m][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font:var(--tui-font-text-xs);transform:translateY(-.5rem);letter-spacing:.025rem}._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], ._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill)}[data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], [data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill-night)}._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-03)}[data-size=l][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{font-size:.9375rem}[data-size=l][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font-size:.8156rem}[data-size=m]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01)}[data-mode=onDark][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}[data-size=m][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}@supports (-webkit-hyphens: none){.t-placeholder[_ngcontent-%COMP%]{will-change:unset;transition-property:transform,color,letter-spacing}}.t-placeholder_raised[_ngcontent-%COMP%]{width:110%}.t-example-text[_ngcontent-%COMP%]{position:absolute;left:1rem;margin-top:1.6rem;color:var(--tui-base-06);letter-spacing:normal;text-transform:none}.t-example-text_light[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}.t-example-text_dark[_ngcontent-%COMP%]{color:var(--tui-text-03)}.t-scrollbar[_ngcontent-%COMP%]{display:flex;max-height:inherit;border-top:1.625rem solid transparent;border-bottom:1px solid transparent;box-sizing:border-box}"],changeDetection:0}),(0,m.gn)([(0,G.THR)()],J.prototype,"exampleText",void 0),(0,m.gn)([(0,G.THR)()],J.prototype,"tools",void 0)},79089:(yt,tt,a)=>{a.d(tt,{m:()=>q});var m=a(74788),r=a(40632),R=a(62842),_=a(82298),f=a(9112),U=a(15257),v=a(88002),G=a(47349),j=a(73825);const q=[{provide:R.F4,deps:[R.Wf],useFactory:X=>{const et=new _.t(1);return Promise.all(X).then(Z=>et.next(Z)),et}},{provide:R.Y1,deps:[m.Renderer2],useFactory:X=>X.createElement("div")},{provide:R.ZW,deps:[R.Y1,R.F4,R.bG],useFactory:(X,et,Z)=>(0,f.aj)([Z,et]).pipe((0,U.q)(1),(0,v.U)(([st,_t])=>new st({element:X,extensions:_t})),(0,G.d)({bufferSize:1,refCount:!0}))},r.$3,j.Y]},9872:(yt,tt,a)=>{a.d(tt,{d:()=>R});var m=a(40287),r=a(74788);let R=(()=>{class _ extends m.ErH{}return _.\u0275fac=function(){let f;return function(v){return(f||(f=r.\u0275\u0275getInheritedFactory(_)))(v||_)}}(),_.\u0275cmp=r.\u0275\u0275defineComponent({type:_,selectors:[["tui-editor-portal-host"]],features:[r.\u0275\u0275ProvidersFeature([{provide:m.N9Y,useExisting:m.ae2},{provide:m.ErH,useExisting:_}]),r.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,consts:[["viewContainer",""]],template:function(U,v){1&U&&r.\u0275\u0275elementContainer(0,null,0)},styles:["[_nghost-%COMP%]{position:relative;z-index:1;display:block;height:100%}"],changeDetection:0}),_})()},1433:(yt,tt,a)=>{a.d(tt,{A:()=>_});var m=a(40287),r=a(73825),R=a(74788);let _=(()=>{class f{}return f.\u0275fac=function(v){return new(v||f)},f.\u0275dir=R.\u0275\u0275defineDirective({type:f,selectors:[["","tuiEditorPortal",""]],features:[R.\u0275\u0275ProvidersFeature([{provide:m.ae2,useExisting:r.Y}])]}),f})()},73825:(yt,tt,a)=>{a.d(tt,{Y:()=>R});var m=a(40287),r=a(74788);let R=(()=>{class _ extends m.N9Y{}return _.\u0275fac=function(){let f;return function(v){return(f||(f=r.\u0275\u0275getInheritedFactory(_)))(v||_)}}(),_.\u0275prov=r.\u0275\u0275defineInjectable({token:_,factory:_.\u0275fac}),_})()},19769:(yt,tt,a)=>{a.d(tt,{j:()=>at});var m=a(64762),r=a(74788),R=a(23738),_=a(91211),f=a(66835),U=a(40287),v=a(66187),G=a(62939),j=a(63060),q=a(62733),X=a(3729),et=a(23999),Z=a(17163);function st(w,N){if(1&w&&r.\u0275\u0275element(0,"div",4),2&w){const z=r.\u0275\u0275nextContext();r.\u0275\u0275styleProp("background",z.background)}}function _t(w,N){if(1&w){const z=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-color-selector",5),r.\u0275\u0275listener("colorChange",function(Y){return r.\u0275\u0275restoreView(z),r.\u0275\u0275nextContext().onValueChange(Y)}),r.\u0275\u0275elementEnd()}if(2&w){const z=N.$implicit,L=r.\u0275\u0275nextContext();r.\u0275\u0275property("tuiActiveZoneParent",z)("colors",L.colors)("color",L.value)}}class at extends U.M$T{constructor(N,z,L){super(N,z),this.domSanitizer=L,this.colors=new Map,this.open=!1}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return!!this.dropdown&&this.dropdown.focused}get background(){return this.sanitize(this.value,this.domSanitizer)}onClick(){this.open=!this.open}onValueChange(N){this.updateValue(N)}onFocused(N){this.updateFocused(N)}getFallbackValue(){return"#000000"}sanitize(N,z){return N.startsWith("linear-gradient(")?z.bypassSecurityTrustStyle((0,f.CH)((0,f._N)((0,f.U5)(N)))):N}}at.\u0275fac=function(N){return new(N||at)(r.\u0275\u0275directiveInject(R.NgControl,10),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(_.DomSanitizer))},at.\u0275cmp=r.\u0275\u0275defineComponent({type:at,selectors:[["tui-input-color"]],viewQuery:function(N,z){if(1&N&&(r.\u0275\u0275viewQuery(v.ycg,5),r.\u0275\u0275viewQuery(v.o1K,5)),2&N){let L;r.\u0275\u0275queryRefresh(L=r.\u0275\u0275loadQuery())&&(z.textfield=L.first),r.\u0275\u0275queryRefresh(L=r.\u0275\u0275loadQuery())&&(z.dropdown=L.first)}},hostBindings:function(N,z){1&N&&r.\u0275\u0275listener("click",function(){return z.onClick()})},inputs:{colors:"colors"},features:[r.\u0275\u0275ProvidersFeature([],[(0,v.fxH)({maxHeight:600})]),r.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:7,vars:12,consts:[[1,"t-wrapper",3,"content","open","openChange"],[1,"t-textfield",3,"tuiTextfieldIconLeft","pseudoFocus","pseudoHover","pseudoActive","invalid","focusable","nativeId","disabled","readOnly","value","valueChange","focusedChange"],["color",""],["picker",""],[1,"t-color"],[3,"tuiActiveZoneParent","colors","color","colorChange"]],template:function(N,z){if(1&N&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),r.\u0275\u0275listener("openChange",function(Y){return z.open=Y}),r.\u0275\u0275elementStart(1,"tui-primitive-textfield",1),r.\u0275\u0275listener("valueChange",function(Y){return z.onValueChange(Y)})("focusedChange",function(Y){return z.onFocused(Y)}),r.\u0275\u0275projection(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(3,st,1,2,"ng-template",null,2,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(5,_t,1,3,"ng-template",null,3,r.\u0275\u0275templateRefExtractor)),2&N){const L=r.\u0275\u0275reference(4),Y=r.\u0275\u0275reference(6);r.\u0275\u0275property("content",Y)("open",z.open),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiTextfieldIconLeft",L)("pseudoFocus",z.computedFocused)("pseudoHover",z.pseudoHover)("pseudoActive",z.pseudoActive)("invalid",z.computedInvalid)("focusable",z.focusable)("nativeId",z.nativeId)("disabled",z.disabled)("readOnly",z.readOnly)("value",z.value)}},directives:[G.o,j.y,q.B,X.aR,et.s,Z.e],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-wrapper[_ngcontent-%COMP%]{display:flex;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-color[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-03-dark);border-radius:.125rem}"],changeDetection:0}),(0,m.gn)([(0,U.THR)()],at.prototype,"colors",void 0),(0,m.gn)([U.UMq],at.prototype,"sanitize",null)},37924:(yt,tt,a)=>{a.d(tt,{X:()=>w});var m=a(40632),r=a(62842),R=a(9112),_=a(88002),f=a(74788),U=a(12057),v=a(5723),G=a(62939),j=a(76189),q=a(67446),X=a(29070),et=a(54255),Z=a(15491),st=a(219);function _t(N,z){if(1&N){const L=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"div",6),f.\u0275\u0275elementStart(1,"button",7),f.\u0275\u0275listener("click",function(){return f.\u0275\u0275restoreView(L),f.\u0275\u0275nextContext(3).editor.onAlign("left")}),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(2,"button",8),f.\u0275\u0275listener("click",function(){return f.\u0275\u0275restoreView(L),f.\u0275\u0275nextContext(3).editor.onAlign("center")}),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(3,"button",9),f.\u0275\u0275listener("click",function(){return f.\u0275\u0275restoreView(L),f.\u0275\u0275nextContext(3).editor.onAlign("right")}),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(4,"button",10),f.\u0275\u0275listener("click",function(){return f.\u0275\u0275restoreView(L),f.\u0275\u0275nextContext(3).editor.onAlign("justify")}),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd()}if(2&N){const L=f.\u0275\u0275nextContext().tuiLet,Y=f.\u0275\u0275nextContext().ngIf;f.\u0275\u0275advance(1),f.\u0275\u0275property("pseudoActive",!(null==L||!L.left))("tuiHint",Y.justifyLeft),f.\u0275\u0275advance(1),f.\u0275\u0275property("pseudoActive",!(null==L||!L.center))("tuiHint",Y.justifyCenter),f.\u0275\u0275advance(1),f.\u0275\u0275property("pseudoActive",!(null==L||!L.right))("tuiHint",Y.justifyRight),f.\u0275\u0275advance(1),f.\u0275\u0275property("pseudoActive",!(null==L||!L.justify))("tuiHint",Y.justifyFull)}}function ft(N,z){if(1&N&&(f.\u0275\u0275elementStart(0,"tui-hosted-dropdown",2,3),f.\u0275\u0275element(2,"button",4),f.\u0275\u0275template(3,_t,5,8,"ng-template",null,5,f.\u0275\u0275templateRefExtractor),f.\u0275\u0275elementEnd()),2&N){const L=f.\u0275\u0275reference(1),Y=f.\u0275\u0275reference(4),nt=f.\u0275\u0275nextContext().ngIf;f.\u0275\u0275property("content",Y),f.\u0275\u0275advance(2),f.\u0275\u0275property("tuiHint",nt.justify)("tuiHintDescribe","")("pseudoActive",L.open)("focusable",L.open)}}function at(N,z){if(1&N&&(f.\u0275\u0275elementContainerStart(0),f.\u0275\u0275template(1,ft,5,5,"tui-hosted-dropdown",1),f.\u0275\u0275pipe(2,"async"),f.\u0275\u0275elementContainerEnd()),2&N){const L=f.\u0275\u0275nextContext();f.\u0275\u0275advance(1),f.\u0275\u0275property("tuiLet",f.\u0275\u0275pipeBind1(2,1,L.alignState$))}}let w=(()=>{class N{constructor(L,Y){this.editor=L,this.texts$=Y,this.alignState$=(0,R.aj)([this.editor.isActive$({textAlign:"left"}),this.editor.isActive$({textAlign:"right"}),this.editor.isActive$({textAlign:"center"}),this.editor.isActive$({textAlign:"justify"})]).pipe((0,_.U)(([nt,it,dt,ct])=>({left:nt,right:it,center:dt,justify:ct})))}}return N.\u0275fac=function(L){return new(L||N)(f.\u0275\u0275directiveInject(m.$3),f.\u0275\u0275directiveInject(r.rf))},N.\u0275cmp=f.\u0275\u0275defineComponent({type:N,selectors:[["tui-align-content"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["align",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["alignDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignCenterLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignRightLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignJustifyLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"]],template:function(L,Y){1&L&&(f.\u0275\u0275template(0,at,3,3,"ng-container",0),f.\u0275\u0275pipe(1,"async")),2&L&&f.\u0275\u0275property("ngIf",f.\u0275\u0275pipeBind1(1,1,Y.texts$))},directives:[U.O5,v.L,G.o,j.v,q.D,X.x,et.t,Z.D,st.$],pipes:[U.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:.3s;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:21.25rem}"],changeDetection:0}),N})()},15587:(yt,tt,a)=>{a.d(tt,{T:()=>w});var m=a(40632),r=a(62842),R=a(88002),_=a(87519),f=a(74788),U=a(62939),v=a(76189),G=a(67446),j=a(29070),q=a(54255),X=a(15491),et=a(219),Z=a(20933),st=a(12057),_t=a(35065);function ft(N,z){if(1&N){const L=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"button",5),f.\u0275\u0275listener("click",function(){const it=f.\u0275\u0275restoreView(L).index;return f.\u0275\u0275nextContext(2).onCode(!!it)}),f.\u0275\u0275text(1),f.\u0275\u0275elementEnd()}if(2&N){const L=z.$implicit;f.\u0275\u0275advance(1),f.\u0275\u0275textInterpolate1(" ",L," ")}}function at(N,z){if(1&N&&(f.\u0275\u0275elementStart(0,"tui-data-list"),f.\u0275\u0275template(1,ft,2,1,"button",4),f.\u0275\u0275pipe(2,"async"),f.\u0275\u0275elementEnd()),2&N){const L=f.\u0275\u0275nextContext();f.\u0275\u0275advance(1),f.\u0275\u0275property("ngForOf",f.\u0275\u0275pipeBind1(2,1,L.codeOptionsTexts$))}}let w=(()=>{class N{constructor(L,Y,nt){this.editor=L,this.texts$=Y,this.codeOptionsTexts$=nt,this.hintText$=this.texts$.pipe((0,R.U)(it=>it.code)),this.insideCode$=this.editor.stateChange$.pipe((0,R.U)(()=>this.editor.isActive("code")||this.editor.isActive("codeBlock")),(0,_.x)())}onCode(L){L?this.editor.toggleCodeBlock():this.editor.toggleCode()}}return N.\u0275fac=function(L){return new(L||N)(f.\u0275\u0275directiveInject(m.$3),f.\u0275\u0275directiveInject(r.rf),f.\u0275\u0275directiveInject(r.Mr))},N.\u0275cmp=f.\u0275\u0275defineComponent({type:N,selectors:[["tui-code"]],decls:7,vars:9,consts:[[3,"content"],["codes",""],["tuiIconButton","","type","button","size","s","icon","tuiIconCodeLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["codesDropdown",""],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(L,Y){if(1&L&&(f.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0,1),f.\u0275\u0275element(2,"button",2),f.\u0275\u0275pipe(3,"async"),f.\u0275\u0275pipe(4,"async"),f.\u0275\u0275template(5,at,3,3,"ng-template",null,3,f.\u0275\u0275templateRefExtractor),f.\u0275\u0275elementEnd()),2&L){const nt=f.\u0275\u0275reference(1),it=f.\u0275\u0275reference(6);f.\u0275\u0275property("content",it),f.\u0275\u0275advance(2),f.\u0275\u0275property("tuiHint",f.\u0275\u0275pipeBind1(3,5,Y.hintText$))("tuiHintDescribe","")("pseudoActive",nt.open||f.\u0275\u0275pipeBind1(4,7,Y.insideCode$))("focusable",nt.open)}},directives:[U.o,v.v,G.D,j.x,q.t,X.D,et.$,Z.q,st.sg,_t.v],pipes:[st.Ov],encapsulation:2,changeDetection:0}),N})()},18832:(yt,tt,a)=>{a.d(tt,{U:()=>st});var m=a(40632),r=a(62842),R=a(88002),_=a(87519),f=a(74788),U=a(12057),v=a(76189),G=a(67446),j=a(29070),q=a(54255),X=a(15491),et=a(219);function Z(_t,ft){if(1&_t){const at=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"button",1),f.\u0275\u0275listener("click",function(){return f.\u0275\u0275restoreView(at),f.\u0275\u0275nextContext().removeDetails()}),f.\u0275\u0275pipe(1,"async"),f.\u0275\u0275elementEnd()}if(2&_t){const at=ft.ngIf,w=f.\u0275\u0275nextContext();f.\u0275\u0275property("tuiHint",at.removeDetails)("tuiHintDescribe","")("focusable",!1)("disabled",!!f.\u0275\u0275pipeBind1(1,4,w.disabled$))}}let st=(()=>{class _t{constructor(at,w){this.editor=at,this.texts$=w,this.disabled$=this.editor.stateChange$.pipe((0,R.U)(()=>!this.editor.isActive("details")),(0,_.x)())}removeDetails(){this.editor.removeDetails()}}return _t.\u0275fac=function(at){return new(at||_t)(f.\u0275\u0275directiveInject(m.$3),f.\u0275\u0275directiveInject(r.rf))},_t.\u0275cmp=f.\u0275\u0275defineComponent({type:_t,selectors:[["tui-details-remove"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","disabled","click"]],template:function(at,w){1&at&&(f.\u0275\u0275template(0,Z,2,6,"button",0),f.\u0275\u0275pipe(1,"async")),2&at&&f.\u0275\u0275property("ngIf",f.\u0275\u0275pipeBind1(1,1,w.texts$))},directives:[U.O5,v.v,G.D,j.x,q.t,X.D,et.$],pipes:[U.Ov],encapsulation:2,changeDetection:0}),_t})()},50237:(yt,tt,a)=>{a.d(tt,{y:()=>et});var m=a(40632),r=a(62842),R=a(74788),_=a(12057),f=a(76189),U=a(67446),v=a(29070),G=a(54255),j=a(15491),q=a(219);function X(Z,st){if(1&Z){const _t=R.\u0275\u0275getCurrentView();R.\u0275\u0275elementStart(0,"button",1),R.\u0275\u0275listener("click",function(){return R.\u0275\u0275restoreView(_t),R.\u0275\u0275nextContext().setDetails()}),R.\u0275\u0275elementEnd()}2&Z&&R.\u0275\u0275property("tuiHint",st.ngIf.setDetails)("tuiHintDescribe","")("focusable",!1)}let et=(()=>{class Z{constructor(_t,ft){this.editor=_t,this.texts$=ft}setDetails(){this.editor.setDetails()}}return Z.\u0275fac=function(_t){return new(_t||Z)(R.\u0275\u0275directiveInject(m.$3),R.\u0275\u0275directiveInject(r.rf))},Z.\u0275cmp=R.\u0275\u0275defineComponent({type:Z,selectors:[["tui-details"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","click"]],template:function(_t,ft){1&_t&&(R.\u0275\u0275template(0,X,1,3,"button",0),R.\u0275\u0275pipe(1,"async")),2&_t&&R.\u0275\u0275property("ngIf",R.\u0275\u0275pipeBind1(1,1,ft.texts$))},directives:[_.O5,f.v,U.D,v.x,G.t,j.D,q.$],pipes:[_.Ov],encapsulation:2,changeDetection:0}),Z})()},84985:(yt,tt,a)=>{a.d(tt,{m:()=>w});var m=a(40632),r=a(62842),R=a(40287),_=a(88002),f=a(74788),U=a(62939),v=a(76189),G=a(67446),j=a(29070),q=a(54255),X=a(15491),et=a(219),Z=a(20933),st=a(12057),_t=a(35065);function ft(N,z){if(1&N){const L=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"button",5),f.\u0275\u0275listener("click",function(){const it=f.\u0275\u0275restoreView(L).$implicit;return f.\u0275\u0275nextContext(2).onClick(it)}),f.\u0275\u0275pipe(1,"lowercase"),f.\u0275\u0275text(2),f.\u0275\u0275elementEnd()}if(2&N){const L=z.$implicit;f.\u0275\u0275styleProp("font-family",L.family)("font-size",L.px,"px")("font-weight",L.weight),f.\u0275\u0275attribute("automation-id","tui_font__"+f.\u0275\u0275pipeBind1(1,8,L.name||"")),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate1(" ",L.name," ")}}function at(N,z){if(1&N&&(f.\u0275\u0275elementStart(0,"tui-data-list"),f.\u0275\u0275template(1,ft,3,10,"button",4),f.\u0275\u0275pipe(2,"async"),f.\u0275\u0275elementEnd()),2&N){const L=f.\u0275\u0275nextContext();f.\u0275\u0275advance(1),f.\u0275\u0275property("ngForOf",f.\u0275\u0275pipeBind1(2,1,L.fontsOptions$))}}let w=(()=>{class N{constructor(L,Y,nt,it){this.options=L,this.editor=Y,this.texts$=nt,this.fontOptionsTexts$=it,this.fontsOptions$=this.fontOptionsTexts$.pipe((0,_.U)(dt=>this.options.fontOptions(dt))),this.fontText$=this.texts$.pipe((0,_.U)(dt=>dt.font))}onClick({headingLevel:L,px:Y}){L?this.editor.setHeading(L):this.editor.setParagraph({fontSize:(0,R.O9r)(Y||0)})}}return N.\u0275fac=function(L){return new(L||N)(f.\u0275\u0275directiveInject(r.mJ),f.\u0275\u0275directiveInject(m.$3),f.\u0275\u0275directiveInject(r.rf),f.\u0275\u0275directiveInject(r.UN))},N.\u0275cmp=f.\u0275\u0275defineComponent({type:N,selectors:[["tui-font-size"]],decls:6,vars:7,consts:[[3,"content"],["fonts",""],["tuiIconButton","","type","button","size","s","appearance","icon","icon","tuiIconFontLarge","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["fontsDropdown",""],["tuiOption","",3,"fontFamily","fontSize","fontWeight","click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(L,Y){if(1&L&&(f.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0,1),f.\u0275\u0275element(2,"button",2),f.\u0275\u0275pipe(3,"async"),f.\u0275\u0275template(4,at,3,3,"ng-template",null,3,f.\u0275\u0275templateRefExtractor),f.\u0275\u0275elementEnd()),2&L){const nt=f.\u0275\u0275reference(1),it=f.\u0275\u0275reference(5);f.\u0275\u0275property("content",it),f.\u0275\u0275advance(2),f.\u0275\u0275property("tuiHint",f.\u0275\u0275pipeBind1(3,5,Y.fontText$))("tuiHintDescribe","")("pseudoActive",nt.open)("focusable",nt.open)}},directives:[U.o,v.v,G.D,j.x,q.t,X.D,et.$,Z.q,st.sg,_t.v],pipes:[st.Ov,st.i8],encapsulation:2,changeDetection:0}),N})()},62976:(yt,tt,a)=>{a.d(tt,{h:()=>nt});var m=a(19074),r=a(40632),R=a(48699),_=a(62842),f=a(9112),U=a(88002),v=a(74788),G=a(12057),j=a(62939),q=a(76189),X=a(67446),et=a(29070),Z=a(54255),st=a(15491),_t=a(219);function ft(it,dt){if(1&it){const ct=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"button",11),v.\u0275\u0275listener("click",function(){return v.\u0275\u0275restoreView(ct),v.\u0275\u0275nextContext(4).editor.toggleBold()}),v.\u0275\u0275elementEnd()}if(2&it){const ct=v.\u0275\u0275nextContext(2).ngIf,Et=v.\u0275\u0275nextContext().ngIf;v.\u0275\u0275property("tuiHint",Et.bold)("pseudoActive",ct.bold)}}function at(it,dt){if(1&it){const ct=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"button",12),v.\u0275\u0275listener("click",function(){return v.\u0275\u0275restoreView(ct),v.\u0275\u0275nextContext(4).editor.toggleItalic()}),v.\u0275\u0275elementEnd()}if(2&it){const ct=v.\u0275\u0275nextContext(2).ngIf,Et=v.\u0275\u0275nextContext().ngIf;v.\u0275\u0275property("tuiHint",Et.italic)("pseudoActive",ct.italic)}}function w(it,dt){if(1&it){const ct=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"button",13),v.\u0275\u0275listener("click",function(){return v.\u0275\u0275restoreView(ct),v.\u0275\u0275nextContext(4).editor.toggleUnderline()}),v.\u0275\u0275elementEnd()}if(2&it){const ct=v.\u0275\u0275nextContext(2).ngIf,Et=v.\u0275\u0275nextContext().ngIf;v.\u0275\u0275property("tuiHint",Et.underline)("pseudoActive",ct.underline)}}function N(it,dt){if(1&it){const ct=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"button",14),v.\u0275\u0275listener("click",function(){return v.\u0275\u0275restoreView(ct),v.\u0275\u0275nextContext(4).editor.toggleStrike()}),v.\u0275\u0275elementEnd()}if(2&it){const ct=v.\u0275\u0275nextContext(2).ngIf,Et=v.\u0275\u0275nextContext().ngIf;v.\u0275\u0275property("tuiHint",Et.strikeThrough)("pseudoActive",ct.strike)}}function z(it,dt){if(1&it&&(v.\u0275\u0275elementStart(0,"div",6),v.\u0275\u0275template(1,ft,1,2,"button",7),v.\u0275\u0275template(2,at,1,2,"button",8),v.\u0275\u0275template(3,w,1,2,"button",9),v.\u0275\u0275template(4,N,1,2,"button",10),v.\u0275\u0275elementEnd()),2&it){const ct=v.\u0275\u0275nextContext(3);v.\u0275\u0275advance(1),v.\u0275\u0275property("ngIf",ct.isEnabled(ct.TuiEditorTool.Bold)),v.\u0275\u0275advance(1),v.\u0275\u0275property("ngIf",ct.isEnabled(ct.TuiEditorTool.Italic)),v.\u0275\u0275advance(1),v.\u0275\u0275property("ngIf",ct.isEnabled(ct.TuiEditorTool.Underline)),v.\u0275\u0275advance(1),v.\u0275\u0275property("ngIf",ct.isEnabled(ct.TuiEditorTool.Strikethrough))}}function L(it,dt){if(1&it&&(v.\u0275\u0275elementStart(0,"tui-hosted-dropdown",2,3),v.\u0275\u0275element(2,"button",4),v.\u0275\u0275template(3,z,5,4,"ng-template",null,5,v.\u0275\u0275templateRefExtractor),v.\u0275\u0275elementEnd()),2&it){const ct=dt.ngIf,Et=v.\u0275\u0275reference(1),Mt=v.\u0275\u0275reference(4),ht=v.\u0275\u0275nextContext().ngIf;v.\u0275\u0275property("content",Mt),v.\u0275\u0275advance(2),v.\u0275\u0275property("tuiHint",ht.fontStyle)("tuiHintDescribe","")("pseudoActive",Et.open||ct.bold||ct.italic||ct.underline||ct.strike)("focusable",Et.open)}}function Y(it,dt){if(1&it&&(v.\u0275\u0275elementContainerStart(0),v.\u0275\u0275template(1,L,5,5,"tui-hosted-dropdown",1),v.\u0275\u0275pipe(2,"async"),v.\u0275\u0275elementContainerEnd()),2&it){const ct=v.\u0275\u0275nextContext();v.\u0275\u0275advance(1),v.\u0275\u0275property("ngIf",v.\u0275\u0275pipeBind1(2,1,ct.fontStyleState$))}}let nt=(()=>{class it{constructor(ct,Et){this.editor=ct,this.texts$=Et,this.toolsSet=new Set(m.Db),this.TuiEditorTool=R._,this.fontStyleState$=(0,f.aj)([this.editor.isActive$("bold"),this.editor.isActive$("italic"),this.editor.isActive$("underline"),this.editor.isActive$("strike")]).pipe((0,U.U)(([Mt,ht,ot,O])=>({bold:Mt,italic:ht,underline:ot,strike:O})))}set enabledTools(ct){this.toolsSet=new Set(ct)}isEnabled(ct){return this.toolsSet.has(ct)}}return it.\u0275fac=function(ct){return new(ct||it)(v.\u0275\u0275directiveInject(r.$3),v.\u0275\u0275directiveInject(_.rf))},it.\u0275cmp=v.\u0275\u0275defineComponent({type:it,selectors:[["tui-font-style"]],inputs:{enabledTools:"enabledTools"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"ngIf"],[3,"content"],["format",""],["tuiIconButton","","type","button","size","s","icon","tuiIconFormatLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__font-style-button",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["formatDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"]],template:function(ct,Et){1&ct&&(v.\u0275\u0275template(0,Y,3,3,"ng-container",0),v.\u0275\u0275pipe(1,"async")),2&ct&&v.\u0275\u0275property("ngIf",v.\u0275\u0275pipeBind1(1,1,Et.texts$))},directives:[G.O5,j.o,q.v,X.D,et.x,Z.t,st.D,_t.$],pipes:[G.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:.3s;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:21.25rem}"],changeDetection:0}),it})()},19762:(yt,tt,a)=>{a.d(tt,{d:()=>Z});var m=a(40632),r=a(62842),R=a(88002),_=a(87519),f=a(74788),U=a(76189),v=a(67446),G=a(29070),j=a(54255),q=a(15491),X=a(219),et=a(12057);let Z=(()=>{class st{constructor(ft,at){this.editor=ft,this.texts$=at,this.insertGroupText$=this.texts$.pipe((0,R.U)(w=>w.insertGroup)),this.removeGroupText$=this.texts$.pipe((0,R.U)(w=>w.removeGroup)),this.disabled$=this.editor.stateChange$.pipe((0,R.U)(()=>!this.editor.isActive("group")),(0,_.x)())}addGroup(){this.editor.setGroup()}removeGroup(){this.editor.removeGroup()}}return st.\u0275fac=function(ft){return new(ft||st)(f.\u0275\u0275directiveInject(m.$3),f.\u0275\u0275directiveInject(r.rf))},st.\u0275cmp=f.\u0275\u0275defineComponent({type:st,selectors:[["tui-editor-group-tool"]],decls:5,vars:13,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconPlusLarge","appearance","icon",3,"focusable","tuiHint","tuiHintDescribe","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconRemoveLarge","appearance","icon",3,"focusable","disabled","tuiHint","tuiHintDescribe","click"]],template:function(ft,at){1&ft&&(f.\u0275\u0275elementStart(0,"button",0),f.\u0275\u0275listener("click",function(){return at.addGroup()}),f.\u0275\u0275pipe(1,"async"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(2,"button",1),f.\u0275\u0275listener("click",function(){return at.removeGroup()}),f.\u0275\u0275pipe(3,"async"),f.\u0275\u0275pipe(4,"async"),f.\u0275\u0275elementEnd()),2&ft&&(f.\u0275\u0275property("focusable",!1)("tuiHint",f.\u0275\u0275pipeBind1(1,7,at.insertGroupText$))("tuiHintDescribe",""),f.\u0275\u0275advance(2),f.\u0275\u0275property("focusable",!1)("disabled",!!f.\u0275\u0275pipeBind1(3,9,at.disabled$))("tuiHint",f.\u0275\u0275pipeBind1(4,11,at.removeGroupText$))("tuiHintDescribe",""))},directives:[U.v,v.D,G.x,j.t,q.D,X.$],pipes:[et.Ov],encapsulation:2,changeDetection:0}),st})()},7416:(yt,tt,a)=>{a.d(tt,{U:()=>nt});var m=a(64762),r=a(40632),R=a(62842),_=a(40287),f=a(88002),U=a(87519),v=a(74788),G=a(5723),j=a(62939),q=a(33250),X=a(76189),et=a(67446),Z=a(29070),st=a(54255),_t=a(15491),ft=a(219),at=a(12057),w=a(5451),N=a(17163);function z(it,dt){if(1&it&&v.\u0275\u0275element(0,"div",6),2&it){const ct=v.\u0275\u0275nextContext().tuiLet;v.\u0275\u0275styleProp("background",ct)}}function L(it,dt){if(1&it){const ct=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"tui-palette",7),v.\u0275\u0275listener("selectedColor",function(Mt){return v.\u0275\u0275restoreView(ct),v.\u0275\u0275nextContext(2).editor.setBackgroundColor(Mt)}),v.\u0275\u0275elementEnd()}if(2&it){const ct=dt.$implicit,Et=v.\u0275\u0275nextContext(2);v.\u0275\u0275property("tuiActiveZoneParent",ct)("colors",Et.colors)}}function Y(it,dt){if(1&it&&(v.\u0275\u0275elementStart(0,"tui-hosted-dropdown",1,2),v.\u0275\u0275element(2,"button",3),v.\u0275\u0275pipe(3,"async"),v.\u0275\u0275template(4,z,1,2,"div",4),v.\u0275\u0275template(5,L,1,2,"ng-template",null,5,v.\u0275\u0275templateRefExtractor),v.\u0275\u0275elementEnd()),2&it){const ct=dt.tuiLet,Et=v.\u0275\u0275reference(1),Mt=v.\u0275\u0275reference(6),ht=v.\u0275\u0275nextContext();v.\u0275\u0275property("content",Mt)("tuiDropdownMaxHeight",999),v.\u0275\u0275advance(2),v.\u0275\u0275property("tuiHint",v.\u0275\u0275pipeBind1(3,7,ht.backColorText$))("tuiHintDescribe","")("pseudoActive",Et.open)("focusable",Et.open),v.\u0275\u0275advance(2),v.\u0275\u0275property("ngIf",!ht.isBlankColor(ct||""))}}class nt{constructor(dt,ct,Et){this.editor=dt,this.texts$=ct,this.defaultOptions=Et,this.colors=this.defaultOptions.colors,this.backgroundColor$=this.editor.stateChange$.pipe((0,f.U)(()=>this.editor.getBackgroundColor()||this.defaultOptions.blankColor),(0,U.x)()),this.backColorText$=this.texts$.pipe((0,f.U)(Mt=>Mt.backColor))}isBlankColor(dt){return dt===this.defaultOptions.blankColor}}nt.\u0275fac=function(dt){return new(dt||nt)(v.\u0275\u0275directiveInject(r.$3),v.\u0275\u0275directiveInject(R.rf),v.\u0275\u0275directiveInject(R.mJ))},nt.\u0275cmp=v.\u0275\u0275defineComponent({type:nt,selectors:[["tui-highlight-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["hilite",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconHiliteLarge","automation-id","toolbar__hilite-button",1,"t-tool",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["class","t-plate",3,"background",4,"ngIf"],["hiliteDropdown",""],[1,"t-plate"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(dt,ct){1&dt&&(v.\u0275\u0275template(0,Y,7,9,"tui-hosted-dropdown",0),v.\u0275\u0275pipe(1,"async")),2&dt&&v.\u0275\u0275property("tuiLet",v.\u0275\u0275pipeBind1(1,1,ct.backgroundColor$))},directives:[G.L,j.o,q.Ek,X.v,et.D,Z.x,st.t,_t.D,ft.$,at.O5,w.R,N.e],pipes:[at.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:.3s;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:21.25rem}"],changeDetection:0}),(0,m.gn)([(0,_.THR)()],nt.prototype,"colors",void 0)},93252:(yt,tt,a)=>{a.d(tt,{pu:()=>U,P_:()=>G,y9:()=>q,jP:()=>at,p7:()=>Z,Zv:()=>_t,XC:()=>z,Ur:()=>Y,mp:()=>it,iA:()=>Mt,er:()=>ot,__:()=>J,_t:()=>I}),a(37924);var r=a(12057),R=a(40287),_=a(66187),f=a(74788);let U=(()=>{class T{}return T.\u0275fac=function(F){return new(F||T)},T.\u0275mod=f.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=f.\u0275\u0275defineInjector({imports:[[r.ez,_.jhF,_.fNO,_.goS,R.WDk]]}),T})();a(15587);let G=(()=>{class T{}return T.\u0275fac=function(F){return new(F||T)},T.\u0275mod=f.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=f.\u0275\u0275defineInjector({imports:[[r.ez,_.jhF,_.fNO,_.goS,_.pcV]]}),T})();a(50237);let q=(()=>{class T{}return T.\u0275fac=function(F){return new(F||T)},T.\u0275mod=f.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=f.\u0275\u0275defineInjector({imports:[[r.ez,_.fNO,_.goS]]}),T})();a(18832),a(84985);let Z=(()=>{class T{}return T.\u0275fac=function(F){return new(F||T)},T.\u0275mod=f.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=f.\u0275\u0275defineInjector({imports:[[r.ez,_.jhF,_.fNO,_.goS,_.pcV]]}),T})();a(62976);let _t=(()=>{class T{}return T.\u0275fac=function(F){return new(F||T)},T.\u0275mod=f.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=f.\u0275\u0275defineInjector({imports:[[r.ez,_.jhF,_.fNO,_.goS]]}),T})();a(19762);let at=(()=>{class T{}return T.\u0275fac=function(F){return new(F||T)},T.\u0275mod=f.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=f.\u0275\u0275defineInjector({imports:[[r.ez,_.fNO,_.goS]]}),T})();a(7416);var N=a(27050);let z=(()=>{class T{}return T.\u0275fac=function(F){return new(F||T)},T.\u0275mod=f.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=f.\u0275\u0275defineInjector({imports:[[r.ez,_.jhF,_.fNO,N.VM,_.goS,_.dpK,R.Ah6,R.WDk]]}),T})();a(13441);let Y=(()=>{class T{}return T.\u0275fac=function(F){return new(F||T)},T.\u0275mod=f.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=f.\u0275\u0275defineInjector({imports:[[r.ez,_.jhF,_.fNO,_.goS,R.WDk]]}),T})();a(95558);let it=(()=>{class T{}return T.\u0275fac=function(F){return new(F||T)},T.\u0275mod=f.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=f.\u0275\u0275defineInjector({imports:[[r.ez,_.jhF,N.VM,_.fNO,_.goS,R.Ah6,_.dpK,R.WDk]]}),T})();a(28962),a(74549);let Et=(()=>{class T{}return T.\u0275fac=function(F){return new(F||T)},T.\u0275mod=f.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=f.\u0275\u0275defineInjector({imports:[[r.ez,R.IhY]]}),T})(),Mt=(()=>{class T{}return T.\u0275fac=function(F){return new(F||T)},T.\u0275mod=f.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=f.\u0275\u0275defineInjector({imports:[[r.ez,_.jhF,_.dpK,_.fNO,_.goS,Et]]}),T})();a(76965);let ot=(()=>{class T{}return T.\u0275fac=function(F){return new(F||T)},T.\u0275mod=f.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=f.\u0275\u0275defineInjector({imports:[[r.ez,_.fNO,_.goS,R.WDk]]}),T})();a(22063);let J=(()=>{class T{}return T.\u0275fac=function(F){return new(F||T)},T.\u0275mod=f.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=f.\u0275\u0275defineInjector({imports:[[r.ez,_.jhF,_.goS,_.fNO,_.pcV,R.WDk]]}),T})();a(10528);let I=(()=>{class T{}return T.\u0275fac=function(F){return new(F||T)},T.\u0275mod=f.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=f.\u0275\u0275defineInjector({imports:[[r.ez,_.fNO,_.jhF,_.dpK,_.goS,N.VM,R.Ah6,R.WDk]]}),T})()},13441:(yt,tt,a)=>{a.d(tt,{w:()=>w});var m=a(40632),r=a(62842),R=a(9112),_=a(88002),f=a(74788),U=a(12057),v=a(5723),G=a(62939),j=a(76189),q=a(67446),X=a(29070),et=a(54255),Z=a(15491),st=a(219);function _t(N,z){if(1&N){const L=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"div",6),f.\u0275\u0275elementStart(1,"button",7),f.\u0275\u0275listener("click",function(){return f.\u0275\u0275restoreView(L),f.\u0275\u0275nextContext(3).editor.toggleUnorderedList()}),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(2,"button",8),f.\u0275\u0275listener("click",function(){return f.\u0275\u0275restoreView(L),f.\u0275\u0275nextContext(3).editor.toggleOrderedList()}),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(3,"button",9),f.\u0275\u0275listener("click",function(){return f.\u0275\u0275restoreView(L),f.\u0275\u0275nextContext(3).sinkListItem()}),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(4,"button",10),f.\u0275\u0275listener("click",function(){return f.\u0275\u0275restoreView(L),f.\u0275\u0275nextContext(3).liftListItem()}),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd()}if(2&N){const L=f.\u0275\u0275nextContext().tuiLet,Y=f.\u0275\u0275nextContext().ngIf;f.\u0275\u0275advance(1),f.\u0275\u0275property("tuiHint",Y.unorderedList)("pseudoActive",!(null==L||!L.unordered)),f.\u0275\u0275advance(1),f.\u0275\u0275property("tuiHint",Y.orderedList)("pseudoActive",!(null==L||!L.ordered)),f.\u0275\u0275advance(1),f.\u0275\u0275property("tuiHint",Y.indent)("disabled",!(null!=L&&L.ordered||null!=L&&L.unordered)),f.\u0275\u0275advance(1),f.\u0275\u0275property("tuiHint",Y.outdent)("disabled",!(null!=L&&L.ordered||null!=L&&L.unordered))}}function ft(N,z){if(1&N&&(f.\u0275\u0275elementStart(0,"tui-hosted-dropdown",2,3),f.\u0275\u0275element(2,"button",4),f.\u0275\u0275template(3,_t,5,8,"ng-template",null,5,f.\u0275\u0275templateRefExtractor),f.\u0275\u0275elementEnd()),2&N){const L=z.tuiLet,Y=f.\u0275\u0275reference(1),nt=f.\u0275\u0275reference(4),it=f.\u0275\u0275nextContext().ngIf;f.\u0275\u0275property("content",nt),f.\u0275\u0275advance(2),f.\u0275\u0275property("tuiHint",it.list)("tuiHintDescribe","")("pseudoActive",(null==Y?null:Y.open)||(null==L?null:L.unordered)||(null==L?null:L.ordered)||!1)("focusable",Y.open)}}function at(N,z){if(1&N&&(f.\u0275\u0275elementContainerStart(0),f.\u0275\u0275template(1,ft,5,5,"tui-hosted-dropdown",1),f.\u0275\u0275pipe(2,"async"),f.\u0275\u0275elementContainerEnd()),2&N){const L=f.\u0275\u0275nextContext();f.\u0275\u0275advance(1),f.\u0275\u0275property("tuiLet",f.\u0275\u0275pipeBind1(2,1,L.listState$))}}let w=(()=>{class N{constructor(L,Y){this.editor=L,this.texts$=Y,this.listState$=(0,R.aj)([this.editor.isActive$("orderedList"),this.editor.isActive$("bulletList")]).pipe((0,_.U)(([nt,it])=>({ordered:nt,unordered:it})))}sinkListItem(){this.editor.sinkListItem()}liftListItem(){this.editor.liftListItem()}}return N.\u0275fac=function(L){return new(L||N)(f.\u0275\u0275directiveInject(m.$3),f.\u0275\u0275directiveInject(r.rf))},N.\u0275cmp=f.\u0275\u0275defineComponent({type:N,selectors:[["tui-list-configs"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["list",""],["tuiIconButton","","type","button","size","s","icon","tuiIconViewListLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__ordering-list-button",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["listDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconViewListLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOLLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconIndentLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","disabled","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOutdentLarge","appearance","icon",1,"t-option",3,"tuiHint","disabled","click"]],template:function(L,Y){1&L&&(f.\u0275\u0275template(0,at,3,3,"ng-container",0),f.\u0275\u0275pipe(1,"async")),2&L&&f.\u0275\u0275property("ngIf",f.\u0275\u0275pipeBind1(1,1,Y.texts$))},directives:[U.O5,v.L,G.o,j.v,q.D,X.x,et.t,Z.D,st.$],pipes:[U.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:.3s;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:21.25rem}"],changeDetection:0}),N})()},95558:(yt,tt,a)=>{a.d(tt,{p:()=>it});var m=a(64762),r=a(40632),R=a(62842),_=a(40287),f=a(88002),U=a(87519),v=a(74788),G=a(5723),j=a(62939),q=a(33250),X=a(76189),et=a(67446),Z=a(29070),st=a(54255),_t=a(15491),ft=a(219),at=a(12057),w=a(5451),N=a(17163);function z(dt,ct){if(1&dt&&v.\u0275\u0275element(0,"div",7),2&dt){const Et=v.\u0275\u0275nextContext(2).tuiLet;v.\u0275\u0275styleProp("background",Et)}}function L(dt,ct){if(1&dt){const Et=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"tui-palette",8),v.\u0275\u0275listener("selectedColor",function(ht){return v.\u0275\u0275restoreView(Et),v.\u0275\u0275nextContext(3).setCellColor(ht)}),v.\u0275\u0275elementEnd()}if(2&dt){const Et=ct.$implicit,Mt=v.\u0275\u0275nextContext(3);v.\u0275\u0275property("tuiActiveZoneParent",Et)("colors",Mt.colors)}}function Y(dt,ct){if(1&dt&&(v.\u0275\u0275elementStart(0,"tui-hosted-dropdown",2,3),v.\u0275\u0275element(2,"button",4),v.\u0275\u0275pipe(3,"async"),v.\u0275\u0275template(4,z,1,2,"div",5),v.\u0275\u0275template(5,L,1,2,"ng-template",null,6,v.\u0275\u0275templateRefExtractor),v.\u0275\u0275elementEnd()),2&dt){const Et=ct.tuiLet,Mt=v.\u0275\u0275reference(1),ht=v.\u0275\u0275reference(6),ot=v.\u0275\u0275nextContext().tuiLet,O=v.\u0275\u0275nextContext();v.\u0275\u0275property("content",ht)("tuiDropdownMaxHeight",999)("canOpen",!!Et),v.\u0275\u0275advance(2),v.\u0275\u0275property("tuiHint",v.\u0275\u0275pipeBind1(3,9,O.cellColorText$))("tuiHintDescribe","")("pseudoActive",Mt.open)("focusable",Mt.open)("disabled",!Et),v.\u0275\u0275advance(2),v.\u0275\u0275property("ngIf",!O.isBlankColor(ot||""))}}function nt(dt,ct){if(1&dt&&(v.\u0275\u0275elementContainerStart(0),v.\u0275\u0275template(1,Y,7,11,"tui-hosted-dropdown",1),v.\u0275\u0275pipe(2,"async"),v.\u0275\u0275elementContainerEnd()),2&dt){const Et=v.\u0275\u0275nextContext();v.\u0275\u0275advance(1),v.\u0275\u0275property("tuiLet",v.\u0275\u0275pipeBind1(2,1,Et.isActive$))}}class it{constructor(ct,Et,Mt){this.defaultOptions=ct,this.editor=Et,this.texts$=Mt,this.colors=this.defaultOptions.colors,this.cellColorText$=this.texts$.pipe((0,f.U)(ht=>ht.cellColor)),this.isActive$=this.editor.isActive$("table"),this.cellColor$=this.editor.stateChange$.pipe((0,f.U)(()=>this.editor.getCellColor()||this.defaultOptions.blankColor),(0,U.x)())}isBlankColor(ct){return ct===this.defaultOptions.blankColor}setCellColor(ct){this.editor.setCellColor(ct)}}it.\u0275fac=function(ct){return new(ct||it)(v.\u0275\u0275directiveInject(R.mJ),v.\u0275\u0275directiveInject(r.$3),v.\u0275\u0275directiveInject(R.rf))},it.\u0275cmp=v.\u0275\u0275defineComponent({type:it,selectors:[["tui-table-cell-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen"],["cellColorSelect",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconPaintLarge",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","disabled"],["class","t-plate t-plate_paint",3,"background",4,"ngIf"],["cellColorDropdown",""],[1,"t-plate","t-plate_paint"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(ct,Et){1&ct&&(v.\u0275\u0275template(0,nt,3,3,"ng-container",0),v.\u0275\u0275pipe(1,"async")),2&ct&&v.\u0275\u0275property("tuiLet",v.\u0275\u0275pipeBind1(1,1,Et.cellColor$))},directives:[G.L,j.o,q.Ek,X.v,et.D,Z.x,st.t,_t.D,ft.$,at.O5,w.R,N.e],pipes:[at.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:.3s;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:21.25rem}"],changeDetection:0}),(0,m.gn)([(0,_.THR)()],it.prototype,"colors",void 0)},28962:(yt,tt,a)=>{a.d(tt,{l:()=>ft});var m=a(40632),r=a(62842),R=a(88002),_=a(74788),f=a(62939),U=a(33250),v=a(76189),G=a(67446),j=a(29070),q=a(54255),X=a(15491),et=a(219),Z=a(74549),st=a(12057);function _t(at,w){if(1&at){const N=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"tui-table-size-selector",4),_.\u0275\u0275listener("onSelectSize",function(L){return _.\u0275\u0275restoreView(N),_.\u0275\u0275nextContext().addTable(L)}),_.\u0275\u0275elementEnd()}}let ft=(()=>{class at{constructor(N,z){this.editor=N,this.texts$=z,this.insertTableText$=this.texts$.pipe((0,R.U)(L=>L.insertTable))}addTable({rows:N,cols:z}){this.editor.enter();const L=this.editor.state.selection.anchor;this.editor.enter(),this.editor.enter(),this.editor.setTextSelection(L),this.editor.insertTable(N,z)}}return at.\u0275fac=function(N){return new(N||at)(_.\u0275\u0275directiveInject(m.$3),_.\u0275\u0275directiveInject(r.rf))},at.\u0275cmp=_.\u0275\u0275defineComponent({type:at,selectors:[["tui-table-create"]],decls:6,vars:6,consts:[["tuiDropdownAlign","left","tuiDropdownDirection","bottom",3,"content"],["table",""],["tuiIconButton","","type","button","size","s","icon","tuiIconTableLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable"],["tableDropdown",""],[3,"onSelectSize"]],template:function(N,z){if(1&N&&(_.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0,1),_.\u0275\u0275element(2,"button",2),_.\u0275\u0275pipe(3,"async"),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(4,_t,1,0,"ng-template",null,3,_.\u0275\u0275templateRefExtractor)),2&N){const L=_.\u0275\u0275reference(1),Y=_.\u0275\u0275reference(5);_.\u0275\u0275property("content",Y),_.\u0275\u0275advance(2),_.\u0275\u0275property("tuiHint",_.\u0275\u0275pipeBind1(3,4,z.insertTableText$))("tuiHintDescribe","")("focusable",L.open)}},directives:[f.o,U.Ek,v.v,G.D,j.x,q.t,X.D,et.$,Z.M],pipes:[st.Ov],encapsulation:2,changeDetection:0}),at})()},76965:(yt,tt,a)=>{a.d(tt,{Y:()=>at});var m=a(40632),r=a(62842),R=a(88002),_=a(87519),f=a(74788),U=a(5723),v=a(12057),G=a(76189),j=a(67446),q=a(29070),X=a(54255),et=a(15491),Z=a(219);function st(w,N){if(1&w){const z=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"button",2),f.\u0275\u0275listener("click",function(){f.\u0275\u0275restoreView(z);const Y=f.\u0275\u0275nextContext().tuiLet,nt=f.\u0275\u0275nextContext();return Y.mergeCells?nt.mergeCells():nt.splitCell()}),f.\u0275\u0275elementEnd()}if(2&w){const z=N.ngIf,L=f.\u0275\u0275nextContext().tuiLet;f.\u0275\u0275property("icon",L.mergeCells?"tuiIconTableMergeLarge":"tuiIconTableSplitLarge")("tuiHint",L.mergeCells?z.mergeCells:z.splitCells)("tuiHintDescribe","")("focusable",!1)("disabled",!L.mergeCells&&!L.splitCells)}}function _t(w,N){if(1&w&&(f.\u0275\u0275elementContainerStart(0),f.\u0275\u0275template(1,st,1,5,"button",1),f.\u0275\u0275pipe(2,"async"),f.\u0275\u0275elementContainerEnd()),2&w){const z=f.\u0275\u0275nextContext();f.\u0275\u0275advance(1),f.\u0275\u0275property("ngIf",f.\u0275\u0275pipeBind1(2,1,z.texts$))}}const ft=function(w,N){return{mergeCells:w,splitCells:N}};let at=(()=>{class w{constructor(z,L){this.editor=z,this.texts$=L,this.canMergeCells$=this.editor.stateChange$.pipe((0,R.U)(()=>this.editor.canMergeCells()),(0,_.x)()),this.canSplitCells$=this.editor.stateChange$.pipe((0,R.U)(()=>this.editor.canSplitCells()),(0,_.x)())}mergeCells(){this.editor.mergeCells()}splitCell(){this.editor.splitCell()}}return w.\u0275fac=function(z){return new(z||w)(f.\u0275\u0275directiveInject(m.$3),f.\u0275\u0275directiveInject(r.rf))},w.\u0275cmp=f.\u0275\u0275defineComponent({type:w,selectors:[["tui-table-merge-cells"]],decls:3,vars:8,consts:[[4,"tuiLet"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left",3,"icon","tuiHint","tuiHintDescribe","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left",3,"icon","tuiHint","tuiHintDescribe","focusable","disabled","click"]],template:function(z,L){1&z&&(f.\u0275\u0275template(0,_t,3,3,"ng-container",0),f.\u0275\u0275pipe(1,"async"),f.\u0275\u0275pipe(2,"async")),2&z&&f.\u0275\u0275property("tuiLet",f.\u0275\u0275pureFunction2(5,ft,f.\u0275\u0275pipeBind1(1,1,L.canMergeCells$),f.\u0275\u0275pipeBind1(2,3,L.canSplitCells$)))},directives:[U.L,v.O5,G.v,j.D,q.x,X.t,et.D,Z.$],pipes:[v.Ov],encapsulation:2,changeDetection:0}),w})()},22063:(yt,tt,a)=>{a.d(tt,{_:()=>Y});var m=a(40632),r=a(62842),R=a(88002),_=a(74788),f=a(5723),U=a(62939),v=a(76189),G=a(67446),j=a(29070),q=a(54255),X=a(15491),et=a(219),Z=a(20933),st=a(12057),_t=a(89786),ft=a(35065);function at(nt,it){if(1&nt&&(_.\u0275\u0275elementStart(0,"tui-hosted-dropdown",2,3),_.\u0275\u0275element(2,"button",4),_.\u0275\u0275pipe(3,"async"),_.\u0275\u0275elementEnd()),2&nt){const dt=it.tuiLet,ct=_.\u0275\u0275reference(1),Et=_.\u0275\u0275nextContext(),Mt=_.\u0275\u0275reference(3);_.\u0275\u0275property("content",Mt)("canOpen",!!dt),_.\u0275\u0275advance(2),_.\u0275\u0275property("tuiHint",_.\u0275\u0275pipeBind1(3,6,Et.rowsColumnsManagingText$))("tuiHintDescribe","")("focusable",ct.open)("disabled",!dt)}}function w(nt,it){if(1&nt){const dt=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"button",7),_.\u0275\u0275listener("click",function(){const Mt=_.\u0275\u0275restoreView(dt).index,ht=_.\u0275\u0275nextContext().index;return _.\u0275\u0275nextContext(2).onTableOption(2*ht+Mt)}),_.\u0275\u0275text(1),_.\u0275\u0275elementEnd()}if(2&nt){const dt=it.$implicit;_.\u0275\u0275advance(1),_.\u0275\u0275textInterpolate1(" ",dt," ")}}function N(nt,it){if(1&nt&&(_.\u0275\u0275elementStart(0,"tui-opt-group"),_.\u0275\u0275template(1,w,2,1,"button",6),_.\u0275\u0275elementEnd()),2&nt){const dt=it.$implicit;_.\u0275\u0275advance(1),_.\u0275\u0275property("ngForOf",dt)}}function z(nt,it){if(1&nt&&(_.\u0275\u0275elementStart(0,"tui-data-list"),_.\u0275\u0275template(1,N,2,1,"tui-opt-group",5),_.\u0275\u0275pipe(2,"async"),_.\u0275\u0275elementEnd()),2&nt){const dt=_.\u0275\u0275nextContext();_.\u0275\u0275advance(1),_.\u0275\u0275property("ngForOf",_.\u0275\u0275pipeBind1(2,1,dt.tableCommandTexts$))}}var L=(()=>{return(nt=L||(L={}))[nt.InsertColumnBefore=0]="InsertColumnBefore",nt[nt.InsertColumnAfter=1]="InsertColumnAfter",nt[nt.InsertRowBefore=2]="InsertRowBefore",nt[nt.InsertRowAfter=3]="InsertRowAfter",nt[nt.DeleteColumn=4]="DeleteColumn",nt[nt.DeleteRow=5]="DeleteRow",L;var nt})();let Y=(()=>{class nt{constructor(dt,ct,Et){this.editor=dt,this.texts$=ct,this.tableCommandTexts$=Et,this.commandsRegistry={[L.InsertColumnAfter]:()=>this.editor.addColumnAfter(),[L.InsertColumnBefore]:()=>this.editor.addColumnBefore(),[L.InsertRowAfter]:()=>this.editor.addRowAfter(),[L.InsertRowBefore]:()=>this.editor.addRowBefore(),[L.DeleteColumn]:()=>this.editor.deleteColumn(),[L.DeleteRow]:()=>this.editor.deleteRow()},this.isActive$=this.editor.isActive$("table"),this.rowsColumnsManagingText$=this.texts$.pipe((0,R.U)(Mt=>Mt.rowsColumnsManaging))}onTableOption(dt){this.commandsRegistry[dt]()}}return nt.\u0275fac=function(dt){return new(dt||nt)(_.\u0275\u0275directiveInject(m.$3),_.\u0275\u0275directiveInject(r.rf),_.\u0275\u0275directiveInject(r.$i))},nt.\u0275cmp=_.\u0275\u0275defineComponent({type:nt,selectors:[["tui-table-row-column-manager"]],decls:4,vars:3,consts:[[3,"content","canOpen",4,"tuiLet"],["tableOptionsDropdown",""],[3,"content","canOpen"],["tableCommand",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAddRowLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","disabled"],[4,"ngFor","ngForOf"],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(dt,ct){1&dt&&(_.\u0275\u0275template(0,at,4,8,"tui-hosted-dropdown",0),_.\u0275\u0275pipe(1,"async"),_.\u0275\u0275template(2,z,3,3,"ng-template",null,1,_.\u0275\u0275templateRefExtractor)),2&dt&&_.\u0275\u0275property("tuiLet",_.\u0275\u0275pipeBind1(1,1,ct.isActive$))},directives:[f.L,U.o,v.v,G.D,j.x,q.t,X.D,et.$,Z.q,st.sg,_t.R,ft.v],pipes:[st.Ov],encapsulation:2,changeDetection:0}),nt})()},74549:(yt,tt,a)=>{a.d(tt,{M:()=>q});var m=a(74788),r=a(62579),R=a(66187),_=a(36097);function f(X,et){if(1&X){const Z=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"div",4),m.\u0275\u0275listener("mouseenter",function(_t){const at=m.\u0275\u0275restoreView(Z).$implicit,w=m.\u0275\u0275nextContext().$implicit;return m.\u0275\u0275nextContext().updateCurrentSize(at+1,w+1,_t)})("click",function(){return m.\u0275\u0275restoreView(Z),m.\u0275\u0275nextContext(2).onClick()}),m.\u0275\u0275elementEnd()}if(2&X){const Z=et.$implicit,st=m.\u0275\u0275nextContext().$implicit,_t=m.\u0275\u0275nextContext();m.\u0275\u0275classProp("t-cell_hovered",_t.tableSelectHovered(Z,st))}}function U(X,et){if(1&X&&(m.\u0275\u0275elementStart(0,"div",2),m.\u0275\u0275template(1,f,1,2,"div",3),m.\u0275\u0275elementEnd()),2&X){const Z=m.\u0275\u0275nextContext();m.\u0275\u0275advance(1),m.\u0275\u0275property("tuiRepeatTimesOf",Z.rowsNumber)}}let q=(()=>{class X{constructor(Z){this.windowRef=Z,this.onSelectSize=new m.EventEmitter,this.tableSize={rows:1,cols:1}}get columnsNumber(){return Math.min(Math.max(3,this.tableSize.cols+1),15)}get rowsNumber(){return Math.min(Math.max(3,this.tableSize.rows+1),15)}tableSelectHovered(Z,st){return Z<this.tableSize.rows&&st<this.tableSize.cols}updateCurrentSize(Z,st,_t){(0,R.ic8)(this.windowRef)-_t.clientX>70&&(this.tableSize={rows:Z,cols:st})}onClick(){this.onSelectSize.emit(this.tableSize)}}return X.\u0275fac=function(Z){return new(Z||X)(m.\u0275\u0275directiveInject(r.m9))},X.\u0275cmp=m.\u0275\u0275defineComponent({type:X,selectors:[["tui-table-size-selector"]],outputs:{onSelectSize:"onSelectSize"},decls:3,vars:3,consts:[["class","t-column",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-description"],[1,"t-column"],["class","t-cell",3,"t-cell_hovered","mouseenter","click",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-cell",3,"mouseenter","click"]],template:function(Z,st){1&Z&&(m.\u0275\u0275template(0,U,2,1,"div",0),m.\u0275\u0275elementStart(1,"div",1),m.\u0275\u0275text(2),m.\u0275\u0275elementEnd()),2&Z&&(m.\u0275\u0275property("tuiRepeatTimesOf",st.columnsNumber),m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate2("",st.tableSize.cols,"\xd7",st.tableSize.rows,""))},directives:[_.X],styles:["[_nghost-%COMP%]{display:block;padding:.75rem}.t-cell[_ngcontent-%COMP%]{display:inline-block;background-color:var(--tui-base-01);width:1.25rem;height:1.25rem;border-radius:.25rem;margin:.125rem;border:1px solid var(--tui-base-04);cursor:pointer}.t-cell_hovered[_ngcontent-%COMP%]{background-color:var(--tui-base-02)}.t-column[_ngcontent-%COMP%]{white-space:nowrap}.t-description[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),X})()},10528:(yt,tt,a)=>{a.d(tt,{G:()=>Y});var m=a(64762),r=a(40632),R=a(62842),_=a(40287),f=a(88002),U=a(87519),v=a(74788),G=a(5723),j=a(62939),q=a(33250),X=a(76189),et=a(67446),Z=a(29070),st=a(54255),_t=a(15491),ft=a(219),at=a(5451),w=a(17163),N=a(12057);function z(nt,it){if(1&nt){const dt=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"tui-palette",6),v.\u0275\u0275listener("selectedColor",function(Et){return v.\u0275\u0275restoreView(dt),v.\u0275\u0275nextContext(2).editor.setFontColor(Et)}),v.\u0275\u0275elementEnd()}if(2&nt){const dt=it.$implicit,ct=v.\u0275\u0275nextContext(2);v.\u0275\u0275property("tuiActiveZoneParent",dt)("colors",ct.colors)}}function L(nt,it){if(1&nt&&(v.\u0275\u0275elementStart(0,"tui-hosted-dropdown",1,2),v.\u0275\u0275element(2,"button",3),v.\u0275\u0275pipe(3,"async"),v.\u0275\u0275element(4,"div",4),v.\u0275\u0275template(5,z,1,2,"ng-template",null,5,v.\u0275\u0275templateRefExtractor),v.\u0275\u0275elementEnd()),2&nt){const dt=it.tuiLet,ct=v.\u0275\u0275reference(1),Et=v.\u0275\u0275reference(6),Mt=v.\u0275\u0275nextContext();v.\u0275\u0275property("content",Et)("tuiDropdownMaxHeight",999),v.\u0275\u0275advance(2),v.\u0275\u0275property("tuiHint",v.\u0275\u0275pipeBind1(3,8,Mt.foreColorText$))("tuiHintDescribe","")("pseudoActive",ct.open)("focusable",ct.open),v.\u0275\u0275advance(2),v.\u0275\u0275styleProp("background",dt)}}class Y{constructor(it,dt,ct){this.defaultOptions=it,this.editor=dt,this.texts$=ct,this.colors=this.defaultOptions.colors,this.fontColor$=this.editor.stateChange$.pipe((0,f.U)(()=>this.editor.getFontColor()||this.defaultOptions.blankColor),(0,U.x)()),this.foreColorText$=this.texts$.pipe((0,f.U)(Et=>Et.foreColor))}}Y.\u0275fac=function(it){return new(it||Y)(v.\u0275\u0275directiveInject(R.mJ),v.\u0275\u0275directiveInject(r.$3),v.\u0275\u0275directiveInject(R.rf))},Y.\u0275cmp=v.\u0275\u0275defineComponent({type:Y,selectors:[["tui-text-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["color",""],["tuiIconButton","","type","button","size","s","icon","tuiIconColorLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__color-button",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],[1,"t-plate"],["colorDropdown",""],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(it,dt){1&it&&(v.\u0275\u0275template(0,L,7,10,"tui-hosted-dropdown",0),v.\u0275\u0275pipe(1,"async")),2&it&&v.\u0275\u0275property("tuiLet",v.\u0275\u0275pipeBind1(1,1,dt.fontColor$))},directives:[G.L,j.o,q.Ek,X.v,et.D,Z.x,st.t,_t.D,ft.$,at.R,w.e],pipes:[N.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:.3s;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:21.25rem}"],changeDetection:0}),(0,m.gn)([(0,_.THR)()],Y.prototype,"colors",void 0)},17406:(yt,tt,a)=>{a.d(tt,{M6:()=>m.M,yB:()=>G});var m=a(4997),r=a(12057),R=a(71115),_=a(93252),f=a(40287),U=a(66187),v=a(74788);let G=(()=>{class q{}return q.\u0275fac=function(et){return new(et||q)},q.\u0275mod=v.\u0275\u0275defineNgModule({type:q}),q.\u0275inj=v.\u0275\u0275defineInjector({imports:[[r.ez,U.goS,f.udY,U.fNO,U.jhF,R.F,_.er,_.mp,_.__,_.iA,_.p7,_.Zv,_.pu,_.Ur,_._t,_.XC,_.P_,_.y9,f.HOV,_.jP]]}),q})();a(13044)},13044:(yt,tt,a)=>{a.d(tt,{B:()=>R});var m=a(74788),r=a(40287);let R=(()=>{class _{constructor(U){this.elementRef=U}get toolsContainers(){return Array.from(this.elementRef.nativeElement.querySelectorAll("[tuiItem]"))}onHorizontalNavigation(U){const{toolsContainers:v}=this,G=v.findIndex(r.zb4),q=v[(0,r.Kiv)(G+(U?-1:1),0,v.length-1)],X=U?this.findPreviousTool(q):this.findNextTool(q);X&&X.focus()}findFirstFocusableTool(U=!1){const v=U?this.toolsContainers.slice().reverse():this.toolsContainers;for(const G of v){const j=(0,r._hh)(G)?G:(0,r.BWF)({initial:G,root:G,keyboard:!1});if(j)return j}return null}findPreviousTool(U){return(0,r._hh)(U)?U:(0,r.BWF)({initial:U,root:U,keyboard:!1})||(0,r.BWF)({initial:U,root:this.elementRef.nativeElement,previous:!0,keyboard:!1})}findNextTool(U){return(0,r._hh)(U)?U:(0,r.BWF)({initial:U,root:this.elementRef.nativeElement,keyboard:!1})}}return _.\u0275fac=function(U){return new(U||_)(m.\u0275\u0275directiveInject(m.ElementRef))},_.\u0275dir=m.\u0275\u0275defineDirective({type:_,selectors:[["","tuiToolbarNavigationManager",""]],hostBindings:function(U,v){1&U&&m.\u0275\u0275listener("keydown.arrowRight.prevent",function(){return v.onHorizontalNavigation(!1)})("keydown.arrowLeft.prevent",function(){return v.onHorizontalNavigation(!0)})}}),_})()},4997:(yt,tt,a)=>{a.d(tt,{M:()=>M});var m=a(64762),r=a(74788),R=a(19074),_=a(40632),f=a(48699),U=a(62842),v=a(40287),G=a(15257),j=a(13044),q=a(12057),X=a(48893),et=a(76189),Z=a(82707),st=a(67446),_t=a(29070),ft=a(54255),at=a(15491),w=a(219),N=a(84985),z=a(62976),L=a(37924),Y=a(13441),nt=a(62939),it=a(45050),dt=a(10528),ct=a(7416),Et=a(15587),Mt=a(50237),ht=a(18832),ot=a(19762),O=a(28962),J=a(22063),x=a(76965),I=a(95558);const T=["dropdown"];function k(D,H){1&D&&r.\u0275\u0275elementContainer(0)}function F(D,H){if(1&D){const S=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",6),r.\u0275\u0275elementStart(1,"button",7),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(S),r.\u0275\u0275nextContext(2).undo()}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"button",8),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(S),r.\u0275\u0275nextContext(2).redo()}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&D){const S=r.\u0275\u0275nextContext().ngIf,Q=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiHint",S.undo)("tuiHintDescribe","")("disabled",Q.undoDisabled)("focusable",!1),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiHint",S.redo)("tuiHintDescribe","")("disabled",Q.redoDisabled)("focusable",!1)}}function ut(D,H){1&D&&(r.\u0275\u0275elementStart(0,"div",6),r.\u0275\u0275element(1,"tui-font-size",9),r.\u0275\u0275elementEnd())}function pt(D,H){if(1&D&&r.\u0275\u0275element(0,"tui-font-style",15),2&D){const S=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("enabledTools",S.toolsSet)}}function Tt(D,H){1&D&&r.\u0275\u0275element(0,"tui-align-content",9)}function Pt(D,H){1&D&&r.\u0275\u0275element(0,"tui-list-configs",9)}function kt(D,H){if(1&D){const S=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",16,17),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(S),r.\u0275\u0275nextContext(3).toggleQuote()}),r.\u0275\u0275elementEnd()}if(2&D){const S=r.\u0275\u0275nextContext(2).ngIf,Q=r.\u0275\u0275nextContext();r.\u0275\u0275property("tuiHint",S.quote)("tuiHintDescribe","")("pseudoActive",Q.blockquote)("disabled",Q.unorderedList||Q.orderedList)("focusable",!1)}}function Wt(D,H){if(1&D){const S=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-edit-link",22,23),r.\u0275\u0275listener("addLink",function(vt){r.\u0275\u0275restoreView(S),r.\u0275\u0275nextContext();const xt=r.\u0275\u0275reference(1);return r.\u0275\u0275nextContext(3).onLink(xt,vt)})("removeLink",function(){r.\u0275\u0275restoreView(S),r.\u0275\u0275nextContext();const vt=r.\u0275\u0275reference(1);return r.\u0275\u0275nextContext(3).onLink(vt)}),r.\u0275\u0275elementEnd()}}function Lt(D,H){if(1&D&&(r.\u0275\u0275elementStart(0,"tui-hosted-dropdown",18,19),r.\u0275\u0275element(2,"button",20,17),r.\u0275\u0275template(4,Wt,2,0,"ng-template",null,21,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&D){const S=r.\u0275\u0275reference(1),Q=r.\u0275\u0275reference(5),vt=r.\u0275\u0275nextContext(2).ngIf,xt=r.\u0275\u0275nextContext();r.\u0275\u0275property("canOpen",!xt.a)("content",Q),r.\u0275\u0275advance(2),r.\u0275\u0275property("tuiHint",vt.link)("tuiHintDescribe","")("pseudoActive",S.open||xt.a)("focusable",S.open)}}function Bt(D,H){if(1&D){const S=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",24,17),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(S),r.\u0275\u0275nextContext(3).onAttach()}),r.\u0275\u0275elementEnd()}if(2&D){const S=r.\u0275\u0275nextContext(2).ngIf;r.\u0275\u0275property("tuiHint",S.attach)("tuiHintDescribe","")("focusable",!1)}}function wt(D,H){if(1&D&&(r.\u0275\u0275elementStart(0,"div",6),r.\u0275\u0275template(1,pt,1,1,"tui-font-style",10),r.\u0275\u0275template(2,Tt,1,0,"tui-align-content",11),r.\u0275\u0275template(3,Pt,1,0,"tui-list-configs",11),r.\u0275\u0275template(4,kt,2,5,"button",12),r.\u0275\u0275template(5,Lt,6,6,"tui-hosted-dropdown",13),r.\u0275\u0275template(6,Bt,2,3,"button",14),r.\u0275\u0275elementEnd()),2&D){const S=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.formatEnabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Align)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.List)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Quote)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Link)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Attach))}}function Ft(D,H){if(1&D){const S=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",27,17),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(S),r.\u0275\u0275nextContext(3).toggleSubscript()}),r.\u0275\u0275elementEnd()}if(2&D){const S=r.\u0275\u0275nextContext(2).ngIf,Q=r.\u0275\u0275nextContext();r.\u0275\u0275property("tuiHint",S.subscript)("tuiHintDescribe","")("pseudoActive",Q.subscript)("focusable",!1)}}function Zt(D,H){if(1&D){const S=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",28,17),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(S),r.\u0275\u0275nextContext(3).toggleSuperscript()}),r.\u0275\u0275elementEnd()}if(2&D){const S=r.\u0275\u0275nextContext(2).ngIf,Q=r.\u0275\u0275nextContext();r.\u0275\u0275property("tuiHint",S.superscript)("tuiHintDescribe","")("pseudoActive",Q.superscript)("focusable",!1)}}function Vt(D,H){if(1&D&&(r.\u0275\u0275elementStart(0,"div",6),r.\u0275\u0275template(1,Ft,2,4,"button",25),r.\u0275\u0275template(2,Zt,2,4,"button",26),r.\u0275\u0275elementEnd()),2&D){const S=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Sub)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Sup))}}function jt(D,H){if(1&D&&r.\u0275\u0275element(0,"tui-text-color",30),2&D){const S=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("colors",S.colors)}}function me(D,H){if(1&D&&r.\u0275\u0275element(0,"tui-highlight-color",30),2&D){const S=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("colors",S.colors)}}function zt(D,H){if(1&D&&(r.\u0275\u0275elementStart(0,"div",6),r.\u0275\u0275template(1,jt,1,1,"tui-text-color",29),r.\u0275\u0275template(2,me,1,1,"tui-highlight-color",29),r.\u0275\u0275elementEnd()),2&D){const S=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Color)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Hilite))}}function _e(D,H){1&D&&r.\u0275\u0275element(0,"tui-code",9)}function de(D,H){if(1&D){const S=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",34,17),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(S),r.\u0275\u0275nextContext(3).onTeX()}),r.\u0275\u0275elementEnd()}if(2&D){const S=r.\u0275\u0275nextContext(2).ngIf;r.\u0275\u0275property("tuiHint",S.tex)("tuiHintDescribe","")("focusable",!1)}}function Xt(D,H){if(1&D){const S=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",35),r.\u0275\u0275elementStart(1,"button",36,17),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(S),r.\u0275\u0275reference(4).click()}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"input",37,38),r.\u0275\u0275listener("change",function(){r.\u0275\u0275restoreView(S);const vt=r.\u0275\u0275reference(4);return r.\u0275\u0275nextContext(3).onImage(vt)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&D){const S=r.\u0275\u0275nextContext(2).ngIf;r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiHint",S.image)("tuiHintDescribe","")("focusable",!1),r.\u0275\u0275advance(2),r.\u0275\u0275property("tuiFocusable",!1)}}function re(D,H){if(1&D){const S=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",39,17),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(S),r.\u0275\u0275nextContext(3).insertHorizontalRule()}),r.\u0275\u0275elementEnd()}if(2&D){const S=r.\u0275\u0275nextContext(2).ngIf;r.\u0275\u0275property("tuiHint",S.insertHorizontalRule)("tuiHintDescribe","")("focusable",!1)}}function ue(D,H){if(1&D&&(r.\u0275\u0275elementStart(0,"div",6),r.\u0275\u0275template(1,_e,1,0,"tui-code",11),r.\u0275\u0275template(2,de,2,3,"button",31),r.\u0275\u0275template(3,Xt,5,4,"div",32),r.\u0275\u0275template(4,re,2,3,"button",33),r.\u0275\u0275elementEnd()),2&D){const S=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Code)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Tex)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Img)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.HR))}}function pe(D,H){if(1&D){const S=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",6),r.\u0275\u0275elementStart(1,"button",40,17),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(S),r.\u0275\u0275nextContext(2).removeFormat()}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&D){const S=r.\u0275\u0275nextContext().ngIf;r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiHint",S.clear)("tuiHintDescribe","")("focusable",!1)}}function Qt(D,H){1&D&&(r.\u0275\u0275elementStart(0,"div",6),r.\u0275\u0275element(1,"tui-details",41),r.\u0275\u0275element(2,"tui-details-remove",41),r.\u0275\u0275elementEnd())}function Ut(D,H){1&D&&(r.\u0275\u0275elementStart(0,"div",6),r.\u0275\u0275element(1,"tui-editor-group-tool",41),r.\u0275\u0275elementEnd())}function ne(D,H){if(1&D&&(r.\u0275\u0275elementStart(0,"div",6),r.\u0275\u0275element(1,"tui-table-create",41),r.\u0275\u0275element(2,"tui-table-row-column-manager",41),r.\u0275\u0275element(3,"tui-table-merge-cells",41),r.\u0275\u0275element(4,"tui-table-cell-color",30),r.\u0275\u0275elementEnd()),2&D){const S=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275property("colors",S.colors)}}function V(D,H){if(1&D&&(r.\u0275\u0275elementStart(0,"section",4),r.\u0275\u0275template(1,F,3,8,"div",5),r.\u0275\u0275template(2,ut,2,0,"div",5),r.\u0275\u0275template(3,wt,7,6,"div",5),r.\u0275\u0275template(4,Vt,3,2,"div",5),r.\u0275\u0275template(5,zt,3,2,"div",5),r.\u0275\u0275template(6,ue,5,4,"div",5),r.\u0275\u0275template(7,pe,3,3,"div",5),r.\u0275\u0275template(8,Qt,3,0,"div",5),r.\u0275\u0275template(9,Ut,2,0,"div",5),r.\u0275\u0275template(10,ne,5,1,"div",5),r.\u0275\u0275elementStart(11,"div",6),r.\u0275\u0275projection(12),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&D){const S=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Undo)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Size)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.firstBigBlockEnabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Sub)||S.enabled(S.TuiEditorTool.Sup)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Color)||S.enabled(S.TuiEditorTool.Hilite)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.secondBigBlockEnabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Clear)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Details)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Group)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",S.enabled(S.TuiEditorTool.Table))}}class M{constructor(H,S,Q,vt,xt){this.elementRef=H,this.editor=S,this.imageLoader=Q,this.texts$=vt,this.defaultOptions=xt,this.dropdowns=v.Mmc,this.colors=this.defaultOptions.colors,this.disabled=!1,this.linkAdded=new r.EventEmitter,this.texClicked=new r.EventEmitter,this.attachClicked=new r.EventEmitter,this.TuiEditorTool=f._,this.toolsSet=new Set(R.Db)}set tools(H){this.toolsSet=new Set(H)}get focused(){return(0,v.zb4)(this.elementRef.nativeElement)||!!this.dropdowns.find(({nativeElement:H})=>(0,v.zb4)(H))}get focusable(){return!this.focused&&!this.disabled}get unorderedList(){return this.editor.isActive("bulletList")}get orderedList(){return this.editor.isActive("orderedList")}get blockquote(){return this.editor.isActive("blockquote")}get a(){return this.editor.isActive("link")}get undoDisabled(){return this.editor.undoDisabled()}get redoDisabled(){return this.editor.redoDisabled()}get subscript(){return this.editor.isActive("subscript")}get superscript(){return this.editor.isActive("superscript")}get formatEnabled(){return this.enabled(f._.Bold)||this.enabled(f._.Italic)||this.enabled(f._.Underline)||this.enabled(f._.Strikethrough)}get firstBigBlockEnabled(){return this.formatEnabled||this.enabled(f._.Align)||this.enabled(f._.List)||this.enabled(f._.Quote)||this.enabled(f._.Link)||this.enabled(f._.Attach)}get secondBigBlockEnabled(){return this.enabled(f._.Code)||this.enabled(f._.Tex)||this.enabled(f._.Img)||this.enabled(f._.HR)}onMouseDown(H,S){S.closest("button")||(H.preventDefault(),this.editor.focus())}onBottomFocus(){this.focusLast()}onTopFocus(){this.focusFirst()}onImage(H){var S;const Q=null===(S=H.files)||void 0===S?void 0:S[0];H.value="",Q&&this.imageLoader(Q).pipe((0,G.q)(1)).subscribe(vt=>{this.addImage(vt)})}onAttach(){this.attachClicked.emit()}onTeX(){this.texClicked.emit()}onLink(H,S){H.open=!1,S&&(this.editor.toggleLink(S),this.editor.selectClosest())}enabled(H){return this.toolsSet.has(H)}undo(){this.editor.undo()}redo(){this.editor.redo()}insertHorizontalRule(){this.editor.setHorizontalRule()}removeFormat(){this.editor.removeFormat()}toggleOrderedList(){this.editor.toggleOrderedList()}toggleQuote(){this.editor.toggleBlockquote()}toggleSubscript(){this.editor.toggleSubscript()}toggleSuperscript(){this.editor.toggleSuperscript()}addImage(H){this.editor.setImage(H)}focusFirst(){var H;const S=null===(H=this.navigationManager)||void 0===H?void 0:H.findFirstFocusableTool();S&&S.focus()}focusLast(){var H;const S=null===(H=this.navigationManager)||void 0===H?void 0:H.findFirstFocusableTool(!0);S&&S.focus()}}M.\u0275fac=function(H){return new(H||M)(r.\u0275\u0275directiveInject(r.ElementRef,8),r.\u0275\u0275directiveInject(_.$3),r.\u0275\u0275directiveInject(U.p7),r.\u0275\u0275directiveInject(U.rf),r.\u0275\u0275directiveInject(U.mJ))},M.\u0275cmp=r.\u0275\u0275defineComponent({type:M,selectors:[["tui-toolbar"]],viewQuery:function(H,S){if(1&H&&(r.\u0275\u0275viewQuery(j.B,5),r.\u0275\u0275viewQuery(T,5,r.ElementRef)),2&H){let Q;r.\u0275\u0275queryRefresh(Q=r.\u0275\u0275loadQuery())&&(S.navigationManager=Q.first),r.\u0275\u0275queryRefresh(Q=r.\u0275\u0275loadQuery())&&(S.dropdowns=Q)}},hostAttrs:["role","toolbar"],hostVars:2,hostBindings:function(H,S){1&H&&r.\u0275\u0275listener("mousedown",function(vt){return S.onMouseDown(vt,vt.target)}),2&H&&r.\u0275\u0275classProp("_disabled",S.disabled)},inputs:{colors:"colors",disabled:"disabled",tools:"tools"},outputs:{linkAdded:"linkAdded",texClicked:"texClicked",attachClicked:"attachClicked"},ngContentSelectors:["*"],decls:7,vars:8,consts:[[1,"t-prevent-parent-label-behavior"],[4,"ngIf"],[3,"tuiFocusable","focus"],["tuiToolbarNavigationManager","","class","t-tools-wrapper",4,"ngIf"],["tuiToolbarNavigationManager","",1,"t-tools-wrapper"],["class","t-block",4,"ngIf"],[1,"t-block"],["tuiItem","","tuiIconButton","","type","button","size","s","icon","tuiIconUndoLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","disabled","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconRedoLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","disabled","focusable","click"],["tuiItem","",1,"t-tool","t-wrapper"],["tuiItem","","class","t-tool t-wrapper",3,"enabledTools",4,"ngIf"],["tuiItem","","class","t-tool t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","disabled","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",3,"canOpen","content",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconAttachLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"enabledTools"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","disabled","focusable","click"],["button",""],["tuiItem","",1,"t-wrapper",3,"canOpen","content"],["link",""],["tuiIconButton","","type","button","size","s","icon","tuiIconLinkLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["linkDropdown",""],[3,"addLink","removeLink"],["dropdown",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconAttachLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","click"],["tuiItem","","class","t-tool t-wrapper",3,"colors",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"colors"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool",3,"tuiHint","tuiHintDescribe","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool",3,"tuiHint","tuiHintDescribe","focusable","click"],["tuiItem","",1,"t-wrapper"],["tuiIconButton","","type","button","size","s","icon","tuiIconImgLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool",3,"tuiHint","tuiHintDescribe","focusable","click"],["type","file","accept","image/*",1,"t-image",3,"tuiFocusable","change"],["image",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconClearFormatLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click"],["tuiItem","",1,"t-tool","t-tool_margin"]],template:function(H,S){1&H&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275element(0,"button",0),r.\u0275\u0275template(1,k,1,0,"ng-container",1),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275elementStart(3,"div",2),r.\u0275\u0275listener("focus",function(){return S.onTopFocus()}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",2),r.\u0275\u0275listener("focus",function(){return S.onBottomFocus()}),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(5,V,13,10,"section",3),r.\u0275\u0275pipe(6,"async")),2&H&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",r.\u0275\u0275pipeBind1(2,4,S.editor.stateChange$)),r.\u0275\u0275advance(2),r.\u0275\u0275property("tuiFocusable",S.focusable),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiFocusable",S.focusable),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",r.\u0275\u0275pipeBind1(6,6,S.texts$)))},directives:[q.O5,X.t,j.B,et.v,Z.w,st.D,_t.x,ft.t,at.D,w.$,N.m,z.h,L.X,Y.w,nt.o,it.l,dt.G,ct.U,Et.T,Mt.y,ht.U,ot.d,O.l,J._,x.Y,I.p],pipes:[q.Ov],styles:['.t-tools-wrapper[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;padding:.25rem .75rem;overflow:auto;flex-wrap:wrap;box-shadow:0 .125rem .1875rem rgba(0,0,0,.1)}.t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar, .t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-tools-wrapper._disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:var(--tui-disabled-opacity)}.t-block[_ngcontent-%COMP%]{display:flex;padding:.25rem 0}.t-block[_ngcontent-%COMP%]:not(:last-child):after{content:"";display:block;margin:0 .25rem;width:1px;background:var(--tui-secondary-active)}.t-tool[_ngcontent-%COMP%]{transition-property:background;transition-duration:.3s;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}button.t-tool[_ngcontent-%COMP%]:hover, .t-tool[_ngcontent-%COMP%]     button:hover{background:var(--tui-secondary-hover)}.t-tool_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-font[_ngcontent-%COMP%]{padding:.3em 0;outline:none;width:100%;pointer-events:none}.t-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;font-size:0;opacity:0;cursor:pointer}.t-image[_ngcontent-%COMP%]::-webkit-file-upload-button{display:none}.t-color-picker[_ngcontent-%COMP%]     tui-hosted-dropdown, .t-color-picker[_ngcontent-%COMP%]     tui-color-picker, .t-color-picker[_ngcontent-%COMP%]     tui-color-edit{display:none}.t-prevent-parent-label-behavior[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),(0,m.gn)([(0,v.THR)()],M.prototype,"colors",void 0),(0,m.gn)([(0,v.THR)()],M.prototype,"disabled",void 0),(0,m.gn)([(0,v.THR)(function(D){return!D.includes(f._.Tex)&&!D.includes(f._.Attach)},"Attach and TeX are not yet implemented in Editor")],M.prototype,"tools",null)},19074:(yt,tt,a)=>{a.d(tt,{hK:()=>r,sw:()=>m,Db:()=>_,RR:()=>f});const m=new Map([["color-black-300","#333333"],["color-black-200","#666666"],["color-black-100","#909090"],["color-yellow-100","#FFDD2C"],["color-yellow-200","#FCC521"],["color-yellow-300","#FAB618"],["color-gray-100","#f5f5f6"],["color-gray-200","#e7e8ea"],["color-gray-300","#cbcfd3"],["color-gray-400","#959ba4"],["color-gray-500","#79818c"],["color-gray-600","#616871"],["color-light-blue-100","#ecf1f7"],["color-light-blue-200","#e4ebf3"],["color-light-blue-300","#dde4ed"],["color-blue-100","#1771e6"],["color-blue-200","#1464cc"],["color-blue-300","#0953b3"],["color-green-100","#39b54a"],["color-green-200","#2ca53a"],["color-green-300","#168a21"],["color-red-100","#e01f19"],["color-red-200","#d3120e"],["color-red-300","#c40b08"]]),r="rgb(51, 51, 51)";var R=a(48699);const _=[R._.Undo,R._.Size,R._.Bold,R._.Italic,R._.Underline,R._.Align,R._.List,R._.Quote,R._.Link,R._.Color,R._.Hilite,R._.Clear,R._.Strikethrough,R._.Code,R._.Img,R._.HR,R._.Sup,R._.Sub,R._.Table,R._.Details];function f(U){return[{px:13,name:U.small},{px:15,name:U.normal},{px:17,name:U.large},{px:24,family:"var(--tui-font-heading)",name:U.subtitle,headingLevel:2,weight:"bold"},{px:30,family:"var(--tui-font-heading)",name:U.title,headingLevel:1,weight:"bold"}]}},40632:(yt,tt,a)=>{a.d(tt,{BN:()=>r,JU:()=>R.J,mJ:()=>_,$3:()=>f.$});var m=a(74788);let r=(()=>{class U{}return U.\u0275fac=function(G){return new(G||U)},U.\u0275mod=m.\u0275\u0275defineNgModule({type:U}),U.\u0275inj=m.\u0275\u0275defineInjector({}),U})();var R=a(74982);let _=(()=>{class U{}return U.\u0275fac=function(G){return new(G||U)},U.\u0275mod=m.\u0275\u0275defineNgModule({type:U}),U.\u0275inj=m.\u0275\u0275defineInjector({}),U})();var f=a(17804)},74982:(yt,tt,a)=>{a.d(tt,{J:()=>U});var m=a(74788),r=a(62842),R=a(40287),_=a(46782),f=a(17804);let U=(()=>{class v{constructor(j,q,X,et,Z,st){this.elementRef=j,this.renderer=q,this.editor=X,this.editorContainer=et,this.editorLoaded$=Z,this.valueChange=this.editor.valueChange$,this.stateChange=this.editor.stateChange$,this.editorLoaded$.pipe((0,_.R)(st)).subscribe(()=>{this.renderer.appendChild(this.elementRef.nativeElement,this.editorContainer)})}set value(j){j!==this.editor.html&&this.editor.setValue(j)}set editable(j){this.editor.editable=j}}return v.\u0275fac=function(j){return new(j||v)(m.\u0275\u0275directiveInject(m.ElementRef),m.\u0275\u0275directiveInject(m.Renderer2),m.\u0275\u0275directiveInject(f.$),m.\u0275\u0275directiveInject(r.Y1),m.\u0275\u0275directiveInject(r.ZW),m.\u0275\u0275directiveInject(R.a31))},v.\u0275dir=m.\u0275\u0275defineDirective({type:v,selectors:[["","tuiTiptapEditor",""]],inputs:{value:"value",editable:"editable"},outputs:{valueChange:"valueChange",stateChange:"stateChange"},features:[m.\u0275\u0275ProvidersFeature([R.a31])]}),v})()},17804:(yt,tt,a)=>{a.d(tt,{$:()=>q});var m=a(79765),r=a(74788);let R=(()=>{class X{constructor(){this.stateChange$=new m.xQ,this.valueChange$=new m.xQ}}return X.\u0275fac=function(Z){return new(Z||X)},X.\u0275dir=r.\u0275\u0275defineDirective({type:X}),X})();var _=a(62842),f=a(66835),U=a(39761),v=a(88002),G=a(87519);let q=(()=>{class X extends R{constructor(Z){super(),this.editorRef=Z,this.editorRef.subscribe(st=>{this.editor=st,st.on("transaction",()=>{this.stateChange$.next()}),st.on("update",()=>{const _t=st.getHTML(),at=function(X){return Array.isArray(X)&&1===X.length&&!X[0].hasOwnProperty("content")}(st.getJSON().content)?"":_t;this.valueChange$.next(at)})})}get isFocused(){return this.editor.isFocused}get html(){return this.editor.getHTML()}get editable(){return this.editor.isEditable}set editable(Z){this.editor.setEditable(Z)}get state(){return this.editor.state}getOriginTiptapEditor(){return this.editor}undoDisabled(){return!this.editor.can().undo()}redoDisabled(){return!this.editor.can().redo()}getFontColor(){return this.editor.getAttributes("textStyle").fontColor||"rgb(51, 51, 51)"}getBackgroundColor(){var Z;return(null===(Z=this.editor)||void 0===Z?void 0:Z.getAttributes("textStyle").backgroundColor)||"rgb(51, 51, 51)"}getCellColor(){return this.editor.getAttributes("tableCell").background||this.editor.getAttributes("tableHeader").background}onAlign(Z){this.editor.chain().focus().setTextAlign(Z).run()}setImage(Z){this.editor.chain().focus().first(({commands:st})=>[()=>{var _t;return(null===(_t=st.setEditableImage)||void 0===_t?void 0:_t.call(st,{src:Z}))||!1},()=>st.setImage({src:Z})]).run()}undo(){this.editor.chain().undo().run()}redo(){this.editor.chain().redo().run()}setHorizontalRule(){this.editor.chain().focus().setHorizontalRule().run()}removeFormat(){this.editor.commands.unsetAllMarks(),this.editor.commands.clearNodes()}setFontColor(Z){this.editor.chain().focus().setFontColor(Z).run()}setBackgroundColor(Z){this.editor.chain().focus().setBackgroundColor(Z).run()}toggleUnderline(){this.editor.chain().focus().toggleUnderline().run()}toggleStrike(){this.editor.chain().focus().toggleStrike().run()}toggleOrderedList(){this.editor.chain().focus().toggleOrderedList().run()}toggleUnorderedList(){this.editor.chain().focus().toggleBulletList().run()}togglePre(){this.editor.chain().focus().toggleCodeBlock().run()}sinkListItem(){this.editor.chain().focus().sinkListItem("listItem").run()}liftListItem(){this.editor.chain().focus().liftListItem("listItem").run()}isActive(Z){return this.editor.isActive(Z)}isActive$(Z){return this.stateChange$.pipe((0,U.O)(null),(0,v.U)(()=>this.isActive(Z)),(0,G.x)())}toggleBold(){this.editor.chain().focus().toggleBold().run()}toggleCode(){this.editor.chain().focus().toggleCode().run()}toggleItalic(){this.editor.chain().focus().toggleItalic().run()}toggleBlockquote(){this.editor.chain().focus().toggleBlockquote().run()}toggleSubscript(){this.editor.chain().focus().toggleSubscript().run()}toggleSuperscript(){this.editor.chain().focus().toggleSuperscript().run()}toggleCodeBlock(){this.editor.chain().focus().toggleCodeBlock().run()}insertTable(Z,st){this.editor.chain().focus().insertTable({cols:Z,rows:st}).run()}addColumnAfter(){this.editor.chain().focus().addColumnAfter().run()}addColumnBefore(){this.editor.chain().focus().addColumnBefore().run()}addRowAfter(){this.editor.chain().focus().addRowAfter().run()}addRowBefore(){this.editor.chain().focus().addRowBefore().run()}deleteColumn(){this.editor.chain().focus().deleteColumn().run()}deleteRow(){this.editor.chain().focus().deleteRow().run()}mergeCells(){this.editor.chain().focus().mergeCells().run()}splitCell(){this.editor.chain().focus().splitCell().run()}canMergeCells(){return this.editor.can().mergeCells()}canSplitCells(){return this.editor.can().splitCell()}setHeading(Z){this.editor.chain().focus().setHeading({level:Z}).run()}setParagraph(Z){this.editor.chain().focus().setParagraph().run(),Z&&this.editor.chain().setMark("textStyle",Z).run()}setHardBreak(){this.editor.chain().setHardBreak().run()}setTextSelection(Z){this.editor.commands.setTextSelection(Z)}toggleLink(Z){this.editor.chain().focus().toggleLink({href:Z}).run()}setLink(Z){this.editor.chain().focus().setLink({href:Z}).run()}unsetLink(){this.editor.chain().focus().unsetLink().run()}focus(){this.editor.chain().focus().run()}setValue(Z){this.editor.commands.setContent(Z)}destroy(){this.editor.destroy()}setCellColor(Z){this.editor.chain().focus().setCellBackground(Z).run()}selectClosest(){const Z=this.editor.state.selection.anchor,{schema:st,doc:_t}=this.editor.state,ft=(0,f.Yz)(_t.resolve(Z),st.marks.link);ft&&this.editor.chain().setTextSelection(ft).run()}enter(){this.editor.commands.enter()}setDetails(){this.editor.commands.setDetails()}removeDetails(){this.editor.commands.removeDetails()}setGroup(){this.editor.commands.setGroup()}removeGroup(){this.editor.commands.removeGroup()}}return X.\u0275fac=function(Z){return new(Z||X)(r.\u0275\u0275inject(_.ZW))},X.\u0275prov=r.\u0275\u0275defineInjectable({token:X,factory:X.\u0275fac}),X})()},48699:(yt,tt,a)=>{a.d(tt,{_:()=>m});var m=(()=>{return(r=m||(m={})).Undo="undo",r.Size="fontSize",r.Bold="bold",r.Italic="italic",r.Underline="underline",r.Strikethrough="strikeThrough",r.Align="justify",r.List="list",r.Quote="quote",r.Color="foreColor",r.Hilite="hiliteColor",r.Clear="clear",r.Link="link",r.Attach="attach",r.Tex="tex",r.Code="code",r.Img="image",r.HR="insertHorizontalRule",r.Sup="superscript",r.Sub="subscript",r.Table="insertTable",r.MergeCells="mergeCells",r.SplitCells="splitCells",r.RowsColumnsManaging="rowsColumnsManaging",r.Details="details",r.Group="group",m;var r})()},98694:(yt,tt,a)=>{a.r(tt),a.d(tt,{BackgroundColor:()=>R}),a(74634);const R=a(40256).Extension.create({name:"backgroundColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,renderHTML:({backgroundColor:_})=>_?{style:`background-color: ${_}`}:{},parseHTML:({style:_})=>_.backgroundColor.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setBackgroundColor:_=>({chain:f})=>f().setMark("textStyle",{backgroundColor:_}).run(),unsetBackgroundColor:()=>({chain:_})=>_().setMark("textStyle",{backgroundColor:null}).run()})})},6579:(yt,tt,a)=>{a.r(tt),a.d(tt,{FontColor:()=>R}),a(74634);const R=a(40256).Extension.create({name:"fontColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontColor:{default:null,renderHTML:({fontColor:_})=>_?{style:`color: ${_}`}:{},parseHTML:({style:_})=>_.color.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setFontColor:_=>({chain:f})=>f().setMark("textStyle",{fontColor:_}).run(),unsetFontColor:()=>({chain:_})=>_().setMark("textStyle",{fontColor:null}).run()})})},9492:(yt,tt,a)=>{a.r(tt),a.d(tt,{TuiFontSize:()=>R}),a(74634);const R=a(40256).Extension.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:({style:_})=>_.fontSize,renderHTML:({fontSize:_})=>_?{style:`font-size: ${_}`}:{}}}}]},addCommands:()=>({setFontSize:_=>({chain:f})=>f().setMark("textStyle",{fontSize:_}).run(),unsetFontSize:()=>({chain:_})=>_().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()})})},54920:(yt,tt,a)=>{a.r(tt),a.d(tt,{TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>R,createGroupExtension:()=>_});var m=a(66835),r=a(40256);const R={groupNodeClass:"tui-group-node",groupPointerNodeClass:"tui-group-pointer",nested:!0,draggable:!0,createOnEnter:!1},_=(f={})=>{const{draggable:U,nested:v,groupNodeClass:G,groupPointerNodeClass:j,createOnEnter:q}=Object.assign(Object.assign({},R),f);return r.Node.create({name:"group",draggable:U,group:"block",content:v?"block+":"block",parseHTML:()=>[{tag:'div[data-type="group"]'}],renderHTML:({HTMLAttributes:X})=>["div",(0,r.mergeAttributes)(X,{"data-type":"group"}),0],addNodeView:()=>()=>{const X=document.createElement("div"),et=document.createElement("div");if(X.classList.add(G),et.setAttribute("data-type","group"),U){const Z=document.createElement("div");Z.classList.add(j),Z.innerHTML="",Z.contentEditable="false",X.append(Z,et)}else X.append(et);return{dom:X,contentDOM:et}},addCommands(){return{setGroup:()=>({commands:X,state:et})=>{this.editor.chain().focus().run();const Z=(0,m.Ap)(et,""),_t=`<div data-type="group">${Z.trim().startsWith("<p>")?Z:`<p>${Z}</p>`}</div>`;return X.insertContent(_t)},removeGroup:()=>({state:X,dispatch:et})=>(0,m.yU)(X,et,this.name)}},addKeyboardShortcuts(){return q?{Enter:()=>this.editor.commands.setGroup()}:{}}})}},31471:(yt,tt,a)=>{a.r(tt),a.d(tt,{TUI_EDITOR_MAX_IMAGE_WIDTH:()=>Z,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>et,TuiImageEditorComponent:()=>st,TuiImageEditorModule:()=>w,createImageEditorExtension:()=>at});var m=a(12057),r=a(74788),R=a(40256);class _{constructor(z,L,Y){const nt=L.get(r.ApplicationRef),dt=L.get(r.ComponentFactoryResolver).resolveComponentFactory(z);this.componentRef=dt.create(L,[]),this.updateProps(Y),nt.attachView(this.componentRef.hostView)}get instance(){return this.componentRef.instance}get elementRef(){return this.componentRef.injector.get(r.ElementRef)}get dom(){return this.elementRef.nativeElement}updateProps(z){Object.entries(z).forEach(([L,Y])=>{this.instance[L]=Y})}detectChanges(){this.componentRef.changeDetectorRef.detectChanges()}destroy(){this.componentRef.destroy()}}class U extends R.NodeView{constructor(){super(...arguments),this.contentDOMElement=null}mount(){const z=this.options.injector,L=z.get(m.K0);this.renderer=new _(this.component,z,{editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(nt={})=>this.updateAttributes(nt),deleteNode:()=>this.deleteNode()}),this.extension.config.draggable&&(this.renderer.elementRef.nativeElement.ondragstart=nt=>{this.onDragStart(nt)}),this.contentDOMElement=this.node.isLeaf?null:L.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit",this.renderer.detectChanges())}get dom(){return this.renderer.dom}get contentDOM(){return this.node.isLeaf?null:(this.maybeMoveContentDOM(),this.contentDOMElement)}update(z,L){return this.options.update?this.options.update(z,L):z.type===this.node.type&&(z===this.node&&this.decorations===L||(this.node=z,this.decorations=L,this.renderer.updateProps({node:z,decorations:L}),this.maybeMoveContentDOM()),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy()}maybeMoveContentDOM(){const z=this.dom.querySelector("[data-node-view-content]");this.contentDOMElement&&z&&!z.contains(this.contentDOMElement)&&z.appendChild(this.contentDOMElement)}}var G=a(40287),j=a(66682),q=a(46782),X=a(60015);const et=new r.InjectionToken("Min size of resizable image inside editor",{factory:()=>100}),Z=new r.InjectionToken("Max size of resizable image inside editor",{factory:()=>1/0});let st=(()=>{class N extends class{}{constructor(L,Y,nt,it){super(),this.minWidth=L,this.maxWidth=Y,this.documentRef=nt,this.destroy$=it,this._width=0,(0,j.T)((0,G.mLY)(this.documentRef,"touchend"),(0,G.mLY)(this.documentRef,"mouseup")).pipe((0,q.R)(it)).subscribe(()=>this.updateAttributes({width:this.width}))}get attrs(){var L;return(null===(L=this.node)||void 0===L?void 0:L.attrs)||{src:""}}get src(){return this.attrs.src}get width(){return this._width||this.attrs.width||0}get alt(){return this.attrs.alt||""}get title(){return this.attrs.title||""}onHorizontalDrag([L],Y){this._width=Math.max(this.minWidth,Math.min(this.maxWidth,this.width+Y*L))}}return N.\u0275fac=function(L){return new(L||N)(r.\u0275\u0275directiveInject(et),r.\u0275\u0275directiveInject(Z),r.\u0275\u0275directiveInject(m.K0),r.\u0275\u0275directiveInject(G.a31))},N.\u0275cmp=r.\u0275\u0275defineComponent({type:N,selectors:[["tui-image-editor"]],features:[r.\u0275\u0275ProvidersFeature([G.a31]),r.\u0275\u0275InheritDefinitionFeature],decls:3,vars:8,consts:[[3,"src","width","alt","title"],[1,"t-border","t-border_right",3,"tuiPan"],[1,"t-border","t-border_left",3,"tuiPan"]],template:function(L,Y){1&L&&(r.\u0275\u0275element(0,"img",0),r.\u0275\u0275elementStart(1,"span",1),r.\u0275\u0275listener("tuiPan",function(it){return Y.onHorizontalDrag(it,1)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"span",2),r.\u0275\u0275listener("tuiPan",function(it){return Y.onHorizontalDrag(it,-1)}),r.\u0275\u0275elementEnd()),2&L&&(r.\u0275\u0275styleProp("min-width",Y.minWidth,"px")("max-width",Y.maxWidth,"px"),r.\u0275\u0275property("src",Y.src,r.\u0275\u0275sanitizeUrl)("width",Y.width)("alt",Y.alt)("title",Y.title))},directives:[X.g],styles:['[_nghost-%COMP%]{position:relative;display:inline-block}[_nghost-%COMP%]:hover   .t-border[_ngcontent-%COMP%]:after{opacity:1}.t-border[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;display:flex;width:.75rem;cursor:col-resize;justify-content:center;align-items:center}.t-border_left[_ngcontent-%COMP%]{left:0}.t-border_right[_ngcontent-%COMP%]{right:0}.t-border[_ngcontent-%COMP%]:after{transition-property:opacity;transition-duration:.3s;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";width:50%;height:33%;box-sizing:border-box;border-radius:var(--tui-radius-m);background:var(--tui-base-08);border:1px solid var(--tui-base-03);opacity:0}'],changeDetection:0}),N})();const _t=[{tag:'img[data-type="image-editor"]'}],ft={src:{default:"",keepOnSplit:!1},width:{default:300,keepOnSplit:!1},alt:{default:"",keepOnSplit:!1},title:{default:"",keepOnSplit:!1}},at=N=>R.Node.create({name:"imageEditor",group:"block",atom:!0,draggable:!0,parseHTML:()=>_t,addAttributes:()=>ft,renderHTML:({HTMLAttributes:z})=>["img",(0,R.mergeAttributes)(z,{"data-type":"image-editor"})],addNodeView:()=>((N,z)=>L=>new U(N,L,z))(st,{injector:N}),addCommands(){return{setEditableImage:z=>({commands:L})=>L.insertContent({type:this.name,attrs:z})}}});let w=(()=>{class N{}return N.\u0275fac=function(L){return new(L||N)},N.\u0275mod=r.\u0275\u0275defineNgModule({type:N}),N.\u0275inj=r.\u0275\u0275defineInjector({imports:[[m.ez,G.NZ5]]}),N})()},73826:(yt,tt,a)=>{function r(_){return _.isActive("bulletList")||_.isActive("orderedList")}a.r(tt),a.d(tt,{tuiIsOrderedOrBulletList:()=>r,TuiTabExtension:()=>R});const R=a(40256).Extension.create({name:"indent",addKeyboardShortcuts(){return{Tab:()=>r(this.editor)?null:this.editor.commands.insertContent("\t")}}})},15632:(yt,tt,a)=>{a.r(tt),a.d(tt,{StarterKit:()=>z});var m=a(40256),r=a(10763),R=a(32892),_=a(12258),f=a(70837),U=a(93743),v=a(44225),G=a(81121),j=a(13512),q=a(34278),X=a(15400),et=a(10590),Z=a(36129),st=a(30440),_t=a(82861),ft=a(94493),at=a(70670),w=a(56793),N=a(28343);const z=m.Extension.create({name:"starterKit",addExtensions(){var L,Y,nt,it,dt,ct,Et,Mt,ht,ot,O,J,x,I,T,k,F,ut;const pt=[];return!1!==this.options.blockquote&&pt.push(r.V6.configure(null===(L=this.options)||void 0===L?void 0:L.blockquote)),!1!==this.options.bold&&pt.push(R.d8.configure(null===(Y=this.options)||void 0===Y?void 0:Y.bold)),!1!==this.options.bulletList&&pt.push(_.DY.configure(null===(nt=this.options)||void 0===nt?void 0:nt.bulletList)),!1!==this.options.code&&pt.push(f.EK.configure(null===(it=this.options)||void 0===it?void 0:it.code)),!1!==this.options.codeBlock&&pt.push(U.dn.configure(null===(dt=this.options)||void 0===dt?void 0:dt.codeBlock)),!1!==this.options.document&&pt.push(v.B.configure(null===(ct=this.options)||void 0===ct?void 0:ct.document)),!1!==this.options.dropcursor&&pt.push(G.m.configure(null===(Et=this.options)||void 0===Et?void 0:Et.dropcursor)),!1!==this.options.gapcursor&&pt.push(j.f.configure(null===(Mt=this.options)||void 0===Mt?void 0:Mt.gapcursor)),!1!==this.options.hardBreak&&pt.push(q.U.configure(null===(ht=this.options)||void 0===ht?void 0:ht.hardBreak)),!1!==this.options.heading&&pt.push(X.X.configure(null===(ot=this.options)||void 0===ot?void 0:ot.heading)),!1!==this.options.history&&pt.push(et.A.configure(null===(O=this.options)||void 0===O?void 0:O.history)),!1!==this.options.horizontalRule&&pt.push(Z.b.configure(null===(J=this.options)||void 0===J?void 0:J.horizontalRule)),!1!==this.options.italic&&pt.push(st.Tx.configure(null===(x=this.options)||void 0===x?void 0:x.italic)),!1!==this.options.listItem&&pt.push(_t.H.configure(null===(I=this.options)||void 0===I?void 0:I.listItem)),!1!==this.options.orderedList&&pt.push(ft.GS.configure(null===(T=this.options)||void 0===T?void 0:T.orderedList)),!1!==this.options.paragraph&&pt.push(at.n.configure(null===(k=this.options)||void 0===k?void 0:k.paragraph)),!1!==this.options.strike&&pt.push(w.Re.configure(null===(F=this.options)||void 0===F?void 0:F.strike)),!1!==this.options.text&&pt.push(N.x.configure(null===(ut=this.options)||void 0===ut?void 0:ut.text)),pt}})},96129:(yt,tt,a)=>{a.r(tt),a.d(tt,{TableCellBackground:()=>r});const r=a(40256).Extension.create({addGlobalAttributes:()=>[{types:["tableCell","tableHeader"],attributes:{background:{default:null,renderHTML:({background:R})=>R?{style:`background: ${R}`}:null,parseHTML:({style:R})=>R.background,keepOnSplit:!1}}}],addCommands:()=>({setCellBackground:R=>({chain:_})=>_().updateAttributes("tableCell",{background:R}).updateAttributes("tableHeader",{background:R}).run(),unsetCellBackground:()=>({chain:R})=>R().updateAttributes("tableCell",{background:null}).updateAttributes("tableHeader",{background:null}).run()})})},44482:(yt,tt,a)=>{a.d(tt,{F1:()=>O.F1,Wf:()=>O.Wf,VE:()=>ht.TUI_EDITOR_MAX_IMAGE_WIDTH,kB:()=>ht.TUI_EDITOR_MIN_IMAGE_WIDTH,p7:()=>O.p7,H9:()=>m.H9,wl:()=>m.wl,BN:()=>j.BN,T_:()=>et,GK:()=>v,_2:()=>L._,Sz:()=>w,$3:()=>j.$3,sw:()=>z.sw,PD:()=>nt,aU:()=>z.Db,Er:()=>J.Er});var m=a(27050),r=a(71115),_=(a(69303),a(12057)),U=(a(20179),a(74788));let v=(()=>{class x{}return x.\u0275fac=function(T){return new(T||x)},x.\u0275mod=U.\u0275\u0275defineNgModule({type:x}),x.\u0275inj=U.\u0275\u0275defineInjector({}),x})();var G=a(17406),j=a(40632),q=a(40287),X=a(66187);let et=(()=>{class x{}return x.\u0275fac=function(T){return new(T||x)},x.\u0275mod=U.\u0275\u0275defineNgModule({type:x}),x.\u0275inj=U.\u0275\u0275defineInjector({imports:[[_.ez,G.yB,X.WUl,X.Jyu,r.F,q.Ah6,X.dpK,j.mJ,v,q.WDk]]}),x})();a(79089),a(1433),a(73825),a(9872),a(19769);let w=(()=>{class x{}return x.\u0275fac=function(T){return new(T||x)},x.\u0275mod=U.\u0275\u0275defineNgModule({type:x}),x.\u0275inj=U.\u0275\u0275defineInjector({imports:[[_.ez,X.KWI,X.cnw,X.jhF,m.wl,q.Ah6]]}),x})();a(93252);var z=a(19074),L=a(48699);a(98694);const nt=[Promise.resolve().then(a.bind(a,15632)).then(({StarterKit:x})=>x).then(x=>x.configure({heading:{levels:[1,2]}})),a.e(45861).then(a.bind(a,45861)).then(x=>x.default.configure({types:["heading","paragraph"]})),Promise.resolve().then(a.bind(a,74634)).then(x=>x.default),a.e(77008).then(a.bind(a,77008)).then(x=>x.default),a.e(91347).then(a.bind(a,91347)).then(x=>x.default),a.e(35609).then(a.bind(a,35609)).then(x=>x.default),Promise.resolve().then(a.bind(a,6579)).then(x=>x.FontColor),a.e(12955).then(a.bind(a,12955)).then(x=>x.default.configure({inline:!0})),a.e(63658).then(a.bind(a,63658)).then(x=>x.default.configure({openOnClick:!1})),Promise.resolve().then(a.bind(a,98694)).then(x=>x.BackgroundColor),a.e(88729).then(a.bind(a,88729)).then(x=>x.default.configure({resizable:!0,lastColumnResizable:!1})),a.e(72219).then(a.bind(a,72219)).then(x=>x.default),a.e(74096).then(a.bind(a,74096)).then(x=>x.default),a.e(53107).then(a.bind(a,53107)).then(x=>x.TableHeader),Promise.resolve().then(a.bind(a,73826)).then(x=>x.TuiTabExtension),Promise.resolve().then(a.bind(a,96129)).then(x=>x.TableCellBackground),a.e(44312).then(a.bind(a,44312)).then(x=>x.TuiDetailsContent),a.e(44312).then(a.bind(a,44312)).then(x=>x.TuiDetails),a.e(44312).then(a.bind(a,44312)).then(x=>x.TuiSummary),Promise.resolve().then(a.bind(a,9492)).then(({TuiFontSize:x})=>x)];a(6579),a(73826),a(96129),a(9492),a(54920);var ht=a(31471),O=(a(15632),a(62842)),J=a(66835)},62141:(yt,tt,a)=>{a.d(tt,{i:()=>q});var m=a(12057),r=a(74788),R=a(66835),_=a(40287),f=a(18891),U=a(43190),v=a(88002),G=a(46782),j=a(39761);let q=(()=>{class X extends f.y{constructor(Z,{nativeElement:st},_t){const ft=(0,_.mLY)(st,"mousedown").pipe((0,_.mp3)(),(0,U.w)(at=>{const w=(0,_.mLY)(_t,"mousemove").pipe((0,v.U)(({clientX:N,clientY:z})=>(0,R.Ws)(N,z,st)),(0,G.R)((0,_.mLY)(_t,"mouseup")));return at.target===st?w.pipe((0,j.O)((0,R.Ws)(at.clientX,at.clientY,st))):w}),(0,G.R)(Z));super(at=>ft.subscribe(at))}}return X.\u0275fac=function(Z){return new(Z||X)(r.\u0275\u0275inject(_.a31),r.\u0275\u0275inject(r.ElementRef),r.\u0275\u0275inject(m.K0))},X.\u0275prov=r.\u0275\u0275defineInjectable({token:X,factory:X.\u0275fac}),X})()},62842:(yt,tt,a)=>{a.d(tt,{Y1:()=>Y,F4:()=>R,bG:()=>L,ZW:()=>z,Mr:()=>st,dj:()=>X,F1:()=>j,Wf:()=>r,UN:()=>_t,mJ:()=>U,$i:()=>Z,rf:()=>et,p7:()=>w});var m=a(74788);const r=new m.InjectionToken("Extensions for editor"),R=new m.InjectionToken("lazy extensions");var _=a(19074);const f={colors:_.sw,blankColor:_.hK,fontOptions:_.RR},U=new m.InjectionToken("Default Editor colors",{factory:()=>f});var G=a(54487);const j=new m.InjectionToken("Content value processor for tui-editor",{factory:()=>G.y});var q=a(72773);const X=new m.InjectionToken("tui-color-selector i18n",{factory:()=>["Solid color","Gradient"]}),et=new m.InjectionToken("tui-editor-toolbar i18n",{factory:(0,q.vv)("toolbarTools")}),Z=new m.InjectionToken("tui-editor-toolbar table i18n",{factory:(0,q.vv)("editorTableCommands")}),st=new m.InjectionToken("tui-editor-toolbar codes options",{factory:(0,q.vv)("editorCodeOptions")}),_t=new m.InjectionToken("tui-editor-toolbar font options",{factory:(0,q.vv)("editorFontOptions")});var ft=a(40287),at=a(88002);const w=new m.InjectionToken("Image loader handler",{factory:()=>nt=>{const it=new FileReader;return it.readAsDataURL(nt),(0,ft.mLY)(it,"load").pipe((0,at.U)(()=>String(it.result)))}});var N=a(82298);const z=new m.InjectionToken("Token for Tiptap Editor"),L=new m.InjectionToken("Lazy loaded Editor",{factory:()=>{const nt=new N.t(1);return Promise.resolve().then(a.bind(a,40256)).then(it=>nt.next(it.Editor)),nt}}),Y=new m.InjectionToken("The container in which the tip-tap editor is initialized")},66835:(yt,tt,a)=>{function m(ht,ot,O){const J=ht.selection.$anchor;for(let x=J.depth;x>0;x--)if(J.node(x).type.name===O)return ot&&ot(ht.tr.delete(J.before(x),J.after(x)).scrollIntoView()),!0;return!1}a.d(tt,{yU:()=>m,Ws:()=>R,U5:()=>_,Yz:()=>v,Ap:()=>j,Er:()=>Z,_N:()=>ct,CH:()=>Mt});var r=a(40287);function R(ht,ot,O){const{left:J,top:x,width:I,height:T}=O.getBoundingClientRect();return[(0,r.Kiv)(ht-J,0,I)/I,(0,r.Kiv)(ot-x,0,T)/T]}function _(ht){return ht.slice(0,Math.max(0,ht.length-1)).replace("linear-gradient(","")}function U(ht,ot,O={}){return ht.find(({attrs:J,type:x})=>x===ot&&function(ht,ot){const O=Object.keys(ot);return!O.length||!!O.filter(J=>ot[J]===ht[J]).length}(J,O))||null}function v(ht,ot,O={}){if(!ht||!ot)return null;const{node:J,offset:x}=ht.parent.childAfter(ht.parentOffset);if(!J)return null;const I=U(J.marks,ot,O);if(!I)return null;let T=ht.index(),k=ht.start()+x,F=T+1,ut=k+J.nodeSize;for(U(J.marks,ot,O);T>0&&I.isInSet(ht.parent.child(T-1).marks);)T-=1,k-=ht.parent.child(T).nodeSize;for(;F<ht.parent.childCount&&U(ht.parent.child(F).marks,ot,O);)ut+=ht.parent.child(F).nodeSize,F+=1;return{from:k,to:ut}}var G=a(40256);function j(ht,ot){const O=null!=ot?ot:ht.selection.$head.parent.textContent,J=ht.doc.cut(ht.selection.from,ht.selection.to);return J.content.size?(0,G.getHTMLFromFragment)(J.content,ht.schema):O}function Z(ht){const ot=(new DOMParser).parseFromString(ht,"text/html");return st(ot.body),ot.body.innerHTML}function st(ht){for(const ot of Array.from(ht.children))if(ot.children.length&&st(ot),"FONT"===ot.tagName)if(ot.hasAttribute("size"))switch(ot.getAttribute("size")){case"6":_t("h1",ot);break;case"5":_t("h2",ot);break;case"4":ft("17px",ot);break;case"3":ft("15px",ot);break;case"2":ft("13px",ot)}else ot.hasAttribute("color")&&at(ot)}function _t(ht,ot){var O,J,x,I,T,k,F,ut,pt;const Tt=document.createElement(ht);if(Tt.innerHTML=ot.innerHTML,"P"===(null===(O=ot.parentElement)||void 0===O?void 0:O.tagName)){const Pt=null===(x=null===(J=ot.parentElement)||void 0===J?void 0:J.parentElement)||void 0===x?void 0:x.insertBefore(Tt,ot.parentElement);null===(I=ot.parentElement)||void 0===I||I.removeChild(ot),(null==Pt?void 0:Pt.nextSibling)&&!(null===(k=null===(T=null==Pt?void 0:Pt.nextSibling)||void 0===T?void 0:T.textContent)||void 0===k?void 0:k.trim())&&(null===(ut=null===(F=Pt.nextSibling)||void 0===F?void 0:F.parentElement)||void 0===ut||ut.removeChild(Pt.nextSibling))}else null===(pt=ot.parentElement)||void 0===pt||pt.replaceChild(Tt,ot)}function ft(ht,ot){var O;const J=document.createElement("p"),x=document.createElement("span");x.setAttribute("style",`font-size: ${ht}`),x.innerHTML=ot.innerHTML,J.append(x),null===(O=ot.parentElement)||void 0===O||O.replaceChild("P"===ot.parentElement.tagName?x:J,ot)}function at(ht){var ot;const O=document.createElement("span");O.setAttribute("style",`color: ${ht.getAttribute("color")}`),O.innerHTML=ht.innerHTML,null===(ot=ht.parentElement)||void 0===ot||ot.replaceChild(O,ht)}const dt=["\\s*(","(?:","#(?:[a-f0-9]{6}|[a-f0-9]{3})","|","(?:rgb|hsl)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*\\)","|","(?:rgba|hsla)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*,\\s*\\d*\\.?\\d+\\)","|","[_a-z-][_a-z0-9-]*",")",")","(?:\\s+","(","(?:[+-]?\\d*\\.?\\d+)(?:%|[a-z]+)?","))?","(?:","\\s*,\\s*","\\s*)?"];function ct(ht){const ot=new RegExp(dt.join(""),"gi"),O=ht.startsWith("to")||ht.match(/^\d/)?ht.slice(Math.max(0,ht.indexOf(",")+1)).trim():ht,J=ht.startsWith("to")?ht.split(",")[0]:"to bottom";let x=[],I=ot.exec(O);for(;null!==I;)x=x.concat({color:I[1],position:Et(I[2],x.length)}),I=ot.exec(O);return x=x.filter(({color:T})=>T.startsWith("#")||T.startsWith("rgb")),{stops:x,side:J}}function Et(ht,ot){const O=1===ot?"100%":`${ot}%`;return(null==ht?void 0:ht.includes("%"))?ht:O}function Mt({stops:ht,side:ot}){return`linear-gradient(${ot}, ${ht.map(({color:O,position:J})=>`rgba(${(0,r.MpC)(O).join(", ")}) ${J}`).join(", ")})`}},13903:(yt,tt,a)=>{a.d(tt,{$:()=>at,h:()=>ft});for(var m={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},R="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),f=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),U="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),v=f||R&&+R[1]<57,G=0;G<10;G++)m[48+G]=m[96+G]=String(G);for(G=1;G<=24;G++)m[G+111]="F"+G;for(G=65;G<=90;G++)m[G]=String.fromCharCode(G+32),r[G]=String.fromCharCode(G);for(var j in m)r.hasOwnProperty(j)||(r[j]=m[j]);var X=a(62463);const et="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function Z(w){let L,Y,nt,it,N=w.split(/-(?!$)/),z=N[N.length-1];"Space"==z&&(z=" ");for(let dt=0;dt<N.length-1;dt++){let ct=N[dt];if(/^(cmd|meta|m)$/i.test(ct))it=!0;else if(/^a(lt)?$/i.test(ct))L=!0;else if(/^(c|ctrl|control)$/i.test(ct))Y=!0;else if(/^s(hift)?$/i.test(ct))nt=!0;else{if(!/^mod$/i.test(ct))throw new Error("Unrecognized modifier name: "+ct);et?it=!0:Y=!0}}return L&&(z="Alt-"+z),Y&&(z="Ctrl-"+z),it&&(z="Meta-"+z),nt&&(z="Shift-"+z),z}function _t(w,N,z){return N.altKey&&(w="Alt-"+w),N.ctrlKey&&(w="Ctrl-"+w),N.metaKey&&(w="Meta-"+w),!1!==z&&N.shiftKey&&(w="Shift-"+w),w}function ft(w){return new X.Sy({props:{handleKeyDown:at(w)}})}function at(w){let N=function(w){let N=Object.create(null);for(let z in w)N[Z(z)]=w[z];return N}(w);return function(z,L){let it,Y=function(w){var z=!(v&&(w.ctrlKey||w.altKey||w.metaKey)||U&&w.shiftKey&&w.key&&1==w.key.length||"Unidentified"==w.key)&&w.key||(w.shiftKey?r:m)[w.keyCode]||w.key||"Unidentified";return"Esc"==z&&(z="Escape"),"Del"==z&&(z="Delete"),"Left"==z&&(z="ArrowLeft"),"Up"==z&&(z="ArrowUp"),"Right"==z&&(z="ArrowRight"),"Down"==z&&(z="ArrowDown"),z}(L),nt=1==Y.length&&" "!=Y,dt=N[_t(Y,L,!nt)];if(dt&&dt(z.state,z.dispatch,z))return!0;if(nt&&(L.shiftKey||L.altKey||L.metaKey||Y.charCodeAt(0)>127)&&(it=m[L.keyCode])&&it!=Y){let ct=N[_t(it,L,!0)];if(ct&&ct(z.state,z.dispatch,z))return!0}else if(nt&&L.shiftKey){let ct=N[_t(Y,L,!0)];if(ct&&ct(z.state,z.dispatch,z))return!0}return!1}}},35917:(yt,tt,a)=>{function m(A){this.content=A}a.d(tt,{aw:()=>Xt,PW:()=>xt,HY:()=>f,vc:()=>j,ZU:()=>zt,NB:()=>ot,Ts:()=>Mt,e4:()=>q,V_:()=>_e,p2:()=>X}),m.prototype={constructor:m,find:function(A){for(var l=0;l<this.content.length;l+=2)if(this.content[l]===A)return l;return-1},get:function(A){var l=this.find(A);return-1==l?void 0:this.content[l+1]},update:function(A,l,d){var h=d&&d!=A?this.remove(d):this,y=h.find(A),b=h.content.slice();return-1==y?b.push(d||A,l):(b[y+1]=l,d&&(b[y]=d)),new m(b)},remove:function(A){var l=this.find(A);if(-1==l)return this;var d=this.content.slice();return d.splice(l,2),new m(d)},addToStart:function(A,l){return new m([A,l].concat(this.remove(A).content))},addToEnd:function(A,l){var d=this.remove(A).content.slice();return d.push(A,l),new m(d)},addBefore:function(A,l,d){var h=this.remove(l),y=h.content.slice(),b=h.find(A);return y.splice(-1==b?y.length:b,0,l,d),new m(y)},forEach:function(A){for(var l=0;l<this.content.length;l+=2)A(this.content[l],this.content[l+1])},prepend:function(A){return(A=m.from(A)).size?new m(A.content.concat(this.subtract(A).content)):this},append:function(A){return(A=m.from(A)).size?new m(this.subtract(A).content.concat(A.content)):this},subtract:function(A){var l=this;A=m.from(A);for(var d=0;d<A.content.length;d+=2)l=l.remove(A.content[d]);return l},get size(){return this.content.length>>1}},m.from=function(A){if(A instanceof m)return A;var l=[];if(A)for(var d in A)l.push(d,A[d]);return new m(l)};const r=m;function R(A,l,d){for(let h=0;;h++){if(h==A.childCount||h==l.childCount)return A.childCount==l.childCount?null:d;let y=A.child(h),b=l.child(h);if(y!=b){if(!y.sameMarkup(b))return d;if(y.isText&&y.text!=b.text){for(let K=0;y.text[K]==b.text[K];K++)d++;return d}if(y.content.size||b.content.size){let K=R(y.content,b.content,d+1);if(null!=K)return K}d+=y.nodeSize}else d+=y.nodeSize}}function _(A,l,d,h){for(let y=A.childCount,b=l.childCount;;){if(0==y||0==b)return y==b?null:{a:d,b:h};let K=A.child(--y),lt=l.child(--b),gt=K.nodeSize;if(K!=lt){if(!K.sameMarkup(lt))return{a:d,b:h};if(K.isText&&K.text!=lt.text){let Dt=0,At=Math.min(K.text.length,lt.text.length);for(;Dt<At&&K.text[K.text.length-Dt-1]==lt.text[lt.text.length-Dt-1];)Dt++,d--,h--;return{a:d,b:h}}if(K.content.size||lt.content.size){let Dt=_(K.content,lt.content,d-1,h-1);if(Dt)return Dt}d-=gt,h-=gt}else d-=gt,h-=gt}}class f{constructor(l,d){if(this.content=l,this.size=d||0,null==d)for(let h=0;h<l.length;h++)this.size+=l[h].nodeSize}nodesBetween(l,d,h,y=0,b){for(let K=0,lt=0;lt<d;K++){let gt=this.content[K],Dt=lt+gt.nodeSize;if(Dt>l&&!1!==h(gt,y+lt,b||null,K)&&gt.content.size){let At=lt+1;gt.nodesBetween(Math.max(0,l-At),Math.min(gt.content.size,d-At),h,y+At)}lt=Dt}}descendants(l){this.nodesBetween(0,this.size,l)}textBetween(l,d,h,y){let b="",K=!0;return this.nodesBetween(l,d,(lt,gt)=>{lt.isText?(b+=lt.text.slice(Math.max(l,gt)-gt,d-gt),K=!h):lt.isLeaf?(y?b+="function"==typeof y?y(lt):y:lt.type.spec.leafText&&(b+=lt.type.spec.leafText(lt)),K=!h):!K&&lt.isBlock&&(b+=h,K=!0)},0),b}append(l){if(!l.size)return this;if(!this.size)return l;let d=this.lastChild,h=l.firstChild,y=this.content.slice(),b=0;for(d.isText&&d.sameMarkup(h)&&(y[y.length-1]=d.withText(d.text+h.text),b=1);b<l.content.length;b++)y.push(l.content[b]);return new f(y,this.size+l.size)}cut(l,d=this.size){if(0==l&&d==this.size)return this;let h=[],y=0;if(d>l)for(let b=0,K=0;K<d;b++){let lt=this.content[b],gt=K+lt.nodeSize;gt>l&&((K<l||gt>d)&&(lt=lt.isText?lt.cut(Math.max(0,l-K),Math.min(lt.text.length,d-K)):lt.cut(Math.max(0,l-K-1),Math.min(lt.content.size,d-K-1))),h.push(lt),y+=lt.nodeSize),K=gt}return new f(h,y)}cutByIndex(l,d){return l==d?f.empty:0==l&&d==this.content.length?this:new f(this.content.slice(l,d))}replaceChild(l,d){let h=this.content[l];if(h==d)return this;let y=this.content.slice(),b=this.size+d.nodeSize-h.nodeSize;return y[l]=d,new f(y,b)}addToStart(l){return new f([l].concat(this.content),this.size+l.nodeSize)}addToEnd(l){return new f(this.content.concat(l),this.size+l.nodeSize)}eq(l){if(this.content.length!=l.content.length)return!1;for(let d=0;d<this.content.length;d++)if(!this.content[d].eq(l.content[d]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(l){let d=this.content[l];if(!d)throw new RangeError("Index "+l+" out of range for "+this);return d}maybeChild(l){return this.content[l]||null}forEach(l){for(let d=0,h=0;d<this.content.length;d++){let y=this.content[d];l(y,h,d),h+=y.nodeSize}}findDiffStart(l,d=0){return R(this,l,d)}findDiffEnd(l,d=this.size,h=l.size){return _(this,l,d,h)}findIndex(l,d=-1){if(0==l)return v(0,l);if(l==this.size)return v(this.content.length,l);if(l>this.size||l<0)throw new RangeError(`Position ${l} outside of fragment (${this})`);for(let h=0,y=0;;h++){let K=y+this.child(h).nodeSize;if(K>=l)return K==l||d>0?v(h+1,K):v(h,y);y=K}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(l=>l.toJSON()):null}static fromJSON(l,d){if(!d)return f.empty;if(!Array.isArray(d))throw new RangeError("Invalid input for Fragment.fromJSON");return new f(d.map(l.nodeFromJSON))}static fromArray(l){if(!l.length)return f.empty;let d,h=0;for(let y=0;y<l.length;y++){let b=l[y];h+=b.nodeSize,y&&b.isText&&l[y-1].sameMarkup(b)?(d||(d=l.slice(0,y)),d[d.length-1]=b.withText(d[d.length-1].text+b.text)):d&&d.push(b)}return new f(d||l,h)}static from(l){if(!l)return f.empty;if(l instanceof f)return l;if(Array.isArray(l))return this.fromArray(l);if(l.attrs)return new f([l],l.nodeSize);throw new RangeError("Can not convert "+l+" to a Fragment"+(l.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}f.empty=new f([],0);const U={index:0,offset:0};function v(A,l){return U.index=A,U.offset=l,U}function G(A,l){if(A===l)return!0;if(!A||"object"!=typeof A||!l||"object"!=typeof l)return!1;let d=Array.isArray(A);if(Array.isArray(l)!=d)return!1;if(d){if(A.length!=l.length)return!1;for(let h=0;h<A.length;h++)if(!G(A[h],l[h]))return!1}else{for(let h in A)if(!(h in l)||!G(A[h],l[h]))return!1;for(let h in l)if(!(h in A))return!1}return!0}let j=(()=>{class A{constructor(d,h){this.type=d,this.attrs=h}addToSet(d){let h,y=!1;for(let b=0;b<d.length;b++){let K=d[b];if(this.eq(K))return d;if(this.type.excludes(K.type))h||(h=d.slice(0,b));else{if(K.type.excludes(this.type))return d;!y&&K.type.rank>this.type.rank&&(h||(h=d.slice(0,b)),h.push(this),y=!0),h&&h.push(K)}}return h||(h=d.slice()),y||h.push(this),h}removeFromSet(d){for(let h=0;h<d.length;h++)if(this.eq(d[h]))return d.slice(0,h).concat(d.slice(h+1));return d}isInSet(d){for(let h=0;h<d.length;h++)if(this.eq(d[h]))return!0;return!1}eq(d){return this==d||this.type==d.type&&G(this.attrs,d.attrs)}toJSON(){let d={type:this.type.name};for(let h in this.attrs){d.attrs=this.attrs;break}return d}static fromJSON(d,h){if(!h)throw new RangeError("Invalid input for Mark.fromJSON");let y=d.marks[h.type];if(!y)throw new RangeError(`There is no mark type ${h.type} in this schema`);return y.create(h.attrs)}static sameSet(d,h){if(d==h)return!0;if(d.length!=h.length)return!1;for(let y=0;y<d.length;y++)if(!d[y].eq(h[y]))return!1;return!0}static setFrom(d){if(!d||Array.isArray(d)&&0==d.length)return A.none;if(d instanceof A)return[d];let h=d.slice();return h.sort((y,b)=>y.type.rank-b.type.rank),h}}return A.none=[],A})();class q extends Error{}class X{constructor(l,d,h){this.content=l,this.openStart=d,this.openEnd=h}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(l,d){let h=Z(this.content,l+this.openStart,d);return h&&new X(h,this.openStart,this.openEnd)}removeBetween(l,d){return new X(et(this.content,l+this.openStart,d+this.openStart),this.openStart,this.openEnd)}eq(l){return this.content.eq(l.content)&&this.openStart==l.openStart&&this.openEnd==l.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let l={content:this.content.toJSON()};return this.openStart>0&&(l.openStart=this.openStart),this.openEnd>0&&(l.openEnd=this.openEnd),l}static fromJSON(l,d){if(!d)return X.empty;let h=d.openStart||0,y=d.openEnd||0;if("number"!=typeof h||"number"!=typeof y)throw new RangeError("Invalid input for Slice.fromJSON");return new X(f.fromJSON(l,d.content),h,y)}static maxOpen(l,d=!0){let h=0,y=0;for(let b=l.firstChild;b&&!b.isLeaf&&(d||!b.type.spec.isolating);b=b.firstChild)h++;for(let b=l.lastChild;b&&!b.isLeaf&&(d||!b.type.spec.isolating);b=b.lastChild)y++;return new X(l,h,y)}}function et(A,l,d){let{index:h,offset:y}=A.findIndex(l),b=A.maybeChild(h),{index:K,offset:lt}=A.findIndex(d);if(y==l||b.isText){if(lt!=d&&!A.child(K).isText)throw new RangeError("Removing non-flat range");return A.cut(0,l).append(A.cut(d))}if(h!=K)throw new RangeError("Removing non-flat range");return A.replaceChild(h,b.copy(et(b.content,l-y-1,d-y-1)))}function Z(A,l,d,h){let{index:y,offset:b}=A.findIndex(l),K=A.maybeChild(y);if(b==l||K.isText)return h&&!h.canReplace(y,y,d)?null:A.cut(0,l).append(d).append(A.cut(l));let lt=Z(K.content,l-b-1,d);return lt&&A.replaceChild(y,K.copy(lt))}function st(A,l,d){if(d.openStart>A.depth)throw new q("Inserted content deeper than insertion position");if(A.depth-d.openStart!=l.depth-d.openEnd)throw new q("Inconsistent open depths");return _t(A,l,d,0)}function _t(A,l,d,h){let y=A.index(h),b=A.node(h);if(y==l.index(h)&&h<A.depth-d.openStart){let K=_t(A,l,d,h+1);return b.copy(b.content.replaceChild(y,K))}if(d.content.size){if(d.openStart||d.openEnd||A.depth!=h||l.depth!=h){let{start:K,end:lt}=function(A,l){let d=l.depth-A.openStart,y=l.node(d).copy(A.content);for(let b=d-1;b>=0;b--)y=l.node(b).copy(f.from(y));return{start:y.resolveNoCache(A.openStart+d),end:y.resolveNoCache(y.content.size-A.openEnd-d)}}(d,A);return z(b,L(A,K,lt,l,h))}{let K=A.parent,lt=K.content;return z(K,lt.cut(0,A.parentOffset).append(d.content).append(lt.cut(l.parentOffset)))}}return z(b,Y(A,l,h))}function ft(A,l){if(!l.type.compatibleContent(A.type))throw new q("Cannot join "+l.type.name+" onto "+A.type.name)}function at(A,l,d){let h=A.node(d);return ft(h,l.node(d)),h}function w(A,l){let d=l.length-1;d>=0&&A.isText&&A.sameMarkup(l[d])?l[d]=A.withText(l[d].text+A.text):l.push(A)}function N(A,l,d,h){let y=(l||A).node(d),b=0,K=l?l.index(d):y.childCount;A&&(b=A.index(d),A.depth>d?b++:A.textOffset&&(w(A.nodeAfter,h),b++));for(let lt=b;lt<K;lt++)w(y.child(lt),h);l&&l.depth==d&&l.textOffset&&w(l.nodeBefore,h)}function z(A,l){if(!A.type.validContent(l))throw new q("Invalid content for node "+A.type.name);return A.copy(l)}function L(A,l,d,h,y){let b=A.depth>y&&at(A,l,y+1),K=h.depth>y&&at(d,h,y+1),lt=[];return N(null,A,y,lt),b&&K&&l.index(y)==d.index(y)?(ft(b,K),w(z(b,L(A,l,d,h,y+1)),lt)):(b&&w(z(b,Y(A,l,y+1)),lt),N(l,d,y,lt),K&&w(z(K,Y(d,h,y+1)),lt)),N(h,null,y,lt),new f(lt)}function Y(A,l,d){let h=[];return N(null,A,d,h),A.depth>d&&w(z(at(A,l,d+1),Y(A,l,d+1)),h),N(l,null,d,h),new f(h)}X.empty=new X(f.empty,0,0);class it{constructor(l,d,h){this.pos=l,this.path=d,this.parentOffset=h,this.depth=d.length/3-1}resolveDepth(l){return null==l?this.depth:l<0?this.depth+l:l}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(l){return this.path[3*this.resolveDepth(l)]}index(l){return this.path[3*this.resolveDepth(l)+1]}indexAfter(l){return l=this.resolveDepth(l),this.index(l)+(l!=this.depth||this.textOffset?1:0)}start(l){return 0==(l=this.resolveDepth(l))?0:this.path[3*l-1]+1}end(l){return l=this.resolveDepth(l),this.start(l)+this.node(l).content.size}before(l){if(!(l=this.resolveDepth(l)))throw new RangeError("There is no position before the top-level node");return l==this.depth+1?this.pos:this.path[3*l-1]}after(l){if(!(l=this.resolveDepth(l)))throw new RangeError("There is no position after the top-level node");return l==this.depth+1?this.pos:this.path[3*l-1]+this.path[3*l].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let l=this.parent,d=this.index(this.depth);if(d==l.childCount)return null;let h=this.pos-this.path[this.path.length-1],y=l.child(d);return h?l.child(d).cut(h):y}get nodeBefore(){let l=this.index(this.depth),d=this.pos-this.path[this.path.length-1];return d?this.parent.child(l).cut(0,d):0==l?null:this.parent.child(l-1)}posAtIndex(l,d){d=this.resolveDepth(d);let h=this.path[3*d],y=0==d?0:this.path[3*d-1]+1;for(let b=0;b<l;b++)y+=h.child(b).nodeSize;return y}marks(){let l=this.parent,d=this.index();if(0==l.content.size)return j.none;if(this.textOffset)return l.child(d).marks;let h=l.maybeChild(d-1),y=l.maybeChild(d);if(!h){let lt=h;h=y,y=lt}let b=h.marks;for(var K=0;K<b.length;K++)!1===b[K].type.spec.inclusive&&(!y||!b[K].isInSet(y.marks))&&(b=b[K--].removeFromSet(b));return b}marksAcross(l){let d=this.parent.maybeChild(this.index());if(!d||!d.isInline)return null;let h=d.marks,y=l.parent.maybeChild(l.index());for(var b=0;b<h.length;b++)!1===h[b].type.spec.inclusive&&(!y||!h[b].isInSet(y.marks))&&(h=h[b--].removeFromSet(h));return h}sharedDepth(l){for(let d=this.depth;d>0;d--)if(this.start(d)<=l&&this.end(d)>=l)return d;return 0}blockRange(l=this,d){if(l.pos<this.pos)return l.blockRange(this);for(let h=this.depth-(this.parent.inlineContent||this.pos==l.pos?1:0);h>=0;h--)if(l.pos<=this.end(h)&&(!d||d(this.node(h))))return new Mt(this,l,h);return null}sameParent(l){return this.pos-this.parentOffset==l.pos-l.parentOffset}max(l){return l.pos>this.pos?l:this}min(l){return l.pos<this.pos?l:this}toString(){let l="";for(let d=1;d<=this.depth;d++)l+=(l?"/":"")+this.node(d).type.name+"_"+this.index(d-1);return l+":"+this.parentOffset}static resolve(l,d){if(!(d>=0&&d<=l.content.size))throw new RangeError("Position "+d+" out of range");let h=[],y=0,b=d;for(let K=l;;){let{index:lt,offset:gt}=K.content.findIndex(b),Dt=b-gt;if(h.push(K,lt,y+gt),!Dt||(K=K.child(lt),K.isText))break;b=Dt-1,y+=gt+1}return new it(d,h,b)}static resolveCached(l,d){for(let y=0;y<dt.length;y++){let b=dt[y];if(b.pos==d&&b.doc==l)return b}let h=dt[ct]=it.resolve(l,d);return ct=(ct+1)%Et,h}}let dt=[],ct=0,Et=12;class Mt{constructor(l,d,h){this.$from=l,this.$to=d,this.depth=h}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const ht=Object.create(null);class ot{constructor(l,d,h,y=j.none){this.type=l,this.attrs=d,this.marks=y,this.content=h||f.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(l){return this.content.child(l)}maybeChild(l){return this.content.maybeChild(l)}forEach(l){this.content.forEach(l)}nodesBetween(l,d,h,y=0){this.content.nodesBetween(l,d,h,y,this)}descendants(l){this.nodesBetween(0,this.content.size,l)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(l,d,h,y){return this.content.textBetween(l,d,h,y)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(l){return this==l||this.sameMarkup(l)&&this.content.eq(l.content)}sameMarkup(l){return this.hasMarkup(l.type,l.attrs,l.marks)}hasMarkup(l,d,h){return this.type==l&&G(this.attrs,d||l.defaultAttrs||ht)&&j.sameSet(this.marks,h||j.none)}copy(l=null){return l==this.content?this:new ot(this.type,this.attrs,l,this.marks)}mark(l){return l==this.marks?this:new ot(this.type,this.attrs,this.content,l)}cut(l,d=this.content.size){return 0==l&&d==this.content.size?this:this.copy(this.content.cut(l,d))}slice(l,d=this.content.size,h=!1){if(l==d)return X.empty;let y=this.resolve(l),b=this.resolve(d),K=h?0:y.sharedDepth(d),lt=y.start(K),Dt=y.node(K).content.cut(y.pos-lt,b.pos-lt);return new X(Dt,y.depth-K,b.depth-K)}replace(l,d,h){return st(this.resolve(l),this.resolve(d),h)}nodeAt(l){for(let d=this;;){let{index:h,offset:y}=d.content.findIndex(l);if(d=d.maybeChild(h),!d)return null;if(y==l||d.isText)return d;l-=y+1}}childAfter(l){let{index:d,offset:h}=this.content.findIndex(l);return{node:this.content.maybeChild(d),index:d,offset:h}}childBefore(l){if(0==l)return{node:null,index:0,offset:0};let{index:d,offset:h}=this.content.findIndex(l);if(h<l)return{node:this.content.child(d),index:d,offset:h};let y=this.content.child(d-1);return{node:y,index:d-1,offset:h-y.nodeSize}}resolve(l){return it.resolveCached(this,l)}resolveNoCache(l){return it.resolve(this,l)}rangeHasMark(l,d,h){let y=!1;return d>l&&this.nodesBetween(l,d,b=>(h.isInSet(b.marks)&&(y=!0),!y)),y}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let l=this.type.name;return this.content.size&&(l+="("+this.content.toStringInner()+")"),J(this.marks,l)}contentMatchAt(l){let d=this.type.contentMatch.matchFragment(this.content,0,l);if(!d)throw new Error("Called contentMatchAt on a node with invalid content");return d}canReplace(l,d,h=f.empty,y=0,b=h.childCount){let K=this.contentMatchAt(l).matchFragment(h,y,b),lt=K&&K.matchFragment(this.content,d);if(!lt||!lt.validEnd)return!1;for(let gt=y;gt<b;gt++)if(!this.type.allowsMarks(h.child(gt).marks))return!1;return!0}canReplaceWith(l,d,h,y){if(y&&!this.type.allowsMarks(y))return!1;let b=this.contentMatchAt(l).matchType(h),K=b&&b.matchFragment(this.content,d);return!!K&&K.validEnd}canAppend(l){return l.content.size?this.canReplace(this.childCount,this.childCount,l.content):this.type.compatibleContent(l.type)}check(){if(!this.type.validContent(this.content))throw new RangeError(`Invalid content for node ${this.type.name}: ${this.content.toString().slice(0,50)}`);let l=j.none;for(let d=0;d<this.marks.length;d++)l=this.marks[d].addToSet(l);if(!j.sameSet(l,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(d=>d.type.name)}`);this.content.forEach(d=>d.check())}toJSON(){let l={type:this.type.name};for(let d in this.attrs){l.attrs=this.attrs;break}return this.content.size&&(l.content=this.content.toJSON()),this.marks.length&&(l.marks=this.marks.map(d=>d.toJSON())),l}static fromJSON(l,d){if(!d)throw new RangeError("Invalid input for Node.fromJSON");let h=null;if(d.marks){if(!Array.isArray(d.marks))throw new RangeError("Invalid mark data for Node.fromJSON");h=d.marks.map(l.markFromJSON)}if("text"==d.type){if("string"!=typeof d.text)throw new RangeError("Invalid text node in JSON");return l.text(d.text,h)}let y=f.fromJSON(l,d.content);return l.nodeType(d.type).create(d.attrs,y,h)}}ot.prototype.text=void 0;class O extends ot{constructor(l,d,h,y){if(super(l,d,null,y),!h)throw new RangeError("Empty text nodes are not allowed");this.text=h}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):J(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(l,d){return this.text.slice(l,d)}get nodeSize(){return this.text.length}mark(l){return l==this.marks?this:new O(this.type,this.attrs,this.text,l)}withText(l){return l==this.text?this:new O(this.type,this.attrs,l,this.marks)}cut(l=0,d=this.text.length){return 0==l&&d==this.text.length?this:this.withText(this.text.slice(l,d))}eq(l){return this.sameMarkup(l)&&this.text==l.text}toJSON(){let l=super.toJSON();return l.text=this.text,l}}function J(A,l){for(let d=A.length-1;d>=0;d--)l=A[d].type.name+"("+l+")";return l}class x{constructor(l){this.validEnd=l,this.next=[],this.wrapCache=[]}static parse(l,d){let h=new I(l,d);if(null==h.next)return x.empty;let y=T(h);h.next&&h.err("Unexpected trailing text");let b=function(A){let l=Object.create(null);return function d(h){let y=[];h.forEach(K=>{A[K].forEach(({term:lt,to:gt})=>{if(!lt)return;let Dt;for(let At=0;At<y.length;At++)y[At][0]==lt&&(Dt=y[At][1]);Lt(A,gt).forEach(At=>{Dt||y.push([lt,Dt=[]]),-1==Dt.indexOf(At)&&Dt.push(At)})})});let b=l[h.join(",")]=new x(h.indexOf(A.length-1)>-1);for(let K=0;K<y.length;K++){let lt=y[K][1].sort(Wt);b.next.push({type:y[K][0],next:l[lt.join(",")]||d(lt)})}return b}(Lt(A,0))}(function(A){let l=[[]];return y(function b(K,lt){if("choice"==K.type)return K.exprs.reduce((gt,Dt)=>gt.concat(b(Dt,lt)),[]);if("seq"!=K.type){if("star"==K.type){let gt=d();return h(lt,gt),y(b(K.expr,gt),gt),[h(gt)]}if("plus"==K.type){let gt=d();return y(b(K.expr,lt),gt),y(b(K.expr,gt),gt),[h(gt)]}if("opt"==K.type)return[h(lt)].concat(b(K.expr,lt));if("range"==K.type){let gt=lt;for(let Dt=0;Dt<K.min;Dt++){let At=d();y(b(K.expr,gt),At),gt=At}if(-1==K.max)y(b(K.expr,gt),gt);else for(let Dt=K.min;Dt<K.max;Dt++){let At=d();h(gt,At),y(b(K.expr,gt),At),gt=At}return[h(gt)]}if("name"==K.type)return[h(lt,void 0,K.value)];throw new Error("Unknown expr type")}for(let gt=0;;gt++){let Dt=b(K.exprs[gt],lt);if(gt==K.exprs.length-1)return Dt;y(Dt,lt=d())}}(A,0),d()),l;function d(){return l.push([])-1}function h(K,lt,gt){let Dt={term:gt,to:lt};return l[K].push(Dt),Dt}function y(K,lt){K.forEach(gt=>gt.to=lt)}}(y));return function(A,l){for(let d=0,h=[A];d<h.length;d++){let y=h[d],b=!y.validEnd,K=[];for(let lt=0;lt<y.next.length;lt++){let{type:gt,next:Dt}=y.next[lt];K.push(gt.name),b&&!(gt.isText||gt.hasRequiredAttrs())&&(b=!1),-1==h.indexOf(Dt)&&h.push(Dt)}b&&l.err("Only non-generatable nodes ("+K.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(b,h),b}matchType(l){for(let d=0;d<this.next.length;d++)if(this.next[d].type==l)return this.next[d].next;return null}matchFragment(l,d=0,h=l.childCount){let y=this;for(let b=d;y&&b<h;b++)y=y.matchType(l.child(b).type);return y}get inlineContent(){return this.next.length&&this.next[0].type.isInline}get defaultType(){for(let l=0;l<this.next.length;l++){let{type:d}=this.next[l];if(!d.isText&&!d.hasRequiredAttrs())return d}return null}compatible(l){for(let d=0;d<this.next.length;d++)for(let h=0;h<l.next.length;h++)if(this.next[d].type==l.next[h].type)return!0;return!1}fillBefore(l,d=!1,h=0){let y=[this];return function b(K,lt){let gt=K.matchFragment(l,h);if(gt&&(!d||gt.validEnd))return f.from(lt.map(Dt=>Dt.createAndFill()));for(let Dt=0;Dt<K.next.length;Dt++){let{type:At,next:qt}=K.next[Dt];if(!At.isText&&!At.hasRequiredAttrs()&&-1==y.indexOf(qt)){y.push(qt);let ge=b(qt,lt.concat(At));if(ge)return ge}}return null}(this,[])}findWrapping(l){for(let h=0;h<this.wrapCache.length;h+=2)if(this.wrapCache[h]==l)return this.wrapCache[h+1];let d=this.computeWrapping(l);return this.wrapCache.push(l,d),d}computeWrapping(l){let d=Object.create(null),h=[{match:this,type:null,via:null}];for(;h.length;){let y=h.shift(),b=y.match;if(b.matchType(l)){let K=[];for(let lt=y;lt.type;lt=lt.via)K.push(lt.type);return K.reverse()}for(let K=0;K<b.next.length;K++){let{type:lt,next:gt}=b.next[K];!lt.isLeaf&&!lt.hasRequiredAttrs()&&!(lt.name in d)&&(!y.type||gt.validEnd)&&(h.push({match:lt.contentMatch,type:lt,via:y}),d[lt.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(l){if(l>=this.next.length)throw new RangeError(`There's no ${l}th edge in this content match`);return this.next[l]}toString(){let l=[];return function d(h){l.push(h);for(let y=0;y<h.next.length;y++)-1==l.indexOf(h.next[y].next)&&d(h.next[y].next)}(this),l.map((h,y)=>{let b=y+(h.validEnd?"*":" ")+" ";for(let K=0;K<h.next.length;K++)b+=(K?", ":"")+h.next[K].type.name+"->"+l.indexOf(h.next[K].next);return b}).join("\n")}}x.empty=new x(!0);class I{constructor(l,d){this.string=l,this.nodeTypes=d,this.inline=null,this.pos=0,this.tokens=l.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(l){return this.next==l&&(this.pos++||!0)}err(l){throw new SyntaxError(l+" (in content expression '"+this.string+"')")}}function T(A){let l=[];do{l.push(k(A))}while(A.eat("|"));return 1==l.length?l[0]:{type:"choice",exprs:l}}function k(A){let l=[];do{l.push(F(A))}while(A.next&&")"!=A.next&&"|"!=A.next);return 1==l.length?l[0]:{type:"seq",exprs:l}}function F(A){let l=function(A){if(A.eat("(")){let l=T(A);return A.eat(")")||A.err("Missing closing paren"),l}if(!/\W/.test(A.next)){let l=function(A,l){let d=A.nodeTypes,h=d[l];if(h)return[h];let y=[];for(let b in d){let K=d[b];K.groups.indexOf(l)>-1&&y.push(K)}return 0==y.length&&A.err("No node type or group '"+l+"' found"),y}(A,A.next).map(d=>(null==A.inline?A.inline=d.isInline:A.inline!=d.isInline&&A.err("Mixing inline and block content"),{type:"name",value:d}));return A.pos++,1==l.length?l[0]:{type:"choice",exprs:l}}A.err("Unexpected token '"+A.next+"'")}(A);for(;;)if(A.eat("+"))l={type:"plus",expr:l};else if(A.eat("*"))l={type:"star",expr:l};else if(A.eat("?"))l={type:"opt",expr:l};else{if(!A.eat("{"))break;l=pt(A,l)}return l}function ut(A){/\D/.test(A.next)&&A.err("Expected number, got '"+A.next+"'");let l=Number(A.next);return A.pos++,l}function pt(A,l){let d=ut(A),h=d;return A.eat(",")&&(h="}"!=A.next?ut(A):-1),A.eat("}")||A.err("Unclosed braced range"),{type:"range",min:d,max:h,expr:l}}function Wt(A,l){return l-A}function Lt(A,l){let d=[];return function h(y){let b=A[y];if(1==b.length&&!b[0].term)return h(b[0].to);d.push(y);for(let K=0;K<b.length;K++){let{term:lt,to:gt}=b[K];!lt&&-1==d.indexOf(gt)&&h(gt)}}(l),d.sort(Wt)}function Ft(A){let l=Object.create(null);for(let d in A){let h=A[d];if(!h.hasDefault)return null;l[d]=h.default}return l}function Zt(A,l){let d=Object.create(null);for(let h in A){let y=l&&l[h];if(void 0===y){let b=A[h];if(!b.hasDefault)throw new RangeError("No value supplied for attribute "+h);y=b.default}d[h]=y}return d}function Vt(A){let l=Object.create(null);if(A)for(let d in A)l[d]=new me(A[d]);return l}class jt{constructor(l,d,h){this.name=l,this.schema=d,this.spec=h,this.markSet=null,this.groups=h.group?h.group.split(" "):[],this.attrs=Vt(h.attrs),this.defaultAttrs=Ft(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(h.inline||"text"==l),this.isText="text"==l}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==x.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let l in this.attrs)if(this.attrs[l].isRequired)return!0;return!1}compatibleContent(l){return this==l||this.contentMatch.compatible(l.contentMatch)}computeAttrs(l){return!l&&this.defaultAttrs?this.defaultAttrs:Zt(this.attrs,l)}create(l=null,d,h){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ot(this,this.computeAttrs(l),f.from(d),j.setFrom(h))}createChecked(l=null,d,h){if(d=f.from(d),!this.validContent(d))throw new RangeError("Invalid content for node "+this.name);return new ot(this,this.computeAttrs(l),d,j.setFrom(h))}createAndFill(l=null,d,h){if(l=this.computeAttrs(l),(d=f.from(d)).size){let K=this.contentMatch.fillBefore(d);if(!K)return null;d=K.append(d)}let y=this.contentMatch.matchFragment(d),b=y&&y.fillBefore(f.empty,!0);return b?new ot(this,l,d.append(b),j.setFrom(h)):null}validContent(l){let d=this.contentMatch.matchFragment(l);if(!d||!d.validEnd)return!1;for(let h=0;h<l.childCount;h++)if(!this.allowsMarks(l.child(h).marks))return!1;return!0}allowsMarkType(l){return null==this.markSet||this.markSet.indexOf(l)>-1}allowsMarks(l){if(null==this.markSet)return!0;for(let d=0;d<l.length;d++)if(!this.allowsMarkType(l[d].type))return!1;return!0}allowedMarks(l){if(null==this.markSet)return l;let d;for(let h=0;h<l.length;h++)this.allowsMarkType(l[h].type)?d&&d.push(l[h]):d||(d=l.slice(0,h));return d?d.length?d:j.none:l}static compile(l,d){let h=Object.create(null);l.forEach((b,K)=>h[b]=new jt(b,d,K));let y=d.spec.topNode||"doc";if(!h[y])throw new RangeError("Schema is missing its top node type ('"+y+"')");if(!h.text)throw new RangeError("Every schema needs a 'text' type");for(let b in h.text.attrs)throw new RangeError("The text node type should not have attributes");return h}}class me{constructor(l){this.hasDefault=Object.prototype.hasOwnProperty.call(l,"default"),this.default=l.default}get isRequired(){return!this.hasDefault}}class zt{constructor(l,d,h,y){this.name=l,this.rank=d,this.schema=h,this.spec=y,this.attrs=Vt(y.attrs),this.excluded=null;let b=Ft(this.attrs);this.instance=b?new j(this,b):null}create(l=null){return!l&&this.instance?this.instance:new j(this,Zt(this.attrs,l))}static compile(l,d){let h=Object.create(null),y=0;return l.forEach((b,K)=>h[b]=new zt(b,y++,d,K)),h}removeFromSet(l){for(var d=0;d<l.length;d++)l[d].type==this&&(l=l.slice(0,d).concat(l.slice(d+1)),d--);return l}isInSet(l){for(let d=0;d<l.length;d++)if(l[d].type==this)return l[d]}excludes(l){return this.excluded.indexOf(l)>-1}}class _e{constructor(l){this.cached=Object.create(null),this.spec={nodes:r.from(l.nodes),marks:r.from(l.marks||{}),topNode:l.topNode},this.nodes=jt.compile(this.spec.nodes,this),this.marks=zt.compile(this.spec.marks,this);let d=Object.create(null);for(let h in this.nodes){if(h in this.marks)throw new RangeError(h+" can not be both a node and a mark");let y=this.nodes[h],b=y.spec.content||"",K=y.spec.marks;y.contentMatch=d[b]||(d[b]=x.parse(b,this.nodes)),y.inlineContent=y.contentMatch.inlineContent,y.markSet="_"==K?null:K?de(this,K.split(" ")):""!=K&&y.inlineContent?null:[]}for(let h in this.marks){let y=this.marks[h],b=y.spec.excludes;y.excluded=null==b?[y]:""==b?[]:de(this,b.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(l,d=null,h,y){if("string"==typeof l)l=this.nodeType(l);else{if(!(l instanceof jt))throw new RangeError("Invalid node type: "+l);if(l.schema!=this)throw new RangeError("Node type from different schema used ("+l.name+")")}return l.createChecked(d,h,y)}text(l,d){let h=this.nodes.text;return new O(h,h.defaultAttrs,l,j.setFrom(d))}mark(l,d){return"string"==typeof l&&(l=this.marks[l]),l.create(d)}nodeFromJSON(l){return ot.fromJSON(this,l)}markFromJSON(l){return j.fromJSON(this,l)}nodeType(l){let d=this.nodes[l];if(!d)throw new RangeError("Unknown node type: "+l);return d}}function de(A,l){let d=[];for(let h=0;h<l.length;h++){let y=l[h],b=A.marks[y],K=b;if(b)d.push(b);else for(let lt in A.marks){let gt=A.marks[lt];("_"==y||gt.spec.group&&gt.spec.group.split(" ").indexOf(y)>-1)&&d.push(K=gt)}if(!K)throw new SyntaxError("Unknown mark type: '"+l[h]+"'")}return d}class Xt{constructor(l,d){this.schema=l,this.rules=d,this.tags=[],this.styles=[],d.forEach(h=>{h.tag?this.tags.push(h):h.style&&this.styles.push(h)}),this.normalizeLists=!this.tags.some(h=>{if(!/^(ul|ol)\b/.test(h.tag)||!h.node)return!1;let y=l.nodes[h.node];return y.contentMatch.matchType(y)})}parse(l,d={}){let h=new M(this,d,!1);return h.addAll(l,d.from,d.to),h.finish()}parseSlice(l,d={}){let h=new M(this,d,!0);return h.addAll(l,d.from,d.to),X.maxOpen(h.finish())}matchTag(l,d,h){for(let y=h?this.tags.indexOf(h)+1:0;y<this.tags.length;y++){let b=this.tags[y];if(D(l,b.tag)&&(void 0===b.namespace||l.namespaceURI==b.namespace)&&(!b.context||d.matchesContext(b.context))){if(b.getAttrs){let K=b.getAttrs(l);if(!1===K)continue;b.attrs=K||void 0}return b}}}matchStyle(l,d,h,y){for(let b=y?this.styles.indexOf(y)+1:0;b<this.styles.length;b++){let K=this.styles[b],lt=K.style;if(!(0!=lt.indexOf(l)||K.context&&!h.matchesContext(K.context)||lt.length>l.length&&(61!=lt.charCodeAt(l.length)||lt.slice(l.length+1)!=d))){if(K.getAttrs){let gt=K.getAttrs(d);if(!1===gt)continue;K.attrs=gt||void 0}return K}}}static schemaRules(l){let d=[];function h(y){let b=null==y.priority?50:y.priority,K=0;for(;K<d.length;K++){let lt=d[K];if((null==lt.priority?50:lt.priority)<b)break}d.splice(K,0,y)}for(let y in l.marks){let b=l.marks[y].spec.parseDOM;b&&b.forEach(K=>{h(K=S(K)),K.mark=y})}for(let y in l.nodes){let b=l.nodes[y].spec.parseDOM;b&&b.forEach(K=>{h(K=S(K)),K.node=y})}return d}static fromSchema(l){return l.cached.domParser||(l.cached.domParser=new Xt(l,Xt.schemaRules(l)))}}const re={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ue={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},pe={ol:!0,ul:!0};function V(A,l,d){return null!=l?(l?1:0)|("full"===l?2:0):A&&"pre"==A.whitespace?3:-5&d}class g{constructor(l,d,h,y,b,K,lt){this.type=l,this.attrs=d,this.marks=h,this.pendingMarks=y,this.solid=b,this.options=lt,this.content=[],this.activeMarks=j.none,this.stashMarks=[],this.match=K||(4&lt?null:l.contentMatch)}findWrapping(l){if(!this.match){if(!this.type)return[];let d=this.type.contentMatch.fillBefore(f.from(l));if(!d){let y,h=this.type.contentMatch;return(y=h.findWrapping(l.type))?(this.match=h,y):null}this.match=this.type.contentMatch.matchFragment(d)}return this.match.findWrapping(l.type)}finish(l){if(!(1&this.options)){let y,h=this.content[this.content.length-1];if(h&&h.isText&&(y=/[ \t\r\n\u000c]+$/.exec(h.text))){let b=h;h.text.length==y[0].length?this.content.pop():this.content[this.content.length-1]=b.withText(b.text.slice(0,b.text.length-y[0].length))}}let d=f.from(this.content);return!l&&this.match&&(d=d.append(this.match.fillBefore(f.empty,!0))),this.type?this.type.create(this.attrs,d,this.marks):d}popFromStashMark(l){for(let d=this.stashMarks.length-1;d>=0;d--)if(l.eq(this.stashMarks[d]))return this.stashMarks.splice(d,1)[0]}applyPending(l){for(let d=0,h=this.pendingMarks;d<h.length;d++){let y=h[d];(this.type?this.type.allowsMarkType(y.type):Q(y.type,l))&&!y.isInSet(this.activeMarks)&&(this.activeMarks=y.addToSet(this.activeMarks),this.pendingMarks=y.removeFromSet(this.pendingMarks))}}inlineContext(l){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:l.parentNode&&!re.hasOwnProperty(l.parentNode.nodeName.toLowerCase())}}class M{constructor(l,d,h){this.parser=l,this.options=d,this.isOpen=h,this.open=0;let b,y=d.topNode,K=V(null,d.preserveWhitespace,0)|(h?4:0);b=y?new g(y.type,y.attrs,j.none,j.none,!0,d.topMatch||y.type.contentMatch,K):new g(h?null:l.schema.topNodeType,null,j.none,j.none,!0,null,K),this.nodes=[b],this.find=d.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(l){if(3==l.nodeType)this.addTextNode(l);else if(1==l.nodeType){let d=l.getAttribute("style"),h=d?this.readStyles(function(A){let d,l=/\s*([\w-]+)\s*:\s*([^;]+)/g,h=[];for(;d=l.exec(A);)h.push(d[1],d[2].trim());return h}(d)):null,y=this.top;if(null!=h)for(let b=0;b<h.length;b++)this.addPendingMark(h[b]);if(this.addElement(l),null!=h)for(let b=0;b<h.length;b++)this.removePendingMark(h[b],y)}}addTextNode(l){let d=l.nodeValue,h=this.top;if(2&h.options||h.inlineContext(l)||/[^ \t\r\n\u000c]/.test(d)){if(1&h.options)d=2&h.options?d.replace(/\r\n?/g,"\n"):d.replace(/\r?\n|\r/g," ");else if(d=d.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(d)&&this.open==this.nodes.length-1){let y=h.content[h.content.length-1],b=l.previousSibling;(!y||b&&"BR"==b.nodeName||y.isText&&/[ \t\r\n\u000c]$/.test(y.text))&&(d=d.slice(1))}d&&this.insertNode(this.parser.schema.text(d)),this.findInText(l)}else this.findInside(l)}addElement(l,d){let y,h=l.nodeName.toLowerCase();pe.hasOwnProperty(h)&&this.parser.normalizeLists&&function(A){for(let l=A.firstChild,d=null;l;l=l.nextSibling){let h=1==l.nodeType?l.nodeName.toLowerCase():null;h&&pe.hasOwnProperty(h)&&d?(d.appendChild(l),l=d):"li"==h?d=l:h&&(d=null)}}(l);let b=this.options.ruleFromNode&&this.options.ruleFromNode(l)||(y=this.parser.matchTag(l,this,d));if(b?b.ignore:ue.hasOwnProperty(h))this.findInside(l),this.ignoreFallback(l);else if(!b||b.skip||b.closeParent){b&&b.closeParent?this.open=Math.max(0,this.open-1):b&&b.skip.nodeType&&(l=b.skip);let K,lt=this.top,gt=this.needsBlock;if(re.hasOwnProperty(h))K=!0,lt.type||(this.needsBlock=!0);else if(!l.firstChild)return void this.leafFallback(l);this.addAll(l),K&&this.sync(lt),this.needsBlock=gt}else this.addElementByRule(l,b,!1===b.consuming?y:void 0)}leafFallback(l){"BR"==l.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(l.ownerDocument.createTextNode("\n"))}ignoreFallback(l){"BR"==l.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(l){let d=j.none;t:for(let h=0;h<l.length;h+=2)for(let y;;){let b=this.parser.matchStyle(l[h],l[h+1],this,y);if(!b)continue t;if(b.ignore)return null;if(d=this.parser.schema.marks[b.mark].create(b.attrs).addToSet(d),!1!==b.consuming)break;y=b}return d}addElementByRule(l,d,h){let y,b,K;d.node?(b=this.parser.schema.nodes[d.node],b.isLeaf?this.insertNode(b.create(d.attrs))||this.leafFallback(l):y=this.enter(b,d.attrs||null,d.preserveWhitespace)):(K=this.parser.schema.marks[d.mark].create(d.attrs),this.addPendingMark(K));let lt=this.top;if(b&&b.isLeaf)this.findInside(l);else if(h)this.addElement(l,h);else if(d.getContent)this.findInside(l),d.getContent(l,this.parser.schema).forEach(gt=>this.insertNode(gt));else{let gt=l;"string"==typeof d.contentElement?gt=l.querySelector(d.contentElement):"function"==typeof d.contentElement?gt=d.contentElement(l):d.contentElement&&(gt=d.contentElement),this.findAround(l,gt,!0),this.addAll(gt)}y&&this.sync(lt)&&this.open--,K&&this.removePendingMark(K,lt)}addAll(l,d,h){let y=d||0;for(let b=d?l.childNodes[d]:l.firstChild,K=null==h?null:l.childNodes[h];b!=K;b=b.nextSibling,++y)this.findAtPoint(l,y),this.addDOM(b);this.findAtPoint(l,y)}findPlace(l){let d,h;for(let y=this.open;y>=0;y--){let b=this.nodes[y],K=b.findWrapping(l);if(K&&(!d||d.length>K.length)&&(d=K,h=b,!K.length)||b.solid)break}if(!d)return!1;this.sync(h);for(let y=0;y<d.length;y++)this.enterInner(d[y],null,!1);return!0}insertNode(l){if(l.isInline&&this.needsBlock&&!this.top.type){let d=this.textblockFromContext();d&&this.enterInner(d)}if(this.findPlace(l)){this.closeExtra();let d=this.top;d.applyPending(l.type),d.match&&(d.match=d.match.matchType(l.type));let h=d.activeMarks;for(let y=0;y<l.marks.length;y++)(!d.type||d.type.allowsMarkType(l.marks[y].type))&&(h=l.marks[y].addToSet(h));return d.content.push(l.mark(h)),!0}return!1}enter(l,d,h){let y=this.findPlace(l.create(d));return y&&this.enterInner(l,d,!0,h),y}enterInner(l,d=null,h=!1,y){this.closeExtra();let b=this.top;b.applyPending(l),b.match=b.match&&b.match.matchType(l);let K=V(l,y,b.options);4&b.options&&0==b.content.length&&(K|=4),this.nodes.push(new g(l,d,b.activeMarks,b.pendingMarks,h,null,K)),this.open++}closeExtra(l=!1){let d=this.nodes.length-1;if(d>this.open){for(;d>this.open;d--)this.nodes[d-1].content.push(this.nodes[d].finish(l));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(l){for(let d=this.open;d>=0;d--)if(this.nodes[d]==l)return this.open=d,!0;return!1}get currentPos(){this.closeExtra();let l=0;for(let d=this.open;d>=0;d--){let h=this.nodes[d].content;for(let y=h.length-1;y>=0;y--)l+=h[y].nodeSize;d&&l++}return l}findAtPoint(l,d){if(this.find)for(let h=0;h<this.find.length;h++)this.find[h].node==l&&this.find[h].offset==d&&(this.find[h].pos=this.currentPos)}findInside(l){if(this.find)for(let d=0;d<this.find.length;d++)null==this.find[d].pos&&1==l.nodeType&&l.contains(this.find[d].node)&&(this.find[d].pos=this.currentPos)}findAround(l,d,h){if(l!=d&&this.find)for(let y=0;y<this.find.length;y++)null==this.find[y].pos&&1==l.nodeType&&l.contains(this.find[y].node)&&d.compareDocumentPosition(this.find[y].node)&(h?2:4)&&(this.find[y].pos=this.currentPos)}findInText(l){if(this.find)for(let d=0;d<this.find.length;d++)this.find[d].node==l&&(this.find[d].pos=this.currentPos-(l.nodeValue.length-this.find[d].offset))}matchesContext(l){if(l.indexOf("|")>-1)return l.split(/\s*\|\s*/).some(this.matchesContext,this);let d=l.split("/"),h=this.options.context,y=!(this.isOpen||h&&h.parent.type!=this.nodes[0].type),b=(y?0:1)-(h?h.depth+1:0),K=(lt,gt)=>{for(;lt>=0;lt--){let Dt=d[lt];if(""==Dt){if(lt==d.length-1||0==lt)continue;for(;gt>=b;gt--)if(K(lt-1,gt))return!0;return!1}{let At=gt>0||0==gt&&y?this.nodes[gt].type:h&&gt>=b?h.node(gt-b).type:null;if(!At||At.name!=Dt&&-1==At.groups.indexOf(Dt))return!1;gt--}}return!0};return K(d.length-1,this.open)}textblockFromContext(){let l=this.options.context;if(l)for(let d=l.depth;d>=0;d--){let h=l.node(d).contentMatchAt(l.indexAfter(d)).defaultType;if(h&&h.isTextblock&&h.defaultAttrs)return h}for(let d in this.parser.schema.nodes){let h=this.parser.schema.nodes[d];if(h.isTextblock&&h.defaultAttrs)return h}}addPendingMark(l){let d=function(A,l){for(let d=0;d<l.length;d++)if(A.eq(l[d]))return l[d]}(l,this.top.pendingMarks);d&&this.top.stashMarks.push(d),this.top.pendingMarks=l.addToSet(this.top.pendingMarks)}removePendingMark(l,d){for(let h=this.open;h>=0;h--){let y=this.nodes[h];if(y.pendingMarks.lastIndexOf(l)>-1)y.pendingMarks=l.removeFromSet(y.pendingMarks);else{y.activeMarks=l.removeFromSet(y.activeMarks);let K=y.popFromStashMark(l);K&&y.type&&y.type.allowsMarkType(K.type)&&(y.activeMarks=K.addToSet(y.activeMarks))}if(y==d)break}}}function D(A,l){return(A.matches||A.msMatchesSelector||A.webkitMatchesSelector||A.mozMatchesSelector).call(A,l)}function S(A){let l={};for(let d in A)l[d]=A[d];return l}function Q(A,l){let d=l.schema.nodes;for(let h in d){let y=d[h];if(!y.allowsMarkType(A))continue;let b=[],K=lt=>{b.push(lt);for(let gt=0;gt<lt.edgeCount;gt++){let{type:Dt,next:At}=lt.edge(gt);if(Dt==l||b.indexOf(At)<0&&K(At))return!0}};if(K(y.contentMatch))return!0}}class xt{constructor(l,d){this.nodes=l,this.marks=d}serializeFragment(l,d={},h){h||(h=St(d).createDocumentFragment());let y=h,b=[];return l.forEach(K=>{if(b.length||K.marks.length){let lt=0,gt=0;for(;lt<b.length&&gt<K.marks.length;){let Dt=K.marks[gt];if(this.marks[Dt.type.name]){if(!Dt.eq(b[lt][0])||!1===Dt.type.spec.spanning)break;lt++,gt++}else gt++}for(;lt<b.length;)y=b.pop()[1];for(;gt<K.marks.length;){let Dt=K.marks[gt++],At=this.serializeMark(Dt,K.isInline,d);At&&(b.push([Dt,y]),y.appendChild(At.dom),y=At.contentDOM||At.dom)}}y.appendChild(this.serializeNodeInner(K,d))}),h}serializeNodeInner(l,d){let{dom:h,contentDOM:y}=xt.renderSpec(St(d),this.nodes[l.type.name](l));if(y){if(l.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(l.content,d,y)}return h}serializeNode(l,d={}){let h=this.serializeNodeInner(l,d);for(let y=l.marks.length-1;y>=0;y--){let b=this.serializeMark(l.marks[y],l.isInline,d);b&&((b.contentDOM||b.dom).appendChild(h),h=b.dom)}return h}serializeMark(l,d,h={}){let y=this.marks[l.type.name];return y&&xt.renderSpec(St(h),y(l,d))}static renderSpec(l,d,h=null){if("string"==typeof d)return{dom:l.createTextNode(d)};if(null!=d.nodeType)return{dom:d};if(d.dom&&null!=d.dom.nodeType)return d;let y=d[0],b=y.indexOf(" ");b>0&&(h=y.slice(0,b),y=y.slice(b+1));let K,lt=h?l.createElementNS(h,y):l.createElement(y),gt=d[1],Dt=1;if(gt&&"object"==typeof gt&&null==gt.nodeType&&!Array.isArray(gt)){Dt=2;for(let At in gt)if(null!=gt[At]){let qt=At.indexOf(" ");qt>0?lt.setAttributeNS(At.slice(0,qt),At.slice(qt+1),gt[At]):lt.setAttribute(At,gt[At])}}for(let At=Dt;At<d.length;At++){let qt=d[At];if(0===qt){if(At<d.length-1||At>Dt)throw new RangeError("Content hole must be the only child of its parent node");return{dom:lt,contentDOM:lt}}{let{dom:ge,contentDOM:Se}=xt.renderSpec(l,qt,h);if(lt.appendChild(ge),Se){if(K)throw new RangeError("Multiple content holes");K=Se}}}return{dom:lt,contentDOM:K}}static fromSchema(l){return l.cached.domSerializer||(l.cached.domSerializer=new xt(this.nodesFromSchema(l),this.marksFromSchema(l)))}static nodesFromSchema(l){let d=bt(l.nodes);return d.text||(d.text=h=>h.text),d}static marksFromSchema(l){return bt(l.marks)}}function bt(A){let l={};for(let d in A){let h=A[d].spec.toDOM;h&&(l[d]=h)}return l}function St(A){return A.document||window.document}},62463:(yt,tt,a)=>{a.d(tt,{C1:()=>et,yy:()=>it,qv:()=>q,Sy:()=>ct,H$:()=>ht,Y1:()=>_,xm:()=>f,Bs:()=>G});var m=a(35917),r=a(38480);const R=Object.create(null);class _{constructor(O,J,x){this.$anchor=O,this.$head=J,this.ranges=x||[new f(O.min(J),O.max(J))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let O=this.ranges;for(let J=0;J<O.length;J++)if(O[J].$from.pos!=O[J].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(O,J=m.p2.empty){let x=J.content.lastChild,I=null;for(let F=0;F<J.openEnd;F++)I=x,x=x.lastChild;let T=O.steps.length,k=this.ranges;for(let F=0;F<k.length;F++){let{$from:ut,$to:pt}=k[F],Tt=O.mapping.slice(T);O.replaceRange(Tt.map(ut.pos),Tt.map(pt.pos),F?m.p2.empty:J),0==F&&_t(O,T,(x?x.isInline:I&&I.isTextblock)?-1:1)}}replaceWith(O,J){let x=O.steps.length,I=this.ranges;for(let T=0;T<I.length;T++){let{$from:k,$to:F}=I[T],ut=O.mapping.slice(x),pt=ut.map(k.pos),Tt=ut.map(F.pos);T?O.deleteRange(pt,Tt):(O.replaceRangeWith(pt,Tt,J),_t(O,x,J.isInline?-1:1))}}static findFrom(O,J,x=!1){let I=O.parent.inlineContent?new G(O):st(O.node(0),O.parent,O.pos,O.index(),J,x);if(I)return I;for(let T=O.depth-1;T>=0;T--){let k=J<0?st(O.node(0),O.node(T),O.before(T+1),O.index(T),J,x):st(O.node(0),O.node(T),O.after(T+1),O.index(T)+1,J,x);if(k)return k}return null}static near(O,J=1){return this.findFrom(O,J)||this.findFrom(O,-J)||new et(O.node(0))}static atStart(O){return st(O,O,0,0,1)||new et(O)}static atEnd(O){return st(O,O,O.content.size,O.childCount,-1)||new et(O)}static fromJSON(O,J){if(!J||!J.type)throw new RangeError("Invalid input for Selection.fromJSON");let x=R[J.type];if(!x)throw new RangeError(`No selection type ${J.type} defined`);return x.fromJSON(O,J)}static jsonID(O,J){if(O in R)throw new RangeError("Duplicate use of selection JSON ID "+O);return R[O]=J,J.prototype.jsonID=O,J}getBookmark(){return G.between(this.$anchor,this.$head).getBookmark()}}_.prototype.visible=!0;class f{constructor(O,J){this.$from=O,this.$to=J}}let U=!1;function v(ot){!U&&!ot.parent.inlineContent&&(U=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+ot.parent.type.name+")"))}class G extends _{constructor(O,J=O){v(O),v(J),super(O,J)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(O,J){let x=O.resolve(J.map(this.head));if(!x.parent.inlineContent)return _.near(x);let I=O.resolve(J.map(this.anchor));return new G(I.parent.inlineContent?I:x,x)}replace(O,J=m.p2.empty){if(super.replace(O,J),J==m.p2.empty){let x=this.$from.marksAcross(this.$to);x&&O.ensureMarks(x)}}eq(O){return O instanceof G&&O.anchor==this.anchor&&O.head==this.head}getBookmark(){return new j(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(O,J){if("number"!=typeof J.anchor||"number"!=typeof J.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new G(O.resolve(J.anchor),O.resolve(J.head))}static create(O,J,x=J){let I=O.resolve(J);return new this(I,x==J?I:O.resolve(x))}static between(O,J,x){let I=O.pos-J.pos;if((!x||I)&&(x=I>=0?1:-1),!J.parent.inlineContent){let T=_.findFrom(J,x,!0)||_.findFrom(J,-x,!0);if(!T)return _.near(J,x);J=T.$head}return O.parent.inlineContent||(0==I||(O=(_.findFrom(O,-x,!0)||_.findFrom(O,x,!0)).$anchor).pos<J.pos!=I<0)&&(O=J),new G(O,J)}}_.jsonID("text",G);class j{constructor(O,J){this.anchor=O,this.head=J}map(O){return new j(O.map(this.anchor),O.map(this.head))}resolve(O){return G.between(O.resolve(this.anchor),O.resolve(this.head))}}class q extends _{constructor(O){let J=O.nodeAfter,x=O.node(0).resolve(O.pos+J.nodeSize);super(O,x),this.node=J}map(O,J){let{deleted:x,pos:I}=J.mapResult(this.anchor),T=O.resolve(I);return x?_.near(T):new q(T)}content(){return new m.p2(m.HY.from(this.node),0,0)}eq(O){return O instanceof q&&O.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new X(this.anchor)}static fromJSON(O,J){if("number"!=typeof J.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new q(O.resolve(J.anchor))}static create(O,J){return new q(O.resolve(J))}static isSelectable(O){return!O.isText&&!1!==O.type.spec.selectable}}q.prototype.visible=!1,_.jsonID("node",q);class X{constructor(O){this.anchor=O}map(O){let{deleted:J,pos:x}=O.mapResult(this.anchor);return J?new j(x,x):new X(x)}resolve(O){let J=O.resolve(this.anchor),x=J.nodeAfter;return x&&q.isSelectable(x)?new q(J):_.near(J)}}class et extends _{constructor(O){super(O.resolve(0),O.resolve(O.content.size))}replace(O,J=m.p2.empty){if(J==m.p2.empty){O.delete(0,O.doc.content.size);let x=_.atStart(O.doc);x.eq(O.selection)||O.setSelection(x)}else super.replace(O,J)}toJSON(){return{type:"all"}}static fromJSON(O){return new et(O)}map(O){return new et(O)}eq(O){return O instanceof et}getBookmark(){return Z}}_.jsonID("all",et);const Z={map(){return this},resolve:ot=>new et(ot)};function st(ot,O,J,x,I,T=!1){if(O.inlineContent)return G.create(ot,J);for(let k=x-(I>0?0:1);I>0?k<O.childCount:k>=0;k+=I){let F=O.child(k);if(F.isAtom){if(!T&&q.isSelectable(F))return q.create(ot,J-(I<0?F.nodeSize:0))}else{let ut=st(ot,F,J+I,I<0?F.childCount:0,I,T);if(ut)return ut}J+=F.nodeSize*I}return null}function _t(ot,O,J){let x=ot.steps.length-1;if(x<O)return;let k,I=ot.steps[x];(I instanceof r.Pu||I instanceof r.FC)&&(ot.mapping.maps[x].forEach((F,ut,pt,Tt)=>{null==k&&(k=Tt)}),ot.setSelection(_.near(ot.doc.resolve(k),J)))}class N extends r.wx{constructor(O){super(O.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=O.selection,this.storedMarks=O.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(O){if(O.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=O,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(O){return this.storedMarks=O,this.updated|=2,this}ensureMarks(O){return m.vc.sameSet(this.storedMarks||this.selection.$from.marks(),O)||this.setStoredMarks(O),this}addStoredMark(O){return this.ensureMarks(O.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(O){return this.ensureMarks(O.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(O,J){super.addStep(O,J),this.updated=-3&this.updated,this.storedMarks=null}setTime(O){return this.time=O,this}replaceSelection(O){return this.selection.replace(this,O),this}replaceSelectionWith(O,J=!0){let x=this.selection;return J&&(O=O.mark(this.storedMarks||(x.empty?x.$from.marks():x.$from.marksAcross(x.$to)||m.vc.none))),x.replaceWith(this,O),this}deleteSelection(){return this.selection.replace(this),this}insertText(O,J,x){let I=this.doc.type.schema;if(null==J)return O?this.replaceSelectionWith(I.text(O),!0):this.deleteSelection();{if(null==x&&(x=J),x=null==x?J:x,!O)return this.deleteRange(J,x);let T=this.storedMarks;if(!T){let k=this.doc.resolve(J);T=x==J?k.marks():k.marksAcross(this.doc.resolve(x))}return this.replaceRangeWith(J,x,I.text(O,T)),this.selection.empty||this.setSelection(_.near(this.selection.$to)),this}}setMeta(O,J){return this.meta["string"==typeof O?O:O.key]=J,this}getMeta(O){return this.meta["string"==typeof O?O:O.key]}get isGeneric(){for(let O in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function z(ot,O){return O&&ot?ot.bind(O):ot}class L{constructor(O,J,x){this.name=O,this.init=z(J.init,x),this.apply=z(J.apply,x)}}const Y=[new L("doc",{init:ot=>ot.doc||ot.schema.topNodeType.createAndFill(),apply:ot=>ot.doc}),new L("selection",{init:(ot,O)=>ot.selection||_.atStart(O.doc),apply:ot=>ot.selection}),new L("storedMarks",{init:ot=>ot.storedMarks||null,apply:(ot,O,J,x)=>x.selection.$cursor?ot.storedMarks:null}),new L("scrollToSelection",{init:()=>0,apply:(ot,O)=>ot.scrolledIntoView?O+1:O})];class nt{constructor(O,J){this.schema=O,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Y.slice(),J&&J.forEach(x=>{if(this.pluginsByKey[x.key])throw new RangeError("Adding different instances of a keyed plugin ("+x.key+")");this.plugins.push(x),this.pluginsByKey[x.key]=x,x.spec.state&&this.fields.push(new L(x.key,x.spec.state,x))})}}class it{constructor(O){this.config=O}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(O){return this.applyTransaction(O).state}filterTransaction(O,J=-1){for(let x=0;x<this.config.plugins.length;x++)if(x!=J){let I=this.config.plugins[x];if(I.spec.filterTransaction&&!I.spec.filterTransaction.call(I,O,this))return!1}return!0}applyTransaction(O){if(!this.filterTransaction(O))return{state:this,transactions:[]};let J=[O],x=this.applyInner(O),I=null;for(;;){let T=!1;for(let k=0;k<this.config.plugins.length;k++){let F=this.config.plugins[k];if(F.spec.appendTransaction){let ut=I?I[k].n:0,pt=I?I[k].state:this,Tt=ut<J.length&&F.spec.appendTransaction.call(F,ut?J.slice(ut):J,pt,x);if(Tt&&x.filterTransaction(Tt,k)){if(Tt.setMeta("appendedTransaction",O),!I){I=[];for(let Pt=0;Pt<this.config.plugins.length;Pt++)I.push(Pt<k?{state:x,n:J.length}:{state:this,n:0})}J.push(Tt),x=x.applyInner(Tt),T=!0}I&&(I[k]={state:x,n:J.length})}}if(!T)return{state:x,transactions:J}}}applyInner(O){if(!O.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let J=new it(this.config),x=this.config.fields;for(let I=0;I<x.length;I++){let T=x[I];J[T.name]=T.apply(O,this[T.name],this,J)}return J}get tr(){return new N(this)}static create(O){let J=new nt(O.doc?O.doc.type.schema:O.schema,O.plugins),x=new it(J);for(let I=0;I<J.fields.length;I++)x[J.fields[I].name]=J.fields[I].init(O,x);return x}reconfigure(O){let J=new nt(this.schema,O.plugins),x=J.fields,I=new it(J);for(let T=0;T<x.length;T++){let k=x[T].name;I[k]=this.hasOwnProperty(k)?this[k]:x[T].init(O,I)}return I}toJSON(O){let J={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(J.storedMarks=this.storedMarks.map(x=>x.toJSON())),O&&"object"==typeof O)for(let x in O){if("doc"==x||"selection"==x)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let I=O[x],T=I.spec.state;T&&T.toJSON&&(J[x]=T.toJSON.call(I,this[I.key]))}return J}static fromJSON(O,J,x){if(!J)throw new RangeError("Invalid input for EditorState.fromJSON");if(!O.schema)throw new RangeError("Required config field 'schema' missing");let I=new nt(O.schema,O.plugins),T=new it(I);return I.fields.forEach(k=>{if("doc"==k.name)T.doc=m.NB.fromJSON(O.schema,J.doc);else if("selection"==k.name)T.selection=_.fromJSON(T.doc,J.selection);else if("storedMarks"==k.name)J.storedMarks&&(T.storedMarks=J.storedMarks.map(O.schema.markFromJSON));else{if(x)for(let F in x){let ut=x[F],pt=ut.spec.state;if(ut.key==k.name&&pt&&pt.fromJSON&&Object.prototype.hasOwnProperty.call(J,F))return void(T[k.name]=pt.fromJSON.call(ut,O,J[F],T))}T[k.name]=k.init(O,T)}}),T}}function dt(ot,O,J){for(let x in ot){let I=ot[x];I instanceof Function?I=I.bind(O):"handleDOMEvents"==x&&(I=dt(I,O,{})),J[x]=I}return J}class ct{constructor(O){this.spec=O,this.props={},O.props&&dt(O.props,this,this.props),this.key=O.key?O.key.key:Mt("plugin")}getState(O){return O[this.key]}}const Et=Object.create(null);function Mt(ot){return ot in Et?ot+"$"+ ++Et[ot]:(Et[ot]=0,ot+"$")}class ht{constructor(O="key"){this.key=Mt(O)}get(O){return O.config.pluginsByKey[this.key]}getState(O){return O[this.key]}}},38480:(yt,tt,a)=>{a.d(tt,{vs:()=>Z,FC:()=>L,Pu:()=>z,wx:()=>ne,Mn:()=>pt,Ax:()=>F,nj:()=>Lt,nd:()=>ht,k9:()=>Et,dR:()=>Bt});var m=a(35917);const R=Math.pow(2,16);function _(V,g){return V+g*R}function f(V){return 65535&V}class X{constructor(g,M,P){this.pos=g,this.delInfo=M,this.recover=P}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class et{constructor(g,M=!1){if(this.ranges=g,this.inverted=M,!g.length&&et.empty)return et.empty}recover(g){let M=0,P=f(g);if(!this.inverted)for(let D=0;D<P;D++)M+=this.ranges[3*D+2]-this.ranges[3*D+1];return this.ranges[3*P]+M+((V=g)-(65535&V))/R;var V}mapResult(g,M=1){return this._map(g,M,!1)}map(g,M=1){return this._map(g,M,!0)}_map(g,M,P){let D=0,H=this.inverted?2:1,S=this.inverted?1:2;for(let Q=0;Q<this.ranges.length;Q+=3){let vt=this.ranges[Q]-(this.inverted?D:0);if(vt>g)break;let xt=this.ranges[Q+H],bt=this.ranges[Q+S],St=vt+xt;if(g<=St){let l=vt+D+((xt?g==vt?-1:g==St?1:M:M)<0?0:bt);if(P)return l;let d=g==(M<0?vt:St)?null:_(Q/3,g-vt),h=g==vt?2:g==St?1:4;return(M<0?g!=vt:g!=St)&&(h|=8),new X(l,h,d)}D+=bt-xt}return P?g+D:new X(g+D,0,null)}touches(g,M){let P=0,D=f(M),H=this.inverted?2:1,S=this.inverted?1:2;for(let Q=0;Q<this.ranges.length;Q+=3){let vt=this.ranges[Q]-(this.inverted?P:0);if(vt>g)break;let xt=this.ranges[Q+H];if(g<=vt+xt&&Q==3*D)return!0;P+=this.ranges[Q+S]-xt}return!1}forEach(g){let M=this.inverted?2:1,P=this.inverted?1:2;for(let D=0,H=0;D<this.ranges.length;D+=3){let S=this.ranges[D],Q=S-(this.inverted?H:0),vt=S+(this.inverted?0:H),xt=this.ranges[D+M],bt=this.ranges[D+P];g(Q,Q+xt,vt,vt+bt),H+=bt-xt}}invert(){return new et(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(g){return 0==g?et.empty:new et(g<0?[0,-g,0]:[0,0,g])}}et.empty=new et([]);class Z{constructor(g=[],M,P=0,D=g.length){this.maps=g,this.mirror=M,this.from=P,this.to=D}slice(g=0,M=this.maps.length){return new Z(this.maps,this.mirror,g,M)}copy(){return new Z(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(g,M){this.to=this.maps.push(g),null!=M&&this.setMirror(this.maps.length-1,M)}appendMapping(g){for(let M=0,P=this.maps.length;M<g.maps.length;M++){let D=g.getMirror(M);this.appendMap(g.maps[M],null!=D&&D<M?P+D:void 0)}}getMirror(g){if(this.mirror)for(let M=0;M<this.mirror.length;M++)if(this.mirror[M]==g)return this.mirror[M+(M%2?-1:1)]}setMirror(g,M){this.mirror||(this.mirror=[]),this.mirror.push(g,M)}appendMappingInverted(g){for(let M=g.maps.length-1,P=this.maps.length+g.maps.length;M>=0;M--){let D=g.getMirror(M);this.appendMap(g.maps[M].invert(),null!=D&&D>M?P-D-1:void 0)}}invert(){let g=new Z;return g.appendMappingInverted(this),g}map(g,M=1){if(this.mirror)return this._map(g,M,!0);for(let P=this.from;P<this.to;P++)g=this.maps[P].map(g,M);return g}mapResult(g,M=1){return this._map(g,M,!1)}_map(g,M,P){let D=0;for(let H=this.from;H<this.to;H++){let Q=this.maps[H].mapResult(g,M);if(null!=Q.recover){let vt=this.getMirror(H);if(null!=vt&&vt>H&&vt<this.to){H=vt,g=this.maps[vt].recover(Q.recover);continue}}D|=Q.delInfo,g=Q.pos}return P?g:new X(g,D,null)}}const st=Object.create(null);class _t{getMap(){return et.empty}merge(g){return null}static fromJSON(g,M){if(!M||!M.stepType)throw new RangeError("Invalid input for Step.fromJSON");let P=st[M.stepType];if(!P)throw new RangeError(`No step type ${M.stepType} defined`);return P.fromJSON(g,M)}static jsonID(g,M){if(g in st)throw new RangeError("Duplicate use of step JSON ID "+g);return st[g]=M,M.prototype.jsonID=g,M}}class ft{constructor(g,M){this.doc=g,this.failed=M}static ok(g){return new ft(g,null)}static fail(g){return new ft(null,g)}static fromReplace(g,M,P,D){try{return ft.ok(g.replace(M,P,D))}catch(H){if(H instanceof m.e4)return ft.fail(H.message);throw H}}}function at(V,g,M){let P=[];for(let D=0;D<V.childCount;D++){let H=V.child(D);H.content.size&&(H=H.copy(at(H.content,g,H))),H.isInline&&(H=g(H,M,D)),P.push(H)}return m.HY.fromArray(P)}class w extends _t{constructor(g,M,P){super(),this.from=g,this.to=M,this.mark=P}apply(g){let M=g.slice(this.from,this.to),P=g.resolve(this.from),D=P.node(P.sharedDepth(this.to)),H=new m.p2(at(M.content,(S,Q)=>S.isAtom&&Q.type.allowsMarkType(this.mark.type)?S.mark(this.mark.addToSet(S.marks)):S,D),M.openStart,M.openEnd);return ft.fromReplace(g,this.from,this.to,H)}invert(){return new N(this.from,this.to,this.mark)}map(g){let M=g.mapResult(this.from,1),P=g.mapResult(this.to,-1);return M.deleted&&P.deleted||M.pos>=P.pos?null:new w(M.pos,P.pos,this.mark)}merge(g){return g instanceof w&&g.mark.eq(this.mark)&&this.from<=g.to&&this.to>=g.from?new w(Math.min(this.from,g.from),Math.max(this.to,g.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(g,M){if("number"!=typeof M.from||"number"!=typeof M.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new w(M.from,M.to,g.markFromJSON(M.mark))}}_t.jsonID("addMark",w);class N extends _t{constructor(g,M,P){super(),this.from=g,this.to=M,this.mark=P}apply(g){let M=g.slice(this.from,this.to),P=new m.p2(at(M.content,D=>D.mark(this.mark.removeFromSet(D.marks)),g),M.openStart,M.openEnd);return ft.fromReplace(g,this.from,this.to,P)}invert(){return new w(this.from,this.to,this.mark)}map(g){let M=g.mapResult(this.from,1),P=g.mapResult(this.to,-1);return M.deleted&&P.deleted||M.pos>=P.pos?null:new N(M.pos,P.pos,this.mark)}merge(g){return g instanceof N&&g.mark.eq(this.mark)&&this.from<=g.to&&this.to>=g.from?new N(Math.min(this.from,g.from),Math.max(this.to,g.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(g,M){if("number"!=typeof M.from||"number"!=typeof M.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new N(M.from,M.to,g.markFromJSON(M.mark))}}_t.jsonID("removeMark",N);class z extends _t{constructor(g,M,P,D=!1){super(),this.from=g,this.to=M,this.slice=P,this.structure=D}apply(g){return this.structure&&Y(g,this.from,this.to)?ft.fail("Structure replace would overwrite content"):ft.fromReplace(g,this.from,this.to,this.slice)}getMap(){return new et([this.from,this.to-this.from,this.slice.size])}invert(g){return new z(this.from,this.from+this.slice.size,g.slice(this.from,this.to))}map(g){let M=g.mapResult(this.from,1),P=g.mapResult(this.to,-1);return M.deletedAcross&&P.deletedAcross?null:new z(M.pos,Math.max(M.pos,P.pos),this.slice)}merge(g){if(!(g instanceof z)||g.structure||this.structure)return null;if(this.from+this.slice.size!=g.from||this.slice.openEnd||g.slice.openStart){if(g.to!=this.from||this.slice.openStart||g.slice.openEnd)return null;{let M=this.slice.size+g.slice.size==0?m.p2.empty:new m.p2(g.slice.content.append(this.slice.content),g.slice.openStart,this.slice.openEnd);return new z(g.from,this.to,M,this.structure)}}{let M=this.slice.size+g.slice.size==0?m.p2.empty:new m.p2(this.slice.content.append(g.slice.content),this.slice.openStart,g.slice.openEnd);return new z(this.from,this.to+(g.to-g.from),M,this.structure)}}toJSON(){let g={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(g.slice=this.slice.toJSON()),this.structure&&(g.structure=!0),g}static fromJSON(g,M){if("number"!=typeof M.from||"number"!=typeof M.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new z(M.from,M.to,m.p2.fromJSON(g,M.slice),!!M.structure)}}_t.jsonID("replace",z);class L extends _t{constructor(g,M,P,D,H,S,Q=!1){super(),this.from=g,this.to=M,this.gapFrom=P,this.gapTo=D,this.slice=H,this.insert=S,this.structure=Q}apply(g){if(this.structure&&(Y(g,this.from,this.gapFrom)||Y(g,this.gapTo,this.to)))return ft.fail("Structure gap-replace would overwrite content");let M=g.slice(this.gapFrom,this.gapTo);if(M.openStart||M.openEnd)return ft.fail("Gap is not a flat range");let P=this.slice.insertAt(this.insert,M.content);return P?ft.fromReplace(g,this.from,this.to,P):ft.fail("Content does not fit in gap")}getMap(){return new et([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(g){let M=this.gapTo-this.gapFrom;return new L(this.from,this.from+this.slice.size+M,this.from+this.insert,this.from+this.insert+M,g.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(g){let M=g.mapResult(this.from,1),P=g.mapResult(this.to,-1),D=g.map(this.gapFrom,-1),H=g.map(this.gapTo,1);return M.deletedAcross&&P.deletedAcross||D<M.pos||H>P.pos?null:new L(M.pos,P.pos,D,H,this.slice,this.insert,this.structure)}toJSON(){let g={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(g.slice=this.slice.toJSON()),this.structure&&(g.structure=!0),g}static fromJSON(g,M){if("number"!=typeof M.from||"number"!=typeof M.to||"number"!=typeof M.gapFrom||"number"!=typeof M.gapTo||"number"!=typeof M.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new L(M.from,M.to,M.gapFrom,M.gapTo,m.p2.fromJSON(g,M.slice),M.insert,!!M.structure)}}function Y(V,g,M){let P=V.resolve(g),D=M-g,H=P.depth;for(;D>0&&H>0&&P.indexAfter(H)==P.node(H).childCount;)H--,D--;if(D>0){let S=P.node(H).maybeChild(P.indexAfter(H));for(;D>0;){if(!S||S.isLeaf)return!0;S=S.firstChild,D--}}return!1}function ct(V,g,M){return(0==g||V.canReplace(g,V.childCount))&&(M==V.childCount||V.canReplace(0,M))}function Et(V){let M=V.parent.content.cutByIndex(V.startIndex,V.endIndex);for(let P=V.depth;;--P){let D=V.$from.node(P),H=V.$from.index(P),S=V.$to.indexAfter(P);if(P<V.depth&&D.canReplace(H,S,M))return P;if(0==P||D.type.spec.isolating||!ct(D,H,S))break}return null}function ht(V,g,M=null,P=V){let D=function(V,g){let{parent:M,startIndex:P,endIndex:D}=V,H=M.contentMatchAt(P).findWrapping(g);return H&&M.canReplaceWith(P,D,H.length?H[0]:g)?H:null}(V,g),H=D&&function(V,g){let{parent:M,startIndex:P,endIndex:D}=V,H=M.child(P),S=g.contentMatch.findWrapping(H.type);if(!S)return null;let vt=(S.length?S[S.length-1]:g).contentMatch;for(let xt=P;vt&&xt<D;xt++)vt=vt.matchType(M.child(xt).type);return vt&&vt.validEnd?S:null}(P,g);return H?D.map(ot).concat({type:g,attrs:M}).concat(H.map(ot)):null}function ot(V){return{type:V,attrs:null}}function F(V,g,M=1,P){let D=V.resolve(g),H=D.depth-M,S=P&&P[P.length-1]||D.parent;if(H<0||D.parent.type.spec.isolating||!D.parent.canReplace(D.index(),D.parent.childCount)||!S.type.validContent(D.parent.content.cutByIndex(D.index(),D.parent.childCount)))return!1;for(let xt=D.depth-1,bt=M-2;xt>H;xt--,bt--){let St=D.node(xt),A=D.index(xt);if(St.type.spec.isolating)return!1;let l=St.content.cutByIndex(A,St.childCount),d=P&&P[bt]||St;if(d!=St&&(l=l.replaceChild(0,d.type.create(d.attrs))),!St.canReplace(A+1,St.childCount)||!d.type.validContent(l))return!1}let Q=D.indexAfter(H),vt=P&&P[0];return D.node(H).canReplaceWith(Q,Q,vt?vt.type:D.node(H+1).type)}function pt(V,g){let M=V.resolve(g),P=M.index();return function(V,g){return!(!V||!g||V.isLeaf||!V.canAppend(g))}(M.nodeBefore,M.nodeAfter)&&M.parent.canReplace(P,P+1)}function Lt(V,g,M){let P=V.resolve(g);if(!M.content.size)return g;let D=M.content;for(let H=0;H<M.openStart;H++)D=D.firstChild.content;for(let H=1;H<=(0==M.openStart&&M.size?2:1);H++)for(let S=P.depth;S>=0;S--){let Q=S==P.depth?0:P.pos<=(P.start(S+1)+P.end(S+1))/2?-1:1,vt=P.index(S)+(Q>0?1:0),xt=P.node(S),bt=!1;if(1==H)bt=xt.canReplace(vt,vt,D);else{let St=xt.contentMatchAt(vt).findWrapping(D.firstChild.type);bt=St&&xt.canReplaceWith(vt,vt,St[0])}if(bt)return 0==Q?P.pos:Q<0?P.before(S+1):P.after(S+1)}return null}function Bt(V,g,M=g,P=m.p2.empty){if(g==M&&!P.size)return null;let D=V.resolve(g),H=V.resolve(M);return wt(D,H,P)?new z(g,M,P):new Ft(D,H,P).fit()}function wt(V,g,M){return!M.openStart&&!M.openEnd&&V.start()==g.start()&&V.parent.canReplace(V.index(),g.index(),M.content)}_t.jsonID("replaceAround",L);class Ft{constructor(g,M,P){this.$from=g,this.$to=M,this.unplaced=P,this.frontier=[],this.placed=m.HY.empty;for(let D=0;D<=g.depth;D++){let H=g.node(D);this.frontier.push({type:H.type,match:H.contentMatchAt(g.indexAfter(D))})}for(let D=g.depth;D>0;D--)this.placed=m.HY.from(g.node(D).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let xt=this.findFittable();xt?this.placeNodes(xt):this.openMore()||this.dropNode()}let g=this.mustMoveInline(),M=this.placed.size-this.depth-this.$from.depth,P=this.$from,D=this.close(g<0?this.$to:P.doc.resolve(g));if(!D)return null;let H=this.placed,S=P.depth,Q=D.depth;for(;S&&Q&&1==H.childCount;)H=H.firstChild.content,S--,Q--;let vt=new m.p2(H,S,Q);return g>-1?new L(P.pos,g,this.$to.pos,this.$to.end(),vt,M):vt.size||P.pos!=this.$to.pos?new z(P.pos,D.pos,vt):null}findFittable(){for(let g=1;g<=2;g++)for(let M=this.unplaced.openStart;M>=0;M--){let P,D=null;M?(D=jt(this.unplaced.content,M-1).firstChild,P=D.content):P=this.unplaced.content;let H=P.firstChild;for(let S=this.depth;S>=0;S--){let xt,{type:Q,match:vt}=this.frontier[S],bt=null;if(1==g&&(H?vt.matchType(H.type)||(bt=vt.fillBefore(m.HY.from(H),!1)):D&&Q.compatibleContent(D.type)))return{sliceDepth:M,frontierDepth:S,parent:D,inject:bt};if(2==g&&H&&(xt=vt.findWrapping(H.type)))return{sliceDepth:M,frontierDepth:S,parent:D,wrap:xt};if(D&&vt.matchType(D.type))break}}}openMore(){let{content:g,openStart:M,openEnd:P}=this.unplaced,D=jt(g,M);return!(!D.childCount||D.firstChild.isLeaf||(this.unplaced=new m.p2(g,M+1,Math.max(P,D.size+M>=g.size-P?M+1:0)),0))}dropNode(){let{content:g,openStart:M,openEnd:P}=this.unplaced,D=jt(g,M);if(D.childCount<=1&&M>0){let H=g.size-M<=M+D.size;this.unplaced=new m.p2(Zt(g,M-1,1),M-1,H?M-1:P)}else this.unplaced=new m.p2(Zt(g,M,1),M,P)}placeNodes({sliceDepth:g,frontierDepth:M,parent:P,inject:D,wrap:H}){for(;this.depth>M;)this.closeFrontierNode();if(H)for(let h=0;h<H.length;h++)this.openFrontierNode(H[h]);let S=this.unplaced,Q=P?P.content:S.content,vt=S.openStart-g,xt=0,bt=[],{match:St,type:A}=this.frontier[M];if(D){for(let h=0;h<D.childCount;h++)bt.push(D.child(h));St=St.matchFragment(D)}let l=Q.size+g-(S.content.size-S.openEnd);for(;xt<Q.childCount;){let h=Q.child(xt),y=St.matchType(h.type);if(!y)break;xt++,(xt>1||0==vt||h.content.size)&&(St=y,bt.push(me(h.mark(A.allowedMarks(h.marks)),1==xt?vt:0,xt==Q.childCount?l:-1)))}let d=xt==Q.childCount;d||(l=-1),this.placed=Vt(this.placed,M,m.HY.from(bt)),this.frontier[M].match=St,d&&l<0&&P&&P.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let h=0,y=Q;h<l;h++){let b=y.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),y=b.content}this.unplaced=d?0==g?m.p2.empty:new m.p2(Zt(S.content,g-1,1),g-1,l<0?S.openEnd:g-1):new m.p2(Zt(S.content,g,xt),S.openStart,S.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let M,g=this.frontier[this.depth];if(!g.type.isTextblock||!zt(this.$to,this.$to.depth,g.type,g.match,!1)||this.$to.depth==this.depth&&(M=this.findCloseLevel(this.$to))&&M.depth==this.depth)return-1;let{depth:P}=this.$to,D=this.$to.after(P);for(;P>1&&D==this.$to.end(--P);)++D;return D}findCloseLevel(g){t:for(let M=Math.min(this.depth,g.depth);M>=0;M--){let{match:P,type:D}=this.frontier[M],H=M<g.depth&&g.end(M+1)==g.pos+(g.depth-(M+1)),S=zt(g,M,D,P,H);if(S){for(let Q=M-1;Q>=0;Q--){let{match:vt,type:xt}=this.frontier[Q],bt=zt(g,Q,xt,vt,!0);if(!bt||bt.childCount)continue t}return{depth:M,fit:S,move:H?g.doc.resolve(g.after(M+1)):g}}}}close(g){let M=this.findCloseLevel(g);if(!M)return null;for(;this.depth>M.depth;)this.closeFrontierNode();M.fit.childCount&&(this.placed=Vt(this.placed,M.depth,M.fit)),g=M.move;for(let P=M.depth+1;P<=g.depth;P++){let D=g.node(P),H=D.type.contentMatch.fillBefore(D.content,!0,g.index(P));this.openFrontierNode(D.type,D.attrs,H)}return g}openFrontierNode(g,M=null,P){let D=this.frontier[this.depth];D.match=D.match.matchType(g),this.placed=Vt(this.placed,this.depth,m.HY.from(g.create(M,P))),this.frontier.push({type:g,match:g.contentMatch})}closeFrontierNode(){let M=this.frontier.pop().match.fillBefore(m.HY.empty,!0);M.childCount&&(this.placed=Vt(this.placed,this.frontier.length,M))}}function Zt(V,g,M){return 0==g?V.cutByIndex(M,V.childCount):V.replaceChild(0,V.firstChild.copy(Zt(V.firstChild.content,g-1,M)))}function Vt(V,g,M){return 0==g?V.append(M):V.replaceChild(V.childCount-1,V.lastChild.copy(Vt(V.lastChild.content,g-1,M)))}function jt(V,g){for(let M=0;M<g;M++)V=V.firstChild.content;return V}function me(V,g,M){if(g<=0)return V;let P=V.content;return g>1&&(P=P.replaceChild(0,me(P.firstChild,g-1,1==P.childCount?M-1:0))),g>0&&(P=V.type.contentMatch.fillBefore(P).append(P),M<=0&&(P=P.append(V.type.contentMatch.matchFragment(P).fillBefore(m.HY.empty,!0)))),V.copy(P)}function zt(V,g,M,P,D){let H=V.node(g),S=D?V.indexAfter(g):V.index(g);if(S==H.childCount&&!M.compatibleContent(H.type))return null;let Q=P.fillBefore(H.content,!0,S);return Q&&!function(V,g,M){for(let P=M;P<g.childCount;P++)if(!V.allowsMarks(g.child(P).marks))return!0;return!1}(M,H.content,S)?Q:null}function de(V){return V.spec.defining||V.spec.definingForContent}function re(V,g,M,P,D){if(g<M){let H=V.firstChild;V=V.replaceChild(0,H.copy(re(H.content,g+1,M,P,H)))}if(g>P){let H=D.contentMatchAt(0),S=H.fillBefore(V).append(V);V=S.append(H.matchFragment(S).fillBefore(m.HY.empty,!0))}return V}function Qt(V,g){let M=[];for(let D=Math.min(V.depth,g.depth);D>=0;D--){let H=V.start(D);if(H<V.pos-(V.depth-D)||g.end(D)>g.pos+(g.depth-D)||V.node(D).type.spec.isolating||g.node(D).type.spec.isolating)break;(H==g.start(D)||D==V.depth&&D==g.depth&&V.parent.inlineContent&&g.parent.inlineContent&&D&&g.start(D-1)==H-1)&&M.push(D)}return M}let Ut=class extends Error{};Ut=function V(g){let M=Error.call(this,g);return M.__proto__=V.prototype,M},(Ut.prototype=Object.create(Error.prototype)).constructor=Ut,Ut.prototype.name="TransformError";class ne{constructor(g){this.doc=g,this.steps=[],this.docs=[],this.mapping=new Z}get before(){return this.docs.length?this.docs[0]:this.doc}step(g){let M=this.maybeStep(g);if(M.failed)throw new Ut(M.failed);return this}maybeStep(g){let M=g.apply(this.doc);return M.failed||this.addStep(g,M.doc),M}get docChanged(){return this.steps.length>0}addStep(g,M){this.docs.push(this.doc),this.steps.push(g),this.mapping.appendMap(g.getMap()),this.doc=M}replace(g,M=g,P=m.p2.empty){let D=Bt(this.doc,g,M,P);return D&&this.step(D),this}replaceWith(g,M,P){return this.replace(g,M,new m.p2(m.HY.from(P),0,0))}delete(g,M){return this.replace(g,M,m.p2.empty)}insert(g,M){return this.replaceWith(g,g,M)}replaceRange(g,M,P){return function(V,g,M,P){if(!P.size)return V.deleteRange(g,M);let D=V.doc.resolve(g),H=V.doc.resolve(M);if(wt(D,H,P))return V.step(new z(g,M,P));let S=Qt(D,V.doc.resolve(M));0==S[S.length-1]&&S.pop();let Q=-(D.depth+1);S.unshift(Q);for(let A=D.depth,l=D.pos-1;A>0;A--,l--){let d=D.node(A).type.spec;if(d.defining||d.definingAsContext||d.isolating)break;S.indexOf(A)>-1?Q=A:D.before(A)==l&&S.splice(1,0,-A)}let vt=S.indexOf(Q),xt=[],bt=P.openStart;for(let A=P.content,l=0;;l++){let d=A.firstChild;if(xt.push(d),l==P.openStart)break;A=d.content}for(let A=bt-1;A>=0;A--){let l=xt[A].type,d=de(l);if(d&&D.node(vt).type!=l)bt=A;else if(d||!l.isTextblock)break}for(let A=P.openStart;A>=0;A--){let l=(A+bt+1)%(P.openStart+1),d=xt[l];if(d)for(let h=0;h<S.length;h++){let y=S[(h+vt)%S.length],b=!0;y<0&&(b=!1,y=-y);let K=D.node(y-1),lt=D.index(y-1);if(K.canReplaceWith(lt,lt,d.type,d.marks))return V.replace(D.before(y),b?H.after(y):M,new m.p2(re(P.content,0,P.openStart,l),l,P.openEnd))}}let St=V.steps.length;for(let A=S.length-1;A>=0&&(V.replace(g,M,P),!(V.steps.length>St));A--){let l=S[A];l<0||(g=D.before(l),M=H.after(l))}}(this,g,M,P),this}replaceRangeWith(g,M,P){return function(V,g,M,P){if(!P.isInline&&g==M&&V.doc.resolve(g).parent.content.size){let D=function(V,g,M){let P=V.resolve(g);if(P.parent.canReplaceWith(P.index(),P.index(),M))return g;if(0==P.parentOffset)for(let D=P.depth-1;D>=0;D--){let H=P.index(D);if(P.node(D).canReplaceWith(H,H,M))return P.before(D+1);if(H>0)return null}if(P.parentOffset==P.parent.content.size)for(let D=P.depth-1;D>=0;D--){let H=P.indexAfter(D);if(P.node(D).canReplaceWith(H,H,M))return P.after(D+1);if(H<P.node(D).childCount)return null}return null}(V.doc,g,P.type);null!=D&&(g=M=D)}V.replaceRange(g,M,new m.p2(m.HY.from(P),0,0))}(this,g,M,P),this}deleteRange(g,M){return function(V,g,M){let P=V.doc.resolve(g),D=V.doc.resolve(M),H=Qt(P,D);for(let S=0;S<H.length;S++){let Q=H[S],vt=S==H.length-1;if(vt&&0==Q||P.node(Q).type.contentMatch.validEnd)return V.delete(P.start(Q),D.end(Q));if(Q>0&&(vt||P.node(Q-1).canReplace(P.index(Q-1),D.indexAfter(Q-1))))return V.delete(P.before(Q),D.after(Q))}for(let S=1;S<=P.depth&&S<=D.depth;S++)if(g-P.start(S)==P.depth-S&&M>P.end(S)&&D.end(S)-M!=D.depth-S)return V.delete(P.before(S),M);V.delete(g,M)}(this,g,M),this}lift(g,M){return function(V,g,M){let{$from:P,$to:D,depth:H}=g,S=P.before(H+1),Q=D.after(H+1),vt=S,xt=Q,bt=m.HY.empty,St=0;for(let d=H,h=!1;d>M;d--)h||P.index(d)>0?(h=!0,bt=m.HY.from(P.node(d).copy(bt)),St++):vt--;let A=m.HY.empty,l=0;for(let d=H,h=!1;d>M;d--)h||D.after(d+1)<D.end(d)?(h=!0,A=m.HY.from(D.node(d).copy(A)),l++):xt++;V.step(new L(vt,xt,S,Q,new m.p2(bt.append(A),St,l),bt.size-St,!0))}(this,g,M),this}join(g,M=1){return function(V,g,M){let P=new z(g-M,g+M,m.p2.empty,!0);V.step(P)}(this,g,M),this}wrap(g,M){return function(V,g,M){let P=m.HY.empty;for(let S=M.length-1;S>=0;S--){if(P.size){let Q=M[S].type.contentMatch.matchFragment(P);if(!Q||!Q.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}P=m.HY.from(M[S].type.create(M[S].attrs,P))}let D=g.start,H=g.end;V.step(new L(D,H,D,H,new m.p2(P,0,0),M.length,!0))}(this,g,M),this}setBlockType(g,M=g,P,D=null){return function(V,g,M,P,D){if(!P.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let H=V.steps.length;V.doc.nodesBetween(g,M,(S,Q)=>{if(S.isTextblock&&!S.hasMarkup(P,D)&&function(V,g,M){let P=V.resolve(g),D=P.index();return P.parent.canReplaceWith(D,D+1,M)}(V.doc,V.mapping.slice(H).map(Q),P)){V.clearIncompatible(V.mapping.slice(H).map(Q,1),P);let vt=V.mapping.slice(H),xt=vt.map(Q,1),bt=vt.map(Q+S.nodeSize,1);return V.step(new L(xt,bt,xt+1,bt-1,new m.p2(m.HY.from(P.create(D,null,S.marks)),0,0),1,!0)),!1}})}(this,g,M,P,D),this}setNodeMarkup(g,M,P=null,D=[]){return function(V,g,M,P,D){let H=V.doc.nodeAt(g);if(!H)throw new RangeError("No node at given position");M||(M=H.type);let S=M.create(P,null,D||H.marks);if(H.isLeaf)return V.replaceWith(g,g+H.nodeSize,S);if(!M.validContent(H.content))throw new RangeError("Invalid content for node type "+M.name);V.step(new L(g,g+H.nodeSize,g+1,g+H.nodeSize-1,new m.p2(m.HY.from(S),0,0),1,!0))}(this,g,M,P,D),this}split(g,M=1,P){return function(V,g,M=1,P){let D=V.doc.resolve(g),H=m.HY.empty,S=m.HY.empty;for(let Q=D.depth,vt=D.depth-M,xt=M-1;Q>vt;Q--,xt--){H=m.HY.from(D.node(Q).copy(H));let bt=P&&P[xt];S=m.HY.from(bt?bt.type.create(bt.attrs,S):D.node(Q).copy(S))}V.step(new z(g,g,new m.p2(H.append(S),M,M),!0))}(this,g,M,P),this}addMark(g,M,P){return function(V,g,M,P){let S,Q,D=[],H=[];V.doc.nodesBetween(g,M,(vt,xt,bt)=>{if(!vt.isInline)return;let St=vt.marks;if(!P.isInSet(St)&&bt.type.allowsMarkType(P.type)){let A=Math.max(xt,g),l=Math.min(xt+vt.nodeSize,M),d=P.addToSet(St);for(let h=0;h<St.length;h++)St[h].isInSet(d)||(S&&S.to==A&&S.mark.eq(St[h])?S.to=l:D.push(S=new N(A,l,St[h])));Q&&Q.to==A?Q.to=l:H.push(Q=new w(A,l,P))}}),D.forEach(vt=>V.step(vt)),H.forEach(vt=>V.step(vt))}(this,g,M,P),this}removeMark(g,M,P){return function(V,g,M,P){let D=[],H=0;V.doc.nodesBetween(g,M,(S,Q)=>{if(!S.isInline)return;H++;let vt=null;if(P instanceof m.ZU){let bt,xt=S.marks;for(;bt=P.isInSet(xt);)(vt||(vt=[])).push(bt),xt=bt.removeFromSet(xt)}else P?P.isInSet(S.marks)&&(vt=[P]):vt=S.marks;if(vt&&vt.length){let xt=Math.min(Q+S.nodeSize,M);for(let bt=0;bt<vt.length;bt++){let A,St=vt[bt];for(let l=0;l<D.length;l++){let d=D[l];d.step==H-1&&St.eq(D[l].style)&&(A=d)}A?(A.to=xt,A.step=H):D.push({style:St,from:Math.max(Q,g),to:xt,step:H})}}}),D.forEach(S=>V.step(new N(S.from,S.to,S.style)))}(this,g,M,P),this}clearIncompatible(g,M,P){return function(V,g,M,P=M.contentMatch){let D=V.doc.nodeAt(g),H=[],S=g+1;for(let Q=0;Q<D.childCount;Q++){let vt=D.child(Q),xt=S+vt.nodeSize,bt=P.matchType(vt.type);if(bt){P=bt;for(let St=0;St<vt.marks.length;St++)M.allowsMarkType(vt.marks[St].type)||V.step(new N(S,xt,vt.marks[St]))}else H.push(new z(S,xt,m.p2.empty));S=xt}if(!P.validEnd){let Q=P.fillBefore(m.HY.empty,!0);V.replace(S,S,new m.p2(Q,0,0))}for(let Q=H.length-1;Q>=0;Q--)V.step(H[Q])}(this,g,M,P),this}}},43594:(yt,tt,a)=>{a.d(tt,{p:()=>oe,EH:()=>Ht,tk:()=>Po});var m=a(62463),r=a(35917),R=a(38480);const _="undefined"!=typeof navigator?navigator:null,f="undefined"!=typeof document?document:null,U=_&&_.userAgent||"",v=/Edge\/(\d+)/.exec(U),G=/MSIE \d/.exec(U),j=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(U),q=!!(G||j||v),X=G?document.documentMode:j?+j[1]:v?+v[1]:0,et=!q&&/gecko\/(\d+)/i.test(U);et&&/Firefox\/(\d+)/.exec(U);const Z=!q&&/Chrome\/(\d+)/.exec(U),st=!!Z,_t=Z?+Z[1]:0,ft=!q&&!!_&&/Apple Computer/.test(_.vendor),at=ft&&(/Mobile\/\w+/.test(U)||!!_&&_.maxTouchPoints>2),w=at||!!_&&/Mac/.test(_.platform),N=/Android \d/.test(U),z=!!f&&"webkitFontSmoothing"in f.documentElement.style,L=z?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,Y=function(n){for(var t=0;;t++)if(!(n=n.previousSibling))return t},nt=function(n){let t=n.assignedSlot||n.parentNode;return t&&11==t.nodeType?t.host:t};let it=null;const dt=function(n,t,e){let o=it||(it=document.createRange());return o.setEnd(n,null==e?n.nodeValue.length:e),o.setStart(n,t||0),o},ct=function(n,t,e,o){return e&&(Mt(n,t,e,o,-1)||Mt(n,t,e,o,1))},Et=/^(img|br|input|textarea|hr)$/i;function Mt(n,t,e,o,i){for(;;){if(n==e&&t==o)return!0;if(t==(i<0?0:ht(n))){let s=n.parentNode;if(!s||1!=s.nodeType||O(n)||Et.test(n.nodeName)||"false"==n.contentEditable)return!1;t=Y(n)+(i<0?0:1),n=s}else{if(1!=n.nodeType)return!1;if("false"==(n=n.childNodes[t+(i<0?-1:0)]).contentEditable)return!1;t=i<0?ht(n):0}}}function ht(n){return 3==n.nodeType?n.nodeValue.length:n.childNodes.length}function O(n){let t;for(let e=n;e&&!(t=e.pmViewDesc);e=e.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==n||t.contentDOM==n)}const J=function(n){let t=n.isCollapsed;return t&&st&&n.rangeCount&&!n.getRangeAt(0).collapsed&&(t=!1),t};function x(n,t){let e=document.createEvent("Event");return e.initEvent("keydown",!0,!0),e.keyCode=n,e.key=e.code=t,e}function I(n){return{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function T(n,t){return"number"==typeof n?n:n[t]}function k(n){let t=n.getBoundingClientRect();return{left:t.left,right:t.left+n.clientWidth*(t.width/n.offsetWidth||1),top:t.top,bottom:t.top+n.clientHeight*(t.height/n.offsetHeight||1)}}function F(n,t,e){let o=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let c=e||n.dom;c;c=nt(c)){if(1!=c.nodeType)continue;let u=c,p=u==s.body,E=p?I(s):k(u),C=0,B=0;if(t.top<E.top+T(o,"top")?B=-(E.top-t.top+T(i,"top")):t.bottom>E.bottom-T(o,"bottom")&&(B=t.bottom-E.bottom+T(i,"bottom")),t.left<E.left+T(o,"left")?C=-(E.left-t.left+T(i,"left")):t.right>E.right-T(o,"right")&&(C=t.right-E.right+T(i,"right")),C||B)if(p)s.defaultView.scrollBy(C,B);else{let W=u.scrollLeft,$=u.scrollTop;B&&(u.scrollTop+=B),C&&(u.scrollLeft+=C);let rt=u.scrollLeft-W,mt=u.scrollTop-$;t={left:t.left-rt,top:t.top-mt,right:t.right-rt,bottom:t.bottom-mt}}if(p)break}}function pt(n){let t=[],e=n.ownerDocument;for(let o=n;o&&(t.push({dom:o,top:o.scrollTop,left:o.scrollLeft}),n!=e);o=nt(o));return t}function Pt(n,t){for(let e=0;e<n.length;e++){let{dom:o,top:i,left:s}=n[e];o.scrollTop!=i+t&&(o.scrollTop=i+t),o.scrollLeft!=s&&(o.scrollLeft=s)}}let kt=null;function Lt(n,t){let e,i,o=2e8,s=0,c=t.top,u=t.top;for(let p=n.firstChild,E=0;p;p=p.nextSibling,E++){let C;if(1==p.nodeType)C=p.getClientRects();else{if(3!=p.nodeType)continue;C=dt(p).getClientRects()}for(let B=0;B<C.length;B++){let W=C[B];if(W.top<=c&&W.bottom>=u){c=Math.max(W.bottom,c),u=Math.min(W.top,u);let $=W.left>t.left?W.left-t.left:W.right<t.left?t.left-W.right:0;if($<o){e=p,o=$,i=$&&3==e.nodeType?{left:W.right<t.left?W.right:W.left,top:t.top}:t,1==p.nodeType&&$&&(s=E+(t.left>=(W.left+W.right)/2?1:0));continue}}!e&&(t.left>=W.right&&t.top>=W.top||t.left>=W.left&&t.top>=W.bottom)&&(s=E+1)}}return e&&3==e.nodeType?function(n,t){let e=n.nodeValue.length,o=document.createRange();for(let i=0;i<e;i++){o.setEnd(n,i+1),o.setStart(n,i);let s=zt(o,1);if(s.top!=s.bottom&&wt(t,s))return{node:n,offset:i+(t.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}(e,i):!e||o&&1==e.nodeType?{node:n,offset:s}:Lt(e,i)}function wt(n,t){return n.left>=t.left-1&&n.left<=t.right+1&&n.top>=t.top-1&&n.top<=t.bottom+1}function jt(n,t,e){let o=n.childNodes.length;if(o&&e.top<e.bottom)for(let i=Math.max(0,Math.min(o-1,Math.floor(o*(t.top-e.top)/(e.bottom-e.top))-2)),s=i;;){let c=n.childNodes[s];if(1==c.nodeType){let u=c.getClientRects();for(let p=0;p<u.length;p++){let E=u[p];if(wt(t,E))return jt(c,t,E)}}if((s=(s+1)%o)==i)break}return n}function me(n,t){let o,e=n.dom.ownerDocument,i=0;if(e.caretPositionFromPoint)try{let p=e.caretPositionFromPoint(t.left,t.top);p&&({offsetNode:o,offset:i}=p)}catch(p){}if(!o&&e.caretRangeFromPoint){let p=e.caretRangeFromPoint(t.left,t.top);p&&({startContainer:o,startOffset:i}=p)}let c,s=(n.root.elementFromPoint?n.root:e).elementFromPoint(t.left,t.top);if(!s||!n.dom.contains(1!=s.nodeType?s.parentNode:s)){let p=n.dom.getBoundingClientRect();if(!wt(t,p)||(s=jt(n.dom,t,p),!s))return null}if(ft)for(let p=s;o&&p;p=nt(p))p.draggable&&(o=void 0);if(s=function(n,t){let e=n.parentNode;return e&&/^li$/i.test(e.nodeName)&&t.left<n.getBoundingClientRect().left?e:n}(s,t),o){if(et&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length),i<o.childNodes.length)){let E,p=o.childNodes[i];"IMG"==p.nodeName&&(E=p.getBoundingClientRect()).right<=t.left&&E.bottom>t.top&&i++}o==n.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&t.top>o.lastChild.getBoundingClientRect().bottom?c=n.state.doc.content.size:(0==i||1!=o.nodeType||"BR"!=o.childNodes[i-1].nodeName)&&(c=function(n,t,e,o){let i=-1;for(let s=t;s!=n.dom;){let c=n.docView.nearestDesc(s,!0);if(!c)return null;if(c.node.isBlock&&c.parent){let u=c.dom.getBoundingClientRect();if(u.left>o.left||u.top>o.top)i=c.posBefore;else{if(!(u.right<o.left||u.bottom<o.top))break;i=c.posAfter}}s=c.dom.parentNode}return i>-1?i:n.docView.posFromDOM(t,e,1)}(n,o,i,t))}null==c&&(c=function(n,t,e){let{node:o,offset:i}=Lt(t,e),s=-1;if(1==o.nodeType&&!o.firstChild){let c=o.getBoundingClientRect();s=c.left!=c.right&&e.left>(c.left+c.right)/2?1:-1}return n.docView.posFromDOM(o,i,s)}(n,s,t));let u=n.docView.nearestDesc(s,!0);return{pos:c,inside:u?u.posAtStart-u.border:-1}}function zt(n,t){let e=n.getClientRects();return e.length?e[t<0?0:e.length-1]:n.getBoundingClientRect()}const _e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function de(n,t,e){let{node:o,offset:i,atom:s}=n.docView.domFromPos(t,e<0?-1:1),c=z||et;if(3==o.nodeType){if(!c||!_e.test(o.nodeValue)&&(e<0?i:i!=o.nodeValue.length)){let p=i,E=i,C=e<0?1:-1;return e<0&&!i?(E++,C=-1):e>=0&&i==o.nodeValue.length?(p--,C=1):e<0?p--:E++,Xt(zt(dt(o,p,E),C),C<0)}{let p=zt(dt(o,i,i),e);if(et&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){let E=zt(dt(o,i-1,i-1),-1);if(E.top==p.top){let C=zt(dt(o,i,i+1),-1);if(C.top!=p.top)return Xt(C,C.left<E.left)}}return p}}if(!n.state.doc.resolve(t-(s||0)).parent.inlineContent){if(null==s&&i&&(e<0||i==ht(o))){let p=o.childNodes[i-1];if(1==p.nodeType)return re(p.getBoundingClientRect(),!1)}if(null==s&&i<ht(o)){let p=o.childNodes[i];if(1==p.nodeType)return re(p.getBoundingClientRect(),!0)}return re(o.getBoundingClientRect(),e>=0)}if(null==s&&i&&(e<0||i==ht(o))){let p=o.childNodes[i-1],E=3==p.nodeType?dt(p,ht(p)-(c?0:1)):1!=p.nodeType||"BR"==p.nodeName&&p.nextSibling?null:p;if(E)return Xt(zt(E,1),!1)}if(null==s&&i<ht(o)){let p=o.childNodes[i];for(;p.pmViewDesc&&p.pmViewDesc.ignoreForCoords;)p=p.nextSibling;let E=p?3==p.nodeType?dt(p,0,c?0:1):1==p.nodeType?p:null:null;if(E)return Xt(zt(E,-1),!0)}return Xt(zt(3==o.nodeType?dt(o):o,-e),e>=0)}function Xt(n,t){if(0==n.width)return n;let e=t?n.left:n.right;return{top:n.top,bottom:n.bottom,left:e,right:e}}function re(n,t){if(0==n.height)return n;let e=t?n.top:n.bottom;return{top:e,bottom:e,left:n.left,right:n.right}}function ue(n,t,e){let o=n.state,i=n.root.activeElement;o!=t&&n.updateState(t),i!=n.dom&&n.focus();try{return e()}finally{o!=t&&n.updateState(o),i!=n.dom&&i&&i.focus()}}const Qt=/[\u0590-\u08ac]/;let ne=null,V=null,g=!1;class Q{constructor(t,e,o,i){this.parent=t,this.children=e,this.dom=o,this.contentDOM=i,this.dirty=0,o.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,o){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,o=this.posAtStart;;e++){let i=this.children[e];if(i==t)return o;o+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,o){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(o<0){let s,c;if(t==this.contentDOM)s=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&(!(c=s.pmViewDesc)||c.parent!=this);)s=s.previousSibling;return s?this.posBeforeChild(c)+c.size:this.posAtStart}{let s,c;if(t==this.contentDOM)s=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&(!(c=s.pmViewDesc)||c.parent!=this);)s=s.nextSibling;return s?this.posBeforeChild(c):this.posAtEnd}}let i;if(t==this.dom&&this.contentDOM)i=e>Y(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(null==i&&e==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return(null==i?o>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let o=!0,i=t;i;i=i.parentNode){let c,s=this.getDesc(i);if(s&&(!e||s.node)){if(!o||!(c=s.nodeDOM)||(1==c.nodeType?c.contains(1==t.nodeType?t:t.parentNode):c==t))return s;o=!1}}}getDesc(t){let e=t.pmViewDesc;for(let o=e;o;o=o.parent)if(o==this)return e}posFromDOM(t,e,o){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,e,o)}return-1}descAt(t){for(let e=0,o=0;e<this.children.length;e++){let i=this.children[e],s=o+i.size;if(o==t&&s!=o){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(t<s)return i.descAt(t-o-i.border);o=s}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let s,o=0,i=0;for(let s=0;o<this.children.length;o++){let c=this.children[o],u=s+c.size;if(u>t||c instanceof d){i=t-s;break}s=u}if(i)return this.children[o].domFromPos(i-this.children[o].border,e);for(;o&&!(s=this.children[o-1]).size&&s instanceof vt&&s.side>=0;o--);if(e<=0){let s,c=!0;for(;s=o?this.children[o-1]:null,s&&s.dom.parentNode!=this.contentDOM;o--,c=!1);return s&&e&&c&&!s.border&&!s.domAtom?s.domFromPos(s.size,e):{node:this.contentDOM,offset:s?Y(s.dom)+1:0}}{let s,c=!0;for(;s=o<this.children.length?this.children[o]:null,s&&s.dom.parentNode!=this.contentDOM;o++,c=!1);return s&&c&&!s.border&&!s.domAtom?s.domFromPos(0,e):{node:this.contentDOM,offset:s?Y(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,o=0){if(0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let c=o,u=0;;u++){let p=this.children[u],E=c+p.size;if(-1==i&&t<=E){let C=c+p.border;if(t>=C&&e<=E-p.border&&p.node&&p.contentDOM&&this.contentDOM.contains(p.contentDOM))return p.parseRange(t,e,C);t=c;for(let B=u;B>0;B--){let W=this.children[B-1];if(W.size&&W.dom.parentNode==this.contentDOM&&!W.emptyChildAt(1)){i=Y(W.dom)+1;break}t-=W.size}-1==i&&(i=0)}if(i>-1&&(E>e||u==this.children.length-1)){e=E;for(let C=u+1;C<this.children.length;C++){let B=this.children[C];if(B.size&&B.dom.parentNode==this.contentDOM&&!B.emptyChildAt(-1)){s=Y(B.dom);break}e+=B.size}-1==s&&(s=this.contentDOM.childNodes.length);break}c=E}return{node:this.contentDOM,from:t,to:e,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:o}=this.domFromPos(t,0);if(1!=e.nodeType||o==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[o]}setSelection(t,e,o,i=!1){let s=Math.min(t,e),c=Math.max(t,e);for(let W=0,$=0;W<this.children.length;W++){let rt=this.children[W],mt=$+rt.size;if(s>$&&c<mt)return rt.setSelection(t-$-rt.border,e-$-rt.border,o,i);$=mt}let u=this.domFromPos(t,t?-1:1),p=e==t?u:this.domFromPos(e,e?-1:1),E=o.getSelection(),C=!1;if((et||ft)&&t==e){let{node:W,offset:$}=u;if(3==W.nodeType){if(C=!(!$||"\n"!=W.nodeValue[$-1]),C&&$==W.nodeValue.length)for(let mt,rt=W;rt;rt=rt.parentNode){if(mt=rt.nextSibling){"BR"==mt.nodeName&&(u=p={node:mt.parentNode,offset:Y(mt)+1});break}let Ct=rt.pmViewDesc;if(Ct&&Ct.node&&Ct.node.isBlock)break}}else{let rt=W.childNodes[$-1];C=rt&&("BR"==rt.nodeName||"false"==rt.contentEditable)}}if(et&&E.focusNode&&E.focusNode!=p.node&&1==E.focusNode.nodeType){let W=E.focusNode.childNodes[E.focusOffset];W&&"false"==W.contentEditable&&(i=!0)}if(!(i||C&&ft)&&ct(u.node,u.offset,E.anchorNode,E.anchorOffset)&&ct(p.node,p.offset,E.focusNode,E.focusOffset))return;let B=!1;if((E.extend||t==e)&&!C){E.collapse(u.node,u.offset);try{t!=e&&E.extend(p.node,p.offset),B=!0}catch(W){if(!(W instanceof DOMException))throw W}}if(!B){if(t>e){let $=u;u=p,p=$}let W=document.createRange();W.setEnd(p.node,p.offset),W.setStart(u.node,u.offset),E.removeAllRanges(),E.addRange(W)}}ignoreMutation(t){return!this.contentDOM&&"selection"!=t.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let o=0,i=0;i<this.children.length;i++){let s=this.children[i],c=o+s.size;if(o==c?t<=c&&e>=o:t<c&&e>o){let u=o+s.border,p=c-s.border;if(t>=u&&e<=p)return this.dirty=t==o||e==c?2:1,void(t!=u||e!=p||!s.contentLost&&s.dom.parentNode==this.contentDOM?s.markDirty(t-u,e-u):s.dirty=3);s.dirty=s.dom!=s.contentDOM||s.dom.parentNode!=this.contentDOM||s.children.length?3:2}o=c}this.dirty=2}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let o=1==t?2:1;e.dirty<o&&(e.dirty=o)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class vt extends Q{constructor(t,e,o,i){let s,c=e.type.toDOM;if("function"==typeof c&&(c=c(o,()=>s?s.parent?s.parent.posBeforeChild(s):void 0:i)),!e.type.spec.raw){if(1!=c.nodeType){let u=document.createElement("span");u.appendChild(c),c=u}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(t,[],c,null),this.widget=e,this.widget=e,s=this}matchesWidget(t){return 0==this.dirty&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return!!e&&e(t)}ignoreMutation(t){return"selection"!=t.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class xt extends Q{constructor(t,e,o,i){super(t,[],e,null),this.textDOM=o,this.text=i}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue}}class bt extends Q{constructor(t,e,o,i){super(t,[],o,i),this.mark=e}static create(t,e,o,i){let s=i.nodeViews[e.type.name],c=s&&s(e,i,o);return(!c||!c.dom)&&(c=r.PW.renderSpec(document,e.type.spec.toDOM(e,o))),new bt(t,e,c.dom,c.contentDOM||c.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(t){return 3!=this.dirty&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),0!=this.dirty){let o=this.parent;for(;!o.node;)o=o.parent;o.dirty<this.dirty&&(o.dirty=this.dirty),this.dirty=0}}slice(t,e,o){let i=bt.create(this.parent,this.mark,!0,o),s=this.children,c=this.size;e<c&&(s=Ae(s,e,c,o)),t>0&&(s=Ae(s,0,t,o));for(let u=0;u<s.length;u++)s[u].parent=i;return i.children=s,i}}class St extends Q{constructor(t,e,o,i,s,c,u,p,E){super(t,[],s,c),this.node=e,this.outerDeco=o,this.innerDeco=i,this.nodeDOM=u,c&&this.updateChildren(p,E)}static create(t,e,o,i,s,c){let p,u=s.nodeViews[e.type.name],E=u&&u(e,s,()=>p?p.parent?p.parent.posBeforeChild(p):void 0:c,o,i),C=E&&E.dom,B=E&&E.contentDOM;if(e.isText)if(C){if(3!=C.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else C=document.createTextNode(e.text);else C||({dom:C,contentDOM:B}=r.PW.renderSpec(document,e.type.spec.toDOM(e)));!B&&!e.isText&&"BR"!=C.nodeName&&(C.hasAttribute("contenteditable")||(C.contentEditable="false"),e.type.spec.draggable&&(C.draggable=!0));let W=C;return C=At(C,o,e),E?p=new h(t,e,o,i,C,B||null,W,E,s,c+1):e.isText?new l(t,e,o,i,C,W,s):new St(t,e,o,i,C,B||null,W,s,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let e=this.children.length-1;e>=0;e--){let o=this.children[e];if(this.dom.contains(o.dom.parentNode)){t.contentElement=o.dom.parentNode;break}}t.contentElement||(t.getContent=()=>r.HY.empty)}else t.contentElement=this.contentDOM;else t.getContent=()=>this.node.content;return t}matchesNode(t,e,o){return 0==this.dirty&&t.eq(this.node)&&qt(e,this.outerDeco)&&o.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let o=this.node.inlineContent,i=e,s=t.composing?this.localCompositionInfo(t,e):null,c=s&&s.pos>-1?s:null,u=s&&s.pos<0,p=new Se(this,c&&c.node);(function(n,t,e,o){let i=t.locals(n),s=0;if(0==i.length){for(let E=0;E<n.childCount;E++){let C=n.child(E);o(C,i,t.forChild(s,C),E),s+=C.nodeSize}return}let c=0,u=[],p=null;for(let E=0;;){if(c<i.length&&i[c].to==s){let mt,rt=i[c++];for(;c<i.length&&i[c].to==s;)(mt||(mt=[rt])).push(i[c++]);if(mt){mt.sort(ve);for(let Ct=0;Ct<mt.length;Ct++)e(mt[Ct],E,!!p)}else e(rt,E,!!p)}let C,B;if(p)B=-1,C=p,p=null;else{if(!(E<n.childCount))break;B=E,C=n.child(E++)}for(let rt=0;rt<u.length;rt++)u[rt].to<=s&&u.splice(rt--,1);for(;c<i.length&&i[c].from<=s&&i[c].to>s;)u.push(i[c++]);let W=s+C.nodeSize;if(C.isText){let rt=W;c<i.length&&i[c].from<rt&&(rt=i[c].from);for(let mt=0;mt<u.length;mt++)u[mt].to<rt&&(rt=u[mt].to);rt<W&&(p=C.cut(rt-s),C=C.cut(0,rt-s),W=rt,B=-1)}o(C,C.isInline&&!C.isLeaf?u.filter(rt=>!rt.inline):u.slice(),t.forChild(s,C),B),s=W}})(this.node,this.innerDeco,(E,C,B)=>{E.spec.marks?p.syncToMarks(E.spec.marks,o,t):E.type.side>=0&&!B&&p.syncToMarks(C==this.node.childCount?r.vc.none:this.node.child(C).marks,o,t),p.placeWidget(E,t,i)},(E,C,B,W)=>{let $;p.syncToMarks(E.marks,o,t),p.findNodeMatch(E,C,B,W)||u&&t.state.selection.from>i&&t.state.selection.to<i+E.nodeSize&&($=p.findIndexWithChild(s.node))>-1&&p.updateNodeAt(E,C,B,$,t)||p.updateNextNode(E,C,B,t,W)||p.addNode(E,C,B,t,i),i+=E.nodeSize}),p.syncToMarks([],o,t),this.node.isTextblock&&p.addTextblockHacks(),p.destroyRest(),(p.changed||2==this.dirty)&&(c&&this.protectLocalComposition(t,c),y(this.contentDOM,this.children,t),at&&function(n){if("UL"==n.nodeName||"OL"==n.nodeName){let t=n.style.cssText;n.style.cssText=t+"; list-style: square !important",window.getComputedStyle(n),n.style.cssText=t}}(this.dom))}localCompositionInfo(t,e){let{from:o,to:i}=t.state.selection;if(!(t.state.selection instanceof m.Bs)||o<e||i>e+this.node.content.size)return null;let s=t.domSelection(),c=function(n,t){for(;;){if(3==n.nodeType)return n;if(1==n.nodeType&&t>0){if(n.childNodes.length>t&&3==n.childNodes[t].nodeType)return n.childNodes[t];t=ht(n=n.childNodes[t-1])}else{if(!(1==n.nodeType&&t<n.childNodes.length))return null;n=n.childNodes[t],t=0}}}(s.focusNode,s.focusOffset);if(!c||!this.dom.contains(c.parentNode))return null;if(this.node.inlineContent){let u=c.nodeValue,p=function(n,t,e,o){for(let i=0,s=0;i<n.childCount&&s<=o;){let c=n.child(i++),u=s;if(s+=c.nodeSize,!c.isText)continue;let p=c.text;for(;i<n.childCount;){let E=n.child(i++);if(s+=E.nodeSize,!E.isText)break;p+=E.text}if(s>=e){let E=u<o?p.lastIndexOf(t,o-u-1):-1;if(E>=0&&E+t.length+u>=e)return u+E;if(e==o&&p.length>=o+t.length-u&&p.slice(o-u,o-u+t.length)==t)return o}}return-1}(this.node.content,u,o-e,i-e);return p<0?null:{node:c,pos:p,text:u}}return{node:c,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:o,text:i}){if(this.getDesc(e))return;let s=e;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let c=new xt(this,s,e,i);t.input.compositionNodes.push(c),this.children=Ae(this.children,o,o+i.length,t,c)}update(t,e,o,i){return!(3==this.dirty||!t.sameMarkup(this.node)||(this.updateInner(t,e,o,i),0))}updateInner(t,e,o,i){this.updateOuterDeco(e),this.node=t,this.innerDeco=o,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=0}updateOuterDeco(t){if(qt(t,this.outerDeco))return;let e=1!=this.nodeDOM.nodeType,o=this.dom;this.dom=gt(this.dom,this.nodeDOM,lt(this.outerDeco,this.node,e),lt(t,this.node,e)),this.dom!=o&&(o.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function A(n,t,e,o,i){return At(o,t,n),new St(void 0,n,t,e,o,o,o,i,0)}class l extends St{constructor(t,e,o,i,s,c,u){super(t,e,o,i,s,null,c,u,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,e,o,i){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node)||(this.updateOuterDeco(e),(0!=this.dirty||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=0,0))}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,o){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,o)}ignoreMutation(t){return"characterData"!=t.type&&"selection"!=t.type}slice(t,e,o){let i=this.node.cut(t,e),s=document.createTextNode(i.text);return new l(this.parent,i,this.outerDeco,this.innerDeco,s,s,o)}markDirty(t,e){super.markDirty(t,e),this.dom!=this.nodeDOM&&(0==t||e==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}}class d extends Q{parseRule(){return{ignore:!0}}matchesHack(t){return 0==this.dirty&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class h extends St{constructor(t,e,o,i,s,c,u,p,E,C){super(t,e,o,i,s,c,u,E,C),this.spec=p}update(t,e,o,i){if(3==this.dirty)return!1;if(this.spec.update){let s=this.spec.update(t,e,o);return s&&this.updateInner(t,e,o,i),s}return!(!this.contentDOM&&!t.isLeaf)&&super.update(t,e,o,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,o,i){this.spec.setSelection?this.spec.setSelection(t,e,o):super.setSelection(t,e,o,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function y(n,t,e){let o=n.firstChild,i=!1;for(let s=0;s<t.length;s++){let c=t[s],u=c.dom;if(u.parentNode==n){for(;u!=o;)o=ge(o),i=!0;o=o.nextSibling}else i=!0,n.insertBefore(u,o);if(c instanceof bt){let p=o?o.previousSibling:n.lastChild;y(c.contentDOM,c.children,e),o=p?p.nextSibling:n.firstChild}}for(;o;)o=ge(o),i=!0;i&&e.trackWrites==n&&(e.trackWrites=null)}const b=function(n){n&&(this.nodeName=n)};b.prototype=Object.create(null);const K=[new b];function lt(n,t,e){if(0==n.length)return K;let o=e?K[0]:new b,i=[o];for(let s=0;s<n.length;s++){let c=n[s].type.attrs;if(c){c.nodeName&&i.push(o=new b(c.nodeName));for(let u in c){let p=c[u];null!=p&&(e&&1==i.length&&i.push(o=new b(t.isInline?"span":"div")),"class"==u?o.class=(o.class?o.class+" ":"")+p:"style"==u?o.style=(o.style?o.style+";":"")+p:"nodeName"!=u&&(o[u]=p))}}}return i}function gt(n,t,e,o){if(e==K&&o==K)return t;let i=t;for(let s=0;s<o.length;s++){let c=o[s],u=e[s];if(s){let p;u&&u.nodeName==c.nodeName&&i!=n&&(p=i.parentNode)&&p.nodeName.toLowerCase()==c.nodeName||(p=document.createElement(c.nodeName),p.pmIsDeco=!0,p.appendChild(i),u=K[0]),i=p}Dt(i,u||K[0],c)}return i}function Dt(n,t,e){for(let o in t)"class"!=o&&"style"!=o&&"nodeName"!=o&&!(o in e)&&n.removeAttribute(o);for(let o in e)"class"!=o&&"style"!=o&&"nodeName"!=o&&e[o]!=t[o]&&n.setAttribute(o,e[o]);if(t.class!=e.class){let o=t.class?t.class.split(" ").filter(Boolean):[],i=e.class?e.class.split(" ").filter(Boolean):[];for(let s=0;s<o.length;s++)-1==i.indexOf(o[s])&&n.classList.remove(o[s]);for(let s=0;s<i.length;s++)-1==o.indexOf(i[s])&&n.classList.add(i[s]);0==n.classList.length&&n.removeAttribute("class")}if(t.style!=e.style){if(t.style){let i,o=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;i=o.exec(t.style);)n.style.removeProperty(i[1])}e.style&&(n.style.cssText+=e.style)}}function At(n,t,e){return gt(n,n,K,lt(t,e,1!=n.nodeType))}function qt(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(!n[e].type.eq(t[e].type))return!1;return!0}function ge(n){let t=n.nextSibling;return n.parentNode.removeChild(n),t}class Se{constructor(t,e){this.lock=e,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=function(n,t){let e=t,o=e.children.length,i=n.childCount,s=new Map,c=[];t:for(;i>0;){let u;for(;;)if(o){let E=e.children[o-1];if(!(E instanceof bt)){u=E,o--;break}e=E,o=E.children.length}else{if(e==t)break t;o=e.parent.children.indexOf(e),e=e.parent}let p=u.node;if(p){if(p!=n.child(i-1))break;--i,s.set(u,i),c.push(u)}}return{index:i,matched:s,matches:c.reverse()}}(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let o=t;o<e;o++)this.top.children[o].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,o){let i=0,s=this.stack.length>>1,c=Math.min(s,t.length);for(;i<c&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&!1!==t[i].type.spec.spanning;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let p=this.index;p<Math.min(this.index+3,this.top.children.length);p++)if(this.top.children[p].matchesMark(t[s])){u=p;break}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let p=bt.create(this.top,t[s],e,o);this.top.children.splice(this.index,0,p),this.top=p,this.changed=!0}this.index=0,s++}}findNodeMatch(t,e,o,i){let c,s=-1;if(i>=this.preMatch.index&&(c=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&c.matchesNode(t,e,o))s=this.top.children.indexOf(c,this.index);else for(let u=this.index,p=Math.min(this.top.children.length,u+5);u<p;u++){let E=this.top.children[u];if(E.matchesNode(t,e,o)&&!this.preMatch.matched.has(E)){s=u;break}}return!(s<0||(this.destroyBetween(this.index,s),this.index++,0))}updateNodeAt(t,e,o,i,s){let c=this.top.children[i];return 3==c.dirty&&c.dom==c.contentDOM&&(c.dirty=2),!!c.update(t,e,o,s)&&(this.destroyBetween(this.index,i),this.index++,!0)}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let o=t.pmViewDesc;if(o)for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==o)return i;return-1}t=e}}updateNextNode(t,e,o,i,s){for(let c=this.index;c<this.top.children.length;c++){let u=this.top.children[c];if(u instanceof St){let p=this.preMatch.matched.get(u);if(null!=p&&p!=s)return!1;let E=u.dom;if((!this.lock||!(E==this.lock||1==E.nodeType&&E.contains(this.lock.parentNode))||t.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==t.text&&3!=u.dirty&&qt(e,u.outerDeco))&&u.update(t,e,o,i))return this.destroyBetween(this.index,c),u.dom!=E&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(t,e,o,i,s){this.top.children.splice(this.index++,0,St.create(this.top,t,e,o,i,s)),this.changed=!0}placeWidget(t,e,o){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(!i||!i.matchesWidget(t)||t!=i.widget&&i.widget.type.toDOM.parentNode){let s=new vt(this.top,t,e,o);this.top.children.splice(this.index++,0,s),this.changed=!0}else this.index++}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;for(;t instanceof bt;)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof l)||/\n$/.test(t.node.text))&&((ft||st)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let o=document.createElement(t);"IMG"==t&&(o.className="ProseMirror-separator",o.alt=""),"BR"==t&&(o.className="ProseMirror-trailingBreak");let i=new d(this.top,[],o,null);e!=this.top?e.children.push(i):e.children.splice(this.index++,0,i),this.changed=!0}}}function ve(n,t){return n.type.side-t.type.side}function Ae(n,t,e,o,i){let s=[];for(let c=0,u=0;c<n.length;c++){let p=n[c],E=u,C=u+=p.size;E>=e||C<=t?s.push(p):(E<t&&s.push(p.slice(0,t-E,o)),i&&(s.push(i),i=void 0),C>e&&s.push(p.slice(e-E,p.size,o)))}return s}function ke(n,t=null){let e=n.domSelection(),o=n.state.doc;if(!e.focusNode)return null;let i=n.docView.nearestDesc(e.focusNode),s=i&&0==i.size,c=n.docView.posFromDOM(e.focusNode,e.focusOffset,1);if(c<0)return null;let p,E,u=o.resolve(c);if(J(e)){for(p=u;i&&!i.node;)i=i.parent;let C=i.node;if(i&&C.isAtom&&m.qv.isSelectable(C)&&i.parent&&(!C.isInline||!function(n,t,e){for(let o=0==t,i=t==ht(n);o||i;){if(n==e)return!0;let s=Y(n);if(!(n=n.parentNode))return!1;o=o&&0==s,i=i&&s==ht(n)}}(e.focusNode,e.focusOffset,i.dom))){let B=i.posBefore;E=new m.qv(c==B?u:o.resolve(B))}}else{let C=n.docView.posFromDOM(e.anchorNode,e.anchorOffset,1);if(C<0)return null;p=o.resolve(C)}return E||(E=en(n,p,u,"pointer"==t||n.state.selection.head<u.pos&&!s?1:-1)),E}function Mn(n){return n.editable?n.hasFocus():He(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function fe(n,t=!1){let e=n.state.selection;if(bn(n,e),Mn(n)){if(!t&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&st){let o=n.domSelection(),i=n.domObserver.currentSelection;if(o.anchorNode&&i.anchorNode&&ct(o.anchorNode,o.anchorOffset,i.anchorNode,i.anchorOffset))return n.input.mouseDown.delayedSelectionSync=!0,void n.domObserver.setCurSelection()}if(n.domObserver.disconnectSelection(),n.cursorWrapper)!function(n){let t=n.domSelection(),e=document.createRange(),o=n.cursorWrapper.dom,i="IMG"==o.nodeName;i?e.setEnd(o.parentNode,Y(o)+1):e.setEnd(o,0),e.collapse(!1),t.removeAllRanges(),t.addRange(e),!i&&!n.state.selection.visible&&q&&X<=11&&(o.disabled=!0,o.disabled=!1)}(n);else{let s,c,{anchor:o,head:i}=e;Tn&&!(e instanceof m.Bs)&&(e.$from.parent.inlineContent||(s=xn(n,e.from)),!e.empty&&!e.$from.parent.inlineContent&&(c=xn(n,e.to))),n.docView.setSelection(o,i,n.root,t),Tn&&(s&&On(s),c&&On(c)),e.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(n){let t=n.dom.ownerDocument;t.removeEventListener("selectionchange",n.input.hideSelectionGuard);let e=n.domSelection(),o=e.anchorNode,i=e.anchorOffset;t.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(e.anchorNode!=o||e.anchorOffset!=i)&&(t.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Mn(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Tn=ft||st&&_t<63;function xn(n,t){let{node:e,offset:o}=n.docView.domFromPos(t,0),i=o<e.childNodes.length?e.childNodes[o]:null,s=o?e.childNodes[o-1]:null;if(ft&&i&&"false"==i.contentEditable)return tn(i);if(!(i&&"false"!=i.contentEditable||s&&"false"!=s.contentEditable)){if(i)return tn(i);if(s)return tn(s)}}function tn(n){return n.contentEditable="true",ft&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function On(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function bn(n,t){if(t instanceof m.qv){let e=n.docView.descAt(t.from);e!=n.lastSelectedViewDesc&&(Dn(n),e&&e.selectNode(),n.lastSelectedViewDesc=e)}else Dn(n)}function Dn(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function en(n,t,e,o){return n.someProp("createSelectionBetween",i=>i(n,t,e))||m.Bs.between(t,e,o)}function Re(n){return(!n.editable||n.root.activeElement==n.dom)&&He(n)}function He(n){let t=n.domSelection();if(!t.anchorNode)return!1;try{return n.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(n.editable||n.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function xe(n,t){let{$anchor:e,$head:o}=n.selection,i=t>0?e.max(o):e.min(o),s=i.parent.inlineContent?i.depth?n.doc.resolve(t>0?i.after():i.before()):null:i;return s&&m.Y1.findFrom(s,t)}function $t(n,t){return n.dispatch(n.state.tr.setSelection(t).scrollIntoView()),!0}function Pn(n,t,e){let o=n.state.selection;if(!(o instanceof m.Bs)){if(o instanceof m.qv&&o.node.isInline)return $t(n,new m.Bs(t>0?o.$to:o.$from));{let i=xe(n.state,t);return!!i&&$t(n,i)}}if(!o.empty||e.indexOf("s")>-1)return!1;if(n.endOfTextblock(t>0?"right":"left")){let i=xe(n.state,t);return!!(i&&i instanceof m.qv)&&$t(n,i)}if(!(w&&e.indexOf("m")>-1)){let c,i=o.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText)return!1;let u=t<0?i.pos-s.nodeSize:i.pos;return!!(s.isAtom||(c=n.docView.descAt(u))&&!c.contentDOM)&&(m.qv.isSelectable(s)?$t(n,new m.qv(t<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):!!z&&$t(n,new m.Bs(n.state.doc.resolve(t<0?u:u+s.nodeSize))))}}function Ke(n){return 3==n.nodeType?n.nodeValue.length:n.childNodes.length}function Le(n){let t=n.pmViewDesc;return t&&0==t.size&&(n.nextSibling||"BR"!=n.nodeName)}function Fe(n){let t=n.domSelection(),e=t.focusNode,o=t.focusOffset;if(!e)return;let i,s,c=!1;for(et&&1==e.nodeType&&o<Ke(e)&&Le(e.childNodes[o])&&(c=!0);;)if(o>0){if(1!=e.nodeType)break;{let u=e.childNodes[o-1];if(Le(u))i=e,s=--o;else{if(3!=u.nodeType)break;e=u,o=e.nodeValue.length}}}else{if(le(e))break;{let u=e.previousSibling;for(;u&&Le(u);)i=e.parentNode,s=Y(u),u=u.previousSibling;if(u)e=u,o=Ke(e);else{if(e=e.parentNode,e==n.dom)break;o=0}}}c?je(n,t,e,o):i&&je(n,t,i,s)}function Ve(n){let t=n.domSelection(),e=t.focusNode,o=t.focusOffset;if(!e)return;let s,c,i=Ke(e);for(;;)if(o<i){if(1!=e.nodeType)break;if(!Le(e.childNodes[o]))break;s=e,c=++o}else{if(le(e))break;{let u=e.nextSibling;for(;u&&Le(u);)s=u.parentNode,c=Y(u)+1,u=u.nextSibling;if(u)e=u,o=0,i=Ke(e);else{if(e=e.parentNode,e==n.dom)break;o=i=0}}}s&&je(n,t,s,c)}function le(n){let t=n.pmViewDesc;return t&&t.node&&t.node.isBlock}function je(n,t,e,o){if(J(t)){let s=document.createRange();s.setEnd(e,o),s.setStart(e,o),t.removeAllRanges(),t.addRange(s)}else t.extend&&t.extend(e,o);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&fe(n)},50)}function Be(n,t,e){let o=n.state.selection;if(o instanceof m.Bs&&!o.empty||e.indexOf("s")>-1||w&&e.indexOf("m")>-1)return!1;let{$from:i,$to:s}=o;if(!i.parent.inlineContent||n.endOfTextblock(t<0?"up":"down")){let c=xe(n.state,t);if(c&&c instanceof m.qv)return $t(n,c)}if(!i.parent.inlineContent){let c=t<0?i:s,u=o instanceof m.C1?m.Y1.near(c,t):m.Y1.findFrom(c,t);return!!u&&$t(n,u)}return!1}function In(n,t){if(!(n.state.selection instanceof m.Bs))return!0;let{$head:e,$anchor:o,empty:i}=n.state.selection;if(!e.sameParent(o))return!0;if(!i)return!1;if(n.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!e.textOffset&&(t<0?e.nodeBefore:e.nodeAfter);if(s&&!s.isText){let c=n.state.tr;return t<0?c.delete(e.pos-s.nodeSize,e.pos):c.delete(e.pos,e.pos+s.nodeSize),n.dispatch(c),!0}return!1}function Sn(n,t,e){n.domObserver.stop(),t.contentEditable=e,n.domObserver.start()}function An(n,t){let e=[],{content:o,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&1==o.childCount&&1==o.firstChild.childCount;){i--,s--;let $=o.firstChild;e.push($.type.name,$.attrs!=$.type.defaultAttrs?$.attrs:null),o=$.content}let c=n.someProp("clipboardSerializer")||r.PW.fromSchema(n.state.schema),u=Nn(),p=u.createElement("div");p.appendChild(c.serializeFragment(o,{document:u}));let C,E=p.firstChild,B=0;for(;E&&1==E.nodeType&&(C=Bn[E.nodeName.toLowerCase()]);){for(let $=C.length-1;$>=0;$--){let rt=u.createElement(C[$]);for(;p.firstChild;)rt.appendChild(p.firstChild);p.appendChild(rt),B++}E=p.firstChild}return E&&1==E.nodeType&&E.setAttribute("data-pm-slice",`${i} ${s}${B?` -${B}`:""} ${JSON.stringify(e)}`),{dom:p,text:n.someProp("clipboardTextSerializer",$=>$(t))||t.content.textBetween(0,t.content.size,"\n\n")}}function kn(n,t,e,o,i){let c,u,s=i.parent.type.spec.code;if(!e&&!t)return null;let p=t&&(o||s||!e);if(p){if(n.someProp("transformPastedText",W=>{t=W(t,s||o)}),s)return t?new r.p2(r.HY.from(n.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):r.p2.empty;let B=n.someProp("clipboardTextParser",W=>W(t,i,o));if(B)u=B;else{let W=i.marks(),{schema:$}=n.state,rt=r.PW.fromSchema($);c=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(mt=>{let Ct=c.appendChild(document.createElement("p"));mt&&Ct.appendChild(rt.serializeNode($.text(mt,W)))})}}else n.someProp("transformPastedHTML",B=>{e=B(e)}),c=function(n){let t=/^(\s*<meta [^>]*>)*/.exec(n);t&&(n=n.slice(t[0].length));let i,e=Nn().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(n);if((i=o&&Bn[o[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),e.innerHTML=n,i)for(let s=0;s<i.length;s++)e=e.querySelector(i[s])||e;return e}(e),z&&function(n){let t=n.querySelectorAll(st?"span:not([class]):not([style])":"span.Apple-converted-space");for(let e=0;e<t.length;e++){let o=t[e];1==o.childNodes.length&&"\xa0"==o.textContent&&o.parentNode&&o.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),o)}}(c);let E=c&&c.querySelector("[data-pm-slice]"),C=E&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(E.getAttribute("data-pm-slice")||"");if(C&&C[3])for(let B=+C[3];B>0&&c.firstChild;B--)c=c.firstChild;if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||r.aw.fromSchema(n.state.schema)).parseSlice(c,{preserveWhitespace:!(!p&&!C),context:i,ruleFromNode:W=>"BR"!=W.nodeName||W.nextSibling||!W.parentNode||io.test(W.parentNode.nodeName)?null:{ignore:!0}})),C)u=function(n,t){if(!n.size)return n;let o,e=n.content.firstChild.type.schema;try{o=JSON.parse(t)}catch(u){return n}let{content:i,openStart:s,openEnd:c}=n;for(let u=o.length-2;u>=0;u-=2){let p=e.nodes[o[u]];if(!p||p.hasRequiredAttrs())break;i=r.HY.from(p.create(o[u+1],i)),s++,c++}return new r.p2(i,s,c)}(Ce(u,+C[1],+C[2]),C[4]);else if(u=r.p2.maxOpen(function(n,t){if(n.childCount<2)return n;for(let e=t.depth;e>=0;e--){let s,i=t.node(e).contentMatchAt(t.index(e)),c=[];if(n.forEach(u=>{if(!c)return;let E,p=i.findWrapping(u.type);if(!p)return c=null;if(E=c.length&&s.length&&on(p,s,u,c[c.length-1],0))c[c.length-1]=E;else{c.length&&(c[c.length-1]=Ln(c[c.length-1],s.length));let C=Rn(u,p);c.push(C),i=i.matchType(C.type),s=p}}),c)return r.HY.from(c)}return n}(u.content,i),!0),u.openStart||u.openEnd){let B=0,W=0;for(let $=u.content.firstChild;B<u.openStart&&!$.type.spec.isolating;B++,$=$.firstChild);for(let $=u.content.lastChild;W<u.openEnd&&!$.type.spec.isolating;W++,$=$.lastChild);u=Ce(u,B,W)}return n.someProp("transformPasted",B=>{u=B(u)}),u}const io=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Rn(n,t,e=0){for(let o=t.length-1;o>=e;o--)n=t[o].create(null,r.HY.from(n));return n}function on(n,t,e,o,i){if(i<n.length&&i<t.length&&n[i]==t[i]){let s=on(n,t,e,o.lastChild,i+1);if(s)return o.copy(o.content.replaceChild(o.childCount-1,s));if(o.contentMatchAt(o.childCount).matchType(i==n.length-1?e.type:n[i+1]))return o.copy(o.content.append(r.HY.from(Rn(e,n,i+1))))}}function Ln(n,t){if(0==t)return n;let e=n.content.replaceChild(n.childCount-1,Ln(n.lastChild,t-1)),o=n.contentMatchAt(n.childCount).fillBefore(r.HY.empty,!0);return n.copy(e.append(o))}function rn(n,t,e,o,i,s){let c=t<0?n.firstChild:n.lastChild,u=c.content;return i<o-1&&(u=rn(u,t,e,o,i+1,s)),i>=e&&(u=t<0?c.contentMatchAt(0).fillBefore(u,n.childCount>1||s<=i).append(u):u.append(c.contentMatchAt(c.childCount).fillBefore(r.HY.empty,!0))),n.replaceChild(t<0?0:n.childCount-1,c.copy(u))}function Ce(n,t,e){return t<n.openStart&&(n=new r.p2(rn(n.content,-1,t,n.openStart,0,n.openEnd),t,n.openEnd)),e<n.openEnd&&(n=new r.p2(rn(n.content,1,e,n.openEnd,0,0),n.openStart,e)),n}const Bn={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let wn=null;function Nn(){return wn||(wn=document.implementation.createHTMLDocument("title"))}const te={};let Jt={};class lo{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Ee(n,t){n.input.lastSelectionOrigin=t,n.input.lastSelectionTime=Date.now()}function sn(n){n.someProp("handleDOMEvents",t=>{for(let e in t)n.input.eventHandlers[e]||n.dom.addEventListener(e,n.input.eventHandlers[e]=o=>ln(n,o))})}function ln(n,t){return n.someProp("handleDOMEvents",e=>{let o=e[t.type];return!!o&&(o(n,t)||t.defaultPrevented)})}function zn(n,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target;e!=n.dom;e=e.parentNode)if(!e||11==e.nodeType||e.pmViewDesc&&e.pmViewDesc.stopEvent(t))return!1;return!0}function Oe(n){return{left:n.clientX,top:n.clientY}}function an(n,t,e,o,i){if(-1==o)return!1;let s=n.state.doc.resolve(o);for(let c=s.depth+1;c>0;c--)if(n.someProp(t,u=>c>s.depth?u(n,e,s.nodeAfter,s.before(c),i,!0):u(n,e,s.node(c),s.before(c),i,!1)))return!0;return!1}function be(n,t,e){n.focused||n.focus();let o=n.state.tr.setSelection(t);"pointer"==e&&o.setMeta("pointer",!0),n.dispatch(o)}function Ye(n,t,e,o){return an(n,"handleDoubleClickOn",t,e,o)||n.someProp("handleDoubleClick",i=>i(n,t,o))}function _o(n,t,e,o){return an(n,"handleTripleClickOn",t,e,o)||n.someProp("handleTripleClick",i=>i(n,t,o))||function(n,t,e){if(0!=e.button)return!1;let o=n.state.doc;if(-1==t)return!!o.inlineContent&&(be(n,m.Bs.create(o,0,o.content.size),"pointer"),!0);let i=o.resolve(t);for(let s=i.depth+1;s>0;s--){let c=s>i.depth?i.nodeAfter:i.node(s),u=i.before(s);if(c.inlineContent)be(n,m.Bs.create(o,u+1,u+1+c.content.size),"pointer");else{if(!m.qv.isSelectable(c))continue;be(n,m.qv.create(o,u),"pointer")}return!0}}(n,e,o)}function cn(n){return ye(n)}Jt.keydown=(n,t)=>{let e=t;if(n.input.shiftKey=16==e.keyCode||e.shiftKey,!we(n,e)&&(n.input.lastKeyCode=e.keyCode,n.input.lastKeyCodeTime=Date.now(),!N||!st||13!=e.keyCode))if(229!=e.keyCode&&n.domObserver.forceFlush(),!at||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)n.someProp("handleKeyDown",o=>o(n,e))||function(n,t){let e=t.keyCode,o=function(n){let t="";return n.ctrlKey&&(t+="c"),n.metaKey&&(t+="m"),n.altKey&&(t+="a"),n.shiftKey&&(t+="s"),t}(t);return 8==e||w&&72==e&&"c"==o?In(n,-1)||Fe(n):46==e||w&&68==e&&"c"==o?In(n,1)||Ve(n):13==e||27==e||(37==e||w&&66==e&&"c"==o?Pn(n,-1,o)||Fe(n):39==e||w&&70==e&&"c"==o?Pn(n,1,o)||Ve(n):38==e||w&&80==e&&"c"==o?Be(n,-1,o)||Fe(n):40==e||w&&78==e&&"c"==o?function(n){if(!ft||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:e}=n.domSelection();if(t&&1==t.nodeType&&0==e&&t.firstChild&&"false"==t.firstChild.contentEditable){let o=t.firstChild;Sn(n,o,"true"),setTimeout(()=>Sn(n,o,"false"),20)}return!1}(n)||Be(n,1,o)||Ve(n):o==(w?"m":"c")&&(66==e||73==e||89==e||90==e))}(n,e)?e.preventDefault():Ee(n,"key");else{let o=Date.now();n.input.lastIOSEnter=o,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==o&&(n.someProp("handleKeyDown",i=>i(n,x(13,"Enter"))),n.input.lastIOSEnter=0)},200)}},Jt.keyup=(n,t)=>{16==t.keyCode&&(n.input.shiftKey=!1)},Jt.keypress=(n,t)=>{let e=t;if(we(n,e)||!e.charCode||e.ctrlKey&&!e.altKey||w&&e.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,e)))return void e.preventDefault();let o=n.state.selection;if(!(o instanceof m.Bs&&o.$from.sameParent(o.$to))){let i=String.fromCharCode(e.charCode);n.someProp("handleTextInput",s=>s(n,o.$from.pos,o.$to.pos,i))||n.dispatch(n.state.tr.insertText(i).scrollIntoView()),e.preventDefault()}};const Hn=w?"metaKey":"ctrlKey";te.mousedown=(n,t)=>{let e=t;n.input.shiftKey=e.shiftKey;let o=cn(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&function(n,t){let e=t.x-n.clientX,o=t.y-n.clientY;return e*e+o*o<100}(e,n.input.lastClick)&&!e[Hn]&&("singleClick"==n.input.lastClick.type?s="doubleClick":"doubleClick"==n.input.lastClick.type&&(s="tripleClick")),n.input.lastClick={time:i,x:e.clientX,y:e.clientY,type:s};let c=n.posAtCoords(Oe(e));!c||("singleClick"==s?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new Kn(n,c,e,!!o)):("doubleClick"==s?Ye:_o)(n,c.pos,c.inside,e)?e.preventDefault():Ee(n,"pointer"))};class Kn{constructor(t,e,o,i){let s,c;if(this.view=t,this.pos=e,this.event=o,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!o[Hn],this.allowDefault=o.shiftKey,e.inside>-1)s=t.state.doc.nodeAt(e.inside),c=e.inside;else{let C=t.state.doc.resolve(e.pos);s=C.parent,c=C.depth?C.before():0}const u=i?null:o.target,p=u?t.docView.nearestDesc(u,!0):null;this.target=p?p.dom:null;let{selection:E}=t.state;(0==o.button&&s.type.spec.draggable&&!1!==s.type.spec.selectable||E instanceof m.qv&&E.from<=c&&E.to>c)&&(this.mightDrag={node:s,pos:c,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!et||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ee(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>fe(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Oe(t))),this.allowDefault||!e?Ee(this.view,"pointer"):function(n,t,e,o,i){return an(n,"handleClickOn",t,e,o)||n.someProp("handleClick",s=>s(n,t,o))||(i?function(n,t){if(-1==t)return!1;let o,i,e=n.state.selection;e instanceof m.qv&&(o=e.node);let s=n.state.doc.resolve(t);for(let c=s.depth+1;c>0;c--){let u=c>s.depth?s.nodeAfter:s.node(c);if(m.qv.isSelectable(u)){i=o&&e.$from.depth>0&&c>=e.$from.depth&&s.before(e.$from.depth+1)==e.$from.pos?s.before(e.$from.depth):s.before(c);break}}return null!=i&&(be(n,m.qv.create(n.state.doc,i),"pointer"),!0)}(n,e):function(n,t){if(-1==t)return!1;let e=n.state.doc.resolve(t),o=e.nodeAfter;return!!(o&&o.isAtom&&m.qv.isSelectable(o))&&(be(n,new m.qv(e),"pointer"),!0)}(n,e))}(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||ft&&this.mightDrag&&!this.mightDrag.node.isAtom||st&&!(this.view.state.selection instanceof m.Bs)&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(be(this.view,m.Y1.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):Ee(this.view,"pointer")}move(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),Ee(this.view,"pointer"),0==t.buttons&&this.done()}}function we(n,t){return!!n.composing||!!(ft&&Math.abs(t.timeStamp-n.input.compositionEndedAt)<500)&&(n.input.compositionEndedAt=-2e8,!0)}te.touchdown=n=>{cn(n),Ee(n,"pointer")},te.contextmenu=n=>cn(n);const dn=N?5e3:-1;function un(n,t){clearTimeout(n.input.composingTimeout),t>-1&&(n.input.composingTimeout=setTimeout(()=>ye(n),t))}function pn(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=function(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function ye(n,t=!1){if(!(N&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),pn(n),t||n.docView&&n.docView.dirty){let e=ke(n);return e&&!e.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(e)):n.updateState(n.state),!0}return!1}}Jt.compositionstart=Jt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:t}=n,e=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!e.textOffset&&e.parentOffset&&e.nodeBefore.marks.some(o=>!1===o.type.spec.inclusive)))n.markCursor=n.state.storedMarks||e.marks(),ye(n,!0),n.markCursor=null;else if(ye(n),et&&t.selection.empty&&e.parentOffset&&!e.textOffset&&e.nodeBefore.marks.length){let o=n.domSelection();for(let i=o.focusNode,s=o.focusOffset;i&&1==i.nodeType&&0!=s;){let c=s<0?i.lastChild:i.childNodes[s-1];if(!c)break;if(3==c.nodeType){o.collapse(c,c.nodeValue.length);break}i=c,s=-1}}n.input.composing=!0}un(n,dn)},Jt.compositionend=(n,t)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=t.timeStamp,un(n,20))};const Ne=q&&X<15||at&&L<604;function Fn(n,t,e,o){let i=kn(n,t,e,n.input.shiftKey,n.state.selection.$from);if(n.someProp("handlePaste",u=>u(n,o,i||r.p2.empty)))return!0;if(!i)return!1;let s=function(n){return 0==n.openStart&&0==n.openEnd&&1==n.content.childCount?n.content.firstChild:null}(i),c=s?n.state.tr.replaceSelectionWith(s,n.input.shiftKey):n.state.tr.replaceSelection(i);return n.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}te.copy=Jt.cut=(n,t)=>{let e=t,o=n.state.selection,i="cut"==e.type;if(o.empty)return;let s=Ne?null:e.clipboardData,c=o.content(),{dom:u,text:p}=An(n,c);s?(e.preventDefault(),s.clearData(),s.setData("text/html",u.innerHTML),s.setData("text/plain",p)):function(n,t){if(!n.dom.parentNode)return;let e=n.dom.parentNode.appendChild(document.createElement("div"));e.appendChild(t),e.style.cssText="position: fixed; left: -10000px; top: 10px";let o=getSelection(),i=document.createRange();i.selectNodeContents(t),n.dom.blur(),o.removeAllRanges(),o.addRange(i),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),n.focus()},50)}(n,u),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Jt.paste=(n,t)=>{let e=t;if(n.composing&&!N)return;let o=Ne?null:e.clipboardData;o&&Fn(n,o.getData("text/plain"),o.getData("text/html"),e)?e.preventDefault():function(n,t){if(!n.dom.parentNode)return;let e=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,o=n.dom.parentNode.appendChild(document.createElement(e?"textarea":"div"));e||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus(),setTimeout(()=>{n.focus(),o.parentNode&&o.parentNode.removeChild(o),e?Fn(n,o.value,null,t):Fn(n,o.textContent,o.innerHTML,t)},50)}(n,e)};class Bo{constructor(t,e){this.slice=t,this.move=e}}const vo=w?"altKey":"ctrlKey";te.dragstart=(n,t)=>{let e=t,o=n.input.mouseDown;if(o&&o.done(),!e.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(Oe(e));if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof m.qv?i.to-1:i.to)))if(o&&o.mightDrag)n.dispatch(n.state.tr.setSelection(m.qv.create(n.state.doc,o.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){let E=n.docView.nearestDesc(e.target,!0);E&&E.node.type.spec.draggable&&E!=n.docView&&n.dispatch(n.state.tr.setSelection(m.qv.create(n.state.doc,E.posBefore)))}let c=n.state.selection.content(),{dom:u,text:p}=An(n,c);e.dataTransfer.clearData(),e.dataTransfer.setData(Ne?"Text":"text/html",u.innerHTML),e.dataTransfer.effectAllowed="copyMove",Ne||e.dataTransfer.setData("text/plain",p),n.dragging=new Bo(c,!e[vo])},te.dragend=n=>{let t=n.dragging;window.setTimeout(()=>{n.dragging==t&&(n.dragging=null)},50)},Jt.dragover=Jt.dragenter=(n,t)=>t.preventDefault(),Jt.drop=(n,t)=>{let e=t,o=n.dragging;if(n.dragging=null,!e.dataTransfer)return;let i=n.posAtCoords(Oe(e));if(!i)return;let s=n.state.doc.resolve(i.pos);if(!s)return;let c=o&&o.slice;c?n.someProp("transformPasted",rt=>{c=rt(c)}):c=kn(n,e.dataTransfer.getData(Ne?"Text":"text/plain"),Ne?null:e.dataTransfer.getData("text/html"),!1,s);let u=!(!o||e[vo]);if(n.someProp("handleDrop",rt=>rt(n,e,c||r.p2.empty,u)))return void e.preventDefault();if(!c)return;e.preventDefault();let p=c?(0,R.nj)(n.state.doc,s.pos,c):s.pos;null==p&&(p=s.pos);let E=n.state.tr;u&&E.deleteSelection();let C=E.mapping.map(p),B=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,W=E.doc;if(B?E.replaceRangeWith(C,C,c.content.firstChild):E.replaceRange(C,C,c),E.doc.eq(W))return;let $=E.doc.resolve(C);if(B&&m.qv.isSelectable(c.content.firstChild)&&$.nodeAfter&&$.nodeAfter.sameMarkup(c.content.firstChild))E.setSelection(new m.qv($));else{let rt=E.mapping.map(p);E.mapping.maps[E.mapping.maps.length-1].forEach((mt,Ct,Ot,Nt)=>rt=Nt),E.setSelection(en(n,$,E.doc.resolve(rt)))}n.focus(),n.dispatch(E.setMeta("uiEvent","drop"))},te.focus=n=>{n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelection())&&fe(n)},20))},te.blur=(n,t)=>{let e=t;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),e.relatedTarget&&n.dom.contains(e.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)},te.beforeinput=(n,t)=>{if(st&&N&&"deleteContentBackward"==t.inputType){n.domObserver.flushSoon();let{domChangeCount:o}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=o||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,x(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Jt)te[n]=Jt[n];function Ge(n,t){if(n==t)return!0;for(let e in n)if(n[e]!==t[e])return!1;for(let e in t)if(!(e in n))return!1;return!0}class Vn{constructor(t,e){this.toDOM=t,this.spec=e||Me,this.side=this.spec.side||0}map(t,e,o,i){let{pos:s,deleted:c}=t.mapResult(e.from+i,this.side<0?-1:1);return c?null:new oe(s-o,s-o,this)}valid(){return!0}eq(t){return this==t||t instanceof Vn&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Ge(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class he{constructor(t,e){this.attrs=t,this.spec=e||Me}map(t,e,o,i){let s=t.map(e.from+i,this.spec.inclusiveStart?-1:1)-o,c=t.map(e.to+i,this.spec.inclusiveEnd?1:-1)-o;return s>=c?null:new oe(s,c,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof he&&Ge(this.attrs,t.attrs)&&Ge(this.spec,t.spec)}static is(t){return t.type instanceof he}destroy(){}}class fn{constructor(t,e){this.attrs=t,this.spec=e||Me}map(t,e,o,i){let s=t.mapResult(e.from+i,1);if(s.deleted)return null;let c=t.mapResult(e.to+i,-1);return c.deleted||c.pos<=s.pos?null:new oe(s.pos-o,c.pos-o,this)}valid(t,e){let s,{index:o,offset:i}=t.content.findIndex(e.from);return i==e.from&&!(s=t.child(o)).isText&&i+s.nodeSize==e.to}eq(t){return this==t||t instanceof fn&&Ge(this.attrs,t.attrs)&&Ge(this.spec,t.spec)}destroy(){}}class oe{constructor(t,e,o){this.from=t,this.to=e,this.type=o}copy(t,e){return new oe(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,o){return this.type.map(t,this,e,o)}static widget(t,e,o){return new oe(t,t,new Vn(e,o))}static inline(t,e,o,i){return new oe(t,e,new he(o,i))}static node(t,e,o,i){return new oe(t,e,new fn(o,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof he}}const De=[],Me={};class Ht{constructor(t,e){this.local=t.length?t:De,this.children=e.length?e:De}static create(t,e){return e.length?Xe(e,t,0,Me):Kt}find(t,e,o){let i=[];return this.findInner(null==t?0:t,null==e?1e9:e,i,0,o),i}findInner(t,e,o,i,s){for(let c=0;c<this.local.length;c++){let u=this.local[c];u.from<=e&&u.to>=t&&(!s||s(u.spec))&&o.push(u.copy(u.from+i,u.to+i))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<e&&this.children[c+1]>t){let u=this.children[c]+1;this.children[c+2].findInner(t-u,e-u,o,i+u,s)}}map(t,e,o){return this==Kt||0==t.maps.length?this:this.mapInner(t,e,0,0,o||Me)}mapInner(t,e,o,i,s){let c;for(let u=0;u<this.local.length;u++){let p=this.local[u].map(t,o,i);p&&p.type.valid(e,p)?(c||(c=[])).push(p):s.onRemove&&s.onRemove(this.local[u].spec)}return this.children.length?function(n,t,e,o,i,s,c){let u=n.slice(),p=(C,B,W,$)=>{for(let rt=0;rt<u.length;rt+=3){let Ct,mt=u[rt+1];if(mt<0||C>mt+s)continue;let Ot=u[rt]+s;B>=Ot?u[rt+1]=C<=Ot?-2:-1:W>=i&&(Ct=$-W-(B-C))&&(u[rt]+=Ct,u[rt+1]+=Ct)}};for(let C=0;C<e.maps.length;C++)e.maps[C].forEach(p);let E=!1;for(let C=0;C<u.length;C+=3)if(u[C+1]<0){if(-2==u[C+1]){E=!0,u[C+1]=-1;continue}let B=e.map(n[C]+s),W=B-i;if(W<0||W>=o.content.size){E=!0;continue}let rt=e.map(n[C+1]+s,-1)-i,{index:mt,offset:Ct}=o.content.findIndex(W),Ot=o.maybeChild(mt);if(Ot&&Ct==W&&Ct+Ot.nodeSize==rt){let Nt=u[C+2].mapInner(e,Ot,B+1,n[C]+s+1,c);Nt!=Kt?(u[C]=W,u[C+1]=rt,u[C+2]=Nt):(u[C+1]=-2,E=!0)}else E=!0}if(E){let C=function(n,t,e,o,i,s,c){function u(p,E){for(let C=0;C<p.local.length;C++){let B=p.local[C].map(o,i,E);B?e.push(B):c.onRemove&&c.onRemove(p.local[C].spec)}for(let C=0;C<p.children.length;C+=3)u(p.children[C+2],p.children[C]+E+1)}for(let p=0;p<n.length;p+=3)-1==n[p+1]&&u(n[p+2],t[p]+s+1);return e}(u,n,t,e,i,s,c),B=Xe(C,o,0,c);t=B.local;for(let W=0;W<u.length;W+=3)u[W+1]<0&&(u.splice(W,3),W-=3);for(let W=0,$=0;W<B.children.length;W+=3){let rt=B.children[W];for(;$<u.length&&u[$]<rt;)$+=3;u.splice($,0,B.children[W],B.children[W+1],B.children[W+2])}}return new Ht(t.sort(Te),u)}(this.children,c||[],t,e,o,i,s):c?new Ht(c.sort(Te),De):Kt}add(t,e){return e.length?this==Kt?Ht.create(t,e):this.addInner(t,e,0):this}addInner(t,e,o){let i,s=0;t.forEach((u,p)=>{let C,E=p+o;if(C=mn(e,u,E)){for(i||(i=this.children.slice());s<i.length&&i[s]<p;)s+=3;i[s]==p?i[s+2]=i[s+2].addInner(u,C,E+1):i.splice(s,0,p,p+u.nodeSize,Xe(C,u,E+1,Me)),s+=3}});let c=Ze(s?_n(e):e,-o);for(let u=0;u<c.length;u++)c[u].type.valid(t,c[u])||c.splice(u--,1);return new Ht(c.length?this.local.concat(c).sort(Te):this.local,i||this.children)}remove(t){return 0==t.length||this==Kt?this:this.removeInner(t,0)}removeInner(t,e){let o=this.children,i=this.local;for(let s=0;s<o.length;s+=3){let c,u=o[s]+e,p=o[s+1]+e;for(let B,C=0;C<t.length;C++)(B=t[C])&&B.from>u&&B.to<p&&(t[C]=null,(c||(c=[])).push(B));if(!c)continue;o==this.children&&(o=this.children.slice());let E=o[s+2].removeInner(c,u+1);E!=Kt?o[s+2]=E:(o.splice(s,3),s-=3)}if(i.length)for(let c,s=0;s<t.length;s++)if(c=t[s])for(let u=0;u<i.length;u++)i[u].eq(c,e)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1));return o==this.children&&i==this.local?this:i.length||o.length?new Ht(i,o):Kt}forChild(t,e){if(this==Kt)return this;if(e.isLeaf)return Ht.empty;let o,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=t){this.children[u]==t&&(o=this.children[u+2]);break}let s=t+1,c=s+e.content.size;for(let u=0;u<this.local.length;u++){let p=this.local[u];if(p.from<c&&p.to>s&&p.type instanceof he){let E=Math.max(s,p.from)-s,C=Math.min(c,p.to)-s;E<C&&(i||(i=[])).push(p.copy(E,C))}}if(i){let u=new Ht(i.sort(Te),De);return o?new ae([u,o]):u}return o||Kt}eq(t){if(this==t)return!0;if(!(t instanceof Ht)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return gn(this.localsInner(t))}localsInner(t){if(this==Kt)return De;if(t.inlineContent||!this.local.some(he.is))return this.local;let e=[];for(let o=0;o<this.local.length;o++)this.local[o].type instanceof he||e.push(this.local[o]);return e}}Ht.empty=new Ht([],[]),Ht.removeOverlap=gn;const Kt=Ht.empty;class ae{constructor(t){this.members=t}map(t,e){const o=this.members.map(i=>i.map(t,e,Me));return ae.from(o)}forChild(t,e){if(e.isLeaf)return Ht.empty;let o=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,e);s!=Kt&&(s instanceof ae?o=o.concat(s.members):o.push(s))}return ae.from(o)}eq(t){if(!(t instanceof ae)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,o=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(e){o&&(e=e.slice(),o=!1);for(let c=0;c<s.length;c++)e.push(s[c])}else e=s}return e?gn(o?e:e.sort(Te)):De}static from(t){switch(t.length){case 0:return Kt;case 1:return t[0];default:return new ae(t)}}}function Ze(n,t){if(!t||!n.length)return n;let e=[];for(let o=0;o<n.length;o++){let i=n[o];e.push(new oe(i.from+t,i.to+t,i.type))}return e}function mn(n,t,e){if(t.isLeaf)return null;let o=e+t.nodeSize,i=null;for(let c,s=0;s<n.length;s++)(c=n[s])&&c.from>e&&c.to<o&&((i||(i=[])).push(c),n[s]=null);return i}function _n(n){let t=[];for(let e=0;e<n.length;e++)null!=n[e]&&t.push(n[e]);return t}function Xe(n,t,e,o){let i=[],s=!1;t.forEach((u,p)=>{let E=mn(n,u,p+e);if(E){s=!0;let C=Xe(E,u,e+p+1,o);C!=Kt&&i.push(p,p+u.nodeSize,C)}});let c=Ze(s?_n(n):n,-e).sort(Te);for(let u=0;u<c.length;u++)c[u].type.valid(t,c[u])||(o.onRemove&&o.onRemove(c[u].spec),c.splice(u--,1));return c.length||i.length?new Ht(c,i):Kt}function Te(n,t){return n.from-t.from||n.to-t.to}function gn(n){let t=n;for(let e=0;e<t.length-1;e++){let o=t[e];if(o.from!=o.to)for(let i=e+1;i<t.length;i++){let s=t[i];if(s.from!=o.from){s.from<o.to&&(t==n&&(t=n.slice()),t[e]=o.copy(o.from,s.from),$n(t,i,o.copy(s.from,o.to)));break}s.to!=o.to&&(t==n&&(t=n.slice()),t[i]=s.copy(s.from,o.to),$n(t,i+1,s.copy(o.to,s.to)))}}return t}function $n(n,t,e){for(;t<n.length&&Te(e,n[t])>0;)t++;n.splice(t,0,e)}function vn(n){let t=[];return n.someProp("decorations",e=>{let o=e(n.state);o&&o!=Kt&&t.push(o)}),n.cursorWrapper&&t.push(Ht.create(n.state.doc,[n.cursorWrapper.deco])),ae.from(t)}const Co={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Eo=q&&X<=11;class Qe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class yo{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Qe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(o=>{for(let i=0;i<o.length;i++)this.queue.push(o[i]);q&&X<=11&&o.some(i=>"childList"==i.type&&i.removedNodes.length||"characterData"==i.type&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Eo&&(this.onCharData=o=>{this.queue.push({target:o.target,type:"characterData",oldValue:o.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Co)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Re(this.view)){if(this.suppressingSelectionUpdates)return fe(this.view);if(q&&X<=11&&!this.view.state.selection.empty){let t=this.view.domSelection();if(t.focusNode&&ct(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelection())}ignoreSelectionChange(t){if(0==t.rangeCount)return!0;let e=t.getRangeAt(0).commonAncestorContainer,o=this.view.docView.nearestDesc(e);return o&&o.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0}flush(){if(!this.view.docView||this.flushingSoon>-1)return;let t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);let e=this.view.domSelection(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&Re(this.view)&&!this.ignoreSelectionChange(e),i=-1,s=-1,c=!1,u=[];if(this.view.editable)for(let p=0;p<t.length;p++){let E=this.registerMutation(t[p],u);E&&(i=i<0?E.from:Math.min(E.from,i),s=s<0?E.to:Math.max(E.to,s),E.typeOver&&(c=!0))}if(et&&u.length>1){let p=u.filter(E=>"BR"==E.nodeName);if(2==p.length){let E=p[0],C=p[1];E.parentNode&&E.parentNode.parentNode==C.parentNode?C.remove():E.remove()}}(i>-1||o)&&(i>-1&&(this.view.docView.markDirty(i,s),Jn||(Jn=!0,"normal"==getComputedStyle(this.view.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))),this.handleDOMChange(i,s,c,u),this.view.docView&&this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||fe(this.view),this.currentSelection.set(e))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let o=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(o==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style"))||!o||o.ignoreMutation(t))return null;if("childList"==t.type){for(let C=0;C<t.addedNodes.length;C++)e.push(t.addedNodes[C]);if(o.contentDOM&&o.contentDOM!=o.dom&&!o.contentDOM.contains(t.target))return{from:o.posBefore,to:o.posAfter};let i=t.previousSibling,s=t.nextSibling;if(q&&X<=11&&t.addedNodes.length)for(let C=0;C<t.addedNodes.length;C++){let{previousSibling:B,nextSibling:W}=t.addedNodes[C];(!B||Array.prototype.indexOf.call(t.addedNodes,B)<0)&&(i=B),(!W||Array.prototype.indexOf.call(t.addedNodes,W)<0)&&(s=W)}let c=i&&i.parentNode==t.target?Y(i)+1:0,u=o.localPosFromDOM(t.target,c,-1),p=s&&s.parentNode==t.target?Y(s):t.target.childNodes.length;return{from:u,to:o.localPosFromDOM(t.target,p,1)}}return"attributes"==t.type?{from:o.posAtStart-o.border,to:o.posAtEnd+o.border}:{from:o.posAtStart,to:o.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}}}let Jn=!1;function xo(n){let t=n.pmViewDesc;if(t)return t.parseRule();if("BR"==n.nodeName&&n.parentNode){if(ft&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(n.parentNode.lastChild==n||ft&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if("IMG"==n.nodeName&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}function Cn(n,t,e){return Math.max(e.anchor,e.head)>t.content.size?null:en(n,t.resolve(e.anchor),t.resolve(e.head))}function yn(n,t,e){let o=n.depth,i=t?n.end():n.pos;for(;o>0&&(t||n.indexAfter(o)==n.node(o).childCount);)o--,i++,t=!1;if(e){let s=n.node(o).maybeChild(n.indexAfter(o));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}class Po{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new lo,this.prevDirectPlugins=[],this.pluginViews=[],this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(Zn),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Yn(this),ze(this),this.nodeViews=Gn(this),this.docView=A(this.state.doc,We(this),vn(this),this.dom,this),this.domObserver=new yo(this,(o,i,s,c)=>function(n,t,e,o,i){if(t<0){let Rt=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,Ie=ke(n,Rt);if(Ie&&!n.state.selection.eq(Ie)){let Ao=n.state.tr.setSelection(Ie);"pointer"==Rt?Ao.setMeta("pointer",!0):"key"==Rt&&Ao.scrollIntoView(),n.dispatch(Ao)}return}let s=n.state.doc.resolve(t),c=s.sharedDepth(e);t=s.before(c+1),e=n.state.doc.resolve(e).after(c+1);let u=n.state.selection,p=function(n,t,e){let E,{node:o,fromOffset:i,toOffset:s,from:c,to:u}=n.docView.parseRange(t,e),p=n.domSelection(),C=p.anchorNode;if(C&&n.dom.contains(1==C.nodeType?C:C.parentNode)&&(E=[{node:C,offset:p.anchorOffset}],J(p)||E.push({node:p.focusNode,offset:p.focusOffset})),st&&8===n.input.lastKeyCode)for(let Ct=s;Ct>i;Ct--){let Ot=o.childNodes[Ct-1],Nt=Ot.pmViewDesc;if("BR"==Ot.nodeName&&!Nt){s=Ct;break}if(!Nt||Nt.size)break}let B=n.state.doc,W=n.someProp("domParser")||r.aw.fromSchema(n.state.schema),$=B.resolve(c),rt=null,mt=W.parse(o,{topNode:$.parent,topMatch:$.parent.contentMatchAt($.index()),topOpen:!0,from:i,to:s,preserveWhitespace:"pre"!=$.parent.type.whitespace||"full",findPositions:E,ruleFromNode:xo,context:$});if(E&&null!=E[0].pos){let Ct=E[0].pos,Ot=E[1]&&E[1].pos;null==Ot&&(Ot=Ct),rt={anchor:Ct+c,head:Ot+c}}return{doc:mt,sel:rt,from:c,to:u}}(n,t,e);if(st&&n.cursorWrapper&&p.sel&&p.sel.anchor==n.cursorWrapper.deco.from){let Rt=n.cursorWrapper.deco.type.toDOM.nextSibling,Ie=Rt&&Rt.nodeValue?Rt.nodeValue.length:1;p.sel={anchor:p.sel.anchor+Ie,head:p.sel.anchor+Ie}}let B,W,E=n.state.doc,C=E.slice(p.from,p.to);8===n.input.lastKeyCode&&Date.now()-100<n.input.lastKeyCodeTime?(B=n.state.selection.to,W="end"):(B=n.state.selection.from,W="start"),n.input.lastKeyCode=null;let $=function(n,t,e,o,i){let s=n.findDiffStart(t,e);if(null==s)return null;let{a:c,b:u}=n.findDiffEnd(t,e+n.size,e+t.size);return"end"==i&&(o-=c+Math.max(0,s-Math.min(c,u))-s),c<s&&n.size<t.size?(s-=o<=s&&o>=c?s-o:0,u=s+(u-c),c=s):u<s&&(s-=o<=s&&o>=u?s-o:0,c=s+(c-u),u=s),{start:s,endA:c,endB:u}}(C.content,p.doc.content,p.from,B,W);if((at&&n.input.lastIOSEnter>Date.now()-225||N)&&i.some(Rt=>"DIV"==Rt.nodeName||"P"==Rt.nodeName)&&(!$||$.endA>=$.endB)&&n.someProp("handleKeyDown",Rt=>Rt(n,x(13,"Enter"))))return void(n.input.lastIOSEnter=0);if(!$){if(!(o&&u instanceof m.Bs&&!u.empty&&u.$head.sameParent(u.$anchor))||n.composing||p.sel&&p.sel.anchor!=p.sel.head){if(p.sel){let Rt=Cn(n,n.state.doc,p.sel);Rt&&!Rt.eq(n.state.selection)&&n.dispatch(n.state.tr.setSelection(Rt))}return}$={start:u.from,endA:u.to,endB:u.to}}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&$.start==$.endB&&n.state.selection instanceof m.Bs&&($.start>n.state.selection.from&&$.start<=n.state.selection.from+2&&n.state.selection.from>=p.from?$.start=n.state.selection.from:$.endA<n.state.selection.to&&$.endA>=n.state.selection.to-2&&n.state.selection.to<=p.to&&($.endB+=n.state.selection.to-$.endA,$.endA=n.state.selection.to)),q&&X<=11&&$.endB==$.start+1&&$.endA==$.start&&$.start>p.from&&" \xa0"==p.doc.textBetween($.start-p.from-1,$.start-p.from+1)&&($.start--,$.endA--,$.endB--);let Nt,rt=p.doc.resolveNoCache($.start-p.from),mt=p.doc.resolveNoCache($.endB-p.from),Ct=E.resolve($.start),Ot=rt.sameParent(mt)&&rt.parent.inlineContent&&Ct.end()>=$.endA;if((at&&n.input.lastIOSEnter>Date.now()-225&&(!Ot||i.some(Rt=>"DIV"==Rt.nodeName||"P"==Rt.nodeName))||!Ot&&rt.pos<p.doc.content.size&&(Nt=m.Y1.findFrom(p.doc.resolve(rt.pos+1),1,!0))&&Nt.head==mt.pos)&&n.someProp("handleKeyDown",Rt=>Rt(n,x(13,"Enter"))))return void(n.input.lastIOSEnter=0);if(n.state.selection.anchor>$.start&&function(n,t,e,o,i){if(!o.parent.isTextblock||e-t<=i.pos-o.pos||yn(o,!0,!1)<i.pos)return!1;let s=n.resolve(t);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let c=n.resolve(yn(s,!0,!0));return!(!c.parent.isTextblock||c.pos>e||yn(c,!0,!1)<e)&&o.parent.content.cut(o.parentOffset).eq(c.parent.content)}(E,$.start,$.endA,rt,mt)&&n.someProp("handleKeyDown",Rt=>Rt(n,x(8,"Backspace"))))return void(N&&st&&n.domObserver.suppressSelectionUpdates());st&&N&&$.endB==$.start&&(n.input.lastAndroidDelete=Date.now()),N&&!Ot&&rt.start()!=mt.start()&&0==mt.parentOffset&&rt.depth==mt.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==$.endA&&($.endB-=2,mt=p.doc.resolveNoCache($.endB-p.from),setTimeout(()=>{n.someProp("handleKeyDown",function(Rt){return Rt(n,x(13,"Enter"))})},20));let Gt,Pe,ce,Yt=$.start,ie=$.endA;if(Ot)if(rt.pos==mt.pos)q&&X<=11&&0==rt.parentOffset&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>fe(n),20)),Gt=n.state.tr.delete(Yt,ie),Pe=E.resolve($.start).marksAcross(E.resolve($.endA));else if($.endA==$.endB&&(ce=function(n,t){let c,u,p,e=n.firstChild.marks,o=t.firstChild.marks,i=e,s=o;for(let C=0;C<o.length;C++)i=o[C].removeFromSet(i);for(let C=0;C<e.length;C++)s=e[C].removeFromSet(s);if(1==i.length&&0==s.length)u=i[0],c="add",p=C=>C.mark(u.addToSet(C.marks));else{if(0!=i.length||1!=s.length)return null;u=s[0],c="remove",p=C=>C.mark(u.removeFromSet(C.marks))}let E=[];for(let C=0;C<t.childCount;C++)E.push(p(t.child(C)));if(r.HY.from(E).eq(n))return{mark:u,type:c}}(rt.parent.content.cut(rt.parentOffset,mt.parentOffset),Ct.parent.content.cut(Ct.parentOffset,$.endA-Ct.start()))))Gt=n.state.tr,"add"==ce.type?Gt.addMark(Yt,ie,ce.mark):Gt.removeMark(Yt,ie,ce.mark);else if(rt.parent.child(rt.index()).isText&&rt.index()==mt.index()-(mt.textOffset?0:1)){let Rt=rt.parent.textBetween(rt.parentOffset,mt.parentOffset);if(n.someProp("handleTextInput",Ie=>Ie(n,Yt,ie,Rt)))return;Gt=n.state.tr.insertText(Rt,Yt,ie)}if(Gt||(Gt=n.state.tr.replace(Yt,ie,p.doc.slice($.start-p.from,$.endB-p.from))),p.sel){let Rt=Cn(n,Gt.doc,p.sel);Rt&&!(st&&N&&n.composing&&Rt.empty&&($.start!=$.endB||n.input.lastAndroidDelete<Date.now()-100)&&(Rt.head==Yt||Rt.head==Gt.mapping.map(ie)-1)||q&&Rt.empty&&Rt.head==Yt)&&Gt.setSelection(Rt)}Pe&&Gt.ensureMarks(Pe),n.dispatch(Gt.scrollIntoView())}(this,o,i,s,c)),this.domObserver.start(),function(n){for(let t in te){let e=te[t];n.dom.addEventListener(t,n.input.eventHandlers[t]=o=>{zn(n,o)&&!ln(n,o)&&(n.editable||!(o.type in Jt))&&e(n,o)})}ft&&n.dom.addEventListener("input",()=>null),sn(n)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&sn(this),this._props=t,t.plugins&&(t.plugins.forEach(Zn),this.directPlugins=t.plugins),this.updateStateInner(t.state,!0)}setProps(t){let e={};for(let o in this._props)e[o]=this._props[o];e.state=this.state;for(let o in t)e[o]=t[o];this.update(e)}updateState(t){this.updateStateInner(t,this.state.plugins!=t.plugins)}updateStateInner(t,e){let o=this.state,i=!1,s=!1;if(t.storedMarks&&this.composing&&(pn(this),s=!0),this.state=t,e){let B=Gn(this);(function(n,t){let e=0,o=0;for(let i in n){if(n[i]!=t[i])return!0;e++}for(let i in t)o++;return e!=o})(B,this.nodeViews)&&(this.nodeViews=B,i=!0),sn(this)}this.editable=Yn(this),ze(this);let c=vn(this),u=We(this),p=e?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",E=i||!this.docView.matchesNode(t.doc,u,c);(E||!t.selection.eq(o.selection))&&(s=!0);let C="preserve"==p&&s&&null==this.dom.style.overflowAnchor&&function(n){let o,i,t=n.dom.getBoundingClientRect(),e=Math.max(0,t.top);for(let s=(t.left+t.right)/2,c=e+1;c<Math.min(innerHeight,t.bottom);c+=5){let u=n.root.elementFromPoint(s,c);if(!u||u==n.dom||!n.dom.contains(u))continue;let p=u.getBoundingClientRect();if(p.top>=e-20){o=u,i=p.top;break}}return{refDOM:o,refTop:i,stack:pt(n.dom)}}(this);if(s){this.domObserver.stop();let B=E&&(q||st)&&!this.composing&&!o.selection.empty&&!t.selection.empty&&function(n,t){let e=Math.min(n.$anchor.sharedDepth(n.head),t.$anchor.sharedDepth(t.head));return n.$anchor.start(e)!=t.$anchor.start(e)}(o.selection,t.selection);if(E){let W=st?this.trackWrites=this.domSelection().focusNode:null;(i||!this.docView.update(t.doc,u,c,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=A(t.doc,u,c,this.dom,this)),W&&!this.trackWrites&&(B=!0)}B||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelection())&&function(n){let t=n.docView.domFromPos(n.state.selection.anchor,0),e=n.domSelection();return ct(t.node,t.offset,e.anchorNode,e.anchorOffset)}(this))?fe(this,B):(bn(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==p)this.dom.scrollTop=0;else if("to selection"==p){let B=this.domSelection().focusNode;if(!this.someProp("handleScrollToSelection",W=>W(this)))if(t.selection instanceof m.qv){let W=this.docView.domAfterPos(t.selection.from);1==W.nodeType&&F(this,W.getBoundingClientRect(),B)}else F(this,this.coordsAtPos(t.selection.head,1),B)}else C&&function({refDOM:n,refTop:t,stack:e}){let o=n?n.getBoundingClientRect().top:0;Pt(e,0==o?0:o-t)}(C)}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let e=0;e<this.pluginViews.length;e++){let o=this.pluginViews[e];o.update&&o.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let o=this.directPlugins[e];o.spec.view&&this.pluginViews.push(o.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let o=this.state.plugins[e];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}}someProp(t,e){let i,o=this._props&&this._props[t];if(null!=o&&(i=e?e(o):o))return i;for(let c=0;c<this.directPlugins.length;c++){let u=this.directPlugins[c].props[t];if(null!=u&&(i=e?e(u):u))return i}let s=this.state.plugins;if(s)for(let c=0;c<s.length;c++){let u=s[c].props[t];if(null!=u&&(i=e?e(u):u))return i}}hasFocus(){return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(n){if(n.setActive)return n.setActive();if(kt)return n.focus(kt);let t=pt(n);n.focus(null==kt?{get preventScroll(){return kt={preventScroll:!0},!0}}:void 0),kt||(kt=!1,Pt(t,0))}(this.dom),fe(this),this.domObserver.start()}get root(){let t=this._root;if(null==t)for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e;return t||document}posAtCoords(t){return me(this,t)}coordsAtPos(t,e=1){return de(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,o=-1){let i=this.docView.posFromDOM(t,e,o);if(null==i)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,e){return function(n,t,e){return ne==t&&V==e?g:(ne=t,V=e,g="up"==e||"down"==e?function(n,t,e){let o=t.selection,i="up"==e?o.$from:o.$to;return ue(n,t,()=>{let{node:s}=n.docView.domFromPos(i.pos,"up"==e?-1:1);for(;;){let u=n.docView.nearestDesc(s,!0);if(!u)break;if(u.node.isBlock){s=u.dom;break}s=u.dom.parentNode}let c=de(n,i.pos,1);for(let u=s.firstChild;u;u=u.nextSibling){let p;if(1==u.nodeType)p=u.getClientRects();else{if(3!=u.nodeType)continue;p=dt(u,0,u.nodeValue.length).getClientRects()}for(let E=0;E<p.length;E++){let C=p[E];if(C.bottom>C.top+1&&("up"==e?c.top-C.top>2*(C.bottom-c.top):C.bottom-c.bottom>2*(c.bottom-C.top)))return!1}}return!0})}(n,t,e):function(n,t,e){let{$head:o}=t.selection;if(!o.parent.isTextblock)return!1;let i=o.parentOffset,s=!i,c=i==o.parent.content.size,u=n.domSelection();return Qt.test(o.parent.textContent)&&u.modify?ue(n,t,()=>{let p=u.getRangeAt(0),E=u.focusNode,C=u.focusOffset,B=u.caretBidiLevel;u.modify("move",e,"character");let $=!(o.depth?n.docView.domAfterPos(o.before()):n.dom).contains(1==u.focusNode.nodeType?u.focusNode:u.focusNode.parentNode)||E==u.focusNode&&C==u.focusOffset;return u.removeAllRanges(),u.addRange(p),null!=B&&(u.caretBidiLevel=B),$}):"left"==e||"backward"==e?s:c}(n,t,e))}(this,e||this.state,t)}destroy(){!this.docView||(function(n){n.domObserver.stop();for(let t in n.input.eventHandlers)n.dom.removeEventListener(t,n.input.eventHandlers[t]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],vn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(t){return function(n,t){!ln(n,t)&&te[t.type]&&(n.editable||!(t.type in Jt))&&te[t.type](n,t)}(this,t)}dispatch(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}domSelection(){return this.root.getSelection()}}function We(n){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(n.editable),t.translate="no",n.someProp("attributes",e=>{if("function"==typeof e&&(e=e(n.state)),e)for(let o in e)"class"==o&&(t.class+=" "+e[o]),"style"==o?t.style=(t.style?t.style+";":"")+e[o]:!t[o]&&"contenteditable"!=o&&"nodeName"!=o&&(t[o]=String(e[o]))}),[oe.node(0,n.state.doc.content.size,t)]}function ze(n){if(n.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),n.cursorWrapper={dom:t,deco:oe.widget(n.state.selection.head,t,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Yn(n){return!n.someProp("editable",t=>!1===t(n.state))}function Gn(n){let t=Object.create(null);function e(o){for(let i in o)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=o[i])}return n.someProp("nodeViews",e),n.someProp("markViews",e),t}function Zn(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}}}]);