"use strict";var Qo=Object.defineProperty,Go=Object.defineProperties,Xo=Object.getOwnPropertyDescriptors,_o=Object.getOwnPropertySymbols,Zo=Object.prototype.hasOwnProperty,Yo=Object.prototype.propertyIsEnumerable,jo=(Yt,Tt,c)=>Tt in Yt?Qo(Yt,Tt,{enumerable:!0,configurable:!0,writable:!0,value:c}):Yt[Tt]=c,Gt=(Yt,Tt)=>{for(var c in Tt||(Tt={}))Zo.call(Tt,c)&&jo(Yt,c,Tt[c]);if(_o)for(var c of _o(Tt))Yo.call(Tt,c)&&jo(Yt,c,Tt[c]);return Yt},me=(Yt,Tt)=>Go(Yt,Xo(Tt)),Vo=(Yt,Tt)=>{var c={};for(var C in Yt)Zo.call(Yt,C)&&Tt.indexOf(C)<0&&(c[C]=Yt[C]);if(null!=Yt&&_o)for(var C of _o(Yt))Tt.indexOf(C)<0&&Yo.call(Yt,C)&&(c[C]=Yt[C]);return c};(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[48014],{77361:(Yt,Tt,c)=>{c.d(Tt,{_:()=>y});var C=c(79765),l=c(74788);let y=(()=>{class A{constructor(){this.stateChange$=new C.xQ,this.valueChange$=new C.xQ}}return A.\u0275fac=function(ot){return new(ot||A)},A.\u0275dir=l.lG2({type:A}),A})()},97019:(Yt,Tt,c)=>{c.d(Tt,{h:()=>Pt});var C=c(64762),l=c(74788),y=c(50259),A=c(50170),m=c(1414),ot=c(10200),N=c(33250),G=c(68874),tt=c(24751),ft=c(52219),at=c(12057),Mt=c(65009),it=c(10383),mt=c(89437),Ot=c(20933),kt=c(35065),St=c(63060),Dt=c(62733),pt=c(48214),q=c(11189),F=c(91030);function ut(It,_t){if(1&It&&(l.TgZ(0,"button",7),l._uU(1),l.qZA()),2&It){const Rt=_t.$implicit;l.Q6J("value",Rt),l.xp6(1),l.hij(" ",Rt," ")}}function j(It,_t){if(1&It&&(l.TgZ(0,"tui-data-list",5),l.YNc(1,ut,2,2,"button",6),l.qZA()),2&It){const Rt=l.oxw();l.xp6(1),l.Q6J("ngForOf",Rt.modes)}}function At(It,_t){if(1&It){const Rt=l.EpF();l.TgZ(0,"tui-primitive-textfield",8),l.NdJ("valueChange",function(z){return l.CHM(Rt),l.oxw().onHexChange(z)}),l._UZ(1,"input",9),l.qZA()}if(2&It){const Rt=l.oxw();l.Q6J("textMask",Rt.hexMask)("tuiTextfieldLabelOutside",!0)("value",Rt.hex)}}function Bt(It,_t){if(1&It){const Rt=l.EpF();l.TgZ(0,"tui-input-count",10),l.NdJ("ngModelChange",function(z){l.CHM(Rt);const rt=l.oxw();return rt.onRgbChange(z,rt.color[1],rt.color[2],rt.color[3])}),l.qZA(),l.TgZ(1,"tui-input-count",10),l.NdJ("ngModelChange",function(z){l.CHM(Rt);const rt=l.oxw();return rt.onRgbChange(rt.color[0],z,rt.color[2],rt.color[3])}),l.qZA(),l.TgZ(2,"tui-input-count",10),l.NdJ("ngModelChange",function(z){l.CHM(Rt);const rt=l.oxw();return rt.onRgbChange(rt.color[0],rt.color[1],z,rt.color[3])}),l.qZA()}if(2&It){const Rt=l.oxw();l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Rt.color[0]),l.xp6(1),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Rt.color[1]),l.xp6(1),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Rt.color[2])}}class Pt{constructor(){this.color=[0,0,0,1],this.colorChange=new l.vpe,this.hexMask={mask:({length:_t})=>Array.from({length:_t},()=>/\d|[a-f]|[A-F]/),guide:!1},this.modes=["HEX","RGB"],this.mode=this.modes[0]}get isHex(){return this.mode===this.modes[0]}get hex(){return(0,y.tuiRgbToHex)(this.color[0],this.color[1],this.color[2]).replace("#","")}get opacity(){return Math.round(100*this.color[3])}onHexChange(_t){if(6!==_t.length)return;const Rt=(0,y.tuiHexToRgb)(_t);this.updateColor([Rt[0],Rt[1],Rt[2],this.color[3]])}onRgbChange(..._t){this.updateColor(_t)}updateColor(_t){this.color=_t,this.colorChange.emit(_t)}}Pt.\u0275fac=function(_t){return new(_t||Pt)},Pt.\u0275cmp=l.Xpm({type:Pt,selectors:[["tui-color-edit"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:6,vars:8,consts:[["tuiTextfieldSize","m","tuiDropdownAlign","left","tuiDropdownLimitWidth","min",1,"t-select","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","ngModel","ngModelChange"],["size","s",4,"tuiDataList"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange",4,"ngIf","ngIfElse"],["rgb",""],["tuiTextfieldPostfix","%","tuiTextfieldSize","m",1,"t-opacity","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"],["size","s"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange"],["tuiTextfield","","maxlength","6"],["tuiTextfieldSize","m",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"]],template:function(_t,Rt){if(1&_t&&(l.TgZ(0,"tui-select",0),l.NdJ("ngModelChange",function(z){return Rt.mode=z}),l.YNc(1,j,2,1,"tui-data-list",1),l.qZA(),l.YNc(2,At,2,3,"tui-primitive-textfield",2),l.YNc(3,Bt,3,12,"ng-template",null,3,l.W1O),l.TgZ(5,"tui-input-count",4),l.NdJ("ngModelChange",function(z){return Rt.onRgbChange(Rt.color[0],Rt.color[1],Rt.color[2],z/100)}),l.qZA()),2&_t){const wt=l.MAs(4);l.Q6J("tuiTextfieldLabelOutside",!0)("ngModel",Rt.mode),l.xp6(2),l.Q6J("ngIf",Rt.isHex)("ngIfElse",wt),l.xp6(3),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",100)("ngModel",Rt.opacity)}},directives:[A.u,m.O,ot.s,N.Ek,G.x,tt.JJ,tt.On,ft.g,at.O5,Mt.E,it.a,mt.T,Ot.q,at.sg,kt.v,St.y,Dt.B,pt.n,q.h,F.M],styles:["[_nghost-%COMP%]{display:flex}.t-select[_ngcontent-%COMP%]{width:4.875rem}.t-opacity[_ngcontent-%COMP%]{width:4.275rem}"],changeDetection:0}),(0,C.gn)([(0,y.tuiDefaultProp)()],Pt.prototype,"color",void 0)},49289:(Yt,Tt,c)=>{c.d(Tt,{$:()=>N});var C=c(64762),l=c(74788),y=c(91211),A=c(50259),m=c(71424),ot=c(65720);class N{constructor(tt){this.sanitizer=tt,this.colorChange=new l.vpe,this.point=[0,1],this.hue=0,this.opacity=1}set color(tt){if(this.currentColor.every((it,mt)=>it===tt[mt])&&tt[3]===this.opacity)return;const[ft,at,Mt]=(0,A.tuiRgbToHsv)(tt[0],tt[1],tt[2]);this.opacity=tt[3],this.hue=ft/360,this.point=[at,1-Mt/255]}get currentColor(){return this.getCurrentColor(this.hue,this.point)}get base(){return`rgb(${(0,A.tuiHsvToRgb)(360*this.hue,1,255)})`}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(`linear-gradient(to right, rgba(${this.currentColor.join(",")}, 0), rgb(${this.currentColor.join(",")}))`)}onPointChange(tt){this.point=tt,this.updateColor()}onHueChange(tt){this.hue=tt,this.updateColor()}onOpacityChange(tt){this.opacity=(0,A.tuiRound)(tt,2),this.updateColor()}getCurrentColor(tt,ft){return(0,A.tuiHsvToRgb)(360*tt,ft[0],255*(1-ft[1]))}updateColor(){this.colorChange.emit([...this.currentColor,this.opacity])}}N.\u0275fac=function(tt){return new(tt||N)(l.Y36(y.H7))},N.\u0275cmp=l.Xpm({type:N,selectors:[["tui-color-picker"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:5,vars:7,consts:[[1,"t-flat",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_hue"],[1,"t-hue",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_opacity"],[1,"t-opacity",3,"value","valueChange"]],template:function(tt,ft){1&tt&&(l.TgZ(0,"tui-flat-picker",0),l.NdJ("valueChange",function(Mt){return ft.onPointChange(Mt)}),l.qZA(),l.TgZ(1,"div",1),l.TgZ(2,"tui-linear-picker",2),l.NdJ("valueChange",function(Mt){return ft.onHueChange(Mt)}),l.qZA(),l.qZA(),l.TgZ(3,"div",3),l.TgZ(4,"tui-linear-picker",4),l.NdJ("valueChange",function(Mt){return ft.onOpacityChange(Mt)}),l.qZA(),l.qZA()),2&tt&&(l.Udp("background-color",ft.base),l.Q6J("value",ft.point),l.xp6(2),l.Q6J("value",ft.hue),l.xp6(1),l.Udp("background",ft.gradient),l.xp6(1),l.Q6J("value",ft.opacity))},directives:[m.J,ot.P],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block}.t-flat[_ngcontent-%COMP%]{height:14rem;background:linear-gradient(rgba(0,0,0,0),#000000),linear-gradient(to right,#ffffff,rgba(255,255,255,0));margin-bottom:.25rem;overflow:hidden}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1rem 1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px #00000014;pointer-events:none;border-radius:inherit}.t-wrapper_hue[_ngcontent-%COMP%]{background:#ff0000}.t-wrapper_opacity[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hue[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff0000,#ffff00,#00ff00,#00ffff,#0000ff,#ff00ff,#ff0000);border-radius:inherit;margin:0 .5rem}.t-opacity[_ngcontent-%COMP%]{border-radius:inherit;margin:0 .5rem}'],changeDetection:0}),(0,C.gn)([(0,A.tuiDefaultProp)()],N.prototype,"color",null),(0,C.gn)([A.tuiPure],N.prototype,"getCurrentColor",null)},23999:(Yt,Tt,c)=>{c.d(Tt,{s:()=>$});var C=c(64762),l=c(74788),y=c(91211),A=c(14309),m=c(27863),ot=c(28680),N=c(50259),G=c(62939),tt=c(76189),ft=c(12057),at=c(49289),Mt=c(34880),it=c(20933),mt=c(35065),Ot=c(49472),kt=c(219),St=c(67446),Dt=c(29070),pt=c(54255),q=c(15491),F=c(97019),ut=c(39607),j=c(5451);function At(nt,et){if(1&nt&&l._UZ(0,"tui-svg",9),2&nt){l.oxw();const Et=l.MAs(1);l.ekj("t-arrow_rotated",Et.open)}}function Bt(nt,et){1&nt&&l._UZ(0,"tui-svg",14)}function Pt(nt,et){if(1&nt){const Et=l.EpF();l.TgZ(0,"button",12),l.NdJ("keydown.enter.prevent",function(){const ne=l.CHM(Et).$implicit,zt=l.oxw(2),ce=l.MAs(1);return zt.onModeSelect(ne,ce)})("keydown.space.prevent",function(){const ne=l.CHM(Et).$implicit,zt=l.oxw(2),ce=l.MAs(1);return zt.onModeSelect(ne,ce)})("click",function(){const ne=l.CHM(Et).$implicit,zt=l.oxw(2),ce=l.MAs(1);return zt.onModeSelect(ne,ce)}),l._uU(1),l.YNc(2,Bt,1,0,"tui-svg",13),l.qZA()}if(2&nt){const Et=et.$implicit,$t=l.oxw(2);l.uIk("aria-checked",$t.isModeActive(Et)),l.xp6(1),l.hij(" ",Et," "),l.xp6(1),l.Q6J("ngIf",$t.isModeActive(Et))}}function It(nt,et){if(1&nt&&(l.TgZ(0,"tui-data-list",10),l.YNc(1,Pt,3,3,"button",11),l.qZA()),2&nt){const Et=l.oxw();l.xp6(1),l.Q6J("ngForOf",Et.modes)}}function _t(nt,et){if(1&nt){const Et=l.EpF();l.TgZ(0,"button",20),l.NdJ("click",function(){const ne=l.CHM(Et).$implicit;return l.oxw(2).onDirectionChange(ne)}),l.qZA()}if(2&nt){const Et=et.$implicit,$t=l.oxw(2);l.ekj("t-direction_active",$t.isDirectionActive(Et)),l.Q6J("icon",$t.getIcon(Et))("tuiHint",Et)}}function Rt(nt,et){if(1&nt){const Et=l.EpF();l.ynx(0),l._UZ(1,"hr",15),l.TgZ(2,"div",16),l.TgZ(3,"tui-linear-multi-picker",17),l.NdJ("valueChange",function(Kt){return l.CHM(Et),l.oxw().onStopsChange(Kt)})("indexChange",function(Kt){return l.CHM(Et),l.oxw().onIndexChange(Kt)}),l.qZA(),l.qZA(),l.TgZ(4,"div",18),l.YNc(5,_t,1,4,"button",19),l.qZA(),l.BQk()}if(2&nt){const Et=l.oxw();l.xp6(2),l.Udp("background",Et.gradient),l.xp6(1),l.Q6J("value",Et.stopsKeys),l.xp6(2),l.Q6J("ngForOf",Et.buttons)}}function wt(nt,et){if(1&nt){const Et=l.EpF();l.TgZ(0,"tui-color-edit",21),l.NdJ("colorChange",function(Kt){return l.CHM(Et),l.oxw().onColorChange(Kt)}),l.qZA()}if(2&nt){const Et=l.oxw();l.Q6J("color",Et.color)}}function z(nt,et){if(1&nt){const Et=l.EpF();l.TgZ(0,"tui-palette",22),l.NdJ("selectedColor",function(Kt){return l.CHM(Et),l.oxw().onPalettePick(Kt)}),l.qZA()}if(2&nt){const Et=l.oxw();l.Q6J("colors",Et.palette)}}const rt=[0,0,0,0],dt=[[0,[0,0,0,1]],[1,[255,255,255,1]]],ct={"to top right":"tuiIconArrowUpRight","to right":"tuiIconArrowRight","to bottom right":"tuiIconArrowDownRight","to bottom":"tuiIconArrowDown","to bottom left":"tuiIconArrowDownLeft","to left":"tuiIconArrowLeft","to top left":"tuiIconArrowUpLeft","to top":"tuiIconArrowUp"};class ${constructor(et,Et){this.sanitizer=et,this.modes=Et,this.stops=new Map(dt),this.currentStop=0,this.direction="to bottom",this.colors=new Map,this.colorChange=new l.vpe,this.color=[0,0,0,1],this.currentMode=this.modes[0],this.buttons=["to top right","to right","to bottom right","to bottom","to bottom left","to left","to top left","to top"]}set colorSetter(et){this.parse(et)}get palette(){return this.filterPalette(this.colors,this.isGradient)}get stopsKeys(){return this.getStopsKeys(this.stops)}get currentColor(){return this.isGradient?this.getStop(this.currentStop):this.color}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(this.getGradient("to right"))}get isGradient(){return this.currentMode===this.modes[1]}getIcon(et){return ct[et]}isModeActive(et){return this.currentMode===et}isDirectionActive(et){return this.direction===et}onPalettePick(et){this.updateColor(et)}onDirectionChange(et){this.direction=et,this.updateColor(this.getGradient(et))}onModeSelect(et,Et){this.currentMode=et,Et.open=!1,this.updateColor(et===this.modes[0]?`rgba(${this.color.join(", ")})`:this.getGradient(this.direction))}onIndexChange(et){this.currentStop=this.stopsKeys[et]}onColorChange(et){this.isGradient?(this.stops.set(this.currentStop,et),this.updateColor(this.getGradient(this.direction))):this.updateColor(`rgba(${et.join(", ")})`)}onStopsChange(et){const Et=this.stopsKeys.find(Kt=>!et.includes(Kt)),$t=et.find(Kt=>!this.stopsKeys.includes(Kt));void 0===Et&&void 0!==$t&&this.addStop($t),void 0!==Et&&void 0===$t&&this.removeStop(Et),void 0!==Et&&void 0!==$t&&this.replaceStop(Et,$t),this.updateColor(this.getGradient(this.direction))}getStopsKeys(et){return Array.from(et.keys())}filterPalette(et,Et){const $t=new Map(et);return $t.forEach((Kt,ne)=>{(Kt.startsWith("linear-gradient")&&!Et||!Kt.startsWith("linear-gradient")&&Et)&&$t.delete(ne)}),$t}updateColor(et){this.colorChange.emit(et)}getGradient(et){return`linear-gradient(${et}, ${[...this.stopsKeys].sort((Et,$t)=>(0,ot.A)(Et,$t)).map(Et=>`rgba(${this.getStop(Et).join(", ")}) ${100*Et}%`).join(", ")})`}getStop(et){return this.stops.get(et)||rt}addStop(et){const Et=this.stopsKeys.reduce(($t,Kt)=>Math.abs(Kt-et)<Math.abs($t-et)?Kt:$t,this.stopsKeys[0]);this.stops.set(et,this.getStop(Et)),this.stops=new Map(this.stops),this.currentStop=et}removeStop(et){this.stops.delete(et),this.stops=new Map(this.stops),this.currentStop=this.stopsKeys[0]}replaceStop(et,Et){const $t=this.getStop(et);this.currentStop=Et,this.stops=new Map(this.stopsKeys.map(Kt=>Kt===et?[Et,$t]:[Kt,this.getStop(Kt)]))}parse(et){et.startsWith("linear-gradient")?this.parseGradient(et):this.parseColor(et)}parseGradient(et){if(et===this.getGradient(this.direction))return;const Et=(0,m._N)((0,m.U5)(et));this.currentMode=this.modes[1],this.direction=Et.side,this.currentStop=0,this.stops=new Map(Et.stops.length?Et.stops.map(({color:$t,position:Kt})=>[parseFloat(Kt)/100,(0,N.tuiParseColor)($t)]):dt)}parseColor(et){this.currentMode=this.modes[0],this.currentStop=0,this.color=(0,N.tuiParseColor)(et)}}$.\u0275fac=function(et){return new(et||$)(l.Y36(y.H7),l.Y36(A.dj))},$.\u0275cmp=l.Xpm({type:$,selectors:[["tui-color-selector"]],inputs:{colors:"colors",colorSetter:["color","colorSetter"]},outputs:{colorChange:"colorChange"},decls:12,vars:7,consts:[[1,"t-select",3,"content"],["dropdown",""],["tuiButton","","appearance","","size","s","type","button",3,"iconRight"],["arrow",""],["menu",""],[4,"ngIf"],[3,"color","colorChange"],["tuiGroup","","class","t-edit",3,"color","colorChange",4,"ngIf"],["class","t-palette",3,"colors","selectedColor",4,"ngIf"],["src","tuiIconChevronDown",1,"t-arrow"],["role","menu","size","s",1,"t-menu"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click"],["src","tuiIconCheck","class","t-checkmark",4,"ngIf"],["src","tuiIconCheck",1,"t-checkmark"],[1,"t-hr"],[1,"t-wrapper"],[1,"t-gradient",3,"value","valueChange","indexChange"],[1,"t-buttons"],["tuiIconButton","","type","button","size","xs","appearance","","tuiHintDescribe","","class","t-direction",3,"t-direction_active","icon","tuiHint","click",4,"ngFor","ngForOf"],["tuiIconButton","","type","button","size","xs","appearance","","tuiHintDescribe","",1,"t-direction",3,"icon","tuiHint","click"],["tuiGroup","",1,"t-edit",3,"color","colorChange"],[1,"t-palette",3,"colors","selectedColor"]],template:function(et,Et){if(1&et&&(l.TgZ(0,"tui-hosted-dropdown",0,1),l.TgZ(2,"button",2),l._uU(3),l.qZA(),l.YNc(4,At,1,2,"ng-template",null,3,l.W1O),l.YNc(6,It,2,1,"ng-template",null,4,l.W1O),l.qZA(),l.YNc(8,Rt,6,4,"ng-container",5),l.TgZ(9,"tui-color-picker",6),l.NdJ("colorChange",function(Kt){return Et.onColorChange(Kt)}),l.qZA(),l.YNc(10,wt,1,1,"tui-color-edit",7),l.YNc(11,z,1,1,"tui-palette",8)),2&et){const $t=l.MAs(5),Kt=l.MAs(7);l.Q6J("content",Kt),l.xp6(2),l.Q6J("iconRight",$t),l.xp6(1),l.hij(" ",Et.currentMode," "),l.xp6(5),l.Q6J("ngIf",Et.isGradient),l.xp6(1),l.Q6J("color",Et.currentColor),l.xp6(1),l.Q6J("ngIf",!Et.isGradient),l.xp6(1),l.Q6J("ngIf",Et.palette.size)}},directives:[G.o,tt.v,ft.O5,at.$,Mt.P,it.q,ft.sg,mt.v,Ot.e,kt.$,St.D,Dt.x,pt.t,q.D,F.h,ut.g,j.R],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block;width:22.6rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px #00000014;pointer-events:none;border-radius:inherit}.t-wrapper[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hr[_ngcontent-%COMP%]{height:1px;margin:0 0 0 -1px;border:none;background:var(--tui-base-03)}.t-gradient[_ngcontent-%COMP%]{margin:0 .5rem;border-radius:inherit}.t-select[_ngcontent-%COMP%]{margin:.75rem .5rem}.t-arrow[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-arrow_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.t-menu[_ngcontent-%COMP%]{width:11.25rem}.t-checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}.t-buttons[_ngcontent-%COMP%]{display:flex;padding:0 .75rem 1.25rem}.t-direction[_ngcontent-%COMP%]{color:var(--tui-text-02);margin:0 .375rem}.t-direction[_ngcontent-%COMP%]:hover, .t-direction_active[_ngcontent-%COMP%]{color:var(--tui-text-01);background:var(--tui-secondary-hover)}.t-edit[_ngcontent-%COMP%]{margin:1.25rem}.t-palette[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:inset 0 1px var(--tui-base-03)}'],changeDetection:0}),(0,C.gn)([(0,N.tuiDefaultProp)()],$.prototype,"colors",void 0),(0,C.gn)([(0,N.tuiRequiredSetter)()],$.prototype,"colorSetter",null),(0,C.gn)([N.tuiPure],$.prototype,"getStopsKeys",null),(0,C.gn)([N.tuiPure],$.prototype,"filterPalette",null)},71424:(Yt,Tt,c)=>{c.d(Tt,{J:()=>m});var C=c(64762),l=c(74788),y=c(62141),A=c(50259);class m{constructor(N){this.value=[0,0],this.valueChange=new l.vpe,N.subscribe(G=>{this.value=G,this.valueChange.emit([G[0],G[1]])})}get left(){return 100*this.value[0]}get top(){return 100*this.value[1]}}m.\u0275fac=function(N){return new(N||m)(l.Y36(y.i))},m.\u0275cmp=l.Xpm({type:m,selectors:[["tui-flat-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[l._Bn([A.TuiDestroyService,y.i])],decls:1,vars:4,consts:[[1,"t-circle"]],template:function(N,G){1&N&&l._UZ(0,"div",0),2&N&&l.Udp("left",G.left,"%")("top",G.top,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:-.5rem 0 0 -.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,C.gn)([(0,A.tuiDefaultProp)()],m.prototype,"value",void 0)},27050:(Yt,Tt,c)=>{c.d(Tt,{hR:()=>C.h,TD:()=>N,$v:()=>G.$,H9:()=>at,sV:()=>Mt.s,wl:()=>kt,Jd:()=>St.J,ui:()=>tt,es:()=>Dt.e,GU:()=>mt,P:()=>pt.P,g7:()=>ft,Rh:()=>q.R,VM:()=>Ot});var C=c(97019),l=c(12057),y=c(24751),A=c(3497),m=c(55908),ot=c(74788);let N=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez,y.u5,m.TextMaskModule,m.TuiValueAccessorModule,m.TuiSelectModule,A.TuiPrimitiveTextfieldModule,A.TuiTextfieldControllerModule,A.TuiDropdownModule,m.TuiInputCountModule,A.TuiDataListModule]]}),F})();var G=c(49289);let tt=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez]]}),F})(),ft=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez]]}),F})(),at=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez,tt,ft]]}),F})();var Mt=c(23999),it=c(50259);let mt=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez]]}),F})(),Ot=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez,A.TuiHintModule]]}),F})(),kt=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez,A.TuiButtonModule,A.TuiHostedDropdownModule,at,mt,A.TuiHintModule,A.TuiSvgModule,A.TuiDataListModule,it.TuiActiveZoneModule,N,A.TuiGroupModule,Ot]]}),F})();var St=c(71424),Dt=c(49472),pt=c(65720),q=c(5451)},49472:(Yt,Tt,c)=>{c.d(Tt,{e:()=>N});var C=c(64762),l=c(74788),y=c(62141),A=c(50259),m=c(12057);function ot(G,tt){if(1&G){const ft=l.EpF();l.TgZ(0,"div",1),l.NdJ("mousedown",function(){const it=l.CHM(ft).index;return l.oxw().onMouseDown(it)})("dblclick",function(){const it=l.CHM(ft).index;return l.oxw().onClick(it)}),l.qZA()}2&G&&l.Udp("left",100*tt.$implicit,"%")}class N{constructor(tt){this.value=[0,1],this.valueChange=new l.vpe,this.indexChange=new l.vpe,this.index=NaN,tt.subscribe(([ft])=>{this.onPicker(ft)})}onMouseUp(){this.index=NaN}onMouseDown(tt){this.updateIndex(tt)}onClick(tt){this.value.length>2&&this.updateValue(this.value.filter((ft,at)=>at!==tt))}onPicker(tt){Number.isNaN(this.index)&&(this.updateIndex(this.value.length),this.value=[...this.value,0]),!this.value.some((ft,at)=>ft===tt&&at!==this.index)&&this.updateValue(this.value.map((ft,at)=>at===this.index?tt:ft))}updateIndex(tt){this.index=tt,this.indexChange.emit(tt)}updateValue(tt){this.value=tt,this.valueChange.emit(tt)}}N.\u0275fac=function(tt){return new(tt||N)(l.Y36(y.i))},N.\u0275cmp=l.Xpm({type:N,selectors:[["tui-linear-multi-picker"]],hostBindings:function(tt,ft){1&tt&&l.NdJ("mouseup",function(){return ft.onMouseUp()},!1,l.evT)},inputs:{value:"value"},outputs:{valueChange:"valueChange",indexChange:"indexChange"},features:[l._Bn([A.TuiDestroyService,y.i])],decls:1,vars:1,consts:[["class","t-circle",3,"left","mousedown","dblclick",4,"ngFor","ngForOf"],[1,"t-circle",3,"mousedown","dblclick"]],template:function(tt,ft){1&tt&&l.YNc(0,ot,1,2,"div",0),2&tt&&l.Q6J("ngForOf",ft.value)},directives:[m.sg],styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,C.gn)([(0,A.tuiDefaultProp)()],N.prototype,"value",void 0)},65720:(Yt,Tt,c)=>{c.d(Tt,{P:()=>m});var C=c(64762),l=c(74788),y=c(62141),A=c(50259);class m{constructor(N){this.value=0,this.valueChange=new l.vpe,N.subscribe(([G])=>{this.value=G,this.valueChange.emit(G)})}get left(){return 100*this.value}}m.\u0275fac=function(N){return new(N||m)(l.Y36(y.i))},m.\u0275cmp=l.Xpm({type:m,selectors:[["tui-linear-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[l._Bn([A.TuiDestroyService,y.i])],decls:1,vars:2,consts:[[1,"t-circle"]],template:function(N,G){1&N&&l._UZ(0,"div",0),2&N&&l.Udp("left",G.left,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,C.gn)([(0,A.tuiDefaultProp)()],m.prototype,"value",void 0)},5451:(Yt,Tt,c)=>{c.d(Tt,{R:()=>at});var C=c(64762),l=c(74788),y=c(50259),A=c(12057),m=c(67446),ot=c(29070),N=c(54255),G=c(15491),tt=c(219);function ft(Mt,it){if(1&Mt){const mt=l.EpF();l.TgZ(0,"button",1),l.NdJ("click",function(){const St=l.CHM(mt).$implicit;return l.oxw().selectedColor.emit(St.value)}),l.qZA()}if(2&Mt){const mt=it.$implicit;l.Udp("background",mt.value),l.Q6J("tuiHint",mt.key)("tuiHintDescribe",mt.key)("id",mt.key)}}class at{constructor(){this.colors=new Map,this.selectedColor=new l.vpe,this.originalOrder=(it,mt)=>0}}at.\u0275fac=function(it){return new(it||at)},at.\u0275cmp=l.Xpm({type:at,selectors:[["tui-palette"]],inputs:{colors:"colors"},outputs:{selectedColor:"selectedColor"},decls:2,vars:4,consts:[["type","button","class","t-button",3,"background","tuiHint","tuiHintDescribe","id","click",4,"ngFor","ngForOf"],["type","button",1,"t-button",3,"tuiHint","tuiHintDescribe","id","click"]],template:function(it,mt){1&it&&(l.YNc(0,ft,1,5,"button",0),l.ALo(1,"keyvalue")),2&it&&l.Q6J("ngForOf",l.xi3(1,1,mt.colors,mt.originalOrder))},directives:[A.sg,m.D,ot.x,N.t,G.D,tt.$],pipes:[A.Nd],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;padding:.875rem}.t-button[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;width:1.5625rem;height:1.5625rem;box-sizing:border-box;margin:.375rem;border-radius:var(--tui-radius-m);border:1px solid rgba(0,0,0,.08)}"],changeDetection:0}),(0,C.gn)([(0,y.tuiDefaultProp)()],at.prototype,"colors",void 0)},45050:(Yt,Tt,c)=>{c.d(Tt,{l:()=>Pt});var C=c(64762),l=c(12057),y=c(74788),A=c(64352),m=c(84614),ot=c(14309),N=c(50259),G=c(87623),tt=c(20986),ft=c(24751),at=c(34880),Mt=c(76189),it=c(66596),mt=c(3881),Ot=c(22613),kt=c(98266);function St(It,_t){1&It&&(y.ynx(0),y._uU(1,"Edit anchor"),y.BQk())}function Dt(It,_t){1&It&&(y.TgZ(0,"span"),y._uU(1,"Link to anchor"),y.qZA())}function pt(It,_t){1&It&&(y.TgZ(0,"span"),y._uU(1,"URL"),y.qZA())}function q(It,_t){if(1&It&&(y.YNc(0,Dt,2,0,"span",1),y.YNc(1,pt,2,0,"ng-template",null,12,y.W1O)),2&It){const Rt=y.MAs(2),wt=y.oxw(2);y.Q6J("ngIf",wt.prefixIsHashMode)("ngIfElse",Rt)}}function F(It,_t){if(1&It&&(y.ynx(0),y._uU(1),y.BQk()),2&It){const Rt=_t.ngIf,wt=y.oxw(2);y.xp6(1),y.hij(" ",wt.prefixIsHashMode?Rt.anchorExample:Rt.urlExample," ")}}function ut(It,_t){if(1&It){const Rt=y.EpF();y.ynx(0),y.TgZ(1,"label",4),y.TgZ(2,"div",5),y.YNc(3,St,2,0,"ng-container",1),y.YNc(4,q,3,2,"ng-template",null,6,y.W1O),y.qZA(),y.TgZ(6,"div",7),y.TgZ(7,"div",8),y._uU(8),y.qZA(),y.TgZ(9,"tui-input-inline",9),y.NdJ("ngModelChange",function(z){return y.CHM(Rt),y.oxw().url=z})("input",function(z){let dt;return y.CHM(Rt),y.oxw().onChange(null==(dt=z.target)?null:dt.value)})("keydown.prevent.enter",function(){return y.CHM(Rt),y.oxw().onSave()})("keydown.backspace",function(){return y.CHM(Rt),y.oxw().onBackspace()}),y.YNc(10,F,2,1,"ng-container",3),y.ALo(11,"async"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(12,"tui-svg",10),y.NdJ("click",function(){return y.CHM(Rt),y.oxw().onClear()}),y.qZA(),y.TgZ(13,"button",11),y.NdJ("click",function(){return y.CHM(Rt),y.oxw().onSave()}),y.qZA(),y.BQk()}if(2&It){const Rt=y.MAs(5),wt=y.oxw();y.xp6(3),y.Q6J("ngIf",wt.anchorMode)("ngIfElse",Rt),y.xp6(5),y.Oqu(wt.prefix),y.xp6(1),y.ekj("t-input_filled",wt.hasUrl),y.Q6J("ngModel",wt.url),y.xp6(1),y.Q6J("ngIf",y.lcZ(11,9,wt.texts$)),y.xp6(2),y.ekj("t-cleaner_hidden",!wt.hasUrl)}}function j(It,_t){if(1&It){const Rt=y.EpF();y.TgZ(0,"a",13),y._uU(1),y.ALo(2,"tuiShortUrl"),y.qZA(),y.TgZ(3,"button",14),y.NdJ("click",function(){return y.CHM(Rt),y.oxw().onEdit()}),y.qZA(),y.TgZ(4,"button",15),y.NdJ("click",function(){return y.CHM(Rt),y.oxw().onRemove()}),y.qZA()}if(2&It){const Rt=y.oxw();y.Q6J("href",Rt.href,y.LSH),y.xp6(1),y.AsE(" ",Rt.anchorMode?"#":"","",y.lcZ(2,3,Rt.url)," ")}}function At(It,_t){if(1&It){const Rt=y.EpF();y.TgZ(0,"button",19),y.NdJ("click",function(){const rt=y.CHM(Rt).$implicit;return y.oxw(2).setAnchor(rt)}),y._uU(1),y.qZA()}if(2&It){const Rt=_t.$implicit;y.xp6(1),y.hij(" #",Rt," ")}}function Bt(It,_t){if(1&It&&(y.ynx(0),y._UZ(1,"hr",16),y.TgZ(2,"tui-scrollbar"),y.TgZ(3,"div",17),y.YNc(4,At,2,1,"button",18),y.ALo(5,"tuiFilterAnchors"),y.qZA(),y.qZA(),y.BQk()),2&It){const Rt=y.oxw();y.xp6(4),y.Q6J("ngForOf",y.Dn7(5,1,Rt.anchorIds,Rt.prefix,Rt.url))}}class Pt{constructor(_t,Rt,wt,z){this.documentRef=_t,this.texts$=Rt,this.editor=wt,this.options=z,this.isOnlyAnchorMode=this.detectAnchorMode(),this.addLink=new y.vpe,this.removeLink=new y.vpe,this.url=this.getHrefOrAnchorId(),this.edit=!this.url,this.prefix=this.makeDefaultPrefix(),this.anchorIds=this.getAllAnchorsIds()}get defaultProtocol(){var _t,Rt;return null!==(Rt=null===(_t=this.options.linkOptions)||void 0===_t?void 0:_t.protocol)&&void 0!==Rt?Rt:A.Ci}set anchorMode(_t){this.isOnlyAnchorMode=_t,this.prefix=_t?A._s:this.makeDefaultPrefix()}get anchorMode(){return this.isOnlyAnchorMode}get prefixIsHashMode(){return this.prefix===A._s}get hasUrl(){return!!this.url}get href(){return`${this.prefix}${this.url}`}get showAnchorsList(){return!this.anchorMode&&this.edit&&this.anchorIds.length>0}get isViewMode(){return!this.edit}onSelectionChange(){this.isViewMode&&(this.url=this.getHrefOrAnchorId(),this.anchorMode=this.detectAnchorMode())}onMouseDown(_t){(0,N.tuiIsElement)(_t.target)&&!_t.target.matches("a, button, input")&&_t.preventDefault()}setAnchor(_t){this.url=_t,this.changePrefix(!0)}changePrefix(_t){this.prefix=_t?A._s:this.defaultProtocol}onSave(){this.url?this.addLink.emit(this.href):this.removeLink.emit()}onBackspace(){this.url||(this.prefix=this.isOnlyAnchorMode?A._s:this.defaultProtocol)}onEdit(){this.edit=!0}onRemove(){this.removeLink.emit()}onChange(_t){this.url=this.removePrefix(_t)}onClear(){this.url=""}makeDefaultPrefix(){var _t;const Rt=this.getAnchorElement();return Rt&&(!Rt.getAttribute("href")&&Rt.getAttribute("id")||(null===(_t=Rt.getAttribute("href"))||void 0===_t?void 0:_t.startsWith(A._s)))?A._s:this.defaultProtocol}detectAnchorMode(){const _t=this.getAnchorElement();return!(null==_t?void 0:_t.href)&&!!(null==_t?void 0:_t.getAttribute("id"))}getFocusedParentElement(){var _t,Rt;return(null===(Rt=null===(_t=this.documentRef.getSelection())||void 0===_t?void 0:_t.focusNode)||void 0===Rt?void 0:Rt.parentElement)||null}getAnchorElement(){var _t;return(null===(_t=this.getFocusedParentElement())||void 0===_t?void 0:_t.closest("a"))||null}getHrefOrAnchorId(){const _t=this.getAnchorElement();return _t?this.removePrefix(_t.getAttribute("href")||_t.getAttribute("id")||""):this.url}removePrefix(_t){return _t.startsWith(A.ML)?(this.prefix=this.isOnlyAnchorMode?A._s:A.ML,_t.replace(A.ML,"")):_t.startsWith(A.Ci)?(this.prefix=this.isOnlyAnchorMode?A._s:A.Ci,_t.replace(A.Ci,"")):_t.startsWith(A._s)?(this.prefix=A._s,_t.replace(A._s,"")):_t}getAllAnchorsIds(){var _t;const Rt=Array.from(null!==(_t=this.editor.getOriginTiptapEditor().view.dom.querySelectorAll('[data-type="jump-anchor"]'))&&void 0!==_t?_t:[]);return Array.from(Rt).map(wt=>wt.getAttribute("id")||"").filter(Boolean)}}Pt.\u0275fac=function(_t){return new(_t||Pt)(y.Y36(l.K0),y.Y36(ot.b$),y.Y36(m.$3),y.Y36(ot.mJ))},Pt.\u0275cmp=y.Xpm({type:Pt,selectors:[["tui-edit-link"]],hostBindings:function(_t,Rt){1&_t&&y.NdJ("selectionchange",function(){return Rt.onSelectionChange()},!1,y.evT)("mousedown",function(z){return Rt.onMouseDown(z)})},inputs:{anchorMode:"anchorMode"},outputs:{addLink:"addLink",removeLink:"removeLink"},decls:5,vars:3,consts:[[1,"t-edit-link"],[4,"ngIf","ngIfElse"],["view",""],[4,"ngIf"],[1,"t-label"],[1,"t-label-properties"],["fullOptions",""],[1,"t-url"],[1,"t-prefix"],["tuiAutoFocus","",1,"t-input",3,"ngModel","ngModelChange","input","keydown.prevent.enter","keydown.backspace"],["src","tuiIconCloseLarge",1,"t-cleaner",3,"click"],["tuiIconButton","","type","button","size","s","title","Insert link","icon","tuiIconCheckCircleLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],["urlTitle",""],["tuiLink","","target","_blank",1,"t-link",3,"href"],["tuiIconButton","","type","button","size","s","title","Change link","icon","tuiIconEdit2Large","shape","rounded","appearance","icon",1,"t-button","t-edit-button",3,"click"],["tuiIconButton","","type","button","size","s","title","Remove link","icon","tuiIconUnlinkLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],[1,"t-hr"],[1,"t-anchor-list"],["type","button","class","t-anchor",3,"click",4,"ngFor","ngForOf"],["type","button",1,"t-anchor",3,"click"]],template:function(_t,Rt){if(1&_t&&(y.TgZ(0,"div",0),y.YNc(1,ut,14,11,"ng-container",1),y.YNc(2,j,5,5,"ng-template",null,2,y.W1O),y.qZA(),y.YNc(4,Bt,6,5,"ng-container",3)),2&_t){const wt=y.MAs(3);y.xp6(1),y.Q6J("ngIf",Rt.edit)("ngIfElse",wt),y.xp6(3),y.Q6J("ngIf",Rt.showAnchorsList)}},directives:[l.O5,G.l,tt.k,ft.JJ,ft.On,at.P,Mt.v,it.V,mt.I,l.sg],pipes:[l.Ov,Ot.X,kt.b],styles:["[_nghost-%COMP%]{display:block;min-width:18.75rem}.t-edit-link[_ngcontent-%COMP%]{display:flex;min-height:4rem;align-items:center;padding-right:.75rem}.t-label[_ngcontent-%COMP%]{font:var(--tui-font-text-s);height:var(--tui-height-l);box-sizing:border-box;padding:.4375rem 1rem;min-width:12.5rem;max-width:25rem;width:100%}.t-label-properties[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:8.375rem;justify-content:space-between}.t-property_inactive[_ngcontent-%COMP%]{opacity:.5}.t-url[_ngcontent-%COMP%]{display:flex;font:var(--tui-font-text-m);color:var(--tui-text-02)}.t-input[_ngcontent-%COMP%]{flex:1}.t-input_filled[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-button[_ngcontent-%COMP%]{width:2rem;height:2rem;margin:0 .25rem;transition:background .2s}.t-edit-button[_ngcontent-%COMP%]{margin-left:auto}.t-link[_ngcontent-%COMP%]{margin:0 1rem}.t-cleaner[_ngcontent-%COMP%]{transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;color:var(--tui-base-06);cursor:pointer;margin-left:auto}.t-cleaner[_ngcontent-%COMP%]:hover{color:var(--tui-base-07)}.t-cleaner_hidden[_ngcontent-%COMP%]{visibility:hidden}.t-anchor-list[_ngcontent-%COMP%]{display:flex;max-height:12.5rem;flex-direction:column}.t-anchor[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;background:none;font-size:inherit;line-height:inherit;min-height:2.75rem;padding:.375rem .5rem;margin:.125rem .5rem;border-radius:var(--tui-radius-m);text-align:left}.t-anchor[_ngcontent-%COMP%]:hover{background:var(--tui-base-02);cursor:pointer}"],changeDetection:0}),(0,C.gn)([(0,N.tuiDefaultProp)()],Pt.prototype,"anchorMode",null)},71115:(Yt,Tt,c)=>{c.d(Tt,{lV:()=>C.l,Fu:()=>G,bL:()=>tt.b,X:()=>ft.X});var C=c(45050),l=c(12057),y=c(24751),A=c(50259),m=c(3497),ot=c(55908),N=c(74788);let G=(()=>{class at{}return at.\u0275fac=function(it){return new(it||at)},at.\u0275mod=N.oAB({type:at}),at.\u0275inj=N.cJS({imports:[[l.ez,y.u5,A.TuiAutoFocusModule,m.TuiButtonModule,m.TuiSvgModule,m.TuiLinkModule,ot.TuiInputInlineModule,ot.TuiToggleModule,m.TuiScrollbarModule]]}),at})();var tt=c(98266),ft=c(22613)},98266:(Yt,Tt,c)=>{c.d(Tt,{b:()=>l});var C=c(74788);let l=(()=>{class y{transform(m,ot,N){return"#"===ot?m.filter(G=>G!==N):m}}return y.\u0275fac=function(m){return new(m||y)},y.\u0275pipe=C.Yjl({name:"tuiFilterAnchors",type:y,pure:!0}),y})()},22613:(Yt,Tt,c)=>{c.d(Tt,{X:()=>m});var C=c(74788);let m=(()=>{class ot{transform(G){return G.length<60?G:`${G.slice(0,Math.max(0,40))}...${G.slice(G.length-10)}`}}return ot.\u0275fac=function(G){return new(G||ot)},ot.\u0275pipe=C.Yjl({name:"tuiShortUrl",type:ot,pure:!0}),ot})()},96570:(Yt,Tt,c)=>{c.d(Tt,{V:()=>at});var C=c(74788),l=c(50259),y=c(25126),A=c(39953),m=c(12057);const ot=function(){return[0,1]};function N(Mt,it){if(1&Mt){const mt=C.EpF();C.TgZ(0,"div",4),C.NdJ("tuiSizeChange",function(kt){return C.CHM(mt),C.oxw().sizeChange.emit(kt)}),C.qZA()}2&Mt&&C.Q6J("tuiResizer",C.DdM(1,ot))}const G=function(Mt){return[Mt,0]},tt=function(){return[1,0]},ft=["*"];let at=(()=>{class Mt{constructor(){this.autoHeight=!1,this.width=null,this.height=null,this.sizeChange=new C.vpe}get hostWidth(){return(0,l.tuiIsNumber)(this.width)?(0,l.tuiPx)(this.width):this.width}get hostHeight(){return this.autoHeight?null:(0,l.tuiIsNumber)(this.height)?(0,l.tuiPx)(this.height):this.height}}return Mt.\u0275fac=function(mt){return new(mt||Mt)},Mt.\u0275cmp=C.Xpm({type:Mt,selectors:[["tui-editor-resizable"]],hostVars:4,hostBindings:function(mt,Ot){2&mt&&C.Udp("width",Ot.hostWidth)("height",Ot.hostHeight)},inputs:{autoHeight:"autoHeight",width:"width",height:"height"},outputs:{sizeChange:"sizeChange"},ngContentSelectors:ft,decls:5,vars:8,consts:[["tuiResizeable","",1,"t-resizable"],[1,"t-handle","t-handle-left-side",3,"tuiResizer","tuiSizeChange"],["class","t-handle t-handle-bottom-side",3,"tuiResizer","tuiSizeChange",4,"ngIf"],[1,"t-handle","t-handle-right-side",3,"tuiResizer","tuiSizeChange"],[1,"t-handle","t-handle-bottom-side",3,"tuiResizer","tuiSizeChange"]],template:function(mt,Ot){1&mt&&(C.F$t(),C.TgZ(0,"div",0),C.Hsn(1),C.TgZ(2,"div",1),C.NdJ("tuiSizeChange",function(St){return Ot.sizeChange.emit(St)}),C.qZA(),C.YNc(3,N,1,2,"div",2),C.TgZ(4,"div",3),C.NdJ("tuiSizeChange",function(St){return Ot.sizeChange.emit(St)}),C.qZA(),C.qZA()),2&mt&&(C.ekj("t-resizable-auto-height",Ot.autoHeight),C.xp6(2),C.Q6J("tuiResizer",C.VKq(5,G,-1)),C.xp6(1),C.Q6J("ngIf",!Ot.autoHeight),C.xp6(1),C.Q6J("tuiResizer",C.DdM(7,tt)))},directives:[y.U,A.L,m.O5],styles:['[_nghost-%COMP%]{position:relative;display:inline-block;box-sizing:border-box}[_nghost-%COMP%]   .t-resizable[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]   .t-resizable-auto-height[_ngcontent-%COMP%]{height:auto!important}[_nghost-%COMP%]   iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}[_nghost-%COMP%]:hover   .t-handle[_ngcontent-%COMP%]:after{opacity:1}.t-handle[_ngcontent-%COMP%]{position:absolute;top:0;display:flex;width:.75rem;cursor:col-resize;justify-content:center;align-items:center;height:100%}.t-handle[_ngcontent-%COMP%]:after{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";width:50%;height:33%;box-sizing:border-box;border-radius:var(--tui-radius-m);background:var(--tui-base-08);border:1px solid var(--tui-base-03);opacity:0}.t-handle-left-side[_ngcontent-%COMP%]{left:0}.t-handle-bottom-side[_ngcontent-%COMP%]{top:unset;bottom:.3125rem;height:.95rem;width:100%}.t-handle-right-side[_ngcontent-%COMP%]{right:0}'],changeDetection:0}),Mt})()},95110:(Yt,Tt,c)=>{c.d(Tt,{_3:()=>ot,V_:()=>N.V,Sl:()=>tt});var C=c(40400),l=c(50259),y=c(66682),A=c(46782),m=c(74788);let ot=(()=>{class ft extends C.d{constructor(Mt,it){super(),this._height=0,this._width=0,(0,y.T)((0,l.tuiTypedFromEvent)(Mt,"touchend"),(0,l.tuiTypedFromEvent)(Mt,"mouseup")).pipe((0,A.R)(it)).subscribe(()=>this.updateAttributes({width:this.width,height:this.height}))}get attrs(){var Mt;return(null===(Mt=this.node)||void 0===Mt?void 0:Mt.attrs)||{src:""}}get width(){return this._width||this.attrs.width||null}get height(){return this._height||this.attrs.height||null}}return ft.\u0275fac=function(Mt){return new(Mt||ft)(m.Y36(Document),m.Y36(l.TuiDestroyService))},ft.\u0275dir=m.lG2({type:ft,features:[m.qOj]}),ft})();var N=c(96570),G=c(12057);let tt=(()=>{class ft{}return ft.\u0275fac=function(Mt){return new(Mt||ft)},ft.\u0275mod=m.oAB({type:ft}),ft.\u0275inj=m.cJS({imports:[[G.ez,l.TuiResizeModule,l.TuiResizerModule]]}),ft})()},20179:(Yt,Tt,c)=>{c.d(Tt,{D:()=>ot});var C=c(12057),l=c(74788),y=c(82113),A=c(50259),m=c(3497);let ot=(()=>{class N{constructor(tt,ft,at,Mt,it,mt){this.elementRef=tt,this.renderer=ft,this.sanitizer=at,this.tuiSanitizer=Mt,this.document=it,this.editor=mt}set content(tt){this.renderer.setProperty(this.elementRef.nativeElement,"innerHTML",this.tuiSanitizer?this.tuiSanitizer.sanitize(l.q3G.HTML,tt.replace(/colwidth/g,"width")):this.sanitizer.sanitize(l.q3G.HTML,tt))}click(tt){var ft,at;if(this.editor||!(0,A.tuiIsElement)(tt.target))return;const Mt=(null===(at=null===(ft=tt.target)||void 0===ft?void 0:ft.closest("a"))||void 0===at?void 0:at.getAttribute("href"))||"";!Mt.startsWith("#")||(this.document.location.hash=Mt.replace("#",""),tt.preventDefault())}}return N.\u0275fac=function(tt){return new(tt||N)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.Tiy),l.Y36(m.TUI_SANITIZER,8),l.Y36(C.K0),l.Y36(y.JU,8))},N.\u0275cmp=l.Xpm({type:N,selectors:[["tui-editor-socket"]],hostAttrs:[1,"tui-editor-socket"],hostBindings:function(tt,ft){1&tt&&l.NdJ("click",function(Mt){return ft.click(Mt)})},inputs:{content:"content"},decls:0,vars:0,template:function(tt,ft){},styles:['.tui-editor-socket summary{display:flex;align-items:center;min-height:3.5rem;width:100%;padding:0 1.25rem;box-sizing:border-box;border-radius:var(--tui-radius-l);pointer-events:none;outline:none}.tui-editor-socket summary:focus-visible{outline:2px solid var(--tui-link)}.tui-editor-socket summary p{min-width:1px;margin:0}.tui-editor-socket summary::-webkit-details-marker{display:none}.tui-editor-socket details[open] summary{border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-editor-socket .details-arrow,.tui-editor-socket .t-details-arrow{position:absolute;top:1.5rem;right:1.25rem;height:.575rem;width:.575rem;border:1px solid var(--tui-base-06);border-width:0 2px 2px 0;transform:rotate(45deg);transition:var(--tui-duration, .3s);-webkit-appearance:none;-moz-appearance:none;appearance:none;box-sizing:border-box;padding:0;background:none;cursor:pointer;outline:none}.tui-editor-socket details{width:100%;border:1px solid var(--tui-base-04);border-radius:var(--tui-radius-l)}.tui-editor-socket div[data-type=details-content]{padding:1.25rem;min-height:3rem;border:1px solid var(--tui-base-04);border-width:1px 0 0}.tui-editor-socket div[data-type=details-content] h1:first-child,.tui-editor-socket div[data-type=details-content] h2:first-child,.tui-editor-socket div[data-type=details-content] pre:first-child,.tui-editor-socket div[data-type=details-content] ul:first-child,.tui-editor-socket div[data-type=details-content] ol:first-child,.tui-editor-socket div[data-type=details-content] ol li:first-child,.tui-editor-socket div[data-type=details-content] ul li:first-child{margin-top:0}.tui-editor-socket .details-wrapper,.tui-editor-socket .t-details-wrapper{margin-bottom:.5rem;position:relative;display:flex}.tui-editor-socket .details-wrapper_rendered .details-arrow,.tui-editor-socket .t-details-wrapper_rendered .details-arrow,.tui-editor-socket .details-wrapper_rendered .t-details-arrow,.tui-editor-socket .t-details-wrapper_rendered .t-details-arrow{pointer-events:none}.tui-editor-socket .details-wrapper_rendered summary,.tui-editor-socket .t-details-wrapper_rendered summary{transition:transform var(--tui-duration, .3s);cursor:pointer;pointer-events:auto}.tui-editor-socket .details-wrapper_rendered summary:hover,.tui-editor-socket .t-details-wrapper_rendered summary:hover{background:var(--tui-base-02)}.tui-editor-socket details[open]+.details-arrow,.tui-editor-socket details[open]+.t-details-arrow{top:1.75rem;transform:rotate(225deg)}.tui-editor-socket pre{white-space:pre-wrap;word-break:break-word;border-radius:.25rem;margin:1rem 0;padding:.75rem 1rem;font-family:Courier,monospace;color:var(--tui-text-02);background:var(--tui-base-02)}.tui-editor-socket{display:block;margin:0;color:var(--tui-text-01);font:var(--tui-font-text-m)}.tui-editor-socket[tuiTiptapEditor]{overflow:hidden}.tui-editor-socket._preview-image img{cursor:pointer}.tui-editor-socket h1,.tui-editor-socket h2,.tui-editor-socket h3,.tui-editor-socket h4,.tui-editor-socket h5,.tui-editor-socket h6{word-break:break-word;line-height:normal}.tui-editor-socket h1:first-child,.tui-editor-socket h2:first-child,.tui-editor-socket p:last-child{margin-bottom:0}.tui-editor-socket p:last-child,.tui-editor-socket pre:last-child{margin-bottom:0}.tui-editor-socket a:not([data-type="jump-anchor"]){color:var(--tui-link);text-decoration:none;outline:none}.tui-editor-socket a:not([data-type="jump-anchor"]):hover{color:var(--tui-link-hover);text-decoration:underline}.tui-editor-socket a:not([data-type="jump-anchor"]):active{color:var(--tui-primary-active)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]{text-decoration:underline;-webkit-text-decoration-color:var(--tui-link);text-decoration-color:var(--tui-link)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:before{content:"#"}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:hover{color:var(--tui-link)}.tui-editor-socket .ProseMirror video,.tui-editor-socket .ProseMirror audio{pointer-events:none}.tui-editor-socket .tableWrapper,.tui-editor-socket .tui-table-wrapper{overflow-x:auto}.tui-editor-socket mark{background:unset;color:inherit}.tui-editor-socket .ProseMirror{min-height:5.375rem;padding:.2rem 1rem;outline:none;white-space:pre-wrap}.tui-editor-socket p:empty:after{content:" ";white-space:pre}.tui-editor-socket p:first-child{margin-top:0}.tui-editor-socket ul,.tui-editor-socket ol{list-style-type:none;margin:1rem 1rem 1rem 1.5rem;padding:0}.tui-editor-socket li{margin:1rem 0}.tui-editor-socket li p{display:inline;margin:0 auto;word-break:break-word}.tui-editor-socket ul li p{display:inline-block}.tui-editor-socket ul>li:before{content:"";display:inline-block;width:.5rem;height:.5rem;border-radius:100%;margin:.5rem .875rem .0625rem -1.375rem;background-color:var(--tui-primary);vertical-align:top;box-sizing:border-box}.tui-editor-socket li ul>li:before{background:none;border:.125rem solid var(--tui-primary)}.tui-editor-socket li ul>li>ul>li:before{background:var(--tui-primary);border-radius:0;width:.375rem;height:.375rem}.tui-editor-socket ol{counter-reset:item}.tui-editor-socket ol>li:before{content:counters(item,".") ".";width:1.5rem;margin:0 .75rem 0 -1.5rem;counter-increment:item;color:var(--tui-base-05);vertical-align:top}.tui-editor-socket blockquote{margin:1.25rem 0 1.25rem 1.5rem;padding-left:1.0625rem;border-left:1px solid var(--tui-base-04)}.tui-editor-socket p{margin:1rem 0}.tui-editor-socket hr{border:none;border-top:1px solid var(--tui-base-03);margin:1rem 0}.tui-editor-socket table{border-collapse:collapse;table-layout:fixed;width:100%;margin:0;overflow:hidden}.tui-editor-socket table td{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word}.tui-editor-socket table th{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word;font-weight:bold;text-align:left;background-color:var(--tui-base-02);min-height:2rem}.tui-editor-socket table .column-resize-handle{position:absolute;right:-2px;top:0;bottom:-2px;width:4px;background-color:#adf;pointer-events:none}.tui-editor-socket table td>*{margin-top:0;margin-bottom:0}.tui-editor-socket table th>*{margin-top:0;margin-bottom:0}.tui-editor-socket .resize-cursor{cursor:ew-resize;cursor:col-resize}.tui-editor-socket table .tableWrapper{overflow-x:auto}.tui-editor-socket .selectedCell:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:var(--tui-selection);pointer-events:none}.tui-editor-socket font[face="Courier New"]{display:inline-block;padding:.25rem .5rem;border-radius:.25rem;background-color:#ecf1f7;word-break:break-word}.t-editor-placeholder:before{content:attr(data-placeholder);float:left;color:var(--tui-base-05);pointer-events:none;height:0}.tui-group-node{display:flex;flex-direction:row}.tui-group-node:hover>.tui-group-pointer{pointer-events:auto;opacity:1}.tui-group-pointer{opacity:0;min-height:.8125rem;max-height:.8125rem;min-width:.8125rem;max-width:.8125rem;margin:.3125rem .3125rem 0 0;cursor:grab;background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="black" /></svg>\');background-repeat:no-repeat;background-size:contain;background-position:center}[data-mode=onDark] .tui-group-pointer{background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="white" /></svg>\')}\n'],encapsulation:2,changeDetection:0}),N})()},69303:(Yt,Tt,c)=>{c.d(Tt,{a:()=>ct});var C=c(64762),l=c(12057),y=c(74788),A=c(24751),m=c(17406),ot=c(64352),N=c(84614),G=c(14309),tt=c(27863),ft=c(50259),at=c(79089),Mt=c(40939),it=c(2697),mt=c(17163),Ot=c(3881),kt=c(1433),St=c(9872),Dt=c(4997),pt=c(33250),q=c(26072),F=c(9829),ut=c(82886),j=c(39088),At=c(20179),Bt=c(74982),Pt=c(45050);function It($,nt){if(1&$){const et=y.EpF();y.TgZ(0,"tui-toolbar",9),y.NdJ("fileAttached",function($t){return y.CHM(et),y.oxw(2).fileAttached.emit($t)}),y.Hsn(1,1),y.qZA()}if(2&$){const et=y.oxw(2);y.Q6J("tools",et.tools)("disabled",!et.interactive)}}function _t($,nt){if(1&$&&(y.TgZ(0,"div",10),y._uU(1),y.qZA()),2&$){const et=y.oxw(2);y.xp6(1),y.hij(" ",et.exampleText," ")}}function Rt($,nt){if(1&$){const et=y.EpF();y.TgZ(0,"div",11),y.TgZ(1,"tui-editor-socket",12),y.NdJ("valueChange",function($t){return y.CHM(et),y.oxw(2).onModelChange($t)})("stateChange",function(){return 0}),y.qZA(),y.qZA()}if(2&$){y.oxw();const et=y.MAs(9),Et=y.oxw();y.Q6J("tuiDropdownSelection",Et.dropdownSelectionHandler)("tuiDropdown",et),y.xp6(1),y.Q6J("value",Et.value)("editable",Et.interactive)}}function wt($,nt){if(1&$){const et=y.EpF();y.TgZ(0,"tui-edit-link",13,14),y.NdJ("addLink",function($t){y.CHM(et);const Kt=y.MAs(1),ne=y.oxw(2);return Kt.anchorMode?ne.addAnchor($t):ne.addLink($t)})("removeLink",function(){y.CHM(et);const $t=y.MAs(1),Kt=y.oxw(2);return $t.anchorMode?Kt.removeAnchor():Kt.removeLink()}),y.qZA()}}function z($,nt){if(1&$){const et=y.EpF();y.TgZ(0,"div",1),y.NdJ("tuiActiveZoneChange",function($t){return y.CHM(et),y.oxw().onActiveZone($t)}),y.TgZ(1,"div",2),y.YNc(2,It,2,2,"tui-toolbar",3),y.TgZ(3,"div",4),y.Hsn(4),y.qZA(),y.YNc(5,_t,2,1,"div",5),y.qZA(),y.TgZ(6,"tui-scrollbar",6),y.YNc(7,Rt,2,4,"div",7),y.YNc(8,wt,2,0,"ng-template",null,8,y.W1O),y._UZ(10,"tui-editor-portal-host"),y.qZA(),y.qZA()}if(2&$){const et=nt.tuiLet,Et=y.oxw();y.Q6J("readOnly",Et.readOnly)("disabled",Et.disabled)("focus",Et.computedFocused)("hover",Et.pseudoHover)("invalid",Et.computedInvalid),y.xp6(2),y.Q6J("ngIf",et),y.xp6(1),y.ekj("t-placeholder_raised",Et.placeholderRaised),y.xp6(2),y.Q6J("ngIf",Et.hasExampleText),y.xp6(2),y.Q6J("ngIf",et)}}const rt=["*",[["tools"]]];class ct extends ft.AbstractTuiControl{constructor(nt,et,Et,$t,Kt,ne){super(nt,et),this.editorLoaded$=Et,this.editorService=$t,this.contentProcessor=Kt,this.documentRef=ne,this.exampleText="",this.tools=ot.Db,this.fileAttached=new y.vpe,this.focused=!1,this.isSelectionLink=zt=>this.currentFocusedNodeIsAnchor(zt)&&(0,tt.nC)(zt)}get nativeFocusableElement(){var nt;return this.computedDisabled?null:(null===(nt=this.element)||void 0===nt?void 0:nt.nativeElement)||null}get dropdownSelectionHandler(){return this.focused?this.isSelectionLink:ft.ALWAYS_FALSE_HANDLER}get editor(){return this.editorService.getOriginTiptapEditor()?this.editorService:null}get placeholderRaised(){return this.computedFocused&&!this.readOnly||this.hasValue}get hasExampleText(){return!!this.exampleText&&this.computedFocused&&!this.hasValue&&!this.readOnly}writeValue(nt){var et;if(nt===this.value)return;const Et=this.contentProcessor(nt||"");super.writeValue(Et),Et!==nt&&(null===(et=this.control)||void 0===et||et.setValue(Et,{onlySelf:!1,emitEvent:!1,emitModelToViewChange:!1,emitViewToModelChange:!1}))}onActiveZone(nt){var et;this.focused=nt,this.updateFocused(nt),null===(et=this.control)||void 0===et||et.updateValueAndValidity()}onModelChange(nt){this.value=nt}addAnchor(nt){var et;null===(et=this.editor)||void 0===et||et.setAnchor(nt)}removeAnchor(){var nt;null===(nt=this.editor)||void 0===nt||nt.removeAnchor()}addLink(nt){var et,Et;null===(et=this.editor)||void 0===et||et.selectClosest(),null===(Et=this.editor)||void 0===Et||Et.setLink(nt)}removeLink(){var nt;null===(nt=this.editor)||void 0===nt||nt.unsetLink()}ngOnDestroy(){var nt;null===(nt=this.editor)||void 0===nt||nt.destroy()}getFallbackValue(){return""}currentFocusedNodeIsAnchor(nt){var et,Et,$t;return!!(null===(Et=null===(et=nt.startContainer.parentElement)||void 0===et?void 0:et.closest("a"))||void 0===Et?void 0:Et.contains((null===($t=this.documentRef.getSelection())||void 0===$t?void 0:$t.focusNode)||null))}get hasValue(){return!!this.value}}ct.\u0275fac=function(nt){return new(nt||ct)(y.Y36(A.a5,10),y.Y36(y.sBO),y.Y36(G.ZW),y.Y36(N.$3),y.Y36(G.F1),y.Y36(l.K0))},ct.\u0275cmp=y.Xpm({type:ct,selectors:[["tui-editor"]],viewQuery:function(nt,et){if(1&nt&&(y.Gf(N.JU,5,y.SBq),y.Gf(m.M6,5)),2&nt){let Et;y.iGM(Et=y.CRH())&&(et.element=Et.first),y.iGM(Et=y.CRH())&&(et.toolbar=Et.first)}},inputs:{exampleText:"exampleText",tools:"tools"},outputs:{fileAttached:"fileAttached"},features:[y._Bn([(0,ft.tuiAsFocusableItemAccessor)(ct),at.m]),y.qOj],ngContentSelectors:["*","tools"],decls:2,vars:3,consts:[["tuiWrapper","","appearance","textfield","class","t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange",4,"tuiLet"],["tuiWrapper","","appearance","textfield",1,"t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange"],[1,"t-toolbar-wrapper"],[3,"tools","disabled","fileAttached",4,"ngIf"],[1,"t-placeholder"],["class","t-example-text",4,"ngIf"],["tuiEditorPortal","",1,"t-scrollbar"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown",4,"ngIf"],["dropdown",""],[3,"tools","disabled","fileAttached"],[1,"t-example-text"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown"],["tuiTiptapEditor","","spellcheck","false",1,"tui-editor-socket",3,"value","editable","valueChange","stateChange"],[3,"addLink","removeLink"],["link",""]],template:function(nt,et){1&nt&&(y.F$t(rt),y.YNc(0,z,11,10,"div",0),y.ALo(1,"async")),2&nt&&y.Q6J("tuiLet",y.lcZ(1,1,et.editorLoaded$))},directives:[Mt.L,it.o,mt.e,l.O5,Ot.I,kt.A,St.d,Dt.M,pt.Ek,q.t,F.V,ut.A,j.y,At.D,Bt.J,Pt.l],pipes:[l.Ov],styles:["[_nghost-%COMP%]{position:relative;z-index:0;display:block;font:var(--tui-font-text-m);border-radius:var(--tui-radius-m)}.t-wrapper[_ngcontent-%COMP%]{display:flex;max-height:inherit;min-height:10rem;cursor:text;overflow:hidden;flex-direction:column;border-radius:inherit}.t-placeholder[_ngcontent-%COMP%]{transition-property:transform,font-size,color,letter-spacing;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;font:var(--tui-font-text-s);color:var(--tui-text-01);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;width:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;color:var(--tui-text-02);pointer-events:none;will-change:transform;transform:translateY(0);position:absolute;left:1rem;margin-top:1rem;width:95%;font-size:.9375rem}.t-placeholder_raised[_ngcontent-%COMP%]{transform:translateY(-.625rem)}[data-size=m][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font:var(--tui-font-text-xs);transform:translateY(-.5rem);letter-spacing:.025rem}._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], ._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill)}[data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], [data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill-night)}._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-03)}[data-size=l][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{font-size:.9375rem}[data-size=l][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font-size:.8156rem}[data-size=m]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01)}[data-mode=onDark][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}[data-size=m][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}@supports (-webkit-hyphens: none){.t-placeholder[_ngcontent-%COMP%]{will-change:unset;transition-property:transform,color,letter-spacing}}.t-placeholder_raised[_ngcontent-%COMP%]{width:110%}.t-example-text[_ngcontent-%COMP%]{position:absolute;left:1rem;margin-top:1.6rem;color:var(--tui-base-06);letter-spacing:normal;text-transform:none}.t-example-text_light[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}.t-example-text_dark[_ngcontent-%COMP%]{color:var(--tui-text-03)}.t-scrollbar[_ngcontent-%COMP%]{display:flex;max-height:inherit;border-top:1.625rem solid transparent;border-bottom:1px solid transparent;box-sizing:border-box}"],changeDetection:0}),(0,C.gn)([(0,ft.tuiDefaultProp)()],ct.prototype,"exampleText",void 0),(0,C.gn)([(0,ft.tuiDefaultProp)()],ct.prototype,"tools",void 0)},79089:(Yt,Tt,c)=>{c.d(Tt,{m:()=>ft});var C=c(74788),l=c(84614),y=c(14309),A=c(82298),m=c(9112),ot=c(15257),N=c(88002),G=c(47349),tt=c(73825);const ft=[{provide:y.F4,deps:[y.Wf],useFactory:at=>{const Mt=new A.t(1);return Promise.all(at).then(it=>Mt.next(it)),Mt}},{provide:y.Y1,deps:[C.Qsj],useFactory:at=>at.createElement("div")},{provide:y.ZW,deps:[y.Y1,y.F4,y.bG],useFactory:(at,Mt,it)=>(0,m.aj)([it,Mt]).pipe((0,ot.q)(1),(0,N.U)(([mt,Ot])=>new mt({element:at,extensions:Ot})),(0,G.d)({bufferSize:1,refCount:!0}))},l.$3,tt.Y]},9872:(Yt,Tt,c)=>{c.d(Tt,{d:()=>y});var C=c(50259),l=c(74788);let y=(()=>{class A extends C.AbstractTuiPortalHostComponent{}return A.\u0275fac=function(){let m;return function(N){return(m||(m=l.n5z(A)))(N||A)}}(),A.\u0275cmp=l.Xpm({type:A,selectors:[["tui-editor-portal-host"]],features:[l._Bn([{provide:C.AbstractTuiPortalService,useExisting:C.TuiDropdownPortalService},{provide:C.AbstractTuiPortalHostComponent,useExisting:A}]),l.qOj],decls:2,vars:0,consts:[["viewContainer",""]],template:function(ot,N){1&ot&&l.GkF(0,null,0)},styles:["[_nghost-%COMP%]{position:relative;z-index:1;display:block;height:100%}"],changeDetection:0}),A})()},1433:(Yt,Tt,c)=>{c.d(Tt,{A:()=>m});var C=c(74788),l=c(50259),y=c(3497),A=c(73825);let m=(()=>{class ot extends y.TuiRectAccessor{constructor(G){super(),this.elementRef=G,this.type="viewport"}getClientRect(){return this.elementRef.nativeElement.getBoundingClientRect()}}return ot.\u0275fac=function(G){return new(G||ot)(C.Y36(C.SBq))},ot.\u0275dir=C.lG2({type:ot,selectors:[["","tuiEditorPortal",""]],features:[C._Bn([{provide:l.TuiDropdownPortalService,useExisting:A.Y},(0,y.tuiAsViewport)(ot)]),C.qOj]}),ot})()},73825:(Yt,Tt,c)=>{c.d(Tt,{Y:()=>y});var C=c(50259),l=c(74788);let y=(()=>{class A extends C.AbstractTuiPortalService{}return A.\u0275fac=function(){let m;return function(N){return(m||(m=l.n5z(A)))(N||A)}}(),A.\u0275prov=l.Yz7({token:A,factory:A.\u0275fac}),A})()},19769:(Yt,Tt,c)=>{c.d(Tt,{j:()=>St});var C=c(64762),l=c(74788),y=c(24751),A=c(91211),m=c(27863),ot=c(50259),N=c(3497),G=c(62939),tt=c(63060),ft=c(62733),at=c(3729),Mt=c(23999),it=c(17163);function mt(Dt,pt){if(1&Dt&&l._UZ(0,"div",4),2&Dt){const q=l.oxw();l.Udp("background",q.background)}}function Ot(Dt,pt){if(1&Dt){const q=l.EpF();l.TgZ(0,"tui-color-selector",5),l.NdJ("colorChange",function(ut){return l.CHM(q),l.oxw().value=ut}),l.qZA()}if(2&Dt){const q=pt.$implicit,F=l.oxw();l.Q6J("tuiActiveZoneParent",q)("colors",F.colors)("color",F.value)}}class St extends ot.AbstractTuiControl{constructor(pt,q,F){super(pt,q),this.domSanitizer=F,this.colors=new Map,this.open=!1}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return!!this.dropdown&&this.dropdown.focused}get background(){return this.sanitize(this.value,this.domSanitizer)}onClick(){this.open=!this.open}onValueChange(pt){this.value=pt}onFocused(pt){this.updateFocused(pt)}getFallbackValue(){return"#000000"}sanitize(pt,q){return pt.startsWith("linear-gradient(")?q.bypassSecurityTrustStyle((0,m.CH)((0,m._N)((0,m.U5)(pt)))):pt}}St.\u0275fac=function(pt){return new(pt||St)(l.Y36(y.a5,10),l.Y36(l.sBO),l.Y36(A.H7))},St.\u0275cmp=l.Xpm({type:St,selectors:[["tui-input-color"]],viewQuery:function(pt,q){if(1&pt&&(l.Gf(N.TuiPrimitiveTextfieldComponent,5),l.Gf(N.TuiHostedDropdownComponent,5)),2&pt){let F;l.iGM(F=l.CRH())&&(q.textfield=F.first),l.iGM(F=l.CRH())&&(q.dropdown=F.first)}},hostBindings:function(pt,q){1&pt&&l.NdJ("click",function(){return q.onClick()})},inputs:{colors:"colors"},features:[l._Bn([],[(0,N.tuiDropdownOptionsProvider)({maxHeight:600})]),l.qOj],ngContentSelectors:["*"],decls:7,vars:12,consts:[[1,"t-wrapper",3,"content","open","openChange"],[1,"t-textfield",3,"tuiTextfieldIconLeft","pseudoFocus","pseudoHover","pseudoActive","invalid","focusable","nativeId","disabled","readOnly","value","valueChange","focusedChange"],["color",""],["picker",""],[1,"t-color"],[3,"tuiActiveZoneParent","colors","color","colorChange"]],template:function(pt,q){if(1&pt&&(l.F$t(),l.TgZ(0,"tui-hosted-dropdown",0),l.NdJ("openChange",function(ut){return q.open=ut}),l.TgZ(1,"tui-primitive-textfield",1),l.NdJ("valueChange",function(ut){return q.value=ut})("focusedChange",function(ut){return q.onFocused(ut)}),l.Hsn(2),l.qZA(),l.qZA(),l.YNc(3,mt,1,2,"ng-template",null,2,l.W1O),l.YNc(5,Ot,1,3,"ng-template",null,3,l.W1O)),2&pt){const F=l.MAs(4),ut=l.MAs(6);l.Q6J("content",ut)("open",q.open),l.xp6(1),l.Q6J("tuiTextfieldIconLeft",F)("pseudoFocus",q.computedFocused)("pseudoHover",q.pseudoHover)("pseudoActive",q.pseudoActive)("invalid",q.computedInvalid)("focusable",q.focusable)("nativeId",q.nativeId)("disabled",q.disabled)("readOnly",q.readOnly)("value",q.value)}},directives:[G.o,tt.y,ft.B,at.aR,Mt.s,it.e],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-wrapper[_ngcontent-%COMP%]{display:flex;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-color[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-03-dark);border-radius:.125rem}"],changeDetection:0}),(0,C.gn)([(0,ot.tuiDefaultProp)()],St.prototype,"colors",void 0),(0,C.gn)([ot.tuiPure],St.prototype,"sanitize",null)},37924:(Yt,Tt,c)=>{c.d(Tt,{X:()=>Dt});var C=c(84614),l=c(14309),y=c(9112),A=c(88002),m=c(74788),ot=c(12057),N=c(40939),G=c(62939),tt=c(76189),ft=c(219),at=c(67446),Mt=c(29070),it=c(54255),mt=c(15491);function Ot(pt,q){if(1&pt){const F=m.EpF();m.TgZ(0,"div",6),m.TgZ(1,"button",7),m.NdJ("click",function(){return m.CHM(F),m.oxw(3).editor.onAlign("left")}),m.qZA(),m.TgZ(2,"button",8),m.NdJ("click",function(){return m.CHM(F),m.oxw(3).editor.onAlign("center")}),m.qZA(),m.TgZ(3,"button",9),m.NdJ("click",function(){return m.CHM(F),m.oxw(3).editor.onAlign("right")}),m.qZA(),m.TgZ(4,"button",10),m.NdJ("click",function(){return m.CHM(F),m.oxw(3).editor.onAlign("justify")}),m.qZA(),m.qZA()}if(2&pt){const F=m.oxw().tuiLet,ut=m.oxw().ngIf;m.xp6(1),m.Q6J("pseudoActive",!(null==F||!F.left))("tuiHint",ut.justifyLeft),m.xp6(1),m.Q6J("pseudoActive",!(null==F||!F.center))("tuiHint",ut.justifyCenter),m.xp6(1),m.Q6J("pseudoActive",!(null==F||!F.right))("tuiHint",ut.justifyRight),m.xp6(1),m.Q6J("pseudoActive",!(null==F||!F.justify))("tuiHint",ut.justifyFull)}}function kt(pt,q){if(1&pt&&(m.TgZ(0,"tui-hosted-dropdown",2,3),m._UZ(2,"button",4),m.YNc(3,Ot,5,8,"ng-template",null,5,m.W1O),m.qZA()),2&pt){const F=m.MAs(1),ut=m.MAs(4),j=m.oxw().ngIf;m.Q6J("content",ut),m.xp6(2),m.Q6J("tuiHint",j.justify)("pseudoActive",F.open)("focusable",F.open)}}function St(pt,q){if(1&pt&&(m.ynx(0),m.YNc(1,kt,5,4,"tui-hosted-dropdown",1),m.ALo(2,"async"),m.BQk()),2&pt){const F=m.oxw();m.xp6(1),m.Q6J("tuiLet",m.lcZ(2,1,F.alignState$))}}let Dt=(()=>{class pt{constructor(F,ut){this.editor=F,this.texts$=ut,this.alignState$=(0,y.aj)([this.editor.isActive$({textAlign:"left"}),this.editor.isActive$({textAlign:"right"}),this.editor.isActive$({textAlign:"center"}),this.editor.isActive$({textAlign:"justify"})]).pipe((0,A.U)(([j,At,Bt,Pt])=>({left:j,right:At,center:Bt,justify:Pt})))}}return pt.\u0275fac=function(F){return new(F||pt)(m.Y36(C.$3),m.Y36(l.rf))},pt.\u0275cmp=m.Xpm({type:pt,selectors:[["tui-align-content"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["align",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["alignDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignCenterLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignRightLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignJustifyLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"]],template:function(F,ut){1&F&&(m.YNc(0,St,3,3,"ng-container",0),m.ALo(1,"async")),2&F&&m.Q6J("ngIf",m.lcZ(1,1,ut.texts$))},directives:[ot.O5,N.L,G.o,tt.v,ft.$,at.D,Mt.x,it.t,mt.D],pipes:[ot.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),pt})()},15587:(Yt,Tt,c)=>{c.d(Tt,{T:()=>Dt});var C=c(84614),l=c(14309),y=c(88002),A=c(87519),m=c(74788),ot=c(62939),N=c(76189),G=c(219),tt=c(67446),ft=c(29070),at=c(54255),Mt=c(15491),it=c(20933),mt=c(12057),Ot=c(35065);function kt(pt,q){if(1&pt){const F=m.EpF();m.TgZ(0,"button",5),m.NdJ("click",function(){const At=m.CHM(F).index;return m.oxw(2).onCode(!!At)}),m._uU(1),m.qZA()}if(2&pt){const F=q.$implicit;m.xp6(1),m.hij(" ",F," ")}}function St(pt,q){if(1&pt&&(m.TgZ(0,"tui-data-list"),m.YNc(1,kt,2,1,"button",4),m.ALo(2,"async"),m.qZA()),2&pt){const F=m.oxw();m.xp6(1),m.Q6J("ngForOf",m.lcZ(2,1,F.codeOptionsTexts$))}}let Dt=(()=>{class pt{constructor(F,ut,j){this.editor=F,this.texts$=ut,this.codeOptionsTexts$=j,this.hintText$=this.texts$.pipe((0,y.U)(At=>At.code)),this.insideCode$=this.editor.stateChange$.pipe((0,y.U)(()=>this.editor.isActive("code")||this.editor.isActive("codeBlock")),(0,A.x)())}onCode(F){F?this.editor.toggleCodeBlock():this.editor.toggleCode()}}return pt.\u0275fac=function(F){return new(F||pt)(m.Y36(C.$3),m.Y36(l.rf),m.Y36(l.Mr))},pt.\u0275cmp=m.Xpm({type:pt,selectors:[["tui-code"]],decls:7,vars:8,consts:[[3,"content"],["codes",""],["tuiIconButton","","type","button","size","s","icon","tuiIconCodeLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["codesDropdown",""],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(F,ut){if(1&F&&(m.TgZ(0,"tui-hosted-dropdown",0,1),m._UZ(2,"button",2),m.ALo(3,"async"),m.ALo(4,"async"),m.YNc(5,St,3,3,"ng-template",null,3,m.W1O),m.qZA()),2&F){const j=m.MAs(1),At=m.MAs(6);m.Q6J("content",At),m.xp6(2),m.Q6J("tuiHint",m.lcZ(3,4,ut.hintText$))("pseudoActive",j.open||m.lcZ(4,6,ut.insideCode$))("focusable",j.open)}},directives:[ot.o,N.v,G.$,tt.D,ft.x,at.t,Mt.D,it.q,mt.sg,Ot.v],pipes:[mt.Ov],encapsulation:2,changeDetection:0}),pt})()},18832:(Yt,Tt,c)=>{c.d(Tt,{U:()=>mt});var C=c(84614),l=c(14309),y=c(88002),A=c(87519),m=c(74788),ot=c(12057),N=c(76189),G=c(219),tt=c(67446),ft=c(29070),at=c(54255),Mt=c(15491);function it(Ot,kt){if(1&Ot){const St=m.EpF();m.TgZ(0,"button",1),m.NdJ("click",function(){return m.CHM(St),m.oxw().removeDetails()}),m.ALo(1,"async"),m.qZA()}if(2&Ot){const St=kt.ngIf,Dt=m.oxw();m.Q6J("tuiHint",St.removeDetails)("focusable",!1)("disabled",!!m.lcZ(1,3,Dt.disabled$))}}let mt=(()=>{class Ot{constructor(St,Dt){this.editor=St,this.texts$=Dt,this.disabled$=this.editor.stateChange$.pipe((0,y.U)(()=>!this.editor.isActive("details")),(0,A.x)())}removeDetails(){this.editor.removeDetails()}}return Ot.\u0275fac=function(St){return new(St||Ot)(m.Y36(C.$3),m.Y36(l.rf))},Ot.\u0275cmp=m.Xpm({type:Ot,selectors:[["tui-details-remove"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled","click"]],template:function(St,Dt){1&St&&(m.YNc(0,it,2,5,"button",0),m.ALo(1,"async")),2&St&&m.Q6J("ngIf",m.lcZ(1,1,Dt.texts$))},directives:[ot.O5,N.v,G.$,tt.D,ft.x,at.t,Mt.D],pipes:[ot.Ov],encapsulation:2,changeDetection:0}),Ot})()},50237:(Yt,Tt,c)=>{c.d(Tt,{y:()=>Mt});var C=c(84614),l=c(14309),y=c(74788),A=c(12057),m=c(76189),ot=c(219),N=c(67446),G=c(29070),tt=c(54255),ft=c(15491);function at(it,mt){if(1&it){const Ot=y.EpF();y.TgZ(0,"button",1),y.NdJ("click",function(){return y.CHM(Ot),y.oxw().setDetails()}),y.qZA()}2&it&&y.Q6J("tuiHint",mt.ngIf.setDetails)("focusable",!1)}let Mt=(()=>{class it{constructor(Ot,kt){this.editor=Ot,this.texts$=kt}setDetails(){this.editor.setDetails()}}return it.\u0275fac=function(Ot){return new(Ot||it)(y.Y36(C.$3),y.Y36(l.rf))},it.\u0275cmp=y.Xpm({type:it,selectors:[["tui-details"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","click"]],template:function(Ot,kt){1&Ot&&(y.YNc(0,at,1,2,"button",0),y.ALo(1,"async")),2&Ot&&y.Q6J("ngIf",y.lcZ(1,1,kt.texts$))},directives:[A.O5,m.v,ot.$,N.D,G.x,tt.t,ft.D],pipes:[A.Ov],encapsulation:2,changeDetection:0}),it})()},84985:(Yt,Tt,c)=>{c.d(Tt,{m:()=>pt});var C=c(84614),l=c(14309),y=c(50259),A=c(88002),m=c(74788),ot=c(62939),N=c(76189),G=c(219),tt=c(67446),ft=c(29070),at=c(54255),Mt=c(15491),it=c(20933),mt=c(12057),Ot=c(35065);const kt=function(){return{}};function St(q,F){if(1&q){const ut=m.EpF();m.TgZ(0,"button",5),m.NdJ("click",function(){const Bt=m.CHM(ut).$implicit;return m.oxw(2).setFontOption(Bt)}),m.ALo(1,"lowercase"),m._uU(2),m.qZA()}if(2&q){const ut=F.$implicit;m.Udp("font-family",ut.family)("font-size",ut.px,"px")("font-weight",ut.weight),m.Q6J("ngClass",(null==ut?null:ut.ngClass)||m.DdM(11,kt)),m.uIk("automation-id","tui_font__"+m.lcZ(1,9,ut.name||"")),m.xp6(2),m.hij(" ",ut.name," ")}}function Dt(q,F){if(1&q&&(m.TgZ(0,"tui-data-list"),m.YNc(1,St,3,12,"button",4),m.ALo(2,"async"),m.qZA()),2&q){const ut=m.oxw();m.xp6(1),m.Q6J("ngForOf",m.lcZ(2,1,ut.fontsOptions$))}}let pt=(()=>{class q{constructor(ut,j,At,Bt){this.options=ut,this.editor=j,this.texts$=At,this.fontOptionsTexts$=Bt,this.fontsOptions$=this.fontOptionsTexts$.pipe((0,A.U)(Pt=>this.options.fontOptions(Pt))),this.fontText$=this.texts$.pipe((0,A.U)(Pt=>Pt.font))}onClick({headingLevel:ut,px:j}){this.setFontOption({headingLevel:ut,px:j})}setFontOption({headingLevel:ut,px:j}){this.clearPreviousTextStyles(),ut?this.editor.setHeading(ut):this.editor.setParagraph({fontSize:(0,y.tuiPx)(j||0)})}clearPreviousTextStyles(){this.editor.removeEmptyTextStyle(),this.editor.toggleMark("textStyle")}}return q.\u0275fac=function(ut){return new(ut||q)(m.Y36(l.mJ),m.Y36(C.$3),m.Y36(l.rf),m.Y36(l.UN))},q.\u0275cmp=m.Xpm({type:q,selectors:[["tui-font-size"]],decls:6,vars:6,consts:[[3,"content"],["fonts",""],["tuiIconButton","","type","button","size","s","appearance","icon","icon","tuiIconFontLarge","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["fontsDropdown",""],["tuiOption","",3,"fontFamily","fontSize","fontWeight","ngClass","click",4,"ngFor","ngForOf"],["tuiOption","",3,"ngClass","click"]],template:function(ut,j){if(1&ut&&(m.TgZ(0,"tui-hosted-dropdown",0,1),m._UZ(2,"button",2),m.ALo(3,"async"),m.YNc(4,Dt,3,3,"ng-template",null,3,m.W1O),m.qZA()),2&ut){const At=m.MAs(1),Bt=m.MAs(5);m.Q6J("content",Bt),m.xp6(2),m.Q6J("tuiHint",m.lcZ(3,4,j.fontText$))("pseudoActive",At.open)("focusable",At.open)}},directives:[ot.o,N.v,G.$,tt.D,ft.x,at.t,Mt.D,it.q,mt.sg,Ot.v,mt.mk],pipes:[mt.Ov,mt.i8],encapsulation:2,changeDetection:0}),q})()},62976:(Yt,Tt,c)=>{c.d(Tt,{h:()=>j});var C=c(64352),l=c(84614),y=c(48699),A=c(14309),m=c(9112),ot=c(88002),N=c(74788),G=c(12057),tt=c(62939),ft=c(76189),at=c(219),Mt=c(67446),it=c(29070),mt=c(54255),Ot=c(15491);function kt(At,Bt){if(1&At){const Pt=N.EpF();N.TgZ(0,"button",11),N.NdJ("click",function(){return N.CHM(Pt),N.oxw(4).editor.toggleBold()}),N.qZA()}if(2&At){const Pt=N.oxw(2).ngIf,It=N.oxw().ngIf;N.Q6J("tuiHint",It.bold)("pseudoActive",Pt.bold)}}function St(At,Bt){if(1&At){const Pt=N.EpF();N.TgZ(0,"button",12),N.NdJ("click",function(){return N.CHM(Pt),N.oxw(4).editor.toggleItalic()}),N.qZA()}if(2&At){const Pt=N.oxw(2).ngIf,It=N.oxw().ngIf;N.Q6J("tuiHint",It.italic)("pseudoActive",Pt.italic)}}function Dt(At,Bt){if(1&At){const Pt=N.EpF();N.TgZ(0,"button",13),N.NdJ("click",function(){return N.CHM(Pt),N.oxw(4).editor.toggleUnderline()}),N.qZA()}if(2&At){const Pt=N.oxw(2).ngIf,It=N.oxw().ngIf;N.Q6J("tuiHint",It.underline)("pseudoActive",Pt.underline)}}function pt(At,Bt){if(1&At){const Pt=N.EpF();N.TgZ(0,"button",14),N.NdJ("click",function(){return N.CHM(Pt),N.oxw(4).editor.toggleStrike()}),N.qZA()}if(2&At){const Pt=N.oxw(2).ngIf,It=N.oxw().ngIf;N.Q6J("tuiHint",It.strikeThrough)("pseudoActive",Pt.strike)}}function q(At,Bt){if(1&At&&(N.TgZ(0,"div",6),N.YNc(1,kt,1,2,"button",7),N.YNc(2,St,1,2,"button",8),N.YNc(3,Dt,1,2,"button",9),N.YNc(4,pt,1,2,"button",10),N.qZA()),2&At){const Pt=N.oxw(3);N.xp6(1),N.Q6J("ngIf",Pt.isEnabled(Pt.TuiEditorTool.Bold)),N.xp6(1),N.Q6J("ngIf",Pt.isEnabled(Pt.TuiEditorTool.Italic)),N.xp6(1),N.Q6J("ngIf",Pt.isEnabled(Pt.TuiEditorTool.Underline)),N.xp6(1),N.Q6J("ngIf",Pt.isEnabled(Pt.TuiEditorTool.Strikethrough))}}function F(At,Bt){if(1&At&&(N.TgZ(0,"tui-hosted-dropdown",2,3),N._UZ(2,"button",4),N.YNc(3,q,5,4,"ng-template",null,5,N.W1O),N.qZA()),2&At){const Pt=Bt.ngIf,It=N.MAs(1),_t=N.MAs(4),Rt=N.oxw().ngIf;N.Q6J("content",_t),N.xp6(2),N.Q6J("tuiHint",Rt.fontStyle)("pseudoActive",It.open||Pt.bold||Pt.italic||Pt.underline||Pt.strike)("focusable",It.open)}}function ut(At,Bt){if(1&At&&(N.ynx(0),N.YNc(1,F,5,4,"tui-hosted-dropdown",1),N.ALo(2,"async"),N.BQk()),2&At){const Pt=N.oxw();N.xp6(1),N.Q6J("ngIf",N.lcZ(2,1,Pt.fontStyleState$))}}let j=(()=>{class At{constructor(Pt,It){this.editor=Pt,this.texts$=It,this.toolsSet=new Set(C.Db),this.TuiEditorTool=y._,this.fontStyleState$=(0,m.aj)([this.editor.isActive$("bold"),this.editor.isActive$("italic"),this.editor.isActive$("underline"),this.editor.isActive$("strike")]).pipe((0,ot.U)(([_t,Rt,wt,z])=>({bold:_t,italic:Rt,underline:wt,strike:z})))}set enabledTools(Pt){this.toolsSet=new Set(Pt)}isEnabled(Pt){return this.toolsSet.has(Pt)}}return At.\u0275fac=function(Pt){return new(Pt||At)(N.Y36(l.$3),N.Y36(A.rf))},At.\u0275cmp=N.Xpm({type:At,selectors:[["tui-font-style"]],inputs:{enabledTools:"enabledTools"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"ngIf"],[3,"content"],["format",""],["tuiIconButton","","type","button","size","s","icon","tuiIconFormatLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__font-style-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["formatDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"]],template:function(Pt,It){1&Pt&&(N.YNc(0,ut,3,3,"ng-container",0),N.ALo(1,"async")),2&Pt&&N.Q6J("ngIf",N.lcZ(1,1,It.texts$))},directives:[G.O5,tt.o,ft.v,at.$,Mt.D,it.x,mt.t,Ot.D],pipes:[G.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),At})()},19762:(Yt,Tt,c)=>{c.d(Tt,{d:()=>it});var C=c(84614),l=c(14309),y=c(88002),A=c(87519),m=c(74788),ot=c(76189),N=c(219),G=c(67446),tt=c(29070),ft=c(54255),at=c(15491),Mt=c(12057);let it=(()=>{class mt{constructor(kt,St){this.editor=kt,this.texts$=St,this.insertGroupText$=this.texts$.pipe((0,y.U)(Dt=>Dt.insertGroup)),this.removeGroupText$=this.texts$.pipe((0,y.U)(Dt=>Dt.removeGroup)),this.disabled$=this.editor.stateChange$.pipe((0,y.U)(()=>!this.editor.isActive("group")),(0,A.x)())}addGroup(){this.editor.setGroup()}removeGroup(){this.editor.removeGroup()}}return mt.\u0275fac=function(kt){return new(kt||mt)(m.Y36(C.$3),m.Y36(l.rf))},mt.\u0275cmp=m.Xpm({type:mt,selectors:[["tui-editor-group-tool"]],decls:5,vars:11,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconPlusLarge","appearance","icon","tuiHintDescribe","",3,"focusable","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconCloseLarge","appearance","icon","tuiHintDescribe","",3,"focusable","disabled","tuiHint","click"]],template:function(kt,St){1&kt&&(m.TgZ(0,"button",0),m.NdJ("click",function(){return St.addGroup()}),m.ALo(1,"async"),m.qZA(),m.TgZ(2,"button",1),m.NdJ("click",function(){return St.removeGroup()}),m.ALo(3,"async"),m.ALo(4,"async"),m.qZA()),2&kt&&(m.Q6J("focusable",!1)("tuiHint",m.lcZ(1,5,St.insertGroupText$)),m.xp6(2),m.Q6J("focusable",!1)("disabled",!!m.lcZ(3,7,St.disabled$))("tuiHint",m.lcZ(4,9,St.removeGroupText$)))},directives:[ot.v,N.$,G.D,tt.x,ft.t,at.D],pipes:[Mt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),mt})()},7416:(Yt,Tt,c)=>{c.d(Tt,{U:()=>j});var C=c(64762),l=c(84614),y=c(14309),A=c(50259),m=c(88002),ot=c(87519),N=c(74788),G=c(40939),tt=c(62939),ft=c(33250),at=c(76189),Mt=c(219),it=c(67446),mt=c(29070),Ot=c(54255),kt=c(15491),St=c(12057),Dt=c(5451),pt=c(17163);function q(At,Bt){if(1&At&&N._UZ(0,"div",6),2&At){const Pt=N.oxw().tuiLet;N.Udp("background",Pt)}}function F(At,Bt){if(1&At){const Pt=N.EpF();N.TgZ(0,"tui-palette",7),N.NdJ("selectedColor",function(_t){return N.CHM(Pt),N.oxw(2).editor.setBackgroundColor(_t)}),N.qZA()}if(2&At){const Pt=Bt.$implicit,It=N.oxw(2);N.Q6J("tuiActiveZoneParent",Pt)("colors",It.colors)}}function ut(At,Bt){if(1&At&&(N.TgZ(0,"tui-hosted-dropdown",1,2),N._UZ(2,"button",3),N.ALo(3,"async"),N.YNc(4,q,1,2,"div",4),N.YNc(5,F,1,2,"ng-template",null,5,N.W1O),N.qZA()),2&At){const Pt=Bt.tuiLet,It=N.MAs(1),_t=N.MAs(6),Rt=N.oxw();N.Q6J("content",_t)("tuiDropdownMaxHeight",999),N.xp6(2),N.Q6J("tuiHint",N.lcZ(3,6,Rt.backColorText$))("pseudoActive",It.open)("focusable",It.open),N.xp6(2),N.Q6J("ngIf",!Rt.isBlankColor(Pt||""))}}class j{constructor(Bt,Pt,It){this.editor=Bt,this.texts$=Pt,this.defaultOptions=It,this.colors=this.defaultOptions.colors,this.backgroundColor$=this.editor.stateChange$.pipe((0,m.U)(()=>this.editor.getBackgroundColor()||this.defaultOptions.blankColor),(0,ot.x)()),this.backColorText$=this.texts$.pipe((0,m.U)(_t=>_t.backColor))}isBlankColor(Bt){return Bt===this.defaultOptions.blankColor}}j.\u0275fac=function(Bt){return new(Bt||j)(N.Y36(l.$3),N.Y36(y.rf),N.Y36(y.mJ))},j.\u0275cmp=N.Xpm({type:j,selectors:[["tui-highlight-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["hilite",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconHiliteLarge","automation-id","toolbar__hilite-button","tuiHintDescribe","",1,"t-tool",3,"tuiHint","pseudoActive","focusable"],["class","t-plate",3,"background",4,"ngIf"],["hiliteDropdown",""],[1,"t-plate"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(Bt,Pt){1&Bt&&(N.YNc(0,ut,7,8,"tui-hosted-dropdown",0),N.ALo(1,"async")),2&Bt&&N.Q6J("tuiLet",N.lcZ(1,1,Pt.backgroundColor$))},directives:[G.L,tt.o,ft.Ek,at.v,Mt.$,it.D,mt.x,Ot.t,kt.D,St.O5,Dt.R,pt.e],pipes:[St.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,C.gn)([(0,A.tuiDefaultProp)()],j.prototype,"colors",void 0)},93252:(Yt,Tt,c)=>{c.d(Tt,{Xp:()=>C.X,pu:()=>ot,Tf:()=>N.T,P_:()=>G,yj:()=>tt.y,y9:()=>ft,Un:()=>at.U,dN:()=>kt.d,jP:()=>St,mK:()=>Mt.m,p7:()=>it,hr:()=>mt.h,Zv:()=>Ot,UT:()=>Dt.U,XC:()=>q,w2:()=>F.w,Ur:()=>ut,pH:()=>j.p,mp:()=>At,iN:()=>z.i,lT:()=>Bt.l,iA:()=>_t,YH:()=>Rt.Y,er:()=>wt,_I:()=>z._,__:()=>rt,M8:()=>Pt.M,kU:()=>It,G0:()=>dt.G,_t:()=>ct});var C=c(37924),l=c(12057),y=c(50259),A=c(3497),m=c(74788);let ot=(()=>{class ${}return $.\u0275fac=function(et){return new(et||$)},$.\u0275mod=m.oAB({type:$}),$.\u0275inj=m.cJS({imports:[[l.ez,A.TuiHostedDropdownModule,A.TuiButtonModule,A.TuiHintModule,y.TuiLetModule]]}),$})();var N=c(15587);let G=(()=>{class ${}return $.\u0275fac=function(et){return new(et||$)},$.\u0275mod=m.oAB({type:$}),$.\u0275inj=m.cJS({imports:[[l.ez,A.TuiHostedDropdownModule,A.TuiButtonModule,A.TuiHintModule,A.TuiDataListModule]]}),$})();var tt=c(50237);let ft=(()=>{class ${}return $.\u0275fac=function(et){return new(et||$)},$.\u0275mod=m.oAB({type:$}),$.\u0275inj=m.cJS({imports:[[l.ez,A.TuiButtonModule,A.TuiHintModule]]}),$})();var at=c(18832),Mt=c(84985);let it=(()=>{class ${}return $.\u0275fac=function(et){return new(et||$)},$.\u0275mod=m.oAB({type:$}),$.\u0275inj=m.cJS({imports:[[l.ez,A.TuiHostedDropdownModule,A.TuiButtonModule,A.TuiHintModule,A.TuiDataListModule]]}),$})();var mt=c(62976);let Ot=(()=>{class ${}return $.\u0275fac=function(et){return new(et||$)},$.\u0275mod=m.oAB({type:$}),$.\u0275inj=m.cJS({imports:[[l.ez,A.TuiHostedDropdownModule,A.TuiButtonModule,A.TuiHintModule]]}),$})();var kt=c(19762);let St=(()=>{class ${}return $.\u0275fac=function(et){return new(et||$)},$.\u0275mod=m.oAB({type:$}),$.\u0275inj=m.cJS({imports:[[l.ez,A.TuiButtonModule,A.TuiHintModule]]}),$})();var Dt=c(7416),pt=c(27050);let q=(()=>{class ${}return $.\u0275fac=function(et){return new(et||$)},$.\u0275mod=m.oAB({type:$}),$.\u0275inj=m.cJS({imports:[[l.ez,A.TuiHostedDropdownModule,A.TuiButtonModule,pt.VM,A.TuiHintModule,A.TuiDropdownModule,y.TuiActiveZoneModule,y.TuiLetModule]]}),$})();var F=c(13441);let ut=(()=>{class ${}return $.\u0275fac=function(et){return new(et||$)},$.\u0275mod=m.oAB({type:$}),$.\u0275inj=m.cJS({imports:[[l.ez,A.TuiHostedDropdownModule,A.TuiButtonModule,A.TuiHintModule,y.TuiLetModule]]}),$})();var j=c(95558);let At=(()=>{class ${}return $.\u0275fac=function(et){return new(et||$)},$.\u0275mod=m.oAB({type:$}),$.\u0275inj=m.cJS({imports:[[l.ez,A.TuiHostedDropdownModule,pt.VM,A.TuiButtonModule,A.TuiHintModule,y.TuiActiveZoneModule,A.TuiDropdownModule,y.TuiLetModule]]}),$})();var Bt=c(28962),Pt=c(74549);let It=(()=>{class ${}return $.\u0275fac=function(et){return new(et||$)},$.\u0275mod=m.oAB({type:$}),$.\u0275inj=m.cJS({imports:[[l.ez,y.TuiRepeatTimesModule]]}),$})(),_t=(()=>{class ${}return $.\u0275fac=function(et){return new(et||$)},$.\u0275mod=m.oAB({type:$}),$.\u0275inj=m.cJS({imports:[[l.ez,A.TuiHostedDropdownModule,A.TuiDropdownModule,A.TuiButtonModule,A.TuiHintModule,It]]}),$})();var Rt=c(76965);let wt=(()=>{class ${}return $.\u0275fac=function(et){return new(et||$)},$.\u0275mod=m.oAB({type:$}),$.\u0275inj=m.cJS({imports:[[l.ez,A.TuiButtonModule,A.TuiHintModule,y.TuiLetModule]]}),$})();var z=c(22063);let rt=(()=>{class ${}return $.\u0275fac=function(et){return new(et||$)},$.\u0275mod=m.oAB({type:$}),$.\u0275inj=m.cJS({imports:[[l.ez,A.TuiHostedDropdownModule,A.TuiHintModule,A.TuiButtonModule,A.TuiDataListModule,y.TuiLetModule]]}),$})();var dt=c(10528);let ct=(()=>{class ${}return $.\u0275fac=function(et){return new(et||$)},$.\u0275mod=m.oAB({type:$}),$.\u0275inj=m.cJS({imports:[[l.ez,A.TuiButtonModule,A.TuiHostedDropdownModule,A.TuiDropdownModule,A.TuiHintModule,pt.VM,y.TuiActiveZoneModule,y.TuiLetModule]]}),$})()},13441:(Yt,Tt,c)=>{c.d(Tt,{w:()=>Dt});var C=c(84614),l=c(14309),y=c(9112),A=c(88002),m=c(74788),ot=c(12057),N=c(40939),G=c(62939),tt=c(76189),ft=c(219),at=c(67446),Mt=c(29070),it=c(54255),mt=c(15491);function Ot(pt,q){if(1&pt){const F=m.EpF();m.TgZ(0,"div",6),m.TgZ(1,"button",7),m.NdJ("click",function(){return m.CHM(F),m.oxw(3).editor.toggleUnorderedList()}),m.qZA(),m.TgZ(2,"button",8),m.NdJ("click",function(){return m.CHM(F),m.oxw(3).editor.toggleOrderedList()}),m.qZA(),m.TgZ(3,"button",9),m.NdJ("click",function(){return m.CHM(F),m.oxw(3).sinkListItem()}),m.qZA(),m.TgZ(4,"button",10),m.NdJ("click",function(){return m.CHM(F),m.oxw(3).liftListItem()}),m.qZA(),m.qZA()}if(2&pt){const F=m.oxw().tuiLet,ut=m.oxw().ngIf;m.xp6(1),m.Q6J("tuiHint",ut.unorderedList)("pseudoActive",!(null==F||!F.unordered)),m.xp6(1),m.Q6J("tuiHint",ut.orderedList)("pseudoActive",!(null==F||!F.ordered)),m.xp6(1),m.Q6J("tuiHint",ut.indent)("disabled",!(null!=F&&F.ordered||null!=F&&F.unordered)),m.xp6(1),m.Q6J("tuiHint",ut.outdent)("disabled",!(null!=F&&F.ordered||null!=F&&F.unordered))}}function kt(pt,q){if(1&pt&&(m.TgZ(0,"tui-hosted-dropdown",2,3),m._UZ(2,"button",4),m.YNc(3,Ot,5,8,"ng-template",null,5,m.W1O),m.qZA()),2&pt){const F=q.tuiLet,ut=m.MAs(1),j=m.MAs(4),At=m.oxw().ngIf;m.Q6J("content",j),m.xp6(2),m.Q6J("tuiHint",At.list)("pseudoActive",(null==ut?null:ut.open)||(null==F?null:F.unordered)||(null==F?null:F.ordered)||!1)("focusable",ut.open)}}function St(pt,q){if(1&pt&&(m.ynx(0),m.YNc(1,kt,5,4,"tui-hosted-dropdown",1),m.ALo(2,"async"),m.BQk()),2&pt){const F=m.oxw();m.xp6(1),m.Q6J("tuiLet",m.lcZ(2,1,F.listState$))}}let Dt=(()=>{class pt{constructor(F,ut){this.editor=F,this.texts$=ut,this.listState$=(0,y.aj)([this.editor.isActive$("orderedList"),this.editor.isActive$("bulletList")]).pipe((0,A.U)(([j,At])=>({ordered:j,unordered:At})))}sinkListItem(){this.editor.sinkListItem()}liftListItem(){this.editor.liftListItem()}}return pt.\u0275fac=function(F){return new(F||pt)(m.Y36(C.$3),m.Y36(l.rf))},pt.\u0275cmp=m.Xpm({type:pt,selectors:[["tui-list-configs"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["list",""],["tuiIconButton","","type","button","size","s","icon","tuiIconListLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__ordering-list-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["listDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconListLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOLLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconIndentLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","disabled","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOutdentLarge","appearance","icon",1,"t-option",3,"tuiHint","disabled","click"]],template:function(F,ut){1&F&&(m.YNc(0,St,3,3,"ng-container",0),m.ALo(1,"async")),2&F&&m.Q6J("ngIf",m.lcZ(1,1,ut.texts$))},directives:[ot.O5,N.L,G.o,tt.v,ft.$,at.D,Mt.x,it.t,mt.D],pipes:[ot.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),pt})()},95558:(Yt,Tt,c)=>{c.d(Tt,{p:()=>Bt});var C=c(64762),l=c(84614),y=c(14309),A=c(50259),m=c(9112),ot=c(88002),N=c(87519),G=c(74788),tt=c(40939),ft=c(62939),at=c(33250),Mt=c(76189),it=c(219),mt=c(67446),Ot=c(29070),kt=c(54255),St=c(15491),Dt=c(12057),pt=c(5451),q=c(17163);function F(Pt,It){if(1&Pt&&G._UZ(0,"div",7),2&Pt){const _t=G.oxw(2).tuiLet;G.Udp("background",_t)}}function ut(Pt,It){if(1&Pt){const _t=G.EpF();G.TgZ(0,"tui-palette",8),G.NdJ("selectedColor",function(wt){G.CHM(_t),G.oxw();const z=G.MAs(1);return G.oxw(2).setCellColor(wt),z.close()}),G.qZA()}if(2&Pt){const _t=It.$implicit,Rt=G.oxw(3);G.Q6J("tuiActiveZoneParent",_t)("colors",Rt.colors)}}function j(Pt,It){if(1&Pt&&(G.TgZ(0,"tui-hosted-dropdown",2,3),G._UZ(2,"button",4),G.ALo(3,"async"),G.YNc(4,F,1,2,"div",5),G.YNc(5,ut,1,2,"ng-template",null,6,G.W1O),G.qZA()),2&Pt){const _t=It.tuiLet,Rt=G.MAs(1),wt=G.MAs(6),z=G.oxw().tuiLet,rt=G.oxw();G.Q6J("content",wt)("tuiDropdownMaxHeight",999)("canOpen",!!_t),G.xp6(2),G.Q6J("tuiHint",G.lcZ(3,8,rt.colorText$))("pseudoActive",Rt.open)("focusable",Rt.open)("disabled",!_t),G.xp6(2),G.Q6J("ngIf",!rt.isBlankColor(z||""))}}function At(Pt,It){if(1&Pt&&(G.ynx(0),G.YNc(1,j,7,10,"tui-hosted-dropdown",1),G.ALo(2,"async"),G.BQk()),2&Pt){const _t=G.oxw();G.xp6(1),G.Q6J("tuiLet",G.lcZ(2,1,_t.isActive$))}}class Bt{constructor(It,_t,Rt){this.defaultOptions=It,this.editor=_t,this.texts$=Rt,this.colors=this.defaultOptions.colors,this.colorText$=this.texts$.pipe((0,ot.U)(wt=>this.editor.isActive("group")&&wt.hiliteGroup||this.editor.isActive("table")&&wt.cellColor||"")),this.isActive$=(0,m.aj)([this.editor.isActive$("table"),this.editor.isActive$("group")]).pipe((0,ot.U)(([wt,z])=>wt||z)),this.color$=this.editor.stateChange$.pipe((0,ot.U)(()=>this.editor.getCellColor()||this.editor.getGroupColor()||this.defaultOptions.blankColor),(0,N.x)())}isBlankColor(It){return It===this.defaultOptions.blankColor}setCellColor(It){this.editor.isActive("group")?this.editor.setGroupHilite(It):this.editor.isActive("table")&&this.editor.setCellColor(It)}}Bt.\u0275fac=function(It){return new(It||Bt)(G.Y36(y.mJ),G.Y36(l.$3),G.Y36(y.rf))},Bt.\u0275cmp=G.Xpm({type:Bt,selectors:[["tui-table-cell-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen"],["colorSelect",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconPaintLarge","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable","disabled"],["class","t-plate t-plate_paint",3,"background",4,"ngIf"],["cellColorDropdown",""],[1,"t-plate","t-plate_paint"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(It,_t){1&It&&(G.YNc(0,At,3,3,"ng-container",0),G.ALo(1,"async")),2&It&&G.Q6J("tuiLet",G.lcZ(1,1,_t.color$))},directives:[tt.L,ft.o,at.Ek,Mt.v,it.$,mt.D,Ot.x,kt.t,St.D,Dt.O5,pt.R,q.e],pipes:[Dt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,C.gn)([(0,A.tuiDefaultProp)()],Bt.prototype,"colors",void 0)},28962:(Yt,Tt,c)=>{c.d(Tt,{l:()=>kt});var C=c(84614),l=c(14309),y=c(88002),A=c(74788),m=c(62939),ot=c(33250),N=c(76189),G=c(219),tt=c(67446),ft=c(29070),at=c(54255),Mt=c(15491),it=c(74549),mt=c(12057);function Ot(St,Dt){if(1&St){const pt=A.EpF();A.TgZ(0,"tui-table-size-selector",4),A.NdJ("onSelectSize",function(F){return A.CHM(pt),A.oxw().addTable(F)}),A.qZA()}}let kt=(()=>{class St{constructor(pt,q){this.editor=pt,this.texts$=q,this.insertTableText$=this.texts$.pipe((0,y.U)(F=>F.insertTable))}addTable({rows:pt,cols:q}){this.editor.enter();const F=this.editor.state.selection.anchor;this.editor.enter(),this.editor.enter(),this.editor.setTextSelection(F),this.editor.insertTable(pt,q)}}return St.\u0275fac=function(pt){return new(pt||St)(A.Y36(C.$3),A.Y36(l.rf))},St.\u0275cmp=A.Xpm({type:St,selectors:[["tui-table-create"]],decls:6,vars:5,consts:[["tuiDropdownAlign","left","tuiDropdownDirection","bottom",3,"content"],["table",""],["tuiIconButton","","type","button","size","s","icon","tuiIconTableLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable"],["tableDropdown",""],[3,"onSelectSize"]],template:function(pt,q){if(1&pt&&(A.TgZ(0,"tui-hosted-dropdown",0,1),A._UZ(2,"button",2),A.ALo(3,"async"),A.qZA(),A.YNc(4,Ot,1,0,"ng-template",null,3,A.W1O)),2&pt){const F=A.MAs(1),ut=A.MAs(5);A.Q6J("content",ut),A.xp6(2),A.Q6J("tuiHint",A.lcZ(3,3,q.insertTableText$))("focusable",F.open)}},directives:[m.o,ot.Ek,N.v,G.$,tt.D,ft.x,at.t,Mt.D,it.M],pipes:[mt.Ov],encapsulation:2,changeDetection:0}),St})()},76965:(Yt,Tt,c)=>{c.d(Tt,{Y:()=>St});var C=c(84614),l=c(14309),y=c(88002),A=c(87519),m=c(74788),ot=c(40939),N=c(12057),G=c(76189),tt=c(219),ft=c(67446),at=c(29070),Mt=c(54255),it=c(15491);function mt(Dt,pt){if(1&Dt){const q=m.EpF();m.TgZ(0,"button",2),m.NdJ("click",function(){m.CHM(q);const ut=m.oxw().tuiLet,j=m.oxw();return ut.mergeCells?j.mergeCells():j.splitCell()}),m.qZA()}if(2&Dt){const q=pt.ngIf,F=m.oxw().tuiLet;m.Q6J("icon",F.mergeCells?"tuiIconTableMergeLarge":"tuiIconTableSplitLarge")("tuiHint",F.mergeCells?q.mergeCells:q.splitCells)("focusable",!1)("disabled",!F.mergeCells&&!F.splitCells)}}function Ot(Dt,pt){if(1&Dt&&(m.ynx(0),m.YNc(1,mt,1,4,"button",1),m.ALo(2,"async"),m.BQk()),2&Dt){const q=m.oxw();m.xp6(1),m.Q6J("ngIf",m.lcZ(2,1,q.texts$))}}const kt=function(Dt,pt){return{mergeCells:Dt,splitCells:pt}};let St=(()=>{class Dt{constructor(q,F){this.editor=q,this.texts$=F,this.canMergeCells$=this.editor.stateChange$.pipe((0,y.U)(()=>this.editor.canMergeCells()),(0,A.x)()),this.canSplitCells$=this.editor.stateChange$.pipe((0,y.U)(()=>this.editor.canSplitCells()),(0,A.x)())}mergeCells(){this.editor.mergeCells()}splitCell(){this.editor.splitCell()}}return Dt.\u0275fac=function(q){return new(q||Dt)(m.Y36(C.$3),m.Y36(l.rf))},Dt.\u0275cmp=m.Xpm({type:Dt,selectors:[["tui-table-merge-cells"]],decls:3,vars:8,consts:[[4,"tuiLet"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"icon","tuiHint","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"icon","tuiHint","focusable","disabled","click"]],template:function(q,F){1&q&&(m.YNc(0,Ot,3,3,"ng-container",0),m.ALo(1,"async"),m.ALo(2,"async")),2&q&&m.Q6J("tuiLet",m.WLB(5,kt,m.lcZ(1,1,F.canMergeCells$),m.lcZ(2,3,F.canSplitCells$)))},directives:[ot.L,N.O5,G.v,tt.$,ft.D,at.x,Mt.t,it.D],pipes:[N.Ov],encapsulation:2,changeDetection:0}),Dt})()},22063:(Yt,Tt,c)=>{c.d(Tt,{_:()=>ut,i:()=>F});var C=c(84614),l=c(14309),y=c(88002),A=c(74788),m=c(40939),ot=c(62939),N=c(76189),G=c(219),tt=c(67446),ft=c(29070),at=c(54255),Mt=c(15491),it=c(20933),mt=c(12057),Ot=c(89786),kt=c(35065);function St(j,At){if(1&j&&(A.TgZ(0,"tui-hosted-dropdown",2,3),A._UZ(2,"button",4),A.ALo(3,"async"),A.qZA()),2&j){const Bt=At.tuiLet,Pt=A.MAs(1),It=A.oxw(),_t=A.MAs(3);A.Q6J("content",_t)("canOpen",!!Bt),A.xp6(2),A.Q6J("tuiHint",A.lcZ(3,5,It.rowsColumnsManagingText$))("focusable",Pt.open)("disabled",!Bt)}}function Dt(j,At){if(1&j){const Bt=A.EpF();A.TgZ(0,"button",7),A.NdJ("click",function(){const _t=A.CHM(Bt).index,Rt=A.oxw().index;return A.oxw(2).onTableOption(2*Rt+_t)}),A._uU(1),A.qZA()}if(2&j){const Bt=At.$implicit;A.xp6(1),A.hij(" ",Bt," ")}}function pt(j,At){if(1&j&&(A.TgZ(0,"tui-opt-group"),A.YNc(1,Dt,2,1,"button",6),A.qZA()),2&j){const Bt=At.$implicit;A.xp6(1),A.Q6J("ngForOf",Bt)}}function q(j,At){if(1&j&&(A.TgZ(0,"tui-data-list"),A.YNc(1,pt,2,1,"tui-opt-group",5),A.ALo(2,"async"),A.qZA()),2&j){const Bt=A.oxw();A.xp6(1),A.Q6J("ngForOf",A.lcZ(2,1,Bt.tableCommandTexts$))}}var F=(()=>{return(j=F||(F={}))[j.InsertColumnBefore=0]="InsertColumnBefore",j[j.InsertColumnAfter=1]="InsertColumnAfter",j[j.InsertRowBefore=2]="InsertRowBefore",j[j.InsertRowAfter=3]="InsertRowAfter",j[j.DeleteColumn=4]="DeleteColumn",j[j.DeleteRow=5]="DeleteRow",F;var j})();let ut=(()=>{class j{constructor(Bt,Pt,It){this.editor=Bt,this.texts$=Pt,this.tableCommandTexts$=It,this.commandsRegistry={[F.InsertColumnAfter]:()=>this.editor.addColumnAfter(),[F.InsertColumnBefore]:()=>this.editor.addColumnBefore(),[F.InsertRowAfter]:()=>this.editor.addRowAfter(),[F.InsertRowBefore]:()=>this.editor.addRowBefore(),[F.DeleteColumn]:()=>this.editor.deleteColumn(),[F.DeleteRow]:()=>this.editor.deleteRow()},this.isActive$=this.editor.isActive$("table"),this.rowsColumnsManagingText$=this.texts$.pipe((0,y.U)(_t=>_t.rowsColumnsManaging))}onTableOption(Bt){this.commandsRegistry[Bt]()}}return j.\u0275fac=function(Bt){return new(Bt||j)(A.Y36(C.$3),A.Y36(l.rf),A.Y36(l.$i))},j.\u0275cmp=A.Xpm({type:j,selectors:[["tui-table-row-column-manager"]],decls:4,vars:3,consts:[[3,"content","canOpen",4,"tuiLet"],["tableOptionsDropdown",""],[3,"content","canOpen"],["tableCommand",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAddRowLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled"],[4,"ngFor","ngForOf"],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(Bt,Pt){1&Bt&&(A.YNc(0,St,4,7,"tui-hosted-dropdown",0),A.ALo(1,"async"),A.YNc(2,q,3,3,"ng-template",null,1,A.W1O)),2&Bt&&A.Q6J("tuiLet",A.lcZ(1,1,Pt.isActive$))},directives:[m.L,ot.o,N.v,G.$,tt.D,ft.x,at.t,Mt.D,it.q,mt.sg,Ot.R,kt.v],pipes:[mt.Ov],encapsulation:2,changeDetection:0}),j})()},74549:(Yt,Tt,c)=>{c.d(Tt,{M:()=>ft});var C=c(74788),l=c(62579),y=c(3497),A=c(36097);function m(at,Mt){if(1&at){const it=C.EpF();C.TgZ(0,"div",4),C.NdJ("mouseenter",function(Ot){const St=C.CHM(it).$implicit,Dt=C.oxw().$implicit;return C.oxw().updateCurrentSize(St+1,Dt+1,Ot)})("click",function(){return C.CHM(it),C.oxw(2).select()}),C.qZA()}if(2&at){const it=Mt.$implicit,mt=C.oxw().$implicit,Ot=C.oxw();C.ekj("t-cell_hovered",Ot.tableSelectHovered(it,mt))}}function ot(at,Mt){if(1&at&&(C.TgZ(0,"div",2),C.YNc(1,m,1,2,"div",3),C.qZA()),2&at){const it=C.oxw();C.xp6(1),C.Q6J("tuiRepeatTimesOf",it.rowsNumber)}}let ft=(()=>{class at{constructor(it){this.windowRef=it,this.selectSize=new C.vpe,this.onSelectSize=this.selectSize,this.tableSize={rows:1,cols:1}}get columnsNumber(){return Math.min(Math.max(3,this.tableSize.cols+1),15)}get rowsNumber(){return Math.min(Math.max(3,this.tableSize.rows+1),15)}tableSelectHovered(it,mt){return it<this.tableSize.rows&&mt<this.tableSize.cols}updateCurrentSize(it,mt,Ot){(0,y.tuiGetViewportWidth)(this.windowRef)-Ot.clientX>70&&(this.tableSize={rows:it,cols:mt})}onClick(){this.select()}select(){this.selectSize.emit(this.tableSize)}}return at.\u0275fac=function(it){return new(it||at)(C.Y36(l.m9))},at.\u0275cmp=C.Xpm({type:at,selectors:[["tui-table-size-selector"]],outputs:{selectSize:"selectSize",onSelectSize:"onSelectSize"},decls:3,vars:3,consts:[["class","t-column",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-description"],[1,"t-column"],["class","t-cell",3,"t-cell_hovered","mouseenter","click",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-cell",3,"mouseenter","click"]],template:function(it,mt){1&it&&(C.YNc(0,ot,2,1,"div",0),C.TgZ(1,"div",1),C._uU(2),C.qZA()),2&it&&(C.Q6J("tuiRepeatTimesOf",mt.columnsNumber),C.xp6(2),C.AsE("",mt.tableSize.cols,"\xd7",mt.tableSize.rows,""))},directives:[A.X],styles:["[_nghost-%COMP%]{display:block;padding:.75rem}.t-cell[_ngcontent-%COMP%]{display:inline-block;background-color:var(--tui-base-01);width:1.25rem;height:1.25rem;border-radius:.25rem;margin:.125rem;border:1px solid var(--tui-base-04);cursor:pointer}.t-cell_hovered[_ngcontent-%COMP%]{background-color:var(--tui-base-02)}.t-column[_ngcontent-%COMP%]{white-space:nowrap}.t-description[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),at})()},10528:(Yt,Tt,c)=>{c.d(Tt,{G:()=>ut});var C=c(64762),l=c(84614),y=c(14309),A=c(50259),m=c(88002),ot=c(87519),N=c(74788),G=c(40939),tt=c(62939),ft=c(33250),at=c(76189),Mt=c(219),it=c(67446),mt=c(29070),Ot=c(54255),kt=c(15491),St=c(5451),Dt=c(17163),pt=c(12057);function q(j,At){if(1&j){const Bt=N.EpF();N.TgZ(0,"tui-palette",6),N.NdJ("selectedColor",function(It){return N.CHM(Bt),N.oxw(2).editor.setFontColor(It)}),N.qZA()}if(2&j){const Bt=At.$implicit,Pt=N.oxw(2);N.Q6J("tuiActiveZoneParent",Bt)("colors",Pt.colors)}}function F(j,At){if(1&j&&(N.TgZ(0,"tui-hosted-dropdown",1,2),N._UZ(2,"button",3),N.ALo(3,"async"),N._UZ(4,"div",4),N.YNc(5,q,1,2,"ng-template",null,5,N.W1O),N.qZA()),2&j){const Bt=At.tuiLet,Pt=N.MAs(1),It=N.MAs(6),_t=N.oxw();N.Q6J("content",It)("tuiDropdownMaxHeight",999),N.xp6(2),N.Q6J("tuiHint",N.lcZ(3,7,_t.foreColorText$))("pseudoActive",Pt.open)("focusable",Pt.open),N.xp6(2),N.Udp("background",Bt)}}class ut{constructor(At,Bt,Pt){this.defaultOptions=At,this.editor=Bt,this.texts$=Pt,this.colors=this.defaultOptions.colors,this.fontColor$=this.editor.stateChange$.pipe((0,m.U)(()=>this.editor.getFontColor()||this.defaultOptions.blankColor),(0,ot.x)()),this.foreColorText$=this.texts$.pipe((0,m.U)(It=>It.foreColor))}}ut.\u0275fac=function(At){return new(At||ut)(N.Y36(y.mJ),N.Y36(l.$3),N.Y36(y.rf))},ut.\u0275cmp=N.Xpm({type:ut,selectors:[["tui-text-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["color",""],["tuiIconButton","","type","button","size","s","icon","tuiIconColorLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__color-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],[1,"t-plate"],["colorDropdown",""],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(At,Bt){1&At&&(N.YNc(0,F,7,9,"tui-hosted-dropdown",0),N.ALo(1,"async")),2&At&&N.Q6J("tuiLet",N.lcZ(1,1,Bt.fontColor$))},directives:[G.L,tt.o,ft.Ek,at.v,Mt.$,it.D,mt.x,Ot.t,kt.D,St.R,Dt.e],pipes:[pt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,C.gn)([(0,A.tuiDefaultProp)()],ut.prototype,"colors",void 0)},17406:(Yt,Tt,c)=>{c.d(Tt,{M6:()=>C.M,yB:()=>G,Bp:()=>tt.B});var C=c(4997),l=c(12057),y=c(71115),A=c(93252),m=c(50259),ot=c(3497),N=c(74788);let G=(()=>{class ft{}return ft.\u0275fac=function(Mt){return new(Mt||ft)},ft.\u0275mod=N.oAB({type:ft}),ft.\u0275inj=N.cJS({imports:[[l.ez,ot.TuiHintModule,m.TuiFocusableModule,ot.TuiButtonModule,ot.TuiHostedDropdownModule,y.Fu,A.er,A.mp,A.__,A.iA,A.p7,A.Zv,A.pu,A.Ur,A._t,A.XC,A.P_,A.y9,m.TuiItemModule,A.jP]]}),ft})();var tt=c(13044)},13044:(Yt,Tt,c)=>{c.d(Tt,{B:()=>y});var C=c(74788),l=c(50259);let y=(()=>{class A{constructor(ot){this.elementRef=ot}get toolsContainers(){return Array.from(this.elementRef.nativeElement.querySelectorAll("[tuiItem]"))}onHorizontalNavigation(ot){const{toolsContainers:N}=this,G=N.findIndex(l.tuiIsNativeFocusedIn),ft=N[(0,l.tuiClamp)(G+(ot?-1:1),0,N.length-1)],at=ot?this.findPreviousTool(ft):this.findNextTool(ft);at&&at.focus()}findFirstFocusableTool(ot=!1){const N=ot?this.toolsContainers.slice().reverse():this.toolsContainers;for(const G of N){const tt=(0,l.tuiIsNativeMouseFocusable)(G)?G:(0,l.tuiGetClosestFocusable)({initial:G,root:G,keyboard:!1});if(tt)return tt}return null}findPreviousTool(ot){return(0,l.tuiIsNativeMouseFocusable)(ot)?ot:(0,l.tuiGetClosestFocusable)({initial:ot,root:ot,keyboard:!1})||(0,l.tuiGetClosestFocusable)({initial:ot,root:this.elementRef.nativeElement,previous:!0,keyboard:!1})}findNextTool(ot){return(0,l.tuiIsNativeMouseFocusable)(ot)?ot:(0,l.tuiGetClosestFocusable)({initial:ot,root:this.elementRef.nativeElement,keyboard:!1})}}return A.\u0275fac=function(ot){return new(ot||A)(C.Y36(C.SBq))},A.\u0275dir=C.lG2({type:A,selectors:[["","tuiToolbarNavigationManager",""]],hostBindings:function(ot,N){1&ot&&C.NdJ("keydown.arrowRight.prevent",function(){return N.onHorizontalNavigation(!1)})("keydown.arrowLeft.prevent",function(){return N.onHorizontalNavigation(!0)})}}),A})()},4997:(Yt,Tt,c)=>{c.d(Tt,{M:()=>O});var C=c(64762),l=c(74788),y=c(64352),A=c(84614),m=c(48699),ot=c(14309),N=c(50259),G=c(15257),tt=c(13044),ft=c(12057),at=c(48893),Mt=c(76189),it=c(82707),mt=c(219),Ot=c(67446),kt=c(29070),St=c(54255),Dt=c(15491),pt=c(84985),q=c(62976),F=c(37924),ut=c(13441),j=c(62939),At=c(45050),Bt=c(10528),Pt=c(7416),It=c(15587),_t=c(50237),Rt=c(18832),wt=c(19762),z=c(95558),rt=c(28962),dt=c(22063),ct=c(76965);const $=["dropdown"];function nt(w,V){1&w&&l.GkF(0)}function et(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"div",6),l.TgZ(1,"button",7),l.NdJ("click",function(){return l.CHM(U),l.oxw(2).undo()}),l.qZA(),l.TgZ(2,"button",8),l.NdJ("click",function(){return l.CHM(U),l.oxw(2).redo()}),l.qZA(),l.qZA()}if(2&w){const U=l.oxw().ngIf,bt=l.oxw();l.xp6(1),l.Q6J("tuiHint",U.undo)("disabled",bt.undoDisabled)("focusable",!1),l.xp6(1),l.Q6J("tuiHint",U.redo)("disabled",bt.redoDisabled)("focusable",!1)}}function Et(w,V){1&w&&(l.TgZ(0,"div",6),l._UZ(1,"tui-font-size",9),l.qZA())}function $t(w,V){if(1&w&&l._UZ(0,"tui-font-style",15),2&w){const U=l.oxw(3);l.Q6J("enabledTools",U.toolsSet)}}function Kt(w,V){1&w&&l._UZ(0,"tui-align-content",9)}function ne(w,V){1&w&&l._UZ(0,"tui-list-configs",9)}function zt(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"button",16,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).toggleQuote()}),l.qZA()}if(2&w){const U=l.oxw(2).ngIf,bt=l.oxw();l.Q6J("tuiHint",U.quote)("pseudoActive",bt.blockquote)("disabled",bt.unorderedList||bt.orderedList)("focusable",!1)}}function ce(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"tui-edit-link",22,23),l.NdJ("addLink",function(Nt){l.CHM(U),l.oxw();const H=l.MAs(1);return l.oxw(3).onLink(H,Nt)})("removeLink",function(){l.CHM(U),l.oxw();const Nt=l.MAs(1);return l.oxw(3).onLink(Nt)}),l.qZA()}}function ye(w,V){if(1&w&&(l.TgZ(0,"tui-hosted-dropdown",18,19),l._UZ(2,"button",20,17),l.YNc(4,ce,2,0,"ng-template",null,21,l.W1O),l.qZA()),2&w){const U=l.MAs(1),bt=l.MAs(5),Nt=l.oxw(2).ngIf,H=l.oxw();l.Q6J("canOpen",H.canOpenAnchor)("content",bt),l.xp6(2),l.Q6J("tuiHint",Nt.link)("pseudoActive",U.open||H.a)("focusable",U.open)}}function Oe(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"tui-edit-link",28),l.NdJ("addLink",function(Nt){l.CHM(U),l.oxw();const H=l.MAs(1);return l.oxw(3).setAnchor(H,Nt)})("removeLink",function(){return l.CHM(U),l.oxw(4).removeAnchor()}),l.qZA()}2&w&&l.Q6J("anchorMode",!0)}function he(w,V){if(1&w&&(l.TgZ(0,"tui-hosted-dropdown",24,25),l._UZ(2,"button",26),l.YNc(3,Oe,1,1,"ng-template",null,27,l.W1O),l.qZA()),2&w){const U=l.MAs(1),bt=l.MAs(4),Nt=l.oxw(2).ngIf,H=l.oxw();l.Q6J("canOpen",H.canOpenAnchor)("content",bt),l.xp6(2),l.Q6J("focusable",!1)("pseudoActive",U.open||H.jumpAnchor)("tuiHint",Nt.insertAnchor)}}function Je(w,V){if(1&w){const U=l.EpF();l.ynx(0),l.TgZ(1,"button",29,17),l.NdJ("click",function(){return l.CHM(U),l.MAs(4).click()}),l.qZA(),l.TgZ(3,"input",30,31),l.NdJ("change",function(){l.CHM(U);const Nt=l.MAs(4);return l.oxw(3).onAttach(Nt)}),l.qZA(),l.BQk()}if(2&w){const U=l.oxw(2).ngIf,bt=l.oxw();l.xp6(1),l.Q6J("tuiHint",U.attach)("focusable",!1),l.xp6(2),l.Q6J("accept",bt.attachOptions.accept)("multiple",bt.attachOptions.multiple)("tuiFocusable",!1)}}function xe(w,V){if(1&w&&(l.TgZ(0,"div",6),l.YNc(1,$t,1,1,"tui-font-style",10),l.YNc(2,Kt,1,0,"tui-align-content",11),l.YNc(3,ne,1,0,"tui-list-configs",11),l.YNc(4,zt,2,4,"button",12),l.YNc(5,ye,6,5,"tui-hosted-dropdown",13),l.YNc(6,he,5,5,"tui-hosted-dropdown",14),l.YNc(7,Je,5,5,"ng-container",1),l.qZA()),2&w){const U=l.oxw(2);l.xp6(1),l.Q6J("ngIf",U.formatEnabled),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Align)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.List)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Quote)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Link)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Anchor)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Attach))}}function Ne(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"button",34,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).toggleSubscript()}),l.qZA()}if(2&w){const U=l.oxw(2).ngIf,bt=l.oxw();l.Q6J("tuiHint",U.subscript)("pseudoActive",bt.subscript)("focusable",!1)}}function ge(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"button",35,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).toggleSuperscript()}),l.qZA()}if(2&w){const U=l.oxw(2).ngIf,bt=l.oxw();l.Q6J("tuiHint",U.superscript)("pseudoActive",bt.superscript)("focusable",!1)}}function Ae(w,V){if(1&w&&(l.TgZ(0,"div",6),l.YNc(1,Ne,2,3,"button",32),l.YNc(2,ge,2,3,"button",33),l.qZA()),2&w){const U=l.oxw(2);l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Sub)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Sup))}}function Ce(w,V){if(1&w&&l._UZ(0,"tui-text-color",37),2&w){const U=l.oxw(3);l.Q6J("colors",U.colors)}}function Pe(w,V){if(1&w&&l._UZ(0,"tui-highlight-color",37),2&w){const U=l.oxw(3);l.Q6J("colors",U.colors)}}function Be(w,V){if(1&w&&(l.TgZ(0,"div",6),l.YNc(1,Ce,1,1,"tui-text-color",36),l.YNc(2,Pe,1,1,"tui-highlight-color",36),l.qZA()),2&w){const U=l.oxw(2);l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Color)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Hilite))}}function Me(w,V){1&w&&l._UZ(0,"tui-code",9)}function ke(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"button",41,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).onTeX()}),l.qZA()}if(2&w){const U=l.oxw(2).ngIf;l.Q6J("tuiHint",U.tex)("focusable",!1)}}function Ye(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"div",42),l.TgZ(1,"button",43,17),l.NdJ("click",function(){return l.CHM(U),l.MAs(4).click()}),l.qZA(),l.TgZ(3,"input",44,45),l.NdJ("change",function(){l.CHM(U);const Nt=l.MAs(4);return l.oxw(3).onImage(Nt)}),l.qZA(),l.qZA()}if(2&w){const U=l.oxw(2).ngIf;l.xp6(1),l.Q6J("tuiHint",U.image)("focusable",!1),l.xp6(2),l.Q6J("tuiFocusable",!1)}}function He(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"button",46,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).insertHorizontalRule()}),l.qZA()}if(2&w){const U=l.oxw(2).ngIf;l.Q6J("tuiHint",U.insertHorizontalRule)("focusable",!1)}}function Ue(w,V){if(1&w&&(l.TgZ(0,"div",6),l.YNc(1,Me,1,0,"tui-code",11),l.YNc(2,ke,2,2,"button",38),l.YNc(3,Ye,5,3,"div",39),l.YNc(4,He,2,2,"button",40),l.qZA()),2&w){const U=l.oxw(2);l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Code)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Tex)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Img)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.HR))}}function Le(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"div",6),l.TgZ(1,"button",47,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(2).removeFormat()}),l.qZA(),l.qZA()}if(2&w){const U=l.oxw().ngIf;l.xp6(1),l.Q6J("tuiHint",U.clear)("focusable",!1)}}function ze(w,V){1&w&&(l.TgZ(0,"div",6),l._UZ(1,"tui-details",48),l._UZ(2,"tui-details-remove",48),l.qZA())}function _e(w,V){if(1&w&&l._UZ(0,"tui-table-cell-color",37),2&w){const U=l.oxw(3);l.Q6J("colors",U.colors)}}function fe(w,V){if(1&w&&(l.TgZ(0,"div",6),l._UZ(1,"tui-editor-group-tool",48),l.YNc(2,_e,1,1,"tui-table-cell-color",36),l.qZA()),2&w){const U=l.oxw(2);l.xp6(2),l.Q6J("ngIf",!U.enabled(U.TuiEditorTool.Table))}}function Ee(w,V){if(1&w&&(l.TgZ(0,"div",6),l._UZ(1,"tui-table-create",48),l._UZ(2,"tui-table-row-column-manager",48),l._UZ(3,"tui-table-merge-cells",48),l._UZ(4,"tui-table-cell-color",37),l.qZA()),2&w){const U=l.oxw(2);l.xp6(4),l.Q6J("colors",U.colors)}}function gt(w,V){if(1&w&&(l.TgZ(0,"section",4),l.YNc(1,et,3,6,"div",5),l.YNc(2,Et,2,0,"div",5),l.YNc(3,xe,8,7,"div",5),l.YNc(4,Ae,3,2,"div",5),l.YNc(5,Be,3,2,"div",5),l.YNc(6,Ue,5,4,"div",5),l.YNc(7,Le,3,2,"div",5),l.YNc(8,ze,3,0,"div",5),l.YNc(9,fe,3,1,"div",5),l.YNc(10,Ee,5,1,"div",5),l.TgZ(11,"div",6),l.Hsn(12),l.qZA(),l.qZA()),2&w){const U=l.oxw();l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Undo)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Size)),l.xp6(1),l.Q6J("ngIf",U.firstBigBlockEnabled),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Sub)||U.enabled(U.TuiEditorTool.Sup)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Color)||U.enabled(U.TuiEditorTool.Hilite)),l.xp6(1),l.Q6J("ngIf",U.secondBigBlockEnabled),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Clear)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Details)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Group)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Table))}}class O{constructor(V,U,bt,Nt,H,a,p){this.elementRef=V,this.editor=U,this.imageLoader=bt,this.attachOptions=Nt,this.filesLoader=H,this.texts$=a,this.defaultOptions=p,this.dropdowns=N.EMPTY_QUERY,this.colors=this.defaultOptions.colors,this.disabled=!1,this.linkAdded=new l.vpe,this.texClicked=new l.vpe,this.fileAttached=new l.vpe,this.TuiEditorTool=m._,this.toolsSet=new Set(y.Db)}set tools(V){this.toolsSet=new Set(V)}get focused(){return(0,N.tuiIsNativeFocusedIn)(this.elementRef.nativeElement)||!!this.dropdowns.find(({nativeElement:V})=>(0,N.tuiIsNativeFocusedIn)(V))}get focusable(){return!this.focused&&!this.disabled}get unorderedList(){return this.editor.isActive("bulletList")}get orderedList(){return this.editor.isActive("orderedList")}get blockquote(){return this.editor.isActive("blockquote")}get a(){return this.editor.isActive("link")}get jumpAnchor(){return this.editor.isActive("jumpAnchor")}get canOpenAnchor(){return!this.a&&!this.jumpAnchor}get undoDisabled(){return this.editor.undoDisabled()}get redoDisabled(){return this.editor.redoDisabled()}get subscript(){return this.editor.isActive("subscript")}get superscript(){return this.editor.isActive("superscript")}get formatEnabled(){return this.enabled(m._.Bold)||this.enabled(m._.Italic)||this.enabled(m._.Underline)||this.enabled(m._.Strikethrough)}get firstBigBlockEnabled(){return this.formatEnabled||this.enabled(m._.Align)||this.enabled(m._.List)||this.enabled(m._.Quote)||this.enabled(m._.Link)||this.enabled(m._.Anchor)||this.enabled(m._.Attach)}get secondBigBlockEnabled(){return this.enabled(m._.Code)||this.enabled(m._.Tex)||this.enabled(m._.Img)||this.enabled(m._.HR)}onMouseDown(V,U){U.closest("button")||(V.preventDefault(),this.editor.focus())}onBottomFocus(){this.focusLast()}onTopFocus(){this.focusFirst()}onImage(V){var U;const bt=null===(U=V.files)||void 0===U?void 0:U[0];V.value="",bt&&this.imageLoader(bt).pipe((0,G.q)(1)).subscribe(Nt=>{this.addImage(Nt)})}onAttach(V){var U;const bt=Array.from(V.files||[]);V.value="",bt&&(N.tuiAssert.assert(!!this.filesLoader,"Please provide TUI_ATTACH_FILES_LOADER"),null===(U=this.filesLoader)||void 0===U||U.call(this,bt).pipe((0,G.q)(1)).subscribe(Nt=>this.fileAttached.emit(Nt)))}onTeX(){this.texClicked.emit()}onLink(V,U){V.open=!1,U&&this.editor.toggleLink(U)}setAnchor(V,U){V.open=!1,U&&(this.editor.setAnchor(U),this.editor.selectClosest())}removeAnchor(){this.editor.removeAnchor()}enabled(V){return this.toolsSet.has(V)}undo(){this.editor.undo()}redo(){this.editor.redo()}insertHorizontalRule(){this.editor.setHorizontalRule()}removeFormat(){this.editor.removeFormat()}toggleOrderedList(){this.editor.toggleOrderedList()}toggleQuote(){this.editor.toggleBlockquote()}toggleSubscript(){this.editor.toggleSubscript()}toggleSuperscript(){this.editor.toggleSuperscript()}addImage(V){this.editor.setImage(V)}focusFirst(){var V;const U=null===(V=this.navigationManager)||void 0===V?void 0:V.findFirstFocusableTool();U&&U.focus()}focusLast(){var V;const U=null===(V=this.navigationManager)||void 0===V?void 0:V.findFirstFocusableTool(!0);U&&U.focus()}}O.\u0275fac=function(V){return new(V||O)(l.Y36(l.SBq,8),l.Y36(A.$3),l.Y36(ot.p7),l.Y36(ot.dR),l.Y36(ot.zc,8),l.Y36(ot.rf),l.Y36(ot.mJ))},O.\u0275cmp=l.Xpm({type:O,selectors:[["tui-toolbar"]],viewQuery:function(V,U){if(1&V&&(l.Gf(tt.B,5),l.Gf($,5,l.SBq)),2&V){let bt;l.iGM(bt=l.CRH())&&(U.navigationManager=bt.first),l.iGM(bt=l.CRH())&&(U.dropdowns=bt)}},hostAttrs:["role","toolbar"],hostVars:2,hostBindings:function(V,U){1&V&&l.NdJ("mousedown",function(Nt){return U.onMouseDown(Nt,Nt.target)}),2&V&&l.ekj("_disabled",U.disabled)},inputs:{colors:"colors",disabled:"disabled",tools:"tools"},outputs:{linkAdded:"linkAdded",texClicked:"texClicked",fileAttached:"fileAttached"},ngContentSelectors:["*"],decls:7,vars:8,consts:[["type","button",1,"t-prevent-parent-label-behavior"],[4,"ngIf"],[3,"tuiFocusable","focus"],["tuiToolbarNavigationManager","","class","t-tools-wrapper",4,"ngIf"],["tuiToolbarNavigationManager","",1,"t-tools-wrapper"],["class","t-block",4,"ngIf"],[1,"t-block"],["tuiItem","","tuiIconButton","","type","button","size","s","icon","tuiIconUndoLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","disabled","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconRedoLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","disabled","focusable","click"],["tuiItem","",1,"t-tool","t-wrapper"],["tuiItem","","class","t-tool t-wrapper",3,"enabledTools",4,"ngIf"],["tuiItem","","class","t-tool t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","disabled","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",3,"canOpen","content",4,"ngIf"],["class","t-wrapper",3,"canOpen","content",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"enabledTools"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","disabled","focusable","click"],["button",""],["tuiItem","",1,"t-wrapper",3,"canOpen","content"],["link",""],["tuiIconButton","","type","button","size","s","icon","tuiIconLinkLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","pseudoActive","focusable"],["linkDropdown",""],[3,"addLink","removeLink"],["dropdown",""],[1,"t-wrapper",3,"canOpen","content"],["anchor",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAnchorLarge","tuiHintDirection","top-left","appearance","icon","tuiHintDescribe","",3,"focusable","pseudoActive","tuiHint"],["anchorDropdown",""],[3,"anchorMode","addLink","removeLink"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconPaperclipLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["type","file",1,"t-file-upload",3,"accept","multiple","tuiFocusable","change"],["fileUpload",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","focusable","click"],["tuiItem","","class","t-tool t-wrapper",3,"colors",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"colors"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool",3,"tuiHint","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","focusable","click"],["tuiItem","",1,"t-wrapper"],["tuiIconButton","","type","button","size","s","icon","tuiIconImageLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","focusable","click"],["type","file","accept","image/*",1,"t-image",3,"tuiFocusable","change"],["image",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconClearFormatLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["tuiItem","",1,"t-tool","t-tool_margin"]],template:function(V,U){1&V&&(l.F$t(),l._UZ(0,"button",0),l.YNc(1,nt,1,0,"ng-container",1),l.ALo(2,"async"),l.TgZ(3,"div",2),l.NdJ("focus",function(){return U.onTopFocus()}),l.qZA(),l.TgZ(4,"div",2),l.NdJ("focus",function(){return U.onBottomFocus()}),l.qZA(),l.YNc(5,gt,13,10,"section",3),l.ALo(6,"async")),2&V&&(l.xp6(1),l.Q6J("ngIf",l.lcZ(2,4,U.editor.stateChange$)),l.xp6(2),l.Q6J("tuiFocusable",U.focusable),l.xp6(1),l.Q6J("tuiFocusable",U.focusable),l.xp6(1),l.Q6J("ngIf",l.lcZ(6,6,U.texts$)))},directives:[ft.O5,at.t,tt.B,Mt.v,it.w,mt.$,Ot.D,kt.x,St.t,Dt.D,pt.m,q.h,F.X,ut.w,j.o,At.l,Bt.G,Pt.U,It.T,_t.y,Rt.U,wt.d,z.p,rt.l,dt._,ct.Y],pipes:[ft.Ov],styles:['.t-tools-wrapper[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;padding:.25rem .75rem;overflow:auto;flex-wrap:wrap;box-shadow:0 .125rem .1875rem #0000001a}.t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar, .t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-tools-wrapper._disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:var(--tui-disabled-opacity)}.t-block[_ngcontent-%COMP%]{display:flex;padding:.25rem 0}.t-block[_ngcontent-%COMP%]:not(:last-child):after{content:"";display:block;margin:0 .25rem;width:1px;background:var(--tui-secondary-active)}.t-tool[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}button.t-tool[_ngcontent-%COMP%]:hover, .t-tool[_ngcontent-%COMP%]     button:hover{background:var(--tui-secondary-hover)}.t-tool_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-font[_ngcontent-%COMP%]{padding:.3em 0;outline:none;width:100%;pointer-events:none}.t-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;font-size:0;opacity:0;cursor:pointer}.t-image[_ngcontent-%COMP%]::-webkit-file-upload-button{display:none}.t-file-upload[_ngcontent-%COMP%]{display:none}.t-color-picker[_ngcontent-%COMP%]     tui-hosted-dropdown, .t-color-picker[_ngcontent-%COMP%]     tui-color-picker, .t-color-picker[_ngcontent-%COMP%]     tui-color-edit{display:none}.t-prevent-parent-label-behavior[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),(0,C.gn)([(0,N.tuiDefaultProp)()],O.prototype,"colors",void 0),(0,C.gn)([(0,N.tuiDefaultProp)()],O.prototype,"disabled",void 0),(0,C.gn)([(0,N.tuiDefaultProp)(function(w){return!w.includes(m._.Tex)&&!w.includes(m._.Attach)},"Attach and TeX are not yet implemented in Editor")],O.prototype,"tools",null)},64352:(Yt,Tt,c)=>{c.d(Tt,{hK:()=>l,pL:()=>tt,_s:()=>ot,Ci:()=>G,ML:()=>N,sw:()=>C,Db:()=>A,RR:()=>m});const C=new Map([["transparent","transparent"],["color-black-300","#333333"],["color-black-200","#666666"],["color-black-100","#909090"],["color-yellow-100","#FFDD2C"],["color-yellow-200","#FCC521"],["color-yellow-300","#FAB618"],["color-gray-100","#f5f5f6"],["color-gray-200","#e7e8ea"],["color-gray-300","#cbcfd3"],["color-gray-400","#959ba4"],["color-gray-500","#79818c"],["color-gray-600","#616871"],["color-light-blue-100","#ecf1f7"],["color-light-blue-200","#e4ebf3"],["color-light-blue-300","#dde4ed"],["color-blue-100","#1771e6"],["color-blue-200","#1464cc"],["color-blue-300","#0953b3"],["color-green-100","#39b54a"],["color-green-200","#2ca53a"],["color-green-300","#168a21"],["color-red-100","#e01f19"],["color-red-200","#d3120e"],["color-red-300","#c40b08"]]),l="rgb(51, 51, 51)";var y=c(48699);const A=[y._.Undo,y._.Size,y._.Bold,y._.Italic,y._.Underline,y._.Align,y._.List,y._.Quote,y._.Link,y._.Anchor,y._.Color,y._.Hilite,y._.Clear,y._.Strikethrough,y._.Code,y._.Img,y._.HR,y._.Sup,y._.Sub,y._.Table,y._.Details];function m(ft){return[{px:13,name:ft.small},{px:15,name:ft.normal},{px:17,name:ft.large},{px:24,family:"var(--tui-font-heading)",name:ft.subtitle,headingLevel:2,weight:"bold"},{px:30,family:"var(--tui-font-heading)",name:ft.title,headingLevel:1,weight:"bold"}]}const ot="#",N="http://",G="https://",tt={protocol:G}},60153:(Yt,Tt,c)=>{c.d(Tt,{Z:()=>l});var C=c(74788);let l=(()=>{class y{constructor(){this.imagePreview=new C.vpe}click(m){m instanceof HTMLImageElement&&this.imagePreview.emit(m)}}return y.\u0275fac=function(m){return new(m||y)},y.\u0275dir=C.lG2({type:y,selectors:[["tui-editor-socket","imagePreview",""]],hostAttrs:[1,"_preview-image"],hostBindings:function(m,ot){1&m&&C.NdJ("click",function(G){return ot.click(G.target)})},outputs:{imagePreview:"imagePreview"}}),y})()},84614:(Yt,Tt,c)=>{c.d(Tt,{Zj:()=>C.Z,BN:()=>y,JU:()=>A.JU,mJ:()=>A.mJ,$3:()=>A.$3});var C=c(60153),l=c(74788);let y=(()=>{class m{}return m.\u0275fac=function(N){return new(N||m)},m.\u0275mod=l.oAB({type:m}),m.\u0275inj=l.cJS({}),m})();var A=c(82113)},82113:(Yt,Tt,c)=>{c.d(Tt,{JU:()=>C.J,mJ:()=>y,$3:()=>A.$});var C=c(74982),l=c(74788);let y=(()=>{class m{}return m.\u0275fac=function(N){return new(N||m)},m.\u0275mod=l.oAB({type:m}),m.\u0275inj=l.cJS({}),m})();var A=c(76954)},74982:(Yt,Tt,c)=>{c.d(Tt,{J:()=>ot});var C=c(74788),l=c(14309),y=c(50259),A=c(46782),m=c(76954);let ot=(()=>{class N{constructor(tt,ft,at,Mt,it,mt){this.elementRef=tt,this.renderer=ft,this.editor=at,this.editorContainer=Mt,this.editorLoaded$=it,this.valueChange=this.editor.valueChange$,this.stateChange=this.editor.stateChange$,this.editorLoaded$.pipe((0,A.R)(mt)).subscribe(()=>{this.renderer.appendChild(this.elementRef.nativeElement,this.editorContainer)})}set value(tt){this.editor.setValue(tt)}set editable(tt){this.editor.editable=tt}}return N.\u0275fac=function(tt){return new(tt||N)(C.Y36(C.SBq),C.Y36(C.Qsj),C.Y36(m.$),C.Y36(l.Y1),C.Y36(l.ZW),C.Y36(y.TuiDestroyService,2))},N.\u0275dir=C.lG2({type:N,selectors:[["","tuiTiptapEditor",""]],inputs:{value:"value",editable:"editable"},outputs:{valueChange:"valueChange",stateChange:"stateChange"},features:[C._Bn([y.TuiDestroyService])]}),N})()},76954:(Yt,Tt,c)=>{c.d(Tt,{$:()=>ft});var C=c(77361),l=c(64352),y=c(14309),A=c(27863),m=c(39761),ot=c(88002),N=c(87519),tt=c(74788);let ft=(()=>{class at extends C._{constructor(it){super(),this.editorRef=it,this.editorRef.subscribe(mt=>{this.editor=mt,mt.on("transaction",()=>{this.stateChange$.next()}),mt.on("update",()=>{const Ot=mt.getHTML(),St=function(at){return Array.isArray(at)&&1===at.length&&!at[0].hasOwnProperty("content")}(mt.getJSON().content)?"":Ot;this.valueChange$.next(St)})})}get isFocused(){return this.editor.isFocused}get html(){return this.editor.getHTML()}get editable(){return this.editor.isEditable}set editable(it){this.editor.setEditable(it)}get state(){return this.editor.state}getOriginTiptapEditor(){return this.editor}undoDisabled(){return!this.editor.can().undo()}redoDisabled(){return!this.editor.can().redo()}getFontColor(){return this.editor.getAttributes("textStyle").fontColor||l.hK}getBackgroundColor(){var it;return(null===(it=this.editor)||void 0===it?void 0:it.getAttributes("textStyle").backgroundColor)||"transparent"}getCellColor(){return this.editor.getAttributes("tableCell").background||this.editor.getAttributes("tableHeader").background}getGroupColor(){var it,mt,Ot,kt;if(this.editor.isActive("group")){const St=null!==(mt=null===(it=this.editor.getAttributes("group"))||void 0===it?void 0:it.style)&&void 0!==mt?mt:"",Dt=(0,A.jx)(St);return null!==(kt=null!==(Ot=Dt["background-color"])&&void 0!==Ot?Ot:Dt.background)&&void 0!==kt?kt:""}return""}onAlign(it){this.editor.chain().focus().setTextAlign(it).run()}setImage(it){this.editor.chain().focus().command(({commands:mt,state:Ot})=>{var kt;const St=null!==(kt=mt.setEditableImage)&&void 0!==kt?kt:mt.setImage;if(St){const Dt=Ot.selection.anchor;return St({src:it}),mt.setTextSelection(Dt),mt.insertContent("<p></p>"),!0}return!1}).run()}undo(){this.editor.chain().undo().run()}redo(){this.editor.chain().redo().run()}setHorizontalRule(){this.editor.chain().focus().setHorizontalRule().run()}removeFormat(){this.editor.commands.unsetAllMarks(),this.editor.commands.clearNodes()}setFontColor(it){this.editor.chain().focus().setFontColor(it).run()}setBackgroundColor(it){this.editor.chain().focus().setBackgroundColor(it).run()}toggleUnderline(){this.editor.chain().focus().toggleUnderline().run()}toggleStrike(){this.editor.chain().focus().toggleStrike().run()}toggleOrderedList(){this.editor.chain().focus().toggleOrderedList().run()}toggleUnorderedList(){this.editor.chain().focus().toggleBulletList().run()}togglePre(){this.editor.chain().focus().toggleCodeBlock().run()}sinkListItem(){this.editor.chain().focus().sinkListItem("listItem").run()}liftListItem(){this.editor.chain().focus().liftListItem("listItem").run()}isActive(it){return this.editor.isActive(it)}isActive$(it){return this.stateChange$.pipe((0,m.O)(null),(0,ot.U)(()=>this.isActive(it)),(0,N.x)())}toggleBold(){this.editor.chain().focus().toggleBold().run()}toggleCode(){this.editor.chain().focus().toggleCode().run()}toggleItalic(){this.editor.chain().focus().toggleItalic().run()}toggleBlockquote(){this.editor.chain().focus().toggleBlockquote().run()}toggleSubscript(){this.editor.chain().focus().toggleSubscript().run()}toggleSuperscript(){this.editor.chain().focus().toggleSuperscript().run()}toggleCodeBlock(){this.editor.chain().focus().toggleCodeBlock().run()}insertTable(it,mt){this.editor.chain().focus().insertTable({cols:it,rows:mt}).run()}addColumnAfter(){this.editor.chain().focus().addColumnAfter().run()}addColumnBefore(){this.editor.chain().focus().addColumnBefore().run()}addRowAfter(){this.editor.chain().focus().addRowAfter().run()}addRowBefore(){this.editor.chain().focus().addRowBefore().run()}deleteColumn(){this.editor.chain().focus().deleteColumn().run()}deleteRow(){this.editor.chain().focus().deleteRow().run()}mergeCells(){this.editor.chain().focus().mergeCells().run()}splitCell(){this.editor.chain().focus().splitCell().run()}canMergeCells(){return this.editor.can().mergeCells()}canSplitCells(){return this.editor.can().splitCell()}setHeading(it){this.editor.chain().focus().setHeading({level:it}).run()}setParagraph(it){this.editor.chain().focus().setParagraph().run(),it&&this.editor.chain().setMark("textStyle",it).run()}setHardBreak(){this.editor.chain().setHardBreak().run()}setTextSelection(it){this.editor.commands.setTextSelection(it)}toggleLink(it){this.editor.chain().focus().toggleLink({href:it}).run()}setLink(it){this.editor.chain().focus().setLink({href:it}).run()}unsetLink(){this.editor.chain().focus().unsetLink().run()}focus(){this.editor.chain().focus().run()}setValue(it){it!==this.html&&this.editor.commands.setContent(it)}destroy(){this.editor.destroy()}setCellColor(it){this.editor.chain().focus().setCellBackground(it).run()}selectClosest(){const it=this.editor.state.selection.anchor,{schema:mt,doc:Ot}=this.editor.state,kt=(0,A.Yz)(Ot.resolve(it),mt.marks.link);kt&&this.editor.chain().setTextSelection(kt).run()}enter(){this.editor.commands.enter()}setDetails(){this.editor.commands.setDetails()}removeDetails(){this.editor.commands.removeDetails()}setGroup(){this.editor.commands.setGroup()}removeGroup(){this.editor.commands.removeGroup()}setGroupHilite(it){this.editor.commands.setGroupHilite(it)}setAnchor(it){this.editor.commands.setAnchor(it.replace("#",""))}removeAnchor(){this.editor.commands.removeAnchor()}setFileLink(it){this.editor.commands.setFileLink(it)}setYoutubeVideo(it){this.editor.commands.setYoutubeVideo(it)}setIframe(it){this.editor.commands.setIframe(it)}removeEmptyTextStyle(){this.editor.commands.removeEmptyTextStyle()}toggleMark(it,mt,Ot){this.editor.commands.toggleMark(it,mt,Ot)}}return at.\u0275fac=function(it){return new(it||at)(tt.LFG(y.ZW))},at.\u0275prov=tt.Yz7({token:at,factory:at.\u0275fac}),at})()},48699:(Yt,Tt,c)=>{c.d(Tt,{_:()=>C});var C=(()=>{return(l=C||(C={})).Undo="undo",l.Anchor="anchor",l.Size="fontSize",l.Bold="bold",l.Italic="italic",l.Underline="underline",l.Strikethrough="strikeThrough",l.Align="justify",l.List="list",l.Quote="quote",l.Color="foreColor",l.Hilite="hiliteColor",l.Clear="clear",l.Link="link",l.Attach="attach",l.Tex="tex",l.Code="code",l.Img="image",l.HR="insertHorizontalRule",l.Sup="superscript",l.Sub="subscript",l.Table="insertTable",l.MergeCells="mergeCells",l.SplitCells="splitCells",l.RowsColumnsManaging="rowsColumnsManaging",l.Details="details",l.Group="group",C;var l})()},15736:(Yt,Tt,c)=>{c.r(Tt),c.d(Tt,{BackgroundColor:()=>y}),c(84402);const y=c(12867).Extension.create({name:"backgroundColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,renderHTML:({backgroundColor:A})=>A?{style:`background-color: ${A}`}:{},parseHTML:({style:A})=>A.backgroundColor.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setBackgroundColor:A=>({chain:m})=>m().setMark("textStyle",{backgroundColor:A}).run(),unsetBackgroundColor:()=>({chain:A})=>A().setMark("textStyle",{backgroundColor:null}).run()})})},93763:(Yt,Tt,c)=>{c.r(Tt),c.d(Tt,{TuiFileLink:()=>l});const l=c(12867).Extension.create({name:"fileLink",addCommands:()=>({setFileLink:y=>({state:A,chain:m})=>{const{selection:ot}=A,G='<span style="font-size: 15px"> </span>';return(Math.abs(ot.to-ot.from)>0?m().toggleMark("link",{href:y.link},{extendEmptyMarkRange:!0}).setTextSelection(ot.to).insertContent(G):m().insertContent(`<a href="${y.link}">${y.name}</a>${G}`)).setTextSelection(ot.to).run()}})})},52658:(Yt,Tt,c)=>{c.r(Tt),c.d(Tt,{FontColor:()=>y}),c(84402);const y=c(12867).Extension.create({name:"fontColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontColor:{default:null,renderHTML:({fontColor:A})=>A?{style:`color: ${A}`}:{},parseHTML:({style:A})=>A.color.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setFontColor:A=>({chain:m})=>m().setMark("textStyle",{fontColor:A}).run(),unsetFontColor:()=>({chain:A})=>A().setMark("textStyle",{fontColor:null}).run()})})},9492:(Yt,Tt,c)=>{c.r(Tt),c.d(Tt,{TuiFontSize:()=>y}),c(84402);const y=c(12867).Extension.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:({style:A})=>A.fontSize,renderHTML:({fontSize:A})=>A?{style:`font-size: ${A}`}:{}}}}]},addCommands:()=>({setFontSize:A=>({chain:m})=>m().setMark("textStyle",{fontSize:A}).run(),unsetFontSize:()=>({chain:A})=>A().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()})})},54920:(Yt,Tt,c)=>{c.r(Tt),c.d(Tt,{TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>y,createGroupExtension:()=>A});var C=c(27863),l=c(12867);const y={groupNodeClass:"tui-group-node",groupPointerNodeClass:"tui-group-pointer",nested:!0,draggable:!0,createOnEnter:!1},A=(m={})=>{const{draggable:ot,nested:N,groupNodeClass:G,groupPointerNodeClass:tt,createOnEnter:ft}=Object.assign(Object.assign({},y),m);return l.Node.create({name:"group",draggable:ot,group:"block",content:N?"block+":"block",addAttributes:()=>({style:{default:null,parseHTML:at=>at.getAttribute("style"),renderHTML:at=>at.style?{style:at.style}:{}}}),parseHTML:()=>[{tag:'div[data-type="group"]'}],renderHTML:({HTMLAttributes:at})=>["div",(0,l.mergeAttributes)(at,{"data-type":"group"}),0],addNodeView:()=>({HTMLAttributes:at,node:Mt})=>{const it=document.createElement("div"),mt=document.createElement("div");if(it.classList.add(G),mt.setAttribute("data-type","group"),at.style&&(Mt.attrs.style=at.style,mt.setAttribute("style",at.style)),ot){const Ot=document.createElement("div");Ot.classList.add(tt),Ot.innerHTML="",Ot.contentEditable="false",it.append(Ot,mt)}else it.append(mt);return{dom:it,contentDOM:mt}},addCommands(){return{setGroup:()=>({commands:at,state:Mt})=>{this.editor.chain().focus().run();const it=(0,C.Ap)(Mt,""),Ot=`<div data-type="group">${it.trim().startsWith("<p>")?it:`<p>${it}</p>`}</div>`;return at.insertContent(Ot)},setGroupHilite:at=>({editor:Mt})=>{for(let it=Mt.state.selection.$anchor,mt=it.depth;mt>0;mt--){const Ot=it.node(mt);if(Ot.type.name===this.name){setTimeout(()=>Mt.commands.updateAttributes(Ot.type,{style:`background: ${at}`}));break}}return!0},removeGroup:()=>({state:at,dispatch:Mt})=>(0,C.yU)(at,Mt,this.name)}},addKeyboardShortcuts(){return ft?{Enter:()=>this.editor.commands.setGroup()}:{}}})}},20854:(Yt,Tt,c)=>{c.r(Tt),c.d(Tt,{TUI_IFRAME_EDITOR_OPTIONS:()=>ot,TuiIframeEditorComponent:()=>G,TuiIframeEditorModule:()=>Mt,createIframeEditorExtension:()=>at});var C=c(12057),l=c(91211),y=c(95110),A=c(50259),m=c(74788);const ot=new m.OlP("[TUI_IFRAME_EDITOR_OPTIONS]",{factory:()=>({minWidth:100,maxWidth:1/0,minHeight:100,maxHeight:1/0})});var N=c(96570);let G=(()=>{class it extends y._3{constructor(Ot,kt,St,Dt){super(kt,Dt),this.options=Ot,this.sanitizer=St}get src(){var Ot;return this.sanitizer.bypassSecurityTrustResourceUrl(null!==(Ot=this.attrs.src)&&void 0!==Ot?Ot:"")}updateSize([Ot,kt]){this._width=Math.max(this.options.minWidth,Math.min(this.options.maxWidth,Ot)),this._height=Math.max(this.options.minHeight,Math.min(this.options.maxHeight,kt))}}return it.\u0275fac=function(Ot){return new(Ot||it)(m.Y36(ot),m.Y36(C.K0),m.Y36(l.H7),m.Y36(A.TuiDestroyService,2))},it.\u0275cmp=m.Xpm({type:it,selectors:[["tui-iframe-editor"]],features:[m._Bn([A.TuiDestroyService]),m.qOj],decls:2,vars:13,consts:[[3,"width","height","sizeChange"],[3,"src","width","height"]],template:function(Ot,kt){1&Ot&&(m.TgZ(0,"tui-editor-resizable",0),m.NdJ("sizeChange",function(Dt){return kt.updateSize(Dt)}),m._UZ(1,"iframe",1),m.qZA()),2&Ot&&(m.Q6J("width",kt.width)("height",kt.height),m.xp6(1),m.Udp("min-width",kt.options.minWidth)("min-height",kt.options.minHeight)("max-width",kt.options.maxWidth)("max-height",kt.options.maxHeight),m.Q6J("src",kt.src,m.uOi)("width",kt.width)("height",kt.height))},directives:[N.V],styles:["iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}"],changeDetection:0}),it})();var tt=c(40400),ft=c(12867);const at=it=>ft.Node.create({name:"iframe",group:"block",atom:!0,draggable:!1,parseHTML:()=>[{tag:'iframe[data-type="iframe-editor"]'}],addAttributes(){return{src:{default:null,keepOnSplit:!1,parseHTML:mt=>mt.getAttribute("src")},frameborder:{default:0,keepOnSplit:!1,parseHTML:mt=>mt.getAttribute("frameborder")},width:{default:"100%",keepOnSplit:!1,parseHTML:mt=>mt.getAttribute("width")},height:{default:null,keepOnSplit:!1,parseHTML:mt=>mt.getAttribute("height")},allowfullscreen:{keepOnSplit:!1,default:this.options.allowFullscreen,parseHTML:mt=>mt.getAttribute("allowfullscreen")}}},renderHTML:({HTMLAttributes:mt})=>["iframe",(0,ft.mergeAttributes)(mt,{"data-type":"iframe-editor"})],addNodeView:()=>(0,tt.x)(G,{injector:it}),addCommands(){return{setIframe:mt=>({commands:Ot,state:kt})=>{const St=kt.selection.anchor;return Ot.enter(),Ot.setTextSelection(St),Ot.insertContent({type:this.name,attrs:mt}),Ot.setTextSelection(kt.selection.anchor),!0}}}});let Mt=(()=>{class it{}return it.\u0275fac=function(Ot){return new(Ot||it)},it.\u0275mod=m.oAB({type:it}),it.\u0275inj=m.cJS({imports:[[y.Sl]]}),it})()},53380:(Yt,Tt,c)=>{c.r(Tt),c.d(Tt,{TUI_EDITOR_MAX_IMAGE_WIDTH:()=>N,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>ot,TUI_IMAGE_EDITOR_OPTIONS:()=>G,TuiImageEditorComponent:()=>ft,TuiImageEditorModule:()=>q,createImageEditorExtension:()=>St,tuiCreateImageEditorExtension:()=>pt});var C=c(12057),l=c(91211),y=c(95110),A=c(50259),m=c(74788);const ot=new m.OlP("[TUI_EDITOR_MIN_IMAGE_WIDTH]",{factory:()=>null}),N=new m.OlP("[TUI_EDITOR_MAX_IMAGE_WIDTH]",{factory:()=>null}),G=new m.OlP("[TUI_IMAGE_EDITOR_OPTIONS]",{factory:()=>({minWidth:100,maxWidth:1/0})});var tt=c(96570);let ft=(()=>{class F extends y._3{constructor(j,At,Bt,Pt,It,_t){super(Pt,_t),this.minWidth=j,this.maxWidth=At,this.options=Bt,this.sanitizer=It}get dragHandle(){var j;return null!==(j=this.attrs.draggable)&&void 0!==j?j:null}get height(){return null}get alt(){return this.attrs.alt||""}get title(){return this.attrs.title||""}get src(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.attrs.src)}updateSize([j]){var At,Bt;const Pt=null!==(At=this.minWidth)&&void 0!==At?At:this.options.minWidth,It=null!==(Bt=this.maxWidth)&&void 0!==Bt?Bt:this.options.maxWidth;this._width=Math.max(Pt,Math.min(It,j))}}return F.\u0275fac=function(j){return new(j||F)(m.Y36(ot),m.Y36(N),m.Y36(G),m.Y36(C.K0),m.Y36(l.H7),m.Y36(A.TuiDestroyService,2))},F.\u0275cmp=m.Xpm({type:F,selectors:[["tui-image-editor"]],hostVars:1,hostBindings:function(j,At){2&j&&m.uIk("data-drag-handle",At.dragHandle)},features:[m._Bn([A.TuiDestroyService]),m.qOj],decls:2,vars:10,consts:[[3,"width","autoHeight","sizeChange"],[3,"src","width","alt","title"]],template:function(j,At){1&j&&(m.TgZ(0,"tui-editor-resizable",0),m.NdJ("sizeChange",function(Pt){return At.updateSize(Pt)}),m._UZ(1,"img",1),m.qZA()),2&j&&(m.Q6J("width",At.width)("autoHeight",!0),m.xp6(1),m.Udp("min-width",At.options.minWidth,"px")("max-width",At.options.maxWidth,"px"),m.Q6J("src",At.src,m.LSH)("width",At.width)("alt",At.alt)("title",At.title))},directives:[tt.V],styles:["[data-drag-handle][_nghost-%COMP%]{cursor:move}img[_ngcontent-%COMP%]{pointer-events:none}"],changeDetection:0}),F})();var at=c(40400),Mt=c(12867),it=c(44632),mt=c(62463);const Ot=[{tag:'img[data-type="image-editor"]'}],kt={src:{default:"",keepOnSplit:!1},width:{default:300,keepOnSplit:!1},alt:{default:"",keepOnSplit:!1},title:{default:"",keepOnSplit:!1}};function St(F,{draggable:ut}={}){const j=!(0,A.tuiIsPresent)(ut)||ut;return it.Image.extend({name:"imageEditor",group:"block",atom:!0,draggable:j,parseHTML:()=>Ot,addAttributes:()=>Object.assign(Object.assign({},kt),{draggable:{default:j?"":null,keepOnSplit:!1}}),renderHTML:({HTMLAttributes:At})=>["img",(0,Mt.mergeAttributes)(At,{"data-type":"image-editor"})],addNodeView:()=>(0,at.x)(ft,{injector:F}),addCommands(){return{setEditableImage:At=>({commands:Bt})=>Bt.insertContent({type:this.name,attrs:At})}},addProseMirrorPlugins:()=>[new mt.Sy({props:{handleDOMEvents:{paste:Dt,drop:Dt}}})]})}function Dt(F,ut){var j;const At=ut instanceof DragEvent?ut.dataTransfer:ut.clipboardData,Bt=Array.from(null!==(j=null==At?void 0:At.files)&&void 0!==j?j:[]).filter(Pt=>/image/i.test(Pt.type));Bt.length&&ut.preventDefault();for(const Pt of Bt){const It=new FileReader;It.onload=_t=>{var Rt;const wt=F.state.schema.nodes.imageEditor.create({src:null===(Rt=_t.target)||void 0===Rt?void 0:Rt.result}),z=F.state.tr.replaceSelectionWith(wt);setTimeout(()=>F.dispatch(z))},It.readAsDataURL(Pt)}}function pt({injector:F,draggable:ut}){return St(F,{draggable:ut})}let q=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=m.oAB({type:F}),F.\u0275inj=m.cJS({imports:[[C.ez,y.Sl]]}),F})()},12177:(Yt,Tt,c)=>{function l(A){return A.isActive("bulletList")||A.isActive("orderedList")}c.r(Tt),c.d(Tt,{TuiTabExtension:()=>y,tuiIsOrderedOrBulletList:()=>l});const y=c(12867).Extension.create({name:"indent",addKeyboardShortcuts(){return{Tab:()=>l(this.editor)?null:this.editor.commands.insertContent("\t")}}})},82091:(Yt,Tt,c)=>{c.r(Tt),c.d(Tt,{TuiLink:()=>v});var C=c(27863),l=c(12867);const m=(g,f)=>{for(const M in f)g[M]=f[M];return g},ot="numeric",N="ascii",G="alpha",tt="asciinumeric",ft="alphanumeric",at="domain",Ot="whitespace";function kt(g,f){return g in f||(f[g]=[]),f[g]}function St(g,f,M){f[ot]&&(f[tt]=!0,f[ft]=!0),f[N]&&(f[tt]=!0,f[G]=!0),f[tt]&&(f[ft]=!0),f[G]&&(f[ft]=!0),f[ft]&&(f[at]=!0),f.emoji&&(f[at]=!0);for(const x in f){const R=kt(x,M);R.indexOf(g)<0&&R.push(g)}}function pt(g){void 0===g&&(g=null),this.j={},this.jr=[],this.jd=null,this.t=g}pt.groups={},pt.prototype={accepts(){return!!this.t},go(g){const f=this,M=f.j[g];if(M)return M;for(let x=0;x<f.jr.length;x++){const R=f.jr[x][0],Z=f.jr[x][1];if(Z&&R.test(g))return Z}return f.jd},has(g,f){return void 0===f&&(f=!1),f?g in this.j:!!this.go(g)},ta(g,f,M,x){for(let R=0;R<g.length;R++)this.tt(g[R],f,M,x)},tr(g,f,M,x){let R;return x=x||pt.groups,f&&f.j?R=f:(R=new pt(f),M&&x&&St(f,M,x)),this.jr.push([g,R]),R},ts(g,f,M,x){let R=this;const Z=g.length;if(!Z)return R;for(let W=0;W<Z-1;W++)R=R.tt(g[W]);return R.tt(g[Z-1],f,M,x)},tt(g,f,M,x){x=x||pt.groups;const R=this;if(f&&f.j)return R.j[g]=f,f;const Z=f;let W,Q=R.go(g);if(Q?(W=new pt,m(W.j,Q.j),W.jr.push.apply(W.jr,Q.jr),W.jd=Q.jd,W.t=Q.t):W=new pt,Z){if(x)if(W.t&&"string"==typeof W.t){const Ct=m(function(g,f){const M={};for(const x in f)f[x].indexOf(g)>=0&&(M[x]=!0);return M}(W.t,x),M);St(Z,Ct,x)}else M&&St(Z,M,x);W.t=Z}return R.j[g]=W,W}};const q=(g,f,M,x,R)=>g.ta(f,M,x,R),F=(g,f,M,x,R)=>g.tr(f,M,x,R),ut=(g,f,M,x,R)=>g.ts(f,M,x,R),j=(g,f,M,x,R)=>g.tt(f,M,x,R),At="WORD",Bt="UWORD",Pt="LOCALHOST",_t="UTLD",Rt="SCHEME",wt="SLASH_SCHEME",z="NUM",ct="OPENBRACE",$="OPENBRACKET",nt="OPENANGLEBRACKET",et="OPENPAREN",Et="CLOSEBRACE",$t="CLOSEBRACKET",Kt="CLOSEANGLEBRACKET",ne="CLOSEPAREN",zt="AMPERSAND",ce="APOSTROPHE",ye="ASTERISK",Oe="AT",he="BACKSLASH",Je="BACKTICK",xe="CARET",Ne="COLON",ge="COMMA",Ae="DOLLAR",Ce="DOT",Pe="EQUALS",Be="EXCLAMATION",Me="HYPHEN",ke="PERCENT",Ye="PIPE",He="PLUS",Ue="POUND",Le="QUERY",ze="QUOTE",_e="SEMI",fe="SLASH",Ee="TILDE",gt="UNDERSCORE",b="EMOJI",O="SYM";var I=Object.freeze({__proto__:null,WORD:At,UWORD:Bt,LOCALHOST:Pt,TLD:"TLD",UTLD:_t,SCHEME:Rt,SLASH_SCHEME:wt,NUM:z,WS:"WS",NL:"NL",OPENBRACE:ct,OPENBRACKET:$,OPENANGLEBRACKET:nt,OPENPAREN:et,CLOSEBRACE:Et,CLOSEBRACKET:$t,CLOSEANGLEBRACKET:Kt,CLOSEPAREN:ne,AMPERSAND:zt,APOSTROPHE:ce,ASTERISK:ye,AT:Oe,BACKSLASH:he,BACKTICK:Je,CARET:xe,COLON:Ne,COMMA:ge,DOLLAR:Ae,DOT:Ce,EQUALS:Pe,EXCLAMATION:Be,HYPHEN:Me,PERCENT:ke,PIPE:Ye,PLUS:He,POUND:Ue,QUERY:Le,QUOTE:ze,SEMI:_e,SLASH:fe,TILDE:Ee,UNDERSCORE:gt,EMOJI:b,SYM:O});const w=/[a-z]/,V=/\p{L}/u,U=/\p{Emoji}/u,Nt=/\d/,H=/\s/;let k=null,K=null;function ee(g,f,M,x,R){let Z;const W=f.length;for(let Q=0;Q<W-1;Q++){const Ct=f[Q];g.j[Ct]?Z=g.j[Ct]:(Z=new pt(x),Z.jr=R.slice(),g.j[Ct]=Z),g=Z}return Z=new pt(M),Z.jr=R.slice(),g.j[f[W-1]]=Z,Z}function we(g){const f=[],M=[];let x=0;for(;x<g.length;){let Z=0;for(;"0123456789".indexOf(g[x+Z])>=0;)Z++;if(Z>0){f.push(M.join(""));let W=parseInt(g.substring(x,x+Z),10);for(;W>0;W--)M.pop();x+=Z}else"_"===g[x]?(f.push(M.join("")),x++):(M.push(g[x]),x++)}return f}const $e={defaultProtocol:"http",events:null,format:S,formatHref:S,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function J(g,f){void 0===f&&(f=null);let M=m({},$e);g&&(M=m(M,g instanceof J?g.o:g));const x=M.ignoreTags,R=[];for(let Z=0;Z<x.length;Z++)R.push(x[Z].toUpperCase());this.o=M,f&&(this.defaultRender=f),this.ignoreTags=R}function S(g){return g}function vt(g,f){this.t="token",this.v=g,this.tk=f}function yt(g,f){class M extends vt{constructor(R,Z){super(R,Z),this.t=g}}for(const x in f)M.prototype[x]=f[x];return M.t=g,M}J.prototype={o:$e,ignoreTags:[],defaultRender:g=>g,check(g){return this.get("validate",g.toString(),g)},get(g,f,M){const x=null!=f;let R=this.o[g];return R&&("object"==typeof R?(R=M.t in R?R[M.t]:$e[g],"function"==typeof R&&x&&(R=R(f,M))):"function"==typeof R&&x&&(R=R(f,M.t,M)),R)},getObj(g,f,M){let x=this.o[g];return"function"==typeof x&&null!=f&&(x=x(f,M.t,M)),x},render(g){const f=g.render(this);return(this.get("render",null,g)||this.defaultRender)(f,g.t,g)}},vt.prototype={isLink:!1,toString(){return this.v},toHref(g){return this.toString()},toFormattedString(g){const f=this.toString(),M=g.get("truncate",f,this),x=g.get("format",f,this);return M&&x.length>M?x.substring(0,M)+"\u2026":x},toFormattedHref(g){return g.get("formatHref",this.toHref(g.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(g){return void 0===g&&(g=$e.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(g),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(g){return{type:this.t,value:this.toFormattedString(g),isLink:this.isLink,href:this.toFormattedHref(g),start:this.startIndex(),end:this.endIndex()}},validate(g){return g.get("validate",this.toString(),this)},render(g){const f=this,M=this.toFormattedHref(g),x=g.get("tagName",M,f),R=this.toFormattedString(g),Z={},W=g.get("className",M,f),Q=g.get("target",M,f),Ct=g.get("rel",M,f),xt=g.getObj("attributes",M,f),Ut=g.getObj("events",M,f);return Z.href=M,W&&(Z.class=W),Q&&(Z.target=Q),Ct&&(Z.rel=Ct),xt&&m(Z,xt),{tagName:x,attributes:Z,content:R,eventListeners:Ut}}};const Jt=yt("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Ft=yt("text"),Qt=yt("nl"),oe=yt("url",{isLink:!0,toHref(g){return void 0===g&&(g=$e.defaultProtocol),this.hasProtocol()?this.v:`${g}://${this.v}`},hasProtocol(){const g=this.tk;return g.length>=2&&g[0].t!==Pt&&g[1].t===Ne}}),se=g=>new pt(g);function Re(g,f,M){return new g(f.slice(M[0].s,M[M.length-1].e),M)}const We="undefined"!=typeof console&&console&&console.warn||(()=>{}),ue={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function hn(g,f){if(void 0===f&&(f=!1),ue.initialized&&We(`linkifyjs: already initialized - will not register custom scheme "${g}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(g))throw new Error('linkifyjs: incorrect scheme format.\n 1. Must only contain digits, lowercase ASCII letters or "-"\n 2. Cannot start or end with "-"\n 3. "-" cannot repeat');ue.customSchemes.push([g,f])}function Tn(g){return ue.initialized||function(){ue.scanner=function(g){void 0===g&&(g=[]);const f={};pt.groups=f;const M=new pt;null==k&&(k=we("aaa1rp3barth4b_ott3vie4c1le2ogado5udhabi7c_ademy5centure6ountant_s9o1tor4d_s1ult4e_g1ro2tna4f_l1rica5g_akhan5ency5i_g1rbus3force5tel5kdn3l_faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m_azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o_l2partments8p_le4q_uarelle8r_ab1mco4chi3my2pa2t_e3s_da2ia2sociates9t_hleta5torney7u_ction5di_ble3o3spost5thor3o_s4vianca6w_s2x_a2z_ure5ba_by2idu3namex3narepublic11d1k2r_celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b_c1t1va3cg1n2d1e_ats2uty4er2ntley5rlin4st_buy5t2f1g1h_arti5i_ble3d1ke2ng_o3o1z2j1lack_friday9ockbuster8g1omberg7ue3m_s1w2n_pparibas9o_ats3ehringer8fa2m1nd2o_k_ing5sch2tik2on4t1utique6x2r_adesco6idgestone9oadway5ker3ther5ussels7s1t1uild_ers6siness6y1zz3v1w1y1z_h3ca_b1fe2l_l1vinklein9m_era3p2non3petown5ital_one8r_avan4ds2e_er_s4s2sa1e1h1ino4t_ering5holic7ba1n1re2s2c1d1enter4o1rn3f_a1d2g1h_anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i_priani6rcle4sco3tadel4i_c2y_eats7k1l_aims4eaning6ick2nic1que6othing5ud3ub_med6m1n1o_ach3des3ffee4llege4ogne5m_cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking_channel11l1p2rsica5untry4pon_s4rses6pa2r_edit_card4union9icket5own3s1uise_s6u_isinella9v1w1x1y_mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e_al_er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si_gn4v2hl2iamonds6et2gital5rect_ory7scount3ver5h2y2j1k1m1np2o_cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c_o2deka3u_cation8e1g1mail3erck5nergy4gineer_ing9terprises10pson4quipment8r_icsson6ni3s_q1tate5t_isalat7u_rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n_s2rm_ers5shion4t3edex3edback6rrari3ero6i_at2delity5o2lm2nal1nce1ial7re_stone6mdale6sh_ing5t_ness6j1k1lickr3ghts4r2orist4wers5y2m1o_o_d_network8tball6rd1ex2sale4um3undation8x2r_ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n_d2rniture7tbol5yi3ga_l_lery3o1up4me_s3p1rden4y2b_iz3d_n2e_a1nt_ing5orge5f1g_ee3h1i_ft_s3ves2ing5l_ass3e1obal2o4m_ail3bh2o1x2n1odaddy5ld_point6f2o_dyear5g_le4p1t1v2p1q1r_ainger5phics5tis4een3ipe3ocery4up4s1t1u_ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc_bank7ealth_care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k_t2m1n1ockey4ldings5iday5medepot5goods5s_ense7nda3rse3spital5t_ing5t_eles2s3mail5use3w2r1sbc3t1u_ghes5yatt3undai7ibm2cbc2e1u2d1e_ee3fm2kano4l1m_amat4db2mo_bilien9n_c1dustries8finiti5o2g1k1stitute6urance4e4t_ernational10uit4vestments10o1piranga7q1r_ish4s_maili5t_anbul7t_au2v3jaguar4va3cb2e_ep2tzt3welry6io2ll2m_p2nj2o_bs1urg4t1y2p_morgan6rs3uegos4niper7kaufen5ddi3e_rryhotels6logistics9properties14fh2g1h1i_a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p_mg2n2r_d1ed3uokgroup8w1y_oto4z2la_caixa5mborghini8er3ncaster5ia3d_rover6xess5salle5t_ino3robe5w_yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i_dl2fe_insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan_s3cker3us3l1ndon4tte1o3ve3pl_financial11r1s1t_d_a3u_ndbeck6xe1ury5v1y2ma_cys3drid4if1son4keup4n_agement7go3p1rket_ing3s4riott5shalls7serati6ttel5ba2c_kinsey7d1e_d_ia3et2lbourne7me1orial6n_u2rckmsd7g1h1iami3crosoft7l1ni1t2t_subishi9k1l_b1s2m_a2n1o_bi_le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to_rcycles9v_ie4p1q1r1s_d2t_n1r2u_seum3ic3tual5v1w1x1y1z2na_b1goya4me2tura4vy3ba2c1e_c1t_bank4flix4work5ustar5w_s2xt_direct7us4f_l2g_o2hk2i_co2ke1on3nja3ssan1y5l1o_kia3rthwesternmutual14on4w_ruz3tv4p1r_a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan_group9dnavy5lo3m_ega4ne1g1l_ine5oo2pen3racle3nge4g_anic5igins6saka4tsuka4t2vh3pa_ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e_t2f_izer5g1h_armacy6d1ilips5one2to_graphy6s4ysio5ics1tet2ures6d1n_g1k2oneer5zza4k1l_ace2y_station9umbing5s3m1n_c2ohl2ker3litie5rn2st3r_america6xi3ess3ime3o_d_uctions8f1gressive8mo2perties3y5tection8u_dential9s1t1ub2w_c2y2qa1pon3uebec3st5racing4dio4e_ad1lestate6tor2y4cipes5d_stone5umbrella9hab3ise_n3t2liance6n_t_als5pair3ort3ublican8st_aurant8view_s5xroth6ich_ardli6oh3l1o1p2o_cher3ks3deo3gers4om3s_vp3u_gby3hr2n2w_e2yukyu6sa_arland6fe_ty4kura4le1on3msclub4ung5ndvik_coromant12ofi4p1rl2s1ve2xo3b_i1s2c_a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e_arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x_y3fr2g1h_angrila6rp2w2ell3ia1ksha5oes2p_ping5uji3w_time7i_lk2na1gles5te3j1k_i_n2y_pe4l_ing4m_art3ile4n_cf3o_ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa_ce3ort2t3r_l2s1t_ada2ples4r1tebank4farm7c_group6ockholm6rage3e3ream4udio2y3yle4u_cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y_dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x_i3c_i2d_k2eam2ch_nology8l1masek5nnis4va3f1g1h_d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j_maxx4x2k_maxx5l1m_all4n1o_day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r_ade1ing4ining5vel_channel7ers_insurance16ust3v2t1ube2i1nes3shu4v_s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va_cations7na1guard7c1e_gas3ntures6risign5m\xf6gensberater2ung14sicherung10t2g1i_ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u_elos6wales2mart4ter4ng_gou5tch_es6eather_channel12bcam3er2site5d_ding5ibo2r3f1hoswho6ien2ki2lliamhill9n_dows4e1ners6me2olterskluwer11odside6rk_s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u_tube6t1un3za_ppos4ra3ero3ip2m1one3uerich6w2")),null==K&&(K=we("\u03b5\u03bb1\u03c52\u0431\u04331\u0435\u043b3\u0434\u0435\u0442\u04384\u0435\u044e2\u043a\u0430\u0442\u043e\u043b\u0438\u043a6\u043e\u043c3\u043c\u043a\u04342\u043e\u043d1\u0441\u043a\u0432\u04306\u043e\u043d\u043b\u0430\u0439\u043d5\u0440\u04333\u0440\u0443\u04412\u04442\u0441\u0430\u0439\u04423\u0440\u04313\u0443\u043a\u04403\u049b\u0430\u04373\u0570\u0561\u05753\u05d9\u05e9\u05e8\u05d0\u05dc5\u05e7\u05d5\u05dd3\u0627\u0628\u0648\u0638\u0628\u064a5\u062a\u0635\u0627\u0644\u0627\u062a6\u0631\u0627\u0645\u0643\u06485\u0644\u0627\u0631\u062f\u06464\u0628\u062d\u0631\u064a\u06465\u062c\u0632\u0627\u0626\u06315\u0633\u0639\u0648\u062f\u064a\u06296\u0639\u0644\u064a\u0627\u06465\u0645\u063a\u0631\u06285\u0645\u0627\u0631\u0627\u062a5\u06cc\u0631\u0627\u06465\u0628\u0627\u0631\u062a2\u0632\u0627\u06314\u064a\u062a\u06433\u06be\u0627\u0631\u062a5\u062a\u0648\u0646\u06334\u0633\u0648\u062f\u0627\u06463\u0631\u064a\u06295\u0634\u0628\u0643\u06294\u0639\u0631\u0627\u06422\u06282\u0645\u0627\u06464\u0641\u0644\u0633\u0637\u064a\u06466\u0642\u0637\u06313\u0643\u0627\u062b\u0648\u0644\u064a\u06436\u0648\u06453\u0645\u0635\u06312\u0644\u064a\u0633\u064a\u06275\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u06277\u0642\u06394\u0647\u0645\u0631\u0627\u06475\u067e\u0627\u06a9\u0633\u062a\u0627\u06467\u0680\u0627\u0631\u062a4\u0915\u0949\u092e3\u0928\u0947\u091f3\u092d\u093e\u0930\u0924_\u092e\u094d3\u094b\u09245\u0938\u0902\u0917\u0920\u09285\u09ac\u09be\u0982\u09b2\u09be5\u09ad\u09be\u09b0\u09a42\u09f0\u09a44\u0a2d\u0a3e\u0a30\u0a244\u0aad\u0abe\u0ab0\u0aa44\u0b2d\u0b3e\u0b30\u0b244\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe6\u0bb2\u0b99\u0bcd\u0b95\u0bc86\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd11\u0c2d\u0c3e\u0c30\u0c24\u0c4d5\u0cad\u0cbe\u0cb0\u0ca44\u0d2d\u0d3e\u0d30\u0d24\u0d025\u0dbd\u0d82\u0d9a\u0dcf4\u0e04\u0e2d\u0e213\u0e44\u0e17\u0e223\u0ea5\u0eb2\u0ea73\u10d2\u10d42\u307f\u3093\u306a3\u30a2\u30de\u30be\u30f34\u30af\u30e9\u30a6\u30c94\u30b0\u30fc\u30b0\u30eb4\u30b3\u30e02\u30b9\u30c8\u30a23\u30bb\u30fc\u30eb3\u30d5\u30a1\u30c3\u30b7\u30e7\u30f36\u30dd\u30a4\u30f3\u30c84\u4e16\u754c2\u4e2d\u4fe11\u56fd1\u570b1\u6587\u7f513\u4e9a\u9a6c\u900a3\u4f01\u4e1a2\u4f5b\u5c712\u4fe1\u606f2\u5065\u5eb72\u516b\u53662\u516c\u53f81\u76ca2\u53f0\u6e7e1\u70632\u5546\u57ce1\u5e971\u68072\u5609\u91cc_\u5927\u9152\u5e975\u5728\u7ebf2\u5927\u62ff2\u5929\u4e3b\u65593\u5a31\u4e502\u5bb6\u96fb2\u5e7f\u4e1c2\u5fae\u535a2\u6148\u55842\u6211\u7231\u4f603\u624b\u673a2\u62db\u80582\u653f\u52a11\u5e9c2\u65b0\u52a0\u57612\u95fb2\u65f6\u5c1a2\u66f8\u7c4d2\u673a\u67842\u6de1\u9a6c\u95213\u6e38\u620f2\u6fb3\u95802\u70b9\u770b2\u79fb\u52a82\u7ec4\u7ec7\u673a\u67844\u7f51\u57401\u5e971\u7ad91\u7edc2\u8054\u901a2\u8c37\u6b4c2\u8d2d\u72692\u901a\u8ca92\u96c6\u56e22\u96fb\u8a0a\u76c8\u79d14\u98de\u5229\u6d663\u98df\u54c12\u9910\u53852\u9999\u683c\u91cc\u62c93\u6e2f2\ub2f7\ub1371\ucef42\uc0bc\uc1312\ud55c\uad6d2")),j(M,"'",ce),j(M,"{",ct),j(M,"[",$),j(M,"<",nt),j(M,"(",et),j(M,"}",Et),j(M,"]",$t),j(M,">",Kt),j(M,")",ne),j(M,"&",zt),j(M,"*",ye),j(M,"@",Oe),j(M,"`",Je),j(M,"^",xe),j(M,":",Ne),j(M,",",ge),j(M,"$",Ae),j(M,".",Ce),j(M,"=",Pe),j(M,"!",Be),j(M,"-",Me),j(M,"%",ke),j(M,"|",Ye),j(M,"+",He),j(M,"#",Ue),j(M,"?",Le),j(M,'"',ze),j(M,"/",fe),j(M,";",_e),j(M,"~",Ee),j(M,"_",gt),j(M,"\\",he);const x=F(M,Nt,z,{[ot]:!0});F(x,Nt,x);const R=F(M,w,At,{[N]:!0});F(R,w,R);const Z=F(M,V,Bt,{[G]:!0});F(Z,w),F(Z,V,Z);const W=F(M,H,"WS",{[Ot]:!0});j(M,"\n","NL",{[Ot]:!0}),j(W,"\n"),F(W,H,W);const Q=F(M,U,b,{emoji:!0});F(Q,U,Q),j(Q,"\ufe0f",Q);const Ct=j(Q,"\u200d");F(Ct,U,Q);const xt=[[w,R]],Ut=[[w,null],[V,Z]];for(let Wt=0;Wt<k.length;Wt++)ee(M,k[Wt],"TLD",At,xt);for(let Wt=0;Wt<K.length;Wt++)ee(M,K[Wt],_t,Bt,Ut);St("TLD",{tld:!0,ascii:!0},f),St(_t,{utld:!0,alpha:!0},f),ee(M,"file",Rt,At,xt),ee(M,"mailto",Rt,At,xt),ee(M,"http",wt,At,xt),ee(M,"https",wt,At,xt),ee(M,"ftp",wt,At,xt),ee(M,"ftps",wt,At,xt),St(Rt,{scheme:!0,ascii:!0},f),St(wt,{slashscheme:!0,ascii:!0},f),g=g.sort((Wt,jt)=>Wt[0]>jt[0]?1:-1);for(let Wt=0;Wt<g.length;Wt++){const jt=g[Wt][0],ie=g[Wt][1]?{scheme:!0}:{slashscheme:!0};jt.indexOf("-")>=0?ie[at]=!0:w.test(jt)?Nt.test(jt)?ie[tt]=!0:ie[N]=!0:ie[ot]=!0,ut(M,jt,jt,ie)}return ut(M,"localhost",Pt,{ascii:!0}),M.jd=new pt(O),{start:M,tokens:m({groups:f},I)}}(ue.customSchemes);for(let g=0;g<ue.tokenQueue.length;g++)ue.tokenQueue[g][1]({scanner:ue.scanner});ue.parser=function(g){let{groups:f}=g;const M=f.domain.concat([zt,ye,Oe,he,Je,xe,Ae,Pe,Me,z,ke,Ye,He,Ue,fe,O,Ee,gt]),x=[ce,Kt,Et,$t,ne,Ne,ge,Ce,Be,nt,ct,$,et,Le,ze,_e],R=[zt,ce,ye,he,Je,xe,Et,Ae,Pe,Me,z,ct,ke,Ye,He,Ue,Le,fe,O,Ee,gt],Z=se(),W=j(Z,Ee);q(W,R,W),q(W,f.domain,W);const Q=se(),Ct=se(),xt=se();q(Z,f.domain,Q),q(Z,f.scheme,Ct),q(Z,f.slashscheme,xt),q(Q,R,W),q(Q,f.domain,Q);const Ut=j(Q,Oe);j(W,Oe,Ut),j(Ct,Oe,Ut),j(xt,Oe,Ut);const Wt=j(W,Ce);q(Wt,R,W),q(Wt,f.domain,W);const jt=se();q(Ut,f.domain,jt),q(jt,f.domain,jt);const re=j(jt,Ce);q(re,f.domain,jt);const ie=se(Jt);q(re,f.tld,ie),q(re,f.utld,ie),j(Ut,Pt,ie);const be=j(jt,Me);q(be,f.domain,jt),q(ie,f.domain,jt),j(ie,Ce,re),j(ie,Me,be);const qe=j(ie,Ne);q(qe,f.numeric,Jt);const je=j(Q,Me),ve=j(Q,Ce);q(je,f.domain,Q),q(ve,R,W),q(ve,f.domain,Q);const De=se(oe);q(ve,f.tld,De),q(ve,f.utld,De),q(De,f.domain,Q),q(De,R,W),j(De,Ce,ve),j(De,Me,je),j(De,Oe,Ut);const dn=j(De,Ne),en=se(oe);q(dn,f.numeric,en);const pe=se(oe),Ie=se();q(pe,M,pe),q(pe,x,Ie),q(Ie,M,pe),q(Ie,x,Ie),j(De,fe,pe),j(en,fe,pe);const Fe=j(Ct,Ne),Vn=j(xt,Ne),Qn=j(Vn,fe);j(Qn,fe,Fe),q(Ct,f.domain,Q),j(Ct,Ce,ve),j(Ct,Me,je),q(xt,f.domain,Q),j(xt,Ce,ve),j(xt,Me,je),q(Fe,f.domain,pe),j(Fe,fe,pe);const ln=j(pe,ct),Xe=j(pe,$),In=j(pe,nt),Cn=j(pe,et);j(Ie,ct,ln),j(Ie,$,Xe),j(Ie,nt,In),j(Ie,et,Cn),j(ln,Et,pe),j(Xe,$t,pe),j(In,Kt,pe),j(Cn,ne,pe),j(ln,Et,pe);const un=se(oe),mn=se(oe),gn=se(oe),nn=se(oe);q(ln,M,un),q(Xe,M,mn),q(In,M,gn),q(Cn,M,nn);const xn=se(),Mn=se(),tn=se(),kn=se();return q(ln,x),q(Xe,x),q(In,x),q(Cn,x),q(un,M,un),q(mn,M,mn),q(gn,M,gn),q(nn,M,nn),q(un,x,un),q(mn,x,mn),q(gn,x,gn),q(nn,x,nn),q(xn,M,xn),q(Mn,M,mn),q(tn,M,gn),q(kn,M,nn),q(xn,x,xn),q(Mn,x,Mn),q(tn,x,tn),q(kn,x,kn),j(mn,$t,pe),j(gn,Kt,pe),j(nn,ne,pe),j(un,Et,pe),j(Mn,$t,pe),j(tn,Kt,pe),j(kn,ne,pe),j(xn,ne,pe),j(Z,Pt,De),j(Z,"NL",Qt),{start:Z,tokens:I}}(ue.scanner.tokens);for(let g=0;g<ue.pluginQueue.length;g++)ue.pluginQueue[g][1]({scanner:ue.scanner,parser:ue.parser});ue.initialized=!0}(),function(g,f,M){let x=M.length,R=0,Z=[],W=[];for(;R<x;){let Q=g,Ct=null,xt=null,Ut=0,Wt=null,jt=-1;for(;R<x&&!(Ct=Q.go(M[R].t));)W.push(M[R++]);for(;R<x&&(xt=Ct||Q.go(M[R].t));)Ct=null,Q=xt,Q.accepts()?(jt=0,Wt=Q):jt>=0&&jt++,R++,Ut++;if(jt<0)R-=Ut,R<x&&(W.push(M[R]),R++);else{W.length>0&&(Z.push(Re(Ft,f,W)),W=[]),R-=jt,Ut-=jt;const re=Wt.t,ie=M.slice(R-Ut,R);Z.push(Re(re,f,ie))}}return W.length>0&&Z.push(Re(Ft,f,W)),Z}(ue.parser.start,g,function(g,f){const M=function(g){const f=[],M=g.length;let x=0;for(;x<M;){let Z,R=g.charCodeAt(x),W=R<55296||R>56319||x+1===M||(Z=g.charCodeAt(x+1))<56320||Z>57343?g[x]:g.slice(x,x+2);f.push(W),x+=W.length}return f}(f.replace(/[A-Z]/g,Q=>Q.toLowerCase())),x=M.length,R=[];let Z=0,W=0;for(;W<x;){let Q=g,Ct=null,xt=0,Ut=null,Wt=-1,jt=-1;for(;W<x&&(Ct=Q.go(M[W]));)Q=Ct,Q.accepts()?(Wt=0,jt=0,Ut=Q):Wt>=0&&(Wt+=M[W].length,jt++),xt+=M[W].length,Z+=M[W].length,W++;Z-=Wt,W-=jt,xt-=Wt,R.push({t:Ut.t,v:f.slice(Z-xt,Z),s:Z-xt,e:Z})}return R}(ue.scanner.start,g))}function On(g,f,M){if(void 0===f&&(f=null),void 0===M&&(M=null),f&&"object"==typeof f){if(M)throw Error(`linkifyjs: Invalid link type ${f}; must be a string`);M=f,f=null}const x=new J(M),R=Tn(g),Z=[];for(let W=0;W<R.length;W++){const Q=R[W];Q.isLink&&(!f||Q.t===f)&&Z.push(Q.toFormattedObject(x))}return Z}function vn(g,f){void 0===f&&(f=null);const M=Tn(g);return 1===M.length&&M[0].isLink&&(!f||M[0].t===f)}var Qe=c(62463);const v=l.Mark.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(g=>{"string"!=typeof g?hn(g.scheme,g.optionalSlashes):hn(g)})},onDestroy(){pt.groups={},ue.scanner=null,ue.parser=null,ue.tokenQueue=[],ue.pluginQueue=[],ue.customSchemes=[],ue.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}),addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML:()=>[{tag:'a[href]:not([href *= "javascript:" i])'}],renderHTML({HTMLAttributes:g}){return["a",(0,l.mergeAttributes)(this.options.HTMLAttributes,g),0]},addCommands(){return{setLink:g=>({chain:f})=>f().setMark(this.name,g).setMeta("preventAutolink",!0).run(),toggleLink:g=>({chain:f})=>f().toggleMark(this.name,g,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:g})=>g().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[(0,l.markPasteRule)({find:g=>On(g).filter(f=>!this.options.validate||this.options.validate(f.value)).filter(f=>f.isLink).map(f=>({text:f.value,index:f.start,data:f})),type:this.type,getAttributes:g=>{var f;return{href:null===(f=g.data)||void 0===f?void 0:f.href}}})]},addProseMirrorPlugins(){const g=[];return this.options.autolink&&g.push(function(g){return new Qe.Sy({key:new Qe.H$("autolink"),appendTransaction:(f,M,x)=>{const R=f.some(Ut=>Ut.docChanged)&&!M.doc.eq(x.doc),Z=f.some(Ut=>Ut.getMeta("preventAutolink"));if(!R||Z)return;const{tr:W}=x,Q=(0,l.combineTransactionSteps)(M.doc,[...f]),{mapping:Ct}=Q;return(0,l.getChangedRanges)(Q).forEach(({oldRange:Ut,newRange:Wt})=>{(0,l.getMarksBetween)(Ut.from,Ut.to,M.doc).filter(be=>be.mark.type===g.type).forEach(be=>{const qe=Ct.map(be.from),je=Ct.map(be.to),ve=(0,l.getMarksBetween)(qe,je,x.doc).filter(Fe=>Fe.mark.type===g.type);if(!ve.length)return;const De=ve[0],dn=M.doc.textBetween(be.from,be.to,void 0," "),en=x.doc.textBetween(De.from,De.to,void 0," "),pe=vn(dn),Ie=vn(en);pe&&!Ie&&W.removeMark(De.from,De.to,g.type)});const jt=(0,l.findChildrenInRange)(x.doc,Wt,be=>be.isTextblock);let re,ie;if(jt.length>1?(re=jt[0],ie=x.doc.textBetween(re.pos,re.pos+re.node.nodeSize,void 0," ")):jt.length&&x.doc.textBetween(Wt.from,Wt.to," "," ").endsWith(" ")&&(re=jt[0],ie=x.doc.textBetween(re.pos,Wt.to,void 0," ")),re&&ie){const be=ie.split(" ").filter(ve=>""!==ve);if(be.length<=0)return!1;const qe=be[be.length-1],je=re.pos+ie.lastIndexOf(qe);if(!qe)return!1;On(qe).filter(ve=>ve.isLink).filter(ve=>!g.validate||g.validate(ve.value)).map(ve=>me(Gt({},ve),{from:je+ve.start+1,to:je+ve.end+1})).forEach(ve=>{W.addMark(ve.from,ve.to,g.type.create({href:ve.href}))})}}),W.steps.length?W:void 0}})}({type:this.type,validate:this.options.validate})),this.options.openOnClick&&g.push(function(g){return new Qe.Sy({key:new Qe.H$("handleClickLink"),props:{handleClick:(f,M,x)=>{var R,Z,W;if(0!==x.button)return!1;const Q=(0,l.getAttributes)(f.state,g.type.name),Ct=null===(R=x.target)||void 0===R?void 0:R.closest("a"),xt=null!==(Z=null==Ct?void 0:Ct.href)&&void 0!==Z?Z:Q.href,Ut=null!==(W=null==Ct?void 0:Ct.target)&&void 0!==W?W:Q.target;return!(!Ct||!xt||(window.open(xt,Ut),0))}}})}({type:this.type})),this.options.linkOnPaste&&g.push(function(g){return new Qe.Sy({key:new Qe.H$("handlePasteLink"),props:{handlePaste:(f,M,x)=>{const{state:R}=f,{selection:Z}=R,{empty:W}=Z;if(W)return!1;let Q="";x.content.forEach(xt=>{Q+=xt.textContent});const Ct=On(Q).find(xt=>xt.isLink&&xt.value===Q);return!(!Q||!Ct||(g.editor.commands.setMark(g.type,{href:Ct.href}),0))}}})}({editor:this.editor,type:this.type})),g}}).extend({addAttributes(){var g;return Object.assign(Object.assign({},null===(g=this.parent)||void 0===g?void 0:g.call(this)),(0,C.x6)(["download"]))},addCommands(){var g;return Object.assign(Object.assign({},null===(g=this.parent)||void 0===g?void 0:g.call(this)),{toggleLink:f=>({chain:M,state:x})=>{{const{selection:R,doc:Z}=x,W=Z.cut(R.to,R.to+1),Ct=" "===(0,l.getHTMLFromFragment)(W.content,x.schema).replace(/<\/?[^>]+(>|$)/g,""),xt=M().toggleMark(this.name,f,{extendEmptyMarkRange:!0});return(Ct?xt.setTextSelection(R.to+1):xt.setTextSelection(R.to).insertContent('<span style="font-size: 15px"> </span>')).run()}}})}}).configure({openOnClick:!1})},41512:(Yt,Tt,c)=>{c.r(Tt),c.d(Tt,{TuiAudio:()=>y,TuiSource:()=>A,TuiVideo:()=>m});var C=c(27863),l=c(12867);const y=l.Node.create({name:"audio",group:"block",content:"source+",addAttributes:()=>(0,C.x6)(["id","class","src","style","controls","loop","muted","preload","autoplay","width","height"]),parseHTML:()=>[{tag:"audio"}],renderHTML:({node:ot,HTMLAttributes:N})=>["audio",N,...(0,C.YX)(ot)]}),A=l.Node.create({name:"source",addAttributes:()=>(0,C.x6)(["src","type","width","height","media","sizes","srcset"]),parseHTML:()=>[{tag:"source"}],renderHTML:({HTMLAttributes:ot})=>["source",(0,l.mergeAttributes)(ot)]}),m=l.Node.create({name:"video",group:"block",content:"source+",addAttributes:()=>(0,C.x6)(["id","class","src","style","controls","loop","muted","preload","autoplay","width","height"]),parseHTML:()=>[{tag:"video"}],renderHTML:({node:ot,HTMLAttributes:N})=>["video",N,...(0,C.YX)(ot)]})},2823:(Yt,Tt,c)=>{c.r(Tt),c.d(Tt,{StarterKit:()=>$e});var C=c(12867);const l=/^\s*>\s$/,y=C.Node.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:J}){return["blockquote",(0,C.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{setBlockquote:()=>({commands:J})=>J.wrapIn(this.name),toggleBlockquote:()=>({commands:J})=>J.toggleWrap(this.name),unsetBlockquote:()=>({commands:J})=>J.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,C.wrappingInputRule)({find:l,type:this.type})]}}),A=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,m=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,ot=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,N=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,G=C.Mark.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:J=>"normal"!==J.style.fontWeight&&null},{style:"font-weight",getAttrs:J=>/^(bold(er)?|[5-9]\d{2,})$/.test(J)&&null}],renderHTML({HTMLAttributes:J}){return["strong",(0,C.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{setBold:()=>({commands:J})=>J.setMark(this.name),toggleBold:()=>({commands:J})=>J.toggleMark(this.name),unsetBold:()=>({commands:J})=>J.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,C.markInputRule)({find:A,type:this.type}),(0,C.markInputRule)({find:ot,type:this.type})]},addPasteRules(){return[(0,C.markPasteRule)({find:m,type:this.type}),(0,C.markPasteRule)({find:N,type:this.type})]}}),tt=C.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:J}){return["li",(0,C.mergeAttributes)(this.options.HTMLAttributes,J),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ft=C.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:J=>!!J.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:J}){return["span",(0,C.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:J,commands:S})=>{const st=(0,C.getMarkAttributes)(J,this.type);return!!Object.entries(st).some(([,yt])=>!!yt)||S.unsetMark(this.name)}}}}),at=/^\s*([-+*])\s$/,Mt=C.Node.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:J}){return["ul",(0,C.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{toggleBulletList:()=>({commands:J,chain:S})=>this.options.keepAttributes?S().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(tt.name,this.editor.getAttributes(ft.name)).run():J.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let J=(0,C.wrappingInputRule)({find:at,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(J=(0,C.wrappingInputRule)({find:at,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ft.name),editor:this.editor})),[J]}}),it=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,mt=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,Ot=C.Mark.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:J}){return["code",(0,C.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{setCode:()=>({commands:J})=>J.setMark(this.name),toggleCode:()=>({commands:J})=>J.toggleMark(this.name),unsetCode:()=>({commands:J})=>J.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,C.markInputRule)({find:it,type:this.type})]},addPasteRules(){return[(0,C.markPasteRule)({find:mt,type:this.type})]}});var kt=c(62463);const St=/^```([a-z]+)?[\s\n]$/,Dt=/^~~~([a-z]+)?[\s\n]$/,pt=C.Node.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:J=>{var S;const{languageClassPrefix:st}=this.options;return[...(null===(S=J.firstElementChild)||void 0===S?void 0:S.classList)||[]].filter(Ft=>Ft.startsWith(st)).map(Ft=>Ft.replace(st,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:J,HTMLAttributes:S}){return["pre",(0,C.mergeAttributes)(this.options.HTMLAttributes,S),["code",{class:J.attrs.language?this.options.languageClassPrefix+J.attrs.language:null},0]]},addCommands(){return{setCodeBlock:J=>({commands:S})=>S.setNode(this.name,J),toggleCodeBlock:J=>({commands:S})=>S.toggleNode(this.name,"paragraph",J)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:J,$anchor:S}=this.editor.state.selection;return!(!J||S.parent.type.name!==this.name)&&!(1!==S.pos&&S.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:J})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:S}=J,{selection:st}=S,{$from:vt,empty:yt}=st;if(!yt||vt.parent.type!==this.type)return!1;const Jt=vt.parentOffset===vt.parent.nodeSize-2,Ft=vt.parent.textContent.endsWith("\n\n");return!(!Jt||!Ft)&&J.chain().command(({tr:Qt})=>(Qt.delete(vt.pos-2,vt.pos),!0)).exitCode().run()},ArrowDown:({editor:J})=>{if(!this.options.exitOnArrowDown)return!1;const{state:S}=J,{selection:st,doc:vt}=S,{$from:yt,empty:Jt}=st;if(!Jt||yt.parent.type!==this.type||yt.parentOffset!==yt.parent.nodeSize-2)return!1;const Qt=yt.after();return void 0!==Qt&&!vt.nodeAt(Qt)&&J.commands.exitCode()}}},addInputRules(){return[(0,C.textblockTypeInputRule)({find:St,type:this.type,getAttributes:J=>({language:J[1]})}),(0,C.textblockTypeInputRule)({find:Dt,type:this.type,getAttributes:J=>({language:J[1]})})]},addProseMirrorPlugins(){return[new kt.Sy({key:new kt.H$("codeBlockVSCodeHandler"),props:{handlePaste:(J,S)=>{if(!S.clipboardData||this.editor.isActive(this.type.name))return!1;const st=S.clipboardData.getData("text/plain"),vt=S.clipboardData.getData("vscode-editor-data"),yt=vt?JSON.parse(vt):void 0,Jt=null==yt?void 0:yt.mode;if(!st||!Jt)return!1;const{tr:Ft}=J.state;return Ft.replaceSelectionWith(this.type.create({language:Jt})),Ft.setSelection(kt.Bs.near(Ft.doc.resolve(Math.max(0,Ft.selection.from-2)))),Ft.insertText(st.replace(/\r\n?/g,"\n")),Ft.setMeta("paste",!0),J.dispatch(Ft),!0}}})]}}),q=C.Node.create({name:"doc",topNode:!0,content:"block+"});var F=c(38480);function ut(J={}){return new kt.Sy({view:S=>new j(S,J)})}class j{constructor(S,st){var vt;this.editorView=S,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(vt=st.width)&&void 0!==vt?vt:1,this.color=!1===st.color?void 0:st.color||"black",this.class=st.class,this.handlers=["dragover","dragend","drop","dragleave"].map(yt=>{let Jt=Ft=>{this[yt](Ft)};return S.dom.addEventListener(yt,Jt),{name:yt,handler:Jt}})}destroy(){this.handlers.forEach(({name:S,handler:st})=>this.editorView.dom.removeEventListener(S,st))}update(S,st){null!=this.cursorPos&&st.doc!=S.state.doc&&(this.cursorPos>S.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(S){S!=this.cursorPos&&(this.cursorPos=S,null==S?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let vt,S=this.editorView.state.doc.resolve(this.cursorPos),st=!S.parent.inlineContent;if(st){let Qt=S.nodeBefore,oe=S.nodeAfter;if(Qt||oe){let Te=this.editorView.nodeDOM(this.cursorPos-(Qt?Qt.nodeSize:0));if(Te){let se=Te.getBoundingClientRect(),le=Qt?se.bottom:se.top;Qt&&oe&&(le=(le+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),vt={left:se.left,right:se.right,top:le-this.width/2,bottom:le+this.width/2}}}}if(!vt){let Qt=this.editorView.coordsAtPos(this.cursorPos);vt={left:Qt.left-this.width/2,right:Qt.left+this.width/2,top:Qt.top,bottom:Qt.bottom}}let Jt,Ft,yt=this.editorView.dom.offsetParent;if(this.element||(this.element=yt.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",st),this.element.classList.toggle("prosemirror-dropcursor-inline",!st),!yt||yt==document.body&&"static"==getComputedStyle(yt).position)Jt=-pageXOffset,Ft=-pageYOffset;else{let Qt=yt.getBoundingClientRect();Jt=Qt.left-yt.scrollLeft,Ft=Qt.top-yt.scrollTop}this.element.style.left=vt.left-Jt+"px",this.element.style.top=vt.top-Ft+"px",this.element.style.width=vt.right-vt.left+"px",this.element.style.height=vt.bottom-vt.top+"px"}scheduleRemoval(S){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),S)}dragover(S){if(!this.editorView.editable)return;let st=this.editorView.posAtCoords({left:S.clientX,top:S.clientY}),vt=st&&st.inside>=0&&this.editorView.state.doc.nodeAt(st.inside),yt=vt&&vt.type.spec.disableDropCursor,Jt="function"==typeof yt?yt(this.editorView,st,S):yt;if(st&&!Jt){let Ft=st.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let Qt=(0,F.nj)(this.editorView.state.doc,Ft,this.editorView.dragging.slice);null!=Qt&&(Ft=Qt)}this.setCursor(Ft),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(S){(S.target==this.editorView.dom||!this.editorView.dom.contains(S.relatedTarget))&&this.setCursor(null)}}const At=C.Extension.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[ut(this.options)]}});var Bt=c(70768),Pt=c(77346),It=c(43594);class _t extends kt.Y1{constructor(S){super(S,S)}map(S,st){let vt=S.resolve(st.map(this.head));return _t.valid(vt)?new _t(vt):kt.Y1.near(vt)}content(){return Pt.p2.empty}eq(S){return S instanceof _t&&S.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(S,st){if("number"!=typeof st.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new _t(S.resolve(st.pos))}getBookmark(){return new Rt(this.anchor)}static valid(S){let st=S.parent;if(st.isTextblock||!function(J){for(let S=J.depth;S>=0;S--){let st=J.index(S),vt=J.node(S);if(0!=st)for(let yt=vt.child(st-1);;yt=yt.lastChild){if(0==yt.childCount&&!yt.inlineContent||yt.isAtom||yt.type.spec.isolating)return!0;if(yt.inlineContent)return!1}else if(vt.type.spec.isolating)return!0}return!0}(S)||!function(J){for(let S=J.depth;S>=0;S--){let st=J.indexAfter(S),vt=J.node(S);if(st!=vt.childCount)for(let yt=vt.child(st);;yt=yt.firstChild){if(0==yt.childCount&&!yt.inlineContent||yt.isAtom||yt.type.spec.isolating)return!0;if(yt.inlineContent)return!1}else if(vt.type.spec.isolating)return!0}return!0}(S))return!1;let vt=st.type.spec.allowGapCursor;if(null!=vt)return vt;let yt=st.contentMatchAt(S.index()).defaultType;return yt&&yt.isTextblock}static findGapCursorFrom(S,st,vt=!1){t:for(;;){if(!vt&&_t.valid(S))return S;let yt=S.pos,Jt=null;for(let Ft=S.depth;;Ft--){let Qt=S.node(Ft);if(st>0?S.indexAfter(Ft)<Qt.childCount:S.index(Ft)>0){Jt=Qt.child(st>0?S.indexAfter(Ft):S.index(Ft)-1);break}if(0==Ft)return null;yt+=st;let oe=S.doc.resolve(yt);if(_t.valid(oe))return oe}for(;;){let Ft=st>0?Jt.firstChild:Jt.lastChild;if(!Ft){if(Jt.isAtom&&!Jt.isText&&!kt.qv.isSelectable(Jt)){S=S.doc.resolve(yt+Jt.nodeSize*st),vt=!1;continue t}break}Jt=Ft,yt+=st;let Qt=S.doc.resolve(yt);if(_t.valid(Qt))return Qt}return null}}}_t.prototype.visible=!1,_t.findFrom=_t.findGapCursorFrom,kt.Y1.jsonID("gapcursor",_t);class Rt{constructor(S){this.pos=S}map(S){return new Rt(S.map(this.pos))}resolve(S){let st=S.resolve(this.pos);return _t.valid(st)?new _t(st):kt.Y1.near(st)}}const dt=(0,Bt.$)({ArrowLeft:ct("horiz",-1),ArrowRight:ct("horiz",1),ArrowUp:ct("vert",-1),ArrowDown:ct("vert",1)});function ct(J,S){const st="vert"==J?S>0?"down":"up":S>0?"right":"left";return function(vt,yt,Jt){let Ft=vt.selection,Qt=S>0?Ft.$to:Ft.$from,oe=Ft.empty;if(Ft instanceof kt.Bs){if(!Jt.endOfTextblock(st)||0==Qt.depth)return!1;oe=!1,Qt=vt.doc.resolve(S>0?Qt.after():Qt.before())}let Te=_t.findGapCursorFrom(Qt,S,oe);return!!Te&&(yt&&yt(vt.tr.setSelection(new _t(Te))),!0)}}function $(J,S,st){if(!J||!J.editable)return!1;let vt=J.state.doc.resolve(S);if(!_t.valid(vt))return!1;let yt=J.posAtCoords({left:st.clientX,top:st.clientY});return!(yt&&yt.inside>-1&&kt.qv.isSelectable(J.state.doc.nodeAt(yt.inside))||(J.dispatch(J.state.tr.setSelection(new _t(vt))),0))}function nt(J,S){if("insertCompositionText"!=S.inputType||!(J.state.selection instanceof _t))return!1;let{$from:st}=J.state.selection,vt=st.parent.contentMatchAt(st.index()).findWrapping(J.state.schema.nodes.text);if(!vt)return!1;let yt=Pt.HY.empty;for(let Ft=vt.length-1;Ft>=0;Ft--)yt=Pt.HY.from(vt[Ft].createAndFill(null,yt));let Jt=J.state.tr.replace(st.pos,st.pos,new Pt.p2(yt,0,0));return Jt.setSelection(kt.Bs.near(Jt.doc.resolve(st.pos+1))),J.dispatch(Jt),!1}function et(J){if(!(J.selection instanceof _t))return null;let S=document.createElement("div");return S.className="ProseMirror-gapcursor",It.EH.create(J.doc,[It.p.widget(J.selection.head,S,{key:"gapcursor"})])}const Et=C.Extension.create({name:"gapCursor",addProseMirrorPlugins:()=>[new kt.Sy({props:{decorations:et,createSelectionBetween:(J,S,st)=>S.pos==st.pos&&_t.valid(st)?new _t(st):null,handleClick:$,handleKeyDown:dt,handleDOMEvents:{beforeinput:nt}}})],extendNodeSchema(J){var S;return{allowGapCursor:null!==(S=(0,C.callOrReturn)((0,C.getExtensionField)(J,"allowGapCursor",{name:J.name,options:J.options,storage:J.storage})))&&void 0!==S?S:null}}}),$t=C.Node.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:J}){return["br",(0,C.mergeAttributes)(this.options.HTMLAttributes,J)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:J,chain:S,state:st,editor:vt})=>J.first([()=>J.exitCode(),()=>J.command(()=>{const{selection:yt,storedMarks:Jt}=st;if(yt.$from.parent.type.spec.isolating)return!1;const{keepMarks:Ft}=this.options,{splittableMarks:Qt}=vt.extensionManager,oe=Jt||yt.$to.parentOffset&&yt.$from.marks();return S().insertContent({type:this.name}).command(({tr:Te,dispatch:se})=>{if(se&&oe&&Ft){const le=oe.filter(de=>Qt.includes(de.type.name));Te.ensureMarks(le)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Kt=C.Node.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(J=>({tag:`h${J}`,attrs:{level:J}}))},renderHTML({node:J,HTMLAttributes:S}){return[`h${this.options.levels.includes(J.attrs.level)?J.attrs.level:this.options.levels[0]}`,(0,C.mergeAttributes)(this.options.HTMLAttributes,S),0]},addCommands(){return{setHeading:J=>({commands:S})=>!!this.options.levels.includes(J.level)&&S.setNode(this.name,J),toggleHeading:J=>({commands:S})=>!!this.options.levels.includes(J.level)&&S.toggleNode(this.name,"paragraph",J)}},addKeyboardShortcuts(){return this.options.levels.reduce((J,S)=>me(Gt({},J),{[`Mod-Alt-${S}`]:()=>this.editor.commands.toggleHeading({level:S})}),{})},addInputRules(){return this.options.levels.map(J=>(0,C.textblockTypeInputRule)({find:new RegExp(`^(#{1,${J}})\\s$`),type:this.type,getAttributes:{level:J}}))}});var zt=function(){};zt.prototype.append=function(S){return S.length?(S=zt.from(S),!this.length&&S||S.length<200&&this.leafAppend(S)||this.length<200&&S.leafPrepend(this)||this.appendInner(S)):this},zt.prototype.prepend=function(S){return S.length?zt.from(S).append(this):this},zt.prototype.appendInner=function(S){return new ye(this,S)},zt.prototype.slice=function(S,st){return void 0===S&&(S=0),void 0===st&&(st=this.length),S>=st?zt.empty:this.sliceInner(Math.max(0,S),Math.min(this.length,st))},zt.prototype.get=function(S){if(!(S<0||S>=this.length))return this.getInner(S)},zt.prototype.forEach=function(S,st,vt){void 0===st&&(st=0),void 0===vt&&(vt=this.length),st<=vt?this.forEachInner(S,st,vt,0):this.forEachInvertedInner(S,st,vt,0)},zt.prototype.map=function(S,st,vt){void 0===st&&(st=0),void 0===vt&&(vt=this.length);var yt=[];return this.forEach(function(Jt,Ft){return yt.push(S(Jt,Ft))},st,vt),yt},zt.from=function(S){return S instanceof zt?S:S&&S.length?new ce(S):zt.empty};var ce=function(J){function S(vt){J.call(this),this.values=vt}J&&(S.__proto__=J),(S.prototype=Object.create(J&&J.prototype)).constructor=S;var st={length:{configurable:!0},depth:{configurable:!0}};return S.prototype.flatten=function(){return this.values},S.prototype.sliceInner=function(yt,Jt){return 0==yt&&Jt==this.length?this:new S(this.values.slice(yt,Jt))},S.prototype.getInner=function(yt){return this.values[yt]},S.prototype.forEachInner=function(yt,Jt,Ft,Qt){for(var oe=Jt;oe<Ft;oe++)if(!1===yt(this.values[oe],Qt+oe))return!1},S.prototype.forEachInvertedInner=function(yt,Jt,Ft,Qt){for(var oe=Jt-1;oe>=Ft;oe--)if(!1===yt(this.values[oe],Qt+oe))return!1},S.prototype.leafAppend=function(yt){if(this.length+yt.length<=200)return new S(this.values.concat(yt.flatten()))},S.prototype.leafPrepend=function(yt){if(this.length+yt.length<=200)return new S(yt.flatten().concat(this.values))},st.length.get=function(){return this.values.length},st.depth.get=function(){return 0},Object.defineProperties(S.prototype,st),S}(zt);zt.empty=new ce([]);var ye=function(J){function S(st,vt){J.call(this),this.left=st,this.right=vt,this.length=st.length+vt.length,this.depth=Math.max(st.depth,vt.depth)+1}return J&&(S.__proto__=J),(S.prototype=Object.create(J&&J.prototype)).constructor=S,S.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},S.prototype.getInner=function(vt){return vt<this.left.length?this.left.get(vt):this.right.get(vt-this.left.length)},S.prototype.forEachInner=function(vt,yt,Jt,Ft){var Qt=this.left.length;if(yt<Qt&&!1===this.left.forEachInner(vt,yt,Math.min(Jt,Qt),Ft)||Jt>Qt&&!1===this.right.forEachInner(vt,Math.max(yt-Qt,0),Math.min(this.length,Jt)-Qt,Ft+Qt))return!1},S.prototype.forEachInvertedInner=function(vt,yt,Jt,Ft){var Qt=this.left.length;if(yt>Qt&&!1===this.right.forEachInvertedInner(vt,yt-Qt,Math.max(Jt,Qt)-Qt,Ft+Qt)||Jt<Qt&&!1===this.left.forEachInvertedInner(vt,Math.min(yt,Qt),Jt,Ft))return!1},S.prototype.sliceInner=function(vt,yt){if(0==vt&&yt==this.length)return this;var Jt=this.left.length;return yt<=Jt?this.left.slice(vt,yt):vt>=Jt?this.right.slice(vt-Jt,yt-Jt):this.left.slice(vt,Jt).append(this.right.slice(0,yt-Jt))},S.prototype.leafAppend=function(vt){var yt=this.right.leafAppend(vt);if(yt)return new S(this.left,yt)},S.prototype.leafPrepend=function(vt){var yt=this.left.leafPrepend(vt);if(yt)return new S(yt,this.right)},S.prototype.appendInner=function(vt){return this.left.depth>=Math.max(this.right.depth,vt.depth)+1?new S(this.left,new S(this.right,vt)):new S(this,vt)},S}(zt);const he=zt;class xe{constructor(S,st){this.items=S,this.eventCount=st}popEvent(S,st){if(0==this.eventCount)return null;let yt,Jt,vt=this.items.length;for(;;vt--)if(this.items.get(vt-1).selection){--vt;break}st&&(yt=this.remapping(vt,this.items.length),Jt=yt.maps.length);let Qt,oe,Ft=S.tr,Te=[],se=[];return this.items.forEach((le,de)=>{if(!le.step)return yt||(yt=this.remapping(vt,de+1),Jt=yt.maps.length),Jt--,void se.push(le);if(yt){se.push(new ge(le.map));let We,Re=le.step.map(yt.slice(Jt));Re&&Ft.maybeStep(Re).doc&&(We=Ft.mapping.maps[Ft.mapping.maps.length-1],Te.push(new ge(We,void 0,void 0,Te.length+se.length))),Jt--,We&&yt.appendMap(We,Jt)}else Ft.maybeStep(le.step);return le.selection?(Qt=yt?le.selection.map(yt.slice(Jt)):le.selection,oe=new xe(this.items.slice(0,vt).append(se.reverse().concat(Te)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:oe,transform:Ft,selection:Qt}}addTransform(S,st,vt,yt){let Jt=[],Ft=this.eventCount,Qt=this.items,oe=!yt&&Qt.length?Qt.get(Qt.length-1):null;for(let se=0;se<S.steps.length;se++){let Re,le=S.steps[se].invert(S.docs[se]),de=new ge(S.mapping.maps[se],le,st);(Re=oe&&oe.merge(de))&&(de=Re,se?Jt.pop():Qt=Qt.slice(0,Qt.length-1)),Jt.push(de),st&&(Ft++,st=void 0),yt||(oe=de)}let Te=Ft-vt.depth;return Te>Ce&&(Qt=function(J,S){let st;return J.forEach((vt,yt)=>{if(vt.selection&&0==S--)return st=yt,!1}),J.slice(st)}(Qt,Te),Ft-=Te),new xe(Qt.append(Jt),Ft)}remapping(S,st){let vt=new F.vs;return this.items.forEach((yt,Jt)=>{vt.appendMap(yt.map,null!=yt.mirrorOffset&&Jt-yt.mirrorOffset>=S?vt.maps.length-yt.mirrorOffset:void 0)},S,st),vt}addMaps(S){return 0==this.eventCount?this:new xe(this.items.append(S.map(st=>new ge(st))),this.eventCount)}rebased(S,st){if(!this.eventCount)return this;let vt=[],yt=Math.max(0,this.items.length-st),Jt=S.mapping,Ft=S.steps.length,Qt=this.eventCount;this.items.forEach(de=>{de.selection&&Qt--},yt);let oe=st;this.items.forEach(de=>{let Re=Jt.getMirror(--oe);if(null==Re)return;Ft=Math.min(Ft,Re);let We=Jt.maps[Re];if(de.step){let cn=S.steps[Re].invert(S.docs[Re]),ue=de.selection&&de.selection.map(Jt.slice(oe+1,Re));ue&&Qt++,vt.push(new ge(We,cn,ue))}else vt.push(new ge(We))},yt);let Te=[];for(let de=st;de<Ft;de++)Te.push(new ge(Jt.maps[de]));let se=this.items.slice(0,yt).append(Te).append(vt),le=new xe(se,Qt);return le.emptyItemCount()>500&&(le=le.compress(this.items.length-vt.length)),le}emptyItemCount(){let S=0;return this.items.forEach(st=>{st.step||S++}),S}compress(S=this.items.length){let st=this.remapping(0,S),vt=st.maps.length,yt=[],Jt=0;return this.items.forEach((Ft,Qt)=>{if(Qt>=S)yt.push(Ft),Ft.selection&&Jt++;else if(Ft.step){let oe=Ft.step.map(st.slice(vt)),Te=oe&&oe.getMap();if(vt--,Te&&st.appendMap(Te,vt),oe){let se=Ft.selection&&Ft.selection.map(st.slice(vt));se&&Jt++;let de,le=new ge(Te.invert(),oe,se),Re=yt.length-1;(de=yt.length&&yt[Re].merge(le))?yt[Re]=de:yt.push(le)}}else Ft.map&&vt--},this.items.length,0),new xe(he.from(yt.reverse()),Jt)}}xe.empty=new xe(he.empty,0);class ge{constructor(S,st,vt,yt){this.map=S,this.step=st,this.selection=vt,this.mirrorOffset=yt}merge(S){if(this.step&&S.step&&!S.selection){let st=S.step.merge(this.step);if(st)return new ge(st.getMap().invert(),st,this.selection)}}}class Ae{constructor(S,st,vt,yt){this.done=S,this.undone=st,this.prevRanges=vt,this.prevTime=yt}}const Ce=20;function Me(J){let S=[];return J.forEach((st,vt,yt,Jt)=>S.push(yt,Jt)),S}function ke(J,S){if(!J)return null;let st=[];for(let vt=0;vt<J.length;vt+=2){let yt=S.map(J[vt],1),Jt=S.map(J[vt+1],-1);yt<=Jt&&st.push(yt,Jt)}return st}function Ye(J,S,st,vt){let yt=Le(S),Jt=_e.get(S).spec.config,Ft=(vt?J.undone:J.done).popEvent(S,yt);if(!Ft)return;let Qt=Ft.selection.resolve(Ft.transform.doc),oe=(vt?J.done:J.undone).addTransform(Ft.transform,S.selection.getBookmark(),Jt,yt),Te=new Ae(vt?oe:Ft.remaining,vt?Ft.remaining:oe,null,0);st(Ft.transform.setSelection(Qt).setMeta(_e,{redo:vt,historyState:Te}).scrollIntoView())}let He=!1,Ue=null;function Le(J){let S=J.plugins;if(Ue!=S){He=!1,Ue=S;for(let st=0;st<S.length;st++)if(S[st].spec.historyPreserveItems){He=!0;break}}return He}const _e=new kt.H$("history"),fe=new kt.H$("closeHistory");function Ee(J={}){return new kt.Sy({key:_e,state:{init:()=>new Ae(xe.empty,xe.empty,null,0),apply:(S,st,vt)=>function(J,S,st,vt){let Jt,yt=st.getMeta(_e);if(yt)return yt.historyState;st.getMeta(fe)&&(J=new Ae(J.done,J.undone,null,0));let Ft=st.getMeta("appendedTransaction");if(0==st.steps.length)return J;if(Ft&&Ft.getMeta(_e))return Ft.getMeta(_e).redo?new Ae(J.done.addTransform(st,void 0,vt,Le(S)),J.undone,Me(st.mapping.maps[st.steps.length-1]),J.prevTime):new Ae(J.done,J.undone.addTransform(st,void 0,vt,Le(S)),null,J.prevTime);if(!1===st.getMeta("addToHistory")||Ft&&!1===Ft.getMeta("addToHistory"))return(Jt=st.getMeta("rebased"))?new Ae(J.done.rebased(st,Jt),J.undone.rebased(st,Jt),ke(J.prevRanges,st.mapping),J.prevTime):new Ae(J.done.addMaps(st.mapping.maps),J.undone.addMaps(st.mapping.maps),ke(J.prevRanges,st.mapping),J.prevTime);{let Qt=0==J.prevTime||!Ft&&(J.prevTime<(st.time||0)-vt.newGroupDelay||!function(J,S){if(!S)return!1;if(!J.docChanged)return!0;let st=!1;return J.mapping.maps[0].forEach((vt,yt)=>{for(let Jt=0;Jt<S.length;Jt+=2)vt<=S[Jt+1]&&yt>=S[Jt]&&(st=!0)}),st}(st,J.prevRanges)),oe=Ft?ke(J.prevRanges,st.mapping):Me(st.mapping.maps[st.steps.length-1]);return new Ae(J.done.addTransform(st,Qt?S.selection.getBookmark():void 0,vt,Le(S)),xe.empty,oe,st.time)}}(st,vt,S,J)},config:J={depth:J.depth||100,newGroupDelay:J.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(S,st){let vt=st.inputType,yt="historyUndo"==vt?gt:"historyRedo"==vt?b:null;return!!yt&&(st.preventDefault(),yt(S.state,S.dispatch))}}}})}const gt=(J,S)=>{let st=_e.getState(J);return!(!st||0==st.done.eventCount||(S&&Ye(st,J,S,!1),0))},b=(J,S)=>{let st=_e.getState(J);return!(!st||0==st.undone.eventCount||(S&&Ye(st,J,S,!0),0))},w=C.Extension.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:J,dispatch:S})=>gt(J,S),redo:()=>({state:J,dispatch:S})=>b(J,S)}),addProseMirrorPlugins(){return[Ee(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),V=C.Node.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:J}){return["hr",(0,C.mergeAttributes)(this.options.HTMLAttributes,J)]},addCommands(){return{setHorizontalRule:()=>({chain:J})=>J().insertContent({type:this.name}).command(({tr:S,dispatch:st})=>{var vt;if(st){const{$to:yt}=S.selection,Jt=yt.end();if(yt.nodeAfter)S.setSelection(kt.Bs.create(S.doc,yt.pos));else{const Ft=null===(vt=yt.parent.type.contentMatch.defaultType)||void 0===vt?void 0:vt.create();Ft&&(S.insert(Jt,Ft),S.setSelection(kt.Bs.create(S.doc,Jt)))}S.scrollIntoView()}return!0}).run()}},addInputRules(){return[(0,C.nodeInputRule)({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),U=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,bt=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,Nt=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,H=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,a=C.Mark.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:J=>"normal"!==J.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:J}){return["em",(0,C.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{setItalic:()=>({commands:J})=>J.setMark(this.name),toggleItalic:()=>({commands:J})=>J.toggleMark(this.name),unsetItalic:()=>({commands:J})=>J.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,C.markInputRule)({find:U,type:this.type}),(0,C.markInputRule)({find:Nt,type:this.type})]},addPasteRules(){return[(0,C.markPasteRule)({find:bt,type:this.type}),(0,C.markPasteRule)({find:H,type:this.type})]}}),p=C.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:J}){return["li",(0,C.mergeAttributes)(this.options.HTMLAttributes,J),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),E=C.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:J}){return["li",(0,C.mergeAttributes)(this.options.HTMLAttributes,J),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),P=C.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:J=>!!J.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:J}){return["span",(0,C.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:J,commands:S})=>{const st=(0,C.getMarkAttributes)(J,this.type);return!!Object.entries(st).some(([,yt])=>!!yt)||S.unsetMark(this.name)}}}}),k=/^(\d+)\.\s$/,K=C.Node.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:J=>J.hasAttribute("start")?parseInt(J.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:J}){const vt=J,{start:S}=vt,st=Vo(vt,["start"]);return 1===S?["ol",(0,C.mergeAttributes)(this.options.HTMLAttributes,st),0]:["ol",(0,C.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{toggleOrderedList:()=>({commands:J,chain:S})=>this.options.keepAttributes?S().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(E.name,this.editor.getAttributes(P.name)).run():J.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let J=(0,C.wrappingInputRule)({find:k,type:this.type,getAttributes:S=>({start:+S[1]}),joinPredicate:(S,st)=>st.childCount+st.attrs.start===+S[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(J=(0,C.wrappingInputRule)({find:k,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:S=>Gt({start:+S[1]},this.editor.getAttributes(P.name)),joinPredicate:(S,st)=>st.childCount+st.attrs.start===+S[1],editor:this.editor})),[J]}}),lt=C.Node.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:J}){return["p",(0,C.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{setParagraph:()=>({commands:J})=>J.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Ht=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,te=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,ee=C.Mark.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:J=>!!J.includes("line-through")&&{}}],renderHTML({HTMLAttributes:J}){return["s",(0,C.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{setStrike:()=>({commands:J})=>J.setMark(this.name),toggleStrike:()=>({commands:J})=>J.toggleMark(this.name),unsetStrike:()=>({commands:J})=>J.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,C.markInputRule)({find:Ht,type:this.type})]},addPasteRules(){return[(0,C.markPasteRule)({find:te,type:this.type})]}}),we=C.Node.create({name:"text",group:"inline"}),$e=C.Extension.create({name:"starterKit",addExtensions(){const J=[],S=this.options;return!1!==(null==S?void 0:S.blockquote)&&J.push(y.configure(null==S?void 0:S.blockquote)),!1!==(null==S?void 0:S.bold)&&J.push(G.configure(null==S?void 0:S.bold)),!1!==(null==S?void 0:S.bulletList)&&J.push(Mt.configure(null==S?void 0:S.bulletList)),!1!==(null==S?void 0:S.code)&&J.push(Ot.configure(null==S?void 0:S.code)),!1!==(null==S?void 0:S.codeBlock)&&J.push(pt.configure(null==S?void 0:S.codeBlock)),!1!==(null==S?void 0:S.document)&&J.push(q.configure(null==S?void 0:S.document)),!1!==(null==S?void 0:S.dropcursor)&&J.push(At.configure(null==S?void 0:S.dropcursor)),!1!==(null==S?void 0:S.gapcursor)&&J.push(Et.configure(null==S?void 0:S.gapcursor)),!1!==(null==S?void 0:S.hardBreak)&&J.push($t.configure(null==S?void 0:S.hardBreak)),!1!==(null==S?void 0:S.heading)&&J.push(Kt.configure(null==S?void 0:S.heading)),!1!==(null==S?void 0:S.history)&&J.push(w.configure(null==S?void 0:S.history)),!1!==(null==S?void 0:S.horizontalRule)&&J.push(V.configure(null==S?void 0:S.horizontalRule)),!1!==(null==S?void 0:S.italic)&&J.push(a.configure(null==S?void 0:S.italic)),!1!==(null==S?void 0:S.listItem)&&J.push(p.configure(null==S?void 0:S.listItem)),!1!==(null==S?void 0:S.orderedList)&&J.push(K.configure(null==S?void 0:S.orderedList)),!1!==(null==S?void 0:S.paragraph)&&J.push(lt.configure(null==S?void 0:S.paragraph)),!1!==(null==S?void 0:S.strike)&&J.push(ee.configure(null==S?void 0:S.strike)),!1!==(null==S?void 0:S.text)&&J.push(we.configure(null==S?void 0:S.text)),J}})},51919:(Yt,Tt,c)=>{c.r(Tt),c.d(Tt,{TableCellBackground:()=>l});const l=c(12867).Extension.create({addGlobalAttributes:()=>[{types:["tableCell","tableHeader"],attributes:{background:{default:null,renderHTML:({background:y})=>y?{style:`background: ${y}`}:null,parseHTML:({style:y})=>y.background,keepOnSplit:!1}}}],addCommands:()=>({setCellBackground:y=>({chain:A})=>A().updateAttributes("tableCell",{background:y}).updateAttributes("tableHeader",{background:y}).run(),unsetCellBackground:()=>({chain:y})=>y().updateAttributes("tableCell",{background:null}).updateAttributes("tableHeader",{background:null}).run()})})},86624:(Yt,Tt,c)=>{c.r(Tt),c.d(Tt,{TuiTable:()=>sn});var N,G,C=c(12867),l=c(62463),y=c(77346),A=c(43594),m=c(70768),ot=c(38480);if("undefined"!=typeof WeakMap){let _=new WeakMap;N=v=>_.get(v),G=(v,g)=>(_.set(v,g),g)}else{const _=[],v=10;let g=0;N=f=>{for(let M=0;M<_.length;M+=2)if(_[M]==f)return _[M+1]},G=(f,M)=>(g==v&&(g=0),_[g++]=f,_[g++]=M)}var tt=class{constructor(_,v,g,f){this.width=_,this.height=v,this.map=g,this.problems=f}findCell(_){for(let v=0;v<this.map.length;v++){const g=this.map[v];if(g!=_)continue;const f=v%this.width,M=v/this.width|0;let x=f+1,R=M+1;for(let Z=1;x<this.width&&this.map[v+Z]==g;Z++)x++;for(let Z=1;R<this.height&&this.map[v+this.width*Z]==g;Z++)R++;return{left:f,top:M,right:x,bottom:R}}throw new RangeError(`No cell with offset ${_} found`)}colCount(_){for(let v=0;v<this.map.length;v++)if(this.map[v]==_)return v%this.width;throw new RangeError(`No cell with offset ${_} found`)}nextCell(_,v,g){const{left:f,right:M,top:x,bottom:R}=this.findCell(_);return"horiz"==v?(g<0?0==f:M==this.width)?null:this.map[x*this.width+(g<0?f-1:M)]:(g<0?0==x:R==this.height)?null:this.map[f+this.width*(g<0?x-1:R)]}rectBetween(_,v){const{left:g,right:f,top:M,bottom:x}=this.findCell(_),{left:R,right:Z,top:W,bottom:Q}=this.findCell(v);return{left:Math.min(g,R),top:Math.min(M,W),right:Math.max(f,Z),bottom:Math.max(x,Q)}}cellsInRect(_){const v=[],g={};for(let f=_.top;f<_.bottom;f++)for(let M=_.left;M<_.right;M++){const x=f*this.width+M,R=this.map[x];g[R]||(g[R]=!0,!(M==_.left&&M&&this.map[x-1]==R||f==_.top&&f&&this.map[x-this.width]==R)&&v.push(R))}return v}positionAt(_,v,g){for(let f=0,M=0;;f++){const x=M+g.child(f).nodeSize;if(f==_){let R=v+_*this.width;const Z=(_+1)*this.width;for(;R<Z&&this.map[R]<M;)R++;return R==Z?x-1:this.map[R]}M=x}}static get(_){return N(_)||G(_,function(_){if("table"!=_.type.spec.tableRole)throw new RangeError("Not a table node: "+_.type.name);const v=function(_){let v=-1,g=!1;for(let f=0;f<_.childCount;f++){const M=_.child(f);let x=0;if(g)for(let R=0;R<f;R++){const Z=_.child(R);for(let W=0;W<Z.childCount;W++){const Q=Z.child(W);R+Q.attrs.rowspan>f&&(x+=Q.attrs.colspan)}}for(let R=0;R<M.childCount;R++){const Z=M.child(R);x+=Z.attrs.colspan,Z.attrs.rowspan>1&&(g=!0)}-1==v?v=x:v!=x&&(v=Math.max(v,x))}return v}(_),g=_.childCount,f=[];let M=0,x=null;const R=[];for(let Q=0,Ct=v*g;Q<Ct;Q++)f[Q]=0;for(let Q=0,Ct=0;Q<g;Q++){const xt=_.child(Q);Ct++;for(let jt=0;;jt++){for(;M<f.length&&0!=f[M];)M++;if(jt==xt.childCount)break;const re=xt.child(jt),{colspan:ie,rowspan:be,colwidth:qe}=re.attrs;for(let je=0;je<be;je++){if(je+Q>=g){(x||(x=[])).push({type:"overlong_rowspan",pos:Ct,n:be-je});break}const ve=M+je*v;for(let De=0;De<ie;De++){0==f[ve+De]?f[ve+De]=Ct:(x||(x=[])).push({type:"collision",row:Q,pos:Ct,n:ie-De});const dn=qe&&qe[De];if(dn){const en=(ve+De)%v*2,pe=R[en];null==pe||pe!=dn&&1==R[en+1]?(R[en]=dn,R[en+1]=1):pe==dn&&R[en+1]++}}}M+=ie,Ct+=re.nodeSize}const Ut=(Q+1)*v;let Wt=0;for(;M<Ut;)0==f[M++]&&Wt++;Wt&&(x||(x=[])).push({type:"missing",row:Q,n:Wt}),Ct++}const Z=new tt(v,g,f,x);let W=!1;for(let Q=0;!W&&Q<R.length;Q+=2)null!=R[Q]&&R[Q+1]<g&&(W=!0);return W&&function(_,v,g){_.problems||(_.problems=[]);const f={};for(let M=0;M<_.map.length;M++){const x=_.map[M];if(f[x])continue;f[x]=!0;const R=g.nodeAt(x);if(!R)throw new RangeError(`No cell with offset ${x} found`);let Z=null;const W=R.attrs;for(let Q=0;Q<W.colspan;Q++){const xt=v[(M+Q)%_.width*2];null!=xt&&(!W.colwidth||W.colwidth[Q]!=xt)&&((Z||(Z=it(W)))[Q]=xt)}Z&&_.problems.unshift({type:"colwidth mismatch",pos:x,colwidth:Z})}}(Z,R,_),Z}(_))}};function it(_){if(_.colwidth)return _.colwidth.slice();const v=[];for(let g=0;g<_.colspan;g++)v.push(0);return v}function St(_){let v=_.cached.tableNodeTypes;if(!v){v=_.cached.tableNodeTypes={};for(const g in _.nodes){const f=_.nodes[g],M=f.spec.tableRole;M&&(v[M]=f)}}return v}var Dt=new l.H$("selectingCells");function pt(_){for(let v=_.depth-1;v>0;v--)if("row"==_.node(v).type.spec.tableRole)return _.node(0).resolve(_.before(v+1));return null}function F(_){const v=_.selection.$head;for(let g=v.depth;g>0;g--)if("row"==v.node(g).type.spec.tableRole)return!0;return!1}function ut(_){const v=_.selection;if("$anchorCell"in v&&v.$anchorCell)return v.$anchorCell.pos>v.$headCell.pos?v.$anchorCell:v.$headCell;if("node"in v&&v.node&&"cell"==v.node.type.spec.tableRole)return v.$anchor;const g=pt(v.$head)||function(_){for(let v=_.nodeAfter,g=_.pos;v;v=v.firstChild,g++){const f=v.type.spec.tableRole;if("cell"==f||"header_cell"==f)return _.doc.resolve(g)}for(let v=_.nodeBefore,g=_.pos;v;v=v.lastChild,g--){const f=v.type.spec.tableRole;if("cell"==f||"header_cell"==f)return _.doc.resolve(g-v.nodeSize)}}(v.$head);if(g)return g;throw new RangeError(`No cell found around position ${v.head}`)}function At(_){return"row"==_.parent.type.spec.tableRole&&!!_.nodeAfter}function Pt(_,v){return _.depth==v.depth&&_.pos>=v.start(-1)&&_.pos<=v.end(-1)}function Rt(_,v,g){const f=_.node(-1),M=tt.get(f),x=_.start(-1),R=M.nextCell(_.pos-x,v,g);return null==R?null:_.node(0).resolve(x+R)}function wt(_,v,g=1){const f=me(Gt({},_),{colspan:_.colspan-g});return f.colwidth&&(f.colwidth=f.colwidth.slice(),f.colwidth.splice(v,g),f.colwidth.some(M=>M>0)||(f.colwidth=null)),f}function z(_,v,g=1){const f=me(Gt({},_),{colspan:_.colspan+g});if(f.colwidth){f.colwidth=f.colwidth.slice();for(let M=0;M<g;M++)f.colwidth.splice(v,0,0)}return f}var dt=class extends l.Y1{constructor(_,v=_){const g=_.node(-1),f=tt.get(g),M=_.start(-1),x=f.rectBetween(_.pos-M,v.pos-M),R=_.node(0),Z=f.cellsInRect(x).filter(Q=>Q!=v.pos-M);Z.unshift(v.pos-M);const W=Z.map(Q=>{const Ct=g.nodeAt(Q);if(!Ct)throw RangeError(`No cell with offset ${Q} found`);const xt=M+Q+1;return new l.xm(R.resolve(xt),R.resolve(xt+Ct.content.size))});super(W[0].$from,W[0].$to,W),this.$anchorCell=_,this.$headCell=v}map(_,v){const g=_.resolve(v.map(this.$anchorCell.pos)),f=_.resolve(v.map(this.$headCell.pos));if(At(g)&&At(f)&&Pt(g,f)){const M=this.$anchorCell.node(-1)!=g.node(-1);return M&&this.isRowSelection()?dt.rowSelection(g,f):M&&this.isColSelection()?dt.colSelection(g,f):new dt(g,f)}return l.Bs.between(g,f)}content(){const _=this.$anchorCell.node(-1),v=tt.get(_),g=this.$anchorCell.start(-1),f=v.rectBetween(this.$anchorCell.pos-g,this.$headCell.pos-g),M={},x=[];for(let Z=f.top;Z<f.bottom;Z++){const W=[];for(let Q=Z*v.width+f.left,Ct=f.left;Ct<f.right;Ct++,Q++){const xt=v.map[Q];if(M[xt])continue;M[xt]=!0;const Ut=v.findCell(xt);let Wt=_.nodeAt(xt);if(!Wt)throw RangeError(`No cell with offset ${xt} found`);const jt=f.left-Ut.left,re=Ut.right-f.right;if(jt>0||re>0){let ie=Wt.attrs;if(jt>0&&(ie=wt(ie,0,jt)),re>0&&(ie=wt(ie,ie.colspan-re,re)),Ut.left<f.left){if(Wt=Wt.type.createAndFill(ie),!Wt)throw RangeError(`Could not create cell with attrs ${JSON.stringify(ie)}`)}else Wt=Wt.type.create(ie,Wt.content)}if(Ut.top<f.top||Ut.bottom>f.bottom){const ie=me(Gt({},Wt.attrs),{rowspan:Math.min(Ut.bottom,f.bottom)-Math.max(Ut.top,f.top)});Wt=Ut.top<f.top?Wt.type.createAndFill(ie):Wt.type.create(ie,Wt.content)}W.push(Wt)}x.push(_.child(Z).copy(y.HY.from(W)))}const R=this.isColSelection()&&this.isRowSelection()?_:x;return new y.p2(y.HY.from(R),1,1)}replace(_,v=y.p2.empty){const g=_.steps.length,f=this.ranges;for(let x=0;x<f.length;x++){const{$from:R,$to:Z}=f[x],W=_.mapping.slice(g);_.replace(W.map(R.pos),W.map(Z.pos),x?y.p2.empty:v)}const M=l.Y1.findFrom(_.doc.resolve(_.mapping.slice(g).map(this.to)),-1);M&&_.setSelection(M)}replaceWith(_,v){this.replace(_,new y.p2(y.HY.from(v),0,0))}forEachCell(_){const v=this.$anchorCell.node(-1),g=tt.get(v),f=this.$anchorCell.start(-1),M=g.cellsInRect(g.rectBetween(this.$anchorCell.pos-f,this.$headCell.pos-f));for(let x=0;x<M.length;x++)_(v.nodeAt(M[x]),f+M[x])}isColSelection(){const _=this.$anchorCell.index(-1),v=this.$headCell.index(-1);return!(Math.min(_,v)>0)&&Math.max(_+this.$anchorCell.nodeAfter.attrs.rowspan,v+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(_,v=_){const g=_.node(-1),f=tt.get(g),M=_.start(-1),x=f.findCell(_.pos-M),R=f.findCell(v.pos-M),Z=_.node(0);return x.top<=R.top?(x.top>0&&(_=Z.resolve(M+f.map[x.left])),R.bottom<f.height&&(v=Z.resolve(M+f.map[f.width*(f.height-1)+R.right-1]))):(R.top>0&&(v=Z.resolve(M+f.map[R.left])),x.bottom<f.height&&(_=Z.resolve(M+f.map[f.width*(f.height-1)+x.right-1]))),new dt(_,v)}isRowSelection(){const _=this.$anchorCell.node(-1),v=tt.get(_),g=this.$anchorCell.start(-1),f=v.colCount(this.$anchorCell.pos-g),M=v.colCount(this.$headCell.pos-g);return!(Math.min(f,M)>0)&&Math.max(f+this.$anchorCell.nodeAfter.attrs.colspan,M+this.$headCell.nodeAfter.attrs.colspan)==v.width}eq(_){return _ instanceof dt&&_.$anchorCell.pos==this.$anchorCell.pos&&_.$headCell.pos==this.$headCell.pos}static rowSelection(_,v=_){const g=_.node(-1),f=tt.get(g),M=_.start(-1),x=f.findCell(_.pos-M),R=f.findCell(v.pos-M),Z=_.node(0);return x.left<=R.left?(x.left>0&&(_=Z.resolve(M+f.map[x.top*f.width])),R.right<f.width&&(v=Z.resolve(M+f.map[f.width*(R.top+1)-1]))):(R.left>0&&(v=Z.resolve(M+f.map[R.top*f.width])),x.right<f.width&&(_=Z.resolve(M+f.map[f.width*(x.top+1)-1]))),new dt(_,v)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(_,v){return new dt(_.resolve(v.anchor),_.resolve(v.head))}static create(_,v,g=v){return new dt(_.resolve(v),_.resolve(g))}getBookmark(){return new ct(this.$anchorCell.pos,this.$headCell.pos)}};dt.prototype.visible=!1,l.Y1.jsonID("cell",dt);var ct=class{constructor(_,v){this.anchor=_,this.head=v}map(_){return new ct(_.map(this.anchor),_.map(this.head))}resolve(_){const v=_.resolve(this.anchor),g=_.resolve(this.head);return"row"==v.parent.type.spec.tableRole&&"row"==g.parent.type.spec.tableRole&&v.index()<v.parent.childCount&&g.index()<g.parent.childCount&&Pt(v,g)?new dt(v,g):l.Y1.near(g,1)}};function $(_){if(!(_.selection instanceof dt))return null;const v=[];return _.selection.forEachCell((g,f)=>{v.push(A.p.node(f,f+g.nodeSize,{class:"selectedCell"}))}),A.EH.create(_.doc,v)}var $t=new l.H$("fix-tables");function Kt(_,v,g,f){const M=_.childCount,x=v.childCount;t:for(let R=0,Z=0;R<x;R++){const W=v.child(R);for(let Q=Z,Ct=Math.min(M,R+3);Q<Ct;Q++)if(_.child(Q)==W){Z=Q+1,g+=W.nodeSize;continue t}f(W,g),Z<M&&_.child(Z).sameMarkup(W)?Kt(_.child(Z),W,g+1,f):W.nodesBetween(0,W.content.size,f,g+1),g+=W.nodeSize}}function ne(_,v){let g;const f=(M,x)=>{"table"==M.type.spec.tableRole&&(g=function(_,v,g,f){const M=tt.get(v);if(!M.problems)return f;f||(f=_.tr);const x=[];for(let W=0;W<M.height;W++)x.push(0);for(let W=0;W<M.problems.length;W++){const Q=M.problems[W];if("collision"==Q.type){const Ct=v.nodeAt(Q.pos);if(!Ct)continue;const xt=Ct.attrs;for(let Ut=0;Ut<xt.rowspan;Ut++)x[Q.row+Ut]+=Q.n;f.setNodeMarkup(f.mapping.map(g+1+Q.pos),null,wt(xt,xt.colspan-Q.n,Q.n))}else if("missing"==Q.type)x[Q.row]+=Q.n;else if("overlong_rowspan"==Q.type){const Ct=v.nodeAt(Q.pos);if(!Ct)continue;f.setNodeMarkup(f.mapping.map(g+1+Q.pos),null,me(Gt({},Ct.attrs),{rowspan:Ct.attrs.rowspan-Q.n}))}else if("colwidth mismatch"==Q.type){const Ct=v.nodeAt(Q.pos);if(!Ct)continue;f.setNodeMarkup(f.mapping.map(g+1+Q.pos),null,me(Gt({},Ct.attrs),{colwidth:Q.colwidth}))}}let R,Z;for(let W=0;W<x.length;W++)x[W]&&(null==R&&(R=W),Z=W);for(let W=0,Q=g+1;W<M.height;W++){const Ct=v.child(W),xt=Q+Ct.nodeSize,Ut=x[W];if(Ut>0){let Wt="cell";Ct.firstChild&&(Wt=Ct.firstChild.type.spec.tableRole);const jt=[];for(let ie=0;ie<Ut;ie++){const be=St(_.schema)[Wt].createAndFill();be&&jt.push(be)}f.insert(f.mapping.map(0!=W&&R!=W-1||Z!=W?xt-1:Q+1),jt)}Q=xt}return f.setMeta($t,{fixTables:!0})}(_,M,x,g))};return v?v.doc!=_.doc&&Kt(v.doc,_.doc,0,f):_.doc.descendants(f),g}function Oe(_,v){const g=_.createAndFill();return new ot.wx(g).replace(0,g.content.size,v).doc}function xe(_,v,g,f,M,x,R,Z){if(0==R||R==v.height)return!1;let W=!1;for(let Q=M;Q<x;Q++){const Ct=R*v.width+Q,xt=v.map[Ct];if(v.map[Ct-v.width]==xt){W=!0;const Ut=g.nodeAt(xt),{top:Wt,left:jt}=v.findCell(xt);_.setNodeMarkup(_.mapping.slice(Z).map(xt+f),null,me(Gt({},Ut.attrs),{rowspan:R-Wt})),_.insert(_.mapping.slice(Z).map(v.positionAt(R,jt,g)),Ut.type.createAndFill(me(Gt({},Ut.attrs),{rowspan:Wt+Ut.attrs.rowspan-R}))),Q+=Ut.attrs.colspan-1}}return W}function Ne(_,v,g,f,M,x,R,Z){if(0==R||R==v.width)return!1;let W=!1;for(let Q=M;Q<x;Q++){const Ct=Q*v.width+R,xt=v.map[Ct];if(v.map[Ct-1]==xt){W=!0;const Ut=g.nodeAt(xt),Wt=v.colCount(xt),jt=_.mapping.slice(Z).map(xt+f);_.setNodeMarkup(jt,null,wt(Ut.attrs,R-Wt,Ut.attrs.colspan-(R-Wt))),_.insert(jt+Ut.nodeSize,Ut.type.createAndFill(wt(Ut.attrs,0,R-Wt))),Q+=Ut.attrs.rowspan-1}}return W}function ge(_,v,g,f,M){let x=g?_.doc.nodeAt(g-1):_.doc;if(!x)throw new Error("No table found");let R=tt.get(x);const{top:Z,left:W}=f,Q=W+M.width,Ct=Z+M.height,xt=_.tr;let Ut=0;function Wt(){if(x=g?xt.doc.nodeAt(g-1):xt.doc,!x)throw new Error("No table found");R=tt.get(x),Ut=xt.mapping.maps.length}(function(_,v,g,f,M,x,R){const W=St(_.doc.type.schema);let Q,Ct;if(M>v.width)for(let xt=0,Ut=0;xt<v.height;xt++){const Wt=g.child(xt);Ut+=Wt.nodeSize;const jt=[];let re;re=null==Wt.lastChild||Wt.lastChild.type==W.cell?Q||(Q=W.cell.createAndFill()):Ct||(Ct=W.header_cell.createAndFill());for(let ie=v.width;ie<M;ie++)jt.push(re);_.insert(_.mapping.slice(R).map(Ut-1+f),jt)}if(x>v.height){const xt=[];for(let jt=0,re=(v.height-1)*v.width;jt<Math.max(v.width,M);jt++){const ie=!(jt>=v.width)&&g.nodeAt(v.map[re+jt]).type==W.header_cell;xt.push(ie?Ct||(Ct=W.header_cell.createAndFill()):Q||(Q=W.cell.createAndFill()))}const Ut=W.row.create(null,y.HY.from(xt)),Wt=[];for(let jt=v.height;jt<x;jt++)Wt.push(Ut);_.insert(_.mapping.slice(R).map(f+g.nodeSize-2),Wt)}return!(!Q&&!Ct)})(xt,R,x,g,Q,Ct,Ut)&&Wt(),xe(xt,R,x,g,W,Q,Z,Ut)&&Wt(),xe(xt,R,x,g,W,Q,Ct,Ut)&&Wt(),Ne(xt,R,x,g,Z,Ct,W,Ut)&&Wt(),Ne(xt,R,x,g,Z,Ct,Q,Ut)&&Wt();for(let jt=Z;jt<Ct;jt++){const re=R.positionAt(jt,W,x),ie=R.positionAt(jt,Q,x);xt.replace(xt.mapping.slice(Ut).map(re+g),xt.mapping.slice(Ut).map(ie+g),new y.p2(M.rows[jt-Z],0,0))}Wt(),xt.setSelection(new dt(xt.doc.resolve(g+R.positionAt(Z,W,x)),xt.doc.resolve(g+R.positionAt(Ct-1,Q-1,x)))),v(xt)}var Ae=(0,m.$)({ArrowLeft:Pe("horiz",-1),ArrowRight:Pe("horiz",1),ArrowUp:Pe("vert",-1),ArrowDown:Pe("vert",1),"Shift-ArrowLeft":Be("horiz",-1),"Shift-ArrowRight":Be("horiz",1),"Shift-ArrowUp":Be("vert",-1),"Shift-ArrowDown":Be("vert",1),Backspace:Me,"Mod-Backspace":Me,Delete:Me,"Mod-Delete":Me});function Ce(_,v,g){return!g.eq(_.selection)&&(v&&v(_.tr.setSelection(g).scrollIntoView()),!0)}function Pe(_,v){return(g,f,M)=>{if(!M)return!1;const x=g.selection;if(x instanceof dt)return Ce(g,f,l.Y1.near(x.$headCell,v));if("horiz"!=_&&!x.empty)return!1;const R=Ue(M,_,v);if(null==R)return!1;if("horiz"==_)return Ce(g,f,l.Y1.near(g.doc.resolve(x.head+v),v));{const Z=g.doc.resolve(R),W=Rt(Z,_,v);let Q;return Q=W?l.Y1.near(W,1):v<0?l.Y1.near(g.doc.resolve(Z.before(-1)),-1):l.Y1.near(g.doc.resolve(Z.after(-1)),1),Ce(g,f,Q)}}}function Be(_,v){return(g,f,M)=>{if(!M)return!1;const x=g.selection;let R;if(x instanceof dt)R=x;else{const W=Ue(M,_,v);if(null==W)return!1;R=new dt(g.doc.resolve(W))}const Z=Rt(R.$headCell,_,v);return!!Z&&Ce(g,f,new dt(R.$anchorCell,Z))}}function Me(_,v){const g=_.selection;if(!(g instanceof dt))return!1;if(v){const f=_.tr,M=St(_.schema).cell.createAndFill().content;g.forEachCell((x,R)=>{x.content.eq(M)||f.replace(f.mapping.map(R+1),f.mapping.map(R+x.nodeSize-1),new y.p2(M,0,0))}),f.docChanged&&v(f)}return!0}function ke(_,v){const f=pt(_.state.doc.resolve(v));return!!f&&(_.dispatch(_.state.tr.setSelection(new dt(f))),!0)}function Ye(_,v,g){if(!F(_.state))return!1;let f=function(_){if(!_.size)return null;let{content:v,openStart:g,openEnd:f}=_;for(;1==v.childCount&&(g>0&&f>0||"table"==v.child(0).type.spec.tableRole);)g--,f--,v=v.child(0).content;const M=v.child(0),x=M.type.spec.tableRole,R=M.type.schema,Z=[];if("row"==x)for(let W=0;W<v.childCount;W++){let Q=v.child(W).content;const Ct=W?0:Math.max(0,g-1),xt=W<v.childCount-1?0:Math.max(0,f-1);(Ct||xt)&&(Q=Oe(St(R).row,new y.p2(Q,Ct,xt)).content),Z.push(Q)}else{if("cell"!=x&&"header_cell"!=x)return null;Z.push(g||f?Oe(St(R).row,new y.p2(v,g,f)).content:v)}return function(_,v){const g=[];for(let M=0;M<v.length;M++){const x=v[M];for(let R=x.childCount-1;R>=0;R--){const{rowspan:Z,colspan:W}=x.child(R).attrs;for(let Q=M;Q<M+Z;Q++)g[Q]=(g[Q]||0)+W}}let f=0;for(let M=0;M<g.length;M++)f=Math.max(f,g[M]);for(let M=0;M<g.length;M++)if(M>=v.length&&v.push(y.HY.empty),g[M]<f){const x=St(_).cell.createAndFill(),R=[];for(let Z=g[M];Z<f;Z++)R.push(x);v[M]=v[M].append(y.HY.from(R))}return{height:v.length,width:f,rows:v}}(R,Z)}(g);const M=_.state.selection;if(M instanceof dt){f||(f={width:1,height:1,rows:[y.HY.from(Oe(St(_.state.schema).cell,g))]});const x=M.$anchorCell.node(-1),R=M.$anchorCell.start(-1),Z=tt.get(x).rectBetween(M.$anchorCell.pos-R,M.$headCell.pos-R);return f=function({width:_,height:v,rows:g},f,M){if(_!=f){const x=[],R=[];for(let Z=0;Z<g.length;Z++){const W=g[Z],Q=[];for(let Ct=x[Z]||0,xt=0;Ct<f;xt++){let Ut=W.child(xt%W.childCount);Ct+Ut.attrs.colspan>f&&(Ut=Ut.type.createChecked(wt(Ut.attrs,Ut.attrs.colspan,Ct+Ut.attrs.colspan-f),Ut.content)),Q.push(Ut),Ct+=Ut.attrs.colspan;for(let Wt=1;Wt<Ut.attrs.rowspan;Wt++)x[Z+Wt]=(x[Z+Wt]||0)+Ut.attrs.colspan}R.push(y.HY.from(Q))}g=R,_=f}if(v!=M){const x=[];for(let R=0,Z=0;R<M;R++,Z++){const W=[],Q=g[Z%v];for(let Ct=0;Ct<Q.childCount;Ct++){let xt=Q.child(Ct);R+xt.attrs.rowspan>M&&(xt=xt.type.create(me(Gt({},xt.attrs),{rowspan:Math.max(1,M-xt.attrs.rowspan)}),xt.content)),W.push(xt)}x.push(y.HY.from(W))}g=x,v=M}return{width:_,height:v,rows:g}}(f,Z.right-Z.left,Z.bottom-Z.top),ge(_.state,_.dispatch,R,Z,f),!0}if(f){const x=ut(_.state),R=x.start(-1);return ge(_.state,_.dispatch,R,tt.get(x.node(-1)).findCell(x.pos-R),f),!0}return!1}function He(_,v){var g;if(v.ctrlKey||v.metaKey)return;const f=Le(_,v.target);let M;if(v.shiftKey&&_.state.selection instanceof dt)x(_.state.selection.$anchorCell,v),v.preventDefault();else if(v.shiftKey&&f&&null!=(M=pt(_.state.selection.$anchor))&&(null==(g=ze(_,v))?void 0:g.pos)!=M.pos)x(M,v),v.preventDefault();else if(!f)return;function x(W,Q){let Ct=ze(_,Q);const xt=null==Dt.getState(_.state);if(!Ct||!Pt(W,Ct)){if(!xt)return;Ct=W}const Ut=new dt(W,Ct);if(xt||!_.state.selection.eq(Ut)){const Wt=_.state.tr.setSelection(Ut);xt&&Wt.setMeta(Dt,W.pos),_.dispatch(Wt)}}function R(){_.root.removeEventListener("mouseup",R),_.root.removeEventListener("dragstart",R),_.root.removeEventListener("mousemove",Z),null!=Dt.getState(_.state)&&_.dispatch(_.state.tr.setMeta(Dt,-1))}function Z(W){const Q=W,Ct=Dt.getState(_.state);let xt;if(null!=Ct)xt=_.state.doc.resolve(Ct);else if(Le(_,Q.target)!=f&&(xt=ze(_,v),!xt))return R();xt&&x(xt,Q)}_.root.addEventListener("mouseup",R),_.root.addEventListener("dragstart",R),_.root.addEventListener("mousemove",Z)}function Ue(_,v,g){if(!(_.state.selection instanceof l.Bs))return null;const{$head:f}=_.state.selection;for(let M=f.depth-1;M>=0;M--){const x=f.node(M);if((g<0?f.index(M):f.indexAfter(M))!=(g<0?0:x.childCount))return null;if("cell"==x.type.spec.tableRole||"header_cell"==x.type.spec.tableRole){const Z=f.before(M);return _.endOfTextblock("vert"==v?g>0?"down":"up":g>0?"right":"left")?Z:null}}return null}function Le(_,v){for(;v&&v!=_.dom;v=v.parentNode)if("TD"==v.nodeName||"TH"==v.nodeName)return v;return null}function ze(_,v){const g=_.posAtCoords({left:v.clientX,top:v.clientY});return g&&g?pt(_.state.doc.resolve(g.pos)):null}var _e=class{constructor(_,v){this.node=_,this.cellMinWidth=v,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),fe(_,this.colgroup,this.table,v),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(_){return _.type==this.node.type&&(this.node=_,fe(_,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(_){return"attributes"==_.type&&(_.target==this.table||this.colgroup.contains(_.target))}};function fe(_,v,g,f,M,x){var R;let Z=0,W=!0,Q=v.firstChild;const Ct=_.firstChild;if(Ct){for(let xt=0,Ut=0;xt<Ct.childCount;xt++){const{colspan:Wt,colwidth:jt}=Ct.child(xt).attrs;for(let re=0;re<Wt;re++,Ut++){const ie=M==Ut?x:jt&&jt[re],be=ie?ie+"px":"";Z+=ie||f,ie||(W=!1),Q?(Q.style.width!=be&&(Q.style.width=be),Q=Q.nextSibling):v.appendChild(document.createElement("col")).style.width=be}}for(;Q;){const xt=Q.nextSibling;null==(R=Q.parentNode)||R.removeChild(Q),Q=xt}W?(g.style.width=Z+"px",g.style.minWidth=""):(g.style.width="",g.style.minWidth=Z+"px")}}var Ee=new l.H$("tableColumnResizing");function gt({handleWidth:_=5,cellMinWidth:v=25,View:g=_e,lastColumnResizable:f=!0}={}){const M=new l.Sy({key:Ee,state:{init:(x,R)=>(M.spec.props.nodeViews[St(R.schema).table.name]=(Z,W)=>new g(Z,v,W),new b(-1,!1)),apply:(x,R)=>R.apply(x)},props:{attributes:x=>{const R=Ee.getState(x);return R&&R.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(x,R)=>{!function(_,v,g,f,M){const x=Ee.getState(_.state);if(x&&!x.dragging){const R=function(_){for(;_&&"TD"!=_.nodeName&&"TH"!=_.nodeName;)_=_.classList&&_.classList.contains("ProseMirror")?null:_.parentNode;return _}(v.target);let Z=-1;if(R){const{left:W,right:Q}=R.getBoundingClientRect();v.clientX-W<=g?Z=bt(_,v,"left"):Q-v.clientX<=g&&(Z=bt(_,v,"right"))}if(Z!=x.activeHandle){if(!M&&-1!==Z){const W=_.state.doc.resolve(Z),Q=W.node(-1),Ct=tt.get(Q),xt=W.start(-1);if(Ct.colCount(W.pos-xt)+W.nodeAfter.attrs.colspan-1==Ct.width-1)return}H(_,Z)}}}(x,R,_,0,f)},mouseleave:x=>{!function(_){const v=Ee.getState(_.state);v&&v.activeHandle>-1&&!v.dragging&&H(_,-1)}(x)},mousedown:(x,R)=>{!function(_,v,g){const f=Ee.getState(_.state);if(!f||-1==f.activeHandle||f.dragging)return!1;const M=_.state.doc.nodeAt(f.activeHandle),x=function(_,v,{colspan:g,colwidth:f}){const M=f&&f[f.length-1];if(M)return M;const x=_.domAtPos(v);let Z=x.node.childNodes[x.offset].offsetWidth,W=g;if(f)for(let Q=0;Q<g;Q++)f[Q]&&(Z-=f[Q],W--);return Z/W}(_,f.activeHandle,M.attrs);function R(W){window.removeEventListener("mouseup",R),window.removeEventListener("mousemove",Z);const Q=Ee.getState(_.state);(null==Q?void 0:Q.dragging)&&(function(_,v,g){const f=_.state.doc.resolve(v),M=f.node(-1),x=tt.get(M),R=f.start(-1),Z=x.colCount(f.pos-R)+f.nodeAfter.attrs.colspan-1,W=_.state.tr;for(let Q=0;Q<x.height;Q++){const Ct=Q*x.width+Z;if(Q&&x.map[Ct]==x.map[Ct-x.width])continue;const xt=x.map[Ct],Ut=M.nodeAt(xt).attrs,Wt=1==Ut.colspan?0:Z-x.colCount(xt);if(Ut.colwidth&&Ut.colwidth[Wt]==g)continue;const jt=Ut.colwidth?Ut.colwidth.slice():E(Ut.colspan);jt[Wt]=g,W.setNodeMarkup(R+xt,null,me(Gt({},Ut),{colwidth:jt}))}W.docChanged&&_.dispatch(W)}(_,Q.activeHandle,Nt(Q.dragging,W,g)),_.dispatch(_.state.tr.setMeta(Ee,{setDragging:null})))}function Z(W){if(!W.which)return R(W);const Q=Ee.getState(_.state);if(Q&&Q.dragging){const Ct=Nt(Q.dragging,W,g);!function(_,v,g,f){const M=_.state.doc.resolve(v),x=M.node(-1),R=M.start(-1),Z=tt.get(x).colCount(M.pos-R)+M.nodeAfter.attrs.colspan-1;let W=_.domAtPos(M.start(-1)).node;for(;W&&"TABLE"!=W.nodeName;)W=W.parentNode;!W||fe(x,W.firstChild,W,f,Z,g)}(_,Q.activeHandle,Ct,g)}}_.dispatch(_.state.tr.setMeta(Ee,{setDragging:{startX:v.clientX,startWidth:x}})),window.addEventListener("mouseup",R),window.addEventListener("mousemove",Z),v.preventDefault()}(x,R,v)}},decorations:x=>{const R=Ee.getState(x);if(R&&R.activeHandle>-1)return function(_,v){const g=[],f=_.doc.resolve(v),M=f.node(-1);if(!M)return A.EH.empty;const x=tt.get(M),R=f.start(-1),Z=x.colCount(f.pos-R)+f.nodeAfter.attrs.colspan;for(let W=0;W<x.height;W++){const Q=Z+W*x.width-1;if(!(Z!=x.width&&x.map[Q]==x.map[Q+1]||0!=W&&x.map[Q-1]==x.map[Q-1-x.width])){const Ct=x.map[Q],xt=R+Ct+M.nodeAt(Ct).nodeSize-1,Ut=document.createElement("div");Ut.className="column-resize-handle",g.push(A.p.widget(xt,Ut))}}return A.EH.create(_.doc,g)}(x,R.activeHandle)},nodeViews:{}}});return M}var b=class{constructor(_,v){this.activeHandle=_,this.dragging=v}apply(_){const v=this,g=_.getMeta(Ee);if(g&&null!=g.setHandle)return new b(g.setHandle,!1);if(g&&void 0!==g.setDragging)return new b(v.activeHandle,g.setDragging);if(v.activeHandle>-1&&_.docChanged){let f=_.mapping.map(v.activeHandle,-1);return At(_.doc.resolve(f))||(f=-1),new b(f,v.dragging)}return v}};function bt(_,v,g){const f=_.posAtCoords({left:v.clientX,top:v.clientY});if(!f)return-1;const{pos:M}=f,x=pt(_.state.doc.resolve(M));if(!x)return-1;if("right"==g)return x.pos;const R=tt.get(x.node(-1)),Z=x.start(-1),W=R.map.indexOf(x.pos-Z);return W%R.width==0?-1:Z+R.map[W-1]}function Nt(_,v,g){return Math.max(g,_.startWidth+(v.clientX-_.startX))}function H(_,v){_.dispatch(_.state.tr.setMeta(Ee,{setHandle:v}))}function E(_){return Array(_).fill(0)}function k(_){const v=_.selection,g=ut(_),f=g.node(-1),M=g.start(-1),x=tt.get(f),R=v instanceof dt?x.rectBetween(v.$anchorCell.pos-M,v.$headCell.pos-M):x.findCell(g.pos-M);return me(Gt({},R),{tableStart:M,map:x,table:f})}function K(_,{map:v,tableStart:g,table:f},M){let x=M>0?-1:0;(function(_,v,g){const f=St(v.type.schema).header_cell;for(let M=0;M<_.height;M++)if(v.nodeAt(_.map[g+M*_.width]).type!=f)return!1;return!0})(v,f,M+x)&&(x=0==M||M==v.width?null:0);for(let R=0;R<v.height;R++){const Z=R*v.width+M;if(M>0&&M<v.width&&v.map[Z-1]==v.map[Z]){const W=v.map[Z],Q=f.nodeAt(W);_.setNodeMarkup(_.mapping.map(g+W),null,z(Q.attrs,M-v.colCount(W))),R+=Q.attrs.rowspan-1}else{const W=null==x?St(f.type.schema).cell:f.nodeAt(v.map[Z+x]).type,Q=v.positionAt(R,M,f);_.insert(_.mapping.map(g+Q),W.createAndFill())}}return _}function te(_,{map:v,table:g,tableStart:f},M){const x=_.mapping.maps.length;for(let R=0;R<v.height;){const Z=R*v.width+M,W=v.map[Z],Q=g.nodeAt(W),Ct=Q.attrs;if(M>0&&v.map[Z-1]==W||M<v.width-1&&v.map[Z+1]==W)_.setNodeMarkup(_.mapping.slice(x).map(f+W),null,wt(Ct,M-v.colCount(W)));else{const xt=_.mapping.slice(x).map(f+W);_.delete(xt,xt+Q.nodeSize)}R+=Ct.rowspan}}function $e(_,{map:v,tableStart:g,table:f},M){var x;let R=g;for(let Q=0;Q<M;Q++)R+=f.child(Q).nodeSize;const Z=[];let W=M>0?-1:0;(function(_,v,g){var f;const M=St(v.type.schema).header_cell;for(let x=0;x<_.width;x++)if((null==(f=v.nodeAt(_.map[x+g*_.width]))?void 0:f.type)!=M)return!1;return!0})(v,f,M+W)&&(W=0==M||M==v.height?null:0);for(let Q=0,Ct=v.width*M;Q<v.width;Q++,Ct++)if(M>0&&M<v.height&&v.map[Ct]==v.map[Ct-v.width]){const xt=v.map[Ct],Ut=f.nodeAt(xt).attrs;_.setNodeMarkup(g+xt,null,me(Gt({},Ut),{rowspan:Ut.rowspan+1})),Q+=Ut.colspan-1}else{const xt=null==W?St(f.type.schema).cell:null==(x=f.nodeAt(v.map[Ct+W*v.width]))?void 0:x.type,Ut=null==xt?void 0:xt.createAndFill();Ut&&Z.push(Ut)}return _.insert(R,St(f.type.schema).row.create(null,Z)),_}function st(_,{map:v,table:g,tableStart:f},M){let x=0;for(let W=0;W<M;W++)x+=g.child(W).nodeSize;const R=x+g.child(M).nodeSize,Z=_.mapping.maps.length;_.delete(x+f,R+f);for(let W=0,Q=M*v.width;W<v.width;W++,Q++){const Ct=v.map[Q];if(M>0&&Ct==v.map[Q-v.width]){const xt=g.nodeAt(Ct).attrs;_.setNodeMarkup(_.mapping.slice(Z).map(Ct+f),null,me(Gt({},xt),{rowspan:xt.rowspan-1})),W+=xt.colspan-1}else if(M<v.width&&Ct==v.map[Q+v.width]){const xt=g.nodeAt(Ct),Ut=xt.attrs,Wt=xt.type.create(me(Gt({},Ut),{rowspan:xt.attrs.rowspan-1}),xt.content),jt=v.positionAt(M+1,W,g);_.insert(_.mapping.slice(Z).map(f+jt),Wt),W+=Ut.colspan-1}}}function yt(_){const v=_.content;return 1==v.childCount&&v.child(0).isTextblock&&0==v.child(0).childCount}function Ft(_,v){const g=_.selection;if(!(g instanceof dt)||g.$anchorCell.pos==g.$headCell.pos)return!1;const f=k(_),{map:M}=f;if(function({width:_,height:v,map:g},f){let M=f.top*_+f.left,x=M,R=(f.bottom-1)*_+f.left,Z=M+(f.right-f.left-1);for(let W=f.top;W<f.bottom;W++){if(f.left>0&&g[x]==g[x-1]||f.right<_&&g[Z]==g[Z+1])return!0;x+=_,Z+=_}for(let W=f.left;W<f.right;W++){if(f.top>0&&g[M]==g[M-_]||f.bottom<v&&g[R]==g[R+_])return!0;M++,R++}return!1}(M,f))return!1;if(v){const x=_.tr,R={};let W,Q,Z=y.HY.empty;for(let Ct=f.top;Ct<f.bottom;Ct++)for(let xt=f.left;xt<f.right;xt++){const Ut=M.map[Ct*M.width+xt],Wt=f.table.nodeAt(Ut);if(!R[Ut]&&Wt)if(R[Ut]=!0,null==W)W=Ut,Q=Wt;else{yt(Wt)||(Z=Z.append(Wt.content));const jt=x.mapping.map(Ut+f.tableStart);x.delete(jt,jt+Wt.nodeSize)}}if(null==W||null==Q)return!0;if(x.setNodeMarkup(W+f.tableStart,null,me(Gt({},z(Q.attrs,Q.attrs.colspan,f.right-f.left-Q.attrs.colspan)),{rowspan:f.bottom-f.top})),Z.size){const Ct=W+1+Q.content.size,xt=yt(Q)?W+1:Ct;x.replaceWith(xt+f.tableStart,Ct+f.tableStart,Z)}x.setSelection(new dt(x.doc.resolve(W+f.tableStart))),v(x)}return!0}function Qt(_,v){const g=St(_.schema);return function(_){return(v,g)=>{var f;const M=v.selection;let x,R;if(M instanceof dt){if(M.$anchorCell.pos!=M.$headCell.pos)return!1;x=M.$anchorCell.nodeAfter,R=M.$anchorCell.pos}else{if(x=function(_){for(let v=_.depth;v>0;v--){const g=_.node(v).type.spec.tableRole;if("cell"===g||"header_cell"===g)return _.node(v)}return null}(M.$from),!x)return!1;R=null==(f=pt(M.$from))?void 0:f.pos}if(null==x||null==R||1==x.attrs.colspan&&1==x.attrs.rowspan)return!1;if(g){let Z=x.attrs;const W=[],Q=Z.colwidth;Z.rowspan>1&&(Z=me(Gt({},Z),{rowspan:1})),Z.colspan>1&&(Z=me(Gt({},Z),{colspan:1}));const Ct=k(v),xt=v.tr;for(let Wt=0;Wt<Ct.right-Ct.left;Wt++)W.push(Q?me(Gt({},Z),{colwidth:Q&&Q[Wt]?[Q[Wt]]:null}):Z);let Ut;for(let Wt=Ct.top;Wt<Ct.bottom;Wt++){let jt=Ct.map.positionAt(Wt,Ct.left,Ct.table);Wt==Ct.top&&(jt+=x.nodeSize);for(let re=Ct.left,ie=0;re<Ct.right;re++,ie++)re==Ct.left&&Wt==Ct.top||xt.insert(Ut=xt.mapping.map(jt+Ct.tableStart,1),_({node:x,row:Wt,col:re}).createAndFill(W[ie]))}xt.setNodeMarkup(R,_({node:x,row:Ct.top,col:Ct.left}),W[0]),M instanceof dt&&xt.setSelection(new dt(xt.doc.resolve(M.$anchorCell.pos),Ut?xt.doc.resolve(Ut):void 0)),g(xt)}return!0}}(({node:f})=>g[f.type.spec.tableRole])(_,v)}function le(_,v,g){const f=v.map.cellsInRect({left:0,top:0,right:"row"==_?v.map.width:1,bottom:"column"==_?v.map.height:1});for(let M=0;M<f.length;M++){const x=v.table.nodeAt(f[M]);if(x&&x.type!==g.header_cell)return!1}return!0}function de(_,v){return(v=v||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(_){return function(v,g){if(!F(v))return!1;if(g){const f=St(v.schema),M=k(v),x=v.tr,R=M.map.cellsInRect("column"==_?{left:M.left,top:0,right:M.right,bottom:M.map.height}:"row"==_?{left:0,top:M.top,right:M.map.width,bottom:M.bottom}:M),Z=R.map(W=>M.table.nodeAt(W));for(let W=0;W<R.length;W++)Z[W].type==f.header_cell&&x.setNodeMarkup(M.tableStart+R[W],f.cell,Z[W].attrs);if(0==x.steps.length)for(let W=0;W<R.length;W++)x.setNodeMarkup(M.tableStart+R[W],f.header_cell,Z[W].attrs);g(x)}return!0}}(_):function(g,f){if(!F(g))return!1;if(f){const M=St(g.schema),x=k(g),R=g.tr,Z=le("row",x,M),W=le("column",x,M),Ct=("column"===_?Z:"row"===_&&W)?1:0,Ut="column"==_?W?M.cell:M.header_cell:"row"==_?Z?M.cell:M.header_cell:M.cell;x.map.cellsInRect("column"==_?{left:0,top:Ct,right:1,bottom:x.map.height}:"row"==_?{left:Ct,top:0,right:x.map.width,bottom:1}:x).forEach(Wt=>{const jt=Wt+x.tableStart,re=R.doc.nodeAt(jt);re&&R.setNodeMarkup(jt,Ut,re.attrs)}),f(R)}return!0}}de("row",{useDeprecatedLogic:!0}),de("column",{useDeprecatedLogic:!0});var cn=de("cell",{useDeprecatedLogic:!0});function Pn(_){return function(v,g){if(!F(v))return!1;const f=function(_,v){if(v<0){const g=_.nodeBefore;if(g)return _.pos-g.nodeSize;for(let f=_.index(-1)-1,M=_.before();f>=0;f--){const x=_.node(-1).child(f),R=x.lastChild;if(R)return M-1-R.nodeSize;M-=x.nodeSize}}else{if(_.index()<_.parent.childCount-1)return _.pos+_.nodeAfter.nodeSize;const g=_.node(-1);for(let f=_.indexAfter(-1),M=_.after();f<g.childCount;f++){const x=g.child(f);if(x.childCount)return M+1;M+=x.nodeSize}}return null}(ut(v),_);if(null==f)return!1;if(g){const M=v.doc.resolve(f);g(v.tr.setSelection(l.Bs.between(M,function(_){return _.node(0).resolve(_.pos+_.nodeAfter.nodeSize)}(M))).scrollIntoView())}return!0}}function Un({allowTableNodeSelection:_=!1}={}){return new l.Sy({key:Dt,state:{init:()=>null,apply(v,g){const f=v.getMeta(Dt);if(null!=f)return-1==f?null:f;if(null==g||!v.docChanged)return g;const{deleted:M,pos:x}=v.mapping.mapResult(g);return M?null:x}},props:{decorations:$,handleDOMEvents:{mousedown:He},createSelectionBetween:v=>null!=Dt.getState(v.state)?v.state.selection:null,handleTripleClick:ke,handleKeyDown:Ae,handlePaste:Ye},appendTransaction:(v,g,f)=>function(_,v,g){const f=(v||_).selection,M=(v||_).doc;let x,R;if(f instanceof l.qv&&(R=f.node.type.spec.tableRole)){if("cell"==R||"header_cell"==R)x=dt.create(M,f.from);else if("row"==R){const Z=M.resolve(f.from+1);x=dt.rowSelection(Z,Z)}else if(!g){const Z=tt.get(f.node),W=f.from+1;x=dt.create(M,W+1,W+Z.map[Z.width*Z.height-1])}}else f instanceof l.Bs&&function({$from:_,$to:v}){if(_.pos==v.pos||_.pos<_.pos-6)return!1;let g=_.pos,f=v.pos,M=_.depth;for(;M>=0&&!(_.after(M+1)<_.end(M));M--,g++);for(let x=v.depth;x>=0&&!(v.before(x+1)>v.start(x));x--,f--);return g==f&&/row|table/.test(_.node(M).type.spec.tableRole)}(f)?x=l.Bs.create(M,f.from):f instanceof l.Bs&&function({$from:_,$to:v}){let g,f;for(let M=_.depth;M>0;M--){const x=_.node(M);if("cell"===x.type.spec.tableRole||"header_cell"===x.type.spec.tableRole){g=x;break}}for(let M=v.depth;M>0;M--){const x=v.node(M);if("cell"===x.type.spec.tableRole||"header_cell"===x.type.spec.tableRole){f=x;break}}return g!==f&&0===v.parentOffset}(f)&&(x=l.Bs.create(M,f.$from.start(),f.$from.end()));return x&&(v||(v=_.tr)).setSelection(x),v}(f,ne(f,g),_)})}function hn(_,v,g,f,M,x){let R=0,Z=!0,W=v.firstChild;const Q=_.firstChild;for(let Ct=0,xt=0;Ct<Q.childCount;Ct+=1){const{colspan:Ut,colwidth:Wt}=Q.child(Ct).attrs;for(let jt=0;jt<Ut;jt+=1,xt+=1){const re=M===xt?x:Wt&&Wt[jt],ie=re?`${re}px`:"";R+=re||f,re||(Z=!1),W?(W.style.width!==ie&&(W.style.width=ie),W=W.nextSibling):v.appendChild(document.createElement("col")).style.width=ie}}for(;W;){const Ct=W.nextSibling;W.parentNode.removeChild(W),W=Ct}Z?(g.style.width=`${R}px`,g.style.minWidth=""):(g.style.width="",g.style.minWidth=`${R}px`)}class Sn{constructor(v,g){this.node=v,this.cellMinWidth=g,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),hn(v,this.colgroup,this.table,g),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(v){return v.type===this.node.type&&(this.node=v,hn(v,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(v){return"attributes"===v.type&&(v.target===this.table||this.colgroup.contains(v.target))}}function Tn(_,v){return v?_.createChecked(null,v):_.createAndFill()}const fn=({editor:_})=>{const{selection:v}=_.state;if(!function(_){return _ instanceof dt}(v))return!1;let g=0;const f=(0,C.findParentNodeClosestToPos)(v.ranges[0].$from,x=>"table"===x.type.name);return null==f||f.node.descendants(x=>{if("table"===x.type.name)return!1;["tableCell","tableHeader"].includes(x.type.name)&&(g+=1)}),g===v.ranges.length&&(_.commands.deleteTable(),!0)},sn=C.Node.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Sn,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML({HTMLAttributes:_}){return["table",(0,C.mergeAttributes)(this.options.HTMLAttributes,_),["tbody",0]]},addCommands:()=>({insertTable:({rows:_=3,cols:v=3,withHeaderRow:g=!0}={})=>({tr:f,dispatch:M,editor:x})=>{const R=function(_,v,g,f,M){const x=function(_){if(_.cached.tableNodeTypes)return _.cached.tableNodeTypes;const v={};return Object.keys(_.nodes).forEach(g=>{const f=_.nodes[g];f.spec.tableRole&&(v[f.spec.tableRole]=f)}),_.cached.tableNodeTypes=v,v}(_),R=[],Z=[];for(let Q=0;Q<g;Q+=1){const Ct=Tn(x.cell,M);if(Ct&&Z.push(Ct),f){const xt=Tn(x.header_cell,M);xt&&R.push(xt)}}const W=[];for(let Q=0;Q<v;Q+=1)W.push(x.row.createChecked(null,f&&0===Q?R:Z));return x.table.createChecked(null,W)}(x.schema,_,v,g);if(M){const Z=f.selection.anchor+1;f.replaceSelectionWith(R).scrollIntoView().setSelection(l.Bs.near(f.doc.resolve(Z)))}return!0},addColumnBefore:()=>({state:_,dispatch:v})=>function(_,v){if(!F(_))return!1;if(v){const g=k(_);v(K(_.tr,g,g.left))}return!0}(_,v),addColumnAfter:()=>({state:_,dispatch:v})=>function(_,v){if(!F(_))return!1;if(v){const g=k(_);v(K(_.tr,g,g.right))}return!0}(_,v),deleteColumn:()=>({state:_,dispatch:v})=>function(_,v){if(!F(_))return!1;if(v){const g=k(_),f=_.tr;if(0==g.left&&g.right==g.map.width)return!1;for(let M=g.right-1;te(f,g,M),M!=g.left;M--){const x=g.tableStart?f.doc.nodeAt(g.tableStart-1):f.doc;if(!x)throw RangeError("No table found");g.table=x,g.map=tt.get(x)}v(f)}return!0}(_,v),addRowBefore:()=>({state:_,dispatch:v})=>function(_,v){if(!F(_))return!1;if(v){const g=k(_);v($e(_.tr,g,g.top))}return!0}(_,v),addRowAfter:()=>({state:_,dispatch:v})=>function(_,v){if(!F(_))return!1;if(v){const g=k(_);v($e(_.tr,g,g.bottom))}return!0}(_,v),deleteRow:()=>({state:_,dispatch:v})=>function(_,v){if(!F(_))return!1;if(v){const g=k(_),f=_.tr;if(0==g.top&&g.bottom==g.map.height)return!1;for(let M=g.bottom-1;st(f,g,M),M!=g.top;M--){const x=g.tableStart?f.doc.nodeAt(g.tableStart-1):f.doc;if(!x)throw RangeError("No table found");g.table=x,g.map=tt.get(g.table)}v(f)}return!0}(_,v),deleteTable:()=>({state:_,dispatch:v})=>function(_,v){const g=_.selection.$anchor;for(let f=g.depth;f>0;f--)if("table"==g.node(f).type.spec.tableRole)return v&&v(_.tr.delete(g.before(f),g.after(f)).scrollIntoView()),!0;return!1}(_,v),mergeCells:()=>({state:_,dispatch:v})=>Ft(_,v),splitCell:()=>({state:_,dispatch:v})=>Qt(_,v),toggleHeaderColumn:()=>({state:_,dispatch:v})=>de("column")(_,v),toggleHeaderRow:()=>({state:_,dispatch:v})=>de("row")(_,v),toggleHeaderCell:()=>({state:_,dispatch:v})=>cn(_,v),mergeOrSplit:()=>({state:_,dispatch:v})=>!!Ft(_,v)||Qt(_,v),setCellAttribute:(_,v)=>({state:g,dispatch:f})=>function(_,v){return function(g,f){if(!F(g))return!1;const M=ut(g);if(M.nodeAfter.attrs[_]===v)return!1;if(f){const x=g.tr;g.selection instanceof dt?g.selection.forEachCell((R,Z)=>{R.attrs[_]!==v&&x.setNodeMarkup(Z,null,me(Gt({},R.attrs),{[_]:v}))}):x.setNodeMarkup(M.pos,null,me(Gt({},M.nodeAfter.attrs),{[_]:v})),f(x)}return!0}}(_,v)(g,f),goToNextCell:()=>({state:_,dispatch:v})=>Pn(1)(_,v),goToPreviousCell:()=>({state:_,dispatch:v})=>Pn(-1)(_,v),fixTables:()=>({state:_,dispatch:v})=>(v&&ne(_),!0),setCellSelection:_=>({tr:v,dispatch:g})=>{if(g){const f=dt.create(v.doc,_.anchorCell,_.headCell);v.setSelection(f)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:fn,"Mod-Backspace":fn,Delete:fn,"Mod-Delete":fn}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[gt({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],Un({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema:_=>({tableRole:(0,C.callOrReturn)((0,C.getExtensionField)(_,"tableRole",{name:_.name,options:_.options,storage:_.storage}))})}).extend({renderHTML({node:_,HTMLAttributes:v}){var g,f;let M=0,x=!0;try{const R=(null===(g=_.content)||void 0===g?void 0:g.content)[0];null===(f=null==R?void 0:R.content)||void 0===f||f.content.forEach(Z=>{Z.attrs.colwidth?Z.attrs.colwidth.forEach(W=>{W?M+=W:(x=!1,M+=this.options.cellMinWidth)}):(x=!1,M+=this.options.cellMinWidth*(Z.attrs.colspan||1))})}catch(R){x=!1}return v.style=x&&M>0?`width: ${M}px;`:M&&M>0?`min-width: ${M}px`:null,["div",{class:"tui-table-wrapper"},["table",(0,C.mergeAttributes)(this.options.HTMLAttributes,v),["tbody",0]]]}})},88806:(Yt,Tt,c)=>{c.d(Tt,{v:()=>l});var C=c(74788);class l{constructor(A,m,ot){const N=m.get(C.z2F),tt=m.get(C._Vd).resolveComponentFactory(A);this.componentRef=tt.create(m,[]),this.updateProps(ot),N.attachView(this.componentRef.hostView)}get instance(){return this.componentRef.instance}get elementRef(){return this.componentRef.injector.get(C.SBq)}get dom(){return this.elementRef.nativeElement}updateProps(A){Object.entries(A).forEach(([m,ot])=>{this.instance[m]=ot})}detectChanges(){this.componentRef.changeDetectorRef.detectChanges()}destroy(){this.componentRef.destroy()}}},40400:(Yt,Tt,c)=>{c.d(Tt,{d:()=>A,x:()=>ot});var C=c(12057),l=c(12867),y=c(88806);class A{}class m extends l.NodeView{constructor(){super(...arguments),this.contentDOMElement=null}mount(){const G=this.options.injector,tt=G.get(C.K0);this.renderer=new y.v(this.component,G,{editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(at={})=>this.updateAttributes(at),deleteNode:()=>this.deleteNode()}),this.extension.config.draggable&&(this.renderer.elementRef.nativeElement.ondragstart=at=>{this.onDragStart(at)}),this.contentDOMElement=this.node.isLeaf?null:tt.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit",this.renderer.detectChanges())}get dom(){return this.renderer.dom}get contentDOM(){return this.node.isLeaf?null:(this.maybeMoveContentDOM(),this.contentDOMElement)}update(G,tt){return this.options.update?this.options.update(G,tt):G.type===this.node.type&&(G===this.node&&this.decorations===tt||(this.node=G,this.decorations=tt,this.renderer.updateProps({node:G,decorations:tt}),this.maybeMoveContentDOM()),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy()}maybeMoveContentDOM(){const G=this.dom.querySelector("[data-node-view-content]");this.contentDOMElement&&G&&!G.contains(this.contentDOMElement)&&G.appendChild(this.contentDOMElement)}}const ot=(N,G)=>tt=>new m(N,tt,G)},48014:(Yt,Tt,c)=>{c.r(Tt),c.d(Tt,{AbstractTuiEditor:()=>C._,AbstractTuiEditorResizable:()=>Dt._3,BackgroundColor:()=>At.BackgroundColor,EDITOR_BLANK_COLOR:()=>ut.hK,FontColor:()=>It.FontColor,INITIALIZATION_TIPTAP_CONTAINER:()=>Kt.Y1,LAZY_EDITOR_EXTENSIONS:()=>Kt.F4,LAZY_TIPTAP_EDITOR:()=>Kt.bG,StarterKit:()=>$.StarterKit,TIPTAP_EDITOR:()=>Kt.ZW,TUI_ATTACH_FILES_LOADER:()=>Kt.zc,TUI_ATTACH_FILES_OPTIONS:()=>Kt.dR,TUI_DEFAULT_LINK_OPTIONS:()=>ut.pL,TUI_EDITOR_CODE_OPTIONS:()=>Kt.Mr,TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES:()=>Kt.dj,TUI_EDITOR_CONTENT_PROCESSOR:()=>Kt.F1,TUI_EDITOR_DEFAULT_OPTIONS:()=>Kt.HG,TUI_EDITOR_EXTENSIONS:()=>Kt.Wf,TUI_EDITOR_FONT_OPTIONS:()=>Kt.UN,TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>Rt.TUI_EDITOR_GROUP_DEFAULT_OPTIONS,TUI_EDITOR_LINK_HASH_PREFIX:()=>ut._s,TUI_EDITOR_LINK_HTTPS_PREFIX:()=>ut.Ci,TUI_EDITOR_LINK_HTTP_PREFIX:()=>ut.ML,TUI_EDITOR_LINK_TEXTS:()=>Kt.b$,TUI_EDITOR_MAX_IMAGE_WIDTH:()=>z.TUI_EDITOR_MAX_IMAGE_WIDTH,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>z.TUI_EDITOR_MIN_IMAGE_WIDTH,TUI_EDITOR_OPTIONS:()=>Kt.mJ,TUI_EDITOR_PROVIDERS:()=>mt.m,TUI_EDITOR_TABLE_COMMANDS:()=>Kt.$i,TUI_EDITOR_TOOLBAR_TEXTS:()=>Kt.rf,TUI_IFRAME_EDITOR_OPTIONS:()=>wt.TUI_IFRAME_EDITOR_OPTIONS,TUI_IMAGE_EDITOR_OPTIONS:()=>z.TUI_IMAGE_EDITOR_OPTIONS,TUI_IMAGE_LOADER:()=>Kt.p7,TableCellBackground:()=>et.TableCellBackground,TuiAlignContentComponent:()=>F.Xp,TuiAlignContentModule:()=>F.pu,TuiAudio:()=>ct.TuiAudio,TuiCodeComponent:()=>F.Tf,TuiCodeModule:()=>F.P_,TuiColorEditComponent:()=>l.hR,TuiColorEditModule:()=>l.TD,TuiColorPickerComponent:()=>l.$v,TuiColorPickerModule:()=>l.H9,TuiColorSelectorComponent:()=>l.sV,TuiColorSelectorModule:()=>l.wl,TuiComponentRenderer:()=>Et.v,TuiDetailsComponent:()=>F.yj,TuiDetailsModule:()=>F.y9,TuiDetailsRemoveComponent:()=>F.Un,TuiEditLinkComponent:()=>y.lV,TuiEditLinkModule:()=>y.Fu,TuiEditorComponent:()=>A.a,TuiEditorGroupToolComponent:()=>F.dN,TuiEditorImagePreviewDirective:()=>ft.Zj,TuiEditorImagePreviewModule:()=>ft.BN,TuiEditorModule:()=>it,TuiEditorPortalDirective:()=>Ot.A,TuiEditorPortalHostComponent:()=>St.d,TuiEditorPortalService:()=>kt.Y,TuiEditorResizableComponent:()=>Dt.V_,TuiEditorResizableModule:()=>Dt.Sl,TuiEditorSocketComponent:()=>ot.D,TuiEditorSocketModule:()=>G,TuiEditorTool:()=>j._,TuiEditorToolGroup:()=>F.jP,TuiFileLink:()=>Pt.TuiFileLink,TuiFilterAnchorsPipe:()=>y.bL,TuiFlatPickerComponent:()=>l.Jd,TuiFlatPickerModule:()=>l.ui,TuiFontSize:()=>_t.TuiFontSize,TuiFontSizeComponent:()=>F.mK,TuiFontSizeModule:()=>F.p7,TuiFontStyleComponent:()=>F.hr,TuiFontStyleModule:()=>F.Zv,TuiHighlightColorComponent:()=>F.UT,TuiHighlightColorModule:()=>F.XC,TuiIframeEditorComponent:()=>wt.TuiIframeEditorComponent,TuiIframeEditorModule:()=>wt.TuiIframeEditorModule,TuiImageEditorComponent:()=>z.TuiImageEditorComponent,TuiImageEditorModule:()=>z.TuiImageEditorModule,TuiInputColorComponent:()=>pt.j,TuiInputColorModule:()=>q,TuiLinearMultiPickerComponent:()=>l.es,TuiLinearMultiPickerModule:()=>l.GU,TuiLinearPickerComponent:()=>l.P,TuiLinearPickerModule:()=>l.g7,TuiLink:()=>dt.TuiLink,TuiListConfigsComponent:()=>F.w2,TuiListConfigsModule:()=>F.Ur,TuiNodeViewNgComponent:()=>$t.d,TuiNodeViewRenderer:()=>$t.x,TuiPaletteComponent:()=>l.Rh,TuiPaletteModule:()=>l.VM,TuiShortUrlPipe:()=>y.X,TuiSource:()=>ct.TuiSource,TuiTabExtension:()=>rt.TuiTabExtension,TuiTable:()=>nt.TuiTable,TuiTableCellColorComponent:()=>F.pH,TuiTableCellColorModule:()=>F.mp,TuiTableCommands:()=>F.iN,TuiTableCreateComponent:()=>F.lT,TuiTableCreateModule:()=>F.iA,TuiTableMergeCellsComponent:()=>F.YH,TuiTableMergeCellsModule:()=>F.er,TuiTableRowColumnManagerComponent:()=>F._I,TuiTableRowColumnManagerModule:()=>F.__,TuiTableSizeSelectorComponent:()=>F.M8,TuiTableSizeSelectorModule:()=>F.kU,TuiTextColorComponent:()=>F.G0,TuiTextColorModule:()=>F._t,TuiTiptapEditorDirective:()=>ft.JU,TuiTiptapEditorModule:()=>ft.mJ,TuiTiptapEditorService:()=>ft.$3,TuiToolbarComponent:()=>tt.M6,TuiToolbarModule:()=>tt.yB,TuiToolbarNavigationManagerDirective:()=>tt.Bp,TuiVideo:()=>ct.TuiVideo,createGroupExtension:()=>Rt.createGroupExtension,createIframeEditorExtension:()=>wt.createIframeEditorExtension,createImageEditorExtension:()=>z.createImageEditorExtension,defaultEditorColors:()=>ut.sw,defaultEditorExtensions:()=>Bt,defaultEditorTools:()=>ut.Db,tuiCreateImageEditorExtension:()=>z.tuiCreateImageEditorExtension,tuiDefaultFontOptionsHandler:()=>ut.RR,tuiDeleteNode:()=>ne.yU,tuiEditorOptionsProvider:()=>Kt.Uv,tuiGetElementPoint:()=>ne.Ws,tuiGetGradientData:()=>ne.U5,tuiGetMarkRange:()=>ne.Yz,tuiGetNestedNodes:()=>ne.YX,tuiGetSelectedContent:()=>ne.Ap,tuiInsertHtml:()=>ne.Xd,tuiInsertText:()=>ne.Oi,tuiIsOrderedOrBulletList:()=>rt.tuiIsOrderedOrBulletList,tuiIsSafeLinkRange:()=>ne.nC,tuiIsSelectionIn:()=>ne.i0,tuiLegacyEditorConverter:()=>ne.Er,tuiParseGradient:()=>ne._N,tuiParseNodeAttributes:()=>ne.x6,tuiParseStyle:()=>ne.jx,tuiToGradient:()=>ne.CH});var C=c(77361),l=c(27050),y=c(71115),A=c(69303),m=c(12057),ot=c(20179),N=c(74788);let G=(()=>{class zt{}return zt.\u0275fac=function(ye){return new(ye||zt)},zt.\u0275mod=N.oAB({type:zt}),zt.\u0275inj=N.cJS({}),zt})();var tt=c(17406),ft=c(84614),at=c(50259),Mt=c(3497);let it=(()=>{class zt{}return zt.\u0275fac=function(ye){return new(ye||zt)},zt.\u0275mod=N.oAB({type:zt}),zt.\u0275inj=N.cJS({imports:[[m.ez,tt.yB,Mt.TuiWrapperModule,Mt.TuiScrollbarModule,y.Fu,at.TuiActiveZoneModule,Mt.TuiDropdownModule,ft.mJ,G,at.TuiLetModule]]}),zt})();var mt=c(79089),Ot=c(1433),kt=c(73825),St=c(9872),Dt=c(95110),pt=c(19769);let q=(()=>{class zt{}return zt.\u0275fac=function(ye){return new(ye||zt)},zt.\u0275mod=N.oAB({type:zt}),zt.\u0275inj=N.cJS({imports:[[m.ez,Mt.TuiPrimitiveTextfieldModule,Mt.TuiTextfieldControllerModule,Mt.TuiHostedDropdownModule,l.wl,at.TuiActiveZoneModule]]}),zt})();var F=c(93252),ut=c(64352),j=c(48699),At=c(15736);const Bt=[Promise.resolve().then(c.bind(c,2823)).then(({StarterKit:zt})=>zt).then(zt=>zt.configure({heading:{levels:[1,2]}})),c.e(73336).then(c.bind(c,73336)).then(({default:zt})=>zt.configure({types:["heading","paragraph"]})),Promise.resolve().then(c.bind(c,84402)).then(({default:zt})=>zt),c.e(17991).then(c.bind(c,17991)).then(({default:zt})=>zt),c.e(77147).then(c.bind(c,77147)).then(({default:zt})=>zt),c.e(25034).then(c.bind(c,25034)).then(({default:zt})=>zt),Promise.resolve().then(c.bind(c,52658)).then(({FontColor:zt})=>zt),Promise.resolve().then(c.bind(c,44632)).then(({default:zt})=>zt.configure({inline:!0,allowBase64:!0})),Promise.resolve().then(c.bind(c,82091)).then(({TuiLink:zt})=>zt),c.e(54058).then(c.bind(c,54058)).then(({TuiJumpAnchor:zt})=>zt),Promise.resolve().then(c.bind(c,93763)).then(({TuiFileLink:zt})=>zt),Promise.resolve().then(c.bind(c,15736)).then(({BackgroundColor:zt})=>zt),Promise.resolve().then(c.bind(c,86624)).then(({TuiTable:zt})=>zt.configure({resizable:!0})),c.e(45213).then(c.bind(c,45213)).then(({default:zt})=>zt),c.e(71397).then(c.bind(c,71397)).then(({default:zt})=>zt),c.e(38840).then(c.bind(c,38840)).then(({TableHeader:zt})=>zt),Promise.resolve().then(c.bind(c,12177)).then(({TuiTabExtension:zt})=>zt),Promise.resolve().then(c.bind(c,51919)).then(({TableCellBackground:zt})=>zt),c.e(44312).then(c.bind(c,44312)).then(({TuiDetailsContent:zt})=>zt),c.e(44312).then(c.bind(c,44312)).then(({TuiDetails:zt})=>zt),c.e(44312).then(c.bind(c,44312)).then(({TuiSummary:zt})=>zt),Promise.resolve().then(c.bind(c,9492)).then(({TuiFontSize:zt})=>zt)];var Pt=c(93763),It=c(52658),_t=c(9492),Rt=c(54920),wt=c(20854),z=c(53380),rt=c(12177),dt=c(82091),ct=c(41512),$=c(2823),nt=c(86624),et=c(51919),Et=c(88806),$t=c(40400),Kt=c(14309),ne=c(27863)},62141:(Yt,Tt,c)=>{c.d(Tt,{i:()=>ft});var C=c(12057),l=c(74788),y=c(27863),A=c(50259),m=c(18891),ot=c(43190),N=c(88002),G=c(46782),tt=c(39761);let ft=(()=>{class at extends m.y{constructor(it,{nativeElement:mt},Ot){const kt=(0,A.tuiTypedFromEvent)(mt,"mousedown").pipe((0,A.tuiPreventDefault)(),(0,ot.w)(St=>{const Dt=(0,A.tuiTypedFromEvent)(Ot,"mousemove").pipe((0,N.U)(({clientX:pt,clientY:q})=>(0,y.Ws)(pt,q,mt)),(0,G.R)((0,A.tuiTypedFromEvent)(Ot,"mouseup")));return St.target===mt?Dt.pipe((0,tt.O)((0,y.Ws)(St.clientX,St.clientY,mt))):Dt}),(0,G.R)(it));super(St=>kt.subscribe(St))}}return at.\u0275fac=function(it){return new(it||at)(l.LFG(A.TuiDestroyService,2),l.LFG(l.SBq),l.LFG(C.K0))},at.\u0275prov=l.Yz7({token:at,factory:at.\u0275fac}),at})()},14309:(Yt,Tt,c)=>{c.d(Tt,{Y1:()=>Bt,F4:()=>y,bG:()=>At,ZW:()=>j,zc:()=>at,dR:()=>ft,Mr:()=>St,dj:()=>it,F1:()=>tt,HG:()=>m,Wf:()=>l,UN:()=>Dt,b$:()=>kt,mJ:()=>ot,$i:()=>Ot,rf:()=>mt,p7:()=>F,Uv:()=>N});var C=c(74788);const l=new C.OlP("[TUI_EDITOR_EXTENSIONS]"),y=new C.OlP("[LAZY_EDITOR_EXTENSIONS]");var A=c(64352);const m={colors:A.sw,blankColor:A.hK,linkOptions:A.pL,fontOptions:A.RR},ot=new C.OlP("[TUI_EDITOR_OPTIONS]",{factory:()=>m});function N(Pt){return{provide:ot,useValue:Object.assign(Object.assign({},m),Pt)}}var G=c(54487);const tt=new C.OlP("[TUI_EDITOR_CONTENT_PROCESSOR]",{factory:()=>G.y}),ft=new C.OlP("[TUI_ATTACH_FILES_OPTIONS]",{factory:()=>({accept:"*/*",multiple:!0})}),at=new C.OlP("[TUI_ATTACH_FILES_LOADER]");var Mt=c(72773);const it=new C.OlP("[TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES]",{factory:()=>["Solid color","Gradient"]}),mt=new C.OlP("[TUI_EDITOR_TOOLBAR_TEXTS]",{factory:(0,Mt.vv)("toolbarTools")}),Ot=new C.OlP("[TUI_EDITOR_TABLE_COMMANDS]",{factory:(0,Mt.vv)("editorTableCommands")}),kt=new C.OlP("[TUI_EDITOR_LINK_TEXTS]",{factory:(0,Mt.vv)("editorEditLink")}),St=new C.OlP("[TUI_EDITOR_CODE_OPTIONS]",{factory:(0,Mt.vv)("editorCodeOptions")}),Dt=new C.OlP("[TUI_EDITOR_FONT_OPTIONS]",{factory:(0,Mt.vv)("editorFontOptions")});var pt=c(50259),q=c(88002);const F=new C.OlP("[TUI_IMAGE_LOADER]",{factory:()=>Pt=>{const It=new FileReader;return It.readAsDataURL(Pt),(0,pt.tuiTypedFromEvent)(It,"load").pipe((0,q.U)(()=>String(It.result)))}});var ut=c(82298);const j=new C.OlP("[TIPTAP_EDITOR]"),At=new C.OlP("[LAZY_TIPTAP_EDITOR]",{factory:()=>{const Pt=new ut.t(1);return Promise.resolve().then(c.bind(c,12867)).then(It=>Pt.next(It.Editor)),Pt}}),Bt=new C.OlP("[INITIALIZATION_TIPTAP_CONTAINER]")},27863:(Yt,Tt,c)=>{function C(ct,$,nt){const et=ct.selection.$anchor;for(let Et=et.depth;Et>0;Et--)if(et.node(Et).type.name===nt)return $&&$(ct.tr.delete(et.before(Et),et.after(Et)).scrollIntoView()),!0;return!1}c.d(Tt,{yU:()=>C,Ws:()=>y,U5:()=>A,Yz:()=>N,YX:()=>tt,Ap:()=>at,Xd:()=>Mt,Oi:()=>it,nC:()=>rt,i0:()=>mt,Er:()=>Ot,_N:()=>_t,x6:()=>wt,jx:()=>z,CH:()=>dt});var l=c(50259);function y(ct,$,nt){const{left:et,top:Et,width:$t,height:Kt}=nt.getBoundingClientRect();return[(0,l.tuiClamp)(ct-et,0,$t)/$t,(0,l.tuiClamp)($-Et,0,Kt)/Kt]}function A(ct){return ct.slice(0,Math.max(0,ct.length-1)).replace("linear-gradient(","")}function ot(ct,$,nt={}){return ct.find(({attrs:et,type:Et})=>Et===$&&function(ct,$){const nt=Object.keys($);return!nt.length||!!nt.filter(et=>$[et]===ct[et]).length}(et,nt))||null}function N(ct,$,nt={}){if(!ct||!$)return null;const{node:et,offset:Et}=ct.parent.childAfter(ct.parentOffset);if(!et)return null;const $t=ot(et.marks,$,nt);if(!$t)return null;let Kt=ct.index(),ne=ct.start()+Et,zt=Kt+1,ce=ne+et.nodeSize;for(ot(et.marks,$,nt);Kt>0&&$t.isInSet(ct.parent.child(Kt-1).marks);)Kt-=1,ne-=ct.parent.child(Kt).nodeSize;for(;zt<ct.parent.childCount&&ot(ct.parent.child(zt).marks,$,nt);)ce+=ct.parent.child(zt).nodeSize,zt+=1;return{from:ne,to:ce}}var G=c(77346);function tt(ct){const $=[];return ct.content.forEach(nt=>{nt instanceof G.NB&&$.push([nt.type.name,nt.attrs])}),$}var ft=c(12867);function at(ct,$){const nt=null!=$?$:ct.selection.$head.parent.textContent,et=ct.doc.cut(ct.selection.from,ct.selection.to);return et.content.size?(0,ft.getHTMLFromFragment)(et.content,ct.schema):nt}function Mt(ct,$){if(ct.queryCommandSupported("insertHTML"))return void ct.execCommand("insertHTML",!1,$);const nt=ct.getSelection();if(!nt)throw new l.TuiDocumentSelectionException;ct.execCommand("ms-beginUndoUnit");const et=nt.getRangeAt(0),Et=et.createContextualFragment($);et.deleteContents(),et.insertNode(Et),ct.execCommand("ms-endUndoUnit")}function it(ct,$){if(ct.queryCommandSupported("insertText"))return void ct.execCommand("insertText",!1,$);const nt=ct.getSelection();if(!nt)throw new l.TuiDocumentSelectionException;ct.execCommand("ms-beginUndoUnit");const et=nt.getRangeAt(0);et.deleteContents(),et.insertNode(ct.createTextNode($)),ct.execCommand("ms-endUndoUnit")}function mt({anchorNode:ct,focusNode:$},nt){return!!ct&&!!$&&(0,l.tuiIsNodeIn)(ct,nt)&&(0,l.tuiIsNodeIn)($,nt)}function Ot(ct){const $=(new DOMParser).parseFromString(ct,"text/html");return kt($.body),$.body.innerHTML}function kt(ct){for(const $ of Array.from(ct.children))if($.children.length&&kt($),"FONT"===$.tagName)if($.hasAttribute("size"))switch($.getAttribute("size")){case"6":St("h1",$);break;case"5":St("h2",$);break;case"4":Dt("17px",$);break;case"3":Dt("15px",$);break;case"2":Dt("13px",$)}else $.hasAttribute("color")&&pt($)}function St(ct,$){var nt,et,Et,$t,Kt,ne,zt,ce,ye;const Oe=document.createElement(ct);if(Oe.innerHTML=$.innerHTML,"P"===(null===(nt=$.parentElement)||void 0===nt?void 0:nt.tagName)){const he=null===(Et=null===(et=$.parentElement)||void 0===et?void 0:et.parentElement)||void 0===Et?void 0:Et.insertBefore(Oe,$.parentElement);null===($t=$.parentElement)||void 0===$t||$t.removeChild($),(null==he?void 0:he.nextSibling)&&!(null===(ne=null===(Kt=null==he?void 0:he.nextSibling)||void 0===Kt?void 0:Kt.textContent)||void 0===ne?void 0:ne.trim())&&(null===(ce=null===(zt=he.nextSibling)||void 0===zt?void 0:zt.parentElement)||void 0===ce||ce.removeChild(he.nextSibling))}else null===(ye=$.parentElement)||void 0===ye||ye.replaceChild(Oe,$)}function Dt(ct,$){var nt;const et=document.createElement("p"),Et=document.createElement("span");Et.setAttribute("style",`font-size: ${ct}`),Et.innerHTML=$.innerHTML,et.append(Et),null===(nt=$.parentElement)||void 0===nt||nt.replaceChild("P"===$.parentElement.tagName?Et:et,$)}function pt(ct){var $;const nt=document.createElement("span");nt.setAttribute("style",`color: ${ct.getAttribute("color")}`),nt.innerHTML=ct.innerHTML,null===($=ct.parentElement)||void 0===$||$.replaceChild(nt,ct)}const It=["\\s*(","(?:","#(?:[a-f0-9]{6}|[a-f0-9]{3})","|","(?:rgb|hsl)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*\\)","|","(?:rgba|hsla)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*,\\s*\\d*\\.?\\d+\\)","|","[_a-z-][_a-z0-9-]*",")",")","(?:\\s+","(","(?:[+-]?\\d*\\.?\\d+)(?:%|[a-z]+)?","))?","(?:","\\s*,\\s*","\\s*)?"];function _t(ct){const $=new RegExp(It.join(""),"gi"),nt=ct.startsWith("to")||ct.match(/^\d/)?ct.slice(Math.max(0,ct.indexOf(",")+1)).trim():ct,et=ct.startsWith("to")?ct.split(",")[0]:"to bottom";let Et=[],$t=$.exec(nt);for(;null!==$t;)Et=Et.concat({color:$t[1],position:Rt($t[2],Et.length)}),$t=$.exec(nt);return Et=Et.filter(({color:Kt})=>Kt.startsWith("#")||Kt.startsWith("rgb")),{stops:Et,side:et}}function Rt(ct,$){const nt=1===$?"100%":`${$}%`;return(null==ct?void 0:ct.includes("%"))?ct:nt}function wt(ct){return ct.reduce(($,nt)=>($[nt]={parseHTML:et=>null==et?void 0:et.getAttribute(`${nt}`)},$),{})}function z(ct){return ct.split(";").reduce(($,nt)=>{var et;const[Et,$t]=null!==(et=nt.split(":"))&&void 0!==et?et:[];return Et&&$t&&($[Et.trim()]=$t.trim()),$},{})}function rt(ct){var $;return ct.endOffset-ct.startOffset>0||0!==ct.startOffset&&ct.endOffset!==((null===($=ct.endContainer.nodeValue)||void 0===$?void 0:$.length)||0)}function dt({stops:ct,side:$}){return`linear-gradient(${$}, ${ct.map(({color:nt,position:et})=>`rgba(${(0,l.tuiParseColor)(nt).join(", ")}) ${et}`).join(", ")})`}},28680:(Yt,Tt,c)=>{c.d(Tt,{A:()=>l});var C=c(50259);function l(y,A){const m=y instanceof C.TuiDay?Number(y.toUtcNativeDate()):y,ot=A instanceof C.TuiDay?Number(A.toUtcNativeDate()):A;return m===ot?0:(0,C.tuiIsString)(m)&&(0,C.tuiIsString)(ot)?m.localeCompare(ot):m>ot?1:-1}},12867:(Yt,Tt,c)=>{c.r(Tt),c.d(Tt,{CommandManager:()=>b,Editor:()=>Ko,Extension:()=>de,InputRule:()=>we,Mark:()=>Bn,Node:()=>jn,NodeView:()=>mo,PasteRule:()=>vt,Tracker:()=>d,callOrReturn:()=>a,combineTransactionSteps:()=>To,createChainableState:()=>gt,createDocument:()=>tn,createNodeFromContent:()=>Wt,createStyleTag:()=>po,defaultBlockAt:()=>eo,deleteProps:()=>Xe,elementFromString:()=>Ut,escapeForRegEx:()=>go,extensions:()=>uo,findChildren:()=>vo,findChildrenInRange:()=>Co,findDuplicates:()=>Qt,findParentNode:()=>wn,findParentNodeClosestToPos:()=>no,fromString:()=>E,generateHTML:()=>oo,generateJSON:()=>Mo,generateText:()=>io,getAttributes:()=>ro,getAttributesFromExtensions:()=>V,getChangedRanges:()=>yo,getDebugJSON:()=>Rn,getExtensionField:()=>I,getHTMLFromFragment:()=>Fn,getMarkAttributes:()=>Gn,getMarkRange:()=>v,getMarkType:()=>g,getMarksBetween:()=>Xn,getNodeAttributes:()=>zn,getNodeType:()=>U,getRenderedAttributes:()=>Nt,getSchema:()=>Kn,getSchemaByResolvedExtensions:()=>K,getSchemaTypeByName:()=>lt,getSchemaTypeNameByName:()=>ln,getSplittedAttributes:()=>Ln,getText:()=>Jn,getTextBetween:()=>Re,getTextContentFromNodes:()=>te,getTextSerializersFromSchema:()=>We,injectExtensionAttributesToParseRule:()=>P,inputRulesPlugin:()=>S,isActive:()=>$n,isEmptyObject:()=>p,isExtensionRulesEnabled:()=>Ht,isFunction:()=>H,isList:()=>pn,isMacOS:()=>De,isMarkActive:()=>En,isNodeActive:()=>pe,isNodeEmpty:()=>Zn,isNodeSelection:()=>on,isNumber:()=>st,isPlainObject:()=>se,isRegExp:()=>ee,isString:()=>r,isTextSelection:()=>x,isiOS:()=>W,markInputRule:()=>Jo,markPasteRule:()=>Lo,mergeAttributes:()=>bt,mergeDeep:()=>le,minMax:()=>R,nodeInputRule:()=>$o,nodePasteRule:()=>o,objectIncludes:()=>rn,pasteRulesPlugin:()=>Ft,posToDOMRect:()=>Nn,removeDuplicates:()=>An,resolveFocusPosition:()=>Z,selectionToInsertionEnd:()=>jt,splitExtensions:()=>w,textInputRule:()=>ho,textPasteRule:()=>s,textblockTypeInputRule:()=>Ro,wrappingInputRule:()=>fo});var C=c(62463),l=c(43594),y=c(70768),A=c(77346),m=c(38480);const ot=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);const G=(e,t,n)=>{let i=function(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}(e,n);if(!i)return!1;let u=mt(i);if(!u){let T=i.blockRange(),D=T&&(0,m.k9)(T);return null!=D&&(t&&t(e.tr.lift(T,D).scrollIntoView()),!0)}let h=u.nodeBefore;if(!h.type.spec.isolating&&dt(e,u,t))return!0;if(0==i.parent.content.size&&(Mt(h,"end")||C.qv.isSelectable(h))){let T=(0,m.dR)(e.doc,i.before(),i.after(),A.p2.empty);if(T&&T.slice.size<T.to-T.from){if(t){let D=e.tr.step(T);D.setSelection(Mt(h,"end")?C.Y1.findFrom(D.doc.resolve(D.mapping.map(u.pos,-1)),-1):C.qv.create(D.doc,u.pos-h.nodeSize)),t(D.scrollIntoView())}return!0}}return!(!h.isAtom||u.depth!=i.depth-1||(t&&t(e.tr.delete(u.pos-h.nodeSize,u.pos).scrollIntoView()),0))};function Mt(e,t,n=!1){for(let i=e;i;i="start"==t?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&1!=i.childCount)return!1}return!1}const it=(e,t,n)=>{let{$head:i,empty:u}=e.selection,h=i;if(!u)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):i.parentOffset>0)return!1;h=mt(i)}let T=h&&h.nodeBefore;return!(!T||!C.qv.isSelectable(T)||(t&&t(e.tr.setSelection(C.qv.create(e.doc,h.pos-T.nodeSize)).scrollIntoView()),0))};function mt(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}const kt=(e,t,n)=>{let i=function(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}(e,n);if(!i)return!1;let u=Dt(i);if(!u)return!1;let h=u.nodeAfter;if(dt(e,u,t))return!0;if(0==i.parent.content.size&&(Mt(h,"start")||C.qv.isSelectable(h))){let T=(0,m.dR)(e.doc,i.before(),i.after(),A.p2.empty);if(T&&T.slice.size<T.to-T.from){if(t){let D=e.tr.step(T);D.setSelection(Mt(h,"start")?C.Y1.findFrom(D.doc.resolve(D.mapping.map(u.pos)),1):C.qv.create(D.doc,D.mapping.map(u.pos))),t(D.scrollIntoView())}return!0}}return!(!h.isAtom||u.depth!=i.depth-1||(t&&t(e.tr.delete(u.pos,u.pos+h.nodeSize).scrollIntoView()),0))},St=(e,t,n)=>{let{$head:i,empty:u}=e.selection,h=i;if(!u)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size)return!1;h=Dt(i)}let T=h&&h.nodeAfter;return!(!T||!C.qv.isSelectable(T)||(t&&t(e.tr.setSelection(C.qv.create(e.doc,h.pos)).scrollIntoView()),0))};function Dt(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const ut=(e,t)=>{let{$head:n,$anchor:i}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(i)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))};function j(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const At=(e,t)=>{let{$head:n,$anchor:i}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let u=n.node(-1),h=n.indexAfter(-1),T=j(u.contentMatchAt(h));if(!T||!u.canReplaceWith(h,h,T))return!1;if(t){let D=n.after(),L=e.tr.replaceWith(D,D,T.createAndFill());L.setSelection(C.Y1.near(L.doc.resolve(D),1)),t(L.scrollIntoView())}return!0},Bt=(e,t)=>{let n=e.selection,{$from:i,$to:u}=n;if(n instanceof C.C1||i.parent.inlineContent||u.parent.inlineContent)return!1;let h=j(u.parent.contentMatchAt(u.indexAfter()));if(!h||!h.isTextblock)return!1;if(t){let T=(!i.parentOffset&&u.index()<u.parent.childCount?i:u).pos,D=e.tr.insert(T,h.createAndFill());D.setSelection(C.Bs.create(D.doc,T+1)),t(D.scrollIntoView())}return!0},Pt=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let h=n.before();if((0,m.Ax)(e.doc,h))return t&&t(e.tr.split(h).scrollIntoView()),!0}let i=n.blockRange(),u=i&&(0,m.k9)(i);return null!=u&&(t&&t(e.tr.lift(i,u).scrollIntoView()),!0)};var e;function dt(e,t,n){let h,T,i=t.nodeBefore,u=t.nodeAfter;if(i.type.spec.isolating||u.type.spec.isolating)return!1;if(function(e,t,n){let i=t.nodeBefore,u=t.nodeAfter,h=t.index();return!(!(i&&u&&i.type.compatibleContent(u.type))||(!i.content.size&&t.parent.canReplace(h-1,h)?(n&&n(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(h,h+1)||!u.isTextblock&&!(0,m.Mn)(e.doc,t.pos)||(n&&n(e.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;let D=t.parent.canReplace(t.index(),t.index()+1);if(D&&(h=(T=i.contentMatchAt(i.childCount)).findWrapping(u.type))&&T.matchType(h[0]||u.type).validEnd){if(n){let X=t.pos+u.nodeSize,ht=A.HY.empty;for(let Vt=h.length-1;Vt>=0;Vt--)ht=A.HY.from(h[Vt].create(null,ht));ht=A.HY.from(i.copy(ht));let Lt=e.tr.step(new m.FC(t.pos-1,X,t.pos,X,new A.p2(ht,1,0),h.length,!0)),Zt=X+2*h.length;(0,m.Mn)(Lt.doc,Zt)&&Lt.join(Zt),n(Lt.scrollIntoView())}return!0}let L=C.Y1.findFrom(t,1),B=L&&L.$from.blockRange(L.$to),Y=B&&(0,m.k9)(B);if(null!=Y&&Y>=t.depth)return n&&n(e.tr.lift(B,Y).scrollIntoView()),!0;if(D&&Mt(u,"start",!0)&&Mt(i,"end")){let X=i,ht=[];for(;ht.push(X),!X.isTextblock;)X=X.lastChild;let Lt=u,Zt=1;for(;!Lt.isTextblock;Lt=Lt.firstChild)Zt++;if(X.canReplace(X.childCount,X.childCount,Lt.content)){if(n){let Vt=A.HY.empty;for(let qt=ht.length-1;qt>=0;qt--)Vt=A.HY.from(ht[qt].copy(Vt));n(e.tr.step(new m.FC(t.pos-ht.length,t.pos+u.nodeSize,t.pos+Zt,t.pos+u.nodeSize-Zt,new A.p2(Vt,ht.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function ct(e){return function(t,n){let i=t.selection,u=e<0?i.$from:i.$to,h=u.depth;for(;u.node(h).isInline;){if(!h)return!1;h--}return!!u.node(h).isTextblock&&(n&&n(t.tr.setSelection(C.Bs.create(t.doc,e<0?u.start(h):u.end(h)))),!0)}}const $=ct(-1),nt=ct(1);function Et(e,t=null){return function(n,i){let u=!1;for(let h=0;h<n.selection.ranges.length&&!u;h++){let{$from:{pos:T},$to:{pos:D}}=n.selection.ranges[h];n.doc.nodesBetween(T,D,(L,B)=>{if(u)return!1;if(L.isTextblock&&!L.hasMarkup(e,t))if(L.type==e)u=!0;else{let Y=n.doc.resolve(B),X=Y.index();u=Y.parent.canReplaceWith(X,X+1,e)}})}if(!u)return!1;if(i){let h=n.tr;for(let T=0;T<n.selection.ranges.length;T++){let{$from:{pos:D},$to:{pos:L}}=n.selection.ranges[T];h.setBlockType(D,L,e,t)}i(h.scrollIntoView())}return!0}}function ce(...e){return function(t,n,i){for(let u=0;u<e.length;u++)if(e[u](t,n,i))return!0;return!1}}let ye=ce(ot,G,it),Oe=ce(ot,kt,St);const he={Enter:ce(ut,Bt,Pt,(t,n)=>{let{$from:i,$to:u}=t.selection;if(t.selection instanceof C.qv&&t.selection.node.isBlock)return!(!i.parentOffset||!(0,m.Ax)(t.doc,i.pos)||(n&&n(t.tr.split(i.pos).scrollIntoView()),0));if(!i.parent.isBlock)return!1;if(n){let h=u.parentOffset==u.parent.content.size,T=t.tr;(t.selection instanceof C.Bs||t.selection instanceof C.C1)&&T.deleteSelection();let D=0==i.depth?null:j(i.node(-1).contentMatchAt(i.indexAfter(-1))),L=e,B=L?[L]:h&&D?[{type:D}]:void 0,Y=(0,m.Ax)(T.doc,T.mapping.map(i.pos),1,B);if(!B&&!Y&&(0,m.Ax)(T.doc,T.mapping.map(i.pos),1,D?[{type:D}]:void 0)&&(D&&(B=[{type:D}]),Y=!0),Y&&(T.split(T.mapping.map(i.pos),1,B),!h&&!i.parentOffset&&i.parent.type!=D)){let X=T.mapping.map(i.before()),ht=T.doc.resolve(X);D&&i.node(-1).canReplaceWith(ht.index(),ht.index()+1,D)&&T.setNodeMarkup(T.mapping.map(i.before()),D)}n(T.scrollIntoView())}return!0}),"Mod-Enter":At,Backspace:ye,"Mod-Backspace":ye,"Shift-Backspace":ye,Delete:Oe,"Mod-Delete":Oe,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new C.C1(e.doc))),!0)},Je={"Ctrl-h":he.Backspace,"Alt-Backspace":he["Mod-Backspace"],"Ctrl-d":he.Delete,"Ctrl-Alt-Backspace":he["Mod-Delete"],"Alt-Delete":he["Mod-Delete"],"Alt-d":he["Mod-Delete"],"Ctrl-a":$,"Ctrl-e":nt};for(let e in he)Je[e]=he[e];function gt(e){const{state:t,transaction:n}=e;let{selection:i}=n,{doc:u}=n,{storedMarks:h}=n;return me(Gt({},t),{apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),filterTransaction:t.filterTransaction,plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return h},get selection(){return i},get doc(){return u},get tr(){return i=n.selection,u=n.doc,h=n.storedMarks,n}})}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();class b{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:i}=this,{view:u}=n,{tr:h}=i,T=this.buildProps(h);return Object.fromEntries(Object.entries(t).map(([D,L])=>[D,(...Y)=>{const X=L(...Y)(T);return!h.getMeta("preventDispatch")&&!this.hasCustomState&&u.dispatch(h),X}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:i,editor:u,state:h}=this,{view:T}=u,D=[],L=!!t,B=t||h.tr,X=me(Gt({},Object.fromEntries(Object.entries(i).map(([ht,Lt])=>[ht,(...Vt)=>{const Xt=this.buildProps(B,n),qt=Lt(...Vt)(Xt);return D.push(qt),X}]))),{run:()=>(!L&&n&&!B.getMeta("preventDispatch")&&!this.hasCustomState&&T.dispatch(B),D.every(ht=>!0===ht))});return X}createCan(t){const{rawCommands:n,state:i}=this,h=t||i.tr,T=this.buildProps(h,!1),D=Object.fromEntries(Object.entries(n).map(([L,B])=>[L,(...Y)=>B(...Y)(me(Gt({},T),{dispatch:void 0}))]));return me(Gt({},D),{chain:()=>this.createChain(h,!1)})}buildProps(t,n=!0){const{rawCommands:i,editor:u,state:h}=this,{view:T}=u;h.storedMarks&&t.setStoredMarks(h.storedMarks);const D={tr:t,editor:u,view:T,state:gt({state:h,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(i).map(([L,B])=>[L,(...Y)=>B(...Y)(D)]))}};return D}}function I(e,t,n){return void 0===e.config[t]&&e.parent?I(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind(me(Gt({},n),{parent:e.parent?I(e.parent,t,n):null})):e.config[t]}function w(e){return{baseExtensions:e.filter(u=>"extension"===u.type),nodeExtensions:e.filter(u=>"node"===u.type),markExtensions:e.filter(u=>"mark"===u.type)}}function V(e){const t=[],{nodeExtensions:n,markExtensions:i}=w(e),u=[...n,...i],h={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(T=>{const L=I(T,"addGlobalAttributes",{name:T.name,options:T.options,storage:T.storage});L&&L().forEach(Y=>{Y.types.forEach(X=>{Object.entries(Y.attributes).forEach(([ht,Lt])=>{t.push({type:X,name:ht,attribute:Gt(Gt({},h),Lt)})})})})}),u.forEach(T=>{const L=I(T,"addAttributes",{name:T.name,options:T.options,storage:T.storage});if(!L)return;const B=L();Object.entries(B).forEach(([Y,X])=>{const ht=Gt(Gt({},h),X);"function"==typeof(null==ht?void 0:ht.default)&&(ht.default=ht.default()),(null==ht?void 0:ht.isRequired)&&void 0===(null==ht?void 0:ht.default)&&delete ht.default,t.push({type:T.name,name:Y,attribute:ht})})}),t}function U(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function bt(...e){return e.filter(t=>!!t).reduce((t,n)=>{const i=Gt({},t);return Object.entries(n).forEach(([u,h])=>{i[u]=i[u]?"class"===u?[i[u],h].join(" "):"style"===u?[i[u],h].join("; "):h:h}),i},{})}function Nt(e,t){return t.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,i)=>bt(n,i),{})}function H(e){return"function"==typeof e}function a(e,t,...n){return H(e)?t?e.bind(t)(...n):e(...n):e}function p(e={}){return 0===Object.keys(e).length&&e.constructor===Object}function E(e){return"string"!=typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}function P(e,t){return e.style?e:me(Gt({},e),{getAttrs:n=>{const i=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===i)return!1;const u=t.reduce((h,T)=>{const D=T.attribute.parseHTML?T.attribute.parseHTML(n):E(n.getAttribute(T.name));return null==D?h:me(Gt({},h),{[T.name]:D})},{});return Gt(Gt({},i),u)}})}function k(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>("attrs"!==t||!p(n))&&null!=n))}function K(e,t){var n;const i=V(e),{nodeExtensions:u,markExtensions:h}=w(e),T=null===(n=u.find(B=>I(B,"topNode")))||void 0===n?void 0:n.name,D=Object.fromEntries(u.map(B=>{const Y=i.filter(qt=>qt.type===B.name),X={name:B.name,options:B.options,storage:B.storage,editor:t},ht=e.reduce((qt,Se)=>{const Ke=I(Se,"extendNodeSchema",X);return Gt(Gt({},qt),Ke?Ke(B):{})},{}),Lt=k(me(Gt({},ht),{content:a(I(B,"content",X)),marks:a(I(B,"marks",X)),group:a(I(B,"group",X)),inline:a(I(B,"inline",X)),atom:a(I(B,"atom",X)),selectable:a(I(B,"selectable",X)),draggable:a(I(B,"draggable",X)),code:a(I(B,"code",X)),defining:a(I(B,"defining",X)),isolating:a(I(B,"isolating",X)),attrs:Object.fromEntries(Y.map(qt=>{var Se;return[qt.name,{default:null===(Se=null==qt?void 0:qt.attribute)||void 0===Se?void 0:Se.default}]}))})),Zt=a(I(B,"parseHTML",X));Zt&&(Lt.parseDOM=Zt.map(qt=>P(qt,Y)));const Vt=I(B,"renderHTML",X);Vt&&(Lt.toDOM=qt=>Vt({node:qt,HTMLAttributes:Nt(qt,Y)}));const Xt=I(B,"renderText",X);return Xt&&(Lt.toText=Xt),[B.name,Lt]})),L=Object.fromEntries(h.map(B=>{const Y=i.filter(Xt=>Xt.type===B.name),X={name:B.name,options:B.options,storage:B.storage,editor:t},ht=e.reduce((Xt,qt)=>{const Se=I(qt,"extendMarkSchema",X);return Gt(Gt({},Xt),Se?Se(B):{})},{}),Lt=k(me(Gt({},ht),{inclusive:a(I(B,"inclusive",X)),excludes:a(I(B,"excludes",X)),group:a(I(B,"group",X)),spanning:a(I(B,"spanning",X)),code:a(I(B,"code",X)),attrs:Object.fromEntries(Y.map(Xt=>{var qt;return[Xt.name,{default:null===(qt=null==Xt?void 0:Xt.attribute)||void 0===qt?void 0:qt.default}]}))})),Zt=a(I(B,"parseHTML",X));Zt&&(Lt.parseDOM=Zt.map(Xt=>P(Xt,Y)));const Vt=I(B,"renderHTML",X);return Vt&&(Lt.toDOM=Xt=>Vt({mark:Xt,HTMLAttributes:Nt(Xt,Y)})),[B.name,Lt]}));return new A.V_({topNode:T,nodes:D,marks:L})}function lt(e,t){return t.nodes[e]||t.marks[e]||null}function Ht(e,t){return Array.isArray(t)?t.some(n=>("string"==typeof n?n:n.name)===e.name):t}const te=(e,t=500)=>{let n="";const i=e.parentOffset;return e.parent.nodesBetween(Math.max(0,i-t),i,(u,h,T,D)=>{var L,B;n+=((null===(B=(L=u.type.spec).toText)||void 0===B?void 0:B.call(L,{node:u,pos:h,parent:T,index:D}))||u.textContent||"%leaf%").slice(0,Math.max(0,i-h))}),n};function ee(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class we{constructor(t){this.find=t.find,this.handler=t.handler}}function J(e){var t;const{editor:n,from:i,to:u,text:h,rules:T,plugin:D}=e,{view:L}=n;if(L.composing)return!1;const B=L.state.doc.resolve(i);if(B.parent.type.spec.code||(null===(t=B.nodeBefore||B.nodeAfter)||void 0===t?void 0:t.marks.find(ht=>ht.type.spec.code)))return!1;let Y=!1;const X=te(B)+h;return T.forEach(ht=>{if(Y)return;const Lt=((e,t)=>{if(ee(t))return t.exec(e);const n=t(e);if(!n)return null;const i=[n.text];return i.index=n.index,i.input=e,i.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(n.replaceWith)),i})(X,ht.find);if(!Lt)return;const Zt=L.state.tr,Vt=gt({state:L.state,transaction:Zt}),Xt={from:i-(Lt[0].length-h.length),to:u},{commands:qt,chain:Se,can:Ke}=new b({editor:n,state:Vt});null===ht.handler({state:Vt,range:Xt,match:Lt,commands:qt,chain:Se,can:Ke})||!Zt.steps.length||(Zt.setMeta(D,{transform:Zt,from:i,to:u,text:h}),L.dispatch(Zt),Y=!0)}),Y}function S(e){const{editor:t,rules:n}=e,i=new C.Sy({state:{init:()=>null,apply:(u,h)=>u.getMeta(i)||(u.selectionSet||u.docChanged?null:h)},props:{handleTextInput:(u,h,T,D)=>J({editor:t,from:h,to:T,text:D,rules:n,plugin:i}),handleDOMEvents:{compositionend:u=>(setTimeout(()=>{const{$cursor:h}=u.state.selection;h&&J({editor:t,from:h.pos,to:h.pos,text:"",rules:n,plugin:i})}),!1)},handleKeyDown(u,h){if("Enter"!==h.key)return!1;const{$cursor:T}=u.state.selection;return!!T&&J({editor:t,from:T.pos,to:T.pos,text:"\n",rules:n,plugin:i})}},isInputRules:!0});return i}function st(e){return"number"==typeof e}class vt{constructor(t){this.find=t.find,this.handler=t.handler}}function Ft(e){const{editor:t,rules:n}=e;let i=null,u=!1,h=!1;return n.map(D=>new C.Sy({view(L){const B=Y=>{var X;i=(null===(X=L.dom.parentElement)||void 0===X?void 0:X.contains(Y.target))?L.dom.parentElement:null};return window.addEventListener("dragstart",B),{destroy(){window.removeEventListener("dragstart",B)}}},props:{handleDOMEvents:{drop:L=>(h=i===L.dom.parentElement,!1),paste:(L,B)=>{var Y;const X=null===(Y=B.clipboardData)||void 0===Y?void 0:Y.getData("text/html");return u=!!(null==X?void 0:X.includes("data-pm-slice")),!1}}},appendTransaction:(L,B,Y)=>{const X=L[0],ht="paste"===X.getMeta("uiEvent")&&!u,Lt="drop"===X.getMeta("uiEvent")&&!h;if(!ht&&!Lt)return;const Zt=B.doc.content.findDiffStart(Y.doc.content),Vt=B.doc.content.findDiffEnd(Y.doc.content);if(!st(Zt)||!Vt||Zt===Vt.b)return;const Xt=Y.tr,qt=gt({state:Y,transaction:Xt});return function(e){const{editor:t,state:n,from:i,to:u,rule:h}=e,{commands:T,chain:D,can:L}=new b({editor:t,state:n}),B=[];return n.doc.nodesBetween(i,u,(X,ht)=>{if(!X.isTextblock||X.type.spec.code)return;const Lt=Math.max(i,ht),Zt=Math.min(u,ht+X.content.size);((e,t)=>{if(ee(t))return[...e.matchAll(t)];const n=t(e);return n?n.map(i=>{const u=[i.text];return u.index=i.index,u.input=e,u.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),u.push(i.replaceWith)),u}):[]})(X.textBetween(Lt-ht,Zt-ht,void 0,"\ufffc"),h.find).forEach(qt=>{if(void 0===qt.index)return;const Se=Lt+qt.index+1,Ke=Se+qt[0].length,ae={from:n.tr.mapping.map(Se),to:n.tr.mapping.map(Ke)},Ve=h.handler({state:n,range:ae,match:qt,commands:T,chain:D,can:L});B.push(Ve)})}),B.every(X=>null!==X)}({editor:t,state:qt,from:Math.max(Zt-1,0),to:Vt.b-1,rule:D})&&Xt.steps.length?Xt:void 0}}))}function Qt(e){const t=e.filter((n,i)=>e.indexOf(n)!==i);return[...new Set(t)]}class oe{constructor(t,n){this.splittableMarks=[],this.editor=n,this.extensions=oe.resolve(t),this.schema=K(this.extensions,n),this.extensions.forEach(i=>{var u;this.editor.extensionStorage[i.name]=i.storage;const h={name:i.name,options:i.options,storage:i.storage,editor:this.editor,type:lt(i.name,this.schema)};"mark"===i.type&&(null===(u=a(I(i,"keepOnSplit",h)))||void 0===u||u)&&this.splittableMarks.push(i.name);const T=I(i,"onBeforeCreate",h);T&&this.editor.on("beforeCreate",T);const D=I(i,"onCreate",h);D&&this.editor.on("create",D);const L=I(i,"onUpdate",h);L&&this.editor.on("update",L);const B=I(i,"onSelectionUpdate",h);B&&this.editor.on("selectionUpdate",B);const Y=I(i,"onTransaction",h);Y&&this.editor.on("transaction",Y);const X=I(i,"onFocus",h);X&&this.editor.on("focus",X);const ht=I(i,"onBlur",h);ht&&this.editor.on("blur",ht);const Lt=I(i,"onDestroy",h);Lt&&this.editor.on("destroy",Lt)})}static resolve(t){const n=oe.sort(oe.flatten(t)),i=Qt(n.map(u=>u.name));return i.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${i.map(u=>`'${u}'`).join(", ")}]. This can lead to issues.`),n}static flatten(t){return t.map(n=>{const u=I(n,"addExtensions",{name:n.name,options:n.options,storage:n.storage});return u?[n,...this.flatten(u())]:n}).flat(10)}static sort(t){return t.sort((i,u)=>{const h=I(i,"priority")||100,T=I(u,"priority")||100;return h>T?-1:h<T?1:0})}get commands(){return this.extensions.reduce((t,n)=>{const u=I(n,"addCommands",{name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:lt(n.name,this.schema)});return u?Gt(Gt({},t),u()):t},{})}get plugins(){const{editor:t}=this,n=oe.sort([...this.extensions].reverse()),i=[],u=[],h=n.map(T=>{const D={name:T.name,options:T.options,storage:T.storage,editor:t,type:lt(T.name,this.schema)},L=[],B=I(T,"addKeyboardShortcuts",D);let Y={};if("mark"===T.type&&T.config.exitable&&(Y.ArrowRight=()=>Bn.handleExit({editor:t,mark:T})),B){const Vt=Object.fromEntries(Object.entries(B()).map(([Xt,qt])=>[Xt,()=>qt({editor:t})]));Y=Gt(Gt({},Y),Vt)}const X=(0,y.h)(Y);L.push(X);const ht=I(T,"addInputRules",D);Ht(T,t.options.enableInputRules)&&ht&&i.push(...ht());const Lt=I(T,"addPasteRules",D);Ht(T,t.options.enablePasteRules)&&Lt&&u.push(...Lt());const Zt=I(T,"addProseMirrorPlugins",D);if(Zt){const Vt=Zt();L.push(...Vt)}return L}).flat();return[S({editor:t,rules:i}),...Ft({editor:t,rules:u}),...h]}get attributes(){return V(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:n}=w(this.extensions);return Object.fromEntries(n.filter(i=>!!I(i,"addNodeView")).map(i=>{const u=this.attributes.filter(L=>L.type===i.name),h={name:i.name,options:i.options,storage:i.storage,editor:t,type:U(i.name,this.schema)},T=I(i,"addNodeView",h);return T?[i.name,(L,B,Y,X)=>{const ht=Nt(L,u);return T()({editor:t,node:L,getPos:Y,decorations:X,HTMLAttributes:ht,extension:i})}]:[]}))}}function se(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function le(e,t){const n=Gt({},e);return se(e)&&se(t)&&Object.keys(t).forEach(i=>{se(t[i])?i in e?n[i]=le(e[i],t[i]):Object.assign(n,{[i]:t[i]}):Object.assign(n,{[i]:t[i]})}),n}class de{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Gt(Gt({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(I(this,"addOptions",{name:this.name}))),this.storage=a(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new de(t)}configure(t={}){const n=this.extend();return n.options=le(this.options,t),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new de(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=a(I(n,"addOptions",{name:n.name})),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}}function Re(e,t,n){const{from:i,to:u}=t,{blockSeparator:h="\n\n",textSerializers:T={}}=n||{};let D="",L=!0;return e.nodesBetween(i,u,(B,Y,X,ht)=>{var Lt;const Zt=null==T?void 0:T[B.type.name];Zt?(B.isBlock&&!L&&(D+=h,L=!0),X&&(D+=Zt({node:B,pos:Y,parent:X,index:ht,range:t}))):B.isText?(D+=null===(Lt=null==B?void 0:B.text)||void 0===Lt?void 0:Lt.slice(Math.max(i,Y)-Y,u-Y),L=!1):B.isBlock&&!L&&(D+=h,L=!0)}),D}function We(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}const cn=de.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new C.Sy({key:new C.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:i,selection:u}=t,{ranges:h}=u;return Re(i,{from:Math.min(...h.map(Y=>Y.$from.pos)),to:Math.max(...h.map(Y=>Y.$to.pos))},{textSerializers:We(n)})}}})]}});function rn(e,t,n={strict:!0}){const i=Object.keys(t);return!i.length||i.every(u=>n.strict?t[u]===e[u]:ee(t[u])?t[u].test(e[u]):t[u]===e[u])}function sn(e,t,n={}){return e.find(i=>i.type===t&&rn(i.attrs,n))}function _(e,t,n={}){return!!sn(e,t,n)}function v(e,t,n={}){if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if(e.parentOffset===i.offset&&0!==i.offset&&(i=e.parent.childBefore(e.parentOffset)),!i.node)return;const u=sn([...i.node.marks],t,n);if(!u)return;let h=i.index,T=e.start()+i.offset,D=h+1,L=T+i.node.nodeSize;for(sn([...i.node.marks],t,n);h>0&&u.isInSet(e.parent.child(h-1).marks);)h-=1,T-=e.parent.child(h).nodeSize;for(;D<e.parent.childCount&&_([...e.parent.child(D).marks],t,n);)L+=e.parent.child(D).nodeSize,D+=1;return{from:T,to:L}}function g(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function x(e){return e instanceof C.Bs}function R(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Z(e,t=null){if(!t)return null;const n=C.Y1.atStart(e),i=C.Y1.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return i;const u=n.from,h=i.to;return"all"===t?C.Bs.create(e,R(0,u,h),R(e.content.size,u,h)):C.Bs.create(e,R(t,u,h),R(t,u,h))}function W(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Ut(e){const t=`<body>${e}</body>`;return(new window.DOMParser).parseFromString(t,"text/html").body}function Wt(e,t,n){if(n=Gt({slice:!0,parseOptions:{}},n),"object"==typeof e&&null!==e)try{return Array.isArray(e)&&e.length>0?A.HY.fromArray(e.map(i=>t.nodeFromJSON(i))):t.nodeFromJSON(e)}catch(i){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",i),Wt("",t,n)}if("string"==typeof e){const i=A.aw.fromSchema(t);return n.slice?i.parseSlice(Ut(e),n.parseOptions).content:i.parse(Ut(e),n.parseOptions)}return Wt("",t,n)}function jt(e,t,n){const i=e.steps.length-1;if(i<t)return;const u=e.steps[i];if(!(u instanceof m.Pu||u instanceof m.FC))return;let T=0;e.mapping.maps[i].forEach((D,L,B,Y)=>{0===T&&(T=Y)}),e.setSelection(C.Y1.near(e.doc.resolve(T),n))}function De(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function pe(e,t,n={}){const{from:i,to:u,empty:h}=e.selection,T=t?U(t,e.schema):null,D=[];e.doc.nodesBetween(i,u,(X,ht)=>{if(X.isText)return;const Lt=Math.max(i,ht),Zt=Math.min(u,ht+X.nodeSize);D.push({node:X,from:Lt,to:Zt})});const L=u-i,B=D.filter(X=>!T||T.name===X.node.type.name).filter(X=>rn(X.node.attrs,n,{strict:!1}));return h?!!B.length:B.reduce((X,ht)=>X+ht.to-ht.from,0)>=L}function ln(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Xe(e,t){const n="string"==typeof t?[t]:t;return Object.keys(e).reduce((i,u)=>(n.includes(u)||(i[u]=e[u]),i),{})}function tn(e,t,n={}){return Wt(e,t,{slice:!1,parseOptions:n})}function To(e,t){const n=new m.wx(e);return t.forEach(i=>{i.steps.forEach(u=>{n.step(u)})}),n}function eo(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function vo(e,t){const n=[];return e.descendants((i,u)=>{t(i)&&n.push({node:i,pos:u})}),n}function Co(e,t,n){const i=[];return e.nodesBetween(t.from,t.to,(u,h)=>{n(u)&&i.push({node:u,pos:h})}),i}function no(e,t){for(let n=e.depth;n>0;n-=1){const i=e.node(n);if(t(i))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:i}}}function wn(e){return t=>no(t.$from,e)}function Fn(e,t){const n=A.PW.fromSchema(t).serializeFragment(e),u=document.implementation.createHTMLDocument().createElement("div");return u.appendChild(n),u.innerHTML}function Kn(e,t){return K(oe.resolve(e),t)}function oo(e,t){const n=Kn(t);return Fn(A.NB.fromJSON(n,e).content,n)}function Mo(e,t){const n=Kn(t),i=Ut(e);return A.aw.fromSchema(n).parse(i).toJSON()}function Jn(e,t){return Re(e,{from:0,to:e.content.size},t)}function io(e,t,n){const{blockSeparator:i="\n\n",textSerializers:u={}}=n||{},h=Kn(t);return Jn(A.NB.fromJSON(h,e),{blockSeparator:i,textSerializers:Gt(Gt({},We(h)),u)})}function Gn(e,t){const n=g(t,e.schema),{from:i,to:u,empty:h}=e.selection,T=[];h?(e.storedMarks&&T.push(...e.storedMarks),T.push(...e.selection.$head.marks())):e.doc.nodesBetween(i,u,L=>{T.push(...L.marks)});const D=T.find(L=>L.type.name===n.name);return D?Gt({},D.attrs):{}}function zn(e,t){const n=U(t,e.schema),{from:i,to:u}=e.selection,h=[];e.doc.nodesBetween(i,u,D=>{h.push(D)});const T=h.reverse().find(D=>D.type.name===n.name);return T?Gt({},T.attrs):{}}function ro(e,t){const n=ln("string"==typeof t?t:t.name,e.schema);return"node"===n?zn(e,t):"mark"===n?Gn(e,t):{}}function An(e,t=JSON.stringify){const n={};return e.filter(i=>{const u=t(i);return!Object.prototype.hasOwnProperty.call(n,u)&&(n[u]=!0)})}function yo(e){const{mapping:t,steps:n}=e,i=[];return t.maps.forEach((u,h)=>{const T=[];if(u.ranges.length)u.forEach((D,L)=>{T.push({from:D,to:L})});else{const{from:D,to:L}=n[h];if(void 0===D||void 0===L)return;T.push({from:D,to:L})}T.forEach(({from:D,to:L})=>{const B=t.slice(h).map(D,-1),Y=t.slice(h).map(L),X=t.invert().map(B,-1),ht=t.invert().map(Y);i.push({oldRange:{from:X,to:ht},newRange:{from:B,to:Y}})})}),function(e){const t=An(e);return 1===t.length?t:t.filter((n,i)=>!t.filter((h,T)=>T!==i).some(h=>n.oldRange.from>=h.oldRange.from&&n.oldRange.to<=h.oldRange.to&&n.newRange.from>=h.newRange.from&&n.newRange.to<=h.newRange.to))}(i)}function Rn(e,t=0){const i=e.type===e.type.schema.topNodeType?0:1,u=t,h=u+e.nodeSize,T=e.marks.map(B=>{const Y={type:B.type.name};return Object.keys(B.attrs).length&&(Y.attrs=Gt({},B.attrs)),Y}),D=Gt({},e.attrs),L={type:e.type.name,from:u,to:h};return Object.keys(D).length&&(L.attrs=D),T.length&&(L.marks=T),e.content.childCount&&(L.content=[],e.forEach((B,Y)=>{var X;null===(X=L.content)||void 0===X||X.push(Rn(B,t+Y+i))})),e.text&&(L.text=e.text),L}function Xn(e,t,n){const i=[];return e===t?n.resolve(e).marks().forEach(u=>{const T=v(n.resolve(e-1),u.type);!T||i.push(Gt({mark:u},T))}):n.nodesBetween(e,t,(u,h)=>{i.push(...u.marks.map(T=>({from:h,to:h+u.nodeSize,mark:T})))}),i}function Ln(e,t,n){return Object.fromEntries(Object.entries(n).filter(([i])=>{const u=e.find(h=>h.type===t&&h.name===i);return!!u&&u.attribute.keepOnSplit}))}function En(e,t,n={}){const{empty:i,ranges:u}=e.selection,h=t?g(t,e.schema):null;if(i)return!!(e.storedMarks||e.selection.$from.marks()).filter(X=>!h||h.name===X.type.name).find(X=>rn(X.attrs,n,{strict:!1}));let T=0;const D=[];if(u.forEach(({$from:X,$to:ht})=>{const Lt=X.pos,Zt=ht.pos;e.doc.nodesBetween(Lt,Zt,(Vt,Xt)=>{if(!Vt.isText&&!Vt.marks.length)return;const qt=Math.max(Lt,Xt),Se=Math.min(Zt,Xt+Vt.nodeSize);T+=Se-qt,D.push(...Vt.marks.map(ae=>({mark:ae,from:qt,to:Se})))})}),0===T)return!1;const L=D.filter(X=>!h||h.name===X.mark.type.name).filter(X=>rn(X.mark.attrs,n,{strict:!1})).reduce((X,ht)=>X+ht.to-ht.from,0),B=D.filter(X=>!h||X.mark.type!==h&&X.mark.type.excludes(h)).reduce((X,ht)=>X+ht.to-ht.from,0);return(L>0?L+B:L)>=T}function $n(e,t,n={}){if(!t)return pe(e,null,n)||En(e,null,n);const i=ln(t,e.schema);return"node"===i?pe(e,t,n):"mark"===i&&En(e,t,n)}function pn(e,t){const{nodeExtensions:n}=w(t),i=n.find(T=>T.name===e);if(!i)return!1;const h=a(I(i,"group",{name:i.name,options:i.options,storage:i.storage}));return"string"==typeof h&&h.split(" ").includes("list")}function Zn(e){var t;const n=null===(t=e.type.createAndFill())||void 0===t?void 0:t.toJSON(),i=e.toJSON();return JSON.stringify(n)===JSON.stringify(i)}function on(e){return e instanceof C.qv}function Nn(e,t,n){const u=e.state.doc.content.size,h=R(t,0,u),T=R(n,0,u),D=e.coordsAtPos(h),L=e.coordsAtPos(T,-1),B=Math.min(D.top,L.top),Y=Math.max(D.bottom,L.bottom),X=Math.min(D.left,L.left),ht=Math.max(D.right,L.right),qt={top:B,bottom:Y,left:X,right:ht,width:ht-X,height:Y-B,x:X,y:B};return me(Gt({},qt),{toJSON:()=>qt})}function qn(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const i=n.filter(u=>null==t?void 0:t.includes(u.type.name));e.tr.ensureMarks(i)}}const _n=(e,t)=>{const n=wn(T=>T.type===t)(e.selection);if(!n)return!0;const i=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===i)return!0;const u=e.doc.nodeAt(i);return n.node.type===(null==u?void 0:u.type)&&(0,m.Mn)(e.doc,n.pos)&&e.join(n.pos),!0},Wn=(e,t)=>{const n=wn(T=>T.type===t)(e.selection);if(!n)return!0;const i=e.doc.resolve(n.start).after(n.depth);if(void 0===i)return!0;const u=e.doc.nodeAt(i);return n.node.type===(null==u?void 0:u.type)&&(0,m.Mn)(e.doc,i)&&e.join(i),!0};var Po=Object.freeze({__proto__:null,blur:()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),null===(n=null==window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())}),!0),clearContent:(e=!1)=>({commands:t})=>t.setContent("",e),clearNodes:()=>({state:e,tr:t,dispatch:n})=>{const{selection:i}=t,{ranges:u}=i;return n&&u.forEach(({$from:h,$to:T})=>{e.doc.nodesBetween(h.pos,T.pos,(D,L)=>{if(D.type.isText)return;const{doc:B,mapping:Y}=t,X=B.resolve(Y.map(L)),ht=B.resolve(Y.map(L+D.nodeSize)),Lt=X.blockRange(ht);if(!Lt)return;const Zt=(0,m.k9)(Lt);if(D.type.isTextblock){const{defaultType:Vt}=X.parent.contentMatchAt(X.index());t.setNodeMarkup(Lt.start,Vt)}(Zt||0===Zt)&&t.lift(Lt,Zt)})}),!0},command:e=>t=>e(t),createParagraphNear:()=>({state:e,dispatch:t})=>Bt(e,t),deleteCurrentNode:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,i=n.$anchor.node();if(i.content.size>0)return!1;const u=e.selection.$anchor;for(let h=u.depth;h>0;h-=1)if(u.node(h).type===i.type){if(t){const D=u.before(h),L=u.after(h);e.delete(D,L).scrollIntoView()}return!0}return!1},deleteNode:e=>({tr:t,state:n,dispatch:i})=>{const u=U(e,n.schema),h=t.selection.$anchor;for(let T=h.depth;T>0;T-=1)if(h.node(T).type===u){if(i){const L=h.before(T),B=h.after(T);t.delete(L,B).scrollIntoView()}return!0}return!1},deleteRange:e=>({tr:t,dispatch:n})=>{const{from:i,to:u}=e;return n&&t.delete(i,u),!0},deleteSelection:()=>({state:e,dispatch:t})=>ot(e,t),enter:()=>({commands:e})=>e.keyboardShortcut("Enter"),exitCode:()=>({state:e,dispatch:t})=>At(e,t),extendMarkRange:(e,t={})=>({tr:n,state:i,dispatch:u})=>{const h=g(e,i.schema),{doc:T,selection:D}=n,{$from:L,from:B,to:Y}=D;if(u){const X=v(L,h,t);if(X&&X.from<=B&&X.to>=Y){const ht=C.Bs.create(T,X.from,X.to);n.setSelection(ht)}}return!0},first:e=>t=>{const n="function"==typeof e?e(t):e;for(let i=0;i<n.length;i+=1)if(n[i](t))return!0;return!1},focus:(e=null,t={})=>({editor:n,view:i,tr:u,dispatch:h})=>{t=Gt({scrollIntoView:!0},t);const T=()=>{W()&&i.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(i.focus(),(null==t?void 0:t.scrollIntoView)&&n.commands.scrollIntoView())})};if(i.hasFocus()&&null===e||!1===e)return!0;if(h&&null===e&&!x(n.state.selection))return T(),!0;const D=Z(u.doc,e)||n.state.selection,L=n.state.selection.eq(D);return h&&(L||u.setSelection(D),L&&u.storedMarks&&u.setStoredMarks(u.storedMarks),T()),!0},forEach:(e,t)=>n=>e.every((i,u)=>t(i,me(Gt({},n),{index:u}))),insertContent:(e,t)=>({tr:n,commands:i})=>i.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),insertContentAt:(e,t,n)=>({tr:i,dispatch:u,editor:h})=>{if(u){n=Gt({parseOptions:{},updateSelection:!0},n);const T=Wt(t,h.schema,{parseOptions:Gt({preserveWhitespace:"full"},n.parseOptions)});if("<>"===T.toString())return!0;let{from:D,to:L}="number"==typeof e?{from:e,to:e}:e,B=!0,Y=!0;if(((e=>e.toString().startsWith("<"))(T)?T:[T]).forEach(ht=>{ht.check(),B=!!B&&ht.isText&&0===ht.marks.length,Y=!!Y&&ht.isBlock}),D===L&&Y){const{parent:ht}=i.doc.resolve(D);ht.isTextblock&&!ht.type.spec.code&&!ht.childCount&&(D-=1,L+=1)}B?Array.isArray(t)?i.insertText(t.map(ht=>ht.text||"").join(""),D,L):i.insertText("object"==typeof t&&t&&t.text?t.text:t,D,L):i.replaceWith(D,L,T),n.updateSelection&&jt(i,i.steps.length-1,-1)}return!0},joinUp:()=>({state:e,dispatch:t})=>((e,t)=>{let u,n=e.selection,i=n instanceof C.qv;if(i){if(n.node.isTextblock||!(0,m.Mn)(e.doc,n.from))return!1;u=n.from}else if(u=(0,m.GJ)(e.doc,n.from,-1),null==u)return!1;if(t){let h=e.tr.join(u);i&&h.setSelection(C.qv.create(h.doc,u-e.doc.resolve(u).nodeBefore.nodeSize)),t(h.scrollIntoView())}return!0})(e,t),joinDown:()=>({state:e,dispatch:t})=>((e,t)=>{let i,n=e.selection;if(n instanceof C.qv){if(n.node.isTextblock||!(0,m.Mn)(e.doc,n.to))return!1;i=n.to}else if(i=(0,m.GJ)(e.doc,n.to,1),null==i)return!1;return t&&t(e.tr.join(i).scrollIntoView()),!0})(e,t),joinBackward:()=>({state:e,dispatch:t})=>G(e,t),joinForward:()=>({state:e,dispatch:t})=>kt(e,t),keyboardShortcut:e=>({editor:t,view:n,tr:i,dispatch:u})=>{const h=function(e){const t=e.split(/-(?!$)/);let i,u,h,T,n=t[t.length-1];"Space"===n&&(n=" ");for(let D=0;D<t.length-1;D+=1){const L=t[D];if(/^(cmd|meta|m)$/i.test(L))T=!0;else if(/^a(lt)?$/i.test(L))i=!0;else if(/^(c|ctrl|control)$/i.test(L))u=!0;else if(/^s(hift)?$/i.test(L))h=!0;else{if(!/^mod$/i.test(L))throw new Error(`Unrecognized modifier name: ${L}`);W()||De()?T=!0:u=!0}}return i&&(n=`Alt-${n}`),u&&(n=`Ctrl-${n}`),T&&(n=`Meta-${n}`),h&&(n=`Shift-${n}`),n}(e).split(/-(?!$)/),T=h.find(B=>!["Alt","Ctrl","Meta","Shift"].includes(B)),D=new KeyboardEvent("keydown",{key:"Space"===T?" ":T,altKey:h.includes("Alt"),ctrlKey:h.includes("Ctrl"),metaKey:h.includes("Meta"),shiftKey:h.includes("Shift"),bubbles:!0,cancelable:!0}),L=t.captureTransaction(()=>{n.someProp("handleKeyDown",B=>B(n,D))});return null==L||L.steps.forEach(B=>{const Y=B.map(i.mapping);Y&&u&&i.maybeStep(Y)}),!0},lift:(e,t={})=>({state:n,dispatch:i})=>!!pe(n,U(e,n.schema),t)&&((e,t)=>{let{$from:n,$to:i}=e.selection,u=n.blockRange(i),h=u&&(0,m.k9)(u);return null!=h&&(t&&t(e.tr.lift(u,h).scrollIntoView()),!0)})(n,i),liftEmptyBlock:()=>({state:e,dispatch:t})=>Pt(e,t),liftListItem:e=>({state:t,dispatch:n})=>function(e){return function(t,n){let{$from:i,$to:u}=t.selection,h=i.blockRange(u,T=>T.childCount>0&&T.firstChild.type==e);return!!h&&(!n||(i.node(h.depth-1).type==e?function(e,t,n,i){let u=e.tr,h=i.end,T=i.$to.end(i.depth);h<T&&(u.step(new m.FC(h-1,T,h,T,new A.p2(A.HY.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new A.Ts(u.doc.resolve(i.$from.pos),u.doc.resolve(T),i.depth));const D=(0,m.k9)(i);if(null==D)return!1;u.lift(i,D);let L=u.mapping.map(h,-1)-1;return(0,m.Mn)(u.doc,L)&&u.join(L),t(u.scrollIntoView()),!0}(t,n,e,h):function(e,t,n){let i=e.tr,u=n.parent;for(let Lt=n.end,Zt=n.endIndex-1,Vt=n.startIndex;Zt>Vt;Zt--)Lt-=u.child(Zt).nodeSize,i.delete(Lt-1,Lt+1);let h=i.doc.resolve(n.start),T=h.nodeAfter;if(i.mapping.map(n.end)!=n.start+h.nodeAfter.nodeSize)return!1;let D=0==n.startIndex,L=n.endIndex==u.childCount,B=h.node(-1),Y=h.index(-1);if(!B.canReplace(Y+(D?0:1),Y+1,T.content.append(L?A.HY.empty:A.HY.from(u))))return!1;let X=h.pos,ht=X+T.nodeSize;return i.step(new m.FC(X-(D?1:0),ht+(L?1:0),X+1,ht-1,new A.p2((D?A.HY.empty:A.HY.from(u.copy(A.HY.empty))).append(L?A.HY.empty:A.HY.from(u.copy(A.HY.empty))),D?0:1,L?0:1),D?0:1)),t(i.scrollIntoView()),!0}(t,n,h)))}}(U(e,t.schema))(t,n),newlineInCode:()=>({state:e,dispatch:t})=>ut(e,t),resetAttributes:(e,t)=>({tr:n,state:i,dispatch:u})=>{let h=null,T=null;const D=ln("string"==typeof e?e:e.name,i.schema);return!!D&&("node"===D&&(h=U(e,i.schema)),"mark"===D&&(T=g(e,i.schema)),u&&n.selection.ranges.forEach(L=>{i.doc.nodesBetween(L.$from.pos,L.$to.pos,(B,Y)=>{h&&h===B.type&&n.setNodeMarkup(Y,void 0,Xe(B.attrs,t)),T&&B.marks.length&&B.marks.forEach(X=>{T===X.type&&n.addMark(Y,Y+B.nodeSize,T.create(Xe(X.attrs,t)))})})}),!0)},scrollIntoView:()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),selectAll:()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size}),selectNodeBackward:()=>({state:e,dispatch:t})=>it(e,t),selectNodeForward:()=>({state:e,dispatch:t})=>St(e,t),selectParentNode:()=>({state:e,dispatch:t})=>((e,t)=>{let u,{$from:n,to:i}=e.selection,h=n.sharedDepth(i);return 0!=h&&(u=n.before(h),t&&t(e.tr.setSelection(C.qv.create(e.doc,u))),!0)})(e,t),selectTextblockEnd:()=>({state:e,dispatch:t})=>nt(e,t),selectTextblockStart:()=>({state:e,dispatch:t})=>$(e,t),setContent:(e,t=!1,n={})=>({tr:i,editor:u,dispatch:h})=>{const{doc:T}=i,D=tn(e,u.schema,n);return h&&i.replaceWith(0,T.content.size,D).setMeta("preventUpdate",!t),!0},setMark:(e,t={})=>({tr:n,state:i,dispatch:u})=>{const{selection:h}=n,{empty:T,ranges:D}=h,L=g(e,i.schema);if(u)if(T){const B=Gn(i,L);n.addStoredMark(L.create(Gt(Gt({},B),t)))}else D.forEach(B=>{const Y=B.$from.pos,X=B.$to.pos;i.doc.nodesBetween(Y,X,(ht,Lt)=>{const Zt=Math.max(Lt,Y),Vt=Math.min(Lt+ht.nodeSize,X);ht.marks.find(qt=>qt.type===L)?ht.marks.forEach(qt=>{L===qt.type&&n.addMark(Zt,Vt,L.create(Gt(Gt({},qt.attrs),t)))}):n.addMark(Zt,Vt,L.create(t))})});return function(e,t,n){var i;const{selection:u}=t;let h=null;if(x(u)&&(h=u.$cursor),h){const D=null!==(i=e.storedMarks)&&void 0!==i?i:h.marks();return!!n.isInSet(D)||!D.some(L=>L.type.excludes(n))}const{ranges:T}=u;return T.some(({$from:D,$to:L})=>{let B=0===D.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(D.pos,L.pos,(Y,X,ht)=>{if(B)return!1;if(Y.isInline){const Lt=!ht||ht.type.allowsMarkType(n),Zt=!!n.isInSet(Y.marks)||!Y.marks.some(Vt=>Vt.type.excludes(n));B=Lt&&Zt}return!B}),B})}(i,n,L)},setMeta:(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),setNode:(e,t={})=>({state:n,dispatch:i,chain:u})=>{const h=U(e,n.schema);return h.isTextblock?u().command(({commands:T})=>!!Et(h,t)(n)||T.clearNodes()).command(({state:T})=>Et(h,t)(T,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:i}=t,u=R(e,0,i.content.size),h=C.qv.create(i,u);t.setSelection(h)}return!0},setTextSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:i}=t,{from:u,to:h}="number"==typeof e?{from:e,to:e}:e,T=C.Bs.atStart(i).from,D=C.Bs.atEnd(i).to,L=R(u,T,D),B=R(h,T,D),Y=C.Bs.create(i,L,B);t.setSelection(Y)}return!0},sinkListItem:e=>({state:t,dispatch:n})=>function(e){return function(t,n){let{$from:i,$to:u}=t.selection,h=i.blockRange(u,B=>B.childCount>0&&B.firstChild.type==e);if(!h)return!1;let T=h.startIndex;if(0==T)return!1;let D=h.parent,L=D.child(T-1);if(L.type!=e)return!1;if(n){let B=L.lastChild&&L.lastChild.type==D.type,Y=A.HY.from(B?e.create():null),X=new A.p2(A.HY.from(e.create(null,A.HY.from(D.type.create(null,Y)))),B?3:1,0),ht=h.start,Lt=h.end;n(t.tr.step(new m.FC(ht-(B?3:1),Lt,ht,Lt,X,1,!0)).scrollIntoView())}return!0}}(U(e,t.schema))(t,n),splitBlock:({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:i,editor:u})=>{const{selection:h,doc:T}=t,{$from:D,$to:L}=h,Y=Ln(u.extensionManager.attributes,D.node().type.name,D.node().attrs);if(h instanceof C.qv&&h.node.isBlock)return!(!D.parentOffset||!(0,m.Ax)(T,D.pos)||(i&&(e&&qn(n,u.extensionManager.splittableMarks),t.split(D.pos).scrollIntoView()),0));if(!D.parent.isBlock)return!1;if(i){const X=L.parentOffset===L.parent.content.size;h instanceof C.Bs&&t.deleteSelection();const ht=0===D.depth?void 0:eo(D.node(-1).contentMatchAt(D.indexAfter(-1)));let Lt=X&&ht?[{type:ht,attrs:Y}]:void 0,Zt=(0,m.Ax)(t.doc,t.mapping.map(D.pos),1,Lt);if(!Lt&&!Zt&&(0,m.Ax)(t.doc,t.mapping.map(D.pos),1,ht?[{type:ht}]:void 0)&&(Zt=!0,Lt=ht?[{type:ht,attrs:Y}]:void 0),Zt&&(t.split(t.mapping.map(D.pos),1,Lt),ht&&!X&&!D.parentOffset&&D.parent.type!==ht)){const Vt=t.mapping.map(D.before()),Xt=t.doc.resolve(Vt);D.node(-1).canReplaceWith(Xt.index(),Xt.index()+1,ht)&&t.setNodeMarkup(t.mapping.map(D.before()),ht)}e&&qn(n,u.extensionManager.splittableMarks),t.scrollIntoView()}return!0},splitListItem:e=>({tr:t,state:n,dispatch:i,editor:u})=>{var h;const T=U(e,n.schema),{$from:D,$to:L}=n.selection,B=n.selection.node;if(B&&B.isBlock||D.depth<2||!D.sameParent(L))return!1;const Y=D.node(-1);if(Y.type!==T)return!1;const X=u.extensionManager.attributes;if(0===D.parent.content.size&&D.node(-1).childCount===D.indexAfter(-1)){if(2===D.depth||D.node(-3).type!==T||D.index(-2)!==D.node(-2).childCount-1)return!1;if(i){let Xt=A.HY.empty;const qt=D.index(-1)?1:D.index(-2)?2:3;for(let bn=D.depth-qt;bn>=D.depth-3;bn-=1)Xt=A.HY.from(D.node(bn).copy(Xt));const Se=D.indexAfter(-1)<D.node(-2).childCount?1:D.indexAfter(-2)<D.node(-3).childCount?2:3,Ke=Ln(X,D.node().type.name,D.node().attrs),ae=(null===(h=T.contentMatch.defaultType)||void 0===h?void 0:h.createAndFill(Ke))||void 0;Xt=Xt.append(A.HY.from(T.createAndFill(null,ae)||void 0));const Ve=D.before(D.depth-(qt-1));t.replace(Ve,D.after(-Se),new A.p2(Xt,4-qt,0));let an=-1;t.doc.nodesBetween(Ve,t.doc.content.size,(bn,No)=>{if(an>-1)return!1;bn.isTextblock&&0===bn.content.size&&(an=No+1)}),an>-1&&t.setSelection(C.Bs.near(t.doc.resolve(an))),t.scrollIntoView()}return!0}const ht=L.pos===D.end()?Y.contentMatchAt(0).defaultType:null,Lt=Ln(X,Y.type.name,Y.attrs),Zt=Ln(X,D.node().type.name,D.node().attrs);t.delete(D.pos,L.pos);const Vt=ht?[{type:T,attrs:Lt},{type:ht,attrs:Zt}]:[{type:T,attrs:Lt}];if(!(0,m.Ax)(t.doc,D.pos,2))return!1;if(i){const{selection:Xt,storedMarks:qt}=n,{splittableMarks:Se}=u.extensionManager,Ke=qt||Xt.$to.parentOffset&&Xt.$from.marks();if(t.split(D.pos,2,Vt).scrollIntoView(),!Ke||!i)return!0;const ae=Ke.filter(Ve=>Se.includes(Ve.type.name));t.ensureMarks(ae)}return!0},toggleList:(e,t,n,i={})=>({editor:u,tr:h,state:T,dispatch:D,chain:L,commands:B,can:Y})=>{const{extensions:X,splittableMarks:ht}=u.extensionManager,Lt=U(e,T.schema),Zt=U(t,T.schema),{selection:Vt,storedMarks:Xt}=T,{$from:qt,$to:Se}=Vt,Ke=qt.blockRange(Se),ae=Xt||Vt.$to.parentOffset&&Vt.$from.marks();if(!Ke)return!1;const Ve=wn(an=>pn(an.type.name,X))(Vt);if(Ke.depth>=1&&Ve&&Ke.depth-Ve.depth<=1){if(Ve.node.type===Lt)return B.liftListItem(Zt);if(pn(Ve.node.type.name,X)&&Lt.validContent(Ve.node.content)&&D)return L().command(()=>(h.setNodeMarkup(Ve.pos,Lt),!0)).command(()=>_n(h,Lt)).command(()=>Wn(h,Lt)).run()}return n&&ae&&D?L().command(()=>{const an=Y().wrapInList(Lt,i),bn=ae.filter(No=>ht.includes(No.type.name));return h.ensureMarks(bn),!!an||B.clearNodes()}).wrapInList(Lt,i).command(()=>_n(h,Lt)).command(()=>Wn(h,Lt)).run():L().command(()=>!!Y().wrapInList(Lt,i)||B.clearNodes()).wrapInList(Lt,i).command(()=>_n(h,Lt)).command(()=>Wn(h,Lt)).run()},toggleMark:(e,t={},n={})=>({state:i,commands:u})=>{const{extendEmptyMarkRange:h=!1}=n,T=g(e,i.schema);return En(i,T,t)?u.unsetMark(T,{extendEmptyMarkRange:h}):u.setMark(T,t)},toggleNode:(e,t,n={})=>({state:i,commands:u})=>{const h=U(e,i.schema),T=U(t,i.schema);return pe(i,h,n)?u.setNode(T):u.setNode(h,n)},toggleWrap:(e,t={})=>({state:n,commands:i})=>{const u=U(e,n.schema);return pe(n,u,t)?i.lift(u):i.wrapIn(u,t)},undoInputRule:()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let i=0;i<n.length;i+=1){const u=n[i];let h;if(u.spec.isInputRules&&(h=u.getState(e))){if(t){const T=e.tr,D=h.transform;for(let L=D.steps.length-1;L>=0;L-=1)T.step(D.steps[L].invert(D.docs[L]));if(h.text){const L=T.doc.resolve(h.from).marks();T.replaceWith(h.from,h.to,e.schema.text(h.text,L))}else T.delete(h.from,h.to)}return!0}}return!1},unsetAllMarks:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:i,ranges:u}=n;return i||t&&u.forEach(h=>{e.removeMark(h.$from.pos,h.$to.pos)}),!0},unsetMark:(e,t={})=>({tr:n,state:i,dispatch:u})=>{var h;const{extendEmptyMarkRange:T=!1}=t,{selection:D}=n,L=g(e,i.schema),{$from:B,empty:Y,ranges:X}=D;if(!u)return!0;if(Y&&T){let{from:ht,to:Lt}=D;const Zt=null===(h=B.marks().find(Xt=>Xt.type===L))||void 0===h?void 0:h.attrs,Vt=v(B,L,Zt);Vt&&(ht=Vt.from,Lt=Vt.to),n.removeMark(ht,Lt,L)}else X.forEach(ht=>{n.removeMark(ht.$from.pos,ht.$to.pos,L)});return n.removeStoredMark(L),!0},updateAttributes:(e,t={})=>({tr:n,state:i,dispatch:u})=>{let h=null,T=null;const D=ln("string"==typeof e?e:e.name,i.schema);return!!D&&("node"===D&&(h=U(e,i.schema)),"mark"===D&&(T=g(e,i.schema)),u&&n.selection.ranges.forEach(L=>{const B=L.$from.pos,Y=L.$to.pos;i.doc.nodesBetween(B,Y,(X,ht)=>{h&&h===X.type&&n.setNodeMarkup(ht,void 0,Gt(Gt({},X.attrs),t)),T&&X.marks.length&&X.marks.forEach(Lt=>{if(T===Lt.type){const Zt=Math.max(ht,B),Vt=Math.min(ht+X.nodeSize,Y);n.addMark(Zt,Vt,T.create(Gt(Gt({},Lt.attrs),t)))}})})}),!0)},wrapIn:(e,t={})=>({state:n,dispatch:i})=>function(e,t=null){return function(n,i){let{$from:u,$to:h}=n.selection,T=u.blockRange(h),D=T&&(0,m.nd)(T,e,t);return!!D&&(i&&i(n.tr.wrap(T,D).scrollIntoView()),!0)}}(U(e,n.schema),t)(n,i),wrapInList:(e,t={})=>({state:n,dispatch:i})=>function(e,t=null){return function(n,i){let{$from:u,$to:h}=n.selection,T=u.blockRange(h),D=!1,L=T;if(!T)return!1;if(T.depth>=2&&u.node(T.depth-1).type.compatibleContent(e)&&0==T.startIndex){if(0==u.index(T.depth-1))return!1;let Y=n.doc.resolve(T.start-2);L=new A.Ts(Y,Y,T.depth),T.endIndex<T.parent.childCount&&(T=new A.Ts(u,n.doc.resolve(h.end(T.depth)),T.depth)),D=!0}let B=(0,m.nd)(L,e,t,T);return!!B&&(i&&i(function(e,t,n,i,u){let h=A.HY.empty;for(let Y=n.length-1;Y>=0;Y--)h=A.HY.from(n[Y].type.create(n[Y].attrs,h));e.step(new m.FC(t.start-(i?2:0),t.end,t.start,t.end,new A.p2(h,0,0),n.length,!0));let T=0;for(let Y=0;Y<n.length;Y++)n[Y].type==u&&(T=Y+1);let D=n.length-T,L=t.start+n.length-(i?2:0),B=t.parent;for(let Y=t.startIndex,X=t.endIndex,ht=!0;Y<X;Y++,ht=!1)!ht&&(0,m.Ax)(e.doc,L,D)&&(e.split(L,D),L+=2*D),L+=B.child(Y).nodeSize;return e}(n.tr,T,B,D,e).scrollIntoView()),!0)}}(U(e,n.schema),t)(n,i)});const So=de.create({name:"commands",addCommands:()=>Gt({},Po)}),Io=de.create({name:"editable",addProseMirrorPlugins(){return[new C.Sy({key:new C.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),ko=de.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new C.Sy({key:new C.H$("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const i=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1},blur:(t,n)=>{e.isFocused=!1;const i=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1}}}})]}}),co=de.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:T})=>[()=>T.undoInputRule(),()=>T.command(({tr:D})=>{const{selection:L,doc:B}=D,{empty:Y,$anchor:X}=L,{pos:ht,parent:Lt}=X,Zt=C.Y1.atStart(B).from===ht;return!(!(Y&&Zt&&Lt.type.isTextblock)||Lt.textContent.length)&&T.clearNodes()}),()=>T.deleteSelection(),()=>T.joinBackward(),()=>T.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:T})=>[()=>T.deleteSelection(),()=>T.deleteCurrentNode(),()=>T.joinForward(),()=>T.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:T})=>[()=>T.newlineInCode(),()=>T.createParagraphNear(),()=>T.liftEmptyBlock(),()=>T.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},u=Gt({},i),h=me(Gt({},i),{"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return W()||De()?h:u},addProseMirrorPlugins(){return[new C.Sy({key:new C.H$("clearDocument"),appendTransaction:(e,t,n)=>{if(!e.some(Zt=>Zt.docChanged)||t.doc.eq(n.doc))return;const{empty:u,from:h,to:T}=t.selection,D=C.Y1.atStart(t.doc).from,L=C.Y1.atEnd(t.doc).to;if(u||h!==D||T!==L||0!==n.doc.textBetween(0,n.doc.content.size," "," ").length)return;const X=n.tr,ht=gt({state:n,transaction:X}),{commands:Lt}=new b({editor:this.editor,state:ht});return Lt.clearNodes(),X.steps.length?X:void 0}})]}}),wo=de.create({name:"tabindex",addProseMirrorPlugins(){return[new C.Sy({key:new C.H$("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var uo=Object.freeze({__proto__:null,ClipboardTextSerializer:cn,Commands:So,Editable:Io,FocusEvents:ko,Keymap:co,Tabindex:wo});function po(e,t){const n=document.querySelector("style[data-tiptap-style]");if(null!==n)return n;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}class Ko extends class{constructor(){this.callbacks={}}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),this}emit(t,...n){const i=this.callbacks[t];return i&&i.forEach(u=>u.apply(this,n)),this}off(t,n){const i=this.callbacks[t];return i&&(n?this.callbacks[t]=i.filter(u=>u!==n):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=po('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(t={}){this.options=Gt(Gt({},this.options),t),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,n=!0){this.setOptions({editable:t}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,n){const i=H(n)?n(t,[...this.state.plugins]):[...this.state.plugins,t],u=this.state.reconfigure({plugins:i});this.view.updateState(u)}unregisterPlugin(t){if(this.isDestroyed)return;const n="string"==typeof t?`${t}$`:t.key,i=this.state.reconfigure({plugins:this.state.plugins.filter(u=>!u.key.startsWith(n))});this.view.updateState(i)}createExtensionManager(){const n=[...this.options.enableCoreExtensions?Object.values(uo):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(null==i?void 0:i.type));this.extensionManager=new oe(n,this)}createCommandManager(){this.commandManager=new b({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=tn(this.options.content,this.schema,this.options.parseOptions),n=Z(t,this.options.autofocus);this.view=new l.tk(this.options.element,me(Gt({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:C.yy.create({doc:t,selection:n||void 0})}));const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach(T=>{var D;return null===(D=this.capturedTransaction)||void 0===D?void 0:D.step(T)}):void(this.capturedTransaction=t);const n=this.state.apply(t),i=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),i&&this.emit("selectionUpdate",{editor:this,transaction:t});const u=t.getMeta("focus"),h=t.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:t}),h&&this.emit("blur",{editor:this,event:h.event,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return ro(this.state,t)}isActive(t,n){return $n(this.state,"string"==typeof t?t:null,"string"==typeof t?n:t)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Fn(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:n="\n\n",textSerializers:i={}}=t||{};return Jn(this.state.doc,{blockSeparator:n,textSerializers:Gt(Gt({},We(this.schema)),i)})}get isEmpty(){return Zn(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}}function Jo(e){return new we({find:e.find,handler:({state:t,range:n,match:i})=>{const u=a(e.getAttributes,void 0,i);if(!1===u||null===u)return null;const{tr:h}=t,T=i[i.length-1],D=i[0];let L=n.to;if(T){const B=D.search(/\S/),Y=n.from+D.indexOf(T),X=Y+T.length;if(Xn(n.from,n.to,t.doc).filter(Lt=>Lt.mark.type.excluded.find(Vt=>Vt===e.type&&Vt!==Lt.mark.type)).filter(Lt=>Lt.to>Y).length)return null;X<n.to&&h.delete(X,n.to),Y>n.from&&h.delete(n.from+B,Y),L=n.from+B+T.length,h.addMark(n.from+B,L,e.type.create(u||{})),h.removeStoredMark(e.type)}}})}function $o(e){return new we({find:e.find,handler:({state:t,range:n,match:i})=>{const u=a(e.getAttributes,void 0,i)||{},{tr:h}=t,T=n.from;let D=n.to;if(i[1]){let B=T+i[0].lastIndexOf(i[1]);B>D?B=D:D=B+i[1].length,h.insertText(i[0][i[0].length-1],T+i[0].length-1),h.replaceWith(B,D,e.type.create(u))}else i[0]&&h.replaceWith(T,D,e.type.create(u))}})}function Ro(e){return new we({find:e.find,handler:({state:t,range:n,match:i})=>{const u=t.doc.resolve(n.from),h=a(e.getAttributes,void 0,i)||{};if(!u.node(-1).canReplaceWith(u.index(-1),u.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,h)}})}function ho(e){return new we({find:e.find,handler:({state:t,range:n,match:i})=>{let u=e.replace,h=n.from;const T=n.to;if(i[1]){const D=i[0].lastIndexOf(i[1]);u+=i[0].slice(D+i[1].length),h+=D;const L=h-T;L>0&&(u=i[0].slice(D-L,D)+u,h=T)}t.tr.insertText(u,h,T)}})}function fo(e){return new we({find:e.find,handler:({state:t,range:n,match:i,chain:u})=>{const h=a(e.getAttributes,void 0,i)||{},T=t.tr.delete(n.from,n.to),L=T.doc.resolve(n.from).blockRange(),B=L&&(0,m.nd)(L,e.type,h);if(!B)return null;if(T.wrap(L,B),e.keepMarks&&e.editor){const{selection:X,storedMarks:ht}=t,{splittableMarks:Lt}=e.editor.extensionManager,Zt=ht||X.$to.parentOffset&&X.$from.marks();if(Zt){const Vt=Zt.filter(Xt=>Lt.includes(Xt.type.name));T.ensureMarks(Vt)}}if(e.keepAttributes){const X="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";u().updateAttributes(X,h).run()}const Y=T.doc.resolve(n.from-1).nodeBefore;Y&&Y.type===e.type&&(0,m.Mn)(T.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(i,Y))&&T.join(n.from-1)}})}class Bn{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Gt(Gt({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(I(this,"addOptions",{name:this.name}))),this.storage=a(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Bn(t)}configure(t={}){const n=this.extend();return n.options=le(this.options,t),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new Bn(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=a(I(n,"addOptions",{name:n.name})),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:t,mark:n}){const{tr:i}=t.state,u=t.state.selection.$from;if(u.pos===u.end()){const T=u.marks();if(!T.find(B=>(null==B?void 0:B.type.name)===n.name))return!1;const L=T.find(B=>(null==B?void 0:B.type.name)===n.name);return L&&i.removeStoredMark(L),i.insertText(" ",u.pos),t.view.dispatch(i),!0}return!1}}class jn{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Gt(Gt({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(I(this,"addOptions",{name:this.name}))),this.storage=a(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new jn(t)}configure(t={}){const n=this.extend();return n.options=le(this.options,t),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new jn(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=a(I(n,"addOptions",{name:n.name})),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}}class mo{constructor(t,n,i){this.isDragging=!1,this.component=t,this.editor=n.editor,this.options=Gt({stopEvent:null,ignoreMutation:null},i),this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var n,i,u,h,T,D,L;const{view:B}=this.editor,Y=t.target,X=3===Y.nodeType?null===(n=Y.parentElement)||void 0===n?void 0:n.closest("[data-drag-handle]"):Y.closest("[data-drag-handle]");if(!this.dom||(null===(i=this.contentDOM)||void 0===i?void 0:i.contains(Y))||!X)return;let ht=0,Lt=0;if(this.dom!==X){const Xt=this.dom.getBoundingClientRect(),qt=X.getBoundingClientRect(),Se=null!==(u=t.offsetX)&&void 0!==u?u:null===(h=t.nativeEvent)||void 0===h?void 0:h.offsetX,Ke=null!==(T=t.offsetY)&&void 0!==T?T:null===(D=t.nativeEvent)||void 0===D?void 0:D.offsetY;ht=qt.x-Xt.x+Se,Lt=qt.y-Xt.y+Ke}null===(L=t.dataTransfer)||void 0===L||L.setDragImage(this.dom,ht,Lt);const Zt=C.qv.create(B.state.doc,this.getPos()),Vt=B.state.tr.setSelection(Zt);B.dispatch(Vt)}stopEvent(t){var n;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:t});const i=t.target;if(!this.dom.contains(i)||(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(i)))return!1;const h=t.type.startsWith("drag"),T="drop"===t.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(i.tagName)||i.isContentEditable)&&!T&&!h)return!0;const{isEditable:L}=this.editor,{isDragging:B}=this,Y=!!this.node.type.spec.draggable,X=C.qv.isSelectable(this.node),ht="copy"===t.type,Lt="paste"===t.type,Zt="cut"===t.type,Vt="mousedown"===t.type;if(!Y&&X&&h&&t.preventDefault(),Y&&h&&!B)return t.preventDefault(),!1;if(Y&&L&&!B&&Vt){const Xt=i.closest("[data-drag-handle]");Xt&&(this.dom===Xt||this.dom.contains(Xt))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(B||T||ht||Lt||Zt||Vt&&X)}ignoreMutation(t){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:t}):!(!this.node.isLeaf&&!this.node.isAtom&&("selection"===t.type||this.dom.contains(t.target)&&"childList"===t.type&&W()&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(i=>i.isContentEditable)||(this.contentDOM!==t.target||"attributes"!==t.type)&&this.contentDOM.contains(t.target))))}updateAttributes(t){this.editor.commands.command(({tr:n})=>{const i=this.getPos();return n.setNodeMarkup(i,void 0,Gt(Gt({},this.node.attrs),t)),!0})}deleteNode(){const t=this.getPos();this.editor.commands.deleteRange({from:t,to:t+this.node.nodeSize})}}function Lo(e){return new vt({find:e.find,handler:({state:t,range:n,match:i})=>{const u=a(e.getAttributes,void 0,i);if(!1===u||null===u)return null;const{tr:h}=t,T=i[i.length-1],D=i[0];let L=n.to;if(T){const B=D.search(/\S/),Y=n.from+D.indexOf(T),X=Y+T.length;if(Xn(n.from,n.to,t.doc).filter(Lt=>Lt.mark.type.excluded.find(Vt=>Vt===e.type&&Vt!==Lt.mark.type)).filter(Lt=>Lt.to>Y).length)return null;X<n.to&&h.delete(X,n.to),Y>n.from&&h.delete(n.from+B,Y),L=n.from+B+T.length,h.addMark(n.from+B,L,e.type.create(u||{})),h.removeStoredMark(e.type)}}})}function go(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function r(e){return"string"==typeof e}function o(e){return new vt({find:e.find,handler({match:t,chain:n,range:i}){const u=a(e.getAttributes,void 0,t);if(!1===u||null===u)return null;t.input&&n().deleteRange(i).insertContentAt(i.from,{type:e.type.name,attrs:u})}})}function s(e){return new vt({find:e.find,handler:({state:t,range:n,match:i})=>{let u=e.replace,h=n.from;const T=n.to;if(i[1]){const D=i[0].lastIndexOf(i[1]);u+=i[0].slice(D+i[1].length),h+=D;const L=h-T;L>0&&(u=i[0].slice(D-L,D)+u,h=T)}t.tr.insertText(u,h,T)}})}class d{constructor(t){this.transaction=t,this.currentStep=this.transaction.steps.length}map(t){let n=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((u,h)=>{const T=h.getMap().mapResult(u);return T.deleted&&(n=!0),T.pos},t),deleted:n}}}},44632:(Yt,Tt,c)=>{c.r(Tt),c.d(Tt,{Image:()=>y,default:()=>y,inputRegex:()=>l});var C=c(12867);const l=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,y=C.Node.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:A}){return["img",(0,C.mergeAttributes)(this.options.HTMLAttributes,A)]},addCommands(){return{setImage:A=>({commands:m})=>m.insertContent({type:this.name,attrs:A})}},addInputRules(){return[(0,C.nodeInputRule)({find:l,type:this.type,getAttributes:A=>{const[,,m,ot,N]=A;return{src:ot,alt:m,title:N}}})]}})},84402:(Yt,Tt,c)=>{c.r(Tt),c.d(Tt,{TextStyle:()=>l,default:()=>l});var C=c(12867);const l=C.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:y=>!!y.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:y}){return["span",(0,C.mergeAttributes)(this.options.HTMLAttributes,y),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:y,commands:A})=>{const m=(0,C.getMarkAttributes)(y,this.type);return!!Object.entries(m).some(([,N])=>!!N)||A.unsetMark(this.name)}}}})},70768:(Yt,Tt,c)=>{c.d(Tt,{$:()=>St,h:()=>kt});for(var C={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},y="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),m=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),ot="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),N=m||y&&+y[1]<57,G=0;G<10;G++)C[48+G]=C[96+G]=String(G);for(G=1;G<=24;G++)C[G+111]="F"+G;for(G=65;G<=90;G++)C[G]=String.fromCharCode(G+32),l[G]=String.fromCharCode(G);for(var tt in C)l.hasOwnProperty(tt)||(l[tt]=C[tt]);var at=c(62463);const Mt="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function it(Dt){let F,ut,j,At,pt=Dt.split(/-(?!$)/),q=pt[pt.length-1];"Space"==q&&(q=" ");for(let Bt=0;Bt<pt.length-1;Bt++){let Pt=pt[Bt];if(/^(cmd|meta|m)$/i.test(Pt))At=!0;else if(/^a(lt)?$/i.test(Pt))F=!0;else if(/^(c|ctrl|control)$/i.test(Pt))ut=!0;else if(/^s(hift)?$/i.test(Pt))j=!0;else{if(!/^mod$/i.test(Pt))throw new Error("Unrecognized modifier name: "+Pt);Mt?At=!0:ut=!0}}return F&&(q="Alt-"+q),ut&&(q="Ctrl-"+q),At&&(q="Meta-"+q),j&&(q="Shift-"+q),q}function Ot(Dt,pt,q=!0){return pt.altKey&&(Dt="Alt-"+Dt),pt.ctrlKey&&(Dt="Ctrl-"+Dt),pt.metaKey&&(Dt="Meta-"+Dt),q&&pt.shiftKey&&(Dt="Shift-"+Dt),Dt}function kt(Dt){return new at.Sy({props:{handleKeyDown:St(Dt)}})}function St(Dt){let pt=function(Dt){let pt=Object.create(null);for(let q in Dt)pt[it(q)]=Dt[q];return pt}(Dt);return function(q,F){let j,ut=function(Dt){var q=!(N&&(Dt.ctrlKey||Dt.altKey||Dt.metaKey)||ot&&Dt.shiftKey&&Dt.key&&1==Dt.key.length||"Unidentified"==Dt.key)&&Dt.key||(Dt.shiftKey?l:C)[Dt.keyCode]||Dt.key||"Unidentified";return"Esc"==q&&(q="Escape"),"Del"==q&&(q="Delete"),"Left"==q&&(q="ArrowLeft"),"Up"==q&&(q="ArrowUp"),"Right"==q&&(q="ArrowRight"),"Down"==q&&(q="ArrowDown"),q}(F),At=pt[Ot(ut,F)];if(At&&At(q.state,q.dispatch,q))return!0;if(1==ut.length&&" "!=ut){if(F.shiftKey){let Bt=pt[Ot(ut,F,!1)];if(Bt&&Bt(q.state,q.dispatch,q))return!0}if((F.shiftKey||F.altKey||F.metaKey||ut.charCodeAt(0)>127)&&(j=C[F.keyCode])&&j!=ut){let Bt=pt[Ot(j,F)];if(Bt&&Bt(q.state,q.dispatch,q))return!0}}return!1}}},77346:(Yt,Tt,c)=>{function C(H){this.content=H}c.d(Tt,{aw:()=>Me,PW:()=>U,HY:()=>m,vc:()=>tt,ZU:()=>Ce,NB:()=>wt,Ts:()=>_t,e4:()=>ft,V_:()=>Pe,p2:()=>at}),C.prototype={constructor:C,find:function(H){for(var a=0;a<this.content.length;a+=2)if(this.content[a]===H)return a;return-1},get:function(H){var a=this.find(H);return-1==a?void 0:this.content[a+1]},update:function(H,a,p){var E=p&&p!=H?this.remove(p):this,P=E.find(H),k=E.content.slice();return-1==P?k.push(p||H,a):(k[P+1]=a,p&&(k[P]=p)),new C(k)},remove:function(H){var a=this.find(H);if(-1==a)return this;var p=this.content.slice();return p.splice(a,2),new C(p)},addToStart:function(H,a){return new C([H,a].concat(this.remove(H).content))},addToEnd:function(H,a){var p=this.remove(H).content.slice();return p.push(H,a),new C(p)},addBefore:function(H,a,p){var E=this.remove(a),P=E.content.slice(),k=E.find(H);return P.splice(-1==k?P.length:k,0,a,p),new C(P)},forEach:function(H){for(var a=0;a<this.content.length;a+=2)H(this.content[a],this.content[a+1])},prepend:function(H){return(H=C.from(H)).size?new C(H.content.concat(this.subtract(H).content)):this},append:function(H){return(H=C.from(H)).size?new C(this.subtract(H).content.concat(H.content)):this},subtract:function(H){var a=this;H=C.from(H);for(var p=0;p<H.content.length;p+=2)a=a.remove(H.content[p]);return a},toObject:function(){var H={};return this.forEach(function(a,p){H[a]=p}),H},get size(){return this.content.length>>1}},C.from=function(H){if(H instanceof C)return H;var a=[];if(H)for(var p in H)a.push(p,H[p]);return new C(a)};const l=C;function y(H,a,p){for(let E=0;;E++){if(E==H.childCount||E==a.childCount)return H.childCount==a.childCount?null:p;let P=H.child(E),k=a.child(E);if(P!=k){if(!P.sameMarkup(k))return p;if(P.isText&&P.text!=k.text){for(let K=0;P.text[K]==k.text[K];K++)p++;return p}if(P.content.size||k.content.size){let K=y(P.content,k.content,p+1);if(null!=K)return K}p+=P.nodeSize}else p+=P.nodeSize}}function A(H,a,p,E){for(let P=H.childCount,k=a.childCount;;){if(0==P||0==k)return P==k?null:{a:p,b:E};let K=H.child(--P),lt=a.child(--k),Ht=K.nodeSize;if(K!=lt){if(!K.sameMarkup(lt))return{a:p,b:E};if(K.isText&&K.text!=lt.text){let te=0,ee=Math.min(K.text.length,lt.text.length);for(;te<ee&&K.text[K.text.length-te-1]==lt.text[lt.text.length-te-1];)te++,p--,E--;return{a:p,b:E}}if(K.content.size||lt.content.size){let te=A(K.content,lt.content,p-1,E-1);if(te)return te}p-=Ht,E-=Ht}else p-=Ht,E-=Ht}}class m{constructor(a,p){if(this.content=a,this.size=p||0,null==p)for(let E=0;E<a.length;E++)this.size+=a[E].nodeSize}nodesBetween(a,p,E,P=0,k){for(let K=0,lt=0;lt<p;K++){let Ht=this.content[K],te=lt+Ht.nodeSize;if(te>a&&!1!==E(Ht,P+lt,k||null,K)&&Ht.content.size){let ee=lt+1;Ht.nodesBetween(Math.max(0,a-ee),Math.min(Ht.content.size,p-ee),E,P+ee)}lt=te}}descendants(a){this.nodesBetween(0,this.size,a)}textBetween(a,p,E,P){let k="",K=!0;return this.nodesBetween(a,p,(lt,Ht)=>{lt.isText?(k+=lt.text.slice(Math.max(a,Ht)-Ht,p-Ht),K=!E):lt.isLeaf?(P?k+="function"==typeof P?P(lt):P:lt.type.spec.leafText&&(k+=lt.type.spec.leafText(lt)),K=!E):!K&&lt.isBlock&&(k+=E,K=!0)},0),k}append(a){if(!a.size)return this;if(!this.size)return a;let p=this.lastChild,E=a.firstChild,P=this.content.slice(),k=0;for(p.isText&&p.sameMarkup(E)&&(P[P.length-1]=p.withText(p.text+E.text),k=1);k<a.content.length;k++)P.push(a.content[k]);return new m(P,this.size+a.size)}cut(a,p=this.size){if(0==a&&p==this.size)return this;let E=[],P=0;if(p>a)for(let k=0,K=0;K<p;k++){let lt=this.content[k],Ht=K+lt.nodeSize;Ht>a&&((K<a||Ht>p)&&(lt=lt.isText?lt.cut(Math.max(0,a-K),Math.min(lt.text.length,p-K)):lt.cut(Math.max(0,a-K-1),Math.min(lt.content.size,p-K-1))),E.push(lt),P+=lt.nodeSize),K=Ht}return new m(E,P)}cutByIndex(a,p){return a==p?m.empty:0==a&&p==this.content.length?this:new m(this.content.slice(a,p))}replaceChild(a,p){let E=this.content[a];if(E==p)return this;let P=this.content.slice(),k=this.size+p.nodeSize-E.nodeSize;return P[a]=p,new m(P,k)}addToStart(a){return new m([a].concat(this.content),this.size+a.nodeSize)}addToEnd(a){return new m(this.content.concat(a),this.size+a.nodeSize)}eq(a){if(this.content.length!=a.content.length)return!1;for(let p=0;p<this.content.length;p++)if(!this.content[p].eq(a.content[p]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(a){let p=this.content[a];if(!p)throw new RangeError("Index "+a+" out of range for "+this);return p}maybeChild(a){return this.content[a]||null}forEach(a){for(let p=0,E=0;p<this.content.length;p++){let P=this.content[p];a(P,E,p),E+=P.nodeSize}}findDiffStart(a,p=0){return y(this,a,p)}findDiffEnd(a,p=this.size,E=a.size){return A(this,a,p,E)}findIndex(a,p=-1){if(0==a)return N(0,a);if(a==this.size)return N(this.content.length,a);if(a>this.size||a<0)throw new RangeError(`Position ${a} outside of fragment (${this})`);for(let E=0,P=0;;E++){let K=P+this.child(E).nodeSize;if(K>=a)return K==a||p>0?N(E+1,K):N(E,P);P=K}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(a=>a.toJSON()):null}static fromJSON(a,p){if(!p)return m.empty;if(!Array.isArray(p))throw new RangeError("Invalid input for Fragment.fromJSON");return new m(p.map(a.nodeFromJSON))}static fromArray(a){if(!a.length)return m.empty;let p,E=0;for(let P=0;P<a.length;P++){let k=a[P];E+=k.nodeSize,P&&k.isText&&a[P-1].sameMarkup(k)?(p||(p=a.slice(0,P)),p[p.length-1]=k.withText(p[p.length-1].text+k.text)):p&&p.push(k)}return new m(p||a,E)}static from(a){if(!a)return m.empty;if(a instanceof m)return a;if(Array.isArray(a))return this.fromArray(a);if(a.attrs)return new m([a],a.nodeSize);throw new RangeError("Can not convert "+a+" to a Fragment"+(a.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}m.empty=new m([],0);const ot={index:0,offset:0};function N(H,a){return ot.index=H,ot.offset=a,ot}function G(H,a){if(H===a)return!0;if(!H||"object"!=typeof H||!a||"object"!=typeof a)return!1;let p=Array.isArray(H);if(Array.isArray(a)!=p)return!1;if(p){if(H.length!=a.length)return!1;for(let E=0;E<H.length;E++)if(!G(H[E],a[E]))return!1}else{for(let E in H)if(!(E in a)||!G(H[E],a[E]))return!1;for(let E in a)if(!(E in H))return!1}return!0}let tt=(()=>{class H{constructor(p,E){this.type=p,this.attrs=E}addToSet(p){let E,P=!1;for(let k=0;k<p.length;k++){let K=p[k];if(this.eq(K))return p;if(this.type.excludes(K.type))E||(E=p.slice(0,k));else{if(K.type.excludes(this.type))return p;!P&&K.type.rank>this.type.rank&&(E||(E=p.slice(0,k)),E.push(this),P=!0),E&&E.push(K)}}return E||(E=p.slice()),P||E.push(this),E}removeFromSet(p){for(let E=0;E<p.length;E++)if(this.eq(p[E]))return p.slice(0,E).concat(p.slice(E+1));return p}isInSet(p){for(let E=0;E<p.length;E++)if(this.eq(p[E]))return!0;return!1}eq(p){return this==p||this.type==p.type&&G(this.attrs,p.attrs)}toJSON(){let p={type:this.type.name};for(let E in this.attrs){p.attrs=this.attrs;break}return p}static fromJSON(p,E){if(!E)throw new RangeError("Invalid input for Mark.fromJSON");let P=p.marks[E.type];if(!P)throw new RangeError(`There is no mark type ${E.type} in this schema`);return P.create(E.attrs)}static sameSet(p,E){if(p==E)return!0;if(p.length!=E.length)return!1;for(let P=0;P<p.length;P++)if(!p[P].eq(E[P]))return!1;return!0}static setFrom(p){if(!p||Array.isArray(p)&&0==p.length)return H.none;if(p instanceof H)return[p];let E=p.slice();return E.sort((P,k)=>P.type.rank-k.type.rank),E}}return H.none=[],H})();class ft extends Error{}class at{constructor(a,p,E){this.content=a,this.openStart=p,this.openEnd=E}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(a,p){let E=it(this.content,a+this.openStart,p);return E&&new at(E,this.openStart,this.openEnd)}removeBetween(a,p){return new at(Mt(this.content,a+this.openStart,p+this.openStart),this.openStart,this.openEnd)}eq(a){return this.content.eq(a.content)&&this.openStart==a.openStart&&this.openEnd==a.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let a={content:this.content.toJSON()};return this.openStart>0&&(a.openStart=this.openStart),this.openEnd>0&&(a.openEnd=this.openEnd),a}static fromJSON(a,p){if(!p)return at.empty;let E=p.openStart||0,P=p.openEnd||0;if("number"!=typeof E||"number"!=typeof P)throw new RangeError("Invalid input for Slice.fromJSON");return new at(m.fromJSON(a,p.content),E,P)}static maxOpen(a,p=!0){let E=0,P=0;for(let k=a.firstChild;k&&!k.isLeaf&&(p||!k.type.spec.isolating);k=k.firstChild)E++;for(let k=a.lastChild;k&&!k.isLeaf&&(p||!k.type.spec.isolating);k=k.lastChild)P++;return new at(a,E,P)}}function Mt(H,a,p){let{index:E,offset:P}=H.findIndex(a),k=H.maybeChild(E),{index:K,offset:lt}=H.findIndex(p);if(P==a||k.isText){if(lt!=p&&!H.child(K).isText)throw new RangeError("Removing non-flat range");return H.cut(0,a).append(H.cut(p))}if(E!=K)throw new RangeError("Removing non-flat range");return H.replaceChild(E,k.copy(Mt(k.content,a-P-1,p-P-1)))}function it(H,a,p,E){let{index:P,offset:k}=H.findIndex(a),K=H.maybeChild(P);if(k==a||K.isText)return E&&!E.canReplace(P,P,p)?null:H.cut(0,a).append(p).append(H.cut(a));let lt=it(K.content,a-k-1,p);return lt&&H.replaceChild(P,K.copy(lt))}function mt(H,a,p){if(p.openStart>H.depth)throw new ft("Inserted content deeper than insertion position");if(H.depth-p.openStart!=a.depth-p.openEnd)throw new ft("Inconsistent open depths");return Ot(H,a,p,0)}function Ot(H,a,p,E){let P=H.index(E),k=H.node(E);if(P==a.index(E)&&E<H.depth-p.openStart){let K=Ot(H,a,p,E+1);return k.copy(k.content.replaceChild(P,K))}if(p.content.size){if(p.openStart||p.openEnd||H.depth!=E||a.depth!=E){let{start:K,end:lt}=function(H,a){let p=a.depth-H.openStart,P=a.node(p).copy(H.content);for(let k=p-1;k>=0;k--)P=a.node(k).copy(m.from(P));return{start:P.resolveNoCache(H.openStart+p),end:P.resolveNoCache(P.content.size-H.openEnd-p)}}(p,H);return q(k,F(H,K,lt,a,E))}{let K=H.parent,lt=K.content;return q(K,lt.cut(0,H.parentOffset).append(p.content).append(lt.cut(a.parentOffset)))}}return q(k,ut(H,a,E))}function kt(H,a){if(!a.type.compatibleContent(H.type))throw new ft("Cannot join "+a.type.name+" onto "+H.type.name)}function St(H,a,p){let E=H.node(p);return kt(E,a.node(p)),E}function Dt(H,a){let p=a.length-1;p>=0&&H.isText&&H.sameMarkup(a[p])?a[p]=H.withText(a[p].text+H.text):a.push(H)}function pt(H,a,p,E){let P=(a||H).node(p),k=0,K=a?a.index(p):P.childCount;H&&(k=H.index(p),H.depth>p?k++:H.textOffset&&(Dt(H.nodeAfter,E),k++));for(let lt=k;lt<K;lt++)Dt(P.child(lt),E);a&&a.depth==p&&a.textOffset&&Dt(a.nodeBefore,E)}function q(H,a){return H.type.checkContent(a),H.copy(a)}function F(H,a,p,E,P){let k=H.depth>P&&St(H,a,P+1),K=E.depth>P&&St(p,E,P+1),lt=[];return pt(null,H,P,lt),k&&K&&a.index(P)==p.index(P)?(kt(k,K),Dt(q(k,F(H,a,p,E,P+1)),lt)):(k&&Dt(q(k,ut(H,a,P+1)),lt),pt(a,p,P,lt),K&&Dt(q(K,ut(p,E,P+1)),lt)),pt(E,null,P,lt),new m(lt)}function ut(H,a,p){let E=[];return pt(null,H,p,E),H.depth>p&&Dt(q(St(H,a,p+1),ut(H,a,p+1)),E),pt(a,null,p,E),new m(E)}at.empty=new at(m.empty,0,0);class At{constructor(a,p,E){this.pos=a,this.path=p,this.parentOffset=E,this.depth=p.length/3-1}resolveDepth(a){return null==a?this.depth:a<0?this.depth+a:a}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(a){return this.path[3*this.resolveDepth(a)]}index(a){return this.path[3*this.resolveDepth(a)+1]}indexAfter(a){return a=this.resolveDepth(a),this.index(a)+(a!=this.depth||this.textOffset?1:0)}start(a){return 0==(a=this.resolveDepth(a))?0:this.path[3*a-1]+1}end(a){return a=this.resolveDepth(a),this.start(a)+this.node(a).content.size}before(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position before the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]}after(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position after the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]+this.path[3*a].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let a=this.parent,p=this.index(this.depth);if(p==a.childCount)return null;let E=this.pos-this.path[this.path.length-1],P=a.child(p);return E?a.child(p).cut(E):P}get nodeBefore(){let a=this.index(this.depth),p=this.pos-this.path[this.path.length-1];return p?this.parent.child(a).cut(0,p):0==a?null:this.parent.child(a-1)}posAtIndex(a,p){p=this.resolveDepth(p);let E=this.path[3*p],P=0==p?0:this.path[3*p-1]+1;for(let k=0;k<a;k++)P+=E.child(k).nodeSize;return P}marks(){let a=this.parent,p=this.index();if(0==a.content.size)return tt.none;if(this.textOffset)return a.child(p).marks;let E=a.maybeChild(p-1),P=a.maybeChild(p);if(!E){let lt=E;E=P,P=lt}let k=E.marks;for(var K=0;K<k.length;K++)!1===k[K].type.spec.inclusive&&(!P||!k[K].isInSet(P.marks))&&(k=k[K--].removeFromSet(k));return k}marksAcross(a){let p=this.parent.maybeChild(this.index());if(!p||!p.isInline)return null;let E=p.marks,P=a.parent.maybeChild(a.index());for(var k=0;k<E.length;k++)!1===E[k].type.spec.inclusive&&(!P||!E[k].isInSet(P.marks))&&(E=E[k--].removeFromSet(E));return E}sharedDepth(a){for(let p=this.depth;p>0;p--)if(this.start(p)<=a&&this.end(p)>=a)return p;return 0}blockRange(a=this,p){if(a.pos<this.pos)return a.blockRange(this);for(let E=this.depth-(this.parent.inlineContent||this.pos==a.pos?1:0);E>=0;E--)if(a.pos<=this.end(E)&&(!p||p(this.node(E))))return new _t(this,a,E);return null}sameParent(a){return this.pos-this.parentOffset==a.pos-a.parentOffset}max(a){return a.pos>this.pos?a:this}min(a){return a.pos<this.pos?a:this}toString(){let a="";for(let p=1;p<=this.depth;p++)a+=(a?"/":"")+this.node(p).type.name+"_"+this.index(p-1);return a+":"+this.parentOffset}static resolve(a,p){if(!(p>=0&&p<=a.content.size))throw new RangeError("Position "+p+" out of range");let E=[],P=0,k=p;for(let K=a;;){let{index:lt,offset:Ht}=K.content.findIndex(k),te=k-Ht;if(E.push(K,lt,P+Ht),!te||(K=K.child(lt),K.isText))break;k=te-1,P+=Ht+1}return new At(p,E,k)}static resolveCached(a,p){for(let P=0;P<Bt.length;P++){let k=Bt[P];if(k.pos==p&&k.doc==a)return k}let E=Bt[Pt]=At.resolve(a,p);return Pt=(Pt+1)%It,E}}let Bt=[],Pt=0,It=12;class _t{constructor(a,p,E){this.$from=a,this.$to=p,this.depth=E}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Rt=Object.create(null);class wt{constructor(a,p,E,P=tt.none){this.type=a,this.attrs=p,this.marks=P,this.content=E||m.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(a){return this.content.child(a)}maybeChild(a){return this.content.maybeChild(a)}forEach(a){this.content.forEach(a)}nodesBetween(a,p,E,P=0){this.content.nodesBetween(a,p,E,P,this)}descendants(a){this.nodesBetween(0,this.content.size,a)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(a,p,E,P){return this.content.textBetween(a,p,E,P)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(a){return this==a||this.sameMarkup(a)&&this.content.eq(a.content)}sameMarkup(a){return this.hasMarkup(a.type,a.attrs,a.marks)}hasMarkup(a,p,E){return this.type==a&&G(this.attrs,p||a.defaultAttrs||Rt)&&tt.sameSet(this.marks,E||tt.none)}copy(a=null){return a==this.content?this:new wt(this.type,this.attrs,a,this.marks)}mark(a){return a==this.marks?this:new wt(this.type,this.attrs,this.content,a)}cut(a,p=this.content.size){return 0==a&&p==this.content.size?this:this.copy(this.content.cut(a,p))}slice(a,p=this.content.size,E=!1){if(a==p)return at.empty;let P=this.resolve(a),k=this.resolve(p),K=E?0:P.sharedDepth(p),lt=P.start(K),te=P.node(K).content.cut(P.pos-lt,k.pos-lt);return new at(te,P.depth-K,k.depth-K)}replace(a,p,E){return mt(this.resolve(a),this.resolve(p),E)}nodeAt(a){for(let p=this;;){let{index:E,offset:P}=p.content.findIndex(a);if(p=p.maybeChild(E),!p)return null;if(P==a||p.isText)return p;a-=P+1}}childAfter(a){let{index:p,offset:E}=this.content.findIndex(a);return{node:this.content.maybeChild(p),index:p,offset:E}}childBefore(a){if(0==a)return{node:null,index:0,offset:0};let{index:p,offset:E}=this.content.findIndex(a);if(E<a)return{node:this.content.child(p),index:p,offset:E};let P=this.content.child(p-1);return{node:P,index:p-1,offset:E-P.nodeSize}}resolve(a){return At.resolveCached(this,a)}resolveNoCache(a){return At.resolve(this,a)}rangeHasMark(a,p,E){let P=!1;return p>a&&this.nodesBetween(a,p,k=>(E.isInSet(k.marks)&&(P=!0),!P)),P}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let a=this.type.name;return this.content.size&&(a+="("+this.content.toStringInner()+")"),rt(this.marks,a)}contentMatchAt(a){let p=this.type.contentMatch.matchFragment(this.content,0,a);if(!p)throw new Error("Called contentMatchAt on a node with invalid content");return p}canReplace(a,p,E=m.empty,P=0,k=E.childCount){let K=this.contentMatchAt(a).matchFragment(E,P,k),lt=K&&K.matchFragment(this.content,p);if(!lt||!lt.validEnd)return!1;for(let Ht=P;Ht<k;Ht++)if(!this.type.allowsMarks(E.child(Ht).marks))return!1;return!0}canReplaceWith(a,p,E,P){if(P&&!this.type.allowsMarks(P))return!1;let k=this.contentMatchAt(a).matchType(E),K=k&&k.matchFragment(this.content,p);return!!K&&K.validEnd}canAppend(a){return a.content.size?this.canReplace(this.childCount,this.childCount,a.content):this.type.compatibleContent(a.type)}check(){this.type.checkContent(this.content);let a=tt.none;for(let p=0;p<this.marks.length;p++)a=this.marks[p].addToSet(a);if(!tt.sameSet(a,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(p=>p.type.name)}`);this.content.forEach(p=>p.check())}toJSON(){let a={type:this.type.name};for(let p in this.attrs){a.attrs=this.attrs;break}return this.content.size&&(a.content=this.content.toJSON()),this.marks.length&&(a.marks=this.marks.map(p=>p.toJSON())),a}static fromJSON(a,p){if(!p)throw new RangeError("Invalid input for Node.fromJSON");let E=null;if(p.marks){if(!Array.isArray(p.marks))throw new RangeError("Invalid mark data for Node.fromJSON");E=p.marks.map(a.markFromJSON)}if("text"==p.type){if("string"!=typeof p.text)throw new RangeError("Invalid text node in JSON");return a.text(p.text,E)}let P=m.fromJSON(a,p.content);return a.nodeType(p.type).create(p.attrs,P,E)}}wt.prototype.text=void 0;class z extends wt{constructor(a,p,E,P){if(super(a,p,null,P),!E)throw new RangeError("Empty text nodes are not allowed");this.text=E}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):rt(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(a,p){return this.text.slice(a,p)}get nodeSize(){return this.text.length}mark(a){return a==this.marks?this:new z(this.type,this.attrs,this.text,a)}withText(a){return a==this.text?this:new z(this.type,this.attrs,a,this.marks)}cut(a=0,p=this.text.length){return 0==a&&p==this.text.length?this:this.withText(this.text.slice(a,p))}eq(a){return this.sameMarkup(a)&&this.text==a.text}toJSON(){let a=super.toJSON();return a.text=this.text,a}}function rt(H,a){for(let p=H.length-1;p>=0;p--)a=H[p].type.name+"("+a+")";return a}class dt{constructor(a){this.validEnd=a,this.next=[],this.wrapCache=[]}static parse(a,p){let E=new ct(a,p);if(null==E.next)return dt.empty;let P=$(E);E.next&&E.err("Unexpected trailing text");let k=function(H){let a=Object.create(null);return function p(E){let P=[];E.forEach(K=>{H[K].forEach(({term:lt,to:Ht})=>{if(!lt)return;let te;for(let ee=0;ee<P.length;ee++)P[ee][0]==lt&&(te=P[ee][1]);ye(H,Ht).forEach(ee=>{te||P.push([lt,te=[]]),-1==te.indexOf(ee)&&te.push(ee)})})});let k=a[E.join(",")]=new dt(E.indexOf(H.length-1)>-1);for(let K=0;K<P.length;K++){let lt=P[K][1].sort(ce);k.next.push({type:P[K][0],next:a[lt.join(",")]||p(lt)})}return k}(ye(H,0))}(function(H){let a=[[]];return P(function k(K,lt){if("choice"==K.type)return K.exprs.reduce((Ht,te)=>Ht.concat(k(te,lt)),[]);if("seq"!=K.type){if("star"==K.type){let Ht=p();return E(lt,Ht),P(k(K.expr,Ht),Ht),[E(Ht)]}if("plus"==K.type){let Ht=p();return P(k(K.expr,lt),Ht),P(k(K.expr,Ht),Ht),[E(Ht)]}if("opt"==K.type)return[E(lt)].concat(k(K.expr,lt));if("range"==K.type){let Ht=lt;for(let te=0;te<K.min;te++){let ee=p();P(k(K.expr,Ht),ee),Ht=ee}if(-1==K.max)P(k(K.expr,Ht),Ht);else for(let te=K.min;te<K.max;te++){let ee=p();E(Ht,ee),P(k(K.expr,Ht),ee),Ht=ee}return[E(Ht)]}if("name"==K.type)return[E(lt,void 0,K.value)];throw new Error("Unknown expr type")}for(let Ht=0;;Ht++){let te=k(K.exprs[Ht],lt);if(Ht==K.exprs.length-1)return te;P(te,lt=p())}}(H,0),p()),a;function p(){return a.push([])-1}function E(K,lt,Ht){let te={term:Ht,to:lt};return a[K].push(te),te}function P(K,lt){K.forEach(Ht=>Ht.to=lt)}}(P));return function(H,a){for(let p=0,E=[H];p<E.length;p++){let P=E[p],k=!P.validEnd,K=[];for(let lt=0;lt<P.next.length;lt++){let{type:Ht,next:te}=P.next[lt];K.push(Ht.name),k&&!(Ht.isText||Ht.hasRequiredAttrs())&&(k=!1),-1==E.indexOf(te)&&E.push(te)}k&&a.err("Only non-generatable nodes ("+K.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(k,E),k}matchType(a){for(let p=0;p<this.next.length;p++)if(this.next[p].type==a)return this.next[p].next;return null}matchFragment(a,p=0,E=a.childCount){let P=this;for(let k=p;P&&k<E;k++)P=P.matchType(a.child(k).type);return P}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let a=0;a<this.next.length;a++){let{type:p}=this.next[a];if(!p.isText&&!p.hasRequiredAttrs())return p}return null}compatible(a){for(let p=0;p<this.next.length;p++)for(let E=0;E<a.next.length;E++)if(this.next[p].type==a.next[E].type)return!0;return!1}fillBefore(a,p=!1,E=0){let P=[this];return function k(K,lt){let Ht=K.matchFragment(a,E);if(Ht&&(!p||Ht.validEnd))return m.from(lt.map(te=>te.createAndFill()));for(let te=0;te<K.next.length;te++){let{type:ee,next:we}=K.next[te];if(!ee.isText&&!ee.hasRequiredAttrs()&&-1==P.indexOf(we)){P.push(we);let $e=k(we,lt.concat(ee));if($e)return $e}}return null}(this,[])}findWrapping(a){for(let E=0;E<this.wrapCache.length;E+=2)if(this.wrapCache[E]==a)return this.wrapCache[E+1];let p=this.computeWrapping(a);return this.wrapCache.push(a,p),p}computeWrapping(a){let p=Object.create(null),E=[{match:this,type:null,via:null}];for(;E.length;){let P=E.shift(),k=P.match;if(k.matchType(a)){let K=[];for(let lt=P;lt.type;lt=lt.via)K.push(lt.type);return K.reverse()}for(let K=0;K<k.next.length;K++){let{type:lt,next:Ht}=k.next[K];!lt.isLeaf&&!lt.hasRequiredAttrs()&&!(lt.name in p)&&(!P.type||Ht.validEnd)&&(E.push({match:lt.contentMatch,type:lt,via:P}),p[lt.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(a){if(a>=this.next.length)throw new RangeError(`There's no ${a}th edge in this content match`);return this.next[a]}toString(){let a=[];return function p(E){a.push(E);for(let P=0;P<E.next.length;P++)-1==a.indexOf(E.next[P].next)&&p(E.next[P].next)}(this),a.map((E,P)=>{let k=P+(E.validEnd?"*":" ")+" ";for(let K=0;K<E.next.length;K++)k+=(K?", ":"")+E.next[K].type.name+"->"+a.indexOf(E.next[K].next);return k}).join("\n")}}dt.empty=new dt(!0);class ct{constructor(a,p){this.string=a,this.nodeTypes=p,this.inline=null,this.pos=0,this.tokens=a.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(a){return this.next==a&&(this.pos++||!0)}err(a){throw new SyntaxError(a+" (in content expression '"+this.string+"')")}}function $(H){let a=[];do{a.push(nt(H))}while(H.eat("|"));return 1==a.length?a[0]:{type:"choice",exprs:a}}function nt(H){let a=[];do{a.push(et(H))}while(H.next&&")"!=H.next&&"|"!=H.next);return 1==a.length?a[0]:{type:"seq",exprs:a}}function et(H){let a=function(H){if(H.eat("(")){let a=$(H);return H.eat(")")||H.err("Missing closing paren"),a}if(!/\W/.test(H.next)){let a=function(H,a){let p=H.nodeTypes,E=p[a];if(E)return[E];let P=[];for(let k in p){let K=p[k];K.groups.indexOf(a)>-1&&P.push(K)}return 0==P.length&&H.err("No node type or group '"+a+"' found"),P}(H,H.next).map(p=>(null==H.inline?H.inline=p.isInline:H.inline!=p.isInline&&H.err("Mixing inline and block content"),{type:"name",value:p}));return H.pos++,1==a.length?a[0]:{type:"choice",exprs:a}}H.err("Unexpected token '"+H.next+"'")}(H);for(;;)if(H.eat("+"))a={type:"plus",expr:a};else if(H.eat("*"))a={type:"star",expr:a};else if(H.eat("?"))a={type:"opt",expr:a};else{if(!H.eat("{"))break;a=$t(H,a)}return a}function Et(H){/\D/.test(H.next)&&H.err("Expected number, got '"+H.next+"'");let a=Number(H.next);return H.pos++,a}function $t(H,a){let p=Et(H),E=p;return H.eat(",")&&(E="}"!=H.next?Et(H):-1),H.eat("}")||H.err("Unclosed braced range"),{type:"range",min:p,max:E,expr:a}}function ce(H,a){return a-H}function ye(H,a){let p=[];return function E(P){let k=H[P];if(1==k.length&&!k[0].term)return E(k[0].to);p.push(P);for(let K=0;K<k.length;K++){let{term:lt,to:Ht}=k[K];!lt&&-1==p.indexOf(Ht)&&E(Ht)}}(a),p.sort(ce)}function Je(H){let a=Object.create(null);for(let p in H){let E=H[p];if(!E.hasDefault)return null;a[p]=E.default}return a}function xe(H,a){let p=Object.create(null);for(let E in H){let P=a&&a[E];if(void 0===P){let k=H[E];if(!k.hasDefault)throw new RangeError("No value supplied for attribute "+E);P=k.default}p[E]=P}return p}function Ne(H){let a=Object.create(null);if(H)for(let p in H)a[p]=new Ae(H[p]);return a}class ge{constructor(a,p,E){this.name=a,this.schema=p,this.spec=E,this.markSet=null,this.groups=E.group?E.group.split(" "):[],this.attrs=Ne(E.attrs),this.defaultAttrs=Je(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(E.inline||"text"==a),this.isText="text"==a}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==dt.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let a in this.attrs)if(this.attrs[a].isRequired)return!0;return!1}compatibleContent(a){return this==a||this.contentMatch.compatible(a.contentMatch)}computeAttrs(a){return!a&&this.defaultAttrs?this.defaultAttrs:xe(this.attrs,a)}create(a=null,p,E){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new wt(this,this.computeAttrs(a),m.from(p),tt.setFrom(E))}createChecked(a=null,p,E){return p=m.from(p),this.checkContent(p),new wt(this,this.computeAttrs(a),p,tt.setFrom(E))}createAndFill(a=null,p,E){if(a=this.computeAttrs(a),(p=m.from(p)).size){let K=this.contentMatch.fillBefore(p);if(!K)return null;p=K.append(p)}let P=this.contentMatch.matchFragment(p),k=P&&P.fillBefore(m.empty,!0);return k?new wt(this,a,p.append(k),tt.setFrom(E)):null}validContent(a){let p=this.contentMatch.matchFragment(a);if(!p||!p.validEnd)return!1;for(let E=0;E<a.childCount;E++)if(!this.allowsMarks(a.child(E).marks))return!1;return!0}checkContent(a){if(!this.validContent(a))throw new RangeError(`Invalid content for node ${this.name}: ${a.toString().slice(0,50)}`)}allowsMarkType(a){return null==this.markSet||this.markSet.indexOf(a)>-1}allowsMarks(a){if(null==this.markSet)return!0;for(let p=0;p<a.length;p++)if(!this.allowsMarkType(a[p].type))return!1;return!0}allowedMarks(a){if(null==this.markSet)return a;let p;for(let E=0;E<a.length;E++)this.allowsMarkType(a[E].type)?p&&p.push(a[E]):p||(p=a.slice(0,E));return p?p.length?p:tt.none:a}static compile(a,p){let E=Object.create(null);a.forEach((k,K)=>E[k]=new ge(k,p,K));let P=p.spec.topNode||"doc";if(!E[P])throw new RangeError("Schema is missing its top node type ('"+P+"')");if(!E.text)throw new RangeError("Every schema needs a 'text' type");for(let k in E.text.attrs)throw new RangeError("The text node type should not have attributes");return E}}class Ae{constructor(a){this.hasDefault=Object.prototype.hasOwnProperty.call(a,"default"),this.default=a.default}get isRequired(){return!this.hasDefault}}class Ce{constructor(a,p,E,P){this.name=a,this.rank=p,this.schema=E,this.spec=P,this.attrs=Ne(P.attrs),this.excluded=null;let k=Je(this.attrs);this.instance=k?new tt(this,k):null}create(a=null){return!a&&this.instance?this.instance:new tt(this,xe(this.attrs,a))}static compile(a,p){let E=Object.create(null),P=0;return a.forEach((k,K)=>E[k]=new Ce(k,P++,p,K)),E}removeFromSet(a){for(var p=0;p<a.length;p++)a[p].type==this&&(a=a.slice(0,p).concat(a.slice(p+1)),p--);return a}isInSet(a){for(let p=0;p<a.length;p++)if(a[p].type==this)return a[p]}excludes(a){return this.excluded.indexOf(a)>-1}}class Pe{constructor(a){this.cached=Object.create(null);let p=this.spec={};for(let P in a)p[P]=a[P];p.nodes=l.from(a.nodes),p.marks=l.from(a.marks||{}),this.nodes=ge.compile(this.spec.nodes,this),this.marks=Ce.compile(this.spec.marks,this);let E=Object.create(null);for(let P in this.nodes){if(P in this.marks)throw new RangeError(P+" can not be both a node and a mark");let k=this.nodes[P],K=k.spec.content||"",lt=k.spec.marks;k.contentMatch=E[K]||(E[K]=dt.parse(K,this.nodes)),k.inlineContent=k.contentMatch.inlineContent,k.markSet="_"==lt?null:lt?Be(this,lt.split(" ")):""!=lt&&k.inlineContent?null:[]}for(let P in this.marks){let k=this.marks[P],K=k.spec.excludes;k.excluded=null==K?[k]:""==K?[]:Be(this,K.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(a,p=null,E,P){if("string"==typeof a)a=this.nodeType(a);else{if(!(a instanceof ge))throw new RangeError("Invalid node type: "+a);if(a.schema!=this)throw new RangeError("Node type from different schema used ("+a.name+")")}return a.createChecked(p,E,P)}text(a,p){let E=this.nodes.text;return new z(E,E.defaultAttrs,a,tt.setFrom(p))}mark(a,p){return"string"==typeof a&&(a=this.marks[a]),a.create(p)}nodeFromJSON(a){return wt.fromJSON(this,a)}markFromJSON(a){return tt.fromJSON(this,a)}nodeType(a){let p=this.nodes[a];if(!p)throw new RangeError("Unknown node type: "+a);return p}}function Be(H,a){let p=[];for(let E=0;E<a.length;E++){let P=a[E],k=H.marks[P],K=k;if(k)p.push(k);else for(let lt in H.marks){let Ht=H.marks[lt];("_"==P||Ht.spec.group&&Ht.spec.group.split(" ").indexOf(P)>-1)&&p.push(K=Ht)}if(!K)throw new SyntaxError("Unknown mark type: '"+a[E]+"'")}return p}class Me{constructor(a,p){this.schema=a,this.rules=p,this.tags=[],this.styles=[],p.forEach(E=>{E.tag?this.tags.push(E):E.style&&this.styles.push(E)}),this.normalizeLists=!this.tags.some(E=>{if(!/^(ul|ol)\b/.test(E.tag)||!E.node)return!1;let P=a.nodes[E.node];return P.contentMatch.matchType(P)})}parse(a,p={}){let E=new Ee(this,p,!1);return E.addAll(a,p.from,p.to),E.finish()}parseSlice(a,p={}){let E=new Ee(this,p,!0);return E.addAll(a,p.from,p.to),at.maxOpen(E.finish())}matchTag(a,p,E){for(let P=E?this.tags.indexOf(E)+1:0;P<this.tags.length;P++){let k=this.tags[P];if(b(a,k.tag)&&(void 0===k.namespace||a.namespaceURI==k.namespace)&&(!k.context||p.matchesContext(k.context))){if(k.getAttrs){let K=k.getAttrs(a);if(!1===K)continue;k.attrs=K||void 0}return k}}}matchStyle(a,p,E,P){for(let k=P?this.styles.indexOf(P)+1:0;k<this.styles.length;k++){let K=this.styles[k],lt=K.style;if(!(0!=lt.indexOf(a)||K.context&&!E.matchesContext(K.context)||lt.length>a.length&&(61!=lt.charCodeAt(a.length)||lt.slice(a.length+1)!=p))){if(K.getAttrs){let Ht=K.getAttrs(p);if(!1===Ht)continue;K.attrs=Ht||void 0}return K}}}static schemaRules(a){let p=[];function E(P){let k=null==P.priority?50:P.priority,K=0;for(;K<p.length;K++){let lt=p[K];if((null==lt.priority?50:lt.priority)<k)break}p.splice(K,0,P)}for(let P in a.marks){let k=a.marks[P].spec.parseDOM;k&&k.forEach(K=>{E(K=I(K)),K.mark||K.ignore||K.clearMark||(K.mark=P)})}for(let P in a.nodes){let k=a.nodes[P].spec.parseDOM;k&&k.forEach(K=>{E(K=I(K)),K.node||K.ignore||K.mark||(K.node=P)})}return p}static fromSchema(a){return a.cached.domParser||(a.cached.domParser=new Me(a,Me.schemaRules(a)))}}const ke={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ye={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},He={ol:!0,ul:!0};function _e(H,a,p){return null!=a?(a?1:0)|("full"===a?2:0):H&&"pre"==H.whitespace?3:-5&p}class fe{constructor(a,p,E,P,k,K,lt){this.type=a,this.attrs=p,this.marks=E,this.pendingMarks=P,this.solid=k,this.options=lt,this.content=[],this.activeMarks=tt.none,this.stashMarks=[],this.match=K||(4&lt?null:a.contentMatch)}findWrapping(a){if(!this.match){if(!this.type)return[];let p=this.type.contentMatch.fillBefore(m.from(a));if(!p){let P,E=this.type.contentMatch;return(P=E.findWrapping(a.type))?(this.match=E,P):null}this.match=this.type.contentMatch.matchFragment(p)}return this.match.findWrapping(a.type)}finish(a){if(!(1&this.options)){let P,E=this.content[this.content.length-1];if(E&&E.isText&&(P=/[ \t\r\n\u000c]+$/.exec(E.text))){let k=E;E.text.length==P[0].length?this.content.pop():this.content[this.content.length-1]=k.withText(k.text.slice(0,k.text.length-P[0].length))}}let p=m.from(this.content);return!a&&this.match&&(p=p.append(this.match.fillBefore(m.empty,!0))),this.type?this.type.create(this.attrs,p,this.marks):p}popFromStashMark(a){for(let p=this.stashMarks.length-1;p>=0;p--)if(a.eq(this.stashMarks[p]))return this.stashMarks.splice(p,1)[0]}applyPending(a){for(let p=0,E=this.pendingMarks;p<E.length;p++){let P=E[p];(this.type?this.type.allowsMarkType(P.type):w(P.type,a))&&!P.isInSet(this.activeMarks)&&(this.activeMarks=P.addToSet(this.activeMarks),this.pendingMarks=P.removeFromSet(this.pendingMarks))}}inlineContext(a){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:a.parentNode&&!ke.hasOwnProperty(a.parentNode.nodeName.toLowerCase())}}class Ee{constructor(a,p,E){this.parser=a,this.options=p,this.isOpen=E,this.open=0;let k,P=p.topNode,K=_e(null,p.preserveWhitespace,0)|(E?4:0);k=P?new fe(P.type,P.attrs,tt.none,tt.none,!0,p.topMatch||P.type.contentMatch,K):new fe(E?null:a.schema.topNodeType,null,tt.none,tt.none,!0,null,K),this.nodes=[k],this.find=p.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(a){if(3==a.nodeType)this.addTextNode(a);else if(1==a.nodeType){let p=a.getAttribute("style");if(p){let E=this.readStyles(function(H){let p,a=/\s*([\w-]+)\s*:\s*([^;]+)/g,E=[];for(;p=a.exec(H);)E.push(p[1],p[2].trim());return E}(p));if(!E)return;let[P,k]=E,K=this.top;for(let lt=0;lt<k.length;lt++)this.removePendingMark(k[lt],K);for(let lt=0;lt<P.length;lt++)this.addPendingMark(P[lt]);this.addElement(a);for(let lt=0;lt<P.length;lt++)this.removePendingMark(P[lt],K);for(let lt=0;lt<k.length;lt++)this.addPendingMark(k[lt])}else this.addElement(a)}}addTextNode(a){let p=a.nodeValue,E=this.top;if(2&E.options||E.inlineContext(a)||/[^ \t\r\n\u000c]/.test(p)){if(1&E.options)p=2&E.options?p.replace(/\r\n?/g,"\n"):p.replace(/\r?\n|\r/g," ");else if(p=p.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(p)&&this.open==this.nodes.length-1){let P=E.content[E.content.length-1],k=a.previousSibling;(!P||k&&"BR"==k.nodeName||P.isText&&/[ \t\r\n\u000c]$/.test(P.text))&&(p=p.slice(1))}p&&this.insertNode(this.parser.schema.text(p)),this.findInText(a)}else this.findInside(a)}addElement(a,p){let P,E=a.nodeName.toLowerCase();He.hasOwnProperty(E)&&this.parser.normalizeLists&&function(H){for(let a=H.firstChild,p=null;a;a=a.nextSibling){let E=1==a.nodeType?a.nodeName.toLowerCase():null;E&&He.hasOwnProperty(E)&&p?(p.appendChild(a),a=p):"li"==E?p=a:E&&(p=null)}}(a);let k=this.options.ruleFromNode&&this.options.ruleFromNode(a)||(P=this.parser.matchTag(a,this,p));if(k?k.ignore:Ye.hasOwnProperty(E))this.findInside(a),this.ignoreFallback(a);else if(!k||k.skip||k.closeParent){k&&k.closeParent?this.open=Math.max(0,this.open-1):k&&k.skip.nodeType&&(a=k.skip);let K,lt=this.top,Ht=this.needsBlock;if(ke.hasOwnProperty(E))lt.content.length&&lt.content[0].isInline&&this.open&&(this.open--,lt=this.top),K=!0,lt.type||(this.needsBlock=!0);else if(!a.firstChild)return void this.leafFallback(a);this.addAll(a),K&&this.sync(lt),this.needsBlock=Ht}else this.addElementByRule(a,k,!1===k.consuming?P:void 0)}leafFallback(a){"BR"==a.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(a.ownerDocument.createTextNode("\n"))}ignoreFallback(a){"BR"==a.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(a){let p=tt.none,E=tt.none;t:for(let P=0;P<a.length;P+=2)for(let k;;){let K=this.parser.matchStyle(a[P],a[P+1],this,k);if(!K)continue t;if(K.ignore)return null;if(K.clearMark?this.top.pendingMarks.forEach(lt=>{K.clearMark(lt)&&(E=lt.addToSet(E))}):p=this.parser.schema.marks[K.mark].create(K.attrs).addToSet(p),!1!==K.consuming)break;k=K}return[p,E]}addElementByRule(a,p,E){let P,k,K;p.node?(k=this.parser.schema.nodes[p.node],k.isLeaf?this.insertNode(k.create(p.attrs))||this.leafFallback(a):P=this.enter(k,p.attrs||null,p.preserveWhitespace)):(K=this.parser.schema.marks[p.mark].create(p.attrs),this.addPendingMark(K));let lt=this.top;if(k&&k.isLeaf)this.findInside(a);else if(E)this.addElement(a,E);else if(p.getContent)this.findInside(a),p.getContent(a,this.parser.schema).forEach(Ht=>this.insertNode(Ht));else{let Ht=a;"string"==typeof p.contentElement?Ht=a.querySelector(p.contentElement):"function"==typeof p.contentElement?Ht=p.contentElement(a):p.contentElement&&(Ht=p.contentElement),this.findAround(a,Ht,!0),this.addAll(Ht)}P&&this.sync(lt)&&this.open--,K&&this.removePendingMark(K,lt)}addAll(a,p,E){let P=p||0;for(let k=p?a.childNodes[p]:a.firstChild,K=null==E?null:a.childNodes[E];k!=K;k=k.nextSibling,++P)this.findAtPoint(a,P),this.addDOM(k);this.findAtPoint(a,P)}findPlace(a){let p,E;for(let P=this.open;P>=0;P--){let k=this.nodes[P],K=k.findWrapping(a);if(K&&(!p||p.length>K.length)&&(p=K,E=k,!K.length)||k.solid)break}if(!p)return!1;this.sync(E);for(let P=0;P<p.length;P++)this.enterInner(p[P],null,!1);return!0}insertNode(a){if(a.isInline&&this.needsBlock&&!this.top.type){let p=this.textblockFromContext();p&&this.enterInner(p)}if(this.findPlace(a)){this.closeExtra();let p=this.top;p.applyPending(a.type),p.match&&(p.match=p.match.matchType(a.type));let E=p.activeMarks;for(let P=0;P<a.marks.length;P++)(!p.type||p.type.allowsMarkType(a.marks[P].type))&&(E=a.marks[P].addToSet(E));return p.content.push(a.mark(E)),!0}return!1}enter(a,p,E){let P=this.findPlace(a.create(p));return P&&this.enterInner(a,p,!0,E),P}enterInner(a,p=null,E=!1,P){this.closeExtra();let k=this.top;k.applyPending(a),k.match=k.match&&k.match.matchType(a);let K=_e(a,P,k.options);4&k.options&&0==k.content.length&&(K|=4),this.nodes.push(new fe(a,p,k.activeMarks,k.pendingMarks,E,null,K)),this.open++}closeExtra(a=!1){let p=this.nodes.length-1;if(p>this.open){for(;p>this.open;p--)this.nodes[p-1].content.push(this.nodes[p].finish(a));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(a){for(let p=this.open;p>=0;p--)if(this.nodes[p]==a)return this.open=p,!0;return!1}get currentPos(){this.closeExtra();let a=0;for(let p=this.open;p>=0;p--){let E=this.nodes[p].content;for(let P=E.length-1;P>=0;P--)a+=E[P].nodeSize;p&&a++}return a}findAtPoint(a,p){if(this.find)for(let E=0;E<this.find.length;E++)this.find[E].node==a&&this.find[E].offset==p&&(this.find[E].pos=this.currentPos)}findInside(a){if(this.find)for(let p=0;p<this.find.length;p++)null==this.find[p].pos&&1==a.nodeType&&a.contains(this.find[p].node)&&(this.find[p].pos=this.currentPos)}findAround(a,p,E){if(a!=p&&this.find)for(let P=0;P<this.find.length;P++)null==this.find[P].pos&&1==a.nodeType&&a.contains(this.find[P].node)&&p.compareDocumentPosition(this.find[P].node)&(E?2:4)&&(this.find[P].pos=this.currentPos)}findInText(a){if(this.find)for(let p=0;p<this.find.length;p++)this.find[p].node==a&&(this.find[p].pos=this.currentPos-(a.nodeValue.length-this.find[p].offset))}matchesContext(a){if(a.indexOf("|")>-1)return a.split(/\s*\|\s*/).some(this.matchesContext,this);let p=a.split("/"),E=this.options.context,P=!(this.isOpen||E&&E.parent.type!=this.nodes[0].type),k=(P?0:1)-(E?E.depth+1:0),K=(lt,Ht)=>{for(;lt>=0;lt--){let te=p[lt];if(""==te){if(lt==p.length-1||0==lt)continue;for(;Ht>=k;Ht--)if(K(lt-1,Ht))return!0;return!1}{let ee=Ht>0||0==Ht&&P?this.nodes[Ht].type:E&&Ht>=k?E.node(Ht-k).type:null;if(!ee||ee.name!=te&&-1==ee.groups.indexOf(te))return!1;Ht--}}return!0};return K(p.length-1,this.open)}textblockFromContext(){let a=this.options.context;if(a)for(let p=a.depth;p>=0;p--){let E=a.node(p).contentMatchAt(a.indexAfter(p)).defaultType;if(E&&E.isTextblock&&E.defaultAttrs)return E}for(let p in this.parser.schema.nodes){let E=this.parser.schema.nodes[p];if(E.isTextblock&&E.defaultAttrs)return E}}addPendingMark(a){let p=function(H,a){for(let p=0;p<a.length;p++)if(H.eq(a[p]))return a[p]}(a,this.top.pendingMarks);p&&this.top.stashMarks.push(p),this.top.pendingMarks=a.addToSet(this.top.pendingMarks)}removePendingMark(a,p){for(let E=this.open;E>=0;E--){let P=this.nodes[E];if(P.pendingMarks.lastIndexOf(a)>-1)P.pendingMarks=a.removeFromSet(P.pendingMarks);else{P.activeMarks=a.removeFromSet(P.activeMarks);let K=P.popFromStashMark(a);K&&P.type&&P.type.allowsMarkType(K.type)&&(P.activeMarks=K.addToSet(P.activeMarks))}if(P==p)break}}}function b(H,a){return(H.matches||H.msMatchesSelector||H.webkitMatchesSelector||H.mozMatchesSelector).call(H,a)}function I(H){let a={};for(let p in H)a[p]=H[p];return a}function w(H,a){let p=a.schema.nodes;for(let E in p){let P=p[E];if(!P.allowsMarkType(H))continue;let k=[],K=lt=>{k.push(lt);for(let Ht=0;Ht<lt.edgeCount;Ht++){let{type:te,next:ee}=lt.edge(Ht);if(te==a||k.indexOf(ee)<0&&K(ee))return!0}};if(K(P.contentMatch))return!0}}class U{constructor(a,p){this.nodes=a,this.marks=p}serializeFragment(a,p={},E){E||(E=Nt(p).createDocumentFragment());let P=E,k=[];return a.forEach(K=>{if(k.length||K.marks.length){let lt=0,Ht=0;for(;lt<k.length&&Ht<K.marks.length;){let te=K.marks[Ht];if(this.marks[te.type.name]){if(!te.eq(k[lt][0])||!1===te.type.spec.spanning)break;lt++,Ht++}else Ht++}for(;lt<k.length;)P=k.pop()[1];for(;Ht<K.marks.length;){let te=K.marks[Ht++],ee=this.serializeMark(te,K.isInline,p);ee&&(k.push([te,P]),P.appendChild(ee.dom),P=ee.contentDOM||ee.dom)}}P.appendChild(this.serializeNodeInner(K,p))}),E}serializeNodeInner(a,p){let{dom:E,contentDOM:P}=U.renderSpec(Nt(p),this.nodes[a.type.name](a));if(P){if(a.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(a.content,p,P)}return E}serializeNode(a,p={}){let E=this.serializeNodeInner(a,p);for(let P=a.marks.length-1;P>=0;P--){let k=this.serializeMark(a.marks[P],a.isInline,p);k&&((k.contentDOM||k.dom).appendChild(E),E=k.dom)}return E}serializeMark(a,p,E={}){let P=this.marks[a.type.name];return P&&U.renderSpec(Nt(E),P(a,p))}static renderSpec(a,p,E=null){if("string"==typeof p)return{dom:a.createTextNode(p)};if(null!=p.nodeType)return{dom:p};if(p.dom&&null!=p.dom.nodeType)return p;let P=p[0],k=P.indexOf(" ");k>0&&(E=P.slice(0,k),P=P.slice(k+1));let K,lt=E?a.createElementNS(E,P):a.createElement(P),Ht=p[1],te=1;if(Ht&&"object"==typeof Ht&&null==Ht.nodeType&&!Array.isArray(Ht)){te=2;for(let ee in Ht)if(null!=Ht[ee]){let we=ee.indexOf(" ");we>0?lt.setAttributeNS(ee.slice(0,we),ee.slice(we+1),Ht[ee]):lt.setAttribute(ee,Ht[ee])}}for(let ee=te;ee<p.length;ee++){let we=p[ee];if(0===we){if(ee<p.length-1||ee>te)throw new RangeError("Content hole must be the only child of its parent node");return{dom:lt,contentDOM:lt}}{let{dom:$e,contentDOM:J}=U.renderSpec(a,we,E);if(lt.appendChild($e),J){if(K)throw new RangeError("Multiple content holes");K=J}}}return{dom:lt,contentDOM:K}}static fromSchema(a){return a.cached.domSerializer||(a.cached.domSerializer=new U(this.nodesFromSchema(a),this.marksFromSchema(a)))}static nodesFromSchema(a){let p=bt(a.nodes);return p.text||(p.text=E=>E.text),p}static marksFromSchema(a){return bt(a.marks)}}function bt(H){let a={};for(let p in H){let E=H[p].spec.toDOM;E&&(a[p]=E)}return a}function Nt(H){return H.document||window.document}},62463:(Yt,Tt,c)=>{c.d(Tt,{Bs:()=>G,C1:()=>Mt,H$:()=>Rt,Sy:()=>Pt,Y1:()=>A,qv:()=>ft,xm:()=>m,yy:()=>At});var C=c(77346),l=c(38480);const y=Object.create(null);class A{constructor(z,rt,dt){this.$anchor=z,this.$head=rt,this.ranges=dt||[new m(z.min(rt),z.max(rt))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let z=this.ranges;for(let rt=0;rt<z.length;rt++)if(z[rt].$from.pos!=z[rt].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(z,rt=C.p2.empty){let dt=rt.content.lastChild,ct=null;for(let et=0;et<rt.openEnd;et++)ct=dt,dt=dt.lastChild;let $=z.steps.length,nt=this.ranges;for(let et=0;et<nt.length;et++){let{$from:Et,$to:$t}=nt[et],Kt=z.mapping.slice($);z.replaceRange(Kt.map(Et.pos),Kt.map($t.pos),et?C.p2.empty:rt),0==et&&Ot(z,$,(dt?dt.isInline:ct&&ct.isTextblock)?-1:1)}}replaceWith(z,rt){let dt=z.steps.length,ct=this.ranges;for(let $=0;$<ct.length;$++){let{$from:nt,$to:et}=ct[$],Et=z.mapping.slice(dt),$t=Et.map(nt.pos),Kt=Et.map(et.pos);$?z.deleteRange($t,Kt):(z.replaceRangeWith($t,Kt,rt),Ot(z,dt,rt.isInline?-1:1))}}static findFrom(z,rt,dt=!1){let ct=z.parent.inlineContent?new G(z):mt(z.node(0),z.parent,z.pos,z.index(),rt,dt);if(ct)return ct;for(let $=z.depth-1;$>=0;$--){let nt=rt<0?mt(z.node(0),z.node($),z.before($+1),z.index($),rt,dt):mt(z.node(0),z.node($),z.after($+1),z.index($)+1,rt,dt);if(nt)return nt}return null}static near(z,rt=1){return this.findFrom(z,rt)||this.findFrom(z,-rt)||new Mt(z.node(0))}static atStart(z){return mt(z,z,0,0,1)||new Mt(z)}static atEnd(z){return mt(z,z,z.content.size,z.childCount,-1)||new Mt(z)}static fromJSON(z,rt){if(!rt||!rt.type)throw new RangeError("Invalid input for Selection.fromJSON");let dt=y[rt.type];if(!dt)throw new RangeError(`No selection type ${rt.type} defined`);return dt.fromJSON(z,rt)}static jsonID(z,rt){if(z in y)throw new RangeError("Duplicate use of selection JSON ID "+z);return y[z]=rt,rt.prototype.jsonID=z,rt}getBookmark(){return G.between(this.$anchor,this.$head).getBookmark()}}A.prototype.visible=!0;class m{constructor(z,rt){this.$from=z,this.$to=rt}}let ot=!1;function N(wt){!ot&&!wt.parent.inlineContent&&(ot=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+wt.parent.type.name+")"))}class G extends A{constructor(z,rt=z){N(z),N(rt),super(z,rt)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(z,rt){let dt=z.resolve(rt.map(this.head));if(!dt.parent.inlineContent)return A.near(dt);let ct=z.resolve(rt.map(this.anchor));return new G(ct.parent.inlineContent?ct:dt,dt)}replace(z,rt=C.p2.empty){if(super.replace(z,rt),rt==C.p2.empty){let dt=this.$from.marksAcross(this.$to);dt&&z.ensureMarks(dt)}}eq(z){return z instanceof G&&z.anchor==this.anchor&&z.head==this.head}getBookmark(){return new tt(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(z,rt){if("number"!=typeof rt.anchor||"number"!=typeof rt.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new G(z.resolve(rt.anchor),z.resolve(rt.head))}static create(z,rt,dt=rt){let ct=z.resolve(rt);return new this(ct,dt==rt?ct:z.resolve(dt))}static between(z,rt,dt){let ct=z.pos-rt.pos;if((!dt||ct)&&(dt=ct>=0?1:-1),!rt.parent.inlineContent){let $=A.findFrom(rt,dt,!0)||A.findFrom(rt,-dt,!0);if(!$)return A.near(rt,dt);rt=$.$head}return z.parent.inlineContent||(0==ct||(z=(A.findFrom(z,-dt,!0)||A.findFrom(z,dt,!0)).$anchor).pos<rt.pos!=ct<0)&&(z=rt),new G(z,rt)}}A.jsonID("text",G);class tt{constructor(z,rt){this.anchor=z,this.head=rt}map(z){return new tt(z.map(this.anchor),z.map(this.head))}resolve(z){return G.between(z.resolve(this.anchor),z.resolve(this.head))}}class ft extends A{constructor(z){let rt=z.nodeAfter,dt=z.node(0).resolve(z.pos+rt.nodeSize);super(z,dt),this.node=rt}map(z,rt){let{deleted:dt,pos:ct}=rt.mapResult(this.anchor),$=z.resolve(ct);return dt?A.near($):new ft($)}content(){return new C.p2(C.HY.from(this.node),0,0)}eq(z){return z instanceof ft&&z.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new at(this.anchor)}static fromJSON(z,rt){if("number"!=typeof rt.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ft(z.resolve(rt.anchor))}static create(z,rt){return new ft(z.resolve(rt))}static isSelectable(z){return!z.isText&&!1!==z.type.spec.selectable}}ft.prototype.visible=!1,A.jsonID("node",ft);class at{constructor(z){this.anchor=z}map(z){let{deleted:rt,pos:dt}=z.mapResult(this.anchor);return rt?new tt(dt,dt):new at(dt)}resolve(z){let rt=z.resolve(this.anchor),dt=rt.nodeAfter;return dt&&ft.isSelectable(dt)?new ft(rt):A.near(rt)}}class Mt extends A{constructor(z){super(z.resolve(0),z.resolve(z.content.size))}replace(z,rt=C.p2.empty){if(rt==C.p2.empty){z.delete(0,z.doc.content.size);let dt=A.atStart(z.doc);dt.eq(z.selection)||z.setSelection(dt)}else super.replace(z,rt)}toJSON(){return{type:"all"}}static fromJSON(z){return new Mt(z)}map(z){return new Mt(z)}eq(z){return z instanceof Mt}getBookmark(){return it}}A.jsonID("all",Mt);const it={map(){return this},resolve:wt=>new Mt(wt)};function mt(wt,z,rt,dt,ct,$=!1){if(z.inlineContent)return G.create(wt,rt);for(let nt=dt-(ct>0?0:1);ct>0?nt<z.childCount:nt>=0;nt+=ct){let et=z.child(nt);if(et.isAtom){if(!$&&ft.isSelectable(et))return ft.create(wt,rt-(ct<0?et.nodeSize:0))}else{let Et=mt(wt,et,rt+ct,ct<0?et.childCount:0,ct,$);if(Et)return Et}rt+=et.nodeSize*ct}return null}function Ot(wt,z,rt){let dt=wt.steps.length-1;if(dt<z)return;let nt,ct=wt.steps[dt];(ct instanceof l.Pu||ct instanceof l.FC)&&(wt.mapping.maps[dt].forEach((et,Et,$t,Kt)=>{null==nt&&(nt=Kt)}),wt.setSelection(A.near(wt.doc.resolve(nt),rt)))}class pt extends l.wx{constructor(z){super(z.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=z.selection,this.storedMarks=z.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(z){if(z.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=z,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(z){return this.storedMarks=z,this.updated|=2,this}ensureMarks(z){return C.vc.sameSet(this.storedMarks||this.selection.$from.marks(),z)||this.setStoredMarks(z),this}addStoredMark(z){return this.ensureMarks(z.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(z){return this.ensureMarks(z.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(z,rt){super.addStep(z,rt),this.updated=-3&this.updated,this.storedMarks=null}setTime(z){return this.time=z,this}replaceSelection(z){return this.selection.replace(this,z),this}replaceSelectionWith(z,rt=!0){let dt=this.selection;return rt&&(z=z.mark(this.storedMarks||(dt.empty?dt.$from.marks():dt.$from.marksAcross(dt.$to)||C.vc.none))),dt.replaceWith(this,z),this}deleteSelection(){return this.selection.replace(this),this}insertText(z,rt,dt){let ct=this.doc.type.schema;if(null==rt)return z?this.replaceSelectionWith(ct.text(z),!0):this.deleteSelection();{if(null==dt&&(dt=rt),dt=null==dt?rt:dt,!z)return this.deleteRange(rt,dt);let $=this.storedMarks;if(!$){let nt=this.doc.resolve(rt);$=dt==rt?nt.marks():nt.marksAcross(this.doc.resolve(dt))}return this.replaceRangeWith(rt,dt,ct.text(z,$)),this.selection.empty||this.setSelection(A.near(this.selection.$to)),this}}setMeta(z,rt){return this.meta["string"==typeof z?z:z.key]=rt,this}getMeta(z){return this.meta["string"==typeof z?z:z.key]}get isGeneric(){for(let z in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function q(wt,z){return z&&wt?wt.bind(z):wt}class F{constructor(z,rt,dt){this.name=z,this.init=q(rt.init,dt),this.apply=q(rt.apply,dt)}}const ut=[new F("doc",{init:wt=>wt.doc||wt.schema.topNodeType.createAndFill(),apply:wt=>wt.doc}),new F("selection",{init:(wt,z)=>wt.selection||A.atStart(z.doc),apply:wt=>wt.selection}),new F("storedMarks",{init:wt=>wt.storedMarks||null,apply:(wt,z,rt,dt)=>dt.selection.$cursor?wt.storedMarks:null}),new F("scrollToSelection",{init:()=>0,apply:(wt,z)=>wt.scrolledIntoView?z+1:z})];class j{constructor(z,rt){this.schema=z,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=ut.slice(),rt&&rt.forEach(dt=>{if(this.pluginsByKey[dt.key])throw new RangeError("Adding different instances of a keyed plugin ("+dt.key+")");this.plugins.push(dt),this.pluginsByKey[dt.key]=dt,dt.spec.state&&this.fields.push(new F(dt.key,dt.spec.state,dt))})}}class At{constructor(z){this.config=z}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(z){return this.applyTransaction(z).state}filterTransaction(z,rt=-1){for(let dt=0;dt<this.config.plugins.length;dt++)if(dt!=rt){let ct=this.config.plugins[dt];if(ct.spec.filterTransaction&&!ct.spec.filterTransaction.call(ct,z,this))return!1}return!0}applyTransaction(z){if(!this.filterTransaction(z))return{state:this,transactions:[]};let rt=[z],dt=this.applyInner(z),ct=null;for(;;){let $=!1;for(let nt=0;nt<this.config.plugins.length;nt++){let et=this.config.plugins[nt];if(et.spec.appendTransaction){let Et=ct?ct[nt].n:0,$t=ct?ct[nt].state:this,Kt=Et<rt.length&&et.spec.appendTransaction.call(et,Et?rt.slice(Et):rt,$t,dt);if(Kt&&dt.filterTransaction(Kt,nt)){if(Kt.setMeta("appendedTransaction",z),!ct){ct=[];for(let ne=0;ne<this.config.plugins.length;ne++)ct.push(ne<nt?{state:dt,n:rt.length}:{state:this,n:0})}rt.push(Kt),dt=dt.applyInner(Kt),$=!0}ct&&(ct[nt]={state:dt,n:rt.length})}}if(!$)return{state:dt,transactions:rt}}}applyInner(z){if(!z.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let rt=new At(this.config),dt=this.config.fields;for(let ct=0;ct<dt.length;ct++){let $=dt[ct];rt[$.name]=$.apply(z,this[$.name],this,rt)}return rt}get tr(){return new pt(this)}static create(z){let rt=new j(z.doc?z.doc.type.schema:z.schema,z.plugins),dt=new At(rt);for(let ct=0;ct<rt.fields.length;ct++)dt[rt.fields[ct].name]=rt.fields[ct].init(z,dt);return dt}reconfigure(z){let rt=new j(this.schema,z.plugins),dt=rt.fields,ct=new At(rt);for(let $=0;$<dt.length;$++){let nt=dt[$].name;ct[nt]=this.hasOwnProperty(nt)?this[nt]:dt[$].init(z,ct)}return ct}toJSON(z){let rt={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(rt.storedMarks=this.storedMarks.map(dt=>dt.toJSON())),z&&"object"==typeof z)for(let dt in z){if("doc"==dt||"selection"==dt)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let ct=z[dt],$=ct.spec.state;$&&$.toJSON&&(rt[dt]=$.toJSON.call(ct,this[ct.key]))}return rt}static fromJSON(z,rt,dt){if(!rt)throw new RangeError("Invalid input for EditorState.fromJSON");if(!z.schema)throw new RangeError("Required config field 'schema' missing");let ct=new j(z.schema,z.plugins),$=new At(ct);return ct.fields.forEach(nt=>{if("doc"==nt.name)$.doc=C.NB.fromJSON(z.schema,rt.doc);else if("selection"==nt.name)$.selection=A.fromJSON($.doc,rt.selection);else if("storedMarks"==nt.name)rt.storedMarks&&($.storedMarks=rt.storedMarks.map(z.schema.markFromJSON));else{if(dt)for(let et in dt){let Et=dt[et],$t=Et.spec.state;if(Et.key==nt.name&&$t&&$t.fromJSON&&Object.prototype.hasOwnProperty.call(rt,et))return void($[nt.name]=$t.fromJSON.call(Et,z,rt[et],$))}$[nt.name]=nt.init(z,$)}}),$}}function Bt(wt,z,rt){for(let dt in wt){let ct=wt[dt];ct instanceof Function?ct=ct.bind(z):"handleDOMEvents"==dt&&(ct=Bt(ct,z,{})),rt[dt]=ct}return rt}class Pt{constructor(z){this.spec=z,this.props={},z.props&&Bt(z.props,this,this.props),this.key=z.key?z.key.key:_t("plugin")}getState(z){return z[this.key]}}const It=Object.create(null);function _t(wt){return wt in It?wt+"$"+ ++It[wt]:(It[wt]=0,wt+"$")}class Rt{constructor(z="key"){this.key=_t(z)}get(z){return z.config.pluginsByKey[this.key]}getState(z){return z[this.key]}}},38480:(Yt,Tt,c)=>{c.d(Tt,{Ax:()=>$t,FC:()=>j,GJ:()=>ce,Mn:()=>ne,Pu:()=>ut,dR:()=>Je,k9:()=>Rt,nd:()=>z,nj:()=>he,vs:()=>it,wx:()=>Ee});var C=c(77346);const y=Math.pow(2,16);function A(gt,b){return gt+b*y}function m(gt){return 65535&gt}class at{constructor(b,O,I){this.pos=b,this.delInfo=O,this.recover=I}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class Mt{constructor(b,O=!1){if(this.ranges=b,this.inverted=O,!b.length&&Mt.empty)return Mt.empty}recover(b){let O=0,I=m(b);if(!this.inverted)for(let w=0;w<I;w++)O+=this.ranges[3*w+2]-this.ranges[3*w+1];return this.ranges[3*I]+O+((gt=b)-(65535&gt))/y;var gt}mapResult(b,O=1){return this._map(b,O,!1)}map(b,O=1){return this._map(b,O,!0)}_map(b,O,I){let w=0,V=this.inverted?2:1,U=this.inverted?1:2;for(let bt=0;bt<this.ranges.length;bt+=3){let Nt=this.ranges[bt]-(this.inverted?w:0);if(Nt>b)break;let H=this.ranges[bt+V],a=this.ranges[bt+U],p=Nt+H;if(b<=p){let P=Nt+w+((H?b==Nt?-1:b==p?1:O:O)<0?0:a);if(I)return P;let k=b==(O<0?Nt:p)?null:A(bt/3,b-Nt),K=b==Nt?2:b==p?1:4;return(O<0?b!=Nt:b!=p)&&(K|=8),new at(P,K,k)}w+=a-H}return I?b+w:new at(b+w,0,null)}touches(b,O){let I=0,w=m(O),V=this.inverted?2:1,U=this.inverted?1:2;for(let bt=0;bt<this.ranges.length;bt+=3){let Nt=this.ranges[bt]-(this.inverted?I:0);if(Nt>b)break;let H=this.ranges[bt+V];if(b<=Nt+H&&bt==3*w)return!0;I+=this.ranges[bt+U]-H}return!1}forEach(b){let O=this.inverted?2:1,I=this.inverted?1:2;for(let w=0,V=0;w<this.ranges.length;w+=3){let U=this.ranges[w],bt=U-(this.inverted?V:0),Nt=U+(this.inverted?0:V),H=this.ranges[w+O],a=this.ranges[w+I];b(bt,bt+H,Nt,Nt+a),V+=a-H}}invert(){return new Mt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(b){return 0==b?Mt.empty:new Mt(b<0?[0,-b,0]:[0,0,b])}}Mt.empty=new Mt([]);class it{constructor(b=[],O,I=0,w=b.length){this.maps=b,this.mirror=O,this.from=I,this.to=w}slice(b=0,O=this.maps.length){return new it(this.maps,this.mirror,b,O)}copy(){return new it(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(b,O){this.to=this.maps.push(b),null!=O&&this.setMirror(this.maps.length-1,O)}appendMapping(b){for(let O=0,I=this.maps.length;O<b.maps.length;O++){let w=b.getMirror(O);this.appendMap(b.maps[O],null!=w&&w<O?I+w:void 0)}}getMirror(b){if(this.mirror)for(let O=0;O<this.mirror.length;O++)if(this.mirror[O]==b)return this.mirror[O+(O%2?-1:1)]}setMirror(b,O){this.mirror||(this.mirror=[]),this.mirror.push(b,O)}appendMappingInverted(b){for(let O=b.maps.length-1,I=this.maps.length+b.maps.length;O>=0;O--){let w=b.getMirror(O);this.appendMap(b.maps[O].invert(),null!=w&&w>O?I-w-1:void 0)}}invert(){let b=new it;return b.appendMappingInverted(this),b}map(b,O=1){if(this.mirror)return this._map(b,O,!0);for(let I=this.from;I<this.to;I++)b=this.maps[I].map(b,O);return b}mapResult(b,O=1){return this._map(b,O,!1)}_map(b,O,I){let w=0;for(let V=this.from;V<this.to;V++){let bt=this.maps[V].mapResult(b,O);if(null!=bt.recover){let Nt=this.getMirror(V);if(null!=Nt&&Nt>V&&Nt<this.to){V=Nt,b=this.maps[Nt].recover(bt.recover);continue}}w|=bt.delInfo,b=bt.pos}return I?b:new at(b,w,null)}}const mt=Object.create(null);class Ot{getMap(){return Mt.empty}merge(b){return null}static fromJSON(b,O){if(!O||!O.stepType)throw new RangeError("Invalid input for Step.fromJSON");let I=mt[O.stepType];if(!I)throw new RangeError(`No step type ${O.stepType} defined`);return I.fromJSON(b,O)}static jsonID(b,O){if(b in mt)throw new RangeError("Duplicate use of step JSON ID "+b);return mt[b]=O,O.prototype.jsonID=b,O}}class kt{constructor(b,O){this.doc=b,this.failed=O}static ok(b){return new kt(b,null)}static fail(b){return new kt(null,b)}static fromReplace(b,O,I,w){try{return kt.ok(b.replace(O,I,w))}catch(V){if(V instanceof C.e4)return kt.fail(V.message);throw V}}}function St(gt,b,O){let I=[];for(let w=0;w<gt.childCount;w++){let V=gt.child(w);V.content.size&&(V=V.copy(St(V.content,b,V))),V.isInline&&(V=b(V,O,w)),I.push(V)}return C.HY.fromArray(I)}class Dt extends Ot{constructor(b,O,I){super(),this.from=b,this.to=O,this.mark=I}apply(b){let O=b.slice(this.from,this.to),I=b.resolve(this.from),w=I.node(I.sharedDepth(this.to)),V=new C.p2(St(O.content,(U,bt)=>U.isAtom&&bt.type.allowsMarkType(this.mark.type)?U.mark(this.mark.addToSet(U.marks)):U,w),O.openStart,O.openEnd);return kt.fromReplace(b,this.from,this.to,V)}invert(){return new pt(this.from,this.to,this.mark)}map(b){let O=b.mapResult(this.from,1),I=b.mapResult(this.to,-1);return O.deleted&&I.deleted||O.pos>=I.pos?null:new Dt(O.pos,I.pos,this.mark)}merge(b){return b instanceof Dt&&b.mark.eq(this.mark)&&this.from<=b.to&&this.to>=b.from?new Dt(Math.min(this.from,b.from),Math.max(this.to,b.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Dt(O.from,O.to,b.markFromJSON(O.mark))}}Ot.jsonID("addMark",Dt);class pt extends Ot{constructor(b,O,I){super(),this.from=b,this.to=O,this.mark=I}apply(b){let O=b.slice(this.from,this.to),I=new C.p2(St(O.content,w=>w.mark(this.mark.removeFromSet(w.marks)),b),O.openStart,O.openEnd);return kt.fromReplace(b,this.from,this.to,I)}invert(){return new Dt(this.from,this.to,this.mark)}map(b){let O=b.mapResult(this.from,1),I=b.mapResult(this.to,-1);return O.deleted&&I.deleted||O.pos>=I.pos?null:new pt(O.pos,I.pos,this.mark)}merge(b){return b instanceof pt&&b.mark.eq(this.mark)&&this.from<=b.to&&this.to>=b.from?new pt(Math.min(this.from,b.from),Math.max(this.to,b.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new pt(O.from,O.to,b.markFromJSON(O.mark))}}Ot.jsonID("removeMark",pt);class q extends Ot{constructor(b,O){super(),this.pos=b,this.mark=O}apply(b){let O=b.nodeAt(this.pos);if(!O)return kt.fail("No node at mark step's position");let I=O.type.create(O.attrs,null,this.mark.addToSet(O.marks));return kt.fromReplace(b,this.pos,this.pos+1,new C.p2(C.HY.from(I),0,O.isLeaf?0:1))}invert(b){let O=b.nodeAt(this.pos);if(O){let I=this.mark.addToSet(O.marks);if(I.length==O.marks.length){for(let w=0;w<O.marks.length;w++)if(!O.marks[w].isInSet(I))return new q(this.pos,O.marks[w]);return new q(this.pos,this.mark)}}return new F(this.pos,this.mark)}map(b){let O=b.mapResult(this.pos,1);return O.deletedAfter?null:new q(O.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(b,O){if("number"!=typeof O.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new q(O.pos,b.markFromJSON(O.mark))}}Ot.jsonID("addNodeMark",q);class F extends Ot{constructor(b,O){super(),this.pos=b,this.mark=O}apply(b){let O=b.nodeAt(this.pos);if(!O)return kt.fail("No node at mark step's position");let I=O.type.create(O.attrs,null,this.mark.removeFromSet(O.marks));return kt.fromReplace(b,this.pos,this.pos+1,new C.p2(C.HY.from(I),0,O.isLeaf?0:1))}invert(b){let O=b.nodeAt(this.pos);return O&&this.mark.isInSet(O.marks)?new q(this.pos,this.mark):this}map(b){let O=b.mapResult(this.pos,1);return O.deletedAfter?null:new F(O.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(b,O){if("number"!=typeof O.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new F(O.pos,b.markFromJSON(O.mark))}}Ot.jsonID("removeNodeMark",F);class ut extends Ot{constructor(b,O,I,w=!1){super(),this.from=b,this.to=O,this.slice=I,this.structure=w}apply(b){return this.structure&&At(b,this.from,this.to)?kt.fail("Structure replace would overwrite content"):kt.fromReplace(b,this.from,this.to,this.slice)}getMap(){return new Mt([this.from,this.to-this.from,this.slice.size])}invert(b){return new ut(this.from,this.from+this.slice.size,b.slice(this.from,this.to))}map(b){let O=b.mapResult(this.from,1),I=b.mapResult(this.to,-1);return O.deletedAcross&&I.deletedAcross?null:new ut(O.pos,Math.max(O.pos,I.pos),this.slice)}merge(b){if(!(b instanceof ut)||b.structure||this.structure)return null;if(this.from+this.slice.size!=b.from||this.slice.openEnd||b.slice.openStart){if(b.to!=this.from||this.slice.openStart||b.slice.openEnd)return null;{let O=this.slice.size+b.slice.size==0?C.p2.empty:new C.p2(b.slice.content.append(this.slice.content),b.slice.openStart,this.slice.openEnd);return new ut(b.from,this.to,O,this.structure)}}{let O=this.slice.size+b.slice.size==0?C.p2.empty:new C.p2(this.slice.content.append(b.slice.content),this.slice.openStart,b.slice.openEnd);return new ut(this.from,this.to+(b.to-b.from),O,this.structure)}}toJSON(){let b={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(b.slice=this.slice.toJSON()),this.structure&&(b.structure=!0),b}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ut(O.from,O.to,C.p2.fromJSON(b,O.slice),!!O.structure)}}Ot.jsonID("replace",ut);class j extends Ot{constructor(b,O,I,w,V,U,bt=!1){super(),this.from=b,this.to=O,this.gapFrom=I,this.gapTo=w,this.slice=V,this.insert=U,this.structure=bt}apply(b){if(this.structure&&(At(b,this.from,this.gapFrom)||At(b,this.gapTo,this.to)))return kt.fail("Structure gap-replace would overwrite content");let O=b.slice(this.gapFrom,this.gapTo);if(O.openStart||O.openEnd)return kt.fail("Gap is not a flat range");let I=this.slice.insertAt(this.insert,O.content);return I?kt.fromReplace(b,this.from,this.to,I):kt.fail("Content does not fit in gap")}getMap(){return new Mt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(b){let O=this.gapTo-this.gapFrom;return new j(this.from,this.from+this.slice.size+O,this.from+this.insert,this.from+this.insert+O,b.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(b){let O=b.mapResult(this.from,1),I=b.mapResult(this.to,-1),w=b.map(this.gapFrom,-1),V=b.map(this.gapTo,1);return O.deletedAcross&&I.deletedAcross||w<O.pos||V>I.pos?null:new j(O.pos,I.pos,w,V,this.slice,this.insert,this.structure)}toJSON(){let b={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(b.slice=this.slice.toJSON()),this.structure&&(b.structure=!0),b}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to||"number"!=typeof O.gapFrom||"number"!=typeof O.gapTo||"number"!=typeof O.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new j(O.from,O.to,O.gapFrom,O.gapTo,C.p2.fromJSON(b,O.slice),O.insert,!!O.structure)}}function At(gt,b,O){let I=gt.resolve(b),w=O-b,V=I.depth;for(;w>0&&V>0&&I.indexAfter(V)==I.node(V).childCount;)V--,w--;if(w>0){let U=I.node(V).maybeChild(I.indexAfter(V));for(;w>0;){if(!U||U.isLeaf)return!0;U=U.firstChild,w--}}return!1}function _t(gt,b,O){return(0==b||gt.canReplace(b,gt.childCount))&&(O==gt.childCount||gt.canReplace(0,O))}function Rt(gt){let O=gt.parent.content.cutByIndex(gt.startIndex,gt.endIndex);for(let I=gt.depth;;--I){let w=gt.$from.node(I),V=gt.$from.index(I),U=gt.$to.indexAfter(I);if(I<gt.depth&&w.canReplace(V,U,O))return I;if(0==I||w.type.spec.isolating||!_t(w,V,U))break}return null}function z(gt,b,O=null,I=gt){let w=function(gt,b){let{parent:O,startIndex:I,endIndex:w}=gt,V=O.contentMatchAt(I).findWrapping(b);return V&&O.canReplaceWith(I,w,V.length?V[0]:b)?V:null}(gt,b),V=w&&function(gt,b){let{parent:O,startIndex:I,endIndex:w}=gt,V=O.child(I),U=b.contentMatch.findWrapping(V.type);if(!U)return null;let Nt=(U.length?U[U.length-1]:b).contentMatch;for(let H=I;Nt&&H<w;H++)Nt=Nt.matchType(O.child(H).type);return Nt&&Nt.validEnd?U:null}(I,b);return V?w.map(rt).concat({type:b,attrs:O}).concat(V.map(rt)):null}function rt(gt){return{type:gt,attrs:null}}function $t(gt,b,O=1,I){let w=gt.resolve(b),V=w.depth-O,U=I&&I[I.length-1]||w.parent;if(V<0||w.parent.type.spec.isolating||!w.parent.canReplace(w.index(),w.parent.childCount)||!U.type.validContent(w.parent.content.cutByIndex(w.index(),w.parent.childCount)))return!1;for(let H=w.depth-1,a=O-2;H>V;H--,a--){let p=w.node(H),E=w.index(H);if(p.type.spec.isolating)return!1;let P=p.content.cutByIndex(E,p.childCount),k=I&&I[a]||p;if(k!=p&&(P=P.replaceChild(0,k.type.create(k.attrs))),!p.canReplace(E+1,p.childCount)||!k.type.validContent(P))return!1}let bt=w.indexAfter(V),Nt=I&&I[0];return w.node(V).canReplaceWith(bt,bt,Nt?Nt.type:w.node(V+1).type)}function ne(gt,b){let O=gt.resolve(b),I=O.index();return zt(O.nodeBefore,O.nodeAfter)&&O.parent.canReplace(I,I+1)}function zt(gt,b){return!(!gt||!b||gt.isLeaf||!gt.canAppend(b))}function ce(gt,b,O=-1){let I=gt.resolve(b);for(let w=I.depth;;w--){let V,U,bt=I.index(w);if(w==I.depth?(V=I.nodeBefore,U=I.nodeAfter):O>0?(V=I.node(w+1),bt++,U=I.node(w).maybeChild(bt)):(V=I.node(w).maybeChild(bt-1),U=I.node(w+1)),V&&!V.isTextblock&&zt(V,U)&&I.node(w).canReplace(bt,bt+1))return b;if(0==w)break;b=O<0?I.before(w):I.after(w)}}function he(gt,b,O){let I=gt.resolve(b);if(!O.content.size)return b;let w=O.content;for(let V=0;V<O.openStart;V++)w=w.firstChild.content;for(let V=1;V<=(0==O.openStart&&O.size?2:1);V++)for(let U=I.depth;U>=0;U--){let bt=U==I.depth?0:I.pos<=(I.start(U+1)+I.end(U+1))/2?-1:1,Nt=I.index(U)+(bt>0?1:0),H=I.node(U),a=!1;if(1==V)a=H.canReplace(Nt,Nt,w);else{let p=H.contentMatchAt(Nt).findWrapping(w.firstChild.type);a=p&&H.canReplaceWith(Nt,Nt,p[0])}if(a)return 0==bt?I.pos:bt<0?I.before(U+1):I.after(U+1)}return null}function Je(gt,b,O=b,I=C.p2.empty){if(b==O&&!I.size)return null;let w=gt.resolve(b),V=gt.resolve(O);return xe(w,V,I)?new ut(b,O,I):new Ne(w,V,I).fit()}function xe(gt,b,O){return!O.openStart&&!O.openEnd&&gt.start()==b.start()&&gt.parent.canReplace(gt.index(),b.index(),O.content)}Ot.jsonID("replaceAround",j);class Ne{constructor(b,O,I){this.$from=b,this.$to=O,this.unplaced=I,this.frontier=[],this.placed=C.HY.empty;for(let w=0;w<=b.depth;w++){let V=b.node(w);this.frontier.push({type:V.type,match:V.contentMatchAt(b.indexAfter(w))})}for(let w=b.depth;w>0;w--)this.placed=C.HY.from(b.node(w).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let H=this.findFittable();H?this.placeNodes(H):this.openMore()||this.dropNode()}let b=this.mustMoveInline(),O=this.placed.size-this.depth-this.$from.depth,I=this.$from,w=this.close(b<0?this.$to:I.doc.resolve(b));if(!w)return null;let V=this.placed,U=I.depth,bt=w.depth;for(;U&&bt&&1==V.childCount;)V=V.firstChild.content,U--,bt--;let Nt=new C.p2(V,U,bt);return b>-1?new j(I.pos,b,this.$to.pos,this.$to.end(),Nt,O):Nt.size||I.pos!=this.$to.pos?new ut(I.pos,w.pos,Nt):null}findFittable(){let b=this.unplaced.openStart;for(let O=this.unplaced.content,I=0,w=this.unplaced.openEnd;I<b;I++){let V=O.firstChild;if(O.childCount>1&&(w=0),V.type.spec.isolating&&w<=I){b=I;break}O=V.content}for(let O=1;O<=2;O++)for(let I=1==O?b:this.unplaced.openStart;I>=0;I--){let w,V=null;I?(V=Ce(this.unplaced.content,I-1).firstChild,w=V.content):w=this.unplaced.content;let U=w.firstChild;for(let bt=this.depth;bt>=0;bt--){let a,{type:Nt,match:H}=this.frontier[bt],p=null;if(1==O&&(U?H.matchType(U.type)||(p=H.fillBefore(C.HY.from(U),!1)):V&&Nt.compatibleContent(V.type)))return{sliceDepth:I,frontierDepth:bt,parent:V,inject:p};if(2==O&&U&&(a=H.findWrapping(U.type)))return{sliceDepth:I,frontierDepth:bt,parent:V,wrap:a};if(V&&H.matchType(V.type))break}}}openMore(){let{content:b,openStart:O,openEnd:I}=this.unplaced,w=Ce(b,O);return!(!w.childCount||w.firstChild.isLeaf||(this.unplaced=new C.p2(b,O+1,Math.max(I,w.size+O>=b.size-I?O+1:0)),0))}dropNode(){let{content:b,openStart:O,openEnd:I}=this.unplaced,w=Ce(b,O);if(w.childCount<=1&&O>0){let V=b.size-O<=O+w.size;this.unplaced=new C.p2(ge(b,O-1,1),O-1,V?O-1:I)}else this.unplaced=new C.p2(ge(b,O,1),O,I)}placeNodes({sliceDepth:b,frontierDepth:O,parent:I,inject:w,wrap:V}){for(;this.depth>O;)this.closeFrontierNode();if(V)for(let K=0;K<V.length;K++)this.openFrontierNode(V[K]);let U=this.unplaced,bt=I?I.content:U.content,Nt=U.openStart-b,H=0,a=[],{match:p,type:E}=this.frontier[O];if(w){for(let K=0;K<w.childCount;K++)a.push(w.child(K));p=p.matchFragment(w)}let P=bt.size+b-(U.content.size-U.openEnd);for(;H<bt.childCount;){let K=bt.child(H),lt=p.matchType(K.type);if(!lt)break;H++,(H>1||0==Nt||K.content.size)&&(p=lt,a.push(Pe(K.mark(E.allowedMarks(K.marks)),1==H?Nt:0,H==bt.childCount?P:-1)))}let k=H==bt.childCount;k||(P=-1),this.placed=Ae(this.placed,O,C.HY.from(a)),this.frontier[O].match=p,k&&P<0&&I&&I.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let K=0,lt=bt;K<P;K++){let Ht=lt.lastChild;this.frontier.push({type:Ht.type,match:Ht.contentMatchAt(Ht.childCount)}),lt=Ht.content}this.unplaced=k?0==b?C.p2.empty:new C.p2(ge(U.content,b-1,1),b-1,P<0?U.openEnd:b-1):new C.p2(ge(U.content,b,H),U.openStart,U.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let O,b=this.frontier[this.depth];if(!b.type.isTextblock||!Be(this.$to,this.$to.depth,b.type,b.match,!1)||this.$to.depth==this.depth&&(O=this.findCloseLevel(this.$to))&&O.depth==this.depth)return-1;let{depth:I}=this.$to,w=this.$to.after(I);for(;I>1&&w==this.$to.end(--I);)++w;return w}findCloseLevel(b){t:for(let O=Math.min(this.depth,b.depth);O>=0;O--){let{match:I,type:w}=this.frontier[O],V=O<b.depth&&b.end(O+1)==b.pos+(b.depth-(O+1)),U=Be(b,O,w,I,V);if(U){for(let bt=O-1;bt>=0;bt--){let{match:Nt,type:H}=this.frontier[bt],a=Be(b,bt,H,Nt,!0);if(!a||a.childCount)continue t}return{depth:O,fit:U,move:V?b.doc.resolve(b.after(O+1)):b}}}}close(b){let O=this.findCloseLevel(b);if(!O)return null;for(;this.depth>O.depth;)this.closeFrontierNode();O.fit.childCount&&(this.placed=Ae(this.placed,O.depth,O.fit)),b=O.move;for(let I=O.depth+1;I<=b.depth;I++){let w=b.node(I),V=w.type.contentMatch.fillBefore(w.content,!0,b.index(I));this.openFrontierNode(w.type,w.attrs,V)}return b}openFrontierNode(b,O=null,I){let w=this.frontier[this.depth];w.match=w.match.matchType(b),this.placed=Ae(this.placed,this.depth,C.HY.from(b.create(O,I))),this.frontier.push({type:b,match:b.contentMatch})}closeFrontierNode(){let O=this.frontier.pop().match.fillBefore(C.HY.empty,!0);O.childCount&&(this.placed=Ae(this.placed,this.frontier.length,O))}}function ge(gt,b,O){return 0==b?gt.cutByIndex(O,gt.childCount):gt.replaceChild(0,gt.firstChild.copy(ge(gt.firstChild.content,b-1,O)))}function Ae(gt,b,O){return 0==b?gt.append(O):gt.replaceChild(gt.childCount-1,gt.lastChild.copy(Ae(gt.lastChild.content,b-1,O)))}function Ce(gt,b){for(let O=0;O<b;O++)gt=gt.firstChild.content;return gt}function Pe(gt,b,O){if(b<=0)return gt;let I=gt.content;return b>1&&(I=I.replaceChild(0,Pe(I.firstChild,b-1,1==I.childCount?O-1:0))),b>0&&(I=gt.type.contentMatch.fillBefore(I).append(I),O<=0&&(I=I.append(gt.type.contentMatch.matchFragment(I).fillBefore(C.HY.empty,!0)))),gt.copy(I)}function Be(gt,b,O,I,w){let V=gt.node(b),U=w?gt.indexAfter(b):gt.index(b);if(U==V.childCount&&!O.compatibleContent(V.type))return null;let bt=I.fillBefore(V.content,!0,U);return bt&&!function(gt,b,O){for(let I=O;I<b.childCount;I++)if(!gt.allowsMarks(b.child(I).marks))return!0;return!1}(O,V.content,U)?bt:null}function ke(gt){return gt.spec.defining||gt.spec.definingForContent}function He(gt,b,O,I,w){if(b<O){let V=gt.firstChild;gt=gt.replaceChild(0,V.copy(He(V.content,b+1,O,I,V)))}if(b>I){let V=w.contentMatchAt(0),U=V.fillBefore(gt).append(gt);gt=U.append(V.matchFragment(U).fillBefore(C.HY.empty,!0))}return gt}function ze(gt,b){let O=[];for(let w=Math.min(gt.depth,b.depth);w>=0;w--){let V=gt.start(w);if(V<gt.pos-(gt.depth-w)||b.end(w)>b.pos+(b.depth-w)||gt.node(w).type.spec.isolating||b.node(w).type.spec.isolating)break;(V==b.start(w)||w==gt.depth&&w==b.depth&&gt.parent.inlineContent&&b.parent.inlineContent&&w&&b.start(w-1)==V-1)&&O.push(w)}return O}class _e extends Ot{constructor(b,O,I){super(),this.pos=b,this.attr=O,this.value=I}apply(b){let O=b.nodeAt(this.pos);if(!O)return kt.fail("No node at attribute step's position");let I=Object.create(null);for(let V in O.attrs)I[V]=O.attrs[V];I[this.attr]=this.value;let w=O.type.create(I,null,O.marks);return kt.fromReplace(b,this.pos,this.pos+1,new C.p2(C.HY.from(w),0,O.isLeaf?0:1))}getMap(){return Mt.empty}invert(b){return new _e(this.pos,this.attr,b.nodeAt(this.pos).attrs[this.attr])}map(b){let O=b.mapResult(this.pos,1);return O.deletedAfter?null:new _e(O.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(b,O){if("number"!=typeof O.pos||"string"!=typeof O.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new _e(O.pos,O.attr,O.value)}}Ot.jsonID("attr",_e);let fe=class extends Error{};fe=function gt(b){let O=Error.call(this,b);return O.__proto__=gt.prototype,O},(fe.prototype=Object.create(Error.prototype)).constructor=fe,fe.prototype.name="TransformError";class Ee{constructor(b){this.doc=b,this.steps=[],this.docs=[],this.mapping=new it}get before(){return this.docs.length?this.docs[0]:this.doc}step(b){let O=this.maybeStep(b);if(O.failed)throw new fe(O.failed);return this}maybeStep(b){let O=b.apply(this.doc);return O.failed||this.addStep(b,O.doc),O}get docChanged(){return this.steps.length>0}addStep(b,O){this.docs.push(this.doc),this.steps.push(b),this.mapping.appendMap(b.getMap()),this.doc=O}replace(b,O=b,I=C.p2.empty){let w=Je(this.doc,b,O,I);return w&&this.step(w),this}replaceWith(b,O,I){return this.replace(b,O,new C.p2(C.HY.from(I),0,0))}delete(b,O){return this.replace(b,O,C.p2.empty)}insert(b,O){return this.replaceWith(b,b,O)}replaceRange(b,O,I){return function(gt,b,O,I){if(!I.size)return gt.deleteRange(b,O);let w=gt.doc.resolve(b),V=gt.doc.resolve(O);if(xe(w,V,I))return gt.step(new ut(b,O,I));let U=ze(w,gt.doc.resolve(O));0==U[U.length-1]&&U.pop();let bt=-(w.depth+1);U.unshift(bt);for(let E=w.depth,P=w.pos-1;E>0;E--,P--){let k=w.node(E).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;U.indexOf(E)>-1?bt=E:w.before(E)==P&&U.splice(1,0,-E)}let Nt=U.indexOf(bt),H=[],a=I.openStart;for(let E=I.content,P=0;;P++){let k=E.firstChild;if(H.push(k),P==I.openStart)break;E=k.content}for(let E=a-1;E>=0;E--){let P=H[E].type,k=ke(P);if(k&&w.node(Nt).type!=P)a=E;else if(k||!P.isTextblock)break}for(let E=I.openStart;E>=0;E--){let P=(E+a+1)%(I.openStart+1),k=H[P];if(k)for(let K=0;K<U.length;K++){let lt=U[(K+Nt)%U.length],Ht=!0;lt<0&&(Ht=!1,lt=-lt);let te=w.node(lt-1),ee=w.index(lt-1);if(te.canReplaceWith(ee,ee,k.type,k.marks))return gt.replace(w.before(lt),Ht?V.after(lt):O,new C.p2(He(I.content,0,I.openStart,P),P,I.openEnd))}}let p=gt.steps.length;for(let E=U.length-1;E>=0&&(gt.replace(b,O,I),!(gt.steps.length>p));E--){let P=U[E];P<0||(b=w.before(P),O=V.after(P))}}(this,b,O,I),this}replaceRangeWith(b,O,I){return function(gt,b,O,I){if(!I.isInline&&b==O&&gt.doc.resolve(b).parent.content.size){let w=function(gt,b,O){let I=gt.resolve(b);if(I.parent.canReplaceWith(I.index(),I.index(),O))return b;if(0==I.parentOffset)for(let w=I.depth-1;w>=0;w--){let V=I.index(w);if(I.node(w).canReplaceWith(V,V,O))return I.before(w+1);if(V>0)return null}if(I.parentOffset==I.parent.content.size)for(let w=I.depth-1;w>=0;w--){let V=I.indexAfter(w);if(I.node(w).canReplaceWith(V,V,O))return I.after(w+1);if(V<I.node(w).childCount)return null}return null}(gt.doc,b,I.type);null!=w&&(b=O=w)}gt.replaceRange(b,O,new C.p2(C.HY.from(I),0,0))}(this,b,O,I),this}deleteRange(b,O){return function(gt,b,O){let I=gt.doc.resolve(b),w=gt.doc.resolve(O),V=ze(I,w);for(let U=0;U<V.length;U++){let bt=V[U],Nt=U==V.length-1;if(Nt&&0==bt||I.node(bt).type.contentMatch.validEnd)return gt.delete(I.start(bt),w.end(bt));if(bt>0&&(Nt||I.node(bt-1).canReplace(I.index(bt-1),w.indexAfter(bt-1))))return gt.delete(I.before(bt),w.after(bt))}for(let U=1;U<=I.depth&&U<=w.depth;U++)if(b-I.start(U)==I.depth-U&&O>I.end(U)&&w.end(U)-O!=w.depth-U)return gt.delete(I.before(U),O);gt.delete(b,O)}(this,b,O),this}lift(b,O){return function(gt,b,O){let{$from:I,$to:w,depth:V}=b,U=I.before(V+1),bt=w.after(V+1),Nt=U,H=bt,a=C.HY.empty,p=0;for(let k=V,K=!1;k>O;k--)K||I.index(k)>0?(K=!0,a=C.HY.from(I.node(k).copy(a)),p++):Nt--;let E=C.HY.empty,P=0;for(let k=V,K=!1;k>O;k--)K||w.after(k+1)<w.end(k)?(K=!0,E=C.HY.from(w.node(k).copy(E)),P++):H++;gt.step(new j(Nt,H,U,bt,new C.p2(a.append(E),p,P),a.size-p,!0))}(this,b,O),this}join(b,O=1){return function(gt,b,O){let I=new ut(b-O,b+O,C.p2.empty,!0);gt.step(I)}(this,b,O),this}wrap(b,O){return function(gt,b,O){let I=C.HY.empty;for(let U=O.length-1;U>=0;U--){if(I.size){let bt=O[U].type.contentMatch.matchFragment(I);if(!bt||!bt.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}I=C.HY.from(O[U].type.create(O[U].attrs,I))}let w=b.start,V=b.end;gt.step(new j(w,V,w,V,new C.p2(I,0,0),O.length,!0))}(this,b,O),this}setBlockType(b,O=b,I,w=null){return function(gt,b,O,I,w){if(!I.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let V=gt.steps.length;gt.doc.nodesBetween(b,O,(U,bt)=>{if(U.isTextblock&&!U.hasMarkup(I,w)&&function(gt,b,O){let I=gt.resolve(b),w=I.index();return I.parent.canReplaceWith(w,w+1,O)}(gt.doc,gt.mapping.slice(V).map(bt),I)){gt.clearIncompatible(gt.mapping.slice(V).map(bt,1),I);let Nt=gt.mapping.slice(V),H=Nt.map(bt,1),a=Nt.map(bt+U.nodeSize,1);return gt.step(new j(H,a,H+1,a-1,new C.p2(C.HY.from(I.create(w,null,U.marks)),0,0),1,!0)),!1}})}(this,b,O,I,w),this}setNodeMarkup(b,O,I=null,w){return function(gt,b,O,I,w){let V=gt.doc.nodeAt(b);if(!V)throw new RangeError("No node at given position");O||(O=V.type);let U=O.create(I,null,w||V.marks);if(V.isLeaf)return gt.replaceWith(b,b+V.nodeSize,U);if(!O.validContent(V.content))throw new RangeError("Invalid content for node type "+O.name);gt.step(new j(b,b+V.nodeSize,b+1,b+V.nodeSize-1,new C.p2(C.HY.from(U),0,0),1,!0))}(this,b,O,I,w),this}setNodeAttribute(b,O,I){return this.step(new _e(b,O,I)),this}addNodeMark(b,O){return this.step(new q(b,O)),this}removeNodeMark(b,O){if(!(O instanceof C.vc)){let I=this.doc.nodeAt(b);if(!I)throw new RangeError("No node at position "+b);if(!(O=O.isInSet(I.marks)))return this}return this.step(new F(b,O)),this}split(b,O=1,I){return function(gt,b,O=1,I){let w=gt.doc.resolve(b),V=C.HY.empty,U=C.HY.empty;for(let bt=w.depth,Nt=w.depth-O,H=O-1;bt>Nt;bt--,H--){V=C.HY.from(w.node(bt).copy(V));let a=I&&I[H];U=C.HY.from(a?a.type.create(a.attrs,U):w.node(bt).copy(U))}gt.step(new ut(b,b,new C.p2(V.append(U),O,O),!0))}(this,b,O,I),this}addMark(b,O,I){return function(gt,b,O,I){let U,bt,w=[],V=[];gt.doc.nodesBetween(b,O,(Nt,H,a)=>{if(!Nt.isInline)return;let p=Nt.marks;if(!I.isInSet(p)&&a.type.allowsMarkType(I.type)){let E=Math.max(H,b),P=Math.min(H+Nt.nodeSize,O),k=I.addToSet(p);for(let K=0;K<p.length;K++)p[K].isInSet(k)||(U&&U.to==E&&U.mark.eq(p[K])?U.to=P:w.push(U=new pt(E,P,p[K])));bt&&bt.to==E?bt.to=P:V.push(bt=new Dt(E,P,I))}}),w.forEach(Nt=>gt.step(Nt)),V.forEach(Nt=>gt.step(Nt))}(this,b,O,I),this}removeMark(b,O,I){return function(gt,b,O,I){let w=[],V=0;gt.doc.nodesBetween(b,O,(U,bt)=>{if(!U.isInline)return;V++;let Nt=null;if(I instanceof C.ZU){let a,H=U.marks;for(;a=I.isInSet(H);)(Nt||(Nt=[])).push(a),H=a.removeFromSet(H)}else I?I.isInSet(U.marks)&&(Nt=[I]):Nt=U.marks;if(Nt&&Nt.length){let H=Math.min(bt+U.nodeSize,O);for(let a=0;a<Nt.length;a++){let E,p=Nt[a];for(let P=0;P<w.length;P++){let k=w[P];k.step==V-1&&p.eq(w[P].style)&&(E=k)}E?(E.to=H,E.step=V):w.push({style:p,from:Math.max(bt,b),to:H,step:V})}}}),w.forEach(U=>gt.step(new pt(U.from,U.to,U.style)))}(this,b,O,I),this}clearIncompatible(b,O,I){return function(gt,b,O,I=O.contentMatch){let w=gt.doc.nodeAt(b),V=[],U=b+1;for(let bt=0;bt<w.childCount;bt++){let Nt=w.child(bt),H=U+Nt.nodeSize,a=I.matchType(Nt.type);if(a){I=a;for(let p=0;p<Nt.marks.length;p++)O.allowsMarkType(Nt.marks[p].type)||gt.step(new pt(U,H,Nt.marks[p]))}else V.push(new ut(U,H,C.p2.empty));U=H}if(!I.validEnd){let bt=I.fillBefore(C.HY.empty,!0);gt.replace(U,U,new C.p2(bt,0,0))}for(let bt=V.length-1;bt>=0;bt--)gt.step(V[bt])}(this,b,O,I),this}}},43594:(Yt,Tt,c)=>{c.d(Tt,{EH:()=>Ze,p:()=>on,tk:()=>Ro});var C=c(62463),l=c(77346),y=c(38480);const A=function(r){for(var o=0;;o++)if(!(r=r.previousSibling))return o},m=function(r){let o=r.assignedSlot||r.parentNode;return o&&11==o.nodeType?o.host:o};let ot=null;const N=function(r,o,s){let d=ot||(ot=document.createRange());return d.setEnd(r,null==s?r.nodeValue.length:s),d.setStart(r,o||0),d},G=function(r,o,s,d){return s&&(ft(r,o,s,d,-1)||ft(r,o,s,d,1))},tt=/^(img|br|input|textarea|hr)$/i;function ft(r,o,s,d,e){for(;;){if(r==s&&o==d)return!0;if(o==(e<0?0:at(r))){let t=r.parentNode;if(!t||1!=t.nodeType||it(r)||tt.test(r.nodeName)||"false"==r.contentEditable)return!1;o=A(r)+(e<0?0:1),r=t}else{if(1!=r.nodeType)return!1;if("false"==(r=r.childNodes[o+(e<0?-1:0)]).contentEditable)return!1;o=e<0?at(r):0}}}function at(r){return 3==r.nodeType?r.nodeValue.length:r.childNodes.length}function it(r){let o;for(let s=r;s&&!(o=s.pmViewDesc);s=s.parentNode);return o&&o.node&&o.node.isBlock&&(o.dom==r||o.contentDOM==r)}const mt=function(r){return r.focusNode&&G(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)};function Ot(r,o){let s=document.createEvent("Event");return s.initEvent("keydown",!0,!0),s.keyCode=r,s.key=s.code=o,s}const St="undefined"!=typeof navigator?navigator:null,Dt="undefined"!=typeof document?document:null,pt=St&&St.userAgent||"",q=/Edge\/(\d+)/.exec(pt),F=/MSIE \d/.exec(pt),ut=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(pt),j=!!(F||ut||q),At=F?document.documentMode:ut?+ut[1]:q?+q[1]:0,Bt=!j&&/gecko\/(\d+)/i.test(pt);Bt&&/Firefox\/(\d+)/.exec(pt);const Pt=!j&&/Chrome\/(\d+)/.exec(pt),It=!!Pt,_t=Pt?+Pt[1]:0,Rt=!j&&!!St&&/Apple Computer/.test(St.vendor),wt=Rt&&(/Mobile\/\w+/.test(pt)||!!St&&St.maxTouchPoints>2),z=wt||!!St&&/Mac/.test(St.platform),rt=/Android \d/.test(pt),dt=!!Dt&&"webkitFontSmoothing"in Dt.documentElement.style,ct=dt?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function $(r){return{left:0,right:r.documentElement.clientWidth,top:0,bottom:r.documentElement.clientHeight}}function nt(r,o){return"number"==typeof r?r:r[o]}function et(r){let o=r.getBoundingClientRect();return{left:o.left,right:o.left+r.clientWidth*(o.width/r.offsetWidth||1),top:o.top,bottom:o.top+r.clientHeight*(o.height/r.offsetHeight||1)}}function Et(r,o,s){let d=r.someProp("scrollThreshold")||0,e=r.someProp("scrollMargin")||5,t=r.dom.ownerDocument;for(let n=s||r.dom;n;n=m(n)){if(1!=n.nodeType)continue;let i=n,u=i==t.body,h=u?$(t):et(i),T=0,D=0;if(o.top<h.top+nt(d,"top")?D=-(h.top-o.top+nt(e,"top")):o.bottom>h.bottom-nt(d,"bottom")&&(D=o.bottom-h.bottom+nt(e,"bottom")),o.left<h.left+nt(d,"left")?T=-(h.left-o.left+nt(e,"left")):o.right>h.right-nt(d,"right")&&(T=o.right-h.right+nt(e,"right")),T||D)if(u)t.defaultView.scrollBy(T,D);else{let L=i.scrollLeft,B=i.scrollTop;D&&(i.scrollTop+=D),T&&(i.scrollLeft+=T);let Y=i.scrollLeft-L,X=i.scrollTop-B;o={left:o.left-Y,top:o.top-X,right:o.right-Y,bottom:o.bottom-X}}if(u)break}}function Kt(r){let o=[],s=r.ownerDocument;for(let d=r;d&&(o.push({dom:d,top:d.scrollTop,left:d.scrollLeft}),r!=s);d=m(d));return o}function zt(r,o){for(let s=0;s<r.length;s++){let{dom:d,top:e,left:t}=r[s];d.scrollTop!=e+o&&(d.scrollTop=e+o),d.scrollLeft!=t&&(d.scrollLeft=t)}}let ce=null;function Oe(r,o){let s,e,d=2e8,t=0,n=o.top,i=o.top;for(let u=r.firstChild,h=0;u;u=u.nextSibling,h++){let T;if(1==u.nodeType)T=u.getClientRects();else{if(3!=u.nodeType)continue;T=N(u).getClientRects()}for(let D=0;D<T.length;D++){let L=T[D];if(L.top<=n&&L.bottom>=i){n=Math.max(L.bottom,n),i=Math.min(L.top,i);let B=L.left>o.left?L.left-o.left:L.right<o.left?o.left-L.right:0;if(B<d){s=u,d=B,e=B&&3==s.nodeType?{left:L.right<o.left?L.right:L.left,top:o.top}:o,1==u.nodeType&&B&&(t=h+(o.left>=(L.left+L.right)/2?1:0));continue}}!s&&(o.left>=L.right&&o.top>=L.top||o.left>=L.left&&o.top>=L.bottom)&&(t=h+1)}}return s&&3==s.nodeType?function(r,o){let s=r.nodeValue.length,d=document.createRange();for(let e=0;e<s;e++){d.setEnd(r,e+1),d.setStart(r,e);let t=Pe(d,1);if(t.top!=t.bottom&&Je(o,t))return{node:r,offset:e+(o.left>=(t.left+t.right)/2?1:0)}}return{node:r,offset:0}}(s,e):!s||d&&1==s.nodeType?{node:r,offset:t}:Oe(s,e)}function Je(r,o){return r.left>=o.left-1&&r.left<=o.right+1&&r.top>=o.top-1&&r.top<=o.bottom+1}function Ae(r,o,s){let d=r.childNodes.length;if(d&&s.top<s.bottom)for(let e=Math.max(0,Math.min(d-1,Math.floor(d*(o.top-s.top)/(s.bottom-s.top))-2)),t=e;;){let n=r.childNodes[t];if(1==n.nodeType){let i=n.getClientRects();for(let u=0;u<i.length;u++){let h=i[u];if(Je(o,h))return Ae(n,o,h)}}if((t=(t+1)%d)==e)break}return r}function Ce(r,o){let d,s=r.dom.ownerDocument,e=0;if(s.caretPositionFromPoint)try{let u=s.caretPositionFromPoint(o.left,o.top);u&&({offsetNode:d,offset:e}=u)}catch(u){}if(!d&&s.caretRangeFromPoint){let u=s.caretRangeFromPoint(o.left,o.top);u&&({startContainer:d,startOffset:e}=u)}let n,t=(r.root.elementFromPoint?r.root:s).elementFromPoint(o.left,o.top);if(!t||!r.dom.contains(1!=t.nodeType?t.parentNode:t)){let u=r.dom.getBoundingClientRect();if(!Je(o,u)||(t=Ae(r.dom,o,u),!t))return null}if(Rt)for(let u=t;d&&u;u=m(u))u.draggable&&(d=void 0);if(t=function(r,o){let s=r.parentNode;return s&&/^li$/i.test(s.nodeName)&&o.left<r.getBoundingClientRect().left?s:r}(t,o),d){if(Bt&&1==d.nodeType&&(e=Math.min(e,d.childNodes.length),e<d.childNodes.length)){let h,u=d.childNodes[e];"IMG"==u.nodeName&&(h=u.getBoundingClientRect()).right<=o.left&&h.bottom>o.top&&e++}d==r.dom&&e==d.childNodes.length-1&&1==d.lastChild.nodeType&&o.top>d.lastChild.getBoundingClientRect().bottom?n=r.state.doc.content.size:(0==e||1!=d.nodeType||"BR"!=d.childNodes[e-1].nodeName)&&(n=function(r,o,s,d){let e=-1;for(let t=o,n=!1;t!=r.dom;){let i=r.docView.nearestDesc(t,!0);if(!i)return null;if(1==i.dom.nodeType&&(i.node.isBlock&&i.parent&&!n||!i.contentDOM)){let u=i.dom.getBoundingClientRect();if(i.node.isBlock&&i.parent&&!n&&(n=!0,u.left>d.left||u.top>d.top?e=i.posBefore:(u.right<d.left||u.bottom<d.top)&&(e=i.posAfter)),!i.contentDOM&&e<0)return(i.node.isBlock?d.top<(u.top+u.bottom)/2:d.left<(u.left+u.right)/2)?i.posBefore:i.posAfter}t=i.dom.parentNode}return e>-1?e:r.docView.posFromDOM(o,s,-1)}(r,d,e,o))}null==n&&(n=function(r,o,s){let{node:d,offset:e}=Oe(o,s),t=-1;if(1==d.nodeType&&!d.firstChild){let n=d.getBoundingClientRect();t=n.left!=n.right&&s.left>(n.left+n.right)/2?1:-1}return r.docView.posFromDOM(d,e,t)}(r,t,o));let i=r.docView.nearestDesc(t,!0);return{pos:n,inside:i?i.posAtStart-i.border:-1}}function Pe(r,o){let s=r.getClientRects();return s.length?s[o<0?0:s.length-1]:r.getBoundingClientRect()}const Be=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Me(r,o,s){let{node:d,offset:e,atom:t}=r.docView.domFromPos(o,s<0?-1:1),n=dt||Bt;if(3==d.nodeType){if(!n||!Be.test(d.nodeValue)&&(s<0?e:e!=d.nodeValue.length)){let u=e,h=e,T=s<0?1:-1;return s<0&&!e?(h++,T=-1):s>=0&&e==d.nodeValue.length?(u--,T=1):s<0?u--:h++,ke(Pe(N(d,u,h),1),T<0)}{let u=Pe(N(d,e,e),s);if(Bt&&e&&/\s/.test(d.nodeValue[e-1])&&e<d.nodeValue.length){let h=Pe(N(d,e-1,e-1),-1);if(h.top==u.top){let T=Pe(N(d,e,e+1),-1);if(T.top!=u.top)return ke(T,T.left<h.left)}}return u}}if(!r.state.doc.resolve(o-(t||0)).parent.inlineContent){if(null==t&&e&&(s<0||e==at(d))){let u=d.childNodes[e-1];if(1==u.nodeType)return Ye(u.getBoundingClientRect(),!1)}if(null==t&&e<at(d)){let u=d.childNodes[e];if(1==u.nodeType)return Ye(u.getBoundingClientRect(),!0)}return Ye(d.getBoundingClientRect(),s>=0)}if(null==t&&e&&(s<0||e==at(d))){let u=d.childNodes[e-1],h=3==u.nodeType?N(u,at(u)-(n?0:1)):1!=u.nodeType||"BR"==u.nodeName&&u.nextSibling?null:u;if(h)return ke(Pe(h,1),!1)}if(null==t&&e<at(d)){let u=d.childNodes[e];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let h=u?3==u.nodeType?N(u,0,n?0:1):1==u.nodeType?u:null:null;if(h)return ke(Pe(h,-1),!0)}return ke(Pe(3==d.nodeType?N(d):d,-s),s>=0)}function ke(r,o){if(0==r.width)return r;let s=o?r.left:r.right;return{top:r.top,bottom:r.bottom,left:s,right:s}}function Ye(r,o){if(0==r.height)return r;let s=o?r.top:r.bottom;return{top:s,bottom:s,left:r.left,right:r.right}}function He(r,o,s){let d=r.state,e=r.root.activeElement;d!=o&&r.updateState(o),e!=r.dom&&r.focus();try{return s()}finally{d!=o&&r.updateState(d),e!=r.dom&&e&&e.focus()}}const Le=/[\u0590-\u08ac]/;let _e=null,fe=null,Ee=!1;class V{constructor(o,s,d,e){this.parent=o,this.children=s,this.dom=d,this.contentDOM=e,this.dirty=0,d.pmViewDesc=this}matchesWidget(o){return!1}matchesMark(o){return!1}matchesNode(o,s,d){return!1}matchesHack(o){return!1}parseRule(){return null}stopEvent(o){return!1}get size(){let o=0;for(let s=0;s<this.children.length;s++)o+=this.children[s].size;return o}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let o=0;o<this.children.length;o++)this.children[o].destroy()}posBeforeChild(o){for(let s=0,d=this.posAtStart;;s++){let e=this.children[s];if(e==o)return d;d+=e.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(o,s,d){if(this.contentDOM&&this.contentDOM.contains(1==o.nodeType?o:o.parentNode)){if(d<0){let t,n;if(o==this.contentDOM)t=o.childNodes[s-1];else{for(;o.parentNode!=this.contentDOM;)o=o.parentNode;t=o.previousSibling}for(;t&&(!(n=t.pmViewDesc)||n.parent!=this);)t=t.previousSibling;return t?this.posBeforeChild(n)+n.size:this.posAtStart}{let t,n;if(o==this.contentDOM)t=o.childNodes[s];else{for(;o.parentNode!=this.contentDOM;)o=o.parentNode;t=o.nextSibling}for(;t&&(!(n=t.pmViewDesc)||n.parent!=this);)t=t.nextSibling;return t?this.posBeforeChild(n):this.posAtEnd}}let e;if(o==this.dom&&this.contentDOM)e=s>A(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))e=2&o.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==s)for(let t=o;;t=t.parentNode){if(t==this.dom){e=!1;break}if(t.previousSibling)break}if(null==e&&s==o.childNodes.length)for(let t=o;;t=t.parentNode){if(t==this.dom){e=!0;break}if(t.nextSibling)break}}return(null==e?d>0:e)?this.posAtEnd:this.posAtStart}nearestDesc(o,s=!1){for(let d=!0,e=o;e;e=e.parentNode){let n,t=this.getDesc(e);if(t&&(!s||t.node)){if(!d||!(n=t.nodeDOM)||(1==n.nodeType?n.contains(1==o.nodeType?o:o.parentNode):n==o))return t;d=!1}}}getDesc(o){let s=o.pmViewDesc;for(let d=s;d;d=d.parent)if(d==this)return s}posFromDOM(o,s,d){for(let e=o;e;e=e.parentNode){let t=this.getDesc(e);if(t)return t.localPosFromDOM(o,s,d)}return-1}descAt(o){for(let s=0,d=0;s<this.children.length;s++){let e=this.children[s],t=d+e.size;if(d==o&&t!=d){for(;!e.border&&e.children.length;)e=e.children[0];return e}if(o<t)return e.descAt(o-d-e.border);d=t}}domFromPos(o,s){if(!this.contentDOM)return{node:this.dom,offset:0,atom:o+1};let t,d=0,e=0;for(let t=0;d<this.children.length;d++){let n=this.children[d],i=t+n.size;if(i>o||n instanceof E){e=o-t;break}t=i}if(e)return this.children[d].domFromPos(e-this.children[d].border,s);for(;d&&!(t=this.children[d-1]).size&&t instanceof U&&t.side>=0;d--);if(s<=0){let t,n=!0;for(;t=d?this.children[d-1]:null,t&&t.dom.parentNode!=this.contentDOM;d--,n=!1);return t&&s&&n&&!t.border&&!t.domAtom?t.domFromPos(t.size,s):{node:this.contentDOM,offset:t?A(t.dom)+1:0}}{let t,n=!0;for(;t=d<this.children.length?this.children[d]:null,t&&t.dom.parentNode!=this.contentDOM;d++,n=!1);return t&&n&&!t.border&&!t.domAtom?t.domFromPos(0,s):{node:this.contentDOM,offset:t?A(t.dom):this.contentDOM.childNodes.length}}}parseRange(o,s,d=0){if(0==this.children.length)return{node:this.contentDOM,from:o,to:s,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let e=-1,t=-1;for(let n=d,i=0;;i++){let u=this.children[i],h=n+u.size;if(-1==e&&o<=h){let T=n+u.border;if(o>=T&&s<=h-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(o,s,T);o=n;for(let D=i;D>0;D--){let L=this.children[D-1];if(L.size&&L.dom.parentNode==this.contentDOM&&!L.emptyChildAt(1)){e=A(L.dom)+1;break}o-=L.size}-1==e&&(e=0)}if(e>-1&&(h>s||i==this.children.length-1)){s=h;for(let T=i+1;T<this.children.length;T++){let D=this.children[T];if(D.size&&D.dom.parentNode==this.contentDOM&&!D.emptyChildAt(-1)){t=A(D.dom);break}s+=D.size}-1==t&&(t=this.contentDOM.childNodes.length);break}n=h}return{node:this.contentDOM,from:o,to:s,fromOffset:e,toOffset:t}}emptyChildAt(o){if(this.border||!this.contentDOM||!this.children.length)return!1;let s=this.children[o<0?0:this.children.length-1];return 0==s.size||s.emptyChildAt(o)}domAfterPos(o){let{node:s,offset:d}=this.domFromPos(o,0);if(1!=s.nodeType||d==s.childNodes.length)throw new RangeError("No node after pos "+o);return s.childNodes[d]}setSelection(o,s,d,e=!1){let t=Math.min(o,s),n=Math.max(o,s);for(let L=0,B=0;L<this.children.length;L++){let Y=this.children[L],X=B+Y.size;if(t>B&&n<X)return Y.setSelection(o-B-Y.border,s-B-Y.border,d,e);B=X}let i=this.domFromPos(o,o?-1:1),u=s==o?i:this.domFromPos(s,s?-1:1),h=d.getSelection(),T=!1;if((Bt||Rt)&&o==s){let{node:L,offset:B}=i;if(3==L.nodeType){if(T=!(!B||"\n"!=L.nodeValue[B-1]),T&&B==L.nodeValue.length)for(let X,Y=L;Y;Y=Y.parentNode){if(X=Y.nextSibling){"BR"==X.nodeName&&(i=u={node:X.parentNode,offset:A(X)+1});break}let ht=Y.pmViewDesc;if(ht&&ht.node&&ht.node.isBlock)break}}else{let Y=L.childNodes[B-1];T=Y&&("BR"==Y.nodeName||"false"==Y.contentEditable)}}if(Bt&&h.focusNode&&h.focusNode!=u.node&&1==h.focusNode.nodeType){let L=h.focusNode.childNodes[h.focusOffset];L&&"false"==L.contentEditable&&(e=!0)}if(!(e||T&&Rt)&&G(i.node,i.offset,h.anchorNode,h.anchorOffset)&&G(u.node,u.offset,h.focusNode,h.focusOffset))return;let D=!1;if((h.extend||o==s)&&!T){h.collapse(i.node,i.offset);try{o!=s&&h.extend(u.node,u.offset),D=!0}catch(L){}}if(!D){if(o>s){let B=i;i=u,u=B}let L=document.createRange();L.setEnd(u.node,u.offset),L.setStart(i.node,i.offset),h.removeAllRanges(),h.addRange(L)}}ignoreMutation(o){return!this.contentDOM&&"selection"!=o.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(o,s){for(let d=0,e=0;e<this.children.length;e++){let t=this.children[e],n=d+t.size;if(d==n?o<=n&&s>=d:o<n&&s>d){let i=d+t.border,u=n-t.border;if(o>=i&&s<=u)return this.dirty=o==d||s==n?2:1,void(o!=i||s!=u||!t.contentLost&&t.dom.parentNode==this.contentDOM?t.markDirty(o-i,s-i):t.dirty=3);t.dirty=t.dom!=t.contentDOM||t.dom.parentNode!=this.contentDOM||t.children.length?3:2}d=n}this.dirty=2}markParentsDirty(){let o=1;for(let s=this.parent;s;s=s.parent,o++){let d=1==o?2:1;s.dirty<d&&(s.dirty=d)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class U extends V{constructor(o,s,d,e){let t,n=s.type.toDOM;if("function"==typeof n&&(n=n(d,()=>t?t.parent?t.parent.posBeforeChild(t):void 0:e)),!s.type.spec.raw){if(1!=n.nodeType){let i=document.createElement("span");i.appendChild(n),n=i}n.contentEditable="false",n.classList.add("ProseMirror-widget")}super(o,[],n,null),this.widget=s,this.widget=s,t=this}matchesWidget(o){return 0==this.dirty&&o.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(o){let s=this.widget.spec.stopEvent;return!!s&&s(o)}ignoreMutation(o){return"selection"!=o.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class bt extends V{constructor(o,s,d,e){super(o,[],s,null),this.textDOM=d,this.text=e}get size(){return this.text.length}localPosFromDOM(o,s){return o!=this.textDOM?this.posAtStart+(s?this.size:0):this.posAtStart+s}domFromPos(o){return{node:this.textDOM,offset:o}}ignoreMutation(o){return"characterData"===o.type&&o.target.nodeValue==o.oldValue}}class Nt extends V{constructor(o,s,d,e){super(o,[],d,e),this.mark=s}static create(o,s,d,e){let t=e.nodeViews[s.type.name],n=t&&t(s,e,d);return(!n||!n.dom)&&(n=l.PW.renderSpec(document,s.type.spec.toDOM(s,d))),new Nt(o,s,n.dom,n.contentDOM||n.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(o){return 3!=this.dirty&&this.mark.eq(o)}markDirty(o,s){if(super.markDirty(o,s),0!=this.dirty){let d=this.parent;for(;!d.node;)d=d.parent;d.dirty<this.dirty&&(d.dirty=this.dirty),this.dirty=0}}slice(o,s,d){let e=Nt.create(this.parent,this.mark,!0,d),t=this.children,n=this.size;s<n&&(t=oe(t,s,n,d)),o>0&&(t=oe(t,0,o,d));for(let i=0;i<t.length;i++)t[i].parent=e;return e.children=t,e}}class H extends V{constructor(o,s,d,e,t,n,i,u,h){super(o,[],t,n),this.node=s,this.outerDeco=d,this.innerDeco=e,this.nodeDOM=i,n&&this.updateChildren(u,h)}static create(o,s,d,e,t,n){let u,i=t.nodeViews[s.type.name],h=i&&i(s,t,()=>u?u.parent?u.parent.posBeforeChild(u):void 0:n,d,e),T=h&&h.dom,D=h&&h.contentDOM;if(s.isText)if(T){if(3!=T.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else T=document.createTextNode(s.text);else T||({dom:T,contentDOM:D}=l.PW.renderSpec(document,s.type.spec.toDOM(s)));!D&&!s.isText&&"BR"!=T.nodeName&&(T.hasAttribute("contenteditable")||(T.contentEditable="false"),s.type.spec.draggable&&(T.draggable=!0));let L=T;return T=we(T,d,s),h?u=new P(o,s,d,e,T,D||null,L,h,t,n+1):s.isText?new p(o,s,d,e,T,L,t):new H(o,s,d,e,T,D||null,L,t,n+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let o={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(o.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let s=this.children.length-1;s>=0;s--){let d=this.children[s];if(this.dom.contains(d.dom.parentNode)){o.contentElement=d.dom.parentNode;break}}o.contentElement||(o.getContent=()=>l.HY.empty)}else o.contentElement=this.contentDOM;else o.getContent=()=>this.node.content;return o}matchesNode(o,s,d){return 0==this.dirty&&o.eq(this.node)&&$e(s,this.outerDeco)&&d.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(o,s){let d=this.node.inlineContent,e=s,t=o.composing?this.localCompositionInfo(o,s):null,n=t&&t.pos>-1?t:null,i=t&&t.pos<0,u=new S(this,n&&n.node,o);(function(r,o,s,d){let e=o.locals(r),t=0;if(0==e.length){for(let h=0;h<r.childCount;h++){let T=r.child(h);d(T,e,o.forChild(t,T),h),t+=T.nodeSize}return}let n=0,i=[],u=null;for(let h=0;;){if(n<e.length&&e[n].to==t){let X,Y=e[n++];for(;n<e.length&&e[n].to==t;)(X||(X=[Y])).push(e[n++]);if(X){X.sort(vt);for(let ht=0;ht<X.length;ht++)s(X[ht],h,!!u)}else s(Y,h,!!u)}let T,D;if(u)D=-1,T=u,u=null;else{if(!(h<r.childCount))break;D=h,T=r.child(h++)}for(let Y=0;Y<i.length;Y++)i[Y].to<=t&&i.splice(Y--,1);for(;n<e.length&&e[n].from<=t&&e[n].to>t;)i.push(e[n++]);let L=t+T.nodeSize;if(T.isText){let Y=L;n<e.length&&e[n].from<Y&&(Y=e[n].from);for(let X=0;X<i.length;X++)i[X].to<Y&&(Y=i[X].to);Y<L&&(u=T.cut(Y-t),T=T.cut(0,Y-t),L=Y,D=-1)}d(T,T.isInline&&!T.isLeaf?i.filter(Y=>!Y.inline):i.slice(),o.forChild(t,T),D),t=L}})(this.node,this.innerDeco,(h,T,D)=>{h.spec.marks?u.syncToMarks(h.spec.marks,d,o):h.type.side>=0&&!D&&u.syncToMarks(T==this.node.childCount?l.vc.none:this.node.child(T).marks,d,o),u.placeWidget(h,o,e)},(h,T,D,L)=>{let B;u.syncToMarks(h.marks,d,o),u.findNodeMatch(h,T,D,L)||i&&o.state.selection.from>e&&o.state.selection.to<e+h.nodeSize&&(B=u.findIndexWithChild(t.node))>-1&&u.updateNodeAt(h,T,D,B,o)||u.updateNextNode(h,T,D,o,L)||u.addNode(h,T,D,o,e),e+=h.nodeSize}),u.syncToMarks([],d,o),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||2==this.dirty)&&(n&&this.protectLocalComposition(o,n),k(this.contentDOM,this.children,o),wt&&function(r){if("UL"==r.nodeName||"OL"==r.nodeName){let o=r.style.cssText;r.style.cssText=o+"; list-style: square !important",window.getComputedStyle(r),r.style.cssText=o}}(this.dom))}localCompositionInfo(o,s){let{from:d,to:e}=o.state.selection;if(!(o.state.selection instanceof C.Bs)||d<s||e>s+this.node.content.size)return null;let t=o.domSelectionRange(),n=function(r,o){for(;;){if(3==r.nodeType)return r;if(1==r.nodeType&&o>0){if(r.childNodes.length>o&&3==r.childNodes[o].nodeType)return r.childNodes[o];o=at(r=r.childNodes[o-1])}else{if(!(1==r.nodeType&&o<r.childNodes.length))return null;r=r.childNodes[o],o=0}}}(t.focusNode,t.focusOffset);if(!n||!this.dom.contains(n.parentNode))return null;if(this.node.inlineContent){let i=n.nodeValue,u=function(r,o,s,d){for(let e=0,t=0;e<r.childCount&&t<=d;){let n=r.child(e++),i=t;if(t+=n.nodeSize,!n.isText)continue;let u=n.text;for(;e<r.childCount;){let h=r.child(e++);if(t+=h.nodeSize,!h.isText)break;u+=h.text}if(t>=s){let h=i<d?u.lastIndexOf(o,d-i-1):-1;if(h>=0&&h+o.length+i>=s)return i+h;if(s==d&&u.length>=d+o.length-i&&u.slice(d-i,d-i+o.length)==o)return d}}return-1}(this.node.content,i,d-s,e-s);return u<0?null:{node:n,pos:u,text:i}}return{node:n,pos:-1,text:""}}protectLocalComposition(o,{node:s,pos:d,text:e}){if(this.getDesc(s))return;let t=s;for(;t.parentNode!=this.contentDOM;t=t.parentNode){for(;t.previousSibling;)t.parentNode.removeChild(t.previousSibling);for(;t.nextSibling;)t.parentNode.removeChild(t.nextSibling);t.pmViewDesc&&(t.pmViewDesc=void 0)}let n=new bt(this,t,s,e);o.input.compositionNodes.push(n),this.children=oe(this.children,d,d+e.length,o,n)}update(o,s,d,e){return!(3==this.dirty||!o.sameMarkup(this.node)||(this.updateInner(o,s,d,e),0))}updateInner(o,s,d,e){this.updateOuterDeco(s),this.node=o,this.innerDeco=d,this.contentDOM&&this.updateChildren(e,this.posAtStart),this.dirty=0}updateOuterDeco(o){if($e(o,this.outerDeco))return;let s=1!=this.nodeDOM.nodeType,d=this.dom;this.dom=te(this.dom,this.nodeDOM,Ht(this.outerDeco,this.node,s),Ht(o,this.node,s)),this.dom!=d&&(d.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=o}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function a(r,o,s,d,e){return we(d,o,r),new H(void 0,r,o,s,d,d,d,e,0)}class p extends H{constructor(o,s,d,e,t,n,i){super(o,s,d,e,t,null,n,i,0)}parseRule(){let o=this.nodeDOM.parentNode;for(;o&&o!=this.dom&&!o.pmIsDeco;)o=o.parentNode;return{skip:o||!0}}update(o,s,d,e){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!o.sameMarkup(this.node)||(this.updateOuterDeco(s),(0!=this.dirty||o.text!=this.node.text)&&o.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=o.text,e.trackWrites==this.nodeDOM&&(e.trackWrites=null)),this.node=o,this.dirty=0,0))}inParent(){let o=this.parent.contentDOM;for(let s=this.nodeDOM;s;s=s.parentNode)if(s==o)return!0;return!1}domFromPos(o){return{node:this.nodeDOM,offset:o}}localPosFromDOM(o,s,d){return o==this.nodeDOM?this.posAtStart+Math.min(s,this.node.text.length):super.localPosFromDOM(o,s,d)}ignoreMutation(o){return"characterData"!=o.type&&"selection"!=o.type}slice(o,s,d){let e=this.node.cut(o,s),t=document.createTextNode(e.text);return new p(this.parent,e,this.outerDeco,this.innerDeco,t,t,d)}markDirty(o,s){super.markDirty(o,s),this.dom!=this.nodeDOM&&(0==o||s==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}}class E extends V{parseRule(){return{ignore:!0}}matchesHack(o){return 0==this.dirty&&this.dom.nodeName==o}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class P extends H{constructor(o,s,d,e,t,n,i,u,h,T){super(o,s,d,e,t,n,i,h,T),this.spec=u}update(o,s,d,e){if(3==this.dirty)return!1;if(this.spec.update){let t=this.spec.update(o,s,d);return t&&this.updateInner(o,s,d,e),t}return!(!this.contentDOM&&!o.isLeaf)&&super.update(o,s,d,e)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(o,s,d,e){this.spec.setSelection?this.spec.setSelection(o,s,d):super.setSelection(o,s,d,e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(o){return!!this.spec.stopEvent&&this.spec.stopEvent(o)}ignoreMutation(o){return this.spec.ignoreMutation?this.spec.ignoreMutation(o):super.ignoreMutation(o)}}function k(r,o,s){let d=r.firstChild,e=!1;for(let t=0;t<o.length;t++){let n=o[t],i=n.dom;if(i.parentNode==r){for(;i!=d;)d=J(d),e=!0;d=d.nextSibling}else e=!0,r.insertBefore(i,d);if(n instanceof Nt){let u=d?d.previousSibling:r.lastChild;k(n.contentDOM,n.children,s),d=u?u.nextSibling:r.firstChild}}for(;d;)d=J(d),e=!0;e&&s.trackWrites==r&&(s.trackWrites=null)}const K=function(r){r&&(this.nodeName=r)};K.prototype=Object.create(null);const lt=[new K];function Ht(r,o,s){if(0==r.length)return lt;let d=s?lt[0]:new K,e=[d];for(let t=0;t<r.length;t++){let n=r[t].type.attrs;if(n){n.nodeName&&e.push(d=new K(n.nodeName));for(let i in n){let u=n[i];null!=u&&(s&&1==e.length&&e.push(d=new K(o.isInline?"span":"div")),"class"==i?d.class=(d.class?d.class+" ":"")+u:"style"==i?d.style=(d.style?d.style+";":"")+u:"nodeName"!=i&&(d[i]=u))}}}return e}function te(r,o,s,d){if(s==lt&&d==lt)return o;let e=o;for(let t=0;t<d.length;t++){let n=d[t],i=s[t];if(t){let u;i&&i.nodeName==n.nodeName&&e!=r&&(u=e.parentNode)&&u.nodeName.toLowerCase()==n.nodeName||(u=document.createElement(n.nodeName),u.pmIsDeco=!0,u.appendChild(e),i=lt[0]),e=u}ee(e,i||lt[0],n)}return e}function ee(r,o,s){for(let d in o)"class"!=d&&"style"!=d&&"nodeName"!=d&&!(d in s)&&r.removeAttribute(d);for(let d in s)"class"!=d&&"style"!=d&&"nodeName"!=d&&s[d]!=o[d]&&r.setAttribute(d,s[d]);if(o.class!=s.class){let d=o.class?o.class.split(" ").filter(Boolean):[],e=s.class?s.class.split(" ").filter(Boolean):[];for(let t=0;t<d.length;t++)-1==e.indexOf(d[t])&&r.classList.remove(d[t]);for(let t=0;t<e.length;t++)-1==d.indexOf(e[t])&&r.classList.add(e[t]);0==r.classList.length&&r.removeAttribute("class")}if(o.style!=s.style){if(o.style){let e,d=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;e=d.exec(o.style);)r.style.removeProperty(e[1])}s.style&&(r.style.cssText+=s.style)}}function we(r,o,s){return te(r,r,lt,Ht(o,s,1!=r.nodeType))}function $e(r,o){if(r.length!=o.length)return!1;for(let s=0;s<r.length;s++)if(!r[s].type.eq(o[s].type))return!1;return!0}function J(r){let o=r.nextSibling;return r.parentNode.removeChild(r),o}class S{constructor(o,s,d){this.lock=s,this.view=d,this.index=0,this.stack=[],this.changed=!1,this.top=o,this.preMatch=function(r,o){let s=o,d=s.children.length,e=r.childCount,t=new Map,n=[];t:for(;e>0;){let i;for(;;)if(d){let h=s.children[d-1];if(!(h instanceof Nt)){i=h,d--;break}s=h,d=h.children.length}else{if(s==o)break t;d=s.parent.children.indexOf(s),s=s.parent}let u=i.node;if(u){if(u!=r.child(e-1))break;--e,t.set(i,e),n.push(i)}}return{index:e,matched:t,matches:n.reverse()}}(o.node.content,o)}destroyBetween(o,s){if(o!=s){for(let d=o;d<s;d++)this.top.children[d].destroy();this.top.children.splice(o,s-o),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(o,s,d){let e=0,t=this.stack.length>>1,n=Math.min(t,o.length);for(;e<n&&(e==t-1?this.top:this.stack[e+1<<1]).matchesMark(o[e])&&!1!==o[e].type.spec.spanning;)e++;for(;e<t;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),t--;for(;t<o.length;){this.stack.push(this.top,this.index+1);let i=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let h=this.top.children[u];if(h.matchesMark(o[t])&&!this.isLocked(h.dom)){i=u;break}}if(i>-1)i>this.index&&(this.changed=!0,this.destroyBetween(this.index,i)),this.top=this.top.children[this.index];else{let u=Nt.create(this.top,o[t],s,d);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,t++}}findNodeMatch(o,s,d,e){let n,t=-1;if(e>=this.preMatch.index&&(n=this.preMatch.matches[e-this.preMatch.index]).parent==this.top&&n.matchesNode(o,s,d))t=this.top.children.indexOf(n,this.index);else for(let i=this.index,u=Math.min(this.top.children.length,i+5);i<u;i++){let h=this.top.children[i];if(h.matchesNode(o,s,d)&&!this.preMatch.matched.has(h)){t=i;break}}return!(t<0||(this.destroyBetween(this.index,t),this.index++,0))}updateNodeAt(o,s,d,e,t){let n=this.top.children[e];return 3==n.dirty&&n.dom==n.contentDOM&&(n.dirty=2),!!n.update(o,s,d,t)&&(this.destroyBetween(this.index,e),this.index++,!0)}findIndexWithChild(o){for(;;){let s=o.parentNode;if(!s)return-1;if(s==this.top.contentDOM){let d=o.pmViewDesc;if(d)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==d)return e;return-1}o=s}}updateNextNode(o,s,d,e,t){for(let n=this.index;n<this.top.children.length;n++){let i=this.top.children[n];if(i instanceof H){let u=this.preMatch.matched.get(i);if(null!=u&&u!=t)return!1;let h=i.dom;if((!this.isLocked(h)||o.isText&&i.node&&i.node.isText&&i.nodeDOM.nodeValue==o.text&&3!=i.dirty&&$e(s,i.outerDeco))&&i.update(o,s,d,e))return this.destroyBetween(this.index,n),i.dom!=h&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(o,s,d,e,t){this.top.children.splice(this.index++,0,H.create(this.top,o,s,d,e,t)),this.changed=!0}placeWidget(o,s,d){let e=this.index<this.top.children.length?this.top.children[this.index]:null;if(!e||!e.matchesWidget(o)||o!=e.widget&&e.widget.type.toDOM.parentNode){let t=new U(this.top,o,s,d);this.top.children.splice(this.index++,0,t),this.changed=!0}else this.index++}addTextblockHacks(){let o=this.top.children[this.index-1],s=this.top;for(;o instanceof Nt;)s=o,o=s.children[s.children.length-1];(!o||!(o instanceof p)||/\n$/.test(o.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(o.node.text))&&((Rt||It)&&o&&"false"==o.dom.contentEditable&&this.addHackNode("IMG",s),this.addHackNode("BR",this.top))}addHackNode(o,s){if(s==this.top&&this.index<s.children.length&&s.children[this.index].matchesHack(o))this.index++;else{let d=document.createElement(o);"IMG"==o&&(d.className="ProseMirror-separator",d.alt=""),"BR"==o&&(d.className="ProseMirror-trailingBreak");let e=new E(this.top,[],d,null);s!=this.top?s.children.push(e):s.children.splice(this.index++,0,e),this.changed=!0}}isLocked(o){return this.lock&&(o==this.lock||1==o.nodeType&&o.contains(this.lock.parentNode))}}function vt(r,o){return r.type.side-o.type.side}function oe(r,o,s,d,e){let t=[];for(let n=0,i=0;n<r.length;n++){let u=r[n],h=i,T=i+=u.size;h>=s||T<=o?t.push(u):(h<o&&t.push(u.slice(0,o-h,d)),e&&(t.push(e),e=void 0),T>s&&t.push(u.slice(s-h,u.size,d)))}return t}function Te(r,o=null){let s=r.domSelectionRange(),d=r.state.doc;if(!s.focusNode)return null;let e=r.docView.nearestDesc(s.focusNode),t=e&&0==e.size,n=r.docView.posFromDOM(s.focusNode,s.focusOffset,1);if(n<0)return null;let u,h,i=d.resolve(n);if(mt(s)){for(u=i;e&&!e.node;)e=e.parent;let T=e.node;if(e&&T.isAtom&&C.qv.isSelectable(T)&&e.parent&&(!T.isInline||!function(r,o,s){for(let d=0==o,e=o==at(r);d||e;){if(r==s)return!0;let t=A(r);if(!(r=r.parentNode))return!1;d=d&&0==t,e=e&&t==at(r)}}(s.focusNode,s.focusOffset,e.dom))){let D=e.posBefore;h=new C.qv(n==D?i:d.resolve(D))}}else{let T=r.docView.posFromDOM(s.anchorNode,s.anchorOffset,1);if(T<0)return null;u=d.resolve(T)}return h||(h=hn(r,u,i,"pointer"==o||r.state.selection.head<i.pos&&!t?1:-1)),h}function se(r){return r.editable?r.hasFocus():Tn(r)&&document.activeElement&&document.activeElement.contains(r.dom)}function le(r,o=!1){let s=r.state.selection;if(Hn(r,s),se(r)){if(!o&&r.input.mouseDown&&r.input.mouseDown.allowDefault&&It){let d=r.domSelectionRange(),e=r.domObserver.currentSelection;if(d.anchorNode&&e.anchorNode&&G(d.anchorNode,d.anchorOffset,e.anchorNode,e.anchorOffset))return r.input.mouseDown.delayedSelectionSync=!0,void r.domObserver.setCurSelection()}if(r.domObserver.disconnectSelection(),r.cursorWrapper)!function(r){let o=r.domSelection(),s=document.createRange(),d=r.cursorWrapper.dom,e="IMG"==d.nodeName;e?s.setEnd(d.parentNode,A(d)+1):s.setEnd(d,0),s.collapse(!1),o.removeAllRanges(),o.addRange(s),!e&&!r.state.selection.visible&&j&&At<=11&&(d.disabled=!0,d.disabled=!1)}(r);else{let t,n,{anchor:d,head:e}=s;de&&!(s instanceof C.Bs)&&(s.$from.parent.inlineContent||(t=Re(r,s.from)),!s.empty&&!s.$from.parent.inlineContent&&(n=Re(r,s.to))),r.docView.setSelection(d,e,r.root,o),de&&(t&&cn(t),n&&cn(n)),s.visible?r.dom.classList.remove("ProseMirror-hideselection"):(r.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(r){let o=r.dom.ownerDocument;o.removeEventListener("selectionchange",r.input.hideSelectionGuard);let s=r.domSelectionRange(),d=s.anchorNode,e=s.anchorOffset;o.addEventListener("selectionchange",r.input.hideSelectionGuard=()=>{(s.anchorNode!=d||s.anchorOffset!=e)&&(o.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(()=>{(!se(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})}(r))}r.domObserver.setCurSelection(),r.domObserver.connectSelection()}}const de=Rt||It&&_t<63;function Re(r,o){let{node:s,offset:d}=r.docView.domFromPos(o,0),e=d<s.childNodes.length?s.childNodes[d]:null,t=d?s.childNodes[d-1]:null;if(Rt&&e&&"false"==e.contentEditable)return We(e);if(!(e&&"false"!=e.contentEditable||t&&"false"!=t.contentEditable)){if(e)return We(e);if(t)return We(t)}}function We(r){return r.contentEditable="true",Rt&&r.draggable&&(r.draggable=!1,r.wasDraggable=!0),r}function cn(r){r.contentEditable="false",r.wasDraggable&&(r.draggable=!0,r.wasDraggable=null)}function Hn(r,o){if(o instanceof C.qv){let s=r.docView.descAt(o.from);s!=r.lastSelectedViewDesc&&(Un(r),s&&s.selectNode(),r.lastSelectedViewDesc=s)}else Un(r)}function Un(r){r.lastSelectedViewDesc&&(r.lastSelectedViewDesc.parent&&r.lastSelectedViewDesc.deselectNode(),r.lastSelectedViewDesc=void 0)}function hn(r,o,s,d){return r.someProp("createSelectionBetween",e=>e(r,o,s))||C.Bs.between(o,s,d)}function Sn(r){return!(r.editable&&!r.hasFocus())&&Tn(r)}function Tn(r){let o=r.domSelectionRange();if(!o.anchorNode)return!1;try{return r.dom.contains(3==o.anchorNode.nodeType?o.anchorNode.parentNode:o.anchorNode)&&(r.editable||r.dom.contains(3==o.focusNode.nodeType?o.focusNode.parentNode:o.focusNode))}catch(s){return!1}}function vn(r,o){let{$anchor:s,$head:d}=r.selection,e=o>0?s.max(d):s.min(d),t=e.parent.inlineContent?e.depth?r.doc.resolve(o>0?e.after():e.before()):null:e;return t&&C.Y1.findFrom(t,o)}function Qe(r,o){return r.dispatch(r.state.tr.setSelection(o).scrollIntoView()),!0}function fn(r,o,s){let d=r.state.selection;if(!(d instanceof C.Bs)){if(d instanceof C.qv&&d.node.isInline)return Qe(r,new C.Bs(o>0?d.$to:d.$from));{let e=vn(r.state,o);return!!e&&Qe(r,e)}}if(!d.empty||s.indexOf("s")>-1)return!1;if(r.endOfTextblock(o>0?"right":"left")){let e=vn(r.state,o);return!!(e&&e instanceof C.qv)&&Qe(r,e)}if(!(z&&s.indexOf("m")>-1)){let n,e=d.$head,t=e.textOffset?null:o<0?e.nodeBefore:e.nodeAfter;if(!t||t.isText)return!1;let i=o<0?e.pos-t.nodeSize:e.pos;return!!(t.isAtom||(n=r.docView.descAt(i))&&!n.contentDOM)&&(C.qv.isSelectable(t)?Qe(r,new C.qv(o<0?r.state.doc.resolve(e.pos-t.nodeSize):e)):!!dt&&Qe(r,new C.Bs(r.state.doc.resolve(o<0?i:i+t.nodeSize))))}}function rn(r){return 3==r.nodeType?r.nodeValue.length:r.childNodes.length}function sn(r){let o=r.pmViewDesc;return o&&0==o.size&&(r.nextSibling||"BR"!=r.nodeName)}function _(r){let o=r.domSelectionRange(),s=o.focusNode,d=o.focusOffset;if(!s)return;let e,t,n=!1;for(Bt&&1==s.nodeType&&d<rn(s)&&sn(s.childNodes[d])&&(n=!0);;)if(d>0){if(1!=s.nodeType)break;{let i=s.childNodes[d-1];if(sn(i))e=s,t=--d;else{if(3!=i.nodeType)break;s=i,d=s.nodeValue.length}}}else{if(g(s))break;{let i=s.previousSibling;for(;i&&sn(i);)e=s.parentNode,t=A(i),i=i.previousSibling;if(i)s=i,d=rn(s);else{if(s=s.parentNode,s==r.dom)break;d=0}}}n?f(r,s,d):e&&f(r,e,t)}function v(r){let o=r.domSelectionRange(),s=o.focusNode,d=o.focusOffset;if(!s)return;let t,n,e=rn(s);for(;;)if(d<e){if(1!=s.nodeType)break;if(!sn(s.childNodes[d]))break;t=s,n=++d}else{if(g(s))break;{let i=s.nextSibling;for(;i&&sn(i);)t=i.parentNode,n=A(i)+1,i=i.nextSibling;if(i)s=i,d=0,e=rn(s);else{if(s=s.parentNode,s==r.dom)break;d=e=0}}}t&&f(r,t,n)}function g(r){let o=r.pmViewDesc;return o&&o.node&&o.node.isBlock}function f(r,o,s){let d=r.domSelection();if(mt(d)){let t=document.createRange();t.setEnd(o,s),t.setStart(o,s),d.removeAllRanges(),d.addRange(t)}else d.extend&&d.extend(o,s);r.domObserver.setCurSelection();let{state:e}=r;setTimeout(()=>{r.state==e&&le(r)},50)}function M(r,o,s){let d=r.state.selection;if(d instanceof C.Bs&&!d.empty||s.indexOf("s")>-1||z&&s.indexOf("m")>-1)return!1;let{$from:e,$to:t}=d;if(!e.parent.inlineContent||r.endOfTextblock(o<0?"up":"down")){let n=vn(r.state,o);if(n&&n instanceof C.qv)return Qe(r,n)}if(!e.parent.inlineContent){let n=o<0?e:t,i=d instanceof C.C1?C.Y1.near(n,o):C.Y1.findFrom(n,o);return!!i&&Qe(r,i)}return!1}function x(r,o){if(!(r.state.selection instanceof C.Bs))return!0;let{$head:s,$anchor:d,empty:e}=r.state.selection;if(!s.sameParent(d))return!0;if(!e)return!1;if(r.endOfTextblock(o>0?"forward":"backward"))return!0;let t=!s.textOffset&&(o<0?s.nodeBefore:s.nodeAfter);if(t&&!t.isText){let n=r.state.tr;return o<0?n.delete(s.pos-t.nodeSize,s.pos):n.delete(s.pos,s.pos+t.nodeSize),r.dispatch(n),!0}return!1}function R(r,o,s){r.domObserver.stop(),o.contentEditable=s,r.domObserver.start()}function Ct(r,o){r.someProp("transformCopied",B=>{o=B(o,r)});let s=[],{content:d,openStart:e,openEnd:t}=o;for(;e>1&&t>1&&1==d.childCount&&1==d.firstChild.childCount;){e--,t--;let B=d.firstChild;s.push(B.type.name,B.attrs!=B.type.defaultAttrs?B.attrs:null),d=B.content}let n=r.someProp("clipboardSerializer")||l.PW.fromSchema(r.state.schema),i=De(),u=i.createElement("div");u.appendChild(n.serializeFragment(d,{document:i}));let T,h=u.firstChild,D=0;for(;h&&1==h.nodeType&&(T=je[h.nodeName.toLowerCase()]);){for(let B=T.length-1;B>=0;B--){let Y=i.createElement(T[B]);for(;u.firstChild;)Y.appendChild(u.firstChild);u.appendChild(Y),D++}h=u.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",`${e} ${t}${D?` -${D}`:""} ${JSON.stringify(s)}`),{dom:u,text:r.someProp("clipboardTextSerializer",B=>B(o,r))||o.content.textBetween(0,o.content.size,"\n\n")}}function xt(r,o,s,d,e){let n,i,t=e.parent.type.spec.code;if(!s&&!o)return null;let u=o&&(d||t||!s);if(u){if(r.someProp("transformPastedText",L=>{o=L(o,t||d,r)}),t)return o?new l.p2(l.HY.from(r.state.schema.text(o.replace(/\r\n?/g,"\n"))),0,0):l.p2.empty;let D=r.someProp("clipboardTextParser",L=>L(o,e,d,r));if(D)i=D;else{let L=e.marks(),{schema:B}=r.state,Y=l.PW.fromSchema(B);n=document.createElement("div"),o.split(/(?:\r\n?|\n)+/).forEach(X=>{let ht=n.appendChild(document.createElement("p"));X&&ht.appendChild(Y.serializeNode(B.text(X,L)))})}}else r.someProp("transformPastedHTML",D=>{s=D(s,r)}),n=function(r){let o=/^(\s*<meta [^>]*>)*/.exec(r);o&&(r=r.slice(o[0].length));let e,s=De().createElement("div"),d=/<([a-z][^>\s]+)/i.exec(r);if((e=d&&je[d[1].toLowerCase()])&&(r=e.map(t=>"<"+t+">").join("")+r+e.map(t=>"</"+t+">").reverse().join("")),s.innerHTML=r,e)for(let t=0;t<e.length;t++)s=s.querySelector(e[t])||s;return s}(s),dt&&function(r){let o=r.querySelectorAll(It?"span:not([class]):not([style])":"span.Apple-converted-space");for(let s=0;s<o.length;s++){let d=o[s];1==d.childNodes.length&&"\xa0"==d.textContent&&d.parentNode&&d.parentNode.replaceChild(r.ownerDocument.createTextNode(" "),d)}}(n);let h=n&&n.querySelector("[data-pm-slice]"),T=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(T&&T[3])for(let D=+T[3];D>0;D--){let L=n.firstChild;for(;L&&1!=L.nodeType;)L=L.nextSibling;if(!L)break;n=L}if(i||(i=(r.someProp("clipboardParser")||r.someProp("domParser")||l.aw.fromSchema(r.state.schema)).parseSlice(n,{preserveWhitespace:!(!u&&!T),context:e,ruleFromNode:L=>"BR"!=L.nodeName||L.nextSibling||!L.parentNode||Ut.test(L.parentNode.nodeName)?null:{ignore:!0}})),T)i=function(r,o){if(!r.size)return r;let d,s=r.content.firstChild.type.schema;try{d=JSON.parse(o)}catch(i){return r}let{content:e,openStart:t,openEnd:n}=r;for(let i=d.length-2;i>=0;i-=2){let u=s.nodes[d[i]];if(!u||u.hasRequiredAttrs())break;e=l.HY.from(u.create(d[i+1],e)),t++,n++}return new l.p2(e,t,n)}(qe(i,+T[1],+T[2]),T[4]);else if(i=l.p2.maxOpen(function(r,o){if(r.childCount<2)return r;for(let s=o.depth;s>=0;s--){let t,e=o.node(s).contentMatchAt(o.index(s)),n=[];if(r.forEach(i=>{if(!n)return;let h,u=e.findWrapping(i.type);if(!u)return n=null;if(h=n.length&&t.length&&re(u,t,i,n[n.length-1],0))n[n.length-1]=h;else{n.length&&(n[n.length-1]=ie(n[n.length-1],t.length));let T=jt(i,u);n.push(T),e=e.matchType(T.type),t=u}}),n)return l.HY.from(n)}return r}(i.content,e),!0),i.openStart||i.openEnd){let D=0,L=0;for(let B=i.content.firstChild;D<i.openStart&&!B.type.spec.isolating;D++,B=B.firstChild);for(let B=i.content.lastChild;L<i.openEnd&&!B.type.spec.isolating;L++,B=B.lastChild);i=qe(i,D,L)}return r.someProp("transformPasted",D=>{i=D(i,r)}),i}const Ut=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function jt(r,o,s=0){for(let d=o.length-1;d>=s;d--)r=o[d].create(null,l.HY.from(r));return r}function re(r,o,s,d,e){if(e<r.length&&e<o.length&&r[e]==o[e]){let t=re(r,o,s,d.lastChild,e+1);if(t)return d.copy(d.content.replaceChild(d.childCount-1,t));if(d.contentMatchAt(d.childCount).matchType(e==r.length-1?s.type:r[e+1]))return d.copy(d.content.append(l.HY.from(jt(s,r,e+1))))}}function ie(r,o){if(0==o)return r;let s=r.content.replaceChild(r.childCount-1,ie(r.lastChild,o-1)),d=r.contentMatchAt(r.childCount).fillBefore(l.HY.empty,!0);return r.copy(s.append(d))}function be(r,o,s,d,e,t){let n=o<0?r.firstChild:r.lastChild,i=n.content;return e<d-1&&(i=be(i,o,s,d,e+1,t)),e>=s&&(i=o<0?n.contentMatchAt(0).fillBefore(i,r.childCount>1||t<=e).append(i):i.append(n.contentMatchAt(n.childCount).fillBefore(l.HY.empty,!0))),r.replaceChild(o<0?0:r.childCount-1,n.copy(i))}function qe(r,o,s){return o<r.openStart&&(r=new l.p2(be(r.content,-1,o,r.openStart,0,r.openEnd),o,r.openEnd)),s<r.openEnd&&(r=new l.p2(be(r.content,1,s,r.openEnd,0,0),r.openStart,s)),r}const je={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ve=null;function De(){return ve||(ve=document.implementation.createHTMLDocument("title"))}const Ie={},Fe={},Vn={touchstart:!0,touchmove:!0};class Qn{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Xe(r,o){r.input.lastSelectionOrigin=o,r.input.lastSelectionTime=Date.now()}function Cn(r){r.someProp("handleDOMEvents",o=>{for(let s in o)r.input.eventHandlers[s]||r.dom.addEventListener(s,r.input.eventHandlers[s]=d=>un(r,d))})}function un(r,o){return r.someProp("handleDOMEvents",s=>{let d=s[o.type];return!!d&&(d(r,o)||o.defaultPrevented)})}function mn(r,o){if(!o.bubbles)return!0;if(o.defaultPrevented)return!1;for(let s=o.target;s!=r.dom;s=s.parentNode)if(!s||11==s.nodeType||s.pmViewDesc&&s.pmViewDesc.stopEvent(o))return!1;return!0}function nn(r){return{left:r.clientX,top:r.clientY}}function Mn(r,o,s,d,e){if(-1==d)return!1;let t=r.state.doc.resolve(d);for(let n=t.depth+1;n>0;n--)if(r.someProp(o,i=>n>t.depth?i(r,s,t.nodeAfter,t.before(n),e,!0):i(r,s,t.node(n),t.before(n),e,!1)))return!0;return!1}function tn(r,o,s){r.focused||r.focus();let d=r.state.tr.setSelection(o);"pointer"==s&&d.setMeta("pointer",!0),r.dispatch(d)}function vo(r,o,s,d){return Mn(r,"handleDoubleClickOn",o,s,d)||r.someProp("handleDoubleClick",e=>e(r,o,d))}function Co(r,o,s,d){return Mn(r,"handleTripleClickOn",o,s,d)||r.someProp("handleTripleClick",e=>e(r,o,d))||function(r,o,s){if(0!=s.button)return!1;let d=r.state.doc;if(-1==o)return!!d.inlineContent&&(tn(r,C.Bs.create(d,0,d.content.size),"pointer"),!0);let e=d.resolve(o);for(let t=e.depth+1;t>0;t--){let n=t>e.depth?e.nodeAfter:e.node(t),i=e.before(t);if(n.inlineContent)tn(r,C.Bs.create(d,i+1,i+1+n.content.size),"pointer");else{if(!C.qv.isSelectable(n))continue;tn(r,C.qv.create(d,i),"pointer")}return!0}}(r,s,d)}function wn(r){return zn(r)}Fe.keydown=(r,o)=>{let s=o;if(r.input.shiftKey=16==s.keyCode||s.shiftKey,!oo(r,s)&&(r.input.lastKeyCode=s.keyCode,r.input.lastKeyCodeTime=Date.now(),!rt||!It||13!=s.keyCode))if(229!=s.keyCode&&r.domObserver.forceFlush(),!wt||13!=s.keyCode||s.ctrlKey||s.altKey||s.metaKey)r.someProp("handleKeyDown",d=>d(r,s))||function(r,o){let s=o.keyCode,d=function(r){let o="";return r.ctrlKey&&(o+="c"),r.metaKey&&(o+="m"),r.altKey&&(o+="a"),r.shiftKey&&(o+="s"),o}(o);return 8==s||z&&72==s&&"c"==d?x(r,-1)||_(r):46==s||z&&68==s&&"c"==d?x(r,1)||v(r):13==s||27==s||(37==s||z&&66==s&&"c"==d?fn(r,-1,d)||_(r):39==s||z&&70==s&&"c"==d?fn(r,1,d)||v(r):38==s||z&&80==s&&"c"==d?M(r,-1,d)||_(r):40==s||z&&78==s&&"c"==d?function(r){if(!Rt||r.state.selection.$head.parentOffset>0)return!1;let{focusNode:o,focusOffset:s}=r.domSelectionRange();if(o&&1==o.nodeType&&0==s&&o.firstChild&&"false"==o.firstChild.contentEditable){let d=o.firstChild;R(r,d,"true"),setTimeout(()=>R(r,d,"false"),20)}return!1}(r)||M(r,1,d)||v(r):d==(z?"m":"c")&&(66==s||73==s||89==s||90==s))}(r,s)?s.preventDefault():Xe(r,"key");else{let d=Date.now();r.input.lastIOSEnter=d,r.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{r.input.lastIOSEnter==d&&(r.someProp("handleKeyDown",e=>e(r,Ot(13,"Enter"))),r.input.lastIOSEnter=0)},200)}},Fe.keyup=(r,o)=>{16==o.keyCode&&(r.input.shiftKey=!1)},Fe.keypress=(r,o)=>{let s=o;if(oo(r,s)||!s.charCode||s.ctrlKey&&!s.altKey||z&&s.metaKey)return;if(r.someProp("handleKeyPress",e=>e(r,s)))return void s.preventDefault();let d=r.state.selection;if(!(d instanceof C.Bs&&d.$from.sameParent(d.$to))){let e=String.fromCharCode(s.charCode);!/[\r\n]/.test(e)&&!r.someProp("handleTextInput",t=>t(r,d.$from.pos,d.$to.pos,e))&&r.dispatch(r.state.tr.insertText(e).scrollIntoView()),s.preventDefault()}};const Fn=z?"metaKey":"ctrlKey";Ie.mousedown=(r,o)=>{let s=o;r.input.shiftKey=s.shiftKey;let d=wn(r),e=Date.now(),t="singleClick";e-r.input.lastClick.time<500&&function(r,o){let s=o.x-r.clientX,d=o.y-r.clientY;return s*s+d*d<100}(s,r.input.lastClick)&&!s[Fn]&&("singleClick"==r.input.lastClick.type?t="doubleClick":"doubleClick"==r.input.lastClick.type&&(t="tripleClick")),r.input.lastClick={time:e,x:s.clientX,y:s.clientY,type:t};let n=r.posAtCoords(nn(s));!n||("singleClick"==t?(r.input.mouseDown&&r.input.mouseDown.done(),r.input.mouseDown=new Kn(r,n,s,!!d)):("doubleClick"==t?vo:Co)(r,n.pos,n.inside,s)?s.preventDefault():Xe(r,"pointer"))};class Kn{constructor(o,s,d,e){let t,n;if(this.view=o,this.pos=s,this.event=d,this.flushed=e,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=o.state.doc,this.selectNode=!!d[Fn],this.allowDefault=d.shiftKey,s.inside>-1)t=o.state.doc.nodeAt(s.inside),n=s.inside;else{let T=o.state.doc.resolve(s.pos);t=T.parent,n=T.depth?T.before():0}const i=e?null:d.target,u=i?o.docView.nearestDesc(i,!0):null;this.target=u?u.dom:null;let{selection:h}=o.state;(0==d.button&&t.type.spec.draggable&&!1!==t.type.spec.selectable||h instanceof C.qv&&h.from<=n&&h.to>n)&&(this.mightDrag={node:t,pos:n,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!Bt||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),o.root.addEventListener("mouseup",this.up=this.up.bind(this)),o.root.addEventListener("mousemove",this.move=this.move.bind(this)),Xe(o,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>le(this.view)),this.view.input.mouseDown=null}up(o){if(this.done(),!this.view.dom.contains(o.target))return;let s=this.pos;this.view.state.doc!=this.startDoc&&(s=this.view.posAtCoords(nn(o))),this.updateAllowDefault(o),this.allowDefault||!s?Xe(this.view,"pointer"):function(r,o,s,d,e){return Mn(r,"handleClickOn",o,s,d)||r.someProp("handleClick",t=>t(r,o,d))||(e?function(r,o){if(-1==o)return!1;let d,e,s=r.state.selection;s instanceof C.qv&&(d=s.node);let t=r.state.doc.resolve(o);for(let n=t.depth+1;n>0;n--){let i=n>t.depth?t.nodeAfter:t.node(n);if(C.qv.isSelectable(i)){e=d&&s.$from.depth>0&&n>=s.$from.depth&&t.before(s.$from.depth+1)==s.$from.pos?t.before(s.$from.depth):t.before(n);break}}return null!=e&&(tn(r,C.qv.create(r.state.doc,e),"pointer"),!0)}(r,s):function(r,o){if(-1==o)return!1;let s=r.state.doc.resolve(o),d=s.nodeAfter;return!!(d&&d.isAtom&&C.qv.isSelectable(d))&&(tn(r,new C.qv(s),"pointer"),!0)}(r,s))}(this.view,s.pos,s.inside,o,this.selectNode)?o.preventDefault():0==o.button&&(this.flushed||Rt&&this.mightDrag&&!this.mightDrag.node.isAtom||It&&!this.view.state.selection.visible&&Math.min(Math.abs(s.pos-this.view.state.selection.from),Math.abs(s.pos-this.view.state.selection.to))<=2)?(tn(this.view,C.Y1.near(this.view.state.doc.resolve(s.pos)),"pointer"),o.preventDefault()):Xe(this.view,"pointer")}move(o){this.updateAllowDefault(o),Xe(this.view,"pointer"),0==o.buttons&&this.done()}updateAllowDefault(o){!this.allowDefault&&(Math.abs(this.event.x-o.clientX)>4||Math.abs(this.event.y-o.clientY)>4)&&(this.allowDefault=!0)}}function oo(r,o){return!!r.composing||!!(Rt&&Math.abs(o.timeStamp-r.input.compositionEndedAt)<500)&&(r.input.compositionEndedAt=-2e8,!0)}Ie.touchstart=r=>{r.input.lastTouch=Date.now(),wn(r),Xe(r,"pointer")},Ie.touchmove=r=>{r.input.lastTouch=Date.now(),Xe(r,"pointer")},Ie.contextmenu=r=>wn(r);const Mo=rt?5e3:-1;function Jn(r,o){clearTimeout(r.input.composingTimeout),o>-1&&(r.input.composingTimeout=setTimeout(()=>zn(r),o))}function io(r){for(r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=function(){let r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function zn(r,o=!1){if(!(rt&&r.domObserver.flushingSoon>=0)){if(r.domObserver.forceFlush(),io(r),o||r.docView&&r.docView.dirty){let s=Te(r);return s&&!s.eq(r.state.selection)?r.dispatch(r.state.tr.setSelection(s)):r.updateState(r.state),!0}return!1}}Fe.compositionstart=Fe.compositionupdate=r=>{if(!r.composing){r.domObserver.flush();let{state:o}=r,s=o.selection.$from;if(o.selection.empty&&(o.storedMarks||!s.textOffset&&s.parentOffset&&s.nodeBefore.marks.some(d=>!1===d.type.spec.inclusive)))r.markCursor=r.state.storedMarks||s.marks(),zn(r,!0),r.markCursor=null;else if(zn(r),Bt&&o.selection.empty&&s.parentOffset&&!s.textOffset&&s.nodeBefore.marks.length){let d=r.domSelectionRange();for(let e=d.focusNode,t=d.focusOffset;e&&1==e.nodeType&&0!=t;){let n=t<0?e.lastChild:e.childNodes[t-1];if(!n)break;if(3==n.nodeType){r.domSelection().collapse(n,n.nodeValue.length);break}e=n,t=-1}}r.input.composing=!0}Jn(r,Mo)},Fe.compositionend=(r,o)=>{r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=o.timeStamp,Jn(r,20))};const An=j&&At<15||wt&&ct<604;function Rn(r,o,s,d,e){let t=xt(r,o,s,d,r.state.selection.$from);if(r.someProp("handlePaste",u=>u(r,e,t||l.p2.empty)))return!0;if(!t)return!1;let n=function(r){return 0==r.openStart&&0==r.openEnd&&1==r.content.childCount?r.content.firstChild:null}(t),i=n?r.state.tr.replaceSelectionWith(n,r.input.shiftKey):r.state.tr.replaceSelection(t);return r.dispatch(i.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ie.copy=Fe.cut=(r,o)=>{let s=o,d=r.state.selection,e="cut"==s.type;if(d.empty)return;let t=An?null:s.clipboardData,n=d.content(),{dom:i,text:u}=Ct(r,n);t?(s.preventDefault(),t.clearData(),t.setData("text/html",i.innerHTML),t.setData("text/plain",u)):function(r,o){if(!r.dom.parentNode)return;let s=r.dom.parentNode.appendChild(document.createElement("div"));s.appendChild(o),s.style.cssText="position: fixed; left: -10000px; top: 10px";let d=getSelection(),e=document.createRange();e.selectNodeContents(o),r.dom.blur(),d.removeAllRanges(),d.addRange(e),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s),r.focus()},50)}(r,i),e&&r.dispatch(r.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Fe.paste=(r,o)=>{let s=o;if(r.composing&&!rt)return;let d=An?null:s.clipboardData;d&&Rn(r,d.getData("text/plain"),d.getData("text/html"),r.input.shiftKey,s)?s.preventDefault():function(r,o){if(!r.dom.parentNode)return;let s=r.input.shiftKey||r.state.selection.$from.parent.type.spec.code,d=r.dom.parentNode.appendChild(document.createElement(s?"textarea":"div"));s||(d.contentEditable="true"),d.style.cssText="position: fixed; left: -10000px; top: 10px",d.focus(),setTimeout(()=>{r.focus(),d.parentNode&&d.parentNode.removeChild(d),s?Rn(r,d.value,null,r.input.shiftKey,o):Rn(r,d.textContent,d.innerHTML,r.input.shiftKey,o)},50)}(r,s)};class Xn{constructor(o,s){this.slice=o,this.move=s}}const Ln=z?"altKey":"ctrlKey";Ie.dragstart=(r,o)=>{let s=o,d=r.input.mouseDown;if(d&&d.done(),!s.dataTransfer)return;let e=r.state.selection,t=e.empty?null:r.posAtCoords(nn(s));if(!(t&&t.pos>=e.from&&t.pos<=(e instanceof C.qv?e.to-1:e.to)))if(d&&d.mightDrag)r.dispatch(r.state.tr.setSelection(C.qv.create(r.state.doc,d.mightDrag.pos)));else if(s.target&&1==s.target.nodeType){let h=r.docView.nearestDesc(s.target,!0);h&&h.node.type.spec.draggable&&h!=r.docView&&r.dispatch(r.state.tr.setSelection(C.qv.create(r.state.doc,h.posBefore)))}let n=r.state.selection.content(),{dom:i,text:u}=Ct(r,n);s.dataTransfer.clearData(),s.dataTransfer.setData(An?"Text":"text/html",i.innerHTML),s.dataTransfer.effectAllowed="copyMove",An||s.dataTransfer.setData("text/plain",u),r.dragging=new Xn(n,!s[Ln])},Ie.dragend=r=>{let o=r.dragging;window.setTimeout(()=>{r.dragging==o&&(r.dragging=null)},50)},Fe.dragover=Fe.dragenter=(r,o)=>o.preventDefault(),Fe.drop=(r,o)=>{let s=o,d=r.dragging;if(r.dragging=null,!s.dataTransfer)return;let e=r.posAtCoords(nn(s));if(!e)return;let t=r.state.doc.resolve(e.pos),n=d&&d.slice;n?r.someProp("transformPasted",Y=>{n=Y(n,r)}):n=xt(r,s.dataTransfer.getData(An?"Text":"text/plain"),An?null:s.dataTransfer.getData("text/html"),!1,t);let i=!(!d||s[Ln]);if(r.someProp("handleDrop",Y=>Y(r,s,n||l.p2.empty,i)))return void s.preventDefault();if(!n)return;s.preventDefault();let u=n?(0,y.nj)(r.state.doc,t.pos,n):t.pos;null==u&&(u=t.pos);let h=r.state.tr;i&&h.deleteSelection();let T=h.mapping.map(u),D=0==n.openStart&&0==n.openEnd&&1==n.content.childCount,L=h.doc;if(D?h.replaceRangeWith(T,T,n.content.firstChild):h.replaceRange(T,T,n),h.doc.eq(L))return;let B=h.doc.resolve(T);if(D&&C.qv.isSelectable(n.content.firstChild)&&B.nodeAfter&&B.nodeAfter.sameMarkup(n.content.firstChild))h.setSelection(new C.qv(B));else{let Y=h.mapping.map(u);h.mapping.maps[h.mapping.maps.length-1].forEach((X,ht,Lt,Zt)=>Y=Zt),h.setSelection(hn(r,B,h.doc.resolve(Y)))}r.focus(),r.dispatch(h.setMeta("uiEvent","drop"))},Ie.focus=r=>{r.input.lastFocus=Date.now(),r.focused||(r.domObserver.stop(),r.dom.classList.add("ProseMirror-focused"),r.domObserver.start(),r.focused=!0,setTimeout(()=>{r.docView&&r.hasFocus()&&!r.domObserver.currentSelection.eq(r.domSelectionRange())&&le(r)},20))},Ie.blur=(r,o)=>{let s=o;r.focused&&(r.domObserver.stop(),r.dom.classList.remove("ProseMirror-focused"),r.domObserver.start(),s.relatedTarget&&r.dom.contains(s.relatedTarget)&&r.domObserver.currentSelection.clear(),r.focused=!1)},Ie.beforeinput=(r,o)=>{if(It&&rt&&"deleteContentBackward"==o.inputType){r.domObserver.flushSoon();let{domChangeCount:d}=r.input;setTimeout(()=>{if(r.input.domChangeCount!=d||(r.dom.blur(),r.focus(),r.someProp("handleKeyDown",t=>t(r,Ot(8,"Backspace")))))return;let{$cursor:e}=r.state.selection;e&&e.pos>0&&r.dispatch(r.state.tr.delete(e.pos-1,e.pos).scrollIntoView())},50)}};for(let r in Fe)Ie[r]=Fe[r];function En(r,o){if(r==o)return!0;for(let s in r)if(r[s]!==o[s])return!1;for(let s in o)if(!(s in r))return!1;return!0}class $n{constructor(o,s){this.toDOM=o,this.spec=s||Dn,this.side=this.spec.side||0}map(o,s,d,e){let{pos:t,deleted:n}=o.mapResult(s.from+e,this.side<0?-1:1);return n?null:new on(t-d,t-d,this)}valid(){return!0}eq(o){return this==o||o instanceof $n&&(this.spec.key&&this.spec.key==o.spec.key||this.toDOM==o.toDOM&&En(this.spec,o.spec))}destroy(o){this.spec.destroy&&this.spec.destroy(o)}}class pn{constructor(o,s){this.attrs=o,this.spec=s||Dn}map(o,s,d,e){let t=o.map(s.from+e,this.spec.inclusiveStart?-1:1)-d,n=o.map(s.to+e,this.spec.inclusiveEnd?1:-1)-d;return t>=n?null:new on(t,n,this)}valid(o,s){return s.from<s.to}eq(o){return this==o||o instanceof pn&&En(this.attrs,o.attrs)&&En(this.spec,o.spec)}static is(o){return o.type instanceof pn}destroy(){}}class Zn{constructor(o,s){this.attrs=o,this.spec=s||Dn}map(o,s,d,e){let t=o.mapResult(s.from+e,1);if(t.deleted)return null;let n=o.mapResult(s.to+e,-1);return n.deleted||n.pos<=t.pos?null:new on(t.pos-d,n.pos-d,this)}valid(o,s){let t,{index:d,offset:e}=o.content.findIndex(s.from);return e==s.from&&!(t=o.child(d)).isText&&e+t.nodeSize==s.to}eq(o){return this==o||o instanceof Zn&&En(this.attrs,o.attrs)&&En(this.spec,o.spec)}destroy(){}}class on{constructor(o,s,d){this.from=o,this.to=s,this.type=d}copy(o,s){return new on(o,s,this.type)}eq(o,s=0){return this.type.eq(o.type)&&this.from+s==o.from&&this.to+s==o.to}map(o,s,d){return this.type.map(o,this,s,d)}static widget(o,s,d){return new on(o,o,new $n(s,d))}static inline(o,s,d,e){return new on(o,s,new pn(d,e))}static node(o,s,d,e){return new on(o,s,new Zn(d,e))}get spec(){return this.type.spec}get inline(){return this.type instanceof pn}}const Nn=[],Dn={};class Ze{constructor(o,s){this.local=o.length?o:Nn,this.children=s.length?s:Nn}static create(o,s){return s.length?Yn(s,o,0,Dn):Ge}find(o,s,d){let e=[];return this.findInner(null==o?0:o,null==s?1e9:s,e,0,d),e}findInner(o,s,d,e,t){for(let n=0;n<this.local.length;n++){let i=this.local[n];i.from<=s&&i.to>=o&&(!t||t(i.spec))&&d.push(i.copy(i.from+e,i.to+e))}for(let n=0;n<this.children.length;n+=3)if(this.children[n]<s&&this.children[n+1]>o){let i=this.children[n]+1;this.children[n+2].findInner(o-i,s-i,d,e+i,t)}}map(o,s,d){return this==Ge||0==o.maps.length?this:this.mapInner(o,s,0,0,d||Dn)}mapInner(o,s,d,e,t){let n;for(let i=0;i<this.local.length;i++){let u=this.local[i].map(o,d,e);u&&u.type.valid(s,u)?(n||(n=[])).push(u):t.onRemove&&t.onRemove(this.local[i].spec)}return this.children.length?function(r,o,s,d,e,t,n){let i=r.slice();for(let h=0,T=t;h<s.maps.length;h++){let D=0;s.maps[h].forEach((L,B,Y,X)=>{let ht=X-Y-(B-L);for(let Lt=0;Lt<i.length;Lt+=3){let Zt=i[Lt+1];if(Zt<0||L>Zt+T-D)continue;let Vt=i[Lt]+T-D;B>=Vt?i[Lt+1]=L<=Vt?-2:-1:Y>=e&&ht&&(i[Lt]+=ht,i[Lt+1]+=ht)}D+=ht}),T=s.maps[h].map(T,-1)}let u=!1;for(let h=0;h<i.length;h+=3)if(i[h+1]<0){if(-2==i[h+1]){u=!0,i[h+1]=-1;continue}let T=s.map(r[h]+t),D=T-e;if(D<0||D>=d.content.size){u=!0;continue}let B=s.map(r[h+1]+t,-1)-e,{index:Y,offset:X}=d.content.findIndex(D),ht=d.maybeChild(Y);if(ht&&X==D&&X+ht.nodeSize==B){let Lt=i[h+2].mapInner(s,ht,T+1,r[h]+t+1,n);Lt!=Ge?(i[h]=D,i[h+1]=B,i[h+2]=Lt):(i[h+1]=-2,u=!0)}else u=!0}if(u){let h=function(r,o,s,d,e,t,n){function i(u,h){for(let T=0;T<u.local.length;T++){let D=u.local[T].map(d,e,h);D?s.push(D):n.onRemove&&n.onRemove(u.local[T].spec)}for(let T=0;T<u.children.length;T+=3)i(u.children[T+2],u.children[T]+h+1)}for(let u=0;u<r.length;u+=3)-1==r[u+1]&&i(r[u+2],o[u]+t+1);return s}(i,r,o,s,e,t,n),T=Yn(h,d,0,n);o=T.local;for(let D=0;D<i.length;D+=3)i[D+1]<0&&(i.splice(D,3),D-=3);for(let D=0,L=0;D<T.children.length;D+=3){let B=T.children[D];for(;L<i.length&&i[L]<B;)L+=3;i.splice(L,0,T.children[D],T.children[D+1],T.children[D+2])}}return new Ze(o.sort(_n),i)}(this.children,n||[],o,s,d,e,t):n?new Ze(n.sort(_n),Nn):Ge}add(o,s){return s.length?this==Ge?Ze.create(o,s):this.addInner(o,s,0):this}addInner(o,s,d){let e,t=0;o.forEach((i,u)=>{let T,h=u+d;if(T=qn(s,i,h)){for(e||(e=this.children.slice());t<e.length&&e[t]<u;)t+=3;e[t]==u?e[t+2]=e[t+2].addInner(i,T,h+1):e.splice(t,0,u,u+i.nodeSize,Yn(T,i,h+1,Dn)),t+=3}});let n=so(t?lo(s):s,-d);for(let i=0;i<n.length;i++)n[i].type.valid(o,n[i])||n.splice(i--,1);return new Ze(n.length?this.local.concat(n).sort(_n):this.local,e||this.children)}remove(o){return 0==o.length||this==Ge?this:this.removeInner(o,0)}removeInner(o,s){let d=this.children,e=this.local;for(let t=0;t<d.length;t+=3){let n,i=d[t]+s,u=d[t+1]+s;for(let D,T=0;T<o.length;T++)(D=o[T])&&D.from>i&&D.to<u&&(o[T]=null,(n||(n=[])).push(D));if(!n)continue;d==this.children&&(d=this.children.slice());let h=d[t+2].removeInner(n,i+1);h!=Ge?d[t+2]=h:(d.splice(t,3),t-=3)}if(e.length)for(let n,t=0;t<o.length;t++)if(n=o[t])for(let i=0;i<e.length;i++)e[i].eq(n,s)&&(e==this.local&&(e=this.local.slice()),e.splice(i--,1));return d==this.children&&e==this.local?this:e.length||d.length?new Ze(e,d):Ge}forChild(o,s){if(this==Ge)return this;if(s.isLeaf)return Ze.empty;let d,e;for(let i=0;i<this.children.length;i+=3)if(this.children[i]>=o){this.children[i]==o&&(d=this.children[i+2]);break}let t=o+1,n=t+s.content.size;for(let i=0;i<this.local.length;i++){let u=this.local[i];if(u.from<n&&u.to>t&&u.type instanceof pn){let h=Math.max(t,u.from)-t,T=Math.min(n,u.to)-t;h<T&&(e||(e=[])).push(u.copy(h,T))}}if(e){let i=new Ze(e.sort(_n),Nn);return d?new yn([i,d]):i}return d||Ge}eq(o){if(this==o)return!0;if(!(o instanceof Ze)||this.local.length!=o.local.length||this.children.length!=o.children.length)return!1;for(let s=0;s<this.local.length;s++)if(!this.local[s].eq(o.local[s]))return!1;for(let s=0;s<this.children.length;s+=3)if(this.children[s]!=o.children[s]||this.children[s+1]!=o.children[s+1]||!this.children[s+2].eq(o.children[s+2]))return!1;return!0}locals(o){return Wn(this.localsInner(o))}localsInner(o){if(this==Ge)return Nn;if(o.inlineContent||!this.local.some(pn.is))return this.local;let s=[];for(let d=0;d<this.local.length;d++)this.local[d].type instanceof pn||s.push(this.local[d]);return s}}Ze.empty=new Ze([],[]),Ze.removeOverlap=Wn;const Ge=Ze.empty;class yn{constructor(o){this.members=o}map(o,s){const d=this.members.map(e=>e.map(o,s,Dn));return yn.from(d)}forChild(o,s){if(s.isLeaf)return Ze.empty;let d=[];for(let e=0;e<this.members.length;e++){let t=this.members[e].forChild(o,s);t!=Ge&&(t instanceof yn?d=d.concat(t.members):d.push(t))}return yn.from(d)}eq(o){if(!(o instanceof yn)||o.members.length!=this.members.length)return!1;for(let s=0;s<this.members.length;s++)if(!this.members[s].eq(o.members[s]))return!1;return!0}locals(o){let s,d=!0;for(let e=0;e<this.members.length;e++){let t=this.members[e].localsInner(o);if(t.length)if(s){d&&(s=s.slice(),d=!1);for(let n=0;n<t.length;n++)s.push(t[n])}else s=t}return s?Wn(d?s:s.sort(_n)):Nn}static from(o){switch(o.length){case 0:return Ge;case 1:return o[0];default:return new yn(o.every(s=>s instanceof Ze)?o:o.reduce((s,d)=>s.concat(d instanceof Ze?d:d.members),[]))}}}function so(r,o){if(!o||!r.length)return r;let s=[];for(let d=0;d<r.length;d++){let e=r[d];s.push(new on(e.from+o,e.to+o,e.type))}return s}function qn(r,o,s){if(o.isLeaf)return null;let d=s+o.nodeSize,e=null;for(let n,t=0;t<r.length;t++)(n=r[t])&&n.from>s&&n.to<d&&((e||(e=[])).push(n),r[t]=null);return e}function lo(r){let o=[];for(let s=0;s<r.length;s++)null!=r[s]&&o.push(r[s]);return o}function Yn(r,o,s,d){let e=[],t=!1;o.forEach((i,u)=>{let h=qn(r,i,u+s);if(h){t=!0;let T=Yn(h,i,s+u+1,d);T!=Ge&&e.push(u,u+i.nodeSize,T)}});let n=so(t?lo(r):r,-s).sort(_n);for(let i=0;i<n.length;i++)n[i].type.valid(o,n[i])||(d.onRemove&&d.onRemove(n[i].spec),n.splice(i--,1));return n.length||e.length?new Ze(n,e):Ge}function _n(r,o){return r.from-o.from||r.to-o.to}function Wn(r){let o=r;for(let s=0;s<o.length-1;s++){let d=o[s];if(d.from!=d.to)for(let e=s+1;e<o.length;e++){let t=o[e];if(t.from!=d.from){t.from<d.to&&(o==r&&(o=r.slice()),o[s]=d.copy(d.from,t.from),xo(o,e,d.copy(t.from,d.to)));break}t.to!=d.to&&(o==r&&(o=r.slice()),o[e]=t.copy(t.from,d.to),xo(o,e+1,t.copy(d.to,t.to)))}}return o}function xo(r,o,s){for(;o<r.length&&_n(s,r[o])>0;)o++;r.splice(o,0,s)}function ao(r){let o=[];return r.someProp("decorations",s=>{let d=s(r.state);d&&d!=Ge&&o.push(d)}),r.cursorWrapper&&o.push(Ze.create(r.state.doc,[r.cursorWrapper.deco])),yn.from(o)}const Bo={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ho=j&&At<=11;class Uo{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(o){this.anchorNode=o.anchorNode,this.anchorOffset=o.anchorOffset,this.focusNode=o.focusNode,this.focusOffset=o.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(o){return o.anchorNode==this.anchorNode&&o.anchorOffset==this.anchorOffset&&o.focusNode==this.focusNode&&o.focusOffset==this.focusOffset}}class zo{constructor(o,s){this.view=o,this.handleDOMChange=s,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Uo,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(d=>{for(let e=0;e<d.length;e++)this.queue.push(d[e]);j&&At<=11&&d.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),Ho&&(this.onCharData=d=>{this.queue.push({target:d.target,type:"characterData",oldValue:d.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Bo)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let o=this.observer.takeRecords();if(o.length){for(let s=0;s<o.length;s++)this.queue.push(o[s]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Sn(this.view)){if(this.suppressingSelectionUpdates)return le(this.view);if(j&&At<=11&&!this.view.state.selection.empty){let o=this.view.domSelectionRange();if(o.focusNode&&G(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(o){if(!o.focusNode)return!0;let d,s=new Set;for(let t=o.focusNode;t;t=m(t))s.add(t);for(let t=o.anchorNode;t;t=m(t))if(s.has(t)){d=t;break}let e=d&&this.view.docView.nearestDesc(d);return e&&e.ignoreMutation({type:"selection",target:3==d.nodeType?d.parentNode:d})?(this.setCurSelection(),!0):void 0}flush(){let{view:o}=this;if(!o.docView||this.flushingSoon>-1)return;let s=this.observer?this.observer.takeRecords():[];this.queue.length&&(s=this.queue.concat(s),this.queue.length=0);let d=o.domSelectionRange(),e=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(d)&&Sn(o)&&!this.ignoreSelectionChange(d),t=-1,n=-1,i=!1,u=[];if(o.editable)for(let T=0;T<s.length;T++){let D=this.registerMutation(s[T],u);D&&(t=t<0?D.from:Math.min(D.from,t),n=n<0?D.to:Math.max(D.to,n),D.typeOver&&(i=!0))}if(Bt&&u.length>1){let T=u.filter(D=>"BR"==D.nodeName);if(2==T.length){let D=T[0],L=T[1];D.parentNode&&D.parentNode.parentNode==L.parentNode?L.remove():D.remove()}}let h=null;t<0&&e&&o.input.lastFocus>Date.now()-200&&Math.max(o.input.lastTouch,o.input.lastClick.time)<Date.now()-300&&mt(d)&&(h=Te(o))&&h.eq(C.Y1.near(o.state.doc.resolve(0),1))?(o.input.lastFocus=0,le(o),this.currentSelection.set(d),o.scrollToSelection()):(t>-1||e)&&(t>-1&&(o.docView.markDirty(t,n),function(r){if(!Ao.has(r)&&(Ao.set(r,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(r.dom).whiteSpace))){if(r.requiresGeckoHackNode=Bt,Do)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Do=!0}}(o)),this.handleDOMChange(t,n,i,u),o.docView&&o.docView.dirty?o.updateState(o.state):this.currentSelection.eq(d)||le(o),this.currentSelection.set(d))}registerMutation(o,s){if(s.indexOf(o.target)>-1)return null;let d=this.view.docView.nearestDesc(o.target);if("attributes"==o.type&&(d==this.view.docView||"contenteditable"==o.attributeName||"style"==o.attributeName&&!o.oldValue&&!o.target.getAttribute("style"))||!d||d.ignoreMutation(o))return null;if("childList"==o.type){for(let T=0;T<o.addedNodes.length;T++)s.push(o.addedNodes[T]);if(d.contentDOM&&d.contentDOM!=d.dom&&!d.contentDOM.contains(o.target))return{from:d.posBefore,to:d.posAfter};let e=o.previousSibling,t=o.nextSibling;if(j&&At<=11&&o.addedNodes.length)for(let T=0;T<o.addedNodes.length;T++){let{previousSibling:D,nextSibling:L}=o.addedNodes[T];(!D||Array.prototype.indexOf.call(o.addedNodes,D)<0)&&(e=D),(!L||Array.prototype.indexOf.call(o.addedNodes,L)<0)&&(t=L)}let n=e&&e.parentNode==o.target?A(e)+1:0,i=d.localPosFromDOM(o.target,n,-1),u=t&&t.parentNode==o.target?A(t):o.target.childNodes.length;return{from:i,to:d.localPosFromDOM(o.target,u,1)}}return"attributes"==o.type?{from:d.posAtStart-d.border,to:d.posAtEnd+d.border}:{from:d.posAtStart,to:d.posAtEnd,typeOver:o.target.nodeValue==o.oldValue}}}let Ao=new WeakMap,Do=!1;function So(r){let o=r.pmViewDesc;if(o)return o.parseRule();if("BR"==r.nodeName&&r.parentNode){if(Rt&&/^(ul|ol)$/i.test(r.parentNode.nodeName)){let s=document.createElement("div");return s.appendChild(document.createElement("li")),{skip:s}}if(r.parentNode.lastChild==r||Rt&&/^(tr|table)$/i.test(r.parentNode.nodeName))return{ignore:!0}}else if("IMG"==r.nodeName&&r.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Io=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function co(r,o,s){return Math.max(s.anchor,s.head)>o.content.size?null:hn(r,o.resolve(s.anchor),o.resolve(s.head))}function to(r,o,s){let d=r.depth,e=o?r.end():r.pos;for(;d>0&&(o||r.indexAfter(d)==r.node(d).childCount);)d--,e++,o=!1;if(s){let t=r.node(d).maybeChild(r.indexAfter(d));for(;t&&!t.isLeaf;)t=t.firstChild,e++}return e}class Ro{constructor(o,s){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Qn,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=s,this.state=s.state,this.directPlugins=s.plugins||[],this.directPlugins.forEach(go),this.dispatch=this.dispatch.bind(this),this.dom=o&&o.mount||document.createElement("div"),o&&(o.appendChild?o.appendChild(this.dom):"function"==typeof o?o(this.dom):o.mount&&(this.mounted=!0)),this.editable=Bn(this),fo(this),this.nodeViews=mo(this),this.docView=a(this.state.doc,ho(this),ao(this),this.dom,this),this.domObserver=new zo(this,(d,e,t,n)=>function(r,o,s,d,e){if(o<0){let ae=r.input.lastSelectionTime>Date.now()-50?r.input.lastSelectionOrigin:null,Ve=Te(r,ae);if(Ve&&!r.state.selection.eq(Ve)){if(It&&rt&&13===r.input.lastKeyCode&&Date.now()-100<r.input.lastKeyCodeTime&&r.someProp("handleKeyDown",bn=>bn(r,Ot(13,"Enter"))))return;let an=r.state.tr.setSelection(Ve);"pointer"==ae?an.setMeta("pointer",!0):"key"==ae&&an.scrollIntoView(),r.dispatch(an)}return}let t=r.state.doc.resolve(o),n=t.sharedDepth(s);o=t.before(n+1),s=r.state.doc.resolve(s).after(n+1);let D,L,i=r.state.selection,u=function(r,o,s){let h,{node:d,fromOffset:e,toOffset:t,from:n,to:i}=r.docView.parseRange(o,s),u=r.domSelectionRange(),T=u.anchorNode;if(T&&r.dom.contains(1==T.nodeType?T:T.parentNode)&&(h=[{node:T,offset:u.anchorOffset}],mt(u)||h.push({node:u.focusNode,offset:u.focusOffset})),It&&8===r.input.lastKeyCode)for(let ht=t;ht>e;ht--){let Lt=d.childNodes[ht-1],Zt=Lt.pmViewDesc;if("BR"==Lt.nodeName&&!Zt){t=ht;break}if(!Zt||Zt.size)break}let D=r.state.doc,L=r.someProp("domParser")||l.aw.fromSchema(r.state.schema),B=D.resolve(n),Y=null,X=L.parse(d,{topNode:B.parent,topMatch:B.parent.contentMatchAt(B.index()),topOpen:!0,from:e,to:t,preserveWhitespace:"pre"!=B.parent.type.whitespace||"full",findPositions:h,ruleFromNode:So,context:B});if(h&&null!=h[0].pos){let ht=h[0].pos,Lt=h[1]&&h[1].pos;null==Lt&&(Lt=ht),Y={anchor:ht+n,head:Lt+n}}return{doc:X,sel:Y,from:n,to:i}}(r,o,s),h=r.state.doc,T=h.slice(u.from,u.to);8===r.input.lastKeyCode&&Date.now()-100<r.input.lastKeyCodeTime?(D=r.state.selection.to,L="end"):(D=r.state.selection.from,L="start"),r.input.lastKeyCode=null;let B=function(r,o,s,d,e){let t=r.findDiffStart(o,s);if(null==t)return null;let{a:n,b:i}=r.findDiffEnd(o,s+r.size,s+o.size);return"end"==e&&(d-=n+Math.max(0,t-Math.min(n,i))-t),n<t&&r.size<o.size?(t-=d<=t&&d>=n?t-d:0,i=t+(i-n),n=t):i<t&&(t-=d<=t&&d>=i?t-d:0,n=t+(n-i),i=t),{start:t,endA:n,endB:i}}(T.content,u.doc.content,u.from,D,L);if((wt&&r.input.lastIOSEnter>Date.now()-225||rt)&&e.some(ae=>1==ae.nodeType&&!Io.test(ae.nodeName))&&(!B||B.endA>=B.endB)&&r.someProp("handleKeyDown",ae=>ae(r,Ot(13,"Enter"))))return void(r.input.lastIOSEnter=0);if(!B){if(!(d&&i instanceof C.Bs&&!i.empty&&i.$head.sameParent(i.$anchor))||r.composing||u.sel&&u.sel.anchor!=u.sel.head){if(u.sel){let ae=co(r,r.state.doc,u.sel);ae&&!ae.eq(r.state.selection)&&r.dispatch(r.state.tr.setSelection(ae))}return}B={start:i.from,endA:i.to,endB:i.to}}if(It&&r.cursorWrapper&&u.sel&&u.sel.anchor==r.cursorWrapper.deco.from&&u.sel.head==u.sel.anchor){let ae=B.endB-B.start;u.sel={anchor:u.sel.anchor+ae,head:u.sel.anchor+ae}}r.input.domChangeCount++,r.state.selection.from<r.state.selection.to&&B.start==B.endB&&r.state.selection instanceof C.Bs&&(B.start>r.state.selection.from&&B.start<=r.state.selection.from+2&&r.state.selection.from>=u.from?B.start=r.state.selection.from:B.endA<r.state.selection.to&&B.endA>=r.state.selection.to-2&&r.state.selection.to<=u.to&&(B.endB+=r.state.selection.to-B.endA,B.endA=r.state.selection.to)),j&&At<=11&&B.endB==B.start+1&&B.endA==B.start&&B.start>u.from&&" \xa0"==u.doc.textBetween(B.start-u.from-1,B.start-u.from+1)&&(B.start--,B.endA--,B.endB--);let Zt,Y=u.doc.resolveNoCache(B.start-u.from),X=u.doc.resolveNoCache(B.endB-u.from),ht=h.resolve(B.start),Lt=Y.sameParent(X)&&Y.parent.inlineContent&&ht.end()>=B.endA;if((wt&&r.input.lastIOSEnter>Date.now()-225&&(!Lt||e.some(ae=>"DIV"==ae.nodeName||"P"==ae.nodeName))||!Lt&&Y.pos<u.doc.content.size&&(Zt=C.Y1.findFrom(u.doc.resolve(Y.pos+1),1,!0))&&Zt.head==X.pos)&&r.someProp("handleKeyDown",ae=>ae(r,Ot(13,"Enter"))))return void(r.input.lastIOSEnter=0);if(r.state.selection.anchor>B.start&&function(r,o,s,d,e){if(!d.parent.isTextblock||s-o<=e.pos-d.pos||to(d,!0,!1)<e.pos)return!1;let t=r.resolve(o);if(t.parentOffset<t.parent.content.size||!t.parent.isTextblock)return!1;let n=r.resolve(to(t,!0,!0));return!(!n.parent.isTextblock||n.pos>s||to(n,!0,!1)<s)&&d.parent.content.cut(d.parentOffset).eq(n.parent.content)}(h,B.start,B.endA,Y,X)&&r.someProp("handleKeyDown",ae=>ae(r,Ot(8,"Backspace"))))return void(rt&&It&&r.domObserver.suppressSelectionUpdates());It&&rt&&B.endB==B.start&&(r.input.lastAndroidDelete=Date.now()),rt&&!Lt&&Y.start()!=X.start()&&0==X.parentOffset&&Y.depth==X.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==B.endA&&(B.endB-=2,X=u.doc.resolveNoCache(B.endB-u.from),setTimeout(()=>{r.someProp("handleKeyDown",function(ae){return ae(r,Ot(13,"Enter"))})},20));let qt,Se,Ke,Vt=B.start,Xt=B.endA;if(Lt)if(Y.pos==X.pos)j&&At<=11&&0==Y.parentOffset&&(r.domObserver.suppressSelectionUpdates(),setTimeout(()=>le(r),20)),qt=r.state.tr.delete(Vt,Xt),Se=h.resolve(B.start).marksAcross(h.resolve(B.endA));else if(B.endA==B.endB&&(Ke=function(r,o){let n,i,u,s=r.firstChild.marks,d=o.firstChild.marks,e=s,t=d;for(let T=0;T<d.length;T++)e=d[T].removeFromSet(e);for(let T=0;T<s.length;T++)t=s[T].removeFromSet(t);if(1==e.length&&0==t.length)i=e[0],n="add",u=T=>T.mark(i.addToSet(T.marks));else{if(0!=e.length||1!=t.length)return null;i=t[0],n="remove",u=T=>T.mark(i.removeFromSet(T.marks))}let h=[];for(let T=0;T<o.childCount;T++)h.push(u(o.child(T)));if(l.HY.from(h).eq(r))return{mark:i,type:n}}(Y.parent.content.cut(Y.parentOffset,X.parentOffset),ht.parent.content.cut(ht.parentOffset,B.endA-ht.start()))))qt=r.state.tr,"add"==Ke.type?qt.addMark(Vt,Xt,Ke.mark):qt.removeMark(Vt,Xt,Ke.mark);else if(Y.parent.child(Y.index()).isText&&Y.index()==X.index()-(X.textOffset?0:1)){let ae=Y.parent.textBetween(Y.parentOffset,X.parentOffset);if(r.someProp("handleTextInput",Ve=>Ve(r,Vt,Xt,ae)))return;qt=r.state.tr.insertText(ae,Vt,Xt)}if(qt||(qt=r.state.tr.replace(Vt,Xt,u.doc.slice(B.start-u.from,B.endB-u.from))),u.sel){let ae=co(r,qt.doc,u.sel);ae&&!(It&&rt&&r.composing&&ae.empty&&(B.start!=B.endB||r.input.lastAndroidDelete<Date.now()-100)&&(ae.head==Vt||ae.head==qt.mapping.map(Xt)-1)||j&&ae.empty&&ae.head==Vt)&&qt.setSelection(ae)}Se&&qt.ensureMarks(Se),r.dispatch(qt.scrollIntoView())}(this,d,e,t,n)),this.domObserver.start(),function(r){for(let o in Ie){let s=Ie[o];r.dom.addEventListener(o,r.input.eventHandlers[o]=d=>{mn(r,d)&&!un(r,d)&&(r.editable||!(d.type in Fe))&&s(r,d)},Vn[o]?{passive:!0}:void 0)}Rt&&r.dom.addEventListener("input",()=>null),Cn(r)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let o=this._props;this._props={};for(let s in o)this._props[s]=o[s];this._props.state=this.state}return this._props}update(o){o.handleDOMEvents!=this._props.handleDOMEvents&&Cn(this);let s=this._props;this._props=o,o.plugins&&(o.plugins.forEach(go),this.directPlugins=o.plugins),this.updateStateInner(o.state,s)}setProps(o){let s={};for(let d in this._props)s[d]=this._props[d];s.state=this.state;for(let d in o)s[d]=o[d];this.update(s)}updateState(o){this.updateStateInner(o,this._props)}updateStateInner(o,s){let d=this.state,e=!1,t=!1;o.storedMarks&&this.composing&&(io(this),t=!0),this.state=o;let n=d.plugins!=o.plugins||this._props.plugins!=s.plugins;if(n||this._props.plugins!=s.plugins||this._props.nodeViews!=s.nodeViews){let L=mo(this);(function(r,o){let s=0,d=0;for(let e in r){if(r[e]!=o[e])return!0;s++}for(let e in o)d++;return s!=d})(L,this.nodeViews)&&(this.nodeViews=L,e=!0)}(n||s.handleDOMEvents!=this._props.handleDOMEvents)&&Cn(this),this.editable=Bn(this),fo(this);let i=ao(this),u=ho(this),h=d.plugins==o.plugins||d.doc.eq(o.doc)?o.scrollToSelection>d.scrollToSelection?"to selection":"preserve":"reset",T=e||!this.docView.matchesNode(o.doc,u,i);(T||!o.selection.eq(d.selection))&&(t=!0);let D="preserve"==h&&t&&null==this.dom.style.overflowAnchor&&function(r){let d,e,o=r.dom.getBoundingClientRect(),s=Math.max(0,o.top);for(let t=(o.left+o.right)/2,n=s+1;n<Math.min(innerHeight,o.bottom);n+=5){let i=r.root.elementFromPoint(t,n);if(!i||i==r.dom||!r.dom.contains(i))continue;let u=i.getBoundingClientRect();if(u.top>=s-20){d=i,e=u.top;break}}return{refDOM:d,refTop:e,stack:Kt(r.dom)}}(this);if(t){this.domObserver.stop();let L=T&&(j||It)&&!this.composing&&!d.selection.empty&&!o.selection.empty&&function(r,o){let s=Math.min(r.$anchor.sharedDepth(r.head),o.$anchor.sharedDepth(o.head));return r.$anchor.start(s)!=o.$anchor.start(s)}(d.selection,o.selection);if(T){let B=It?this.trackWrites=this.domSelectionRange().focusNode:null;(e||!this.docView.update(o.doc,u,i,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=a(o.doc,u,i,this.dom,this)),B&&!this.trackWrites&&(L=!0)}L||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(r){let o=r.docView.domFromPos(r.state.selection.anchor,0),s=r.domSelectionRange();return G(o.node,o.offset,s.anchorNode,s.anchorOffset)}(this))?le(this,L):(Hn(this,o.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(d),"reset"==h?this.dom.scrollTop=0:"to selection"==h?this.scrollToSelection():D&&function({refDOM:r,refTop:o,stack:s}){let d=r?r.getBoundingClientRect().top:0;zt(s,0==d?0:d-o)}(D)}scrollToSelection(){let o=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",s=>s(this)))if(this.state.selection instanceof C.qv){let s=this.docView.domAfterPos(this.state.selection.from);1==s.nodeType&&Et(this,s.getBoundingClientRect(),o)}else Et(this,this.coordsAtPos(this.state.selection.head,1),o)}destroyPluginViews(){let o;for(;o=this.pluginViews.pop();)o.destroy&&o.destroy()}updatePluginViews(o){if(o&&o.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let s=0;s<this.pluginViews.length;s++){let d=this.pluginViews[s];d.update&&d.update(this,o)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let s=0;s<this.directPlugins.length;s++){let d=this.directPlugins[s];d.spec.view&&this.pluginViews.push(d.spec.view(this))}for(let s=0;s<this.state.plugins.length;s++){let d=this.state.plugins[s];d.spec.view&&this.pluginViews.push(d.spec.view(this))}}}someProp(o,s){let e,d=this._props&&this._props[o];if(null!=d&&(e=s?s(d):d))return e;for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n].props[o];if(null!=i&&(e=s?s(i):i))return e}let t=this.state.plugins;if(t)for(let n=0;n<t.length;n++){let i=t[n].props[o];if(null!=i&&(e=s?s(i):i))return e}}hasFocus(){if(j){let o=this.root.activeElement;if(o==this.dom)return!0;if(!o||!this.dom.contains(o))return!1;for(;o&&this.dom!=o&&this.dom.contains(o);){if("false"==o.contentEditable)return!1;o=o.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(r){if(r.setActive)return r.setActive();if(ce)return r.focus(ce);let o=Kt(r);r.focus(null==ce?{get preventScroll(){return ce={preventScroll:!0},!0}}:void 0),ce||(ce=!1,zt(o,0))}(this.dom),le(this),this.domObserver.start()}get root(){let o=this._root;if(null==o)for(let s=this.dom.parentNode;s;s=s.parentNode)if(9==s.nodeType||11==s.nodeType&&s.host)return s.getSelection||(Object.getPrototypeOf(s).getSelection=()=>s.ownerDocument.getSelection()),this._root=s;return o||document}posAtCoords(o){return Ce(this,o)}coordsAtPos(o,s=1){return Me(this,o,s)}domAtPos(o,s=0){return this.docView.domFromPos(o,s)}nodeDOM(o){let s=this.docView.descAt(o);return s?s.nodeDOM:null}posAtDOM(o,s,d=-1){let e=this.docView.posFromDOM(o,s,d);if(null==e)throw new RangeError("DOM position not inside the editor");return e}endOfTextblock(o,s){return function(r,o,s){return _e==o&&fe==s?Ee:(_e=o,fe=s,Ee="up"==s||"down"==s?function(r,o,s){let d=o.selection,e="up"==s?d.$from:d.$to;return He(r,o,()=>{let{node:t}=r.docView.domFromPos(e.pos,"up"==s?-1:1);for(;;){let i=r.docView.nearestDesc(t,!0);if(!i)break;if(i.node.isBlock){t=i.contentDOM||i.dom;break}t=i.dom.parentNode}let n=Me(r,e.pos,1);for(let i=t.firstChild;i;i=i.nextSibling){let u;if(1==i.nodeType)u=i.getClientRects();else{if(3!=i.nodeType)continue;u=N(i,0,i.nodeValue.length).getClientRects()}for(let h=0;h<u.length;h++){let T=u[h];if(T.bottom>T.top+1&&("up"==s?n.top-T.top>2*(T.bottom-n.top):T.bottom-n.bottom>2*(n.bottom-T.top)))return!1}}return!0})}(r,o,s):function(r,o,s){let{$head:d}=o.selection;if(!d.parent.isTextblock)return!1;let e=d.parentOffset,t=!e,n=e==d.parent.content.size,i=r.domSelection();return Le.test(d.parent.textContent)&&i.modify?He(r,o,()=>{let{focusNode:u,focusOffset:h,anchorNode:T,anchorOffset:D}=r.domSelectionRange(),L=i.caretBidiLevel;i.modify("move",s,"character");let B=d.depth?r.docView.domAfterPos(d.before()):r.dom,{focusNode:Y,focusOffset:X}=r.domSelectionRange(),ht=Y&&!B.contains(1==Y.nodeType?Y:Y.parentNode)||u==Y&&h==X;try{i.collapse(T,D),u&&(u!=T||h!=D)&&i.extend&&i.extend(u,h)}catch(Lt){}return null!=L&&(i.caretBidiLevel=L),ht}):"left"==s||"backward"==s?t:n}(r,o,s))}(this,s||this.state,o)}pasteHTML(o,s){return Rn(this,"",o,!1,s||new ClipboardEvent("paste"))}pasteText(o,s){return Rn(this,o,null,!0,s||new ClipboardEvent("paste"))}destroy(){!this.docView||(function(r){r.domObserver.stop();for(let o in r.input.eventHandlers)r.dom.removeEventListener(o,r.input.eventHandlers[o]);clearTimeout(r.input.composingTimeout),clearTimeout(r.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ao(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(o){return function(r,o){!un(r,o)&&Ie[o.type]&&(r.editable||!(o.type in Fe))&&Ie[o.type](r,o)}(this,o)}dispatch(o){let s=this._props.dispatchTransaction;s?s.call(this,o):this.updateState(this.state.apply(o))}domSelectionRange(){return Rt&&11===this.root.nodeType&&function(r){let o=r.activeElement;for(;o&&o.shadowRoot;)o=o.shadowRoot.activeElement;return o}(this.dom.ownerDocument)==this.dom?function(r){let o;function s(u){u.preventDefault(),u.stopImmediatePropagation(),o=u.getTargetRanges()[0]}r.dom.addEventListener("beforeinput",s,!0),document.execCommand("indent"),r.dom.removeEventListener("beforeinput",s,!0);let d=o.startContainer,e=o.startOffset,t=o.endContainer,n=o.endOffset,i=r.domAtPos(r.state.selection.anchor);return G(i.node,i.offset,t,n)&&([d,e,t,n]=[t,n,d,e]),{anchorNode:d,anchorOffset:e,focusNode:t,focusOffset:n}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function ho(r){let o=Object.create(null);return o.class="ProseMirror",o.contenteditable=String(r.editable),o.translate="no",r.someProp("attributes",s=>{if("function"==typeof s&&(s=s(r.state)),s)for(let d in s)"class"==d&&(o.class+=" "+s[d]),"style"==d?o.style=(o.style?o.style+";":"")+s[d]:!o[d]&&"contenteditable"!=d&&"nodeName"!=d&&(o[d]=String(s[d]))}),[on.node(0,r.state.doc.content.size,o)]}function fo(r){if(r.markCursor){let o=document.createElement("img");o.className="ProseMirror-separator",o.setAttribute("mark-placeholder","true"),o.setAttribute("alt",""),r.cursorWrapper={dom:o,deco:on.widget(r.state.selection.head,o,{raw:!0,marks:r.markCursor})}}else r.cursorWrapper=null}function Bn(r){return!r.someProp("editable",o=>!1===o(r.state))}function mo(r){let o=Object.create(null);function s(d){for(let e in d)Object.prototype.hasOwnProperty.call(o,e)||(o[e]=d[e])}return r.someProp("nodeViews",s),r.someProp("markViews",s),o}function go(r){if(r.spec.state||r.spec.filterTransaction||r.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}}}]);