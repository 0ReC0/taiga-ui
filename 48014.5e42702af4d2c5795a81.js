"use strict";var Qo=Object.defineProperty,Go=Object.defineProperties,Xo=Object.getOwnPropertyDescriptors,_o=Object.getOwnPropertySymbols,$o=Object.prototype.hasOwnProperty,Zo=Object.prototype.propertyIsEnumerable,Yo=(jt,Et,c)=>Et in jt?Qo(jt,Et,{enumerable:!0,configurable:!0,writable:!0,value:c}):jt[Et]=c,Gt=(jt,Et)=>{for(var c in Et||(Et={}))$o.call(Et,c)&&Yo(jt,c,Et[c]);if(_o)for(var c of _o(Et))Zo.call(Et,c)&&Yo(jt,c,Et[c]);return jt},ge=(jt,Et)=>Go(jt,Xo(Et)),jo=(jt,Et)=>{var c={};for(var M in jt)$o.call(jt,M)&&Et.indexOf(M)<0&&(c[M]=jt[M]);if(null!=jt&&_o)for(var M of _o(jt))Et.indexOf(M)<0&&Zo.call(jt,M)&&(c[M]=jt[M]);return c};(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[48014],{77361:(jt,Et,c)=>{c.d(Et,{_:()=>y});var M=c(79765),l=c(74788);let y=(()=>{class P{constructor(){this.stateChange$=new M.xQ,this.valueChange$=new M.xQ}}return P.\u0275fac=function(it){return new(it||P)},P.\u0275dir=l.lG2({type:P}),P})()},97019:(jt,Et,c)=>{c.d(Et,{h:()=>St});var M=c(64762),l=c(74788),y=c(50259),P=c(50170),g=c(1414),it=c(10200),B=c(33250),X=c(68874),tt=c(24751),ft=c(52219),ut=c(12057),et=c(65009),Tt=c(10383),Ct=c(20933),bt=c(35065),It=c(63060),Pt=c(62733),Dt=c(48214),ht=c(11189),q=c(91030);function W(yt,Lt){if(1&yt&&(l.TgZ(0,"button",7),l._uU(1),l.qZA()),2&yt){const Ht=Lt.$implicit;l.Q6J("value",Ht),l.xp6(1),l.hij(" ",Ht," ")}}function mt(yt,Lt){if(1&yt&&(l.TgZ(0,"tui-data-list",5),l.YNc(1,W,2,2,"button",6),l.qZA()),2&yt){const Ht=l.oxw();l.xp6(1),l.Q6J("ngForOf",Ht.modes)}}function j(yt,Lt){if(1&yt){const Ht=l.EpF();l.TgZ(0,"tui-primitive-textfield",8),l.NdJ("valueChange",function(pt){return l.CHM(Ht),l.oxw().onHexChange(pt)}),l._UZ(1,"input",9),l.qZA()}if(2&yt){const Ht=l.oxw();l.Q6J("textMask",Ht.hexMask)("tuiTextfieldLabelOutside",!0)("value",Ht.hex)}}function At(yt,Lt){if(1&yt){const Ht=l.EpF();l.TgZ(0,"tui-input-count",10),l.NdJ("ngModelChange",function(pt){l.CHM(Ht);const L=l.oxw();return L.onRgbChange(pt,L.color[1],L.color[2],L.color[3])}),l.qZA(),l.TgZ(1,"tui-input-count",10),l.NdJ("ngModelChange",function(pt){l.CHM(Ht);const L=l.oxw();return L.onRgbChange(L.color[0],pt,L.color[2],L.color[3])}),l.qZA(),l.TgZ(2,"tui-input-count",10),l.NdJ("ngModelChange",function(pt){l.CHM(Ht);const L=l.oxw();return L.onRgbChange(L.color[0],L.color[1],pt,L.color[3])}),l.qZA()}if(2&yt){const Ht=l.oxw();l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Ht.color[0]),l.xp6(1),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Ht.color[1]),l.xp6(1),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Ht.color[2])}}class St{constructor(){this.color=[0,0,0,1],this.colorChange=new l.vpe,this.hexMask={mask:({length:Lt})=>Array.from({length:Lt},()=>/\d|[a-f]|[A-F]/),guide:!1},this.modes=["HEX","RGB"],this.mode=this.modes[0]}get isHex(){return this.mode===this.modes[0]}get hex(){return(0,y.tuiRgbToHex)(this.color[0],this.color[1],this.color[2]).replace("#","")}get opacity(){return Math.round(100*this.color[3])}onHexChange(Lt){if(6!==Lt.length)return;const Ht=(0,y.tuiHexToRgb)(Lt);this.updateColor([Ht[0],Ht[1],Ht[2],this.color[3]])}onRgbChange(...Lt){this.updateColor(Lt)}updateColor(Lt){this.color=Lt,this.colorChange.emit(Lt)}}St.\u0275fac=function(Lt){return new(Lt||St)},St.\u0275cmp=l.Xpm({type:St,selectors:[["tui-color-edit"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:6,vars:8,consts:[["tuiTextfieldSize","m","tuiDropdownAlign","left","tuiDropdownLimitWidth","min",1,"t-select","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","ngModel","ngModelChange"],["size","s",4,"tuiDataList"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange",4,"ngIf","ngIfElse"],["rgb",""],["postfix","%","tuiTextfieldSize","m",1,"t-opacity","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"],["size","s"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange"],["tuiTextfield","","maxlength","6"],["tuiTextfieldSize","m",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"]],template:function(Lt,Ht){if(1&Lt&&(l.TgZ(0,"tui-select",0),l.NdJ("ngModelChange",function(pt){return Ht.mode=pt}),l.YNc(1,mt,2,1,"tui-data-list",1),l.qZA(),l.YNc(2,j,2,3,"tui-primitive-textfield",2),l.YNc(3,At,3,12,"ng-template",null,3,l.W1O),l.TgZ(5,"tui-input-count",4),l.NdJ("ngModelChange",function(pt){return Ht.onRgbChange(Ht.color[0],Ht.color[1],Ht.color[2],pt/100)}),l.qZA()),2&Lt){const Kt=l.MAs(4);l.Q6J("tuiTextfieldLabelOutside",!0)("ngModel",Ht.mode),l.xp6(2),l.Q6J("ngIf",Ht.isHex)("ngIfElse",Kt),l.xp6(3),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",100)("ngModel",Ht.opacity)}},directives:[P.u,g.O,it.s,B.Ek,X.x,tt.JJ,tt.On,ft.g,ut.O5,et.E,Tt.a,Ct.q,ut.sg,bt.v,It.y,Pt.B,Dt.n,ht.h,q.M],styles:["[_nghost-%COMP%]{display:flex}.t-select[_ngcontent-%COMP%]{width:4.875rem}.t-opacity[_ngcontent-%COMP%]{width:4.275rem}"],changeDetection:0}),(0,M.gn)([(0,y.tuiDefaultProp)()],St.prototype,"color",void 0)},49289:(jt,Et,c)=>{c.d(Et,{$:()=>B});var M=c(64762),l=c(74788),y=c(91211),P=c(50259),g=c(71424),it=c(65720);class B{constructor(tt){this.sanitizer=tt,this.colorChange=new l.vpe,this.point=[0,1],this.hue=0,this.opacity=1}set color(tt){if(this.currentColor.every((Tt,Ct)=>Tt===tt[Ct])&&tt[3]===this.opacity)return;const[ft,ut,et]=(0,P.tuiRgbToHsv)(tt[0],tt[1],tt[2]);this.opacity=tt[3],this.hue=ft/360,this.point=[ut,1-et/255]}get currentColor(){return this.getCurrentColor(this.hue,this.point)}get base(){return`rgb(${(0,P.tuiHsvToRgb)(360*this.hue,1,255)})`}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(`linear-gradient(to right, rgba(${this.currentColor.join(",")}, 0), rgb(${this.currentColor.join(",")}))`)}onPointChange(tt){this.point=tt,this.updateColor()}onHueChange(tt){this.hue=tt,this.updateColor()}onOpacityChange(tt){this.opacity=(0,P.tuiRound)(tt,2),this.updateColor()}getCurrentColor(tt,ft){return(0,P.tuiHsvToRgb)(360*tt,ft[0],255*(1-ft[1]))}updateColor(){this.colorChange.emit([...this.currentColor,this.opacity])}}B.\u0275fac=function(tt){return new(tt||B)(l.Y36(y.H7))},B.\u0275cmp=l.Xpm({type:B,selectors:[["tui-color-picker"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:5,vars:7,consts:[[1,"t-flat",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_hue"],[1,"t-hue",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_opacity"],[1,"t-opacity",3,"value","valueChange"]],template:function(tt,ft){1&tt&&(l.TgZ(0,"tui-flat-picker",0),l.NdJ("valueChange",function(et){return ft.onPointChange(et)}),l.qZA(),l.TgZ(1,"div",1),l.TgZ(2,"tui-linear-picker",2),l.NdJ("valueChange",function(et){return ft.onHueChange(et)}),l.qZA(),l.qZA(),l.TgZ(3,"div",3),l.TgZ(4,"tui-linear-picker",4),l.NdJ("valueChange",function(et){return ft.onOpacityChange(et)}),l.qZA(),l.qZA()),2&tt&&(l.Udp("background-color",ft.base),l.Q6J("value",ft.point),l.xp6(2),l.Q6J("value",ft.hue),l.xp6(1),l.Udp("background",ft.gradient),l.xp6(1),l.Q6J("value",ft.opacity))},directives:[g.J,it.P],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block}.t-flat[_ngcontent-%COMP%]{height:14rem;background:linear-gradient(rgba(0,0,0,0),#000000),linear-gradient(to right,#ffffff,rgba(255,255,255,0));margin-bottom:.25rem;overflow:hidden}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1rem 1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper_hue[_ngcontent-%COMP%]{background:#ff0000}.t-wrapper_opacity[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hue[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff0000,#ffff00,#00ff00,#00ffff,#0000ff,#ff00ff,#ff0000);border-radius:inherit;margin:0 .5rem}.t-opacity[_ngcontent-%COMP%]{border-radius:inherit;margin:0 .5rem}'],changeDetection:0}),(0,M.gn)([(0,P.tuiDefaultProp)()],B.prototype,"color",null),(0,M.gn)([P.tuiPure],B.prototype,"getCurrentColor",null)},23999:(jt,Et,c)=>{c.d(Et,{s:()=>st});var M=c(64762),l=c(74788),y=c(91211),P=c(14309),g=c(27863),it=c(50259),B=c(62939),X=c(76189),tt=c(12057),ft=c(49289),ut=c(34880),et=c(20933),Tt=c(35065),Ct=c(49472),bt=c(219),It=c(67446),Pt=c(29070),Dt=c(54255),ht=c(15491),q=c(97019),W=c(39607),mt=c(5451);function j(J,Q){if(1&J&&l._UZ(0,"tui-svg",9),2&J){l.oxw();const ot=l.MAs(1);l.ekj("t-arrow_rotated",ot.open)}}function At(J,Q){1&J&&l._UZ(0,"tui-svg",14)}function St(J,Q){if(1&J){const ot=l.EpF();l.TgZ(0,"button",12),l.NdJ("keydown.enter.prevent",function(){const Yt=l.CHM(ot).$implicit,ne=l.oxw(2),zt=l.MAs(1);return ne.onModeSelect(Yt,zt)})("keydown.space.prevent",function(){const Yt=l.CHM(ot).$implicit,ne=l.oxw(2),zt=l.MAs(1);return ne.onModeSelect(Yt,zt)})("click",function(){const Yt=l.CHM(ot).$implicit,ne=l.oxw(2),zt=l.MAs(1);return ne.onModeSelect(Yt,zt)}),l._uU(1),l.YNc(2,At,1,0,"tui-svg",13),l.qZA()}if(2&J){const ot=Q.$implicit,kt=l.oxw(2);l.uIk("aria-checked",kt.isModeActive(ot)),l.xp6(1),l.hij(" ",ot," "),l.xp6(1),l.Q6J("ngIf",kt.isModeActive(ot))}}function yt(J,Q){if(1&J&&(l.TgZ(0,"tui-data-list",10),l.YNc(1,St,3,3,"button",11),l.qZA()),2&J){const ot=l.oxw();l.xp6(1),l.Q6J("ngForOf",ot.modes)}}function Lt(J,Q){if(1&J){const ot=l.EpF();l.TgZ(0,"button",20),l.NdJ("click",function(){const Yt=l.CHM(ot).$implicit;return l.oxw(2).onDirectionChange(Yt)}),l.qZA()}if(2&J){const ot=Q.$implicit,kt=l.oxw(2);l.ekj("t-direction_active",kt.isDirectionActive(ot)),l.Q6J("icon",kt.getIcon(ot))("tuiHint",ot)}}function Ht(J,Q){if(1&J){const ot=l.EpF();l.ynx(0),l._UZ(1,"hr",15),l.TgZ(2,"div",16),l.TgZ(3,"tui-linear-multi-picker",17),l.NdJ("valueChange",function($t){return l.CHM(ot),l.oxw().onStopsChange($t)})("indexChange",function($t){return l.CHM(ot),l.oxw().onIndexChange($t)}),l.qZA(),l.qZA(),l.TgZ(4,"div",18),l.YNc(5,Lt,1,4,"button",19),l.qZA(),l.BQk()}if(2&J){const ot=l.oxw();l.xp6(2),l.Udp("background",ot.gradient),l.xp6(1),l.Q6J("value",ot.stopsKeys),l.xp6(2),l.Q6J("ngForOf",ot.buttons)}}function Kt(J,Q){if(1&J){const ot=l.EpF();l.TgZ(0,"tui-color-edit",21),l.NdJ("colorChange",function($t){return l.CHM(ot),l.oxw().onColorChange($t)}),l.qZA()}if(2&J){const ot=l.oxw();l.Q6J("color",ot.color)}}function pt(J,Q){if(1&J){const ot=l.EpF();l.TgZ(0,"tui-palette",22),l.NdJ("selectedColor",function($t){return l.CHM(ot),l.oxw().onPalettePick($t)}),l.qZA()}if(2&J){const ot=l.oxw();l.Q6J("colors",ot.palette)}}const L=[0,0,0,0],rt=[[0,[0,0,0,1]],[1,[255,255,255,1]]],ct={"to top right":"tuiIconArrowUpRight","to right":"tuiIconArrowRight","to bottom right":"tuiIconArrowDownRight","to bottom":"tuiIconArrowDown","to bottom left":"tuiIconArrowDownLeft","to left":"tuiIconArrowLeft","to top left":"tuiIconArrowUpLeft","to top":"tuiIconArrowUp"};class st{constructor(Q,ot){this.sanitizer=Q,this.modes=ot,this.stops=new Map(rt),this.currentStop=0,this.direction="to bottom",this.colors=new Map,this.colorChange=new l.vpe,this.color=[0,0,0,1],this.currentMode=this.modes[0],this.buttons=["to top right","to right","to bottom right","to bottom","to bottom left","to left","to top left","to top"]}set colorSetter(Q){this.parse(Q)}get palette(){return this.filterPalette(this.colors,this.isGradient)}get stopsKeys(){return this.getStopsKeys(this.stops)}get currentColor(){return this.isGradient?this.getStop(this.currentStop):this.color}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(this.getGradient("to right"))}get isGradient(){return this.currentMode===this.modes[1]}getIcon(Q){return ct[Q]}isModeActive(Q){return this.currentMode===Q}isDirectionActive(Q){return this.direction===Q}onPalettePick(Q){this.updateColor(Q)}onDirectionChange(Q){this.direction=Q,this.updateColor(this.getGradient(Q))}onModeSelect(Q,ot){this.currentMode=Q,ot.open=!1,this.updateColor(Q===this.modes[0]?`rgba(${this.color.join(", ")})`:this.getGradient(this.direction))}onIndexChange(Q){this.currentStop=this.stopsKeys[Q]}onColorChange(Q){this.isGradient?(this.stops.set(this.currentStop,Q),this.updateColor(this.getGradient(this.direction))):this.updateColor(`rgba(${Q.join(", ")})`)}onStopsChange(Q){const ot=this.stopsKeys.find($t=>!Q.includes($t)),kt=Q.find($t=>!this.stopsKeys.includes($t));void 0===ot&&void 0!==kt&&this.addStop(kt),void 0!==ot&&void 0===kt&&this.removeStop(ot),void 0!==ot&&void 0!==kt&&this.replaceStop(ot,kt),this.updateColor(this.getGradient(this.direction))}getStopsKeys(Q){return Array.from(Q.keys())}filterPalette(Q,ot){const kt=new Map(Q);return kt.forEach(($t,Yt)=>{($t.startsWith("linear-gradient")&&!ot||!$t.startsWith("linear-gradient")&&ot)&&kt.delete(Yt)}),kt}updateColor(Q){this.colorChange.emit(Q)}getGradient(Q){return`linear-gradient(${Q}, ${[...this.stopsKeys].sort().map(ot=>`rgba(${this.getStop(ot).join(", ")}) ${100*ot}%`).join(", ")})`}getStop(Q){return this.stops.get(Q)||L}addStop(Q){const ot=this.stopsKeys.reduce((kt,$t)=>Math.abs($t-Q)<Math.abs(kt-Q)?$t:kt,this.stopsKeys[0]);this.stops.set(Q,this.getStop(ot)),this.stops=new Map(this.stops),this.currentStop=Q}removeStop(Q){this.stops.delete(Q),this.stops=new Map(this.stops),this.currentStop=this.stopsKeys[0]}replaceStop(Q,ot){const kt=this.getStop(Q);this.currentStop=ot,this.stops=new Map(this.stopsKeys.map($t=>$t===Q?[ot,kt]:[$t,this.getStop($t)]))}parse(Q){Q.startsWith("linear-gradient")?this.parseGradient(Q):this.parseColor(Q)}parseGradient(Q){if(Q===this.getGradient(this.direction))return;const ot=(0,g._N)((0,g.U5)(Q));this.currentMode=this.modes[1],this.direction=ot.side,this.currentStop=0,this.stops=new Map(ot.stops.length?ot.stops.map(({color:kt,position:$t})=>[parseFloat($t)/100,(0,it.tuiParseColor)(kt)]):rt)}parseColor(Q){this.currentMode=this.modes[0],this.currentStop=0,this.color=(0,it.tuiParseColor)(Q)}}st.\u0275fac=function(Q){return new(Q||st)(l.Y36(y.H7),l.Y36(P.dj))},st.\u0275cmp=l.Xpm({type:st,selectors:[["tui-color-selector"]],inputs:{colors:"colors",colorSetter:["color","colorSetter"]},outputs:{colorChange:"colorChange"},decls:12,vars:7,consts:[[1,"t-select",3,"content"],["dropdown",""],["tuiButton","","appearance","","size","s","type","button",3,"iconRight"],["arrow",""],["menu",""],[4,"ngIf"],[3,"color","colorChange"],["tuiGroup","","class","t-edit",3,"color","colorChange",4,"ngIf"],["class","t-palette",3,"colors","selectedColor",4,"ngIf"],["src","tuiIconChevronDown",1,"t-arrow"],["role","menu","size","s",1,"t-menu"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click"],["src","tuiIconCheck","class","t-checkmark",4,"ngIf"],["src","tuiIconCheck",1,"t-checkmark"],[1,"t-hr"],[1,"t-wrapper"],[1,"t-gradient",3,"value","valueChange","indexChange"],[1,"t-buttons"],["tuiIconButton","","type","button","size","xs","appearance","","tuiHintDescribe","","class","t-direction",3,"t-direction_active","icon","tuiHint","click",4,"ngFor","ngForOf"],["tuiIconButton","","type","button","size","xs","appearance","","tuiHintDescribe","",1,"t-direction",3,"icon","tuiHint","click"],["tuiGroup","",1,"t-edit",3,"color","colorChange"],[1,"t-palette",3,"colors","selectedColor"]],template:function(Q,ot){if(1&Q&&(l.TgZ(0,"tui-hosted-dropdown",0,1),l.TgZ(2,"button",2),l._uU(3),l.qZA(),l.YNc(4,j,1,2,"ng-template",null,3,l.W1O),l.YNc(6,yt,2,1,"ng-template",null,4,l.W1O),l.qZA(),l.YNc(8,Ht,6,4,"ng-container",5),l.TgZ(9,"tui-color-picker",6),l.NdJ("colorChange",function($t){return ot.onColorChange($t)}),l.qZA(),l.YNc(10,Kt,1,1,"tui-color-edit",7),l.YNc(11,pt,1,1,"tui-palette",8)),2&Q){const kt=l.MAs(5),$t=l.MAs(7);l.Q6J("content",$t),l.xp6(2),l.Q6J("iconRight",kt),l.xp6(1),l.hij(" ",ot.currentMode," "),l.xp6(5),l.Q6J("ngIf",ot.isGradient),l.xp6(1),l.Q6J("color",ot.currentColor),l.xp6(1),l.Q6J("ngIf",!ot.isGradient),l.xp6(1),l.Q6J("ngIf",ot.palette.size)}},directives:[B.o,X.v,tt.O5,ft.$,ut.P,et.q,tt.sg,Tt.v,Ct.e,bt.$,It.D,Pt.x,Dt.t,ht.D,q.h,W.g,mt.R],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block;width:22.6rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hr[_ngcontent-%COMP%]{height:1px;margin:0 0 0 -1px;border:none;background:var(--tui-base-03)}.t-gradient[_ngcontent-%COMP%]{margin:0 .5rem;border-radius:inherit}.t-select[_ngcontent-%COMP%]{margin:.75rem .5rem}.t-arrow[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-arrow_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.t-menu[_ngcontent-%COMP%]{width:11.25rem}.t-checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}.t-buttons[_ngcontent-%COMP%]{display:flex;padding:0 .75rem 1.25rem}.t-direction[_ngcontent-%COMP%]{color:var(--tui-text-02);margin:0 .375rem}.t-direction[_ngcontent-%COMP%]:hover, .t-direction_active[_ngcontent-%COMP%]{color:var(--tui-text-01);background:var(--tui-secondary-hover)}.t-edit[_ngcontent-%COMP%]{margin:1.25rem}.t-palette[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:inset 0 1px var(--tui-base-03)}'],changeDetection:0}),(0,M.gn)([(0,it.tuiDefaultProp)()],st.prototype,"colors",void 0),(0,M.gn)([(0,it.tuiRequiredSetter)()],st.prototype,"colorSetter",null),(0,M.gn)([it.tuiPure],st.prototype,"getStopsKeys",null),(0,M.gn)([it.tuiPure],st.prototype,"filterPalette",null)},71424:(jt,Et,c)=>{c.d(Et,{J:()=>g});var M=c(64762),l=c(74788),y=c(62141),P=c(50259);class g{constructor(B){this.value=[0,0],this.valueChange=new l.vpe,B.subscribe(X=>{this.value=X,this.valueChange.emit([X[0],X[1]])})}get left(){return 100*this.value[0]}get top(){return 100*this.value[1]}}g.\u0275fac=function(B){return new(B||g)(l.Y36(y.i))},g.\u0275cmp=l.Xpm({type:g,selectors:[["tui-flat-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[l._Bn([P.TuiDestroyService,y.i])],decls:1,vars:4,consts:[[1,"t-circle"]],template:function(B,X){1&B&&l._UZ(0,"div",0),2&B&&l.Udp("left",X.left,"%")("top",X.top,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:-.5rem 0 0 -.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,M.gn)([(0,P.tuiDefaultProp)()],g.prototype,"value",void 0)},27050:(jt,Et,c)=>{c.d(Et,{hR:()=>M.h,TD:()=>B,$v:()=>X.$,H9:()=>ut,sV:()=>et.s,wl:()=>It,Jd:()=>Pt.J,ui:()=>tt,es:()=>Dt.e,GU:()=>Ct,P:()=>ht.P,g7:()=>ft,Rh:()=>q.R,VM:()=>bt});var M=c(97019),l=c(12057),y=c(24751),P=c(3497),g=c(55908),it=c(74788);let B=(()=>{class W{}return W.\u0275fac=function(j){return new(j||W)},W.\u0275mod=it.oAB({type:W}),W.\u0275inj=it.cJS({imports:[[l.ez,y.u5,g.TextMaskModule,g.TuiValueAccessorModule,g.TuiSelectModule,P.TuiPrimitiveTextfieldModule,P.TuiTextfieldControllerModule,P.TuiDropdownModule,g.TuiInputCountModule,P.TuiDataListModule]]}),W})();var X=c(49289);let tt=(()=>{class W{}return W.\u0275fac=function(j){return new(j||W)},W.\u0275mod=it.oAB({type:W}),W.\u0275inj=it.cJS({imports:[[l.ez]]}),W})(),ft=(()=>{class W{}return W.\u0275fac=function(j){return new(j||W)},W.\u0275mod=it.oAB({type:W}),W.\u0275inj=it.cJS({imports:[[l.ez]]}),W})(),ut=(()=>{class W{}return W.\u0275fac=function(j){return new(j||W)},W.\u0275mod=it.oAB({type:W}),W.\u0275inj=it.cJS({imports:[[l.ez,tt,ft]]}),W})();var et=c(23999),Tt=c(50259);let Ct=(()=>{class W{}return W.\u0275fac=function(j){return new(j||W)},W.\u0275mod=it.oAB({type:W}),W.\u0275inj=it.cJS({imports:[[l.ez]]}),W})(),bt=(()=>{class W{}return W.\u0275fac=function(j){return new(j||W)},W.\u0275mod=it.oAB({type:W}),W.\u0275inj=it.cJS({imports:[[l.ez,P.TuiHintModule]]}),W})(),It=(()=>{class W{}return W.\u0275fac=function(j){return new(j||W)},W.\u0275mod=it.oAB({type:W}),W.\u0275inj=it.cJS({imports:[[l.ez,P.TuiButtonModule,P.TuiHostedDropdownModule,ut,Ct,P.TuiHintModule,P.TuiSvgModule,P.TuiDataListModule,Tt.TuiActiveZoneModule,B,P.TuiGroupModule,bt]]}),W})();var Pt=c(71424),Dt=c(49472),ht=c(65720),q=c(5451)},49472:(jt,Et,c)=>{c.d(Et,{e:()=>B});var M=c(64762),l=c(74788),y=c(62141),P=c(50259),g=c(12057);function it(X,tt){if(1&X){const ft=l.EpF();l.TgZ(0,"div",1),l.NdJ("mousedown",function(){const Tt=l.CHM(ft).index;return l.oxw().onMouseDown(Tt)})("dblclick",function(){const Tt=l.CHM(ft).index;return l.oxw().onClick(Tt)}),l.qZA()}2&X&&l.Udp("left",100*tt.$implicit,"%")}class B{constructor(tt){this.value=[0,1],this.valueChange=new l.vpe,this.indexChange=new l.vpe,this.index=NaN,tt.subscribe(([ft])=>{this.onPicker(ft)})}onMouseUp(){this.index=NaN}onMouseDown(tt){this.updateIndex(tt)}onClick(tt){this.value.length>2&&this.updateValue(this.value.filter((ft,ut)=>ut!==tt))}onPicker(tt){Number.isNaN(this.index)&&(this.updateIndex(this.value.length),this.value=[...this.value,0]),!this.value.some((ft,ut)=>ft===tt&&ut!==this.index)&&this.updateValue(this.value.map((ft,ut)=>ut===this.index?tt:ft))}updateIndex(tt){this.index=tt,this.indexChange.emit(tt)}updateValue(tt){this.value=tt,this.valueChange.emit(tt)}}B.\u0275fac=function(tt){return new(tt||B)(l.Y36(y.i))},B.\u0275cmp=l.Xpm({type:B,selectors:[["tui-linear-multi-picker"]],hostBindings:function(tt,ft){1&tt&&l.NdJ("mouseup",function(){return ft.onMouseUp()},!1,l.evT)},inputs:{value:"value"},outputs:{valueChange:"valueChange",indexChange:"indexChange"},features:[l._Bn([P.TuiDestroyService,y.i])],decls:1,vars:1,consts:[["class","t-circle",3,"left","mousedown","dblclick",4,"ngFor","ngForOf"],[1,"t-circle",3,"mousedown","dblclick"]],template:function(tt,ft){1&tt&&l.YNc(0,it,1,2,"div",0),2&tt&&l.Q6J("ngForOf",ft.value)},directives:[g.sg],styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,M.gn)([(0,P.tuiDefaultProp)()],B.prototype,"value",void 0)},65720:(jt,Et,c)=>{c.d(Et,{P:()=>g});var M=c(64762),l=c(74788),y=c(62141),P=c(50259);class g{constructor(B){this.value=0,this.valueChange=new l.vpe,B.subscribe(([X])=>{this.value=X,this.valueChange.emit(X)})}get left(){return 100*this.value}}g.\u0275fac=function(B){return new(B||g)(l.Y36(y.i))},g.\u0275cmp=l.Xpm({type:g,selectors:[["tui-linear-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[l._Bn([P.TuiDestroyService,y.i])],decls:1,vars:2,consts:[[1,"t-circle"]],template:function(B,X){1&B&&l._UZ(0,"div",0),2&B&&l.Udp("left",X.left,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,M.gn)([(0,P.tuiDefaultProp)()],g.prototype,"value",void 0)},5451:(jt,Et,c)=>{c.d(Et,{R:()=>ut});var M=c(64762),l=c(74788),y=c(50259),P=c(12057),g=c(67446),it=c(29070),B=c(54255),X=c(15491),tt=c(219);function ft(et,Tt){if(1&et){const Ct=l.EpF();l.TgZ(0,"button",1),l.NdJ("click",function(){const Pt=l.CHM(Ct).$implicit;return l.oxw().selectedColor.emit(Pt.value)}),l.qZA()}if(2&et){const Ct=Tt.$implicit;l.Udp("background",Ct.value),l.Q6J("tuiHint",Ct.key)("tuiHintDescribe",Ct.key)("id",Ct.key)}}class ut{constructor(){this.colors=new Map,this.selectedColor=new l.vpe,this.originalOrder=(Tt,Ct)=>0}}ut.\u0275fac=function(Tt){return new(Tt||ut)},ut.\u0275cmp=l.Xpm({type:ut,selectors:[["tui-palette"]],inputs:{colors:"colors"},outputs:{selectedColor:"selectedColor"},decls:2,vars:4,consts:[["type","button","class","t-button",3,"background","tuiHint","tuiHintDescribe","id","click",4,"ngFor","ngForOf"],["type","button",1,"t-button",3,"tuiHint","tuiHintDescribe","id","click"]],template:function(Tt,Ct){1&Tt&&(l.YNc(0,ft,1,5,"button",0),l.ALo(1,"keyvalue")),2&Tt&&l.Q6J("ngForOf",l.xi3(1,1,Ct.colors,Ct.originalOrder))},directives:[P.sg,g.D,it.x,B.t,X.D,tt.$],pipes:[P.Nd],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;padding:.875rem}.t-button[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;width:1.5625rem;height:1.5625rem;box-sizing:border-box;margin:.375rem;border-radius:var(--tui-radius-m);border:1px solid rgba(0,0,0,.08)}"],changeDetection:0}),(0,M.gn)([(0,y.tuiDefaultProp)()],ut.prototype,"colors",void 0)},45050:(jt,Et,c)=>{c.d(Et,{l:()=>Ht});var M=c(64762),l=c(12057),y=c(74788),P=c(84614),g=c(14309),it=c(50259),B=c(87623),X=c(20986),tt=c(24751),ft=c(34880),ut=c(76189),et=c(66596),Tt=c(3881),Ct=c(22613),bt=c(98266);function It(Kt,pt){1&Kt&&(y.ynx(0),y._uU(1,"Edit anchor"),y.BQk())}function Pt(Kt,pt){1&Kt&&(y.TgZ(0,"span"),y._uU(1,"Link to anchor"),y.qZA())}function Dt(Kt,pt){1&Kt&&(y.TgZ(0,"span"),y._uU(1,"URL"),y.qZA())}function ht(Kt,pt){if(1&Kt&&(y.YNc(0,Pt,2,0,"span",1),y.YNc(1,Dt,2,0,"ng-template",null,12,y.W1O)),2&Kt){const L=y.MAs(2),rt=y.oxw(2);y.Q6J("ngIf",rt.prefixIsHashMode)("ngIfElse",L)}}function q(Kt,pt){if(1&Kt&&(y.ynx(0),y._uU(1),y.BQk()),2&Kt){const L=pt.ngIf,rt=y.oxw(2);y.xp6(1),y.hij(" ",rt.prefixIsHashMode?L.anchorExample:L.urlExample," ")}}function W(Kt,pt){if(1&Kt){const L=y.EpF();y.ynx(0),y.TgZ(1,"label",4),y.TgZ(2,"div",5),y.YNc(3,It,2,0,"ng-container",1),y.YNc(4,ht,3,2,"ng-template",null,6,y.W1O),y.qZA(),y.TgZ(6,"div",7),y.TgZ(7,"div",8),y._uU(8),y.qZA(),y.TgZ(9,"tui-input-inline",9),y.NdJ("ngModelChange",function(ct){return y.CHM(L),y.oxw().url=ct})("input",function(ct){let J;return y.CHM(L),y.oxw().onChange(null==(J=ct.target)?null:J.value)})("keydown.prevent.enter",function(){return y.CHM(L),y.oxw().onSave()})("keydown.backspace",function(){return y.CHM(L),y.oxw().onBackspace()}),y.YNc(10,q,2,1,"ng-container",3),y.ALo(11,"async"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(12,"tui-svg",10),y.NdJ("click",function(){return y.CHM(L),y.oxw().onClear()}),y.qZA(),y.TgZ(13,"button",11),y.NdJ("click",function(){return y.CHM(L),y.oxw().onSave()}),y.qZA(),y.BQk()}if(2&Kt){const L=y.MAs(5),rt=y.oxw();y.xp6(3),y.Q6J("ngIf",rt.anchorMode)("ngIfElse",L),y.xp6(5),y.Oqu(rt.prefix),y.xp6(1),y.ekj("t-input_filled",rt.hasUrl),y.Q6J("ngModel",rt.url),y.xp6(1),y.Q6J("ngIf",y.lcZ(11,9,rt.texts$)),y.xp6(2),y.ekj("t-cleaner_hidden",!rt.hasUrl)}}function mt(Kt,pt){if(1&Kt){const L=y.EpF();y.TgZ(0,"a",13),y._uU(1),y.ALo(2,"tuiShortUrl"),y.qZA(),y.TgZ(3,"button",14),y.NdJ("click",function(){return y.CHM(L),y.oxw().onEdit()}),y.qZA(),y.TgZ(4,"button",15),y.NdJ("click",function(){return y.CHM(L),y.oxw().onRemove()}),y.qZA()}if(2&Kt){const L=y.oxw();y.Q6J("href",L.href,y.LSH),y.xp6(1),y.AsE(" ",L.anchorMode?"#":"","",y.lcZ(2,3,L.url)," ")}}function j(Kt,pt){if(1&Kt){const L=y.EpF();y.TgZ(0,"button",19),y.NdJ("click",function(){const st=y.CHM(L).$implicit;return y.oxw(2).setAnchor(st)}),y._uU(1),y.qZA()}if(2&Kt){const L=pt.$implicit;y.xp6(1),y.hij(" #",L," ")}}function At(Kt,pt){if(1&Kt&&(y.ynx(0),y._UZ(1,"hr",16),y.TgZ(2,"tui-scrollbar"),y.TgZ(3,"div",17),y.YNc(4,j,2,1,"button",18),y.ALo(5,"tuiFilterAnchors"),y.qZA(),y.qZA(),y.BQk()),2&Kt){const L=y.oxw();y.xp6(4),y.Q6J("ngForOf",y.Dn7(5,1,L.anchorIds,L.prefix,L.url))}}const St="#",yt="http://",Lt="https://";class Ht{constructor(pt,L,rt){this.documentRef=pt,this.texts$=L,this.editor=rt,this.isOnlyAnchorMode=this.detectAnchorMode(),this.addLink=new y.vpe,this.removeLink=new y.vpe,this.url=this.getHrefOrAnchorId(),this.edit=!this.url,this.prefix=this.makeDefaultPrefix(),this.anchorIds=this.getAllAnchorsIds()}set anchorMode(pt){this.isOnlyAnchorMode=pt,this.prefix=pt?St:this.makeDefaultPrefix()}get anchorMode(){return this.isOnlyAnchorMode}get prefixIsHashMode(){return this.prefix===St}get hasUrl(){return!!this.url}get href(){return`${this.prefix}${this.url}`}get showAnchorsList(){return!this.anchorMode&&this.edit&&this.anchorIds.length>0}get isViewMode(){return!this.edit}onSelectionChange(){this.isViewMode&&(this.url=this.getHrefOrAnchorId(),this.anchorMode=this.detectAnchorMode())}onMouseDown(pt){(0,it.tuiIsElement)(pt.target)&&!pt.target.matches("a, button, input")&&pt.preventDefault()}setAnchor(pt){this.url=pt,this.changePrefix(!0)}changePrefix(pt){this.prefix=pt?St:yt}onSave(){this.url?this.addLink.emit(this.href):this.removeLink.emit()}onBackspace(){this.url||(this.prefix=this.isOnlyAnchorMode?St:yt)}onEdit(){this.edit=!0}onRemove(){this.removeLink.emit()}onChange(pt){this.url=this.removePrefix(pt)}onClear(){this.url=""}makeDefaultPrefix(){var pt;const L=this.getAnchorElement();return L&&(!L.getAttribute("href")&&L.getAttribute("id")||(null===(pt=L.getAttribute("href"))||void 0===pt?void 0:pt.startsWith(St)))?St:yt}detectAnchorMode(){const pt=this.getAnchorElement();return!(null==pt?void 0:pt.href)&&!!(null==pt?void 0:pt.getAttribute("id"))}getFocusedParentElement(){var pt,L;return(null===(L=null===(pt=this.documentRef.getSelection())||void 0===pt?void 0:pt.focusNode)||void 0===L?void 0:L.parentElement)||null}getAnchorElement(){var pt;return(null===(pt=this.getFocusedParentElement())||void 0===pt?void 0:pt.closest("a"))||null}getHrefOrAnchorId(){const pt=this.getAnchorElement();return pt?this.removePrefix(pt.getAttribute("href")||pt.getAttribute("id")||""):this.url}removePrefix(pt){return pt.startsWith(yt)?(this.prefix=this.isOnlyAnchorMode?St:yt,pt.replace(yt,"")):pt.startsWith(Lt)?(this.prefix=this.isOnlyAnchorMode?St:Lt,pt.replace(Lt,"")):pt.startsWith(St)?(this.prefix=St,pt.replace(St,"")):pt}getAllAnchorsIds(){var pt;const L=Array.from(null!==(pt=this.editor.getOriginTiptapEditor().view.dom.querySelectorAll('[data-type="jump-anchor"]'))&&void 0!==pt?pt:[]);return Array.from(L).map(rt=>rt.getAttribute("id")||"").filter(Boolean)}}Ht.\u0275fac=function(pt){return new(pt||Ht)(y.Y36(l.K0),y.Y36(g.b$),y.Y36(P.$3))},Ht.\u0275cmp=y.Xpm({type:Ht,selectors:[["tui-edit-link"]],hostBindings:function(pt,L){1&pt&&y.NdJ("selectionchange",function(){return L.onSelectionChange()},!1,y.evT)("mousedown",function(ct){return L.onMouseDown(ct)})},inputs:{anchorMode:"anchorMode"},outputs:{addLink:"addLink",removeLink:"removeLink"},decls:5,vars:3,consts:[[1,"t-edit-link"],[4,"ngIf","ngIfElse"],["view",""],[4,"ngIf"],[1,"t-label"],[1,"t-label-properties"],["fullOptions",""],[1,"t-url"],[1,"t-prefix"],["tuiAutoFocus","",1,"t-input",3,"ngModel","ngModelChange","input","keydown.prevent.enter","keydown.backspace"],["src","tuiIconCloseLarge",1,"t-cleaner",3,"click"],["tuiIconButton","","type","button","size","s","title","Insert link","icon","tuiIconCheckCircleLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],["urlTitle",""],["tuiLink","","target","_blank",1,"t-link",3,"href"],["tuiIconButton","","type","button","size","s","title","Change link","icon","tuiIconEdit2Large","shape","rounded","appearance","icon",1,"t-button","t-edit-button",3,"click"],["tuiIconButton","","type","button","size","s","title","Remove link","icon","tuiIconUnlinkLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],[1,"t-hr"],[1,"t-anchor-list"],["type","button","class","t-anchor",3,"click",4,"ngFor","ngForOf"],["type","button",1,"t-anchor",3,"click"]],template:function(pt,L){if(1&pt&&(y.TgZ(0,"div",0),y.YNc(1,W,14,11,"ng-container",1),y.YNc(2,mt,5,5,"ng-template",null,2,y.W1O),y.qZA(),y.YNc(4,At,6,5,"ng-container",3)),2&pt){const rt=y.MAs(3);y.xp6(1),y.Q6J("ngIf",L.edit)("ngIfElse",rt),y.xp6(3),y.Q6J("ngIf",L.showAnchorsList)}},directives:[l.O5,B.l,X.k,tt.JJ,tt.On,ft.P,ut.v,et.V,Tt.I,l.sg],pipes:[l.Ov,Ct.X,bt.b],styles:["[_nghost-%COMP%]{display:block;min-width:18.75rem}.t-edit-link[_ngcontent-%COMP%]{display:flex;min-height:4rem;align-items:center;padding-right:.75rem}.t-label[_ngcontent-%COMP%]{font:var(--tui-font-text-s);height:var(--tui-height-l);box-sizing:border-box;padding:.4375rem 1rem;min-width:12.5rem;max-width:25rem;width:100%}.t-label-properties[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:8.375rem;justify-content:space-between}.t-property_inactive[_ngcontent-%COMP%]{opacity:.5}.t-url[_ngcontent-%COMP%]{display:flex;font:var(--tui-font-text-m);color:var(--tui-text-02)}.t-input[_ngcontent-%COMP%]{flex:1}.t-input_filled[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-button[_ngcontent-%COMP%]{width:2rem;height:2rem;margin:0 .25rem;transition:background .2s}.t-edit-button[_ngcontent-%COMP%]{margin-left:auto}.t-link[_ngcontent-%COMP%]{margin:0 1rem}.t-cleaner[_ngcontent-%COMP%]{transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;color:var(--tui-base-06);cursor:pointer;margin-left:auto}.t-cleaner[_ngcontent-%COMP%]:hover{color:var(--tui-base-07)}.t-cleaner_hidden[_ngcontent-%COMP%]{visibility:hidden}.t-anchor-list[_ngcontent-%COMP%]{display:flex;max-height:12.5rem;flex-direction:column}.t-anchor[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;background:none;font-size:inherit;line-height:inherit;min-height:2.75rem;padding:.375rem .5rem;margin:.125rem .5rem;border-radius:var(--tui-radius-m);text-align:left}.t-anchor[_ngcontent-%COMP%]:hover{background:var(--tui-base-02);cursor:pointer}"],changeDetection:0}),(0,M.gn)([(0,it.tuiDefaultProp)()],Ht.prototype,"anchorMode",null)},71115:(jt,Et,c)=>{c.d(Et,{lV:()=>M.l,Fu:()=>X,bL:()=>tt.b,X:()=>ft.X});var M=c(45050),l=c(12057),y=c(24751),P=c(50259),g=c(3497),it=c(55908),B=c(74788);let X=(()=>{class ut{}return ut.\u0275fac=function(Tt){return new(Tt||ut)},ut.\u0275mod=B.oAB({type:ut}),ut.\u0275inj=B.cJS({imports:[[l.ez,y.u5,P.TuiAutoFocusModule,g.TuiButtonModule,g.TuiSvgModule,g.TuiLinkModule,it.TuiInputInlineModule,it.TuiToggleModule,g.TuiScrollbarModule]]}),ut})();var tt=c(98266),ft=c(22613)},98266:(jt,Et,c)=>{c.d(Et,{b:()=>l});var M=c(74788);let l=(()=>{class y{transform(g,it,B){return"#"===it?g.filter(X=>X!==B):g}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275pipe=M.Yjl({name:"tuiFilterAnchors",type:y,pure:!0}),y})()},22613:(jt,Et,c)=>{c.d(Et,{X:()=>g});var M=c(74788);let g=(()=>{class it{transform(X){return X.length<60?X:`${X.slice(0,Math.max(0,40))}...${X.slice(X.length-10)}`}}return it.\u0275fac=function(X){return new(X||it)},it.\u0275pipe=M.Yjl({name:"tuiShortUrl",type:it,pure:!0}),it})()},96570:(jt,Et,c)=>{c.d(Et,{V:()=>ut});var M=c(74788),l=c(50259),y=c(25126),P=c(39953),g=c(12057);const it=function(){return[0,1]};function B(et,Tt){if(1&et){const Ct=M.EpF();M.TgZ(0,"div",4),M.NdJ("tuiSizeChange",function(It){return M.CHM(Ct),M.oxw().sizeChange.emit(It)}),M.qZA()}2&et&&M.Q6J("tuiResizer",M.DdM(1,it))}const X=function(et){return[et,0]},tt=function(){return[1,0]},ft=["*"];let ut=(()=>{class et{constructor(){this.autoHeight=!1,this.width=null,this.height=null,this.sizeChange=new M.vpe}get hostWidth(){return(0,l.tuiIsNumber)(this.width)?(0,l.tuiPx)(this.width):this.width}get hostHeight(){return this.autoHeight?null:(0,l.tuiIsNumber)(this.height)?(0,l.tuiPx)(this.height):this.height}}return et.\u0275fac=function(Ct){return new(Ct||et)},et.\u0275cmp=M.Xpm({type:et,selectors:[["tui-editor-resizable"]],hostVars:4,hostBindings:function(Ct,bt){2&Ct&&M.Udp("width",bt.hostWidth)("height",bt.hostHeight)},inputs:{autoHeight:"autoHeight",width:"width",height:"height"},outputs:{sizeChange:"sizeChange"},ngContentSelectors:ft,decls:5,vars:8,consts:[["tuiResizeable","",1,"t-resizable"],[1,"t-handle","t-handle-left-side",3,"tuiResizer","tuiSizeChange"],["class","t-handle t-handle-bottom-side",3,"tuiResizer","tuiSizeChange",4,"ngIf"],[1,"t-handle","t-handle-right-side",3,"tuiResizer","tuiSizeChange"],[1,"t-handle","t-handle-bottom-side",3,"tuiResizer","tuiSizeChange"]],template:function(Ct,bt){1&Ct&&(M.F$t(),M.TgZ(0,"div",0),M.Hsn(1),M.TgZ(2,"div",1),M.NdJ("tuiSizeChange",function(Pt){return bt.sizeChange.emit(Pt)}),M.qZA(),M.YNc(3,B,1,2,"div",2),M.TgZ(4,"div",3),M.NdJ("tuiSizeChange",function(Pt){return bt.sizeChange.emit(Pt)}),M.qZA(),M.qZA()),2&Ct&&(M.ekj("t-resizable-auto-height",bt.autoHeight),M.xp6(2),M.Q6J("tuiResizer",M.VKq(5,X,-1)),M.xp6(1),M.Q6J("ngIf",!bt.autoHeight),M.xp6(1),M.Q6J("tuiResizer",M.DdM(7,tt)))},directives:[y.U,P.L,g.O5],styles:['[_nghost-%COMP%]{position:relative;display:inline-block;box-sizing:border-box}[_nghost-%COMP%]   .t-resizable[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]   .t-resizable-auto-height[_ngcontent-%COMP%]{height:auto!important}[_nghost-%COMP%]   iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}[_nghost-%COMP%]:hover   .t-handle[_ngcontent-%COMP%]:after{opacity:1}.t-handle[_ngcontent-%COMP%]{position:absolute;top:0;display:flex;width:.75rem;cursor:col-resize;justify-content:center;align-items:center;height:100%}.t-handle[_ngcontent-%COMP%]:after{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";width:50%;height:33%;box-sizing:border-box;border-radius:var(--tui-radius-m);background:var(--tui-base-08);border:1px solid var(--tui-base-03);opacity:0}.t-handle-left-side[_ngcontent-%COMP%]{left:0}.t-handle-bottom-side[_ngcontent-%COMP%]{top:unset;bottom:.3125rem;height:.95rem;width:100%}.t-handle-right-side[_ngcontent-%COMP%]{right:0}'],changeDetection:0}),et})()},95110:(jt,Et,c)=>{c.d(Et,{_3:()=>it,V_:()=>B.V,Sl:()=>tt});var M=c(40400),l=c(50259),y=c(66682),P=c(46782),g=c(74788);let it=(()=>{class ft extends M.d{constructor(et,Tt){super(),this._height=0,this._width=0,(0,y.T)((0,l.tuiTypedFromEvent)(et,"touchend"),(0,l.tuiTypedFromEvent)(et,"mouseup")).pipe((0,P.R)(Tt)).subscribe(()=>this.updateAttributes({width:this.width,height:this.height}))}get attrs(){var et;return(null===(et=this.node)||void 0===et?void 0:et.attrs)||{src:""}}get width(){return this._width||this.attrs.width||null}get height(){return this._height||this.attrs.height||null}}return ft.\u0275fac=function(et){return new(et||ft)(g.Y36(Document),g.Y36(l.TuiDestroyService))},ft.\u0275dir=g.lG2({type:ft,features:[g.qOj]}),ft})();var B=c(96570),X=c(12057);let tt=(()=>{class ft{}return ft.\u0275fac=function(et){return new(et||ft)},ft.\u0275mod=g.oAB({type:ft}),ft.\u0275inj=g.cJS({imports:[[X.ez,l.TuiResizeModule,l.TuiResizerModule]]}),ft})()},20179:(jt,Et,c)=>{c.d(Et,{D:()=>it});var M=c(12057),l=c(74788),y=c(82113),P=c(50259),g=c(3497);let it=(()=>{class B{constructor(tt,ft,ut,et,Tt,Ct){this.elementRef=tt,this.renderer=ft,this.sanitizer=ut,this.tuiSanitizer=et,this.document=Tt,this.editor=Ct}set content(tt){this.renderer.setProperty(this.elementRef.nativeElement,"innerHTML",this.tuiSanitizer?this.tuiSanitizer.sanitize(l.q3G.HTML,tt.replace(/colwidth/g,"width")):this.sanitizer.sanitize(l.q3G.HTML,tt))}click(tt){var ft,ut;if(this.editor||!(0,P.tuiIsElement)(tt.target))return;const et=(null===(ut=null===(ft=tt.target)||void 0===ft?void 0:ft.closest("a"))||void 0===ut?void 0:ut.getAttribute("href"))||"";!et.startsWith("#")||(this.document.location.hash=et.replace("#",""),tt.preventDefault())}}return B.\u0275fac=function(tt){return new(tt||B)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.Tiy),l.Y36(g.TUI_SANITIZER,8),l.Y36(M.K0),l.Y36(y.JU,8))},B.\u0275cmp=l.Xpm({type:B,selectors:[["tui-editor-socket"]],hostAttrs:[1,"tui-editor-socket"],hostBindings:function(tt,ft){1&tt&&l.NdJ("click",function(et){return ft.click(et)})},inputs:{content:"content"},decls:0,vars:0,template:function(tt,ft){},styles:['.tui-editor-socket{display:block;margin:0;overflow:hidden;color:var(--tui-text-01);font:var(--tui-font-text-m)}.tui-editor-socket._preview-image img{cursor:pointer}.tui-editor-socket h1,.tui-editor-socket h2,.tui-editor-socket h3,.tui-editor-socket h4,.tui-editor-socket h5,.tui-editor-socket h6{word-break:break-word;line-height:normal}.tui-editor-socket a:not([data-type="jump-anchor"]){color:var(--tui-link);text-decoration:none;outline:none}.tui-editor-socket a:not([data-type="jump-anchor"]):hover{color:var(--tui-link-hover);text-decoration:underline}.tui-editor-socket a:not([data-type="jump-anchor"]):active{color:var(--tui-primary-active)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]{text-decoration:underline;-webkit-text-decoration-color:var(--tui-link);text-decoration-color:var(--tui-link)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:before{content:"#"}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:hover{color:var(--tui-link)}.tui-editor-socket .ProseMirror video,.tui-editor-socket .ProseMirror audio{pointer-events:none}.tui-editor-socket .tableWrapper,.tui-editor-socket .tui-table-wrapper{overflow-x:auto}.tui-editor-socket mark{background:unset;color:inherit}.tui-editor-socket .ProseMirror{min-height:5.375rem;padding:.2rem 1rem;outline:none;white-space:pre-wrap}.tui-editor-socket p:empty:after{content:" ";white-space:pre}.tui-editor-socket p:first-child{margin-top:0}.tui-editor-socket ul,.tui-editor-socket ol{list-style-type:none;margin:1rem 1rem 1rem 1.5rem;padding:0}.tui-editor-socket li{margin:1rem 0}.tui-editor-socket li p{display:inline;margin:0 auto;word-break:break-word}.tui-editor-socket ul li p{display:inline-block}.tui-editor-socket ul>li:before{content:"";display:inline-block;width:.5rem;height:.5rem;border-radius:100%;margin:.5rem .875rem .0625rem -1.375rem;background-color:var(--tui-primary);vertical-align:top;box-sizing:border-box}.tui-editor-socket li ul>li:before{background:none;border:.125rem solid var(--tui-primary)}.tui-editor-socket li ul>li>ul>li:before{background:var(--tui-primary);border-radius:0;width:.375rem;height:.375rem}.tui-editor-socket ol{counter-reset:item}.tui-editor-socket ol>li:before{content:counters(item,".") ".";width:1.5rem;margin:0 .75rem 0 -1.5rem;counter-increment:item;color:var(--tui-base-05);vertical-align:top}.tui-editor-socket pre{white-space:pre-wrap;word-break:break-word;border-radius:.25rem;margin:1rem 0;padding:.75rem 1rem;font-family:Courier,monospace;color:var(--tui-text-02);background:var(--tui-base-02)}.tui-editor-socket code{box-shadow:none}.tui-editor-socket pre+pre{margin-top:-1.8125rem;padding-top:0}.tui-editor-socket blockquote{margin:1.25rem 0 1.25rem 1.5rem;padding-left:1.0625rem;border-left:1px solid var(--tui-base-04)}.tui-editor-socket p{margin:1rem 0}.tui-editor-socket hr{border:none;border-top:1px solid var(--tui-base-03);margin:1rem 0}.tui-editor-socket table{border-collapse:collapse;table-layout:fixed;width:100%;margin:0;overflow:hidden}.tui-editor-socket table td{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word}.tui-editor-socket table th{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word;font-weight:bold;text-align:left;background-color:var(--tui-base-02);min-height:2rem}.tui-editor-socket table .column-resize-handle{position:absolute;right:-2px;top:0;bottom:-2px;width:4px;background-color:#adf;pointer-events:none}.tui-editor-socket table td>*{margin-top:0;margin-bottom:0}.tui-editor-socket table th>*{margin-top:0;margin-bottom:0}.tui-editor-socket .resize-cursor{cursor:ew-resize;cursor:col-resize}.tui-editor-socket table .tableWrapper{overflow-x:auto}.tui-editor-socket .selectedCell:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:var(--tui-selection);pointer-events:none}.tui-editor-socket font[face="Courier New"]{display:inline-block;padding:.25rem .5rem;border-radius:.25rem;background-color:#ecf1f7;word-break:break-word}.tui-editor-socket details{width:100%;border:1px solid var(--tui-base-04);border-radius:var(--tui-radius-l)}.tui-editor-socket summary{display:flex;align-items:center;min-height:3.5rem;width:100%;padding:0 1.25rem;box-sizing:border-box;border-radius:var(--tui-radius-l);pointer-events:none}.tui-editor-socket summary p{min-width:1px;margin:0}.tui-editor-socket summary::-webkit-details-marker{display:none}.tui-editor-socket details[open] summary{border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-editor-socket div[data-type=details-content]{padding:1.25rem;min-height:3rem;border:1px solid var(--tui-base-04);border-width:1px 0 0}.tui-editor-socket .details-wrapper{position:relative;display:flex}.tui-editor-socket .details-arrow{position:absolute;top:1.5rem;right:1.25rem;height:.575rem;width:.575rem;border:1px solid var(--tui-base-06);border-width:0 2px 2px 0;transform:rotate(45deg);transition:var(--tui-duration, .3s);-webkit-appearance:none;-moz-appearance:none;appearance:none;box-sizing:border-box;padding:0;background:none;cursor:pointer}.tui-editor-socket .details-wrapper_rendered .details-arrow{pointer-events:none}.tui-editor-socket .details-wrapper_rendered summary{transition:transform var(--tui-duration, .3s);cursor:pointer;pointer-events:auto}.tui-editor-socket .details-wrapper_rendered summary:hover{background:var(--tui-base-02)}.tui-editor-socket details[open]+.details-arrow{top:1.75rem;transform:rotate(225deg)}.t-editor-placeholder:before{content:attr(data-placeholder);float:left;color:var(--tui-base-05);pointer-events:none;height:0}.tui-group-node{display:flex;flex-direction:row}.tui-group-node:hover>.tui-group-pointer{pointer-events:auto;opacity:1}.tui-group-pointer{opacity:0;min-height:.8125rem;max-height:.8125rem;min-width:.8125rem;max-width:.8125rem;margin:.3125rem .3125rem 0 0;cursor:-webkit-grab;cursor:grab;background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="black" /></svg>\');background-repeat:no-repeat;background-size:contain;background-position:center}[data-mode=onDark] .tui-group-pointer{background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="white" /></svg>\')}\n'],encapsulation:2,changeDetection:0}),B})()},69303:(jt,Et,c)=>{c.d(Et,{a:()=>st});var M=c(64762),l=c(12057),y=c(74788),P=c(24751),g=c(17406),it=c(19074),B=c(84614),X=c(14309),tt=c(27863),ft=c(50259),ut=c(79089),et=c(40939),Tt=c(2697),Ct=c(17163),bt=c(3881),It=c(1433),Pt=c(9872),Dt=c(4997),ht=c(33250),q=c(26072),W=c(9829),mt=c(82886),j=c(39088),At=c(20179),St=c(74982),yt=c(45050);function Lt(J,Q){if(1&J){const ot=y.EpF();y.TgZ(0,"tui-toolbar",9),y.NdJ("fileAttached",function($t){return y.CHM(ot),y.oxw(2).fileAttached.emit($t)}),y.Hsn(1,1),y.qZA()}if(2&J){const ot=y.oxw(2);y.Q6J("tools",ot.tools)("disabled",!ot.interactive)}}function Ht(J,Q){if(1&J&&(y.TgZ(0,"div",10),y._uU(1),y.qZA()),2&J){const ot=y.oxw(2);y.xp6(1),y.hij(" ",ot.exampleText," ")}}function Kt(J,Q){if(1&J){const ot=y.EpF();y.TgZ(0,"div",11),y.TgZ(1,"tui-editor-socket",12),y.NdJ("valueChange",function($t){return y.CHM(ot),y.oxw(2).onModelChange($t)})("stateChange",function(){return 0}),y.qZA(),y.qZA()}if(2&J){y.oxw();const ot=y.MAs(9),kt=y.oxw();y.Q6J("tuiDropdownSelection",kt.dropdownSelectionHandler)("tuiDropdown",ot),y.xp6(1),y.Q6J("value",kt.value)("editable",kt.interactive)}}function pt(J,Q){if(1&J){const ot=y.EpF();y.TgZ(0,"tui-edit-link",13,14),y.NdJ("addLink",function($t){y.CHM(ot);const Yt=y.MAs(1),ne=y.oxw(2);return Yt.anchorMode?ne.addAnchor($t):ne.addLink($t)})("removeLink",function(){y.CHM(ot);const $t=y.MAs(1),Yt=y.oxw(2);return $t.anchorMode?Yt.removeAnchor():Yt.removeLink()}),y.qZA()}}function L(J,Q){if(1&J){const ot=y.EpF();y.TgZ(0,"div",1),y.NdJ("tuiActiveZoneChange",function($t){return y.CHM(ot),y.oxw().onActiveZone($t)}),y.TgZ(1,"div",2),y.YNc(2,Lt,2,2,"tui-toolbar",3),y.TgZ(3,"div",4),y.Hsn(4),y.qZA(),y.YNc(5,Ht,2,1,"div",5),y.qZA(),y.TgZ(6,"tui-scrollbar",6),y.YNc(7,Kt,2,4,"div",7),y.YNc(8,pt,2,0,"ng-template",null,8,y.W1O),y._UZ(10,"tui-editor-portal-host"),y.qZA(),y.qZA()}if(2&J){const ot=Q.tuiLet,kt=y.oxw();y.Q6J("readOnly",kt.readOnly)("disabled",kt.disabled)("focus",kt.computedFocused)("hover",kt.pseudoHover)("invalid",kt.computedInvalid),y.xp6(2),y.Q6J("ngIf",ot),y.xp6(1),y.ekj("t-placeholder_raised",kt.placeholderRaised),y.xp6(2),y.Q6J("ngIf",kt.hasExampleText),y.xp6(2),y.Q6J("ngIf",ot)}}const rt=["*",[["tools"]]];class st extends ft.AbstractTuiControl{constructor(Q,ot,kt,$t,Yt,ne){super(Q,ot),this.editorLoaded$=kt,this.editorService=$t,this.contentProcessor=Yt,this.documentRef=ne,this.exampleText="",this.tools=it.Db,this.fileAttached=new y.vpe,this.focused=!1,this.isSelectionLink=zt=>this.currentFocusedNodeIsAnchor(zt)&&(0,tt.nC)(zt)}get nativeFocusableElement(){var Q;return this.computedDisabled?null:(null===(Q=this.element)||void 0===Q?void 0:Q.nativeElement)||null}get dropdownSelectionHandler(){return this.focused?this.isSelectionLink:ft.ALWAYS_FALSE_HANDLER}get editor(){return this.editorService.getOriginTiptapEditor()?this.editorService:null}get placeholderRaised(){return this.computedFocused&&!this.readOnly||this.hasValue}get hasExampleText(){return!!this.exampleText&&this.computedFocused&&!this.hasValue&&!this.readOnly}writeValue(Q){var ot;if(Q===this.value)return;const kt=this.contentProcessor(Q||"");super.writeValue(kt),kt!==Q&&(null===(ot=this.control)||void 0===ot||ot.setValue(kt,{onlySelf:!1,emitEvent:!1,emitModelToViewChange:!1,emitViewToModelChange:!1}))}onActiveZone(Q){this.focused=Q,this.updateFocused(Q)}onModelChange(Q){this.updateValue(Q)}addAnchor(Q){var ot;null===(ot=this.editor)||void 0===ot||ot.setAnchor(Q)}removeAnchor(){var Q;null===(Q=this.editor)||void 0===Q||Q.removeAnchor()}addLink(Q){var ot,kt;null===(ot=this.editor)||void 0===ot||ot.selectClosest(),null===(kt=this.editor)||void 0===kt||kt.setLink(Q)}removeLink(){var Q;null===(Q=this.editor)||void 0===Q||Q.unsetLink()}ngOnDestroy(){var Q;null===(Q=this.editor)||void 0===Q||Q.destroy()}getFallbackValue(){return""}currentFocusedNodeIsAnchor(Q){var ot,kt,$t;return!!(null===(kt=null===(ot=Q.startContainer.parentElement)||void 0===ot?void 0:ot.closest("a"))||void 0===kt?void 0:kt.contains((null===($t=this.documentRef.getSelection())||void 0===$t?void 0:$t.focusNode)||null))}get hasValue(){return!!this.value}}st.\u0275fac=function(Q){return new(Q||st)(y.Y36(P.a5,10),y.Y36(y.sBO),y.Y36(X.ZW),y.Y36(B.$3),y.Y36(X.F1),y.Y36(l.K0))},st.\u0275cmp=y.Xpm({type:st,selectors:[["tui-editor"]],viewQuery:function(Q,ot){if(1&Q&&(y.Gf(B.JU,5,y.SBq),y.Gf(g.M6,5)),2&Q){let kt;y.iGM(kt=y.CRH())&&(ot.element=kt.first),y.iGM(kt=y.CRH())&&(ot.toolbar=kt.first)}},inputs:{exampleText:"exampleText",tools:"tools"},outputs:{fileAttached:"fileAttached"},features:[y._Bn([(0,ft.tuiAsFocusableItemAccessor)(st),ut.m]),y.qOj],ngContentSelectors:["*","tools"],decls:2,vars:3,consts:[["tuiWrapper","","appearance","textfield","class","t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange",4,"tuiLet"],["tuiWrapper","","appearance","textfield",1,"t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange"],[1,"t-toolbar-wrapper"],[3,"tools","disabled","fileAttached",4,"ngIf"],[1,"t-placeholder"],["class","t-example-text",4,"ngIf"],["tuiEditorPortal","",1,"t-scrollbar"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown",4,"ngIf"],["dropdown",""],[3,"tools","disabled","fileAttached"],[1,"t-example-text"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown"],["tuiTiptapEditor","","spellcheck","false",1,"tui-editor-socket",3,"value","editable","valueChange","stateChange"],[3,"addLink","removeLink"],["link",""]],template:function(Q,ot){1&Q&&(y.F$t(rt),y.YNc(0,L,11,10,"div",0),y.ALo(1,"async")),2&Q&&y.Q6J("tuiLet",y.lcZ(1,1,ot.editorLoaded$))},directives:[et.L,Tt.o,Ct.e,l.O5,bt.I,It.A,Pt.d,Dt.M,ht.Ek,q.t,W.V,mt.A,j.y,At.D,St.J,yt.l],pipes:[l.Ov],styles:["[_nghost-%COMP%]{position:relative;z-index:0;display:block;font:var(--tui-font-text-m);border-radius:var(--tui-radius-m)}.t-wrapper[_ngcontent-%COMP%]{display:flex;max-height:inherit;min-height:10rem;cursor:text;overflow:hidden;flex-direction:column;border-radius:inherit}.t-placeholder[_ngcontent-%COMP%]{transition-property:transform,font-size,color,letter-spacing;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;font:var(--tui-font-text-s);color:var(--tui-text-01);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:var(--tui-text-02);pointer-events:none;will-change:transform;transform:translateY(0);position:absolute;left:1rem;margin-top:1rem;width:95%;font-size:.9375rem}.t-placeholder_raised[_ngcontent-%COMP%]{transform:translateY(-.625rem)}[data-size=m][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font:var(--tui-font-text-xs);transform:translateY(-.5rem);letter-spacing:.025rem}._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], ._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill)}[data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], [data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill-night)}._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-03)}[data-size=l][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{font-size:.9375rem}[data-size=l][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font-size:.8156rem}[data-size=m]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01)}[data-mode=onDark][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}[data-size=m][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}@supports (-webkit-hyphens: none){.t-placeholder[_ngcontent-%COMP%]{will-change:unset;transition-property:transform,color,letter-spacing}}.t-placeholder_raised[_ngcontent-%COMP%]{width:110%}.t-example-text[_ngcontent-%COMP%]{position:absolute;left:1rem;margin-top:1.6rem;color:var(--tui-base-06);letter-spacing:normal;text-transform:none}.t-example-text_light[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}.t-example-text_dark[_ngcontent-%COMP%]{color:var(--tui-text-03)}.t-scrollbar[_ngcontent-%COMP%]{display:flex;max-height:inherit;border-top:1.625rem solid transparent;border-bottom:1px solid transparent;box-sizing:border-box}"],changeDetection:0}),(0,M.gn)([(0,ft.tuiDefaultProp)()],st.prototype,"exampleText",void 0),(0,M.gn)([(0,ft.tuiDefaultProp)()],st.prototype,"tools",void 0)},79089:(jt,Et,c)=>{c.d(Et,{m:()=>ft});var M=c(74788),l=c(84614),y=c(14309),P=c(82298),g=c(9112),it=c(15257),B=c(88002),X=c(47349),tt=c(73825);const ft=[{provide:y.F4,deps:[y.Wf],useFactory:ut=>{const et=new P.t(1);return Promise.all(ut).then(Tt=>et.next(Tt)),et}},{provide:y.Y1,deps:[M.Qsj],useFactory:ut=>ut.createElement("div")},{provide:y.ZW,deps:[y.Y1,y.F4,y.bG],useFactory:(ut,et,Tt)=>(0,g.aj)([Tt,et]).pipe((0,it.q)(1),(0,B.U)(([Ct,bt])=>new Ct({element:ut,extensions:bt})),(0,X.d)({bufferSize:1,refCount:!0}))},l.$3,tt.Y]},9872:(jt,Et,c)=>{c.d(Et,{d:()=>y});var M=c(50259),l=c(74788);let y=(()=>{class P extends M.AbstractTuiPortalHostComponent{}return P.\u0275fac=function(){let g;return function(B){return(g||(g=l.n5z(P)))(B||P)}}(),P.\u0275cmp=l.Xpm({type:P,selectors:[["tui-editor-portal-host"]],features:[l._Bn([{provide:M.AbstractTuiPortalService,useExisting:M.TuiDropdownPortalService},{provide:M.AbstractTuiPortalHostComponent,useExisting:P}]),l.qOj],decls:2,vars:0,consts:[["viewContainer",""]],template:function(it,B){1&it&&l.GkF(0,null,0)},styles:["[_nghost-%COMP%]{position:relative;z-index:1;display:block;height:100%}"],changeDetection:0}),P})()},1433:(jt,Et,c)=>{c.d(Et,{A:()=>g});var M=c(74788),l=c(50259),y=c(3497),P=c(73825);let g=(()=>{class it extends y.TuiRectAccessor{constructor(X){super(),this.elementRef=X,this.type="viewport"}getClientRect(){return this.elementRef.nativeElement.getBoundingClientRect()}}return it.\u0275fac=function(X){return new(X||it)(M.Y36(M.SBq))},it.\u0275dir=M.lG2({type:it,selectors:[["","tuiEditorPortal",""]],features:[M._Bn([{provide:l.TuiDropdownPortalService,useExisting:P.Y},(0,y.tuiAsViewport)(it)]),M.qOj]}),it})()},73825:(jt,Et,c)=>{c.d(Et,{Y:()=>y});var M=c(50259),l=c(74788);let y=(()=>{class P extends M.AbstractTuiPortalService{}return P.\u0275fac=function(){let g;return function(B){return(g||(g=l.n5z(P)))(B||P)}}(),P.\u0275prov=l.Yz7({token:P,factory:P.\u0275fac}),P})()},19769:(jt,Et,c)=>{c.d(Et,{j:()=>Pt});var M=c(64762),l=c(74788),y=c(24751),P=c(91211),g=c(27863),it=c(50259),B=c(3497),X=c(62939),tt=c(63060),ft=c(62733),ut=c(3729),et=c(23999),Tt=c(17163);function Ct(Dt,ht){if(1&Dt&&l._UZ(0,"div",4),2&Dt){const q=l.oxw();l.Udp("background",q.background)}}function bt(Dt,ht){if(1&Dt){const q=l.EpF();l.TgZ(0,"tui-color-selector",5),l.NdJ("colorChange",function(mt){return l.CHM(q),l.oxw().onValueChange(mt)}),l.qZA()}if(2&Dt){const q=ht.$implicit,W=l.oxw();l.Q6J("tuiActiveZoneParent",q)("colors",W.colors)("color",W.value)}}class Pt extends it.AbstractTuiControl{constructor(ht,q,W){super(ht,q),this.domSanitizer=W,this.colors=new Map,this.open=!1}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return!!this.dropdown&&this.dropdown.focused}get background(){return this.sanitize(this.value,this.domSanitizer)}onClick(){this.open=!this.open}onValueChange(ht){this.updateValue(ht)}onFocused(ht){this.updateFocused(ht)}getFallbackValue(){return"#000000"}sanitize(ht,q){return ht.startsWith("linear-gradient(")?q.bypassSecurityTrustStyle((0,g.CH)((0,g._N)((0,g.U5)(ht)))):ht}}Pt.\u0275fac=function(ht){return new(ht||Pt)(l.Y36(y.a5,10),l.Y36(l.sBO),l.Y36(P.H7))},Pt.\u0275cmp=l.Xpm({type:Pt,selectors:[["tui-input-color"]],viewQuery:function(ht,q){if(1&ht&&(l.Gf(B.TuiPrimitiveTextfieldComponent,5),l.Gf(B.TuiHostedDropdownComponent,5)),2&ht){let W;l.iGM(W=l.CRH())&&(q.textfield=W.first),l.iGM(W=l.CRH())&&(q.dropdown=W.first)}},hostBindings:function(ht,q){1&ht&&l.NdJ("click",function(){return q.onClick()})},inputs:{colors:"colors"},features:[l._Bn([],[(0,B.tuiDropdownOptionsProvider)({maxHeight:600})]),l.qOj],ngContentSelectors:["*"],decls:7,vars:12,consts:[[1,"t-wrapper",3,"content","open","openChange"],[1,"t-textfield",3,"tuiTextfieldIconLeft","pseudoFocus","pseudoHover","pseudoActive","invalid","focusable","nativeId","disabled","readOnly","value","valueChange","focusedChange"],["color",""],["picker",""],[1,"t-color"],[3,"tuiActiveZoneParent","colors","color","colorChange"]],template:function(ht,q){if(1&ht&&(l.F$t(),l.TgZ(0,"tui-hosted-dropdown",0),l.NdJ("openChange",function(mt){return q.open=mt}),l.TgZ(1,"tui-primitive-textfield",1),l.NdJ("valueChange",function(mt){return q.onValueChange(mt)})("focusedChange",function(mt){return q.onFocused(mt)}),l.Hsn(2),l.qZA(),l.qZA(),l.YNc(3,Ct,1,2,"ng-template",null,2,l.W1O),l.YNc(5,bt,1,3,"ng-template",null,3,l.W1O)),2&ht){const W=l.MAs(4),mt=l.MAs(6);l.Q6J("content",mt)("open",q.open),l.xp6(1),l.Q6J("tuiTextfieldIconLeft",W)("pseudoFocus",q.computedFocused)("pseudoHover",q.pseudoHover)("pseudoActive",q.pseudoActive)("invalid",q.computedInvalid)("focusable",q.focusable)("nativeId",q.nativeId)("disabled",q.disabled)("readOnly",q.readOnly)("value",q.value)}},directives:[X.o,tt.y,ft.B,ut.aR,et.s,Tt.e],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-wrapper[_ngcontent-%COMP%]{display:flex;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-color[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-03-dark);border-radius:.125rem}"],changeDetection:0}),(0,M.gn)([(0,it.tuiDefaultProp)()],Pt.prototype,"colors",void 0),(0,M.gn)([it.tuiPure],Pt.prototype,"sanitize",null)},37924:(jt,Et,c)=>{c.d(Et,{X:()=>Dt});var M=c(84614),l=c(14309),y=c(9112),P=c(88002),g=c(74788),it=c(12057),B=c(40939),X=c(62939),tt=c(76189),ft=c(219),ut=c(67446),et=c(29070),Tt=c(54255),Ct=c(15491);function bt(ht,q){if(1&ht){const W=g.EpF();g.TgZ(0,"div",6),g.TgZ(1,"button",7),g.NdJ("click",function(){return g.CHM(W),g.oxw(3).editor.onAlign("left")}),g.qZA(),g.TgZ(2,"button",8),g.NdJ("click",function(){return g.CHM(W),g.oxw(3).editor.onAlign("center")}),g.qZA(),g.TgZ(3,"button",9),g.NdJ("click",function(){return g.CHM(W),g.oxw(3).editor.onAlign("right")}),g.qZA(),g.TgZ(4,"button",10),g.NdJ("click",function(){return g.CHM(W),g.oxw(3).editor.onAlign("justify")}),g.qZA(),g.qZA()}if(2&ht){const W=g.oxw().tuiLet,mt=g.oxw().ngIf;g.xp6(1),g.Q6J("pseudoActive",!(null==W||!W.left))("tuiHint",mt.justifyLeft),g.xp6(1),g.Q6J("pseudoActive",!(null==W||!W.center))("tuiHint",mt.justifyCenter),g.xp6(1),g.Q6J("pseudoActive",!(null==W||!W.right))("tuiHint",mt.justifyRight),g.xp6(1),g.Q6J("pseudoActive",!(null==W||!W.justify))("tuiHint",mt.justifyFull)}}function It(ht,q){if(1&ht&&(g.TgZ(0,"tui-hosted-dropdown",2,3),g._UZ(2,"button",4),g.YNc(3,bt,5,8,"ng-template",null,5,g.W1O),g.qZA()),2&ht){const W=g.MAs(1),mt=g.MAs(4),j=g.oxw().ngIf;g.Q6J("content",mt),g.xp6(2),g.Q6J("tuiHint",j.justify)("pseudoActive",W.open)("focusable",W.open)}}function Pt(ht,q){if(1&ht&&(g.ynx(0),g.YNc(1,It,5,4,"tui-hosted-dropdown",1),g.ALo(2,"async"),g.BQk()),2&ht){const W=g.oxw();g.xp6(1),g.Q6J("tuiLet",g.lcZ(2,1,W.alignState$))}}let Dt=(()=>{class ht{constructor(W,mt){this.editor=W,this.texts$=mt,this.alignState$=(0,y.aj)([this.editor.isActive$({textAlign:"left"}),this.editor.isActive$({textAlign:"right"}),this.editor.isActive$({textAlign:"center"}),this.editor.isActive$({textAlign:"justify"})]).pipe((0,P.U)(([j,At,St,yt])=>({left:j,right:At,center:St,justify:yt})))}}return ht.\u0275fac=function(W){return new(W||ht)(g.Y36(M.$3),g.Y36(l.rf))},ht.\u0275cmp=g.Xpm({type:ht,selectors:[["tui-align-content"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["align",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["alignDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignCenterLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignRightLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignJustifyLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"]],template:function(W,mt){1&W&&(g.YNc(0,Pt,3,3,"ng-container",0),g.ALo(1,"async")),2&W&&g.Q6J("ngIf",g.lcZ(1,1,mt.texts$))},directives:[it.O5,B.L,X.o,tt.v,ft.$,ut.D,et.x,Tt.t,Ct.D],pipes:[it.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),ht})()},15587:(jt,Et,c)=>{c.d(Et,{T:()=>Dt});var M=c(84614),l=c(14309),y=c(88002),P=c(87519),g=c(74788),it=c(62939),B=c(76189),X=c(219),tt=c(67446),ft=c(29070),ut=c(54255),et=c(15491),Tt=c(20933),Ct=c(12057),bt=c(35065);function It(ht,q){if(1&ht){const W=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){const At=g.CHM(W).index;return g.oxw(2).onCode(!!At)}),g._uU(1),g.qZA()}if(2&ht){const W=q.$implicit;g.xp6(1),g.hij(" ",W," ")}}function Pt(ht,q){if(1&ht&&(g.TgZ(0,"tui-data-list"),g.YNc(1,It,2,1,"button",4),g.ALo(2,"async"),g.qZA()),2&ht){const W=g.oxw();g.xp6(1),g.Q6J("ngForOf",g.lcZ(2,1,W.codeOptionsTexts$))}}let Dt=(()=>{class ht{constructor(W,mt,j){this.editor=W,this.texts$=mt,this.codeOptionsTexts$=j,this.hintText$=this.texts$.pipe((0,y.U)(At=>At.code)),this.insideCode$=this.editor.stateChange$.pipe((0,y.U)(()=>this.editor.isActive("code")||this.editor.isActive("codeBlock")),(0,P.x)())}onCode(W){W?this.editor.toggleCodeBlock():this.editor.toggleCode()}}return ht.\u0275fac=function(W){return new(W||ht)(g.Y36(M.$3),g.Y36(l.rf),g.Y36(l.Mr))},ht.\u0275cmp=g.Xpm({type:ht,selectors:[["tui-code"]],decls:7,vars:8,consts:[[3,"content"],["codes",""],["tuiIconButton","","type","button","size","s","icon","tuiIconCodeLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["codesDropdown",""],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(W,mt){if(1&W&&(g.TgZ(0,"tui-hosted-dropdown",0,1),g._UZ(2,"button",2),g.ALo(3,"async"),g.ALo(4,"async"),g.YNc(5,Pt,3,3,"ng-template",null,3,g.W1O),g.qZA()),2&W){const j=g.MAs(1),At=g.MAs(6);g.Q6J("content",At),g.xp6(2),g.Q6J("tuiHint",g.lcZ(3,4,mt.hintText$))("pseudoActive",j.open||g.lcZ(4,6,mt.insideCode$))("focusable",j.open)}},directives:[it.o,B.v,X.$,tt.D,ft.x,ut.t,et.D,Tt.q,Ct.sg,bt.v],pipes:[Ct.Ov],encapsulation:2,changeDetection:0}),ht})()},18832:(jt,Et,c)=>{c.d(Et,{U:()=>Ct});var M=c(84614),l=c(14309),y=c(88002),P=c(87519),g=c(74788),it=c(12057),B=c(76189),X=c(219),tt=c(67446),ft=c(29070),ut=c(54255),et=c(15491);function Tt(bt,It){if(1&bt){const Pt=g.EpF();g.TgZ(0,"button",1),g.NdJ("click",function(){return g.CHM(Pt),g.oxw().removeDetails()}),g.ALo(1,"async"),g.qZA()}if(2&bt){const Pt=It.ngIf,Dt=g.oxw();g.Q6J("tuiHint",Pt.removeDetails)("focusable",!1)("disabled",!!g.lcZ(1,3,Dt.disabled$))}}let Ct=(()=>{class bt{constructor(Pt,Dt){this.editor=Pt,this.texts$=Dt,this.disabled$=this.editor.stateChange$.pipe((0,y.U)(()=>!this.editor.isActive("details")),(0,P.x)())}removeDetails(){this.editor.removeDetails()}}return bt.\u0275fac=function(Pt){return new(Pt||bt)(g.Y36(M.$3),g.Y36(l.rf))},bt.\u0275cmp=g.Xpm({type:bt,selectors:[["tui-details-remove"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled","click"]],template:function(Pt,Dt){1&Pt&&(g.YNc(0,Tt,2,5,"button",0),g.ALo(1,"async")),2&Pt&&g.Q6J("ngIf",g.lcZ(1,1,Dt.texts$))},directives:[it.O5,B.v,X.$,tt.D,ft.x,ut.t,et.D],pipes:[it.Ov],encapsulation:2,changeDetection:0}),bt})()},50237:(jt,Et,c)=>{c.d(Et,{y:()=>et});var M=c(84614),l=c(14309),y=c(74788),P=c(12057),g=c(76189),it=c(219),B=c(67446),X=c(29070),tt=c(54255),ft=c(15491);function ut(Tt,Ct){if(1&Tt){const bt=y.EpF();y.TgZ(0,"button",1),y.NdJ("click",function(){return y.CHM(bt),y.oxw().setDetails()}),y.qZA()}2&Tt&&y.Q6J("tuiHint",Ct.ngIf.setDetails)("focusable",!1)}let et=(()=>{class Tt{constructor(bt,It){this.editor=bt,this.texts$=It}setDetails(){this.editor.setDetails()}}return Tt.\u0275fac=function(bt){return new(bt||Tt)(y.Y36(M.$3),y.Y36(l.rf))},Tt.\u0275cmp=y.Xpm({type:Tt,selectors:[["tui-details"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","click"]],template:function(bt,It){1&bt&&(y.YNc(0,ut,1,2,"button",0),y.ALo(1,"async")),2&bt&&y.Q6J("ngIf",y.lcZ(1,1,It.texts$))},directives:[P.O5,g.v,it.$,B.D,X.x,tt.t,ft.D],pipes:[P.Ov],encapsulation:2,changeDetection:0}),Tt})()},84985:(jt,Et,c)=>{c.d(Et,{m:()=>ht});var M=c(84614),l=c(14309),y=c(50259),P=c(88002),g=c(74788),it=c(62939),B=c(76189),X=c(219),tt=c(67446),ft=c(29070),ut=c(54255),et=c(15491),Tt=c(20933),Ct=c(12057),bt=c(35065);const It=function(){return{}};function Pt(q,W){if(1&q){const mt=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){const St=g.CHM(mt).$implicit;return g.oxw(2).setFontOption(St)}),g.ALo(1,"lowercase"),g._uU(2),g.qZA()}if(2&q){const mt=W.$implicit;g.Udp("font-family",mt.family)("font-size",mt.px,"px")("font-weight",mt.weight),g.Q6J("ngClass",(null==mt?null:mt.ngClass)||g.DdM(11,It)),g.uIk("automation-id","tui_font__"+g.lcZ(1,9,mt.name||"")),g.xp6(2),g.hij(" ",mt.name," ")}}function Dt(q,W){if(1&q&&(g.TgZ(0,"tui-data-list"),g.YNc(1,Pt,3,12,"button",4),g.ALo(2,"async"),g.qZA()),2&q){const mt=g.oxw();g.xp6(1),g.Q6J("ngForOf",g.lcZ(2,1,mt.fontsOptions$))}}let ht=(()=>{class q{constructor(mt,j,At,St){this.options=mt,this.editor=j,this.texts$=At,this.fontOptionsTexts$=St,this.fontsOptions$=this.fontOptionsTexts$.pipe((0,P.U)(yt=>this.options.fontOptions(yt))),this.fontText$=this.texts$.pipe((0,P.U)(yt=>yt.font))}onClick({headingLevel:mt,px:j}){this.setFontOption({headingLevel:mt,px:j})}setFontOption({headingLevel:mt,px:j}){this.clearPreviousTextStyles(),mt?this.editor.setHeading(mt):this.editor.setParagraph({fontSize:(0,y.tuiPx)(j||0)})}clearPreviousTextStyles(){this.editor.removeEmptyTextStyle(),this.editor.toggleMark("textStyle")}}return q.\u0275fac=function(mt){return new(mt||q)(g.Y36(l.mJ),g.Y36(M.$3),g.Y36(l.rf),g.Y36(l.UN))},q.\u0275cmp=g.Xpm({type:q,selectors:[["tui-font-size"]],decls:6,vars:6,consts:[[3,"content"],["fonts",""],["tuiIconButton","","type","button","size","s","appearance","icon","icon","tuiIconFontLarge","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["fontsDropdown",""],["tuiOption","",3,"fontFamily","fontSize","fontWeight","ngClass","click",4,"ngFor","ngForOf"],["tuiOption","",3,"ngClass","click"]],template:function(mt,j){if(1&mt&&(g.TgZ(0,"tui-hosted-dropdown",0,1),g._UZ(2,"button",2),g.ALo(3,"async"),g.YNc(4,Dt,3,3,"ng-template",null,3,g.W1O),g.qZA()),2&mt){const At=g.MAs(1),St=g.MAs(5);g.Q6J("content",St),g.xp6(2),g.Q6J("tuiHint",g.lcZ(3,4,j.fontText$))("pseudoActive",At.open)("focusable",At.open)}},directives:[it.o,B.v,X.$,tt.D,ft.x,ut.t,et.D,Tt.q,Ct.sg,bt.v,Ct.mk],pipes:[Ct.Ov,Ct.i8],encapsulation:2,changeDetection:0}),q})()},62976:(jt,Et,c)=>{c.d(Et,{h:()=>j});var M=c(19074),l=c(84614),y=c(48699),P=c(14309),g=c(9112),it=c(88002),B=c(74788),X=c(12057),tt=c(62939),ft=c(76189),ut=c(219),et=c(67446),Tt=c(29070),Ct=c(54255),bt=c(15491);function It(At,St){if(1&At){const yt=B.EpF();B.TgZ(0,"button",11),B.NdJ("click",function(){return B.CHM(yt),B.oxw(4).editor.toggleBold()}),B.qZA()}if(2&At){const yt=B.oxw(2).ngIf,Lt=B.oxw().ngIf;B.Q6J("tuiHint",Lt.bold)("pseudoActive",yt.bold)}}function Pt(At,St){if(1&At){const yt=B.EpF();B.TgZ(0,"button",12),B.NdJ("click",function(){return B.CHM(yt),B.oxw(4).editor.toggleItalic()}),B.qZA()}if(2&At){const yt=B.oxw(2).ngIf,Lt=B.oxw().ngIf;B.Q6J("tuiHint",Lt.italic)("pseudoActive",yt.italic)}}function Dt(At,St){if(1&At){const yt=B.EpF();B.TgZ(0,"button",13),B.NdJ("click",function(){return B.CHM(yt),B.oxw(4).editor.toggleUnderline()}),B.qZA()}if(2&At){const yt=B.oxw(2).ngIf,Lt=B.oxw().ngIf;B.Q6J("tuiHint",Lt.underline)("pseudoActive",yt.underline)}}function ht(At,St){if(1&At){const yt=B.EpF();B.TgZ(0,"button",14),B.NdJ("click",function(){return B.CHM(yt),B.oxw(4).editor.toggleStrike()}),B.qZA()}if(2&At){const yt=B.oxw(2).ngIf,Lt=B.oxw().ngIf;B.Q6J("tuiHint",Lt.strikeThrough)("pseudoActive",yt.strike)}}function q(At,St){if(1&At&&(B.TgZ(0,"div",6),B.YNc(1,It,1,2,"button",7),B.YNc(2,Pt,1,2,"button",8),B.YNc(3,Dt,1,2,"button",9),B.YNc(4,ht,1,2,"button",10),B.qZA()),2&At){const yt=B.oxw(3);B.xp6(1),B.Q6J("ngIf",yt.isEnabled(yt.TuiEditorTool.Bold)),B.xp6(1),B.Q6J("ngIf",yt.isEnabled(yt.TuiEditorTool.Italic)),B.xp6(1),B.Q6J("ngIf",yt.isEnabled(yt.TuiEditorTool.Underline)),B.xp6(1),B.Q6J("ngIf",yt.isEnabled(yt.TuiEditorTool.Strikethrough))}}function W(At,St){if(1&At&&(B.TgZ(0,"tui-hosted-dropdown",2,3),B._UZ(2,"button",4),B.YNc(3,q,5,4,"ng-template",null,5,B.W1O),B.qZA()),2&At){const yt=St.ngIf,Lt=B.MAs(1),Ht=B.MAs(4),Kt=B.oxw().ngIf;B.Q6J("content",Ht),B.xp6(2),B.Q6J("tuiHint",Kt.fontStyle)("pseudoActive",Lt.open||yt.bold||yt.italic||yt.underline||yt.strike)("focusable",Lt.open)}}function mt(At,St){if(1&At&&(B.ynx(0),B.YNc(1,W,5,4,"tui-hosted-dropdown",1),B.ALo(2,"async"),B.BQk()),2&At){const yt=B.oxw();B.xp6(1),B.Q6J("ngIf",B.lcZ(2,1,yt.fontStyleState$))}}let j=(()=>{class At{constructor(yt,Lt){this.editor=yt,this.texts$=Lt,this.toolsSet=new Set(M.Db),this.TuiEditorTool=y._,this.fontStyleState$=(0,g.aj)([this.editor.isActive$("bold"),this.editor.isActive$("italic"),this.editor.isActive$("underline"),this.editor.isActive$("strike")]).pipe((0,it.U)(([Ht,Kt,pt,L])=>({bold:Ht,italic:Kt,underline:pt,strike:L})))}set enabledTools(yt){this.toolsSet=new Set(yt)}isEnabled(yt){return this.toolsSet.has(yt)}}return At.\u0275fac=function(yt){return new(yt||At)(B.Y36(l.$3),B.Y36(P.rf))},At.\u0275cmp=B.Xpm({type:At,selectors:[["tui-font-style"]],inputs:{enabledTools:"enabledTools"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"ngIf"],[3,"content"],["format",""],["tuiIconButton","","type","button","size","s","icon","tuiIconFormatLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__font-style-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["formatDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"]],template:function(yt,Lt){1&yt&&(B.YNc(0,mt,3,3,"ng-container",0),B.ALo(1,"async")),2&yt&&B.Q6J("ngIf",B.lcZ(1,1,Lt.texts$))},directives:[X.O5,tt.o,ft.v,ut.$,et.D,Tt.x,Ct.t,bt.D],pipes:[X.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),At})()},19762:(jt,Et,c)=>{c.d(Et,{d:()=>Tt});var M=c(84614),l=c(14309),y=c(88002),P=c(87519),g=c(74788),it=c(76189),B=c(219),X=c(67446),tt=c(29070),ft=c(54255),ut=c(15491),et=c(12057);let Tt=(()=>{class Ct{constructor(It,Pt){this.editor=It,this.texts$=Pt,this.insertGroupText$=this.texts$.pipe((0,y.U)(Dt=>Dt.insertGroup)),this.removeGroupText$=this.texts$.pipe((0,y.U)(Dt=>Dt.removeGroup)),this.disabled$=this.editor.stateChange$.pipe((0,y.U)(()=>!this.editor.isActive("group")),(0,P.x)())}addGroup(){this.editor.setGroup()}removeGroup(){this.editor.removeGroup()}}return Ct.\u0275fac=function(It){return new(It||Ct)(g.Y36(M.$3),g.Y36(l.rf))},Ct.\u0275cmp=g.Xpm({type:Ct,selectors:[["tui-editor-group-tool"]],decls:5,vars:11,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconPlusLarge","appearance","icon","tuiHintDescribe","",3,"focusable","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconCloseLarge","appearance","icon","tuiHintDescribe","",3,"focusable","disabled","tuiHint","click"]],template:function(It,Pt){1&It&&(g.TgZ(0,"button",0),g.NdJ("click",function(){return Pt.addGroup()}),g.ALo(1,"async"),g.qZA(),g.TgZ(2,"button",1),g.NdJ("click",function(){return Pt.removeGroup()}),g.ALo(3,"async"),g.ALo(4,"async"),g.qZA()),2&It&&(g.Q6J("focusable",!1)("tuiHint",g.lcZ(1,5,Pt.insertGroupText$)),g.xp6(2),g.Q6J("focusable",!1)("disabled",!!g.lcZ(3,7,Pt.disabled$))("tuiHint",g.lcZ(4,9,Pt.removeGroupText$)))},directives:[it.v,B.$,X.D,tt.x,ft.t,ut.D],pipes:[et.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),Ct})()},7416:(jt,Et,c)=>{c.d(Et,{U:()=>j});var M=c(64762),l=c(84614),y=c(14309),P=c(50259),g=c(88002),it=c(87519),B=c(74788),X=c(40939),tt=c(62939),ft=c(33250),ut=c(76189),et=c(219),Tt=c(67446),Ct=c(29070),bt=c(54255),It=c(15491),Pt=c(12057),Dt=c(5451),ht=c(17163);function q(At,St){if(1&At&&B._UZ(0,"div",6),2&At){const yt=B.oxw().tuiLet;B.Udp("background",yt)}}function W(At,St){if(1&At){const yt=B.EpF();B.TgZ(0,"tui-palette",7),B.NdJ("selectedColor",function(Ht){return B.CHM(yt),B.oxw(2).editor.setBackgroundColor(Ht)}),B.qZA()}if(2&At){const yt=St.$implicit,Lt=B.oxw(2);B.Q6J("tuiActiveZoneParent",yt)("colors",Lt.colors)}}function mt(At,St){if(1&At&&(B.TgZ(0,"tui-hosted-dropdown",1,2),B._UZ(2,"button",3),B.ALo(3,"async"),B.YNc(4,q,1,2,"div",4),B.YNc(5,W,1,2,"ng-template",null,5,B.W1O),B.qZA()),2&At){const yt=St.tuiLet,Lt=B.MAs(1),Ht=B.MAs(6),Kt=B.oxw();B.Q6J("content",Ht)("tuiDropdownMaxHeight",999),B.xp6(2),B.Q6J("tuiHint",B.lcZ(3,6,Kt.backColorText$))("pseudoActive",Lt.open)("focusable",Lt.open),B.xp6(2),B.Q6J("ngIf",!Kt.isBlankColor(yt||""))}}class j{constructor(St,yt,Lt){this.editor=St,this.texts$=yt,this.defaultOptions=Lt,this.colors=this.defaultOptions.colors,this.backgroundColor$=this.editor.stateChange$.pipe((0,g.U)(()=>this.editor.getBackgroundColor()||this.defaultOptions.blankColor),(0,it.x)()),this.backColorText$=this.texts$.pipe((0,g.U)(Ht=>Ht.backColor))}isBlankColor(St){return St===this.defaultOptions.blankColor}}j.\u0275fac=function(St){return new(St||j)(B.Y36(l.$3),B.Y36(y.rf),B.Y36(y.mJ))},j.\u0275cmp=B.Xpm({type:j,selectors:[["tui-highlight-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["hilite",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconHiliteLarge","automation-id","toolbar__hilite-button","tuiHintDescribe","",1,"t-tool",3,"tuiHint","pseudoActive","focusable"],["class","t-plate",3,"background",4,"ngIf"],["hiliteDropdown",""],[1,"t-plate"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(St,yt){1&St&&(B.YNc(0,mt,7,8,"tui-hosted-dropdown",0),B.ALo(1,"async")),2&St&&B.Q6J("tuiLet",B.lcZ(1,1,yt.backgroundColor$))},directives:[X.L,tt.o,ft.Ek,ut.v,et.$,Tt.D,Ct.x,bt.t,It.D,Pt.O5,Dt.R,ht.e],pipes:[Pt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,M.gn)([(0,P.tuiDefaultProp)()],j.prototype,"colors",void 0)},93252:(jt,Et,c)=>{c.d(Et,{Xp:()=>M.X,pu:()=>it,Tf:()=>B.T,P_:()=>X,yj:()=>tt.y,y9:()=>ft,Un:()=>ut.U,dN:()=>It.d,jP:()=>Pt,mK:()=>et.m,p7:()=>Tt,hr:()=>Ct.h,Zv:()=>bt,UT:()=>Dt.U,XC:()=>q,w2:()=>W.w,Ur:()=>mt,pH:()=>j.p,mp:()=>At,iN:()=>L.i,lT:()=>St.l,iA:()=>Ht,YH:()=>Kt.Y,er:()=>pt,_I:()=>L._,__:()=>rt,M8:()=>yt.M,kU:()=>Lt,G0:()=>ct.G,_t:()=>st});var M=c(37924),l=c(12057),y=c(50259),P=c(3497),g=c(74788);let it=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,P.TuiHintModule,y.TuiLetModule]]}),J})();var B=c(15587);let X=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,P.TuiHintModule,P.TuiDataListModule]]}),J})();var tt=c(50237);let ft=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiButtonModule,P.TuiHintModule]]}),J})();var ut=c(18832),et=c(84985);let Tt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,P.TuiHintModule,P.TuiDataListModule]]}),J})();var Ct=c(62976);let bt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,P.TuiHintModule]]}),J})();var It=c(19762);let Pt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiButtonModule,P.TuiHintModule]]}),J})();var Dt=c(7416),ht=c(27050);let q=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,ht.VM,P.TuiHintModule,P.TuiDropdownModule,y.TuiActiveZoneModule,y.TuiLetModule]]}),J})();var W=c(13441);let mt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,P.TuiHintModule,y.TuiLetModule]]}),J})();var j=c(95558);let At=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,ht.VM,P.TuiButtonModule,P.TuiHintModule,y.TuiActiveZoneModule,P.TuiDropdownModule,y.TuiLetModule]]}),J})();var St=c(28962),yt=c(74549);let Lt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,y.TuiRepeatTimesModule]]}),J})(),Ht=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiDropdownModule,P.TuiButtonModule,P.TuiHintModule,Lt]]}),J})();var Kt=c(76965);let pt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiButtonModule,P.TuiHintModule,y.TuiLetModule]]}),J})();var L=c(22063);let rt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiHintModule,P.TuiButtonModule,P.TuiDataListModule,y.TuiLetModule]]}),J})();var ct=c(10528);let st=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiButtonModule,P.TuiHostedDropdownModule,P.TuiDropdownModule,P.TuiHintModule,ht.VM,y.TuiActiveZoneModule,y.TuiLetModule]]}),J})()},13441:(jt,Et,c)=>{c.d(Et,{w:()=>Dt});var M=c(84614),l=c(14309),y=c(9112),P=c(88002),g=c(74788),it=c(12057),B=c(40939),X=c(62939),tt=c(76189),ft=c(219),ut=c(67446),et=c(29070),Tt=c(54255),Ct=c(15491);function bt(ht,q){if(1&ht){const W=g.EpF();g.TgZ(0,"div",6),g.TgZ(1,"button",7),g.NdJ("click",function(){return g.CHM(W),g.oxw(3).editor.toggleUnorderedList()}),g.qZA(),g.TgZ(2,"button",8),g.NdJ("click",function(){return g.CHM(W),g.oxw(3).editor.toggleOrderedList()}),g.qZA(),g.TgZ(3,"button",9),g.NdJ("click",function(){return g.CHM(W),g.oxw(3).sinkListItem()}),g.qZA(),g.TgZ(4,"button",10),g.NdJ("click",function(){return g.CHM(W),g.oxw(3).liftListItem()}),g.qZA(),g.qZA()}if(2&ht){const W=g.oxw().tuiLet,mt=g.oxw().ngIf;g.xp6(1),g.Q6J("tuiHint",mt.unorderedList)("pseudoActive",!(null==W||!W.unordered)),g.xp6(1),g.Q6J("tuiHint",mt.orderedList)("pseudoActive",!(null==W||!W.ordered)),g.xp6(1),g.Q6J("tuiHint",mt.indent)("disabled",!(null!=W&&W.ordered||null!=W&&W.unordered)),g.xp6(1),g.Q6J("tuiHint",mt.outdent)("disabled",!(null!=W&&W.ordered||null!=W&&W.unordered))}}function It(ht,q){if(1&ht&&(g.TgZ(0,"tui-hosted-dropdown",2,3),g._UZ(2,"button",4),g.YNc(3,bt,5,8,"ng-template",null,5,g.W1O),g.qZA()),2&ht){const W=q.tuiLet,mt=g.MAs(1),j=g.MAs(4),At=g.oxw().ngIf;g.Q6J("content",j),g.xp6(2),g.Q6J("tuiHint",At.list)("pseudoActive",(null==mt?null:mt.open)||(null==W?null:W.unordered)||(null==W?null:W.ordered)||!1)("focusable",mt.open)}}function Pt(ht,q){if(1&ht&&(g.ynx(0),g.YNc(1,It,5,4,"tui-hosted-dropdown",1),g.ALo(2,"async"),g.BQk()),2&ht){const W=g.oxw();g.xp6(1),g.Q6J("tuiLet",g.lcZ(2,1,W.listState$))}}let Dt=(()=>{class ht{constructor(W,mt){this.editor=W,this.texts$=mt,this.listState$=(0,y.aj)([this.editor.isActive$("orderedList"),this.editor.isActive$("bulletList")]).pipe((0,P.U)(([j,At])=>({ordered:j,unordered:At})))}sinkListItem(){this.editor.sinkListItem()}liftListItem(){this.editor.liftListItem()}}return ht.\u0275fac=function(W){return new(W||ht)(g.Y36(M.$3),g.Y36(l.rf))},ht.\u0275cmp=g.Xpm({type:ht,selectors:[["tui-list-configs"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["list",""],["tuiIconButton","","type","button","size","s","icon","tuiIconListLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__ordering-list-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["listDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconListLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOLLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconIndentLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","disabled","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOutdentLarge","appearance","icon",1,"t-option",3,"tuiHint","disabled","click"]],template:function(W,mt){1&W&&(g.YNc(0,Pt,3,3,"ng-container",0),g.ALo(1,"async")),2&W&&g.Q6J("ngIf",g.lcZ(1,1,mt.texts$))},directives:[it.O5,B.L,X.o,tt.v,ft.$,ut.D,et.x,Tt.t,Ct.D],pipes:[it.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),ht})()},95558:(jt,Et,c)=>{c.d(Et,{p:()=>St});var M=c(64762),l=c(84614),y=c(14309),P=c(50259),g=c(9112),it=c(88002),B=c(87519),X=c(74788),tt=c(40939),ft=c(62939),ut=c(33250),et=c(76189),Tt=c(219),Ct=c(67446),bt=c(29070),It=c(54255),Pt=c(15491),Dt=c(12057),ht=c(5451),q=c(17163);function W(yt,Lt){if(1&yt&&X._UZ(0,"div",7),2&yt){const Ht=X.oxw(2).tuiLet;X.Udp("background",Ht)}}function mt(yt,Lt){if(1&yt){const Ht=X.EpF();X.TgZ(0,"tui-palette",8),X.NdJ("selectedColor",function(pt){X.CHM(Ht),X.oxw();const L=X.MAs(1);return X.oxw(2).setCellColor(pt),L.close()}),X.qZA()}if(2&yt){const Ht=Lt.$implicit,Kt=X.oxw(3);X.Q6J("tuiActiveZoneParent",Ht)("colors",Kt.colors)}}function j(yt,Lt){if(1&yt&&(X.TgZ(0,"tui-hosted-dropdown",2,3),X._UZ(2,"button",4),X.ALo(3,"async"),X.YNc(4,W,1,2,"div",5),X.YNc(5,mt,1,2,"ng-template",null,6,X.W1O),X.qZA()),2&yt){const Ht=Lt.tuiLet,Kt=X.MAs(1),pt=X.MAs(6),L=X.oxw().tuiLet,rt=X.oxw();X.Q6J("content",pt)("tuiDropdownMaxHeight",999)("canOpen",!!Ht),X.xp6(2),X.Q6J("tuiHint",X.lcZ(3,8,rt.colorText$))("pseudoActive",Kt.open)("focusable",Kt.open)("disabled",!Ht),X.xp6(2),X.Q6J("ngIf",!rt.isBlankColor(L||""))}}function At(yt,Lt){if(1&yt&&(X.ynx(0),X.YNc(1,j,7,10,"tui-hosted-dropdown",1),X.ALo(2,"async"),X.BQk()),2&yt){const Ht=X.oxw();X.xp6(1),X.Q6J("tuiLet",X.lcZ(2,1,Ht.isActive$))}}class St{constructor(Lt,Ht,Kt){this.defaultOptions=Lt,this.editor=Ht,this.texts$=Kt,this.colors=this.defaultOptions.colors,this.colorText$=this.texts$.pipe((0,it.U)(pt=>this.editor.isActive("group")&&pt.hiliteGroup||this.editor.isActive("table")&&pt.cellColor||"")),this.isActive$=(0,g.aj)([this.editor.isActive$("table"),this.editor.isActive$("group")]).pipe((0,it.U)(([pt,L])=>pt||L)),this.color$=this.editor.stateChange$.pipe((0,it.U)(()=>this.editor.getCellColor()||this.editor.getGroupColor()||this.defaultOptions.blankColor),(0,B.x)())}isBlankColor(Lt){return Lt===this.defaultOptions.blankColor}setCellColor(Lt){this.editor.isActive("group")?this.editor.setGroupHilite(Lt):this.editor.isActive("table")&&this.editor.setCellColor(Lt)}}St.\u0275fac=function(Lt){return new(Lt||St)(X.Y36(y.mJ),X.Y36(l.$3),X.Y36(y.rf))},St.\u0275cmp=X.Xpm({type:St,selectors:[["tui-table-cell-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen"],["colorSelect",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconPaintLarge","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable","disabled"],["class","t-plate t-plate_paint",3,"background",4,"ngIf"],["cellColorDropdown",""],[1,"t-plate","t-plate_paint"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(Lt,Ht){1&Lt&&(X.YNc(0,At,3,3,"ng-container",0),X.ALo(1,"async")),2&Lt&&X.Q6J("tuiLet",X.lcZ(1,1,Ht.color$))},directives:[tt.L,ft.o,ut.Ek,et.v,Tt.$,Ct.D,bt.x,It.t,Pt.D,Dt.O5,ht.R,q.e],pipes:[Dt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,M.gn)([(0,P.tuiDefaultProp)()],St.prototype,"colors",void 0)},28962:(jt,Et,c)=>{c.d(Et,{l:()=>It});var M=c(84614),l=c(14309),y=c(88002),P=c(74788),g=c(62939),it=c(33250),B=c(76189),X=c(219),tt=c(67446),ft=c(29070),ut=c(54255),et=c(15491),Tt=c(74549),Ct=c(12057);function bt(Pt,Dt){if(1&Pt){const ht=P.EpF();P.TgZ(0,"tui-table-size-selector",4),P.NdJ("onSelectSize",function(W){return P.CHM(ht),P.oxw().addTable(W)}),P.qZA()}}let It=(()=>{class Pt{constructor(ht,q){this.editor=ht,this.texts$=q,this.insertTableText$=this.texts$.pipe((0,y.U)(W=>W.insertTable))}addTable({rows:ht,cols:q}){this.editor.enter();const W=this.editor.state.selection.anchor;this.editor.enter(),this.editor.enter(),this.editor.setTextSelection(W),this.editor.insertTable(ht,q)}}return Pt.\u0275fac=function(ht){return new(ht||Pt)(P.Y36(M.$3),P.Y36(l.rf))},Pt.\u0275cmp=P.Xpm({type:Pt,selectors:[["tui-table-create"]],decls:6,vars:5,consts:[["tuiDropdownAlign","left","tuiDropdownDirection","bottom",3,"content"],["table",""],["tuiIconButton","","type","button","size","s","icon","tuiIconTableLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable"],["tableDropdown",""],[3,"onSelectSize"]],template:function(ht,q){if(1&ht&&(P.TgZ(0,"tui-hosted-dropdown",0,1),P._UZ(2,"button",2),P.ALo(3,"async"),P.qZA(),P.YNc(4,bt,1,0,"ng-template",null,3,P.W1O)),2&ht){const W=P.MAs(1),mt=P.MAs(5);P.Q6J("content",mt),P.xp6(2),P.Q6J("tuiHint",P.lcZ(3,3,q.insertTableText$))("focusable",W.open)}},directives:[g.o,it.Ek,B.v,X.$,tt.D,ft.x,ut.t,et.D,Tt.M],pipes:[Ct.Ov],encapsulation:2,changeDetection:0}),Pt})()},76965:(jt,Et,c)=>{c.d(Et,{Y:()=>Pt});var M=c(84614),l=c(14309),y=c(88002),P=c(87519),g=c(74788),it=c(40939),B=c(12057),X=c(76189),tt=c(219),ft=c(67446),ut=c(29070),et=c(54255),Tt=c(15491);function Ct(Dt,ht){if(1&Dt){const q=g.EpF();g.TgZ(0,"button",2),g.NdJ("click",function(){g.CHM(q);const mt=g.oxw().tuiLet,j=g.oxw();return mt.mergeCells?j.mergeCells():j.splitCell()}),g.qZA()}if(2&Dt){const q=ht.ngIf,W=g.oxw().tuiLet;g.Q6J("icon",W.mergeCells?"tuiIconTableMergeLarge":"tuiIconTableSplitLarge")("tuiHint",W.mergeCells?q.mergeCells:q.splitCells)("focusable",!1)("disabled",!W.mergeCells&&!W.splitCells)}}function bt(Dt,ht){if(1&Dt&&(g.ynx(0),g.YNc(1,Ct,1,4,"button",1),g.ALo(2,"async"),g.BQk()),2&Dt){const q=g.oxw();g.xp6(1),g.Q6J("ngIf",g.lcZ(2,1,q.texts$))}}const It=function(Dt,ht){return{mergeCells:Dt,splitCells:ht}};let Pt=(()=>{class Dt{constructor(q,W){this.editor=q,this.texts$=W,this.canMergeCells$=this.editor.stateChange$.pipe((0,y.U)(()=>this.editor.canMergeCells()),(0,P.x)()),this.canSplitCells$=this.editor.stateChange$.pipe((0,y.U)(()=>this.editor.canSplitCells()),(0,P.x)())}mergeCells(){this.editor.mergeCells()}splitCell(){this.editor.splitCell()}}return Dt.\u0275fac=function(q){return new(q||Dt)(g.Y36(M.$3),g.Y36(l.rf))},Dt.\u0275cmp=g.Xpm({type:Dt,selectors:[["tui-table-merge-cells"]],decls:3,vars:8,consts:[[4,"tuiLet"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"icon","tuiHint","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"icon","tuiHint","focusable","disabled","click"]],template:function(q,W){1&q&&(g.YNc(0,bt,3,3,"ng-container",0),g.ALo(1,"async"),g.ALo(2,"async")),2&q&&g.Q6J("tuiLet",g.WLB(5,It,g.lcZ(1,1,W.canMergeCells$),g.lcZ(2,3,W.canSplitCells$)))},directives:[it.L,B.O5,X.v,tt.$,ft.D,ut.x,et.t,Tt.D],pipes:[B.Ov],encapsulation:2,changeDetection:0}),Dt})()},22063:(jt,Et,c)=>{c.d(Et,{_:()=>mt,i:()=>W});var M=c(84614),l=c(14309),y=c(88002),P=c(74788),g=c(40939),it=c(62939),B=c(76189),X=c(219),tt=c(67446),ft=c(29070),ut=c(54255),et=c(15491),Tt=c(20933),Ct=c(12057),bt=c(89786),It=c(35065);function Pt(j,At){if(1&j&&(P.TgZ(0,"tui-hosted-dropdown",2,3),P._UZ(2,"button",4),P.ALo(3,"async"),P.qZA()),2&j){const St=At.tuiLet,yt=P.MAs(1),Lt=P.oxw(),Ht=P.MAs(3);P.Q6J("content",Ht)("canOpen",!!St),P.xp6(2),P.Q6J("tuiHint",P.lcZ(3,5,Lt.rowsColumnsManagingText$))("focusable",yt.open)("disabled",!St)}}function Dt(j,At){if(1&j){const St=P.EpF();P.TgZ(0,"button",7),P.NdJ("click",function(){const Ht=P.CHM(St).index,Kt=P.oxw().index;return P.oxw(2).onTableOption(2*Kt+Ht)}),P._uU(1),P.qZA()}if(2&j){const St=At.$implicit;P.xp6(1),P.hij(" ",St," ")}}function ht(j,At){if(1&j&&(P.TgZ(0,"tui-opt-group"),P.YNc(1,Dt,2,1,"button",6),P.qZA()),2&j){const St=At.$implicit;P.xp6(1),P.Q6J("ngForOf",St)}}function q(j,At){if(1&j&&(P.TgZ(0,"tui-data-list"),P.YNc(1,ht,2,1,"tui-opt-group",5),P.ALo(2,"async"),P.qZA()),2&j){const St=P.oxw();P.xp6(1),P.Q6J("ngForOf",P.lcZ(2,1,St.tableCommandTexts$))}}var W=(()=>{return(j=W||(W={}))[j.InsertColumnBefore=0]="InsertColumnBefore",j[j.InsertColumnAfter=1]="InsertColumnAfter",j[j.InsertRowBefore=2]="InsertRowBefore",j[j.InsertRowAfter=3]="InsertRowAfter",j[j.DeleteColumn=4]="DeleteColumn",j[j.DeleteRow=5]="DeleteRow",W;var j})();let mt=(()=>{class j{constructor(St,yt,Lt){this.editor=St,this.texts$=yt,this.tableCommandTexts$=Lt,this.commandsRegistry={[W.InsertColumnAfter]:()=>this.editor.addColumnAfter(),[W.InsertColumnBefore]:()=>this.editor.addColumnBefore(),[W.InsertRowAfter]:()=>this.editor.addRowAfter(),[W.InsertRowBefore]:()=>this.editor.addRowBefore(),[W.DeleteColumn]:()=>this.editor.deleteColumn(),[W.DeleteRow]:()=>this.editor.deleteRow()},this.isActive$=this.editor.isActive$("table"),this.rowsColumnsManagingText$=this.texts$.pipe((0,y.U)(Ht=>Ht.rowsColumnsManaging))}onTableOption(St){this.commandsRegistry[St]()}}return j.\u0275fac=function(St){return new(St||j)(P.Y36(M.$3),P.Y36(l.rf),P.Y36(l.$i))},j.\u0275cmp=P.Xpm({type:j,selectors:[["tui-table-row-column-manager"]],decls:4,vars:3,consts:[[3,"content","canOpen",4,"tuiLet"],["tableOptionsDropdown",""],[3,"content","canOpen"],["tableCommand",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAddRowLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled"],[4,"ngFor","ngForOf"],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(St,yt){1&St&&(P.YNc(0,Pt,4,7,"tui-hosted-dropdown",0),P.ALo(1,"async"),P.YNc(2,q,3,3,"ng-template",null,1,P.W1O)),2&St&&P.Q6J("tuiLet",P.lcZ(1,1,yt.isActive$))},directives:[g.L,it.o,B.v,X.$,tt.D,ft.x,ut.t,et.D,Tt.q,Ct.sg,bt.R,It.v],pipes:[Ct.Ov],encapsulation:2,changeDetection:0}),j})()},74549:(jt,Et,c)=>{c.d(Et,{M:()=>ft});var M=c(74788),l=c(62579),y=c(3497),P=c(36097);function g(ut,et){if(1&ut){const Tt=M.EpF();M.TgZ(0,"div",4),M.NdJ("mouseenter",function(bt){const Pt=M.CHM(Tt).$implicit,Dt=M.oxw().$implicit;return M.oxw().updateCurrentSize(Pt+1,Dt+1,bt)})("click",function(){return M.CHM(Tt),M.oxw(2).select()}),M.qZA()}if(2&ut){const Tt=et.$implicit,Ct=M.oxw().$implicit,bt=M.oxw();M.ekj("t-cell_hovered",bt.tableSelectHovered(Tt,Ct))}}function it(ut,et){if(1&ut&&(M.TgZ(0,"div",2),M.YNc(1,g,1,2,"div",3),M.qZA()),2&ut){const Tt=M.oxw();M.xp6(1),M.Q6J("tuiRepeatTimesOf",Tt.rowsNumber)}}let ft=(()=>{class ut{constructor(Tt){this.windowRef=Tt,this.selectSize=new M.vpe,this.onSelectSize=this.selectSize,this.tableSize={rows:1,cols:1}}get columnsNumber(){return Math.min(Math.max(3,this.tableSize.cols+1),15)}get rowsNumber(){return Math.min(Math.max(3,this.tableSize.rows+1),15)}tableSelectHovered(Tt,Ct){return Tt<this.tableSize.rows&&Ct<this.tableSize.cols}updateCurrentSize(Tt,Ct,bt){(0,y.tuiGetViewportWidth)(this.windowRef)-bt.clientX>70&&(this.tableSize={rows:Tt,cols:Ct})}onClick(){this.select()}select(){this.selectSize.emit(this.tableSize)}}return ut.\u0275fac=function(Tt){return new(Tt||ut)(M.Y36(l.m9))},ut.\u0275cmp=M.Xpm({type:ut,selectors:[["tui-table-size-selector"]],outputs:{selectSize:"selectSize",onSelectSize:"onSelectSize"},decls:3,vars:3,consts:[["class","t-column",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-description"],[1,"t-column"],["class","t-cell",3,"t-cell_hovered","mouseenter","click",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-cell",3,"mouseenter","click"]],template:function(Tt,Ct){1&Tt&&(M.YNc(0,it,2,1,"div",0),M.TgZ(1,"div",1),M._uU(2),M.qZA()),2&Tt&&(M.Q6J("tuiRepeatTimesOf",Ct.columnsNumber),M.xp6(2),M.AsE("",Ct.tableSize.cols,"\xd7",Ct.tableSize.rows,""))},directives:[P.X],styles:["[_nghost-%COMP%]{display:block;padding:.75rem}.t-cell[_ngcontent-%COMP%]{display:inline-block;background-color:var(--tui-base-01);width:1.25rem;height:1.25rem;border-radius:.25rem;margin:.125rem;border:1px solid var(--tui-base-04);cursor:pointer}.t-cell_hovered[_ngcontent-%COMP%]{background-color:var(--tui-base-02)}.t-column[_ngcontent-%COMP%]{white-space:nowrap}.t-description[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),ut})()},10528:(jt,Et,c)=>{c.d(Et,{G:()=>mt});var M=c(64762),l=c(84614),y=c(14309),P=c(50259),g=c(88002),it=c(87519),B=c(74788),X=c(40939),tt=c(62939),ft=c(33250),ut=c(76189),et=c(219),Tt=c(67446),Ct=c(29070),bt=c(54255),It=c(15491),Pt=c(5451),Dt=c(17163),ht=c(12057);function q(j,At){if(1&j){const St=B.EpF();B.TgZ(0,"tui-palette",6),B.NdJ("selectedColor",function(Lt){return B.CHM(St),B.oxw(2).editor.setFontColor(Lt)}),B.qZA()}if(2&j){const St=At.$implicit,yt=B.oxw(2);B.Q6J("tuiActiveZoneParent",St)("colors",yt.colors)}}function W(j,At){if(1&j&&(B.TgZ(0,"tui-hosted-dropdown",1,2),B._UZ(2,"button",3),B.ALo(3,"async"),B._UZ(4,"div",4),B.YNc(5,q,1,2,"ng-template",null,5,B.W1O),B.qZA()),2&j){const St=At.tuiLet,yt=B.MAs(1),Lt=B.MAs(6),Ht=B.oxw();B.Q6J("content",Lt)("tuiDropdownMaxHeight",999),B.xp6(2),B.Q6J("tuiHint",B.lcZ(3,7,Ht.foreColorText$))("pseudoActive",yt.open)("focusable",yt.open),B.xp6(2),B.Udp("background",St)}}class mt{constructor(At,St,yt){this.defaultOptions=At,this.editor=St,this.texts$=yt,this.colors=this.defaultOptions.colors,this.fontColor$=this.editor.stateChange$.pipe((0,g.U)(()=>this.editor.getFontColor()||this.defaultOptions.blankColor),(0,it.x)()),this.foreColorText$=this.texts$.pipe((0,g.U)(Lt=>Lt.foreColor))}}mt.\u0275fac=function(At){return new(At||mt)(B.Y36(y.mJ),B.Y36(l.$3),B.Y36(y.rf))},mt.\u0275cmp=B.Xpm({type:mt,selectors:[["tui-text-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["color",""],["tuiIconButton","","type","button","size","s","icon","tuiIconColorLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__color-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],[1,"t-plate"],["colorDropdown",""],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(At,St){1&At&&(B.YNc(0,W,7,9,"tui-hosted-dropdown",0),B.ALo(1,"async")),2&At&&B.Q6J("tuiLet",B.lcZ(1,1,St.fontColor$))},directives:[X.L,tt.o,ft.Ek,ut.v,et.$,Tt.D,Ct.x,bt.t,It.D,Pt.R,Dt.e],pipes:[ht.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,M.gn)([(0,P.tuiDefaultProp)()],mt.prototype,"colors",void 0)},17406:(jt,Et,c)=>{c.d(Et,{M6:()=>M.M,yB:()=>X,Bp:()=>tt.B});var M=c(4997),l=c(12057),y=c(71115),P=c(93252),g=c(50259),it=c(3497),B=c(74788);let X=(()=>{class ft{}return ft.\u0275fac=function(et){return new(et||ft)},ft.\u0275mod=B.oAB({type:ft}),ft.\u0275inj=B.cJS({imports:[[l.ez,it.TuiHintModule,g.TuiFocusableModule,it.TuiButtonModule,it.TuiHostedDropdownModule,y.Fu,P.er,P.mp,P.__,P.iA,P.p7,P.Zv,P.pu,P.Ur,P._t,P.XC,P.P_,P.y9,g.TuiItemModule,P.jP]]}),ft})();var tt=c(13044)},13044:(jt,Et,c)=>{c.d(Et,{B:()=>y});var M=c(74788),l=c(50259);let y=(()=>{class P{constructor(it){this.elementRef=it}get toolsContainers(){return Array.from(this.elementRef.nativeElement.querySelectorAll("[tuiItem]"))}onHorizontalNavigation(it){const{toolsContainers:B}=this,X=B.findIndex(l.tuiIsNativeFocusedIn),ft=B[(0,l.tuiClamp)(X+(it?-1:1),0,B.length-1)],ut=it?this.findPreviousTool(ft):this.findNextTool(ft);ut&&ut.focus()}findFirstFocusableTool(it=!1){const B=it?this.toolsContainers.slice().reverse():this.toolsContainers;for(const X of B){const tt=(0,l.tuiIsNativeMouseFocusable)(X)?X:(0,l.tuiGetClosestFocusable)({initial:X,root:X,keyboard:!1});if(tt)return tt}return null}findPreviousTool(it){return(0,l.tuiIsNativeMouseFocusable)(it)?it:(0,l.tuiGetClosestFocusable)({initial:it,root:it,keyboard:!1})||(0,l.tuiGetClosestFocusable)({initial:it,root:this.elementRef.nativeElement,previous:!0,keyboard:!1})}findNextTool(it){return(0,l.tuiIsNativeMouseFocusable)(it)?it:(0,l.tuiGetClosestFocusable)({initial:it,root:this.elementRef.nativeElement,keyboard:!1})}}return P.\u0275fac=function(it){return new(it||P)(M.Y36(M.SBq))},P.\u0275dir=M.lG2({type:P,selectors:[["","tuiToolbarNavigationManager",""]],hostBindings:function(it,B){1&it&&M.NdJ("keydown.arrowRight.prevent",function(){return B.onHorizontalNavigation(!1)})("keydown.arrowLeft.prevent",function(){return B.onHorizontalNavigation(!0)})}}),P})()},4997:(jt,Et,c)=>{c.d(Et,{M:()=>O});var M=c(64762),l=c(74788),y=c(19074),P=c(84614),g=c(48699),it=c(14309),B=c(50259),X=c(15257),tt=c(13044),ft=c(12057),ut=c(48893),et=c(76189),Tt=c(82707),Ct=c(219),bt=c(67446),It=c(29070),Pt=c(54255),Dt=c(15491),ht=c(84985),q=c(62976),W=c(37924),mt=c(13441),j=c(62939),At=c(45050),St=c(10528),yt=c(7416),Lt=c(15587),Ht=c(50237),Kt=c(18832),pt=c(19762),L=c(95558),rt=c(28962),ct=c(22063),st=c(76965);const J=["dropdown"];function Q(R,V){1&R&&l.GkF(0)}function ot(R,V){if(1&R){const H=l.EpF();l.TgZ(0,"div",6),l.TgZ(1,"button",7),l.NdJ("click",function(){return l.CHM(H),l.oxw(2).undo()}),l.qZA(),l.TgZ(2,"button",8),l.NdJ("click",function(){return l.CHM(H),l.oxw(2).redo()}),l.qZA(),l.qZA()}if(2&R){const H=l.oxw().ngIf,Ot=l.oxw();l.xp6(1),l.Q6J("tuiHint",H.undo)("disabled",Ot.undoDisabled)("focusable",!1),l.xp6(1),l.Q6J("tuiHint",H.redo)("disabled",Ot.redoDisabled)("focusable",!1)}}function kt(R,V){1&R&&(l.TgZ(0,"div",6),l._UZ(1,"tui-font-size",9),l.qZA())}function $t(R,V){if(1&R&&l._UZ(0,"tui-font-style",15),2&R){const H=l.oxw(3);l.Q6J("enabledTools",H.toolsSet)}}function Yt(R,V){1&R&&l._UZ(0,"tui-align-content",9)}function ne(R,V){1&R&&l._UZ(0,"tui-list-configs",9)}function zt(R,V){if(1&R){const H=l.EpF();l.TgZ(0,"button",16,17),l.NdJ("click",function(){return l.CHM(H),l.oxw(3).toggleQuote()}),l.qZA()}if(2&R){const H=l.oxw(2).ngIf,Ot=l.oxw();l.Q6J("tuiHint",H.quote)("pseudoActive",Ot.blockquote)("disabled",Ot.unorderedList||Ot.orderedList)("focusable",!1)}}function ue(R,V){if(1&R){const H=l.EpF();l.TgZ(0,"tui-edit-link",22,23),l.NdJ("addLink",function(wt){l.CHM(H),l.oxw();const N=l.MAs(1);return l.oxw(3).onLink(N,wt)})("removeLink",function(){l.CHM(H),l.oxw();const wt=l.MAs(1);return l.oxw(3).onLink(wt)}),l.qZA()}}function ye(R,V){if(1&R&&(l.TgZ(0,"tui-hosted-dropdown",18,19),l._UZ(2,"button",20,17),l.YNc(4,ue,2,0,"ng-template",null,21,l.W1O),l.qZA()),2&R){const H=l.MAs(1),Ot=l.MAs(5),wt=l.oxw(2).ngIf,N=l.oxw();l.Q6J("canOpen",N.canOpenAnchor)("content",Ot),l.xp6(2),l.Q6J("tuiHint",wt.link)("pseudoActive",H.open||N.a)("focusable",H.open)}}function xe(R,V){if(1&R){const H=l.EpF();l.TgZ(0,"tui-edit-link",28),l.NdJ("addLink",function(wt){l.CHM(H),l.oxw();const N=l.MAs(1);return l.oxw(3).setAnchor(N,wt)})("removeLink",function(){return l.CHM(H),l.oxw(4).removeAnchor()}),l.qZA()}2&R&&l.Q6J("anchorMode",!0)}function fe(R,V){if(1&R&&(l.TgZ(0,"tui-hosted-dropdown",24,25),l._UZ(2,"button",26),l.YNc(3,xe,1,1,"ng-template",null,27,l.W1O),l.qZA()),2&R){const H=l.MAs(1),Ot=l.MAs(4),wt=l.oxw(2).ngIf,N=l.oxw();l.Q6J("canOpen",N.canOpenAnchor)("content",Ot),l.xp6(2),l.Q6J("focusable",!1)("pseudoActive",H.open||N.jumpAnchor)("tuiHint",wt.insertAnchor)}}function Ke(R,V){if(1&R){const H=l.EpF();l.ynx(0),l.TgZ(1,"button",29,17),l.NdJ("click",function(){return l.CHM(H),l.MAs(4).click()}),l.qZA(),l.TgZ(3,"input",30,31),l.NdJ("change",function(){l.CHM(H);const wt=l.MAs(4);return l.oxw(3).onAttach(wt)}),l.qZA(),l.BQk()}if(2&R){const H=l.oxw(2).ngIf,Ot=l.oxw();l.xp6(1),l.Q6J("tuiHint",H.attach)("focusable",!1),l.xp6(2),l.Q6J("accept",Ot.attachOptions.accept)("multiple",Ot.attachOptions.multiple)("tuiFocusable",!1)}}function Ae(R,V){if(1&R&&(l.TgZ(0,"div",6),l.YNc(1,$t,1,1,"tui-font-style",10),l.YNc(2,Yt,1,0,"tui-align-content",11),l.YNc(3,ne,1,0,"tui-list-configs",11),l.YNc(4,zt,2,4,"button",12),l.YNc(5,ye,6,5,"tui-hosted-dropdown",13),l.YNc(6,fe,5,5,"tui-hosted-dropdown",14),l.YNc(7,Ke,5,5,"ng-container",1),l.qZA()),2&R){const H=l.oxw(2);l.xp6(1),l.Q6J("ngIf",H.formatEnabled),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Align)),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.List)),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Quote)),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Link)),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Anchor)),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Attach))}}function Ne(R,V){if(1&R){const H=l.EpF();l.TgZ(0,"button",34,17),l.NdJ("click",function(){return l.CHM(H),l.oxw(3).toggleSubscript()}),l.qZA()}if(2&R){const H=l.oxw(2).ngIf,Ot=l.oxw();l.Q6J("tuiHint",H.subscript)("pseudoActive",Ot.subscript)("focusable",!1)}}function _e(R,V){if(1&R){const H=l.EpF();l.TgZ(0,"button",35,17),l.NdJ("click",function(){return l.CHM(H),l.oxw(3).toggleSuperscript()}),l.qZA()}if(2&R){const H=l.oxw(2).ngIf,Ot=l.oxw();l.Q6J("tuiHint",H.superscript)("pseudoActive",Ot.superscript)("focusable",!1)}}function De(R,V){if(1&R&&(l.TgZ(0,"div",6),l.YNc(1,Ne,2,3,"button",32),l.YNc(2,_e,2,3,"button",33),l.qZA()),2&R){const H=l.oxw(2);l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Sub)),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Sup))}}function ve(R,V){if(1&R&&l._UZ(0,"tui-text-color",37),2&R){const H=l.oxw(3);l.Q6J("colors",H.colors)}}function Se(R,V){if(1&R&&l._UZ(0,"tui-highlight-color",37),2&R){const H=l.oxw(3);l.Q6J("colors",H.colors)}}function He(R,V){if(1&R&&(l.TgZ(0,"div",6),l.YNc(1,ve,1,1,"tui-text-color",36),l.YNc(2,Se,1,1,"tui-highlight-color",36),l.qZA()),2&R){const H=l.oxw(2);l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Color)),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Hilite))}}function Me(R,V){1&R&&l._UZ(0,"tui-code",9)}function ke(R,V){if(1&R){const H=l.EpF();l.TgZ(0,"button",41,17),l.NdJ("click",function(){return l.CHM(H),l.oxw(3).onTeX()}),l.qZA()}if(2&R){const H=l.oxw(2).ngIf;l.Q6J("tuiHint",H.tex)("focusable",!1)}}function Ye(R,V){if(1&R){const H=l.EpF();l.TgZ(0,"div",42),l.TgZ(1,"button",43,17),l.NdJ("click",function(){return l.CHM(H),l.MAs(4).click()}),l.qZA(),l.TgZ(3,"input",44,45),l.NdJ("change",function(){l.CHM(H);const wt=l.MAs(4);return l.oxw(3).onImage(wt)}),l.qZA(),l.qZA()}if(2&R){const H=l.oxw(2).ngIf;l.xp6(1),l.Q6J("tuiHint",H.image)("focusable",!1),l.xp6(2),l.Q6J("tuiFocusable",!1)}}function Ue(R,V){if(1&R){const H=l.EpF();l.TgZ(0,"button",46,17),l.NdJ("click",function(){return l.CHM(H),l.oxw(3).insertHorizontalRule()}),l.qZA()}if(2&R){const H=l.oxw(2).ngIf;l.Q6J("tuiHint",H.insertHorizontalRule)("focusable",!1)}}function ze(R,V){if(1&R&&(l.TgZ(0,"div",6),l.YNc(1,Me,1,0,"tui-code",11),l.YNc(2,ke,2,2,"button",38),l.YNc(3,Ye,5,3,"div",39),l.YNc(4,Ue,2,2,"button",40),l.qZA()),2&R){const H=l.oxw(2);l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Code)),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Tex)),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Img)),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.HR))}}function Be(R,V){if(1&R){const H=l.EpF();l.TgZ(0,"div",6),l.TgZ(1,"button",47,17),l.NdJ("click",function(){return l.CHM(H),l.oxw(2).removeFormat()}),l.qZA(),l.qZA()}if(2&R){const H=l.oxw().ngIf;l.xp6(1),l.Q6J("tuiHint",H.clear)("focusable",!1)}}function We(R,V){1&R&&(l.TgZ(0,"div",6),l._UZ(1,"tui-details",48),l._UZ(2,"tui-details-remove",48),l.qZA())}function Te(R,V){if(1&R&&l._UZ(0,"tui-table-cell-color",37),2&R){const H=l.oxw(3);l.Q6J("colors",H.colors)}}function me(R,V){if(1&R&&(l.TgZ(0,"div",6),l._UZ(1,"tui-editor-group-tool",48),l.YNc(2,Te,1,1,"tui-table-cell-color",36),l.qZA()),2&R){const H=l.oxw(2);l.xp6(2),l.Q6J("ngIf",!H.enabled(H.TuiEditorTool.Table))}}function Ee(R,V){if(1&R&&(l.TgZ(0,"div",6),l._UZ(1,"tui-table-create",48),l._UZ(2,"tui-table-row-column-manager",48),l._UZ(3,"tui-table-merge-cells",48),l._UZ(4,"tui-table-cell-color",37),l.qZA()),2&R){const H=l.oxw(2);l.xp6(4),l.Q6J("colors",H.colors)}}function _t(R,V){if(1&R&&(l.TgZ(0,"section",4),l.YNc(1,ot,3,6,"div",5),l.YNc(2,kt,2,0,"div",5),l.YNc(3,Ae,8,7,"div",5),l.YNc(4,De,3,2,"div",5),l.YNc(5,He,3,2,"div",5),l.YNc(6,ze,5,4,"div",5),l.YNc(7,Be,3,2,"div",5),l.YNc(8,We,3,0,"div",5),l.YNc(9,me,3,1,"div",5),l.YNc(10,Ee,5,1,"div",5),l.TgZ(11,"div",6),l.Hsn(12),l.qZA(),l.qZA()),2&R){const H=l.oxw();l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Undo)),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Size)),l.xp6(1),l.Q6J("ngIf",H.firstBigBlockEnabled),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Sub)||H.enabled(H.TuiEditorTool.Sup)),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Color)||H.enabled(H.TuiEditorTool.Hilite)),l.xp6(1),l.Q6J("ngIf",H.secondBigBlockEnabled),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Clear)),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Details)),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Group)),l.xp6(1),l.Q6J("ngIf",H.enabled(H.TuiEditorTool.Table))}}class O{constructor(V,H,Ot,wt,N,a,p){this.elementRef=V,this.editor=H,this.imageLoader=Ot,this.attachOptions=wt,this.filesLoader=N,this.texts$=a,this.defaultOptions=p,this.dropdowns=B.EMPTY_QUERY,this.colors=this.defaultOptions.colors,this.disabled=!1,this.linkAdded=new l.vpe,this.texClicked=new l.vpe,this.fileAttached=new l.vpe,this.TuiEditorTool=g._,this.toolsSet=new Set(y.Db)}set tools(V){this.toolsSet=new Set(V)}get focused(){return(0,B.tuiIsNativeFocusedIn)(this.elementRef.nativeElement)||!!this.dropdowns.find(({nativeElement:V})=>(0,B.tuiIsNativeFocusedIn)(V))}get focusable(){return!this.focused&&!this.disabled}get unorderedList(){return this.editor.isActive("bulletList")}get orderedList(){return this.editor.isActive("orderedList")}get blockquote(){return this.editor.isActive("blockquote")}get a(){return this.editor.isActive("link")}get jumpAnchor(){return this.editor.isActive("jumpAnchor")}get canOpenAnchor(){return!this.a&&!this.jumpAnchor}get undoDisabled(){return this.editor.undoDisabled()}get redoDisabled(){return this.editor.redoDisabled()}get subscript(){return this.editor.isActive("subscript")}get superscript(){return this.editor.isActive("superscript")}get formatEnabled(){return this.enabled(g._.Bold)||this.enabled(g._.Italic)||this.enabled(g._.Underline)||this.enabled(g._.Strikethrough)}get firstBigBlockEnabled(){return this.formatEnabled||this.enabled(g._.Align)||this.enabled(g._.List)||this.enabled(g._.Quote)||this.enabled(g._.Link)||this.enabled(g._.Anchor)||this.enabled(g._.Attach)}get secondBigBlockEnabled(){return this.enabled(g._.Code)||this.enabled(g._.Tex)||this.enabled(g._.Img)||this.enabled(g._.HR)}onMouseDown(V,H){H.closest("button")||(V.preventDefault(),this.editor.focus())}onBottomFocus(){this.focusLast()}onTopFocus(){this.focusFirst()}onImage(V){var H;const Ot=null===(H=V.files)||void 0===H?void 0:H[0];V.value="",Ot&&this.imageLoader(Ot).pipe((0,X.q)(1)).subscribe(wt=>{this.addImage(wt)})}onAttach(V){var H;const Ot=Array.from(V.files||[]);V.value="",Ot&&(B.tuiAssert.assert(!!this.filesLoader,"Please provide TUI_ATTACH_FILES_LOADER"),null===(H=this.filesLoader)||void 0===H||H.call(this,Ot).pipe((0,X.q)(1)).subscribe(wt=>this.fileAttached.emit(wt)))}onTeX(){this.texClicked.emit()}onLink(V,H){V.open=!1,H&&this.editor.toggleLink(H)}setAnchor(V,H){V.open=!1,H&&(this.editor.setAnchor(H),this.editor.selectClosest())}removeAnchor(){this.editor.removeAnchor()}enabled(V){return this.toolsSet.has(V)}undo(){this.editor.undo()}redo(){this.editor.redo()}insertHorizontalRule(){this.editor.setHorizontalRule()}removeFormat(){this.editor.removeFormat()}toggleOrderedList(){this.editor.toggleOrderedList()}toggleQuote(){this.editor.toggleBlockquote()}toggleSubscript(){this.editor.toggleSubscript()}toggleSuperscript(){this.editor.toggleSuperscript()}addImage(V){this.editor.setImage(V)}focusFirst(){var V;const H=null===(V=this.navigationManager)||void 0===V?void 0:V.findFirstFocusableTool();H&&H.focus()}focusLast(){var V;const H=null===(V=this.navigationManager)||void 0===V?void 0:V.findFirstFocusableTool(!0);H&&H.focus()}}O.\u0275fac=function(V){return new(V||O)(l.Y36(l.SBq,8),l.Y36(P.$3),l.Y36(it.p7),l.Y36(it.dR),l.Y36(it.zc,8),l.Y36(it.rf),l.Y36(it.mJ))},O.\u0275cmp=l.Xpm({type:O,selectors:[["tui-toolbar"]],viewQuery:function(V,H){if(1&V&&(l.Gf(tt.B,5),l.Gf(J,5,l.SBq)),2&V){let Ot;l.iGM(Ot=l.CRH())&&(H.navigationManager=Ot.first),l.iGM(Ot=l.CRH())&&(H.dropdowns=Ot)}},hostAttrs:["role","toolbar"],hostVars:2,hostBindings:function(V,H){1&V&&l.NdJ("mousedown",function(wt){return H.onMouseDown(wt,wt.target)}),2&V&&l.ekj("_disabled",H.disabled)},inputs:{colors:"colors",disabled:"disabled",tools:"tools"},outputs:{linkAdded:"linkAdded",texClicked:"texClicked",fileAttached:"fileAttached"},ngContentSelectors:["*"],decls:7,vars:8,consts:[["type","button",1,"t-prevent-parent-label-behavior"],[4,"ngIf"],[3,"tuiFocusable","focus"],["tuiToolbarNavigationManager","","class","t-tools-wrapper",4,"ngIf"],["tuiToolbarNavigationManager","",1,"t-tools-wrapper"],["class","t-block",4,"ngIf"],[1,"t-block"],["tuiItem","","tuiIconButton","","type","button","size","s","icon","tuiIconUndoLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","disabled","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconRedoLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","disabled","focusable","click"],["tuiItem","",1,"t-tool","t-wrapper"],["tuiItem","","class","t-tool t-wrapper",3,"enabledTools",4,"ngIf"],["tuiItem","","class","t-tool t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","disabled","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",3,"canOpen","content",4,"ngIf"],["class","t-wrapper",3,"canOpen","content",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"enabledTools"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","disabled","focusable","click"],["button",""],["tuiItem","",1,"t-wrapper",3,"canOpen","content"],["link",""],["tuiIconButton","","type","button","size","s","icon","tuiIconLinkLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","pseudoActive","focusable"],["linkDropdown",""],[3,"addLink","removeLink"],["dropdown",""],[1,"t-wrapper",3,"canOpen","content"],["anchor",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAnchorLarge","tuiHintDirection","top-left","appearance","icon","tuiHintDescribe","",3,"focusable","pseudoActive","tuiHint"],["anchorDropdown",""],[3,"anchorMode","addLink","removeLink"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconPaperclipLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["type","file",1,"t-file-upload",3,"accept","multiple","tuiFocusable","change"],["fileUpload",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","focusable","click"],["tuiItem","","class","t-tool t-wrapper",3,"colors",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"colors"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool",3,"tuiHint","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","focusable","click"],["tuiItem","",1,"t-wrapper"],["tuiIconButton","","type","button","size","s","icon","tuiIconImageLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","focusable","click"],["type","file","accept","image/*",1,"t-image",3,"tuiFocusable","change"],["image",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconClearFormatLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["tuiItem","",1,"t-tool","t-tool_margin"]],template:function(V,H){1&V&&(l.F$t(),l._UZ(0,"button",0),l.YNc(1,Q,1,0,"ng-container",1),l.ALo(2,"async"),l.TgZ(3,"div",2),l.NdJ("focus",function(){return H.onTopFocus()}),l.qZA(),l.TgZ(4,"div",2),l.NdJ("focus",function(){return H.onBottomFocus()}),l.qZA(),l.YNc(5,_t,13,10,"section",3),l.ALo(6,"async")),2&V&&(l.xp6(1),l.Q6J("ngIf",l.lcZ(2,4,H.editor.stateChange$)),l.xp6(2),l.Q6J("tuiFocusable",H.focusable),l.xp6(1),l.Q6J("tuiFocusable",H.focusable),l.xp6(1),l.Q6J("ngIf",l.lcZ(6,6,H.texts$)))},directives:[ft.O5,ut.t,tt.B,et.v,Tt.w,Ct.$,bt.D,It.x,Pt.t,Dt.D,ht.m,q.h,W.X,mt.w,j.o,At.l,St.G,yt.U,Lt.T,Ht.y,Kt.U,pt.d,L.p,rt.l,ct._,st.Y],pipes:[ft.Ov],styles:['.t-tools-wrapper[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;padding:.25rem .75rem;overflow:auto;flex-wrap:wrap;box-shadow:0 .125rem .1875rem rgba(0,0,0,.1)}.t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar, .t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-tools-wrapper._disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:var(--tui-disabled-opacity)}.t-block[_ngcontent-%COMP%]{display:flex;padding:.25rem 0}.t-block[_ngcontent-%COMP%]:not(:last-child):after{content:"";display:block;margin:0 .25rem;width:1px;background:var(--tui-secondary-active)}.t-tool[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}button.t-tool[_ngcontent-%COMP%]:hover, .t-tool[_ngcontent-%COMP%]     button:hover{background:var(--tui-secondary-hover)}.t-tool_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-font[_ngcontent-%COMP%]{padding:.3em 0;outline:none;width:100%;pointer-events:none}.t-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;font-size:0;opacity:0;cursor:pointer}.t-image[_ngcontent-%COMP%]::-webkit-file-upload-button{display:none}.t-file-upload[_ngcontent-%COMP%]{display:none}.t-color-picker[_ngcontent-%COMP%]     tui-hosted-dropdown, .t-color-picker[_ngcontent-%COMP%]     tui-color-picker, .t-color-picker[_ngcontent-%COMP%]     tui-color-edit{display:none}.t-prevent-parent-label-behavior[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),(0,M.gn)([(0,B.tuiDefaultProp)()],O.prototype,"colors",void 0),(0,M.gn)([(0,B.tuiDefaultProp)()],O.prototype,"disabled",void 0),(0,M.gn)([(0,B.tuiDefaultProp)(function(R){return!R.includes(g._.Tex)&&!R.includes(g._.Attach)},"Attach and TeX are not yet implemented in Editor")],O.prototype,"tools",null)},19074:(jt,Et,c)=>{c.d(Et,{hK:()=>l,sw:()=>M,Db:()=>P,RR:()=>g});const M=new Map([["transparent","transparent"],["color-black-300","#333333"],["color-black-200","#666666"],["color-black-100","#909090"],["color-yellow-100","#FFDD2C"],["color-yellow-200","#FCC521"],["color-yellow-300","#FAB618"],["color-gray-100","#f5f5f6"],["color-gray-200","#e7e8ea"],["color-gray-300","#cbcfd3"],["color-gray-400","#959ba4"],["color-gray-500","#79818c"],["color-gray-600","#616871"],["color-light-blue-100","#ecf1f7"],["color-light-blue-200","#e4ebf3"],["color-light-blue-300","#dde4ed"],["color-blue-100","#1771e6"],["color-blue-200","#1464cc"],["color-blue-300","#0953b3"],["color-green-100","#39b54a"],["color-green-200","#2ca53a"],["color-green-300","#168a21"],["color-red-100","#e01f19"],["color-red-200","#d3120e"],["color-red-300","#c40b08"]]),l="rgb(51, 51, 51)";var y=c(48699);const P=[y._.Undo,y._.Size,y._.Bold,y._.Italic,y._.Underline,y._.Align,y._.List,y._.Quote,y._.Link,y._.Anchor,y._.Color,y._.Hilite,y._.Clear,y._.Strikethrough,y._.Code,y._.Img,y._.HR,y._.Sup,y._.Sub,y._.Table,y._.Details];function g(it){return[{px:13,name:it.small},{px:15,name:it.normal},{px:17,name:it.large},{px:24,family:"var(--tui-font-heading)",name:it.subtitle,headingLevel:2,weight:"bold"},{px:30,family:"var(--tui-font-heading)",name:it.title,headingLevel:1,weight:"bold"}]}},60153:(jt,Et,c)=>{c.d(Et,{Z:()=>l});var M=c(74788);let l=(()=>{class y{constructor(){this.imagePreview=new M.vpe}click(g){g instanceof HTMLImageElement&&this.imagePreview.emit(g)}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275dir=M.lG2({type:y,selectors:[["tui-editor-socket","imagePreview",""]],hostAttrs:[1,"_preview-image"],hostBindings:function(g,it){1&g&&M.NdJ("click",function(X){return it.click(X.target)})},outputs:{imagePreview:"imagePreview"}}),y})()},84614:(jt,Et,c)=>{c.d(Et,{Zj:()=>M.Z,BN:()=>y,JU:()=>P.JU,mJ:()=>P.mJ,$3:()=>P.$3});var M=c(60153),l=c(74788);let y=(()=>{class g{}return g.\u0275fac=function(B){return new(B||g)},g.\u0275mod=l.oAB({type:g}),g.\u0275inj=l.cJS({}),g})();var P=c(82113)},82113:(jt,Et,c)=>{c.d(Et,{JU:()=>M.J,mJ:()=>y,$3:()=>P.$});var M=c(74982),l=c(74788);let y=(()=>{class g{}return g.\u0275fac=function(B){return new(B||g)},g.\u0275mod=l.oAB({type:g}),g.\u0275inj=l.cJS({}),g})();var P=c(76954)},74982:(jt,Et,c)=>{c.d(Et,{J:()=>it});var M=c(74788),l=c(14309),y=c(50259),P=c(46782),g=c(76954);let it=(()=>{class B{constructor(tt,ft,ut,et,Tt,Ct){this.elementRef=tt,this.renderer=ft,this.editor=ut,this.editorContainer=et,this.editorLoaded$=Tt,this.valueChange=this.editor.valueChange$,this.stateChange=this.editor.stateChange$,this.editorLoaded$.pipe((0,P.R)(Ct)).subscribe(()=>{this.renderer.appendChild(this.elementRef.nativeElement,this.editorContainer)})}set value(tt){tt!==this.editor.html&&this.editor.setValue(tt)}set editable(tt){this.editor.editable=tt}}return B.\u0275fac=function(tt){return new(tt||B)(M.Y36(M.SBq),M.Y36(M.Qsj),M.Y36(g.$),M.Y36(l.Y1),M.Y36(l.ZW),M.Y36(y.TuiDestroyService,2))},B.\u0275dir=M.lG2({type:B,selectors:[["","tuiTiptapEditor",""]],inputs:{value:"value",editable:"editable"},outputs:{valueChange:"valueChange",stateChange:"stateChange"},features:[M._Bn([y.TuiDestroyService])]}),B})()},76954:(jt,Et,c)=>{c.d(Et,{$:()=>tt});var M=c(77361),l=c(14309),y=c(27863),P=c(39761),g=c(88002),it=c(87519),X=c(74788);let tt=(()=>{class ft extends M._{constructor(et){super(),this.editorRef=et,this.editorRef.subscribe(Tt=>{this.editor=Tt,Tt.on("transaction",()=>{this.stateChange$.next()}),Tt.on("update",()=>{const Ct=Tt.getHTML(),It=function(ft){return Array.isArray(ft)&&1===ft.length&&!ft[0].hasOwnProperty("content")}(Tt.getJSON().content)?"":Ct;this.valueChange$.next(It)})})}get isFocused(){return this.editor.isFocused}get html(){return this.editor.getHTML()}get editable(){return this.editor.isEditable}set editable(et){this.editor.setEditable(et)}get state(){return this.editor.state}getOriginTiptapEditor(){return this.editor}undoDisabled(){return!this.editor.can().undo()}redoDisabled(){return!this.editor.can().redo()}getFontColor(){return this.editor.getAttributes("textStyle").fontColor||"rgb(51, 51, 51)"}getBackgroundColor(){var et;return(null===(et=this.editor)||void 0===et?void 0:et.getAttributes("textStyle").backgroundColor)||"rgb(51, 51, 51)"}getCellColor(){return this.editor.getAttributes("tableCell").background||this.editor.getAttributes("tableHeader").background}getGroupColor(){var et,Tt,Ct,bt;if(this.editor.isActive("group")){const It=null!==(Tt=null===(et=this.editor.getAttributes("group"))||void 0===et?void 0:et.style)&&void 0!==Tt?Tt:"",Pt=(0,y.jx)(It);return null!==(bt=null!==(Ct=Pt["background-color"])&&void 0!==Ct?Ct:Pt.background)&&void 0!==bt?bt:""}return""}onAlign(et){this.editor.chain().focus().setTextAlign(et).run()}setImage(et){this.editor.chain().focus().command(({commands:Tt,state:Ct})=>{var bt;const It=null!==(bt=Tt.setEditableImage)&&void 0!==bt?bt:Tt.setImage;if(It){const Pt=Ct.selection.anchor;return It({src:et}),Tt.setTextSelection(Pt),Tt.insertContent("<p></p>"),!0}return!1}).run()}undo(){this.editor.chain().undo().run()}redo(){this.editor.chain().redo().run()}setHorizontalRule(){this.editor.chain().focus().setHorizontalRule().run()}removeFormat(){this.editor.commands.unsetAllMarks(),this.editor.commands.clearNodes()}setFontColor(et){this.editor.chain().focus().setFontColor(et).run()}setBackgroundColor(et){this.editor.chain().focus().setBackgroundColor(et).run()}toggleUnderline(){this.editor.chain().focus().toggleUnderline().run()}toggleStrike(){this.editor.chain().focus().toggleStrike().run()}toggleOrderedList(){this.editor.chain().focus().toggleOrderedList().run()}toggleUnorderedList(){this.editor.chain().focus().toggleBulletList().run()}togglePre(){this.editor.chain().focus().toggleCodeBlock().run()}sinkListItem(){this.editor.chain().focus().sinkListItem("listItem").run()}liftListItem(){this.editor.chain().focus().liftListItem("listItem").run()}isActive(et){return this.editor.isActive(et)}isActive$(et){return this.stateChange$.pipe((0,P.O)(null),(0,g.U)(()=>this.isActive(et)),(0,it.x)())}toggleBold(){this.editor.chain().focus().toggleBold().run()}toggleCode(){this.editor.chain().focus().toggleCode().run()}toggleItalic(){this.editor.chain().focus().toggleItalic().run()}toggleBlockquote(){this.editor.chain().focus().toggleBlockquote().run()}toggleSubscript(){this.editor.chain().focus().toggleSubscript().run()}toggleSuperscript(){this.editor.chain().focus().toggleSuperscript().run()}toggleCodeBlock(){this.editor.chain().focus().toggleCodeBlock().run()}insertTable(et,Tt){this.editor.chain().focus().insertTable({cols:et,rows:Tt}).run()}addColumnAfter(){this.editor.chain().focus().addColumnAfter().run()}addColumnBefore(){this.editor.chain().focus().addColumnBefore().run()}addRowAfter(){this.editor.chain().focus().addRowAfter().run()}addRowBefore(){this.editor.chain().focus().addRowBefore().run()}deleteColumn(){this.editor.chain().focus().deleteColumn().run()}deleteRow(){this.editor.chain().focus().deleteRow().run()}mergeCells(){this.editor.chain().focus().mergeCells().run()}splitCell(){this.editor.chain().focus().splitCell().run()}canMergeCells(){return this.editor.can().mergeCells()}canSplitCells(){return this.editor.can().splitCell()}setHeading(et){this.editor.chain().focus().setHeading({level:et}).run()}setParagraph(et){this.editor.chain().focus().setParagraph().run(),et&&this.editor.chain().setMark("textStyle",et).run()}setHardBreak(){this.editor.chain().setHardBreak().run()}setTextSelection(et){this.editor.commands.setTextSelection(et)}toggleLink(et){this.editor.chain().focus().toggleLink({href:et}).run()}setLink(et){this.editor.chain().focus().setLink({href:et}).run()}unsetLink(){this.editor.chain().focus().unsetLink().run()}focus(){this.editor.chain().focus().run()}setValue(et){this.editor.commands.setContent(et)}destroy(){this.editor.destroy()}setCellColor(et){this.editor.chain().focus().setCellBackground(et).run()}selectClosest(){const et=this.editor.state.selection.anchor,{schema:Tt,doc:Ct}=this.editor.state,bt=(0,y.Yz)(Ct.resolve(et),Tt.marks.link);bt&&this.editor.chain().setTextSelection(bt).run()}enter(){this.editor.commands.enter()}setDetails(){this.editor.commands.setDetails()}removeDetails(){this.editor.commands.removeDetails()}setGroup(){this.editor.commands.setGroup()}removeGroup(){this.editor.commands.removeGroup()}setGroupHilite(et){this.editor.commands.setGroupHilite(et)}setAnchor(et){this.editor.commands.setAnchor(et.replace("#",""))}removeAnchor(){this.editor.commands.removeAnchor()}setFileLink(et){this.editor.commands.setFileLink(et)}setYoutubeVideo(et){this.editor.commands.setYoutubeVideo(et)}setIframe(et){this.editor.commands.setIframe(et)}removeEmptyTextStyle(){this.editor.commands.removeEmptyTextStyle()}toggleMark(et,Tt,Ct){this.editor.commands.toggleMark(et,Tt,Ct)}}return ft.\u0275fac=function(et){return new(et||ft)(X.LFG(l.ZW))},ft.\u0275prov=X.Yz7({token:ft,factory:ft.\u0275fac}),ft})()},48699:(jt,Et,c)=>{c.d(Et,{_:()=>M});var M=(()=>{return(l=M||(M={})).Undo="undo",l.Anchor="anchor",l.Size="fontSize",l.Bold="bold",l.Italic="italic",l.Underline="underline",l.Strikethrough="strikeThrough",l.Align="justify",l.List="list",l.Quote="quote",l.Color="foreColor",l.Hilite="hiliteColor",l.Clear="clear",l.Link="link",l.Attach="attach",l.Tex="tex",l.Code="code",l.Img="image",l.HR="insertHorizontalRule",l.Sup="superscript",l.Sub="subscript",l.Table="insertTable",l.MergeCells="mergeCells",l.SplitCells="splitCells",l.RowsColumnsManaging="rowsColumnsManaging",l.Details="details",l.Group="group",M;var l})()},15736:(jt,Et,c)=>{c.r(Et),c.d(Et,{BackgroundColor:()=>y}),c(84402);const y=c(12867).Extension.create({name:"backgroundColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,renderHTML:({backgroundColor:P})=>P?{style:`background-color: ${P}`}:{},parseHTML:({style:P})=>P.backgroundColor.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setBackgroundColor:P=>({chain:g})=>g().setMark("textStyle",{backgroundColor:P}).run(),unsetBackgroundColor:()=>({chain:P})=>P().setMark("textStyle",{backgroundColor:null}).run()})})},93763:(jt,Et,c)=>{c.r(Et),c.d(Et,{TuiFileLink:()=>l});const l=c(12867).Extension.create({name:"fileLink",addCommands:()=>({setFileLink:y=>({state:P,chain:g})=>{const{selection:it}=P,X='<span style="font-size: 15px"> </span>';return(Math.abs(it.to-it.from)>0?g().toggleMark("link",{href:y.link},{extendEmptyMarkRange:!0}).setTextSelection(it.to).insertContent(X):g().insertContent(`<a href="${y.link}">${y.name}</a>${X}`)).setTextSelection(it.to).run()}})})},52658:(jt,Et,c)=>{c.r(Et),c.d(Et,{FontColor:()=>y}),c(84402);const y=c(12867).Extension.create({name:"fontColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontColor:{default:null,renderHTML:({fontColor:P})=>P?{style:`color: ${P}`}:{},parseHTML:({style:P})=>P.color.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setFontColor:P=>({chain:g})=>g().setMark("textStyle",{fontColor:P}).run(),unsetFontColor:()=>({chain:P})=>P().setMark("textStyle",{fontColor:null}).run()})})},9492:(jt,Et,c)=>{c.r(Et),c.d(Et,{TuiFontSize:()=>y}),c(84402);const y=c(12867).Extension.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:({style:P})=>P.fontSize,renderHTML:({fontSize:P})=>P?{style:`font-size: ${P}`}:{}}}}]},addCommands:()=>({setFontSize:P=>({chain:g})=>g().setMark("textStyle",{fontSize:P}).run(),unsetFontSize:()=>({chain:P})=>P().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()})})},54920:(jt,Et,c)=>{c.r(Et),c.d(Et,{TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>y,createGroupExtension:()=>P});var M=c(27863),l=c(12867);const y={groupNodeClass:"tui-group-node",groupPointerNodeClass:"tui-group-pointer",nested:!0,draggable:!0,createOnEnter:!1},P=(g={})=>{const{draggable:it,nested:B,groupNodeClass:X,groupPointerNodeClass:tt,createOnEnter:ft}=Object.assign(Object.assign({},y),g);return l.Node.create({name:"group",draggable:it,group:"block",content:B?"block+":"block",addAttributes:()=>({style:{default:null,parseHTML:ut=>ut.getAttribute("style"),renderHTML:ut=>ut.style?{style:ut.style}:{}}}),parseHTML:()=>[{tag:'div[data-type="group"]'}],renderHTML:({HTMLAttributes:ut})=>["div",(0,l.mergeAttributes)(ut,{"data-type":"group"}),0],addNodeView:()=>({HTMLAttributes:ut,node:et})=>{const Tt=document.createElement("div"),Ct=document.createElement("div");if(Tt.classList.add(X),Ct.setAttribute("data-type","group"),ut.style&&(et.attrs.style=ut.style,Ct.setAttribute("style",ut.style)),it){const bt=document.createElement("div");bt.classList.add(tt),bt.innerHTML="",bt.contentEditable="false",Tt.append(bt,Ct)}else Tt.append(Ct);return{dom:Tt,contentDOM:Ct}},addCommands(){return{setGroup:()=>({commands:ut,state:et})=>{this.editor.chain().focus().run();const Tt=(0,M.Ap)(et,""),bt=`<div data-type="group">${Tt.trim().startsWith("<p>")?Tt:`<p>${Tt}</p>`}</div>`;return ut.insertContent(bt)},setGroupHilite:ut=>({editor:et})=>{for(let Tt=et.state.selection.$anchor,Ct=Tt.depth;Ct>0;Ct--){const bt=Tt.node(Ct);if(bt.type.name===this.name){setTimeout(()=>et.commands.updateAttributes(bt.type,{style:`background: ${ut}`}));break}}return!0},removeGroup:()=>({state:ut,dispatch:et})=>(0,M.yU)(ut,et,this.name)}},addKeyboardShortcuts(){return ft?{Enter:()=>this.editor.commands.setGroup()}:{}}})}},20854:(jt,Et,c)=>{c.r(Et),c.d(Et,{TUI_IFRAME_EDITOR_OPTIONS:()=>it,TuiIframeEditorComponent:()=>X,TuiIframeEditorModule:()=>et,createIframeEditorExtension:()=>ut});var M=c(12057),l=c(91211),y=c(95110),P=c(50259),g=c(74788);const it=new g.OlP("[TUI_IFRAME_EDITOR_OPTIONS]",{factory:()=>({minWidth:100,maxWidth:1/0,minHeight:100,maxHeight:1/0})});var B=c(96570);let X=(()=>{class Tt extends y._3{constructor(bt,It,Pt,Dt){super(It,Dt),this.options=bt,this.sanitizer=Pt}get src(){var bt;return this.sanitizer.bypassSecurityTrustResourceUrl(null!==(bt=this.attrs.src)&&void 0!==bt?bt:"")}updateSize([bt,It]){this._width=Math.max(this.options.minWidth,Math.min(this.options.maxWidth,bt)),this._height=Math.max(this.options.minHeight,Math.min(this.options.maxHeight,It))}}return Tt.\u0275fac=function(bt){return new(bt||Tt)(g.Y36(it),g.Y36(M.K0),g.Y36(l.H7),g.Y36(P.TuiDestroyService,2))},Tt.\u0275cmp=g.Xpm({type:Tt,selectors:[["tui-iframe-editor"]],features:[g._Bn([P.TuiDestroyService]),g.qOj],decls:2,vars:13,consts:[[3,"width","height","sizeChange"],[3,"src","width","height"]],template:function(bt,It){1&bt&&(g.TgZ(0,"tui-editor-resizable",0),g.NdJ("sizeChange",function(Dt){return It.updateSize(Dt)}),g._UZ(1,"iframe",1),g.qZA()),2&bt&&(g.Q6J("width",It.width)("height",It.height),g.xp6(1),g.Udp("min-width",It.options.minWidth)("min-height",It.options.minHeight)("max-width",It.options.maxWidth)("max-height",It.options.maxHeight),g.Q6J("src",It.src,g.uOi)("width",It.width)("height",It.height))},directives:[B.V],styles:["iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}"],changeDetection:0}),Tt})();var tt=c(40400),ft=c(12867);const ut=Tt=>ft.Node.create({name:"iframe",group:"block",atom:!0,draggable:!1,parseHTML:()=>[{tag:'iframe[data-type="iframe-editor"]'}],addAttributes(){return{src:{default:null,keepOnSplit:!1,parseHTML:Ct=>Ct.getAttribute("src")},frameborder:{default:0,keepOnSplit:!1,parseHTML:Ct=>Ct.getAttribute("frameborder")},width:{default:"100%",keepOnSplit:!1,parseHTML:Ct=>Ct.getAttribute("width")},height:{default:null,keepOnSplit:!1,parseHTML:Ct=>Ct.getAttribute("height")},allowfullscreen:{keepOnSplit:!1,default:this.options.allowFullscreen,parseHTML:Ct=>Ct.getAttribute("allowfullscreen")}}},renderHTML:({HTMLAttributes:Ct})=>["iframe",(0,ft.mergeAttributes)(Ct,{"data-type":"iframe-editor"})],addNodeView:()=>(0,tt.x)(X,{injector:Tt}),addCommands(){return{setIframe:Ct=>({commands:bt,state:It})=>{const Pt=It.selection.anchor;return bt.enter(),bt.setTextSelection(Pt),bt.insertContent({type:this.name,attrs:Ct}),bt.setTextSelection(It.selection.anchor),!0}}}});let et=(()=>{class Tt{}return Tt.\u0275fac=function(bt){return new(bt||Tt)},Tt.\u0275mod=g.oAB({type:Tt}),Tt.\u0275inj=g.cJS({imports:[[y.Sl]]}),Tt})()},53380:(jt,Et,c)=>{c.r(Et),c.d(Et,{TUI_EDITOR_MAX_IMAGE_WIDTH:()=>B,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>it,TUI_IMAGE_EDITOR_OPTIONS:()=>X,TuiImageEditorComponent:()=>ft,TuiImageEditorModule:()=>q,createImageEditorExtension:()=>Pt,tuiCreateImageEditorExtension:()=>ht});var M=c(12057),l=c(91211),y=c(95110),P=c(50259),g=c(74788);const it=new g.OlP("[TUI_EDITOR_MIN_IMAGE_WIDTH]",{factory:()=>null}),B=new g.OlP("[TUI_EDITOR_MAX_IMAGE_WIDTH]",{factory:()=>null}),X=new g.OlP("[TUI_IMAGE_EDITOR_OPTIONS]",{factory:()=>({minWidth:100,maxWidth:1/0})});var tt=c(96570);let ft=(()=>{class W extends y._3{constructor(j,At,St,yt,Lt,Ht){super(yt,Ht),this.minWidth=j,this.maxWidth=At,this.options=St,this.sanitizer=Lt}get dragHandle(){var j;return null!==(j=this.attrs.draggable)&&void 0!==j?j:null}get height(){return null}get alt(){return this.attrs.alt||""}get title(){return this.attrs.title||""}get src(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.attrs.src)}updateSize([j]){var At,St;const yt=null!==(At=this.minWidth)&&void 0!==At?At:this.options.minWidth,Lt=null!==(St=this.maxWidth)&&void 0!==St?St:this.options.maxWidth;this._width=Math.max(yt,Math.min(Lt,j))}}return W.\u0275fac=function(j){return new(j||W)(g.Y36(it),g.Y36(B),g.Y36(X),g.Y36(M.K0),g.Y36(l.H7),g.Y36(P.TuiDestroyService,2))},W.\u0275cmp=g.Xpm({type:W,selectors:[["tui-image-editor"]],hostVars:1,hostBindings:function(j,At){2&j&&g.uIk("data-drag-handle",At.dragHandle)},features:[g._Bn([P.TuiDestroyService]),g.qOj],decls:2,vars:10,consts:[[3,"width","autoHeight","sizeChange"],[3,"src","width","alt","title"]],template:function(j,At){1&j&&(g.TgZ(0,"tui-editor-resizable",0),g.NdJ("sizeChange",function(yt){return At.updateSize(yt)}),g._UZ(1,"img",1),g.qZA()),2&j&&(g.Q6J("width",At.width)("autoHeight",!0),g.xp6(1),g.Udp("min-width",At.options.minWidth,"px")("max-width",At.options.maxWidth,"px"),g.Q6J("src",At.src,g.LSH)("width",At.width)("alt",At.alt)("title",At.title))},directives:[tt.V],styles:["[data-drag-handle][_nghost-%COMP%]{cursor:move}img[_ngcontent-%COMP%]{pointer-events:none}"],changeDetection:0}),W})();var ut=c(40400),et=c(12867),Tt=c(44632),Ct=c(62463);const bt=[{tag:'img[data-type="image-editor"]'}],It={src:{default:"",keepOnSplit:!1},width:{default:300,keepOnSplit:!1},alt:{default:"",keepOnSplit:!1},title:{default:"",keepOnSplit:!1}};function Pt(W,{draggable:mt}={}){const j=!(0,P.tuiIsPresent)(mt)||mt;return Tt.Image.extend({name:"imageEditor",group:"block",atom:!0,draggable:j,parseHTML:()=>bt,addAttributes:()=>Object.assign(Object.assign({},It),{draggable:{default:j?"":null,keepOnSplit:!1}}),renderHTML:({HTMLAttributes:At})=>["img",(0,et.mergeAttributes)(At,{"data-type":"image-editor"})],addNodeView:()=>(0,ut.x)(ft,{injector:W}),addCommands(){return{setEditableImage:At=>({commands:St})=>St.insertContent({type:this.name,attrs:At})}},addProseMirrorPlugins:()=>[new Ct.Sy({props:{handleDOMEvents:{paste:Dt,drop:Dt}}})]})}function Dt(W,mt){var j;const At=mt instanceof DragEvent?mt.dataTransfer:mt.clipboardData,St=Array.from(null!==(j=null==At?void 0:At.files)&&void 0!==j?j:[]).filter(yt=>/image/i.test(yt.type));St.length&&mt.preventDefault();for(const yt of St){const Lt=new FileReader;Lt.onload=Ht=>{var Kt;const pt=W.state.schema.nodes.imageEditor.create({src:null===(Kt=Ht.target)||void 0===Kt?void 0:Kt.result}),L=W.state.tr.replaceSelectionWith(pt);setTimeout(()=>W.dispatch(L))},Lt.readAsDataURL(yt)}}function ht({injector:W,draggable:mt}){return Pt(W,{draggable:mt})}let q=(()=>{class W{}return W.\u0275fac=function(j){return new(j||W)},W.\u0275mod=g.oAB({type:W}),W.\u0275inj=g.cJS({imports:[[M.ez,y.Sl]]}),W})()},12177:(jt,Et,c)=>{function l(P){return P.isActive("bulletList")||P.isActive("orderedList")}c.r(Et),c.d(Et,{TuiTabExtension:()=>y,tuiIsOrderedOrBulletList:()=>l});const y=c(12867).Extension.create({name:"indent",addKeyboardShortcuts(){return{Tab:()=>l(this.editor)?null:this.editor.commands.insertContent("\t")}}})},82091:(jt,Et,c)=>{c.r(Et),c.d(Et,{TuiLink:()=>C});var M=c(27863),l=c(12867);const g=(m,f)=>{for(const v in f)m[v]=f[v];return m},it="numeric",B="ascii",X="alpha",tt="asciinumeric",ft="alphanumeric",ut="domain",bt="whitespace";function It(m,f){return m in f||(f[m]=[]),f[m]}function Pt(m,f,v){f[it]&&(f[tt]=!0,f[ft]=!0),f[B]&&(f[tt]=!0,f[X]=!0),f[tt]&&(f[ft]=!0),f[X]&&(f[ft]=!0),f[ft]&&(f[ut]=!0),f.emoji&&(f[ut]=!0);for(const x in f){const w=It(x,v);w.indexOf(m)<0&&w.push(m)}}function ht(m){void 0===m&&(m=null),this.j={},this.jr=[],this.jd=null,this.t=m}ht.groups={},ht.prototype={accepts(){return!!this.t},go(m){const f=this,v=f.j[m];if(v)return v;for(let x=0;x<f.jr.length;x++){const w=f.jr[x][0],K=f.jr[x][1];if(K&&w.test(m))return K}return f.jd},has(m,f){return void 0===f&&(f=!1),f?m in this.j:!!this.go(m)},ta(m,f,v,x){for(let w=0;w<m.length;w++)this.tt(m[w],f,v,x)},tr(m,f,v,x){let w;return x=x||ht.groups,f&&f.j?w=f:(w=new ht(f),v&&x&&Pt(f,v,x)),this.jr.push([m,w]),w},ts(m,f,v,x){let w=this;const K=m.length;if(!K)return w;for(let z=0;z<K-1;z++)w=w.tt(m[z]);return w.tt(m[K-1],f,v,x)},tt(m,f,v,x){x=x||ht.groups;const w=this;if(f&&f.j)return w.j[m]=f,f;const K=f;let z,G=w.go(m);if(G?(z=new ht,g(z.j,G.j),z.jr.push.apply(z.jr,G.jr),z.jd=G.jd,z.t=G.t):z=new ht,K){if(x)if(z.t&&"string"==typeof z.t){const Mt=g(function(m,f){const v={};for(const x in f)f[x].indexOf(m)>=0&&(v[x]=!0);return v}(z.t,x),v);Pt(K,Mt,x)}else v&&Pt(K,v,x);z.t=K}return w.j[m]=z,z}};const q=(m,f,v,x,w)=>m.ta(f,v,x,w),W=(m,f,v,x,w)=>m.tr(f,v,x,w),mt=(m,f,v,x,w)=>m.ts(f,v,x,w),j=(m,f,v,x,w)=>m.tt(f,v,x,w),At="WORD",St="UWORD",yt="LOCALHOST",Ht="UTLD",Kt="SCHEME",pt="SLASH_SCHEME",L="NUM",st="OPENBRACE",J="OPENBRACKET",Q="OPENANGLEBRACKET",ot="OPENPAREN",kt="CLOSEBRACE",$t="CLOSEBRACKET",Yt="CLOSEANGLEBRACKET",ne="CLOSEPAREN",zt="AMPERSAND",ue="APOSTROPHE",ye="ASTERISK",xe="AT",fe="BACKSLASH",Ke="BACKTICK",Ae="CARET",Ne="COLON",_e="COMMA",De="DOLLAR",ve="DOT",Se="EQUALS",He="EXCLAMATION",Me="HYPHEN",ke="PERCENT",Ye="PIPE",Ue="PLUS",ze="POUND",Be="QUERY",We="QUOTE",Te="SEMI",me="SLASH",Ee="TILDE",_t="UNDERSCORE",b="EMOJI",O="SYM";var S=Object.freeze({__proto__:null,WORD:At,UWORD:St,LOCALHOST:yt,TLD:"TLD",UTLD:Ht,SCHEME:Kt,SLASH_SCHEME:pt,NUM:L,WS:"WS",NL:"NL",OPENBRACE:st,OPENBRACKET:J,OPENANGLEBRACKET:Q,OPENPAREN:ot,CLOSEBRACE:kt,CLOSEBRACKET:$t,CLOSEANGLEBRACKET:Yt,CLOSEPAREN:ne,AMPERSAND:zt,APOSTROPHE:ue,ASTERISK:ye,AT:xe,BACKSLASH:fe,BACKTICK:Ke,CARET:Ae,COLON:Ne,COMMA:_e,DOLLAR:De,DOT:ve,EQUALS:Se,EXCLAMATION:He,HYPHEN:Me,PERCENT:ke,PIPE:Ye,PLUS:Ue,POUND:ze,QUERY:Be,QUOTE:We,SEMI:Te,SLASH:me,TILDE:Ee,UNDERSCORE:_t,EMOJI:b,SYM:O});const R=/[a-z]/,V=/\p{L}/u,H=/\p{Emoji}/u,wt=/\d/,N=/\s/;let k=null,F=null;function te(m,f,v,x,w){let K;const z=f.length;for(let G=0;G<z-1;G++){const Mt=f[G];m.j[Mt]?K=m.j[Mt]:(K=new ht(x),K.jr=w.slice(),m.j[Mt]=K),m=K}return K=new ht(v),K.jr=w.slice(),m.j[f[z-1]]=K,K}function we(m){const f=[],v=[];let x=0;for(;x<m.length;){let K=0;for(;"0123456789".indexOf(m[x+K])>=0;)K++;if(K>0){f.push(v.join(""));let z=parseInt(m.substring(x,x+K),10);for(;z>0;z--)v.pop();x+=K}else"_"===m[x]?(f.push(v.join("")),x++):(v.push(m[x]),x++)}return f}const Je={defaultProtocol:"http",events:null,format:$,formatHref:$,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Y(m,f){void 0===f&&(f=null);let v=g({},Je);m&&(v=g(v,m instanceof Y?m.o:m));const x=v.ignoreTags,w=[];for(let K=0;K<x.length;K++)w.push(x[K].toUpperCase());this.o=v,f&&(this.defaultRender=f),this.ignoreTags=w}function $(m){return m}function gt(m,f){this.t="token",this.v=m,this.tk=f}function vt(m,f){class v extends gt{constructor(w,K){super(w,K),this.t=m}}for(const x in f)v.prototype[x]=f[x];return v.t=m,v}Y.prototype={o:Je,ignoreTags:[],defaultRender:m=>m,check(m){return this.get("validate",m.toString(),m)},get(m,f,v){const x=null!=f;let w=this.o[m];return w&&("object"==typeof w?(w=v.t in w?w[v.t]:Je[m],"function"==typeof w&&x&&(w=w(f,v))):"function"==typeof w&&x&&(w=w(f,v.t,v)),w)},getObj(m,f,v){let x=this.o[m];return"function"==typeof x&&null!=f&&(x=x(f,v.t,v)),x},render(m){const f=m.render(this);return(this.get("render",null,m)||this.defaultRender)(f,m.t,m)}},gt.prototype={isLink:!1,toString(){return this.v},toHref(m){return this.toString()},toFormattedString(m){const f=this.toString(),v=m.get("truncate",f,this),x=m.get("format",f,this);return v&&x.length>v?x.substring(0,v)+"\u2026":x},toFormattedHref(m){return m.get("formatHref",this.toHref(m.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(m){return void 0===m&&(m=Je.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(m),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(m){return{type:this.t,value:this.toFormattedString(m),isLink:this.isLink,href:this.toFormattedHref(m),start:this.startIndex(),end:this.endIndex()}},validate(m){return m.get("validate",this.toString(),this)},render(m){const f=this,v=this.toFormattedHref(m),x=m.get("tagName",v,f),w=this.toFormattedString(m),K={},z=m.get("className",v,f),G=m.get("target",v,f),Mt=m.get("rel",v,f),xt=m.getObj("attributes",v,f),Nt=m.getObj("events",v,f);return K.href=v,z&&(K.class=z),G&&(K.target=G),Mt&&(K.rel=Mt),xt&&g(K,xt),{tagName:x,attributes:K,content:w,eventListeners:Nt}}};const Ft=vt("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Wt=vt("text"),Vt=vt("nl"),ee=vt("url",{isLink:!0,toHref(m){return void 0===m&&(m=Je.defaultProtocol),this.hasProtocol()?this.v:`${m}://${this.v}`},hasProtocol(){const m=this.tk;return m.length>=2&&m[0].t!==yt&&m[1].t===Ne}}),re=m=>new ht(m);function be(m,f,v){return new m(f.slice(v[0].s,v[v.length-1].e),v)}const Re="undefined"!=typeof console&&console&&console.warn||(()=>{}),de={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function nn(m,f){if(void 0===f&&(f=!1),de.initialized&&Re(`linkifyjs: already initialized - will not register custom scheme "${m}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(m))throw new Error('linkifyjs: incorrect scheme format.\n 1. Must only contain digits, lowercase ASCII letters or "-"\n 2. Cannot start or end with "-"\n 3. "-" cannot repeat');de.customSchemes.push([m,f])}function ln(m){return de.initialized||function(){de.scanner=function(m){void 0===m&&(m=[]);const f={};ht.groups=f;const v=new ht;null==k&&(k=we("aaa1rp3barth4b_ott3vie4c1le2ogado5udhabi7c_ademy5centure6ountant_s9o1tor4d_s1ult4e_g1ro2tna4f_l1rica5g_akhan5ency5i_g1rbus3force5tel5kdn3l_faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m_azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o_l2partments8p_le4q_uarelle8r_ab1mco4chi3my2pa2t_e3s_da2ia2sociates9t_hleta5torney7u_ction5di_ble3o3spost5thor3o_s4vianca6w_s2x_a2z_ure5ba_by2idu3namex3narepublic11d1k2r_celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b_c1t1va3cg1n2d1e_ats2uty4er2ntley5rlin4st_buy5t2f1g1h_arti5i_ble3d1ke2ng_o3o1z2j1lack_friday9ockbuster8g1omberg7ue3m_s1w2n_pparibas9o_ats3ehringer8fa2m1nd2o_k_ing5sch2tik2on4t1utique6x2r_adesco6idgestone9oadway5ker3ther5ussels7s1t1uild_ers6siness6y1zz3v1w1y1z_h3ca_b1fe2l_l1vinklein9m_era3p2non3petown5ital_one8r_avan4ds2e_er_s4s2sa1e1h1ino4t_ering5holic7ba1n1re2s2c1d1enter4o1rn3f_a1d2g1h_anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i_priani6rcle4sco3tadel4i_c2y_eats7k1l_aims4eaning6ick2nic1que6othing5ud3ub_med6m1n1o_ach3des3ffee4llege4ogne5m_cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking_channel11l1p2rsica5untry4pon_s4rses6pa2r_edit_card4union9icket5own3s1uise_s6u_isinella9v1w1x1y_mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e_al_er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si_gn4v2hl2iamonds6et2gital5rect_ory7scount3ver5h2y2j1k1m1np2o_cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c_o2deka3u_cation8e1g1mail3erck5nergy4gineer_ing9terprises10pson4quipment8r_icsson6ni3s_q1tate5t_isalat7u_rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n_s2rm_ers5shion4t3edex3edback6rrari3ero6i_at2delity5o2lm2nal1nce1ial7re_stone6mdale6sh_ing5t_ness6j1k1lickr3ghts4r2orist4wers5y2m1o_o_d_network8tball6rd1ex2sale4um3undation8x2r_ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n_d2rniture7tbol5yi3ga_l_lery3o1up4me_s3p1rden4y2b_iz3d_n2e_a1nt_ing5orge5f1g_ee3h1i_ft_s3ves2ing5l_ass3e1obal2o4m_ail3bh2o1x2n1odaddy5ld_point6f2o_dyear5g_le4p1t1v2p1q1r_ainger5phics5tis4een3ipe3ocery4up4s1t1u_ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc_bank7ealth_care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k_t2m1n1ockey4ldings5iday5medepot5goods5s_ense7nda3rse3spital5t_ing5t_eles2s3mail5use3w2r1sbc3t1u_ghes5yatt3undai7ibm2cbc2e1u2d1e_ee3fm2kano4l1m_amat4db2mo_bilien9n_c1dustries8finiti5o2g1k1stitute6urance4e4t_ernational10uit4vestments10o1piranga7q1r_ish4s_maili5t_anbul7t_au2v3jaguar4va3cb2e_ep2tzt3welry6io2ll2m_p2nj2o_bs1urg4t1y2p_morgan6rs3uegos4niper7kaufen5ddi3e_rryhotels6logistics9properties14fh2g1h1i_a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p_mg2n2r_d1ed3uokgroup8w1y_oto4z2la_caixa5mborghini8er3ncaster5ia3d_rover6xess5salle5t_ino3robe5w_yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i_dl2fe_insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan_s3cker3us3l1ndon4tte1o3ve3pl_financial11r1s1t_d_a3u_ndbeck6xe1ury5v1y2ma_cys3drid4if1son4keup4n_agement7go3p1rket_ing3s4riott5shalls7serati6ttel5ba2c_kinsey7d1e_d_ia3et2lbourne7me1orial6n_u2rckmsd7g1h1iami3crosoft7l1ni1t2t_subishi9k1l_b1s2m_a2n1o_bi_le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to_rcycles9v_ie4p1q1r1s_d2t_n1r2u_seum3ic3tual5v1w1x1y1z2na_b1goya4me2tura4vy3ba2c1e_c1t_bank4flix4work5ustar5w_s2xt_direct7us4f_l2g_o2hk2i_co2ke1on3nja3ssan1y5l1o_kia3rthwesternmutual14on4w_ruz3tv4p1r_a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan_group9dnavy5lo3m_ega4ne1g1l_ine5oo2pen3racle3nge4g_anic5igins6saka4tsuka4t2vh3pa_ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e_t2f_izer5g1h_armacy6d1ilips5one2to_graphy6s4ysio5ics1tet2ures6d1n_g1k2oneer5zza4k1l_ace2y_station9umbing5s3m1n_c2ohl2ker3litie5rn2st3r_america6xi3ess3ime3o_d_uctions8f1gressive8mo2perties3y5tection8u_dential9s1t1ub2w_c2y2qa1pon3uebec3st5racing4dio4e_ad1lestate6tor2y4cipes5d_stone5umbrella9hab3ise_n3t2liance6n_t_als5pair3ort3ublican8st_aurant8view_s5xroth6ich_ardli6oh3l1o1p2o_cher3ks3deo3gers4om3s_vp3u_gby3hr2n2w_e2yukyu6sa_arland6fe_ty4kura4le1on3msclub4ung5ndvik_coromant12ofi4p1rl2s1ve2xo3b_i1s2c_a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e_arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x_y3fr2g1h_angrila6rp2w2ell3ia1ksha5oes2p_ping5uji3w_time7i_lk2na1gles5te3j1k_i_n2y_pe4l_ing4m_art3ile4n_cf3o_ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa_ce3ort2t3r_l2s1t_ada2ples4r1tebank4farm7c_group6ockholm6rage3e3ream4udio2y3yle4u_cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y_dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x_i3c_i2d_k2eam2ch_nology8l1masek5nnis4va3f1g1h_d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j_maxx4x2k_maxx5l1m_all4n1o_day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r_ade1ing4ining5vel_channel7ers_insurance16ust3v2t1ube2i1nes3shu4v_s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va_cations7na1guard7c1e_gas3ntures6risign5m\xf6gensberater2ung14sicherung10t2g1i_ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u_elos6wales2mart4ter4ng_gou5tch_es6eather_channel12bcam3er2site5d_ding5ibo2r3f1hoswho6ien2ki2lliamhill9n_dows4e1ners6me2olterskluwer11odside6rk_s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u_tube6t1un3za_ppos4ra3ero3ip2m1one3uerich6w2")),null==F&&(F=we("\u03b5\u03bb1\u03c52\u0431\u04331\u0435\u043b3\u0434\u0435\u0442\u04384\u0435\u044e2\u043a\u0430\u0442\u043e\u043b\u0438\u043a6\u043e\u043c3\u043c\u043a\u04342\u043e\u043d1\u0441\u043a\u0432\u04306\u043e\u043d\u043b\u0430\u0439\u043d5\u0440\u04333\u0440\u0443\u04412\u04442\u0441\u0430\u0439\u04423\u0440\u04313\u0443\u043a\u04403\u049b\u0430\u04373\u0570\u0561\u05753\u05d9\u05e9\u05e8\u05d0\u05dc5\u05e7\u05d5\u05dd3\u0627\u0628\u0648\u0638\u0628\u064a5\u062a\u0635\u0627\u0644\u0627\u062a6\u0631\u0627\u0645\u0643\u06485\u0644\u0627\u0631\u062f\u06464\u0628\u062d\u0631\u064a\u06465\u062c\u0632\u0627\u0626\u06315\u0633\u0639\u0648\u062f\u064a\u06296\u0639\u0644\u064a\u0627\u06465\u0645\u063a\u0631\u06285\u0645\u0627\u0631\u0627\u062a5\u06cc\u0631\u0627\u06465\u0628\u0627\u0631\u062a2\u0632\u0627\u06314\u064a\u062a\u06433\u06be\u0627\u0631\u062a5\u062a\u0648\u0646\u06334\u0633\u0648\u062f\u0627\u06463\u0631\u064a\u06295\u0634\u0628\u0643\u06294\u0639\u0631\u0627\u06422\u06282\u0645\u0627\u06464\u0641\u0644\u0633\u0637\u064a\u06466\u0642\u0637\u06313\u0643\u0627\u062b\u0648\u0644\u064a\u06436\u0648\u06453\u0645\u0635\u06312\u0644\u064a\u0633\u064a\u06275\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u06277\u0642\u06394\u0647\u0645\u0631\u0627\u06475\u067e\u0627\u06a9\u0633\u062a\u0627\u06467\u0680\u0627\u0631\u062a4\u0915\u0949\u092e3\u0928\u0947\u091f3\u092d\u093e\u0930\u0924_\u092e\u094d3\u094b\u09245\u0938\u0902\u0917\u0920\u09285\u09ac\u09be\u0982\u09b2\u09be5\u09ad\u09be\u09b0\u09a42\u09f0\u09a44\u0a2d\u0a3e\u0a30\u0a244\u0aad\u0abe\u0ab0\u0aa44\u0b2d\u0b3e\u0b30\u0b244\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe6\u0bb2\u0b99\u0bcd\u0b95\u0bc86\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd11\u0c2d\u0c3e\u0c30\u0c24\u0c4d5\u0cad\u0cbe\u0cb0\u0ca44\u0d2d\u0d3e\u0d30\u0d24\u0d025\u0dbd\u0d82\u0d9a\u0dcf4\u0e04\u0e2d\u0e213\u0e44\u0e17\u0e223\u0ea5\u0eb2\u0ea73\u10d2\u10d42\u307f\u3093\u306a3\u30a2\u30de\u30be\u30f34\u30af\u30e9\u30a6\u30c94\u30b0\u30fc\u30b0\u30eb4\u30b3\u30e02\u30b9\u30c8\u30a23\u30bb\u30fc\u30eb3\u30d5\u30a1\u30c3\u30b7\u30e7\u30f36\u30dd\u30a4\u30f3\u30c84\u4e16\u754c2\u4e2d\u4fe11\u56fd1\u570b1\u6587\u7f513\u4e9a\u9a6c\u900a3\u4f01\u4e1a2\u4f5b\u5c712\u4fe1\u606f2\u5065\u5eb72\u516b\u53662\u516c\u53f81\u76ca2\u53f0\u6e7e1\u70632\u5546\u57ce1\u5e971\u68072\u5609\u91cc_\u5927\u9152\u5e975\u5728\u7ebf2\u5927\u62ff2\u5929\u4e3b\u65593\u5a31\u4e502\u5bb6\u96fb2\u5e7f\u4e1c2\u5fae\u535a2\u6148\u55842\u6211\u7231\u4f603\u624b\u673a2\u62db\u80582\u653f\u52a11\u5e9c2\u65b0\u52a0\u57612\u95fb2\u65f6\u5c1a2\u66f8\u7c4d2\u673a\u67842\u6de1\u9a6c\u95213\u6e38\u620f2\u6fb3\u95802\u70b9\u770b2\u79fb\u52a82\u7ec4\u7ec7\u673a\u67844\u7f51\u57401\u5e971\u7ad91\u7edc2\u8054\u901a2\u8c37\u6b4c2\u8d2d\u72692\u901a\u8ca92\u96c6\u56e22\u96fb\u8a0a\u76c8\u79d14\u98de\u5229\u6d663\u98df\u54c12\u9910\u53852\u9999\u683c\u91cc\u62c93\u6e2f2\ub2f7\ub1371\ucef42\uc0bc\uc1312\ud55c\uad6d2")),j(v,"'",ue),j(v,"{",st),j(v,"[",J),j(v,"<",Q),j(v,"(",ot),j(v,"}",kt),j(v,"]",$t),j(v,">",Yt),j(v,")",ne),j(v,"&",zt),j(v,"*",ye),j(v,"@",xe),j(v,"`",Ke),j(v,"^",Ae),j(v,":",Ne),j(v,",",_e),j(v,"$",De),j(v,".",ve),j(v,"=",Se),j(v,"!",He),j(v,"-",Me),j(v,"%",ke),j(v,"|",Ye),j(v,"+",Ue),j(v,"#",ze),j(v,"?",Be),j(v,'"',We),j(v,"/",me),j(v,";",Te),j(v,"~",Ee),j(v,"_",_t),j(v,"\\",fe);const x=W(v,wt,L,{[it]:!0});W(x,wt,x);const w=W(v,R,At,{[B]:!0});W(w,R,w);const K=W(v,V,St,{[X]:!0});W(K,R),W(K,V,K);const z=W(v,N,"WS",{[bt]:!0});j(v,"\n","NL",{[bt]:!0}),j(z,"\n"),W(z,N,z);const G=W(v,H,b,{emoji:!0});W(G,H,G),j(G,"\ufe0f",G);const Mt=j(G,"\u200d");W(Mt,H,G);const xt=[[R,w]],Nt=[[R,null],[V,K]];for(let Ut=0;Ut<k.length;Ut++)te(v,k[Ut],"TLD",At,xt);for(let Ut=0;Ut<F.length;Ut++)te(v,F[Ut],Ht,St,Nt);Pt("TLD",{tld:!0,ascii:!0},f),Pt(Ht,{utld:!0,alpha:!0},f),te(v,"file",Kt,At,xt),te(v,"mailto",Kt,At,xt),te(v,"http",pt,At,xt),te(v,"https",pt,At,xt),te(v,"ftp",pt,At,xt),te(v,"ftps",pt,At,xt),Pt(Kt,{scheme:!0,ascii:!0},f),Pt(pt,{slashscheme:!0,ascii:!0},f),m=m.sort((Ut,Qt)=>Ut[0]>Qt[0]?1:-1);for(let Ut=0;Ut<m.length;Ut++){const Qt=m[Ut][0],ie=m[Ut][1]?{scheme:!0}:{slashscheme:!0};Qt.indexOf("-")>=0?ie[ut]=!0:R.test(Qt)?wt.test(Qt)?ie[tt]=!0:ie[B]=!0:ie[it]=!0,mt(v,Qt,Qt,ie)}return mt(v,"localhost",yt,{ascii:!0}),v.jd=new ht(O),{start:v,tokens:g({groups:f},S)}}(de.customSchemes);for(let m=0;m<de.tokenQueue.length;m++)de.tokenQueue[m][1]({scanner:de.scanner});de.parser=function(m){let{groups:f}=m;const v=f.domain.concat([zt,ye,xe,fe,Ke,Ae,De,Se,Me,L,ke,Ye,Ue,ze,me,O,Ee,_t]),x=[ue,Yt,kt,$t,ne,Ne,_e,ve,He,Q,st,J,ot,Be,We,Te],w=[zt,ue,ye,fe,Ke,Ae,kt,De,Se,Me,L,st,ke,Ye,Ue,ze,Be,me,O,Ee,_t],K=re(),z=j(K,Ee);q(z,w,z),q(z,f.domain,z);const G=re(),Mt=re(),xt=re();q(K,f.domain,G),q(K,f.scheme,Mt),q(K,f.slashscheme,xt),q(G,w,z),q(G,f.domain,G);const Nt=j(G,xe);j(z,xe,Nt),j(Mt,xe,Nt),j(xt,xe,Nt);const Ut=j(z,ve);q(Ut,w,z),q(Ut,f.domain,z);const Qt=re();q(Nt,f.domain,Qt),q(Qt,f.domain,Qt);const se=j(Qt,ve);q(se,f.domain,Qt);const ie=re(Ft);q(se,f.tld,ie),q(se,f.utld,ie),j(Nt,yt,ie);const Oe=j(Qt,Me);q(Oe,f.domain,Qt),q(ie,f.domain,Qt),j(ie,ve,se),j(ie,Me,Oe);const rn=j(ie,Ne);q(rn,f.numeric,Ft);const je=j(G,Me),Ce=j(G,ve);q(je,f.domain,G),q(Ce,w,z),q(Ce,f.domain,G);const Pe=re(ee);q(Ce,f.tld,Pe),q(Ce,f.utld,Pe),q(Pe,f.domain,G),q(Pe,w,z),j(Pe,ve,Ce),j(Pe,Me,je),j(Pe,xe,Nt);const gn=j(Pe,Ne),cn=re(ee);q(gn,f.numeric,cn);const pe=re(ee),Ie=re();q(pe,v,pe),q(pe,x,Ie),q(Ie,v,pe),q(Ie,x,Ie),j(Pe,me,pe),j(cn,me,pe);const Fe=j(Mt,Ne),Vn=j(xt,Ne),Qn=j(Vn,me);j(Qn,me,Fe),q(Mt,f.domain,G),j(Mt,ve,Ce),j(Mt,Me,je),q(xt,f.domain,G),j(xt,ve,Ce),j(xt,Me,je),q(Fe,f.domain,pe),j(Fe,me,pe);const hn=j(pe,st),qe=j(pe,J),wn=j(pe,Q),bn=j(pe,ot);j(Ie,st,hn),j(Ie,J,qe),j(Ie,Q,wn),j(Ie,ot,bn),j(hn,kt,pe),j(qe,$t,pe),j(wn,Yt,pe),j(bn,ne,pe),j(hn,kt,pe);const _n=re(ee),Mn=re(ee),En=re(ee),dn=re(ee);q(hn,v,_n),q(qe,v,Mn),q(wn,v,En),q(bn,v,dn);const Sn=re(),On=re(),sn=re(),Rn=re();return q(hn,x),q(qe,x),q(wn,x),q(bn,x),q(_n,v,_n),q(Mn,v,Mn),q(En,v,En),q(dn,v,dn),q(_n,x,_n),q(Mn,x,Mn),q(En,x,En),q(dn,x,dn),q(Sn,v,Sn),q(On,v,Mn),q(sn,v,En),q(Rn,v,dn),q(Sn,x,Sn),q(On,x,On),q(sn,x,sn),q(Rn,x,Rn),j(Mn,$t,pe),j(En,Yt,pe),j(dn,ne,pe),j(_n,kt,pe),j(On,$t,pe),j(sn,Yt,pe),j(Rn,ne,pe),j(Sn,ne,pe),j(K,yt,Pe),j(K,"NL",Vt),{start:K,tokens:S}}(de.scanner.tokens);for(let m=0;m<de.pluginQueue.length;m++)de.pluginQueue[m][1]({scanner:de.scanner,parser:de.parser});de.initialized=!0}(),function(m,f,v){let x=v.length,w=0,K=[],z=[];for(;w<x;){let G=m,Mt=null,xt=null,Nt=0,Ut=null,Qt=-1;for(;w<x&&!(Mt=G.go(v[w].t));)z.push(v[w++]);for(;w<x&&(xt=Mt||G.go(v[w].t));)Mt=null,G=xt,G.accepts()?(Qt=0,Ut=G):Qt>=0&&Qt++,w++,Nt++;if(Qt<0)w-=Nt,w<x&&(z.push(v[w]),w++);else{z.length>0&&(K.push(be(Wt,f,z)),z=[]),w-=Qt,Nt-=Qt;const se=Ut.t,ie=v.slice(w-Nt,w);K.push(be(se,f,ie))}}return z.length>0&&K.push(be(Wt,f,z)),K}(de.parser.start,m,function(m,f){const v=function(m){const f=[],v=m.length;let x=0;for(;x<v;){let K,w=m.charCodeAt(x),z=w<55296||w>56319||x+1===v||(K=m.charCodeAt(x+1))<56320||K>57343?m[x]:m.slice(x,x+2);f.push(z),x+=z.length}return f}(f.replace(/[A-Z]/g,G=>G.toLowerCase())),x=v.length,w=[];let K=0,z=0;for(;z<x;){let G=m,Mt=null,xt=0,Nt=null,Ut=-1,Qt=-1;for(;z<x&&(Mt=G.go(v[z]));)G=Mt,G.accepts()?(Ut=0,Qt=0,Nt=G):Ut>=0&&(Ut+=v[z].length,Qt++),xt+=v[z].length,K+=v[z].length,z++;K-=Ut,z-=Qt,xt-=Ut,w.push({t:Nt.t,v:f.slice(K-xt,K),s:K-xt,e:K})}return w}(de.scanner.start,m))}function pn(m,f,v){if(void 0===f&&(f=null),void 0===v&&(v=null),f&&"object"==typeof f){if(v)throw Error(`linkifyjs: Invalid link type ${f}; must be a string`);v=f,f=null}const x=new Y(v),w=ln(m),K=[];for(let z=0;z<w.length;z++){const G=w[z];G.isLink&&(!f||G.t===f)&&K.push(G.toFormattedObject(x))}return K}function an(m,f){void 0===f&&(f=null);const v=ln(m);return 1===v.length&&v[0].isLink&&(!f||v[0].t===f)}var $e=c(62463);const C=l.Mark.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(m=>{"string"!=typeof m?nn(m.scheme,m.optionalSlashes):nn(m)})},onDestroy(){ht.groups={},de.scanner=null,de.parser=null,de.tokenQueue=[],de.pluginQueue=[],de.customSchemes=[],de.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}),addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML:()=>[{tag:'a[href]:not([href *= "javascript:" i])'}],renderHTML({HTMLAttributes:m}){return["a",(0,l.mergeAttributes)(this.options.HTMLAttributes,m),0]},addCommands(){return{setLink:m=>({chain:f})=>f().setMark(this.name,m).setMeta("preventAutolink",!0).run(),toggleLink:m=>({chain:f})=>f().toggleMark(this.name,m,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:m})=>m().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[(0,l.markPasteRule)({find:m=>pn(m).filter(f=>!this.options.validate||this.options.validate(f.value)).filter(f=>f.isLink).map(f=>({text:f.value,index:f.start,data:f})),type:this.type,getAttributes:m=>{var f;return{href:null===(f=m.data)||void 0===f?void 0:f.href}}})]},addProseMirrorPlugins(){const m=[];return this.options.autolink&&m.push(function(m){return new $e.Sy({key:new $e.H$("autolink"),appendTransaction:(f,v,x)=>{const w=f.some(Nt=>Nt.docChanged)&&!v.doc.eq(x.doc),K=f.some(Nt=>Nt.getMeta("preventAutolink"));if(!w||K)return;const{tr:z}=x,G=(0,l.combineTransactionSteps)(v.doc,[...f]),{mapping:Mt}=G;return(0,l.getChangedRanges)(G).forEach(({oldRange:Nt,newRange:Ut})=>{(0,l.getMarksBetween)(Nt.from,Nt.to,v.doc).filter(Oe=>Oe.mark.type===m.type).forEach(Oe=>{const rn=Mt.map(Oe.from),je=Mt.map(Oe.to),Ce=(0,l.getMarksBetween)(rn,je,x.doc).filter(Fe=>Fe.mark.type===m.type);if(!Ce.length)return;const Pe=Ce[0],gn=v.doc.textBetween(Oe.from,Oe.to,void 0," "),cn=x.doc.textBetween(Pe.from,Pe.to,void 0," "),pe=an(gn),Ie=an(cn);pe&&!Ie&&z.removeMark(Pe.from,Pe.to,m.type)});const Qt=(0,l.findChildrenInRange)(x.doc,Ut,Oe=>Oe.isTextblock);let se,ie;if(Qt.length>1?(se=Qt[0],ie=x.doc.textBetween(se.pos,se.pos+se.node.nodeSize,void 0," ")):Qt.length&&x.doc.textBetween(Ut.from,Ut.to," "," ").endsWith(" ")&&(se=Qt[0],ie=x.doc.textBetween(se.pos,Ut.to,void 0," ")),se&&ie){const Oe=ie.split(" ").filter(Ce=>""!==Ce);if(Oe.length<=0)return!1;const rn=Oe[Oe.length-1],je=se.pos+ie.lastIndexOf(rn);if(!rn)return!1;pn(rn).filter(Ce=>Ce.isLink).filter(Ce=>!m.validate||m.validate(Ce.value)).map(Ce=>ge(Gt({},Ce),{from:je+Ce.start+1,to:je+Ce.end+1})).forEach(Ce=>{z.addMark(Ce.from,Ce.to,m.type.create({href:Ce.href}))})}}),z.steps.length?z:void 0}})}({type:this.type,validate:this.options.validate})),this.options.openOnClick&&m.push(function(m){return new $e.Sy({key:new $e.H$("handleClickLink"),props:{handleClick:(f,v,x)=>{var w,K,z;const G=(0,l.getAttributes)(f.state,m.type.name),Mt=null===(w=x.target)||void 0===w?void 0:w.closest("a"),xt=null!==(K=null==Mt?void 0:Mt.href)&&void 0!==K?K:G.href,Nt=null!==(z=null==Mt?void 0:Mt.target)&&void 0!==z?z:G.target;return!(!Mt||!xt||(window.open(xt,Nt),0))}}})}({type:this.type})),this.options.linkOnPaste&&m.push(function(m){return new $e.Sy({key:new $e.H$("handlePasteLink"),props:{handlePaste:(f,v,x)=>{const{state:w}=f,{selection:K}=w,{empty:z}=K;if(z)return!1;let G="";x.content.forEach(xt=>{G+=xt.textContent});const Mt=pn(G).find(xt=>xt.isLink&&xt.value===G);return!(!G||!Mt||(m.editor.commands.setMark(m.type,{href:Mt.href}),0))}}})}({editor:this.editor,type:this.type})),m}}).extend({addAttributes(){var m;return Object.assign(Object.assign({},null===(m=this.parent)||void 0===m?void 0:m.call(this)),(0,M.x6)(["download"]))},addCommands(){var m;return Object.assign(Object.assign({},null===(m=this.parent)||void 0===m?void 0:m.call(this)),{toggleLink:f=>({chain:v,state:x})=>{{const{selection:w,doc:K}=x,z=K.cut(w.to,w.to+1),Mt=" "===(0,l.getHTMLFromFragment)(z.content,x.schema).replace(/<\/?[^>]+(>|$)/g,""),xt=v().toggleMark(this.name,f,{extendEmptyMarkRange:!0});return(Mt?xt.setTextSelection(w.to+1):xt.setTextSelection(w.to).insertContent('<span style="font-size: 15px"> </span>')).run()}}})}}).configure({openOnClick:!1})},41512:(jt,Et,c)=>{c.r(Et),c.d(Et,{TuiAudio:()=>y,TuiSource:()=>P,TuiVideo:()=>g});var M=c(27863),l=c(12867);const y=l.Node.create({name:"audio",group:"block",content:"source+",addAttributes:()=>(0,M.x6)(["id","class","src","style","controls","loop","muted","preload","autoplay","width","height"]),parseHTML:()=>[{tag:"audio"}],renderHTML:({node:it,HTMLAttributes:B})=>["audio",B,...(0,M.YX)(it)]}),P=l.Node.create({name:"source",addAttributes:()=>(0,M.x6)(["src","type","width","height","media","sizes","srcset"]),parseHTML:()=>[{tag:"source"}],renderHTML:({HTMLAttributes:it})=>["source",(0,l.mergeAttributes)(it)]}),g=l.Node.create({name:"video",group:"block",content:"source+",addAttributes:()=>(0,M.x6)(["id","class","src","style","controls","loop","muted","preload","autoplay","width","height"]),parseHTML:()=>[{tag:"video"}],renderHTML:({node:it,HTMLAttributes:B})=>["video",B,...(0,M.YX)(it)]})},2823:(jt,Et,c)=>{c.r(Et),c.d(Et,{StarterKit:()=>Je});var M=c(12867);const l=/^\s*>\s$/,y=M.Node.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:Y}){return["blockquote",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{setBlockquote:()=>({commands:Y})=>Y.wrapIn(this.name),toggleBlockquote:()=>({commands:Y})=>Y.toggleWrap(this.name),unsetBlockquote:()=>({commands:Y})=>Y.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,M.wrappingInputRule)({find:l,type:this.type})]}}),P=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,g=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,it=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,B=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,X=M.Mark.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:Y=>"normal"!==Y.style.fontWeight&&null},{style:"font-weight",getAttrs:Y=>/^(bold(er)?|[5-9]\d{2,})$/.test(Y)&&null}],renderHTML({HTMLAttributes:Y}){return["strong",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{setBold:()=>({commands:Y})=>Y.setMark(this.name),toggleBold:()=>({commands:Y})=>Y.toggleMark(this.name),unsetBold:()=>({commands:Y})=>Y.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,M.markInputRule)({find:P,type:this.type}),(0,M.markInputRule)({find:it,type:this.type})]},addPasteRules(){return[(0,M.markPasteRule)({find:g,type:this.type}),(0,M.markPasteRule)({find:B,type:this.type})]}}),tt=M.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:Y}){return["li",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ft=M.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:Y=>!!Y.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:Y}){return["span",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:Y,commands:$})=>{const at=(0,M.getMarkAttributes)(Y,this.type);return!!Object.entries(at).some(([,vt])=>!!vt)||$.unsetMark(this.name)}}}}),ut=/^\s*([-+*])\s$/,et=M.Node.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:Y}){return["ul",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{toggleBulletList:()=>({commands:Y,chain:$})=>this.options.keepAttributes?$().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(tt.name,this.editor.getAttributes(ft.name)).run():Y.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let Y=(0,M.wrappingInputRule)({find:ut,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(Y=(0,M.wrappingInputRule)({find:ut,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ft.name),editor:this.editor})),[Y]}}),Tt=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,Ct=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,bt=M.Mark.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:Y}){return["code",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{setCode:()=>({commands:Y})=>Y.setMark(this.name),toggleCode:()=>({commands:Y})=>Y.toggleMark(this.name),unsetCode:()=>({commands:Y})=>Y.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,M.markInputRule)({find:Tt,type:this.type})]},addPasteRules(){return[(0,M.markPasteRule)({find:Ct,type:this.type})]}});var It=c(62463);const Pt=/^```([a-z]+)?[\s\n]$/,Dt=/^~~~([a-z]+)?[\s\n]$/,ht=M.Node.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:Y=>{var $;const{languageClassPrefix:at}=this.options;return[...(null===($=Y.firstElementChild)||void 0===$?void 0:$.classList)||[]].filter(Wt=>Wt.startsWith(at)).map(Wt=>Wt.replace(at,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:Y,HTMLAttributes:$}){return["pre",(0,M.mergeAttributes)(this.options.HTMLAttributes,$),["code",{class:Y.attrs.language?this.options.languageClassPrefix+Y.attrs.language:null},0]]},addCommands(){return{setCodeBlock:Y=>({commands:$})=>$.setNode(this.name,Y),toggleCodeBlock:Y=>({commands:$})=>$.toggleNode(this.name,"paragraph",Y)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:Y,$anchor:$}=this.editor.state.selection;return!(!Y||$.parent.type.name!==this.name)&&!(1!==$.pos&&$.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:Y})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:$}=Y,{selection:at}=$,{$from:gt,empty:vt}=at;if(!vt||gt.parent.type!==this.type)return!1;const Ft=gt.parentOffset===gt.parent.nodeSize-2,Wt=gt.parent.textContent.endsWith("\n\n");return!(!Ft||!Wt)&&Y.chain().command(({tr:Vt})=>(Vt.delete(gt.pos-2,gt.pos),!0)).exitCode().run()},ArrowDown:({editor:Y})=>{if(!this.options.exitOnArrowDown)return!1;const{state:$}=Y,{selection:at,doc:gt}=$,{$from:vt,empty:Ft}=at;if(!Ft||vt.parent.type!==this.type||vt.parentOffset!==vt.parent.nodeSize-2)return!1;const Vt=vt.after();return void 0!==Vt&&!gt.nodeAt(Vt)&&Y.commands.exitCode()}}},addInputRules(){return[(0,M.textblockTypeInputRule)({find:Pt,type:this.type,getAttributes:Y=>({language:Y[1]})}),(0,M.textblockTypeInputRule)({find:Dt,type:this.type,getAttributes:Y=>({language:Y[1]})})]},addProseMirrorPlugins(){return[new It.Sy({key:new It.H$("codeBlockVSCodeHandler"),props:{handlePaste:(Y,$)=>{if(!$.clipboardData||this.editor.isActive(this.type.name))return!1;const at=$.clipboardData.getData("text/plain"),gt=$.clipboardData.getData("vscode-editor-data"),vt=gt?JSON.parse(gt):void 0,Ft=null==vt?void 0:vt.mode;if(!at||!Ft)return!1;const{tr:Wt}=Y.state;return Wt.replaceSelectionWith(this.type.create({language:Ft})),Wt.setSelection(It.Bs.near(Wt.doc.resolve(Math.max(0,Wt.selection.from-2)))),Wt.insertText(at.replace(/\r\n?/g,"\n")),Wt.setMeta("paste",!0),Y.dispatch(Wt),!0}}})]}}),q=M.Node.create({name:"doc",topNode:!0,content:"block+"});var W=c(38480);function mt(Y={}){return new It.Sy({view:$=>new j($,Y)})}class j{constructor($,at){this.editorView=$,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=at.width||1,this.color=at.color||"black",this.class=at.class,this.handlers=["dragover","dragend","drop","dragleave"].map(gt=>{let vt=Ft=>{this[gt](Ft)};return $.dom.addEventListener(gt,vt),{name:gt,handler:vt}})}destroy(){this.handlers.forEach(({name:$,handler:at})=>this.editorView.dom.removeEventListener($,at))}update($,at){null!=this.cursorPos&&at.doc!=$.state.doc&&(this.cursorPos>$.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor($){$!=this.cursorPos&&(this.cursorPos=$,null==$?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let gt,$=this.editorView.state.doc.resolve(this.cursorPos),at=!$.parent.inlineContent;if(at){let Vt=$.nodeBefore,ee=$.nodeAfter;if(Vt||ee){let he=this.editorView.nodeDOM(this.cursorPos-(Vt?Vt.nodeSize:0));if(he){let re=he.getBoundingClientRect(),le=Vt?re.bottom:re.top;Vt&&ee&&(le=(le+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),gt={left:re.left,right:re.right,top:le-this.width/2,bottom:le+this.width/2}}}}if(!gt){let Vt=this.editorView.coordsAtPos(this.cursorPos);gt={left:Vt.left-this.width/2,right:Vt.left+this.width/2,top:Vt.top,bottom:Vt.bottom}}let Ft,Wt,vt=this.editorView.dom.offsetParent;if(this.element||(this.element=vt.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),this.element.classList.toggle("prosemirror-dropcursor-block",at),this.element.classList.toggle("prosemirror-dropcursor-inline",!at),!vt||vt==document.body&&"static"==getComputedStyle(vt).position)Ft=-pageXOffset,Wt=-pageYOffset;else{let Vt=vt.getBoundingClientRect();Ft=Vt.left-vt.scrollLeft,Wt=Vt.top-vt.scrollTop}this.element.style.left=gt.left-Ft+"px",this.element.style.top=gt.top-Wt+"px",this.element.style.width=gt.right-gt.left+"px",this.element.style.height=gt.bottom-gt.top+"px"}scheduleRemoval($){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),$)}dragover($){if(!this.editorView.editable)return;let at=this.editorView.posAtCoords({left:$.clientX,top:$.clientY}),gt=at&&at.inside>=0&&this.editorView.state.doc.nodeAt(at.inside),vt=gt&&gt.type.spec.disableDropCursor,Ft="function"==typeof vt?vt(this.editorView,at,$):vt;if(at&&!Ft){let Wt=at.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let Vt=(0,W.nj)(this.editorView.state.doc,Wt,this.editorView.dragging.slice);null!=Vt&&(Wt=Vt)}this.setCursor(Wt),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave($){($.target==this.editorView.dom||!this.editorView.dom.contains($.relatedTarget))&&this.setCursor(null)}}const At=M.Extension.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[mt(this.options)]}});var St=c(70768),yt=c(77346),Lt=c(43594);class Ht extends It.Y1{constructor($){super($,$)}map($,at){let gt=$.resolve(at.map(this.head));return Ht.valid(gt)?new Ht(gt):It.Y1.near(gt)}content(){return yt.p2.empty}eq($){return $ instanceof Ht&&$.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON($,at){if("number"!=typeof at.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ht($.resolve(at.pos))}getBookmark(){return new Kt(this.anchor)}static valid($){let at=$.parent;if(at.isTextblock||!function(Y){for(let $=Y.depth;$>=0;$--){let at=Y.index($),gt=Y.node($);if(0!=at)for(let vt=gt.child(at-1);;vt=vt.lastChild){if(0==vt.childCount&&!vt.inlineContent||vt.isAtom||vt.type.spec.isolating)return!0;if(vt.inlineContent)return!1}else if(gt.type.spec.isolating)return!0}return!0}($)||!function(Y){for(let $=Y.depth;$>=0;$--){let at=Y.indexAfter($),gt=Y.node($);if(at!=gt.childCount)for(let vt=gt.child(at);;vt=vt.firstChild){if(0==vt.childCount&&!vt.inlineContent||vt.isAtom||vt.type.spec.isolating)return!0;if(vt.inlineContent)return!1}else if(gt.type.spec.isolating)return!0}return!0}($))return!1;let gt=at.type.spec.allowGapCursor;if(null!=gt)return gt;let vt=at.contentMatchAt($.index()).defaultType;return vt&&vt.isTextblock}static findGapCursorFrom($,at,gt=!1){t:for(;;){if(!gt&&Ht.valid($))return $;let vt=$.pos,Ft=null;for(let Wt=$.depth;;Wt--){let Vt=$.node(Wt);if(at>0?$.indexAfter(Wt)<Vt.childCount:$.index(Wt)>0){Ft=Vt.child(at>0?$.indexAfter(Wt):$.index(Wt)-1);break}if(0==Wt)return null;vt+=at;let ee=$.doc.resolve(vt);if(Ht.valid(ee))return ee}for(;;){let Wt=at>0?Ft.firstChild:Ft.lastChild;if(!Wt){if(Ft.isAtom&&!Ft.isText&&!It.qv.isSelectable(Ft)){$=$.doc.resolve(vt+Ft.nodeSize*at),gt=!1;continue t}break}Ft=Wt,vt+=at;let Vt=$.doc.resolve(vt);if(Ht.valid(Vt))return Vt}return null}}}Ht.prototype.visible=!1,Ht.findFrom=Ht.findGapCursorFrom,It.Y1.jsonID("gapcursor",Ht);class Kt{constructor($){this.pos=$}map($){return new Kt($.map(this.pos))}resolve($){let at=$.resolve(this.pos);return Ht.valid(at)?new Ht(at):It.Y1.near(at)}}const ct=(0,St.$)({ArrowLeft:st("horiz",-1),ArrowRight:st("horiz",1),ArrowUp:st("vert",-1),ArrowDown:st("vert",1)});function st(Y,$){const at="vert"==Y?$>0?"down":"up":$>0?"right":"left";return function(gt,vt,Ft){let Wt=gt.selection,Vt=$>0?Wt.$to:Wt.$from,ee=Wt.empty;if(Wt instanceof It.Bs){if(!Ft.endOfTextblock(at)||0==Vt.depth)return!1;ee=!1,Vt=gt.doc.resolve($>0?Vt.after():Vt.before())}let he=Ht.findGapCursorFrom(Vt,$,ee);return!!he&&(vt&&vt(gt.tr.setSelection(new Ht(he))),!0)}}function J(Y,$,at){if(!Y||!Y.editable)return!1;let gt=Y.state.doc.resolve($);if(!Ht.valid(gt))return!1;let vt=Y.posAtCoords({left:at.clientX,top:at.clientY});return!(vt&&vt.inside>-1&&It.qv.isSelectable(Y.state.doc.nodeAt(vt.inside))||(Y.dispatch(Y.state.tr.setSelection(new Ht(gt))),0))}function Q(Y,$){if("insertCompositionText"!=$.inputType||!(Y.state.selection instanceof Ht))return!1;let{$from:at}=Y.state.selection,gt=at.parent.contentMatchAt(at.index()).findWrapping(Y.state.schema.nodes.text);if(!gt)return!1;let vt=yt.HY.empty;for(let Wt=gt.length-1;Wt>=0;Wt--)vt=yt.HY.from(gt[Wt].createAndFill(null,vt));let Ft=Y.state.tr.replace(at.pos,at.pos,new yt.p2(vt,0,0));return Ft.setSelection(It.Bs.near(Ft.doc.resolve(at.pos+1))),Y.dispatch(Ft),!1}function ot(Y){if(!(Y.selection instanceof Ht))return null;let $=document.createElement("div");return $.className="ProseMirror-gapcursor",Lt.EH.create(Y.doc,[Lt.p.widget(Y.selection.head,$,{key:"gapcursor"})])}const kt=M.Extension.create({name:"gapCursor",addProseMirrorPlugins:()=>[new It.Sy({props:{decorations:ot,createSelectionBetween:(Y,$,at)=>$.pos==at.pos&&Ht.valid(at)?new Ht(at):null,handleClick:J,handleKeyDown:ct,handleDOMEvents:{beforeinput:Q}}})],extendNodeSchema(Y){var $;return{allowGapCursor:null!==($=(0,M.callOrReturn)((0,M.getExtensionField)(Y,"allowGapCursor",{name:Y.name,options:Y.options,storage:Y.storage})))&&void 0!==$?$:null}}}),$t=M.Node.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:Y}){return["br",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:Y,chain:$,state:at,editor:gt})=>Y.first([()=>Y.exitCode(),()=>Y.command(()=>{const{selection:vt,storedMarks:Ft}=at;if(vt.$from.parent.type.spec.isolating)return!1;const{keepMarks:Wt}=this.options,{splittableMarks:Vt}=gt.extensionManager,ee=Ft||vt.$to.parentOffset&&vt.$from.marks();return $().insertContent({type:this.name}).command(({tr:he,dispatch:re})=>{if(re&&ee&&Wt){const le=ee.filter(ce=>Vt.includes(ce.type.name));he.ensureMarks(le)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Yt=M.Node.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(Y=>({tag:`h${Y}`,attrs:{level:Y}}))},renderHTML({node:Y,HTMLAttributes:$}){return[`h${this.options.levels.includes(Y.attrs.level)?Y.attrs.level:this.options.levels[0]}`,(0,M.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setHeading:Y=>({commands:$})=>!!this.options.levels.includes(Y.level)&&$.setNode(this.name,Y),toggleHeading:Y=>({commands:$})=>!!this.options.levels.includes(Y.level)&&$.toggleNode(this.name,"paragraph",Y)}},addKeyboardShortcuts(){return this.options.levels.reduce((Y,$)=>ge(Gt({},Y),{[`Mod-Alt-${$}`]:()=>this.editor.commands.toggleHeading({level:$})}),{})},addInputRules(){return this.options.levels.map(Y=>(0,M.textblockTypeInputRule)({find:new RegExp(`^(#{1,${Y}})\\s$`),type:this.type,getAttributes:{level:Y}}))}});var zt=function(){};zt.prototype.append=function($){return $.length?($=zt.from($),!this.length&&$||$.length<200&&this.leafAppend($)||this.length<200&&$.leafPrepend(this)||this.appendInner($)):this},zt.prototype.prepend=function($){return $.length?zt.from($).append(this):this},zt.prototype.appendInner=function($){return new ye(this,$)},zt.prototype.slice=function($,at){return void 0===$&&($=0),void 0===at&&(at=this.length),$>=at?zt.empty:this.sliceInner(Math.max(0,$),Math.min(this.length,at))},zt.prototype.get=function($){if(!($<0||$>=this.length))return this.getInner($)},zt.prototype.forEach=function($,at,gt){void 0===at&&(at=0),void 0===gt&&(gt=this.length),at<=gt?this.forEachInner($,at,gt,0):this.forEachInvertedInner($,at,gt,0)},zt.prototype.map=function($,at,gt){void 0===at&&(at=0),void 0===gt&&(gt=this.length);var vt=[];return this.forEach(function(Ft,Wt){return vt.push($(Ft,Wt))},at,gt),vt},zt.from=function($){return $ instanceof zt?$:$&&$.length?new ue($):zt.empty};var ue=function(Y){function $(gt){Y.call(this),this.values=gt}Y&&($.__proto__=Y),($.prototype=Object.create(Y&&Y.prototype)).constructor=$;var at={length:{configurable:!0},depth:{configurable:!0}};return $.prototype.flatten=function(){return this.values},$.prototype.sliceInner=function(vt,Ft){return 0==vt&&Ft==this.length?this:new $(this.values.slice(vt,Ft))},$.prototype.getInner=function(vt){return this.values[vt]},$.prototype.forEachInner=function(vt,Ft,Wt,Vt){for(var ee=Ft;ee<Wt;ee++)if(!1===vt(this.values[ee],Vt+ee))return!1},$.prototype.forEachInvertedInner=function(vt,Ft,Wt,Vt){for(var ee=Ft-1;ee>=Wt;ee--)if(!1===vt(this.values[ee],Vt+ee))return!1},$.prototype.leafAppend=function(vt){if(this.length+vt.length<=200)return new $(this.values.concat(vt.flatten()))},$.prototype.leafPrepend=function(vt){if(this.length+vt.length<=200)return new $(vt.flatten().concat(this.values))},at.length.get=function(){return this.values.length},at.depth.get=function(){return 0},Object.defineProperties($.prototype,at),$}(zt);zt.empty=new ue([]);var ye=function(Y){function $(at,gt){Y.call(this),this.left=at,this.right=gt,this.length=at.length+gt.length,this.depth=Math.max(at.depth,gt.depth)+1}return Y&&($.__proto__=Y),($.prototype=Object.create(Y&&Y.prototype)).constructor=$,$.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},$.prototype.getInner=function(gt){return gt<this.left.length?this.left.get(gt):this.right.get(gt-this.left.length)},$.prototype.forEachInner=function(gt,vt,Ft,Wt){var Vt=this.left.length;if(vt<Vt&&!1===this.left.forEachInner(gt,vt,Math.min(Ft,Vt),Wt)||Ft>Vt&&!1===this.right.forEachInner(gt,Math.max(vt-Vt,0),Math.min(this.length,Ft)-Vt,Wt+Vt))return!1},$.prototype.forEachInvertedInner=function(gt,vt,Ft,Wt){var Vt=this.left.length;if(vt>Vt&&!1===this.right.forEachInvertedInner(gt,vt-Vt,Math.max(Ft,Vt)-Vt,Wt+Vt)||Ft<Vt&&!1===this.left.forEachInvertedInner(gt,Math.min(vt,Vt),Ft,Wt))return!1},$.prototype.sliceInner=function(gt,vt){if(0==gt&&vt==this.length)return this;var Ft=this.left.length;return vt<=Ft?this.left.slice(gt,vt):gt>=Ft?this.right.slice(gt-Ft,vt-Ft):this.left.slice(gt,Ft).append(this.right.slice(0,vt-Ft))},$.prototype.leafAppend=function(gt){var vt=this.right.leafAppend(gt);if(vt)return new $(this.left,vt)},$.prototype.leafPrepend=function(gt){var vt=this.left.leafPrepend(gt);if(vt)return new $(vt,this.right)},$.prototype.appendInner=function(gt){return this.left.depth>=Math.max(this.right.depth,gt.depth)+1?new $(this.left,new $(this.right,gt)):new $(this,gt)},$}(zt);const fe=zt;class Ae{constructor($,at){this.items=$,this.eventCount=at}popEvent($,at){if(0==this.eventCount)return null;let vt,Ft,gt=this.items.length;for(;;gt--)if(this.items.get(gt-1).selection){--gt;break}at&&(vt=this.remapping(gt,this.items.length),Ft=vt.maps.length);let Vt,ee,Wt=$.tr,he=[],re=[];return this.items.forEach((le,ce)=>{if(!le.step)return vt||(vt=this.remapping(gt,ce+1),Ft=vt.maps.length),Ft--,void re.push(le);if(vt){re.push(new _e(le.map));let Re,be=le.step.map(vt.slice(Ft));be&&Wt.maybeStep(be).doc&&(Re=Wt.mapping.maps[Wt.mapping.maps.length-1],he.push(new _e(Re,void 0,void 0,he.length+re.length))),Ft--,Re&&vt.appendMap(Re,Ft)}else Wt.maybeStep(le.step);return le.selection?(Vt=vt?le.selection.map(vt.slice(Ft)):le.selection,ee=new Ae(this.items.slice(0,gt).append(re.reverse().concat(he)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:ee,transform:Wt,selection:Vt}}addTransform($,at,gt,vt){let Ft=[],Wt=this.eventCount,Vt=this.items,ee=!vt&&Vt.length?Vt.get(Vt.length-1):null;for(let re=0;re<$.steps.length;re++){let be,le=$.steps[re].invert($.docs[re]),ce=new _e($.mapping.maps[re],le,at);(be=ee&&ee.merge(ce))&&(ce=be,re?Ft.pop():Vt=Vt.slice(0,Vt.length-1)),Ft.push(ce),at&&(Wt++,at=void 0),vt||(ee=ce)}let he=Wt-gt.depth;return he>ve&&(Vt=function(Y,$){let at;return Y.forEach((gt,vt)=>{if(gt.selection&&0==$--)return at=vt,!1}),Y.slice(at)}(Vt,he),Wt-=he),new Ae(Vt.append(Ft),Wt)}remapping($,at){let gt=new W.vs;return this.items.forEach((vt,Ft)=>{gt.appendMap(vt.map,null!=vt.mirrorOffset&&Ft-vt.mirrorOffset>=$?gt.maps.length-vt.mirrorOffset:void 0)},$,at),gt}addMaps($){return 0==this.eventCount?this:new Ae(this.items.append($.map(at=>new _e(at))),this.eventCount)}rebased($,at){if(!this.eventCount)return this;let gt=[],vt=Math.max(0,this.items.length-at),Ft=$.mapping,Wt=$.steps.length,Vt=this.eventCount;this.items.forEach(ce=>{ce.selection&&Vt--},vt);let ee=at;this.items.forEach(ce=>{let be=Ft.getMirror(--ee);if(null==be)return;Wt=Math.min(Wt,be);let Re=Ft.maps[be];if(ce.step){let en=$.steps[be].invert($.docs[be]),de=ce.selection&&ce.selection.map(Ft.slice(ee+1,be));de&&Vt++,gt.push(new _e(Re,en,de))}else gt.push(new _e(Re))},vt);let he=[];for(let ce=at;ce<Wt;ce++)he.push(new _e(Ft.maps[ce]));let re=this.items.slice(0,vt).append(he).append(gt),le=new Ae(re,Vt);return le.emptyItemCount()>500&&(le=le.compress(this.items.length-gt.length)),le}emptyItemCount(){let $=0;return this.items.forEach(at=>{at.step||$++}),$}compress($=this.items.length){let at=this.remapping(0,$),gt=at.maps.length,vt=[],Ft=0;return this.items.forEach((Wt,Vt)=>{if(Vt>=$)vt.push(Wt),Wt.selection&&Ft++;else if(Wt.step){let ee=Wt.step.map(at.slice(gt)),he=ee&&ee.getMap();if(gt--,he&&at.appendMap(he,gt),ee){let re=Wt.selection&&Wt.selection.map(at.slice(gt));re&&Ft++;let ce,le=new _e(he.invert(),ee,re),be=vt.length-1;(ce=vt.length&&vt[be].merge(le))?vt[be]=ce:vt.push(le)}}else Wt.map&&gt--},this.items.length,0),new Ae(fe.from(vt.reverse()),Ft)}}Ae.empty=new Ae(fe.empty,0);class _e{constructor($,at,gt,vt){this.map=$,this.step=at,this.selection=gt,this.mirrorOffset=vt}merge($){if(this.step&&$.step&&!$.selection){let at=$.step.merge(this.step);if(at)return new _e(at.getMap().invert(),at,this.selection)}}}class De{constructor($,at,gt,vt){this.done=$,this.undone=at,this.prevRanges=gt,this.prevTime=vt}}const ve=20;function Me(Y){let $=[];return Y.forEach((at,gt,vt,Ft)=>$.push(vt,Ft)),$}function ke(Y,$){if(!Y)return null;let at=[];for(let gt=0;gt<Y.length;gt+=2){let vt=$.map(Y[gt],1),Ft=$.map(Y[gt+1],-1);vt<=Ft&&at.push(vt,Ft)}return at}function Ye(Y,$,at,gt){let vt=Be($),Ft=Te.get($).spec.config,Wt=(gt?Y.undone:Y.done).popEvent($,vt);if(!Wt)return;let Vt=Wt.selection.resolve(Wt.transform.doc),ee=(gt?Y.done:Y.undone).addTransform(Wt.transform,$.selection.getBookmark(),Ft,vt),he=new De(gt?ee:Wt.remaining,gt?Wt.remaining:ee,null,0);at(Wt.transform.setSelection(Vt).setMeta(Te,{redo:gt,historyState:he}).scrollIntoView())}let Ue=!1,ze=null;function Be(Y){let $=Y.plugins;if(ze!=$){Ue=!1,ze=$;for(let at=0;at<$.length;at++)if($[at].spec.historyPreserveItems){Ue=!0;break}}return Ue}const Te=new It.H$("history"),me=new It.H$("closeHistory");function Ee(Y={}){return new It.Sy({key:Te,state:{init:()=>new De(Ae.empty,Ae.empty,null,0),apply:($,at,gt)=>function(Y,$,at,gt){let Ft,vt=at.getMeta(Te);if(vt)return vt.historyState;at.getMeta(me)&&(Y=new De(Y.done,Y.undone,null,0));let Wt=at.getMeta("appendedTransaction");if(0==at.steps.length)return Y;if(Wt&&Wt.getMeta(Te))return Wt.getMeta(Te).redo?new De(Y.done.addTransform(at,void 0,gt,Be($)),Y.undone,Me(at.mapping.maps[at.steps.length-1]),Y.prevTime):new De(Y.done,Y.undone.addTransform(at,void 0,gt,Be($)),null,Y.prevTime);if(!1===at.getMeta("addToHistory")||Wt&&!1===Wt.getMeta("addToHistory"))return(Ft=at.getMeta("rebased"))?new De(Y.done.rebased(at,Ft),Y.undone.rebased(at,Ft),ke(Y.prevRanges,at.mapping),Y.prevTime):new De(Y.done.addMaps(at.mapping.maps),Y.undone.addMaps(at.mapping.maps),ke(Y.prevRanges,at.mapping),Y.prevTime);{let Vt=0==Y.prevTime||!Wt&&(Y.prevTime<(at.time||0)-gt.newGroupDelay||!function(Y,$){if(!$)return!1;if(!Y.docChanged)return!0;let at=!1;return Y.mapping.maps[0].forEach((gt,vt)=>{for(let Ft=0;Ft<$.length;Ft+=2)gt<=$[Ft+1]&&vt>=$[Ft]&&(at=!0)}),at}(at,Y.prevRanges)),ee=Wt?ke(Y.prevRanges,at.mapping):Me(at.mapping.maps[at.steps.length-1]);return new De(Y.done.addTransform(at,Vt?$.selection.getBookmark():void 0,gt,Be($)),Ae.empty,ee,at.time)}}(at,gt,$,Y)},config:Y={depth:Y.depth||100,newGroupDelay:Y.newGroupDelay||500},props:{handleDOMEvents:{beforeinput($,at){let gt=at.inputType,vt="historyUndo"==gt?_t:"historyRedo"==gt?b:null;return!!vt&&(at.preventDefault(),vt($.state,$.dispatch))}}}})}const _t=(Y,$)=>{let at=Te.getState(Y);return!(!at||0==at.done.eventCount||($&&Ye(at,Y,$,!1),0))},b=(Y,$)=>{let at=Te.getState(Y);return!(!at||0==at.undone.eventCount||($&&Ye(at,Y,$,!0),0))},R=M.Extension.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:Y,dispatch:$})=>_t(Y,$),redo:()=>({state:Y,dispatch:$})=>b(Y,$)}),addProseMirrorPlugins(){return[Ee(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),V=M.Node.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:Y}){return["hr",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y)]},addCommands(){return{setHorizontalRule:()=>({chain:Y})=>Y().insertContent({type:this.name}).command(({tr:$,dispatch:at})=>{var gt;if(at){const{$to:vt}=$.selection,Ft=vt.end();if(vt.nodeAfter)$.setSelection(It.Bs.create($.doc,vt.pos));else{const Wt=null===(gt=vt.parent.type.contentMatch.defaultType)||void 0===gt?void 0:gt.create();Wt&&($.insert(Ft,Wt),$.setSelection(It.Bs.create($.doc,Ft)))}$.scrollIntoView()}return!0}).run()}},addInputRules(){return[(0,M.nodeInputRule)({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),H=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,Ot=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,wt=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,N=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,a=M.Mark.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:Y=>"normal"!==Y.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:Y}){return["em",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{setItalic:()=>({commands:Y})=>Y.setMark(this.name),toggleItalic:()=>({commands:Y})=>Y.toggleMark(this.name),unsetItalic:()=>({commands:Y})=>Y.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,M.markInputRule)({find:H,type:this.type}),(0,M.markInputRule)({find:wt,type:this.type})]},addPasteRules(){return[(0,M.markPasteRule)({find:Ot,type:this.type}),(0,M.markPasteRule)({find:N,type:this.type})]}}),p=M.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:Y}){return["li",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),E=M.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:Y}){return["li",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),D=M.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:Y=>!!Y.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:Y}){return["span",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:Y,commands:$})=>{const at=(0,M.getMarkAttributes)(Y,this.type);return!!Object.entries(at).some(([,vt])=>!!vt)||$.unsetMark(this.name)}}}}),k=/^(\d+)\.\s$/,F=M.Node.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:Y=>Y.hasAttribute("start")?parseInt(Y.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:Y}){const gt=Y,{start:$}=gt,at=jo(gt,["start"]);return 1===$?["ol",(0,M.mergeAttributes)(this.options.HTMLAttributes,at),0]:["ol",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{toggleOrderedList:()=>({commands:Y,chain:$})=>this.options.keepAttributes?$().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(E.name,this.editor.getAttributes(D.name)).run():Y.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let Y=(0,M.wrappingInputRule)({find:k,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(Y=(0,M.wrappingInputRule)({find:k,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(D.name),editor:this.editor})),[Y]}}),lt=M.Node.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:Y}){return["p",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{setParagraph:()=>({commands:Y})=>Y.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Rt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,qt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,te=M.Mark.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:Y=>!!Y.includes("line-through")&&{}}],renderHTML({HTMLAttributes:Y}){return["s",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{setStrike:()=>({commands:Y})=>Y.setMark(this.name),toggleStrike:()=>({commands:Y})=>Y.toggleMark(this.name),unsetStrike:()=>({commands:Y})=>Y.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,M.markInputRule)({find:Rt,type:this.type})]},addPasteRules(){return[(0,M.markPasteRule)({find:qt,type:this.type})]}}),we=M.Node.create({name:"text",group:"inline"}),Je=M.Extension.create({name:"starterKit",addExtensions(){var Y,$,at,gt,vt,Ft,Wt,Vt,ee,he,re,le,ce,be,Re,en,de,fn,Cn,vn,nn,mn,ln,pn,an,$e,on,Ge,Xe,_,C,m,f,v,x,w;const K=[];return!1!==(null===(Y=this.options)||void 0===Y?void 0:Y.blockquote)&&K.push(y.configure(null===($=this.options)||void 0===$?void 0:$.blockquote)),!1!==(null===(at=this.options)||void 0===at?void 0:at.bold)&&K.push(X.configure(null===(gt=this.options)||void 0===gt?void 0:gt.bold)),!1!==(null===(vt=this.options)||void 0===vt?void 0:vt.bulletList)&&K.push(et.configure(null===(Ft=this.options)||void 0===Ft?void 0:Ft.bulletList)),!1!==(null===(Wt=this.options)||void 0===Wt?void 0:Wt.code)&&K.push(bt.configure(null===(Vt=this.options)||void 0===Vt?void 0:Vt.code)),!1!==(null===(ee=this.options)||void 0===ee?void 0:ee.codeBlock)&&K.push(ht.configure(null===(he=this.options)||void 0===he?void 0:he.codeBlock)),!1!==(null===(re=this.options)||void 0===re?void 0:re.document)&&K.push(q.configure(null===(le=this.options)||void 0===le?void 0:le.document)),!1!==(null===(ce=this.options)||void 0===ce?void 0:ce.dropcursor)&&K.push(At.configure(null===(be=this.options)||void 0===be?void 0:be.dropcursor)),!1!==(null===(Re=this.options)||void 0===Re?void 0:Re.gapcursor)&&K.push(kt.configure(null===(en=this.options)||void 0===en?void 0:en.gapcursor)),!1!==(null===(de=this.options)||void 0===de?void 0:de.hardBreak)&&K.push($t.configure(null===(fn=this.options)||void 0===fn?void 0:fn.hardBreak)),!1!==(null===(Cn=this.options)||void 0===Cn?void 0:Cn.heading)&&K.push(Yt.configure(null===(vn=this.options)||void 0===vn?void 0:vn.heading)),!1!==(null===(nn=this.options)||void 0===nn?void 0:nn.history)&&K.push(R.configure(null===(mn=this.options)||void 0===mn?void 0:mn.history)),!1!==(null===(ln=this.options)||void 0===ln?void 0:ln.horizontalRule)&&K.push(V.configure(null===(pn=this.options)||void 0===pn?void 0:pn.horizontalRule)),!1!==(null===(an=this.options)||void 0===an?void 0:an.italic)&&K.push(a.configure(null===($e=this.options)||void 0===$e?void 0:$e.italic)),!1!==(null===(on=this.options)||void 0===on?void 0:on.listItem)&&K.push(p.configure(null===(Ge=this.options)||void 0===Ge?void 0:Ge.listItem)),!1!==(null===(Xe=this.options)||void 0===Xe?void 0:Xe.orderedList)&&K.push(F.configure(null===(_=this.options)||void 0===_?void 0:_.orderedList)),!1!==(null===(C=this.options)||void 0===C?void 0:C.paragraph)&&K.push(lt.configure(null===(m=this.options)||void 0===m?void 0:m.paragraph)),!1!==(null===(f=this.options)||void 0===f?void 0:f.strike)&&K.push(te.configure(null===(v=this.options)||void 0===v?void 0:v.strike)),!1!==(null===(x=this.options)||void 0===x?void 0:x.text)&&K.push(we.configure(null===(w=this.options)||void 0===w?void 0:w.text)),K}})},51919:(jt,Et,c)=>{c.r(Et),c.d(Et,{TableCellBackground:()=>l});const l=c(12867).Extension.create({addGlobalAttributes:()=>[{types:["tableCell","tableHeader"],attributes:{background:{default:null,renderHTML:({background:y})=>y?{style:`background: ${y}`}:null,parseHTML:({style:y})=>y.background,keepOnSplit:!1}}}],addCommands:()=>({setCellBackground:y=>({chain:P})=>P().updateAttributes("tableCell",{background:y}).updateAttributes("tableHeader",{background:y}).run(),unsetCellBackground:()=>({chain:y})=>y().updateAttributes("tableCell",{background:null}).updateAttributes("tableHeader",{background:null}).run()})})},86624:(jt,Et,c)=>{c.r(Et),c.d(Et,{TuiTable:()=>Xe});var B,X,M=c(12867),l=c(62463),y=c(77346),P=c(43594),g=c(70768),it=c(38480);if("undefined"!=typeof WeakMap){let _=new WeakMap;B=C=>_.get(C),X=(C,m)=>(_.set(C,m),m)}else{const _=[],C=10;let m=0;B=f=>{for(let v=0;v<_.length;v+=2)if(_[v]==f)return _[v+1]},X=(f,v)=>(m==C&&(m=0),_[m++]=f,_[m++]=v)}var tt=class{constructor(_,C,m,f){this.width=_,this.height=C,this.map=m,this.problems=f}findCell(_){for(let C=0;C<this.map.length;C++){const m=this.map[C];if(m!=_)continue;const f=C%this.width,v=C/this.width|0;let x=f+1,w=v+1;for(let K=1;x<this.width&&this.map[C+K]==m;K++)x++;for(let K=1;w<this.height&&this.map[C+this.width*K]==m;K++)w++;return{left:f,top:v,right:x,bottom:w}}throw new RangeError(`No cell with offset ${_} found`)}colCount(_){for(let C=0;C<this.map.length;C++)if(this.map[C]==_)return C%this.width;throw new RangeError(`No cell with offset ${_} found`)}nextCell(_,C,m){const{left:f,right:v,top:x,bottom:w}=this.findCell(_);return"horiz"==C?(m<0?0==f:v==this.width)?null:this.map[x*this.width+(m<0?f-1:v)]:(m<0?0==x:w==this.height)?null:this.map[f+this.width*(m<0?x-1:w)]}rectBetween(_,C){const{left:m,right:f,top:v,bottom:x}=this.findCell(_),{left:w,right:K,top:z,bottom:G}=this.findCell(C);return{left:Math.min(m,w),top:Math.min(v,z),right:Math.max(f,K),bottom:Math.max(x,G)}}cellsInRect(_){const C=[],m={};for(let f=_.top;f<_.bottom;f++)for(let v=_.left;v<_.right;v++){const x=f*this.width+v,w=this.map[x];m[w]||(m[w]=!0,!(v==_.left&&v&&this.map[x-1]==w||f==_.top&&f&&this.map[x-this.width]==w)&&C.push(w))}return C}positionAt(_,C,m){for(let f=0,v=0;;f++){const x=v+m.child(f).nodeSize;if(f==_){let w=C+_*this.width;const K=(_+1)*this.width;for(;w<K&&this.map[w]<v;)w++;return w==K?x-1:this.map[w]}v=x}}static get(_){return B(_)||X(_,function(_){if("table"!=_.type.spec.tableRole)throw new RangeError("Not a table node: "+_.type.name);const C=function(_){let C=-1,m=!1;for(let f=0;f<_.childCount;f++){const v=_.child(f);let x=0;if(m)for(let w=0;w<f;w++){const K=_.child(w);for(let z=0;z<K.childCount;z++){const G=K.child(z);w+G.attrs.rowspan>f&&(x+=G.attrs.colspan)}}for(let w=0;w<v.childCount;w++){const K=v.child(w);x+=K.attrs.colspan,K.attrs.rowspan>1&&(m=!0)}-1==C?C=x:C!=x&&(C=Math.max(C,x))}return C}(_),m=_.childCount,f=[];let v=0,x=null;const w=[];for(let G=0,Mt=C*m;G<Mt;G++)f[G]=0;for(let G=0,Mt=0;G<m;G++){const xt=_.child(G);Mt++;for(let Qt=0;;Qt++){for(;v<f.length&&0!=f[v];)v++;if(Qt==xt.childCount)break;const se=xt.child(Qt),{colspan:ie,rowspan:Oe,colwidth:rn}=se.attrs;for(let je=0;je<Oe;je++){if(je+G>=m){(x||(x=[])).push({type:"overlong_rowspan",pos:Mt,n:Oe-je});break}const Ce=v+je*C;for(let Pe=0;Pe<ie;Pe++){0==f[Ce+Pe]?f[Ce+Pe]=Mt:(x||(x=[])).push({type:"collision",row:G,pos:Mt,n:ie-Pe});const gn=rn&&rn[Pe];if(gn){const cn=(Ce+Pe)%C*2,pe=w[cn];null==pe||pe!=gn&&1==w[cn+1]?(w[cn]=gn,w[cn+1]=1):pe==gn&&w[cn+1]++}}}v+=ie,Mt+=se.nodeSize}const Nt=(G+1)*C;let Ut=0;for(;v<Nt;)0==f[v++]&&Ut++;Ut&&(x||(x=[])).push({type:"missing",row:G,n:Ut}),Mt++}const K=new tt(C,m,f,x);let z=!1;for(let G=0;!z&&G<w.length;G+=2)null!=w[G]&&w[G+1]<m&&(z=!0);return z&&function(_,C,m){_.problems||(_.problems=[]);const f={};for(let v=0;v<_.map.length;v++){const x=_.map[v];if(f[x])continue;f[x]=!0;const w=m.nodeAt(x);if(!w)throw new RangeError(`No cell with offset ${x} found`);let K=null;const z=w.attrs;for(let G=0;G<z.colspan;G++){const xt=C[(v+G)%_.width*2];null!=xt&&(!z.colwidth||z.colwidth[G]!=xt)&&((K||(K=Tt(z)))[G]=xt)}K&&_.problems.unshift({type:"colwidth mismatch",pos:x,colwidth:K})}}(K,w,_),K}(_))}};function Tt(_){if(_.colwidth)return _.colwidth.slice();const C=[];for(let m=0;m<_.colspan;m++)C.push(0);return C}function Pt(_){let C=_.cached.tableNodeTypes;if(!C){C=_.cached.tableNodeTypes={};for(const m in _.nodes){const f=_.nodes[m],v=f.spec.tableRole;v&&(C[v]=f)}}return C}var Dt=new l.H$("selectingCells");function ht(_){for(let C=_.depth-1;C>0;C--)if("row"==_.node(C).type.spec.tableRole)return _.node(0).resolve(_.before(C+1));return null}function W(_){const C=_.selection.$head;for(let m=C.depth;m>0;m--)if("row"==C.node(m).type.spec.tableRole)return!0;return!1}function mt(_){const C=_.selection;if("$anchorCell"in C&&C.$anchorCell)return C.$anchorCell.pos>C.$headCell.pos?C.$anchorCell:C.$headCell;if("node"in C&&C.node&&"cell"==C.node.type.spec.tableRole)return C.$anchor;const m=ht(C.$head)||function(_){for(let C=_.nodeAfter,m=_.pos;C;C=C.firstChild,m++){const f=C.type.spec.tableRole;if("cell"==f||"header_cell"==f)return _.doc.resolve(m)}for(let C=_.nodeBefore,m=_.pos;C;C=C.lastChild,m--){const f=C.type.spec.tableRole;if("cell"==f||"header_cell"==f)return _.doc.resolve(m-C.nodeSize)}}(C.$head);if(m)return m;throw new RangeError(`No cell found around position ${C.head}`)}function At(_){return"row"==_.parent.type.spec.tableRole&&!!_.nodeAfter}function yt(_,C){return _.depth==C.depth&&_.pos>=C.start(-1)&&_.pos<=C.end(-1)}function Kt(_,C,m){const f=_.node(-1),v=tt.get(f),x=_.start(-1),w=v.nextCell(_.pos-x,C,m);return null==w?null:_.node(0).resolve(x+w)}function pt(_,C,m=1){const f=ge(Gt({},_),{colspan:_.colspan-m});return f.colwidth&&(f.colwidth=f.colwidth.slice(),f.colwidth.splice(C,m),f.colwidth.some(v=>v>0)||(f.colwidth=null)),f}function L(_,C,m=1){const f=ge(Gt({},_),{colspan:_.colspan+m});if(f.colwidth){f.colwidth=f.colwidth.slice();for(let v=0;v<m;v++)f.colwidth.splice(C,0,0)}return f}var ct=class extends l.Y1{constructor(_,C=_){const m=_.node(-1),f=tt.get(m),v=_.start(-1),x=f.rectBetween(_.pos-v,C.pos-v),w=_.node(0),K=f.cellsInRect(x).filter(G=>G!=C.pos-v);K.unshift(C.pos-v);const z=K.map(G=>{const Mt=m.nodeAt(G);if(!Mt)throw RangeError(`No cell with offset ${G} found`);const xt=v+G+1;return new l.xm(w.resolve(xt),w.resolve(xt+Mt.content.size))});super(z[0].$from,z[0].$to,z),this.$anchorCell=_,this.$headCell=C}map(_,C){const m=_.resolve(C.map(this.$anchorCell.pos)),f=_.resolve(C.map(this.$headCell.pos));if(At(m)&&At(f)&&yt(m,f)){const v=this.$anchorCell.node(-1)!=m.node(-1);return v&&this.isRowSelection()?ct.rowSelection(m,f):v&&this.isColSelection()?ct.colSelection(m,f):new ct(m,f)}return l.Bs.between(m,f)}content(){const _=this.$anchorCell.node(-1),C=tt.get(_),m=this.$anchorCell.start(-1),f=C.rectBetween(this.$anchorCell.pos-m,this.$headCell.pos-m),v={},x=[];for(let K=f.top;K<f.bottom;K++){const z=[];for(let G=K*C.width+f.left,Mt=f.left;Mt<f.right;Mt++,G++){const xt=C.map[G];if(v[xt])continue;v[xt]=!0;const Nt=C.findCell(xt);let Ut=_.nodeAt(xt);if(!Ut)throw RangeError(`No cell with offset ${xt} found`);const Qt=f.left-Nt.left,se=Nt.right-f.right;if(Qt>0||se>0){let ie=Ut.attrs;if(Qt>0&&(ie=pt(ie,0,Qt)),se>0&&(ie=pt(ie,ie.colspan-se,se)),Nt.left<f.left){if(Ut=Ut.type.createAndFill(ie),!Ut)throw RangeError(`Could not create cell with attrs ${JSON.stringify(ie)}`)}else Ut=Ut.type.create(ie,Ut.content)}if(Nt.top<f.top||Nt.bottom>f.bottom){const ie=ge(Gt({},Ut.attrs),{rowspan:Math.min(Nt.bottom,f.bottom)-Math.max(Nt.top,f.top)});Ut=Nt.top<f.top?Ut.type.createAndFill(ie):Ut.type.create(ie,Ut.content)}z.push(Ut)}x.push(_.child(K).copy(y.HY.from(z)))}const w=this.isColSelection()&&this.isRowSelection()?_:x;return new y.p2(y.HY.from(w),1,1)}replace(_,C=y.p2.empty){const m=_.steps.length,f=this.ranges;for(let x=0;x<f.length;x++){const{$from:w,$to:K}=f[x],z=_.mapping.slice(m);_.replace(z.map(w.pos),z.map(K.pos),x?y.p2.empty:C)}const v=l.Y1.findFrom(_.doc.resolve(_.mapping.slice(m).map(this.to)),-1);v&&_.setSelection(v)}replaceWith(_,C){this.replace(_,new y.p2(y.HY.from(C),0,0))}forEachCell(_){const C=this.$anchorCell.node(-1),m=tt.get(C),f=this.$anchorCell.start(-1),v=m.cellsInRect(m.rectBetween(this.$anchorCell.pos-f,this.$headCell.pos-f));for(let x=0;x<v.length;x++)_(C.nodeAt(v[x]),f+v[x])}isColSelection(){const _=this.$anchorCell.index(-1),C=this.$headCell.index(-1);return!(Math.min(_,C)>0)&&Math.max(_+this.$anchorCell.nodeAfter.attrs.rowspan,C+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(_,C=_){const m=_.node(-1),f=tt.get(m),v=_.start(-1),x=f.findCell(_.pos-v),w=f.findCell(C.pos-v),K=_.node(0);return x.top<=w.top?(x.top>0&&(_=K.resolve(v+f.map[x.left])),w.bottom<f.height&&(C=K.resolve(v+f.map[f.width*(f.height-1)+w.right-1]))):(w.top>0&&(C=K.resolve(v+f.map[w.left])),x.bottom<f.height&&(_=K.resolve(v+f.map[f.width*(f.height-1)+x.right-1]))),new ct(_,C)}isRowSelection(){const _=this.$anchorCell.node(-1),C=tt.get(_),m=this.$anchorCell.start(-1),f=C.colCount(this.$anchorCell.pos-m),v=C.colCount(this.$headCell.pos-m);return!(Math.min(f,v)>0)&&Math.max(f+this.$anchorCell.nodeAfter.attrs.colspan,v+this.$headCell.nodeAfter.attrs.colspan)==C.width}eq(_){return _ instanceof ct&&_.$anchorCell.pos==this.$anchorCell.pos&&_.$headCell.pos==this.$headCell.pos}static rowSelection(_,C=_){const m=_.node(-1),f=tt.get(m),v=_.start(-1),x=f.findCell(_.pos-v),w=f.findCell(C.pos-v),K=_.node(0);return x.left<=w.left?(x.left>0&&(_=K.resolve(v+f.map[x.top*f.width])),w.right<f.width&&(C=K.resolve(v+f.map[f.width*(w.top+1)-1]))):(w.left>0&&(C=K.resolve(v+f.map[w.top*f.width])),x.right<f.width&&(_=K.resolve(v+f.map[f.width*(x.top+1)-1]))),new ct(_,C)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(_,C){return new ct(_.resolve(C.anchor),_.resolve(C.head))}static create(_,C,m=C){return new ct(_.resolve(C),_.resolve(m))}getBookmark(){return new st(this.$anchorCell.pos,this.$headCell.pos)}};ct.prototype.visible=!1,l.Y1.jsonID("cell",ct);var st=class{constructor(_,C){this.anchor=_,this.head=C}map(_){return new st(_.map(this.anchor),_.map(this.head))}resolve(_){const C=_.resolve(this.anchor),m=_.resolve(this.head);return"row"==C.parent.type.spec.tableRole&&"row"==m.parent.type.spec.tableRole&&C.index()<C.parent.childCount&&m.index()<m.parent.childCount&&yt(C,m)?new ct(C,m):l.Y1.near(m,1)}};function J(_){if(!(_.selection instanceof ct))return null;const C=[];return _.selection.forEachCell((m,f)=>{C.push(P.p.node(f,f+m.nodeSize,{class:"selectedCell"}))}),P.EH.create(_.doc,C)}var $t=new l.H$("fix-tables");function Yt(_,C,m,f){const v=_.childCount,x=C.childCount;t:for(let w=0,K=0;w<x;w++){const z=C.child(w);for(let G=K,Mt=Math.min(v,w+3);G<Mt;G++)if(_.child(G)==z){K=G+1,m+=z.nodeSize;continue t}f(z,m),K<v&&_.child(K).sameMarkup(z)?Yt(_.child(K),z,m+1,f):z.nodesBetween(0,z.content.size,f,m+1),m+=z.nodeSize}}function ne(_,C){let m;const f=(v,x)=>{"table"==v.type.spec.tableRole&&(m=function(_,C,m,f){const v=tt.get(C);if(!v.problems)return f;f||(f=_.tr);const x=[];for(let z=0;z<v.height;z++)x.push(0);for(let z=0;z<v.problems.length;z++){const G=v.problems[z];if("collision"==G.type){const Mt=C.nodeAt(G.pos);if(!Mt)continue;const xt=Mt.attrs;for(let Nt=0;Nt<xt.rowspan;Nt++)x[G.row+Nt]+=G.n;f.setNodeMarkup(f.mapping.map(m+1+G.pos),null,pt(xt,xt.colspan-G.n,G.n))}else if("missing"==G.type)x[G.row]+=G.n;else if("overlong_rowspan"==G.type){const Mt=C.nodeAt(G.pos);if(!Mt)continue;f.setNodeMarkup(f.mapping.map(m+1+G.pos),null,ge(Gt({},Mt.attrs),{rowspan:Mt.attrs.rowspan-G.n}))}else if("colwidth mismatch"==G.type){const Mt=C.nodeAt(G.pos);if(!Mt)continue;f.setNodeMarkup(f.mapping.map(m+1+G.pos),null,ge(Gt({},Mt.attrs),{colwidth:G.colwidth}))}}let w,K;for(let z=0;z<x.length;z++)x[z]&&(null==w&&(w=z),K=z);for(let z=0,G=m+1;z<v.height;z++){const Mt=C.child(z),xt=G+Mt.nodeSize,Nt=x[z];if(Nt>0){let Ut="cell";Mt.firstChild&&(Ut=Mt.firstChild.type.spec.tableRole);const Qt=[];for(let ie=0;ie<Nt;ie++){const Oe=Pt(_.schema)[Ut].createAndFill();Oe&&Qt.push(Oe)}f.insert(f.mapping.map(0!=z&&w!=z-1||K!=z?xt-1:G+1),Qt)}G=xt}return f.setMeta($t,{fixTables:!0})}(_,v,x,m))};return C?C.doc!=_.doc&&Yt(C.doc,_.doc,0,f):_.doc.descendants(f),m}function xe(_,C){const m=_.createAndFill();return new it.wx(m).replace(0,m.content.size,C).doc}function Ae(_,C,m,f,v,x,w,K){if(0==w||w==C.height)return!1;let z=!1;for(let G=v;G<x;G++){const Mt=w*C.width+G,xt=C.map[Mt];if(C.map[Mt-C.width]==xt){z=!0;const Nt=m.nodeAt(xt),{top:Ut,left:Qt}=C.findCell(xt);_.setNodeMarkup(_.mapping.slice(K).map(xt+f),null,ge(Gt({},Nt.attrs),{rowspan:w-Ut})),_.insert(_.mapping.slice(K).map(C.positionAt(w,Qt,m)),Nt.type.createAndFill(ge(Gt({},Nt.attrs),{rowspan:Ut+Nt.attrs.rowspan-w}))),G+=Nt.attrs.colspan-1}}return z}function Ne(_,C,m,f,v,x,w,K){if(0==w||w==C.width)return!1;let z=!1;for(let G=v;G<x;G++){const Mt=G*C.width+w,xt=C.map[Mt];if(C.map[Mt-1]==xt){z=!0;const Nt=m.nodeAt(xt),Ut=C.colCount(xt),Qt=_.mapping.slice(K).map(xt+f);_.setNodeMarkup(Qt,null,pt(Nt.attrs,w-Ut,Nt.attrs.colspan-(w-Ut))),_.insert(Qt+Nt.nodeSize,Nt.type.createAndFill(pt(Nt.attrs,0,w-Ut))),G+=Nt.attrs.rowspan-1}}return z}function _e(_,C,m,f,v){let x=m?_.doc.nodeAt(m-1):_.doc;if(!x)throw new Error("No table found");let w=tt.get(x);const{top:K,left:z}=f,G=z+v.width,Mt=K+v.height,xt=_.tr;let Nt=0;function Ut(){if(x=m?xt.doc.nodeAt(m-1):xt.doc,!x)throw new Error("No table found");w=tt.get(x),Nt=xt.mapping.maps.length}(function(_,C,m,f,v,x,w){const z=Pt(_.doc.type.schema);let G,Mt;if(v>C.width)for(let xt=0,Nt=0;xt<C.height;xt++){const Ut=m.child(xt);Nt+=Ut.nodeSize;const Qt=[];let se;se=null==Ut.lastChild||Ut.lastChild.type==z.cell?G||(G=z.cell.createAndFill()):Mt||(Mt=z.header_cell.createAndFill());for(let ie=C.width;ie<v;ie++)Qt.push(se);_.insert(_.mapping.slice(w).map(Nt-1+f),Qt)}if(x>C.height){const xt=[];for(let Qt=0,se=(C.height-1)*C.width;Qt<Math.max(C.width,v);Qt++){const ie=!(Qt>=C.width)&&m.nodeAt(C.map[se+Qt]).type==z.header_cell;xt.push(ie?Mt||(Mt=z.header_cell.createAndFill()):G||(G=z.cell.createAndFill()))}const Nt=z.row.create(null,y.HY.from(xt)),Ut=[];for(let Qt=C.height;Qt<x;Qt++)Ut.push(Nt);_.insert(_.mapping.slice(w).map(f+m.nodeSize-2),Ut)}return!(!G&&!Mt)})(xt,w,x,m,G,Mt,Nt)&&Ut(),Ae(xt,w,x,m,z,G,K,Nt)&&Ut(),Ae(xt,w,x,m,z,G,Mt,Nt)&&Ut(),Ne(xt,w,x,m,K,Mt,z,Nt)&&Ut(),Ne(xt,w,x,m,K,Mt,G,Nt)&&Ut();for(let Qt=K;Qt<Mt;Qt++){const se=w.positionAt(Qt,z,x),ie=w.positionAt(Qt,G,x);xt.replace(xt.mapping.slice(Nt).map(se+m),xt.mapping.slice(Nt).map(ie+m),new y.p2(v.rows[Qt-K],0,0))}Ut(),xt.setSelection(new ct(xt.doc.resolve(m+w.positionAt(K,z,x)),xt.doc.resolve(m+w.positionAt(Mt-1,G-1,x)))),C(xt)}var De=(0,g.$)({ArrowLeft:Se("horiz",-1),ArrowRight:Se("horiz",1),ArrowUp:Se("vert",-1),ArrowDown:Se("vert",1),"Shift-ArrowLeft":He("horiz",-1),"Shift-ArrowRight":He("horiz",1),"Shift-ArrowUp":He("vert",-1),"Shift-ArrowDown":He("vert",1),Backspace:Me,"Mod-Backspace":Me,Delete:Me,"Mod-Delete":Me});function ve(_,C,m){return!m.eq(_.selection)&&(C&&C(_.tr.setSelection(m).scrollIntoView()),!0)}function Se(_,C){return(m,f,v)=>{if(!v)return!1;const x=m.selection;if(x instanceof ct)return ve(m,f,l.Y1.near(x.$headCell,C));if("horiz"!=_&&!x.empty)return!1;const w=ze(v,_,C);if(null==w)return!1;if("horiz"==_)return ve(m,f,l.Y1.near(m.doc.resolve(x.head+C),C));{const K=m.doc.resolve(w),z=Kt(K,_,C);let G;return G=z?l.Y1.near(z,1):C<0?l.Y1.near(m.doc.resolve(K.before(-1)),-1):l.Y1.near(m.doc.resolve(K.after(-1)),1),ve(m,f,G)}}}function He(_,C){return(m,f,v)=>{if(!v)return!1;const x=m.selection;let w;if(x instanceof ct)w=x;else{const z=ze(v,_,C);if(null==z)return!1;w=new ct(m.doc.resolve(z))}const K=Kt(w.$headCell,_,C);return!!K&&ve(m,f,new ct(w.$anchorCell,K))}}function Me(_,C){const m=_.selection;if(!(m instanceof ct))return!1;if(C){const f=_.tr,v=Pt(_.schema).cell.createAndFill().content;m.forEachCell((x,w)=>{x.content.eq(v)||f.replace(f.mapping.map(w+1),f.mapping.map(w+x.nodeSize-1),new y.p2(v,0,0))}),f.docChanged&&C(f)}return!0}function ke(_,C){const f=ht(_.state.doc.resolve(C));return!!f&&(_.dispatch(_.state.tr.setSelection(new ct(f))),!0)}function Ye(_,C,m){if(!W(_.state))return!1;let f=function(_){if(!_.size)return null;let{content:C,openStart:m,openEnd:f}=_;for(;1==C.childCount&&(m>0&&f>0||"table"==C.child(0).type.spec.tableRole);)m--,f--,C=C.child(0).content;const v=C.child(0),x=v.type.spec.tableRole,w=v.type.schema,K=[];if("row"==x)for(let z=0;z<C.childCount;z++){let G=C.child(z).content;const Mt=z?0:Math.max(0,m-1),xt=z<C.childCount-1?0:Math.max(0,f-1);(Mt||xt)&&(G=xe(Pt(w).row,new y.p2(G,Mt,xt)).content),K.push(G)}else{if("cell"!=x&&"header_cell"!=x)return null;K.push(m||f?xe(Pt(w).row,new y.p2(C,m,f)).content:C)}return function(_,C){const m=[];for(let v=0;v<C.length;v++){const x=C[v];for(let w=x.childCount-1;w>=0;w--){const{rowspan:K,colspan:z}=x.child(w).attrs;for(let G=v;G<v+K;G++)m[G]=(m[G]||0)+z}}let f=0;for(let v=0;v<m.length;v++)f=Math.max(f,m[v]);for(let v=0;v<m.length;v++)if(v>=C.length&&C.push(y.HY.empty),m[v]<f){const x=Pt(_).cell.createAndFill(),w=[];for(let K=m[v];K<f;K++)w.push(x);C[v]=C[v].append(y.HY.from(w))}return{height:C.length,width:f,rows:C}}(w,K)}(m);const v=_.state.selection;if(v instanceof ct){f||(f={width:1,height:1,rows:[y.HY.from(xe(Pt(_.state.schema).cell,m))]});const x=v.$anchorCell.node(-1),w=v.$anchorCell.start(-1),K=tt.get(x).rectBetween(v.$anchorCell.pos-w,v.$headCell.pos-w);return f=function({width:_,height:C,rows:m},f,v){if(_!=f){const x=[],w=[];for(let K=0;K<m.length;K++){const z=m[K],G=[];for(let Mt=x[K]||0,xt=0;Mt<f;xt++){let Nt=z.child(xt%z.childCount);Mt+Nt.attrs.colspan>f&&(Nt=Nt.type.createChecked(pt(Nt.attrs,Nt.attrs.colspan,Mt+Nt.attrs.colspan-f),Nt.content)),G.push(Nt),Mt+=Nt.attrs.colspan;for(let Ut=1;Ut<Nt.attrs.rowspan;Ut++)x[K+Ut]=(x[K+Ut]||0)+Nt.attrs.colspan}w.push(y.HY.from(G))}m=w,_=f}if(C!=v){const x=[];for(let w=0,K=0;w<v;w++,K++){const z=[],G=m[K%C];for(let Mt=0;Mt<G.childCount;Mt++){let xt=G.child(Mt);w+xt.attrs.rowspan>v&&(xt=xt.type.create(ge(Gt({},xt.attrs),{rowspan:Math.max(1,v-xt.attrs.rowspan)}),xt.content)),z.push(xt)}x.push(y.HY.from(z))}m=x,C=v}return{width:_,height:C,rows:m}}(f,K.right-K.left,K.bottom-K.top),_e(_.state,_.dispatch,w,K,f),!0}if(f){const x=mt(_.state),w=x.start(-1);return _e(_.state,_.dispatch,w,tt.get(x.node(-1)).findCell(x.pos-w),f),!0}return!1}function Ue(_,C){var m;if(C.ctrlKey||C.metaKey)return;const f=Be(_,C.target);let v;if(C.shiftKey&&_.state.selection instanceof ct)x(_.state.selection.$anchorCell,C),C.preventDefault();else if(C.shiftKey&&f&&null!=(v=ht(_.state.selection.$anchor))&&(null==(m=We(_,C))?void 0:m.pos)!=v.pos)x(v,C),C.preventDefault();else if(!f)return;function x(z,G){let Mt=We(_,G);const xt=null==Dt.getState(_.state);if(!Mt||!yt(z,Mt)){if(!xt)return;Mt=z}const Nt=new ct(z,Mt);if(xt||!_.state.selection.eq(Nt)){const Ut=_.state.tr.setSelection(Nt);xt&&Ut.setMeta(Dt,z.pos),_.dispatch(Ut)}}function w(){_.root.removeEventListener("mouseup",w),_.root.removeEventListener("dragstart",w),_.root.removeEventListener("mousemove",K),null!=Dt.getState(_.state)&&_.dispatch(_.state.tr.setMeta(Dt,-1))}function K(z){const G=z,Mt=Dt.getState(_.state);let xt;if(null!=Mt)xt=_.state.doc.resolve(Mt);else if(Be(_,G.target)!=f&&(xt=We(_,C),!xt))return w();xt&&x(xt,G)}_.root.addEventListener("mouseup",w),_.root.addEventListener("dragstart",w),_.root.addEventListener("mousemove",K)}function ze(_,C,m){if(!(_.state.selection instanceof l.Bs))return null;const{$head:f}=_.state.selection;for(let v=f.depth-1;v>=0;v--){const x=f.node(v);if((m<0?f.index(v):f.indexAfter(v))!=(m<0?0:x.childCount))return null;if("cell"==x.type.spec.tableRole||"header_cell"==x.type.spec.tableRole){const K=f.before(v);return _.endOfTextblock("vert"==C?m>0?"down":"up":m>0?"right":"left")?K:null}}return null}function Be(_,C){for(;C&&C!=_.dom;C=C.parentNode)if("TD"==C.nodeName||"TH"==C.nodeName)return C;return null}function We(_,C){const m=_.posAtCoords({left:C.clientX,top:C.clientY});return m&&m?ht(_.state.doc.resolve(m.pos)):null}var Te=class{constructor(_,C){this.node=_,this.cellMinWidth=C,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),me(_,this.colgroup,this.table,C),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(_){return _.type==this.node.type&&(this.node=_,me(_,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(_){return"attributes"==_.type&&(_.target==this.table||this.colgroup.contains(_.target))}};function me(_,C,m,f,v,x){var w;let K=0,z=!0,G=C.firstChild;const Mt=_.firstChild;if(Mt){for(let xt=0,Nt=0;xt<Mt.childCount;xt++){const{colspan:Ut,colwidth:Qt}=Mt.child(xt).attrs;for(let se=0;se<Ut;se++,Nt++){const ie=v==Nt?x:Qt&&Qt[se],Oe=ie?ie+"px":"";K+=ie||f,ie||(z=!1),G?(G.style.width!=Oe&&(G.style.width=Oe),G=G.nextSibling):C.appendChild(document.createElement("col")).style.width=Oe}}for(;G;){const xt=G.nextSibling;null==(w=G.parentNode)||w.removeChild(G),G=xt}z?(m.style.width=K+"px",m.style.minWidth=""):(m.style.width="",m.style.minWidth=K+"px")}}var Ee=new l.H$("tableColumnResizing");function _t({handleWidth:_=5,cellMinWidth:C=25,View:m=Te,lastColumnResizable:f=!0}={}){const v=new l.Sy({key:Ee,state:{init:(x,w)=>(v.spec.props.nodeViews[Pt(w.schema).table.name]=(K,z)=>new m(K,C,z),new b(-1,!1)),apply:(x,w)=>w.apply(x)},props:{attributes:x=>{const w=Ee.getState(x);return w&&w.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(x,w)=>{!function(_,C,m,f,v){const x=Ee.getState(_.state);if(x&&!x.dragging){const w=function(_){for(;_&&"TD"!=_.nodeName&&"TH"!=_.nodeName;)_=_.classList&&_.classList.contains("ProseMirror")?null:_.parentNode;return _}(C.target);let K=-1;if(w){const{left:z,right:G}=w.getBoundingClientRect();C.clientX-z<=m?K=Ot(_,C,"left"):G-C.clientX<=m&&(K=Ot(_,C,"right"))}if(K!=x.activeHandle){if(!v&&-1!==K){const z=_.state.doc.resolve(K),G=z.node(-1),Mt=tt.get(G),xt=z.start(-1);if(Mt.colCount(z.pos-xt)+z.nodeAfter.attrs.colspan-1==Mt.width-1)return}N(_,K)}}}(x,w,_,0,f)},mouseleave:x=>{!function(_){const C=Ee.getState(_.state);C&&C.activeHandle>-1&&!C.dragging&&N(_,-1)}(x)},mousedown:(x,w)=>{!function(_,C,m){const f=Ee.getState(_.state);if(!f||-1==f.activeHandle||f.dragging)return!1;const v=_.state.doc.nodeAt(f.activeHandle),x=function(_,C,{colspan:m,colwidth:f}){const v=f&&f[f.length-1];if(v)return v;const x=_.domAtPos(C);let K=x.node.childNodes[x.offset].offsetWidth,z=m;if(f)for(let G=0;G<m;G++)f[G]&&(K-=f[G],z--);return K/z}(_,f.activeHandle,v.attrs);function w(z){window.removeEventListener("mouseup",w),window.removeEventListener("mousemove",K);const G=Ee.getState(_.state);(null==G?void 0:G.dragging)&&(function(_,C,m){const f=_.state.doc.resolve(C),v=f.node(-1),x=tt.get(v),w=f.start(-1),K=x.colCount(f.pos-w)+f.nodeAfter.attrs.colspan-1,z=_.state.tr;for(let G=0;G<x.height;G++){const Mt=G*x.width+K;if(G&&x.map[Mt]==x.map[Mt-x.width])continue;const xt=x.map[Mt],Nt=v.nodeAt(xt).attrs,Ut=1==Nt.colspan?0:K-x.colCount(xt);if(Nt.colwidth&&Nt.colwidth[Ut]==m)continue;const Qt=Nt.colwidth?Nt.colwidth.slice():E(Nt.colspan);Qt[Ut]=m,z.setNodeMarkup(w+xt,null,ge(Gt({},Nt),{colwidth:Qt}))}z.docChanged&&_.dispatch(z)}(_,G.activeHandle,wt(G.dragging,z,m)),_.dispatch(_.state.tr.setMeta(Ee,{setDragging:null})))}function K(z){if(!z.which)return w(z);const G=Ee.getState(_.state);if(G&&G.dragging){const Mt=wt(G.dragging,z,m);!function(_,C,m,f){const v=_.state.doc.resolve(C),x=v.node(-1),w=v.start(-1),K=tt.get(x).colCount(v.pos-w)+v.nodeAfter.attrs.colspan-1;let z=_.domAtPos(v.start(-1)).node;for(;z&&"TABLE"!=z.nodeName;)z=z.parentNode;!z||me(x,z.firstChild,z,f,K,m)}(_,G.activeHandle,Mt,m)}}_.dispatch(_.state.tr.setMeta(Ee,{setDragging:{startX:C.clientX,startWidth:x}})),window.addEventListener("mouseup",w),window.addEventListener("mousemove",K),C.preventDefault()}(x,w,C)}},decorations:x=>{const w=Ee.getState(x);if(w&&w.activeHandle>-1)return function(_,C){const m=[],f=_.doc.resolve(C),v=f.node(-1);if(!v)return P.EH.empty;const x=tt.get(v),w=f.start(-1),K=x.colCount(f.pos-w)+f.nodeAfter.attrs.colspan;for(let z=0;z<x.height;z++){const G=K+z*x.width-1;if(!(K!=x.width&&x.map[G]==x.map[G+1]||0!=z&&x.map[G-1]==x.map[G-1-x.width])){const Mt=x.map[G],xt=w+Mt+v.nodeAt(Mt).nodeSize-1,Nt=document.createElement("div");Nt.className="column-resize-handle",m.push(P.p.widget(xt,Nt))}}return P.EH.create(_.doc,m)}(x,w.activeHandle)},nodeViews:{}}});return v}var b=class{constructor(_,C){this.activeHandle=_,this.dragging=C}apply(_){const C=this,m=_.getMeta(Ee);if(m&&null!=m.setHandle)return new b(m.setHandle,!1);if(m&&void 0!==m.setDragging)return new b(C.activeHandle,m.setDragging);if(C.activeHandle>-1&&_.docChanged){let f=_.mapping.map(C.activeHandle,-1);return At(_.doc.resolve(f))||(f=-1),new b(f,C.dragging)}return C}};function Ot(_,C,m){const f=_.posAtCoords({left:C.clientX,top:C.clientY});if(!f)return-1;const{pos:v}=f,x=ht(_.state.doc.resolve(v));if(!x)return-1;if("right"==m)return x.pos;const w=tt.get(x.node(-1)),K=x.start(-1),z=w.map.indexOf(x.pos-K);return z%w.width==0?-1:K+w.map[z-1]}function wt(_,C,m){return Math.max(m,_.startWidth+(C.clientX-_.startX))}function N(_,C){_.dispatch(_.state.tr.setMeta(Ee,{setHandle:C}))}function E(_){return Array(_).fill(0)}function k(_){const C=_.selection,m=mt(_),f=m.node(-1),v=m.start(-1),x=tt.get(f),w=C instanceof ct?x.rectBetween(C.$anchorCell.pos-v,C.$headCell.pos-v):x.findCell(m.pos-v);return ge(Gt({},w),{tableStart:v,map:x,table:f})}function F(_,{map:C,tableStart:m,table:f},v){let x=v>0?-1:0;(function(_,C,m){const f=Pt(C.type.schema).header_cell;for(let v=0;v<_.height;v++)if(C.nodeAt(_.map[m+v*_.width]).type!=f)return!1;return!0})(C,f,v+x)&&(x=0==v||v==C.width?null:0);for(let w=0;w<C.height;w++){const K=w*C.width+v;if(v>0&&v<C.width&&C.map[K-1]==C.map[K]){const z=C.map[K],G=f.nodeAt(z);_.setNodeMarkup(_.mapping.map(m+z),null,L(G.attrs,v-C.colCount(z))),w+=G.attrs.rowspan-1}else{const z=null==x?Pt(f.type.schema).cell:f.nodeAt(C.map[K+x]).type,G=C.positionAt(w,v,f);_.insert(_.mapping.map(m+G),z.createAndFill())}}return _}function qt(_,{map:C,table:m,tableStart:f},v){const x=_.mapping.maps.length;for(let w=0;w<C.height;){const K=w*C.width+v,z=C.map[K],G=m.nodeAt(z),Mt=G.attrs;if(v>0&&C.map[K-1]==z||v<C.width-1&&C.map[K+1]==z)_.setNodeMarkup(_.mapping.slice(x).map(f+z),null,pt(Mt,v-C.colCount(z)));else{const xt=_.mapping.slice(x).map(f+z);_.delete(xt,xt+G.nodeSize)}w+=Mt.rowspan}}function Je(_,{map:C,tableStart:m,table:f},v){var x;let w=m;for(let G=0;G<v;G++)w+=f.child(G).nodeSize;const K=[];let z=v>0?-1:0;(function(_,C,m){var f;const v=Pt(C.type.schema).header_cell;for(let x=0;x<_.width;x++)if((null==(f=C.nodeAt(_.map[x+m*_.width]))?void 0:f.type)!=v)return!1;return!0})(C,f,v+z)&&(z=0==v||v==C.height?null:0);for(let G=0,Mt=C.width*v;G<C.width;G++,Mt++)if(v>0&&v<C.height&&C.map[Mt]==C.map[Mt-C.width]){const xt=C.map[Mt],Nt=f.nodeAt(xt).attrs;_.setNodeMarkup(m+xt,null,ge(Gt({},Nt),{rowspan:Nt.rowspan+1})),G+=Nt.colspan-1}else{const xt=null==z?Pt(f.type.schema).cell:null==(x=f.nodeAt(C.map[Mt+z*C.width]))?void 0:x.type,Nt=null==xt?void 0:xt.createAndFill();Nt&&K.push(Nt)}return _.insert(w,Pt(f.type.schema).row.create(null,K)),_}function at(_,{map:C,table:m,tableStart:f},v){let x=0;for(let z=0;z<v;z++)x+=m.child(z).nodeSize;const w=x+m.child(v).nodeSize,K=_.mapping.maps.length;_.delete(x+f,w+f);for(let z=0,G=v*C.width;z<C.width;z++,G++){const Mt=C.map[G];if(v>0&&Mt==C.map[G-C.width]){const xt=m.nodeAt(Mt).attrs;_.setNodeMarkup(_.mapping.slice(K).map(Mt+f),null,ge(Gt({},xt),{rowspan:xt.rowspan-1})),z+=xt.colspan-1}else if(v<C.width&&Mt==C.map[G+C.width]){const xt=m.nodeAt(Mt),Nt=xt.attrs,Ut=xt.type.create(ge(Gt({},Nt),{rowspan:xt.attrs.rowspan-1}),xt.content),Qt=C.positionAt(v+1,z,m);_.insert(_.mapping.slice(K).map(f+Qt),Ut),z+=Nt.colspan-1}}}function vt(_){const C=_.content;return 1==C.childCount&&C.child(0).isTextblock&&0==C.child(0).childCount}function Wt(_,C){const m=_.selection;if(!(m instanceof ct)||m.$anchorCell.pos==m.$headCell.pos)return!1;const f=k(_),{map:v}=f;if(function({width:_,height:C,map:m},f){let v=f.top*_+f.left,x=v,w=(f.bottom-1)*_+f.left,K=v+(f.right-f.left-1);for(let z=f.top;z<f.bottom;z++){if(f.left>0&&m[x]==m[x-1]||f.right<_&&m[K]==m[K+1])return!0;x+=_,K+=_}for(let z=f.left;z<f.right;z++){if(f.top>0&&m[v]==m[v-_]||f.bottom<C&&m[w]==m[w+_])return!0;v++,w++}return!1}(v,f))return!1;if(C){const x=_.tr,w={};let z,G,K=y.HY.empty;for(let Mt=f.top;Mt<f.bottom;Mt++)for(let xt=f.left;xt<f.right;xt++){const Nt=v.map[Mt*v.width+xt],Ut=f.table.nodeAt(Nt);if(!w[Nt]&&Ut)if(w[Nt]=!0,null==z)z=Nt,G=Ut;else{vt(Ut)||(K=K.append(Ut.content));const Qt=x.mapping.map(Nt+f.tableStart);x.delete(Qt,Qt+Ut.nodeSize)}}if(null==z||null==G)return!0;if(x.setNodeMarkup(z+f.tableStart,null,ge(Gt({},L(G.attrs,G.attrs.colspan,f.right-f.left-G.attrs.colspan)),{rowspan:f.bottom-f.top})),K.size){const Mt=z+1+G.content.size,xt=vt(G)?z+1:Mt;x.replaceWith(xt+f.tableStart,Mt+f.tableStart,K)}x.setSelection(new ct(x.doc.resolve(z+f.tableStart))),C(x)}return!0}function Vt(_,C){const m=Pt(_.schema);return function(_){return(C,m)=>{var f;const v=C.selection;let x,w;if(v instanceof ct){if(v.$anchorCell.pos!=v.$headCell.pos)return!1;x=v.$anchorCell.nodeAfter,w=v.$anchorCell.pos}else{if(x=function(_){for(let C=_.depth;C>0;C--){const m=_.node(C).type.spec.tableRole;if("cell"===m||"header_cell"===m)return _.node(C)}return null}(v.$from),!x)return!1;w=null==(f=ht(v.$from))?void 0:f.pos}if(null==x||null==w||1==x.attrs.colspan&&1==x.attrs.rowspan)return!1;if(m){let K=x.attrs;const z=[],G=K.colwidth;K.rowspan>1&&(K=ge(Gt({},K),{rowspan:1})),K.colspan>1&&(K=ge(Gt({},K),{colspan:1}));const Mt=k(C),xt=C.tr;for(let Ut=0;Ut<Mt.right-Mt.left;Ut++)z.push(G?ge(Gt({},K),{colwidth:G&&G[Ut]?[G[Ut]]:null}):K);let Nt;for(let Ut=Mt.top;Ut<Mt.bottom;Ut++){let Qt=Mt.map.positionAt(Ut,Mt.left,Mt.table);Ut==Mt.top&&(Qt+=x.nodeSize);for(let se=Mt.left,ie=0;se<Mt.right;se++,ie++)se==Mt.left&&Ut==Mt.top||xt.insert(Nt=xt.mapping.map(Qt+Mt.tableStart,1),_({node:x,row:Ut,col:se}).createAndFill(z[ie]))}xt.setNodeMarkup(w,_({node:x,row:Mt.top,col:Mt.left}),z[0]),v instanceof ct&&xt.setSelection(new ct(xt.doc.resolve(v.$anchorCell.pos),Nt?xt.doc.resolve(Nt):void 0)),m(xt)}return!0}}(({node:f})=>m[f.type.spec.tableRole])(_,C)}function le(_,C,m){const f=C.map.cellsInRect({left:0,top:0,right:"row"==_?C.map.width:1,bottom:"column"==_?C.map.height:1});for(let v=0;v<f.length;v++){const x=C.table.nodeAt(f[v]);if(x&&x.type!==m.header_cell)return!1}return!0}function ce(_,C){return(C=C||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(_){return function(C,m){if(!W(C))return!1;if(m){const f=Pt(C.schema),v=k(C),x=C.tr,w=v.map.cellsInRect("column"==_?{left:v.left,top:0,right:v.right,bottom:v.map.height}:"row"==_?{left:0,top:v.top,right:v.map.width,bottom:v.bottom}:v),K=w.map(z=>v.table.nodeAt(z));for(let z=0;z<w.length;z++)K[z].type==f.header_cell&&x.setNodeMarkup(v.tableStart+w[z],f.cell,K[z].attrs);if(0==x.steps.length)for(let z=0;z<w.length;z++)x.setNodeMarkup(v.tableStart+w[z],f.header_cell,K[z].attrs);m(x)}return!0}}(_):function(m,f){if(!W(m))return!1;if(f){const v=Pt(m.schema),x=k(m),w=m.tr,K=le("row",x,v),z=le("column",x,v),Mt=("column"===_?K:"row"===_&&z)?1:0,Nt="column"==_?z?v.cell:v.header_cell:"row"==_?K?v.cell:v.header_cell:v.cell;x.map.cellsInRect("column"==_?{left:0,top:Mt,right:1,bottom:x.map.height}:"row"==_?{left:Mt,top:0,right:x.map.width,bottom:1}:x).forEach(Ut=>{const Qt=Ut+x.tableStart,se=w.doc.nodeAt(Qt);se&&w.setNodeMarkup(Qt,Nt,se.attrs)}),f(w)}return!0}}ce("row",{useDeprecatedLogic:!0}),ce("column",{useDeprecatedLogic:!0});var en=ce("cell",{useDeprecatedLogic:!0});function fn(_){return function(C,m){if(!W(C))return!1;const f=function(_,C){if(C<0){const m=_.nodeBefore;if(m)return _.pos-m.nodeSize;for(let f=_.index(-1)-1,v=_.before();f>=0;f--){const x=_.node(-1).child(f),w=x.lastChild;if(w)return v-1-w.nodeSize;v-=x.nodeSize}}else{if(_.index()<_.parent.childCount-1)return _.pos+_.nodeAfter.nodeSize;const m=_.node(-1);for(let f=_.indexAfter(-1),v=_.after();f<m.childCount;f++){const x=m.child(f);if(x.childCount)return v+1;v+=x.nodeSize}}return null}(mt(C),_);if(null==f)return!1;if(m){const v=C.doc.resolve(f);m(C.tr.setSelection(l.Bs.between(v,function(_){return _.node(0).resolve(_.pos+_.nodeAfter.nodeSize)}(v))).scrollIntoView())}return!0}}function vn({allowTableNodeSelection:_=!1}={}){return new l.Sy({key:Dt,state:{init:()=>null,apply(C,m){const f=C.getMeta(Dt);if(null!=f)return-1==f?null:f;if(null==m||!C.docChanged)return m;const{deleted:v,pos:x}=C.mapping.mapResult(m);return v?null:x}},props:{decorations:J,handleDOMEvents:{mousedown:Ue},createSelectionBetween:C=>null!=Dt.getState(C.state)?C.state.selection:null,handleTripleClick:ke,handleKeyDown:De,handlePaste:Ye},appendTransaction:(C,m,f)=>function(_,C,m){const f=(C||_).selection,v=(C||_).doc;let x,w;if(f instanceof l.qv&&(w=f.node.type.spec.tableRole)){if("cell"==w||"header_cell"==w)x=ct.create(v,f.from);else if("row"==w){const K=v.resolve(f.from+1);x=ct.rowSelection(K,K)}else if(!m){const K=tt.get(f.node),z=f.from+1;x=ct.create(v,z+1,z+K.map[K.width*K.height-1])}}else f instanceof l.Bs&&function({$from:_,$to:C}){if(_.pos==C.pos||_.pos<_.pos-6)return!1;let m=_.pos,f=C.pos,v=_.depth;for(;v>=0&&!(_.after(v+1)<_.end(v));v--,m++);for(let x=C.depth;x>=0&&!(C.before(x+1)>C.start(x));x--,f--);return m==f&&/row|table/.test(_.node(v).type.spec.tableRole)}(f)?x=l.Bs.create(v,f.from):f instanceof l.Bs&&function({$from:_,$to:C}){let m,f;for(let v=_.depth;v>0;v--){const x=_.node(v);if("cell"===x.type.spec.tableRole||"header_cell"===x.type.spec.tableRole){m=x;break}}for(let v=C.depth;v>0;v--){const x=C.node(v);if("cell"===x.type.spec.tableRole||"header_cell"===x.type.spec.tableRole){f=x;break}}return m!==f&&0===C.parentOffset}(f)&&(x=l.Bs.create(v,f.$from.start(),f.$from.end()));return x&&(C||(C=_.tr)).setSelection(x),C}(f,ne(f,m),_)})}function nn(_,C,m,f,v,x){let w=0,K=!0,z=C.firstChild;const G=_.firstChild;for(let Mt=0,xt=0;Mt<G.childCount;Mt+=1){const{colspan:Nt,colwidth:Ut}=G.child(Mt).attrs;for(let Qt=0;Qt<Nt;Qt+=1,xt+=1){const se=v===xt?x:Ut&&Ut[Qt],ie=se?`${se}px`:"";w+=se||f,se||(K=!1),z?(z.style.width!==ie&&(z.style.width=ie),z=z.nextSibling):C.appendChild(document.createElement("col")).style.width=ie}}for(;z;){const Mt=z.nextSibling;z.parentNode.removeChild(z),z=Mt}K?(m.style.width=`${w}px`,m.style.minWidth=""):(m.style.width="",m.style.minWidth=`${w}px`)}class mn{constructor(C,m){this.node=C,this.cellMinWidth=m,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),nn(C,this.colgroup,this.table,m),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(C){return C.type===this.node.type&&(this.node=C,nn(C,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(C){return"attributes"===C.type&&(C.target===this.table||this.colgroup.contains(C.target))}}function ln(_,C){return C?_.createChecked(null,C):_.createAndFill()}const on=({editor:_})=>{const{selection:C}=_.state;if(!function(_){return _ instanceof ct}(C))return!1;let m=0;const f=(0,M.findParentNodeClosestToPos)(C.ranges[0].$from,x=>"table"===x.type.name);return null==f||f.node.descendants(x=>{if("table"===x.type.name)return!1;["tableCell","tableHeader"].includes(x.type.name)&&(m+=1)}),m===C.ranges.length&&(_.commands.deleteTable(),!0)},Xe=M.Node.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:mn,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML({HTMLAttributes:_}){return["table",(0,M.mergeAttributes)(this.options.HTMLAttributes,_),["tbody",0]]},addCommands:()=>({insertTable:({rows:_=3,cols:C=3,withHeaderRow:m=!0}={})=>({tr:f,dispatch:v,editor:x})=>{const w=function(_,C,m,f,v){const x=function(_){if(_.cached.tableNodeTypes)return _.cached.tableNodeTypes;const C={};return Object.keys(_.nodes).forEach(m=>{const f=_.nodes[m];f.spec.tableRole&&(C[f.spec.tableRole]=f)}),_.cached.tableNodeTypes=C,C}(_),w=[],K=[];for(let G=0;G<m;G+=1){const Mt=ln(x.cell,v);if(Mt&&K.push(Mt),f){const xt=ln(x.header_cell,v);xt&&w.push(xt)}}const z=[];for(let G=0;G<C;G+=1)z.push(x.row.createChecked(null,f&&0===G?w:K));return x.table.createChecked(null,z)}(x.schema,_,C,m);if(v){const K=f.selection.anchor+1;f.replaceSelectionWith(w).scrollIntoView().setSelection(l.Bs.near(f.doc.resolve(K)))}return!0},addColumnBefore:()=>({state:_,dispatch:C})=>function(_,C){if(!W(_))return!1;if(C){const m=k(_);C(F(_.tr,m,m.left))}return!0}(_,C),addColumnAfter:()=>({state:_,dispatch:C})=>function(_,C){if(!W(_))return!1;if(C){const m=k(_);C(F(_.tr,m,m.right))}return!0}(_,C),deleteColumn:()=>({state:_,dispatch:C})=>function(_,C){if(!W(_))return!1;if(C){const m=k(_),f=_.tr;if(0==m.left&&m.right==m.map.width)return!1;for(let v=m.right-1;qt(f,m,v),v!=m.left;v--){const x=m.tableStart?f.doc.nodeAt(m.tableStart-1):f.doc;if(!x)throw RangeError("No table found");m.table=x,m.map=tt.get(x)}C(f)}return!0}(_,C),addRowBefore:()=>({state:_,dispatch:C})=>function(_,C){if(!W(_))return!1;if(C){const m=k(_);C(Je(_.tr,m,m.top))}return!0}(_,C),addRowAfter:()=>({state:_,dispatch:C})=>function(_,C){if(!W(_))return!1;if(C){const m=k(_);C(Je(_.tr,m,m.bottom))}return!0}(_,C),deleteRow:()=>({state:_,dispatch:C})=>function(_,C){if(!W(_))return!1;if(C){const m=k(_),f=_.tr;if(0==m.top&&m.bottom==m.map.height)return!1;for(let v=m.bottom-1;at(f,m,v),v!=m.top;v--){const x=m.tableStart?f.doc.nodeAt(m.tableStart-1):f.doc;if(!x)throw RangeError("No table found");m.table=x,m.map=tt.get(m.table)}C(f)}return!0}(_,C),deleteTable:()=>({state:_,dispatch:C})=>function(_,C){const m=_.selection.$anchor;for(let f=m.depth;f>0;f--)if("table"==m.node(f).type.spec.tableRole)return C&&C(_.tr.delete(m.before(f),m.after(f)).scrollIntoView()),!0;return!1}(_,C),mergeCells:()=>({state:_,dispatch:C})=>Wt(_,C),splitCell:()=>({state:_,dispatch:C})=>Vt(_,C),toggleHeaderColumn:()=>({state:_,dispatch:C})=>ce("column")(_,C),toggleHeaderRow:()=>({state:_,dispatch:C})=>ce("row")(_,C),toggleHeaderCell:()=>({state:_,dispatch:C})=>en(_,C),mergeOrSplit:()=>({state:_,dispatch:C})=>!!Wt(_,C)||Vt(_,C),setCellAttribute:(_,C)=>({state:m,dispatch:f})=>function(_,C){return function(m,f){if(!W(m))return!1;const v=mt(m);if(v.nodeAfter.attrs[_]===C)return!1;if(f){const x=m.tr;m.selection instanceof ct?m.selection.forEachCell((w,K)=>{w.attrs[_]!==C&&x.setNodeMarkup(K,null,ge(Gt({},w.attrs),{[_]:C}))}):x.setNodeMarkup(v.pos,null,ge(Gt({},v.nodeAfter.attrs),{[_]:C})),f(x)}return!0}}(_,C)(m,f),goToNextCell:()=>({state:_,dispatch:C})=>fn(1)(_,C),goToPreviousCell:()=>({state:_,dispatch:C})=>fn(-1)(_,C),fixTables:()=>({state:_,dispatch:C})=>(C&&ne(_),!0),setCellSelection:_=>({tr:C,dispatch:m})=>{if(m){const f=ct.create(C.doc,_.anchorCell,_.headCell);C.setSelection(f)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:on,"Mod-Backspace":on,Delete:on,"Mod-Delete":on}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[_t({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],vn({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema:_=>({tableRole:(0,M.callOrReturn)((0,M.getExtensionField)(_,"tableRole",{name:_.name,options:_.options,storage:_.storage}))})}).extend({renderHTML({node:_,HTMLAttributes:C}){var m,f;let v=0,x=!0;try{const w=(null===(m=_.content)||void 0===m?void 0:m.content)[0];null===(f=null==w?void 0:w.content)||void 0===f||f.content.forEach(K=>{K.attrs.colwidth?K.attrs.colwidth.forEach(z=>{z?v+=z:(x=!1,v+=this.options.cellMinWidth)}):(x=!1,v+=this.options.cellMinWidth*(K.attrs.colspan?K.attrs.colspan:1))})}catch(w){x=!1}return C.style=x&&v>0?`width: ${v}px;`:v&&v>0?`min-width: ${v}px`:null,["div",{class:"tui-table-wrapper"},["table",(0,M.mergeAttributes)(this.options.HTMLAttributes,C),["tbody",0]]]}})},88806:(jt,Et,c)=>{c.d(Et,{v:()=>l});var M=c(74788);class l{constructor(P,g,it){const B=g.get(M.z2F),tt=g.get(M._Vd).resolveComponentFactory(P);this.componentRef=tt.create(g,[]),this.updateProps(it),B.attachView(this.componentRef.hostView)}get instance(){return this.componentRef.instance}get elementRef(){return this.componentRef.injector.get(M.SBq)}get dom(){return this.elementRef.nativeElement}updateProps(P){Object.entries(P).forEach(([g,it])=>{this.instance[g]=it})}detectChanges(){this.componentRef.changeDetectorRef.detectChanges()}destroy(){this.componentRef.destroy()}}},40400:(jt,Et,c)=>{c.d(Et,{d:()=>P,x:()=>it});var M=c(12057),l=c(12867),y=c(88806);class P{}class g extends l.NodeView{constructor(){super(...arguments),this.contentDOMElement=null}mount(){const X=this.options.injector,tt=X.get(M.K0);this.renderer=new y.v(this.component,X,{editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(ut={})=>this.updateAttributes(ut),deleteNode:()=>this.deleteNode()}),this.extension.config.draggable&&(this.renderer.elementRef.nativeElement.ondragstart=ut=>{this.onDragStart(ut)}),this.contentDOMElement=this.node.isLeaf?null:tt.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit",this.renderer.detectChanges())}get dom(){return this.renderer.dom}get contentDOM(){return this.node.isLeaf?null:(this.maybeMoveContentDOM(),this.contentDOMElement)}update(X,tt){return this.options.update?this.options.update(X,tt):X.type===this.node.type&&(X===this.node&&this.decorations===tt||(this.node=X,this.decorations=tt,this.renderer.updateProps({node:X,decorations:tt}),this.maybeMoveContentDOM()),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy()}maybeMoveContentDOM(){const X=this.dom.querySelector("[data-node-view-content]");this.contentDOMElement&&X&&!X.contains(this.contentDOMElement)&&X.appendChild(this.contentDOMElement)}}const it=(B,X)=>tt=>new g(B,tt,X)},48014:(jt,Et,c)=>{c.r(Et),c.d(Et,{AbstractTuiEditor:()=>M._,AbstractTuiEditorResizable:()=>Dt._3,BackgroundColor:()=>At.BackgroundColor,EDITOR_BLANK_COLOR:()=>mt.hK,FontColor:()=>Lt.FontColor,INITIALIZATION_TIPTAP_CONTAINER:()=>Yt.Y1,LAZY_EDITOR_EXTENSIONS:()=>Yt.F4,LAZY_TIPTAP_EDITOR:()=>Yt.bG,StarterKit:()=>J.StarterKit,TIPTAP_EDITOR:()=>Yt.ZW,TUI_ATTACH_FILES_LOADER:()=>Yt.zc,TUI_ATTACH_FILES_OPTIONS:()=>Yt.dR,TUI_EDITOR_CODE_OPTIONS:()=>Yt.Mr,TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES:()=>Yt.dj,TUI_EDITOR_CONTENT_PROCESSOR:()=>Yt.F1,TUI_EDITOR_DEFAULT_OPTIONS:()=>Yt.HG,TUI_EDITOR_EXTENSIONS:()=>Yt.Wf,TUI_EDITOR_FONT_OPTIONS:()=>Yt.UN,TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>Kt.TUI_EDITOR_GROUP_DEFAULT_OPTIONS,TUI_EDITOR_LINK_TEXTS:()=>Yt.b$,TUI_EDITOR_MAX_IMAGE_WIDTH:()=>L.TUI_EDITOR_MAX_IMAGE_WIDTH,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>L.TUI_EDITOR_MIN_IMAGE_WIDTH,TUI_EDITOR_OPTIONS:()=>Yt.mJ,TUI_EDITOR_PROVIDERS:()=>Ct.m,TUI_EDITOR_TABLE_COMMANDS:()=>Yt.$i,TUI_EDITOR_TOOLBAR_TEXTS:()=>Yt.rf,TUI_IFRAME_EDITOR_OPTIONS:()=>pt.TUI_IFRAME_EDITOR_OPTIONS,TUI_IMAGE_EDITOR_OPTIONS:()=>L.TUI_IMAGE_EDITOR_OPTIONS,TUI_IMAGE_LOADER:()=>Yt.p7,TableCellBackground:()=>ot.TableCellBackground,TuiAlignContentComponent:()=>W.Xp,TuiAlignContentModule:()=>W.pu,TuiAudio:()=>st.TuiAudio,TuiCodeComponent:()=>W.Tf,TuiCodeModule:()=>W.P_,TuiColorEditComponent:()=>l.hR,TuiColorEditModule:()=>l.TD,TuiColorPickerComponent:()=>l.$v,TuiColorPickerModule:()=>l.H9,TuiColorSelectorComponent:()=>l.sV,TuiColorSelectorModule:()=>l.wl,TuiComponentRenderer:()=>kt.v,TuiDetailsComponent:()=>W.yj,TuiDetailsModule:()=>W.y9,TuiDetailsRemoveComponent:()=>W.Un,TuiEditLinkComponent:()=>y.lV,TuiEditLinkModule:()=>y.Fu,TuiEditorComponent:()=>P.a,TuiEditorGroupToolComponent:()=>W.dN,TuiEditorImagePreviewDirective:()=>ft.Zj,TuiEditorImagePreviewModule:()=>ft.BN,TuiEditorModule:()=>Tt,TuiEditorPortalDirective:()=>bt.A,TuiEditorPortalHostComponent:()=>Pt.d,TuiEditorPortalService:()=>It.Y,TuiEditorResizableComponent:()=>Dt.V_,TuiEditorResizableModule:()=>Dt.Sl,TuiEditorSocketComponent:()=>it.D,TuiEditorSocketModule:()=>X,TuiEditorTool:()=>j._,TuiEditorToolGroup:()=>W.jP,TuiFileLink:()=>yt.TuiFileLink,TuiFilterAnchorsPipe:()=>y.bL,TuiFlatPickerComponent:()=>l.Jd,TuiFlatPickerModule:()=>l.ui,TuiFontSize:()=>Ht.TuiFontSize,TuiFontSizeComponent:()=>W.mK,TuiFontSizeModule:()=>W.p7,TuiFontStyleComponent:()=>W.hr,TuiFontStyleModule:()=>W.Zv,TuiHighlightColorComponent:()=>W.UT,TuiHighlightColorModule:()=>W.XC,TuiIframeEditorComponent:()=>pt.TuiIframeEditorComponent,TuiIframeEditorModule:()=>pt.TuiIframeEditorModule,TuiImageEditorComponent:()=>L.TuiImageEditorComponent,TuiImageEditorModule:()=>L.TuiImageEditorModule,TuiInputColorComponent:()=>ht.j,TuiInputColorModule:()=>q,TuiLinearMultiPickerComponent:()=>l.es,TuiLinearMultiPickerModule:()=>l.GU,TuiLinearPickerComponent:()=>l.P,TuiLinearPickerModule:()=>l.g7,TuiLink:()=>ct.TuiLink,TuiListConfigsComponent:()=>W.w2,TuiListConfigsModule:()=>W.Ur,TuiNodeViewNgComponent:()=>$t.d,TuiNodeViewRenderer:()=>$t.x,TuiPaletteComponent:()=>l.Rh,TuiPaletteModule:()=>l.VM,TuiShortUrlPipe:()=>y.X,TuiSource:()=>st.TuiSource,TuiTabExtension:()=>rt.TuiTabExtension,TuiTable:()=>Q.TuiTable,TuiTableCellColorComponent:()=>W.pH,TuiTableCellColorModule:()=>W.mp,TuiTableCommands:()=>W.iN,TuiTableCreateComponent:()=>W.lT,TuiTableCreateModule:()=>W.iA,TuiTableMergeCellsComponent:()=>W.YH,TuiTableMergeCellsModule:()=>W.er,TuiTableRowColumnManagerComponent:()=>W._I,TuiTableRowColumnManagerModule:()=>W.__,TuiTableSizeSelectorComponent:()=>W.M8,TuiTableSizeSelectorModule:()=>W.kU,TuiTextColorComponent:()=>W.G0,TuiTextColorModule:()=>W._t,TuiTiptapEditorDirective:()=>ft.JU,TuiTiptapEditorModule:()=>ft.mJ,TuiTiptapEditorService:()=>ft.$3,TuiToolbarComponent:()=>tt.M6,TuiToolbarModule:()=>tt.yB,TuiToolbarNavigationManagerDirective:()=>tt.Bp,TuiVideo:()=>st.TuiVideo,createGroupExtension:()=>Kt.createGroupExtension,createIframeEditorExtension:()=>pt.createIframeEditorExtension,createImageEditorExtension:()=>L.createImageEditorExtension,defaultEditorColors:()=>mt.sw,defaultEditorExtensions:()=>St,defaultEditorTools:()=>mt.Db,tuiCreateImageEditorExtension:()=>L.tuiCreateImageEditorExtension,tuiDefaultFontOptionsHandler:()=>mt.RR,tuiDeleteNode:()=>ne.yU,tuiEditorOptionsProvider:()=>Yt.Uv,tuiGetElementPoint:()=>ne.Ws,tuiGetGradientData:()=>ne.U5,tuiGetMarkRange:()=>ne.Yz,tuiGetNestedNodes:()=>ne.YX,tuiGetSelectedContent:()=>ne.Ap,tuiInsertHtml:()=>ne.Xd,tuiInsertText:()=>ne.Oi,tuiIsOrderedOrBulletList:()=>rt.tuiIsOrderedOrBulletList,tuiIsSafeLinkRange:()=>ne.nC,tuiIsSelectionIn:()=>ne.i0,tuiLegacyEditorConverter:()=>ne.Er,tuiParseGradient:()=>ne._N,tuiParseNodeAttributes:()=>ne.x6,tuiParseStyle:()=>ne.jx,tuiToGradient:()=>ne.CH});var M=c(77361),l=c(27050),y=c(71115),P=c(69303),g=c(12057),it=c(20179),B=c(74788);let X=(()=>{class zt{}return zt.\u0275fac=function(ye){return new(ye||zt)},zt.\u0275mod=B.oAB({type:zt}),zt.\u0275inj=B.cJS({}),zt})();var tt=c(17406),ft=c(84614),ut=c(50259),et=c(3497);let Tt=(()=>{class zt{}return zt.\u0275fac=function(ye){return new(ye||zt)},zt.\u0275mod=B.oAB({type:zt}),zt.\u0275inj=B.cJS({imports:[[g.ez,tt.yB,et.TuiWrapperModule,et.TuiScrollbarModule,y.Fu,ut.TuiActiveZoneModule,et.TuiDropdownModule,ft.mJ,X,ut.TuiLetModule]]}),zt})();var Ct=c(79089),bt=c(1433),It=c(73825),Pt=c(9872),Dt=c(95110),ht=c(19769);let q=(()=>{class zt{}return zt.\u0275fac=function(ye){return new(ye||zt)},zt.\u0275mod=B.oAB({type:zt}),zt.\u0275inj=B.cJS({imports:[[g.ez,et.TuiPrimitiveTextfieldModule,et.TuiTextfieldControllerModule,et.TuiHostedDropdownModule,l.wl,ut.TuiActiveZoneModule]]}),zt})();var W=c(93252),mt=c(19074),j=c(48699),At=c(15736);const St=[Promise.resolve().then(c.bind(c,2823)).then(({StarterKit:zt})=>zt).then(zt=>zt.configure({heading:{levels:[1,2]}})),c.e(73336).then(c.bind(c,73336)).then(({default:zt})=>zt.configure({types:["heading","paragraph"]})),Promise.resolve().then(c.bind(c,84402)).then(({default:zt})=>zt),c.e(17991).then(c.bind(c,17991)).then(({default:zt})=>zt),c.e(77147).then(c.bind(c,77147)).then(({default:zt})=>zt),c.e(25034).then(c.bind(c,25034)).then(({default:zt})=>zt),Promise.resolve().then(c.bind(c,52658)).then(({FontColor:zt})=>zt),Promise.resolve().then(c.bind(c,44632)).then(({default:zt})=>zt.configure({inline:!0,allowBase64:!0})),Promise.resolve().then(c.bind(c,82091)).then(({TuiLink:zt})=>zt),c.e(54058).then(c.bind(c,54058)).then(({TuiJumpAnchor:zt})=>zt),Promise.resolve().then(c.bind(c,93763)).then(({TuiFileLink:zt})=>zt),Promise.resolve().then(c.bind(c,15736)).then(({BackgroundColor:zt})=>zt),Promise.resolve().then(c.bind(c,86624)).then(({TuiTable:zt})=>zt.configure({resizable:!0})),c.e(45213).then(c.bind(c,45213)).then(({default:zt})=>zt),c.e(71397).then(c.bind(c,71397)).then(({default:zt})=>zt),c.e(38840).then(c.bind(c,38840)).then(({TableHeader:zt})=>zt),Promise.resolve().then(c.bind(c,12177)).then(({TuiTabExtension:zt})=>zt),Promise.resolve().then(c.bind(c,51919)).then(({TableCellBackground:zt})=>zt),c.e(44312).then(c.bind(c,44312)).then(({TuiDetailsContent:zt})=>zt),c.e(44312).then(c.bind(c,44312)).then(({TuiDetails:zt})=>zt),c.e(44312).then(c.bind(c,44312)).then(({TuiSummary:zt})=>zt),Promise.resolve().then(c.bind(c,9492)).then(({TuiFontSize:zt})=>zt)];var yt=c(93763),Lt=c(52658),Ht=c(9492),Kt=c(54920),pt=c(20854),L=c(53380),rt=c(12177),ct=c(82091),st=c(41512),J=c(2823),Q=c(86624),ot=c(51919),kt=c(88806),$t=c(40400),Yt=c(14309),ne=c(27863)},62141:(jt,Et,c)=>{c.d(Et,{i:()=>ft});var M=c(12057),l=c(74788),y=c(27863),P=c(50259),g=c(18891),it=c(43190),B=c(88002),X=c(46782),tt=c(39761);let ft=(()=>{class ut extends g.y{constructor(Tt,{nativeElement:Ct},bt){const It=(0,P.tuiTypedFromEvent)(Ct,"mousedown").pipe((0,P.tuiPreventDefault)(),(0,it.w)(Pt=>{const Dt=(0,P.tuiTypedFromEvent)(bt,"mousemove").pipe((0,B.U)(({clientX:ht,clientY:q})=>(0,y.Ws)(ht,q,Ct)),(0,X.R)((0,P.tuiTypedFromEvent)(bt,"mouseup")));return Pt.target===Ct?Dt.pipe((0,tt.O)((0,y.Ws)(Pt.clientX,Pt.clientY,Ct))):Dt}),(0,X.R)(Tt));super(Pt=>It.subscribe(Pt))}}return ut.\u0275fac=function(Tt){return new(Tt||ut)(l.LFG(P.TuiDestroyService,2),l.LFG(l.SBq),l.LFG(M.K0))},ut.\u0275prov=l.Yz7({token:ut,factory:ut.\u0275fac}),ut})()},14309:(jt,Et,c)=>{c.d(Et,{Y1:()=>St,F4:()=>y,bG:()=>At,ZW:()=>j,zc:()=>ut,dR:()=>ft,Mr:()=>Pt,dj:()=>Tt,F1:()=>tt,HG:()=>g,Wf:()=>l,UN:()=>Dt,b$:()=>It,mJ:()=>it,$i:()=>bt,rf:()=>Ct,p7:()=>W,Uv:()=>B});var M=c(74788);const l=new M.OlP("[TUI_EDITOR_EXTENSIONS]"),y=new M.OlP("[LAZY_EDITOR_EXTENSIONS]");var P=c(19074);const g={colors:P.sw,blankColor:P.hK,fontOptions:P.RR},it=new M.OlP("[TUI_EDITOR_OPTIONS]",{factory:()=>g});function B(yt){return{provide:it,useValue:Object.assign(Object.assign({},g),yt)}}var X=c(54487);const tt=new M.OlP("[TUI_EDITOR_CONTENT_PROCESSOR]",{factory:()=>X.y}),ft=new M.OlP("[TUI_ATTACH_FILES_OPTIONS]",{factory:()=>({accept:"*/*",multiple:!0})}),ut=new M.OlP("[TUI_ATTACH_FILES_LOADER]");var et=c(72773);const Tt=new M.OlP("[TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES]",{factory:()=>["Solid color","Gradient"]}),Ct=new M.OlP("[TUI_EDITOR_TOOLBAR_TEXTS]",{factory:(0,et.vv)("toolbarTools")}),bt=new M.OlP("[TUI_EDITOR_TABLE_COMMANDS]",{factory:(0,et.vv)("editorTableCommands")}),It=new M.OlP("[TUI_EDITOR_LINK_TEXTS]",{factory:(0,et.vv)("editorEditLink")}),Pt=new M.OlP("[TUI_EDITOR_CODE_OPTIONS]",{factory:(0,et.vv)("editorCodeOptions")}),Dt=new M.OlP("[TUI_EDITOR_FONT_OPTIONS]",{factory:(0,et.vv)("editorFontOptions")});var ht=c(50259),q=c(88002);const W=new M.OlP("[TUI_IMAGE_LOADER]",{factory:()=>yt=>{const Lt=new FileReader;return Lt.readAsDataURL(yt),(0,ht.tuiTypedFromEvent)(Lt,"load").pipe((0,q.U)(()=>String(Lt.result)))}});var mt=c(82298);const j=new M.OlP("[TIPTAP_EDITOR]"),At=new M.OlP("[LAZY_TIPTAP_EDITOR]",{factory:()=>{const yt=new mt.t(1);return Promise.resolve().then(c.bind(c,12867)).then(Lt=>yt.next(Lt.Editor)),yt}}),St=new M.OlP("[INITIALIZATION_TIPTAP_CONTAINER]")},27863:(jt,Et,c)=>{function M(st,J,Q){const ot=st.selection.$anchor;for(let kt=ot.depth;kt>0;kt--)if(ot.node(kt).type.name===Q)return J&&J(st.tr.delete(ot.before(kt),ot.after(kt)).scrollIntoView()),!0;return!1}c.d(Et,{yU:()=>M,Ws:()=>y,U5:()=>P,Yz:()=>B,YX:()=>tt,Ap:()=>ut,Xd:()=>et,Oi:()=>Tt,nC:()=>rt,i0:()=>Ct,Er:()=>bt,_N:()=>Ht,x6:()=>pt,jx:()=>L,CH:()=>ct});var l=c(50259);function y(st,J,Q){const{left:ot,top:kt,width:$t,height:Yt}=Q.getBoundingClientRect();return[(0,l.tuiClamp)(st-ot,0,$t)/$t,(0,l.tuiClamp)(J-kt,0,Yt)/Yt]}function P(st){return st.slice(0,Math.max(0,st.length-1)).replace("linear-gradient(","")}function it(st,J,Q={}){return st.find(({attrs:ot,type:kt})=>kt===J&&function(st,J){const Q=Object.keys(J);return!Q.length||!!Q.filter(ot=>J[ot]===st[ot]).length}(ot,Q))||null}function B(st,J,Q={}){if(!st||!J)return null;const{node:ot,offset:kt}=st.parent.childAfter(st.parentOffset);if(!ot)return null;const $t=it(ot.marks,J,Q);if(!$t)return null;let Yt=st.index(),ne=st.start()+kt,zt=Yt+1,ue=ne+ot.nodeSize;for(it(ot.marks,J,Q);Yt>0&&$t.isInSet(st.parent.child(Yt-1).marks);)Yt-=1,ne-=st.parent.child(Yt).nodeSize;for(;zt<st.parent.childCount&&it(st.parent.child(zt).marks,J,Q);)ue+=st.parent.child(zt).nodeSize,zt+=1;return{from:ne,to:ue}}var X=c(77346);function tt(st){const J=[];return st.content.forEach(Q=>{Q instanceof X.NB&&J.push([Q.type.name,Q.attrs])}),J}var ft=c(12867);function ut(st,J){const Q=null!=J?J:st.selection.$head.parent.textContent,ot=st.doc.cut(st.selection.from,st.selection.to);return ot.content.size?(0,ft.getHTMLFromFragment)(ot.content,st.schema):Q}function et(st,J){if(st.queryCommandSupported("insertHTML"))return void st.execCommand("insertHTML",!1,J);const Q=st.getSelection();if(!Q)throw new l.TuiDocumentSelectionException;st.execCommand("ms-beginUndoUnit");const ot=Q.getRangeAt(0),kt=ot.createContextualFragment(J);ot.deleteContents(),ot.insertNode(kt),st.execCommand("ms-endUndoUnit")}function Tt(st,J){if(st.queryCommandSupported("insertText"))return void st.execCommand("insertText",!1,J);const Q=st.getSelection();if(!Q)throw new l.TuiDocumentSelectionException;st.execCommand("ms-beginUndoUnit");const ot=Q.getRangeAt(0);ot.deleteContents(),ot.insertNode(st.createTextNode(J)),st.execCommand("ms-endUndoUnit")}function Ct({anchorNode:st,focusNode:J},Q){return!!st&&!!J&&(0,l.tuiIsNodeIn)(st,Q)&&(0,l.tuiIsNodeIn)(J,Q)}function bt(st){const J=(new DOMParser).parseFromString(st,"text/html");return It(J.body),J.body.innerHTML}function It(st){for(const J of Array.from(st.children))if(J.children.length&&It(J),"FONT"===J.tagName)if(J.hasAttribute("size"))switch(J.getAttribute("size")){case"6":Pt("h1",J);break;case"5":Pt("h2",J);break;case"4":Dt("17px",J);break;case"3":Dt("15px",J);break;case"2":Dt("13px",J)}else J.hasAttribute("color")&&ht(J)}function Pt(st,J){var Q,ot,kt,$t,Yt,ne,zt,ue,ye;const xe=document.createElement(st);if(xe.innerHTML=J.innerHTML,"P"===(null===(Q=J.parentElement)||void 0===Q?void 0:Q.tagName)){const fe=null===(kt=null===(ot=J.parentElement)||void 0===ot?void 0:ot.parentElement)||void 0===kt?void 0:kt.insertBefore(xe,J.parentElement);null===($t=J.parentElement)||void 0===$t||$t.removeChild(J),(null==fe?void 0:fe.nextSibling)&&!(null===(ne=null===(Yt=null==fe?void 0:fe.nextSibling)||void 0===Yt?void 0:Yt.textContent)||void 0===ne?void 0:ne.trim())&&(null===(ue=null===(zt=fe.nextSibling)||void 0===zt?void 0:zt.parentElement)||void 0===ue||ue.removeChild(fe.nextSibling))}else null===(ye=J.parentElement)||void 0===ye||ye.replaceChild(xe,J)}function Dt(st,J){var Q;const ot=document.createElement("p"),kt=document.createElement("span");kt.setAttribute("style",`font-size: ${st}`),kt.innerHTML=J.innerHTML,ot.append(kt),null===(Q=J.parentElement)||void 0===Q||Q.replaceChild("P"===J.parentElement.tagName?kt:ot,J)}function ht(st){var J;const Q=document.createElement("span");Q.setAttribute("style",`color: ${st.getAttribute("color")}`),Q.innerHTML=st.innerHTML,null===(J=st.parentElement)||void 0===J||J.replaceChild(Q,st)}const Lt=["\\s*(","(?:","#(?:[a-f0-9]{6}|[a-f0-9]{3})","|","(?:rgb|hsl)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*\\)","|","(?:rgba|hsla)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*,\\s*\\d*\\.?\\d+\\)","|","[_a-z-][_a-z0-9-]*",")",")","(?:\\s+","(","(?:[+-]?\\d*\\.?\\d+)(?:%|[a-z]+)?","))?","(?:","\\s*,\\s*","\\s*)?"];function Ht(st){const J=new RegExp(Lt.join(""),"gi"),Q=st.startsWith("to")||st.match(/^\d/)?st.slice(Math.max(0,st.indexOf(",")+1)).trim():st,ot=st.startsWith("to")?st.split(",")[0]:"to bottom";let kt=[],$t=J.exec(Q);for(;null!==$t;)kt=kt.concat({color:$t[1],position:Kt($t[2],kt.length)}),$t=J.exec(Q);return kt=kt.filter(({color:Yt})=>Yt.startsWith("#")||Yt.startsWith("rgb")),{stops:kt,side:ot}}function Kt(st,J){const Q=1===J?"100%":`${J}%`;return(null==st?void 0:st.includes("%"))?st:Q}function pt(st){return st.reduce((J,Q)=>(J[Q]={parseHTML:ot=>null==ot?void 0:ot.getAttribute(`${Q}`)},J),{})}function L(st){return st.split(";").reduce((J,Q)=>{var ot;const[kt,$t]=null!==(ot=Q.split(":"))&&void 0!==ot?ot:[];return kt&&$t&&(J[kt.trim()]=$t.trim()),J},{})}function rt(st){var J;return st.endOffset-st.startOffset>0||0!==st.startOffset&&st.endOffset!==((null===(J=st.endContainer.nodeValue)||void 0===J?void 0:J.length)||0)}function ct({stops:st,side:J}){return`linear-gradient(${J}, ${st.map(({color:Q,position:ot})=>`rgba(${(0,l.tuiParseColor)(Q).join(", ")}) ${ot}`).join(", ")})`}},12867:(jt,Et,c)=>{c.r(Et),c.d(Et,{CommandManager:()=>b,Editor:()=>Fo,Extension:()=>ce,InputRule:()=>we,Mark:()=>Un,Node:()=>jn,NodeView:()=>mo,PasteRule:()=>gt,Tracker:()=>d,callOrReturn:()=>a,combineTransactionSteps:()=>To,createChainableState:()=>_t,createDocument:()=>sn,createNodeFromContent:()=>Ut,createStyleTag:()=>po,defaultBlockAt:()=>eo,deleteProps:()=>qe,elementFromString:()=>Nt,escapeForRegEx:()=>go,extensions:()=>uo,findChildren:()=>Co,findChildrenInRange:()=>vo,findDuplicates:()=>Vt,findParentNode:()=>Ln,findParentNodeClosestToPos:()=>no,fromString:()=>E,generateHTML:()=>oo,generateJSON:()=>Mo,generateText:()=>io,getAttributes:()=>ro,getAttributesFromExtensions:()=>V,getChangedRanges:()=>yo,getDebugJSON:()=>Bn,getExtensionField:()=>S,getHTMLFromFragment:()=>Fn,getMarkAttributes:()=>Gn,getMarkRange:()=>C,getMarkType:()=>m,getMarksBetween:()=>Xn,getNodeAttributes:()=>zn,getNodeType:()=>H,getRenderedAttributes:()=>wt,getSchema:()=>Kn,getSchemaByResolvedExtensions:()=>F,getSchemaTypeByName:()=>lt,getSchemaTypeNameByName:()=>hn,getSplittedAttributes:()=>Nn,getText:()=>Jn,getTextBetween:()=>be,getTextContentFromNodes:()=>qt,getTextSerializersFromSchema:()=>Re,injectExtensionAttributesToParseRule:()=>D,inputRulesPlugin:()=>$,isActive:()=>$n,isEmptyObject:()=>p,isExtensionRulesEnabled:()=>Rt,isFunction:()=>N,isList:()=>Tn,isMacOS:()=>Pe,isMarkActive:()=>xn,isNodeActive:()=>pe,isNodeEmpty:()=>Zn,isNodeSelection:()=>un,isNumber:()=>at,isPlainObject:()=>re,isRegExp:()=>te,isString:()=>r,isTextSelection:()=>x,isiOS:()=>z,markInputRule:()=>Ko,markPasteRule:()=>Lo,mergeAttributes:()=>Ot,mergeDeep:()=>le,minMax:()=>w,nodeInputRule:()=>Jo,nodePasteRule:()=>o,objectIncludes:()=>Ge,pasteRulesPlugin:()=>Wt,posToDOMRect:()=>Hn,removeDuplicates:()=>In,resolveFocusPosition:()=>K,selectionToInsertionEnd:()=>Qt,splitExtensions:()=>R,textInputRule:()=>ho,textPasteRule:()=>s,textblockTypeInputRule:()=>Ro,wrappingInputRule:()=>fo});var M=c(62463),l=c(43594),y=c(70768),P=c(77346),g=c(38480);const it=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);const X=(e,t,n)=>{let i=function(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}(e,n);if(!i)return!1;let u=Ct(i);if(!u){let T=i.blockRange(),A=T&&(0,g.k9)(T);return null!=A&&(t&&t(e.tr.lift(T,A).scrollIntoView()),!0)}let h=u.nodeBefore;if(!h.type.spec.isolating&&ct(e,u,t))return!0;if(0==i.parent.content.size&&(et(h,"end")||M.qv.isSelectable(h))){let T=(0,g.dR)(e.doc,i.before(),i.after(),P.p2.empty);if(T&&T.slice.size<T.to-T.from){if(t){let A=e.tr.step(T);A.setSelection(et(h,"end")?M.Y1.findFrom(A.doc.resolve(A.mapping.map(u.pos,-1)),-1):M.qv.create(A.doc,u.pos-h.nodeSize)),t(A.scrollIntoView())}return!0}}return!(!h.isAtom||u.depth!=i.depth-1||(t&&t(e.tr.delete(u.pos-h.nodeSize,u.pos).scrollIntoView()),0))};function et(e,t,n=!1){for(let i=e;i;i="start"==t?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&1!=i.childCount)return!1}return!1}const Tt=(e,t,n)=>{let{$head:i,empty:u}=e.selection,h=i;if(!u)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):i.parentOffset>0)return!1;h=Ct(i)}let T=h&&h.nodeBefore;return!(!T||!M.qv.isSelectable(T)||(t&&t(e.tr.setSelection(M.qv.create(e.doc,h.pos-T.nodeSize)).scrollIntoView()),0))};function Ct(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}const It=(e,t,n)=>{let i=function(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}(e,n);if(!i)return!1;let u=Dt(i);if(!u)return!1;let h=u.nodeAfter;if(ct(e,u,t))return!0;if(0==i.parent.content.size&&(et(h,"start")||M.qv.isSelectable(h))){let T=(0,g.dR)(e.doc,i.before(),i.after(),P.p2.empty);if(T&&T.slice.size<T.to-T.from){if(t){let A=e.tr.step(T);A.setSelection(et(h,"start")?M.Y1.findFrom(A.doc.resolve(A.mapping.map(u.pos)),1):M.qv.create(A.doc,A.mapping.map(u.pos))),t(A.scrollIntoView())}return!0}}return!(!h.isAtom||u.depth!=i.depth-1||(t&&t(e.tr.delete(u.pos,u.pos+h.nodeSize).scrollIntoView()),0))},Pt=(e,t,n)=>{let{$head:i,empty:u}=e.selection,h=i;if(!u)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size)return!1;h=Dt(i)}let T=h&&h.nodeAfter;return!(!T||!M.qv.isSelectable(T)||(t&&t(e.tr.setSelection(M.qv.create(e.doc,h.pos)).scrollIntoView()),0))};function Dt(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const mt=(e,t)=>{let{$head:n,$anchor:i}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(i)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))};function j(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const At=(e,t)=>{let{$head:n,$anchor:i}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let u=n.node(-1),h=n.indexAfter(-1),T=j(u.contentMatchAt(h));if(!T||!u.canReplaceWith(h,h,T))return!1;if(t){let A=n.after(),I=e.tr.replaceWith(A,A,T.createAndFill());I.setSelection(M.Y1.near(I.doc.resolve(A),1)),t(I.scrollIntoView())}return!0},St=(e,t)=>{let n=e.selection,{$from:i,$to:u}=n;if(n instanceof M.C1||i.parent.inlineContent||u.parent.inlineContent)return!1;let h=j(u.parent.contentMatchAt(u.indexAfter()));if(!h||!h.isTextblock)return!1;if(t){let T=(!i.parentOffset&&u.index()<u.parent.childCount?i:u).pos,A=e.tr.insert(T,h.createAndFill());A.setSelection(M.Bs.create(A.doc,T+1)),t(A.scrollIntoView())}return!0},yt=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let h=n.before();if((0,g.Ax)(e.doc,h))return t&&t(e.tr.split(h).scrollIntoView()),!0}let i=n.blockRange(),u=i&&(0,g.k9)(i);return null!=u&&(t&&t(e.tr.lift(i,u).scrollIntoView()),!0)};var e;function ct(e,t,n){let h,T,i=t.nodeBefore,u=t.nodeAfter;if(i.type.spec.isolating||u.type.spec.isolating)return!1;if(function(e,t,n){let i=t.nodeBefore,u=t.nodeAfter,h=t.index();return!(!(i&&u&&i.type.compatibleContent(u.type))||(!i.content.size&&t.parent.canReplace(h-1,h)?(n&&n(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(h,h+1)||!u.isTextblock&&!(0,g.Mn)(e.doc,t.pos)||(n&&n(e.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;let A=t.parent.canReplace(t.index(),t.index()+1);if(A&&(h=(T=i.contentMatchAt(i.childCount)).findWrapping(u.type))&&T.matchType(h[0]||u.type).validEnd){if(n){let nt=t.pos+u.nodeSize,dt=P.HY.empty;for(let Zt=h.length-1;Zt>=0;Zt--)dt=P.HY.from(h[Zt].create(null,dt));dt=P.HY.from(i.copy(dt));let Bt=e.tr.step(new g.FC(t.pos-1,nt,t.pos,nt,new P.p2(dt,1,0),h.length,!0)),Jt=nt+2*h.length;(0,g.Mn)(Bt.doc,Jt)&&Bt.join(Jt),n(Bt.scrollIntoView())}return!0}let I=M.Y1.findFrom(t,1),U=I&&I.$from.blockRange(I.$to),Z=U&&(0,g.k9)(U);if(null!=Z&&Z>=t.depth)return n&&n(e.tr.lift(U,Z).scrollIntoView()),!0;if(A&&et(u,"start",!0)&&et(i,"end")){let nt=i,dt=[];for(;dt.push(nt),!nt.isTextblock;)nt=nt.lastChild;let Bt=u,Jt=1;for(;!Bt.isTextblock;Bt=Bt.firstChild)Jt++;if(nt.canReplace(nt.childCount,nt.childCount,Bt.content)){if(n){let Zt=P.HY.empty;for(let oe=dt.length-1;oe>=0;oe--)Zt=P.HY.from(dt[oe].copy(Zt));n(e.tr.step(new g.FC(t.pos-dt.length,t.pos+u.nodeSize,t.pos+Jt,t.pos+u.nodeSize-Jt,new P.p2(Zt,dt.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function st(e){return function(t,n){let i=t.selection,u=e<0?i.$from:i.$to,h=u.depth;for(;u.node(h).isInline;){if(!h)return!1;h--}return!!u.node(h).isTextblock&&(n&&n(t.tr.setSelection(M.Bs.create(t.doc,e<0?u.start(h):u.end(h)))),!0)}}const J=st(-1),Q=st(1);function kt(e,t=null){return function(n,i){let u=!1;for(let h=0;h<n.selection.ranges.length&&!u;h++){let{$from:{pos:T},$to:{pos:A}}=n.selection.ranges[h];n.doc.nodesBetween(T,A,(I,U)=>{if(u)return!1;if(I.isTextblock&&!I.hasMarkup(e,t))if(I.type==e)u=!0;else{let Z=n.doc.resolve(U),nt=Z.index();u=Z.parent.canReplaceWith(nt,nt+1,e)}})}if(!u)return!1;if(i){let h=n.tr;for(let T=0;T<n.selection.ranges.length;T++){let{$from:{pos:A},$to:{pos:I}}=n.selection.ranges[T];h.setBlockType(A,I,e,t)}i(h.scrollIntoView())}return!0}}function ue(...e){return function(t,n,i){for(let u=0;u<e.length;u++)if(e[u](t,n,i))return!0;return!1}}let ye=ue(it,X,Tt),xe=ue(it,It,Pt);const fe={Enter:ue(mt,St,yt,(t,n)=>{let{$from:i,$to:u}=t.selection;if(t.selection instanceof M.qv&&t.selection.node.isBlock)return!(!i.parentOffset||!(0,g.Ax)(t.doc,i.pos)||(n&&n(t.tr.split(i.pos).scrollIntoView()),0));if(!i.parent.isBlock)return!1;if(n){let h=u.parentOffset==u.parent.content.size,T=t.tr;(t.selection instanceof M.Bs||t.selection instanceof M.C1)&&T.deleteSelection();let A=0==i.depth?null:j(i.node(-1).contentMatchAt(i.indexAfter(-1))),I=e,U=I?[I]:h&&A?[{type:A}]:void 0,Z=(0,g.Ax)(T.doc,T.mapping.map(i.pos),1,U);if(!U&&!Z&&(0,g.Ax)(T.doc,T.mapping.map(i.pos),1,A?[{type:A}]:void 0)&&(A&&(U=[{type:A}]),Z=!0),Z&&(T.split(T.mapping.map(i.pos),1,U),!h&&!i.parentOffset&&i.parent.type!=A)){let nt=T.mapping.map(i.before()),dt=T.doc.resolve(nt);A&&i.node(-1).canReplaceWith(dt.index(),dt.index()+1,A)&&T.setNodeMarkup(T.mapping.map(i.before()),A)}n(T.scrollIntoView())}return!0}),"Mod-Enter":At,Backspace:ye,"Mod-Backspace":ye,"Shift-Backspace":ye,Delete:xe,"Mod-Delete":xe,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new M.C1(e.doc))),!0)},Ke={"Ctrl-h":fe.Backspace,"Alt-Backspace":fe["Mod-Backspace"],"Ctrl-d":fe.Delete,"Ctrl-Alt-Backspace":fe["Mod-Delete"],"Alt-Delete":fe["Mod-Delete"],"Alt-d":fe["Mod-Delete"],"Ctrl-a":J,"Ctrl-e":Q};for(let e in fe)Ke[e]=fe[e];function _t(e){const{state:t,transaction:n}=e;let{selection:i}=n,{doc:u}=n,{storedMarks:h}=n;return ge(Gt({},t),{apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),filterTransaction:t.filterTransaction,plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return h},get selection(){return i},get doc(){return u},get tr(){return i=n.selection,u=n.doc,h=n.storedMarks,n}})}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();class b{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:i}=this,{view:u}=n,{tr:h}=i,T=this.buildProps(h);return Object.fromEntries(Object.entries(t).map(([A,I])=>[A,(...Z)=>{const nt=I(...Z)(T);return!h.getMeta("preventDispatch")&&!this.hasCustomState&&u.dispatch(h),nt}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:i,editor:u,state:h}=this,{view:T}=u,A=[],I=!!t,U=t||h.tr,nt=ge(Gt({},Object.fromEntries(Object.entries(i).map(([dt,Bt])=>[dt,(...Zt)=>{const Xt=this.buildProps(U,n),oe=Bt(...Zt)(Xt);return A.push(oe),nt}]))),{run:()=>(!I&&n&&!U.getMeta("preventDispatch")&&!this.hasCustomState&&T.dispatch(U),A.every(dt=>!0===dt))});return nt}createCan(t){const{rawCommands:n,state:i}=this,h=t||i.tr,T=this.buildProps(h,!1),A=Object.fromEntries(Object.entries(n).map(([I,U])=>[I,(...Z)=>U(...Z)(ge(Gt({},T),{dispatch:void 0}))]));return ge(Gt({},A),{chain:()=>this.createChain(h,!1)})}buildProps(t,n=!0){const{rawCommands:i,editor:u,state:h}=this,{view:T}=u;h.storedMarks&&t.setStoredMarks(h.storedMarks);const A={tr:t,editor:u,view:T,state:_t({state:h,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(i).map(([I,U])=>[I,(...Z)=>U(...Z)(A)]))}};return A}}function S(e,t,n){return void 0===e.config[t]&&e.parent?S(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind(ge(Gt({},n),{parent:e.parent?S(e.parent,t,n):null})):e.config[t]}function R(e){return{baseExtensions:e.filter(u=>"extension"===u.type),nodeExtensions:e.filter(u=>"node"===u.type),markExtensions:e.filter(u=>"mark"===u.type)}}function V(e){const t=[],{nodeExtensions:n,markExtensions:i}=R(e),u=[...n,...i],h={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(T=>{const I=S(T,"addGlobalAttributes",{name:T.name,options:T.options,storage:T.storage});I&&I().forEach(Z=>{Z.types.forEach(nt=>{Object.entries(Z.attributes).forEach(([dt,Bt])=>{t.push({type:nt,name:dt,attribute:Gt(Gt({},h),Bt)})})})})}),u.forEach(T=>{const I=S(T,"addAttributes",{name:T.name,options:T.options,storage:T.storage});if(!I)return;const U=I();Object.entries(U).forEach(([Z,nt])=>{const dt=Gt(Gt({},h),nt);(null==nt?void 0:nt.isRequired)&&void 0===(null==nt?void 0:nt.default)&&delete dt.default,t.push({type:T.name,name:Z,attribute:dt})})}),t}function H(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function Ot(...e){return e.filter(t=>!!t).reduce((t,n)=>{const i=Gt({},t);return Object.entries(n).forEach(([u,h])=>{i[u]=i[u]?"class"===u?[i[u],h].join(" "):"style"===u?[i[u],h].join("; "):h:h}),i},{})}function wt(e,t){return t.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,i)=>Ot(n,i),{})}function N(e){return"function"==typeof e}function a(e,t,...n){return N(e)?t?e.bind(t)(...n):e(...n):e}function p(e={}){return 0===Object.keys(e).length&&e.constructor===Object}function E(e){return"string"!=typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}function D(e,t){return e.style?e:ge(Gt({},e),{getAttrs:n=>{const i=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===i)return!1;const u=t.reduce((h,T)=>{const A=T.attribute.parseHTML?T.attribute.parseHTML(n):E(n.getAttribute(T.name));return null==A?h:ge(Gt({},h),{[T.name]:A})},{});return Gt(Gt({},i),u)}})}function k(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>("attrs"!==t||!p(n))&&null!=n))}function F(e){var t;const n=V(e),{nodeExtensions:i,markExtensions:u}=R(e),h=null===(t=i.find(I=>S(I,"topNode")))||void 0===t?void 0:t.name,T=Object.fromEntries(i.map(I=>{const U=n.filter(Xt=>Xt.type===I.name),Z={name:I.name,options:I.options,storage:I.storage},nt=e.reduce((Xt,oe)=>{const Le=S(oe,"extendNodeSchema",Z);return Gt(Gt({},Xt),Le?Le(I):{})},{}),dt=k(ge(Gt({},nt),{content:a(S(I,"content",Z)),marks:a(S(I,"marks",Z)),group:a(S(I,"group",Z)),inline:a(S(I,"inline",Z)),atom:a(S(I,"atom",Z)),selectable:a(S(I,"selectable",Z)),draggable:a(S(I,"draggable",Z)),code:a(S(I,"code",Z)),defining:a(S(I,"defining",Z)),isolating:a(S(I,"isolating",Z)),attrs:Object.fromEntries(U.map(Xt=>{var oe;return[Xt.name,{default:null===(oe=null==Xt?void 0:Xt.attribute)||void 0===oe?void 0:oe.default}]}))})),Bt=a(S(I,"parseHTML",Z));Bt&&(dt.parseDOM=Bt.map(Xt=>D(Xt,U)));const Jt=S(I,"renderHTML",Z);Jt&&(dt.toDOM=Xt=>Jt({node:Xt,HTMLAttributes:wt(Xt,U)}));const Zt=S(I,"renderText",Z);return Zt&&(dt.toText=Zt),[I.name,dt]})),A=Object.fromEntries(u.map(I=>{const U=n.filter(Zt=>Zt.type===I.name),Z={name:I.name,options:I.options,storage:I.storage},nt=e.reduce((Zt,Xt)=>{const oe=S(Xt,"extendMarkSchema",Z);return Gt(Gt({},Zt),oe?oe(I):{})},{}),dt=k(ge(Gt({},nt),{inclusive:a(S(I,"inclusive",Z)),excludes:a(S(I,"excludes",Z)),group:a(S(I,"group",Z)),spanning:a(S(I,"spanning",Z)),code:a(S(I,"code",Z)),attrs:Object.fromEntries(U.map(Zt=>{var Xt;return[Zt.name,{default:null===(Xt=null==Zt?void 0:Zt.attribute)||void 0===Xt?void 0:Xt.default}]}))})),Bt=a(S(I,"parseHTML",Z));Bt&&(dt.parseDOM=Bt.map(Zt=>D(Zt,U)));const Jt=S(I,"renderHTML",Z);return Jt&&(dt.toDOM=Zt=>Jt({mark:Zt,HTMLAttributes:wt(Zt,U)})),[I.name,dt]}));return new P.V_({topNode:h,nodes:T,marks:A})}function lt(e,t){return t.nodes[e]||t.marks[e]||null}function Rt(e,t){return Array.isArray(t)?t.some(n=>("string"==typeof n?n:n.name)===e.name):t}const qt=(e,t=500)=>{let n="";const i=e.parentOffset;return e.parent.nodesBetween(Math.max(0,i-t),i,(u,h,T,A)=>{var I,U;n+=((null===(U=(I=u.type.spec).toText)||void 0===U?void 0:U.call(I,{node:u,pos:h,parent:T,index:A}))||u.textContent||"%leaf%").slice(0,Math.max(0,i-h))}),n};function te(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class we{constructor(t){this.find=t.find,this.handler=t.handler}}function Y(e){var t;const{editor:n,from:i,to:u,text:h,rules:T,plugin:A}=e,{view:I}=n;if(I.composing)return!1;const U=I.state.doc.resolve(i);if(U.parent.type.spec.code||(null===(t=U.nodeBefore||U.nodeAfter)||void 0===t?void 0:t.marks.find(dt=>dt.type.spec.code)))return!1;let Z=!1;const nt=qt(U)+h;return T.forEach(dt=>{if(Z)return;const Bt=((e,t)=>{if(te(t))return t.exec(e);const n=t(e);if(!n)return null;const i=[n.text];return i.index=n.index,i.input=e,i.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(n.replaceWith)),i})(nt,dt.find);if(!Bt)return;const Jt=I.state.tr,Zt=_t({state:I.state,transaction:Jt}),Xt={from:i-(Bt[0].length-h.length),to:u},{commands:oe,chain:Le,can:Ve}=new b({editor:n,state:Zt});null===dt.handler({state:Zt,range:Xt,match:Bt,commands:oe,chain:Le,can:Ve})||!Jt.steps.length||(Jt.setMeta(A,{transform:Jt,from:i,to:u,text:h}),I.dispatch(Jt),Z=!0)}),Z}function $(e){const{editor:t,rules:n}=e,i=new M.Sy({state:{init:()=>null,apply:(u,h)=>u.getMeta(i)||(u.selectionSet||u.docChanged?null:h)},props:{handleTextInput:(u,h,T,A)=>Y({editor:t,from:h,to:T,text:A,rules:n,plugin:i}),handleDOMEvents:{compositionend:u=>(setTimeout(()=>{const{$cursor:h}=u.state.selection;h&&Y({editor:t,from:h.pos,to:h.pos,text:"",rules:n,plugin:i})}),!1)},handleKeyDown(u,h){if("Enter"!==h.key)return!1;const{$cursor:T}=u.state.selection;return!!T&&Y({editor:t,from:T.pos,to:T.pos,text:"\n",rules:n,plugin:i})}},isInputRules:!0});return i}function at(e){return"number"==typeof e}class gt{constructor(t){this.find=t.find,this.handler=t.handler}}function Wt(e){const{editor:t,rules:n}=e;let i=null,u=!1,h=!1;return n.map(A=>new M.Sy({view(I){const U=Z=>{var nt;i=(null===(nt=I.dom.parentElement)||void 0===nt?void 0:nt.contains(Z.target))?I.dom.parentElement:null};return window.addEventListener("dragstart",U),{destroy(){window.removeEventListener("dragstart",U)}}},props:{handleDOMEvents:{drop:I=>(h=i===I.dom.parentElement,!1),paste:(I,U)=>{var Z;const nt=null===(Z=U.clipboardData)||void 0===Z?void 0:Z.getData("text/html");return u=!!(null==nt?void 0:nt.includes("data-pm-slice")),!1}}},appendTransaction:(I,U,Z)=>{const nt=I[0],dt="paste"===nt.getMeta("uiEvent")&&!u,Bt="drop"===nt.getMeta("uiEvent")&&!h;if(!dt&&!Bt)return;const Jt=U.doc.content.findDiffStart(Z.doc.content),Zt=U.doc.content.findDiffEnd(Z.doc.content);if(!at(Jt)||!Zt||Jt===Zt.b)return;const Xt=Z.tr,oe=_t({state:Z,transaction:Xt});return function(e){const{editor:t,state:n,from:i,to:u,rule:h}=e,{commands:T,chain:A,can:I}=new b({editor:t,state:n}),U=[];return n.doc.nodesBetween(i,u,(nt,dt)=>{if(!nt.isTextblock||nt.type.spec.code)return;const Bt=Math.max(i,dt),Jt=Math.min(u,dt+nt.content.size);((e,t)=>{if(te(t))return[...e.matchAll(t)];const n=t(e);return n?n.map(i=>{const u=[i.text];return u.index=i.index,u.input=e,u.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),u.push(i.replaceWith)),u}):[]})(nt.textBetween(Bt-dt,Jt-dt,void 0,"\ufffc"),h.find).forEach(oe=>{if(void 0===oe.index)return;const Le=Bt+oe.index+1,Ve=Le+oe[0].length,ae={from:n.tr.mapping.map(Le),to:n.tr.mapping.map(Ve)},tn=h.handler({state:n,range:ae,match:oe,commands:T,chain:A,can:I});U.push(tn)})}),U.every(nt=>null!==nt)}({editor:t,state:oe,from:Math.max(Jt-1,0),to:Zt.b-1,rule:A})&&Xt.steps.length?Xt:void 0}}))}function Vt(e){const t=e.filter((n,i)=>e.indexOf(n)!==i);return[...new Set(t)]}class ee{constructor(t,n){this.splittableMarks=[],this.editor=n,this.extensions=ee.resolve(t),this.schema=F(this.extensions),this.extensions.forEach(i=>{var u;this.editor.extensionStorage[i.name]=i.storage;const h={name:i.name,options:i.options,storage:i.storage,editor:this.editor,type:lt(i.name,this.schema)};"mark"===i.type&&(null===(u=a(S(i,"keepOnSplit",h)))||void 0===u||u)&&this.splittableMarks.push(i.name);const T=S(i,"onBeforeCreate",h);T&&this.editor.on("beforeCreate",T);const A=S(i,"onCreate",h);A&&this.editor.on("create",A);const I=S(i,"onUpdate",h);I&&this.editor.on("update",I);const U=S(i,"onSelectionUpdate",h);U&&this.editor.on("selectionUpdate",U);const Z=S(i,"onTransaction",h);Z&&this.editor.on("transaction",Z);const nt=S(i,"onFocus",h);nt&&this.editor.on("focus",nt);const dt=S(i,"onBlur",h);dt&&this.editor.on("blur",dt);const Bt=S(i,"onDestroy",h);Bt&&this.editor.on("destroy",Bt)})}static resolve(t){const n=ee.sort(ee.flatten(t)),i=Vt(n.map(u=>u.name));return i.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${i.map(u=>`'${u}'`).join(", ")}]. This can lead to issues.`),n}static flatten(t){return t.map(n=>{const u=S(n,"addExtensions",{name:n.name,options:n.options,storage:n.storage});return u?[n,...this.flatten(u())]:n}).flat(10)}static sort(t){return t.sort((i,u)=>{const h=S(i,"priority")||100,T=S(u,"priority")||100;return h>T?-1:h<T?1:0})}get commands(){return this.extensions.reduce((t,n)=>{const u=S(n,"addCommands",{name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:lt(n.name,this.schema)});return u?Gt(Gt({},t),u()):t},{})}get plugins(){const{editor:t}=this,n=ee.sort([...this.extensions].reverse()),i=[],u=[],h=n.map(T=>{const A={name:T.name,options:T.options,storage:T.storage,editor:t,type:lt(T.name,this.schema)},I=[],U=S(T,"addKeyboardShortcuts",A);let Z={};if("mark"===T.type&&T.config.exitable&&(Z.ArrowRight=()=>Un.handleExit({editor:t,mark:T})),U){const Zt=Object.fromEntries(Object.entries(U()).map(([Xt,oe])=>[Xt,()=>oe({editor:t})]));Z=Gt(Gt({},Z),Zt)}const nt=(0,y.h)(Z);I.push(nt);const dt=S(T,"addInputRules",A);Rt(T,t.options.enableInputRules)&&dt&&i.push(...dt());const Bt=S(T,"addPasteRules",A);Rt(T,t.options.enablePasteRules)&&Bt&&u.push(...Bt());const Jt=S(T,"addProseMirrorPlugins",A);if(Jt){const Zt=Jt();I.push(...Zt)}return I}).flat();return[$({editor:t,rules:i}),...Wt({editor:t,rules:u}),...h]}get attributes(){return V(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:n}=R(this.extensions);return Object.fromEntries(n.filter(i=>!!S(i,"addNodeView")).map(i=>{const u=this.attributes.filter(I=>I.type===i.name),h={name:i.name,options:i.options,storage:i.storage,editor:t,type:H(i.name,this.schema)},T=S(i,"addNodeView",h);return T?[i.name,(I,U,Z,nt)=>{const dt=wt(I,u);return T()({editor:t,node:I,getPos:Z,decorations:nt,HTMLAttributes:dt,extension:i})}]:[]}))}}function re(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function le(e,t){const n=Gt({},e);return re(e)&&re(t)&&Object.keys(t).forEach(i=>{re(t[i])?i in e?n[i]=le(e[i],t[i]):Object.assign(n,{[i]:t[i]}):Object.assign(n,{[i]:t[i]})}),n}class ce{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Gt(Gt({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(S(this,"addOptions",{name:this.name}))),this.storage=a(S(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new ce(t)}configure(t={}){const n=this.extend();return n.options=le(this.options,t),n.storage=a(S(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new ce(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=a(S(n,"addOptions",{name:n.name})),n.storage=a(S(n,"addStorage",{name:n.name,options:n.options})),n}}function be(e,t,n){const{from:i,to:u}=t,{blockSeparator:h="\n\n",textSerializers:T={}}=n||{};let A="",I=!0;return e.nodesBetween(i,u,(U,Z,nt,dt)=>{var Bt;const Jt=null==T?void 0:T[U.type.name];Jt?(U.isBlock&&!I&&(A+=h,I=!0),nt&&(A+=Jt({node:U,pos:Z,parent:nt,index:dt,range:t}))):U.isText?(A+=null===(Bt=null==U?void 0:U.text)||void 0===Bt?void 0:Bt.slice(Math.max(i,Z)-Z,u-Z),I=!1):U.isBlock&&!I&&(A+=h,I=!0)}),A}function Re(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}const en=ce.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new M.Sy({key:new M.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:i,selection:u}=t,{ranges:h}=u;return be(i,{from:Math.min(...h.map(Z=>Z.$from.pos)),to:Math.max(...h.map(Z=>Z.$to.pos))},{textSerializers:Re(n)})}}})]}});function Ge(e,t,n={strict:!0}){const i=Object.keys(t);return!i.length||i.every(u=>n.strict?t[u]===e[u]:te(t[u])?t[u].test(e[u]):t[u]===e[u])}function Xe(e,t,n={}){return e.find(i=>i.type===t&&Ge(i.attrs,n))}function _(e,t,n={}){return!!Xe(e,t,n)}function C(e,t,n={}){if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if(e.parentOffset===i.offset&&0!==i.offset&&(i=e.parent.childBefore(e.parentOffset)),!i.node)return;const u=Xe([...i.node.marks],t,n);if(!u)return;let h=i.index,T=e.start()+i.offset,A=h+1,I=T+i.node.nodeSize;for(Xe([...i.node.marks],t,n);h>0&&u.isInSet(e.parent.child(h-1).marks);)h-=1,T-=e.parent.child(h).nodeSize;for(;A<e.parent.childCount&&_([...e.parent.child(A).marks],t,n);)I+=e.parent.child(A).nodeSize,A+=1;return{from:T,to:I}}function m(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function x(e){return e instanceof M.Bs}function w(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function K(e,t=null){if(!t)return null;const n=M.Y1.atStart(e),i=M.Y1.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return i;const u=n.from,h=i.to;return"all"===t?M.Bs.create(e,w(0,u,h),w(e.content.size,u,h)):M.Bs.create(e,w(t,u,h),w(t,u,h))}function z(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Nt(e){const t=`<body>${e}</body>`;return(new window.DOMParser).parseFromString(t,"text/html").body}function Ut(e,t,n){if(n=Gt({slice:!0,parseOptions:{}},n),"object"==typeof e&&null!==e)try{return Array.isArray(e)&&e.length>0?P.HY.fromArray(e.map(i=>t.nodeFromJSON(i))):t.nodeFromJSON(e)}catch(i){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",i),Ut("",t,n)}if("string"==typeof e){const i=P.aw.fromSchema(t);return n.slice?i.parseSlice(Nt(e),n.parseOptions).content:i.parse(Nt(e),n.parseOptions)}return Ut("",t,n)}function Qt(e,t,n){const i=e.steps.length-1;if(i<t)return;const u=e.steps[i];if(!(u instanceof g.Pu||u instanceof g.FC))return;let T=0;e.mapping.maps[i].forEach((A,I,U,Z)=>{0===T&&(T=Z)}),e.setSelection(M.Y1.near(e.doc.resolve(T),n))}function Pe(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function pe(e,t,n={}){const{from:i,to:u,empty:h}=e.selection,T=t?H(t,e.schema):null,A=[];e.doc.nodesBetween(i,u,(nt,dt)=>{if(nt.isText)return;const Bt=Math.max(i,dt),Jt=Math.min(u,dt+nt.nodeSize);A.push({node:nt,from:Bt,to:Jt})});const I=u-i,U=A.filter(nt=>!T||T.name===nt.node.type.name).filter(nt=>Ge(nt.node.attrs,n,{strict:!1}));return h?!!U.length:U.reduce((nt,dt)=>nt+dt.to-dt.from,0)>=I}function hn(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function qe(e,t){const n="string"==typeof t?[t]:t;return Object.keys(e).reduce((i,u)=>(n.includes(u)||(i[u]=e[u]),i),{})}function sn(e,t,n={}){return Ut(e,t,{slice:!1,parseOptions:n})}function To(e,t){const n=new g.wx(e);return t.forEach(i=>{i.steps.forEach(u=>{n.step(u)})}),n}function eo(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Co(e,t){const n=[];return e.descendants((i,u)=>{t(i)&&n.push({node:i,pos:u})}),n}function vo(e,t,n){const i=[];return e.nodesBetween(t.from,t.to,(u,h)=>{n(u)&&i.push({node:u,pos:h})}),i}function no(e,t){for(let n=e.depth;n>0;n-=1){const i=e.node(n);if(t(i))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:i}}}function Ln(e){return t=>no(t.$from,e)}function Fn(e,t){const n=P.PW.fromSchema(t).serializeFragment(e),u=document.implementation.createHTMLDocument().createElement("div");return u.appendChild(n),u.innerHTML}function Kn(e){return F(ee.resolve(e))}function oo(e,t){const n=Kn(t);return Fn(P.NB.fromJSON(n,e).content,n)}function Mo(e,t){const n=Kn(t),i=Nt(e);return P.aw.fromSchema(n).parse(i).toJSON()}function Jn(e,t){return be(e,{from:0,to:e.content.size},t)}function io(e,t,n){const{blockSeparator:i="\n\n",textSerializers:u={}}=n||{},h=Kn(t);return Jn(P.NB.fromJSON(h,e),{blockSeparator:i,textSerializers:Gt(Gt({},Re(h)),u)})}function Gn(e,t){const n=m(t,e.schema),{from:i,to:u,empty:h}=e.selection,T=[];h?(e.storedMarks&&T.push(...e.storedMarks),T.push(...e.selection.$head.marks())):e.doc.nodesBetween(i,u,I=>{T.push(...I.marks)});const A=T.find(I=>I.type.name===n.name);return A?Gt({},A.attrs):{}}function zn(e,t){const n=H(t,e.schema),{from:i,to:u}=e.selection,h=[];e.doc.nodesBetween(i,u,A=>{h.push(A)});const T=h.reverse().find(A=>A.type.name===n.name);return T?Gt({},T.attrs):{}}function ro(e,t){const n=hn("string"==typeof t?t:t.name,e.schema);return"node"===n?zn(e,t):"mark"===n?Gn(e,t):{}}function In(e,t=JSON.stringify){const n={};return e.filter(i=>{const u=t(i);return!Object.prototype.hasOwnProperty.call(n,u)&&(n[u]=!0)})}function yo(e){const{mapping:t,steps:n}=e,i=[];return t.maps.forEach((u,h)=>{const T=[];if(u.ranges.length)u.forEach((A,I)=>{T.push({from:A,to:I})});else{const{from:A,to:I}=n[h];if(void 0===A||void 0===I)return;T.push({from:A,to:I})}T.forEach(({from:A,to:I})=>{const U=t.slice(h).map(A,-1),Z=t.slice(h).map(I),nt=t.invert().map(U,-1),dt=t.invert().map(Z);i.push({oldRange:{from:nt,to:dt},newRange:{from:U,to:Z}})})}),function(e){const t=In(e);return 1===t.length?t:t.filter((n,i)=>!t.filter((h,T)=>T!==i).some(h=>n.oldRange.from>=h.oldRange.from&&n.oldRange.to<=h.oldRange.to&&n.newRange.from>=h.newRange.from&&n.newRange.to<=h.newRange.to))}(i)}function Bn(e,t=0){const i=e.type===e.type.schema.topNodeType?0:1,u=t,h=u+e.nodeSize,T=e.marks.map(U=>{const Z={type:U.type.name};return Object.keys(U.attrs).length&&(Z.attrs=Gt({},U.attrs)),Z}),A=Gt({},e.attrs),I={type:e.type.name,from:u,to:h};return Object.keys(A).length&&(I.attrs=A),T.length&&(I.marks=T),e.content.childCount&&(I.content=[],e.forEach((U,Z)=>{var nt;null===(nt=I.content)||void 0===nt||nt.push(Bn(U,t+Z+i))})),e.text&&(I.text=e.text),I}function Xn(e,t,n){const i=[];return e===t?n.resolve(e).marks().forEach(u=>{const T=C(n.resolve(e-1),u.type);!T||i.push(Gt({mark:u},T))}):n.nodesBetween(e,t,(u,h)=>{i.push(...u.marks.map(T=>({from:h,to:h+u.nodeSize,mark:T})))}),i}function Nn(e,t,n){return Object.fromEntries(Object.entries(n).filter(([i])=>{const u=e.find(h=>h.type===t&&h.name===i);return!!u&&u.attribute.keepOnSplit}))}function xn(e,t,n={}){const{empty:i,ranges:u}=e.selection,h=t?m(t,e.schema):null;if(i)return!!(e.storedMarks||e.selection.$from.marks()).filter(nt=>!h||h.name===nt.type.name).find(nt=>Ge(nt.attrs,n,{strict:!1}));let T=0;const A=[];if(u.forEach(({$from:nt,$to:dt})=>{const Bt=nt.pos,Jt=dt.pos;e.doc.nodesBetween(Bt,Jt,(Zt,Xt)=>{if(!Zt.isText&&!Zt.marks.length)return;const oe=Math.max(Bt,Xt),Le=Math.min(Jt,Xt+Zt.nodeSize);T+=Le-oe,A.push(...Zt.marks.map(ae=>({mark:ae,from:oe,to:Le})))})}),0===T)return!1;const I=A.filter(nt=>!h||h.name===nt.mark.type.name).filter(nt=>Ge(nt.mark.attrs,n,{strict:!1})).reduce((nt,dt)=>nt+dt.to-dt.from,0),U=A.filter(nt=>!h||nt.mark.type!==h&&nt.mark.type.excludes(h)).reduce((nt,dt)=>nt+dt.to-dt.from,0);return(I>0?I+U:I)>=T}function $n(e,t,n={}){if(!t)return pe(e,null,n)||xn(e,null,n);const i=hn(t,e.schema);return"node"===i?pe(e,t,n):"mark"===i&&xn(e,t,n)}function Tn(e,t){const{nodeExtensions:n}=R(t),i=n.find(T=>T.name===e);if(!i)return!1;const h=a(S(i,"group",{name:i.name,options:i.options,storage:i.storage}));return"string"==typeof h&&h.split(" ").includes("list")}function Zn(e){var t;const n=null===(t=e.type.createAndFill())||void 0===t?void 0:t.toJSON(),i=e.toJSON();return JSON.stringify(n)===JSON.stringify(i)}function un(e){return e instanceof M.qv}function Hn(e,t,n){const u=e.state.doc.content.size,h=w(t,0,u),T=w(n,0,u),A=e.coordsAtPos(h),I=e.coordsAtPos(T,-1),U=Math.min(A.top,I.top),Z=Math.max(A.bottom,I.bottom),nt=Math.min(A.left,I.left),dt=Math.max(A.right,I.right),oe={top:U,bottom:Z,left:nt,right:dt,width:dt-nt,height:Z-U,x:nt,y:U};return ge(Gt({},oe),{toJSON:()=>oe})}function qn(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const i=n.filter(u=>null==t?void 0:t.includes(u.type.name));e.tr.ensureMarks(i)}}const yn=(e,t)=>{const n=Ln(T=>T.type===t)(e.selection);if(!n)return!0;const i=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===i)return!0;const u=e.doc.nodeAt(i);return n.node.type===(null==u?void 0:u.type)&&(0,g.Mn)(e.doc,n.pos)&&e.join(n.pos),!0},Wn=(e,t)=>{const n=Ln(T=>T.type===t)(e.selection);if(!n)return!0;const i=e.doc.resolve(n.start).after(n.depth);if(void 0===i)return!0;const u=e.doc.nodeAt(i);return n.node.type===(null==u?void 0:u.type)&&(0,g.Mn)(e.doc,i)&&e.join(i),!0};var Po=Object.freeze({__proto__:null,blur:()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),null===(n=null==window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())}),!0),clearContent:(e=!1)=>({commands:t})=>t.setContent("",e),clearNodes:()=>({state:e,tr:t,dispatch:n})=>{const{selection:i}=t,{ranges:u}=i;return n&&u.forEach(({$from:h,$to:T})=>{e.doc.nodesBetween(h.pos,T.pos,(A,I)=>{if(A.type.isText)return;const{doc:U,mapping:Z}=t,nt=U.resolve(Z.map(I)),dt=U.resolve(Z.map(I+A.nodeSize)),Bt=nt.blockRange(dt);if(!Bt)return;const Jt=(0,g.k9)(Bt);if(A.type.isTextblock){const{defaultType:Zt}=nt.parent.contentMatchAt(nt.index());t.setNodeMarkup(Bt.start,Zt)}(Jt||0===Jt)&&t.lift(Bt,Jt)})}),!0},command:e=>t=>e(t),createParagraphNear:()=>({state:e,dispatch:t})=>St(e,t),deleteCurrentNode:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,i=n.$anchor.node();if(i.content.size>0)return!1;const u=e.selection.$anchor;for(let h=u.depth;h>0;h-=1)if(u.node(h).type===i.type){if(t){const A=u.before(h),I=u.after(h);e.delete(A,I).scrollIntoView()}return!0}return!1},deleteNode:e=>({tr:t,state:n,dispatch:i})=>{const u=H(e,n.schema),h=t.selection.$anchor;for(let T=h.depth;T>0;T-=1)if(h.node(T).type===u){if(i){const I=h.before(T),U=h.after(T);t.delete(I,U).scrollIntoView()}return!0}return!1},deleteRange:e=>({tr:t,dispatch:n})=>{const{from:i,to:u}=e;return n&&t.delete(i,u),!0},deleteSelection:()=>({state:e,dispatch:t})=>it(e,t),enter:()=>({commands:e})=>e.keyboardShortcut("Enter"),exitCode:()=>({state:e,dispatch:t})=>At(e,t),extendMarkRange:(e,t={})=>({tr:n,state:i,dispatch:u})=>{const h=m(e,i.schema),{doc:T,selection:A}=n,{$from:I,from:U,to:Z}=A;if(u){const nt=C(I,h,t);if(nt&&nt.from<=U&&nt.to>=Z){const dt=M.Bs.create(T,nt.from,nt.to);n.setSelection(dt)}}return!0},first:e=>t=>{const n="function"==typeof e?e(t):e;for(let i=0;i<n.length;i+=1)if(n[i](t))return!0;return!1},focus:(e=null,t={})=>({editor:n,view:i,tr:u,dispatch:h})=>{t=Gt({scrollIntoView:!0},t);const T=()=>{z()&&i.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(i.focus(),(null==t?void 0:t.scrollIntoView)&&n.commands.scrollIntoView())})};if(i.hasFocus()&&null===e||!1===e)return!0;if(h&&null===e&&!x(n.state.selection))return T(),!0;const A=K(u.doc,e)||n.state.selection,I=n.state.selection.eq(A);return h&&(I||u.setSelection(A),I&&u.storedMarks&&u.setStoredMarks(u.storedMarks),T()),!0},forEach:(e,t)=>n=>e.every((i,u)=>t(i,ge(Gt({},n),{index:u}))),insertContent:(e,t)=>({tr:n,commands:i})=>i.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),insertContentAt:(e,t,n)=>({tr:i,dispatch:u,editor:h})=>{if(u){n=Gt({parseOptions:{},updateSelection:!0},n);const T=Ut(t,h.schema,{parseOptions:Gt({preserveWhitespace:"full"},n.parseOptions)});if("<>"===T.toString())return!0;let{from:A,to:I}="number"==typeof e?{from:e,to:e}:e,U=!0,Z=!0;if(((e=>e.toString().startsWith("<"))(T)?T:[T]).forEach(dt=>{dt.check(),U=!!U&&dt.isText&&0===dt.marks.length,Z=!!Z&&dt.isBlock}),A===I&&Z){const{parent:dt}=i.doc.resolve(A);dt.isTextblock&&!dt.type.spec.code&&!dt.childCount&&(A-=1,I+=1)}U?Array.isArray(t)?i.insertText(t.map(dt=>dt.text||"").join(""),A,I):i.insertText("object"==typeof t&&t&&t.text?t.text:t,A,I):i.replaceWith(A,I,T),n.updateSelection&&Qt(i,i.steps.length-1,-1)}return!0},joinUp:()=>({state:e,dispatch:t})=>((e,t)=>{let u,n=e.selection,i=n instanceof M.qv;if(i){if(n.node.isTextblock||!(0,g.Mn)(e.doc,n.from))return!1;u=n.from}else if(u=(0,g.GJ)(e.doc,n.from,-1),null==u)return!1;if(t){let h=e.tr.join(u);i&&h.setSelection(M.qv.create(h.doc,u-e.doc.resolve(u).nodeBefore.nodeSize)),t(h.scrollIntoView())}return!0})(e,t),joinDown:()=>({state:e,dispatch:t})=>((e,t)=>{let i,n=e.selection;if(n instanceof M.qv){if(n.node.isTextblock||!(0,g.Mn)(e.doc,n.to))return!1;i=n.to}else if(i=(0,g.GJ)(e.doc,n.to,1),null==i)return!1;return t&&t(e.tr.join(i).scrollIntoView()),!0})(e,t),joinBackward:()=>({state:e,dispatch:t})=>X(e,t),joinForward:()=>({state:e,dispatch:t})=>It(e,t),keyboardShortcut:e=>({editor:t,view:n,tr:i,dispatch:u})=>{const h=function(e){const t=e.split(/-(?!$)/);let i,u,h,T,n=t[t.length-1];"Space"===n&&(n=" ");for(let A=0;A<t.length-1;A+=1){const I=t[A];if(/^(cmd|meta|m)$/i.test(I))T=!0;else if(/^a(lt)?$/i.test(I))i=!0;else if(/^(c|ctrl|control)$/i.test(I))u=!0;else if(/^s(hift)?$/i.test(I))h=!0;else{if(!/^mod$/i.test(I))throw new Error(`Unrecognized modifier name: ${I}`);z()||Pe()?T=!0:u=!0}}return i&&(n=`Alt-${n}`),u&&(n=`Ctrl-${n}`),T&&(n=`Meta-${n}`),h&&(n=`Shift-${n}`),n}(e).split(/-(?!$)/),T=h.find(U=>!["Alt","Ctrl","Meta","Shift"].includes(U)),A=new KeyboardEvent("keydown",{key:"Space"===T?" ":T,altKey:h.includes("Alt"),ctrlKey:h.includes("Ctrl"),metaKey:h.includes("Meta"),shiftKey:h.includes("Shift"),bubbles:!0,cancelable:!0}),I=t.captureTransaction(()=>{n.someProp("handleKeyDown",U=>U(n,A))});return null==I||I.steps.forEach(U=>{const Z=U.map(i.mapping);Z&&u&&i.maybeStep(Z)}),!0},lift:(e,t={})=>({state:n,dispatch:i})=>!!pe(n,H(e,n.schema),t)&&((e,t)=>{let{$from:n,$to:i}=e.selection,u=n.blockRange(i),h=u&&(0,g.k9)(u);return null!=h&&(t&&t(e.tr.lift(u,h).scrollIntoView()),!0)})(n,i),liftEmptyBlock:()=>({state:e,dispatch:t})=>yt(e,t),liftListItem:e=>({state:t,dispatch:n})=>function(e){return function(t,n){let{$from:i,$to:u}=t.selection,h=i.blockRange(u,T=>T.childCount>0&&T.firstChild.type==e);return!!h&&(!n||(i.node(h.depth-1).type==e?function(e,t,n,i){let u=e.tr,h=i.end,T=i.$to.end(i.depth);h<T&&(u.step(new g.FC(h-1,T,h,T,new P.p2(P.HY.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new P.Ts(u.doc.resolve(i.$from.pos),u.doc.resolve(T),i.depth));const A=(0,g.k9)(i);if(null==A)return!1;u.lift(i,A);let I=u.mapping.map(h,-1)-1;return(0,g.Mn)(u.doc,I)&&u.join(I),t(u.scrollIntoView()),!0}(t,n,e,h):function(e,t,n){let i=e.tr,u=n.parent;for(let Bt=n.end,Jt=n.endIndex-1,Zt=n.startIndex;Jt>Zt;Jt--)Bt-=u.child(Jt).nodeSize,i.delete(Bt-1,Bt+1);let h=i.doc.resolve(n.start),T=h.nodeAfter;if(i.mapping.map(n.end)!=n.start+h.nodeAfter.nodeSize)return!1;let A=0==n.startIndex,I=n.endIndex==u.childCount,U=h.node(-1),Z=h.index(-1);if(!U.canReplace(Z+(A?0:1),Z+1,T.content.append(I?P.HY.empty:P.HY.from(u))))return!1;let nt=h.pos,dt=nt+T.nodeSize;return i.step(new g.FC(nt-(A?1:0),dt+(I?1:0),nt+1,dt-1,new P.p2((A?P.HY.empty:P.HY.from(u.copy(P.HY.empty))).append(I?P.HY.empty:P.HY.from(u.copy(P.HY.empty))),A?0:1,I?0:1),A?0:1)),t(i.scrollIntoView()),!0}(t,n,h)))}}(H(e,t.schema))(t,n),newlineInCode:()=>({state:e,dispatch:t})=>mt(e,t),resetAttributes:(e,t)=>({tr:n,state:i,dispatch:u})=>{let h=null,T=null;const A=hn("string"==typeof e?e:e.name,i.schema);return!!A&&("node"===A&&(h=H(e,i.schema)),"mark"===A&&(T=m(e,i.schema)),u&&n.selection.ranges.forEach(I=>{i.doc.nodesBetween(I.$from.pos,I.$to.pos,(U,Z)=>{h&&h===U.type&&n.setNodeMarkup(Z,void 0,qe(U.attrs,t)),T&&U.marks.length&&U.marks.forEach(nt=>{T===nt.type&&n.addMark(Z,Z+U.nodeSize,T.create(qe(nt.attrs,t)))})})}),!0)},scrollIntoView:()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),selectAll:()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size}),selectNodeBackward:()=>({state:e,dispatch:t})=>Tt(e,t),selectNodeForward:()=>({state:e,dispatch:t})=>Pt(e,t),selectParentNode:()=>({state:e,dispatch:t})=>((e,t)=>{let u,{$from:n,to:i}=e.selection,h=n.sharedDepth(i);return 0!=h&&(u=n.before(h),t&&t(e.tr.setSelection(M.qv.create(e.doc,u))),!0)})(e,t),selectTextblockEnd:()=>({state:e,dispatch:t})=>Q(e,t),selectTextblockStart:()=>({state:e,dispatch:t})=>J(e,t),setContent:(e,t=!1,n={})=>({tr:i,editor:u,dispatch:h})=>{const{doc:T}=i,A=sn(e,u.schema,n);return h&&i.replaceWith(0,T.content.size,A).setMeta("preventUpdate",!t),!0},setMark:(e,t={})=>({tr:n,state:i,dispatch:u})=>{const{selection:h}=n,{empty:T,ranges:A}=h,I=m(e,i.schema);if(u)if(T){const U=Gn(i,I);n.addStoredMark(I.create(Gt(Gt({},U),t)))}else A.forEach(U=>{const Z=U.$from.pos,nt=U.$to.pos;i.doc.nodesBetween(Z,nt,(dt,Bt)=>{const Jt=Math.max(Bt,Z),Zt=Math.min(Bt+dt.nodeSize,nt);dt.marks.find(oe=>oe.type===I)?dt.marks.forEach(oe=>{I===oe.type&&n.addMark(Jt,Zt,I.create(Gt(Gt({},oe.attrs),t)))}):n.addMark(Jt,Zt,I.create(t))})});return function(e,t,n){var i;const{selection:u}=t;let h=null;if(x(u)&&(h=u.$cursor),h){const A=null!==(i=e.storedMarks)&&void 0!==i?i:h.marks();return!!n.isInSet(A)||!A.some(I=>I.type.excludes(n))}const{ranges:T}=u;return T.some(({$from:A,$to:I})=>{let U=0===A.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(A.pos,I.pos,(Z,nt,dt)=>{if(U)return!1;if(Z.isInline){const Bt=!dt||dt.type.allowsMarkType(n),Jt=!!n.isInSet(Z.marks)||!Z.marks.some(Zt=>Zt.type.excludes(n));U=Bt&&Jt}return!U}),U})}(i,n,I)},setMeta:(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),setNode:(e,t={})=>({state:n,dispatch:i,chain:u})=>{const h=H(e,n.schema);return h.isTextblock?u().command(({commands:T})=>!!kt(h,t)(n)||T.clearNodes()).command(({state:T})=>kt(h,t)(T,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:i}=t,u=w(e,0,i.content.size),h=M.qv.create(i,u);t.setSelection(h)}return!0},setTextSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:i}=t,{from:u,to:h}="number"==typeof e?{from:e,to:e}:e,T=M.Bs.atStart(i).from,A=M.Bs.atEnd(i).to,I=w(u,T,A),U=w(h,T,A),Z=M.Bs.create(i,I,U);t.setSelection(Z)}return!0},sinkListItem:e=>({state:t,dispatch:n})=>function(e){return function(t,n){let{$from:i,$to:u}=t.selection,h=i.blockRange(u,U=>U.childCount>0&&U.firstChild.type==e);if(!h)return!1;let T=h.startIndex;if(0==T)return!1;let A=h.parent,I=A.child(T-1);if(I.type!=e)return!1;if(n){let U=I.lastChild&&I.lastChild.type==A.type,Z=P.HY.from(U?e.create():null),nt=new P.p2(P.HY.from(e.create(null,P.HY.from(A.type.create(null,Z)))),U?3:1,0),dt=h.start,Bt=h.end;n(t.tr.step(new g.FC(dt-(U?3:1),Bt,dt,Bt,nt,1,!0)).scrollIntoView())}return!0}}(H(e,t.schema))(t,n),splitBlock:({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:i,editor:u})=>{const{selection:h,doc:T}=t,{$from:A,$to:I}=h,Z=Nn(u.extensionManager.attributes,A.node().type.name,A.node().attrs);if(h instanceof M.qv&&h.node.isBlock)return!(!A.parentOffset||!(0,g.Ax)(T,A.pos)||(i&&(e&&qn(n,u.extensionManager.splittableMarks),t.split(A.pos).scrollIntoView()),0));if(!A.parent.isBlock)return!1;if(i){const nt=I.parentOffset===I.parent.content.size;h instanceof M.Bs&&t.deleteSelection();const dt=0===A.depth?void 0:eo(A.node(-1).contentMatchAt(A.indexAfter(-1)));let Bt=nt&&dt?[{type:dt,attrs:Z}]:void 0,Jt=(0,g.Ax)(t.doc,t.mapping.map(A.pos),1,Bt);if(!Bt&&!Jt&&(0,g.Ax)(t.doc,t.mapping.map(A.pos),1,dt?[{type:dt}]:void 0)&&(Jt=!0,Bt=dt?[{type:dt,attrs:Z}]:void 0),Jt&&(t.split(t.mapping.map(A.pos),1,Bt),dt&&!nt&&!A.parentOffset&&A.parent.type!==dt)){const Zt=t.mapping.map(A.before()),Xt=t.doc.resolve(Zt);A.node(-1).canReplaceWith(Xt.index(),Xt.index()+1,dt)&&t.setNodeMarkup(t.mapping.map(A.before()),dt)}e&&qn(n,u.extensionManager.splittableMarks),t.scrollIntoView()}return!0},splitListItem:e=>({tr:t,state:n,dispatch:i,editor:u})=>{var h;const T=H(e,n.schema),{$from:A,$to:I}=n.selection,U=n.selection.node;if(U&&U.isBlock||A.depth<2||!A.sameParent(I))return!1;const Z=A.node(-1);if(Z.type!==T)return!1;const nt=u.extensionManager.attributes;if(0===A.parent.content.size&&A.node(-1).childCount===A.indexAfter(-1)){if(2===A.depth||A.node(-3).type!==T||A.index(-2)!==A.node(-2).childCount-1)return!1;if(i){let Xt=P.HY.empty;const oe=A.index(-1)?1:A.index(-2)?2:3;for(let Pn=A.depth-oe;Pn>=A.depth-3;Pn-=1)Xt=P.HY.from(A.node(Pn).copy(Xt));const Le=A.indexAfter(-1)<A.node(-2).childCount?1:A.indexAfter(-2)<A.node(-3).childCount?2:3,Ve=Nn(nt,A.node().type.name,A.node().attrs),ae=(null===(h=T.contentMatch.defaultType)||void 0===h?void 0:h.createAndFill(Ve))||void 0;Xt=Xt.append(P.HY.from(T.createAndFill(null,ae)||void 0));const tn=A.before(A.depth-(oe-1));t.replace(tn,A.after(-Le),new P.p2(Xt,4-oe,0));let Dn=-1;t.doc.nodesBetween(tn,t.doc.content.size,(Pn,Vo)=>{if(Dn>-1)return!1;Pn.isTextblock&&0===Pn.content.size&&(Dn=Vo+1)}),Dn>-1&&t.setSelection(M.Bs.near(t.doc.resolve(Dn))),t.scrollIntoView()}return!0}const dt=I.pos===A.end()?Z.contentMatchAt(0).defaultType:null,Bt=Nn(nt,Z.type.name,Z.attrs),Jt=Nn(nt,A.node().type.name,A.node().attrs);t.delete(A.pos,I.pos);const Zt=dt?[{type:T,attrs:Bt},{type:dt,attrs:Jt}]:[{type:T,attrs:Bt}];if(!(0,g.Ax)(t.doc,A.pos,2))return!1;if(i){const{selection:Xt,storedMarks:oe}=n,{splittableMarks:Le}=u.extensionManager,Ve=oe||Xt.$to.parentOffset&&Xt.$from.marks();if(t.split(A.pos,2,Zt).scrollIntoView(),!Ve||!i)return!0;const ae=Ve.filter(tn=>Le.includes(tn.type.name));t.ensureMarks(ae)}return!0},toggleList:(e,t,n)=>({editor:i,tr:u,state:h,dispatch:T,chain:A,commands:I,can:U})=>{const{extensions:Z,splittableMarks:nt}=i.extensionManager,dt=H(e,h.schema),Bt=H(t,h.schema),{selection:Jt,storedMarks:Zt}=h,{$from:Xt,$to:oe}=Jt,Le=Xt.blockRange(oe),Ve=Zt||Jt.$to.parentOffset&&Jt.$from.marks();if(!Le)return!1;const ae=Ln(tn=>Tn(tn.type.name,Z))(Jt);if(Le.depth>=1&&ae&&Le.depth-ae.depth<=1){if(ae.node.type===dt)return I.liftListItem(Bt);if(Tn(ae.node.type.name,Z)&&dt.validContent(ae.node.content)&&T)return A().command(()=>(u.setNodeMarkup(ae.pos,dt),!0)).command(()=>yn(u,dt)).command(()=>Wn(u,dt)).run()}return n&&Ve&&T?A().command(()=>{const tn=U().wrapInList(dt),Dn=Ve.filter(Pn=>nt.includes(Pn.type.name));return u.ensureMarks(Dn),!!tn||I.clearNodes()}).wrapInList(dt).command(()=>yn(u,dt)).command(()=>Wn(u,dt)).run():A().command(()=>!!U().wrapInList(dt)||I.clearNodes()).wrapInList(dt).command(()=>yn(u,dt)).command(()=>Wn(u,dt)).run()},toggleMark:(e,t={},n={})=>({state:i,commands:u})=>{const{extendEmptyMarkRange:h=!1}=n,T=m(e,i.schema);return xn(i,T,t)?u.unsetMark(T,{extendEmptyMarkRange:h}):u.setMark(T,t)},toggleNode:(e,t,n={})=>({state:i,commands:u})=>{const h=H(e,i.schema),T=H(t,i.schema);return pe(i,h,n)?u.setNode(T):u.setNode(h,n)},toggleWrap:(e,t={})=>({state:n,commands:i})=>{const u=H(e,n.schema);return pe(n,u,t)?i.lift(u):i.wrapIn(u,t)},undoInputRule:()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let i=0;i<n.length;i+=1){const u=n[i];let h;if(u.spec.isInputRules&&(h=u.getState(e))){if(t){const T=e.tr,A=h.transform;for(let I=A.steps.length-1;I>=0;I-=1)T.step(A.steps[I].invert(A.docs[I]));if(h.text){const I=T.doc.resolve(h.from).marks();T.replaceWith(h.from,h.to,e.schema.text(h.text,I))}else T.delete(h.from,h.to)}return!0}}return!1},unsetAllMarks:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:i,ranges:u}=n;return i||t&&u.forEach(h=>{e.removeMark(h.$from.pos,h.$to.pos)}),!0},unsetMark:(e,t={})=>({tr:n,state:i,dispatch:u})=>{var h;const{extendEmptyMarkRange:T=!1}=t,{selection:A}=n,I=m(e,i.schema),{$from:U,empty:Z,ranges:nt}=A;if(!u)return!0;if(Z&&T){let{from:dt,to:Bt}=A;const Jt=null===(h=U.marks().find(Xt=>Xt.type===I))||void 0===h?void 0:h.attrs,Zt=C(U,I,Jt);Zt&&(dt=Zt.from,Bt=Zt.to),n.removeMark(dt,Bt,I)}else nt.forEach(dt=>{n.removeMark(dt.$from.pos,dt.$to.pos,I)});return n.removeStoredMark(I),!0},updateAttributes:(e,t={})=>({tr:n,state:i,dispatch:u})=>{let h=null,T=null;const A=hn("string"==typeof e?e:e.name,i.schema);return!!A&&("node"===A&&(h=H(e,i.schema)),"mark"===A&&(T=m(e,i.schema)),u&&n.selection.ranges.forEach(I=>{const U=I.$from.pos,Z=I.$to.pos;i.doc.nodesBetween(U,Z,(nt,dt)=>{h&&h===nt.type&&n.setNodeMarkup(dt,void 0,Gt(Gt({},nt.attrs),t)),T&&nt.marks.length&&nt.marks.forEach(Bt=>{if(T===Bt.type){const Jt=Math.max(dt,U),Zt=Math.min(dt+nt.nodeSize,Z);n.addMark(Jt,Zt,T.create(Gt(Gt({},Bt.attrs),t)))}})})}),!0)},wrapIn:(e,t={})=>({state:n,dispatch:i})=>function(e,t=null){return function(n,i){let{$from:u,$to:h}=n.selection,T=u.blockRange(h),A=T&&(0,g.nd)(T,e,t);return!!A&&(i&&i(n.tr.wrap(T,A).scrollIntoView()),!0)}}(H(e,n.schema),t)(n,i),wrapInList:(e,t={})=>({state:n,dispatch:i})=>function(e,t=null){return function(n,i){let{$from:u,$to:h}=n.selection,T=u.blockRange(h),A=!1,I=T;if(!T)return!1;if(T.depth>=2&&u.node(T.depth-1).type.compatibleContent(e)&&0==T.startIndex){if(0==u.index(T.depth-1))return!1;let Z=n.doc.resolve(T.start-2);I=new P.Ts(Z,Z,T.depth),T.endIndex<T.parent.childCount&&(T=new P.Ts(u,n.doc.resolve(h.end(T.depth)),T.depth)),A=!0}let U=(0,g.nd)(I,e,t,T);return!!U&&(i&&i(function(e,t,n,i,u){let h=P.HY.empty;for(let Z=n.length-1;Z>=0;Z--)h=P.HY.from(n[Z].type.create(n[Z].attrs,h));e.step(new g.FC(t.start-(i?2:0),t.end,t.start,t.end,new P.p2(h,0,0),n.length,!0));let T=0;for(let Z=0;Z<n.length;Z++)n[Z].type==u&&(T=Z+1);let A=n.length-T,I=t.start+n.length-(i?2:0),U=t.parent;for(let Z=t.startIndex,nt=t.endIndex,dt=!0;Z<nt;Z++,dt=!1)!dt&&(0,g.Ax)(e.doc,I,A)&&(e.split(I,A),I+=2*A),I+=U.child(Z).nodeSize;return e}(n.tr,T,U,A,e).scrollIntoView()),!0)}}(H(e,n.schema),t)(n,i)});const So=ce.create({name:"commands",addCommands:()=>Gt({},Po)}),Io=ce.create({name:"editable",addProseMirrorPlugins(){return[new M.Sy({key:new M.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),ko=ce.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new M.Sy({key:new M.H$("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const i=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1},blur:(t,n)=>{e.isFocused=!1;const i=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1}}}})]}}),co=ce.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:T})=>[()=>T.undoInputRule(),()=>T.command(({tr:A})=>{const{selection:I,doc:U}=A,{empty:Z,$anchor:nt}=I,{pos:dt,parent:Bt}=nt,Jt=M.Y1.atStart(U).from===dt;return!(!(Z&&Jt&&Bt.type.isTextblock)||Bt.textContent.length)&&T.clearNodes()}),()=>T.deleteSelection(),()=>T.joinBackward(),()=>T.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:T})=>[()=>T.deleteSelection(),()=>T.deleteCurrentNode(),()=>T.joinForward(),()=>T.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:T})=>[()=>T.newlineInCode(),()=>T.createParagraphNear(),()=>T.liftEmptyBlock(),()=>T.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},u=Gt({},i),h=ge(Gt({},i),{"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return z()||Pe()?h:u},addProseMirrorPlugins(){return[new M.Sy({key:new M.H$("clearDocument"),appendTransaction:(e,t,n)=>{if(!e.some(Jt=>Jt.docChanged)||t.doc.eq(n.doc))return;const{empty:u,from:h,to:T}=t.selection,A=M.Y1.atStart(t.doc).from,I=M.Y1.atEnd(t.doc).to,U=h===A&&T===I,Z=0===n.doc.textBetween(0,n.doc.content.size," "," ").length;if(u||!U||!Z)return;const nt=n.tr,dt=_t({state:n,transaction:nt}),{commands:Bt}=new b({editor:this.editor,state:dt});return Bt.clearNodes(),nt.steps.length?nt:void 0}})]}}),wo=ce.create({name:"tabindex",addProseMirrorPlugins(){return[new M.Sy({key:new M.H$("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var uo=Object.freeze({__proto__:null,ClipboardTextSerializer:en,Commands:So,Editable:Io,FocusEvents:ko,Keymap:co,Tabindex:wo});function po(e,t){const n=document.querySelector("style[data-tiptap-style]");if(null!==n)return n;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}class Fo extends class{constructor(){this.callbacks={}}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),this}emit(t,...n){const i=this.callbacks[t];return i&&i.forEach(u=>u.apply(this,n)),this}off(t,n){const i=this.callbacks[t];return i&&(n?this.callbacks[t]=i.filter(u=>u!==n):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=po('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(t={}){this.options=Gt(Gt({},this.options),t),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,n=!0){this.setOptions({editable:t}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,n){const i=N(n)?n(t,[...this.state.plugins]):[...this.state.plugins,t],u=this.state.reconfigure({plugins:i});this.view.updateState(u)}unregisterPlugin(t){if(this.isDestroyed)return;const n="string"==typeof t?`${t}$`:t.key,i=this.state.reconfigure({plugins:this.state.plugins.filter(u=>!u.key.startsWith(n))});this.view.updateState(i)}createExtensionManager(){const n=[...this.options.enableCoreExtensions?Object.values(uo):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(null==i?void 0:i.type));this.extensionManager=new ee(n,this)}createCommandManager(){this.commandManager=new b({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=sn(this.options.content,this.schema,this.options.parseOptions),n=K(t,this.options.autofocus);this.view=new l.tk(this.options.element,ge(Gt({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:M.yy.create({doc:t,selection:n||void 0})}));const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach(T=>{var A;return null===(A=this.capturedTransaction)||void 0===A?void 0:A.step(T)}):void(this.capturedTransaction=t);const n=this.state.apply(t),i=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),i&&this.emit("selectionUpdate",{editor:this,transaction:t});const u=t.getMeta("focus"),h=t.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:t}),h&&this.emit("blur",{editor:this,event:h.event,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return ro(this.state,t)}isActive(t,n){return $n(this.state,"string"==typeof t?t:null,"string"==typeof t?n:t)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Fn(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:n="\n\n",textSerializers:i={}}=t||{};return Jn(this.state.doc,{blockSeparator:n,textSerializers:Gt(Gt({},Re(this.schema)),i)})}get isEmpty(){return Zn(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}}function Ko(e){return new we({find:e.find,handler:({state:t,range:n,match:i})=>{const u=a(e.getAttributes,void 0,i);if(!1===u||null===u)return null;const{tr:h}=t,T=i[i.length-1],A=i[0];let I=n.to;if(T){const U=A.search(/\S/),Z=n.from+A.indexOf(T),nt=Z+T.length;if(Xn(n.from,n.to,t.doc).filter(Bt=>Bt.mark.type.excluded.find(Zt=>Zt===e.type&&Zt!==Bt.mark.type)).filter(Bt=>Bt.to>Z).length)return null;nt<n.to&&h.delete(nt,n.to),Z>n.from&&h.delete(n.from+U,Z),I=n.from+U+T.length,h.addMark(n.from+U,I,e.type.create(u||{})),h.removeStoredMark(e.type)}}})}function Jo(e){return new we({find:e.find,handler:({state:t,range:n,match:i})=>{const u=a(e.getAttributes,void 0,i)||{},{tr:h}=t,T=n.from;let A=n.to;if(i[1]){let U=T+i[0].lastIndexOf(i[1]);U>A?U=A:A=U+i[1].length,h.insertText(i[0][i[0].length-1],T+i[0].length-1),h.replaceWith(U,A,e.type.create(u))}else i[0]&&h.replaceWith(T,A,e.type.create(u))}})}function Ro(e){return new we({find:e.find,handler:({state:t,range:n,match:i})=>{const u=t.doc.resolve(n.from),h=a(e.getAttributes,void 0,i)||{};if(!u.node(-1).canReplaceWith(u.index(-1),u.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,h)}})}function ho(e){return new we({find:e.find,handler:({state:t,range:n,match:i})=>{let u=e.replace,h=n.from;const T=n.to;if(i[1]){const A=i[0].lastIndexOf(i[1]);u+=i[0].slice(A+i[1].length),h+=A;const I=h-T;I>0&&(u=i[0].slice(A-I,A)+u,h=T)}t.tr.insertText(u,h,T)}})}function fo(e){return new we({find:e.find,handler:({state:t,range:n,match:i,chain:u})=>{const h=a(e.getAttributes,void 0,i)||{},T=t.tr.delete(n.from,n.to),I=T.doc.resolve(n.from).blockRange(),U=I&&(0,g.nd)(I,e.type,h);if(!U)return null;if(T.wrap(I,U),e.keepMarks&&e.editor){const{selection:nt,storedMarks:dt}=t,{splittableMarks:Bt}=e.editor.extensionManager,Jt=dt||nt.$to.parentOffset&&nt.$from.marks();if(Jt){const Zt=Jt.filter(Xt=>Bt.includes(Xt.type.name));T.ensureMarks(Zt)}}if(e.keepAttributes){const nt="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";u().updateAttributes(nt,h).run()}const Z=T.doc.resolve(n.from-1).nodeBefore;Z&&Z.type===e.type&&(0,g.Mn)(T.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(i,Z))&&T.join(n.from-1)}})}class Un{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Gt(Gt({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(S(this,"addOptions",{name:this.name}))),this.storage=a(S(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Un(t)}configure(t={}){const n=this.extend();return n.options=le(this.options,t),n.storage=a(S(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new Un(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=a(S(n,"addOptions",{name:n.name})),n.storage=a(S(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:t,mark:n}){const{tr:i}=t.state,u=t.state.selection.$from;if(u.pos===u.end()){const T=u.marks();if(!T.find(U=>(null==U?void 0:U.type.name)===n.name))return!1;const I=T.find(U=>(null==U?void 0:U.type.name)===n.name);return I&&i.removeStoredMark(I),i.insertText(" ",u.pos),t.view.dispatch(i),!0}return!1}}class jn{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Gt(Gt({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(S(this,"addOptions",{name:this.name}))),this.storage=a(S(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new jn(t)}configure(t={}){const n=this.extend();return n.options=le(this.options,t),n.storage=a(S(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new jn(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=a(S(n,"addOptions",{name:n.name})),n.storage=a(S(n,"addStorage",{name:n.name,options:n.options})),n}}class mo{constructor(t,n,i){this.isDragging=!1,this.component=t,this.editor=n.editor,this.options=Gt({stopEvent:null,ignoreMutation:null},i),this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var n,i,u,h,T,A,I;const{view:U}=this.editor,Z=t.target,nt=3===Z.nodeType?null===(n=Z.parentElement)||void 0===n?void 0:n.closest("[data-drag-handle]"):Z.closest("[data-drag-handle]");if(!this.dom||(null===(i=this.contentDOM)||void 0===i?void 0:i.contains(Z))||!nt)return;let dt=0,Bt=0;if(this.dom!==nt){const Xt=this.dom.getBoundingClientRect(),oe=nt.getBoundingClientRect(),Le=null!==(u=t.offsetX)&&void 0!==u?u:null===(h=t.nativeEvent)||void 0===h?void 0:h.offsetX,Ve=null!==(T=t.offsetY)&&void 0!==T?T:null===(A=t.nativeEvent)||void 0===A?void 0:A.offsetY;dt=oe.x-Xt.x+Le,Bt=oe.y-Xt.y+Ve}null===(I=t.dataTransfer)||void 0===I||I.setDragImage(this.dom,dt,Bt);const Jt=M.qv.create(U.state.doc,this.getPos()),Zt=U.state.tr.setSelection(Jt);U.dispatch(Zt)}stopEvent(t){var n;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:t});const i=t.target;if(!this.dom.contains(i)||(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(i)))return!1;const h=t.type.startsWith("drag"),T="drop"===t.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(i.tagName)||i.isContentEditable)&&!T&&!h)return!0;const{isEditable:I}=this.editor,{isDragging:U}=this,Z=!!this.node.type.spec.draggable,nt=M.qv.isSelectable(this.node),dt="copy"===t.type,Bt="paste"===t.type,Jt="cut"===t.type,Zt="mousedown"===t.type;if(!Z&&nt&&h&&t.preventDefault(),Z&&h&&!U)return t.preventDefault(),!1;if(Z&&I&&!U&&Zt){const Xt=i.closest("[data-drag-handle]");Xt&&(this.dom===Xt||this.dom.contains(Xt))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(U||T||dt||Bt||Jt||Zt&&nt)}ignoreMutation(t){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:t}):!(!this.node.isLeaf&&!this.node.isAtom&&("selection"===t.type||this.dom.contains(t.target)&&"childList"===t.type&&z()&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(i=>i.isContentEditable)||(this.contentDOM!==t.target||"attributes"!==t.type)&&this.contentDOM.contains(t.target))))}updateAttributes(t){this.editor.commands.command(({tr:n})=>{const i=this.getPos();return n.setNodeMarkup(i,void 0,Gt(Gt({},this.node.attrs),t)),!0})}deleteNode(){const t=this.getPos();this.editor.commands.deleteRange({from:t,to:t+this.node.nodeSize})}}function Lo(e){return new gt({find:e.find,handler:({state:t,range:n,match:i})=>{const u=a(e.getAttributes,void 0,i);if(!1===u||null===u)return null;const{tr:h}=t,T=i[i.length-1],A=i[0];let I=n.to;if(T){const U=A.search(/\S/),Z=n.from+A.indexOf(T),nt=Z+T.length;if(Xn(n.from,n.to,t.doc).filter(Bt=>Bt.mark.type.excluded.find(Zt=>Zt===e.type&&Zt!==Bt.mark.type)).filter(Bt=>Bt.to>Z).length)return null;nt<n.to&&h.delete(nt,n.to),Z>n.from&&h.delete(n.from+U,Z),I=n.from+U+T.length,h.addMark(n.from+U,I,e.type.create(u||{})),h.removeStoredMark(e.type)}}})}function go(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function r(e){return"string"==typeof e}function o(e){return new gt({find:e.find,handler({match:t,chain:n,range:i}){const u=a(e.getAttributes,void 0,t);if(!1===u||null===u)return null;t.input&&n().deleteRange(i).insertContentAt(i.from,{type:e.type.name,attrs:u})}})}function s(e){return new gt({find:e.find,handler:({state:t,range:n,match:i})=>{let u=e.replace,h=n.from;const T=n.to;if(i[1]){const A=i[0].lastIndexOf(i[1]);u+=i[0].slice(A+i[1].length),h+=A;const I=h-T;I>0&&(u=i[0].slice(A-I,A)+u,h=T)}t.tr.insertText(u,h,T)}})}class d{constructor(t){this.transaction=t,this.currentStep=this.transaction.steps.length}map(t){let n=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((u,h)=>{const T=h.getMap().mapResult(u);return T.deleted&&(n=!0),T.pos},t),deleted:n}}}},44632:(jt,Et,c)=>{c.r(Et),c.d(Et,{Image:()=>y,default:()=>y,inputRegex:()=>l});var M=c(12867);const l=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,y=M.Node.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:P}){return["img",(0,M.mergeAttributes)(this.options.HTMLAttributes,P)]},addCommands(){return{setImage:P=>({commands:g})=>g.insertContent({type:this.name,attrs:P})}},addInputRules(){return[(0,M.nodeInputRule)({find:l,type:this.type,getAttributes:P=>{const[,,g,it,B]=P;return{src:it,alt:g,title:B}}})]}})},84402:(jt,Et,c)=>{c.r(Et),c.d(Et,{TextStyle:()=>l,default:()=>l});var M=c(12867);const l=M.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:y=>!!y.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:y}){return["span",(0,M.mergeAttributes)(this.options.HTMLAttributes,y),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:y,commands:P})=>{const g=(0,M.getMarkAttributes)(y,this.type);return!!Object.entries(g).some(([,B])=>!!B)||P.unsetMark(this.name)}}}})},70768:(jt,Et,c)=>{c.d(Et,{$:()=>Pt,h:()=>It});for(var M={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},y="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),g=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),it="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),B=g||y&&+y[1]<57,X=0;X<10;X++)M[48+X]=M[96+X]=String(X);for(X=1;X<=24;X++)M[X+111]="F"+X;for(X=65;X<=90;X++)M[X]=String.fromCharCode(X+32),l[X]=String.fromCharCode(X);for(var tt in M)l.hasOwnProperty(tt)||(l[tt]=M[tt]);var ut=c(62463);const et="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function Tt(Dt){let W,mt,j,At,ht=Dt.split(/-(?!$)/),q=ht[ht.length-1];"Space"==q&&(q=" ");for(let St=0;St<ht.length-1;St++){let yt=ht[St];if(/^(cmd|meta|m)$/i.test(yt))At=!0;else if(/^a(lt)?$/i.test(yt))W=!0;else if(/^(c|ctrl|control)$/i.test(yt))mt=!0;else if(/^s(hift)?$/i.test(yt))j=!0;else{if(!/^mod$/i.test(yt))throw new Error("Unrecognized modifier name: "+yt);et?At=!0:mt=!0}}return W&&(q="Alt-"+q),mt&&(q="Ctrl-"+q),At&&(q="Meta-"+q),j&&(q="Shift-"+q),q}function bt(Dt,ht,q=!0){return ht.altKey&&(Dt="Alt-"+Dt),ht.ctrlKey&&(Dt="Ctrl-"+Dt),ht.metaKey&&(Dt="Meta-"+Dt),q&&ht.shiftKey&&(Dt="Shift-"+Dt),Dt}function It(Dt){return new ut.Sy({props:{handleKeyDown:Pt(Dt)}})}function Pt(Dt){let ht=function(Dt){let ht=Object.create(null);for(let q in Dt)ht[Tt(q)]=Dt[q];return ht}(Dt);return function(q,W){let j,mt=function(Dt){var q=!(B&&(Dt.ctrlKey||Dt.altKey||Dt.metaKey)||it&&Dt.shiftKey&&Dt.key&&1==Dt.key.length||"Unidentified"==Dt.key)&&Dt.key||(Dt.shiftKey?l:M)[Dt.keyCode]||Dt.key||"Unidentified";return"Esc"==q&&(q="Escape"),"Del"==q&&(q="Delete"),"Left"==q&&(q="ArrowLeft"),"Up"==q&&(q="ArrowUp"),"Right"==q&&(q="ArrowRight"),"Down"==q&&(q="ArrowDown"),q}(W),At=ht[bt(mt,W)];if(At&&At(q.state,q.dispatch,q))return!0;if(1==mt.length&&" "!=mt){if(W.shiftKey){let St=ht[bt(mt,W,!1)];if(St&&St(q.state,q.dispatch,q))return!0}if((W.shiftKey||W.altKey||W.metaKey||mt.charCodeAt(0)>127)&&(j=M[W.keyCode])&&j!=mt){let St=ht[bt(j,W)];if(St&&St(q.state,q.dispatch,q))return!0}}return!1}}},77346:(jt,Et,c)=>{function M(N){this.content=N}c.d(Et,{aw:()=>Me,PW:()=>H,HY:()=>g,vc:()=>tt,ZU:()=>ve,NB:()=>pt,Ts:()=>Ht,e4:()=>ft,V_:()=>Se,p2:()=>ut}),M.prototype={constructor:M,find:function(N){for(var a=0;a<this.content.length;a+=2)if(this.content[a]===N)return a;return-1},get:function(N){var a=this.find(N);return-1==a?void 0:this.content[a+1]},update:function(N,a,p){var E=p&&p!=N?this.remove(p):this,D=E.find(N),k=E.content.slice();return-1==D?k.push(p||N,a):(k[D+1]=a,p&&(k[D]=p)),new M(k)},remove:function(N){var a=this.find(N);if(-1==a)return this;var p=this.content.slice();return p.splice(a,2),new M(p)},addToStart:function(N,a){return new M([N,a].concat(this.remove(N).content))},addToEnd:function(N,a){var p=this.remove(N).content.slice();return p.push(N,a),new M(p)},addBefore:function(N,a,p){var E=this.remove(a),D=E.content.slice(),k=E.find(N);return D.splice(-1==k?D.length:k,0,a,p),new M(D)},forEach:function(N){for(var a=0;a<this.content.length;a+=2)N(this.content[a],this.content[a+1])},prepend:function(N){return(N=M.from(N)).size?new M(N.content.concat(this.subtract(N).content)):this},append:function(N){return(N=M.from(N)).size?new M(this.subtract(N).content.concat(N.content)):this},subtract:function(N){var a=this;N=M.from(N);for(var p=0;p<N.content.length;p+=2)a=a.remove(N.content[p]);return a},toObject:function(){var N={};return this.forEach(function(a,p){N[a]=p}),N},get size(){return this.content.length>>1}},M.from=function(N){if(N instanceof M)return N;var a=[];if(N)for(var p in N)a.push(p,N[p]);return new M(a)};const l=M;function y(N,a,p){for(let E=0;;E++){if(E==N.childCount||E==a.childCount)return N.childCount==a.childCount?null:p;let D=N.child(E),k=a.child(E);if(D!=k){if(!D.sameMarkup(k))return p;if(D.isText&&D.text!=k.text){for(let F=0;D.text[F]==k.text[F];F++)p++;return p}if(D.content.size||k.content.size){let F=y(D.content,k.content,p+1);if(null!=F)return F}p+=D.nodeSize}else p+=D.nodeSize}}function P(N,a,p,E){for(let D=N.childCount,k=a.childCount;;){if(0==D||0==k)return D==k?null:{a:p,b:E};let F=N.child(--D),lt=a.child(--k),Rt=F.nodeSize;if(F!=lt){if(!F.sameMarkup(lt))return{a:p,b:E};if(F.isText&&F.text!=lt.text){let qt=0,te=Math.min(F.text.length,lt.text.length);for(;qt<te&&F.text[F.text.length-qt-1]==lt.text[lt.text.length-qt-1];)qt++,p--,E--;return{a:p,b:E}}if(F.content.size||lt.content.size){let qt=P(F.content,lt.content,p-1,E-1);if(qt)return qt}p-=Rt,E-=Rt}else p-=Rt,E-=Rt}}class g{constructor(a,p){if(this.content=a,this.size=p||0,null==p)for(let E=0;E<a.length;E++)this.size+=a[E].nodeSize}nodesBetween(a,p,E,D=0,k){for(let F=0,lt=0;lt<p;F++){let Rt=this.content[F],qt=lt+Rt.nodeSize;if(qt>a&&!1!==E(Rt,D+lt,k||null,F)&&Rt.content.size){let te=lt+1;Rt.nodesBetween(Math.max(0,a-te),Math.min(Rt.content.size,p-te),E,D+te)}lt=qt}}descendants(a){this.nodesBetween(0,this.size,a)}textBetween(a,p,E,D){let k="",F=!0;return this.nodesBetween(a,p,(lt,Rt)=>{lt.isText?(k+=lt.text.slice(Math.max(a,Rt)-Rt,p-Rt),F=!E):lt.isLeaf?(D?k+="function"==typeof D?D(lt):D:lt.type.spec.leafText&&(k+=lt.type.spec.leafText(lt)),F=!E):!F&&lt.isBlock&&(k+=E,F=!0)},0),k}append(a){if(!a.size)return this;if(!this.size)return a;let p=this.lastChild,E=a.firstChild,D=this.content.slice(),k=0;for(p.isText&&p.sameMarkup(E)&&(D[D.length-1]=p.withText(p.text+E.text),k=1);k<a.content.length;k++)D.push(a.content[k]);return new g(D,this.size+a.size)}cut(a,p=this.size){if(0==a&&p==this.size)return this;let E=[],D=0;if(p>a)for(let k=0,F=0;F<p;k++){let lt=this.content[k],Rt=F+lt.nodeSize;Rt>a&&((F<a||Rt>p)&&(lt=lt.isText?lt.cut(Math.max(0,a-F),Math.min(lt.text.length,p-F)):lt.cut(Math.max(0,a-F-1),Math.min(lt.content.size,p-F-1))),E.push(lt),D+=lt.nodeSize),F=Rt}return new g(E,D)}cutByIndex(a,p){return a==p?g.empty:0==a&&p==this.content.length?this:new g(this.content.slice(a,p))}replaceChild(a,p){let E=this.content[a];if(E==p)return this;let D=this.content.slice(),k=this.size+p.nodeSize-E.nodeSize;return D[a]=p,new g(D,k)}addToStart(a){return new g([a].concat(this.content),this.size+a.nodeSize)}addToEnd(a){return new g(this.content.concat(a),this.size+a.nodeSize)}eq(a){if(this.content.length!=a.content.length)return!1;for(let p=0;p<this.content.length;p++)if(!this.content[p].eq(a.content[p]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(a){let p=this.content[a];if(!p)throw new RangeError("Index "+a+" out of range for "+this);return p}maybeChild(a){return this.content[a]||null}forEach(a){for(let p=0,E=0;p<this.content.length;p++){let D=this.content[p];a(D,E,p),E+=D.nodeSize}}findDiffStart(a,p=0){return y(this,a,p)}findDiffEnd(a,p=this.size,E=a.size){return P(this,a,p,E)}findIndex(a,p=-1){if(0==a)return B(0,a);if(a==this.size)return B(this.content.length,a);if(a>this.size||a<0)throw new RangeError(`Position ${a} outside of fragment (${this})`);for(let E=0,D=0;;E++){let F=D+this.child(E).nodeSize;if(F>=a)return F==a||p>0?B(E+1,F):B(E,D);D=F}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(a=>a.toJSON()):null}static fromJSON(a,p){if(!p)return g.empty;if(!Array.isArray(p))throw new RangeError("Invalid input for Fragment.fromJSON");return new g(p.map(a.nodeFromJSON))}static fromArray(a){if(!a.length)return g.empty;let p,E=0;for(let D=0;D<a.length;D++){let k=a[D];E+=k.nodeSize,D&&k.isText&&a[D-1].sameMarkup(k)?(p||(p=a.slice(0,D)),p[p.length-1]=k.withText(p[p.length-1].text+k.text)):p&&p.push(k)}return new g(p||a,E)}static from(a){if(!a)return g.empty;if(a instanceof g)return a;if(Array.isArray(a))return this.fromArray(a);if(a.attrs)return new g([a],a.nodeSize);throw new RangeError("Can not convert "+a+" to a Fragment"+(a.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}g.empty=new g([],0);const it={index:0,offset:0};function B(N,a){return it.index=N,it.offset=a,it}function X(N,a){if(N===a)return!0;if(!N||"object"!=typeof N||!a||"object"!=typeof a)return!1;let p=Array.isArray(N);if(Array.isArray(a)!=p)return!1;if(p){if(N.length!=a.length)return!1;for(let E=0;E<N.length;E++)if(!X(N[E],a[E]))return!1}else{for(let E in N)if(!(E in a)||!X(N[E],a[E]))return!1;for(let E in a)if(!(E in N))return!1}return!0}let tt=(()=>{class N{constructor(p,E){this.type=p,this.attrs=E}addToSet(p){let E,D=!1;for(let k=0;k<p.length;k++){let F=p[k];if(this.eq(F))return p;if(this.type.excludes(F.type))E||(E=p.slice(0,k));else{if(F.type.excludes(this.type))return p;!D&&F.type.rank>this.type.rank&&(E||(E=p.slice(0,k)),E.push(this),D=!0),E&&E.push(F)}}return E||(E=p.slice()),D||E.push(this),E}removeFromSet(p){for(let E=0;E<p.length;E++)if(this.eq(p[E]))return p.slice(0,E).concat(p.slice(E+1));return p}isInSet(p){for(let E=0;E<p.length;E++)if(this.eq(p[E]))return!0;return!1}eq(p){return this==p||this.type==p.type&&X(this.attrs,p.attrs)}toJSON(){let p={type:this.type.name};for(let E in this.attrs){p.attrs=this.attrs;break}return p}static fromJSON(p,E){if(!E)throw new RangeError("Invalid input for Mark.fromJSON");let D=p.marks[E.type];if(!D)throw new RangeError(`There is no mark type ${E.type} in this schema`);return D.create(E.attrs)}static sameSet(p,E){if(p==E)return!0;if(p.length!=E.length)return!1;for(let D=0;D<p.length;D++)if(!p[D].eq(E[D]))return!1;return!0}static setFrom(p){if(!p||Array.isArray(p)&&0==p.length)return N.none;if(p instanceof N)return[p];let E=p.slice();return E.sort((D,k)=>D.type.rank-k.type.rank),E}}return N.none=[],N})();class ft extends Error{}class ut{constructor(a,p,E){this.content=a,this.openStart=p,this.openEnd=E}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(a,p){let E=Tt(this.content,a+this.openStart,p);return E&&new ut(E,this.openStart,this.openEnd)}removeBetween(a,p){return new ut(et(this.content,a+this.openStart,p+this.openStart),this.openStart,this.openEnd)}eq(a){return this.content.eq(a.content)&&this.openStart==a.openStart&&this.openEnd==a.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let a={content:this.content.toJSON()};return this.openStart>0&&(a.openStart=this.openStart),this.openEnd>0&&(a.openEnd=this.openEnd),a}static fromJSON(a,p){if(!p)return ut.empty;let E=p.openStart||0,D=p.openEnd||0;if("number"!=typeof E||"number"!=typeof D)throw new RangeError("Invalid input for Slice.fromJSON");return new ut(g.fromJSON(a,p.content),E,D)}static maxOpen(a,p=!0){let E=0,D=0;for(let k=a.firstChild;k&&!k.isLeaf&&(p||!k.type.spec.isolating);k=k.firstChild)E++;for(let k=a.lastChild;k&&!k.isLeaf&&(p||!k.type.spec.isolating);k=k.lastChild)D++;return new ut(a,E,D)}}function et(N,a,p){let{index:E,offset:D}=N.findIndex(a),k=N.maybeChild(E),{index:F,offset:lt}=N.findIndex(p);if(D==a||k.isText){if(lt!=p&&!N.child(F).isText)throw new RangeError("Removing non-flat range");return N.cut(0,a).append(N.cut(p))}if(E!=F)throw new RangeError("Removing non-flat range");return N.replaceChild(E,k.copy(et(k.content,a-D-1,p-D-1)))}function Tt(N,a,p,E){let{index:D,offset:k}=N.findIndex(a),F=N.maybeChild(D);if(k==a||F.isText)return E&&!E.canReplace(D,D,p)?null:N.cut(0,a).append(p).append(N.cut(a));let lt=Tt(F.content,a-k-1,p);return lt&&N.replaceChild(D,F.copy(lt))}function Ct(N,a,p){if(p.openStart>N.depth)throw new ft("Inserted content deeper than insertion position");if(N.depth-p.openStart!=a.depth-p.openEnd)throw new ft("Inconsistent open depths");return bt(N,a,p,0)}function bt(N,a,p,E){let D=N.index(E),k=N.node(E);if(D==a.index(E)&&E<N.depth-p.openStart){let F=bt(N,a,p,E+1);return k.copy(k.content.replaceChild(D,F))}if(p.content.size){if(p.openStart||p.openEnd||N.depth!=E||a.depth!=E){let{start:F,end:lt}=function(N,a){let p=a.depth-N.openStart,D=a.node(p).copy(N.content);for(let k=p-1;k>=0;k--)D=a.node(k).copy(g.from(D));return{start:D.resolveNoCache(N.openStart+p),end:D.resolveNoCache(D.content.size-N.openEnd-p)}}(p,N);return q(k,W(N,F,lt,a,E))}{let F=N.parent,lt=F.content;return q(F,lt.cut(0,N.parentOffset).append(p.content).append(lt.cut(a.parentOffset)))}}return q(k,mt(N,a,E))}function It(N,a){if(!a.type.compatibleContent(N.type))throw new ft("Cannot join "+a.type.name+" onto "+N.type.name)}function Pt(N,a,p){let E=N.node(p);return It(E,a.node(p)),E}function Dt(N,a){let p=a.length-1;p>=0&&N.isText&&N.sameMarkup(a[p])?a[p]=N.withText(a[p].text+N.text):a.push(N)}function ht(N,a,p,E){let D=(a||N).node(p),k=0,F=a?a.index(p):D.childCount;N&&(k=N.index(p),N.depth>p?k++:N.textOffset&&(Dt(N.nodeAfter,E),k++));for(let lt=k;lt<F;lt++)Dt(D.child(lt),E);a&&a.depth==p&&a.textOffset&&Dt(a.nodeBefore,E)}function q(N,a){return N.type.checkContent(a),N.copy(a)}function W(N,a,p,E,D){let k=N.depth>D&&Pt(N,a,D+1),F=E.depth>D&&Pt(p,E,D+1),lt=[];return ht(null,N,D,lt),k&&F&&a.index(D)==p.index(D)?(It(k,F),Dt(q(k,W(N,a,p,E,D+1)),lt)):(k&&Dt(q(k,mt(N,a,D+1)),lt),ht(a,p,D,lt),F&&Dt(q(F,mt(p,E,D+1)),lt)),ht(E,null,D,lt),new g(lt)}function mt(N,a,p){let E=[];return ht(null,N,p,E),N.depth>p&&Dt(q(Pt(N,a,p+1),mt(N,a,p+1)),E),ht(a,null,p,E),new g(E)}ut.empty=new ut(g.empty,0,0);class At{constructor(a,p,E){this.pos=a,this.path=p,this.parentOffset=E,this.depth=p.length/3-1}resolveDepth(a){return null==a?this.depth:a<0?this.depth+a:a}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(a){return this.path[3*this.resolveDepth(a)]}index(a){return this.path[3*this.resolveDepth(a)+1]}indexAfter(a){return a=this.resolveDepth(a),this.index(a)+(a!=this.depth||this.textOffset?1:0)}start(a){return 0==(a=this.resolveDepth(a))?0:this.path[3*a-1]+1}end(a){return a=this.resolveDepth(a),this.start(a)+this.node(a).content.size}before(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position before the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]}after(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position after the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]+this.path[3*a].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let a=this.parent,p=this.index(this.depth);if(p==a.childCount)return null;let E=this.pos-this.path[this.path.length-1],D=a.child(p);return E?a.child(p).cut(E):D}get nodeBefore(){let a=this.index(this.depth),p=this.pos-this.path[this.path.length-1];return p?this.parent.child(a).cut(0,p):0==a?null:this.parent.child(a-1)}posAtIndex(a,p){p=this.resolveDepth(p);let E=this.path[3*p],D=0==p?0:this.path[3*p-1]+1;for(let k=0;k<a;k++)D+=E.child(k).nodeSize;return D}marks(){let a=this.parent,p=this.index();if(0==a.content.size)return tt.none;if(this.textOffset)return a.child(p).marks;let E=a.maybeChild(p-1),D=a.maybeChild(p);if(!E){let lt=E;E=D,D=lt}let k=E.marks;for(var F=0;F<k.length;F++)!1===k[F].type.spec.inclusive&&(!D||!k[F].isInSet(D.marks))&&(k=k[F--].removeFromSet(k));return k}marksAcross(a){let p=this.parent.maybeChild(this.index());if(!p||!p.isInline)return null;let E=p.marks,D=a.parent.maybeChild(a.index());for(var k=0;k<E.length;k++)!1===E[k].type.spec.inclusive&&(!D||!E[k].isInSet(D.marks))&&(E=E[k--].removeFromSet(E));return E}sharedDepth(a){for(let p=this.depth;p>0;p--)if(this.start(p)<=a&&this.end(p)>=a)return p;return 0}blockRange(a=this,p){if(a.pos<this.pos)return a.blockRange(this);for(let E=this.depth-(this.parent.inlineContent||this.pos==a.pos?1:0);E>=0;E--)if(a.pos<=this.end(E)&&(!p||p(this.node(E))))return new Ht(this,a,E);return null}sameParent(a){return this.pos-this.parentOffset==a.pos-a.parentOffset}max(a){return a.pos>this.pos?a:this}min(a){return a.pos<this.pos?a:this}toString(){let a="";for(let p=1;p<=this.depth;p++)a+=(a?"/":"")+this.node(p).type.name+"_"+this.index(p-1);return a+":"+this.parentOffset}static resolve(a,p){if(!(p>=0&&p<=a.content.size))throw new RangeError("Position "+p+" out of range");let E=[],D=0,k=p;for(let F=a;;){let{index:lt,offset:Rt}=F.content.findIndex(k),qt=k-Rt;if(E.push(F,lt,D+Rt),!qt||(F=F.child(lt),F.isText))break;k=qt-1,D+=Rt+1}return new At(p,E,k)}static resolveCached(a,p){for(let D=0;D<St.length;D++){let k=St[D];if(k.pos==p&&k.doc==a)return k}let E=St[yt]=At.resolve(a,p);return yt=(yt+1)%Lt,E}}let St=[],yt=0,Lt=12;class Ht{constructor(a,p,E){this.$from=a,this.$to=p,this.depth=E}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Kt=Object.create(null);class pt{constructor(a,p,E,D=tt.none){this.type=a,this.attrs=p,this.marks=D,this.content=E||g.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(a){return this.content.child(a)}maybeChild(a){return this.content.maybeChild(a)}forEach(a){this.content.forEach(a)}nodesBetween(a,p,E,D=0){this.content.nodesBetween(a,p,E,D,this)}descendants(a){this.nodesBetween(0,this.content.size,a)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(a,p,E,D){return this.content.textBetween(a,p,E,D)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(a){return this==a||this.sameMarkup(a)&&this.content.eq(a.content)}sameMarkup(a){return this.hasMarkup(a.type,a.attrs,a.marks)}hasMarkup(a,p,E){return this.type==a&&X(this.attrs,p||a.defaultAttrs||Kt)&&tt.sameSet(this.marks,E||tt.none)}copy(a=null){return a==this.content?this:new pt(this.type,this.attrs,a,this.marks)}mark(a){return a==this.marks?this:new pt(this.type,this.attrs,this.content,a)}cut(a,p=this.content.size){return 0==a&&p==this.content.size?this:this.copy(this.content.cut(a,p))}slice(a,p=this.content.size,E=!1){if(a==p)return ut.empty;let D=this.resolve(a),k=this.resolve(p),F=E?0:D.sharedDepth(p),lt=D.start(F),qt=D.node(F).content.cut(D.pos-lt,k.pos-lt);return new ut(qt,D.depth-F,k.depth-F)}replace(a,p,E){return Ct(this.resolve(a),this.resolve(p),E)}nodeAt(a){for(let p=this;;){let{index:E,offset:D}=p.content.findIndex(a);if(p=p.maybeChild(E),!p)return null;if(D==a||p.isText)return p;a-=D+1}}childAfter(a){let{index:p,offset:E}=this.content.findIndex(a);return{node:this.content.maybeChild(p),index:p,offset:E}}childBefore(a){if(0==a)return{node:null,index:0,offset:0};let{index:p,offset:E}=this.content.findIndex(a);if(E<a)return{node:this.content.child(p),index:p,offset:E};let D=this.content.child(p-1);return{node:D,index:p-1,offset:E-D.nodeSize}}resolve(a){return At.resolveCached(this,a)}resolveNoCache(a){return At.resolve(this,a)}rangeHasMark(a,p,E){let D=!1;return p>a&&this.nodesBetween(a,p,k=>(E.isInSet(k.marks)&&(D=!0),!D)),D}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let a=this.type.name;return this.content.size&&(a+="("+this.content.toStringInner()+")"),rt(this.marks,a)}contentMatchAt(a){let p=this.type.contentMatch.matchFragment(this.content,0,a);if(!p)throw new Error("Called contentMatchAt on a node with invalid content");return p}canReplace(a,p,E=g.empty,D=0,k=E.childCount){let F=this.contentMatchAt(a).matchFragment(E,D,k),lt=F&&F.matchFragment(this.content,p);if(!lt||!lt.validEnd)return!1;for(let Rt=D;Rt<k;Rt++)if(!this.type.allowsMarks(E.child(Rt).marks))return!1;return!0}canReplaceWith(a,p,E,D){if(D&&!this.type.allowsMarks(D))return!1;let k=this.contentMatchAt(a).matchType(E),F=k&&k.matchFragment(this.content,p);return!!F&&F.validEnd}canAppend(a){return a.content.size?this.canReplace(this.childCount,this.childCount,a.content):this.type.compatibleContent(a.type)}check(){this.type.checkContent(this.content);let a=tt.none;for(let p=0;p<this.marks.length;p++)a=this.marks[p].addToSet(a);if(!tt.sameSet(a,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(p=>p.type.name)}`);this.content.forEach(p=>p.check())}toJSON(){let a={type:this.type.name};for(let p in this.attrs){a.attrs=this.attrs;break}return this.content.size&&(a.content=this.content.toJSON()),this.marks.length&&(a.marks=this.marks.map(p=>p.toJSON())),a}static fromJSON(a,p){if(!p)throw new RangeError("Invalid input for Node.fromJSON");let E=null;if(p.marks){if(!Array.isArray(p.marks))throw new RangeError("Invalid mark data for Node.fromJSON");E=p.marks.map(a.markFromJSON)}if("text"==p.type){if("string"!=typeof p.text)throw new RangeError("Invalid text node in JSON");return a.text(p.text,E)}let D=g.fromJSON(a,p.content);return a.nodeType(p.type).create(p.attrs,D,E)}}pt.prototype.text=void 0;class L extends pt{constructor(a,p,E,D){if(super(a,p,null,D),!E)throw new RangeError("Empty text nodes are not allowed");this.text=E}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):rt(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(a,p){return this.text.slice(a,p)}get nodeSize(){return this.text.length}mark(a){return a==this.marks?this:new L(this.type,this.attrs,this.text,a)}withText(a){return a==this.text?this:new L(this.type,this.attrs,a,this.marks)}cut(a=0,p=this.text.length){return 0==a&&p==this.text.length?this:this.withText(this.text.slice(a,p))}eq(a){return this.sameMarkup(a)&&this.text==a.text}toJSON(){let a=super.toJSON();return a.text=this.text,a}}function rt(N,a){for(let p=N.length-1;p>=0;p--)a=N[p].type.name+"("+a+")";return a}class ct{constructor(a){this.validEnd=a,this.next=[],this.wrapCache=[]}static parse(a,p){let E=new st(a,p);if(null==E.next)return ct.empty;let D=J(E);E.next&&E.err("Unexpected trailing text");let k=function(N){let a=Object.create(null);return function p(E){let D=[];E.forEach(F=>{N[F].forEach(({term:lt,to:Rt})=>{if(!lt)return;let qt;for(let te=0;te<D.length;te++)D[te][0]==lt&&(qt=D[te][1]);ye(N,Rt).forEach(te=>{qt||D.push([lt,qt=[]]),-1==qt.indexOf(te)&&qt.push(te)})})});let k=a[E.join(",")]=new ct(E.indexOf(N.length-1)>-1);for(let F=0;F<D.length;F++){let lt=D[F][1].sort(ue);k.next.push({type:D[F][0],next:a[lt.join(",")]||p(lt)})}return k}(ye(N,0))}(function(N){let a=[[]];return D(function k(F,lt){if("choice"==F.type)return F.exprs.reduce((Rt,qt)=>Rt.concat(k(qt,lt)),[]);if("seq"!=F.type){if("star"==F.type){let Rt=p();return E(lt,Rt),D(k(F.expr,Rt),Rt),[E(Rt)]}if("plus"==F.type){let Rt=p();return D(k(F.expr,lt),Rt),D(k(F.expr,Rt),Rt),[E(Rt)]}if("opt"==F.type)return[E(lt)].concat(k(F.expr,lt));if("range"==F.type){let Rt=lt;for(let qt=0;qt<F.min;qt++){let te=p();D(k(F.expr,Rt),te),Rt=te}if(-1==F.max)D(k(F.expr,Rt),Rt);else for(let qt=F.min;qt<F.max;qt++){let te=p();E(Rt,te),D(k(F.expr,Rt),te),Rt=te}return[E(Rt)]}if("name"==F.type)return[E(lt,void 0,F.value)];throw new Error("Unknown expr type")}for(let Rt=0;;Rt++){let qt=k(F.exprs[Rt],lt);if(Rt==F.exprs.length-1)return qt;D(qt,lt=p())}}(N,0),p()),a;function p(){return a.push([])-1}function E(F,lt,Rt){let qt={term:Rt,to:lt};return a[F].push(qt),qt}function D(F,lt){F.forEach(Rt=>Rt.to=lt)}}(D));return function(N,a){for(let p=0,E=[N];p<E.length;p++){let D=E[p],k=!D.validEnd,F=[];for(let lt=0;lt<D.next.length;lt++){let{type:Rt,next:qt}=D.next[lt];F.push(Rt.name),k&&!(Rt.isText||Rt.hasRequiredAttrs())&&(k=!1),-1==E.indexOf(qt)&&E.push(qt)}k&&a.err("Only non-generatable nodes ("+F.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(k,E),k}matchType(a){for(let p=0;p<this.next.length;p++)if(this.next[p].type==a)return this.next[p].next;return null}matchFragment(a,p=0,E=a.childCount){let D=this;for(let k=p;D&&k<E;k++)D=D.matchType(a.child(k).type);return D}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let a=0;a<this.next.length;a++){let{type:p}=this.next[a];if(!p.isText&&!p.hasRequiredAttrs())return p}return null}compatible(a){for(let p=0;p<this.next.length;p++)for(let E=0;E<a.next.length;E++)if(this.next[p].type==a.next[E].type)return!0;return!1}fillBefore(a,p=!1,E=0){let D=[this];return function k(F,lt){let Rt=F.matchFragment(a,E);if(Rt&&(!p||Rt.validEnd))return g.from(lt.map(qt=>qt.createAndFill()));for(let qt=0;qt<F.next.length;qt++){let{type:te,next:we}=F.next[qt];if(!te.isText&&!te.hasRequiredAttrs()&&-1==D.indexOf(we)){D.push(we);let Je=k(we,lt.concat(te));if(Je)return Je}}return null}(this,[])}findWrapping(a){for(let E=0;E<this.wrapCache.length;E+=2)if(this.wrapCache[E]==a)return this.wrapCache[E+1];let p=this.computeWrapping(a);return this.wrapCache.push(a,p),p}computeWrapping(a){let p=Object.create(null),E=[{match:this,type:null,via:null}];for(;E.length;){let D=E.shift(),k=D.match;if(k.matchType(a)){let F=[];for(let lt=D;lt.type;lt=lt.via)F.push(lt.type);return F.reverse()}for(let F=0;F<k.next.length;F++){let{type:lt,next:Rt}=k.next[F];!lt.isLeaf&&!lt.hasRequiredAttrs()&&!(lt.name in p)&&(!D.type||Rt.validEnd)&&(E.push({match:lt.contentMatch,type:lt,via:D}),p[lt.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(a){if(a>=this.next.length)throw new RangeError(`There's no ${a}th edge in this content match`);return this.next[a]}toString(){let a=[];return function p(E){a.push(E);for(let D=0;D<E.next.length;D++)-1==a.indexOf(E.next[D].next)&&p(E.next[D].next)}(this),a.map((E,D)=>{let k=D+(E.validEnd?"*":" ")+" ";for(let F=0;F<E.next.length;F++)k+=(F?", ":"")+E.next[F].type.name+"->"+a.indexOf(E.next[F].next);return k}).join("\n")}}ct.empty=new ct(!0);class st{constructor(a,p){this.string=a,this.nodeTypes=p,this.inline=null,this.pos=0,this.tokens=a.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(a){return this.next==a&&(this.pos++||!0)}err(a){throw new SyntaxError(a+" (in content expression '"+this.string+"')")}}function J(N){let a=[];do{a.push(Q(N))}while(N.eat("|"));return 1==a.length?a[0]:{type:"choice",exprs:a}}function Q(N){let a=[];do{a.push(ot(N))}while(N.next&&")"!=N.next&&"|"!=N.next);return 1==a.length?a[0]:{type:"seq",exprs:a}}function ot(N){let a=function(N){if(N.eat("(")){let a=J(N);return N.eat(")")||N.err("Missing closing paren"),a}if(!/\W/.test(N.next)){let a=function(N,a){let p=N.nodeTypes,E=p[a];if(E)return[E];let D=[];for(let k in p){let F=p[k];F.groups.indexOf(a)>-1&&D.push(F)}return 0==D.length&&N.err("No node type or group '"+a+"' found"),D}(N,N.next).map(p=>(null==N.inline?N.inline=p.isInline:N.inline!=p.isInline&&N.err("Mixing inline and block content"),{type:"name",value:p}));return N.pos++,1==a.length?a[0]:{type:"choice",exprs:a}}N.err("Unexpected token '"+N.next+"'")}(N);for(;;)if(N.eat("+"))a={type:"plus",expr:a};else if(N.eat("*"))a={type:"star",expr:a};else if(N.eat("?"))a={type:"opt",expr:a};else{if(!N.eat("{"))break;a=$t(N,a)}return a}function kt(N){/\D/.test(N.next)&&N.err("Expected number, got '"+N.next+"'");let a=Number(N.next);return N.pos++,a}function $t(N,a){let p=kt(N),E=p;return N.eat(",")&&(E="}"!=N.next?kt(N):-1),N.eat("}")||N.err("Unclosed braced range"),{type:"range",min:p,max:E,expr:a}}function ue(N,a){return a-N}function ye(N,a){let p=[];return function E(D){let k=N[D];if(1==k.length&&!k[0].term)return E(k[0].to);p.push(D);for(let F=0;F<k.length;F++){let{term:lt,to:Rt}=k[F];!lt&&-1==p.indexOf(Rt)&&E(Rt)}}(a),p.sort(ue)}function Ke(N){let a=Object.create(null);for(let p in N){let E=N[p];if(!E.hasDefault)return null;a[p]=E.default}return a}function Ae(N,a){let p=Object.create(null);for(let E in N){let D=a&&a[E];if(void 0===D){let k=N[E];if(!k.hasDefault)throw new RangeError("No value supplied for attribute "+E);D=k.default}p[E]=D}return p}function Ne(N){let a=Object.create(null);if(N)for(let p in N)a[p]=new De(N[p]);return a}class _e{constructor(a,p,E){this.name=a,this.schema=p,this.spec=E,this.markSet=null,this.groups=E.group?E.group.split(" "):[],this.attrs=Ne(E.attrs),this.defaultAttrs=Ke(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(E.inline||"text"==a),this.isText="text"==a}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ct.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let a in this.attrs)if(this.attrs[a].isRequired)return!0;return!1}compatibleContent(a){return this==a||this.contentMatch.compatible(a.contentMatch)}computeAttrs(a){return!a&&this.defaultAttrs?this.defaultAttrs:Ae(this.attrs,a)}create(a=null,p,E){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new pt(this,this.computeAttrs(a),g.from(p),tt.setFrom(E))}createChecked(a=null,p,E){return p=g.from(p),this.checkContent(p),new pt(this,this.computeAttrs(a),p,tt.setFrom(E))}createAndFill(a=null,p,E){if(a=this.computeAttrs(a),(p=g.from(p)).size){let F=this.contentMatch.fillBefore(p);if(!F)return null;p=F.append(p)}let D=this.contentMatch.matchFragment(p),k=D&&D.fillBefore(g.empty,!0);return k?new pt(this,a,p.append(k),tt.setFrom(E)):null}validContent(a){let p=this.contentMatch.matchFragment(a);if(!p||!p.validEnd)return!1;for(let E=0;E<a.childCount;E++)if(!this.allowsMarks(a.child(E).marks))return!1;return!0}checkContent(a){if(!this.validContent(a))throw new RangeError(`Invalid content for node ${this.name}: ${a.toString().slice(0,50)}`)}allowsMarkType(a){return null==this.markSet||this.markSet.indexOf(a)>-1}allowsMarks(a){if(null==this.markSet)return!0;for(let p=0;p<a.length;p++)if(!this.allowsMarkType(a[p].type))return!1;return!0}allowedMarks(a){if(null==this.markSet)return a;let p;for(let E=0;E<a.length;E++)this.allowsMarkType(a[E].type)?p&&p.push(a[E]):p||(p=a.slice(0,E));return p?p.length?p:tt.none:a}static compile(a,p){let E=Object.create(null);a.forEach((k,F)=>E[k]=new _e(k,p,F));let D=p.spec.topNode||"doc";if(!E[D])throw new RangeError("Schema is missing its top node type ('"+D+"')");if(!E.text)throw new RangeError("Every schema needs a 'text' type");for(let k in E.text.attrs)throw new RangeError("The text node type should not have attributes");return E}}class De{constructor(a){this.hasDefault=Object.prototype.hasOwnProperty.call(a,"default"),this.default=a.default}get isRequired(){return!this.hasDefault}}class ve{constructor(a,p,E,D){this.name=a,this.rank=p,this.schema=E,this.spec=D,this.attrs=Ne(D.attrs),this.excluded=null;let k=Ke(this.attrs);this.instance=k?new tt(this,k):null}create(a=null){return!a&&this.instance?this.instance:new tt(this,Ae(this.attrs,a))}static compile(a,p){let E=Object.create(null),D=0;return a.forEach((k,F)=>E[k]=new ve(k,D++,p,F)),E}removeFromSet(a){for(var p=0;p<a.length;p++)a[p].type==this&&(a=a.slice(0,p).concat(a.slice(p+1)),p--);return a}isInSet(a){for(let p=0;p<a.length;p++)if(a[p].type==this)return a[p]}excludes(a){return this.excluded.indexOf(a)>-1}}class Se{constructor(a){this.cached=Object.create(null);let p=this.spec={};for(let D in a)p[D]=a[D];p.nodes=l.from(a.nodes),p.marks=l.from(a.marks||{}),this.nodes=_e.compile(this.spec.nodes,this),this.marks=ve.compile(this.spec.marks,this);let E=Object.create(null);for(let D in this.nodes){if(D in this.marks)throw new RangeError(D+" can not be both a node and a mark");let k=this.nodes[D],F=k.spec.content||"",lt=k.spec.marks;k.contentMatch=E[F]||(E[F]=ct.parse(F,this.nodes)),k.inlineContent=k.contentMatch.inlineContent,k.markSet="_"==lt?null:lt?He(this,lt.split(" ")):""!=lt&&k.inlineContent?null:[]}for(let D in this.marks){let k=this.marks[D],F=k.spec.excludes;k.excluded=null==F?[k]:""==F?[]:He(this,F.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(a,p=null,E,D){if("string"==typeof a)a=this.nodeType(a);else{if(!(a instanceof _e))throw new RangeError("Invalid node type: "+a);if(a.schema!=this)throw new RangeError("Node type from different schema used ("+a.name+")")}return a.createChecked(p,E,D)}text(a,p){let E=this.nodes.text;return new L(E,E.defaultAttrs,a,tt.setFrom(p))}mark(a,p){return"string"==typeof a&&(a=this.marks[a]),a.create(p)}nodeFromJSON(a){return pt.fromJSON(this,a)}markFromJSON(a){return tt.fromJSON(this,a)}nodeType(a){let p=this.nodes[a];if(!p)throw new RangeError("Unknown node type: "+a);return p}}function He(N,a){let p=[];for(let E=0;E<a.length;E++){let D=a[E],k=N.marks[D],F=k;if(k)p.push(k);else for(let lt in N.marks){let Rt=N.marks[lt];("_"==D||Rt.spec.group&&Rt.spec.group.split(" ").indexOf(D)>-1)&&p.push(F=Rt)}if(!F)throw new SyntaxError("Unknown mark type: '"+a[E]+"'")}return p}class Me{constructor(a,p){this.schema=a,this.rules=p,this.tags=[],this.styles=[],p.forEach(E=>{E.tag?this.tags.push(E):E.style&&this.styles.push(E)}),this.normalizeLists=!this.tags.some(E=>{if(!/^(ul|ol)\b/.test(E.tag)||!E.node)return!1;let D=a.nodes[E.node];return D.contentMatch.matchType(D)})}parse(a,p={}){let E=new Ee(this,p,!1);return E.addAll(a,p.from,p.to),E.finish()}parseSlice(a,p={}){let E=new Ee(this,p,!0);return E.addAll(a,p.from,p.to),ut.maxOpen(E.finish())}matchTag(a,p,E){for(let D=E?this.tags.indexOf(E)+1:0;D<this.tags.length;D++){let k=this.tags[D];if(b(a,k.tag)&&(void 0===k.namespace||a.namespaceURI==k.namespace)&&(!k.context||p.matchesContext(k.context))){if(k.getAttrs){let F=k.getAttrs(a);if(!1===F)continue;k.attrs=F||void 0}return k}}}matchStyle(a,p,E,D){for(let k=D?this.styles.indexOf(D)+1:0;k<this.styles.length;k++){let F=this.styles[k],lt=F.style;if(!(0!=lt.indexOf(a)||F.context&&!E.matchesContext(F.context)||lt.length>a.length&&(61!=lt.charCodeAt(a.length)||lt.slice(a.length+1)!=p))){if(F.getAttrs){let Rt=F.getAttrs(p);if(!1===Rt)continue;F.attrs=Rt||void 0}return F}}}static schemaRules(a){let p=[];function E(D){let k=null==D.priority?50:D.priority,F=0;for(;F<p.length;F++){let lt=p[F];if((null==lt.priority?50:lt.priority)<k)break}p.splice(F,0,D)}for(let D in a.marks){let k=a.marks[D].spec.parseDOM;k&&k.forEach(F=>{E(F=S(F)),F.mark||F.ignore||F.clearMark||(F.mark=D)})}for(let D in a.nodes){let k=a.nodes[D].spec.parseDOM;k&&k.forEach(F=>{E(F=S(F)),F.node||F.ignore||F.mark||(F.node=D)})}return p}static fromSchema(a){return a.cached.domParser||(a.cached.domParser=new Me(a,Me.schemaRules(a)))}}const ke={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ye={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ue={ol:!0,ul:!0};function Te(N,a,p){return null!=a?(a?1:0)|("full"===a?2:0):N&&"pre"==N.whitespace?3:-5&p}class me{constructor(a,p,E,D,k,F,lt){this.type=a,this.attrs=p,this.marks=E,this.pendingMarks=D,this.solid=k,this.options=lt,this.content=[],this.activeMarks=tt.none,this.stashMarks=[],this.match=F||(4&lt?null:a.contentMatch)}findWrapping(a){if(!this.match){if(!this.type)return[];let p=this.type.contentMatch.fillBefore(g.from(a));if(!p){let D,E=this.type.contentMatch;return(D=E.findWrapping(a.type))?(this.match=E,D):null}this.match=this.type.contentMatch.matchFragment(p)}return this.match.findWrapping(a.type)}finish(a){if(!(1&this.options)){let D,E=this.content[this.content.length-1];if(E&&E.isText&&(D=/[ \t\r\n\u000c]+$/.exec(E.text))){let k=E;E.text.length==D[0].length?this.content.pop():this.content[this.content.length-1]=k.withText(k.text.slice(0,k.text.length-D[0].length))}}let p=g.from(this.content);return!a&&this.match&&(p=p.append(this.match.fillBefore(g.empty,!0))),this.type?this.type.create(this.attrs,p,this.marks):p}popFromStashMark(a){for(let p=this.stashMarks.length-1;p>=0;p--)if(a.eq(this.stashMarks[p]))return this.stashMarks.splice(p,1)[0]}applyPending(a){for(let p=0,E=this.pendingMarks;p<E.length;p++){let D=E[p];(this.type?this.type.allowsMarkType(D.type):R(D.type,a))&&!D.isInSet(this.activeMarks)&&(this.activeMarks=D.addToSet(this.activeMarks),this.pendingMarks=D.removeFromSet(this.pendingMarks))}}inlineContext(a){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:a.parentNode&&!ke.hasOwnProperty(a.parentNode.nodeName.toLowerCase())}}class Ee{constructor(a,p,E){this.parser=a,this.options=p,this.isOpen=E,this.open=0;let k,D=p.topNode,F=Te(null,p.preserveWhitespace,0)|(E?4:0);k=D?new me(D.type,D.attrs,tt.none,tt.none,!0,p.topMatch||D.type.contentMatch,F):new me(E?null:a.schema.topNodeType,null,tt.none,tt.none,!0,null,F),this.nodes=[k],this.find=p.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(a){if(3==a.nodeType)this.addTextNode(a);else if(1==a.nodeType){let p=a.getAttribute("style");if(p){let E=this.readStyles(function(N){let p,a=/\s*([\w-]+)\s*:\s*([^;]+)/g,E=[];for(;p=a.exec(N);)E.push(p[1],p[2].trim());return E}(p));if(!E)return;let[D,k]=E,F=this.top;for(let lt=0;lt<k.length;lt++)this.removePendingMark(k[lt],F);for(let lt=0;lt<D.length;lt++)this.addPendingMark(D[lt]);this.addElement(a);for(let lt=0;lt<D.length;lt++)this.removePendingMark(D[lt],F);for(let lt=0;lt<k.length;lt++)this.addPendingMark(k[lt])}else this.addElement(a)}}addTextNode(a){let p=a.nodeValue,E=this.top;if(2&E.options||E.inlineContext(a)||/[^ \t\r\n\u000c]/.test(p)){if(1&E.options)p=2&E.options?p.replace(/\r\n?/g,"\n"):p.replace(/\r?\n|\r/g," ");else if(p=p.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(p)&&this.open==this.nodes.length-1){let D=E.content[E.content.length-1],k=a.previousSibling;(!D||k&&"BR"==k.nodeName||D.isText&&/[ \t\r\n\u000c]$/.test(D.text))&&(p=p.slice(1))}p&&this.insertNode(this.parser.schema.text(p)),this.findInText(a)}else this.findInside(a)}addElement(a,p){let D,E=a.nodeName.toLowerCase();Ue.hasOwnProperty(E)&&this.parser.normalizeLists&&function(N){for(let a=N.firstChild,p=null;a;a=a.nextSibling){let E=1==a.nodeType?a.nodeName.toLowerCase():null;E&&Ue.hasOwnProperty(E)&&p?(p.appendChild(a),a=p):"li"==E?p=a:E&&(p=null)}}(a);let k=this.options.ruleFromNode&&this.options.ruleFromNode(a)||(D=this.parser.matchTag(a,this,p));if(k?k.ignore:Ye.hasOwnProperty(E))this.findInside(a),this.ignoreFallback(a);else if(!k||k.skip||k.closeParent){k&&k.closeParent?this.open=Math.max(0,this.open-1):k&&k.skip.nodeType&&(a=k.skip);let F,lt=this.top,Rt=this.needsBlock;if(ke.hasOwnProperty(E))lt.content.length&&lt.content[0].isInline&&this.open&&(this.open--,lt=this.top),F=!0,lt.type||(this.needsBlock=!0);else if(!a.firstChild)return void this.leafFallback(a);this.addAll(a),F&&this.sync(lt),this.needsBlock=Rt}else this.addElementByRule(a,k,!1===k.consuming?D:void 0)}leafFallback(a){"BR"==a.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(a.ownerDocument.createTextNode("\n"))}ignoreFallback(a){"BR"==a.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(a){let p=tt.none,E=tt.none;t:for(let D=0;D<a.length;D+=2)for(let k;;){let F=this.parser.matchStyle(a[D],a[D+1],this,k);if(!F)continue t;if(F.ignore)return null;if(F.clearMark?this.top.pendingMarks.forEach(lt=>{F.clearMark(lt)&&(E=lt.addToSet(E))}):p=this.parser.schema.marks[F.mark].create(F.attrs).addToSet(p),!1!==F.consuming)break;k=F}return[p,E]}addElementByRule(a,p,E){let D,k,F;p.node?(k=this.parser.schema.nodes[p.node],k.isLeaf?this.insertNode(k.create(p.attrs))||this.leafFallback(a):D=this.enter(k,p.attrs||null,p.preserveWhitespace)):(F=this.parser.schema.marks[p.mark].create(p.attrs),this.addPendingMark(F));let lt=this.top;if(k&&k.isLeaf)this.findInside(a);else if(E)this.addElement(a,E);else if(p.getContent)this.findInside(a),p.getContent(a,this.parser.schema).forEach(Rt=>this.insertNode(Rt));else{let Rt=a;"string"==typeof p.contentElement?Rt=a.querySelector(p.contentElement):"function"==typeof p.contentElement?Rt=p.contentElement(a):p.contentElement&&(Rt=p.contentElement),this.findAround(a,Rt,!0),this.addAll(Rt)}D&&this.sync(lt)&&this.open--,F&&this.removePendingMark(F,lt)}addAll(a,p,E){let D=p||0;for(let k=p?a.childNodes[p]:a.firstChild,F=null==E?null:a.childNodes[E];k!=F;k=k.nextSibling,++D)this.findAtPoint(a,D),this.addDOM(k);this.findAtPoint(a,D)}findPlace(a){let p,E;for(let D=this.open;D>=0;D--){let k=this.nodes[D],F=k.findWrapping(a);if(F&&(!p||p.length>F.length)&&(p=F,E=k,!F.length)||k.solid)break}if(!p)return!1;this.sync(E);for(let D=0;D<p.length;D++)this.enterInner(p[D],null,!1);return!0}insertNode(a){if(a.isInline&&this.needsBlock&&!this.top.type){let p=this.textblockFromContext();p&&this.enterInner(p)}if(this.findPlace(a)){this.closeExtra();let p=this.top;p.applyPending(a.type),p.match&&(p.match=p.match.matchType(a.type));let E=p.activeMarks;for(let D=0;D<a.marks.length;D++)(!p.type||p.type.allowsMarkType(a.marks[D].type))&&(E=a.marks[D].addToSet(E));return p.content.push(a.mark(E)),!0}return!1}enter(a,p,E){let D=this.findPlace(a.create(p));return D&&this.enterInner(a,p,!0,E),D}enterInner(a,p=null,E=!1,D){this.closeExtra();let k=this.top;k.applyPending(a),k.match=k.match&&k.match.matchType(a);let F=Te(a,D,k.options);4&k.options&&0==k.content.length&&(F|=4),this.nodes.push(new me(a,p,k.activeMarks,k.pendingMarks,E,null,F)),this.open++}closeExtra(a=!1){let p=this.nodes.length-1;if(p>this.open){for(;p>this.open;p--)this.nodes[p-1].content.push(this.nodes[p].finish(a));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(a){for(let p=this.open;p>=0;p--)if(this.nodes[p]==a)return this.open=p,!0;return!1}get currentPos(){this.closeExtra();let a=0;for(let p=this.open;p>=0;p--){let E=this.nodes[p].content;for(let D=E.length-1;D>=0;D--)a+=E[D].nodeSize;p&&a++}return a}findAtPoint(a,p){if(this.find)for(let E=0;E<this.find.length;E++)this.find[E].node==a&&this.find[E].offset==p&&(this.find[E].pos=this.currentPos)}findInside(a){if(this.find)for(let p=0;p<this.find.length;p++)null==this.find[p].pos&&1==a.nodeType&&a.contains(this.find[p].node)&&(this.find[p].pos=this.currentPos)}findAround(a,p,E){if(a!=p&&this.find)for(let D=0;D<this.find.length;D++)null==this.find[D].pos&&1==a.nodeType&&a.contains(this.find[D].node)&&p.compareDocumentPosition(this.find[D].node)&(E?2:4)&&(this.find[D].pos=this.currentPos)}findInText(a){if(this.find)for(let p=0;p<this.find.length;p++)this.find[p].node==a&&(this.find[p].pos=this.currentPos-(a.nodeValue.length-this.find[p].offset))}matchesContext(a){if(a.indexOf("|")>-1)return a.split(/\s*\|\s*/).some(this.matchesContext,this);let p=a.split("/"),E=this.options.context,D=!(this.isOpen||E&&E.parent.type!=this.nodes[0].type),k=(D?0:1)-(E?E.depth+1:0),F=(lt,Rt)=>{for(;lt>=0;lt--){let qt=p[lt];if(""==qt){if(lt==p.length-1||0==lt)continue;for(;Rt>=k;Rt--)if(F(lt-1,Rt))return!0;return!1}{let te=Rt>0||0==Rt&&D?this.nodes[Rt].type:E&&Rt>=k?E.node(Rt-k).type:null;if(!te||te.name!=qt&&-1==te.groups.indexOf(qt))return!1;Rt--}}return!0};return F(p.length-1,this.open)}textblockFromContext(){let a=this.options.context;if(a)for(let p=a.depth;p>=0;p--){let E=a.node(p).contentMatchAt(a.indexAfter(p)).defaultType;if(E&&E.isTextblock&&E.defaultAttrs)return E}for(let p in this.parser.schema.nodes){let E=this.parser.schema.nodes[p];if(E.isTextblock&&E.defaultAttrs)return E}}addPendingMark(a){let p=function(N,a){for(let p=0;p<a.length;p++)if(N.eq(a[p]))return a[p]}(a,this.top.pendingMarks);p&&this.top.stashMarks.push(p),this.top.pendingMarks=a.addToSet(this.top.pendingMarks)}removePendingMark(a,p){for(let E=this.open;E>=0;E--){let D=this.nodes[E];if(D.pendingMarks.lastIndexOf(a)>-1)D.pendingMarks=a.removeFromSet(D.pendingMarks);else{D.activeMarks=a.removeFromSet(D.activeMarks);let F=D.popFromStashMark(a);F&&D.type&&D.type.allowsMarkType(F.type)&&(D.activeMarks=F.addToSet(D.activeMarks))}if(D==p)break}}}function b(N,a){return(N.matches||N.msMatchesSelector||N.webkitMatchesSelector||N.mozMatchesSelector).call(N,a)}function S(N){let a={};for(let p in N)a[p]=N[p];return a}function R(N,a){let p=a.schema.nodes;for(let E in p){let D=p[E];if(!D.allowsMarkType(N))continue;let k=[],F=lt=>{k.push(lt);for(let Rt=0;Rt<lt.edgeCount;Rt++){let{type:qt,next:te}=lt.edge(Rt);if(qt==a||k.indexOf(te)<0&&F(te))return!0}};if(F(D.contentMatch))return!0}}class H{constructor(a,p){this.nodes=a,this.marks=p}serializeFragment(a,p={},E){E||(E=wt(p).createDocumentFragment());let D=E,k=[];return a.forEach(F=>{if(k.length||F.marks.length){let lt=0,Rt=0;for(;lt<k.length&&Rt<F.marks.length;){let qt=F.marks[Rt];if(this.marks[qt.type.name]){if(!qt.eq(k[lt][0])||!1===qt.type.spec.spanning)break;lt++,Rt++}else Rt++}for(;lt<k.length;)D=k.pop()[1];for(;Rt<F.marks.length;){let qt=F.marks[Rt++],te=this.serializeMark(qt,F.isInline,p);te&&(k.push([qt,D]),D.appendChild(te.dom),D=te.contentDOM||te.dom)}}D.appendChild(this.serializeNodeInner(F,p))}),E}serializeNodeInner(a,p){let{dom:E,contentDOM:D}=H.renderSpec(wt(p),this.nodes[a.type.name](a));if(D){if(a.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(a.content,p,D)}return E}serializeNode(a,p={}){let E=this.serializeNodeInner(a,p);for(let D=a.marks.length-1;D>=0;D--){let k=this.serializeMark(a.marks[D],a.isInline,p);k&&((k.contentDOM||k.dom).appendChild(E),E=k.dom)}return E}serializeMark(a,p,E={}){let D=this.marks[a.type.name];return D&&H.renderSpec(wt(E),D(a,p))}static renderSpec(a,p,E=null){if("string"==typeof p)return{dom:a.createTextNode(p)};if(null!=p.nodeType)return{dom:p};if(p.dom&&null!=p.dom.nodeType)return p;let D=p[0],k=D.indexOf(" ");k>0&&(E=D.slice(0,k),D=D.slice(k+1));let F,lt=E?a.createElementNS(E,D):a.createElement(D),Rt=p[1],qt=1;if(Rt&&"object"==typeof Rt&&null==Rt.nodeType&&!Array.isArray(Rt)){qt=2;for(let te in Rt)if(null!=Rt[te]){let we=te.indexOf(" ");we>0?lt.setAttributeNS(te.slice(0,we),te.slice(we+1),Rt[te]):lt.setAttribute(te,Rt[te])}}for(let te=qt;te<p.length;te++){let we=p[te];if(0===we){if(te<p.length-1||te>qt)throw new RangeError("Content hole must be the only child of its parent node");return{dom:lt,contentDOM:lt}}{let{dom:Je,contentDOM:Y}=H.renderSpec(a,we,E);if(lt.appendChild(Je),Y){if(F)throw new RangeError("Multiple content holes");F=Y}}}return{dom:lt,contentDOM:F}}static fromSchema(a){return a.cached.domSerializer||(a.cached.domSerializer=new H(this.nodesFromSchema(a),this.marksFromSchema(a)))}static nodesFromSchema(a){let p=Ot(a.nodes);return p.text||(p.text=E=>E.text),p}static marksFromSchema(a){return Ot(a.marks)}}function Ot(N){let a={};for(let p in N){let E=N[p].spec.toDOM;E&&(a[p]=E)}return a}function wt(N){return N.document||window.document}},62463:(jt,Et,c)=>{c.d(Et,{Bs:()=>X,C1:()=>et,H$:()=>Kt,Sy:()=>yt,Y1:()=>P,qv:()=>ft,xm:()=>g,yy:()=>At});var M=c(77346),l=c(38480);const y=Object.create(null);class P{constructor(L,rt,ct){this.$anchor=L,this.$head=rt,this.ranges=ct||[new g(L.min(rt),L.max(rt))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let L=this.ranges;for(let rt=0;rt<L.length;rt++)if(L[rt].$from.pos!=L[rt].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(L,rt=M.p2.empty){let ct=rt.content.lastChild,st=null;for(let ot=0;ot<rt.openEnd;ot++)st=ct,ct=ct.lastChild;let J=L.steps.length,Q=this.ranges;for(let ot=0;ot<Q.length;ot++){let{$from:kt,$to:$t}=Q[ot],Yt=L.mapping.slice(J);L.replaceRange(Yt.map(kt.pos),Yt.map($t.pos),ot?M.p2.empty:rt),0==ot&&bt(L,J,(ct?ct.isInline:st&&st.isTextblock)?-1:1)}}replaceWith(L,rt){let ct=L.steps.length,st=this.ranges;for(let J=0;J<st.length;J++){let{$from:Q,$to:ot}=st[J],kt=L.mapping.slice(ct),$t=kt.map(Q.pos),Yt=kt.map(ot.pos);J?L.deleteRange($t,Yt):(L.replaceRangeWith($t,Yt,rt),bt(L,ct,rt.isInline?-1:1))}}static findFrom(L,rt,ct=!1){let st=L.parent.inlineContent?new X(L):Ct(L.node(0),L.parent,L.pos,L.index(),rt,ct);if(st)return st;for(let J=L.depth-1;J>=0;J--){let Q=rt<0?Ct(L.node(0),L.node(J),L.before(J+1),L.index(J),rt,ct):Ct(L.node(0),L.node(J),L.after(J+1),L.index(J)+1,rt,ct);if(Q)return Q}return null}static near(L,rt=1){return this.findFrom(L,rt)||this.findFrom(L,-rt)||new et(L.node(0))}static atStart(L){return Ct(L,L,0,0,1)||new et(L)}static atEnd(L){return Ct(L,L,L.content.size,L.childCount,-1)||new et(L)}static fromJSON(L,rt){if(!rt||!rt.type)throw new RangeError("Invalid input for Selection.fromJSON");let ct=y[rt.type];if(!ct)throw new RangeError(`No selection type ${rt.type} defined`);return ct.fromJSON(L,rt)}static jsonID(L,rt){if(L in y)throw new RangeError("Duplicate use of selection JSON ID "+L);return y[L]=rt,rt.prototype.jsonID=L,rt}getBookmark(){return X.between(this.$anchor,this.$head).getBookmark()}}P.prototype.visible=!0;class g{constructor(L,rt){this.$from=L,this.$to=rt}}let it=!1;function B(pt){!it&&!pt.parent.inlineContent&&(it=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+pt.parent.type.name+")"))}class X extends P{constructor(L,rt=L){B(L),B(rt),super(L,rt)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(L,rt){let ct=L.resolve(rt.map(this.head));if(!ct.parent.inlineContent)return P.near(ct);let st=L.resolve(rt.map(this.anchor));return new X(st.parent.inlineContent?st:ct,ct)}replace(L,rt=M.p2.empty){if(super.replace(L,rt),rt==M.p2.empty){let ct=this.$from.marksAcross(this.$to);ct&&L.ensureMarks(ct)}}eq(L){return L instanceof X&&L.anchor==this.anchor&&L.head==this.head}getBookmark(){return new tt(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(L,rt){if("number"!=typeof rt.anchor||"number"!=typeof rt.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new X(L.resolve(rt.anchor),L.resolve(rt.head))}static create(L,rt,ct=rt){let st=L.resolve(rt);return new this(st,ct==rt?st:L.resolve(ct))}static between(L,rt,ct){let st=L.pos-rt.pos;if((!ct||st)&&(ct=st>=0?1:-1),!rt.parent.inlineContent){let J=P.findFrom(rt,ct,!0)||P.findFrom(rt,-ct,!0);if(!J)return P.near(rt,ct);rt=J.$head}return L.parent.inlineContent||(0==st||(L=(P.findFrom(L,-ct,!0)||P.findFrom(L,ct,!0)).$anchor).pos<rt.pos!=st<0)&&(L=rt),new X(L,rt)}}P.jsonID("text",X);class tt{constructor(L,rt){this.anchor=L,this.head=rt}map(L){return new tt(L.map(this.anchor),L.map(this.head))}resolve(L){return X.between(L.resolve(this.anchor),L.resolve(this.head))}}class ft extends P{constructor(L){let rt=L.nodeAfter,ct=L.node(0).resolve(L.pos+rt.nodeSize);super(L,ct),this.node=rt}map(L,rt){let{deleted:ct,pos:st}=rt.mapResult(this.anchor),J=L.resolve(st);return ct?P.near(J):new ft(J)}content(){return new M.p2(M.HY.from(this.node),0,0)}eq(L){return L instanceof ft&&L.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new ut(this.anchor)}static fromJSON(L,rt){if("number"!=typeof rt.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ft(L.resolve(rt.anchor))}static create(L,rt){return new ft(L.resolve(rt))}static isSelectable(L){return!L.isText&&!1!==L.type.spec.selectable}}ft.prototype.visible=!1,P.jsonID("node",ft);class ut{constructor(L){this.anchor=L}map(L){let{deleted:rt,pos:ct}=L.mapResult(this.anchor);return rt?new tt(ct,ct):new ut(ct)}resolve(L){let rt=L.resolve(this.anchor),ct=rt.nodeAfter;return ct&&ft.isSelectable(ct)?new ft(rt):P.near(rt)}}class et extends P{constructor(L){super(L.resolve(0),L.resolve(L.content.size))}replace(L,rt=M.p2.empty){if(rt==M.p2.empty){L.delete(0,L.doc.content.size);let ct=P.atStart(L.doc);ct.eq(L.selection)||L.setSelection(ct)}else super.replace(L,rt)}toJSON(){return{type:"all"}}static fromJSON(L){return new et(L)}map(L){return new et(L)}eq(L){return L instanceof et}getBookmark(){return Tt}}P.jsonID("all",et);const Tt={map(){return this},resolve:pt=>new et(pt)};function Ct(pt,L,rt,ct,st,J=!1){if(L.inlineContent)return X.create(pt,rt);for(let Q=ct-(st>0?0:1);st>0?Q<L.childCount:Q>=0;Q+=st){let ot=L.child(Q);if(ot.isAtom){if(!J&&ft.isSelectable(ot))return ft.create(pt,rt-(st<0?ot.nodeSize:0))}else{let kt=Ct(pt,ot,rt+st,st<0?ot.childCount:0,st,J);if(kt)return kt}rt+=ot.nodeSize*st}return null}function bt(pt,L,rt){let ct=pt.steps.length-1;if(ct<L)return;let Q,st=pt.steps[ct];(st instanceof l.Pu||st instanceof l.FC)&&(pt.mapping.maps[ct].forEach((ot,kt,$t,Yt)=>{null==Q&&(Q=Yt)}),pt.setSelection(P.near(pt.doc.resolve(Q),rt)))}class ht extends l.wx{constructor(L){super(L.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=L.selection,this.storedMarks=L.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(L){if(L.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=L,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(L){return this.storedMarks=L,this.updated|=2,this}ensureMarks(L){return M.vc.sameSet(this.storedMarks||this.selection.$from.marks(),L)||this.setStoredMarks(L),this}addStoredMark(L){return this.ensureMarks(L.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(L){return this.ensureMarks(L.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(L,rt){super.addStep(L,rt),this.updated=-3&this.updated,this.storedMarks=null}setTime(L){return this.time=L,this}replaceSelection(L){return this.selection.replace(this,L),this}replaceSelectionWith(L,rt=!0){let ct=this.selection;return rt&&(L=L.mark(this.storedMarks||(ct.empty?ct.$from.marks():ct.$from.marksAcross(ct.$to)||M.vc.none))),ct.replaceWith(this,L),this}deleteSelection(){return this.selection.replace(this),this}insertText(L,rt,ct){let st=this.doc.type.schema;if(null==rt)return L?this.replaceSelectionWith(st.text(L),!0):this.deleteSelection();{if(null==ct&&(ct=rt),ct=null==ct?rt:ct,!L)return this.deleteRange(rt,ct);let J=this.storedMarks;if(!J){let Q=this.doc.resolve(rt);J=ct==rt?Q.marks():Q.marksAcross(this.doc.resolve(ct))}return this.replaceRangeWith(rt,ct,st.text(L,J)),this.selection.empty||this.setSelection(P.near(this.selection.$to)),this}}setMeta(L,rt){return this.meta["string"==typeof L?L:L.key]=rt,this}getMeta(L){return this.meta["string"==typeof L?L:L.key]}get isGeneric(){for(let L in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function q(pt,L){return L&&pt?pt.bind(L):pt}class W{constructor(L,rt,ct){this.name=L,this.init=q(rt.init,ct),this.apply=q(rt.apply,ct)}}const mt=[new W("doc",{init:pt=>pt.doc||pt.schema.topNodeType.createAndFill(),apply:pt=>pt.doc}),new W("selection",{init:(pt,L)=>pt.selection||P.atStart(L.doc),apply:pt=>pt.selection}),new W("storedMarks",{init:pt=>pt.storedMarks||null,apply:(pt,L,rt,ct)=>ct.selection.$cursor?pt.storedMarks:null}),new W("scrollToSelection",{init:()=>0,apply:(pt,L)=>pt.scrolledIntoView?L+1:L})];class j{constructor(L,rt){this.schema=L,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=mt.slice(),rt&&rt.forEach(ct=>{if(this.pluginsByKey[ct.key])throw new RangeError("Adding different instances of a keyed plugin ("+ct.key+")");this.plugins.push(ct),this.pluginsByKey[ct.key]=ct,ct.spec.state&&this.fields.push(new W(ct.key,ct.spec.state,ct))})}}class At{constructor(L){this.config=L}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(L){return this.applyTransaction(L).state}filterTransaction(L,rt=-1){for(let ct=0;ct<this.config.plugins.length;ct++)if(ct!=rt){let st=this.config.plugins[ct];if(st.spec.filterTransaction&&!st.spec.filterTransaction.call(st,L,this))return!1}return!0}applyTransaction(L){if(!this.filterTransaction(L))return{state:this,transactions:[]};let rt=[L],ct=this.applyInner(L),st=null;for(;;){let J=!1;for(let Q=0;Q<this.config.plugins.length;Q++){let ot=this.config.plugins[Q];if(ot.spec.appendTransaction){let kt=st?st[Q].n:0,$t=st?st[Q].state:this,Yt=kt<rt.length&&ot.spec.appendTransaction.call(ot,kt?rt.slice(kt):rt,$t,ct);if(Yt&&ct.filterTransaction(Yt,Q)){if(Yt.setMeta("appendedTransaction",L),!st){st=[];for(let ne=0;ne<this.config.plugins.length;ne++)st.push(ne<Q?{state:ct,n:rt.length}:{state:this,n:0})}rt.push(Yt),ct=ct.applyInner(Yt),J=!0}st&&(st[Q]={state:ct,n:rt.length})}}if(!J)return{state:ct,transactions:rt}}}applyInner(L){if(!L.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let rt=new At(this.config),ct=this.config.fields;for(let st=0;st<ct.length;st++){let J=ct[st];rt[J.name]=J.apply(L,this[J.name],this,rt)}return rt}get tr(){return new ht(this)}static create(L){let rt=new j(L.doc?L.doc.type.schema:L.schema,L.plugins),ct=new At(rt);for(let st=0;st<rt.fields.length;st++)ct[rt.fields[st].name]=rt.fields[st].init(L,ct);return ct}reconfigure(L){let rt=new j(this.schema,L.plugins),ct=rt.fields,st=new At(rt);for(let J=0;J<ct.length;J++){let Q=ct[J].name;st[Q]=this.hasOwnProperty(Q)?this[Q]:ct[J].init(L,st)}return st}toJSON(L){let rt={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(rt.storedMarks=this.storedMarks.map(ct=>ct.toJSON())),L&&"object"==typeof L)for(let ct in L){if("doc"==ct||"selection"==ct)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let st=L[ct],J=st.spec.state;J&&J.toJSON&&(rt[ct]=J.toJSON.call(st,this[st.key]))}return rt}static fromJSON(L,rt,ct){if(!rt)throw new RangeError("Invalid input for EditorState.fromJSON");if(!L.schema)throw new RangeError("Required config field 'schema' missing");let st=new j(L.schema,L.plugins),J=new At(st);return st.fields.forEach(Q=>{if("doc"==Q.name)J.doc=M.NB.fromJSON(L.schema,rt.doc);else if("selection"==Q.name)J.selection=P.fromJSON(J.doc,rt.selection);else if("storedMarks"==Q.name)rt.storedMarks&&(J.storedMarks=rt.storedMarks.map(L.schema.markFromJSON));else{if(ct)for(let ot in ct){let kt=ct[ot],$t=kt.spec.state;if(kt.key==Q.name&&$t&&$t.fromJSON&&Object.prototype.hasOwnProperty.call(rt,ot))return void(J[Q.name]=$t.fromJSON.call(kt,L,rt[ot],J))}J[Q.name]=Q.init(L,J)}}),J}}function St(pt,L,rt){for(let ct in pt){let st=pt[ct];st instanceof Function?st=st.bind(L):"handleDOMEvents"==ct&&(st=St(st,L,{})),rt[ct]=st}return rt}class yt{constructor(L){this.spec=L,this.props={},L.props&&St(L.props,this,this.props),this.key=L.key?L.key.key:Ht("plugin")}getState(L){return L[this.key]}}const Lt=Object.create(null);function Ht(pt){return pt in Lt?pt+"$"+ ++Lt[pt]:(Lt[pt]=0,pt+"$")}class Kt{constructor(L="key"){this.key=Ht(L)}get(L){return L.config.pluginsByKey[this.key]}getState(L){return L[this.key]}}},38480:(jt,Et,c)=>{c.d(Et,{Ax:()=>$t,FC:()=>j,GJ:()=>ue,Mn:()=>ne,Pu:()=>mt,dR:()=>Ke,k9:()=>Kt,nd:()=>L,nj:()=>fe,vs:()=>Tt,wx:()=>Ee});var M=c(77346);const y=Math.pow(2,16);function P(_t,b){return _t+b*y}function g(_t){return 65535&_t}class ut{constructor(b,O,S){this.pos=b,this.delInfo=O,this.recover=S}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class et{constructor(b,O=!1){if(this.ranges=b,this.inverted=O,!b.length&&et.empty)return et.empty}recover(b){let O=0,S=g(b);if(!this.inverted)for(let R=0;R<S;R++)O+=this.ranges[3*R+2]-this.ranges[3*R+1];return this.ranges[3*S]+O+((_t=b)-(65535&_t))/y;var _t}mapResult(b,O=1){return this._map(b,O,!1)}map(b,O=1){return this._map(b,O,!0)}_map(b,O,S){let R=0,V=this.inverted?2:1,H=this.inverted?1:2;for(let Ot=0;Ot<this.ranges.length;Ot+=3){let wt=this.ranges[Ot]-(this.inverted?R:0);if(wt>b)break;let N=this.ranges[Ot+V],a=this.ranges[Ot+H],p=wt+N;if(b<=p){let D=wt+R+((N?b==wt?-1:b==p?1:O:O)<0?0:a);if(S)return D;let k=b==(O<0?wt:p)?null:P(Ot/3,b-wt),F=b==wt?2:b==p?1:4;return(O<0?b!=wt:b!=p)&&(F|=8),new ut(D,F,k)}R+=a-N}return S?b+R:new ut(b+R,0,null)}touches(b,O){let S=0,R=g(O),V=this.inverted?2:1,H=this.inverted?1:2;for(let Ot=0;Ot<this.ranges.length;Ot+=3){let wt=this.ranges[Ot]-(this.inverted?S:0);if(wt>b)break;let N=this.ranges[Ot+V];if(b<=wt+N&&Ot==3*R)return!0;S+=this.ranges[Ot+H]-N}return!1}forEach(b){let O=this.inverted?2:1,S=this.inverted?1:2;for(let R=0,V=0;R<this.ranges.length;R+=3){let H=this.ranges[R],Ot=H-(this.inverted?V:0),wt=H+(this.inverted?0:V),N=this.ranges[R+O],a=this.ranges[R+S];b(Ot,Ot+N,wt,wt+a),V+=a-N}}invert(){return new et(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(b){return 0==b?et.empty:new et(b<0?[0,-b,0]:[0,0,b])}}et.empty=new et([]);class Tt{constructor(b=[],O,S=0,R=b.length){this.maps=b,this.mirror=O,this.from=S,this.to=R}slice(b=0,O=this.maps.length){return new Tt(this.maps,this.mirror,b,O)}copy(){return new Tt(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(b,O){this.to=this.maps.push(b),null!=O&&this.setMirror(this.maps.length-1,O)}appendMapping(b){for(let O=0,S=this.maps.length;O<b.maps.length;O++){let R=b.getMirror(O);this.appendMap(b.maps[O],null!=R&&R<O?S+R:void 0)}}getMirror(b){if(this.mirror)for(let O=0;O<this.mirror.length;O++)if(this.mirror[O]==b)return this.mirror[O+(O%2?-1:1)]}setMirror(b,O){this.mirror||(this.mirror=[]),this.mirror.push(b,O)}appendMappingInverted(b){for(let O=b.maps.length-1,S=this.maps.length+b.maps.length;O>=0;O--){let R=b.getMirror(O);this.appendMap(b.maps[O].invert(),null!=R&&R>O?S-R-1:void 0)}}invert(){let b=new Tt;return b.appendMappingInverted(this),b}map(b,O=1){if(this.mirror)return this._map(b,O,!0);for(let S=this.from;S<this.to;S++)b=this.maps[S].map(b,O);return b}mapResult(b,O=1){return this._map(b,O,!1)}_map(b,O,S){let R=0;for(let V=this.from;V<this.to;V++){let Ot=this.maps[V].mapResult(b,O);if(null!=Ot.recover){let wt=this.getMirror(V);if(null!=wt&&wt>V&&wt<this.to){V=wt,b=this.maps[wt].recover(Ot.recover);continue}}R|=Ot.delInfo,b=Ot.pos}return S?b:new ut(b,R,null)}}const Ct=Object.create(null);class bt{getMap(){return et.empty}merge(b){return null}static fromJSON(b,O){if(!O||!O.stepType)throw new RangeError("Invalid input for Step.fromJSON");let S=Ct[O.stepType];if(!S)throw new RangeError(`No step type ${O.stepType} defined`);return S.fromJSON(b,O)}static jsonID(b,O){if(b in Ct)throw new RangeError("Duplicate use of step JSON ID "+b);return Ct[b]=O,O.prototype.jsonID=b,O}}class It{constructor(b,O){this.doc=b,this.failed=O}static ok(b){return new It(b,null)}static fail(b){return new It(null,b)}static fromReplace(b,O,S,R){try{return It.ok(b.replace(O,S,R))}catch(V){if(V instanceof M.e4)return It.fail(V.message);throw V}}}function Pt(_t,b,O){let S=[];for(let R=0;R<_t.childCount;R++){let V=_t.child(R);V.content.size&&(V=V.copy(Pt(V.content,b,V))),V.isInline&&(V=b(V,O,R)),S.push(V)}return M.HY.fromArray(S)}class Dt extends bt{constructor(b,O,S){super(),this.from=b,this.to=O,this.mark=S}apply(b){let O=b.slice(this.from,this.to),S=b.resolve(this.from),R=S.node(S.sharedDepth(this.to)),V=new M.p2(Pt(O.content,(H,Ot)=>H.isAtom&&Ot.type.allowsMarkType(this.mark.type)?H.mark(this.mark.addToSet(H.marks)):H,R),O.openStart,O.openEnd);return It.fromReplace(b,this.from,this.to,V)}invert(){return new ht(this.from,this.to,this.mark)}map(b){let O=b.mapResult(this.from,1),S=b.mapResult(this.to,-1);return O.deleted&&S.deleted||O.pos>=S.pos?null:new Dt(O.pos,S.pos,this.mark)}merge(b){return b instanceof Dt&&b.mark.eq(this.mark)&&this.from<=b.to&&this.to>=b.from?new Dt(Math.min(this.from,b.from),Math.max(this.to,b.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Dt(O.from,O.to,b.markFromJSON(O.mark))}}bt.jsonID("addMark",Dt);class ht extends bt{constructor(b,O,S){super(),this.from=b,this.to=O,this.mark=S}apply(b){let O=b.slice(this.from,this.to),S=new M.p2(Pt(O.content,R=>R.mark(this.mark.removeFromSet(R.marks)),b),O.openStart,O.openEnd);return It.fromReplace(b,this.from,this.to,S)}invert(){return new Dt(this.from,this.to,this.mark)}map(b){let O=b.mapResult(this.from,1),S=b.mapResult(this.to,-1);return O.deleted&&S.deleted||O.pos>=S.pos?null:new ht(O.pos,S.pos,this.mark)}merge(b){return b instanceof ht&&b.mark.eq(this.mark)&&this.from<=b.to&&this.to>=b.from?new ht(Math.min(this.from,b.from),Math.max(this.to,b.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ht(O.from,O.to,b.markFromJSON(O.mark))}}bt.jsonID("removeMark",ht);class q extends bt{constructor(b,O){super(),this.pos=b,this.mark=O}apply(b){let O=b.nodeAt(this.pos);if(!O)return It.fail("No node at mark step's position");let S=O.type.create(O.attrs,null,this.mark.addToSet(O.marks));return It.fromReplace(b,this.pos,this.pos+1,new M.p2(M.HY.from(S),0,O.isLeaf?0:1))}invert(b){let O=b.nodeAt(this.pos);if(O){let S=this.mark.addToSet(O.marks);if(S.length==O.marks.length){for(let R=0;R<O.marks.length;R++)if(!O.marks[R].isInSet(S))return new q(this.pos,O.marks[R]);return new q(this.pos,this.mark)}}return new W(this.pos,this.mark)}map(b){let O=b.mapResult(this.pos,1);return O.deletedAfter?null:new q(O.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(b,O){if("number"!=typeof O.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new q(O.pos,b.markFromJSON(O.mark))}}bt.jsonID("addNodeMark",q);class W extends bt{constructor(b,O){super(),this.pos=b,this.mark=O}apply(b){let O=b.nodeAt(this.pos);if(!O)return It.fail("No node at mark step's position");let S=O.type.create(O.attrs,null,this.mark.removeFromSet(O.marks));return It.fromReplace(b,this.pos,this.pos+1,new M.p2(M.HY.from(S),0,O.isLeaf?0:1))}invert(b){let O=b.nodeAt(this.pos);return O&&this.mark.isInSet(O.marks)?new q(this.pos,this.mark):this}map(b){let O=b.mapResult(this.pos,1);return O.deletedAfter?null:new W(O.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(b,O){if("number"!=typeof O.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new W(O.pos,b.markFromJSON(O.mark))}}bt.jsonID("removeNodeMark",W);class mt extends bt{constructor(b,O,S,R=!1){super(),this.from=b,this.to=O,this.slice=S,this.structure=R}apply(b){return this.structure&&At(b,this.from,this.to)?It.fail("Structure replace would overwrite content"):It.fromReplace(b,this.from,this.to,this.slice)}getMap(){return new et([this.from,this.to-this.from,this.slice.size])}invert(b){return new mt(this.from,this.from+this.slice.size,b.slice(this.from,this.to))}map(b){let O=b.mapResult(this.from,1),S=b.mapResult(this.to,-1);return O.deletedAcross&&S.deletedAcross?null:new mt(O.pos,Math.max(O.pos,S.pos),this.slice)}merge(b){if(!(b instanceof mt)||b.structure||this.structure)return null;if(this.from+this.slice.size!=b.from||this.slice.openEnd||b.slice.openStart){if(b.to!=this.from||this.slice.openStart||b.slice.openEnd)return null;{let O=this.slice.size+b.slice.size==0?M.p2.empty:new M.p2(b.slice.content.append(this.slice.content),b.slice.openStart,this.slice.openEnd);return new mt(b.from,this.to,O,this.structure)}}{let O=this.slice.size+b.slice.size==0?M.p2.empty:new M.p2(this.slice.content.append(b.slice.content),this.slice.openStart,b.slice.openEnd);return new mt(this.from,this.to+(b.to-b.from),O,this.structure)}}toJSON(){let b={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(b.slice=this.slice.toJSON()),this.structure&&(b.structure=!0),b}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new mt(O.from,O.to,M.p2.fromJSON(b,O.slice),!!O.structure)}}bt.jsonID("replace",mt);class j extends bt{constructor(b,O,S,R,V,H,Ot=!1){super(),this.from=b,this.to=O,this.gapFrom=S,this.gapTo=R,this.slice=V,this.insert=H,this.structure=Ot}apply(b){if(this.structure&&(At(b,this.from,this.gapFrom)||At(b,this.gapTo,this.to)))return It.fail("Structure gap-replace would overwrite content");let O=b.slice(this.gapFrom,this.gapTo);if(O.openStart||O.openEnd)return It.fail("Gap is not a flat range");let S=this.slice.insertAt(this.insert,O.content);return S?It.fromReplace(b,this.from,this.to,S):It.fail("Content does not fit in gap")}getMap(){return new et([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(b){let O=this.gapTo-this.gapFrom;return new j(this.from,this.from+this.slice.size+O,this.from+this.insert,this.from+this.insert+O,b.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(b){let O=b.mapResult(this.from,1),S=b.mapResult(this.to,-1),R=b.map(this.gapFrom,-1),V=b.map(this.gapTo,1);return O.deletedAcross&&S.deletedAcross||R<O.pos||V>S.pos?null:new j(O.pos,S.pos,R,V,this.slice,this.insert,this.structure)}toJSON(){let b={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(b.slice=this.slice.toJSON()),this.structure&&(b.structure=!0),b}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to||"number"!=typeof O.gapFrom||"number"!=typeof O.gapTo||"number"!=typeof O.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new j(O.from,O.to,O.gapFrom,O.gapTo,M.p2.fromJSON(b,O.slice),O.insert,!!O.structure)}}function At(_t,b,O){let S=_t.resolve(b),R=O-b,V=S.depth;for(;R>0&&V>0&&S.indexAfter(V)==S.node(V).childCount;)V--,R--;if(R>0){let H=S.node(V).maybeChild(S.indexAfter(V));for(;R>0;){if(!H||H.isLeaf)return!0;H=H.firstChild,R--}}return!1}function Ht(_t,b,O){return(0==b||_t.canReplace(b,_t.childCount))&&(O==_t.childCount||_t.canReplace(0,O))}function Kt(_t){let O=_t.parent.content.cutByIndex(_t.startIndex,_t.endIndex);for(let S=_t.depth;;--S){let R=_t.$from.node(S),V=_t.$from.index(S),H=_t.$to.indexAfter(S);if(S<_t.depth&&R.canReplace(V,H,O))return S;if(0==S||R.type.spec.isolating||!Ht(R,V,H))break}return null}function L(_t,b,O=null,S=_t){let R=function(_t,b){let{parent:O,startIndex:S,endIndex:R}=_t,V=O.contentMatchAt(S).findWrapping(b);return V&&O.canReplaceWith(S,R,V.length?V[0]:b)?V:null}(_t,b),V=R&&function(_t,b){let{parent:O,startIndex:S,endIndex:R}=_t,V=O.child(S),H=b.contentMatch.findWrapping(V.type);if(!H)return null;let wt=(H.length?H[H.length-1]:b).contentMatch;for(let N=S;wt&&N<R;N++)wt=wt.matchType(O.child(N).type);return wt&&wt.validEnd?H:null}(S,b);return V?R.map(rt).concat({type:b,attrs:O}).concat(V.map(rt)):null}function rt(_t){return{type:_t,attrs:null}}function $t(_t,b,O=1,S){let R=_t.resolve(b),V=R.depth-O,H=S&&S[S.length-1]||R.parent;if(V<0||R.parent.type.spec.isolating||!R.parent.canReplace(R.index(),R.parent.childCount)||!H.type.validContent(R.parent.content.cutByIndex(R.index(),R.parent.childCount)))return!1;for(let N=R.depth-1,a=O-2;N>V;N--,a--){let p=R.node(N),E=R.index(N);if(p.type.spec.isolating)return!1;let D=p.content.cutByIndex(E,p.childCount),k=S&&S[a]||p;if(k!=p&&(D=D.replaceChild(0,k.type.create(k.attrs))),!p.canReplace(E+1,p.childCount)||!k.type.validContent(D))return!1}let Ot=R.indexAfter(V),wt=S&&S[0];return R.node(V).canReplaceWith(Ot,Ot,wt?wt.type:R.node(V+1).type)}function ne(_t,b){let O=_t.resolve(b),S=O.index();return zt(O.nodeBefore,O.nodeAfter)&&O.parent.canReplace(S,S+1)}function zt(_t,b){return!(!_t||!b||_t.isLeaf||!_t.canAppend(b))}function ue(_t,b,O=-1){let S=_t.resolve(b);for(let R=S.depth;;R--){let V,H,Ot=S.index(R);if(R==S.depth?(V=S.nodeBefore,H=S.nodeAfter):O>0?(V=S.node(R+1),Ot++,H=S.node(R).maybeChild(Ot)):(V=S.node(R).maybeChild(Ot-1),H=S.node(R+1)),V&&!V.isTextblock&&zt(V,H)&&S.node(R).canReplace(Ot,Ot+1))return b;if(0==R)break;b=O<0?S.before(R):S.after(R)}}function fe(_t,b,O){let S=_t.resolve(b);if(!O.content.size)return b;let R=O.content;for(let V=0;V<O.openStart;V++)R=R.firstChild.content;for(let V=1;V<=(0==O.openStart&&O.size?2:1);V++)for(let H=S.depth;H>=0;H--){let Ot=H==S.depth?0:S.pos<=(S.start(H+1)+S.end(H+1))/2?-1:1,wt=S.index(H)+(Ot>0?1:0),N=S.node(H),a=!1;if(1==V)a=N.canReplace(wt,wt,R);else{let p=N.contentMatchAt(wt).findWrapping(R.firstChild.type);a=p&&N.canReplaceWith(wt,wt,p[0])}if(a)return 0==Ot?S.pos:Ot<0?S.before(H+1):S.after(H+1)}return null}function Ke(_t,b,O=b,S=M.p2.empty){if(b==O&&!S.size)return null;let R=_t.resolve(b),V=_t.resolve(O);return Ae(R,V,S)?new mt(b,O,S):new Ne(R,V,S).fit()}function Ae(_t,b,O){return!O.openStart&&!O.openEnd&&_t.start()==b.start()&&_t.parent.canReplace(_t.index(),b.index(),O.content)}bt.jsonID("replaceAround",j);class Ne{constructor(b,O,S){this.$from=b,this.$to=O,this.unplaced=S,this.frontier=[],this.placed=M.HY.empty;for(let R=0;R<=b.depth;R++){let V=b.node(R);this.frontier.push({type:V.type,match:V.contentMatchAt(b.indexAfter(R))})}for(let R=b.depth;R>0;R--)this.placed=M.HY.from(b.node(R).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let N=this.findFittable();N?this.placeNodes(N):this.openMore()||this.dropNode()}let b=this.mustMoveInline(),O=this.placed.size-this.depth-this.$from.depth,S=this.$from,R=this.close(b<0?this.$to:S.doc.resolve(b));if(!R)return null;let V=this.placed,H=S.depth,Ot=R.depth;for(;H&&Ot&&1==V.childCount;)V=V.firstChild.content,H--,Ot--;let wt=new M.p2(V,H,Ot);return b>-1?new j(S.pos,b,this.$to.pos,this.$to.end(),wt,O):wt.size||S.pos!=this.$to.pos?new mt(S.pos,R.pos,wt):null}findFittable(){let b=this.unplaced.openStart;for(let O=this.unplaced.content,S=0,R=this.unplaced.openEnd;S<b;S++){let V=O.firstChild;if(O.childCount>1&&(R=0),V.type.spec.isolating&&R<=S){b=S;break}O=V.content}for(let O=1;O<=2;O++)for(let S=1==O?b:this.unplaced.openStart;S>=0;S--){let R,V=null;S?(V=ve(this.unplaced.content,S-1).firstChild,R=V.content):R=this.unplaced.content;let H=R.firstChild;for(let Ot=this.depth;Ot>=0;Ot--){let a,{type:wt,match:N}=this.frontier[Ot],p=null;if(1==O&&(H?N.matchType(H.type)||(p=N.fillBefore(M.HY.from(H),!1)):V&&wt.compatibleContent(V.type)))return{sliceDepth:S,frontierDepth:Ot,parent:V,inject:p};if(2==O&&H&&(a=N.findWrapping(H.type)))return{sliceDepth:S,frontierDepth:Ot,parent:V,wrap:a};if(V&&N.matchType(V.type))break}}}openMore(){let{content:b,openStart:O,openEnd:S}=this.unplaced,R=ve(b,O);return!(!R.childCount||R.firstChild.isLeaf||(this.unplaced=new M.p2(b,O+1,Math.max(S,R.size+O>=b.size-S?O+1:0)),0))}dropNode(){let{content:b,openStart:O,openEnd:S}=this.unplaced,R=ve(b,O);if(R.childCount<=1&&O>0){let V=b.size-O<=O+R.size;this.unplaced=new M.p2(_e(b,O-1,1),O-1,V?O-1:S)}else this.unplaced=new M.p2(_e(b,O,1),O,S)}placeNodes({sliceDepth:b,frontierDepth:O,parent:S,inject:R,wrap:V}){for(;this.depth>O;)this.closeFrontierNode();if(V)for(let F=0;F<V.length;F++)this.openFrontierNode(V[F]);let H=this.unplaced,Ot=S?S.content:H.content,wt=H.openStart-b,N=0,a=[],{match:p,type:E}=this.frontier[O];if(R){for(let F=0;F<R.childCount;F++)a.push(R.child(F));p=p.matchFragment(R)}let D=Ot.size+b-(H.content.size-H.openEnd);for(;N<Ot.childCount;){let F=Ot.child(N),lt=p.matchType(F.type);if(!lt)break;N++,(N>1||0==wt||F.content.size)&&(p=lt,a.push(Se(F.mark(E.allowedMarks(F.marks)),1==N?wt:0,N==Ot.childCount?D:-1)))}let k=N==Ot.childCount;k||(D=-1),this.placed=De(this.placed,O,M.HY.from(a)),this.frontier[O].match=p,k&&D<0&&S&&S.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let F=0,lt=Ot;F<D;F++){let Rt=lt.lastChild;this.frontier.push({type:Rt.type,match:Rt.contentMatchAt(Rt.childCount)}),lt=Rt.content}this.unplaced=k?0==b?M.p2.empty:new M.p2(_e(H.content,b-1,1),b-1,D<0?H.openEnd:b-1):new M.p2(_e(H.content,b,N),H.openStart,H.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let O,b=this.frontier[this.depth];if(!b.type.isTextblock||!He(this.$to,this.$to.depth,b.type,b.match,!1)||this.$to.depth==this.depth&&(O=this.findCloseLevel(this.$to))&&O.depth==this.depth)return-1;let{depth:S}=this.$to,R=this.$to.after(S);for(;S>1&&R==this.$to.end(--S);)++R;return R}findCloseLevel(b){t:for(let O=Math.min(this.depth,b.depth);O>=0;O--){let{match:S,type:R}=this.frontier[O],V=O<b.depth&&b.end(O+1)==b.pos+(b.depth-(O+1)),H=He(b,O,R,S,V);if(H){for(let Ot=O-1;Ot>=0;Ot--){let{match:wt,type:N}=this.frontier[Ot],a=He(b,Ot,N,wt,!0);if(!a||a.childCount)continue t}return{depth:O,fit:H,move:V?b.doc.resolve(b.after(O+1)):b}}}}close(b){let O=this.findCloseLevel(b);if(!O)return null;for(;this.depth>O.depth;)this.closeFrontierNode();O.fit.childCount&&(this.placed=De(this.placed,O.depth,O.fit)),b=O.move;for(let S=O.depth+1;S<=b.depth;S++){let R=b.node(S),V=R.type.contentMatch.fillBefore(R.content,!0,b.index(S));this.openFrontierNode(R.type,R.attrs,V)}return b}openFrontierNode(b,O=null,S){let R=this.frontier[this.depth];R.match=R.match.matchType(b),this.placed=De(this.placed,this.depth,M.HY.from(b.create(O,S))),this.frontier.push({type:b,match:b.contentMatch})}closeFrontierNode(){let O=this.frontier.pop().match.fillBefore(M.HY.empty,!0);O.childCount&&(this.placed=De(this.placed,this.frontier.length,O))}}function _e(_t,b,O){return 0==b?_t.cutByIndex(O,_t.childCount):_t.replaceChild(0,_t.firstChild.copy(_e(_t.firstChild.content,b-1,O)))}function De(_t,b,O){return 0==b?_t.append(O):_t.replaceChild(_t.childCount-1,_t.lastChild.copy(De(_t.lastChild.content,b-1,O)))}function ve(_t,b){for(let O=0;O<b;O++)_t=_t.firstChild.content;return _t}function Se(_t,b,O){if(b<=0)return _t;let S=_t.content;return b>1&&(S=S.replaceChild(0,Se(S.firstChild,b-1,1==S.childCount?O-1:0))),b>0&&(S=_t.type.contentMatch.fillBefore(S).append(S),O<=0&&(S=S.append(_t.type.contentMatch.matchFragment(S).fillBefore(M.HY.empty,!0)))),_t.copy(S)}function He(_t,b,O,S,R){let V=_t.node(b),H=R?_t.indexAfter(b):_t.index(b);if(H==V.childCount&&!O.compatibleContent(V.type))return null;let Ot=S.fillBefore(V.content,!0,H);return Ot&&!function(_t,b,O){for(let S=O;S<b.childCount;S++)if(!_t.allowsMarks(b.child(S).marks))return!0;return!1}(O,V.content,H)?Ot:null}function ke(_t){return _t.spec.defining||_t.spec.definingForContent}function Ue(_t,b,O,S,R){if(b<O){let V=_t.firstChild;_t=_t.replaceChild(0,V.copy(Ue(V.content,b+1,O,S,V)))}if(b>S){let V=R.contentMatchAt(0),H=V.fillBefore(_t).append(_t);_t=H.append(V.matchFragment(H).fillBefore(M.HY.empty,!0))}return _t}function We(_t,b){let O=[];for(let R=Math.min(_t.depth,b.depth);R>=0;R--){let V=_t.start(R);if(V<_t.pos-(_t.depth-R)||b.end(R)>b.pos+(b.depth-R)||_t.node(R).type.spec.isolating||b.node(R).type.spec.isolating)break;(V==b.start(R)||R==_t.depth&&R==b.depth&&_t.parent.inlineContent&&b.parent.inlineContent&&R&&b.start(R-1)==V-1)&&O.push(R)}return O}class Te extends bt{constructor(b,O,S){super(),this.pos=b,this.attr=O,this.value=S}apply(b){let O=b.nodeAt(this.pos);if(!O)return It.fail("No node at attribute step's position");let S=Object.create(null);for(let V in O.attrs)S[V]=O.attrs[V];S[this.attr]=this.value;let R=O.type.create(S,null,O.marks);return It.fromReplace(b,this.pos,this.pos+1,new M.p2(M.HY.from(R),0,O.isLeaf?0:1))}getMap(){return et.empty}invert(b){return new Te(this.pos,this.attr,b.nodeAt(this.pos).attrs[this.attr])}map(b){let O=b.mapResult(this.pos,1);return O.deletedAfter?null:new Te(O.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(b,O){if("number"!=typeof O.pos||"string"!=typeof O.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new Te(O.pos,O.attr,O.value)}}bt.jsonID("attr",Te);let me=class extends Error{};me=function _t(b){let O=Error.call(this,b);return O.__proto__=_t.prototype,O},(me.prototype=Object.create(Error.prototype)).constructor=me,me.prototype.name="TransformError";class Ee{constructor(b){this.doc=b,this.steps=[],this.docs=[],this.mapping=new Tt}get before(){return this.docs.length?this.docs[0]:this.doc}step(b){let O=this.maybeStep(b);if(O.failed)throw new me(O.failed);return this}maybeStep(b){let O=b.apply(this.doc);return O.failed||this.addStep(b,O.doc),O}get docChanged(){return this.steps.length>0}addStep(b,O){this.docs.push(this.doc),this.steps.push(b),this.mapping.appendMap(b.getMap()),this.doc=O}replace(b,O=b,S=M.p2.empty){let R=Ke(this.doc,b,O,S);return R&&this.step(R),this}replaceWith(b,O,S){return this.replace(b,O,new M.p2(M.HY.from(S),0,0))}delete(b,O){return this.replace(b,O,M.p2.empty)}insert(b,O){return this.replaceWith(b,b,O)}replaceRange(b,O,S){return function(_t,b,O,S){if(!S.size)return _t.deleteRange(b,O);let R=_t.doc.resolve(b),V=_t.doc.resolve(O);if(Ae(R,V,S))return _t.step(new mt(b,O,S));let H=We(R,_t.doc.resolve(O));0==H[H.length-1]&&H.pop();let Ot=-(R.depth+1);H.unshift(Ot);for(let E=R.depth,D=R.pos-1;E>0;E--,D--){let k=R.node(E).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;H.indexOf(E)>-1?Ot=E:R.before(E)==D&&H.splice(1,0,-E)}let wt=H.indexOf(Ot),N=[],a=S.openStart;for(let E=S.content,D=0;;D++){let k=E.firstChild;if(N.push(k),D==S.openStart)break;E=k.content}for(let E=a-1;E>=0;E--){let D=N[E].type,k=ke(D);if(k&&R.node(wt).type!=D)a=E;else if(k||!D.isTextblock)break}for(let E=S.openStart;E>=0;E--){let D=(E+a+1)%(S.openStart+1),k=N[D];if(k)for(let F=0;F<H.length;F++){let lt=H[(F+wt)%H.length],Rt=!0;lt<0&&(Rt=!1,lt=-lt);let qt=R.node(lt-1),te=R.index(lt-1);if(qt.canReplaceWith(te,te,k.type,k.marks))return _t.replace(R.before(lt),Rt?V.after(lt):O,new M.p2(Ue(S.content,0,S.openStart,D),D,S.openEnd))}}let p=_t.steps.length;for(let E=H.length-1;E>=0&&(_t.replace(b,O,S),!(_t.steps.length>p));E--){let D=H[E];D<0||(b=R.before(D),O=V.after(D))}}(this,b,O,S),this}replaceRangeWith(b,O,S){return function(_t,b,O,S){if(!S.isInline&&b==O&&_t.doc.resolve(b).parent.content.size){let R=function(_t,b,O){let S=_t.resolve(b);if(S.parent.canReplaceWith(S.index(),S.index(),O))return b;if(0==S.parentOffset)for(let R=S.depth-1;R>=0;R--){let V=S.index(R);if(S.node(R).canReplaceWith(V,V,O))return S.before(R+1);if(V>0)return null}if(S.parentOffset==S.parent.content.size)for(let R=S.depth-1;R>=0;R--){let V=S.indexAfter(R);if(S.node(R).canReplaceWith(V,V,O))return S.after(R+1);if(V<S.node(R).childCount)return null}return null}(_t.doc,b,S.type);null!=R&&(b=O=R)}_t.replaceRange(b,O,new M.p2(M.HY.from(S),0,0))}(this,b,O,S),this}deleteRange(b,O){return function(_t,b,O){let S=_t.doc.resolve(b),R=_t.doc.resolve(O),V=We(S,R);for(let H=0;H<V.length;H++){let Ot=V[H],wt=H==V.length-1;if(wt&&0==Ot||S.node(Ot).type.contentMatch.validEnd)return _t.delete(S.start(Ot),R.end(Ot));if(Ot>0&&(wt||S.node(Ot-1).canReplace(S.index(Ot-1),R.indexAfter(Ot-1))))return _t.delete(S.before(Ot),R.after(Ot))}for(let H=1;H<=S.depth&&H<=R.depth;H++)if(b-S.start(H)==S.depth-H&&O>S.end(H)&&R.end(H)-O!=R.depth-H)return _t.delete(S.before(H),O);_t.delete(b,O)}(this,b,O),this}lift(b,O){return function(_t,b,O){let{$from:S,$to:R,depth:V}=b,H=S.before(V+1),Ot=R.after(V+1),wt=H,N=Ot,a=M.HY.empty,p=0;for(let k=V,F=!1;k>O;k--)F||S.index(k)>0?(F=!0,a=M.HY.from(S.node(k).copy(a)),p++):wt--;let E=M.HY.empty,D=0;for(let k=V,F=!1;k>O;k--)F||R.after(k+1)<R.end(k)?(F=!0,E=M.HY.from(R.node(k).copy(E)),D++):N++;_t.step(new j(wt,N,H,Ot,new M.p2(a.append(E),p,D),a.size-p,!0))}(this,b,O),this}join(b,O=1){return function(_t,b,O){let S=new mt(b-O,b+O,M.p2.empty,!0);_t.step(S)}(this,b,O),this}wrap(b,O){return function(_t,b,O){let S=M.HY.empty;for(let H=O.length-1;H>=0;H--){if(S.size){let Ot=O[H].type.contentMatch.matchFragment(S);if(!Ot||!Ot.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}S=M.HY.from(O[H].type.create(O[H].attrs,S))}let R=b.start,V=b.end;_t.step(new j(R,V,R,V,new M.p2(S,0,0),O.length,!0))}(this,b,O),this}setBlockType(b,O=b,S,R=null){return function(_t,b,O,S,R){if(!S.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let V=_t.steps.length;_t.doc.nodesBetween(b,O,(H,Ot)=>{if(H.isTextblock&&!H.hasMarkup(S,R)&&function(_t,b,O){let S=_t.resolve(b),R=S.index();return S.parent.canReplaceWith(R,R+1,O)}(_t.doc,_t.mapping.slice(V).map(Ot),S)){_t.clearIncompatible(_t.mapping.slice(V).map(Ot,1),S);let wt=_t.mapping.slice(V),N=wt.map(Ot,1),a=wt.map(Ot+H.nodeSize,1);return _t.step(new j(N,a,N+1,a-1,new M.p2(M.HY.from(S.create(R,null,H.marks)),0,0),1,!0)),!1}})}(this,b,O,S,R),this}setNodeMarkup(b,O,S=null,R){return function(_t,b,O,S,R){let V=_t.doc.nodeAt(b);if(!V)throw new RangeError("No node at given position");O||(O=V.type);let H=O.create(S,null,R||V.marks);if(V.isLeaf)return _t.replaceWith(b,b+V.nodeSize,H);if(!O.validContent(V.content))throw new RangeError("Invalid content for node type "+O.name);_t.step(new j(b,b+V.nodeSize,b+1,b+V.nodeSize-1,new M.p2(M.HY.from(H),0,0),1,!0))}(this,b,O,S,R),this}setNodeAttribute(b,O,S){return this.step(new Te(b,O,S)),this}addNodeMark(b,O){return this.step(new q(b,O)),this}removeNodeMark(b,O){if(!(O instanceof M.vc)){let S=this.doc.nodeAt(b);if(!S)throw new RangeError("No node at position "+b);if(!(O=O.isInSet(S.marks)))return this}return this.step(new W(b,O)),this}split(b,O=1,S){return function(_t,b,O=1,S){let R=_t.doc.resolve(b),V=M.HY.empty,H=M.HY.empty;for(let Ot=R.depth,wt=R.depth-O,N=O-1;Ot>wt;Ot--,N--){V=M.HY.from(R.node(Ot).copy(V));let a=S&&S[N];H=M.HY.from(a?a.type.create(a.attrs,H):R.node(Ot).copy(H))}_t.step(new mt(b,b,new M.p2(V.append(H),O,O),!0))}(this,b,O,S),this}addMark(b,O,S){return function(_t,b,O,S){let H,Ot,R=[],V=[];_t.doc.nodesBetween(b,O,(wt,N,a)=>{if(!wt.isInline)return;let p=wt.marks;if(!S.isInSet(p)&&a.type.allowsMarkType(S.type)){let E=Math.max(N,b),D=Math.min(N+wt.nodeSize,O),k=S.addToSet(p);for(let F=0;F<p.length;F++)p[F].isInSet(k)||(H&&H.to==E&&H.mark.eq(p[F])?H.to=D:R.push(H=new ht(E,D,p[F])));Ot&&Ot.to==E?Ot.to=D:V.push(Ot=new Dt(E,D,S))}}),R.forEach(wt=>_t.step(wt)),V.forEach(wt=>_t.step(wt))}(this,b,O,S),this}removeMark(b,O,S){return function(_t,b,O,S){let R=[],V=0;_t.doc.nodesBetween(b,O,(H,Ot)=>{if(!H.isInline)return;V++;let wt=null;if(S instanceof M.ZU){let a,N=H.marks;for(;a=S.isInSet(N);)(wt||(wt=[])).push(a),N=a.removeFromSet(N)}else S?S.isInSet(H.marks)&&(wt=[S]):wt=H.marks;if(wt&&wt.length){let N=Math.min(Ot+H.nodeSize,O);for(let a=0;a<wt.length;a++){let E,p=wt[a];for(let D=0;D<R.length;D++){let k=R[D];k.step==V-1&&p.eq(R[D].style)&&(E=k)}E?(E.to=N,E.step=V):R.push({style:p,from:Math.max(Ot,b),to:N,step:V})}}}),R.forEach(H=>_t.step(new ht(H.from,H.to,H.style)))}(this,b,O,S),this}clearIncompatible(b,O,S){return function(_t,b,O,S=O.contentMatch){let R=_t.doc.nodeAt(b),V=[],H=b+1;for(let Ot=0;Ot<R.childCount;Ot++){let wt=R.child(Ot),N=H+wt.nodeSize,a=S.matchType(wt.type);if(a){S=a;for(let p=0;p<wt.marks.length;p++)O.allowsMarkType(wt.marks[p].type)||_t.step(new ht(H,N,wt.marks[p]))}else V.push(new mt(H,N,M.p2.empty));H=N}if(!S.validEnd){let Ot=S.fillBefore(M.HY.empty,!0);_t.replace(H,H,new M.p2(Ot,0,0))}for(let Ot=V.length-1;Ot>=0;Ot--)_t.step(V[Ot])}(this,b,O,S),this}}},43594:(jt,Et,c)=>{c.d(Et,{EH:()=>Ze,p:()=>un,tk:()=>Ro});var M=c(62463),l=c(77346),y=c(38480);const P=function(r){for(var o=0;;o++)if(!(r=r.previousSibling))return o},g=function(r){let o=r.assignedSlot||r.parentNode;return o&&11==o.nodeType?o.host:o};let it=null;const B=function(r,o,s){let d=it||(it=document.createRange());return d.setEnd(r,null==s?r.nodeValue.length:s),d.setStart(r,o||0),d},X=function(r,o,s,d){return s&&(ft(r,o,s,d,-1)||ft(r,o,s,d,1))},tt=/^(img|br|input|textarea|hr)$/i;function ft(r,o,s,d,e){for(;;){if(r==s&&o==d)return!0;if(o==(e<0?0:ut(r))){let t=r.parentNode;if(!t||1!=t.nodeType||Tt(r)||tt.test(r.nodeName)||"false"==r.contentEditable)return!1;o=P(r)+(e<0?0:1),r=t}else{if(1!=r.nodeType)return!1;if("false"==(r=r.childNodes[o+(e<0?-1:0)]).contentEditable)return!1;o=e<0?ut(r):0}}}function ut(r){return 3==r.nodeType?r.nodeValue.length:r.childNodes.length}function Tt(r){let o;for(let s=r;s&&!(o=s.pmViewDesc);s=s.parentNode);return o&&o.node&&o.node.isBlock&&(o.dom==r||o.contentDOM==r)}const Ct=function(r){return r.focusNode&&X(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)};function bt(r,o){let s=document.createEvent("Event");return s.initEvent("keydown",!0,!0),s.keyCode=r,s.key=s.code=o,s}const Pt="undefined"!=typeof navigator?navigator:null,Dt="undefined"!=typeof document?document:null,ht=Pt&&Pt.userAgent||"",q=/Edge\/(\d+)/.exec(ht),W=/MSIE \d/.exec(ht),mt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ht),j=!!(W||mt||q),At=W?document.documentMode:mt?+mt[1]:q?+q[1]:0,St=!j&&/gecko\/(\d+)/i.test(ht);St&&/Firefox\/(\d+)/.exec(ht);const yt=!j&&/Chrome\/(\d+)/.exec(ht),Lt=!!yt,Ht=yt?+yt[1]:0,Kt=!j&&!!Pt&&/Apple Computer/.test(Pt.vendor),pt=Kt&&(/Mobile\/\w+/.test(ht)||!!Pt&&Pt.maxTouchPoints>2),L=pt||!!Pt&&/Mac/.test(Pt.platform),rt=/Android \d/.test(ht),ct=!!Dt&&"webkitFontSmoothing"in Dt.documentElement.style,st=ct?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function J(r){return{left:0,right:r.documentElement.clientWidth,top:0,bottom:r.documentElement.clientHeight}}function Q(r,o){return"number"==typeof r?r:r[o]}function ot(r){let o=r.getBoundingClientRect();return{left:o.left,right:o.left+r.clientWidth*(o.width/r.offsetWidth||1),top:o.top,bottom:o.top+r.clientHeight*(o.height/r.offsetHeight||1)}}function kt(r,o,s){let d=r.someProp("scrollThreshold")||0,e=r.someProp("scrollMargin")||5,t=r.dom.ownerDocument;for(let n=s||r.dom;n;n=g(n)){if(1!=n.nodeType)continue;let i=n,u=i==t.body,h=u?J(t):ot(i),T=0,A=0;if(o.top<h.top+Q(d,"top")?A=-(h.top-o.top+Q(e,"top")):o.bottom>h.bottom-Q(d,"bottom")&&(A=o.bottom-h.bottom+Q(e,"bottom")),o.left<h.left+Q(d,"left")?T=-(h.left-o.left+Q(e,"left")):o.right>h.right-Q(d,"right")&&(T=o.right-h.right+Q(e,"right")),T||A)if(u)t.defaultView.scrollBy(T,A);else{let I=i.scrollLeft,U=i.scrollTop;A&&(i.scrollTop+=A),T&&(i.scrollLeft+=T);let Z=i.scrollLeft-I,nt=i.scrollTop-U;o={left:o.left-Z,top:o.top-nt,right:o.right-Z,bottom:o.bottom-nt}}if(u)break}}function Yt(r){let o=[],s=r.ownerDocument;for(let d=r;d&&(o.push({dom:d,top:d.scrollTop,left:d.scrollLeft}),r!=s);d=g(d));return o}function zt(r,o){for(let s=0;s<r.length;s++){let{dom:d,top:e,left:t}=r[s];d.scrollTop!=e+o&&(d.scrollTop=e+o),d.scrollLeft!=t&&(d.scrollLeft=t)}}let ue=null;function xe(r,o){let s,e,d=2e8,t=0,n=o.top,i=o.top;for(let u=r.firstChild,h=0;u;u=u.nextSibling,h++){let T;if(1==u.nodeType)T=u.getClientRects();else{if(3!=u.nodeType)continue;T=B(u).getClientRects()}for(let A=0;A<T.length;A++){let I=T[A];if(I.top<=n&&I.bottom>=i){n=Math.max(I.bottom,n),i=Math.min(I.top,i);let U=I.left>o.left?I.left-o.left:I.right<o.left?o.left-I.right:0;if(U<d){s=u,d=U,e=U&&3==s.nodeType?{left:I.right<o.left?I.right:I.left,top:o.top}:o,1==u.nodeType&&U&&(t=h+(o.left>=(I.left+I.right)/2?1:0));continue}}!s&&(o.left>=I.right&&o.top>=I.top||o.left>=I.left&&o.top>=I.bottom)&&(t=h+1)}}return s&&3==s.nodeType?function(r,o){let s=r.nodeValue.length,d=document.createRange();for(let e=0;e<s;e++){d.setEnd(r,e+1),d.setStart(r,e);let t=Se(d,1);if(t.top!=t.bottom&&Ke(o,t))return{node:r,offset:e+(o.left>=(t.left+t.right)/2?1:0)}}return{node:r,offset:0}}(s,e):!s||d&&1==s.nodeType?{node:r,offset:t}:xe(s,e)}function Ke(r,o){return r.left>=o.left-1&&r.left<=o.right+1&&r.top>=o.top-1&&r.top<=o.bottom+1}function De(r,o,s){let d=r.childNodes.length;if(d&&s.top<s.bottom)for(let e=Math.max(0,Math.min(d-1,Math.floor(d*(o.top-s.top)/(s.bottom-s.top))-2)),t=e;;){let n=r.childNodes[t];if(1==n.nodeType){let i=n.getClientRects();for(let u=0;u<i.length;u++){let h=i[u];if(Ke(o,h))return De(n,o,h)}}if((t=(t+1)%d)==e)break}return r}function ve(r,o){let d,s=r.dom.ownerDocument,e=0;if(s.caretPositionFromPoint)try{let u=s.caretPositionFromPoint(o.left,o.top);u&&({offsetNode:d,offset:e}=u)}catch(u){}if(!d&&s.caretRangeFromPoint){let u=s.caretRangeFromPoint(o.left,o.top);u&&({startContainer:d,startOffset:e}=u)}let n,t=(r.root.elementFromPoint?r.root:s).elementFromPoint(o.left,o.top);if(!t||!r.dom.contains(1!=t.nodeType?t.parentNode:t)){let u=r.dom.getBoundingClientRect();if(!Ke(o,u)||(t=De(r.dom,o,u),!t))return null}if(Kt)for(let u=t;d&&u;u=g(u))u.draggable&&(d=void 0);if(t=function(r,o){let s=r.parentNode;return s&&/^li$/i.test(s.nodeName)&&o.left<r.getBoundingClientRect().left?s:r}(t,o),d){if(St&&1==d.nodeType&&(e=Math.min(e,d.childNodes.length),e<d.childNodes.length)){let h,u=d.childNodes[e];"IMG"==u.nodeName&&(h=u.getBoundingClientRect()).right<=o.left&&h.bottom>o.top&&e++}d==r.dom&&e==d.childNodes.length-1&&1==d.lastChild.nodeType&&o.top>d.lastChild.getBoundingClientRect().bottom?n=r.state.doc.content.size:(0==e||1!=d.nodeType||"BR"!=d.childNodes[e-1].nodeName)&&(n=function(r,o,s,d){let e=-1;for(let t=o,n=!1;t!=r.dom;){let i=r.docView.nearestDesc(t,!0);if(!i)return null;if(1==i.dom.nodeType&&(i.node.isBlock&&i.parent&&!n||!i.contentDOM)){let u=i.dom.getBoundingClientRect();if(i.node.isBlock&&i.parent&&!n&&(n=!0,u.left>d.left||u.top>d.top?e=i.posBefore:(u.right<d.left||u.bottom<d.top)&&(e=i.posAfter)),!i.contentDOM&&e<0)return(i.node.isBlock?d.top<(u.top+u.bottom)/2:d.left<(u.left+u.right)/2)?i.posBefore:i.posAfter}t=i.dom.parentNode}return e>-1?e:r.docView.posFromDOM(o,s,-1)}(r,d,e,o))}null==n&&(n=function(r,o,s){let{node:d,offset:e}=xe(o,s),t=-1;if(1==d.nodeType&&!d.firstChild){let n=d.getBoundingClientRect();t=n.left!=n.right&&s.left>(n.left+n.right)/2?1:-1}return r.docView.posFromDOM(d,e,t)}(r,t,o));let i=r.docView.nearestDesc(t,!0);return{pos:n,inside:i?i.posAtStart-i.border:-1}}function Se(r,o){let s=r.getClientRects();return s.length?s[o<0?0:s.length-1]:r.getBoundingClientRect()}const He=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Me(r,o,s){let{node:d,offset:e,atom:t}=r.docView.domFromPos(o,s<0?-1:1),n=ct||St;if(3==d.nodeType){if(!n||!He.test(d.nodeValue)&&(s<0?e:e!=d.nodeValue.length)){let u=e,h=e,T=s<0?1:-1;return s<0&&!e?(h++,T=-1):s>=0&&e==d.nodeValue.length?(u--,T=1):s<0?u--:h++,ke(Se(B(d,u,h),1),T<0)}{let u=Se(B(d,e,e),s);if(St&&e&&/\s/.test(d.nodeValue[e-1])&&e<d.nodeValue.length){let h=Se(B(d,e-1,e-1),-1);if(h.top==u.top){let T=Se(B(d,e,e+1),-1);if(T.top!=u.top)return ke(T,T.left<h.left)}}return u}}if(!r.state.doc.resolve(o-(t||0)).parent.inlineContent){if(null==t&&e&&(s<0||e==ut(d))){let u=d.childNodes[e-1];if(1==u.nodeType)return Ye(u.getBoundingClientRect(),!1)}if(null==t&&e<ut(d)){let u=d.childNodes[e];if(1==u.nodeType)return Ye(u.getBoundingClientRect(),!0)}return Ye(d.getBoundingClientRect(),s>=0)}if(null==t&&e&&(s<0||e==ut(d))){let u=d.childNodes[e-1],h=3==u.nodeType?B(u,ut(u)-(n?0:1)):1!=u.nodeType||"BR"==u.nodeName&&u.nextSibling?null:u;if(h)return ke(Se(h,1),!1)}if(null==t&&e<ut(d)){let u=d.childNodes[e];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let h=u?3==u.nodeType?B(u,0,n?0:1):1==u.nodeType?u:null:null;if(h)return ke(Se(h,-1),!0)}return ke(Se(3==d.nodeType?B(d):d,-s),s>=0)}function ke(r,o){if(0==r.width)return r;let s=o?r.left:r.right;return{top:r.top,bottom:r.bottom,left:s,right:s}}function Ye(r,o){if(0==r.height)return r;let s=o?r.top:r.bottom;return{top:s,bottom:s,left:r.left,right:r.right}}function Ue(r,o,s){let d=r.state,e=r.root.activeElement;d!=o&&r.updateState(o),e!=r.dom&&r.focus();try{return s()}finally{d!=o&&r.updateState(d),e!=r.dom&&e&&e.focus()}}const Be=/[\u0590-\u08ac]/;let Te=null,me=null,Ee=!1;class V{constructor(o,s,d,e){this.parent=o,this.children=s,this.dom=d,this.contentDOM=e,this.dirty=0,d.pmViewDesc=this}matchesWidget(o){return!1}matchesMark(o){return!1}matchesNode(o,s,d){return!1}matchesHack(o){return!1}parseRule(){return null}stopEvent(o){return!1}get size(){let o=0;for(let s=0;s<this.children.length;s++)o+=this.children[s].size;return o}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let o=0;o<this.children.length;o++)this.children[o].destroy()}posBeforeChild(o){for(let s=0,d=this.posAtStart;;s++){let e=this.children[s];if(e==o)return d;d+=e.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(o,s,d){if(this.contentDOM&&this.contentDOM.contains(1==o.nodeType?o:o.parentNode)){if(d<0){let t,n;if(o==this.contentDOM)t=o.childNodes[s-1];else{for(;o.parentNode!=this.contentDOM;)o=o.parentNode;t=o.previousSibling}for(;t&&(!(n=t.pmViewDesc)||n.parent!=this);)t=t.previousSibling;return t?this.posBeforeChild(n)+n.size:this.posAtStart}{let t,n;if(o==this.contentDOM)t=o.childNodes[s];else{for(;o.parentNode!=this.contentDOM;)o=o.parentNode;t=o.nextSibling}for(;t&&(!(n=t.pmViewDesc)||n.parent!=this);)t=t.nextSibling;return t?this.posBeforeChild(n):this.posAtEnd}}let e;if(o==this.dom&&this.contentDOM)e=s>P(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))e=2&o.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==s)for(let t=o;;t=t.parentNode){if(t==this.dom){e=!1;break}if(t.previousSibling)break}if(null==e&&s==o.childNodes.length)for(let t=o;;t=t.parentNode){if(t==this.dom){e=!0;break}if(t.nextSibling)break}}return(null==e?d>0:e)?this.posAtEnd:this.posAtStart}nearestDesc(o,s=!1){for(let d=!0,e=o;e;e=e.parentNode){let n,t=this.getDesc(e);if(t&&(!s||t.node)){if(!d||!(n=t.nodeDOM)||(1==n.nodeType?n.contains(1==o.nodeType?o:o.parentNode):n==o))return t;d=!1}}}getDesc(o){let s=o.pmViewDesc;for(let d=s;d;d=d.parent)if(d==this)return s}posFromDOM(o,s,d){for(let e=o;e;e=e.parentNode){let t=this.getDesc(e);if(t)return t.localPosFromDOM(o,s,d)}return-1}descAt(o){for(let s=0,d=0;s<this.children.length;s++){let e=this.children[s],t=d+e.size;if(d==o&&t!=d){for(;!e.border&&e.children.length;)e=e.children[0];return e}if(o<t)return e.descAt(o-d-e.border);d=t}}domFromPos(o,s){if(!this.contentDOM)return{node:this.dom,offset:0,atom:o+1};let t,d=0,e=0;for(let t=0;d<this.children.length;d++){let n=this.children[d],i=t+n.size;if(i>o||n instanceof E){e=o-t;break}t=i}if(e)return this.children[d].domFromPos(e-this.children[d].border,s);for(;d&&!(t=this.children[d-1]).size&&t instanceof H&&t.side>=0;d--);if(s<=0){let t,n=!0;for(;t=d?this.children[d-1]:null,t&&t.dom.parentNode!=this.contentDOM;d--,n=!1);return t&&s&&n&&!t.border&&!t.domAtom?t.domFromPos(t.size,s):{node:this.contentDOM,offset:t?P(t.dom)+1:0}}{let t,n=!0;for(;t=d<this.children.length?this.children[d]:null,t&&t.dom.parentNode!=this.contentDOM;d++,n=!1);return t&&n&&!t.border&&!t.domAtom?t.domFromPos(0,s):{node:this.contentDOM,offset:t?P(t.dom):this.contentDOM.childNodes.length}}}parseRange(o,s,d=0){if(0==this.children.length)return{node:this.contentDOM,from:o,to:s,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let e=-1,t=-1;for(let n=d,i=0;;i++){let u=this.children[i],h=n+u.size;if(-1==e&&o<=h){let T=n+u.border;if(o>=T&&s<=h-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(o,s,T);o=n;for(let A=i;A>0;A--){let I=this.children[A-1];if(I.size&&I.dom.parentNode==this.contentDOM&&!I.emptyChildAt(1)){e=P(I.dom)+1;break}o-=I.size}-1==e&&(e=0)}if(e>-1&&(h>s||i==this.children.length-1)){s=h;for(let T=i+1;T<this.children.length;T++){let A=this.children[T];if(A.size&&A.dom.parentNode==this.contentDOM&&!A.emptyChildAt(-1)){t=P(A.dom);break}s+=A.size}-1==t&&(t=this.contentDOM.childNodes.length);break}n=h}return{node:this.contentDOM,from:o,to:s,fromOffset:e,toOffset:t}}emptyChildAt(o){if(this.border||!this.contentDOM||!this.children.length)return!1;let s=this.children[o<0?0:this.children.length-1];return 0==s.size||s.emptyChildAt(o)}domAfterPos(o){let{node:s,offset:d}=this.domFromPos(o,0);if(1!=s.nodeType||d==s.childNodes.length)throw new RangeError("No node after pos "+o);return s.childNodes[d]}setSelection(o,s,d,e=!1){let t=Math.min(o,s),n=Math.max(o,s);for(let I=0,U=0;I<this.children.length;I++){let Z=this.children[I],nt=U+Z.size;if(t>U&&n<nt)return Z.setSelection(o-U-Z.border,s-U-Z.border,d,e);U=nt}let i=this.domFromPos(o,o?-1:1),u=s==o?i:this.domFromPos(s,s?-1:1),h=d.getSelection(),T=!1;if((St||Kt)&&o==s){let{node:I,offset:U}=i;if(3==I.nodeType){if(T=!(!U||"\n"!=I.nodeValue[U-1]),T&&U==I.nodeValue.length)for(let nt,Z=I;Z;Z=Z.parentNode){if(nt=Z.nextSibling){"BR"==nt.nodeName&&(i=u={node:nt.parentNode,offset:P(nt)+1});break}let dt=Z.pmViewDesc;if(dt&&dt.node&&dt.node.isBlock)break}}else{let Z=I.childNodes[U-1];T=Z&&("BR"==Z.nodeName||"false"==Z.contentEditable)}}if(St&&h.focusNode&&h.focusNode!=u.node&&1==h.focusNode.nodeType){let I=h.focusNode.childNodes[h.focusOffset];I&&"false"==I.contentEditable&&(e=!0)}if(!(e||T&&Kt)&&X(i.node,i.offset,h.anchorNode,h.anchorOffset)&&X(u.node,u.offset,h.focusNode,h.focusOffset))return;let A=!1;if((h.extend||o==s)&&!T){h.collapse(i.node,i.offset);try{o!=s&&h.extend(u.node,u.offset),A=!0}catch(I){}}if(!A){if(o>s){let U=i;i=u,u=U}let I=document.createRange();I.setEnd(u.node,u.offset),I.setStart(i.node,i.offset),h.removeAllRanges(),h.addRange(I)}}ignoreMutation(o){return!this.contentDOM&&"selection"!=o.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(o,s){for(let d=0,e=0;e<this.children.length;e++){let t=this.children[e],n=d+t.size;if(d==n?o<=n&&s>=d:o<n&&s>d){let i=d+t.border,u=n-t.border;if(o>=i&&s<=u)return this.dirty=o==d||s==n?2:1,void(o!=i||s!=u||!t.contentLost&&t.dom.parentNode==this.contentDOM?t.markDirty(o-i,s-i):t.dirty=3);t.dirty=t.dom!=t.contentDOM||t.dom.parentNode!=this.contentDOM||t.children.length?3:2}d=n}this.dirty=2}markParentsDirty(){let o=1;for(let s=this.parent;s;s=s.parent,o++){let d=1==o?2:1;s.dirty<d&&(s.dirty=d)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class H extends V{constructor(o,s,d,e){let t,n=s.type.toDOM;if("function"==typeof n&&(n=n(d,()=>t?t.parent?t.parent.posBeforeChild(t):void 0:e)),!s.type.spec.raw){if(1!=n.nodeType){let i=document.createElement("span");i.appendChild(n),n=i}n.contentEditable="false",n.classList.add("ProseMirror-widget")}super(o,[],n,null),this.widget=s,this.widget=s,t=this}matchesWidget(o){return 0==this.dirty&&o.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(o){let s=this.widget.spec.stopEvent;return!!s&&s(o)}ignoreMutation(o){return"selection"!=o.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Ot extends V{constructor(o,s,d,e){super(o,[],s,null),this.textDOM=d,this.text=e}get size(){return this.text.length}localPosFromDOM(o,s){return o!=this.textDOM?this.posAtStart+(s?this.size:0):this.posAtStart+s}domFromPos(o){return{node:this.textDOM,offset:o}}ignoreMutation(o){return"characterData"===o.type&&o.target.nodeValue==o.oldValue}}class wt extends V{constructor(o,s,d,e){super(o,[],d,e),this.mark=s}static create(o,s,d,e){let t=e.nodeViews[s.type.name],n=t&&t(s,e,d);return(!n||!n.dom)&&(n=l.PW.renderSpec(document,s.type.spec.toDOM(s,d))),new wt(o,s,n.dom,n.contentDOM||n.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(o){return 3!=this.dirty&&this.mark.eq(o)}markDirty(o,s){if(super.markDirty(o,s),0!=this.dirty){let d=this.parent;for(;!d.node;)d=d.parent;d.dirty<this.dirty&&(d.dirty=this.dirty),this.dirty=0}}slice(o,s,d){let e=wt.create(this.parent,this.mark,!0,d),t=this.children,n=this.size;s<n&&(t=ee(t,s,n,d)),o>0&&(t=ee(t,0,o,d));for(let i=0;i<t.length;i++)t[i].parent=e;return e.children=t,e}}class N extends V{constructor(o,s,d,e,t,n,i,u,h){super(o,[],t,n),this.node=s,this.outerDeco=d,this.innerDeco=e,this.nodeDOM=i,n&&this.updateChildren(u,h)}static create(o,s,d,e,t,n){let u,i=t.nodeViews[s.type.name],h=i&&i(s,t,()=>u?u.parent?u.parent.posBeforeChild(u):void 0:n,d,e),T=h&&h.dom,A=h&&h.contentDOM;if(s.isText)if(T){if(3!=T.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else T=document.createTextNode(s.text);else T||({dom:T,contentDOM:A}=l.PW.renderSpec(document,s.type.spec.toDOM(s)));!A&&!s.isText&&"BR"!=T.nodeName&&(T.hasAttribute("contenteditable")||(T.contentEditable="false"),s.type.spec.draggable&&(T.draggable=!0));let I=T;return T=we(T,d,s),h?u=new D(o,s,d,e,T,A||null,I,h,t,n+1):s.isText?new p(o,s,d,e,T,I,t):new N(o,s,d,e,T,A||null,I,t,n+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let o={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(o.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let s=this.children.length-1;s>=0;s--){let d=this.children[s];if(this.dom.contains(d.dom.parentNode)){o.contentElement=d.dom.parentNode;break}}o.contentElement||(o.getContent=()=>l.HY.empty)}else o.contentElement=this.contentDOM;else o.getContent=()=>this.node.content;return o}matchesNode(o,s,d){return 0==this.dirty&&o.eq(this.node)&&Je(s,this.outerDeco)&&d.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(o,s){let d=this.node.inlineContent,e=s,t=o.composing?this.localCompositionInfo(o,s):null,n=t&&t.pos>-1?t:null,i=t&&t.pos<0,u=new $(this,n&&n.node,o);(function(r,o,s,d){let e=o.locals(r),t=0;if(0==e.length){for(let h=0;h<r.childCount;h++){let T=r.child(h);d(T,e,o.forChild(t,T),h),t+=T.nodeSize}return}let n=0,i=[],u=null;for(let h=0;;){if(n<e.length&&e[n].to==t){let nt,Z=e[n++];for(;n<e.length&&e[n].to==t;)(nt||(nt=[Z])).push(e[n++]);if(nt){nt.sort(gt);for(let dt=0;dt<nt.length;dt++)s(nt[dt],h,!!u)}else s(Z,h,!!u)}let T,A;if(u)A=-1,T=u,u=null;else{if(!(h<r.childCount))break;A=h,T=r.child(h++)}for(let Z=0;Z<i.length;Z++)i[Z].to<=t&&i.splice(Z--,1);for(;n<e.length&&e[n].from<=t&&e[n].to>t;)i.push(e[n++]);let I=t+T.nodeSize;if(T.isText){let Z=I;n<e.length&&e[n].from<Z&&(Z=e[n].from);for(let nt=0;nt<i.length;nt++)i[nt].to<Z&&(Z=i[nt].to);Z<I&&(u=T.cut(Z-t),T=T.cut(0,Z-t),I=Z,A=-1)}d(T,T.isInline&&!T.isLeaf?i.filter(Z=>!Z.inline):i.slice(),o.forChild(t,T),A),t=I}})(this.node,this.innerDeco,(h,T,A)=>{h.spec.marks?u.syncToMarks(h.spec.marks,d,o):h.type.side>=0&&!A&&u.syncToMarks(T==this.node.childCount?l.vc.none:this.node.child(T).marks,d,o),u.placeWidget(h,o,e)},(h,T,A,I)=>{let U;u.syncToMarks(h.marks,d,o),u.findNodeMatch(h,T,A,I)||i&&o.state.selection.from>e&&o.state.selection.to<e+h.nodeSize&&(U=u.findIndexWithChild(t.node))>-1&&u.updateNodeAt(h,T,A,U,o)||u.updateNextNode(h,T,A,o,I)||u.addNode(h,T,A,o,e),e+=h.nodeSize}),u.syncToMarks([],d,o),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||2==this.dirty)&&(n&&this.protectLocalComposition(o,n),k(this.contentDOM,this.children,o),pt&&function(r){if("UL"==r.nodeName||"OL"==r.nodeName){let o=r.style.cssText;r.style.cssText=o+"; list-style: square !important",window.getComputedStyle(r),r.style.cssText=o}}(this.dom))}localCompositionInfo(o,s){let{from:d,to:e}=o.state.selection;if(!(o.state.selection instanceof M.Bs)||d<s||e>s+this.node.content.size)return null;let t=o.domSelectionRange(),n=function(r,o){for(;;){if(3==r.nodeType)return r;if(1==r.nodeType&&o>0){if(r.childNodes.length>o&&3==r.childNodes[o].nodeType)return r.childNodes[o];o=ut(r=r.childNodes[o-1])}else{if(!(1==r.nodeType&&o<r.childNodes.length))return null;r=r.childNodes[o],o=0}}}(t.focusNode,t.focusOffset);if(!n||!this.dom.contains(n.parentNode))return null;if(this.node.inlineContent){let i=n.nodeValue,u=function(r,o,s,d){for(let e=0,t=0;e<r.childCount&&t<=d;){let n=r.child(e++),i=t;if(t+=n.nodeSize,!n.isText)continue;let u=n.text;for(;e<r.childCount;){let h=r.child(e++);if(t+=h.nodeSize,!h.isText)break;u+=h.text}if(t>=s){let h=i<d?u.lastIndexOf(o,d-i-1):-1;if(h>=0&&h+o.length+i>=s)return i+h;if(s==d&&u.length>=d+o.length-i&&u.slice(d-i,d-i+o.length)==o)return d}}return-1}(this.node.content,i,d-s,e-s);return u<0?null:{node:n,pos:u,text:i}}return{node:n,pos:-1,text:""}}protectLocalComposition(o,{node:s,pos:d,text:e}){if(this.getDesc(s))return;let t=s;for(;t.parentNode!=this.contentDOM;t=t.parentNode){for(;t.previousSibling;)t.parentNode.removeChild(t.previousSibling);for(;t.nextSibling;)t.parentNode.removeChild(t.nextSibling);t.pmViewDesc&&(t.pmViewDesc=void 0)}let n=new Ot(this,t,s,e);o.input.compositionNodes.push(n),this.children=ee(this.children,d,d+e.length,o,n)}update(o,s,d,e){return!(3==this.dirty||!o.sameMarkup(this.node)||(this.updateInner(o,s,d,e),0))}updateInner(o,s,d,e){this.updateOuterDeco(s),this.node=o,this.innerDeco=d,this.contentDOM&&this.updateChildren(e,this.posAtStart),this.dirty=0}updateOuterDeco(o){if(Je(o,this.outerDeco))return;let s=1!=this.nodeDOM.nodeType,d=this.dom;this.dom=qt(this.dom,this.nodeDOM,Rt(this.outerDeco,this.node,s),Rt(o,this.node,s)),this.dom!=d&&(d.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=o}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function a(r,o,s,d,e){return we(d,o,r),new N(void 0,r,o,s,d,d,d,e,0)}class p extends N{constructor(o,s,d,e,t,n,i){super(o,s,d,e,t,null,n,i,0)}parseRule(){let o=this.nodeDOM.parentNode;for(;o&&o!=this.dom&&!o.pmIsDeco;)o=o.parentNode;return{skip:o||!0}}update(o,s,d,e){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!o.sameMarkup(this.node)||(this.updateOuterDeco(s),(0!=this.dirty||o.text!=this.node.text)&&o.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=o.text,e.trackWrites==this.nodeDOM&&(e.trackWrites=null)),this.node=o,this.dirty=0,0))}inParent(){let o=this.parent.contentDOM;for(let s=this.nodeDOM;s;s=s.parentNode)if(s==o)return!0;return!1}domFromPos(o){return{node:this.nodeDOM,offset:o}}localPosFromDOM(o,s,d){return o==this.nodeDOM?this.posAtStart+Math.min(s,this.node.text.length):super.localPosFromDOM(o,s,d)}ignoreMutation(o){return"characterData"!=o.type&&"selection"!=o.type}slice(o,s,d){let e=this.node.cut(o,s),t=document.createTextNode(e.text);return new p(this.parent,e,this.outerDeco,this.innerDeco,t,t,d)}markDirty(o,s){super.markDirty(o,s),this.dom!=this.nodeDOM&&(0==o||s==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}}class E extends V{parseRule(){return{ignore:!0}}matchesHack(o){return 0==this.dirty&&this.dom.nodeName==o}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class D extends N{constructor(o,s,d,e,t,n,i,u,h,T){super(o,s,d,e,t,n,i,h,T),this.spec=u}update(o,s,d,e){if(3==this.dirty)return!1;if(this.spec.update){let t=this.spec.update(o,s,d);return t&&this.updateInner(o,s,d,e),t}return!(!this.contentDOM&&!o.isLeaf)&&super.update(o,s,d,e)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(o,s,d,e){this.spec.setSelection?this.spec.setSelection(o,s,d):super.setSelection(o,s,d,e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(o){return!!this.spec.stopEvent&&this.spec.stopEvent(o)}ignoreMutation(o){return this.spec.ignoreMutation?this.spec.ignoreMutation(o):super.ignoreMutation(o)}}function k(r,o,s){let d=r.firstChild,e=!1;for(let t=0;t<o.length;t++){let n=o[t],i=n.dom;if(i.parentNode==r){for(;i!=d;)d=Y(d),e=!0;d=d.nextSibling}else e=!0,r.insertBefore(i,d);if(n instanceof wt){let u=d?d.previousSibling:r.lastChild;k(n.contentDOM,n.children,s),d=u?u.nextSibling:r.firstChild}}for(;d;)d=Y(d),e=!0;e&&s.trackWrites==r&&(s.trackWrites=null)}const F=function(r){r&&(this.nodeName=r)};F.prototype=Object.create(null);const lt=[new F];function Rt(r,o,s){if(0==r.length)return lt;let d=s?lt[0]:new F,e=[d];for(let t=0;t<r.length;t++){let n=r[t].type.attrs;if(n){n.nodeName&&e.push(d=new F(n.nodeName));for(let i in n){let u=n[i];null!=u&&(s&&1==e.length&&e.push(d=new F(o.isInline?"span":"div")),"class"==i?d.class=(d.class?d.class+" ":"")+u:"style"==i?d.style=(d.style?d.style+";":"")+u:"nodeName"!=i&&(d[i]=u))}}}return e}function qt(r,o,s,d){if(s==lt&&d==lt)return o;let e=o;for(let t=0;t<d.length;t++){let n=d[t],i=s[t];if(t){let u;i&&i.nodeName==n.nodeName&&e!=r&&(u=e.parentNode)&&u.nodeName.toLowerCase()==n.nodeName||(u=document.createElement(n.nodeName),u.pmIsDeco=!0,u.appendChild(e),i=lt[0]),e=u}te(e,i||lt[0],n)}return e}function te(r,o,s){for(let d in o)"class"!=d&&"style"!=d&&"nodeName"!=d&&!(d in s)&&r.removeAttribute(d);for(let d in s)"class"!=d&&"style"!=d&&"nodeName"!=d&&s[d]!=o[d]&&r.setAttribute(d,s[d]);if(o.class!=s.class){let d=o.class?o.class.split(" ").filter(Boolean):[],e=s.class?s.class.split(" ").filter(Boolean):[];for(let t=0;t<d.length;t++)-1==e.indexOf(d[t])&&r.classList.remove(d[t]);for(let t=0;t<e.length;t++)-1==d.indexOf(e[t])&&r.classList.add(e[t]);0==r.classList.length&&r.removeAttribute("class")}if(o.style!=s.style){if(o.style){let e,d=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;e=d.exec(o.style);)r.style.removeProperty(e[1])}s.style&&(r.style.cssText+=s.style)}}function we(r,o,s){return qt(r,r,lt,Rt(o,s,1!=r.nodeType))}function Je(r,o){if(r.length!=o.length)return!1;for(let s=0;s<r.length;s++)if(!r[s].type.eq(o[s].type))return!1;return!0}function Y(r){let o=r.nextSibling;return r.parentNode.removeChild(r),o}class ${constructor(o,s,d){this.lock=s,this.view=d,this.index=0,this.stack=[],this.changed=!1,this.top=o,this.preMatch=function(r,o){let s=o,d=s.children.length,e=r.childCount,t=new Map,n=[];t:for(;e>0;){let i;for(;;)if(d){let h=s.children[d-1];if(!(h instanceof wt)){i=h,d--;break}s=h,d=h.children.length}else{if(s==o)break t;d=s.parent.children.indexOf(s),s=s.parent}let u=i.node;if(u){if(u!=r.child(e-1))break;--e,t.set(i,e),n.push(i)}}return{index:e,matched:t,matches:n.reverse()}}(o.node.content,o)}destroyBetween(o,s){if(o!=s){for(let d=o;d<s;d++)this.top.children[d].destroy();this.top.children.splice(o,s-o),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(o,s,d){let e=0,t=this.stack.length>>1,n=Math.min(t,o.length);for(;e<n&&(e==t-1?this.top:this.stack[e+1<<1]).matchesMark(o[e])&&!1!==o[e].type.spec.spanning;)e++;for(;e<t;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),t--;for(;t<o.length;){this.stack.push(this.top,this.index+1);let i=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let h=this.top.children[u];if(h.matchesMark(o[t])&&!this.isLocked(h.dom)){i=u;break}}if(i>-1)i>this.index&&(this.changed=!0,this.destroyBetween(this.index,i)),this.top=this.top.children[this.index];else{let u=wt.create(this.top,o[t],s,d);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,t++}}findNodeMatch(o,s,d,e){let n,t=-1;if(e>=this.preMatch.index&&(n=this.preMatch.matches[e-this.preMatch.index]).parent==this.top&&n.matchesNode(o,s,d))t=this.top.children.indexOf(n,this.index);else for(let i=this.index,u=Math.min(this.top.children.length,i+5);i<u;i++){let h=this.top.children[i];if(h.matchesNode(o,s,d)&&!this.preMatch.matched.has(h)){t=i;break}}return!(t<0||(this.destroyBetween(this.index,t),this.index++,0))}updateNodeAt(o,s,d,e,t){let n=this.top.children[e];return 3==n.dirty&&n.dom==n.contentDOM&&(n.dirty=2),!!n.update(o,s,d,t)&&(this.destroyBetween(this.index,e),this.index++,!0)}findIndexWithChild(o){for(;;){let s=o.parentNode;if(!s)return-1;if(s==this.top.contentDOM){let d=o.pmViewDesc;if(d)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==d)return e;return-1}o=s}}updateNextNode(o,s,d,e,t){for(let n=this.index;n<this.top.children.length;n++){let i=this.top.children[n];if(i instanceof N){let u=this.preMatch.matched.get(i);if(null!=u&&u!=t)return!1;let h=i.dom;if((!this.isLocked(h)||o.isText&&i.node&&i.node.isText&&i.nodeDOM.nodeValue==o.text&&3!=i.dirty&&Je(s,i.outerDeco))&&i.update(o,s,d,e))return this.destroyBetween(this.index,n),i.dom!=h&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(o,s,d,e,t){this.top.children.splice(this.index++,0,N.create(this.top,o,s,d,e,t)),this.changed=!0}placeWidget(o,s,d){let e=this.index<this.top.children.length?this.top.children[this.index]:null;if(!e||!e.matchesWidget(o)||o!=e.widget&&e.widget.type.toDOM.parentNode){let t=new H(this.top,o,s,d);this.top.children.splice(this.index++,0,t),this.changed=!0}else this.index++}addTextblockHacks(){let o=this.top.children[this.index-1],s=this.top;for(;o instanceof wt;)s=o,o=s.children[s.children.length-1];(!o||!(o instanceof p)||/\n$/.test(o.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(o.node.text))&&((Kt||Lt)&&o&&"false"==o.dom.contentEditable&&this.addHackNode("IMG",s),this.addHackNode("BR",this.top))}addHackNode(o,s){if(s==this.top&&this.index<s.children.length&&s.children[this.index].matchesHack(o))this.index++;else{let d=document.createElement(o);"IMG"==o&&(d.className="ProseMirror-separator",d.alt=""),"BR"==o&&(d.className="ProseMirror-trailingBreak");let e=new E(this.top,[],d,null);s!=this.top?s.children.push(e):s.children.splice(this.index++,0,e),this.changed=!0}}isLocked(o){return this.lock&&(o==this.lock||1==o.nodeType&&o.contains(this.lock.parentNode))}}function gt(r,o){return r.type.side-o.type.side}function ee(r,o,s,d,e){let t=[];for(let n=0,i=0;n<r.length;n++){let u=r[n],h=i,T=i+=u.size;h>=s||T<=o?t.push(u):(h<o&&t.push(u.slice(0,o-h,d)),e&&(t.push(e),e=void 0),T>s&&t.push(u.slice(s-h,u.size,d)))}return t}function he(r,o=null){let s=r.domSelectionRange(),d=r.state.doc;if(!s.focusNode)return null;let e=r.docView.nearestDesc(s.focusNode),t=e&&0==e.size,n=r.docView.posFromDOM(s.focusNode,s.focusOffset,1);if(n<0)return null;let u,h,i=d.resolve(n);if(Ct(s)){for(u=i;e&&!e.node;)e=e.parent;let T=e.node;if(e&&T.isAtom&&M.qv.isSelectable(T)&&e.parent&&(!T.isInline||!function(r,o,s){for(let d=0==o,e=o==ut(r);d||e;){if(r==s)return!0;let t=P(r);if(!(r=r.parentNode))return!1;d=d&&0==t,e=e&&t==ut(r)}}(s.focusNode,s.focusOffset,e.dom))){let A=e.posBefore;h=new M.qv(n==A?i:d.resolve(A))}}else{let T=r.docView.posFromDOM(s.anchorNode,s.anchorOffset,1);if(T<0)return null;u=d.resolve(T)}return h||(h=nn(r,u,i,"pointer"==o||r.state.selection.head<i.pos&&!t?1:-1)),h}function re(r){return r.editable?r.hasFocus():ln(r)&&document.activeElement&&document.activeElement.contains(r.dom)}function le(r,o=!1){let s=r.state.selection;if(Cn(r,s),re(r)){if(!o&&r.input.mouseDown&&r.input.mouseDown.allowDefault&&Lt){let d=r.domSelectionRange(),e=r.domObserver.currentSelection;if(d.anchorNode&&e.anchorNode&&X(d.anchorNode,d.anchorOffset,e.anchorNode,e.anchorOffset))return r.input.mouseDown.delayedSelectionSync=!0,void r.domObserver.setCurSelection()}if(r.domObserver.disconnectSelection(),r.cursorWrapper)!function(r){let o=r.domSelection(),s=document.createRange(),d=r.cursorWrapper.dom,e="IMG"==d.nodeName;e?s.setEnd(d.parentNode,P(d)+1):s.setEnd(d,0),s.collapse(!1),o.removeAllRanges(),o.addRange(s),!e&&!r.state.selection.visible&&j&&At<=11&&(d.disabled=!0,d.disabled=!1)}(r);else{let t,n,{anchor:d,head:e}=s;ce&&!(s instanceof M.Bs)&&(s.$from.parent.inlineContent||(t=be(r,s.from)),!s.empty&&!s.$from.parent.inlineContent&&(n=be(r,s.to))),r.docView.setSelection(d,e,r.root,o),ce&&(t&&en(t),n&&en(n)),s.visible?r.dom.classList.remove("ProseMirror-hideselection"):(r.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(r){let o=r.dom.ownerDocument;o.removeEventListener("selectionchange",r.input.hideSelectionGuard);let s=r.domSelectionRange(),d=s.anchorNode,e=s.anchorOffset;o.addEventListener("selectionchange",r.input.hideSelectionGuard=()=>{(s.anchorNode!=d||s.anchorOffset!=e)&&(o.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(()=>{(!re(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})}(r))}r.domObserver.setCurSelection(),r.domObserver.connectSelection()}}const ce=Kt||Lt&&Ht<63;function be(r,o){let{node:s,offset:d}=r.docView.domFromPos(o,0),e=d<s.childNodes.length?s.childNodes[d]:null,t=d?s.childNodes[d-1]:null;if(Kt&&e&&"false"==e.contentEditable)return Re(e);if(!(e&&"false"!=e.contentEditable||t&&"false"!=t.contentEditable)){if(e)return Re(e);if(t)return Re(t)}}function Re(r){return r.contentEditable="true",Kt&&r.draggable&&(r.draggable=!1,r.wasDraggable=!0),r}function en(r){r.contentEditable="false",r.wasDraggable&&(r.draggable=!0,r.wasDraggable=null)}function Cn(r,o){if(o instanceof M.qv){let s=r.docView.descAt(o.from);s!=r.lastSelectedViewDesc&&(vn(r),s&&s.selectNode(),r.lastSelectedViewDesc=s)}else vn(r)}function vn(r){r.lastSelectedViewDesc&&(r.lastSelectedViewDesc.parent&&r.lastSelectedViewDesc.deselectNode(),r.lastSelectedViewDesc=void 0)}function nn(r,o,s,d){return r.someProp("createSelectionBetween",e=>e(r,o,s))||M.Bs.between(o,s,d)}function mn(r){return!(r.editable&&!r.hasFocus())&&ln(r)}function ln(r){let o=r.domSelectionRange();if(!o.anchorNode)return!1;try{return r.dom.contains(3==o.anchorNode.nodeType?o.anchorNode.parentNode:o.anchorNode)&&(r.editable||r.dom.contains(3==o.focusNode.nodeType?o.focusNode.parentNode:o.focusNode))}catch(s){return!1}}function an(r,o){let{$anchor:s,$head:d}=r.selection,e=o>0?s.max(d):s.min(d),t=e.parent.inlineContent?e.depth?r.doc.resolve(o>0?e.after():e.before()):null:e;return t&&M.Y1.findFrom(t,o)}function $e(r,o){return r.dispatch(r.state.tr.setSelection(o).scrollIntoView()),!0}function on(r,o,s){let d=r.state.selection;if(!(d instanceof M.Bs)){if(d instanceof M.qv&&d.node.isInline)return $e(r,new M.Bs(o>0?d.$to:d.$from));{let e=an(r.state,o);return!!e&&$e(r,e)}}if(!d.empty||s.indexOf("s")>-1)return!1;if(r.endOfTextblock(o>0?"right":"left")){let e=an(r.state,o);return!!(e&&e instanceof M.qv)&&$e(r,e)}if(!(L&&s.indexOf("m")>-1)){let n,e=d.$head,t=e.textOffset?null:o<0?e.nodeBefore:e.nodeAfter;if(!t||t.isText)return!1;let i=o<0?e.pos-t.nodeSize:e.pos;return!!(t.isAtom||(n=r.docView.descAt(i))&&!n.contentDOM)&&(M.qv.isSelectable(t)?$e(r,new M.qv(o<0?r.state.doc.resolve(e.pos-t.nodeSize):e)):!!ct&&$e(r,new M.Bs(r.state.doc.resolve(o<0?i:i+t.nodeSize))))}}function Ge(r){return 3==r.nodeType?r.nodeValue.length:r.childNodes.length}function Xe(r){let o=r.pmViewDesc;return o&&0==o.size&&(r.nextSibling||"BR"!=r.nodeName)}function _(r){let o=r.domSelectionRange(),s=o.focusNode,d=o.focusOffset;if(!s)return;let e,t,n=!1;for(St&&1==s.nodeType&&d<Ge(s)&&Xe(s.childNodes[d])&&(n=!0);;)if(d>0){if(1!=s.nodeType)break;{let i=s.childNodes[d-1];if(Xe(i))e=s,t=--d;else{if(3!=i.nodeType)break;s=i,d=s.nodeValue.length}}}else{if(m(s))break;{let i=s.previousSibling;for(;i&&Xe(i);)e=s.parentNode,t=P(i),i=i.previousSibling;if(i)s=i,d=Ge(s);else{if(s=s.parentNode,s==r.dom)break;d=0}}}n?f(r,s,d):e&&f(r,e,t)}function C(r){let o=r.domSelectionRange(),s=o.focusNode,d=o.focusOffset;if(!s)return;let t,n,e=Ge(s);for(;;)if(d<e){if(1!=s.nodeType)break;if(!Xe(s.childNodes[d]))break;t=s,n=++d}else{if(m(s))break;{let i=s.nextSibling;for(;i&&Xe(i);)t=i.parentNode,n=P(i)+1,i=i.nextSibling;if(i)s=i,d=0,e=Ge(s);else{if(s=s.parentNode,s==r.dom)break;d=e=0}}}t&&f(r,t,n)}function m(r){let o=r.pmViewDesc;return o&&o.node&&o.node.isBlock}function f(r,o,s){let d=r.domSelection();if(Ct(d)){let t=document.createRange();t.setEnd(o,s),t.setStart(o,s),d.removeAllRanges(),d.addRange(t)}else d.extend&&d.extend(o,s);r.domObserver.setCurSelection();let{state:e}=r;setTimeout(()=>{r.state==e&&le(r)},50)}function v(r,o,s){let d=r.state.selection;if(d instanceof M.Bs&&!d.empty||s.indexOf("s")>-1||L&&s.indexOf("m")>-1)return!1;let{$from:e,$to:t}=d;if(!e.parent.inlineContent||r.endOfTextblock(o<0?"up":"down")){let n=an(r.state,o);if(n&&n instanceof M.qv)return $e(r,n)}if(!e.parent.inlineContent){let n=o<0?e:t,i=d instanceof M.C1?M.Y1.near(n,o):M.Y1.findFrom(n,o);return!!i&&$e(r,i)}return!1}function x(r,o){if(!(r.state.selection instanceof M.Bs))return!0;let{$head:s,$anchor:d,empty:e}=r.state.selection;if(!s.sameParent(d))return!0;if(!e)return!1;if(r.endOfTextblock(o>0?"forward":"backward"))return!0;let t=!s.textOffset&&(o<0?s.nodeBefore:s.nodeAfter);if(t&&!t.isText){let n=r.state.tr;return o<0?n.delete(s.pos-t.nodeSize,s.pos):n.delete(s.pos,s.pos+t.nodeSize),r.dispatch(n),!0}return!1}function w(r,o,s){r.domObserver.stop(),o.contentEditable=s,r.domObserver.start()}function Mt(r,o){r.someProp("transformCopied",U=>{o=U(o,r)});let s=[],{content:d,openStart:e,openEnd:t}=o;for(;e>1&&t>1&&1==d.childCount&&1==d.firstChild.childCount;){e--,t--;let U=d.firstChild;s.push(U.type.name,U.attrs!=U.type.defaultAttrs?U.attrs:null),d=U.content}let n=r.someProp("clipboardSerializer")||l.PW.fromSchema(r.state.schema),i=Pe(),u=i.createElement("div");u.appendChild(n.serializeFragment(d,{document:i}));let T,h=u.firstChild,A=0;for(;h&&1==h.nodeType&&(T=je[h.nodeName.toLowerCase()]);){for(let U=T.length-1;U>=0;U--){let Z=i.createElement(T[U]);for(;u.firstChild;)Z.appendChild(u.firstChild);u.appendChild(Z),A++}h=u.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",`${e} ${t}${A?` -${A}`:""} ${JSON.stringify(s)}`),{dom:u,text:r.someProp("clipboardTextSerializer",U=>U(o,r))||o.content.textBetween(0,o.content.size,"\n\n")}}function xt(r,o,s,d,e){let n,i,t=e.parent.type.spec.code;if(!s&&!o)return null;let u=o&&(d||t||!s);if(u){if(r.someProp("transformPastedText",I=>{o=I(o,t||d,r)}),t)return o?new l.p2(l.HY.from(r.state.schema.text(o.replace(/\r\n?/g,"\n"))),0,0):l.p2.empty;let A=r.someProp("clipboardTextParser",I=>I(o,e,d,r));if(A)i=A;else{let I=e.marks(),{schema:U}=r.state,Z=l.PW.fromSchema(U);n=document.createElement("div"),o.split(/(?:\r\n?|\n)+/).forEach(nt=>{let dt=n.appendChild(document.createElement("p"));nt&&dt.appendChild(Z.serializeNode(U.text(nt,I)))})}}else r.someProp("transformPastedHTML",A=>{s=A(s,r)}),n=function(r){let o=/^(\s*<meta [^>]*>)*/.exec(r);o&&(r=r.slice(o[0].length));let e,s=Pe().createElement("div"),d=/<([a-z][^>\s]+)/i.exec(r);if((e=d&&je[d[1].toLowerCase()])&&(r=e.map(t=>"<"+t+">").join("")+r+e.map(t=>"</"+t+">").reverse().join("")),s.innerHTML=r,e)for(let t=0;t<e.length;t++)s=s.querySelector(e[t])||s;return s}(s),ct&&function(r){let o=r.querySelectorAll(Lt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let s=0;s<o.length;s++){let d=o[s];1==d.childNodes.length&&"\xa0"==d.textContent&&d.parentNode&&d.parentNode.replaceChild(r.ownerDocument.createTextNode(" "),d)}}(n);let h=n&&n.querySelector("[data-pm-slice]"),T=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(T&&T[3])for(let A=+T[3];A>0;A--){let I=n.firstChild;for(;I&&1!=I.nodeType;)I=I.nextSibling;if(!I)break;n=I}if(i||(i=(r.someProp("clipboardParser")||r.someProp("domParser")||l.aw.fromSchema(r.state.schema)).parseSlice(n,{preserveWhitespace:!(!u&&!T),context:e,ruleFromNode:I=>"BR"!=I.nodeName||I.nextSibling||!I.parentNode||Nt.test(I.parentNode.nodeName)?null:{ignore:!0}})),T)i=function(r,o){if(!r.size)return r;let d,s=r.content.firstChild.type.schema;try{d=JSON.parse(o)}catch(i){return r}let{content:e,openStart:t,openEnd:n}=r;for(let i=d.length-2;i>=0;i-=2){let u=s.nodes[d[i]];if(!u||u.hasRequiredAttrs())break;e=l.HY.from(u.create(d[i+1],e)),t++,n++}return new l.p2(e,t,n)}(rn(i,+T[1],+T[2]),T[4]);else if(i=l.p2.maxOpen(function(r,o){if(r.childCount<2)return r;for(let s=o.depth;s>=0;s--){let t,e=o.node(s).contentMatchAt(o.index(s)),n=[];if(r.forEach(i=>{if(!n)return;let h,u=e.findWrapping(i.type);if(!u)return n=null;if(h=n.length&&t.length&&se(u,t,i,n[n.length-1],0))n[n.length-1]=h;else{n.length&&(n[n.length-1]=ie(n[n.length-1],t.length));let T=Qt(i,u);n.push(T),e=e.matchType(T.type),t=u}}),n)return l.HY.from(n)}return r}(i.content,e),!0),i.openStart||i.openEnd){let A=0,I=0;for(let U=i.content.firstChild;A<i.openStart&&!U.type.spec.isolating;A++,U=U.firstChild);for(let U=i.content.lastChild;I<i.openEnd&&!U.type.spec.isolating;I++,U=U.lastChild);i=rn(i,A,I)}return r.someProp("transformPasted",A=>{i=A(i,r)}),i}const Nt=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Qt(r,o,s=0){for(let d=o.length-1;d>=s;d--)r=o[d].create(null,l.HY.from(r));return r}function se(r,o,s,d,e){if(e<r.length&&e<o.length&&r[e]==o[e]){let t=se(r,o,s,d.lastChild,e+1);if(t)return d.copy(d.content.replaceChild(d.childCount-1,t));if(d.contentMatchAt(d.childCount).matchType(e==r.length-1?s.type:r[e+1]))return d.copy(d.content.append(l.HY.from(Qt(s,r,e+1))))}}function ie(r,o){if(0==o)return r;let s=r.content.replaceChild(r.childCount-1,ie(r.lastChild,o-1)),d=r.contentMatchAt(r.childCount).fillBefore(l.HY.empty,!0);return r.copy(s.append(d))}function Oe(r,o,s,d,e,t){let n=o<0?r.firstChild:r.lastChild,i=n.content;return e<d-1&&(i=Oe(i,o,s,d,e+1,t)),e>=s&&(i=o<0?n.contentMatchAt(0).fillBefore(i,r.childCount>1||t<=e).append(i):i.append(n.contentMatchAt(n.childCount).fillBefore(l.HY.empty,!0))),r.replaceChild(o<0?0:r.childCount-1,n.copy(i))}function rn(r,o,s){return o<r.openStart&&(r=new l.p2(Oe(r.content,-1,o,r.openStart,0,r.openEnd),o,r.openEnd)),s<r.openEnd&&(r=new l.p2(Oe(r.content,1,s,r.openEnd,0,0),r.openStart,s)),r}const je={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Ce=null;function Pe(){return Ce||(Ce=document.implementation.createHTMLDocument("title"))}const Ie={},Fe={},Vn={touchstart:!0,touchmove:!0};class Qn{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function qe(r,o){r.input.lastSelectionOrigin=o,r.input.lastSelectionTime=Date.now()}function bn(r){r.someProp("handleDOMEvents",o=>{for(let s in o)r.input.eventHandlers[s]||r.dom.addEventListener(s,r.input.eventHandlers[s]=d=>_n(r,d))})}function _n(r,o){return r.someProp("handleDOMEvents",s=>{let d=s[o.type];return!!d&&(d(r,o)||o.defaultPrevented)})}function Mn(r,o){if(!o.bubbles)return!0;if(o.defaultPrevented)return!1;for(let s=o.target;s!=r.dom;s=s.parentNode)if(!s||11==s.nodeType||s.pmViewDesc&&s.pmViewDesc.stopEvent(o))return!1;return!0}function dn(r){return{left:r.clientX,top:r.clientY}}function On(r,o,s,d,e){if(-1==d)return!1;let t=r.state.doc.resolve(d);for(let n=t.depth+1;n>0;n--)if(r.someProp(o,i=>n>t.depth?i(r,s,t.nodeAfter,t.before(n),e,!0):i(r,s,t.node(n),t.before(n),e,!1)))return!0;return!1}function sn(r,o,s){r.focused||r.focus();let d=r.state.tr.setSelection(o);"pointer"==s&&d.setMeta("pointer",!0),r.dispatch(d)}function Co(r,o,s,d){return On(r,"handleDoubleClickOn",o,s,d)||r.someProp("handleDoubleClick",e=>e(r,o,d))}function vo(r,o,s,d){return On(r,"handleTripleClickOn",o,s,d)||r.someProp("handleTripleClick",e=>e(r,o,d))||function(r,o,s){if(0!=s.button)return!1;let d=r.state.doc;if(-1==o)return!!d.inlineContent&&(sn(r,M.Bs.create(d,0,d.content.size),"pointer"),!0);let e=d.resolve(o);for(let t=e.depth+1;t>0;t--){let n=t>e.depth?e.nodeAfter:e.node(t),i=e.before(t);if(n.inlineContent)sn(r,M.Bs.create(d,i+1,i+1+n.content.size),"pointer");else{if(!M.qv.isSelectable(n))continue;sn(r,M.qv.create(d,i),"pointer")}return!0}}(r,s,d)}function Ln(r){return zn(r)}Fe.keydown=(r,o)=>{let s=o;if(r.input.shiftKey=16==s.keyCode||s.shiftKey,!oo(r,s)&&(r.input.lastKeyCode=s.keyCode,r.input.lastKeyCodeTime=Date.now(),!rt||!Lt||13!=s.keyCode))if(229!=s.keyCode&&r.domObserver.forceFlush(),!pt||13!=s.keyCode||s.ctrlKey||s.altKey||s.metaKey)r.someProp("handleKeyDown",d=>d(r,s))||function(r,o){let s=o.keyCode,d=function(r){let o="";return r.ctrlKey&&(o+="c"),r.metaKey&&(o+="m"),r.altKey&&(o+="a"),r.shiftKey&&(o+="s"),o}(o);return 8==s||L&&72==s&&"c"==d?x(r,-1)||_(r):46==s||L&&68==s&&"c"==d?x(r,1)||C(r):13==s||27==s||(37==s||L&&66==s&&"c"==d?on(r,-1,d)||_(r):39==s||L&&70==s&&"c"==d?on(r,1,d)||C(r):38==s||L&&80==s&&"c"==d?v(r,-1,d)||_(r):40==s||L&&78==s&&"c"==d?function(r){if(!Kt||r.state.selection.$head.parentOffset>0)return!1;let{focusNode:o,focusOffset:s}=r.domSelectionRange();if(o&&1==o.nodeType&&0==s&&o.firstChild&&"false"==o.firstChild.contentEditable){let d=o.firstChild;w(r,d,"true"),setTimeout(()=>w(r,d,"false"),20)}return!1}(r)||v(r,1,d)||C(r):d==(L?"m":"c")&&(66==s||73==s||89==s||90==s))}(r,s)?s.preventDefault():qe(r,"key");else{let d=Date.now();r.input.lastIOSEnter=d,r.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{r.input.lastIOSEnter==d&&(r.someProp("handleKeyDown",e=>e(r,bt(13,"Enter"))),r.input.lastIOSEnter=0)},200)}},Fe.keyup=(r,o)=>{16==o.keyCode&&(r.input.shiftKey=!1)},Fe.keypress=(r,o)=>{let s=o;if(oo(r,s)||!s.charCode||s.ctrlKey&&!s.altKey||L&&s.metaKey)return;if(r.someProp("handleKeyPress",e=>e(r,s)))return void s.preventDefault();let d=r.state.selection;if(!(d instanceof M.Bs&&d.$from.sameParent(d.$to))){let e=String.fromCharCode(s.charCode);!/[\r\n]/.test(e)&&!r.someProp("handleTextInput",t=>t(r,d.$from.pos,d.$to.pos,e))&&r.dispatch(r.state.tr.insertText(e).scrollIntoView()),s.preventDefault()}};const Fn=L?"metaKey":"ctrlKey";Ie.mousedown=(r,o)=>{let s=o;r.input.shiftKey=s.shiftKey;let d=Ln(r),e=Date.now(),t="singleClick";e-r.input.lastClick.time<500&&function(r,o){let s=o.x-r.clientX,d=o.y-r.clientY;return s*s+d*d<100}(s,r.input.lastClick)&&!s[Fn]&&("singleClick"==r.input.lastClick.type?t="doubleClick":"doubleClick"==r.input.lastClick.type&&(t="tripleClick")),r.input.lastClick={time:e,x:s.clientX,y:s.clientY,type:t};let n=r.posAtCoords(dn(s));!n||("singleClick"==t?(r.input.mouseDown&&r.input.mouseDown.done(),r.input.mouseDown=new Kn(r,n,s,!!d)):("doubleClick"==t?Co:vo)(r,n.pos,n.inside,s)?s.preventDefault():qe(r,"pointer"))};class Kn{constructor(o,s,d,e){let t,n;if(this.view=o,this.pos=s,this.event=d,this.flushed=e,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=o.state.doc,this.selectNode=!!d[Fn],this.allowDefault=d.shiftKey,s.inside>-1)t=o.state.doc.nodeAt(s.inside),n=s.inside;else{let T=o.state.doc.resolve(s.pos);t=T.parent,n=T.depth?T.before():0}const i=e?null:d.target,u=i?o.docView.nearestDesc(i,!0):null;this.target=u?u.dom:null;let{selection:h}=o.state;(0==d.button&&t.type.spec.draggable&&!1!==t.type.spec.selectable||h instanceof M.qv&&h.from<=n&&h.to>n)&&(this.mightDrag={node:t,pos:n,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!St||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),o.root.addEventListener("mouseup",this.up=this.up.bind(this)),o.root.addEventListener("mousemove",this.move=this.move.bind(this)),qe(o,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>le(this.view)),this.view.input.mouseDown=null}up(o){if(this.done(),!this.view.dom.contains(o.target))return;let s=this.pos;this.view.state.doc!=this.startDoc&&(s=this.view.posAtCoords(dn(o))),this.updateAllowDefault(o),this.allowDefault||!s?qe(this.view,"pointer"):function(r,o,s,d,e){return On(r,"handleClickOn",o,s,d)||r.someProp("handleClick",t=>t(r,o,d))||(e?function(r,o){if(-1==o)return!1;let d,e,s=r.state.selection;s instanceof M.qv&&(d=s.node);let t=r.state.doc.resolve(o);for(let n=t.depth+1;n>0;n--){let i=n>t.depth?t.nodeAfter:t.node(n);if(M.qv.isSelectable(i)){e=d&&s.$from.depth>0&&n>=s.$from.depth&&t.before(s.$from.depth+1)==s.$from.pos?t.before(s.$from.depth):t.before(n);break}}return null!=e&&(sn(r,M.qv.create(r.state.doc,e),"pointer"),!0)}(r,s):function(r,o){if(-1==o)return!1;let s=r.state.doc.resolve(o),d=s.nodeAfter;return!!(d&&d.isAtom&&M.qv.isSelectable(d))&&(sn(r,new M.qv(s),"pointer"),!0)}(r,s))}(this.view,s.pos,s.inside,o,this.selectNode)?o.preventDefault():0==o.button&&(this.flushed||Kt&&this.mightDrag&&!this.mightDrag.node.isAtom||Lt&&!this.view.state.selection.visible&&Math.min(Math.abs(s.pos-this.view.state.selection.from),Math.abs(s.pos-this.view.state.selection.to))<=2)?(sn(this.view,M.Y1.near(this.view.state.doc.resolve(s.pos)),"pointer"),o.preventDefault()):qe(this.view,"pointer")}move(o){this.updateAllowDefault(o),qe(this.view,"pointer"),0==o.buttons&&this.done()}updateAllowDefault(o){!this.allowDefault&&(Math.abs(this.event.x-o.clientX)>4||Math.abs(this.event.y-o.clientY)>4)&&(this.allowDefault=!0)}}function oo(r,o){return!!r.composing||!!(Kt&&Math.abs(o.timeStamp-r.input.compositionEndedAt)<500)&&(r.input.compositionEndedAt=-2e8,!0)}Ie.touchstart=r=>{r.input.lastTouch=Date.now(),Ln(r),qe(r,"pointer")},Ie.touchmove=r=>{r.input.lastTouch=Date.now(),qe(r,"pointer")},Ie.contextmenu=r=>Ln(r);const Mo=rt?5e3:-1;function Jn(r,o){clearTimeout(r.input.composingTimeout),o>-1&&(r.input.composingTimeout=setTimeout(()=>zn(r),o))}function io(r){for(r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=function(){let r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function zn(r,o=!1){if(!(rt&&r.domObserver.flushingSoon>=0)){if(r.domObserver.forceFlush(),io(r),o||r.docView&&r.docView.dirty){let s=he(r);return s&&!s.eq(r.state.selection)?r.dispatch(r.state.tr.setSelection(s)):r.updateState(r.state),!0}return!1}}Fe.compositionstart=Fe.compositionupdate=r=>{if(!r.composing){r.domObserver.flush();let{state:o}=r,s=o.selection.$from;if(o.selection.empty&&(o.storedMarks||!s.textOffset&&s.parentOffset&&s.nodeBefore.marks.some(d=>!1===d.type.spec.inclusive)))r.markCursor=r.state.storedMarks||s.marks(),zn(r,!0),r.markCursor=null;else if(zn(r),St&&o.selection.empty&&s.parentOffset&&!s.textOffset&&s.nodeBefore.marks.length){let d=r.domSelectionRange();for(let e=d.focusNode,t=d.focusOffset;e&&1==e.nodeType&&0!=t;){let n=t<0?e.lastChild:e.childNodes[t-1];if(!n)break;if(3==n.nodeType){r.domSelection().collapse(n,n.nodeValue.length);break}e=n,t=-1}}r.input.composing=!0}Jn(r,Mo)},Fe.compositionend=(r,o)=>{r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=o.timeStamp,Jn(r,20))};const In=j&&At<15||pt&&st<604;function Bn(r,o,s,d,e){let t=xt(r,o,s,d,r.state.selection.$from);if(r.someProp("handlePaste",u=>u(r,e,t||l.p2.empty)))return!0;if(!t)return!1;let n=function(r){return 0==r.openStart&&0==r.openEnd&&1==r.content.childCount?r.content.firstChild:null}(t),i=n?r.state.tr.replaceSelectionWith(n,r.input.shiftKey):r.state.tr.replaceSelection(t);return r.dispatch(i.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ie.copy=Fe.cut=(r,o)=>{let s=o,d=r.state.selection,e="cut"==s.type;if(d.empty)return;let t=In?null:s.clipboardData,n=d.content(),{dom:i,text:u}=Mt(r,n);t?(s.preventDefault(),t.clearData(),t.setData("text/html",i.innerHTML),t.setData("text/plain",u)):function(r,o){if(!r.dom.parentNode)return;let s=r.dom.parentNode.appendChild(document.createElement("div"));s.appendChild(o),s.style.cssText="position: fixed; left: -10000px; top: 10px";let d=getSelection(),e=document.createRange();e.selectNodeContents(o),r.dom.blur(),d.removeAllRanges(),d.addRange(e),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s),r.focus()},50)}(r,i),e&&r.dispatch(r.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Fe.paste=(r,o)=>{let s=o;if(r.composing&&!rt)return;let d=In?null:s.clipboardData;d&&Bn(r,d.getData("text/plain"),d.getData("text/html"),r.input.shiftKey,s)?s.preventDefault():function(r,o){if(!r.dom.parentNode)return;let s=r.input.shiftKey||r.state.selection.$from.parent.type.spec.code,d=r.dom.parentNode.appendChild(document.createElement(s?"textarea":"div"));s||(d.contentEditable="true"),d.style.cssText="position: fixed; left: -10000px; top: 10px",d.focus(),setTimeout(()=>{r.focus(),d.parentNode&&d.parentNode.removeChild(d),s?Bn(r,d.value,null,r.input.shiftKey,o):Bn(r,d.textContent,d.innerHTML,r.input.shiftKey,o)},50)}(r,s)};class Xn{constructor(o,s){this.slice=o,this.move=s}}const Nn=L?"altKey":"ctrlKey";Ie.dragstart=(r,o)=>{let s=o,d=r.input.mouseDown;if(d&&d.done(),!s.dataTransfer)return;let e=r.state.selection,t=e.empty?null:r.posAtCoords(dn(s));if(!(t&&t.pos>=e.from&&t.pos<=(e instanceof M.qv?e.to-1:e.to)))if(d&&d.mightDrag)r.dispatch(r.state.tr.setSelection(M.qv.create(r.state.doc,d.mightDrag.pos)));else if(s.target&&1==s.target.nodeType){let h=r.docView.nearestDesc(s.target,!0);h&&h.node.type.spec.draggable&&h!=r.docView&&r.dispatch(r.state.tr.setSelection(M.qv.create(r.state.doc,h.posBefore)))}let n=r.state.selection.content(),{dom:i,text:u}=Mt(r,n);s.dataTransfer.clearData(),s.dataTransfer.setData(In?"Text":"text/html",i.innerHTML),s.dataTransfer.effectAllowed="copyMove",In||s.dataTransfer.setData("text/plain",u),r.dragging=new Xn(n,!s[Nn])},Ie.dragend=r=>{let o=r.dragging;window.setTimeout(()=>{r.dragging==o&&(r.dragging=null)},50)},Fe.dragover=Fe.dragenter=(r,o)=>o.preventDefault(),Fe.drop=(r,o)=>{let s=o,d=r.dragging;if(r.dragging=null,!s.dataTransfer)return;let e=r.posAtCoords(dn(s));if(!e)return;let t=r.state.doc.resolve(e.pos),n=d&&d.slice;n?r.someProp("transformPasted",Z=>{n=Z(n,r)}):n=xt(r,s.dataTransfer.getData(In?"Text":"text/plain"),In?null:s.dataTransfer.getData("text/html"),!1,t);let i=!(!d||s[Nn]);if(r.someProp("handleDrop",Z=>Z(r,s,n||l.p2.empty,i)))return void s.preventDefault();if(!n)return;s.preventDefault();let u=n?(0,y.nj)(r.state.doc,t.pos,n):t.pos;null==u&&(u=t.pos);let h=r.state.tr;i&&h.deleteSelection();let T=h.mapping.map(u),A=0==n.openStart&&0==n.openEnd&&1==n.content.childCount,I=h.doc;if(A?h.replaceRangeWith(T,T,n.content.firstChild):h.replaceRange(T,T,n),h.doc.eq(I))return;let U=h.doc.resolve(T);if(A&&M.qv.isSelectable(n.content.firstChild)&&U.nodeAfter&&U.nodeAfter.sameMarkup(n.content.firstChild))h.setSelection(new M.qv(U));else{let Z=h.mapping.map(u);h.mapping.maps[h.mapping.maps.length-1].forEach((nt,dt,Bt,Jt)=>Z=Jt),h.setSelection(nn(r,U,h.doc.resolve(Z)))}r.focus(),r.dispatch(h.setMeta("uiEvent","drop"))},Ie.focus=r=>{r.input.lastFocus=Date.now(),r.focused||(r.domObserver.stop(),r.dom.classList.add("ProseMirror-focused"),r.domObserver.start(),r.focused=!0,setTimeout(()=>{r.docView&&r.hasFocus()&&!r.domObserver.currentSelection.eq(r.domSelectionRange())&&le(r)},20))},Ie.blur=(r,o)=>{let s=o;r.focused&&(r.domObserver.stop(),r.dom.classList.remove("ProseMirror-focused"),r.domObserver.start(),s.relatedTarget&&r.dom.contains(s.relatedTarget)&&r.domObserver.currentSelection.clear(),r.focused=!1)},Ie.beforeinput=(r,o)=>{if(Lt&&rt&&"deleteContentBackward"==o.inputType){r.domObserver.flushSoon();let{domChangeCount:d}=r.input;setTimeout(()=>{if(r.input.domChangeCount!=d||(r.dom.blur(),r.focus(),r.someProp("handleKeyDown",t=>t(r,bt(8,"Backspace")))))return;let{$cursor:e}=r.state.selection;e&&e.pos>0&&r.dispatch(r.state.tr.delete(e.pos-1,e.pos).scrollIntoView())},50)}};for(let r in Fe)Ie[r]=Fe[r];function xn(r,o){if(r==o)return!0;for(let s in r)if(r[s]!==o[s])return!1;for(let s in o)if(!(s in r))return!1;return!0}class $n{constructor(o,s){this.toDOM=o,this.spec=s||kn,this.side=this.spec.side||0}map(o,s,d,e){let{pos:t,deleted:n}=o.mapResult(s.from+e,this.side<0?-1:1);return n?null:new un(t-d,t-d,this)}valid(){return!0}eq(o){return this==o||o instanceof $n&&(this.spec.key&&this.spec.key==o.spec.key||this.toDOM==o.toDOM&&xn(this.spec,o.spec))}destroy(o){this.spec.destroy&&this.spec.destroy(o)}}class Tn{constructor(o,s){this.attrs=o,this.spec=s||kn}map(o,s,d,e){let t=o.map(s.from+e,this.spec.inclusiveStart?-1:1)-d,n=o.map(s.to+e,this.spec.inclusiveEnd?1:-1)-d;return t>=n?null:new un(t,n,this)}valid(o,s){return s.from<s.to}eq(o){return this==o||o instanceof Tn&&xn(this.attrs,o.attrs)&&xn(this.spec,o.spec)}static is(o){return o.type instanceof Tn}destroy(){}}class Zn{constructor(o,s){this.attrs=o,this.spec=s||kn}map(o,s,d,e){let t=o.mapResult(s.from+e,1);if(t.deleted)return null;let n=o.mapResult(s.to+e,-1);return n.deleted||n.pos<=t.pos?null:new un(t.pos-d,n.pos-d,this)}valid(o,s){let t,{index:d,offset:e}=o.content.findIndex(s.from);return e==s.from&&!(t=o.child(d)).isText&&e+t.nodeSize==s.to}eq(o){return this==o||o instanceof Zn&&xn(this.attrs,o.attrs)&&xn(this.spec,o.spec)}destroy(){}}class un{constructor(o,s,d){this.from=o,this.to=s,this.type=d}copy(o,s){return new un(o,s,this.type)}eq(o,s=0){return this.type.eq(o.type)&&this.from+s==o.from&&this.to+s==o.to}map(o,s,d){return this.type.map(o,this,s,d)}static widget(o,s,d){return new un(o,o,new $n(s,d))}static inline(o,s,d,e){return new un(o,s,new Tn(d,e))}static node(o,s,d,e){return new un(o,s,new Zn(d,e))}get spec(){return this.type.spec}get inline(){return this.type instanceof Tn}}const Hn=[],kn={};class Ze{constructor(o,s){this.local=o.length?o:Hn,this.children=s.length?s:Hn}static create(o,s){return s.length?Yn(s,o,0,kn):Qe}find(o,s,d){let e=[];return this.findInner(null==o?0:o,null==s?1e9:s,e,0,d),e}findInner(o,s,d,e,t){for(let n=0;n<this.local.length;n++){let i=this.local[n];i.from<=s&&i.to>=o&&(!t||t(i.spec))&&d.push(i.copy(i.from+e,i.to+e))}for(let n=0;n<this.children.length;n+=3)if(this.children[n]<s&&this.children[n+1]>o){let i=this.children[n]+1;this.children[n+2].findInner(o-i,s-i,d,e+i,t)}}map(o,s,d){return this==Qe||0==o.maps.length?this:this.mapInner(o,s,0,0,d||kn)}mapInner(o,s,d,e,t){let n;for(let i=0;i<this.local.length;i++){let u=this.local[i].map(o,d,e);u&&u.type.valid(s,u)?(n||(n=[])).push(u):t.onRemove&&t.onRemove(this.local[i].spec)}return this.children.length?function(r,o,s,d,e,t,n){let i=r.slice();for(let h=0,T=t;h<s.maps.length;h++){let A=0;s.maps[h].forEach((I,U,Z,nt)=>{let dt=nt-Z-(U-I);for(let Bt=0;Bt<i.length;Bt+=3){let Jt=i[Bt+1];if(Jt<0||I>Jt+T-A)continue;let Zt=i[Bt]+T-A;U>=Zt?i[Bt+1]=I<=Zt?-2:-1:Z>=e&&dt&&(i[Bt]+=dt,i[Bt+1]+=dt)}A+=dt}),T=s.maps[h].map(T,-1)}let u=!1;for(let h=0;h<i.length;h+=3)if(i[h+1]<0){if(-2==i[h+1]){u=!0,i[h+1]=-1;continue}let T=s.map(r[h]+t),A=T-e;if(A<0||A>=d.content.size){u=!0;continue}let U=s.map(r[h+1]+t,-1)-e,{index:Z,offset:nt}=d.content.findIndex(A),dt=d.maybeChild(Z);if(dt&&nt==A&&nt+dt.nodeSize==U){let Bt=i[h+2].mapInner(s,dt,T+1,r[h]+t+1,n);Bt!=Qe?(i[h]=A,i[h+1]=U,i[h+2]=Bt):(i[h+1]=-2,u=!0)}else u=!0}if(u){let h=function(r,o,s,d,e,t,n){function i(u,h){for(let T=0;T<u.local.length;T++){let A=u.local[T].map(d,e,h);A?s.push(A):n.onRemove&&n.onRemove(u.local[T].spec)}for(let T=0;T<u.children.length;T+=3)i(u.children[T+2],u.children[T]+h+1)}for(let u=0;u<r.length;u+=3)-1==r[u+1]&&i(r[u+2],o[u]+t+1);return s}(i,r,o,s,e,t,n),T=Yn(h,d,0,n);o=T.local;for(let A=0;A<i.length;A+=3)i[A+1]<0&&(i.splice(A,3),A-=3);for(let A=0,I=0;A<T.children.length;A+=3){let U=T.children[A];for(;I<i.length&&i[I]<U;)I+=3;i.splice(I,0,T.children[A],T.children[A+1],T.children[A+2])}}return new Ze(o.sort(yn),i)}(this.children,n||[],o,s,d,e,t):n?new Ze(n.sort(yn),Hn):Qe}add(o,s){return s.length?this==Qe?Ze.create(o,s):this.addInner(o,s,0):this}addInner(o,s,d){let e,t=0;o.forEach((i,u)=>{let T,h=u+d;if(T=qn(s,i,h)){for(e||(e=this.children.slice());t<e.length&&e[t]<u;)t+=3;e[t]==u?e[t+2]=e[t+2].addInner(i,T,h+1):e.splice(t,0,u,u+i.nodeSize,Yn(T,i,h+1,kn)),t+=3}});let n=so(t?lo(s):s,-d);for(let i=0;i<n.length;i++)n[i].type.valid(o,n[i])||n.splice(i--,1);return new Ze(n.length?this.local.concat(n).sort(yn):this.local,e||this.children)}remove(o){return 0==o.length||this==Qe?this:this.removeInner(o,0)}removeInner(o,s){let d=this.children,e=this.local;for(let t=0;t<d.length;t+=3){let n,i=d[t]+s,u=d[t+1]+s;for(let A,T=0;T<o.length;T++)(A=o[T])&&A.from>i&&A.to<u&&(o[T]=null,(n||(n=[])).push(A));if(!n)continue;d==this.children&&(d=this.children.slice());let h=d[t+2].removeInner(n,i+1);h!=Qe?d[t+2]=h:(d.splice(t,3),t-=3)}if(e.length)for(let n,t=0;t<o.length;t++)if(n=o[t])for(let i=0;i<e.length;i++)e[i].eq(n,s)&&(e==this.local&&(e=this.local.slice()),e.splice(i--,1));return d==this.children&&e==this.local?this:e.length||d.length?new Ze(e,d):Qe}forChild(o,s){if(this==Qe)return this;if(s.isLeaf)return Ze.empty;let d,e;for(let i=0;i<this.children.length;i+=3)if(this.children[i]>=o){this.children[i]==o&&(d=this.children[i+2]);break}let t=o+1,n=t+s.content.size;for(let i=0;i<this.local.length;i++){let u=this.local[i];if(u.from<n&&u.to>t&&u.type instanceof Tn){let h=Math.max(t,u.from)-t,T=Math.min(n,u.to)-t;h<T&&(e||(e=[])).push(u.copy(h,T))}}if(e){let i=new Ze(e.sort(yn),Hn);return d?new An([i,d]):i}return d||Qe}eq(o){if(this==o)return!0;if(!(o instanceof Ze)||this.local.length!=o.local.length||this.children.length!=o.children.length)return!1;for(let s=0;s<this.local.length;s++)if(!this.local[s].eq(o.local[s]))return!1;for(let s=0;s<this.children.length;s+=3)if(this.children[s]!=o.children[s]||this.children[s+1]!=o.children[s+1]||!this.children[s+2].eq(o.children[s+2]))return!1;return!0}locals(o){return Wn(this.localsInner(o))}localsInner(o){if(this==Qe)return Hn;if(o.inlineContent||!this.local.some(Tn.is))return this.local;let s=[];for(let d=0;d<this.local.length;d++)this.local[d].type instanceof Tn||s.push(this.local[d]);return s}}Ze.empty=new Ze([],[]),Ze.removeOverlap=Wn;const Qe=Ze.empty;class An{constructor(o){this.members=o}map(o,s){const d=this.members.map(e=>e.map(o,s,kn));return An.from(d)}forChild(o,s){if(s.isLeaf)return Ze.empty;let d=[];for(let e=0;e<this.members.length;e++){let t=this.members[e].forChild(o,s);t!=Qe&&(t instanceof An?d=d.concat(t.members):d.push(t))}return An.from(d)}eq(o){if(!(o instanceof An)||o.members.length!=this.members.length)return!1;for(let s=0;s<this.members.length;s++)if(!this.members[s].eq(o.members[s]))return!1;return!0}locals(o){let s,d=!0;for(let e=0;e<this.members.length;e++){let t=this.members[e].localsInner(o);if(t.length)if(s){d&&(s=s.slice(),d=!1);for(let n=0;n<t.length;n++)s.push(t[n])}else s=t}return s?Wn(d?s:s.sort(yn)):Hn}static from(o){switch(o.length){case 0:return Qe;case 1:return o[0];default:return new An(o.every(s=>s instanceof Ze)?o:o.reduce((s,d)=>s.concat(d instanceof Ze?d:d.members),[]))}}}function so(r,o){if(!o||!r.length)return r;let s=[];for(let d=0;d<r.length;d++){let e=r[d];s.push(new un(e.from+o,e.to+o,e.type))}return s}function qn(r,o,s){if(o.isLeaf)return null;let d=s+o.nodeSize,e=null;for(let n,t=0;t<r.length;t++)(n=r[t])&&n.from>s&&n.to<d&&((e||(e=[])).push(n),r[t]=null);return e}function lo(r){let o=[];for(let s=0;s<r.length;s++)null!=r[s]&&o.push(r[s]);return o}function Yn(r,o,s,d){let e=[],t=!1;o.forEach((i,u)=>{let h=qn(r,i,u+s);if(h){t=!0;let T=Yn(h,i,s+u+1,d);T!=Qe&&e.push(u,u+i.nodeSize,T)}});let n=so(t?lo(r):r,-s).sort(yn);for(let i=0;i<n.length;i++)n[i].type.valid(o,n[i])||(d.onRemove&&d.onRemove(n[i].spec),n.splice(i--,1));return n.length||e.length?new Ze(n,e):Qe}function yn(r,o){return r.from-o.from||r.to-o.to}function Wn(r){let o=r;for(let s=0;s<o.length-1;s++){let d=o[s];if(d.from!=d.to)for(let e=s+1;e<o.length;e++){let t=o[e];if(t.from!=d.from){t.from<d.to&&(o==r&&(o=r.slice()),o[s]=d.copy(d.from,t.from),xo(o,e,d.copy(t.from,d.to)));break}t.to!=d.to&&(o==r&&(o=r.slice()),o[e]=t.copy(t.from,d.to),xo(o,e+1,t.copy(d.to,t.to)))}}return o}function xo(r,o,s){for(;o<r.length&&yn(s,r[o])>0;)o++;r.splice(o,0,s)}function ao(r){let o=[];return r.someProp("decorations",s=>{let d=s(r.state);d&&d!=Qe&&o.push(d)}),r.cursorWrapper&&o.push(Ze.create(r.state.doc,[r.cursorWrapper.deco])),An.from(o)}const Bo={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},No=j&&At<=11;class Ho{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(o){this.anchorNode=o.anchorNode,this.anchorOffset=o.anchorOffset,this.focusNode=o.focusNode,this.focusOffset=o.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(o){return o.anchorNode==this.anchorNode&&o.anchorOffset==this.anchorOffset&&o.focusNode==this.focusNode&&o.focusOffset==this.focusOffset}}class Uo{constructor(o,s){this.view=o,this.handleDOMChange=s,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Ho,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(d=>{for(let e=0;e<d.length;e++)this.queue.push(d[e]);j&&At<=11&&d.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),No&&(this.onCharData=d=>{this.queue.push({target:d.target,type:"characterData",oldValue:d.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Bo)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let o=this.observer.takeRecords();if(o.length){for(let s=0;s<o.length;s++)this.queue.push(o[s]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(mn(this.view)){if(this.suppressingSelectionUpdates)return le(this.view);if(j&&At<=11&&!this.view.state.selection.empty){let o=this.view.domSelectionRange();if(o.focusNode&&X(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(o){if(!o.focusNode)return!0;let d,s=new Set;for(let t=o.focusNode;t;t=g(t))s.add(t);for(let t=o.anchorNode;t;t=g(t))if(s.has(t)){d=t;break}let e=d&&this.view.docView.nearestDesc(d);return e&&e.ignoreMutation({type:"selection",target:3==d.nodeType?d.parentNode:d})?(this.setCurSelection(),!0):void 0}flush(){let{view:o}=this;if(!o.docView||this.flushingSoon>-1)return;let s=this.observer?this.observer.takeRecords():[];this.queue.length&&(s=this.queue.concat(s),this.queue.length=0);let d=o.domSelectionRange(),e=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(d)&&mn(o)&&!this.ignoreSelectionChange(d),t=-1,n=-1,i=!1,u=[];if(o.editable)for(let T=0;T<s.length;T++){let A=this.registerMutation(s[T],u);A&&(t=t<0?A.from:Math.min(A.from,t),n=n<0?A.to:Math.max(A.to,n),A.typeOver&&(i=!0))}if(St&&u.length>1){let T=u.filter(A=>"BR"==A.nodeName);if(2==T.length){let A=T[0],I=T[1];A.parentNode&&A.parentNode.parentNode==I.parentNode?I.remove():A.remove()}}let h=null;t<0&&e&&o.input.lastFocus>Date.now()-200&&Math.max(o.input.lastTouch,o.input.lastClick.time)<Date.now()-300&&Ct(d)&&(h=he(o))&&h.eq(M.Y1.near(o.state.doc.resolve(0),1))?(o.input.lastFocus=0,le(o),this.currentSelection.set(d),o.scrollToSelection()):(t>-1||e)&&(t>-1&&(o.docView.markDirty(t,n),function(r){if(!Ao.has(r)&&(Ao.set(r,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(r.dom).whiteSpace))){if(r.requiresGeckoHackNode=St,Do)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Do=!0}}(o)),this.handleDOMChange(t,n,i,u),o.docView&&o.docView.dirty?o.updateState(o.state):this.currentSelection.eq(d)||le(o),this.currentSelection.set(d))}registerMutation(o,s){if(s.indexOf(o.target)>-1)return null;let d=this.view.docView.nearestDesc(o.target);if("attributes"==o.type&&(d==this.view.docView||"contenteditable"==o.attributeName||"style"==o.attributeName&&!o.oldValue&&!o.target.getAttribute("style"))||!d||d.ignoreMutation(o))return null;if("childList"==o.type){for(let T=0;T<o.addedNodes.length;T++)s.push(o.addedNodes[T]);if(d.contentDOM&&d.contentDOM!=d.dom&&!d.contentDOM.contains(o.target))return{from:d.posBefore,to:d.posAfter};let e=o.previousSibling,t=o.nextSibling;if(j&&At<=11&&o.addedNodes.length)for(let T=0;T<o.addedNodes.length;T++){let{previousSibling:A,nextSibling:I}=o.addedNodes[T];(!A||Array.prototype.indexOf.call(o.addedNodes,A)<0)&&(e=A),(!I||Array.prototype.indexOf.call(o.addedNodes,I)<0)&&(t=I)}let n=e&&e.parentNode==o.target?P(e)+1:0,i=d.localPosFromDOM(o.target,n,-1),u=t&&t.parentNode==o.target?P(t):o.target.childNodes.length;return{from:i,to:d.localPosFromDOM(o.target,u,1)}}return"attributes"==o.type?{from:d.posAtStart-d.border,to:d.posAtEnd+d.border}:{from:d.posAtStart,to:d.posAtEnd,typeOver:o.target.nodeValue==o.oldValue}}}let Ao=new WeakMap,Do=!1;function So(r){let o=r.pmViewDesc;if(o)return o.parseRule();if("BR"==r.nodeName&&r.parentNode){if(Kt&&/^(ul|ol)$/i.test(r.parentNode.nodeName)){let s=document.createElement("div");return s.appendChild(document.createElement("li")),{skip:s}}if(r.parentNode.lastChild==r||Kt&&/^(tr|table)$/i.test(r.parentNode.nodeName))return{ignore:!0}}else if("IMG"==r.nodeName&&r.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Io=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function co(r,o,s){return Math.max(s.anchor,s.head)>o.content.size?null:nn(r,o.resolve(s.anchor),o.resolve(s.head))}function to(r,o,s){let d=r.depth,e=o?r.end():r.pos;for(;d>0&&(o||r.indexAfter(d)==r.node(d).childCount);)d--,e++,o=!1;if(s){let t=r.node(d).maybeChild(r.indexAfter(d));for(;t&&!t.isLeaf;)t=t.firstChild,e++}return e}class Ro{constructor(o,s){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Qn,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=s,this.state=s.state,this.directPlugins=s.plugins||[],this.directPlugins.forEach(go),this.dispatch=this.dispatch.bind(this),this.dom=o&&o.mount||document.createElement("div"),o&&(o.appendChild?o.appendChild(this.dom):"function"==typeof o?o(this.dom):o.mount&&(this.mounted=!0)),this.editable=Un(this),fo(this),this.nodeViews=mo(this),this.docView=a(this.state.doc,ho(this),ao(this),this.dom,this),this.domObserver=new Uo(this,(d,e,t,n)=>function(r,o,s,d,e){if(o<0){let ae=r.input.lastSelectionTime>Date.now()-50?r.input.lastSelectionOrigin:null,tn=he(r,ae);if(tn&&!r.state.selection.eq(tn)){if(Lt&&rt&&13===r.input.lastKeyCode&&Date.now()-100<r.input.lastKeyCodeTime&&r.someProp("handleKeyDown",Pn=>Pn(r,bt(13,"Enter"))))return;let Dn=r.state.tr.setSelection(tn);"pointer"==ae?Dn.setMeta("pointer",!0):"key"==ae&&Dn.scrollIntoView(),r.dispatch(Dn)}return}let t=r.state.doc.resolve(o),n=t.sharedDepth(s);o=t.before(n+1),s=r.state.doc.resolve(s).after(n+1);let A,I,i=r.state.selection,u=function(r,o,s){let h,{node:d,fromOffset:e,toOffset:t,from:n,to:i}=r.docView.parseRange(o,s),u=r.domSelectionRange(),T=u.anchorNode;if(T&&r.dom.contains(1==T.nodeType?T:T.parentNode)&&(h=[{node:T,offset:u.anchorOffset}],Ct(u)||h.push({node:u.focusNode,offset:u.focusOffset})),Lt&&8===r.input.lastKeyCode)for(let dt=t;dt>e;dt--){let Bt=d.childNodes[dt-1],Jt=Bt.pmViewDesc;if("BR"==Bt.nodeName&&!Jt){t=dt;break}if(!Jt||Jt.size)break}let A=r.state.doc,I=r.someProp("domParser")||l.aw.fromSchema(r.state.schema),U=A.resolve(n),Z=null,nt=I.parse(d,{topNode:U.parent,topMatch:U.parent.contentMatchAt(U.index()),topOpen:!0,from:e,to:t,preserveWhitespace:"pre"!=U.parent.type.whitespace||"full",findPositions:h,ruleFromNode:So,context:U});if(h&&null!=h[0].pos){let dt=h[0].pos,Bt=h[1]&&h[1].pos;null==Bt&&(Bt=dt),Z={anchor:dt+n,head:Bt+n}}return{doc:nt,sel:Z,from:n,to:i}}(r,o,s),h=r.state.doc,T=h.slice(u.from,u.to);8===r.input.lastKeyCode&&Date.now()-100<r.input.lastKeyCodeTime?(A=r.state.selection.to,I="end"):(A=r.state.selection.from,I="start"),r.input.lastKeyCode=null;let U=function(r,o,s,d,e){let t=r.findDiffStart(o,s);if(null==t)return null;let{a:n,b:i}=r.findDiffEnd(o,s+r.size,s+o.size);return"end"==e&&(d-=n+Math.max(0,t-Math.min(n,i))-t),n<t&&r.size<o.size?(t-=d<=t&&d>=n?t-d:0,i=t+(i-n),n=t):i<t&&(t-=d<=t&&d>=i?t-d:0,n=t+(n-i),i=t),{start:t,endA:n,endB:i}}(T.content,u.doc.content,u.from,A,I);if((pt&&r.input.lastIOSEnter>Date.now()-225||rt)&&e.some(ae=>1==ae.nodeType&&!Io.test(ae.nodeName))&&(!U||U.endA>=U.endB)&&r.someProp("handleKeyDown",ae=>ae(r,bt(13,"Enter"))))return void(r.input.lastIOSEnter=0);if(!U){if(!(d&&i instanceof M.Bs&&!i.empty&&i.$head.sameParent(i.$anchor))||r.composing||u.sel&&u.sel.anchor!=u.sel.head){if(u.sel){let ae=co(r,r.state.doc,u.sel);ae&&!ae.eq(r.state.selection)&&r.dispatch(r.state.tr.setSelection(ae))}return}U={start:i.from,endA:i.to,endB:i.to}}if(Lt&&r.cursorWrapper&&u.sel&&u.sel.anchor==r.cursorWrapper.deco.from&&u.sel.head==u.sel.anchor){let ae=U.endB-U.start;u.sel={anchor:u.sel.anchor+ae,head:u.sel.anchor+ae}}r.input.domChangeCount++,r.state.selection.from<r.state.selection.to&&U.start==U.endB&&r.state.selection instanceof M.Bs&&(U.start>r.state.selection.from&&U.start<=r.state.selection.from+2&&r.state.selection.from>=u.from?U.start=r.state.selection.from:U.endA<r.state.selection.to&&U.endA>=r.state.selection.to-2&&r.state.selection.to<=u.to&&(U.endB+=r.state.selection.to-U.endA,U.endA=r.state.selection.to)),j&&At<=11&&U.endB==U.start+1&&U.endA==U.start&&U.start>u.from&&" \xa0"==u.doc.textBetween(U.start-u.from-1,U.start-u.from+1)&&(U.start--,U.endA--,U.endB--);let Jt,Z=u.doc.resolveNoCache(U.start-u.from),nt=u.doc.resolveNoCache(U.endB-u.from),dt=h.resolve(U.start),Bt=Z.sameParent(nt)&&Z.parent.inlineContent&&dt.end()>=U.endA;if((pt&&r.input.lastIOSEnter>Date.now()-225&&(!Bt||e.some(ae=>"DIV"==ae.nodeName||"P"==ae.nodeName))||!Bt&&Z.pos<u.doc.content.size&&(Jt=M.Y1.findFrom(u.doc.resolve(Z.pos+1),1,!0))&&Jt.head==nt.pos)&&r.someProp("handleKeyDown",ae=>ae(r,bt(13,"Enter"))))return void(r.input.lastIOSEnter=0);if(r.state.selection.anchor>U.start&&function(r,o,s,d,e){if(!d.parent.isTextblock||s-o<=e.pos-d.pos||to(d,!0,!1)<e.pos)return!1;let t=r.resolve(o);if(t.parentOffset<t.parent.content.size||!t.parent.isTextblock)return!1;let n=r.resolve(to(t,!0,!0));return!(!n.parent.isTextblock||n.pos>s||to(n,!0,!1)<s)&&d.parent.content.cut(d.parentOffset).eq(n.parent.content)}(h,U.start,U.endA,Z,nt)&&r.someProp("handleKeyDown",ae=>ae(r,bt(8,"Backspace"))))return void(rt&&Lt&&r.domObserver.suppressSelectionUpdates());Lt&&rt&&U.endB==U.start&&(r.input.lastAndroidDelete=Date.now()),rt&&!Bt&&Z.start()!=nt.start()&&0==nt.parentOffset&&Z.depth==nt.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==U.endA&&(U.endB-=2,nt=u.doc.resolveNoCache(U.endB-u.from),setTimeout(()=>{r.someProp("handleKeyDown",function(ae){return ae(r,bt(13,"Enter"))})},20));let oe,Le,Ve,Zt=U.start,Xt=U.endA;if(Bt)if(Z.pos==nt.pos)j&&At<=11&&0==Z.parentOffset&&(r.domObserver.suppressSelectionUpdates(),setTimeout(()=>le(r),20)),oe=r.state.tr.delete(Zt,Xt),Le=h.resolve(U.start).marksAcross(h.resolve(U.endA));else if(U.endA==U.endB&&(Ve=function(r,o){let n,i,u,s=r.firstChild.marks,d=o.firstChild.marks,e=s,t=d;for(let T=0;T<d.length;T++)e=d[T].removeFromSet(e);for(let T=0;T<s.length;T++)t=s[T].removeFromSet(t);if(1==e.length&&0==t.length)i=e[0],n="add",u=T=>T.mark(i.addToSet(T.marks));else{if(0!=e.length||1!=t.length)return null;i=t[0],n="remove",u=T=>T.mark(i.removeFromSet(T.marks))}let h=[];for(let T=0;T<o.childCount;T++)h.push(u(o.child(T)));if(l.HY.from(h).eq(r))return{mark:i,type:n}}(Z.parent.content.cut(Z.parentOffset,nt.parentOffset),dt.parent.content.cut(dt.parentOffset,U.endA-dt.start()))))oe=r.state.tr,"add"==Ve.type?oe.addMark(Zt,Xt,Ve.mark):oe.removeMark(Zt,Xt,Ve.mark);else if(Z.parent.child(Z.index()).isText&&Z.index()==nt.index()-(nt.textOffset?0:1)){let ae=Z.parent.textBetween(Z.parentOffset,nt.parentOffset);if(r.someProp("handleTextInput",tn=>tn(r,Zt,Xt,ae)))return;oe=r.state.tr.insertText(ae,Zt,Xt)}if(oe||(oe=r.state.tr.replace(Zt,Xt,u.doc.slice(U.start-u.from,U.endB-u.from))),u.sel){let ae=co(r,oe.doc,u.sel);ae&&!(Lt&&rt&&r.composing&&ae.empty&&(U.start!=U.endB||r.input.lastAndroidDelete<Date.now()-100)&&(ae.head==Zt||ae.head==oe.mapping.map(Xt)-1)||j&&ae.empty&&ae.head==Zt)&&oe.setSelection(ae)}Le&&oe.ensureMarks(Le),r.dispatch(oe.scrollIntoView())}(this,d,e,t,n)),this.domObserver.start(),function(r){for(let o in Ie){let s=Ie[o];r.dom.addEventListener(o,r.input.eventHandlers[o]=d=>{Mn(r,d)&&!_n(r,d)&&(r.editable||!(d.type in Fe))&&s(r,d)},Vn[o]?{passive:!0}:void 0)}Kt&&r.dom.addEventListener("input",()=>null),bn(r)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let o=this._props;this._props={};for(let s in o)this._props[s]=o[s];this._props.state=this.state}return this._props}update(o){o.handleDOMEvents!=this._props.handleDOMEvents&&bn(this);let s=this._props;this._props=o,o.plugins&&(o.plugins.forEach(go),this.directPlugins=o.plugins),this.updateStateInner(o.state,s)}setProps(o){let s={};for(let d in this._props)s[d]=this._props[d];s.state=this.state;for(let d in o)s[d]=o[d];this.update(s)}updateState(o){this.updateStateInner(o,this._props)}updateStateInner(o,s){let d=this.state,e=!1,t=!1;o.storedMarks&&this.composing&&(io(this),t=!0),this.state=o;let n=d.plugins!=o.plugins||this._props.plugins!=s.plugins;if(n||this._props.plugins!=s.plugins||this._props.nodeViews!=s.nodeViews){let I=mo(this);(function(r,o){let s=0,d=0;for(let e in r){if(r[e]!=o[e])return!0;s++}for(let e in o)d++;return s!=d})(I,this.nodeViews)&&(this.nodeViews=I,e=!0)}(n||s.handleDOMEvents!=this._props.handleDOMEvents)&&bn(this),this.editable=Un(this),fo(this);let i=ao(this),u=ho(this),h=d.plugins==o.plugins||d.doc.eq(o.doc)?o.scrollToSelection>d.scrollToSelection?"to selection":"preserve":"reset",T=e||!this.docView.matchesNode(o.doc,u,i);(T||!o.selection.eq(d.selection))&&(t=!0);let A="preserve"==h&&t&&null==this.dom.style.overflowAnchor&&function(r){let d,e,o=r.dom.getBoundingClientRect(),s=Math.max(0,o.top);for(let t=(o.left+o.right)/2,n=s+1;n<Math.min(innerHeight,o.bottom);n+=5){let i=r.root.elementFromPoint(t,n);if(!i||i==r.dom||!r.dom.contains(i))continue;let u=i.getBoundingClientRect();if(u.top>=s-20){d=i,e=u.top;break}}return{refDOM:d,refTop:e,stack:Yt(r.dom)}}(this);if(t){this.domObserver.stop();let I=T&&(j||Lt)&&!this.composing&&!d.selection.empty&&!o.selection.empty&&function(r,o){let s=Math.min(r.$anchor.sharedDepth(r.head),o.$anchor.sharedDepth(o.head));return r.$anchor.start(s)!=o.$anchor.start(s)}(d.selection,o.selection);if(T){let U=Lt?this.trackWrites=this.domSelectionRange().focusNode:null;(e||!this.docView.update(o.doc,u,i,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=a(o.doc,u,i,this.dom,this)),U&&!this.trackWrites&&(I=!0)}I||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(r){let o=r.docView.domFromPos(r.state.selection.anchor,0),s=r.domSelectionRange();return X(o.node,o.offset,s.anchorNode,s.anchorOffset)}(this))?le(this,I):(Cn(this,o.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(d),"reset"==h?this.dom.scrollTop=0:"to selection"==h?this.scrollToSelection():A&&function({refDOM:r,refTop:o,stack:s}){let d=r?r.getBoundingClientRect().top:0;zt(s,0==d?0:d-o)}(A)}scrollToSelection(){let o=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",s=>s(this)))if(this.state.selection instanceof M.qv){let s=this.docView.domAfterPos(this.state.selection.from);1==s.nodeType&&kt(this,s.getBoundingClientRect(),o)}else kt(this,this.coordsAtPos(this.state.selection.head,1),o)}destroyPluginViews(){let o;for(;o=this.pluginViews.pop();)o.destroy&&o.destroy()}updatePluginViews(o){if(o&&o.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let s=0;s<this.pluginViews.length;s++){let d=this.pluginViews[s];d.update&&d.update(this,o)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let s=0;s<this.directPlugins.length;s++){let d=this.directPlugins[s];d.spec.view&&this.pluginViews.push(d.spec.view(this))}for(let s=0;s<this.state.plugins.length;s++){let d=this.state.plugins[s];d.spec.view&&this.pluginViews.push(d.spec.view(this))}}}someProp(o,s){let e,d=this._props&&this._props[o];if(null!=d&&(e=s?s(d):d))return e;for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n].props[o];if(null!=i&&(e=s?s(i):i))return e}let t=this.state.plugins;if(t)for(let n=0;n<t.length;n++){let i=t[n].props[o];if(null!=i&&(e=s?s(i):i))return e}}hasFocus(){if(j){let o=this.root.activeElement;if(o==this.dom)return!0;if(!o||!this.dom.contains(o))return!1;for(;o&&this.dom!=o&&this.dom.contains(o);){if("false"==o.contentEditable)return!1;o=o.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(r){if(r.setActive)return r.setActive();if(ue)return r.focus(ue);let o=Yt(r);r.focus(null==ue?{get preventScroll(){return ue={preventScroll:!0},!0}}:void 0),ue||(ue=!1,zt(o,0))}(this.dom),le(this),this.domObserver.start()}get root(){let o=this._root;if(null==o)for(let s=this.dom.parentNode;s;s=s.parentNode)if(9==s.nodeType||11==s.nodeType&&s.host)return s.getSelection||(Object.getPrototypeOf(s).getSelection=()=>s.ownerDocument.getSelection()),this._root=s;return o||document}posAtCoords(o){return ve(this,o)}coordsAtPos(o,s=1){return Me(this,o,s)}domAtPos(o,s=0){return this.docView.domFromPos(o,s)}nodeDOM(o){let s=this.docView.descAt(o);return s?s.nodeDOM:null}posAtDOM(o,s,d=-1){let e=this.docView.posFromDOM(o,s,d);if(null==e)throw new RangeError("DOM position not inside the editor");return e}endOfTextblock(o,s){return function(r,o,s){return Te==o&&me==s?Ee:(Te=o,me=s,Ee="up"==s||"down"==s?function(r,o,s){let d=o.selection,e="up"==s?d.$from:d.$to;return Ue(r,o,()=>{let{node:t}=r.docView.domFromPos(e.pos,"up"==s?-1:1);for(;;){let i=r.docView.nearestDesc(t,!0);if(!i)break;if(i.node.isBlock){t=i.contentDOM||i.dom;break}t=i.dom.parentNode}let n=Me(r,e.pos,1);for(let i=t.firstChild;i;i=i.nextSibling){let u;if(1==i.nodeType)u=i.getClientRects();else{if(3!=i.nodeType)continue;u=B(i,0,i.nodeValue.length).getClientRects()}for(let h=0;h<u.length;h++){let T=u[h];if(T.bottom>T.top+1&&("up"==s?n.top-T.top>2*(T.bottom-n.top):T.bottom-n.bottom>2*(n.bottom-T.top)))return!1}}return!0})}(r,o,s):function(r,o,s){let{$head:d}=o.selection;if(!d.parent.isTextblock)return!1;let e=d.parentOffset,t=!e,n=e==d.parent.content.size,i=r.domSelection();return Be.test(d.parent.textContent)&&i.modify?Ue(r,o,()=>{let{focusNode:u,focusOffset:h,anchorNode:T,anchorOffset:A}=r.domSelectionRange(),I=i.caretBidiLevel;i.modify("move",s,"character");let U=d.depth?r.docView.domAfterPos(d.before()):r.dom,{focusNode:Z,focusOffset:nt}=r.domSelectionRange(),dt=Z&&!U.contains(1==Z.nodeType?Z:Z.parentNode)||u==Z&&h==nt;try{i.collapse(T,A),u&&(u!=T||h!=A)&&i.extend&&i.extend(u,h)}catch(Bt){}return null!=I&&(i.caretBidiLevel=I),dt}):"left"==s||"backward"==s?t:n}(r,o,s))}(this,s||this.state,o)}pasteHTML(o,s){return Bn(this,"",o,!1,s||new ClipboardEvent("paste"))}pasteText(o,s){return Bn(this,o,null,!0,s||new ClipboardEvent("paste"))}destroy(){!this.docView||(function(r){r.domObserver.stop();for(let o in r.input.eventHandlers)r.dom.removeEventListener(o,r.input.eventHandlers[o]);clearTimeout(r.input.composingTimeout),clearTimeout(r.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ao(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(o){return function(r,o){!_n(r,o)&&Ie[o.type]&&(r.editable||!(o.type in Fe))&&Ie[o.type](r,o)}(this,o)}dispatch(o){let s=this._props.dispatchTransaction;s?s.call(this,o):this.updateState(this.state.apply(o))}domSelectionRange(){return Kt&&11===this.root.nodeType&&function(r){let o=r.activeElement;for(;o&&o.shadowRoot;)o=o.shadowRoot.activeElement;return o}(this.dom.ownerDocument)==this.dom?function(r){let o;function s(u){u.preventDefault(),u.stopImmediatePropagation(),o=u.getTargetRanges()[0]}r.dom.addEventListener("beforeinput",s,!0),document.execCommand("indent"),r.dom.removeEventListener("beforeinput",s,!0);let d=o.startContainer,e=o.startOffset,t=o.endContainer,n=o.endOffset,i=r.domAtPos(r.state.selection.anchor);return X(i.node,i.offset,t,n)&&([d,e,t,n]=[t,n,d,e]),{anchorNode:d,anchorOffset:e,focusNode:t,focusOffset:n}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function ho(r){let o=Object.create(null);return o.class="ProseMirror",o.contenteditable=String(r.editable),o.translate="no",r.someProp("attributes",s=>{if("function"==typeof s&&(s=s(r.state)),s)for(let d in s)"class"==d&&(o.class+=" "+s[d]),"style"==d?o.style=(o.style?o.style+";":"")+s[d]:!o[d]&&"contenteditable"!=d&&"nodeName"!=d&&(o[d]=String(s[d]))}),[un.node(0,r.state.doc.content.size,o)]}function fo(r){if(r.markCursor){let o=document.createElement("img");o.className="ProseMirror-separator",o.setAttribute("mark-placeholder","true"),o.setAttribute("alt",""),r.cursorWrapper={dom:o,deco:un.widget(r.state.selection.head,o,{raw:!0,marks:r.markCursor})}}else r.cursorWrapper=null}function Un(r){return!r.someProp("editable",o=>!1===o(r.state))}function mo(r){let o=Object.create(null);function s(d){for(let e in d)Object.prototype.hasOwnProperty.call(o,e)||(o[e]=d[e])}return r.someProp("nodeViews",s),r.someProp("markViews",s),o}function go(r){if(r.spec.state||r.spec.filterTransaction||r.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}}}]);