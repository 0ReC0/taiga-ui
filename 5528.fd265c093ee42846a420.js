"use strict";(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[5528],{5528:(B,f,t)=>{t.r(f),t.d(f,{ExampleTuiEditorUploadFilesModule:()=>z});var T=t(12057),r=t(24751),h=t(33982),v=t(29851),d=t(48014),E=t(73879),u=t(3497),o=t(74788),U=t(88331),g=t(66596),x=t(57068),F=t(35758),Z=t(68939);function y(n){return e=>(n.loading$.next(!0),(0,F.D)(e.map(i=>n.upload(i))).pipe((0,Z.x)(()=>n.loading$.next(!1))))}var A=t(64762),I=t(26215),S=t(94402),M=t(88002),L=t(53585);let c=(()=>{class n{constructor(){this.loading$=new I.X(!1)}upload(i){const{host:l,expires:s,autoDelete:a}=L.N.fileIO,m=new FormData;return m.append("file",i,i.name),m.append("expires",s),m.append("autoDelete",a),(0,S.D)(fetch(l,{method:"POST",body:m}).then(p=>(0,A.mG)(this,void 0,void 0,function*(){return p.json()}))).pipe((0,M.U)(p=>({name:p.name,link:p.link})))}}return n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var D=t(23184),C=t(69303),O=t(20179);let J=(()=>{class n{constructor(i){this.fileIoService=i,this.builtInTools=[d.TuiEditorTool.Undo,d.TuiEditorTool.Link,d.TuiEditorTool.Attach],this.control=new r.NI("")}attach(i){i.forEach(l=>{var s,a;return null===(a=null===(s=this.wysiwyg)||void 0===s?void 0:s.editor)||void 0===a?void 0:a.setFileLink(l)})}}return n.\u0275fac=function(i){return new(i||n)(o.Y36(c))},n.\u0275cmp=o.Xpm({type:n,selectors:[["tui-editor-upload-files-example-1"]],viewQuery:function(i,l){if(1&i&&o.Gf(d.TuiEditorComponent,5),2&i){let s;o.iGM(s=o.CRH())&&(l.wysiwyg=s.first)}},features:[o._Bn([{provide:d.TUI_EDITOR_EXTENSIONS,useValue:[Promise.resolve().then(t.bind(t,2823)).then(({StarterKit:e})=>e),Promise.resolve().then(t.bind(t,84402)).then(({TextStyle:e})=>e),Promise.resolve().then(t.bind(t,82091)).then(({TuiLink:e})=>e),t.e(54058).then(t.bind(t,54058)).then(({TuiJumpAnchor:e})=>e),Promise.resolve().then(t.bind(t,93763)).then(({TuiFileLink:e})=>e)]},{provide:d.TUI_ATTACH_FILES_LOADER,deps:[c],useFactory:y}])],decls:10,vars:7,consts:[[3,"showLoader"],[1,"editor",3,"formControl","tools","fileAttached"],[3,"content"]],template:function(i,l){1&i&&(o.TgZ(0,"tui-loader",0),o.ALo(1,"async"),o.TgZ(2,"tui-editor",1),o.NdJ("fileAttached",function(a){return l.attach(a)}),o.qZA(),o.qZA(),o.TgZ(3,"h4"),o._uU(4,"HTML:"),o.qZA(),o._UZ(5,"tui-editor-socket",2),o.TgZ(6,"h4"),o._uU(7,"Text:"),o.qZA(),o.TgZ(8,"p"),o._uU(9),o.qZA()),2&i&&(o.Q6J("showLoader",!!o.lcZ(1,5,l.fileIoService.loading$)),o.xp6(2),o.Q6J("formControl",l.control)("tools",l.builtInTools),o.xp6(3),o.Q6J("content",l.control.value||""),o.xp6(4),o.Oqu(l.control.value))},directives:[D.k,C.a,r.JJ,r.oH,O.D],pipes:[T.Ov],styles:[".editor[_ngcontent-%COMP%]     .tui-editor-socket .ProseMirror{min-height:10rem}"],changeDetection:0}),n})(),N=(()=>{class n{constructor(){this.example1={TypeScript:t.e(18692).then(t.t.bind(t,18692,17)),HTML:t.e(70672).then(t.t.bind(t,70672,17)),LESS:t.e(22540).then(t.t.bind(t,22540,17)),"./filesio.service.ts":t.e(14614).then(t.t.bind(t,14614,17)),"./file-loader.ts":t.e(30954).then(t.t.bind(t,30954,17))}}}return n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["editor-upload-files"]],features:[o._Bn([{provide:d.TUI_EDITOR_EXTENSIONS,useValue:d.defaultEditorExtensions}])],decls:11,vars:1,consts:[["header","Editor","package","ADDON-EDITOR","type","components"],["tuiLink","","href","https://www.tiptap.dev/"],["tuiLink","","routerLink","/icon-set","fragment","sanitizer"],["id","upload-file","heading","Upload files","description","100 uploads per day, 2GB file size limit, files auto-deleted after 1 download",3,"content"]],template:function(i,l){1&i&&(o.TgZ(0,"tui-doc-page",0),o.TgZ(1,"p"),o._uU(2," Rich Text Editor based on "),o.TgZ(3,"a",1),o._uU(4," TipTap Editor "),o.qZA(),o._uU(5," for using with Angular forms. For safety reasons use a "),o.TgZ(6,"a",2),o._uU(7," sanitizer "),o.qZA(),o._uU(8," with this component. "),o.qZA(),o.TgZ(9,"tui-doc-example",3),o._UZ(10,"tui-editor-upload-files-example-1"),o.qZA(),o.qZA()),2&i&&(o.xp6(9),o.Q6J("content",l.example1))},directives:[U.q,g.V,h.yS,x.f,J],encapsulation:2,changeDetection:0}),n})(),z=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[T.ez,E.TuiActiveZoneModule,u.TuiSvgModule,u.TuiLinkModule,u.TuiHostedDropdownModule,u.TuiButtonModule,v.fV,r.u5,r.UX,d.TuiEditorModule,u.TuiLoaderModule,d.TuiEditorSocketModule,h.Bz.forChild((0,v.Ve)(N))]]}),n})()}}]);