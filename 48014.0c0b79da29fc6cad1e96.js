"use strict";var Qo=Object.defineProperty,Go=Object.defineProperties,Xo=Object.getOwnPropertyDescriptors,go=Object.getOwnPropertySymbols,$o=Object.prototype.hasOwnProperty,Zo=Object.prototype.propertyIsEnumerable,Yo=(Vt,yt,c)=>yt in Vt?Qo(Vt,yt,{enumerable:!0,configurable:!0,writable:!0,value:c}):Vt[yt]=c,qt=(Vt,yt)=>{for(var c in yt||(yt={}))$o.call(yt,c)&&Yo(Vt,c,yt[c]);if(go)for(var c of go(yt))Zo.call(yt,c)&&Yo(Vt,c,yt[c]);return Vt},_e=(Vt,yt)=>Go(Vt,Xo(yt)),jo=(Vt,yt)=>{var c={};for(var M in Vt)$o.call(Vt,M)&&yt.indexOf(M)<0&&(c[M]=Vt[M]);if(null!=Vt&&go)for(var M of go(Vt))yt.indexOf(M)<0&&Zo.call(Vt,M)&&(c[M]=Vt[M]);return c};(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[48014],{77361:(Vt,yt,c)=>{c.d(yt,{_:()=>b});var M=c(79765),l=c(74788);let b=(()=>{class S{constructor(){this.stateChange$=new M.xQ,this.valueChange$=new M.xQ}}return S.\u0275fac=function(it){return new(it||S)},S.\u0275dir=l.lG2({type:S}),S})()},97019:(Vt,yt,c)=>{c.d(yt,{h:()=>It});var M=c(64762),l=c(74788),b=c(68339),S=c(50170),g=c(1414),it=c(10200),N=c(33250),q=c(68874),et=c(24751),ft=c(52219),ut=c(12057),nt=c(65009),vt=c(10383),Ct=c(20933),At=c(35065),kt=c(63060),St=c(62733),Pt=c(48214),ht=c(11189),tt=c(91030);function W(bt,Bt){if(1&bt&&(l.TgZ(0,"button",7),l._uU(1),l.qZA()),2&bt){const Ht=Bt.$implicit;l.Q6J("value",Ht),l.xp6(1),l.hij(" ",Ht," ")}}function mt(bt,Bt){if(1&bt&&(l.TgZ(0,"tui-data-list",5),l.YNc(1,W,2,2,"button",6),l.qZA()),2&bt){const Ht=l.oxw();l.xp6(1),l.Q6J("ngForOf",Ht.modes)}}function j(bt,Bt){if(1&bt){const Ht=l.EpF();l.TgZ(0,"tui-primitive-textfield",8),l.NdJ("valueChange",function(pt){return l.CHM(Ht),l.oxw().onHexChange(pt)}),l._UZ(1,"input",9),l.qZA()}if(2&bt){const Ht=l.oxw();l.Q6J("textMask",Ht.hexMask)("tuiTextfieldLabelOutside",!0)("value",Ht.hex)}}function Dt(bt,Bt){if(1&bt){const Ht=l.EpF();l.TgZ(0,"tui-input-count",10),l.NdJ("ngModelChange",function(pt){l.CHM(Ht);const B=l.oxw();return B.onRgbChange(pt,B.color[1],B.color[2],B.color[3])}),l.qZA(),l.TgZ(1,"tui-input-count",10),l.NdJ("ngModelChange",function(pt){l.CHM(Ht);const B=l.oxw();return B.onRgbChange(B.color[0],pt,B.color[2],B.color[3])}),l.qZA(),l.TgZ(2,"tui-input-count",10),l.NdJ("ngModelChange",function(pt){l.CHM(Ht);const B=l.oxw();return B.onRgbChange(B.color[0],B.color[1],pt,B.color[3])}),l.qZA()}if(2&bt){const Ht=l.oxw();l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Ht.color[0]),l.xp6(1),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Ht.color[1]),l.xp6(1),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Ht.color[2])}}class It{constructor(){this.color=[0,0,0,1],this.colorChange=new l.vpe,this.hexMask={mask:({length:Bt})=>Array.from({length:Bt},()=>/\d|[a-f]|[A-F]/),guide:!1},this.modes=["HEX","RGB"],this.mode=this.modes[0]}get isHex(){return this.mode===this.modes[0]}get hex(){return(0,b.tuiRgbToHex)(this.color[0],this.color[1],this.color[2]).replace("#","")}get opacity(){return Math.round(100*this.color[3])}onHexChange(Bt){if(6!==Bt.length)return;const Ht=(0,b.tuiHexToRgb)(Bt);this.updateColor([Ht[0],Ht[1],Ht[2],this.color[3]])}onRgbChange(...Bt){this.updateColor(Bt)}updateColor(Bt){this.color=Bt,this.colorChange.emit(Bt)}}It.\u0275fac=function(Bt){return new(Bt||It)},It.\u0275cmp=l.Xpm({type:It,selectors:[["tui-color-edit"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:6,vars:8,consts:[["tuiTextfieldSize","m","tuiDropdownAlign","left","tuiDropdownLimitWidth","min",1,"t-select","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","ngModel","ngModelChange"],["size","s",4,"tuiDataList"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange",4,"ngIf","ngIfElse"],["rgb",""],["postfix","%","tuiTextfieldSize","m",1,"t-opacity","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"],["size","s"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange"],["tuiTextfield","","maxlength","6"],["tuiTextfieldSize","m",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"]],template:function(Bt,Ht){if(1&Bt&&(l.TgZ(0,"tui-select",0),l.NdJ("ngModelChange",function(pt){return Ht.mode=pt}),l.YNc(1,mt,2,1,"tui-data-list",1),l.qZA(),l.YNc(2,j,2,3,"tui-primitive-textfield",2),l.YNc(3,Dt,3,12,"ng-template",null,3,l.W1O),l.TgZ(5,"tui-input-count",4),l.NdJ("ngModelChange",function(pt){return Ht.onRgbChange(Ht.color[0],Ht.color[1],Ht.color[2],pt/100)}),l.qZA()),2&Bt){const Jt=l.MAs(4);l.Q6J("tuiTextfieldLabelOutside",!0)("ngModel",Ht.mode),l.xp6(2),l.Q6J("ngIf",Ht.isHex)("ngIfElse",Jt),l.xp6(3),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",100)("ngModel",Ht.opacity)}},directives:[S.u,g.O,it.s,N.Ek,q.x,et.JJ,et.On,ft.g,ut.O5,nt.E,vt.a,Ct.q,ut.sg,At.v,kt.y,St.B,Pt.n,ht.h,tt.M],styles:["[_nghost-%COMP%]{display:flex}.t-select[_ngcontent-%COMP%]{width:4.875rem}.t-opacity[_ngcontent-%COMP%]{width:4.275rem}"],changeDetection:0}),(0,M.gn)([(0,b.tuiDefaultProp)()],It.prototype,"color",void 0)},49289:(Vt,yt,c)=>{c.d(yt,{$:()=>N});var M=c(64762),l=c(74788),b=c(91211),S=c(68339),g=c(71424),it=c(65720);class N{constructor(et){this.sanitizer=et,this.colorChange=new l.vpe,this.point=[0,1],this.hue=0,this.opacity=1}set color(et){if(this.currentColor.every((vt,Ct)=>vt===et[Ct])&&et[3]===this.opacity)return;const[ft,ut,nt]=(0,S.tuiRgbToHsv)(et[0],et[1],et[2]);this.opacity=et[3],this.hue=ft/360,this.point=[ut,1-nt/255]}get currentColor(){return this.getCurrentColor(this.hue,this.point)}get base(){return`rgb(${(0,S.tuiHsvToRgb)(360*this.hue,1,255)})`}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(`linear-gradient(to right, rgba(${this.currentColor.join(",")}, 0), rgb(${this.currentColor.join(",")}))`)}onPointChange(et){this.point=et,this.updateColor()}onHueChange(et){this.hue=et,this.updateColor()}onOpacityChange(et){this.opacity=(0,S.tuiRound)(et,2),this.updateColor()}getCurrentColor(et,ft){return(0,S.tuiHsvToRgb)(360*et,ft[0],255*(1-ft[1]))}updateColor(){this.colorChange.emit([...this.currentColor,this.opacity])}}N.\u0275fac=function(et){return new(et||N)(l.Y36(b.H7))},N.\u0275cmp=l.Xpm({type:N,selectors:[["tui-color-picker"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:5,vars:7,consts:[[1,"t-flat",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_hue"],[1,"t-hue",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_opacity"],[1,"t-opacity",3,"value","valueChange"]],template:function(et,ft){1&et&&(l.TgZ(0,"tui-flat-picker",0),l.NdJ("valueChange",function(nt){return ft.onPointChange(nt)}),l.qZA(),l.TgZ(1,"div",1),l.TgZ(2,"tui-linear-picker",2),l.NdJ("valueChange",function(nt){return ft.onHueChange(nt)}),l.qZA(),l.qZA(),l.TgZ(3,"div",3),l.TgZ(4,"tui-linear-picker",4),l.NdJ("valueChange",function(nt){return ft.onOpacityChange(nt)}),l.qZA(),l.qZA()),2&et&&(l.Udp("background-color",ft.base),l.Q6J("value",ft.point),l.xp6(2),l.Q6J("value",ft.hue),l.xp6(1),l.Udp("background",ft.gradient),l.xp6(1),l.Q6J("value",ft.opacity))},directives:[g.J,it.P],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block}.t-flat[_ngcontent-%COMP%]{height:14rem;background:linear-gradient(rgba(0,0,0,0),#000000),linear-gradient(to right,#ffffff,rgba(255,255,255,0));margin-bottom:.25rem;overflow:hidden}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1rem 1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper_hue[_ngcontent-%COMP%]{background:#ff0000}.t-wrapper_opacity[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hue[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff0000,#ffff00,#00ff00,#00ffff,#0000ff,#ff00ff,#ff0000);border-radius:inherit;margin:0 .5rem}.t-opacity[_ngcontent-%COMP%]{border-radius:inherit;margin:0 .5rem}'],changeDetection:0}),(0,M.gn)([(0,S.tuiDefaultProp)()],N.prototype,"color",null),(0,M.gn)([S.tuiPure],N.prototype,"getCurrentColor",null)},23999:(Vt,yt,c)=>{c.d(yt,{s:()=>st});var M=c(64762),l=c(74788),b=c(91211),S=c(14309),g=c(27863),it=c(68339),N=c(62939),q=c(76189),et=c(12057),ft=c(49289),ut=c(34880),nt=c(20933),vt=c(35065),Ct=c(49472),At=c(219),kt=c(67446),St=c(29070),Pt=c(54255),ht=c(15491),tt=c(97019),W=c(39607),mt=c(5451);function j(J,Q){if(1&J&&l._UZ(0,"tui-svg",9),2&J){l.oxw();const ot=l.MAs(1);l.ekj("t-arrow_rotated",ot.open)}}function Dt(J,Q){1&J&&l._UZ(0,"tui-svg",14)}function It(J,Q){if(1&J){const ot=l.EpF();l.TgZ(0,"button",12),l.NdJ("keydown.enter.prevent",function(){const jt=l.CHM(ot).$implicit,oe=l.oxw(2),Wt=l.MAs(1);return oe.onModeSelect(jt,Wt)})("keydown.space.prevent",function(){const jt=l.CHM(ot).$implicit,oe=l.oxw(2),Wt=l.MAs(1);return oe.onModeSelect(jt,Wt)})("click",function(){const jt=l.CHM(ot).$implicit,oe=l.oxw(2),Wt=l.MAs(1);return oe.onModeSelect(jt,Wt)}),l._uU(1),l.YNc(2,Dt,1,0,"tui-svg",13),l.qZA()}if(2&J){const ot=Q.$implicit,wt=l.oxw(2);l.uIk("aria-checked",wt.isModeActive(ot)),l.xp6(1),l.hij(" ",ot," "),l.xp6(1),l.Q6J("ngIf",wt.isModeActive(ot))}}function bt(J,Q){if(1&J&&(l.TgZ(0,"tui-data-list",10),l.YNc(1,It,3,3,"button",11),l.qZA()),2&J){const ot=l.oxw();l.xp6(1),l.Q6J("ngForOf",ot.modes)}}function Bt(J,Q){if(1&J){const ot=l.EpF();l.TgZ(0,"button",20),l.NdJ("click",function(){const jt=l.CHM(ot).$implicit;return l.oxw(2).onDirectionChange(jt)}),l.qZA()}if(2&J){const ot=Q.$implicit,wt=l.oxw(2);l.ekj("t-direction_active",wt.isDirectionActive(ot)),l.Q6J("icon",wt.getIcon(ot))("tuiHint",ot)}}function Ht(J,Q){if(1&J){const ot=l.EpF();l.ynx(0),l._UZ(1,"hr",15),l.TgZ(2,"div",16),l.TgZ(3,"tui-linear-multi-picker",17),l.NdJ("valueChange",function(Zt){return l.CHM(ot),l.oxw().onStopsChange(Zt)})("indexChange",function(Zt){return l.CHM(ot),l.oxw().onIndexChange(Zt)}),l.qZA(),l.qZA(),l.TgZ(4,"div",18),l.YNc(5,Bt,1,4,"button",19),l.qZA(),l.BQk()}if(2&J){const ot=l.oxw();l.xp6(2),l.Udp("background",ot.gradient),l.xp6(1),l.Q6J("value",ot.stopsKeys),l.xp6(2),l.Q6J("ngForOf",ot.buttons)}}function Jt(J,Q){if(1&J){const ot=l.EpF();l.TgZ(0,"tui-color-edit",21),l.NdJ("colorChange",function(Zt){return l.CHM(ot),l.oxw().onColorChange(Zt)}),l.qZA()}if(2&J){const ot=l.oxw();l.Q6J("color",ot.color)}}function pt(J,Q){if(1&J){const ot=l.EpF();l.TgZ(0,"tui-palette",22),l.NdJ("selectedColor",function(Zt){return l.CHM(ot),l.oxw().onPalettePick(Zt)}),l.qZA()}if(2&J){const ot=l.oxw();l.Q6J("colors",ot.palette)}}const B=[0,0,0,0],rt=[[0,[0,0,0,1]],[1,[255,255,255,1]]],dt={"to top right":"tuiIconArrowUpRight","to right":"tuiIconArrowRight","to bottom right":"tuiIconArrowDownRight","to bottom":"tuiIconArrowDown","to bottom left":"tuiIconArrowDownLeft","to left":"tuiIconArrowLeft","to top left":"tuiIconArrowUpLeft","to top":"tuiIconArrowUp"};class st{constructor(Q,ot){this.sanitizer=Q,this.modes=ot,this.stops=new Map(rt),this.currentStop=0,this.direction="to bottom",this.colors=new Map,this.colorChange=new l.vpe,this.color=[0,0,0,1],this.currentMode=this.modes[0],this.buttons=["to top right","to right","to bottom right","to bottom","to bottom left","to left","to top left","to top"]}set colorSetter(Q){this.parse(Q)}get palette(){return this.filterPalette(this.colors,this.isGradient)}get stopsKeys(){return this.getStopsKeys(this.stops)}get currentColor(){return this.isGradient?this.getStop(this.currentStop):this.color}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(this.getGradient("to right"))}get isGradient(){return this.currentMode===this.modes[1]}getIcon(Q){return dt[Q]}isModeActive(Q){return this.currentMode===Q}isDirectionActive(Q){return this.direction===Q}onPalettePick(Q){this.updateColor(Q)}onDirectionChange(Q){this.direction=Q,this.updateColor(this.getGradient(Q))}onModeSelect(Q,ot){this.currentMode=Q,ot.open=!1,this.updateColor(Q===this.modes[0]?`rgba(${this.color.join(", ")})`:this.getGradient(this.direction))}onIndexChange(Q){this.currentStop=this.stopsKeys[Q]}onColorChange(Q){this.isGradient?(this.stops.set(this.currentStop,Q),this.updateColor(this.getGradient(this.direction))):this.updateColor(`rgba(${Q.join(", ")})`)}onStopsChange(Q){const ot=this.stopsKeys.find(Zt=>!Q.includes(Zt)),wt=Q.find(Zt=>!this.stopsKeys.includes(Zt));void 0===ot&&void 0!==wt&&this.addStop(wt),void 0!==ot&&void 0===wt&&this.removeStop(ot),void 0!==ot&&void 0!==wt&&this.replaceStop(ot,wt),this.updateColor(this.getGradient(this.direction))}getStopsKeys(Q){return Array.from(Q.keys())}filterPalette(Q,ot){const wt=new Map(Q);return wt.forEach((Zt,jt)=>{(Zt.startsWith("linear-gradient")&&!ot||!Zt.startsWith("linear-gradient")&&ot)&&wt.delete(jt)}),wt}updateColor(Q){this.colorChange.emit(Q)}getGradient(Q){return`linear-gradient(${Q}, ${[...this.stopsKeys].sort().map(ot=>`rgba(${this.getStop(ot).join(", ")}) ${100*ot}%`).join(", ")})`}getStop(Q){return this.stops.get(Q)||B}addStop(Q){const ot=this.stopsKeys.reduce((wt,Zt)=>Math.abs(Zt-Q)<Math.abs(wt-Q)?Zt:wt,this.stopsKeys[0]);this.stops.set(Q,this.getStop(ot)),this.stops=new Map(this.stops),this.currentStop=Q}removeStop(Q){this.stops.delete(Q),this.stops=new Map(this.stops),this.currentStop=this.stopsKeys[0]}replaceStop(Q,ot){const wt=this.getStop(Q);this.currentStop=ot,this.stops=new Map(this.stopsKeys.map(Zt=>Zt===Q?[ot,wt]:[Zt,this.getStop(Zt)]))}parse(Q){Q.startsWith("linear-gradient")?this.parseGradient(Q):this.parseColor(Q)}parseGradient(Q){if(Q===this.getGradient(this.direction))return;const ot=(0,g._N)((0,g.U5)(Q));this.currentMode=this.modes[1],this.direction=ot.side,this.currentStop=0,this.stops=new Map(ot.stops.length?ot.stops.map(({color:wt,position:Zt})=>[parseFloat(Zt)/100,(0,it.tuiParseColor)(wt)]):rt)}parseColor(Q){this.currentMode=this.modes[0],this.currentStop=0,this.color=(0,it.tuiParseColor)(Q)}}st.\u0275fac=function(Q){return new(Q||st)(l.Y36(b.H7),l.Y36(S.dj))},st.\u0275cmp=l.Xpm({type:st,selectors:[["tui-color-selector"]],inputs:{colors:"colors",colorSetter:["color","colorSetter"]},outputs:{colorChange:"colorChange"},decls:12,vars:7,consts:[[1,"t-select",3,"content"],["dropdown",""],["tuiButton","","appearance","","size","s","type","button",3,"iconRight"],["arrow",""],["menu",""],[4,"ngIf"],[3,"color","colorChange"],["tuiGroup","","class","t-edit",3,"color","colorChange",4,"ngIf"],["class","t-palette",3,"colors","selectedColor",4,"ngIf"],["src","tuiIconChevronDown",1,"t-arrow"],["role","menu","size","s",1,"t-menu"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click"],["src","tuiIconCheck","class","t-checkmark",4,"ngIf"],["src","tuiIconCheck",1,"t-checkmark"],[1,"t-hr"],[1,"t-wrapper"],[1,"t-gradient",3,"value","valueChange","indexChange"],[1,"t-buttons"],["tuiIconButton","","type","button","size","xs","appearance","","tuiHintDescribe","","class","t-direction",3,"t-direction_active","icon","tuiHint","click",4,"ngFor","ngForOf"],["tuiIconButton","","type","button","size","xs","appearance","","tuiHintDescribe","",1,"t-direction",3,"icon","tuiHint","click"],["tuiGroup","",1,"t-edit",3,"color","colorChange"],[1,"t-palette",3,"colors","selectedColor"]],template:function(Q,ot){if(1&Q&&(l.TgZ(0,"tui-hosted-dropdown",0,1),l.TgZ(2,"button",2),l._uU(3),l.qZA(),l.YNc(4,j,1,2,"ng-template",null,3,l.W1O),l.YNc(6,bt,2,1,"ng-template",null,4,l.W1O),l.qZA(),l.YNc(8,Ht,6,4,"ng-container",5),l.TgZ(9,"tui-color-picker",6),l.NdJ("colorChange",function(Zt){return ot.onColorChange(Zt)}),l.qZA(),l.YNc(10,Jt,1,1,"tui-color-edit",7),l.YNc(11,pt,1,1,"tui-palette",8)),2&Q){const wt=l.MAs(5),Zt=l.MAs(7);l.Q6J("content",Zt),l.xp6(2),l.Q6J("iconRight",wt),l.xp6(1),l.hij(" ",ot.currentMode," "),l.xp6(5),l.Q6J("ngIf",ot.isGradient),l.xp6(1),l.Q6J("color",ot.currentColor),l.xp6(1),l.Q6J("ngIf",!ot.isGradient),l.xp6(1),l.Q6J("ngIf",ot.palette.size)}},directives:[N.o,q.v,et.O5,ft.$,ut.P,nt.q,et.sg,vt.v,Ct.e,At.$,kt.D,St.x,Pt.t,ht.D,tt.h,W.g,mt.R],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block;width:22.6rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hr[_ngcontent-%COMP%]{height:1px;margin:0 0 0 -1px;border:none;background:var(--tui-base-03)}.t-gradient[_ngcontent-%COMP%]{margin:0 .5rem;border-radius:inherit}.t-select[_ngcontent-%COMP%]{margin:.75rem .5rem}.t-arrow[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-arrow_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.t-menu[_ngcontent-%COMP%]{width:11.25rem}.t-checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}.t-buttons[_ngcontent-%COMP%]{display:flex;padding:0 .75rem 1.25rem}.t-direction[_ngcontent-%COMP%]{color:var(--tui-text-02);margin:0 .375rem}.t-direction[_ngcontent-%COMP%]:hover, .t-direction_active[_ngcontent-%COMP%]{color:var(--tui-text-01);background:var(--tui-secondary-hover)}.t-edit[_ngcontent-%COMP%]{margin:1.25rem}.t-palette[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:inset 0 1px var(--tui-base-03)}'],changeDetection:0}),(0,M.gn)([(0,it.tuiDefaultProp)()],st.prototype,"colors",void 0),(0,M.gn)([(0,it.tuiRequiredSetter)()],st.prototype,"colorSetter",null),(0,M.gn)([it.tuiPure],st.prototype,"getStopsKeys",null),(0,M.gn)([it.tuiPure],st.prototype,"filterPalette",null)},71424:(Vt,yt,c)=>{c.d(yt,{J:()=>g});var M=c(64762),l=c(74788),b=c(62141),S=c(68339);class g{constructor(N){this.value=[0,0],this.valueChange=new l.vpe,N.subscribe(q=>{this.value=q,this.valueChange.emit([q[0],q[1]])})}get left(){return 100*this.value[0]}get top(){return 100*this.value[1]}}g.\u0275fac=function(N){return new(N||g)(l.Y36(b.i))},g.\u0275cmp=l.Xpm({type:g,selectors:[["tui-flat-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[l._Bn([S.TuiDestroyService,b.i])],decls:1,vars:4,consts:[[1,"t-circle"]],template:function(N,q){1&N&&l._UZ(0,"div",0),2&N&&l.Udp("left",q.left,"%")("top",q.top,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:-.5rem 0 0 -.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,M.gn)([(0,S.tuiDefaultProp)()],g.prototype,"value",void 0)},27050:(Vt,yt,c)=>{c.d(yt,{hR:()=>M.h,TD:()=>N,$v:()=>q.$,H9:()=>ut,sV:()=>nt.s,wl:()=>kt,Jd:()=>St.J,ui:()=>et,es:()=>Pt.e,GU:()=>Ct,P:()=>ht.P,g7:()=>ft,Rh:()=>tt.R,VM:()=>At});var M=c(97019),l=c(12057),b=c(24751),S=c(3497),g=c(18738),it=c(74788);let N=(()=>{class W{}return W.\u0275fac=function(j){return new(j||W)},W.\u0275mod=it.oAB({type:W}),W.\u0275inj=it.cJS({imports:[[l.ez,b.u5,g.TextMaskModule,g.TuiValueAccessorModule,g.TuiSelectModule,S.TuiPrimitiveTextfieldModule,S.TuiTextfieldControllerModule,S.TuiDropdownModule,g.TuiInputCountModule,S.TuiDataListModule]]}),W})();var q=c(49289);let et=(()=>{class W{}return W.\u0275fac=function(j){return new(j||W)},W.\u0275mod=it.oAB({type:W}),W.\u0275inj=it.cJS({imports:[[l.ez]]}),W})(),ft=(()=>{class W{}return W.\u0275fac=function(j){return new(j||W)},W.\u0275mod=it.oAB({type:W}),W.\u0275inj=it.cJS({imports:[[l.ez]]}),W})(),ut=(()=>{class W{}return W.\u0275fac=function(j){return new(j||W)},W.\u0275mod=it.oAB({type:W}),W.\u0275inj=it.cJS({imports:[[l.ez,et,ft]]}),W})();var nt=c(23999),vt=c(68339);let Ct=(()=>{class W{}return W.\u0275fac=function(j){return new(j||W)},W.\u0275mod=it.oAB({type:W}),W.\u0275inj=it.cJS({imports:[[l.ez]]}),W})(),At=(()=>{class W{}return W.\u0275fac=function(j){return new(j||W)},W.\u0275mod=it.oAB({type:W}),W.\u0275inj=it.cJS({imports:[[l.ez,S.TuiHintModule]]}),W})(),kt=(()=>{class W{}return W.\u0275fac=function(j){return new(j||W)},W.\u0275mod=it.oAB({type:W}),W.\u0275inj=it.cJS({imports:[[l.ez,S.TuiButtonModule,S.TuiHostedDropdownModule,ut,Ct,S.TuiHintModule,S.TuiSvgModule,S.TuiDataListModule,vt.TuiActiveZoneModule,N,S.TuiGroupModule,At]]}),W})();var St=c(71424),Pt=c(49472),ht=c(65720),tt=c(5451)},49472:(Vt,yt,c)=>{c.d(yt,{e:()=>N});var M=c(64762),l=c(74788),b=c(62141),S=c(68339),g=c(12057);function it(q,et){if(1&q){const ft=l.EpF();l.TgZ(0,"div",1),l.NdJ("mousedown",function(){const vt=l.CHM(ft).index;return l.oxw().onMouseDown(vt)})("dblclick",function(){const vt=l.CHM(ft).index;return l.oxw().onClick(vt)}),l.qZA()}2&q&&l.Udp("left",100*et.$implicit,"%")}class N{constructor(et){this.value=[0,1],this.valueChange=new l.vpe,this.indexChange=new l.vpe,this.index=NaN,et.subscribe(([ft])=>{this.onPicker(ft)})}onMouseUp(){this.index=NaN}onMouseDown(et){this.updateIndex(et)}onClick(et){this.value.length>2&&this.updateValue(this.value.filter((ft,ut)=>ut!==et))}onPicker(et){Number.isNaN(this.index)&&(this.updateIndex(this.value.length),this.value=[...this.value,0]),!this.value.some((ft,ut)=>ft===et&&ut!==this.index)&&this.updateValue(this.value.map((ft,ut)=>ut===this.index?et:ft))}updateIndex(et){this.index=et,this.indexChange.emit(et)}updateValue(et){this.value=et,this.valueChange.emit(et)}}N.\u0275fac=function(et){return new(et||N)(l.Y36(b.i))},N.\u0275cmp=l.Xpm({type:N,selectors:[["tui-linear-multi-picker"]],hostBindings:function(et,ft){1&et&&l.NdJ("mouseup",function(){return ft.onMouseUp()},!1,l.evT)},inputs:{value:"value"},outputs:{valueChange:"valueChange",indexChange:"indexChange"},features:[l._Bn([S.TuiDestroyService,b.i])],decls:1,vars:1,consts:[["class","t-circle",3,"left","mousedown","dblclick",4,"ngFor","ngForOf"],[1,"t-circle",3,"mousedown","dblclick"]],template:function(et,ft){1&et&&l.YNc(0,it,1,2,"div",0),2&et&&l.Q6J("ngForOf",ft.value)},directives:[g.sg],styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,M.gn)([(0,S.tuiDefaultProp)()],N.prototype,"value",void 0)},65720:(Vt,yt,c)=>{c.d(yt,{P:()=>g});var M=c(64762),l=c(74788),b=c(62141),S=c(68339);class g{constructor(N){this.value=0,this.valueChange=new l.vpe,N.subscribe(([q])=>{this.value=q,this.valueChange.emit(q)})}get left(){return 100*this.value}}g.\u0275fac=function(N){return new(N||g)(l.Y36(b.i))},g.\u0275cmp=l.Xpm({type:g,selectors:[["tui-linear-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[l._Bn([S.TuiDestroyService,b.i])],decls:1,vars:2,consts:[[1,"t-circle"]],template:function(N,q){1&N&&l._UZ(0,"div",0),2&N&&l.Udp("left",q.left,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,M.gn)([(0,S.tuiDefaultProp)()],g.prototype,"value",void 0)},5451:(Vt,yt,c)=>{c.d(yt,{R:()=>ut});var M=c(64762),l=c(74788),b=c(68339),S=c(12057),g=c(67446),it=c(29070),N=c(54255),q=c(15491),et=c(219);function ft(nt,vt){if(1&nt){const Ct=l.EpF();l.TgZ(0,"button",1),l.NdJ("click",function(){const St=l.CHM(Ct).$implicit;return l.oxw().selectedColor.emit(St.value)}),l.qZA()}if(2&nt){const Ct=vt.$implicit;l.Udp("background",Ct.value),l.Q6J("tuiHint",Ct.key)("tuiHintDescribe",Ct.key)("id",Ct.key)}}class ut{constructor(){this.colors=new Map,this.selectedColor=new l.vpe,this.originalOrder=(vt,Ct)=>0}}ut.\u0275fac=function(vt){return new(vt||ut)},ut.\u0275cmp=l.Xpm({type:ut,selectors:[["tui-palette"]],inputs:{colors:"colors"},outputs:{selectedColor:"selectedColor"},decls:2,vars:4,consts:[["type","button","class","t-button",3,"background","tuiHint","tuiHintDescribe","id","click",4,"ngFor","ngForOf"],["type","button",1,"t-button",3,"tuiHint","tuiHintDescribe","id","click"]],template:function(vt,Ct){1&vt&&(l.YNc(0,ft,1,5,"button",0),l.ALo(1,"keyvalue")),2&vt&&l.Q6J("ngForOf",l.xi3(1,1,Ct.colors,Ct.originalOrder))},directives:[S.sg,g.D,it.x,N.t,q.D,et.$],pipes:[S.Nd],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;padding:.875rem}.t-button[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;width:1.5625rem;height:1.5625rem;box-sizing:border-box;margin:.375rem;border-radius:var(--tui-radius-m);border:1px solid rgba(0,0,0,.08)}"],changeDetection:0}),(0,M.gn)([(0,b.tuiDefaultProp)()],ut.prototype,"colors",void 0)},45050:(Vt,yt,c)=>{c.d(yt,{l:()=>Ht});var M=c(64762),l=c(12057),b=c(74788),S=c(84614),g=c(14309),it=c(68339),N=c(87623),q=c(20986),et=c(24751),ft=c(34880),ut=c(76189),nt=c(66596),vt=c(3881),Ct=c(22613),At=c(98266);function kt(Jt,pt){1&Jt&&(b.ynx(0),b._uU(1,"Edit anchor"),b.BQk())}function St(Jt,pt){1&Jt&&(b.TgZ(0,"span"),b._uU(1,"Link to anchor"),b.qZA())}function Pt(Jt,pt){1&Jt&&(b.TgZ(0,"span"),b._uU(1,"URL"),b.qZA())}function ht(Jt,pt){if(1&Jt&&(b.YNc(0,St,2,0,"span",1),b.YNc(1,Pt,2,0,"ng-template",null,12,b.W1O)),2&Jt){const B=b.MAs(2),rt=b.oxw(2);b.Q6J("ngIf",rt.prefixIsHashMode)("ngIfElse",B)}}function tt(Jt,pt){if(1&Jt&&(b.ynx(0),b._uU(1),b.BQk()),2&Jt){const B=pt.ngIf,rt=b.oxw(2);b.xp6(1),b.hij(" ",rt.prefixIsHashMode?B.anchorExample:B.urlExample," ")}}function W(Jt,pt){if(1&Jt){const B=b.EpF();b.ynx(0),b.TgZ(1,"label",4),b.TgZ(2,"div",5),b.YNc(3,kt,2,0,"ng-container",1),b.YNc(4,ht,3,2,"ng-template",null,6,b.W1O),b.qZA(),b.TgZ(6,"div",7),b.TgZ(7,"div",8),b._uU(8),b.qZA(),b.TgZ(9,"tui-input-inline",9),b.NdJ("ngModelChange",function(dt){return b.CHM(B),b.oxw().url=dt})("input",function(dt){let J;return b.CHM(B),b.oxw().onChange(null==(J=dt.target)?null:J.value)})("keydown.prevent.enter",function(){return b.CHM(B),b.oxw().onSave()})("keydown.backspace",function(){return b.CHM(B),b.oxw().onBackspace()}),b.YNc(10,tt,2,1,"ng-container",3),b.ALo(11,"async"),b.qZA(),b.qZA(),b.qZA(),b.TgZ(12,"tui-svg",10),b.NdJ("click",function(){return b.CHM(B),b.oxw().onClear()}),b.qZA(),b.TgZ(13,"button",11),b.NdJ("click",function(){return b.CHM(B),b.oxw().onSave()}),b.qZA(),b.BQk()}if(2&Jt){const B=b.MAs(5),rt=b.oxw();b.xp6(3),b.Q6J("ngIf",rt.anchorMode)("ngIfElse",B),b.xp6(5),b.Oqu(rt.prefix),b.xp6(1),b.ekj("t-input_filled",rt.hasUrl),b.Q6J("ngModel",rt.url),b.xp6(1),b.Q6J("ngIf",b.lcZ(11,9,rt.texts$)),b.xp6(2),b.ekj("t-cleaner_hidden",!rt.hasUrl)}}function mt(Jt,pt){if(1&Jt){const B=b.EpF();b.TgZ(0,"a",13),b._uU(1),b.ALo(2,"tuiShortUrl"),b.qZA(),b.TgZ(3,"button",14),b.NdJ("click",function(){return b.CHM(B),b.oxw().onEdit()}),b.qZA(),b.TgZ(4,"button",15),b.NdJ("click",function(){return b.CHM(B),b.oxw().onRemove()}),b.qZA()}if(2&Jt){const B=b.oxw();b.Q6J("href",B.href,b.LSH),b.xp6(1),b.AsE(" ",B.anchorMode?"#":"","",b.lcZ(2,3,B.url)," ")}}function j(Jt,pt){if(1&Jt){const B=b.EpF();b.TgZ(0,"button",19),b.NdJ("click",function(){const st=b.CHM(B).$implicit;return b.oxw(2).setAnchor(st)}),b._uU(1),b.qZA()}if(2&Jt){const B=pt.$implicit;b.xp6(1),b.hij(" #",B," ")}}function Dt(Jt,pt){if(1&Jt&&(b.ynx(0),b._UZ(1,"hr",16),b.TgZ(2,"tui-scrollbar"),b.TgZ(3,"div",17),b.YNc(4,j,2,1,"button",18),b.ALo(5,"tuiFilterAnchors"),b.qZA(),b.qZA(),b.BQk()),2&Jt){const B=b.oxw();b.xp6(4),b.Q6J("ngForOf",b.Dn7(5,1,B.anchorIds,B.prefix,B.url))}}const It="#",bt="http://",Bt="https://";class Ht{constructor(pt,B,rt){this.documentRef=pt,this.texts$=B,this.editor=rt,this.isOnlyAnchorMode=this.detectAnchorMode(),this.addLink=new b.vpe,this.removeLink=new b.vpe,this.url=this.getHrefOrAnchorId(),this.edit=!this.url,this.prefix=this.makeDefaultPrefix(),this.anchorIds=this.getAllAnchorsIds()}set anchorMode(pt){this.isOnlyAnchorMode=pt,this.prefix=pt?It:this.makeDefaultPrefix()}get anchorMode(){return this.isOnlyAnchorMode}get prefixIsHashMode(){return this.prefix===It}get hasUrl(){return!!this.url}get href(){return`${this.prefix}${this.url}`}get showAnchorsList(){return!this.anchorMode&&this.edit&&this.anchorIds.length>0}get isViewMode(){return!this.edit}onSelectionChange(){this.isViewMode&&(this.url=this.getHrefOrAnchorId(),this.anchorMode=this.detectAnchorMode())}onMouseDown(pt){(0,it.tuiIsElement)(pt.target)&&!pt.target.matches("a, button, input")&&pt.preventDefault()}setAnchor(pt){this.url=pt,this.changePrefix(!0)}changePrefix(pt){this.prefix=pt?It:bt}onSave(){this.url?this.addLink.emit(this.href):this.removeLink.emit()}onBackspace(){this.url||(this.prefix=this.isOnlyAnchorMode?It:bt)}onEdit(){this.edit=!0}onRemove(){this.removeLink.emit()}onChange(pt){this.url=this.removePrefix(pt)}onClear(){this.url=""}makeDefaultPrefix(){var pt;const B=this.getAnchorElement();return B&&(!B.getAttribute("href")&&B.getAttribute("id")||(null===(pt=B.getAttribute("href"))||void 0===pt?void 0:pt.startsWith(It)))?It:bt}detectAnchorMode(){const pt=this.getAnchorElement();return!(null==pt?void 0:pt.href)&&!!(null==pt?void 0:pt.getAttribute("id"))}getFocusedParentElement(){var pt,B;return(null===(B=null===(pt=this.documentRef.getSelection())||void 0===pt?void 0:pt.focusNode)||void 0===B?void 0:B.parentElement)||null}getAnchorElement(){var pt;return(null===(pt=this.getFocusedParentElement())||void 0===pt?void 0:pt.closest("a"))||null}getHrefOrAnchorId(){const pt=this.getAnchorElement();return pt?this.removePrefix(pt.getAttribute("href")||pt.getAttribute("id")||""):this.url}removePrefix(pt){return pt.startsWith(bt)?(this.prefix=this.isOnlyAnchorMode?It:bt,pt.replace(bt,"")):pt.startsWith(Bt)?(this.prefix=this.isOnlyAnchorMode?It:Bt,pt.replace(Bt,"")):pt.startsWith(It)?(this.prefix=It,pt.replace(It,"")):pt}getAllAnchorsIds(){var pt;const B=Array.from(null!==(pt=this.editor.getOriginTiptapEditor().view.dom.querySelectorAll('[data-type="jump-anchor"]'))&&void 0!==pt?pt:[]);return Array.from(B).map(rt=>rt.getAttribute("id")||"").filter(Boolean)}}Ht.\u0275fac=function(pt){return new(pt||Ht)(b.Y36(l.K0),b.Y36(g.b$),b.Y36(S.$3))},Ht.\u0275cmp=b.Xpm({type:Ht,selectors:[["tui-edit-link"]],hostBindings:function(pt,B){1&pt&&b.NdJ("selectionchange",function(){return B.onSelectionChange()},!1,b.evT)("mousedown",function(dt){return B.onMouseDown(dt)})},inputs:{anchorMode:"anchorMode"},outputs:{addLink:"addLink",removeLink:"removeLink"},decls:5,vars:3,consts:[[1,"t-edit-link"],[4,"ngIf","ngIfElse"],["view",""],[4,"ngIf"],[1,"t-label"],[1,"t-label-properties"],["fullOptions",""],[1,"t-url"],[1,"t-prefix"],["tuiAutoFocus","",1,"t-input",3,"ngModel","ngModelChange","input","keydown.prevent.enter","keydown.backspace"],["src","tuiIconCloseLarge",1,"t-cleaner",3,"click"],["tuiIconButton","","type","button","size","s","title","Insert link","icon","tuiIconCheckCircleLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],["urlTitle",""],["tuiLink","","target","_blank",1,"t-link",3,"href"],["tuiIconButton","","type","button","size","s","title","Change link","icon","tuiIconEdit2Large","shape","rounded","appearance","icon",1,"t-button","t-edit-button",3,"click"],["tuiIconButton","","type","button","size","s","title","Remove link","icon","tuiIconUnlinkLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],[1,"t-hr"],[1,"t-anchor-list"],["type","button","class","t-anchor",3,"click",4,"ngFor","ngForOf"],["type","button",1,"t-anchor",3,"click"]],template:function(pt,B){if(1&pt&&(b.TgZ(0,"div",0),b.YNc(1,W,14,11,"ng-container",1),b.YNc(2,mt,5,5,"ng-template",null,2,b.W1O),b.qZA(),b.YNc(4,Dt,6,5,"ng-container",3)),2&pt){const rt=b.MAs(3);b.xp6(1),b.Q6J("ngIf",B.edit)("ngIfElse",rt),b.xp6(3),b.Q6J("ngIf",B.showAnchorsList)}},directives:[l.O5,N.l,q.k,et.JJ,et.On,ft.P,ut.v,nt.V,vt.I,l.sg],pipes:[l.Ov,Ct.X,At.b],styles:["[_nghost-%COMP%]{display:block;min-width:18.75rem}.t-edit-link[_ngcontent-%COMP%]{display:flex;min-height:4rem;align-items:center;padding-right:.75rem}.t-label[_ngcontent-%COMP%]{font:var(--tui-font-text-s);height:var(--tui-height-l);box-sizing:border-box;padding:.4375rem 1rem;min-width:12.5rem;max-width:25rem;width:100%}.t-label-properties[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:8.375rem;justify-content:space-between}.t-property_inactive[_ngcontent-%COMP%]{opacity:.5}.t-url[_ngcontent-%COMP%]{display:flex;font:var(--tui-font-text-m);color:var(--tui-text-02)}.t-input[_ngcontent-%COMP%]{flex:1}.t-input_filled[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-button[_ngcontent-%COMP%]{width:2rem;height:2rem;margin:0 .25rem;transition:background .2s}.t-edit-button[_ngcontent-%COMP%]{margin-left:auto}.t-link[_ngcontent-%COMP%]{margin:0 1rem}.t-cleaner[_ngcontent-%COMP%]{transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;color:var(--tui-base-06);cursor:pointer;margin-left:auto}.t-cleaner[_ngcontent-%COMP%]:hover{color:var(--tui-base-07)}.t-cleaner_hidden[_ngcontent-%COMP%]{visibility:hidden}.t-anchor-list[_ngcontent-%COMP%]{display:flex;max-height:12.5rem;flex-direction:column}.t-anchor[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;background:none;font-size:inherit;line-height:inherit;min-height:2.75rem;padding:.375rem .5rem;margin:.125rem .5rem;border-radius:var(--tui-radius-m);text-align:left}.t-anchor[_ngcontent-%COMP%]:hover{background:var(--tui-base-02);cursor:pointer}"],changeDetection:0}),(0,M.gn)([(0,it.tuiDefaultProp)()],Ht.prototype,"anchorMode",null)},71115:(Vt,yt,c)=>{c.d(yt,{lV:()=>M.l,Fu:()=>q,bL:()=>et.b,X:()=>ft.X});var M=c(45050),l=c(12057),b=c(24751),S=c(68339),g=c(3497),it=c(18738),N=c(74788);let q=(()=>{class ut{}return ut.\u0275fac=function(vt){return new(vt||ut)},ut.\u0275mod=N.oAB({type:ut}),ut.\u0275inj=N.cJS({imports:[[l.ez,b.u5,S.TuiAutoFocusModule,g.TuiButtonModule,g.TuiSvgModule,g.TuiLinkModule,it.TuiInputInlineModule,it.TuiToggleModule,g.TuiScrollbarModule]]}),ut})();var et=c(98266),ft=c(22613)},98266:(Vt,yt,c)=>{c.d(yt,{b:()=>l});var M=c(74788);let l=(()=>{class b{transform(g,it,N){return"#"===it?g.filter(q=>q!==N):g}}return b.\u0275fac=function(g){return new(g||b)},b.\u0275pipe=M.Yjl({name:"tuiFilterAnchors",type:b,pure:!0}),b})()},22613:(Vt,yt,c)=>{c.d(yt,{X:()=>g});var M=c(74788);let g=(()=>{class it{transform(q){return q.length<60?q:`${q.slice(0,Math.max(0,40))}...${q.slice(q.length-10)}`}}return it.\u0275fac=function(q){return new(q||it)},it.\u0275pipe=M.Yjl({name:"tuiShortUrl",type:it,pure:!0}),it})()},96570:(Vt,yt,c)=>{c.d(yt,{V:()=>ut});var M=c(74788),l=c(68339),b=c(25126),S=c(39953),g=c(12057);const it=function(){return[0,1]};function N(nt,vt){if(1&nt){const Ct=M.EpF();M.TgZ(0,"div",4),M.NdJ("tuiSizeChange",function(kt){return M.CHM(Ct),M.oxw().sizeChange.emit(kt)}),M.qZA()}2&nt&&M.Q6J("tuiResizer",M.DdM(1,it))}const q=function(nt){return[nt,0]},et=function(){return[1,0]},ft=["*"];let ut=(()=>{class nt{constructor(){this.autoHeight=!1,this.width=null,this.height=null,this.sizeChange=new M.vpe}get hostWidth(){return(0,l.tuiIsNumber)(this.width)?(0,l.tuiPx)(this.width):this.width}get hostHeight(){return this.autoHeight?null:(0,l.tuiIsNumber)(this.height)?(0,l.tuiPx)(this.height):this.height}}return nt.\u0275fac=function(Ct){return new(Ct||nt)},nt.\u0275cmp=M.Xpm({type:nt,selectors:[["tui-editor-resizable"]],hostVars:4,hostBindings:function(Ct,At){2&Ct&&M.Udp("width",At.hostWidth)("height",At.hostHeight)},inputs:{autoHeight:"autoHeight",width:"width",height:"height"},outputs:{sizeChange:"sizeChange"},ngContentSelectors:ft,decls:5,vars:8,consts:[["tuiResizeable","",1,"t-resizable"],[1,"t-handle","t-handle-left-side",3,"tuiResizer","tuiSizeChange"],["class","t-handle t-handle-bottom-side",3,"tuiResizer","tuiSizeChange",4,"ngIf"],[1,"t-handle","t-handle-right-side",3,"tuiResizer","tuiSizeChange"],[1,"t-handle","t-handle-bottom-side",3,"tuiResizer","tuiSizeChange"]],template:function(Ct,At){1&Ct&&(M.F$t(),M.TgZ(0,"div",0),M.Hsn(1),M.TgZ(2,"div",1),M.NdJ("tuiSizeChange",function(St){return At.sizeChange.emit(St)}),M.qZA(),M.YNc(3,N,1,2,"div",2),M.TgZ(4,"div",3),M.NdJ("tuiSizeChange",function(St){return At.sizeChange.emit(St)}),M.qZA(),M.qZA()),2&Ct&&(M.ekj("t-resizable-auto-height",At.autoHeight),M.xp6(2),M.Q6J("tuiResizer",M.VKq(5,q,-1)),M.xp6(1),M.Q6J("ngIf",!At.autoHeight),M.xp6(1),M.Q6J("tuiResizer",M.DdM(7,et)))},directives:[b.U,S.L,g.O5],styles:['[_nghost-%COMP%]{position:relative;display:inline-block;box-sizing:border-box}[_nghost-%COMP%]   .t-resizable[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]   .t-resizable-auto-height[_ngcontent-%COMP%]{height:auto!important}[_nghost-%COMP%]   iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}[_nghost-%COMP%]:hover   .t-handle[_ngcontent-%COMP%]:after{opacity:1}.t-handle[_ngcontent-%COMP%]{position:absolute;top:0;display:flex;width:.75rem;cursor:col-resize;justify-content:center;align-items:center;height:100%}.t-handle[_ngcontent-%COMP%]:after{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";width:50%;height:33%;box-sizing:border-box;border-radius:var(--tui-radius-m);background:var(--tui-base-08);border:1px solid var(--tui-base-03);opacity:0}.t-handle-left-side[_ngcontent-%COMP%]{left:0}.t-handle-bottom-side[_ngcontent-%COMP%]{top:unset;bottom:.3125rem;height:.95rem;width:100%}.t-handle-right-side[_ngcontent-%COMP%]{right:0}'],changeDetection:0}),nt})()},95110:(Vt,yt,c)=>{c.d(yt,{_3:()=>it,V_:()=>N.V,Sl:()=>et});var M=c(40400),l=c(68339),b=c(66682),S=c(46782),g=c(74788);let it=(()=>{class ft extends M.d{constructor(nt,vt){super(),this._height=0,this._width=0,(0,b.T)((0,l.tuiTypedFromEvent)(nt,"touchend"),(0,l.tuiTypedFromEvent)(nt,"mouseup")).pipe((0,S.R)(vt)).subscribe(()=>this.updateAttributes({width:this.width,height:this.height}))}get attrs(){var nt;return(null===(nt=this.node)||void 0===nt?void 0:nt.attrs)||{src:""}}get width(){return this._width||this.attrs.width||null}get height(){return this._height||this.attrs.height||null}}return ft.\u0275fac=function(nt){return new(nt||ft)(g.Y36(Document),g.Y36(l.TuiDestroyService))},ft.\u0275dir=g.lG2({type:ft,features:[g.qOj]}),ft})();var N=c(96570),q=c(12057);let et=(()=>{class ft{}return ft.\u0275fac=function(nt){return new(nt||ft)},ft.\u0275mod=g.oAB({type:ft}),ft.\u0275inj=g.cJS({imports:[[q.ez,l.TuiResizeModule,l.TuiResizerModule]]}),ft})()},20179:(Vt,yt,c)=>{c.d(yt,{D:()=>it});var M=c(12057),l=c(74788),b=c(82113),S=c(68339),g=c(3497);let it=(()=>{class N{constructor(et,ft,ut,nt,vt,Ct){this.elementRef=et,this.renderer=ft,this.sanitizer=ut,this.tuiSanitizer=nt,this.document=vt,this.editor=Ct}set content(et){this.renderer.setProperty(this.elementRef.nativeElement,"innerHTML",this.tuiSanitizer?this.tuiSanitizer.sanitize(l.q3G.HTML,et.replace(/colwidth/g,"width")):this.sanitizer.sanitize(l.q3G.HTML,et))}click(et){var ft,ut;if(this.editor||!(0,S.tuiIsElement)(et.target))return;const nt=(null===(ut=null===(ft=et.target)||void 0===ft?void 0:ft.closest("a"))||void 0===ut?void 0:ut.getAttribute("href"))||"";!nt.startsWith("#")||(this.document.location.hash=nt.replace("#",""),et.preventDefault())}}return N.\u0275fac=function(et){return new(et||N)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.Tiy),l.Y36(g.TUI_SANITIZER,8),l.Y36(M.K0),l.Y36(b.JU,8))},N.\u0275cmp=l.Xpm({type:N,selectors:[["tui-editor-socket"]],hostAttrs:[1,"tui-editor-socket"],hostBindings:function(et,ft){1&et&&l.NdJ("click",function(nt){return ft.click(nt)})},inputs:{content:"content"},decls:0,vars:0,template:function(et,ft){},styles:['.tui-editor-socket{display:block;margin:0;overflow:hidden;color:var(--tui-text-01);font:var(--tui-font-text-m)}.tui-editor-socket._preview-image img{cursor:pointer}.tui-editor-socket h1,.tui-editor-socket h2,.tui-editor-socket h3,.tui-editor-socket h4,.tui-editor-socket h5,.tui-editor-socket h6{word-break:break-word;line-height:normal}.tui-editor-socket a:not([data-type="jump-anchor"]){color:var(--tui-link);text-decoration:none;outline:none}.tui-editor-socket a:not([data-type="jump-anchor"]):hover{color:var(--tui-link-hover);text-decoration:underline}.tui-editor-socket a:not([data-type="jump-anchor"]):active{color:var(--tui-primary-active)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]{text-decoration:underline;-webkit-text-decoration-color:var(--tui-link);text-decoration-color:var(--tui-link)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:before{content:"#"}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:hover{color:var(--tui-link)}.tui-editor-socket .ProseMirror video,.tui-editor-socket .ProseMirror audio{pointer-events:none}.tui-editor-socket .tableWrapper,.tui-editor-socket .tui-table-wrapper{overflow-x:auto}.tui-editor-socket mark{background:unset;color:inherit}.tui-editor-socket .ProseMirror{min-height:5.375rem;padding:.2rem 1rem;outline:none;white-space:pre-wrap}.tui-editor-socket p:empty:after{content:" ";white-space:pre}.tui-editor-socket p:first-child{margin-top:0}.tui-editor-socket ul,.tui-editor-socket ol{list-style-type:none;margin:1rem 1rem 1rem 1.5rem;padding:0}.tui-editor-socket li{margin:1rem 0}.tui-editor-socket li p{display:inline;margin:0 auto;word-break:break-word}.tui-editor-socket ul li p{display:inline-block}.tui-editor-socket ul>li:before{content:"";display:inline-block;width:.5rem;height:.5rem;border-radius:100%;margin:.5rem .875rem .0625rem -1.375rem;background-color:var(--tui-primary);vertical-align:top;box-sizing:border-box}.tui-editor-socket li ul>li:before{background:none;border:.125rem solid var(--tui-primary)}.tui-editor-socket li ul>li>ul>li:before{background:var(--tui-primary);border-radius:0;width:.375rem;height:.375rem}.tui-editor-socket ol{counter-reset:item}.tui-editor-socket ol>li:before{content:counters(item,".") ".";width:1.5rem;margin:0 .75rem 0 -1.5rem;counter-increment:item;color:var(--tui-base-05);vertical-align:top}.tui-editor-socket pre{white-space:pre-wrap;word-break:break-word;border-radius:.25rem;margin:1rem 0;padding:.75rem 1rem;font-family:Courier,monospace;color:var(--tui-text-02);background:var(--tui-base-02)}.tui-editor-socket code{box-shadow:none}.tui-editor-socket pre+pre{margin-top:-1.8125rem;padding-top:0}.tui-editor-socket blockquote{margin:1.25rem 0 1.25rem 1.5rem;padding-left:1.0625rem;border-left:1px solid var(--tui-base-04)}.tui-editor-socket p{margin:1rem 0}.tui-editor-socket hr{border:none;border-top:1px solid var(--tui-base-03);margin:1rem 0}.tui-editor-socket table{border-collapse:collapse;table-layout:fixed;width:100%;margin:0;overflow:hidden}.tui-editor-socket table td{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word}.tui-editor-socket table th{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word;font-weight:bold;text-align:left;background-color:var(--tui-base-02);min-height:2rem}.tui-editor-socket table .column-resize-handle{position:absolute;right:-2px;top:0;bottom:-2px;width:4px;background-color:#adf;pointer-events:none}.tui-editor-socket table td>*{margin-top:0;margin-bottom:0}.tui-editor-socket table th>*{margin-top:0;margin-bottom:0}.tui-editor-socket .resize-cursor{cursor:ew-resize;cursor:col-resize}.tui-editor-socket table .tableWrapper{overflow-x:auto}.tui-editor-socket .selectedCell:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:var(--tui-selection);pointer-events:none}.tui-editor-socket font[face="Courier New"]{display:inline-block;padding:.25rem .5rem;border-radius:.25rem;background-color:#ecf1f7;word-break:break-word}.tui-editor-socket details{width:100%;border:1px solid var(--tui-base-04);border-radius:var(--tui-radius-l)}.tui-editor-socket summary{display:flex;align-items:center;min-height:3.5rem;width:100%;padding:0 1.25rem;box-sizing:border-box;border-radius:var(--tui-radius-l);pointer-events:none}.tui-editor-socket summary p{min-width:1px;margin:0}.tui-editor-socket summary::-webkit-details-marker{display:none}.tui-editor-socket details[open] summary{border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-editor-socket div[data-type=details-content]{padding:1.25rem;min-height:3rem;border:1px solid var(--tui-base-04);border-width:1px 0 0}.tui-editor-socket .details-wrapper{position:relative;display:flex}.tui-editor-socket .details-arrow{position:absolute;top:1.5rem;right:1.25rem;height:.575rem;width:.575rem;border:1px solid var(--tui-base-06);border-width:0 2px 2px 0;transform:rotate(45deg);transition:var(--tui-duration, .3s);-webkit-appearance:none;-moz-appearance:none;appearance:none;box-sizing:border-box;padding:0;background:none;cursor:pointer}.tui-editor-socket .details-wrapper_rendered .details-arrow{pointer-events:none}.tui-editor-socket .details-wrapper_rendered summary{transition:transform var(--tui-duration, .3s);cursor:pointer;pointer-events:auto}.tui-editor-socket .details-wrapper_rendered summary:hover{background:var(--tui-base-02)}.tui-editor-socket details[open]+.details-arrow{top:1.75rem;transform:rotate(225deg)}.t-editor-placeholder:before{content:attr(data-placeholder);float:left;color:var(--tui-base-05);pointer-events:none;height:0}.tui-group-node{display:flex;flex-direction:row}.tui-group-node:hover>.tui-group-pointer{pointer-events:auto;opacity:1}.tui-group-pointer{opacity:0;min-height:.8125rem;max-height:.8125rem;min-width:.8125rem;max-width:.8125rem;margin:.3125rem .3125rem 0 0;cursor:-webkit-grab;cursor:grab;background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="black" /></svg>\');background-repeat:no-repeat;background-size:contain;background-position:center}[data-mode=onDark] .tui-group-pointer{background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="white" /></svg>\')}\n'],encapsulation:2,changeDetection:0}),N})()},69303:(Vt,yt,c)=>{c.d(yt,{a:()=>st});var M=c(64762),l=c(12057),b=c(74788),S=c(24751),g=c(17406),it=c(19074),N=c(84614),q=c(14309),et=c(27863),ft=c(68339),ut=c(79089),nt=c(40939),vt=c(2697),Ct=c(17163),At=c(3881),kt=c(1433),St=c(9872),Pt=c(4997),ht=c(33250),tt=c(26072),W=c(9829),mt=c(82886),j=c(39088),Dt=c(20179),It=c(74982),bt=c(45050);function Bt(J,Q){if(1&J){const ot=b.EpF();b.TgZ(0,"tui-toolbar",9),b.NdJ("fileAttached",function(Zt){return b.CHM(ot),b.oxw(2).fileAttached.emit(Zt)}),b.Hsn(1,1),b.qZA()}if(2&J){const ot=b.oxw(2);b.Q6J("tools",ot.tools)("disabled",!ot.interactive)}}function Ht(J,Q){if(1&J&&(b.TgZ(0,"div",10),b._uU(1),b.qZA()),2&J){const ot=b.oxw(2);b.xp6(1),b.hij(" ",ot.exampleText," ")}}function Jt(J,Q){if(1&J){const ot=b.EpF();b.TgZ(0,"div",11),b.TgZ(1,"tui-editor-socket",12),b.NdJ("valueChange",function(Zt){return b.CHM(ot),b.oxw(2).onModelChange(Zt)})("stateChange",function(){return 0}),b.qZA(),b.qZA()}if(2&J){b.oxw();const ot=b.MAs(9),wt=b.oxw();b.Q6J("tuiDropdownSelection",wt.dropdownSelectionHandler)("tuiDropdown",ot),b.xp6(1),b.Q6J("value",wt.value)("editable",wt.interactive)}}function pt(J,Q){if(1&J){const ot=b.EpF();b.TgZ(0,"tui-edit-link",13,14),b.NdJ("addLink",function(Zt){b.CHM(ot);const jt=b.MAs(1),oe=b.oxw(2);return jt.anchorMode?oe.addAnchor(Zt):oe.addLink(Zt)})("removeLink",function(){b.CHM(ot);const Zt=b.MAs(1),jt=b.oxw(2);return Zt.anchorMode?jt.removeAnchor():jt.removeLink()}),b.qZA()}}function B(J,Q){if(1&J){const ot=b.EpF();b.TgZ(0,"div",1),b.NdJ("tuiActiveZoneChange",function(Zt){return b.CHM(ot),b.oxw().onActiveZone(Zt)}),b.TgZ(1,"div",2),b.YNc(2,Bt,2,2,"tui-toolbar",3),b.TgZ(3,"div",4),b.Hsn(4),b.qZA(),b.YNc(5,Ht,2,1,"div",5),b.qZA(),b.TgZ(6,"tui-scrollbar",6),b.YNc(7,Jt,2,4,"div",7),b.YNc(8,pt,2,0,"ng-template",null,8,b.W1O),b._UZ(10,"tui-editor-portal-host"),b.qZA(),b.qZA()}if(2&J){const ot=Q.tuiLet,wt=b.oxw();b.Q6J("readOnly",wt.readOnly)("disabled",wt.disabled)("focus",wt.computedFocused)("hover",wt.pseudoHover)("invalid",wt.computedInvalid),b.xp6(2),b.Q6J("ngIf",ot),b.xp6(1),b.ekj("t-placeholder_raised",wt.placeholderRaised),b.xp6(2),b.Q6J("ngIf",wt.hasExampleText),b.xp6(2),b.Q6J("ngIf",ot)}}const rt=["*",[["tools"]]];class st extends ft.AbstractTuiControl{constructor(Q,ot,wt,Zt,jt,oe){super(Q,ot),this.editorLoaded$=wt,this.editorService=Zt,this.contentProcessor=jt,this.documentRef=oe,this.exampleText="",this.tools=it.Db,this.fileAttached=new b.vpe,this.focused=!1,this.isSelectionLink=Wt=>this.currentFocusedNodeIsAnchor(Wt)&&(0,et.nC)(Wt)}get nativeFocusableElement(){var Q;return this.computedDisabled?null:(null===(Q=this.element)||void 0===Q?void 0:Q.nativeElement)||null}get dropdownSelectionHandler(){return this.focused?this.isSelectionLink:ft.ALWAYS_FALSE_HANDLER}get editor(){return this.editorService.getOriginTiptapEditor()?this.editorService:null}get placeholderRaised(){return this.computedFocused&&!this.readOnly||this.hasValue}get hasExampleText(){return!!this.exampleText&&this.computedFocused&&!this.hasValue&&!this.readOnly}writeValue(Q){var ot;if(Q===this.value)return;const wt=this.contentProcessor(Q||"");super.writeValue(wt),wt!==Q&&(null===(ot=this.control)||void 0===ot||ot.setValue(wt,{onlySelf:!1,emitEvent:!1,emitModelToViewChange:!1,emitViewToModelChange:!1}))}onActiveZone(Q){this.focused=Q,this.updateFocused(Q)}onModelChange(Q){this.updateValue(Q)}addAnchor(Q){var ot;null===(ot=this.editor)||void 0===ot||ot.setAnchor(Q)}removeAnchor(){var Q;null===(Q=this.editor)||void 0===Q||Q.removeAnchor()}addLink(Q){var ot,wt;null===(ot=this.editor)||void 0===ot||ot.selectClosest(),null===(wt=this.editor)||void 0===wt||wt.setLink(Q)}removeLink(){var Q;null===(Q=this.editor)||void 0===Q||Q.unsetLink()}ngOnDestroy(){var Q;null===(Q=this.editor)||void 0===Q||Q.destroy()}getFallbackValue(){return""}currentFocusedNodeIsAnchor(Q){var ot,wt,Zt;return!!(null===(wt=null===(ot=Q.startContainer.parentElement)||void 0===ot?void 0:ot.closest("a"))||void 0===wt?void 0:wt.contains((null===(Zt=this.documentRef.getSelection())||void 0===Zt?void 0:Zt.focusNode)||null))}get hasValue(){return!!this.value}}st.\u0275fac=function(Q){return new(Q||st)(b.Y36(S.a5,10),b.Y36(b.sBO),b.Y36(q.ZW),b.Y36(N.$3),b.Y36(q.F1),b.Y36(l.K0))},st.\u0275cmp=b.Xpm({type:st,selectors:[["tui-editor"]],viewQuery:function(Q,ot){if(1&Q&&(b.Gf(N.JU,5,b.SBq),b.Gf(g.M6,5)),2&Q){let wt;b.iGM(wt=b.CRH())&&(ot.element=wt.first),b.iGM(wt=b.CRH())&&(ot.toolbar=wt.first)}},inputs:{exampleText:"exampleText",tools:"tools"},outputs:{fileAttached:"fileAttached"},features:[b._Bn([(0,ft.tuiAsFocusableItemAccessor)(st),ut.m]),b.qOj],ngContentSelectors:["*","tools"],decls:2,vars:3,consts:[["tuiWrapper","","appearance","textfield","class","t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange",4,"tuiLet"],["tuiWrapper","","appearance","textfield",1,"t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange"],[1,"t-toolbar-wrapper"],[3,"tools","disabled","fileAttached",4,"ngIf"],[1,"t-placeholder"],["class","t-example-text",4,"ngIf"],["tuiEditorPortal","",1,"t-scrollbar"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown",4,"ngIf"],["dropdown",""],[3,"tools","disabled","fileAttached"],[1,"t-example-text"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown"],["tuiTiptapEditor","","spellcheck","false",1,"tui-editor-socket",3,"value","editable","valueChange","stateChange"],[3,"addLink","removeLink"],["link",""]],template:function(Q,ot){1&Q&&(b.F$t(rt),b.YNc(0,B,11,10,"div",0),b.ALo(1,"async")),2&Q&&b.Q6J("tuiLet",b.lcZ(1,1,ot.editorLoaded$))},directives:[nt.L,vt.o,Ct.e,l.O5,At.I,kt.A,St.d,Pt.M,ht.Ek,tt.t,W.V,mt.A,j.y,Dt.D,It.J,bt.l],pipes:[l.Ov],styles:["[_nghost-%COMP%]{position:relative;z-index:0;display:block;font:var(--tui-font-text-m);border-radius:var(--tui-radius-m)}.t-wrapper[_ngcontent-%COMP%]{display:flex;max-height:inherit;min-height:10rem;cursor:text;overflow:hidden;flex-direction:column;border-radius:inherit}.t-placeholder[_ngcontent-%COMP%]{transition-property:transform,font-size,color,letter-spacing;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;font:var(--tui-font-text-s);color:var(--tui-text-01);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:var(--tui-text-02);pointer-events:none;will-change:transform;transform:translateY(0);position:absolute;left:1rem;margin-top:1rem;width:95%;font-size:.9375rem}.t-placeholder_raised[_ngcontent-%COMP%]{transform:translateY(-.625rem)}[data-size=m][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font:var(--tui-font-text-xs);transform:translateY(-.5rem);letter-spacing:.025rem}._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], ._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill)}[data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], [data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill-night)}._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-03)}[data-size=l][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{font-size:.9375rem}[data-size=l][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font-size:.8156rem}[data-size=m]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01)}[data-mode=onDark][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}[data-size=m][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}@supports (-webkit-hyphens: none){.t-placeholder[_ngcontent-%COMP%]{will-change:unset;transition-property:transform,color,letter-spacing}}.t-placeholder_raised[_ngcontent-%COMP%]{width:110%}.t-example-text[_ngcontent-%COMP%]{position:absolute;left:1rem;margin-top:1.6rem;color:var(--tui-base-06);letter-spacing:normal;text-transform:none}.t-example-text_light[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}.t-example-text_dark[_ngcontent-%COMP%]{color:var(--tui-text-03)}.t-scrollbar[_ngcontent-%COMP%]{display:flex;max-height:inherit;border-top:1.625rem solid transparent;border-bottom:1px solid transparent;box-sizing:border-box}"],changeDetection:0}),(0,M.gn)([(0,ft.tuiDefaultProp)()],st.prototype,"exampleText",void 0),(0,M.gn)([(0,ft.tuiDefaultProp)()],st.prototype,"tools",void 0)},79089:(Vt,yt,c)=>{c.d(yt,{m:()=>ft});var M=c(74788),l=c(84614),b=c(14309),S=c(82298),g=c(9112),it=c(15257),N=c(88002),q=c(47349),et=c(73825);const ft=[{provide:b.F4,deps:[b.Wf],useFactory:ut=>{const nt=new S.t(1);return Promise.all(ut).then(vt=>nt.next(vt)),nt}},{provide:b.Y1,deps:[M.Qsj],useFactory:ut=>ut.createElement("div")},{provide:b.ZW,deps:[b.Y1,b.F4,b.bG],useFactory:(ut,nt,vt)=>(0,g.aj)([vt,nt]).pipe((0,it.q)(1),(0,N.U)(([Ct,At])=>new Ct({element:ut,extensions:At})),(0,q.d)({bufferSize:1,refCount:!0}))},l.$3,et.Y]},9872:(Vt,yt,c)=>{c.d(yt,{d:()=>b});var M=c(68339),l=c(74788);let b=(()=>{class S extends M.AbstractTuiPortalHostComponent{}return S.\u0275fac=function(){let g;return function(N){return(g||(g=l.n5z(S)))(N||S)}}(),S.\u0275cmp=l.Xpm({type:S,selectors:[["tui-editor-portal-host"]],features:[l._Bn([{provide:M.AbstractTuiPortalService,useExisting:M.TuiDropdownPortalService},{provide:M.AbstractTuiPortalHostComponent,useExisting:S}]),l.qOj],decls:2,vars:0,consts:[["viewContainer",""]],template:function(it,N){1&it&&l.GkF(0,null,0)},styles:["[_nghost-%COMP%]{position:relative;z-index:1;display:block;height:100%}"],changeDetection:0}),S})()},1433:(Vt,yt,c)=>{c.d(yt,{A:()=>g});var M=c(74788),l=c(68339),b=c(3497),S=c(73825);let g=(()=>{class it extends b.TuiRectAccessor{constructor(q){super(),this.elementRef=q,this.type="viewport"}getClientRect(){return this.elementRef.nativeElement.getBoundingClientRect()}}return it.\u0275fac=function(q){return new(q||it)(M.Y36(M.SBq))},it.\u0275dir=M.lG2({type:it,selectors:[["","tuiEditorPortal",""]],features:[M._Bn([{provide:l.TuiDropdownPortalService,useExisting:S.Y},(0,b.tuiAsViewport)(it)]),M.qOj]}),it})()},73825:(Vt,yt,c)=>{c.d(yt,{Y:()=>b});var M=c(68339),l=c(74788);let b=(()=>{class S extends M.AbstractTuiPortalService{}return S.\u0275fac=function(){let g;return function(N){return(g||(g=l.n5z(S)))(N||S)}}(),S.\u0275prov=l.Yz7({token:S,factory:S.\u0275fac}),S})()},19769:(Vt,yt,c)=>{c.d(yt,{j:()=>St});var M=c(64762),l=c(74788),b=c(24751),S=c(91211),g=c(27863),it=c(68339),N=c(3497),q=c(62939),et=c(63060),ft=c(62733),ut=c(3729),nt=c(23999),vt=c(17163);function Ct(Pt,ht){if(1&Pt&&l._UZ(0,"div",4),2&Pt){const tt=l.oxw();l.Udp("background",tt.background)}}function At(Pt,ht){if(1&Pt){const tt=l.EpF();l.TgZ(0,"tui-color-selector",5),l.NdJ("colorChange",function(mt){return l.CHM(tt),l.oxw().onValueChange(mt)}),l.qZA()}if(2&Pt){const tt=ht.$implicit,W=l.oxw();l.Q6J("tuiActiveZoneParent",tt)("colors",W.colors)("color",W.value)}}class St extends it.AbstractTuiControl{constructor(ht,tt,W){super(ht,tt),this.domSanitizer=W,this.colors=new Map,this.open=!1}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return!!this.dropdown&&this.dropdown.focused}get background(){return this.sanitize(this.value,this.domSanitizer)}onClick(){this.open=!this.open}onValueChange(ht){this.updateValue(ht)}onFocused(ht){this.updateFocused(ht)}getFallbackValue(){return"#000000"}sanitize(ht,tt){return ht.startsWith("linear-gradient(")?tt.bypassSecurityTrustStyle((0,g.CH)((0,g._N)((0,g.U5)(ht)))):ht}}St.\u0275fac=function(ht){return new(ht||St)(l.Y36(b.a5,10),l.Y36(l.sBO),l.Y36(S.H7))},St.\u0275cmp=l.Xpm({type:St,selectors:[["tui-input-color"]],viewQuery:function(ht,tt){if(1&ht&&(l.Gf(N.TuiPrimitiveTextfieldComponent,5),l.Gf(N.TuiHostedDropdownComponent,5)),2&ht){let W;l.iGM(W=l.CRH())&&(tt.textfield=W.first),l.iGM(W=l.CRH())&&(tt.dropdown=W.first)}},hostBindings:function(ht,tt){1&ht&&l.NdJ("click",function(){return tt.onClick()})},inputs:{colors:"colors"},features:[l._Bn([],[(0,N.tuiDropdownOptionsProvider)({maxHeight:600})]),l.qOj],ngContentSelectors:["*"],decls:7,vars:12,consts:[[1,"t-wrapper",3,"content","open","openChange"],[1,"t-textfield",3,"tuiTextfieldIconLeft","pseudoFocus","pseudoHover","pseudoActive","invalid","focusable","nativeId","disabled","readOnly","value","valueChange","focusedChange"],["color",""],["picker",""],[1,"t-color"],[3,"tuiActiveZoneParent","colors","color","colorChange"]],template:function(ht,tt){if(1&ht&&(l.F$t(),l.TgZ(0,"tui-hosted-dropdown",0),l.NdJ("openChange",function(mt){return tt.open=mt}),l.TgZ(1,"tui-primitive-textfield",1),l.NdJ("valueChange",function(mt){return tt.onValueChange(mt)})("focusedChange",function(mt){return tt.onFocused(mt)}),l.Hsn(2),l.qZA(),l.qZA(),l.YNc(3,Ct,1,2,"ng-template",null,2,l.W1O),l.YNc(5,At,1,3,"ng-template",null,3,l.W1O)),2&ht){const W=l.MAs(4),mt=l.MAs(6);l.Q6J("content",mt)("open",tt.open),l.xp6(1),l.Q6J("tuiTextfieldIconLeft",W)("pseudoFocus",tt.computedFocused)("pseudoHover",tt.pseudoHover)("pseudoActive",tt.pseudoActive)("invalid",tt.computedInvalid)("focusable",tt.focusable)("nativeId",tt.nativeId)("disabled",tt.disabled)("readOnly",tt.readOnly)("value",tt.value)}},directives:[q.o,et.y,ft.B,ut.aR,nt.s,vt.e],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-wrapper[_ngcontent-%COMP%]{display:flex;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-color[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-03-dark);border-radius:.125rem}"],changeDetection:0}),(0,M.gn)([(0,it.tuiDefaultProp)()],St.prototype,"colors",void 0),(0,M.gn)([it.tuiPure],St.prototype,"sanitize",null)},37924:(Vt,yt,c)=>{c.d(yt,{X:()=>Pt});var M=c(84614),l=c(14309),b=c(9112),S=c(88002),g=c(74788),it=c(12057),N=c(40939),q=c(62939),et=c(76189),ft=c(219),ut=c(67446),nt=c(29070),vt=c(54255),Ct=c(15491);function At(ht,tt){if(1&ht){const W=g.EpF();g.TgZ(0,"div",6),g.TgZ(1,"button",7),g.NdJ("click",function(){return g.CHM(W),g.oxw(3).editor.onAlign("left")}),g.qZA(),g.TgZ(2,"button",8),g.NdJ("click",function(){return g.CHM(W),g.oxw(3).editor.onAlign("center")}),g.qZA(),g.TgZ(3,"button",9),g.NdJ("click",function(){return g.CHM(W),g.oxw(3).editor.onAlign("right")}),g.qZA(),g.TgZ(4,"button",10),g.NdJ("click",function(){return g.CHM(W),g.oxw(3).editor.onAlign("justify")}),g.qZA(),g.qZA()}if(2&ht){const W=g.oxw().tuiLet,mt=g.oxw().ngIf;g.xp6(1),g.Q6J("pseudoActive",!(null==W||!W.left))("tuiHint",mt.justifyLeft),g.xp6(1),g.Q6J("pseudoActive",!(null==W||!W.center))("tuiHint",mt.justifyCenter),g.xp6(1),g.Q6J("pseudoActive",!(null==W||!W.right))("tuiHint",mt.justifyRight),g.xp6(1),g.Q6J("pseudoActive",!(null==W||!W.justify))("tuiHint",mt.justifyFull)}}function kt(ht,tt){if(1&ht&&(g.TgZ(0,"tui-hosted-dropdown",2,3),g._UZ(2,"button",4),g.YNc(3,At,5,8,"ng-template",null,5,g.W1O),g.qZA()),2&ht){const W=g.MAs(1),mt=g.MAs(4),j=g.oxw().ngIf;g.Q6J("content",mt),g.xp6(2),g.Q6J("tuiHint",j.justify)("pseudoActive",W.open)("focusable",W.open)}}function St(ht,tt){if(1&ht&&(g.ynx(0),g.YNc(1,kt,5,4,"tui-hosted-dropdown",1),g.ALo(2,"async"),g.BQk()),2&ht){const W=g.oxw();g.xp6(1),g.Q6J("tuiLet",g.lcZ(2,1,W.alignState$))}}let Pt=(()=>{class ht{constructor(W,mt){this.editor=W,this.texts$=mt,this.alignState$=(0,b.aj)([this.editor.isActive$({textAlign:"left"}),this.editor.isActive$({textAlign:"right"}),this.editor.isActive$({textAlign:"center"}),this.editor.isActive$({textAlign:"justify"})]).pipe((0,S.U)(([j,Dt,It,bt])=>({left:j,right:Dt,center:It,justify:bt})))}}return ht.\u0275fac=function(W){return new(W||ht)(g.Y36(M.$3),g.Y36(l.rf))},ht.\u0275cmp=g.Xpm({type:ht,selectors:[["tui-align-content"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["align",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["alignDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignCenterLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignRightLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignJustifyLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"]],template:function(W,mt){1&W&&(g.YNc(0,St,3,3,"ng-container",0),g.ALo(1,"async")),2&W&&g.Q6J("ngIf",g.lcZ(1,1,mt.texts$))},directives:[it.O5,N.L,q.o,et.v,ft.$,ut.D,nt.x,vt.t,Ct.D],pipes:[it.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),ht})()},15587:(Vt,yt,c)=>{c.d(yt,{T:()=>Pt});var M=c(84614),l=c(14309),b=c(88002),S=c(87519),g=c(74788),it=c(62939),N=c(76189),q=c(219),et=c(67446),ft=c(29070),ut=c(54255),nt=c(15491),vt=c(20933),Ct=c(12057),At=c(35065);function kt(ht,tt){if(1&ht){const W=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){const Dt=g.CHM(W).index;return g.oxw(2).onCode(!!Dt)}),g._uU(1),g.qZA()}if(2&ht){const W=tt.$implicit;g.xp6(1),g.hij(" ",W," ")}}function St(ht,tt){if(1&ht&&(g.TgZ(0,"tui-data-list"),g.YNc(1,kt,2,1,"button",4),g.ALo(2,"async"),g.qZA()),2&ht){const W=g.oxw();g.xp6(1),g.Q6J("ngForOf",g.lcZ(2,1,W.codeOptionsTexts$))}}let Pt=(()=>{class ht{constructor(W,mt,j){this.editor=W,this.texts$=mt,this.codeOptionsTexts$=j,this.hintText$=this.texts$.pipe((0,b.U)(Dt=>Dt.code)),this.insideCode$=this.editor.stateChange$.pipe((0,b.U)(()=>this.editor.isActive("code")||this.editor.isActive("codeBlock")),(0,S.x)())}onCode(W){W?this.editor.toggleCodeBlock():this.editor.toggleCode()}}return ht.\u0275fac=function(W){return new(W||ht)(g.Y36(M.$3),g.Y36(l.rf),g.Y36(l.Mr))},ht.\u0275cmp=g.Xpm({type:ht,selectors:[["tui-code"]],decls:7,vars:8,consts:[[3,"content"],["codes",""],["tuiIconButton","","type","button","size","s","icon","tuiIconCodeLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["codesDropdown",""],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(W,mt){if(1&W&&(g.TgZ(0,"tui-hosted-dropdown",0,1),g._UZ(2,"button",2),g.ALo(3,"async"),g.ALo(4,"async"),g.YNc(5,St,3,3,"ng-template",null,3,g.W1O),g.qZA()),2&W){const j=g.MAs(1),Dt=g.MAs(6);g.Q6J("content",Dt),g.xp6(2),g.Q6J("tuiHint",g.lcZ(3,4,mt.hintText$))("pseudoActive",j.open||g.lcZ(4,6,mt.insideCode$))("focusable",j.open)}},directives:[it.o,N.v,q.$,et.D,ft.x,ut.t,nt.D,vt.q,Ct.sg,At.v],pipes:[Ct.Ov],encapsulation:2,changeDetection:0}),ht})()},18832:(Vt,yt,c)=>{c.d(yt,{U:()=>Ct});var M=c(84614),l=c(14309),b=c(88002),S=c(87519),g=c(74788),it=c(12057),N=c(76189),q=c(219),et=c(67446),ft=c(29070),ut=c(54255),nt=c(15491);function vt(At,kt){if(1&At){const St=g.EpF();g.TgZ(0,"button",1),g.NdJ("click",function(){return g.CHM(St),g.oxw().removeDetails()}),g.ALo(1,"async"),g.qZA()}if(2&At){const St=kt.ngIf,Pt=g.oxw();g.Q6J("tuiHint",St.removeDetails)("focusable",!1)("disabled",!!g.lcZ(1,3,Pt.disabled$))}}let Ct=(()=>{class At{constructor(St,Pt){this.editor=St,this.texts$=Pt,this.disabled$=this.editor.stateChange$.pipe((0,b.U)(()=>!this.editor.isActive("details")),(0,S.x)())}removeDetails(){this.editor.removeDetails()}}return At.\u0275fac=function(St){return new(St||At)(g.Y36(M.$3),g.Y36(l.rf))},At.\u0275cmp=g.Xpm({type:At,selectors:[["tui-details-remove"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled","click"]],template:function(St,Pt){1&St&&(g.YNc(0,vt,2,5,"button",0),g.ALo(1,"async")),2&St&&g.Q6J("ngIf",g.lcZ(1,1,Pt.texts$))},directives:[it.O5,N.v,q.$,et.D,ft.x,ut.t,nt.D],pipes:[it.Ov],encapsulation:2,changeDetection:0}),At})()},50237:(Vt,yt,c)=>{c.d(yt,{y:()=>nt});var M=c(84614),l=c(14309),b=c(74788),S=c(12057),g=c(76189),it=c(219),N=c(67446),q=c(29070),et=c(54255),ft=c(15491);function ut(vt,Ct){if(1&vt){const At=b.EpF();b.TgZ(0,"button",1),b.NdJ("click",function(){return b.CHM(At),b.oxw().setDetails()}),b.qZA()}2&vt&&b.Q6J("tuiHint",Ct.ngIf.setDetails)("focusable",!1)}let nt=(()=>{class vt{constructor(At,kt){this.editor=At,this.texts$=kt}setDetails(){this.editor.setDetails()}}return vt.\u0275fac=function(At){return new(At||vt)(b.Y36(M.$3),b.Y36(l.rf))},vt.\u0275cmp=b.Xpm({type:vt,selectors:[["tui-details"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","click"]],template:function(At,kt){1&At&&(b.YNc(0,ut,1,2,"button",0),b.ALo(1,"async")),2&At&&b.Q6J("ngIf",b.lcZ(1,1,kt.texts$))},directives:[S.O5,g.v,it.$,N.D,q.x,et.t,ft.D],pipes:[S.Ov],encapsulation:2,changeDetection:0}),vt})()},84985:(Vt,yt,c)=>{c.d(yt,{m:()=>ht});var M=c(84614),l=c(14309),b=c(68339),S=c(88002),g=c(74788),it=c(62939),N=c(76189),q=c(219),et=c(67446),ft=c(29070),ut=c(54255),nt=c(15491),vt=c(20933),Ct=c(12057),At=c(35065);const kt=function(){return{}};function St(tt,W){if(1&tt){const mt=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){const It=g.CHM(mt).$implicit;return g.oxw(2).setFontOption(It)}),g.ALo(1,"lowercase"),g._uU(2),g.qZA()}if(2&tt){const mt=W.$implicit;g.Udp("font-family",mt.family)("font-size",mt.px,"px")("font-weight",mt.weight),g.Q6J("ngClass",(null==mt?null:mt.ngClass)||g.DdM(11,kt)),g.uIk("automation-id","tui_font__"+g.lcZ(1,9,mt.name||"")),g.xp6(2),g.hij(" ",mt.name," ")}}function Pt(tt,W){if(1&tt&&(g.TgZ(0,"tui-data-list"),g.YNc(1,St,3,12,"button",4),g.ALo(2,"async"),g.qZA()),2&tt){const mt=g.oxw();g.xp6(1),g.Q6J("ngForOf",g.lcZ(2,1,mt.fontsOptions$))}}let ht=(()=>{class tt{constructor(mt,j,Dt,It){this.options=mt,this.editor=j,this.texts$=Dt,this.fontOptionsTexts$=It,this.fontsOptions$=this.fontOptionsTexts$.pipe((0,S.U)(bt=>this.options.fontOptions(bt))),this.fontText$=this.texts$.pipe((0,S.U)(bt=>bt.font))}onClick({headingLevel:mt,px:j}){this.setFontOption({headingLevel:mt,px:j})}setFontOption({headingLevel:mt,px:j}){this.clearPreviousTextStyles(),mt?this.editor.setHeading(mt):this.editor.setParagraph({fontSize:(0,b.tuiPx)(j||0)})}clearPreviousTextStyles(){this.editor.removeEmptyTextStyle(),this.editor.toggleMark("textStyle")}}return tt.\u0275fac=function(mt){return new(mt||tt)(g.Y36(l.mJ),g.Y36(M.$3),g.Y36(l.rf),g.Y36(l.UN))},tt.\u0275cmp=g.Xpm({type:tt,selectors:[["tui-font-size"]],decls:6,vars:6,consts:[[3,"content"],["fonts",""],["tuiIconButton","","type","button","size","s","appearance","icon","icon","tuiIconFontLarge","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["fontsDropdown",""],["tuiOption","",3,"fontFamily","fontSize","fontWeight","ngClass","click",4,"ngFor","ngForOf"],["tuiOption","",3,"ngClass","click"]],template:function(mt,j){if(1&mt&&(g.TgZ(0,"tui-hosted-dropdown",0,1),g._UZ(2,"button",2),g.ALo(3,"async"),g.YNc(4,Pt,3,3,"ng-template",null,3,g.W1O),g.qZA()),2&mt){const Dt=g.MAs(1),It=g.MAs(5);g.Q6J("content",It),g.xp6(2),g.Q6J("tuiHint",g.lcZ(3,4,j.fontText$))("pseudoActive",Dt.open)("focusable",Dt.open)}},directives:[it.o,N.v,q.$,et.D,ft.x,ut.t,nt.D,vt.q,Ct.sg,At.v,Ct.mk],pipes:[Ct.Ov,Ct.i8],encapsulation:2,changeDetection:0}),tt})()},62976:(Vt,yt,c)=>{c.d(yt,{h:()=>j});var M=c(19074),l=c(84614),b=c(48699),S=c(14309),g=c(9112),it=c(88002),N=c(74788),q=c(12057),et=c(62939),ft=c(76189),ut=c(219),nt=c(67446),vt=c(29070),Ct=c(54255),At=c(15491);function kt(Dt,It){if(1&Dt){const bt=N.EpF();N.TgZ(0,"button",11),N.NdJ("click",function(){return N.CHM(bt),N.oxw(4).editor.toggleBold()}),N.qZA()}if(2&Dt){const bt=N.oxw(2).ngIf,Bt=N.oxw().ngIf;N.Q6J("tuiHint",Bt.bold)("pseudoActive",bt.bold)}}function St(Dt,It){if(1&Dt){const bt=N.EpF();N.TgZ(0,"button",12),N.NdJ("click",function(){return N.CHM(bt),N.oxw(4).editor.toggleItalic()}),N.qZA()}if(2&Dt){const bt=N.oxw(2).ngIf,Bt=N.oxw().ngIf;N.Q6J("tuiHint",Bt.italic)("pseudoActive",bt.italic)}}function Pt(Dt,It){if(1&Dt){const bt=N.EpF();N.TgZ(0,"button",13),N.NdJ("click",function(){return N.CHM(bt),N.oxw(4).editor.toggleUnderline()}),N.qZA()}if(2&Dt){const bt=N.oxw(2).ngIf,Bt=N.oxw().ngIf;N.Q6J("tuiHint",Bt.underline)("pseudoActive",bt.underline)}}function ht(Dt,It){if(1&Dt){const bt=N.EpF();N.TgZ(0,"button",14),N.NdJ("click",function(){return N.CHM(bt),N.oxw(4).editor.toggleStrike()}),N.qZA()}if(2&Dt){const bt=N.oxw(2).ngIf,Bt=N.oxw().ngIf;N.Q6J("tuiHint",Bt.strikeThrough)("pseudoActive",bt.strike)}}function tt(Dt,It){if(1&Dt&&(N.TgZ(0,"div",6),N.YNc(1,kt,1,2,"button",7),N.YNc(2,St,1,2,"button",8),N.YNc(3,Pt,1,2,"button",9),N.YNc(4,ht,1,2,"button",10),N.qZA()),2&Dt){const bt=N.oxw(3);N.xp6(1),N.Q6J("ngIf",bt.isEnabled(bt.TuiEditorTool.Bold)),N.xp6(1),N.Q6J("ngIf",bt.isEnabled(bt.TuiEditorTool.Italic)),N.xp6(1),N.Q6J("ngIf",bt.isEnabled(bt.TuiEditorTool.Underline)),N.xp6(1),N.Q6J("ngIf",bt.isEnabled(bt.TuiEditorTool.Strikethrough))}}function W(Dt,It){if(1&Dt&&(N.TgZ(0,"tui-hosted-dropdown",2,3),N._UZ(2,"button",4),N.YNc(3,tt,5,4,"ng-template",null,5,N.W1O),N.qZA()),2&Dt){const bt=It.ngIf,Bt=N.MAs(1),Ht=N.MAs(4),Jt=N.oxw().ngIf;N.Q6J("content",Ht),N.xp6(2),N.Q6J("tuiHint",Jt.fontStyle)("pseudoActive",Bt.open||bt.bold||bt.italic||bt.underline||bt.strike)("focusable",Bt.open)}}function mt(Dt,It){if(1&Dt&&(N.ynx(0),N.YNc(1,W,5,4,"tui-hosted-dropdown",1),N.ALo(2,"async"),N.BQk()),2&Dt){const bt=N.oxw();N.xp6(1),N.Q6J("ngIf",N.lcZ(2,1,bt.fontStyleState$))}}let j=(()=>{class Dt{constructor(bt,Bt){this.editor=bt,this.texts$=Bt,this.toolsSet=new Set(M.Db),this.TuiEditorTool=b._,this.fontStyleState$=(0,g.aj)([this.editor.isActive$("bold"),this.editor.isActive$("italic"),this.editor.isActive$("underline"),this.editor.isActive$("strike")]).pipe((0,it.U)(([Ht,Jt,pt,B])=>({bold:Ht,italic:Jt,underline:pt,strike:B})))}set enabledTools(bt){this.toolsSet=new Set(bt)}isEnabled(bt){return this.toolsSet.has(bt)}}return Dt.\u0275fac=function(bt){return new(bt||Dt)(N.Y36(l.$3),N.Y36(S.rf))},Dt.\u0275cmp=N.Xpm({type:Dt,selectors:[["tui-font-style"]],inputs:{enabledTools:"enabledTools"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"ngIf"],[3,"content"],["format",""],["tuiIconButton","","type","button","size","s","icon","tuiIconFormatLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__font-style-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["formatDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"]],template:function(bt,Bt){1&bt&&(N.YNc(0,mt,3,3,"ng-container",0),N.ALo(1,"async")),2&bt&&N.Q6J("ngIf",N.lcZ(1,1,Bt.texts$))},directives:[q.O5,et.o,ft.v,ut.$,nt.D,vt.x,Ct.t,At.D],pipes:[q.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),Dt})()},19762:(Vt,yt,c)=>{c.d(yt,{d:()=>vt});var M=c(84614),l=c(14309),b=c(88002),S=c(87519),g=c(74788),it=c(76189),N=c(219),q=c(67446),et=c(29070),ft=c(54255),ut=c(15491),nt=c(12057);let vt=(()=>{class Ct{constructor(kt,St){this.editor=kt,this.texts$=St,this.insertGroupText$=this.texts$.pipe((0,b.U)(Pt=>Pt.insertGroup)),this.removeGroupText$=this.texts$.pipe((0,b.U)(Pt=>Pt.removeGroup)),this.disabled$=this.editor.stateChange$.pipe((0,b.U)(()=>!this.editor.isActive("group")),(0,S.x)())}addGroup(){this.editor.setGroup()}removeGroup(){this.editor.removeGroup()}}return Ct.\u0275fac=function(kt){return new(kt||Ct)(g.Y36(M.$3),g.Y36(l.rf))},Ct.\u0275cmp=g.Xpm({type:Ct,selectors:[["tui-editor-group-tool"]],decls:5,vars:11,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconPlusLarge","appearance","icon","tuiHintDescribe","",3,"focusable","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconCloseLarge","appearance","icon","tuiHintDescribe","",3,"focusable","disabled","tuiHint","click"]],template:function(kt,St){1&kt&&(g.TgZ(0,"button",0),g.NdJ("click",function(){return St.addGroup()}),g.ALo(1,"async"),g.qZA(),g.TgZ(2,"button",1),g.NdJ("click",function(){return St.removeGroup()}),g.ALo(3,"async"),g.ALo(4,"async"),g.qZA()),2&kt&&(g.Q6J("focusable",!1)("tuiHint",g.lcZ(1,5,St.insertGroupText$)),g.xp6(2),g.Q6J("focusable",!1)("disabled",!!g.lcZ(3,7,St.disabled$))("tuiHint",g.lcZ(4,9,St.removeGroupText$)))},directives:[it.v,N.$,q.D,et.x,ft.t,ut.D],pipes:[nt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),Ct})()},7416:(Vt,yt,c)=>{c.d(yt,{U:()=>j});var M=c(64762),l=c(84614),b=c(14309),S=c(68339),g=c(88002),it=c(87519),N=c(74788),q=c(40939),et=c(62939),ft=c(33250),ut=c(76189),nt=c(219),vt=c(67446),Ct=c(29070),At=c(54255),kt=c(15491),St=c(12057),Pt=c(5451),ht=c(17163);function tt(Dt,It){if(1&Dt&&N._UZ(0,"div",6),2&Dt){const bt=N.oxw().tuiLet;N.Udp("background",bt)}}function W(Dt,It){if(1&Dt){const bt=N.EpF();N.TgZ(0,"tui-palette",7),N.NdJ("selectedColor",function(Ht){return N.CHM(bt),N.oxw(2).editor.setBackgroundColor(Ht)}),N.qZA()}if(2&Dt){const bt=It.$implicit,Bt=N.oxw(2);N.Q6J("tuiActiveZoneParent",bt)("colors",Bt.colors)}}function mt(Dt,It){if(1&Dt&&(N.TgZ(0,"tui-hosted-dropdown",1,2),N._UZ(2,"button",3),N.ALo(3,"async"),N.YNc(4,tt,1,2,"div",4),N.YNc(5,W,1,2,"ng-template",null,5,N.W1O),N.qZA()),2&Dt){const bt=It.tuiLet,Bt=N.MAs(1),Ht=N.MAs(6),Jt=N.oxw();N.Q6J("content",Ht)("tuiDropdownMaxHeight",999),N.xp6(2),N.Q6J("tuiHint",N.lcZ(3,6,Jt.backColorText$))("pseudoActive",Bt.open)("focusable",Bt.open),N.xp6(2),N.Q6J("ngIf",!Jt.isBlankColor(bt||""))}}class j{constructor(It,bt,Bt){this.editor=It,this.texts$=bt,this.defaultOptions=Bt,this.colors=this.defaultOptions.colors,this.backgroundColor$=this.editor.stateChange$.pipe((0,g.U)(()=>this.editor.getBackgroundColor()||this.defaultOptions.blankColor),(0,it.x)()),this.backColorText$=this.texts$.pipe((0,g.U)(Ht=>Ht.backColor))}isBlankColor(It){return It===this.defaultOptions.blankColor}}j.\u0275fac=function(It){return new(It||j)(N.Y36(l.$3),N.Y36(b.rf),N.Y36(b.mJ))},j.\u0275cmp=N.Xpm({type:j,selectors:[["tui-highlight-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["hilite",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconHiliteLarge","automation-id","toolbar__hilite-button","tuiHintDescribe","",1,"t-tool",3,"tuiHint","pseudoActive","focusable"],["class","t-plate",3,"background",4,"ngIf"],["hiliteDropdown",""],[1,"t-plate"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(It,bt){1&It&&(N.YNc(0,mt,7,8,"tui-hosted-dropdown",0),N.ALo(1,"async")),2&It&&N.Q6J("tuiLet",N.lcZ(1,1,bt.backgroundColor$))},directives:[q.L,et.o,ft.Ek,ut.v,nt.$,vt.D,Ct.x,At.t,kt.D,St.O5,Pt.R,ht.e],pipes:[St.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,M.gn)([(0,S.tuiDefaultProp)()],j.prototype,"colors",void 0)},93252:(Vt,yt,c)=>{c.d(yt,{Xp:()=>M.X,pu:()=>it,Tf:()=>N.T,P_:()=>q,yj:()=>et.y,y9:()=>ft,Un:()=>ut.U,dN:()=>kt.d,jP:()=>St,mK:()=>nt.m,p7:()=>vt,hr:()=>Ct.h,Zv:()=>At,UT:()=>Pt.U,XC:()=>tt,w2:()=>W.w,Ur:()=>mt,pH:()=>j.p,mp:()=>Dt,iN:()=>B.i,lT:()=>It.l,iA:()=>Ht,YH:()=>Jt.Y,er:()=>pt,_I:()=>B._,__:()=>rt,M8:()=>bt.M,kU:()=>Bt,G0:()=>dt.G,_t:()=>st});var M=c(37924),l=c(12057),b=c(68339),S=c(3497),g=c(74788);let it=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,S.TuiHostedDropdownModule,S.TuiButtonModule,S.TuiHintModule,b.TuiLetModule]]}),J})();var N=c(15587);let q=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,S.TuiHostedDropdownModule,S.TuiButtonModule,S.TuiHintModule,S.TuiDataListModule]]}),J})();var et=c(50237);let ft=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,S.TuiButtonModule,S.TuiHintModule]]}),J})();var ut=c(18832),nt=c(84985);let vt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,S.TuiHostedDropdownModule,S.TuiButtonModule,S.TuiHintModule,S.TuiDataListModule]]}),J})();var Ct=c(62976);let At=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,S.TuiHostedDropdownModule,S.TuiButtonModule,S.TuiHintModule]]}),J})();var kt=c(19762);let St=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,S.TuiButtonModule,S.TuiHintModule]]}),J})();var Pt=c(7416),ht=c(27050);let tt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,S.TuiHostedDropdownModule,S.TuiButtonModule,ht.VM,S.TuiHintModule,S.TuiDropdownModule,b.TuiActiveZoneModule,b.TuiLetModule]]}),J})();var W=c(13441);let mt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,S.TuiHostedDropdownModule,S.TuiButtonModule,S.TuiHintModule,b.TuiLetModule]]}),J})();var j=c(95558);let Dt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,S.TuiHostedDropdownModule,ht.VM,S.TuiButtonModule,S.TuiHintModule,b.TuiActiveZoneModule,S.TuiDropdownModule,b.TuiLetModule]]}),J})();var It=c(28962),bt=c(74549);let Bt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,b.TuiRepeatTimesModule]]}),J})(),Ht=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,S.TuiHostedDropdownModule,S.TuiDropdownModule,S.TuiButtonModule,S.TuiHintModule,Bt]]}),J})();var Jt=c(76965);let pt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,S.TuiButtonModule,S.TuiHintModule,b.TuiLetModule]]}),J})();var B=c(22063);let rt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,S.TuiHostedDropdownModule,S.TuiHintModule,S.TuiButtonModule,S.TuiDataListModule,b.TuiLetModule]]}),J})();var dt=c(10528);let st=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,S.TuiButtonModule,S.TuiHostedDropdownModule,S.TuiDropdownModule,S.TuiHintModule,ht.VM,b.TuiActiveZoneModule,b.TuiLetModule]]}),J})()},13441:(Vt,yt,c)=>{c.d(yt,{w:()=>Pt});var M=c(84614),l=c(14309),b=c(9112),S=c(88002),g=c(74788),it=c(12057),N=c(40939),q=c(62939),et=c(76189),ft=c(219),ut=c(67446),nt=c(29070),vt=c(54255),Ct=c(15491);function At(ht,tt){if(1&ht){const W=g.EpF();g.TgZ(0,"div",6),g.TgZ(1,"button",7),g.NdJ("click",function(){return g.CHM(W),g.oxw(3).editor.toggleUnorderedList()}),g.qZA(),g.TgZ(2,"button",8),g.NdJ("click",function(){return g.CHM(W),g.oxw(3).editor.toggleOrderedList()}),g.qZA(),g.TgZ(3,"button",9),g.NdJ("click",function(){return g.CHM(W),g.oxw(3).sinkListItem()}),g.qZA(),g.TgZ(4,"button",10),g.NdJ("click",function(){return g.CHM(W),g.oxw(3).liftListItem()}),g.qZA(),g.qZA()}if(2&ht){const W=g.oxw().tuiLet,mt=g.oxw().ngIf;g.xp6(1),g.Q6J("tuiHint",mt.unorderedList)("pseudoActive",!(null==W||!W.unordered)),g.xp6(1),g.Q6J("tuiHint",mt.orderedList)("pseudoActive",!(null==W||!W.ordered)),g.xp6(1),g.Q6J("tuiHint",mt.indent)("disabled",!(null!=W&&W.ordered||null!=W&&W.unordered)),g.xp6(1),g.Q6J("tuiHint",mt.outdent)("disabled",!(null!=W&&W.ordered||null!=W&&W.unordered))}}function kt(ht,tt){if(1&ht&&(g.TgZ(0,"tui-hosted-dropdown",2,3),g._UZ(2,"button",4),g.YNc(3,At,5,8,"ng-template",null,5,g.W1O),g.qZA()),2&ht){const W=tt.tuiLet,mt=g.MAs(1),j=g.MAs(4),Dt=g.oxw().ngIf;g.Q6J("content",j),g.xp6(2),g.Q6J("tuiHint",Dt.list)("pseudoActive",(null==mt?null:mt.open)||(null==W?null:W.unordered)||(null==W?null:W.ordered)||!1)("focusable",mt.open)}}function St(ht,tt){if(1&ht&&(g.ynx(0),g.YNc(1,kt,5,4,"tui-hosted-dropdown",1),g.ALo(2,"async"),g.BQk()),2&ht){const W=g.oxw();g.xp6(1),g.Q6J("tuiLet",g.lcZ(2,1,W.listState$))}}let Pt=(()=>{class ht{constructor(W,mt){this.editor=W,this.texts$=mt,this.listState$=(0,b.aj)([this.editor.isActive$("orderedList"),this.editor.isActive$("bulletList")]).pipe((0,S.U)(([j,Dt])=>({ordered:j,unordered:Dt})))}sinkListItem(){this.editor.sinkListItem()}liftListItem(){this.editor.liftListItem()}}return ht.\u0275fac=function(W){return new(W||ht)(g.Y36(M.$3),g.Y36(l.rf))},ht.\u0275cmp=g.Xpm({type:ht,selectors:[["tui-list-configs"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["list",""],["tuiIconButton","","type","button","size","s","icon","tuiIconListLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__ordering-list-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["listDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconListLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOLLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconIndentLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","disabled","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOutdentLarge","appearance","icon",1,"t-option",3,"tuiHint","disabled","click"]],template:function(W,mt){1&W&&(g.YNc(0,St,3,3,"ng-container",0),g.ALo(1,"async")),2&W&&g.Q6J("ngIf",g.lcZ(1,1,mt.texts$))},directives:[it.O5,N.L,q.o,et.v,ft.$,ut.D,nt.x,vt.t,Ct.D],pipes:[it.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),ht})()},95558:(Vt,yt,c)=>{c.d(yt,{p:()=>It});var M=c(64762),l=c(84614),b=c(14309),S=c(68339),g=c(9112),it=c(88002),N=c(87519),q=c(74788),et=c(40939),ft=c(62939),ut=c(33250),nt=c(76189),vt=c(219),Ct=c(67446),At=c(29070),kt=c(54255),St=c(15491),Pt=c(12057),ht=c(5451),tt=c(17163);function W(bt,Bt){if(1&bt&&q._UZ(0,"div",7),2&bt){const Ht=q.oxw(2).tuiLet;q.Udp("background",Ht)}}function mt(bt,Bt){if(1&bt){const Ht=q.EpF();q.TgZ(0,"tui-palette",8),q.NdJ("selectedColor",function(pt){q.CHM(Ht),q.oxw();const B=q.MAs(1);return q.oxw(2).setCellColor(pt),B.close()}),q.qZA()}if(2&bt){const Ht=Bt.$implicit,Jt=q.oxw(3);q.Q6J("tuiActiveZoneParent",Ht)("colors",Jt.colors)}}function j(bt,Bt){if(1&bt&&(q.TgZ(0,"tui-hosted-dropdown",2,3),q._UZ(2,"button",4),q.ALo(3,"async"),q.YNc(4,W,1,2,"div",5),q.YNc(5,mt,1,2,"ng-template",null,6,q.W1O),q.qZA()),2&bt){const Ht=Bt.tuiLet,Jt=q.MAs(1),pt=q.MAs(6),B=q.oxw().tuiLet,rt=q.oxw();q.Q6J("content",pt)("tuiDropdownMaxHeight",999)("canOpen",!!Ht),q.xp6(2),q.Q6J("tuiHint",q.lcZ(3,8,rt.colorText$))("pseudoActive",Jt.open)("focusable",Jt.open)("disabled",!Ht),q.xp6(2),q.Q6J("ngIf",!rt.isBlankColor(B||""))}}function Dt(bt,Bt){if(1&bt&&(q.ynx(0),q.YNc(1,j,7,10,"tui-hosted-dropdown",1),q.ALo(2,"async"),q.BQk()),2&bt){const Ht=q.oxw();q.xp6(1),q.Q6J("tuiLet",q.lcZ(2,1,Ht.isActive$))}}class It{constructor(Bt,Ht,Jt){this.defaultOptions=Bt,this.editor=Ht,this.texts$=Jt,this.colors=this.defaultOptions.colors,this.colorText$=this.texts$.pipe((0,it.U)(pt=>this.editor.isActive("group")&&pt.hiliteGroup||this.editor.isActive("table")&&pt.cellColor||"")),this.isActive$=(0,g.aj)([this.editor.isActive$("table"),this.editor.isActive$("group")]).pipe((0,it.U)(([pt,B])=>pt||B)),this.color$=this.editor.stateChange$.pipe((0,it.U)(()=>this.editor.getCellColor()||this.editor.getGroupColor()||this.defaultOptions.blankColor),(0,N.x)())}isBlankColor(Bt){return Bt===this.defaultOptions.blankColor}setCellColor(Bt){this.editor.isActive("group")?this.editor.setGroupHilite(Bt):this.editor.isActive("table")&&this.editor.setCellColor(Bt)}}It.\u0275fac=function(Bt){return new(Bt||It)(q.Y36(b.mJ),q.Y36(l.$3),q.Y36(b.rf))},It.\u0275cmp=q.Xpm({type:It,selectors:[["tui-table-cell-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen"],["colorSelect",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconPaintLarge","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable","disabled"],["class","t-plate t-plate_paint",3,"background",4,"ngIf"],["cellColorDropdown",""],[1,"t-plate","t-plate_paint"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(Bt,Ht){1&Bt&&(q.YNc(0,Dt,3,3,"ng-container",0),q.ALo(1,"async")),2&Bt&&q.Q6J("tuiLet",q.lcZ(1,1,Ht.color$))},directives:[et.L,ft.o,ut.Ek,nt.v,vt.$,Ct.D,At.x,kt.t,St.D,Pt.O5,ht.R,tt.e],pipes:[Pt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,M.gn)([(0,S.tuiDefaultProp)()],It.prototype,"colors",void 0)},28962:(Vt,yt,c)=>{c.d(yt,{l:()=>kt});var M=c(84614),l=c(14309),b=c(88002),S=c(74788),g=c(62939),it=c(33250),N=c(76189),q=c(219),et=c(67446),ft=c(29070),ut=c(54255),nt=c(15491),vt=c(74549),Ct=c(12057);function At(St,Pt){if(1&St){const ht=S.EpF();S.TgZ(0,"tui-table-size-selector",4),S.NdJ("onSelectSize",function(W){return S.CHM(ht),S.oxw().addTable(W)}),S.qZA()}}let kt=(()=>{class St{constructor(ht,tt){this.editor=ht,this.texts$=tt,this.insertTableText$=this.texts$.pipe((0,b.U)(W=>W.insertTable))}addTable({rows:ht,cols:tt}){this.editor.enter();const W=this.editor.state.selection.anchor;this.editor.enter(),this.editor.enter(),this.editor.setTextSelection(W),this.editor.insertTable(ht,tt)}}return St.\u0275fac=function(ht){return new(ht||St)(S.Y36(M.$3),S.Y36(l.rf))},St.\u0275cmp=S.Xpm({type:St,selectors:[["tui-table-create"]],decls:6,vars:5,consts:[["tuiDropdownAlign","left","tuiDropdownDirection","bottom",3,"content"],["table",""],["tuiIconButton","","type","button","size","s","icon","tuiIconTableLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable"],["tableDropdown",""],[3,"onSelectSize"]],template:function(ht,tt){if(1&ht&&(S.TgZ(0,"tui-hosted-dropdown",0,1),S._UZ(2,"button",2),S.ALo(3,"async"),S.qZA(),S.YNc(4,At,1,0,"ng-template",null,3,S.W1O)),2&ht){const W=S.MAs(1),mt=S.MAs(5);S.Q6J("content",mt),S.xp6(2),S.Q6J("tuiHint",S.lcZ(3,3,tt.insertTableText$))("focusable",W.open)}},directives:[g.o,it.Ek,N.v,q.$,et.D,ft.x,ut.t,nt.D,vt.M],pipes:[Ct.Ov],encapsulation:2,changeDetection:0}),St})()},76965:(Vt,yt,c)=>{c.d(yt,{Y:()=>St});var M=c(84614),l=c(14309),b=c(88002),S=c(87519),g=c(74788),it=c(40939),N=c(12057),q=c(76189),et=c(219),ft=c(67446),ut=c(29070),nt=c(54255),vt=c(15491);function Ct(Pt,ht){if(1&Pt){const tt=g.EpF();g.TgZ(0,"button",2),g.NdJ("click",function(){g.CHM(tt);const mt=g.oxw().tuiLet,j=g.oxw();return mt.mergeCells?j.mergeCells():j.splitCell()}),g.qZA()}if(2&Pt){const tt=ht.ngIf,W=g.oxw().tuiLet;g.Q6J("icon",W.mergeCells?"tuiIconTableMergeLarge":"tuiIconTableSplitLarge")("tuiHint",W.mergeCells?tt.mergeCells:tt.splitCells)("focusable",!1)("disabled",!W.mergeCells&&!W.splitCells)}}function At(Pt,ht){if(1&Pt&&(g.ynx(0),g.YNc(1,Ct,1,4,"button",1),g.ALo(2,"async"),g.BQk()),2&Pt){const tt=g.oxw();g.xp6(1),g.Q6J("ngIf",g.lcZ(2,1,tt.texts$))}}const kt=function(Pt,ht){return{mergeCells:Pt,splitCells:ht}};let St=(()=>{class Pt{constructor(tt,W){this.editor=tt,this.texts$=W,this.canMergeCells$=this.editor.stateChange$.pipe((0,b.U)(()=>this.editor.canMergeCells()),(0,S.x)()),this.canSplitCells$=this.editor.stateChange$.pipe((0,b.U)(()=>this.editor.canSplitCells()),(0,S.x)())}mergeCells(){this.editor.mergeCells()}splitCell(){this.editor.splitCell()}}return Pt.\u0275fac=function(tt){return new(tt||Pt)(g.Y36(M.$3),g.Y36(l.rf))},Pt.\u0275cmp=g.Xpm({type:Pt,selectors:[["tui-table-merge-cells"]],decls:3,vars:8,consts:[[4,"tuiLet"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"icon","tuiHint","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"icon","tuiHint","focusable","disabled","click"]],template:function(tt,W){1&tt&&(g.YNc(0,At,3,3,"ng-container",0),g.ALo(1,"async"),g.ALo(2,"async")),2&tt&&g.Q6J("tuiLet",g.WLB(5,kt,g.lcZ(1,1,W.canMergeCells$),g.lcZ(2,3,W.canSplitCells$)))},directives:[it.L,N.O5,q.v,et.$,ft.D,ut.x,nt.t,vt.D],pipes:[N.Ov],encapsulation:2,changeDetection:0}),Pt})()},22063:(Vt,yt,c)=>{c.d(yt,{_:()=>mt,i:()=>W});var M=c(84614),l=c(14309),b=c(88002),S=c(74788),g=c(40939),it=c(62939),N=c(76189),q=c(219),et=c(67446),ft=c(29070),ut=c(54255),nt=c(15491),vt=c(20933),Ct=c(12057),At=c(89786),kt=c(35065);function St(j,Dt){if(1&j&&(S.TgZ(0,"tui-hosted-dropdown",2,3),S._UZ(2,"button",4),S.ALo(3,"async"),S.qZA()),2&j){const It=Dt.tuiLet,bt=S.MAs(1),Bt=S.oxw(),Ht=S.MAs(3);S.Q6J("content",Ht)("canOpen",!!It),S.xp6(2),S.Q6J("tuiHint",S.lcZ(3,5,Bt.rowsColumnsManagingText$))("focusable",bt.open)("disabled",!It)}}function Pt(j,Dt){if(1&j){const It=S.EpF();S.TgZ(0,"button",7),S.NdJ("click",function(){const Ht=S.CHM(It).index,Jt=S.oxw().index;return S.oxw(2).onTableOption(2*Jt+Ht)}),S._uU(1),S.qZA()}if(2&j){const It=Dt.$implicit;S.xp6(1),S.hij(" ",It," ")}}function ht(j,Dt){if(1&j&&(S.TgZ(0,"tui-opt-group"),S.YNc(1,Pt,2,1,"button",6),S.qZA()),2&j){const It=Dt.$implicit;S.xp6(1),S.Q6J("ngForOf",It)}}function tt(j,Dt){if(1&j&&(S.TgZ(0,"tui-data-list"),S.YNc(1,ht,2,1,"tui-opt-group",5),S.ALo(2,"async"),S.qZA()),2&j){const It=S.oxw();S.xp6(1),S.Q6J("ngForOf",S.lcZ(2,1,It.tableCommandTexts$))}}var W=(()=>{return(j=W||(W={}))[j.InsertColumnBefore=0]="InsertColumnBefore",j[j.InsertColumnAfter=1]="InsertColumnAfter",j[j.InsertRowBefore=2]="InsertRowBefore",j[j.InsertRowAfter=3]="InsertRowAfter",j[j.DeleteColumn=4]="DeleteColumn",j[j.DeleteRow=5]="DeleteRow",W;var j})();let mt=(()=>{class j{constructor(It,bt,Bt){this.editor=It,this.texts$=bt,this.tableCommandTexts$=Bt,this.commandsRegistry={[W.InsertColumnAfter]:()=>this.editor.addColumnAfter(),[W.InsertColumnBefore]:()=>this.editor.addColumnBefore(),[W.InsertRowAfter]:()=>this.editor.addRowAfter(),[W.InsertRowBefore]:()=>this.editor.addRowBefore(),[W.DeleteColumn]:()=>this.editor.deleteColumn(),[W.DeleteRow]:()=>this.editor.deleteRow()},this.isActive$=this.editor.isActive$("table"),this.rowsColumnsManagingText$=this.texts$.pipe((0,b.U)(Ht=>Ht.rowsColumnsManaging))}onTableOption(It){this.commandsRegistry[It]()}}return j.\u0275fac=function(It){return new(It||j)(S.Y36(M.$3),S.Y36(l.rf),S.Y36(l.$i))},j.\u0275cmp=S.Xpm({type:j,selectors:[["tui-table-row-column-manager"]],decls:4,vars:3,consts:[[3,"content","canOpen",4,"tuiLet"],["tableOptionsDropdown",""],[3,"content","canOpen"],["tableCommand",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAddRowLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled"],[4,"ngFor","ngForOf"],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(It,bt){1&It&&(S.YNc(0,St,4,7,"tui-hosted-dropdown",0),S.ALo(1,"async"),S.YNc(2,tt,3,3,"ng-template",null,1,S.W1O)),2&It&&S.Q6J("tuiLet",S.lcZ(1,1,bt.isActive$))},directives:[g.L,it.o,N.v,q.$,et.D,ft.x,ut.t,nt.D,vt.q,Ct.sg,At.R,kt.v],pipes:[Ct.Ov],encapsulation:2,changeDetection:0}),j})()},74549:(Vt,yt,c)=>{c.d(yt,{M:()=>ft});var M=c(74788),l=c(62579),b=c(3497),S=c(36097);function g(ut,nt){if(1&ut){const vt=M.EpF();M.TgZ(0,"div",4),M.NdJ("mouseenter",function(At){const St=M.CHM(vt).$implicit,Pt=M.oxw().$implicit;return M.oxw().updateCurrentSize(St+1,Pt+1,At)})("click",function(){return M.CHM(vt),M.oxw(2).select()}),M.qZA()}if(2&ut){const vt=nt.$implicit,Ct=M.oxw().$implicit,At=M.oxw();M.ekj("t-cell_hovered",At.tableSelectHovered(vt,Ct))}}function it(ut,nt){if(1&ut&&(M.TgZ(0,"div",2),M.YNc(1,g,1,2,"div",3),M.qZA()),2&ut){const vt=M.oxw();M.xp6(1),M.Q6J("tuiRepeatTimesOf",vt.rowsNumber)}}let ft=(()=>{class ut{constructor(vt){this.windowRef=vt,this.selectSize=new M.vpe,this.onSelectSize=this.selectSize,this.tableSize={rows:1,cols:1}}get columnsNumber(){return Math.min(Math.max(3,this.tableSize.cols+1),15)}get rowsNumber(){return Math.min(Math.max(3,this.tableSize.rows+1),15)}tableSelectHovered(vt,Ct){return vt<this.tableSize.rows&&Ct<this.tableSize.cols}updateCurrentSize(vt,Ct,At){(0,b.tuiGetViewportWidth)(this.windowRef)-At.clientX>70&&(this.tableSize={rows:vt,cols:Ct})}onClick(){this.select()}select(){this.selectSize.emit(this.tableSize)}}return ut.\u0275fac=function(vt){return new(vt||ut)(M.Y36(l.m9))},ut.\u0275cmp=M.Xpm({type:ut,selectors:[["tui-table-size-selector"]],outputs:{selectSize:"selectSize",onSelectSize:"onSelectSize"},decls:3,vars:3,consts:[["class","t-column",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-description"],[1,"t-column"],["class","t-cell",3,"t-cell_hovered","mouseenter","click",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-cell",3,"mouseenter","click"]],template:function(vt,Ct){1&vt&&(M.YNc(0,it,2,1,"div",0),M.TgZ(1,"div",1),M._uU(2),M.qZA()),2&vt&&(M.Q6J("tuiRepeatTimesOf",Ct.columnsNumber),M.xp6(2),M.AsE("",Ct.tableSize.cols,"\xd7",Ct.tableSize.rows,""))},directives:[S.X],styles:["[_nghost-%COMP%]{display:block;padding:.75rem}.t-cell[_ngcontent-%COMP%]{display:inline-block;background-color:var(--tui-base-01);width:1.25rem;height:1.25rem;border-radius:.25rem;margin:.125rem;border:1px solid var(--tui-base-04);cursor:pointer}.t-cell_hovered[_ngcontent-%COMP%]{background-color:var(--tui-base-02)}.t-column[_ngcontent-%COMP%]{white-space:nowrap}.t-description[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),ut})()},10528:(Vt,yt,c)=>{c.d(yt,{G:()=>mt});var M=c(64762),l=c(84614),b=c(14309),S=c(68339),g=c(88002),it=c(87519),N=c(74788),q=c(40939),et=c(62939),ft=c(33250),ut=c(76189),nt=c(219),vt=c(67446),Ct=c(29070),At=c(54255),kt=c(15491),St=c(5451),Pt=c(17163),ht=c(12057);function tt(j,Dt){if(1&j){const It=N.EpF();N.TgZ(0,"tui-palette",6),N.NdJ("selectedColor",function(Bt){return N.CHM(It),N.oxw(2).editor.setFontColor(Bt)}),N.qZA()}if(2&j){const It=Dt.$implicit,bt=N.oxw(2);N.Q6J("tuiActiveZoneParent",It)("colors",bt.colors)}}function W(j,Dt){if(1&j&&(N.TgZ(0,"tui-hosted-dropdown",1,2),N._UZ(2,"button",3),N.ALo(3,"async"),N._UZ(4,"div",4),N.YNc(5,tt,1,2,"ng-template",null,5,N.W1O),N.qZA()),2&j){const It=Dt.tuiLet,bt=N.MAs(1),Bt=N.MAs(6),Ht=N.oxw();N.Q6J("content",Bt)("tuiDropdownMaxHeight",999),N.xp6(2),N.Q6J("tuiHint",N.lcZ(3,7,Ht.foreColorText$))("pseudoActive",bt.open)("focusable",bt.open),N.xp6(2),N.Udp("background",It)}}class mt{constructor(Dt,It,bt){this.defaultOptions=Dt,this.editor=It,this.texts$=bt,this.colors=this.defaultOptions.colors,this.fontColor$=this.editor.stateChange$.pipe((0,g.U)(()=>this.editor.getFontColor()||this.defaultOptions.blankColor),(0,it.x)()),this.foreColorText$=this.texts$.pipe((0,g.U)(Bt=>Bt.foreColor))}}mt.\u0275fac=function(Dt){return new(Dt||mt)(N.Y36(b.mJ),N.Y36(l.$3),N.Y36(b.rf))},mt.\u0275cmp=N.Xpm({type:mt,selectors:[["tui-text-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["color",""],["tuiIconButton","","type","button","size","s","icon","tuiIconColorLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__color-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],[1,"t-plate"],["colorDropdown",""],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(Dt,It){1&Dt&&(N.YNc(0,W,7,9,"tui-hosted-dropdown",0),N.ALo(1,"async")),2&Dt&&N.Q6J("tuiLet",N.lcZ(1,1,It.fontColor$))},directives:[q.L,et.o,ft.Ek,ut.v,nt.$,vt.D,Ct.x,At.t,kt.D,St.R,Pt.e],pipes:[ht.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,M.gn)([(0,S.tuiDefaultProp)()],mt.prototype,"colors",void 0)},17406:(Vt,yt,c)=>{c.d(yt,{M6:()=>M.M,yB:()=>q,Bp:()=>et.B});var M=c(4997),l=c(12057),b=c(71115),S=c(93252),g=c(68339),it=c(3497),N=c(74788);let q=(()=>{class ft{}return ft.\u0275fac=function(nt){return new(nt||ft)},ft.\u0275mod=N.oAB({type:ft}),ft.\u0275inj=N.cJS({imports:[[l.ez,it.TuiHintModule,g.TuiFocusableModule,it.TuiButtonModule,it.TuiHostedDropdownModule,b.Fu,S.er,S.mp,S.__,S.iA,S.p7,S.Zv,S.pu,S.Ur,S._t,S.XC,S.P_,S.y9,g.TuiItemModule,S.jP]]}),ft})();var et=c(13044)},13044:(Vt,yt,c)=>{c.d(yt,{B:()=>b});var M=c(74788),l=c(68339);let b=(()=>{class S{constructor(it){this.elementRef=it}get toolsContainers(){return Array.from(this.elementRef.nativeElement.querySelectorAll("[tuiItem]"))}onHorizontalNavigation(it){const{toolsContainers:N}=this,q=N.findIndex(l.tuiIsNativeFocusedIn),ft=N[(0,l.tuiClamp)(q+(it?-1:1),0,N.length-1)],ut=it?this.findPreviousTool(ft):this.findNextTool(ft);ut&&ut.focus()}findFirstFocusableTool(it=!1){const N=it?this.toolsContainers.slice().reverse():this.toolsContainers;for(const q of N){const et=(0,l.tuiIsNativeMouseFocusable)(q)?q:(0,l.tuiGetClosestFocusable)({initial:q,root:q,keyboard:!1});if(et)return et}return null}findPreviousTool(it){return(0,l.tuiIsNativeMouseFocusable)(it)?it:(0,l.tuiGetClosestFocusable)({initial:it,root:it,keyboard:!1})||(0,l.tuiGetClosestFocusable)({initial:it,root:this.elementRef.nativeElement,previous:!0,keyboard:!1})}findNextTool(it){return(0,l.tuiIsNativeMouseFocusable)(it)?it:(0,l.tuiGetClosestFocusable)({initial:it,root:this.elementRef.nativeElement,keyboard:!1})}}return S.\u0275fac=function(it){return new(it||S)(M.Y36(M.SBq))},S.\u0275dir=M.lG2({type:S,selectors:[["","tuiToolbarNavigationManager",""]],hostBindings:function(it,N){1&it&&M.NdJ("keydown.arrowRight.prevent",function(){return N.onHorizontalNavigation(!1)})("keydown.arrowLeft.prevent",function(){return N.onHorizontalNavigation(!0)})}}),S})()},4997:(Vt,yt,c)=>{c.d(yt,{M:()=>x});var M=c(64762),l=c(74788),b=c(19074),S=c(84614),g=c(48699),it=c(14309),N=c(68339),q=c(15257),et=c(13044),ft=c(12057),ut=c(48893),nt=c(76189),vt=c(82707),Ct=c(219),At=c(67446),kt=c(29070),St=c(54255),Pt=c(15491),ht=c(84985),tt=c(62976),W=c(37924),mt=c(13441),j=c(62939),Dt=c(45050),It=c(10528),bt=c(7416),Bt=c(15587),Ht=c(50237),Jt=c(18832),pt=c(19762),B=c(95558),rt=c(28962),dt=c(22063),st=c(76965);const J=["dropdown"];function Q(L,V){1&L&&l.GkF(0)}function ot(L,V){if(1&L){const U=l.EpF();l.TgZ(0,"div",6),l.TgZ(1,"button",7),l.NdJ("click",function(){return l.CHM(U),l.oxw(2).undo()}),l.qZA(),l.TgZ(2,"button",8),l.NdJ("click",function(){return l.CHM(U),l.oxw(2).redo()}),l.qZA(),l.qZA()}if(2&L){const U=l.oxw().ngIf,Ot=l.oxw();l.xp6(1),l.Q6J("tuiHint",U.undo)("disabled",Ot.undoDisabled)("focusable",!1),l.xp6(1),l.Q6J("tuiHint",U.redo)("disabled",Ot.redoDisabled)("focusable",!1)}}function wt(L,V){1&L&&(l.TgZ(0,"div",6),l._UZ(1,"tui-font-size",9),l.qZA())}function Zt(L,V){if(1&L&&l._UZ(0,"tui-font-style",15),2&L){const U=l.oxw(3);l.Q6J("enabledTools",U.toolsSet)}}function jt(L,V){1&L&&l._UZ(0,"tui-align-content",9)}function oe(L,V){1&L&&l._UZ(0,"tui-list-configs",9)}function Wt(L,V){if(1&L){const U=l.EpF();l.TgZ(0,"button",16,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).toggleQuote()}),l.qZA()}if(2&L){const U=l.oxw(2).ngIf,Ot=l.oxw();l.Q6J("tuiHint",U.quote)("pseudoActive",Ot.blockquote)("disabled",Ot.unorderedList||Ot.orderedList)("focusable",!1)}}function pe(L,V){if(1&L){const U=l.EpF();l.TgZ(0,"tui-edit-link",22,23),l.NdJ("addLink",function(Rt){l.CHM(U),l.oxw();const H=l.MAs(1);return l.oxw(3).onLink(H,Rt)})("removeLink",function(){l.CHM(U),l.oxw();const Rt=l.MAs(1);return l.oxw(3).onLink(Rt)}),l.qZA()}}function be(L,V){if(1&L&&(l.TgZ(0,"tui-hosted-dropdown",18,19),l._UZ(2,"button",20,17),l.YNc(4,pe,2,0,"ng-template",null,21,l.W1O),l.qZA()),2&L){const U=l.MAs(1),Ot=l.MAs(5),Rt=l.oxw(2).ngIf,H=l.oxw();l.Q6J("canOpen",H.canOpenAnchor)("content",Ot),l.xp6(2),l.Q6J("tuiHint",Rt.link)("pseudoActive",U.open||H.a)("focusable",U.open)}}function Ae(L,V){if(1&L){const U=l.EpF();l.TgZ(0,"tui-edit-link",28),l.NdJ("addLink",function(Rt){l.CHM(U),l.oxw();const H=l.MAs(1);return l.oxw(3).setAnchor(H,Rt)})("removeLink",function(){return l.CHM(U),l.oxw(4).removeAnchor()}),l.qZA()}2&L&&l.Q6J("anchorMode",!0)}function me(L,V){if(1&L&&(l.TgZ(0,"tui-hosted-dropdown",24,25),l._UZ(2,"button",26),l.YNc(3,Ae,1,1,"ng-template",null,27,l.W1O),l.qZA()),2&L){const U=l.MAs(1),Ot=l.MAs(4),Rt=l.oxw(2).ngIf,H=l.oxw();l.Q6J("canOpen",H.canOpenAnchor)("content",Ot),l.xp6(2),l.Q6J("focusable",!1)("pseudoActive",U.open||H.jumpAnchor)("tuiHint",Rt.insertAnchor)}}function Je(L,V){if(1&L){const U=l.EpF();l.ynx(0),l.TgZ(1,"button",29,17),l.NdJ("click",function(){return l.CHM(U),l.MAs(4).click()}),l.qZA(),l.TgZ(3,"input",30,31),l.NdJ("change",function(){l.CHM(U);const Rt=l.MAs(4);return l.oxw(3).onAttach(Rt)}),l.qZA(),l.BQk()}if(2&L){const U=l.oxw(2).ngIf,Ot=l.oxw();l.xp6(1),l.Q6J("tuiHint",U.attach)("focusable",!1),l.xp6(2),l.Q6J("accept",Ot.attachOptions.accept)("multiple",Ot.attachOptions.multiple)("tuiFocusable",!1)}}function De(L,V){if(1&L&&(l.TgZ(0,"div",6),l.YNc(1,Zt,1,1,"tui-font-style",10),l.YNc(2,jt,1,0,"tui-align-content",11),l.YNc(3,oe,1,0,"tui-list-configs",11),l.YNc(4,Wt,2,4,"button",12),l.YNc(5,be,6,5,"tui-hosted-dropdown",13),l.YNc(6,me,5,5,"tui-hosted-dropdown",14),l.YNc(7,Je,5,5,"ng-container",1),l.qZA()),2&L){const U=l.oxw(2);l.xp6(1),l.Q6J("ngIf",U.formatEnabled),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Align)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.List)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Quote)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Link)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Anchor)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Attach))}}function He(L,V){if(1&L){const U=l.EpF();l.TgZ(0,"button",34,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).toggleSubscript()}),l.qZA()}if(2&L){const U=l.oxw(2).ngIf,Ot=l.oxw();l.Q6J("tuiHint",U.subscript)("pseudoActive",Ot.subscript)("focusable",!1)}}function Te(L,V){if(1&L){const U=l.EpF();l.TgZ(0,"button",35,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).toggleSuperscript()}),l.qZA()}if(2&L){const U=l.oxw(2).ngIf,Ot=l.oxw();l.Q6J("tuiHint",U.superscript)("pseudoActive",Ot.superscript)("focusable",!1)}}function Pe(L,V){if(1&L&&(l.TgZ(0,"div",6),l.YNc(1,He,2,3,"button",32),l.YNc(2,Te,2,3,"button",33),l.qZA()),2&L){const U=l.oxw(2);l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Sub)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Sup))}}function Me(L,V){if(1&L&&l._UZ(0,"tui-text-color",37),2&L){const U=l.oxw(3);l.Q6J("colors",U.colors)}}function Ie(L,V){if(1&L&&l._UZ(0,"tui-highlight-color",37),2&L){const U=l.oxw(3);l.Q6J("colors",U.colors)}}function Ue(L,V){if(1&L&&(l.TgZ(0,"div",6),l.YNc(1,Me,1,1,"tui-text-color",36),l.YNc(2,Ie,1,1,"tui-highlight-color",36),l.qZA()),2&L){const U=l.oxw(2);l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Color)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Hilite))}}function Ee(L,V){1&L&&l._UZ(0,"tui-code",9)}function we(L,V){if(1&L){const U=l.EpF();l.TgZ(0,"button",41,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).onTeX()}),l.qZA()}if(2&L){const U=l.oxw(2).ngIf;l.Q6J("tuiHint",U.tex)("focusable",!1)}}function Ve(L,V){if(1&L){const U=l.EpF();l.TgZ(0,"div",42),l.TgZ(1,"button",43,17),l.NdJ("click",function(){return l.CHM(U),l.MAs(4).click()}),l.qZA(),l.TgZ(3,"input",44,45),l.NdJ("change",function(){l.CHM(U);const Rt=l.MAs(4);return l.oxw(3).onImage(Rt)}),l.qZA(),l.qZA()}if(2&L){const U=l.oxw(2).ngIf;l.xp6(1),l.Q6J("tuiHint",U.image)("focusable",!1),l.xp6(2),l.Q6J("tuiFocusable",!1)}}function ze(L,V){if(1&L){const U=l.EpF();l.TgZ(0,"button",46,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).insertHorizontalRule()}),l.qZA()}if(2&L){const U=l.oxw(2).ngIf;l.Q6J("tuiHint",U.insertHorizontalRule)("focusable",!1)}}function We(L,V){if(1&L&&(l.TgZ(0,"div",6),l.YNc(1,Ee,1,0,"tui-code",11),l.YNc(2,we,2,2,"button",38),l.YNc(3,Ve,5,3,"div",39),l.YNc(4,ze,2,2,"button",40),l.qZA()),2&L){const U=l.oxw(2);l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Code)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Tex)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Img)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.HR))}}function Ne(L,V){if(1&L){const U=l.EpF();l.TgZ(0,"div",6),l.TgZ(1,"button",47,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(2).removeFormat()}),l.qZA(),l.qZA()}if(2&L){const U=l.oxw().ngIf;l.xp6(1),l.Q6J("tuiHint",U.clear)("focusable",!1)}}function Fe(L,V){1&L&&(l.TgZ(0,"div",6),l._UZ(1,"tui-details",48),l._UZ(2,"tui-details-remove",48),l.qZA())}function Ce(L,V){if(1&L&&l._UZ(0,"tui-table-cell-color",37),2&L){const U=l.oxw(3);l.Q6J("colors",U.colors)}}function ge(L,V){if(1&L&&(l.TgZ(0,"div",6),l._UZ(1,"tui-editor-group-tool",48),l.YNc(2,Ce,1,1,"tui-table-cell-color",36),l.qZA()),2&L){const U=l.oxw(2);l.xp6(2),l.Q6J("ngIf",!U.enabled(U.TuiEditorTool.Table))}}function ye(L,V){if(1&L&&(l.TgZ(0,"div",6),l._UZ(1,"tui-table-create",48),l._UZ(2,"tui-table-row-column-manager",48),l._UZ(3,"tui-table-merge-cells",48),l._UZ(4,"tui-table-cell-color",37),l.qZA()),2&L){const U=l.oxw(2);l.xp6(4),l.Q6J("colors",U.colors)}}function Tt(L,V){if(1&L&&(l.TgZ(0,"section",4),l.YNc(1,ot,3,6,"div",5),l.YNc(2,wt,2,0,"div",5),l.YNc(3,De,8,7,"div",5),l.YNc(4,Pe,3,2,"div",5),l.YNc(5,Ue,3,2,"div",5),l.YNc(6,We,5,4,"div",5),l.YNc(7,Ne,3,2,"div",5),l.YNc(8,Fe,3,0,"div",5),l.YNc(9,ge,3,1,"div",5),l.YNc(10,ye,5,1,"div",5),l.TgZ(11,"div",6),l.Hsn(12),l.qZA(),l.qZA()),2&L){const U=l.oxw();l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Undo)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Size)),l.xp6(1),l.Q6J("ngIf",U.firstBigBlockEnabled),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Sub)||U.enabled(U.TuiEditorTool.Sup)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Color)||U.enabled(U.TuiEditorTool.Hilite)),l.xp6(1),l.Q6J("ngIf",U.secondBigBlockEnabled),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Clear)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Details)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Group)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Table))}}class x{constructor(V,U,Ot,Rt,H,a,u){this.elementRef=V,this.editor=U,this.imageLoader=Ot,this.attachOptions=Rt,this.filesLoader=H,this.texts$=a,this.defaultOptions=u,this.dropdowns=N.EMPTY_QUERY,this.colors=this.defaultOptions.colors,this.disabled=!1,this.linkAdded=new l.vpe,this.texClicked=new l.vpe,this.fileAttached=new l.vpe,this.TuiEditorTool=g._,this.toolsSet=new Set(b.Db)}set tools(V){this.toolsSet=new Set(V)}get focused(){return(0,N.tuiIsNativeFocusedIn)(this.elementRef.nativeElement)||!!this.dropdowns.find(({nativeElement:V})=>(0,N.tuiIsNativeFocusedIn)(V))}get focusable(){return!this.focused&&!this.disabled}get unorderedList(){return this.editor.isActive("bulletList")}get orderedList(){return this.editor.isActive("orderedList")}get blockquote(){return this.editor.isActive("blockquote")}get a(){return this.editor.isActive("link")}get jumpAnchor(){return this.editor.isActive("jumpAnchor")}get canOpenAnchor(){return!this.a&&!this.jumpAnchor}get undoDisabled(){return this.editor.undoDisabled()}get redoDisabled(){return this.editor.redoDisabled()}get subscript(){return this.editor.isActive("subscript")}get superscript(){return this.editor.isActive("superscript")}get formatEnabled(){return this.enabled(g._.Bold)||this.enabled(g._.Italic)||this.enabled(g._.Underline)||this.enabled(g._.Strikethrough)}get firstBigBlockEnabled(){return this.formatEnabled||this.enabled(g._.Align)||this.enabled(g._.List)||this.enabled(g._.Quote)||this.enabled(g._.Link)||this.enabled(g._.Anchor)||this.enabled(g._.Attach)}get secondBigBlockEnabled(){return this.enabled(g._.Code)||this.enabled(g._.Tex)||this.enabled(g._.Img)||this.enabled(g._.HR)}onMouseDown(V,U){U.closest("button")||(V.preventDefault(),this.editor.focus())}onBottomFocus(){this.focusLast()}onTopFocus(){this.focusFirst()}onImage(V){var U;const Ot=null===(U=V.files)||void 0===U?void 0:U[0];V.value="",Ot&&this.imageLoader(Ot).pipe((0,q.q)(1)).subscribe(Rt=>{this.addImage(Rt)})}onAttach(V){var U;const Ot=Array.from(V.files||[]);V.value="",Ot&&(N.tuiAssert.assert(!!this.filesLoader,"Please provide TUI_ATTACH_FILES_LOADER"),null===(U=this.filesLoader)||void 0===U||U.call(this,Ot).pipe((0,q.q)(1)).subscribe(Rt=>this.fileAttached.emit(Rt)))}onTeX(){this.texClicked.emit()}onLink(V,U){V.open=!1,U&&this.editor.toggleLink(U)}setAnchor(V,U){V.open=!1,U&&(this.editor.setAnchor(U),this.editor.selectClosest())}removeAnchor(){this.editor.removeAnchor()}enabled(V){return this.toolsSet.has(V)}undo(){this.editor.undo()}redo(){this.editor.redo()}insertHorizontalRule(){this.editor.setHorizontalRule()}removeFormat(){this.editor.removeFormat()}toggleOrderedList(){this.editor.toggleOrderedList()}toggleQuote(){this.editor.toggleBlockquote()}toggleSubscript(){this.editor.toggleSubscript()}toggleSuperscript(){this.editor.toggleSuperscript()}addImage(V){this.editor.setImage(V)}focusFirst(){var V;const U=null===(V=this.navigationManager)||void 0===V?void 0:V.findFirstFocusableTool();U&&U.focus()}focusLast(){var V;const U=null===(V=this.navigationManager)||void 0===V?void 0:V.findFirstFocusableTool(!0);U&&U.focus()}}x.\u0275fac=function(V){return new(V||x)(l.Y36(l.SBq,8),l.Y36(S.$3),l.Y36(it.p7),l.Y36(it.dR),l.Y36(it.zc,8),l.Y36(it.rf),l.Y36(it.mJ))},x.\u0275cmp=l.Xpm({type:x,selectors:[["tui-toolbar"]],viewQuery:function(V,U){if(1&V&&(l.Gf(et.B,5),l.Gf(J,5,l.SBq)),2&V){let Ot;l.iGM(Ot=l.CRH())&&(U.navigationManager=Ot.first),l.iGM(Ot=l.CRH())&&(U.dropdowns=Ot)}},hostAttrs:["role","toolbar"],hostVars:2,hostBindings:function(V,U){1&V&&l.NdJ("mousedown",function(Rt){return U.onMouseDown(Rt,Rt.target)}),2&V&&l.ekj("_disabled",U.disabled)},inputs:{colors:"colors",disabled:"disabled",tools:"tools"},outputs:{linkAdded:"linkAdded",texClicked:"texClicked",fileAttached:"fileAttached"},ngContentSelectors:["*"],decls:7,vars:8,consts:[["type","button",1,"t-prevent-parent-label-behavior"],[4,"ngIf"],[3,"tuiFocusable","focus"],["tuiToolbarNavigationManager","","class","t-tools-wrapper",4,"ngIf"],["tuiToolbarNavigationManager","",1,"t-tools-wrapper"],["class","t-block",4,"ngIf"],[1,"t-block"],["tuiItem","","tuiIconButton","","type","button","size","s","icon","tuiIconUndoLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","disabled","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconRedoLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","disabled","focusable","click"],["tuiItem","",1,"t-tool","t-wrapper"],["tuiItem","","class","t-tool t-wrapper",3,"enabledTools",4,"ngIf"],["tuiItem","","class","t-tool t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","disabled","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",3,"canOpen","content",4,"ngIf"],["class","t-wrapper",3,"canOpen","content",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"enabledTools"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","disabled","focusable","click"],["button",""],["tuiItem","",1,"t-wrapper",3,"canOpen","content"],["link",""],["tuiIconButton","","type","button","size","s","icon","tuiIconLinkLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","pseudoActive","focusable"],["linkDropdown",""],[3,"addLink","removeLink"],["dropdown",""],[1,"t-wrapper",3,"canOpen","content"],["anchor",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAnchorLarge","tuiHintDirection","top-left","appearance","icon","tuiHintDescribe","",3,"focusable","pseudoActive","tuiHint"],["anchorDropdown",""],[3,"anchorMode","addLink","removeLink"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconPaperclipLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["type","file",1,"t-file-upload",3,"accept","multiple","tuiFocusable","change"],["fileUpload",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","focusable","click"],["tuiItem","","class","t-tool t-wrapper",3,"colors",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"colors"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool",3,"tuiHint","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","focusable","click"],["tuiItem","",1,"t-wrapper"],["tuiIconButton","","type","button","size","s","icon","tuiIconImageLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","focusable","click"],["type","file","accept","image/*",1,"t-image",3,"tuiFocusable","change"],["image",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconClearFormatLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["tuiItem","",1,"t-tool","t-tool_margin"]],template:function(V,U){1&V&&(l.F$t(),l._UZ(0,"button",0),l.YNc(1,Q,1,0,"ng-container",1),l.ALo(2,"async"),l.TgZ(3,"div",2),l.NdJ("focus",function(){return U.onTopFocus()}),l.qZA(),l.TgZ(4,"div",2),l.NdJ("focus",function(){return U.onBottomFocus()}),l.qZA(),l.YNc(5,Tt,13,10,"section",3),l.ALo(6,"async")),2&V&&(l.xp6(1),l.Q6J("ngIf",l.lcZ(2,4,U.editor.stateChange$)),l.xp6(2),l.Q6J("tuiFocusable",U.focusable),l.xp6(1),l.Q6J("tuiFocusable",U.focusable),l.xp6(1),l.Q6J("ngIf",l.lcZ(6,6,U.texts$)))},directives:[ft.O5,ut.t,et.B,nt.v,vt.w,Ct.$,At.D,kt.x,St.t,Pt.D,ht.m,tt.h,W.X,mt.w,j.o,Dt.l,It.G,bt.U,Bt.T,Ht.y,Jt.U,pt.d,B.p,rt.l,dt._,st.Y],pipes:[ft.Ov],styles:['.t-tools-wrapper[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;padding:.25rem .75rem;overflow:auto;flex-wrap:wrap;box-shadow:0 .125rem .1875rem rgba(0,0,0,.1)}.t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar, .t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-tools-wrapper._disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:var(--tui-disabled-opacity)}.t-block[_ngcontent-%COMP%]{display:flex;padding:.25rem 0}.t-block[_ngcontent-%COMP%]:not(:last-child):after{content:"";display:block;margin:0 .25rem;width:1px;background:var(--tui-secondary-active)}.t-tool[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}button.t-tool[_ngcontent-%COMP%]:hover, .t-tool[_ngcontent-%COMP%]     button:hover{background:var(--tui-secondary-hover)}.t-tool_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-font[_ngcontent-%COMP%]{padding:.3em 0;outline:none;width:100%;pointer-events:none}.t-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;font-size:0;opacity:0;cursor:pointer}.t-image[_ngcontent-%COMP%]::-webkit-file-upload-button{display:none}.t-file-upload[_ngcontent-%COMP%]{display:none}.t-color-picker[_ngcontent-%COMP%]     tui-hosted-dropdown, .t-color-picker[_ngcontent-%COMP%]     tui-color-picker, .t-color-picker[_ngcontent-%COMP%]     tui-color-edit{display:none}.t-prevent-parent-label-behavior[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),(0,M.gn)([(0,N.tuiDefaultProp)()],x.prototype,"colors",void 0),(0,M.gn)([(0,N.tuiDefaultProp)()],x.prototype,"disabled",void 0),(0,M.gn)([(0,N.tuiDefaultProp)(function(L){return!L.includes(g._.Tex)&&!L.includes(g._.Attach)},"Attach and TeX are not yet implemented in Editor")],x.prototype,"tools",null)},19074:(Vt,yt,c)=>{c.d(yt,{hK:()=>l,sw:()=>M,Db:()=>S,RR:()=>g});const M=new Map([["transparent","transparent"],["color-black-300","#333333"],["color-black-200","#666666"],["color-black-100","#909090"],["color-yellow-100","#FFDD2C"],["color-yellow-200","#FCC521"],["color-yellow-300","#FAB618"],["color-gray-100","#f5f5f6"],["color-gray-200","#e7e8ea"],["color-gray-300","#cbcfd3"],["color-gray-400","#959ba4"],["color-gray-500","#79818c"],["color-gray-600","#616871"],["color-light-blue-100","#ecf1f7"],["color-light-blue-200","#e4ebf3"],["color-light-blue-300","#dde4ed"],["color-blue-100","#1771e6"],["color-blue-200","#1464cc"],["color-blue-300","#0953b3"],["color-green-100","#39b54a"],["color-green-200","#2ca53a"],["color-green-300","#168a21"],["color-red-100","#e01f19"],["color-red-200","#d3120e"],["color-red-300","#c40b08"]]),l="rgb(51, 51, 51)";var b=c(48699);const S=[b._.Undo,b._.Size,b._.Bold,b._.Italic,b._.Underline,b._.Align,b._.List,b._.Quote,b._.Link,b._.Anchor,b._.Color,b._.Hilite,b._.Clear,b._.Strikethrough,b._.Code,b._.Img,b._.HR,b._.Sup,b._.Sub,b._.Table,b._.Details];function g(it){return[{px:13,name:it.small},{px:15,name:it.normal},{px:17,name:it.large},{px:24,family:"var(--tui-font-heading)",name:it.subtitle,headingLevel:2,weight:"bold"},{px:30,family:"var(--tui-font-heading)",name:it.title,headingLevel:1,weight:"bold"}]}},60153:(Vt,yt,c)=>{c.d(yt,{Z:()=>l});var M=c(74788);let l=(()=>{class b{constructor(){this.imagePreview=new M.vpe}click(g){g instanceof HTMLImageElement&&this.imagePreview.emit(g)}}return b.\u0275fac=function(g){return new(g||b)},b.\u0275dir=M.lG2({type:b,selectors:[["tui-editor-socket","imagePreview",""]],hostAttrs:[1,"_preview-image"],hostBindings:function(g,it){1&g&&M.NdJ("click",function(q){return it.click(q.target)})},outputs:{imagePreview:"imagePreview"}}),b})()},84614:(Vt,yt,c)=>{c.d(yt,{Zj:()=>M.Z,BN:()=>b,JU:()=>S.JU,mJ:()=>S.mJ,$3:()=>S.$3});var M=c(60153),l=c(74788);let b=(()=>{class g{}return g.\u0275fac=function(N){return new(N||g)},g.\u0275mod=l.oAB({type:g}),g.\u0275inj=l.cJS({}),g})();var S=c(82113)},82113:(Vt,yt,c)=>{c.d(yt,{JU:()=>M.J,mJ:()=>b,$3:()=>S.$});var M=c(74982),l=c(74788);let b=(()=>{class g{}return g.\u0275fac=function(N){return new(N||g)},g.\u0275mod=l.oAB({type:g}),g.\u0275inj=l.cJS({}),g})();var S=c(76954)},74982:(Vt,yt,c)=>{c.d(yt,{J:()=>it});var M=c(74788),l=c(14309),b=c(68339),S=c(46782),g=c(76954);let it=(()=>{class N{constructor(et,ft,ut,nt,vt,Ct){this.elementRef=et,this.renderer=ft,this.editor=ut,this.editorContainer=nt,this.editorLoaded$=vt,this.valueChange=this.editor.valueChange$,this.stateChange=this.editor.stateChange$,this.editorLoaded$.pipe((0,S.R)(Ct)).subscribe(()=>{this.renderer.appendChild(this.elementRef.nativeElement,this.editorContainer)})}set value(et){et!==this.editor.html&&this.editor.setValue(et)}set editable(et){this.editor.editable=et}}return N.\u0275fac=function(et){return new(et||N)(M.Y36(M.SBq),M.Y36(M.Qsj),M.Y36(g.$),M.Y36(l.Y1),M.Y36(l.ZW),M.Y36(b.TuiDestroyService,2))},N.\u0275dir=M.lG2({type:N,selectors:[["","tuiTiptapEditor",""]],inputs:{value:"value",editable:"editable"},outputs:{valueChange:"valueChange",stateChange:"stateChange"},features:[M._Bn([b.TuiDestroyService])]}),N})()},76954:(Vt,yt,c)=>{c.d(yt,{$:()=>et});var M=c(77361),l=c(14309),b=c(27863),S=c(39761),g=c(88002),it=c(87519),q=c(74788);let et=(()=>{class ft extends M._{constructor(nt){super(),this.editorRef=nt,this.editorRef.subscribe(vt=>{this.editor=vt,vt.on("transaction",()=>{this.stateChange$.next()}),vt.on("update",()=>{const Ct=vt.getHTML(),kt=function(ft){return Array.isArray(ft)&&1===ft.length&&!ft[0].hasOwnProperty("content")}(vt.getJSON().content)?"":Ct;this.valueChange$.next(kt)})})}get isFocused(){return this.editor.isFocused}get html(){return this.editor.getHTML()}get editable(){return this.editor.isEditable}set editable(nt){this.editor.setEditable(nt)}get state(){return this.editor.state}getOriginTiptapEditor(){return this.editor}undoDisabled(){return!this.editor.can().undo()}redoDisabled(){return!this.editor.can().redo()}getFontColor(){return this.editor.getAttributes("textStyle").fontColor||"rgb(51, 51, 51)"}getBackgroundColor(){var nt;return(null===(nt=this.editor)||void 0===nt?void 0:nt.getAttributes("textStyle").backgroundColor)||"rgb(51, 51, 51)"}getCellColor(){return this.editor.getAttributes("tableCell").background||this.editor.getAttributes("tableHeader").background}getGroupColor(){var nt,vt,Ct,At;if(this.editor.isActive("group")){const kt=null!==(vt=null===(nt=this.editor.getAttributes("group"))||void 0===nt?void 0:nt.style)&&void 0!==vt?vt:"",St=(0,b.jx)(kt);return null!==(At=null!==(Ct=St["background-color"])&&void 0!==Ct?Ct:St.background)&&void 0!==At?At:""}return""}onAlign(nt){this.editor.chain().focus().setTextAlign(nt).run()}setImage(nt){this.editor.chain().focus().first(({commands:vt})=>[()=>{var Ct;return(null===(Ct=vt.setEditableImage)||void 0===Ct?void 0:Ct.call(vt,{src:nt}))||!1},()=>vt.setImage({src:nt})]).run()}undo(){this.editor.chain().undo().run()}redo(){this.editor.chain().redo().run()}setHorizontalRule(){this.editor.chain().focus().setHorizontalRule().run()}removeFormat(){this.editor.commands.unsetAllMarks(),this.editor.commands.clearNodes()}setFontColor(nt){this.editor.chain().focus().setFontColor(nt).run()}setBackgroundColor(nt){this.editor.chain().focus().setBackgroundColor(nt).run()}toggleUnderline(){this.editor.chain().focus().toggleUnderline().run()}toggleStrike(){this.editor.chain().focus().toggleStrike().run()}toggleOrderedList(){this.editor.chain().focus().toggleOrderedList().run()}toggleUnorderedList(){this.editor.chain().focus().toggleBulletList().run()}togglePre(){this.editor.chain().focus().toggleCodeBlock().run()}sinkListItem(){this.editor.chain().focus().sinkListItem("listItem").run()}liftListItem(){this.editor.chain().focus().liftListItem("listItem").run()}isActive(nt){return this.editor.isActive(nt)}isActive$(nt){return this.stateChange$.pipe((0,S.O)(null),(0,g.U)(()=>this.isActive(nt)),(0,it.x)())}toggleBold(){this.editor.chain().focus().toggleBold().run()}toggleCode(){this.editor.chain().focus().toggleCode().run()}toggleItalic(){this.editor.chain().focus().toggleItalic().run()}toggleBlockquote(){this.editor.chain().focus().toggleBlockquote().run()}toggleSubscript(){this.editor.chain().focus().toggleSubscript().run()}toggleSuperscript(){this.editor.chain().focus().toggleSuperscript().run()}toggleCodeBlock(){this.editor.chain().focus().toggleCodeBlock().run()}insertTable(nt,vt){this.editor.chain().focus().insertTable({cols:nt,rows:vt}).run()}addColumnAfter(){this.editor.chain().focus().addColumnAfter().run()}addColumnBefore(){this.editor.chain().focus().addColumnBefore().run()}addRowAfter(){this.editor.chain().focus().addRowAfter().run()}addRowBefore(){this.editor.chain().focus().addRowBefore().run()}deleteColumn(){this.editor.chain().focus().deleteColumn().run()}deleteRow(){this.editor.chain().focus().deleteRow().run()}mergeCells(){this.editor.chain().focus().mergeCells().run()}splitCell(){this.editor.chain().focus().splitCell().run()}canMergeCells(){return this.editor.can().mergeCells()}canSplitCells(){return this.editor.can().splitCell()}setHeading(nt){this.editor.chain().focus().setHeading({level:nt}).run()}setParagraph(nt){this.editor.chain().focus().setParagraph().run(),nt&&this.editor.chain().setMark("textStyle",nt).run()}setHardBreak(){this.editor.chain().setHardBreak().run()}setTextSelection(nt){this.editor.commands.setTextSelection(nt)}toggleLink(nt){this.editor.chain().focus().toggleLink({href:nt}).run()}setLink(nt){this.editor.chain().focus().setLink({href:nt}).run()}unsetLink(){this.editor.chain().focus().unsetLink().run()}focus(){this.editor.chain().focus().run()}setValue(nt){this.editor.commands.setContent(nt)}destroy(){this.editor.destroy()}setCellColor(nt){this.editor.chain().focus().setCellBackground(nt).run()}selectClosest(){const nt=this.editor.state.selection.anchor,{schema:vt,doc:Ct}=this.editor.state,At=(0,b.Yz)(Ct.resolve(nt),vt.marks.link);At&&this.editor.chain().setTextSelection(At).run()}enter(){this.editor.commands.enter()}setDetails(){this.editor.commands.setDetails()}removeDetails(){this.editor.commands.removeDetails()}setGroup(){this.editor.commands.setGroup()}removeGroup(){this.editor.commands.removeGroup()}setGroupHilite(nt){this.editor.commands.setGroupHilite(nt)}setAnchor(nt){this.editor.commands.setAnchor(nt.replace("#",""))}removeAnchor(){this.editor.commands.removeAnchor()}setFileLink(nt){this.editor.commands.setFileLink(nt)}setYoutubeVideo(nt){this.editor.commands.setYoutubeVideo(nt)}setIframe(nt){this.editor.commands.setIframe(nt)}removeEmptyTextStyle(){this.editor.commands.removeEmptyTextStyle()}toggleMark(nt,vt,Ct){this.editor.commands.toggleMark(nt,vt,Ct)}}return ft.\u0275fac=function(nt){return new(nt||ft)(q.LFG(l.ZW))},ft.\u0275prov=q.Yz7({token:ft,factory:ft.\u0275fac}),ft})()},48699:(Vt,yt,c)=>{c.d(yt,{_:()=>M});var M=(()=>{return(l=M||(M={})).Undo="undo",l.Anchor="anchor",l.Size="fontSize",l.Bold="bold",l.Italic="italic",l.Underline="underline",l.Strikethrough="strikeThrough",l.Align="justify",l.List="list",l.Quote="quote",l.Color="foreColor",l.Hilite="hiliteColor",l.Clear="clear",l.Link="link",l.Attach="attach",l.Tex="tex",l.Code="code",l.Img="image",l.HR="insertHorizontalRule",l.Sup="superscript",l.Sub="subscript",l.Table="insertTable",l.MergeCells="mergeCells",l.SplitCells="splitCells",l.RowsColumnsManaging="rowsColumnsManaging",l.Details="details",l.Group="group",M;var l})()},15736:(Vt,yt,c)=>{c.r(yt),c.d(yt,{BackgroundColor:()=>b}),c(84402);const b=c(12867).Extension.create({name:"backgroundColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,renderHTML:({backgroundColor:S})=>S?{style:`background-color: ${S}`}:{},parseHTML:({style:S})=>S.backgroundColor.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setBackgroundColor:S=>({chain:g})=>g().setMark("textStyle",{backgroundColor:S}).run(),unsetBackgroundColor:()=>({chain:S})=>S().setMark("textStyle",{backgroundColor:null}).run()})})},93763:(Vt,yt,c)=>{c.r(yt),c.d(yt,{TuiFileLink:()=>l});const l=c(12867).Extension.create({name:"fileLink",addCommands:()=>({setFileLink:b=>({state:S,chain:g})=>{const{selection:it}=S,q='<span style="font-size: 15px"> </span>';return(Math.abs(it.to-it.from)>0?g().toggleMark("link",{href:b.link},{extendEmptyMarkRange:!0}).setTextSelection(it.to).insertContent(q):g().insertContent(`<a href="${b.link}">${b.name}</a>${q}`)).setTextSelection(it.to).run()}})})},52658:(Vt,yt,c)=>{c.r(yt),c.d(yt,{FontColor:()=>b}),c(84402);const b=c(12867).Extension.create({name:"fontColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontColor:{default:null,renderHTML:({fontColor:S})=>S?{style:`color: ${S}`}:{},parseHTML:({style:S})=>S.color.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setFontColor:S=>({chain:g})=>g().setMark("textStyle",{fontColor:S}).run(),unsetFontColor:()=>({chain:S})=>S().setMark("textStyle",{fontColor:null}).run()})})},9492:(Vt,yt,c)=>{c.r(yt),c.d(yt,{TuiFontSize:()=>b}),c(84402);const b=c(12867).Extension.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:({style:S})=>S.fontSize,renderHTML:({fontSize:S})=>S?{style:`font-size: ${S}`}:{}}}}]},addCommands:()=>({setFontSize:S=>({chain:g})=>g().setMark("textStyle",{fontSize:S}).run(),unsetFontSize:()=>({chain:S})=>S().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()})})},54920:(Vt,yt,c)=>{c.r(yt),c.d(yt,{TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>b,createGroupExtension:()=>S});var M=c(27863),l=c(12867);const b={groupNodeClass:"tui-group-node",groupPointerNodeClass:"tui-group-pointer",nested:!0,draggable:!0,createOnEnter:!1},S=(g={})=>{const{draggable:it,nested:N,groupNodeClass:q,groupPointerNodeClass:et,createOnEnter:ft}=Object.assign(Object.assign({},b),g);return l.Node.create({name:"group",draggable:it,group:"block",content:N?"block+":"block",addAttributes:()=>({style:{default:null,parseHTML:ut=>ut.getAttribute("style"),renderHTML:ut=>ut.style?{style:ut.style}:{}}}),parseHTML:()=>[{tag:'div[data-type="group"]'}],renderHTML:({HTMLAttributes:ut})=>["div",(0,l.mergeAttributes)(ut,{"data-type":"group"}),0],addNodeView:()=>({HTMLAttributes:ut,node:nt})=>{const vt=document.createElement("div"),Ct=document.createElement("div");if(vt.classList.add(q),Ct.setAttribute("data-type","group"),ut.style&&(nt.attrs.style=ut.style,Ct.setAttribute("style",ut.style)),it){const At=document.createElement("div");At.classList.add(et),At.innerHTML="",At.contentEditable="false",vt.append(At,Ct)}else vt.append(Ct);return{dom:vt,contentDOM:Ct}},addCommands(){return{setGroup:()=>({commands:ut,state:nt})=>{this.editor.chain().focus().run();const vt=(0,M.Ap)(nt,""),At=`<div data-type="group">${vt.trim().startsWith("<p>")?vt:`<p>${vt}</p>`}</div>`;return ut.insertContent(At)},setGroupHilite:ut=>({editor:nt})=>{for(let vt=nt.state.selection.$anchor,Ct=vt.depth;Ct>0;Ct--){const At=vt.node(Ct);if(At.type.name===this.name){setTimeout(()=>nt.commands.updateAttributes(At.type,{style:`background: ${ut}`}));break}}return!0},removeGroup:()=>({state:ut,dispatch:nt})=>(0,M.yU)(ut,nt,this.name)}},addKeyboardShortcuts(){return ft?{Enter:()=>this.editor.commands.setGroup()}:{}}})}},20854:(Vt,yt,c)=>{c.r(yt),c.d(yt,{TUI_IFRAME_EDITOR_OPTIONS:()=>it,TuiIframeEditorComponent:()=>q,TuiIframeEditorModule:()=>nt,createIframeEditorExtension:()=>ut});var M=c(12057),l=c(91211),b=c(95110),S=c(68339),g=c(74788);const it=new g.OlP("[TUI_IFRAME_EDITOR_OPTIONS]",{factory:()=>({minWidth:100,maxWidth:1/0,minHeight:100,maxHeight:1/0})});var N=c(96570);let q=(()=>{class vt extends b._3{constructor(At,kt,St,Pt){super(kt,Pt),this.options=At,this.sanitizer=St}get src(){var At;return this.sanitizer.bypassSecurityTrustResourceUrl(null!==(At=this.attrs.src)&&void 0!==At?At:"")}updateSize([At,kt]){this._width=Math.max(this.options.minWidth,Math.min(this.options.maxWidth,At)),this._height=Math.max(this.options.minHeight,Math.min(this.options.maxHeight,kt))}}return vt.\u0275fac=function(At){return new(At||vt)(g.Y36(it),g.Y36(M.K0),g.Y36(l.H7),g.Y36(S.TuiDestroyService,2))},vt.\u0275cmp=g.Xpm({type:vt,selectors:[["tui-iframe-editor"]],features:[g._Bn([S.TuiDestroyService]),g.qOj],decls:2,vars:13,consts:[[3,"width","height","sizeChange"],[3,"src","width","height"]],template:function(At,kt){1&At&&(g.TgZ(0,"tui-editor-resizable",0),g.NdJ("sizeChange",function(Pt){return kt.updateSize(Pt)}),g._UZ(1,"iframe",1),g.qZA()),2&At&&(g.Q6J("width",kt.width)("height",kt.height),g.xp6(1),g.Udp("min-width",kt.options.minWidth)("min-height",kt.options.minHeight)("max-width",kt.options.maxWidth)("max-height",kt.options.maxHeight),g.Q6J("src",kt.src,g.uOi)("width",kt.width)("height",kt.height))},directives:[N.V],styles:["iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}"],changeDetection:0}),vt})();var et=c(40400),ft=c(12867);const ut=vt=>ft.Node.create({name:"iframe",group:"block",atom:!0,draggable:!1,parseHTML:()=>[{tag:'iframe[data-type="iframe-editor"]'}],addAttributes(){return{src:{default:null,keepOnSplit:!1,parseHTML:Ct=>Ct.getAttribute("src")},frameborder:{default:0,keepOnSplit:!1,parseHTML:Ct=>Ct.getAttribute("frameborder")},width:{default:"100%",keepOnSplit:!1,parseHTML:Ct=>Ct.getAttribute("width")},height:{default:null,keepOnSplit:!1,parseHTML:Ct=>Ct.getAttribute("height")},allowfullscreen:{keepOnSplit:!1,default:this.options.allowFullscreen,parseHTML:Ct=>Ct.getAttribute("allowfullscreen")}}},renderHTML:({HTMLAttributes:Ct})=>["iframe",(0,ft.mergeAttributes)(Ct,{"data-type":"iframe-editor"})],addNodeView:()=>(0,et.x)(q,{injector:vt}),addCommands(){return{setIframe:Ct=>({commands:At,state:kt})=>{const St=kt.selection.anchor;return At.enter(),At.setTextSelection(St),At.insertContent({type:this.name,attrs:Ct}),At.setTextSelection(kt.selection.anchor),!0}}}});let nt=(()=>{class vt{}return vt.\u0275fac=function(At){return new(At||vt)},vt.\u0275mod=g.oAB({type:vt}),vt.\u0275inj=g.cJS({imports:[[b.Sl]]}),vt})()},53380:(Vt,yt,c)=>{c.r(yt),c.d(yt,{TUI_EDITOR_MAX_IMAGE_WIDTH:()=>N,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>it,TUI_IMAGE_EDITOR_OPTIONS:()=>q,TuiImageEditorComponent:()=>ft,TuiImageEditorModule:()=>tt,createImageEditorExtension:()=>St,tuiCreateImageEditorExtension:()=>ht});var M=c(12057),l=c(91211),b=c(95110),S=c(68339),g=c(74788);const it=new g.OlP("[TUI_EDITOR_MIN_IMAGE_WIDTH]",{factory:()=>null}),N=new g.OlP("[TUI_EDITOR_MAX_IMAGE_WIDTH]",{factory:()=>null}),q=new g.OlP("[TUI_IMAGE_EDITOR_OPTIONS]",{factory:()=>({minWidth:100,maxWidth:1/0})});var et=c(96570);let ft=(()=>{class W extends b._3{constructor(j,Dt,It,bt,Bt,Ht){super(bt,Ht),this.minWidth=j,this.maxWidth=Dt,this.options=It,this.sanitizer=Bt}get dragHandle(){var j;return null!==(j=this.attrs.draggable)&&void 0!==j?j:null}get height(){return null}get alt(){return this.attrs.alt||""}get title(){return this.attrs.title||""}get src(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.attrs.src)}updateSize([j]){var Dt,It;const bt=null!==(Dt=this.minWidth)&&void 0!==Dt?Dt:this.options.minWidth,Bt=null!==(It=this.maxWidth)&&void 0!==It?It:this.options.maxWidth;this._width=Math.max(bt,Math.min(Bt,j))}}return W.\u0275fac=function(j){return new(j||W)(g.Y36(it),g.Y36(N),g.Y36(q),g.Y36(M.K0),g.Y36(l.H7),g.Y36(S.TuiDestroyService,2))},W.\u0275cmp=g.Xpm({type:W,selectors:[["tui-image-editor"]],hostVars:1,hostBindings:function(j,Dt){2&j&&g.uIk("data-drag-handle",Dt.dragHandle)},features:[g._Bn([S.TuiDestroyService]),g.qOj],decls:2,vars:10,consts:[[3,"width","autoHeight","sizeChange"],[3,"src","width","alt","title"]],template:function(j,Dt){1&j&&(g.TgZ(0,"tui-editor-resizable",0),g.NdJ("sizeChange",function(bt){return Dt.updateSize(bt)}),g._UZ(1,"img",1),g.qZA()),2&j&&(g.Q6J("width",Dt.width)("autoHeight",!0),g.xp6(1),g.Udp("min-width",Dt.options.minWidth,"px")("max-width",Dt.options.maxWidth,"px"),g.Q6J("src",Dt.src,g.LSH)("width",Dt.width)("alt",Dt.alt)("title",Dt.title))},directives:[et.V],styles:["[data-drag-handle][_nghost-%COMP%]{cursor:move}img[_ngcontent-%COMP%]{pointer-events:none}"],changeDetection:0}),W})();var ut=c(40400),nt=c(12867),vt=c(44632),Ct=c(62463);const At=[{tag:'img[data-type="image-editor"]'}],kt={src:{default:"",keepOnSplit:!1},width:{default:300,keepOnSplit:!1},alt:{default:"",keepOnSplit:!1},title:{default:"",keepOnSplit:!1}};function St(W,{draggable:mt}={}){const j=!(0,S.tuiIsPresent)(mt)||mt;return vt.Image.extend({name:"imageEditor",group:"block",atom:!0,draggable:j,parseHTML:()=>At,addAttributes:()=>Object.assign(Object.assign({},kt),{draggable:{default:j?"":null,keepOnSplit:!1}}),renderHTML:({HTMLAttributes:Dt})=>["img",(0,nt.mergeAttributes)(Dt,{"data-type":"image-editor"})],addNodeView:()=>(0,ut.x)(ft,{injector:W}),addCommands(){return{setEditableImage:Dt=>({commands:It})=>It.insertContent({type:this.name,attrs:Dt})}},addProseMirrorPlugins:()=>[new Ct.Sy({props:{handleDOMEvents:{paste:Pt,drop:Pt}}})]})}function Pt(W,mt){var j;const Dt=mt instanceof DragEvent?mt.dataTransfer:mt.clipboardData,It=Array.from(null!==(j=null==Dt?void 0:Dt.files)&&void 0!==j?j:[]).filter(bt=>/image/i.test(bt.type));It.length&&mt.preventDefault();for(const bt of It){const Bt=new FileReader;Bt.onload=Ht=>{var Jt;const pt=W.state.schema.nodes.imageEditor.create({src:null===(Jt=Ht.target)||void 0===Jt?void 0:Jt.result}),B=W.state.tr.replaceSelectionWith(pt);setTimeout(()=>W.dispatch(B))},Bt.readAsDataURL(bt)}}function ht({injector:W,draggable:mt}){return St(W,{draggable:mt})}let tt=(()=>{class W{}return W.\u0275fac=function(j){return new(j||W)},W.\u0275mod=g.oAB({type:W}),W.\u0275inj=g.cJS({imports:[[M.ez,b.Sl]]}),W})()},12177:(Vt,yt,c)=>{function l(S){return S.isActive("bulletList")||S.isActive("orderedList")}c.r(yt),c.d(yt,{TuiTabExtension:()=>b,tuiIsOrderedOrBulletList:()=>l});const b=c(12867).Extension.create({name:"indent",addKeyboardShortcuts(){return{Tab:()=>l(this.editor)?null:this.editor.commands.insertContent("\t")}}})},82091:(Vt,yt,c)=>{c.r(yt),c.d(yt,{TuiLink:()=>C});var M=c(27863),l=c(12867);const g=(f,h)=>{for(const v in h)f[v]=h[v];return f},it="numeric",N="ascii",q="alpha",et="asciinumeric",ft="alphanumeric",ut="domain",At="whitespace";function kt(f,h){return f in h||(h[f]=[]),h[f]}function St(f,h,v){h[it]&&(h[et]=!0,h[ft]=!0),h[N]&&(h[et]=!0,h[q]=!0),h[et]&&(h[ft]=!0),h[q]&&(h[ft]=!0),h[ft]&&(h[ut]=!0),h.emoji&&(h[ut]=!0);for(const A in h){const R=kt(A,v);R.indexOf(f)<0&&R.push(f)}}function ht(f){void 0===f&&(f=null),this.j={},this.jr=[],this.jd=null,this.t=f}ht.groups={},ht.prototype={accepts(){return!!this.t},go(f){const h=this,v=h.j[f];if(v)return v;for(let A=0;A<h.jr.length;A++){const R=h.jr[A][0],K=h.jr[A][1];if(K&&R.test(f))return K}return h.jd},has(f,h){return void 0===h&&(h=!1),h?f in this.j:!!this.go(f)},ta(f,h,v,A){for(let R=0;R<f.length;R++)this.tt(f[R],h,v,A)},tr(f,h,v,A){let R;return A=A||ht.groups,h&&h.j?R=h:(R=new ht(h),v&&A&&St(h,v,A)),this.jr.push([f,R]),R},ts(f,h,v,A){let R=this;const K=f.length;if(!K)return R;for(let z=0;z<K-1;z++)R=R.tt(f[z]);return R.tt(f[K-1],h,v,A)},tt(f,h,v,A){A=A||ht.groups;const R=this;if(h&&h.j)return R.j[f]=h,h;const K=h;let z,G=R.go(f);if(G?(z=new ht,g(z.j,G.j),z.jr.push.apply(z.jr,G.jr),z.jd=G.jd,z.t=G.t):z=new ht,K){if(A)if(z.t&&"string"==typeof z.t){const Et=g(function(f,h){const v={};for(const A in h)h[A].indexOf(f)>=0&&(v[A]=!0);return v}(z.t,A),v);St(K,Et,A)}else v&&St(K,v,A);z.t=K}return R.j[f]=z,z}};const tt=(f,h,v,A,R)=>f.ta(h,v,A,R),W=(f,h,v,A,R)=>f.tr(h,v,A,R),mt=(f,h,v,A,R)=>f.ts(h,v,A,R),j=(f,h,v,A,R)=>f.tt(h,v,A,R),Dt="WORD",It="UWORD",bt="LOCALHOST",Ht="UTLD",Jt="SCHEME",pt="SLASH_SCHEME",B="NUM",st="OPENBRACE",J="OPENBRACKET",Q="OPENANGLEBRACKET",ot="OPENPAREN",wt="CLOSEBRACE",Zt="CLOSEBRACKET",jt="CLOSEANGLEBRACKET",oe="CLOSEPAREN",Wt="AMPERSAND",pe="APOSTROPHE",be="ASTERISK",Ae="AT",me="BACKSLASH",Je="BACKTICK",De="CARET",He="COLON",Te="COMMA",Pe="DOLLAR",Me="DOT",Ie="EQUALS",Ue="EXCLAMATION",Ee="HYPHEN",we="PERCENT",Ve="PIPE",ze="PLUS",We="POUND",Ne="QUERY",Fe="QUOTE",Ce="SEMI",ge="SLASH",ye="TILDE",Tt="UNDERSCORE",O="EMOJI",x="SYM";var k=Object.freeze({__proto__:null,WORD:Dt,UWORD:It,LOCALHOST:bt,TLD:"TLD",UTLD:Ht,SCHEME:Jt,SLASH_SCHEME:pt,NUM:B,WS:"WS",NL:"NL",OPENBRACE:st,OPENBRACKET:J,OPENANGLEBRACKET:Q,OPENPAREN:ot,CLOSEBRACE:wt,CLOSEBRACKET:Zt,CLOSEANGLEBRACKET:jt,CLOSEPAREN:oe,AMPERSAND:Wt,APOSTROPHE:pe,ASTERISK:be,AT:Ae,BACKSLASH:me,BACKTICK:Je,CARET:De,COLON:He,COMMA:Te,DOLLAR:Pe,DOT:Me,EQUALS:Ie,EXCLAMATION:Ue,HYPHEN:Ee,PERCENT:we,PIPE:Ve,PLUS:ze,POUND:We,QUERY:Ne,QUOTE:Fe,SEMI:Ce,SLASH:ge,TILDE:ye,UNDERSCORE:Tt,EMOJI:O,SYM:x});const L=/[a-z]/,V=/\p{L}/u,U=/\p{Emoji}/u,Rt=/\d/,H=/\s/;let w=null,F=null;function ee(f,h,v,A,R){let K;const z=h.length;for(let G=0;G<z-1;G++){const Et=h[G];f.j[Et]?K=f.j[Et]:(K=new ht(A),K.jr=R.slice(),f.j[Et]=K),f=K}return K=new ht(v),K.jr=R.slice(),f.j[h[z-1]]=K,K}function Re(f){const h=[],v=[];let A=0;for(;A<f.length;){let K=0;for(;"0123456789".indexOf(f[A+K])>=0;)K++;if(K>0){h.push(v.join(""));let z=parseInt(f.substring(A,A+K),10);for(;z>0;z--)v.pop();A+=K}else"_"===f[A]?(h.push(v.join("")),A++):(v.push(f[A]),A++)}return h}const $e={defaultProtocol:"http",events:null,format:$,formatHref:$,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Y(f,h){void 0===h&&(h=null);let v=g({},$e);f&&(v=g(v,f instanceof Y?f.o:f));const A=v.ignoreTags,R=[];for(let K=0;K<A.length;K++)R.push(A[K].toUpperCase());this.o=v,h&&(this.defaultRender=h),this.ignoreTags=R}function $(f){return f}function _t(f,h){this.t="token",this.v=f,this.tk=h}function Mt(f,h){class v extends _t{constructor(R,K){super(R,K),this.t=f}}for(const A in h)v.prototype[A]=h[A];return v.t=f,v}Y.prototype={o:$e,ignoreTags:[],defaultRender:f=>f,check(f){return this.get("validate",f.toString(),f)},get(f,h,v){const A=null!=h;let R=this.o[f];return R&&("object"==typeof R?(R=v.t in R?R[v.t]:$e[f],"function"==typeof R&&A&&(R=R(h,v))):"function"==typeof R&&A&&(R=R(h,v.t,v)),R)},getObj(f,h,v){let A=this.o[f];return"function"==typeof A&&null!=h&&(A=A(h,v.t,v)),A},render(f){const h=f.render(this);return(this.get("render",null,f)||this.defaultRender)(h,f.t,f)}},_t.prototype={isLink:!1,toString(){return this.v},toHref(f){return this.toString()},toFormattedString(f){const h=this.toString(),v=f.get("truncate",h,this),A=f.get("format",h,this);return v&&A.length>v?A.substring(0,v)+"\u2026":A},toFormattedHref(f){return f.get("formatHref",this.toHref(f.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(f){return void 0===f&&(f=$e.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(f),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(f){return{type:this.t,value:this.toFormattedString(f),isLink:this.isLink,href:this.toFormattedHref(f),start:this.startIndex(),end:this.endIndex()}},validate(f){return f.get("validate",this.toString(),this)},render(f){const h=this,v=this.toFormattedHref(f),A=f.get("tagName",v,h),R=this.toFormattedString(f),K={},z=f.get("className",v,h),G=f.get("target",v,h),Et=f.get("rel",v,h),xt=f.getObj("attributes",v,h),Nt=f.getObj("events",v,h);return K.href=v,z&&(K.class=z),G&&(K.target=G),Et&&(K.rel=Et),xt&&g(K,xt),{tagName:A,attributes:K,content:R,eventListeners:Nt}}};const Kt=Mt("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Ft=Mt("text"),Qt=Mt("nl"),ne=Mt("url",{isLink:!0,toHref(f){return void 0===f&&(f=$e.defaultProtocol),this.hasProtocol()?this.v:`${f}://${this.v}`},hasProtocol(){const f=this.tk;return f.length>=2&&f[0].t!==bt&&f[1].t===He}}),re=f=>new ht(f);function Oe(f,h,v){return new f(h.slice(v[0].s,v[v.length-1].e),v)}const Le="undefined"!=typeof console&&console&&console.warn||(()=>{}),ue={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function nn(f,h){if(void 0===h&&(h=!1),ue.initialized&&Le(`linkifyjs: already initialized - will not register custom scheme "${f}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(f))throw new Error('linkifyjs: incorrect scheme format.\n 1. Must only contain digits, lowercase ASCII letters or "-"\n 2. Cannot start or end with "-"\n 3. "-" cannot repeat');ue.customSchemes.push([f,h])}function an(f){return ue.initialized||function(){ue.scanner=function(f){void 0===f&&(f=[]);const h={};ht.groups=h;const v=new ht;null==w&&(w=Re("aaa1rp3barth4b_ott3vie4c1le2ogado5udhabi7c_ademy5centure6ountant_s9o1tor4d_s1ult4e_g1ro2tna4f_l1rica5g_akhan5ency5i_g1rbus3force5tel5kdn3l_faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m_azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o_l2partments8p_le4q_uarelle8r_ab1mco4chi3my2pa2t_e3s_da2ia2sociates9t_hleta5torney7u_ction5di_ble3o3spost5thor3o_s4vianca6w_s2x_a2z_ure5ba_by2idu3namex3narepublic11d1k2r_celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b_c1t1va3cg1n2d1e_ats2uty4er2ntley5rlin4st_buy5t2f1g1h_arti5i_ble3d1ke2ng_o3o1z2j1lack_friday9ockbuster8g1omberg7ue3m_s1w2n_pparibas9o_ats3ehringer8fa2m1nd2o_k_ing5sch2tik2on4t1utique6x2r_adesco6idgestone9oadway5ker3ther5ussels7s1t1uild_ers6siness6y1zz3v1w1y1z_h3ca_b1fe2l_l1vinklein9m_era3p2non3petown5ital_one8r_avan4ds2e_er_s4s2sa1e1h1ino4t_ering5holic7ba1n1re2s2c1d1enter4o1rn3f_a1d2g1h_anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i_priani6rcle4sco3tadel4i_c2y_eats7k1l_aims4eaning6ick2nic1que6othing5ud3ub_med6m1n1o_ach3des3ffee4llege4ogne5m_cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking_channel11l1p2rsica5untry4pon_s4rses6pa2r_edit_card4union9icket5own3s1uise_s6u_isinella9v1w1x1y_mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e_al_er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si_gn4v2hl2iamonds6et2gital5rect_ory7scount3ver5h2y2j1k1m1np2o_cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c_o2deka3u_cation8e1g1mail3erck5nergy4gineer_ing9terprises10pson4quipment8r_icsson6ni3s_q1tate5t_isalat7u_rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n_s2rm_ers5shion4t3edex3edback6rrari3ero6i_at2delity5o2lm2nal1nce1ial7re_stone6mdale6sh_ing5t_ness6j1k1lickr3ghts4r2orist4wers5y2m1o_o_d_network8tball6rd1ex2sale4um3undation8x2r_ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n_d2rniture7tbol5yi3ga_l_lery3o1up4me_s3p1rden4y2b_iz3d_n2e_a1nt_ing5orge5f1g_ee3h1i_ft_s3ves2ing5l_ass3e1obal2o4m_ail3bh2o1x2n1odaddy5ld_point6f2o_dyear5g_le4p1t1v2p1q1r_ainger5phics5tis4een3ipe3ocery4up4s1t1u_ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc_bank7ealth_care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k_t2m1n1ockey4ldings5iday5medepot5goods5s_ense7nda3rse3spital5t_ing5t_eles2s3mail5use3w2r1sbc3t1u_ghes5yatt3undai7ibm2cbc2e1u2d1e_ee3fm2kano4l1m_amat4db2mo_bilien9n_c1dustries8finiti5o2g1k1stitute6urance4e4t_ernational10uit4vestments10o1piranga7q1r_ish4s_maili5t_anbul7t_au2v3jaguar4va3cb2e_ep2tzt3welry6io2ll2m_p2nj2o_bs1urg4t1y2p_morgan6rs3uegos4niper7kaufen5ddi3e_rryhotels6logistics9properties14fh2g1h1i_a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p_mg2n2r_d1ed3uokgroup8w1y_oto4z2la_caixa5mborghini8er3ncaster5ia3d_rover6xess5salle5t_ino3robe5w_yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i_dl2fe_insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan_s3cker3us3l1ndon4tte1o3ve3pl_financial11r1s1t_d_a3u_ndbeck6xe1ury5v1y2ma_cys3drid4if1son4keup4n_agement7go3p1rket_ing3s4riott5shalls7serati6ttel5ba2c_kinsey7d1e_d_ia3et2lbourne7me1orial6n_u2rckmsd7g1h1iami3crosoft7l1ni1t2t_subishi9k1l_b1s2m_a2n1o_bi_le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to_rcycles9v_ie4p1q1r1s_d2t_n1r2u_seum3ic3tual5v1w1x1y1z2na_b1goya4me2tura4vy3ba2c1e_c1t_bank4flix4work5ustar5w_s2xt_direct7us4f_l2g_o2hk2i_co2ke1on3nja3ssan1y5l1o_kia3rthwesternmutual14on4w_ruz3tv4p1r_a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan_group9dnavy5lo3m_ega4ne1g1l_ine5oo2pen3racle3nge4g_anic5igins6saka4tsuka4t2vh3pa_ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e_t2f_izer5g1h_armacy6d1ilips5one2to_graphy6s4ysio5ics1tet2ures6d1n_g1k2oneer5zza4k1l_ace2y_station9umbing5s3m1n_c2ohl2ker3litie5rn2st3r_america6xi3ess3ime3o_d_uctions8f1gressive8mo2perties3y5tection8u_dential9s1t1ub2w_c2y2qa1pon3uebec3st5racing4dio4e_ad1lestate6tor2y4cipes5d_stone5umbrella9hab3ise_n3t2liance6n_t_als5pair3ort3ublican8st_aurant8view_s5xroth6ich_ardli6oh3l1o1p2o_cher3ks3deo3gers4om3s_vp3u_gby3hr2n2w_e2yukyu6sa_arland6fe_ty4kura4le1on3msclub4ung5ndvik_coromant12ofi4p1rl2s1ve2xo3b_i1s2c_a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e_arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x_y3fr2g1h_angrila6rp2w2ell3ia1ksha5oes2p_ping5uji3w_time7i_lk2na1gles5te3j1k_i_n2y_pe4l_ing4m_art3ile4n_cf3o_ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa_ce3ort2t3r_l2s1t_ada2ples4r1tebank4farm7c_group6ockholm6rage3e3ream4udio2y3yle4u_cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y_dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x_i3c_i2d_k2eam2ch_nology8l1masek5nnis4va3f1g1h_d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j_maxx4x2k_maxx5l1m_all4n1o_day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r_ade1ing4ining5vel_channel7ers_insurance16ust3v2t1ube2i1nes3shu4v_s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va_cations7na1guard7c1e_gas3ntures6risign5m\xf6gensberater2ung14sicherung10t2g1i_ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u_elos6wales2mart4ter4ng_gou5tch_es6eather_channel12bcam3er2site5d_ding5ibo2r3f1hoswho6ien2ki2lliamhill9n_dows4e1ners6me2olterskluwer11odside6rk_s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u_tube6t1un3za_ppos4ra3ero3ip2m1one3uerich6w2")),null==F&&(F=Re("\u03b5\u03bb1\u03c52\u0431\u04331\u0435\u043b3\u0434\u0435\u0442\u04384\u0435\u044e2\u043a\u0430\u0442\u043e\u043b\u0438\u043a6\u043e\u043c3\u043c\u043a\u04342\u043e\u043d1\u0441\u043a\u0432\u04306\u043e\u043d\u043b\u0430\u0439\u043d5\u0440\u04333\u0440\u0443\u04412\u04442\u0441\u0430\u0439\u04423\u0440\u04313\u0443\u043a\u04403\u049b\u0430\u04373\u0570\u0561\u05753\u05d9\u05e9\u05e8\u05d0\u05dc5\u05e7\u05d5\u05dd3\u0627\u0628\u0648\u0638\u0628\u064a5\u062a\u0635\u0627\u0644\u0627\u062a6\u0631\u0627\u0645\u0643\u06485\u0644\u0627\u0631\u062f\u06464\u0628\u062d\u0631\u064a\u06465\u062c\u0632\u0627\u0626\u06315\u0633\u0639\u0648\u062f\u064a\u06296\u0639\u0644\u064a\u0627\u06465\u0645\u063a\u0631\u06285\u0645\u0627\u0631\u0627\u062a5\u06cc\u0631\u0627\u06465\u0628\u0627\u0631\u062a2\u0632\u0627\u06314\u064a\u062a\u06433\u06be\u0627\u0631\u062a5\u062a\u0648\u0646\u06334\u0633\u0648\u062f\u0627\u06463\u0631\u064a\u06295\u0634\u0628\u0643\u06294\u0639\u0631\u0627\u06422\u06282\u0645\u0627\u06464\u0641\u0644\u0633\u0637\u064a\u06466\u0642\u0637\u06313\u0643\u0627\u062b\u0648\u0644\u064a\u06436\u0648\u06453\u0645\u0635\u06312\u0644\u064a\u0633\u064a\u06275\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u06277\u0642\u06394\u0647\u0645\u0631\u0627\u06475\u067e\u0627\u06a9\u0633\u062a\u0627\u06467\u0680\u0627\u0631\u062a4\u0915\u0949\u092e3\u0928\u0947\u091f3\u092d\u093e\u0930\u0924_\u092e\u094d3\u094b\u09245\u0938\u0902\u0917\u0920\u09285\u09ac\u09be\u0982\u09b2\u09be5\u09ad\u09be\u09b0\u09a42\u09f0\u09a44\u0a2d\u0a3e\u0a30\u0a244\u0aad\u0abe\u0ab0\u0aa44\u0b2d\u0b3e\u0b30\u0b244\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe6\u0bb2\u0b99\u0bcd\u0b95\u0bc86\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd11\u0c2d\u0c3e\u0c30\u0c24\u0c4d5\u0cad\u0cbe\u0cb0\u0ca44\u0d2d\u0d3e\u0d30\u0d24\u0d025\u0dbd\u0d82\u0d9a\u0dcf4\u0e04\u0e2d\u0e213\u0e44\u0e17\u0e223\u0ea5\u0eb2\u0ea73\u10d2\u10d42\u307f\u3093\u306a3\u30a2\u30de\u30be\u30f34\u30af\u30e9\u30a6\u30c94\u30b0\u30fc\u30b0\u30eb4\u30b3\u30e02\u30b9\u30c8\u30a23\u30bb\u30fc\u30eb3\u30d5\u30a1\u30c3\u30b7\u30e7\u30f36\u30dd\u30a4\u30f3\u30c84\u4e16\u754c2\u4e2d\u4fe11\u56fd1\u570b1\u6587\u7f513\u4e9a\u9a6c\u900a3\u4f01\u4e1a2\u4f5b\u5c712\u4fe1\u606f2\u5065\u5eb72\u516b\u53662\u516c\u53f81\u76ca2\u53f0\u6e7e1\u70632\u5546\u57ce1\u5e971\u68072\u5609\u91cc_\u5927\u9152\u5e975\u5728\u7ebf2\u5927\u62ff2\u5929\u4e3b\u65593\u5a31\u4e502\u5bb6\u96fb2\u5e7f\u4e1c2\u5fae\u535a2\u6148\u55842\u6211\u7231\u4f603\u624b\u673a2\u62db\u80582\u653f\u52a11\u5e9c2\u65b0\u52a0\u57612\u95fb2\u65f6\u5c1a2\u66f8\u7c4d2\u673a\u67842\u6de1\u9a6c\u95213\u6e38\u620f2\u6fb3\u95802\u70b9\u770b2\u79fb\u52a82\u7ec4\u7ec7\u673a\u67844\u7f51\u57401\u5e971\u7ad91\u7edc2\u8054\u901a2\u8c37\u6b4c2\u8d2d\u72692\u901a\u8ca92\u96c6\u56e22\u96fb\u8a0a\u76c8\u79d14\u98de\u5229\u6d663\u98df\u54c12\u9910\u53852\u9999\u683c\u91cc\u62c93\u6e2f2\ub2f7\ub1371\ucef42\uc0bc\uc1312\ud55c\uad6d2")),j(v,"'",pe),j(v,"{",st),j(v,"[",J),j(v,"<",Q),j(v,"(",ot),j(v,"}",wt),j(v,"]",Zt),j(v,">",jt),j(v,")",oe),j(v,"&",Wt),j(v,"*",be),j(v,"@",Ae),j(v,"`",Je),j(v,"^",De),j(v,":",He),j(v,",",Te),j(v,"$",Pe),j(v,".",Me),j(v,"=",Ie),j(v,"!",Ue),j(v,"-",Ee),j(v,"%",we),j(v,"|",Ve),j(v,"+",ze),j(v,"#",We),j(v,"?",Ne),j(v,'"',Fe),j(v,"/",ge),j(v,";",Ce),j(v,"~",ye),j(v,"_",Tt),j(v,"\\",me);const A=W(v,Rt,B,{[it]:!0});W(A,Rt,A);const R=W(v,L,Dt,{[N]:!0});W(R,L,R);const K=W(v,V,It,{[q]:!0});W(K,L),W(K,V,K);const z=W(v,H,"WS",{[At]:!0});j(v,"\n","NL",{[At]:!0}),j(z,"\n"),W(z,H,z);const G=W(v,U,O,{emoji:!0});W(G,U,G),j(G,"\ufe0f",G);const Et=j(G,"\u200d");W(Et,U,G);const xt=[[L,R]],Nt=[[L,null],[V,K]];for(let zt=0;zt<w.length;zt++)ee(v,w[zt],"TLD",Dt,xt);for(let zt=0;zt<F.length;zt++)ee(v,F[zt],Ht,It,Nt);St("TLD",{tld:!0,ascii:!0},h),St(Ht,{utld:!0,alpha:!0},h),ee(v,"file",Jt,Dt,xt),ee(v,"mailto",Jt,Dt,xt),ee(v,"http",pt,Dt,xt),ee(v,"https",pt,Dt,xt),ee(v,"ftp",pt,Dt,xt),ee(v,"ftps",pt,Dt,xt),St(Jt,{scheme:!0,ascii:!0},h),St(pt,{slashscheme:!0,ascii:!0},h),f=f.sort((zt,Gt)=>zt[0]>Gt[0]?1:-1);for(let zt=0;zt<f.length;zt++){const Gt=f[zt][0],ie=f[zt][1]?{scheme:!0}:{slashscheme:!0};Gt.indexOf("-")>=0?ie[ut]=!0:L.test(Gt)?Rt.test(Gt)?ie[et]=!0:ie[N]=!0:ie[it]=!0,mt(v,Gt,Gt,ie)}return mt(v,"localhost",bt,{ascii:!0}),v.jd=new ht(x),{start:v,tokens:g({groups:h},k)}}(ue.customSchemes);for(let f=0;f<ue.tokenQueue.length;f++)ue.tokenQueue[f][1]({scanner:ue.scanner});ue.parser=function(f){let{groups:h}=f;const v=h.domain.concat([Wt,be,Ae,me,Je,De,Pe,Ie,Ee,B,we,Ve,ze,We,ge,x,ye,Tt]),A=[pe,jt,wt,Zt,oe,He,Te,Me,Ue,Q,st,J,ot,Ne,Fe,Ce],R=[Wt,pe,be,me,Je,De,wt,Pe,Ie,Ee,B,st,we,Ve,ze,We,Ne,ge,x,ye,Tt],K=re(),z=j(K,ye);tt(z,R,z),tt(z,h.domain,z);const G=re(),Et=re(),xt=re();tt(K,h.domain,G),tt(K,h.scheme,Et),tt(K,h.slashscheme,xt),tt(G,R,z),tt(G,h.domain,G);const Nt=j(G,Ae);j(z,Ae,Nt),j(Et,Ae,Nt),j(xt,Ae,Nt);const zt=j(z,Me);tt(zt,R,z),tt(zt,h.domain,z);const Gt=re();tt(Nt,h.domain,Gt),tt(Gt,h.domain,Gt);const se=j(Gt,Me);tt(se,h.domain,Gt);const ie=re(Kt);tt(se,h.tld,ie),tt(se,h.utld,ie),j(Nt,bt,ie);const xe=j(Gt,Ee);tt(xe,h.domain,Gt),tt(ie,h.domain,Gt),j(ie,Me,se),j(ie,Ee,xe);const rn=j(ie,He);tt(rn,h.numeric,Kt);const Qe=j(G,Ee),ve=j(G,Me);tt(Qe,h.domain,G),tt(ve,R,z),tt(ve,h.domain,G);const Se=re(ne);tt(ve,h.tld,Se),tt(ve,h.utld,Se),tt(Se,h.domain,G),tt(Se,R,z),j(Se,Me,ve),j(Se,Ee,Qe),j(Se,Ae,Nt);const _n=j(Se,He),dn=re(ne);tt(_n,h.numeric,dn);const he=re(ne),ke=re();tt(he,v,he),tt(he,A,ke),tt(ke,v,he),tt(ke,A,ke),j(Se,ge,he),j(dn,ge,he);const Ke=j(Et,He),Gn=j(xt,He),Xn=j(Gn,ge);j(Xn,ge,Ke),tt(Et,h.domain,G),j(Et,Me,ve),j(Et,Ee,Qe),tt(xt,h.domain,G),j(xt,Me,ve),j(xt,Ee,Qe),tt(Ke,h.domain,he),j(Ke,ge,he);const fn=j(he,st),tn=j(he,J),kn=j(he,Q),On=j(he,ot);j(ke,st,fn),j(ke,J,tn),j(ke,Q,kn),j(ke,ot,On),j(fn,wt,he),j(tn,Zt,he),j(kn,jt,he),j(On,oe,he),j(fn,wt,he);const Tn=re(ne),En=re(ne),yn=re(ne),un=re(ne);tt(fn,v,Tn),tt(tn,v,En),tt(kn,v,yn),tt(On,v,un);const Pn=re(),xn=re(),sn=re(),wn=re();return tt(fn,A),tt(tn,A),tt(kn,A),tt(On,A),tt(Tn,v,Tn),tt(En,v,En),tt(yn,v,yn),tt(un,v,un),tt(Tn,A,Tn),tt(En,A,En),tt(yn,A,yn),tt(un,A,un),tt(Pn,v,Pn),tt(xn,v,En),tt(sn,v,yn),tt(wn,v,un),tt(Pn,A,Pn),tt(xn,A,xn),tt(sn,A,sn),tt(wn,A,wn),j(En,Zt,he),j(yn,jt,he),j(un,oe,he),j(Tn,wt,he),j(xn,Zt,he),j(sn,jt,he),j(wn,oe,he),j(Pn,oe,he),j(K,bt,Se),j(K,"NL",Qt),{start:K,tokens:k}}(ue.scanner.tokens);for(let f=0;f<ue.pluginQueue.length;f++)ue.pluginQueue[f][1]({scanner:ue.scanner,parser:ue.parser});ue.initialized=!0}(),function(f,h,v){let A=v.length,R=0,K=[],z=[];for(;R<A;){let G=f,Et=null,xt=null,Nt=0,zt=null,Gt=-1;for(;R<A&&!(Et=G.go(v[R].t));)z.push(v[R++]);for(;R<A&&(xt=Et||G.go(v[R].t));)Et=null,G=xt,G.accepts()?(Gt=0,zt=G):Gt>=0&&Gt++,R++,Nt++;if(Gt<0)R-=Nt,R<A&&(z.push(v[R]),R++);else{z.length>0&&(K.push(Oe(Ft,h,z)),z=[]),R-=Gt,Nt-=Gt;const se=zt.t,ie=v.slice(R-Nt,R);K.push(Oe(se,h,ie))}}return z.length>0&&K.push(Oe(Ft,h,z)),K}(ue.parser.start,f,function(f,h){const v=function(f){const h=[],v=f.length;let A=0;for(;A<v;){let K,R=f.charCodeAt(A),z=R<55296||R>56319||A+1===v||(K=f.charCodeAt(A+1))<56320||K>57343?f[A]:f.slice(A,A+2);h.push(z),A+=z.length}return h}(h.replace(/[A-Z]/g,G=>G.toLowerCase())),A=v.length,R=[];let K=0,z=0;for(;z<A;){let G=f,Et=null,xt=0,Nt=null,zt=-1,Gt=-1;for(;z<A&&(Et=G.go(v[z]));)G=Et,G.accepts()?(zt=0,Gt=0,Nt=G):zt>=0&&(zt+=v[z].length,Gt++),xt+=v[z].length,K+=v[z].length,z++;K-=zt,z-=Gt,xt-=zt,R.push({t:Nt.t,v:h.slice(K-xt,K),s:K-xt,e:K})}return R}(ue.scanner.start,f))}function hn(f,h,v){if(void 0===h&&(h=null),void 0===v&&(v=null),h&&"object"==typeof h){if(v)throw Error(`linkifyjs: Invalid link type ${h}; must be a string`);v=h,h=null}const A=new Y(v),R=an(f),K=[];for(let z=0;z<R.length;z++){const G=R[z];G.isLink&&(!h||G.t===h)&&K.push(G.toFormattedObject(A))}return K}function cn(f,h){void 0===h&&(h=null);const v=an(f);return 1===v.length&&v[0].isLink&&(!h||v[0].t===h)}var Ze=c(62463);const C=l.Mark.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(f=>{"string"!=typeof f?nn(f.scheme,f.optionalSlashes):nn(f)})},onDestroy(){ht.groups={},ue.scanner=null,ue.parser=null,ue.tokenQueue=[],ue.pluginQueue=[],ue.customSchemes=[],ue.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}),addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML:()=>[{tag:'a[href]:not([href *= "javascript:" i])'}],renderHTML({HTMLAttributes:f}){return["a",(0,l.mergeAttributes)(this.options.HTMLAttributes,f),0]},addCommands(){return{setLink:f=>({chain:h})=>h().setMark(this.name,f).setMeta("preventAutolink",!0).run(),toggleLink:f=>({chain:h})=>h().toggleMark(this.name,f,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:f})=>f().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[(0,l.markPasteRule)({find:f=>hn(f).filter(h=>!this.options.validate||this.options.validate(h.value)).filter(h=>h.isLink).map(h=>({text:h.value,index:h.start,data:h})),type:this.type,getAttributes:f=>{var h;return{href:null===(h=f.data)||void 0===h?void 0:h.href}}})]},addProseMirrorPlugins(){const f=[];return this.options.autolink&&f.push(function(f){return new Ze.Sy({key:new Ze.H$("autolink"),appendTransaction:(h,v,A)=>{const R=h.some(Nt=>Nt.docChanged)&&!v.doc.eq(A.doc),K=h.some(Nt=>Nt.getMeta("preventAutolink"));if(!R||K)return;const{tr:z}=A,G=(0,l.combineTransactionSteps)(v.doc,[...h]),{mapping:Et}=G;return(0,l.getChangedRanges)(G).forEach(({oldRange:Nt,newRange:zt})=>{(0,l.getMarksBetween)(Nt.from,Nt.to,v.doc).filter(xe=>xe.mark.type===f.type).forEach(xe=>{const rn=Et.map(xe.from),Qe=Et.map(xe.to),ve=(0,l.getMarksBetween)(rn,Qe,A.doc).filter(Ke=>Ke.mark.type===f.type);if(!ve.length)return;const Se=ve[0],_n=v.doc.textBetween(xe.from,xe.to,void 0," "),dn=A.doc.textBetween(Se.from,Se.to,void 0," "),he=cn(_n),ke=cn(dn);he&&!ke&&z.removeMark(Se.from,Se.to,f.type)});const Gt=(0,l.findChildrenInRange)(A.doc,zt,xe=>xe.isTextblock);let se,ie;if(Gt.length>1?(se=Gt[0],ie=A.doc.textBetween(se.pos,se.pos+se.node.nodeSize,void 0," ")):Gt.length&&A.doc.textBetween(zt.from,zt.to," "," ").endsWith(" ")&&(se=Gt[0],ie=A.doc.textBetween(se.pos,zt.to,void 0," ")),se&&ie){const xe=ie.split(" ").filter(ve=>""!==ve);if(xe.length<=0)return!1;const rn=xe[xe.length-1],Qe=se.pos+ie.lastIndexOf(rn);if(!rn)return!1;hn(rn).filter(ve=>ve.isLink).filter(ve=>!f.validate||f.validate(ve.value)).map(ve=>_e(qt({},ve),{from:Qe+ve.start+1,to:Qe+ve.end+1})).forEach(ve=>{z.addMark(ve.from,ve.to,f.type.create({href:ve.href}))})}}),z.steps.length?z:void 0}})}({type:this.type,validate:this.options.validate})),this.options.openOnClick&&f.push(function(f){return new Ze.Sy({key:new Ze.H$("handleClickLink"),props:{handleClick:(h,v,A)=>{var R,K,z;const G=(0,l.getAttributes)(h.state,f.type.name),Et=null===(R=A.target)||void 0===R?void 0:R.closest("a"),xt=null!==(K=null==Et?void 0:Et.href)&&void 0!==K?K:G.href,Nt=null!==(z=null==Et?void 0:Et.target)&&void 0!==z?z:G.target;return!(!Et||!xt||(window.open(xt,Nt),0))}}})}({type:this.type})),this.options.linkOnPaste&&f.push(function(f){return new Ze.Sy({key:new Ze.H$("handlePasteLink"),props:{handlePaste:(h,v,A)=>{const{state:R}=h,{selection:K}=R,{empty:z}=K;if(z)return!1;let G="";A.content.forEach(xt=>{G+=xt.textContent});const Et=hn(G).find(xt=>xt.isLink&&xt.value===G);return!(!G||!Et||(f.editor.commands.setMark(f.type,{href:Et.href}),0))}}})}({editor:this.editor,type:this.type})),f}}).extend({addAttributes(){var f;return Object.assign(Object.assign({},null===(f=this.parent)||void 0===f?void 0:f.call(this)),(0,M.x6)(["download"]))},addCommands(){var f;return Object.assign(Object.assign({},null===(f=this.parent)||void 0===f?void 0:f.call(this)),{toggleLink:h=>({chain:v,state:A})=>{{const{selection:R,doc:K}=A,z=K.cut(R.to,R.to+1),Et=" "===(0,l.getHTMLFromFragment)(z.content,A.schema).replace(/<\/?[^>]+(>|$)/g,""),xt=v().toggleMark(this.name,h,{extendEmptyMarkRange:!0});return(Et?xt.setTextSelection(R.to+1):xt.setTextSelection(R.to).insertContent('<span style="font-size: 15px"> </span>')).run()}}})}}).configure({openOnClick:!1})},41512:(Vt,yt,c)=>{c.r(yt),c.d(yt,{TuiAudio:()=>b,TuiSource:()=>S,TuiVideo:()=>g});var M=c(27863),l=c(12867);const b=l.Node.create({name:"audio",group:"block",content:"source+",addAttributes:()=>(0,M.x6)(["id","class","src","style","controls","loop","muted","preload","autoplay","width","height"]),parseHTML:()=>[{tag:"audio"}],renderHTML:({node:it,HTMLAttributes:N})=>["audio",N,...(0,M.YX)(it)]}),S=l.Node.create({name:"source",addAttributes:()=>(0,M.x6)(["src","type","width","height","media","sizes","srcset"]),parseHTML:()=>[{tag:"source"}],renderHTML:({HTMLAttributes:it})=>["source",(0,l.mergeAttributes)(it)]}),g=l.Node.create({name:"video",group:"block",content:"source+",addAttributes:()=>(0,M.x6)(["id","class","src","style","controls","loop","muted","preload","autoplay","width","height"]),parseHTML:()=>[{tag:"video"}],renderHTML:({node:it,HTMLAttributes:N})=>["video",N,...(0,M.YX)(it)]})},2823:(Vt,yt,c)=>{c.r(yt),c.d(yt,{StarterKit:()=>$e});var M=c(12867);const l=/^\s*>\s$/,b=M.Node.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:Y}){return["blockquote",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{setBlockquote:()=>({commands:Y})=>Y.wrapIn(this.name),toggleBlockquote:()=>({commands:Y})=>Y.toggleWrap(this.name),unsetBlockquote:()=>({commands:Y})=>Y.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,M.wrappingInputRule)({find:l,type:this.type})]}}),S=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,g=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,it=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,N=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,q=M.Mark.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:Y=>"normal"!==Y.style.fontWeight&&null},{style:"font-weight",getAttrs:Y=>/^(bold(er)?|[5-9]\d{2,})$/.test(Y)&&null}],renderHTML({HTMLAttributes:Y}){return["strong",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{setBold:()=>({commands:Y})=>Y.setMark(this.name),toggleBold:()=>({commands:Y})=>Y.toggleMark(this.name),unsetBold:()=>({commands:Y})=>Y.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,M.markInputRule)({find:S,type:this.type}),(0,M.markInputRule)({find:it,type:this.type})]},addPasteRules(){return[(0,M.markPasteRule)({find:g,type:this.type}),(0,M.markPasteRule)({find:N,type:this.type})]}}),et=M.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:Y}){return["li",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ft=M.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:Y=>!!Y.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:Y}){return["span",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:Y,commands:$})=>{const ct=(0,M.getMarkAttributes)(Y,this.type);return!!Object.entries(ct).some(([,Mt])=>!!Mt)||$.unsetMark(this.name)}}}}),ut=/^\s*([-+*])\s$/,nt=M.Node.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:Y}){return["ul",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{toggleBulletList:()=>({commands:Y,chain:$})=>this.options.keepAttributes?$().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(et.name,this.editor.getAttributes(ft.name)).run():Y.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let Y=(0,M.wrappingInputRule)({find:ut,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(Y=(0,M.wrappingInputRule)({find:ut,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ft.name),editor:this.editor})),[Y]}}),vt=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,Ct=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,At=M.Mark.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:Y}){return["code",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{setCode:()=>({commands:Y})=>Y.setMark(this.name),toggleCode:()=>({commands:Y})=>Y.toggleMark(this.name),unsetCode:()=>({commands:Y})=>Y.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,M.markInputRule)({find:vt,type:this.type})]},addPasteRules(){return[(0,M.markPasteRule)({find:Ct,type:this.type})]}});var kt=c(62463);const St=/^```([a-z]+)?[\s\n]$/,Pt=/^~~~([a-z]+)?[\s\n]$/,ht=M.Node.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:Y=>{var $;const{languageClassPrefix:ct}=this.options;return[...(null===($=Y.firstElementChild)||void 0===$?void 0:$.classList)||[]].filter(Ft=>Ft.startsWith(ct)).map(Ft=>Ft.replace(ct,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:Y,HTMLAttributes:$}){return["pre",(0,M.mergeAttributes)(this.options.HTMLAttributes,$),["code",{class:Y.attrs.language?this.options.languageClassPrefix+Y.attrs.language:null},0]]},addCommands(){return{setCodeBlock:Y=>({commands:$})=>$.setNode(this.name,Y),toggleCodeBlock:Y=>({commands:$})=>$.toggleNode(this.name,"paragraph",Y)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:Y,$anchor:$}=this.editor.state.selection;return!(!Y||$.parent.type.name!==this.name)&&!(1!==$.pos&&$.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:Y})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:$}=Y,{selection:ct}=$,{$from:_t,empty:Mt}=ct;if(!Mt||_t.parent.type!==this.type)return!1;const Kt=_t.parentOffset===_t.parent.nodeSize-2,Ft=_t.parent.textContent.endsWith("\n\n");return!(!Kt||!Ft)&&Y.chain().command(({tr:Qt})=>(Qt.delete(_t.pos-2,_t.pos),!0)).exitCode().run()},ArrowDown:({editor:Y})=>{if(!this.options.exitOnArrowDown)return!1;const{state:$}=Y,{selection:ct,doc:_t}=$,{$from:Mt,empty:Kt}=ct;if(!Kt||Mt.parent.type!==this.type||Mt.parentOffset!==Mt.parent.nodeSize-2)return!1;const Qt=Mt.after();return void 0!==Qt&&!_t.nodeAt(Qt)&&Y.commands.exitCode()}}},addInputRules(){return[(0,M.textblockTypeInputRule)({find:St,type:this.type,getAttributes:Y=>({language:Y[1]})}),(0,M.textblockTypeInputRule)({find:Pt,type:this.type,getAttributes:Y=>({language:Y[1]})})]},addProseMirrorPlugins(){return[new kt.Sy({key:new kt.H$("codeBlockVSCodeHandler"),props:{handlePaste:(Y,$)=>{if(!$.clipboardData||this.editor.isActive(this.type.name))return!1;const ct=$.clipboardData.getData("text/plain"),_t=$.clipboardData.getData("vscode-editor-data"),Mt=_t?JSON.parse(_t):void 0,Kt=null==Mt?void 0:Mt.mode;if(!ct||!Kt)return!1;const{tr:Ft}=Y.state;return Ft.replaceSelectionWith(this.type.create({language:Kt})),Ft.setSelection(kt.Bs.near(Ft.doc.resolve(Math.max(0,Ft.selection.from-2)))),Ft.insertText(ct.replace(/\r\n?/g,"\n")),Ft.setMeta("paste",!0),Y.dispatch(Ft),!0}}})]}}),tt=M.Node.create({name:"doc",topNode:!0,content:"block+"});var W=c(38480);function mt(Y={}){return new kt.Sy({view:$=>new j($,Y)})}class j{constructor($,ct){this.editorView=$,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=ct.width||1,this.color=ct.color||"black",this.class=ct.class,this.handlers=["dragover","dragend","drop","dragleave"].map(_t=>{let Mt=Kt=>{this[_t](Kt)};return $.dom.addEventListener(_t,Mt),{name:_t,handler:Mt}})}destroy(){this.handlers.forEach(({name:$,handler:ct})=>this.editorView.dom.removeEventListener($,ct))}update($,ct){null!=this.cursorPos&&ct.doc!=$.state.doc&&(this.cursorPos>$.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor($){$!=this.cursorPos&&(this.cursorPos=$,null==$?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let _t,$=this.editorView.state.doc.resolve(this.cursorPos),ct=!$.parent.inlineContent;if(ct){let Qt=$.nodeBefore,ne=$.nodeAfter;if(Qt||ne){let fe=this.editorView.nodeDOM(this.cursorPos-(Qt?Qt.nodeSize:0));if(fe){let re=fe.getBoundingClientRect(),ae=Qt?re.bottom:re.top;Qt&&ne&&(ae=(ae+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),_t={left:re.left,right:re.right,top:ae-this.width/2,bottom:ae+this.width/2}}}}if(!_t){let Qt=this.editorView.coordsAtPos(this.cursorPos);_t={left:Qt.left-this.width/2,right:Qt.left+this.width/2,top:Qt.top,bottom:Qt.bottom}}let Kt,Ft,Mt=this.editorView.dom.offsetParent;if(this.element||(this.element=Mt.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),this.element.classList.toggle("prosemirror-dropcursor-block",ct),this.element.classList.toggle("prosemirror-dropcursor-inline",!ct),!Mt||Mt==document.body&&"static"==getComputedStyle(Mt).position)Kt=-pageXOffset,Ft=-pageYOffset;else{let Qt=Mt.getBoundingClientRect();Kt=Qt.left-Mt.scrollLeft,Ft=Qt.top-Mt.scrollTop}this.element.style.left=_t.left-Kt+"px",this.element.style.top=_t.top-Ft+"px",this.element.style.width=_t.right-_t.left+"px",this.element.style.height=_t.bottom-_t.top+"px"}scheduleRemoval($){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),$)}dragover($){if(!this.editorView.editable)return;let ct=this.editorView.posAtCoords({left:$.clientX,top:$.clientY}),_t=ct&&ct.inside>=0&&this.editorView.state.doc.nodeAt(ct.inside),Mt=_t&&_t.type.spec.disableDropCursor,Kt="function"==typeof Mt?Mt(this.editorView,ct,$):Mt;if(ct&&!Kt){let Ft=ct.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let Qt=(0,W.nj)(this.editorView.state.doc,Ft,this.editorView.dragging.slice);null!=Qt&&(Ft=Qt)}this.setCursor(Ft),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave($){($.target==this.editorView.dom||!this.editorView.dom.contains($.relatedTarget))&&this.setCursor(null)}}const Dt=M.Extension.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[mt(this.options)]}});var It=c(70768),bt=c(77346),Bt=c(43594);class Ht extends kt.Y1{constructor($){super($,$)}map($,ct){let _t=$.resolve(ct.map(this.head));return Ht.valid(_t)?new Ht(_t):kt.Y1.near(_t)}content(){return bt.p2.empty}eq($){return $ instanceof Ht&&$.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON($,ct){if("number"!=typeof ct.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ht($.resolve(ct.pos))}getBookmark(){return new Jt(this.anchor)}static valid($){let ct=$.parent;if(ct.isTextblock||!function(Y){for(let $=Y.depth;$>=0;$--){let ct=Y.index($),_t=Y.node($);if(0!=ct)for(let Mt=_t.child(ct-1);;Mt=Mt.lastChild){if(0==Mt.childCount&&!Mt.inlineContent||Mt.isAtom||Mt.type.spec.isolating)return!0;if(Mt.inlineContent)return!1}else if(_t.type.spec.isolating)return!0}return!0}($)||!function(Y){for(let $=Y.depth;$>=0;$--){let ct=Y.indexAfter($),_t=Y.node($);if(ct!=_t.childCount)for(let Mt=_t.child(ct);;Mt=Mt.firstChild){if(0==Mt.childCount&&!Mt.inlineContent||Mt.isAtom||Mt.type.spec.isolating)return!0;if(Mt.inlineContent)return!1}else if(_t.type.spec.isolating)return!0}return!0}($))return!1;let _t=ct.type.spec.allowGapCursor;if(null!=_t)return _t;let Mt=ct.contentMatchAt($.index()).defaultType;return Mt&&Mt.isTextblock}static findGapCursorFrom($,ct,_t=!1){t:for(;;){if(!_t&&Ht.valid($))return $;let Mt=$.pos,Kt=null;for(let Ft=$.depth;;Ft--){let Qt=$.node(Ft);if(ct>0?$.indexAfter(Ft)<Qt.childCount:$.index(Ft)>0){Kt=Qt.child(ct>0?$.indexAfter(Ft):$.index(Ft)-1);break}if(0==Ft)return null;Mt+=ct;let ne=$.doc.resolve(Mt);if(Ht.valid(ne))return ne}for(;;){let Ft=ct>0?Kt.firstChild:Kt.lastChild;if(!Ft){if(Kt.isAtom&&!Kt.isText&&!kt.qv.isSelectable(Kt)){$=$.doc.resolve(Mt+Kt.nodeSize*ct),_t=!1;continue t}break}Kt=Ft,Mt+=ct;let Qt=$.doc.resolve(Mt);if(Ht.valid(Qt))return Qt}return null}}}Ht.prototype.visible=!1,Ht.findFrom=Ht.findGapCursorFrom,kt.Y1.jsonID("gapcursor",Ht);class Jt{constructor($){this.pos=$}map($){return new Jt($.map(this.pos))}resolve($){let ct=$.resolve(this.pos);return Ht.valid(ct)?new Ht(ct):kt.Y1.near(ct)}}const dt=(0,It.$)({ArrowLeft:st("horiz",-1),ArrowRight:st("horiz",1),ArrowUp:st("vert",-1),ArrowDown:st("vert",1)});function st(Y,$){const ct="vert"==Y?$>0?"down":"up":$>0?"right":"left";return function(_t,Mt,Kt){let Ft=_t.selection,Qt=$>0?Ft.$to:Ft.$from,ne=Ft.empty;if(Ft instanceof kt.Bs){if(!Kt.endOfTextblock(ct)||0==Qt.depth)return!1;ne=!1,Qt=_t.doc.resolve($>0?Qt.after():Qt.before())}let fe=Ht.findGapCursorFrom(Qt,$,ne);return!!fe&&(Mt&&Mt(_t.tr.setSelection(new Ht(fe))),!0)}}function J(Y,$,ct){if(!Y||!Y.editable)return!1;let _t=Y.state.doc.resolve($);if(!Ht.valid(_t))return!1;let Mt=Y.posAtCoords({left:ct.clientX,top:ct.clientY});return!(Mt&&Mt.inside>-1&&kt.qv.isSelectable(Y.state.doc.nodeAt(Mt.inside))||(Y.dispatch(Y.state.tr.setSelection(new Ht(_t))),0))}function Q(Y,$){if("insertCompositionText"!=$.inputType||!(Y.state.selection instanceof Ht))return!1;let{$from:ct}=Y.state.selection,_t=ct.parent.contentMatchAt(ct.index()).findWrapping(Y.state.schema.nodes.text);if(!_t)return!1;let Mt=bt.HY.empty;for(let Ft=_t.length-1;Ft>=0;Ft--)Mt=bt.HY.from(_t[Ft].createAndFill(null,Mt));let Kt=Y.state.tr.replace(ct.pos,ct.pos,new bt.p2(Mt,0,0));return Kt.setSelection(kt.Bs.near(Kt.doc.resolve(ct.pos+1))),Y.dispatch(Kt),!1}function ot(Y){if(!(Y.selection instanceof Ht))return null;let $=document.createElement("div");return $.className="ProseMirror-gapcursor",Bt.EH.create(Y.doc,[Bt.p.widget(Y.selection.head,$,{key:"gapcursor"})])}const wt=M.Extension.create({name:"gapCursor",addProseMirrorPlugins:()=>[new kt.Sy({props:{decorations:ot,createSelectionBetween:(Y,$,ct)=>$.pos==ct.pos&&Ht.valid(ct)?new Ht(ct):null,handleClick:J,handleKeyDown:dt,handleDOMEvents:{beforeinput:Q}}})],extendNodeSchema(Y){var $;return{allowGapCursor:null!==($=(0,M.callOrReturn)((0,M.getExtensionField)(Y,"allowGapCursor",{name:Y.name,options:Y.options,storage:Y.storage})))&&void 0!==$?$:null}}}),Zt=M.Node.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:Y}){return["br",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:Y,chain:$,state:ct,editor:_t})=>Y.first([()=>Y.exitCode(),()=>Y.command(()=>{const{selection:Mt,storedMarks:Kt}=ct;if(Mt.$from.parent.type.spec.isolating)return!1;const{keepMarks:Ft}=this.options,{splittableMarks:Qt}=_t.extensionManager,ne=Kt||Mt.$to.parentOffset&&Mt.$from.marks();return $().insertContent({type:this.name}).command(({tr:fe,dispatch:re})=>{if(re&&ne&&Ft){const ae=ne.filter(de=>Qt.includes(de.type.name));fe.ensureMarks(ae)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),jt=M.Node.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(Y=>({tag:`h${Y}`,attrs:{level:Y}}))},renderHTML({node:Y,HTMLAttributes:$}){return[`h${this.options.levels.includes(Y.attrs.level)?Y.attrs.level:this.options.levels[0]}`,(0,M.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setHeading:Y=>({commands:$})=>!!this.options.levels.includes(Y.level)&&$.setNode(this.name,Y),toggleHeading:Y=>({commands:$})=>!!this.options.levels.includes(Y.level)&&$.toggleNode(this.name,"paragraph",Y)}},addKeyboardShortcuts(){return this.options.levels.reduce((Y,$)=>_e(qt({},Y),{[`Mod-Alt-${$}`]:()=>this.editor.commands.toggleHeading({level:$})}),{})},addInputRules(){return this.options.levels.map(Y=>(0,M.textblockTypeInputRule)({find:new RegExp(`^(#{1,${Y}})\\s$`),type:this.type,getAttributes:{level:Y}}))}});var Wt=function(){};Wt.prototype.append=function($){return $.length?($=Wt.from($),!this.length&&$||$.length<200&&this.leafAppend($)||this.length<200&&$.leafPrepend(this)||this.appendInner($)):this},Wt.prototype.prepend=function($){return $.length?Wt.from($).append(this):this},Wt.prototype.appendInner=function($){return new be(this,$)},Wt.prototype.slice=function($,ct){return void 0===$&&($=0),void 0===ct&&(ct=this.length),$>=ct?Wt.empty:this.sliceInner(Math.max(0,$),Math.min(this.length,ct))},Wt.prototype.get=function($){if(!($<0||$>=this.length))return this.getInner($)},Wt.prototype.forEach=function($,ct,_t){void 0===ct&&(ct=0),void 0===_t&&(_t=this.length),ct<=_t?this.forEachInner($,ct,_t,0):this.forEachInvertedInner($,ct,_t,0)},Wt.prototype.map=function($,ct,_t){void 0===ct&&(ct=0),void 0===_t&&(_t=this.length);var Mt=[];return this.forEach(function(Kt,Ft){return Mt.push($(Kt,Ft))},ct,_t),Mt},Wt.from=function($){return $ instanceof Wt?$:$&&$.length?new pe($):Wt.empty};var pe=function(Y){function $(_t){Y.call(this),this.values=_t}Y&&($.__proto__=Y),($.prototype=Object.create(Y&&Y.prototype)).constructor=$;var ct={length:{configurable:!0},depth:{configurable:!0}};return $.prototype.flatten=function(){return this.values},$.prototype.sliceInner=function(Mt,Kt){return 0==Mt&&Kt==this.length?this:new $(this.values.slice(Mt,Kt))},$.prototype.getInner=function(Mt){return this.values[Mt]},$.prototype.forEachInner=function(Mt,Kt,Ft,Qt){for(var ne=Kt;ne<Ft;ne++)if(!1===Mt(this.values[ne],Qt+ne))return!1},$.prototype.forEachInvertedInner=function(Mt,Kt,Ft,Qt){for(var ne=Kt-1;ne>=Ft;ne--)if(!1===Mt(this.values[ne],Qt+ne))return!1},$.prototype.leafAppend=function(Mt){if(this.length+Mt.length<=200)return new $(this.values.concat(Mt.flatten()))},$.prototype.leafPrepend=function(Mt){if(this.length+Mt.length<=200)return new $(Mt.flatten().concat(this.values))},ct.length.get=function(){return this.values.length},ct.depth.get=function(){return 0},Object.defineProperties($.prototype,ct),$}(Wt);Wt.empty=new pe([]);var be=function(Y){function $(ct,_t){Y.call(this),this.left=ct,this.right=_t,this.length=ct.length+_t.length,this.depth=Math.max(ct.depth,_t.depth)+1}return Y&&($.__proto__=Y),($.prototype=Object.create(Y&&Y.prototype)).constructor=$,$.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},$.prototype.getInner=function(_t){return _t<this.left.length?this.left.get(_t):this.right.get(_t-this.left.length)},$.prototype.forEachInner=function(_t,Mt,Kt,Ft){var Qt=this.left.length;if(Mt<Qt&&!1===this.left.forEachInner(_t,Mt,Math.min(Kt,Qt),Ft)||Kt>Qt&&!1===this.right.forEachInner(_t,Math.max(Mt-Qt,0),Math.min(this.length,Kt)-Qt,Ft+Qt))return!1},$.prototype.forEachInvertedInner=function(_t,Mt,Kt,Ft){var Qt=this.left.length;if(Mt>Qt&&!1===this.right.forEachInvertedInner(_t,Mt-Qt,Math.max(Kt,Qt)-Qt,Ft+Qt)||Kt<Qt&&!1===this.left.forEachInvertedInner(_t,Math.min(Mt,Qt),Kt,Ft))return!1},$.prototype.sliceInner=function(_t,Mt){if(0==_t&&Mt==this.length)return this;var Kt=this.left.length;return Mt<=Kt?this.left.slice(_t,Mt):_t>=Kt?this.right.slice(_t-Kt,Mt-Kt):this.left.slice(_t,Kt).append(this.right.slice(0,Mt-Kt))},$.prototype.leafAppend=function(_t){var Mt=this.right.leafAppend(_t);if(Mt)return new $(this.left,Mt)},$.prototype.leafPrepend=function(_t){var Mt=this.left.leafPrepend(_t);if(Mt)return new $(Mt,this.right)},$.prototype.appendInner=function(_t){return this.left.depth>=Math.max(this.right.depth,_t.depth)+1?new $(this.left,new $(this.right,_t)):new $(this,_t)},$}(Wt);const me=Wt;class De{constructor($,ct){this.items=$,this.eventCount=ct}popEvent($,ct){if(0==this.eventCount)return null;let Mt,Kt,_t=this.items.length;for(;;_t--)if(this.items.get(_t-1).selection){--_t;break}ct&&(Mt=this.remapping(_t,this.items.length),Kt=Mt.maps.length);let Qt,ne,Ft=$.tr,fe=[],re=[];return this.items.forEach((ae,de)=>{if(!ae.step)return Mt||(Mt=this.remapping(_t,de+1),Kt=Mt.maps.length),Kt--,void re.push(ae);if(Mt){re.push(new Te(ae.map));let Le,Oe=ae.step.map(Mt.slice(Kt));Oe&&Ft.maybeStep(Oe).doc&&(Le=Ft.mapping.maps[Ft.mapping.maps.length-1],fe.push(new Te(Le,void 0,void 0,fe.length+re.length))),Kt--,Le&&Mt.appendMap(Le,Kt)}else Ft.maybeStep(ae.step);return ae.selection?(Qt=Mt?ae.selection.map(Mt.slice(Kt)):ae.selection,ne=new De(this.items.slice(0,_t).append(re.reverse().concat(fe)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:ne,transform:Ft,selection:Qt}}addTransform($,ct,_t,Mt){let Kt=[],Ft=this.eventCount,Qt=this.items,ne=!Mt&&Qt.length?Qt.get(Qt.length-1):null;for(let re=0;re<$.steps.length;re++){let Oe,ae=$.steps[re].invert($.docs[re]),de=new Te($.mapping.maps[re],ae,ct);(Oe=ne&&ne.merge(de))&&(de=Oe,re?Kt.pop():Qt=Qt.slice(0,Qt.length-1)),Kt.push(de),ct&&(Ft++,ct=void 0),Mt||(ne=de)}let fe=Ft-_t.depth;return fe>Me&&(Qt=function(Y,$){let ct;return Y.forEach((_t,Mt)=>{if(_t.selection&&0==$--)return ct=Mt,!1}),Y.slice(ct)}(Qt,fe),Ft-=fe),new De(Qt.append(Kt),Ft)}remapping($,ct){let _t=new W.vs;return this.items.forEach((Mt,Kt)=>{_t.appendMap(Mt.map,null!=Mt.mirrorOffset&&Kt-Mt.mirrorOffset>=$?_t.maps.length-Mt.mirrorOffset:void 0)},$,ct),_t}addMaps($){return 0==this.eventCount?this:new De(this.items.append($.map(ct=>new Te(ct))),this.eventCount)}rebased($,ct){if(!this.eventCount)return this;let _t=[],Mt=Math.max(0,this.items.length-ct),Kt=$.mapping,Ft=$.steps.length,Qt=this.eventCount;this.items.forEach(de=>{de.selection&&Qt--},Mt);let ne=ct;this.items.forEach(de=>{let Oe=Kt.getMirror(--ne);if(null==Oe)return;Ft=Math.min(Ft,Oe);let Le=Kt.maps[Oe];if(de.step){let en=$.steps[Oe].invert($.docs[Oe]),ue=de.selection&&de.selection.map(Kt.slice(ne+1,Oe));ue&&Qt++,_t.push(new Te(Le,en,ue))}else _t.push(new Te(Le))},Mt);let fe=[];for(let de=ct;de<Ft;de++)fe.push(new Te(Kt.maps[de]));let re=this.items.slice(0,Mt).append(fe).append(_t),ae=new De(re,Qt);return ae.emptyItemCount()>500&&(ae=ae.compress(this.items.length-_t.length)),ae}emptyItemCount(){let $=0;return this.items.forEach(ct=>{ct.step||$++}),$}compress($=this.items.length){let ct=this.remapping(0,$),_t=ct.maps.length,Mt=[],Kt=0;return this.items.forEach((Ft,Qt)=>{if(Qt>=$)Mt.push(Ft),Ft.selection&&Kt++;else if(Ft.step){let ne=Ft.step.map(ct.slice(_t)),fe=ne&&ne.getMap();if(_t--,fe&&ct.appendMap(fe,_t),ne){let re=Ft.selection&&Ft.selection.map(ct.slice(_t));re&&Kt++;let de,ae=new Te(fe.invert(),ne,re),Oe=Mt.length-1;(de=Mt.length&&Mt[Oe].merge(ae))?Mt[Oe]=de:Mt.push(ae)}}else Ft.map&&_t--},this.items.length,0),new De(me.from(Mt.reverse()),Kt)}}De.empty=new De(me.empty,0);class Te{constructor($,ct,_t,Mt){this.map=$,this.step=ct,this.selection=_t,this.mirrorOffset=Mt}merge($){if(this.step&&$.step&&!$.selection){let ct=$.step.merge(this.step);if(ct)return new Te(ct.getMap().invert(),ct,this.selection)}}}class Pe{constructor($,ct,_t,Mt){this.done=$,this.undone=ct,this.prevRanges=_t,this.prevTime=Mt}}const Me=20;function Ee(Y){let $=[];return Y.forEach((ct,_t,Mt,Kt)=>$.push(Mt,Kt)),$}function we(Y,$){if(!Y)return null;let ct=[];for(let _t=0;_t<Y.length;_t+=2){let Mt=$.map(Y[_t],1),Kt=$.map(Y[_t+1],-1);Mt<=Kt&&ct.push(Mt,Kt)}return ct}function Ve(Y,$,ct,_t){let Mt=Ne($),Kt=Ce.get($).spec.config,Ft=(_t?Y.undone:Y.done).popEvent($,Mt);if(!Ft)return;let Qt=Ft.selection.resolve(Ft.transform.doc),ne=(_t?Y.done:Y.undone).addTransform(Ft.transform,$.selection.getBookmark(),Kt,Mt),fe=new Pe(_t?ne:Ft.remaining,_t?Ft.remaining:ne,null,0);ct(Ft.transform.setSelection(Qt).setMeta(Ce,{redo:_t,historyState:fe}).scrollIntoView())}let ze=!1,We=null;function Ne(Y){let $=Y.plugins;if(We!=$){ze=!1,We=$;for(let ct=0;ct<$.length;ct++)if($[ct].spec.historyPreserveItems){ze=!0;break}}return ze}const Ce=new kt.H$("history"),ge=new kt.H$("closeHistory");function ye(Y={}){return new kt.Sy({key:Ce,state:{init:()=>new Pe(De.empty,De.empty,null,0),apply:($,ct,_t)=>function(Y,$,ct,_t){let Kt,Mt=ct.getMeta(Ce);if(Mt)return Mt.historyState;ct.getMeta(ge)&&(Y=new Pe(Y.done,Y.undone,null,0));let Ft=ct.getMeta("appendedTransaction");if(0==ct.steps.length)return Y;if(Ft&&Ft.getMeta(Ce))return Ft.getMeta(Ce).redo?new Pe(Y.done.addTransform(ct,void 0,_t,Ne($)),Y.undone,Ee(ct.mapping.maps[ct.steps.length-1]),Y.prevTime):new Pe(Y.done,Y.undone.addTransform(ct,void 0,_t,Ne($)),null,Y.prevTime);if(!1===ct.getMeta("addToHistory")||Ft&&!1===Ft.getMeta("addToHistory"))return(Kt=ct.getMeta("rebased"))?new Pe(Y.done.rebased(ct,Kt),Y.undone.rebased(ct,Kt),we(Y.prevRanges,ct.mapping),Y.prevTime):new Pe(Y.done.addMaps(ct.mapping.maps),Y.undone.addMaps(ct.mapping.maps),we(Y.prevRanges,ct.mapping),Y.prevTime);{let Qt=0==Y.prevTime||!Ft&&(Y.prevTime<(ct.time||0)-_t.newGroupDelay||!function(Y,$){if(!$)return!1;if(!Y.docChanged)return!0;let ct=!1;return Y.mapping.maps[0].forEach((_t,Mt)=>{for(let Kt=0;Kt<$.length;Kt+=2)_t<=$[Kt+1]&&Mt>=$[Kt]&&(ct=!0)}),ct}(ct,Y.prevRanges)),ne=Ft?we(Y.prevRanges,ct.mapping):Ee(ct.mapping.maps[ct.steps.length-1]);return new Pe(Y.done.addTransform(ct,Qt?$.selection.getBookmark():void 0,_t,Ne($)),De.empty,ne,ct.time)}}(ct,_t,$,Y)},config:Y={depth:Y.depth||100,newGroupDelay:Y.newGroupDelay||500},props:{handleDOMEvents:{beforeinput($,ct){let _t=ct.inputType,Mt="historyUndo"==_t?Tt:"historyRedo"==_t?O:null;return!!Mt&&(ct.preventDefault(),Mt($.state,$.dispatch))}}}})}const Tt=(Y,$)=>{let ct=Ce.getState(Y);return!(!ct||0==ct.done.eventCount||($&&Ve(ct,Y,$,!1),0))},O=(Y,$)=>{let ct=Ce.getState(Y);return!(!ct||0==ct.undone.eventCount||($&&Ve(ct,Y,$,!0),0))},L=M.Extension.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:Y,dispatch:$})=>Tt(Y,$),redo:()=>({state:Y,dispatch:$})=>O(Y,$)}),addProseMirrorPlugins(){return[ye(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),V=M.Node.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:Y}){return["hr",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y)]},addCommands(){return{setHorizontalRule:()=>({chain:Y})=>Y().insertContent({type:this.name}).command(({tr:$,dispatch:ct})=>{var _t;if(ct){const{$to:Mt}=$.selection,Kt=Mt.end();if(Mt.nodeAfter)$.setSelection(kt.Bs.create($.doc,Mt.pos));else{const Ft=null===(_t=Mt.parent.type.contentMatch.defaultType)||void 0===_t?void 0:_t.create();Ft&&($.insert(Kt,Ft),$.setSelection(kt.Bs.create($.doc,Kt)))}$.scrollIntoView()}return!0}).run()}},addInputRules(){return[(0,M.nodeInputRule)({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),U=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,Ot=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,Rt=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,H=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,a=M.Mark.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:Y=>"normal"!==Y.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:Y}){return["em",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{setItalic:()=>({commands:Y})=>Y.setMark(this.name),toggleItalic:()=>({commands:Y})=>Y.toggleMark(this.name),unsetItalic:()=>({commands:Y})=>Y.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,M.markInputRule)({find:U,type:this.type}),(0,M.markInputRule)({find:Rt,type:this.type})]},addPasteRules(){return[(0,M.markPasteRule)({find:Ot,type:this.type}),(0,M.markPasteRule)({find:H,type:this.type})]}}),u=M.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:Y}){return["li",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),E=M.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:Y}){return["li",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),P=M.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:Y=>!!Y.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:Y}){return["span",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:Y,commands:$})=>{const ct=(0,M.getMarkAttributes)(Y,this.type);return!!Object.entries(ct).some(([,Mt])=>!!Mt)||$.unsetMark(this.name)}}}}),w=/^(\d+)\.\s$/,F=M.Node.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:Y=>Y.hasAttribute("start")?parseInt(Y.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:Y}){const _t=Y,{start:$}=_t,ct=jo(_t,["start"]);return 1===$?["ol",(0,M.mergeAttributes)(this.options.HTMLAttributes,ct),0]:["ol",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{toggleOrderedList:()=>({commands:Y,chain:$})=>this.options.keepAttributes?$().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(E.name,this.editor.getAttributes(P.name)).run():Y.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let Y=(0,M.wrappingInputRule)({find:w,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(Y=(0,M.wrappingInputRule)({find:w,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(P.name),editor:this.editor})),[Y]}}),at=M.Node.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:Y}){return["p",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{setParagraph:()=>({commands:Y})=>Y.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Lt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,te=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,ee=M.Mark.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:Y=>!!Y.includes("line-through")&&{}}],renderHTML({HTMLAttributes:Y}){return["s",(0,M.mergeAttributes)(this.options.HTMLAttributes,Y),0]},addCommands(){return{setStrike:()=>({commands:Y})=>Y.setMark(this.name),toggleStrike:()=>({commands:Y})=>Y.toggleMark(this.name),unsetStrike:()=>({commands:Y})=>Y.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,M.markInputRule)({find:Lt,type:this.type})]},addPasteRules(){return[(0,M.markPasteRule)({find:te,type:this.type})]}}),Re=M.Node.create({name:"text",group:"inline"}),$e=M.Extension.create({name:"starterKit",addExtensions(){var Y,$,ct,_t,Mt,Kt,Ft,Qt,ne,fe,re,ae,de,Oe,Le,en,ue,mn,vn,Mn,nn,gn,an,hn,cn,Ze,on,Xe,qe,T,C,f,h,v,A,R;const K=[];return!1!==(null===(Y=this.options)||void 0===Y?void 0:Y.blockquote)&&K.push(b.configure(null===($=this.options)||void 0===$?void 0:$.blockquote)),!1!==(null===(ct=this.options)||void 0===ct?void 0:ct.bold)&&K.push(q.configure(null===(_t=this.options)||void 0===_t?void 0:_t.bold)),!1!==(null===(Mt=this.options)||void 0===Mt?void 0:Mt.bulletList)&&K.push(nt.configure(null===(Kt=this.options)||void 0===Kt?void 0:Kt.bulletList)),!1!==(null===(Ft=this.options)||void 0===Ft?void 0:Ft.code)&&K.push(At.configure(null===(Qt=this.options)||void 0===Qt?void 0:Qt.code)),!1!==(null===(ne=this.options)||void 0===ne?void 0:ne.codeBlock)&&K.push(ht.configure(null===(fe=this.options)||void 0===fe?void 0:fe.codeBlock)),!1!==(null===(re=this.options)||void 0===re?void 0:re.document)&&K.push(tt.configure(null===(ae=this.options)||void 0===ae?void 0:ae.document)),!1!==(null===(de=this.options)||void 0===de?void 0:de.dropcursor)&&K.push(Dt.configure(null===(Oe=this.options)||void 0===Oe?void 0:Oe.dropcursor)),!1!==(null===(Le=this.options)||void 0===Le?void 0:Le.gapcursor)&&K.push(wt.configure(null===(en=this.options)||void 0===en?void 0:en.gapcursor)),!1!==(null===(ue=this.options)||void 0===ue?void 0:ue.hardBreak)&&K.push(Zt.configure(null===(mn=this.options)||void 0===mn?void 0:mn.hardBreak)),!1!==(null===(vn=this.options)||void 0===vn?void 0:vn.heading)&&K.push(jt.configure(null===(Mn=this.options)||void 0===Mn?void 0:Mn.heading)),!1!==(null===(nn=this.options)||void 0===nn?void 0:nn.history)&&K.push(L.configure(null===(gn=this.options)||void 0===gn?void 0:gn.history)),!1!==(null===(an=this.options)||void 0===an?void 0:an.horizontalRule)&&K.push(V.configure(null===(hn=this.options)||void 0===hn?void 0:hn.horizontalRule)),!1!==(null===(cn=this.options)||void 0===cn?void 0:cn.italic)&&K.push(a.configure(null===(Ze=this.options)||void 0===Ze?void 0:Ze.italic)),!1!==(null===(on=this.options)||void 0===on?void 0:on.listItem)&&K.push(u.configure(null===(Xe=this.options)||void 0===Xe?void 0:Xe.listItem)),!1!==(null===(qe=this.options)||void 0===qe?void 0:qe.orderedList)&&K.push(F.configure(null===(T=this.options)||void 0===T?void 0:T.orderedList)),!1!==(null===(C=this.options)||void 0===C?void 0:C.paragraph)&&K.push(at.configure(null===(f=this.options)||void 0===f?void 0:f.paragraph)),!1!==(null===(h=this.options)||void 0===h?void 0:h.strike)&&K.push(ee.configure(null===(v=this.options)||void 0===v?void 0:v.strike)),!1!==(null===(A=this.options)||void 0===A?void 0:A.text)&&K.push(Re.configure(null===(R=this.options)||void 0===R?void 0:R.text)),K}})},51919:(Vt,yt,c)=>{c.r(yt),c.d(yt,{TableCellBackground:()=>l});const l=c(12867).Extension.create({addGlobalAttributes:()=>[{types:["tableCell","tableHeader"],attributes:{background:{default:null,renderHTML:({background:b})=>b?{style:`background: ${b}`}:null,parseHTML:({style:b})=>b.background,keepOnSplit:!1}}}],addCommands:()=>({setCellBackground:b=>({chain:S})=>S().updateAttributes("tableCell",{background:b}).updateAttributes("tableHeader",{background:b}).run(),unsetCellBackground:()=>({chain:b})=>b().updateAttributes("tableCell",{background:null}).updateAttributes("tableHeader",{background:null}).run()})})},86624:(Vt,yt,c)=>{c.r(yt),c.d(yt,{TuiTable:()=>qe});var N,q,M=c(12867),l=c(62463),b=c(77346),S=c(43594),g=c(70768),it=c(38480);if("undefined"!=typeof WeakMap){let T=new WeakMap;N=C=>T.get(C),q=(C,f)=>(T.set(C,f),f)}else{const T=[],C=10;let f=0;N=h=>{for(let v=0;v<T.length;v+=2)if(T[v]==h)return T[v+1]},q=(h,v)=>(f==C&&(f=0),T[f++]=h,T[f++]=v)}var et=class{constructor(T,C,f,h){this.width=T,this.height=C,this.map=f,this.problems=h}findCell(T){for(let C=0;C<this.map.length;C++){const f=this.map[C];if(f!=T)continue;const h=C%this.width,v=C/this.width|0;let A=h+1,R=v+1;for(let K=1;A<this.width&&this.map[C+K]==f;K++)A++;for(let K=1;R<this.height&&this.map[C+this.width*K]==f;K++)R++;return{left:h,top:v,right:A,bottom:R}}throw new RangeError(`No cell with offset ${T} found`)}colCount(T){for(let C=0;C<this.map.length;C++)if(this.map[C]==T)return C%this.width;throw new RangeError(`No cell with offset ${T} found`)}nextCell(T,C,f){const{left:h,right:v,top:A,bottom:R}=this.findCell(T);return"horiz"==C?(f<0?0==h:v==this.width)?null:this.map[A*this.width+(f<0?h-1:v)]:(f<0?0==A:R==this.height)?null:this.map[h+this.width*(f<0?A-1:R)]}rectBetween(T,C){const{left:f,right:h,top:v,bottom:A}=this.findCell(T),{left:R,right:K,top:z,bottom:G}=this.findCell(C);return{left:Math.min(f,R),top:Math.min(v,z),right:Math.max(h,K),bottom:Math.max(A,G)}}cellsInRect(T){const C=[],f={};for(let h=T.top;h<T.bottom;h++)for(let v=T.left;v<T.right;v++){const A=h*this.width+v,R=this.map[A];f[R]||(f[R]=!0,!(v==T.left&&v&&this.map[A-1]==R||h==T.top&&h&&this.map[A-this.width]==R)&&C.push(R))}return C}positionAt(T,C,f){for(let h=0,v=0;;h++){const A=v+f.child(h).nodeSize;if(h==T){let R=C+T*this.width;const K=(T+1)*this.width;for(;R<K&&this.map[R]<v;)R++;return R==K?A-1:this.map[R]}v=A}}static get(T){return N(T)||q(T,function(T){if("table"!=T.type.spec.tableRole)throw new RangeError("Not a table node: "+T.type.name);const C=function(T){let C=-1,f=!1;for(let h=0;h<T.childCount;h++){const v=T.child(h);let A=0;if(f)for(let R=0;R<h;R++){const K=T.child(R);for(let z=0;z<K.childCount;z++){const G=K.child(z);R+G.attrs.rowspan>h&&(A+=G.attrs.colspan)}}for(let R=0;R<v.childCount;R++){const K=v.child(R);A+=K.attrs.colspan,K.attrs.rowspan>1&&(f=!0)}-1==C?C=A:C!=A&&(C=Math.max(C,A))}return C}(T),f=T.childCount,h=[];let v=0,A=null;const R=[];for(let G=0,Et=C*f;G<Et;G++)h[G]=0;for(let G=0,Et=0;G<f;G++){const xt=T.child(G);Et++;for(let Gt=0;;Gt++){for(;v<h.length&&0!=h[v];)v++;if(Gt==xt.childCount)break;const se=xt.child(Gt),{colspan:ie,rowspan:xe,colwidth:rn}=se.attrs;for(let Qe=0;Qe<xe;Qe++){if(Qe+G>=f){(A||(A=[])).push({type:"overlong_rowspan",pos:Et,n:xe-Qe});break}const ve=v+Qe*C;for(let Se=0;Se<ie;Se++){0==h[ve+Se]?h[ve+Se]=Et:(A||(A=[])).push({type:"collision",row:G,pos:Et,n:ie-Se});const _n=rn&&rn[Se];if(_n){const dn=(ve+Se)%C*2,he=R[dn];null==he||he!=_n&&1==R[dn+1]?(R[dn]=_n,R[dn+1]=1):he==_n&&R[dn+1]++}}}v+=ie,Et+=se.nodeSize}const Nt=(G+1)*C;let zt=0;for(;v<Nt;)0==h[v++]&&zt++;zt&&(A||(A=[])).push({type:"missing",row:G,n:zt}),Et++}const K=new et(C,f,h,A);let z=!1;for(let G=0;!z&&G<R.length;G+=2)null!=R[G]&&R[G+1]<f&&(z=!0);return z&&function(T,C,f){T.problems||(T.problems=[]);const h={};for(let v=0;v<T.map.length;v++){const A=T.map[v];if(h[A])continue;h[A]=!0;const R=f.nodeAt(A);if(!R)throw new RangeError(`No cell with offset ${A} found`);let K=null;const z=R.attrs;for(let G=0;G<z.colspan;G++){const xt=C[(v+G)%T.width*2];null!=xt&&(!z.colwidth||z.colwidth[G]!=xt)&&((K||(K=vt(z)))[G]=xt)}K&&T.problems.unshift({type:"colwidth mismatch",pos:A,colwidth:K})}}(K,R,T),K}(T))}};function vt(T){if(T.colwidth)return T.colwidth.slice();const C=[];for(let f=0;f<T.colspan;f++)C.push(0);return C}function St(T){let C=T.cached.tableNodeTypes;if(!C){C=T.cached.tableNodeTypes={};for(const f in T.nodes){const h=T.nodes[f],v=h.spec.tableRole;v&&(C[v]=h)}}return C}var Pt=new l.H$("selectingCells");function ht(T){for(let C=T.depth-1;C>0;C--)if("row"==T.node(C).type.spec.tableRole)return T.node(0).resolve(T.before(C+1));return null}function W(T){const C=T.selection.$head;for(let f=C.depth;f>0;f--)if("row"==C.node(f).type.spec.tableRole)return!0;return!1}function mt(T){const C=T.selection;if("$anchorCell"in C&&C.$anchorCell)return C.$anchorCell.pos>C.$headCell.pos?C.$anchorCell:C.$headCell;if("node"in C&&C.node&&"cell"==C.node.type.spec.tableRole)return C.$anchor;const f=ht(C.$head)||function(T){for(let C=T.nodeAfter,f=T.pos;C;C=C.firstChild,f++){const h=C.type.spec.tableRole;if("cell"==h||"header_cell"==h)return T.doc.resolve(f)}for(let C=T.nodeBefore,f=T.pos;C;C=C.lastChild,f--){const h=C.type.spec.tableRole;if("cell"==h||"header_cell"==h)return T.doc.resolve(f-C.nodeSize)}}(C.$head);if(f)return f;throw new RangeError(`No cell found around position ${C.head}`)}function Dt(T){return"row"==T.parent.type.spec.tableRole&&!!T.nodeAfter}function bt(T,C){return T.depth==C.depth&&T.pos>=C.start(-1)&&T.pos<=C.end(-1)}function Jt(T,C,f){const h=T.node(-1),v=et.get(h),A=T.start(-1),R=v.nextCell(T.pos-A,C,f);return null==R?null:T.node(0).resolve(A+R)}function pt(T,C,f=1){const h=_e(qt({},T),{colspan:T.colspan-f});return h.colwidth&&(h.colwidth=h.colwidth.slice(),h.colwidth.splice(C,f),h.colwidth.some(v=>v>0)||(h.colwidth=null)),h}function B(T,C,f=1){const h=_e(qt({},T),{colspan:T.colspan+f});if(h.colwidth){h.colwidth=h.colwidth.slice();for(let v=0;v<f;v++)h.colwidth.splice(C,0,0)}return h}var dt=class extends l.Y1{constructor(T,C=T){const f=T.node(-1),h=et.get(f),v=T.start(-1),A=h.rectBetween(T.pos-v,C.pos-v),R=T.node(0),K=h.cellsInRect(A).filter(G=>G!=C.pos-v);K.unshift(C.pos-v);const z=K.map(G=>{const Et=f.nodeAt(G);if(!Et)throw RangeError(`No cell with offset ${G} found`);const xt=v+G+1;return new l.xm(R.resolve(xt),R.resolve(xt+Et.content.size))});super(z[0].$from,z[0].$to,z),this.$anchorCell=T,this.$headCell=C}map(T,C){const f=T.resolve(C.map(this.$anchorCell.pos)),h=T.resolve(C.map(this.$headCell.pos));if(Dt(f)&&Dt(h)&&bt(f,h)){const v=this.$anchorCell.node(-1)!=f.node(-1);return v&&this.isRowSelection()?dt.rowSelection(f,h):v&&this.isColSelection()?dt.colSelection(f,h):new dt(f,h)}return l.Bs.between(f,h)}content(){const T=this.$anchorCell.node(-1),C=et.get(T),f=this.$anchorCell.start(-1),h=C.rectBetween(this.$anchorCell.pos-f,this.$headCell.pos-f),v={},A=[];for(let K=h.top;K<h.bottom;K++){const z=[];for(let G=K*C.width+h.left,Et=h.left;Et<h.right;Et++,G++){const xt=C.map[G];if(v[xt])continue;v[xt]=!0;const Nt=C.findCell(xt);let zt=T.nodeAt(xt);if(!zt)throw RangeError(`No cell with offset ${xt} found`);const Gt=h.left-Nt.left,se=Nt.right-h.right;if(Gt>0||se>0){let ie=zt.attrs;if(Gt>0&&(ie=pt(ie,0,Gt)),se>0&&(ie=pt(ie,ie.colspan-se,se)),Nt.left<h.left){if(zt=zt.type.createAndFill(ie),!zt)throw RangeError(`Could not create cell with attrs ${JSON.stringify(ie)}`)}else zt=zt.type.create(ie,zt.content)}if(Nt.top<h.top||Nt.bottom>h.bottom){const ie=_e(qt({},zt.attrs),{rowspan:Math.min(Nt.bottom,h.bottom)-Math.max(Nt.top,h.top)});zt=Nt.top<h.top?zt.type.createAndFill(ie):zt.type.create(ie,zt.content)}z.push(zt)}A.push(T.child(K).copy(b.HY.from(z)))}const R=this.isColSelection()&&this.isRowSelection()?T:A;return new b.p2(b.HY.from(R),1,1)}replace(T,C=b.p2.empty){const f=T.steps.length,h=this.ranges;for(let A=0;A<h.length;A++){const{$from:R,$to:K}=h[A],z=T.mapping.slice(f);T.replace(z.map(R.pos),z.map(K.pos),A?b.p2.empty:C)}const v=l.Y1.findFrom(T.doc.resolve(T.mapping.slice(f).map(this.to)),-1);v&&T.setSelection(v)}replaceWith(T,C){this.replace(T,new b.p2(b.HY.from(C),0,0))}forEachCell(T){const C=this.$anchorCell.node(-1),f=et.get(C),h=this.$anchorCell.start(-1),v=f.cellsInRect(f.rectBetween(this.$anchorCell.pos-h,this.$headCell.pos-h));for(let A=0;A<v.length;A++)T(C.nodeAt(v[A]),h+v[A])}isColSelection(){const T=this.$anchorCell.index(-1),C=this.$headCell.index(-1);return!(Math.min(T,C)>0)&&Math.max(T+this.$anchorCell.nodeAfter.attrs.rowspan,C+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(T,C=T){const f=T.node(-1),h=et.get(f),v=T.start(-1),A=h.findCell(T.pos-v),R=h.findCell(C.pos-v),K=T.node(0);return A.top<=R.top?(A.top>0&&(T=K.resolve(v+h.map[A.left])),R.bottom<h.height&&(C=K.resolve(v+h.map[h.width*(h.height-1)+R.right-1]))):(R.top>0&&(C=K.resolve(v+h.map[R.left])),A.bottom<h.height&&(T=K.resolve(v+h.map[h.width*(h.height-1)+A.right-1]))),new dt(T,C)}isRowSelection(){const T=this.$anchorCell.node(-1),C=et.get(T),f=this.$anchorCell.start(-1),h=C.colCount(this.$anchorCell.pos-f),v=C.colCount(this.$headCell.pos-f);return!(Math.min(h,v)>0)&&Math.max(h+this.$anchorCell.nodeAfter.attrs.colspan,v+this.$headCell.nodeAfter.attrs.colspan)==C.width}eq(T){return T instanceof dt&&T.$anchorCell.pos==this.$anchorCell.pos&&T.$headCell.pos==this.$headCell.pos}static rowSelection(T,C=T){const f=T.node(-1),h=et.get(f),v=T.start(-1),A=h.findCell(T.pos-v),R=h.findCell(C.pos-v),K=T.node(0);return A.left<=R.left?(A.left>0&&(T=K.resolve(v+h.map[A.top*h.width])),R.right<h.width&&(C=K.resolve(v+h.map[h.width*(R.top+1)-1]))):(R.left>0&&(C=K.resolve(v+h.map[R.top*h.width])),A.right<h.width&&(T=K.resolve(v+h.map[h.width*(A.top+1)-1]))),new dt(T,C)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(T,C){return new dt(T.resolve(C.anchor),T.resolve(C.head))}static create(T,C,f=C){return new dt(T.resolve(C),T.resolve(f))}getBookmark(){return new st(this.$anchorCell.pos,this.$headCell.pos)}};dt.prototype.visible=!1,l.Y1.jsonID("cell",dt);var st=class{constructor(T,C){this.anchor=T,this.head=C}map(T){return new st(T.map(this.anchor),T.map(this.head))}resolve(T){const C=T.resolve(this.anchor),f=T.resolve(this.head);return"row"==C.parent.type.spec.tableRole&&"row"==f.parent.type.spec.tableRole&&C.index()<C.parent.childCount&&f.index()<f.parent.childCount&&bt(C,f)?new dt(C,f):l.Y1.near(f,1)}};function J(T){if(!(T.selection instanceof dt))return null;const C=[];return T.selection.forEachCell((f,h)=>{C.push(S.p.node(h,h+f.nodeSize,{class:"selectedCell"}))}),S.EH.create(T.doc,C)}var Zt=new l.H$("fix-tables");function jt(T,C,f,h){const v=T.childCount,A=C.childCount;t:for(let R=0,K=0;R<A;R++){const z=C.child(R);for(let G=K,Et=Math.min(v,R+3);G<Et;G++)if(T.child(G)==z){K=G+1,f+=z.nodeSize;continue t}h(z,f),K<v&&T.child(K).sameMarkup(z)?jt(T.child(K),z,f+1,h):z.nodesBetween(0,z.content.size,h,f+1),f+=z.nodeSize}}function oe(T,C){let f;const h=(v,A)=>{"table"==v.type.spec.tableRole&&(f=function(T,C,f,h){const v=et.get(C);if(!v.problems)return h;h||(h=T.tr);const A=[];for(let z=0;z<v.height;z++)A.push(0);for(let z=0;z<v.problems.length;z++){const G=v.problems[z];if("collision"==G.type){const Et=C.nodeAt(G.pos);if(!Et)continue;const xt=Et.attrs;for(let Nt=0;Nt<xt.rowspan;Nt++)A[G.row+Nt]+=G.n;h.setNodeMarkup(h.mapping.map(f+1+G.pos),null,pt(xt,xt.colspan-G.n,G.n))}else if("missing"==G.type)A[G.row]+=G.n;else if("overlong_rowspan"==G.type){const Et=C.nodeAt(G.pos);if(!Et)continue;h.setNodeMarkup(h.mapping.map(f+1+G.pos),null,_e(qt({},Et.attrs),{rowspan:Et.attrs.rowspan-G.n}))}else if("colwidth mismatch"==G.type){const Et=C.nodeAt(G.pos);if(!Et)continue;h.setNodeMarkup(h.mapping.map(f+1+G.pos),null,_e(qt({},Et.attrs),{colwidth:G.colwidth}))}}let R,K;for(let z=0;z<A.length;z++)A[z]&&(null==R&&(R=z),K=z);for(let z=0,G=f+1;z<v.height;z++){const Et=C.child(z),xt=G+Et.nodeSize,Nt=A[z];if(Nt>0){let zt="cell";Et.firstChild&&(zt=Et.firstChild.type.spec.tableRole);const Gt=[];for(let ie=0;ie<Nt;ie++){const xe=St(T.schema)[zt].createAndFill();xe&&Gt.push(xe)}h.insert(h.mapping.map(0!=z&&R!=z-1||K!=z?xt-1:G+1),Gt)}G=xt}return h.setMeta(Zt,{fixTables:!0})}(T,v,A,f))};return C?C.doc!=T.doc&&jt(C.doc,T.doc,0,h):T.doc.descendants(h),f}function Ae(T,C){const f=T.createAndFill();return new it.wx(f).replace(0,f.content.size,C).doc}function De(T,C,f,h,v,A,R,K){if(0==R||R==C.height)return!1;let z=!1;for(let G=v;G<A;G++){const Et=R*C.width+G,xt=C.map[Et];if(C.map[Et-C.width]==xt){z=!0;const Nt=f.nodeAt(xt),{top:zt,left:Gt}=C.findCell(xt);T.setNodeMarkup(T.mapping.slice(K).map(xt+h),null,_e(qt({},Nt.attrs),{rowspan:R-zt})),T.insert(T.mapping.slice(K).map(C.positionAt(R,Gt,f)),Nt.type.createAndFill(_e(qt({},Nt.attrs),{rowspan:zt+Nt.attrs.rowspan-R}))),G+=Nt.attrs.colspan-1}}return z}function He(T,C,f,h,v,A,R,K){if(0==R||R==C.width)return!1;let z=!1;for(let G=v;G<A;G++){const Et=G*C.width+R,xt=C.map[Et];if(C.map[Et-1]==xt){z=!0;const Nt=f.nodeAt(xt),zt=C.colCount(xt),Gt=T.mapping.slice(K).map(xt+h);T.setNodeMarkup(Gt,null,pt(Nt.attrs,R-zt,Nt.attrs.colspan-(R-zt))),T.insert(Gt+Nt.nodeSize,Nt.type.createAndFill(pt(Nt.attrs,0,R-zt))),G+=Nt.attrs.rowspan-1}}return z}function Te(T,C,f,h,v){let A=f?T.doc.nodeAt(f-1):T.doc;if(!A)throw new Error("No table found");let R=et.get(A);const{top:K,left:z}=h,G=z+v.width,Et=K+v.height,xt=T.tr;let Nt=0;function zt(){if(A=f?xt.doc.nodeAt(f-1):xt.doc,!A)throw new Error("No table found");R=et.get(A),Nt=xt.mapping.maps.length}(function(T,C,f,h,v,A,R){const z=St(T.doc.type.schema);let G,Et;if(v>C.width)for(let xt=0,Nt=0;xt<C.height;xt++){const zt=f.child(xt);Nt+=zt.nodeSize;const Gt=[];let se;se=null==zt.lastChild||zt.lastChild.type==z.cell?G||(G=z.cell.createAndFill()):Et||(Et=z.header_cell.createAndFill());for(let ie=C.width;ie<v;ie++)Gt.push(se);T.insert(T.mapping.slice(R).map(Nt-1+h),Gt)}if(A>C.height){const xt=[];for(let Gt=0,se=(C.height-1)*C.width;Gt<Math.max(C.width,v);Gt++){const ie=!(Gt>=C.width)&&f.nodeAt(C.map[se+Gt]).type==z.header_cell;xt.push(ie?Et||(Et=z.header_cell.createAndFill()):G||(G=z.cell.createAndFill()))}const Nt=z.row.create(null,b.HY.from(xt)),zt=[];for(let Gt=C.height;Gt<A;Gt++)zt.push(Nt);T.insert(T.mapping.slice(R).map(h+f.nodeSize-2),zt)}return!(!G&&!Et)})(xt,R,A,f,G,Et,Nt)&&zt(),De(xt,R,A,f,z,G,K,Nt)&&zt(),De(xt,R,A,f,z,G,Et,Nt)&&zt(),He(xt,R,A,f,K,Et,z,Nt)&&zt(),He(xt,R,A,f,K,Et,G,Nt)&&zt();for(let Gt=K;Gt<Et;Gt++){const se=R.positionAt(Gt,z,A),ie=R.positionAt(Gt,G,A);xt.replace(xt.mapping.slice(Nt).map(se+f),xt.mapping.slice(Nt).map(ie+f),new b.p2(v.rows[Gt-K],0,0))}zt(),xt.setSelection(new dt(xt.doc.resolve(f+R.positionAt(K,z,A)),xt.doc.resolve(f+R.positionAt(Et-1,G-1,A)))),C(xt)}var Pe=(0,g.$)({ArrowLeft:Ie("horiz",-1),ArrowRight:Ie("horiz",1),ArrowUp:Ie("vert",-1),ArrowDown:Ie("vert",1),"Shift-ArrowLeft":Ue("horiz",-1),"Shift-ArrowRight":Ue("horiz",1),"Shift-ArrowUp":Ue("vert",-1),"Shift-ArrowDown":Ue("vert",1),Backspace:Ee,"Mod-Backspace":Ee,Delete:Ee,"Mod-Delete":Ee});function Me(T,C,f){return!f.eq(T.selection)&&(C&&C(T.tr.setSelection(f).scrollIntoView()),!0)}function Ie(T,C){return(f,h,v)=>{if(!v)return!1;const A=f.selection;if(A instanceof dt)return Me(f,h,l.Y1.near(A.$headCell,C));if("horiz"!=T&&!A.empty)return!1;const R=We(v,T,C);if(null==R)return!1;if("horiz"==T)return Me(f,h,l.Y1.near(f.doc.resolve(A.head+C),C));{const K=f.doc.resolve(R),z=Jt(K,T,C);let G;return G=z?l.Y1.near(z,1):C<0?l.Y1.near(f.doc.resolve(K.before(-1)),-1):l.Y1.near(f.doc.resolve(K.after(-1)),1),Me(f,h,G)}}}function Ue(T,C){return(f,h,v)=>{if(!v)return!1;const A=f.selection;let R;if(A instanceof dt)R=A;else{const z=We(v,T,C);if(null==z)return!1;R=new dt(f.doc.resolve(z))}const K=Jt(R.$headCell,T,C);return!!K&&Me(f,h,new dt(R.$anchorCell,K))}}function Ee(T,C){const f=T.selection;if(!(f instanceof dt))return!1;if(C){const h=T.tr,v=St(T.schema).cell.createAndFill().content;f.forEachCell((A,R)=>{A.content.eq(v)||h.replace(h.mapping.map(R+1),h.mapping.map(R+A.nodeSize-1),new b.p2(v,0,0))}),h.docChanged&&C(h)}return!0}function we(T,C){const h=ht(T.state.doc.resolve(C));return!!h&&(T.dispatch(T.state.tr.setSelection(new dt(h))),!0)}function Ve(T,C,f){if(!W(T.state))return!1;let h=function(T){if(!T.size)return null;let{content:C,openStart:f,openEnd:h}=T;for(;1==C.childCount&&(f>0&&h>0||"table"==C.child(0).type.spec.tableRole);)f--,h--,C=C.child(0).content;const v=C.child(0),A=v.type.spec.tableRole,R=v.type.schema,K=[];if("row"==A)for(let z=0;z<C.childCount;z++){let G=C.child(z).content;const Et=z?0:Math.max(0,f-1),xt=z<C.childCount-1?0:Math.max(0,h-1);(Et||xt)&&(G=Ae(St(R).row,new b.p2(G,Et,xt)).content),K.push(G)}else{if("cell"!=A&&"header_cell"!=A)return null;K.push(f||h?Ae(St(R).row,new b.p2(C,f,h)).content:C)}return function(T,C){const f=[];for(let v=0;v<C.length;v++){const A=C[v];for(let R=A.childCount-1;R>=0;R--){const{rowspan:K,colspan:z}=A.child(R).attrs;for(let G=v;G<v+K;G++)f[G]=(f[G]||0)+z}}let h=0;for(let v=0;v<f.length;v++)h=Math.max(h,f[v]);for(let v=0;v<f.length;v++)if(v>=C.length&&C.push(b.HY.empty),f[v]<h){const A=St(T).cell.createAndFill(),R=[];for(let K=f[v];K<h;K++)R.push(A);C[v]=C[v].append(b.HY.from(R))}return{height:C.length,width:h,rows:C}}(R,K)}(f);const v=T.state.selection;if(v instanceof dt){h||(h={width:1,height:1,rows:[b.HY.from(Ae(St(T.state.schema).cell,f))]});const A=v.$anchorCell.node(-1),R=v.$anchorCell.start(-1),K=et.get(A).rectBetween(v.$anchorCell.pos-R,v.$headCell.pos-R);return h=function({width:T,height:C,rows:f},h,v){if(T!=h){const A=[],R=[];for(let K=0;K<f.length;K++){const z=f[K],G=[];for(let Et=A[K]||0,xt=0;Et<h;xt++){let Nt=z.child(xt%z.childCount);Et+Nt.attrs.colspan>h&&(Nt=Nt.type.createChecked(pt(Nt.attrs,Nt.attrs.colspan,Et+Nt.attrs.colspan-h),Nt.content)),G.push(Nt),Et+=Nt.attrs.colspan;for(let zt=1;zt<Nt.attrs.rowspan;zt++)A[K+zt]=(A[K+zt]||0)+Nt.attrs.colspan}R.push(b.HY.from(G))}f=R,T=h}if(C!=v){const A=[];for(let R=0,K=0;R<v;R++,K++){const z=[],G=f[K%C];for(let Et=0;Et<G.childCount;Et++){let xt=G.child(Et);R+xt.attrs.rowspan>v&&(xt=xt.type.create(_e(qt({},xt.attrs),{rowspan:Math.max(1,v-xt.attrs.rowspan)}),xt.content)),z.push(xt)}A.push(b.HY.from(z))}f=A,C=v}return{width:T,height:C,rows:f}}(h,K.right-K.left,K.bottom-K.top),Te(T.state,T.dispatch,R,K,h),!0}if(h){const A=mt(T.state),R=A.start(-1);return Te(T.state,T.dispatch,R,et.get(A.node(-1)).findCell(A.pos-R),h),!0}return!1}function ze(T,C){var f;if(C.ctrlKey||C.metaKey)return;const h=Ne(T,C.target);let v;if(C.shiftKey&&T.state.selection instanceof dt)A(T.state.selection.$anchorCell,C),C.preventDefault();else if(C.shiftKey&&h&&null!=(v=ht(T.state.selection.$anchor))&&(null==(f=Fe(T,C))?void 0:f.pos)!=v.pos)A(v,C),C.preventDefault();else if(!h)return;function A(z,G){let Et=Fe(T,G);const xt=null==Pt.getState(T.state);if(!Et||!bt(z,Et)){if(!xt)return;Et=z}const Nt=new dt(z,Et);if(xt||!T.state.selection.eq(Nt)){const zt=T.state.tr.setSelection(Nt);xt&&zt.setMeta(Pt,z.pos),T.dispatch(zt)}}function R(){T.root.removeEventListener("mouseup",R),T.root.removeEventListener("dragstart",R),T.root.removeEventListener("mousemove",K),null!=Pt.getState(T.state)&&T.dispatch(T.state.tr.setMeta(Pt,-1))}function K(z){const G=z,Et=Pt.getState(T.state);let xt;if(null!=Et)xt=T.state.doc.resolve(Et);else if(Ne(T,G.target)!=h&&(xt=Fe(T,C),!xt))return R();xt&&A(xt,G)}T.root.addEventListener("mouseup",R),T.root.addEventListener("dragstart",R),T.root.addEventListener("mousemove",K)}function We(T,C,f){if(!(T.state.selection instanceof l.Bs))return null;const{$head:h}=T.state.selection;for(let v=h.depth-1;v>=0;v--){const A=h.node(v);if((f<0?h.index(v):h.indexAfter(v))!=(f<0?0:A.childCount))return null;if("cell"==A.type.spec.tableRole||"header_cell"==A.type.spec.tableRole){const K=h.before(v);return T.endOfTextblock("vert"==C?f>0?"down":"up":f>0?"right":"left")?K:null}}return null}function Ne(T,C){for(;C&&C!=T.dom;C=C.parentNode)if("TD"==C.nodeName||"TH"==C.nodeName)return C;return null}function Fe(T,C){const f=T.posAtCoords({left:C.clientX,top:C.clientY});return f&&f?ht(T.state.doc.resolve(f.pos)):null}var Ce=class{constructor(T,C){this.node=T,this.cellMinWidth=C,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ge(T,this.colgroup,this.table,C),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(T){return T.type==this.node.type&&(this.node=T,ge(T,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(T){return"attributes"==T.type&&(T.target==this.table||this.colgroup.contains(T.target))}};function ge(T,C,f,h,v,A){var R;let K=0,z=!0,G=C.firstChild;const Et=T.firstChild;if(Et){for(let xt=0,Nt=0;xt<Et.childCount;xt++){const{colspan:zt,colwidth:Gt}=Et.child(xt).attrs;for(let se=0;se<zt;se++,Nt++){const ie=v==Nt?A:Gt&&Gt[se],xe=ie?ie+"px":"";K+=ie||h,ie||(z=!1),G?(G.style.width!=xe&&(G.style.width=xe),G=G.nextSibling):C.appendChild(document.createElement("col")).style.width=xe}}for(;G;){const xt=G.nextSibling;null==(R=G.parentNode)||R.removeChild(G),G=xt}z?(f.style.width=K+"px",f.style.minWidth=""):(f.style.width="",f.style.minWidth=K+"px")}}var ye=new l.H$("tableColumnResizing");function Tt({handleWidth:T=5,cellMinWidth:C=25,View:f=Ce,lastColumnResizable:h=!0}={}){const v=new l.Sy({key:ye,state:{init:(A,R)=>(v.spec.props.nodeViews[St(R.schema).table.name]=(K,z)=>new f(K,C,z),new O(-1,!1)),apply:(A,R)=>R.apply(A)},props:{attributes:A=>{const R=ye.getState(A);return R&&R.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(A,R)=>{!function(T,C,f,h,v){const A=ye.getState(T.state);if(A&&!A.dragging){const R=function(T){for(;T&&"TD"!=T.nodeName&&"TH"!=T.nodeName;)T=T.classList&&T.classList.contains("ProseMirror")?null:T.parentNode;return T}(C.target);let K=-1;if(R){const{left:z,right:G}=R.getBoundingClientRect();C.clientX-z<=f?K=Ot(T,C,"left"):G-C.clientX<=f&&(K=Ot(T,C,"right"))}if(K!=A.activeHandle){if(!v&&-1!==K){const z=T.state.doc.resolve(K),G=z.node(-1),Et=et.get(G),xt=z.start(-1);if(Et.colCount(z.pos-xt)+z.nodeAfter.attrs.colspan-1==Et.width-1)return}H(T,K)}}}(A,R,T,0,h)},mouseleave:A=>{!function(T){const C=ye.getState(T.state);C&&C.activeHandle>-1&&!C.dragging&&H(T,-1)}(A)},mousedown:(A,R)=>{!function(T,C,f){const h=ye.getState(T.state);if(!h||-1==h.activeHandle||h.dragging)return!1;const v=T.state.doc.nodeAt(h.activeHandle),A=function(T,C,{colspan:f,colwidth:h}){const v=h&&h[h.length-1];if(v)return v;const A=T.domAtPos(C);let K=A.node.childNodes[A.offset].offsetWidth,z=f;if(h)for(let G=0;G<f;G++)h[G]&&(K-=h[G],z--);return K/z}(T,h.activeHandle,v.attrs);function R(z){window.removeEventListener("mouseup",R),window.removeEventListener("mousemove",K);const G=ye.getState(T.state);(null==G?void 0:G.dragging)&&(function(T,C,f){const h=T.state.doc.resolve(C),v=h.node(-1),A=et.get(v),R=h.start(-1),K=A.colCount(h.pos-R)+h.nodeAfter.attrs.colspan-1,z=T.state.tr;for(let G=0;G<A.height;G++){const Et=G*A.width+K;if(G&&A.map[Et]==A.map[Et-A.width])continue;const xt=A.map[Et],Nt=v.nodeAt(xt).attrs,zt=1==Nt.colspan?0:K-A.colCount(xt);if(Nt.colwidth&&Nt.colwidth[zt]==f)continue;const Gt=Nt.colwidth?Nt.colwidth.slice():E(Nt.colspan);Gt[zt]=f,z.setNodeMarkup(R+xt,null,_e(qt({},Nt),{colwidth:Gt}))}z.docChanged&&T.dispatch(z)}(T,G.activeHandle,Rt(G.dragging,z,f)),T.dispatch(T.state.tr.setMeta(ye,{setDragging:null})))}function K(z){if(!z.which)return R(z);const G=ye.getState(T.state);if(G&&G.dragging){const Et=Rt(G.dragging,z,f);!function(T,C,f,h){const v=T.state.doc.resolve(C),A=v.node(-1),R=v.start(-1),K=et.get(A).colCount(v.pos-R)+v.nodeAfter.attrs.colspan-1;let z=T.domAtPos(v.start(-1)).node;for(;z&&"TABLE"!=z.nodeName;)z=z.parentNode;!z||ge(A,z.firstChild,z,h,K,f)}(T,G.activeHandle,Et,f)}}T.dispatch(T.state.tr.setMeta(ye,{setDragging:{startX:C.clientX,startWidth:A}})),window.addEventListener("mouseup",R),window.addEventListener("mousemove",K),C.preventDefault()}(A,R,C)}},decorations:A=>{const R=ye.getState(A);if(R&&R.activeHandle>-1)return function(T,C){const f=[],h=T.doc.resolve(C),v=h.node(-1);if(!v)return S.EH.empty;const A=et.get(v),R=h.start(-1),K=A.colCount(h.pos-R)+h.nodeAfter.attrs.colspan;for(let z=0;z<A.height;z++){const G=K+z*A.width-1;if(!(K!=A.width&&A.map[G]==A.map[G+1]||0!=z&&A.map[G-1]==A.map[G-1-A.width])){const Et=A.map[G],xt=R+Et+v.nodeAt(Et).nodeSize-1,Nt=document.createElement("div");Nt.className="column-resize-handle",f.push(S.p.widget(xt,Nt))}}return S.EH.create(T.doc,f)}(A,R.activeHandle)},nodeViews:{}}});return v}var O=class{constructor(T,C){this.activeHandle=T,this.dragging=C}apply(T){const C=this,f=T.getMeta(ye);if(f&&null!=f.setHandle)return new O(f.setHandle,!1);if(f&&void 0!==f.setDragging)return new O(C.activeHandle,f.setDragging);if(C.activeHandle>-1&&T.docChanged){let h=T.mapping.map(C.activeHandle,-1);return Dt(T.doc.resolve(h))||(h=-1),new O(h,C.dragging)}return C}};function Ot(T,C,f){const h=T.posAtCoords({left:C.clientX,top:C.clientY});if(!h)return-1;const{pos:v}=h,A=ht(T.state.doc.resolve(v));if(!A)return-1;if("right"==f)return A.pos;const R=et.get(A.node(-1)),K=A.start(-1),z=R.map.indexOf(A.pos-K);return z%R.width==0?-1:K+R.map[z-1]}function Rt(T,C,f){return Math.max(f,T.startWidth+(C.clientX-T.startX))}function H(T,C){T.dispatch(T.state.tr.setMeta(ye,{setHandle:C}))}function E(T){return Array(T).fill(0)}function w(T){const C=T.selection,f=mt(T),h=f.node(-1),v=f.start(-1),A=et.get(h),R=C instanceof dt?A.rectBetween(C.$anchorCell.pos-v,C.$headCell.pos-v):A.findCell(f.pos-v);return _e(qt({},R),{tableStart:v,map:A,table:h})}function F(T,{map:C,tableStart:f,table:h},v){let A=v>0?-1:0;(function(T,C,f){const h=St(C.type.schema).header_cell;for(let v=0;v<T.height;v++)if(C.nodeAt(T.map[f+v*T.width]).type!=h)return!1;return!0})(C,h,v+A)&&(A=0==v||v==C.width?null:0);for(let R=0;R<C.height;R++){const K=R*C.width+v;if(v>0&&v<C.width&&C.map[K-1]==C.map[K]){const z=C.map[K],G=h.nodeAt(z);T.setNodeMarkup(T.mapping.map(f+z),null,B(G.attrs,v-C.colCount(z))),R+=G.attrs.rowspan-1}else{const z=null==A?St(h.type.schema).cell:h.nodeAt(C.map[K+A]).type,G=C.positionAt(R,v,h);T.insert(T.mapping.map(f+G),z.createAndFill())}}return T}function te(T,{map:C,table:f,tableStart:h},v){const A=T.mapping.maps.length;for(let R=0;R<C.height;){const K=R*C.width+v,z=C.map[K],G=f.nodeAt(z),Et=G.attrs;if(v>0&&C.map[K-1]==z||v<C.width-1&&C.map[K+1]==z)T.setNodeMarkup(T.mapping.slice(A).map(h+z),null,pt(Et,v-C.colCount(z)));else{const xt=T.mapping.slice(A).map(h+z);T.delete(xt,xt+G.nodeSize)}R+=Et.rowspan}}function $e(T,{map:C,tableStart:f,table:h},v){var A;let R=f;for(let G=0;G<v;G++)R+=h.child(G).nodeSize;const K=[];let z=v>0?-1:0;(function(T,C,f){var h;const v=St(C.type.schema).header_cell;for(let A=0;A<T.width;A++)if((null==(h=C.nodeAt(T.map[A+f*T.width]))?void 0:h.type)!=v)return!1;return!0})(C,h,v+z)&&(z=0==v||v==C.height?null:0);for(let G=0,Et=C.width*v;G<C.width;G++,Et++)if(v>0&&v<C.height&&C.map[Et]==C.map[Et-C.width]){const xt=C.map[Et],Nt=h.nodeAt(xt).attrs;T.setNodeMarkup(f+xt,null,_e(qt({},Nt),{rowspan:Nt.rowspan+1})),G+=Nt.colspan-1}else{const xt=null==z?St(h.type.schema).cell:null==(A=h.nodeAt(C.map[Et+z*C.width]))?void 0:A.type,Nt=null==xt?void 0:xt.createAndFill();Nt&&K.push(Nt)}return T.insert(R,St(h.type.schema).row.create(null,K)),T}function ct(T,{map:C,table:f,tableStart:h},v){let A=0;for(let z=0;z<v;z++)A+=f.child(z).nodeSize;const R=A+f.child(v).nodeSize,K=T.mapping.maps.length;T.delete(A+h,R+h);for(let z=0,G=v*C.width;z<C.width;z++,G++){const Et=C.map[G];if(v>0&&Et==C.map[G-C.width]){const xt=f.nodeAt(Et).attrs;T.setNodeMarkup(T.mapping.slice(K).map(Et+h),null,_e(qt({},xt),{rowspan:xt.rowspan-1})),z+=xt.colspan-1}else if(v<C.width&&Et==C.map[G+C.width]){const xt=f.nodeAt(Et),Nt=xt.attrs,zt=xt.type.create(_e(qt({},Nt),{rowspan:xt.attrs.rowspan-1}),xt.content),Gt=C.positionAt(v+1,z,f);T.insert(T.mapping.slice(K).map(h+Gt),zt),z+=Nt.colspan-1}}}function Mt(T){const C=T.content;return 1==C.childCount&&C.child(0).isTextblock&&0==C.child(0).childCount}function Ft(T,C){const f=T.selection;if(!(f instanceof dt)||f.$anchorCell.pos==f.$headCell.pos)return!1;const h=w(T),{map:v}=h;if(function({width:T,height:C,map:f},h){let v=h.top*T+h.left,A=v,R=(h.bottom-1)*T+h.left,K=v+(h.right-h.left-1);for(let z=h.top;z<h.bottom;z++){if(h.left>0&&f[A]==f[A-1]||h.right<T&&f[K]==f[K+1])return!0;A+=T,K+=T}for(let z=h.left;z<h.right;z++){if(h.top>0&&f[v]==f[v-T]||h.bottom<C&&f[R]==f[R+T])return!0;v++,R++}return!1}(v,h))return!1;if(C){const A=T.tr,R={};let z,G,K=b.HY.empty;for(let Et=h.top;Et<h.bottom;Et++)for(let xt=h.left;xt<h.right;xt++){const Nt=v.map[Et*v.width+xt],zt=h.table.nodeAt(Nt);if(!R[Nt]&&zt)if(R[Nt]=!0,null==z)z=Nt,G=zt;else{Mt(zt)||(K=K.append(zt.content));const Gt=A.mapping.map(Nt+h.tableStart);A.delete(Gt,Gt+zt.nodeSize)}}if(null==z||null==G)return!0;if(A.setNodeMarkup(z+h.tableStart,null,_e(qt({},B(G.attrs,G.attrs.colspan,h.right-h.left-G.attrs.colspan)),{rowspan:h.bottom-h.top})),K.size){const Et=z+1+G.content.size,xt=Mt(G)?z+1:Et;A.replaceWith(xt+h.tableStart,Et+h.tableStart,K)}A.setSelection(new dt(A.doc.resolve(z+h.tableStart))),C(A)}return!0}function Qt(T,C){const f=St(T.schema);return function(T){return(C,f)=>{var h;const v=C.selection;let A,R;if(v instanceof dt){if(v.$anchorCell.pos!=v.$headCell.pos)return!1;A=v.$anchorCell.nodeAfter,R=v.$anchorCell.pos}else{if(A=function(T){for(let C=T.depth;C>0;C--){const f=T.node(C).type.spec.tableRole;if("cell"===f||"header_cell"===f)return T.node(C)}return null}(v.$from),!A)return!1;R=null==(h=ht(v.$from))?void 0:h.pos}if(null==A||null==R||1==A.attrs.colspan&&1==A.attrs.rowspan)return!1;if(f){let K=A.attrs;const z=[],G=K.colwidth;K.rowspan>1&&(K=_e(qt({},K),{rowspan:1})),K.colspan>1&&(K=_e(qt({},K),{colspan:1}));const Et=w(C),xt=C.tr;for(let zt=0;zt<Et.right-Et.left;zt++)z.push(G?_e(qt({},K),{colwidth:G&&G[zt]?[G[zt]]:null}):K);let Nt;for(let zt=Et.top;zt<Et.bottom;zt++){let Gt=Et.map.positionAt(zt,Et.left,Et.table);zt==Et.top&&(Gt+=A.nodeSize);for(let se=Et.left,ie=0;se<Et.right;se++,ie++)se==Et.left&&zt==Et.top||xt.insert(Nt=xt.mapping.map(Gt+Et.tableStart,1),T({node:A,row:zt,col:se}).createAndFill(z[ie]))}xt.setNodeMarkup(R,T({node:A,row:Et.top,col:Et.left}),z[0]),v instanceof dt&&xt.setSelection(new dt(xt.doc.resolve(v.$anchorCell.pos),Nt?xt.doc.resolve(Nt):void 0)),f(xt)}return!0}}(({node:h})=>f[h.type.spec.tableRole])(T,C)}function ae(T,C,f){const h=C.map.cellsInRect({left:0,top:0,right:"row"==T?C.map.width:1,bottom:"column"==T?C.map.height:1});for(let v=0;v<h.length;v++){const A=C.table.nodeAt(h[v]);if(A&&A.type!==f.header_cell)return!1}return!0}function de(T,C){return(C=C||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(T){return function(C,f){if(!W(C))return!1;if(f){const h=St(C.schema),v=w(C),A=C.tr,R=v.map.cellsInRect("column"==T?{left:v.left,top:0,right:v.right,bottom:v.map.height}:"row"==T?{left:0,top:v.top,right:v.map.width,bottom:v.bottom}:v),K=R.map(z=>v.table.nodeAt(z));for(let z=0;z<R.length;z++)K[z].type==h.header_cell&&A.setNodeMarkup(v.tableStart+R[z],h.cell,K[z].attrs);if(0==A.steps.length)for(let z=0;z<R.length;z++)A.setNodeMarkup(v.tableStart+R[z],h.header_cell,K[z].attrs);f(A)}return!0}}(T):function(f,h){if(!W(f))return!1;if(h){const v=St(f.schema),A=w(f),R=f.tr,K=ae("row",A,v),z=ae("column",A,v),Et=("column"===T?K:"row"===T&&z)?1:0,Nt="column"==T?z?v.cell:v.header_cell:"row"==T?K?v.cell:v.header_cell:v.cell;A.map.cellsInRect("column"==T?{left:0,top:Et,right:1,bottom:A.map.height}:"row"==T?{left:Et,top:0,right:A.map.width,bottom:1}:A).forEach(zt=>{const Gt=zt+A.tableStart,se=R.doc.nodeAt(Gt);se&&R.setNodeMarkup(Gt,Nt,se.attrs)}),h(R)}return!0}}de("row",{useDeprecatedLogic:!0}),de("column",{useDeprecatedLogic:!0});var en=de("cell",{useDeprecatedLogic:!0});function mn(T){return function(C,f){if(!W(C))return!1;const h=function(T,C){if(C<0){const f=T.nodeBefore;if(f)return T.pos-f.nodeSize;for(let h=T.index(-1)-1,v=T.before();h>=0;h--){const A=T.node(-1).child(h),R=A.lastChild;if(R)return v-1-R.nodeSize;v-=A.nodeSize}}else{if(T.index()<T.parent.childCount-1)return T.pos+T.nodeAfter.nodeSize;const f=T.node(-1);for(let h=T.indexAfter(-1),v=T.after();h<f.childCount;h++){const A=f.child(h);if(A.childCount)return v+1;v+=A.nodeSize}}return null}(mt(C),T);if(null==h)return!1;if(f){const v=C.doc.resolve(h);f(C.tr.setSelection(l.Bs.between(v,function(T){return T.node(0).resolve(T.pos+T.nodeAfter.nodeSize)}(v))).scrollIntoView())}return!0}}function Mn({allowTableNodeSelection:T=!1}={}){return new l.Sy({key:Pt,state:{init:()=>null,apply(C,f){const h=C.getMeta(Pt);if(null!=h)return-1==h?null:h;if(null==f||!C.docChanged)return f;const{deleted:v,pos:A}=C.mapping.mapResult(f);return v?null:A}},props:{decorations:J,handleDOMEvents:{mousedown:ze},createSelectionBetween:C=>null!=Pt.getState(C.state)?C.state.selection:null,handleTripleClick:we,handleKeyDown:Pe,handlePaste:Ve},appendTransaction:(C,f,h)=>function(T,C,f){const h=(C||T).selection,v=(C||T).doc;let A,R;if(h instanceof l.qv&&(R=h.node.type.spec.tableRole)){if("cell"==R||"header_cell"==R)A=dt.create(v,h.from);else if("row"==R){const K=v.resolve(h.from+1);A=dt.rowSelection(K,K)}else if(!f){const K=et.get(h.node),z=h.from+1;A=dt.create(v,z+1,z+K.map[K.width*K.height-1])}}else h instanceof l.Bs&&function({$from:T,$to:C}){if(T.pos==C.pos||T.pos<T.pos-6)return!1;let f=T.pos,h=C.pos,v=T.depth;for(;v>=0&&!(T.after(v+1)<T.end(v));v--,f++);for(let A=C.depth;A>=0&&!(C.before(A+1)>C.start(A));A--,h--);return f==h&&/row|table/.test(T.node(v).type.spec.tableRole)}(h)?A=l.Bs.create(v,h.from):h instanceof l.Bs&&function({$from:T,$to:C}){let f,h;for(let v=T.depth;v>0;v--){const A=T.node(v);if("cell"===A.type.spec.tableRole||"header_cell"===A.type.spec.tableRole){f=A;break}}for(let v=C.depth;v>0;v--){const A=C.node(v);if("cell"===A.type.spec.tableRole||"header_cell"===A.type.spec.tableRole){h=A;break}}return f!==h&&0===C.parentOffset}(h)&&(A=l.Bs.create(v,h.$from.start(),h.$from.end()));return A&&(C||(C=T.tr)).setSelection(A),C}(h,oe(h,f),T)})}function nn(T,C,f,h,v,A){let R=0,K=!0,z=C.firstChild;const G=T.firstChild;for(let Et=0,xt=0;Et<G.childCount;Et+=1){const{colspan:Nt,colwidth:zt}=G.child(Et).attrs;for(let Gt=0;Gt<Nt;Gt+=1,xt+=1){const se=v===xt?A:zt&&zt[Gt],ie=se?`${se}px`:"";R+=se||h,se||(K=!1),z?(z.style.width!==ie&&(z.style.width=ie),z=z.nextSibling):C.appendChild(document.createElement("col")).style.width=ie}}for(;z;){const Et=z.nextSibling;z.parentNode.removeChild(z),z=Et}K?(f.style.width=`${R}px`,f.style.minWidth=""):(f.style.width="",f.style.minWidth=`${R}px`)}class gn{constructor(C,f){this.node=C,this.cellMinWidth=f,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),nn(C,this.colgroup,this.table,f),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(C){return C.type===this.node.type&&(this.node=C,nn(C,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(C){return"attributes"===C.type&&(C.target===this.table||this.colgroup.contains(C.target))}}function an(T,C){return C?T.createChecked(null,C):T.createAndFill()}const on=({editor:T})=>{const{selection:C}=T.state;if(!function(T){return T instanceof dt}(C))return!1;let f=0;const h=(0,M.findParentNodeClosestToPos)(C.ranges[0].$from,A=>"table"===A.type.name);return null==h||h.node.descendants(A=>{if("table"===A.type.name)return!1;["tableCell","tableHeader"].includes(A.type.name)&&(f+=1)}),f===C.ranges.length&&(T.commands.deleteTable(),!0)},qe=M.Node.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:gn,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML({HTMLAttributes:T}){return["table",(0,M.mergeAttributes)(this.options.HTMLAttributes,T),["tbody",0]]},addCommands:()=>({insertTable:({rows:T=3,cols:C=3,withHeaderRow:f=!0}={})=>({tr:h,dispatch:v,editor:A})=>{const R=function(T,C,f,h,v){const A=function(T){if(T.cached.tableNodeTypes)return T.cached.tableNodeTypes;const C={};return Object.keys(T.nodes).forEach(f=>{const h=T.nodes[f];h.spec.tableRole&&(C[h.spec.tableRole]=h)}),T.cached.tableNodeTypes=C,C}(T),R=[],K=[];for(let G=0;G<f;G+=1){const Et=an(A.cell,v);if(Et&&K.push(Et),h){const xt=an(A.header_cell,v);xt&&R.push(xt)}}const z=[];for(let G=0;G<C;G+=1)z.push(A.row.createChecked(null,h&&0===G?R:K));return A.table.createChecked(null,z)}(A.schema,T,C,f);if(v){const K=h.selection.anchor+1;h.replaceSelectionWith(R).scrollIntoView().setSelection(l.Bs.near(h.doc.resolve(K)))}return!0},addColumnBefore:()=>({state:T,dispatch:C})=>function(T,C){if(!W(T))return!1;if(C){const f=w(T);C(F(T.tr,f,f.left))}return!0}(T,C),addColumnAfter:()=>({state:T,dispatch:C})=>function(T,C){if(!W(T))return!1;if(C){const f=w(T);C(F(T.tr,f,f.right))}return!0}(T,C),deleteColumn:()=>({state:T,dispatch:C})=>function(T,C){if(!W(T))return!1;if(C){const f=w(T),h=T.tr;if(0==f.left&&f.right==f.map.width)return!1;for(let v=f.right-1;te(h,f,v),v!=f.left;v--){const A=f.tableStart?h.doc.nodeAt(f.tableStart-1):h.doc;if(!A)throw RangeError("No table found");f.table=A,f.map=et.get(A)}C(h)}return!0}(T,C),addRowBefore:()=>({state:T,dispatch:C})=>function(T,C){if(!W(T))return!1;if(C){const f=w(T);C($e(T.tr,f,f.top))}return!0}(T,C),addRowAfter:()=>({state:T,dispatch:C})=>function(T,C){if(!W(T))return!1;if(C){const f=w(T);C($e(T.tr,f,f.bottom))}return!0}(T,C),deleteRow:()=>({state:T,dispatch:C})=>function(T,C){if(!W(T))return!1;if(C){const f=w(T),h=T.tr;if(0==f.top&&f.bottom==f.map.height)return!1;for(let v=f.bottom-1;ct(h,f,v),v!=f.top;v--){const A=f.tableStart?h.doc.nodeAt(f.tableStart-1):h.doc;if(!A)throw RangeError("No table found");f.table=A,f.map=et.get(f.table)}C(h)}return!0}(T,C),deleteTable:()=>({state:T,dispatch:C})=>function(T,C){const f=T.selection.$anchor;for(let h=f.depth;h>0;h--)if("table"==f.node(h).type.spec.tableRole)return C&&C(T.tr.delete(f.before(h),f.after(h)).scrollIntoView()),!0;return!1}(T,C),mergeCells:()=>({state:T,dispatch:C})=>Ft(T,C),splitCell:()=>({state:T,dispatch:C})=>Qt(T,C),toggleHeaderColumn:()=>({state:T,dispatch:C})=>de("column")(T,C),toggleHeaderRow:()=>({state:T,dispatch:C})=>de("row")(T,C),toggleHeaderCell:()=>({state:T,dispatch:C})=>en(T,C),mergeOrSplit:()=>({state:T,dispatch:C})=>!!Ft(T,C)||Qt(T,C),setCellAttribute:(T,C)=>({state:f,dispatch:h})=>function(T,C){return function(f,h){if(!W(f))return!1;const v=mt(f);if(v.nodeAfter.attrs[T]===C)return!1;if(h){const A=f.tr;f.selection instanceof dt?f.selection.forEachCell((R,K)=>{R.attrs[T]!==C&&A.setNodeMarkup(K,null,_e(qt({},R.attrs),{[T]:C}))}):A.setNodeMarkup(v.pos,null,_e(qt({},v.nodeAfter.attrs),{[T]:C})),h(A)}return!0}}(T,C)(f,h),goToNextCell:()=>({state:T,dispatch:C})=>mn(1)(T,C),goToPreviousCell:()=>({state:T,dispatch:C})=>mn(-1)(T,C),fixTables:()=>({state:T,dispatch:C})=>(C&&oe(T),!0),setCellSelection:T=>({tr:C,dispatch:f})=>{if(f){const h=dt.create(C.doc,T.anchorCell,T.headCell);C.setSelection(h)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:on,"Mod-Backspace":on,Delete:on,"Mod-Delete":on}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[Tt({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],Mn({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema:T=>({tableRole:(0,M.callOrReturn)((0,M.getExtensionField)(T,"tableRole",{name:T.name,options:T.options,storage:T.storage}))})}).extend({renderHTML({node:T,HTMLAttributes:C}){var f,h;let v=0,A=!0;try{const R=(null===(f=T.content)||void 0===f?void 0:f.content)[0];null===(h=null==R?void 0:R.content)||void 0===h||h.content.forEach(K=>{K.attrs.colwidth?K.attrs.colwidth.forEach(z=>{z?v+=z:(A=!1,v+=this.options.cellMinWidth)}):(A=!1,v+=this.options.cellMinWidth*(K.attrs.colspan?K.attrs.colspan:1))})}catch(R){A=!1}return C.style=A&&v>0?`width: ${v}px;`:v&&v>0?`min-width: ${v}px`:null,["div",{class:"tui-table-wrapper"},["table",(0,M.mergeAttributes)(this.options.HTMLAttributes,C),["tbody",0]]]}})},88806:(Vt,yt,c)=>{c.d(yt,{v:()=>l});var M=c(74788);class l{constructor(S,g,it){const N=g.get(M.z2F),et=g.get(M._Vd).resolveComponentFactory(S);this.componentRef=et.create(g,[]),this.updateProps(it),N.attachView(this.componentRef.hostView)}get instance(){return this.componentRef.instance}get elementRef(){return this.componentRef.injector.get(M.SBq)}get dom(){return this.elementRef.nativeElement}updateProps(S){Object.entries(S).forEach(([g,it])=>{this.instance[g]=it})}detectChanges(){this.componentRef.changeDetectorRef.detectChanges()}destroy(){this.componentRef.destroy()}}},40400:(Vt,yt,c)=>{c.d(yt,{d:()=>S,x:()=>it});var M=c(12057),l=c(12867),b=c(88806);class S{}class g extends l.NodeView{constructor(){super(...arguments),this.contentDOMElement=null}mount(){const q=this.options.injector,et=q.get(M.K0);this.renderer=new b.v(this.component,q,{editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(ut={})=>this.updateAttributes(ut),deleteNode:()=>this.deleteNode()}),this.extension.config.draggable&&(this.renderer.elementRef.nativeElement.ondragstart=ut=>{this.onDragStart(ut)}),this.contentDOMElement=this.node.isLeaf?null:et.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit",this.renderer.detectChanges())}get dom(){return this.renderer.dom}get contentDOM(){return this.node.isLeaf?null:(this.maybeMoveContentDOM(),this.contentDOMElement)}update(q,et){return this.options.update?this.options.update(q,et):q.type===this.node.type&&(q===this.node&&this.decorations===et||(this.node=q,this.decorations=et,this.renderer.updateProps({node:q,decorations:et}),this.maybeMoveContentDOM()),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy()}maybeMoveContentDOM(){const q=this.dom.querySelector("[data-node-view-content]");this.contentDOMElement&&q&&!q.contains(this.contentDOMElement)&&q.appendChild(this.contentDOMElement)}}const it=(N,q)=>et=>new g(N,et,q)},48014:(Vt,yt,c)=>{c.r(yt),c.d(yt,{AbstractTuiEditor:()=>M._,AbstractTuiEditorResizable:()=>Pt._3,BackgroundColor:()=>Dt.BackgroundColor,EDITOR_BLANK_COLOR:()=>mt.hK,FontColor:()=>Bt.FontColor,INITIALIZATION_TIPTAP_CONTAINER:()=>jt.Y1,LAZY_EDITOR_EXTENSIONS:()=>jt.F4,LAZY_TIPTAP_EDITOR:()=>jt.bG,StarterKit:()=>J.StarterKit,TIPTAP_EDITOR:()=>jt.ZW,TUI_ATTACH_FILES_LOADER:()=>jt.zc,TUI_ATTACH_FILES_OPTIONS:()=>jt.dR,TUI_EDITOR_CODE_OPTIONS:()=>jt.Mr,TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES:()=>jt.dj,TUI_EDITOR_CONTENT_PROCESSOR:()=>jt.F1,TUI_EDITOR_DEFAULT_OPTIONS:()=>jt.HG,TUI_EDITOR_EXTENSIONS:()=>jt.Wf,TUI_EDITOR_FONT_OPTIONS:()=>jt.UN,TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>Jt.TUI_EDITOR_GROUP_DEFAULT_OPTIONS,TUI_EDITOR_LINK_TEXTS:()=>jt.b$,TUI_EDITOR_MAX_IMAGE_WIDTH:()=>B.TUI_EDITOR_MAX_IMAGE_WIDTH,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>B.TUI_EDITOR_MIN_IMAGE_WIDTH,TUI_EDITOR_OPTIONS:()=>jt.mJ,TUI_EDITOR_PROVIDERS:()=>Ct.m,TUI_EDITOR_TABLE_COMMANDS:()=>jt.$i,TUI_EDITOR_TOOLBAR_TEXTS:()=>jt.rf,TUI_IFRAME_EDITOR_OPTIONS:()=>pt.TUI_IFRAME_EDITOR_OPTIONS,TUI_IMAGE_EDITOR_OPTIONS:()=>B.TUI_IMAGE_EDITOR_OPTIONS,TUI_IMAGE_LOADER:()=>jt.p7,TableCellBackground:()=>ot.TableCellBackground,TuiAlignContentComponent:()=>W.Xp,TuiAlignContentModule:()=>W.pu,TuiAudio:()=>st.TuiAudio,TuiCodeComponent:()=>W.Tf,TuiCodeModule:()=>W.P_,TuiColorEditComponent:()=>l.hR,TuiColorEditModule:()=>l.TD,TuiColorPickerComponent:()=>l.$v,TuiColorPickerModule:()=>l.H9,TuiColorSelectorComponent:()=>l.sV,TuiColorSelectorModule:()=>l.wl,TuiComponentRenderer:()=>wt.v,TuiDetailsComponent:()=>W.yj,TuiDetailsModule:()=>W.y9,TuiDetailsRemoveComponent:()=>W.Un,TuiEditLinkComponent:()=>b.lV,TuiEditLinkModule:()=>b.Fu,TuiEditorComponent:()=>S.a,TuiEditorGroupToolComponent:()=>W.dN,TuiEditorImagePreviewDirective:()=>ft.Zj,TuiEditorImagePreviewModule:()=>ft.BN,TuiEditorModule:()=>vt,TuiEditorPortalDirective:()=>At.A,TuiEditorPortalHostComponent:()=>St.d,TuiEditorPortalService:()=>kt.Y,TuiEditorResizableComponent:()=>Pt.V_,TuiEditorResizableModule:()=>Pt.Sl,TuiEditorSocketComponent:()=>it.D,TuiEditorSocketModule:()=>q,TuiEditorTool:()=>j._,TuiEditorToolGroup:()=>W.jP,TuiFileLink:()=>bt.TuiFileLink,TuiFilterAnchorsPipe:()=>b.bL,TuiFlatPickerComponent:()=>l.Jd,TuiFlatPickerModule:()=>l.ui,TuiFontSize:()=>Ht.TuiFontSize,TuiFontSizeComponent:()=>W.mK,TuiFontSizeModule:()=>W.p7,TuiFontStyleComponent:()=>W.hr,TuiFontStyleModule:()=>W.Zv,TuiHighlightColorComponent:()=>W.UT,TuiHighlightColorModule:()=>W.XC,TuiIframeEditorComponent:()=>pt.TuiIframeEditorComponent,TuiIframeEditorModule:()=>pt.TuiIframeEditorModule,TuiImageEditorComponent:()=>B.TuiImageEditorComponent,TuiImageEditorModule:()=>B.TuiImageEditorModule,TuiInputColorComponent:()=>ht.j,TuiInputColorModule:()=>tt,TuiLinearMultiPickerComponent:()=>l.es,TuiLinearMultiPickerModule:()=>l.GU,TuiLinearPickerComponent:()=>l.P,TuiLinearPickerModule:()=>l.g7,TuiLink:()=>dt.TuiLink,TuiListConfigsComponent:()=>W.w2,TuiListConfigsModule:()=>W.Ur,TuiNodeViewNgComponent:()=>Zt.d,TuiNodeViewRenderer:()=>Zt.x,TuiPaletteComponent:()=>l.Rh,TuiPaletteModule:()=>l.VM,TuiShortUrlPipe:()=>b.X,TuiSource:()=>st.TuiSource,TuiTabExtension:()=>rt.TuiTabExtension,TuiTable:()=>Q.TuiTable,TuiTableCellColorComponent:()=>W.pH,TuiTableCellColorModule:()=>W.mp,TuiTableCommands:()=>W.iN,TuiTableCreateComponent:()=>W.lT,TuiTableCreateModule:()=>W.iA,TuiTableMergeCellsComponent:()=>W.YH,TuiTableMergeCellsModule:()=>W.er,TuiTableRowColumnManagerComponent:()=>W._I,TuiTableRowColumnManagerModule:()=>W.__,TuiTableSizeSelectorComponent:()=>W.M8,TuiTableSizeSelectorModule:()=>W.kU,TuiTextColorComponent:()=>W.G0,TuiTextColorModule:()=>W._t,TuiTiptapEditorDirective:()=>ft.JU,TuiTiptapEditorModule:()=>ft.mJ,TuiTiptapEditorService:()=>ft.$3,TuiToolbarComponent:()=>et.M6,TuiToolbarModule:()=>et.yB,TuiToolbarNavigationManagerDirective:()=>et.Bp,TuiVideo:()=>st.TuiVideo,createGroupExtension:()=>Jt.createGroupExtension,createIframeEditorExtension:()=>pt.createIframeEditorExtension,createImageEditorExtension:()=>B.createImageEditorExtension,defaultEditorColors:()=>mt.sw,defaultEditorExtensions:()=>It,defaultEditorTools:()=>mt.Db,tuiCreateImageEditorExtension:()=>B.tuiCreateImageEditorExtension,tuiDefaultFontOptionsHandler:()=>mt.RR,tuiDeleteNode:()=>oe.yU,tuiEditorOptionsProvider:()=>jt.Uv,tuiGetElementPoint:()=>oe.Ws,tuiGetGradientData:()=>oe.U5,tuiGetMarkRange:()=>oe.Yz,tuiGetNestedNodes:()=>oe.YX,tuiGetSelectedContent:()=>oe.Ap,tuiInsertHtml:()=>oe.Xd,tuiInsertText:()=>oe.Oi,tuiIsOrderedOrBulletList:()=>rt.tuiIsOrderedOrBulletList,tuiIsSafeLinkRange:()=>oe.nC,tuiIsSelectionIn:()=>oe.i0,tuiLegacyEditorConverter:()=>oe.Er,tuiParseGradient:()=>oe._N,tuiParseNodeAttributes:()=>oe.x6,tuiParseStyle:()=>oe.jx,tuiToGradient:()=>oe.CH});var M=c(77361),l=c(27050),b=c(71115),S=c(69303),g=c(12057),it=c(20179),N=c(74788);let q=(()=>{class Wt{}return Wt.\u0275fac=function(be){return new(be||Wt)},Wt.\u0275mod=N.oAB({type:Wt}),Wt.\u0275inj=N.cJS({}),Wt})();var et=c(17406),ft=c(84614),ut=c(68339),nt=c(3497);let vt=(()=>{class Wt{}return Wt.\u0275fac=function(be){return new(be||Wt)},Wt.\u0275mod=N.oAB({type:Wt}),Wt.\u0275inj=N.cJS({imports:[[g.ez,et.yB,nt.TuiWrapperModule,nt.TuiScrollbarModule,b.Fu,ut.TuiActiveZoneModule,nt.TuiDropdownModule,ft.mJ,q,ut.TuiLetModule]]}),Wt})();var Ct=c(79089),At=c(1433),kt=c(73825),St=c(9872),Pt=c(95110),ht=c(19769);let tt=(()=>{class Wt{}return Wt.\u0275fac=function(be){return new(be||Wt)},Wt.\u0275mod=N.oAB({type:Wt}),Wt.\u0275inj=N.cJS({imports:[[g.ez,nt.TuiPrimitiveTextfieldModule,nt.TuiTextfieldControllerModule,nt.TuiHostedDropdownModule,l.wl,ut.TuiActiveZoneModule]]}),Wt})();var W=c(93252),mt=c(19074),j=c(48699),Dt=c(15736);const It=[Promise.resolve().then(c.bind(c,2823)).then(({StarterKit:Wt})=>Wt).then(Wt=>Wt.configure({heading:{levels:[1,2]}})),c.e(73336).then(c.bind(c,73336)).then(({default:Wt})=>Wt.configure({types:["heading","paragraph"]})),Promise.resolve().then(c.bind(c,84402)).then(({default:Wt})=>Wt),c.e(17991).then(c.bind(c,17991)).then(({default:Wt})=>Wt),c.e(77147).then(c.bind(c,77147)).then(({default:Wt})=>Wt),c.e(25034).then(c.bind(c,25034)).then(({default:Wt})=>Wt),Promise.resolve().then(c.bind(c,52658)).then(({FontColor:Wt})=>Wt),Promise.resolve().then(c.bind(c,44632)).then(({default:Wt})=>Wt.configure({inline:!0,allowBase64:!0})),Promise.resolve().then(c.bind(c,82091)).then(({TuiLink:Wt})=>Wt),c.e(54058).then(c.bind(c,54058)).then(({TuiJumpAnchor:Wt})=>Wt),Promise.resolve().then(c.bind(c,93763)).then(({TuiFileLink:Wt})=>Wt),Promise.resolve().then(c.bind(c,15736)).then(({BackgroundColor:Wt})=>Wt),Promise.resolve().then(c.bind(c,86624)).then(({TuiTable:Wt})=>Wt.configure({resizable:!0})),c.e(45213).then(c.bind(c,45213)).then(({default:Wt})=>Wt),c.e(71397).then(c.bind(c,71397)).then(({default:Wt})=>Wt),c.e(38840).then(c.bind(c,38840)).then(({TableHeader:Wt})=>Wt),Promise.resolve().then(c.bind(c,12177)).then(({TuiTabExtension:Wt})=>Wt),Promise.resolve().then(c.bind(c,51919)).then(({TableCellBackground:Wt})=>Wt),c.e(44312).then(c.bind(c,44312)).then(({TuiDetailsContent:Wt})=>Wt),c.e(44312).then(c.bind(c,44312)).then(({TuiDetails:Wt})=>Wt),c.e(44312).then(c.bind(c,44312)).then(({TuiSummary:Wt})=>Wt),Promise.resolve().then(c.bind(c,9492)).then(({TuiFontSize:Wt})=>Wt)];var bt=c(93763),Bt=c(52658),Ht=c(9492),Jt=c(54920),pt=c(20854),B=c(53380),rt=c(12177),dt=c(82091),st=c(41512),J=c(2823),Q=c(86624),ot=c(51919),wt=c(88806),Zt=c(40400),jt=c(14309),oe=c(27863)},62141:(Vt,yt,c)=>{c.d(yt,{i:()=>ft});var M=c(12057),l=c(74788),b=c(27863),S=c(68339),g=c(18891),it=c(43190),N=c(88002),q=c(46782),et=c(39761);let ft=(()=>{class ut extends g.y{constructor(vt,{nativeElement:Ct},At){const kt=(0,S.tuiTypedFromEvent)(Ct,"mousedown").pipe((0,S.tuiPreventDefault)(),(0,it.w)(St=>{const Pt=(0,S.tuiTypedFromEvent)(At,"mousemove").pipe((0,N.U)(({clientX:ht,clientY:tt})=>(0,b.Ws)(ht,tt,Ct)),(0,q.R)((0,S.tuiTypedFromEvent)(At,"mouseup")));return St.target===Ct?Pt.pipe((0,et.O)((0,b.Ws)(St.clientX,St.clientY,Ct))):Pt}),(0,q.R)(vt));super(St=>kt.subscribe(St))}}return ut.\u0275fac=function(vt){return new(vt||ut)(l.LFG(S.TuiDestroyService,2),l.LFG(l.SBq),l.LFG(M.K0))},ut.\u0275prov=l.Yz7({token:ut,factory:ut.\u0275fac}),ut})()},14309:(Vt,yt,c)=>{c.d(yt,{Y1:()=>It,F4:()=>b,bG:()=>Dt,ZW:()=>j,zc:()=>ut,dR:()=>ft,Mr:()=>St,dj:()=>vt,F1:()=>et,HG:()=>g,Wf:()=>l,UN:()=>Pt,b$:()=>kt,mJ:()=>it,$i:()=>At,rf:()=>Ct,p7:()=>W,Uv:()=>N});var M=c(74788);const l=new M.OlP("[TUI_EDITOR_EXTENSIONS]"),b=new M.OlP("[LAZY_EDITOR_EXTENSIONS]");var S=c(19074);const g={colors:S.sw,blankColor:S.hK,fontOptions:S.RR},it=new M.OlP("[TUI_EDITOR_OPTIONS]",{factory:()=>g});function N(bt){return{provide:it,useValue:Object.assign(Object.assign({},g),bt)}}var q=c(54487);const et=new M.OlP("[TUI_EDITOR_CONTENT_PROCESSOR]",{factory:()=>q.y}),ft=new M.OlP("[TUI_ATTACH_FILES_OPTIONS]",{factory:()=>({accept:"*/*",multiple:!0})}),ut=new M.OlP("[TUI_ATTACH_FILES_LOADER]");var nt=c(72773);const vt=new M.OlP("[TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES]",{factory:()=>["Solid color","Gradient"]}),Ct=new M.OlP("[TUI_EDITOR_TOOLBAR_TEXTS]",{factory:(0,nt.vv)("toolbarTools")}),At=new M.OlP("[TUI_EDITOR_TABLE_COMMANDS]",{factory:(0,nt.vv)("editorTableCommands")}),kt=new M.OlP("[TUI_EDITOR_LINK_TEXTS]",{factory:(0,nt.vv)("editorEditLink")}),St=new M.OlP("[TUI_EDITOR_CODE_OPTIONS]",{factory:(0,nt.vv)("editorCodeOptions")}),Pt=new M.OlP("[TUI_EDITOR_FONT_OPTIONS]",{factory:(0,nt.vv)("editorFontOptions")});var ht=c(68339),tt=c(88002);const W=new M.OlP("[TUI_IMAGE_LOADER]",{factory:()=>bt=>{const Bt=new FileReader;return Bt.readAsDataURL(bt),(0,ht.tuiTypedFromEvent)(Bt,"load").pipe((0,tt.U)(()=>String(Bt.result)))}});var mt=c(82298);const j=new M.OlP("[TIPTAP_EDITOR]"),Dt=new M.OlP("[LAZY_TIPTAP_EDITOR]",{factory:()=>{const bt=new mt.t(1);return Promise.resolve().then(c.bind(c,12867)).then(Bt=>bt.next(Bt.Editor)),bt}}),It=new M.OlP("[INITIALIZATION_TIPTAP_CONTAINER]")},27863:(Vt,yt,c)=>{function M(st,J,Q){const ot=st.selection.$anchor;for(let wt=ot.depth;wt>0;wt--)if(ot.node(wt).type.name===Q)return J&&J(st.tr.delete(ot.before(wt),ot.after(wt)).scrollIntoView()),!0;return!1}c.d(yt,{yU:()=>M,Ws:()=>b,U5:()=>S,Yz:()=>N,YX:()=>et,Ap:()=>ut,Xd:()=>nt,Oi:()=>vt,nC:()=>rt,i0:()=>Ct,Er:()=>At,_N:()=>Ht,x6:()=>pt,jx:()=>B,CH:()=>dt});var l=c(68339);function b(st,J,Q){const{left:ot,top:wt,width:Zt,height:jt}=Q.getBoundingClientRect();return[(0,l.tuiClamp)(st-ot,0,Zt)/Zt,(0,l.tuiClamp)(J-wt,0,jt)/jt]}function S(st){return st.slice(0,Math.max(0,st.length-1)).replace("linear-gradient(","")}function it(st,J,Q={}){return st.find(({attrs:ot,type:wt})=>wt===J&&function(st,J){const Q=Object.keys(J);return!Q.length||!!Q.filter(ot=>J[ot]===st[ot]).length}(ot,Q))||null}function N(st,J,Q={}){if(!st||!J)return null;const{node:ot,offset:wt}=st.parent.childAfter(st.parentOffset);if(!ot)return null;const Zt=it(ot.marks,J,Q);if(!Zt)return null;let jt=st.index(),oe=st.start()+wt,Wt=jt+1,pe=oe+ot.nodeSize;for(it(ot.marks,J,Q);jt>0&&Zt.isInSet(st.parent.child(jt-1).marks);)jt-=1,oe-=st.parent.child(jt).nodeSize;for(;Wt<st.parent.childCount&&it(st.parent.child(Wt).marks,J,Q);)pe+=st.parent.child(Wt).nodeSize,Wt+=1;return{from:oe,to:pe}}var q=c(77346);function et(st){const J=[];return st.content.forEach(Q=>{Q instanceof q.NB&&J.push([Q.type.name,Q.attrs])}),J}var ft=c(12867);function ut(st,J){const Q=null!=J?J:st.selection.$head.parent.textContent,ot=st.doc.cut(st.selection.from,st.selection.to);return ot.content.size?(0,ft.getHTMLFromFragment)(ot.content,st.schema):Q}function nt(st,J){if(st.queryCommandSupported("insertHTML"))return void st.execCommand("insertHTML",!1,J);const Q=st.getSelection();if(!Q)throw new l.TuiDocumentSelectionException;st.execCommand("ms-beginUndoUnit");const ot=Q.getRangeAt(0),wt=ot.createContextualFragment(J);ot.deleteContents(),ot.insertNode(wt),st.execCommand("ms-endUndoUnit")}function vt(st,J){if(st.queryCommandSupported("insertText"))return void st.execCommand("insertText",!1,J);const Q=st.getSelection();if(!Q)throw new l.TuiDocumentSelectionException;st.execCommand("ms-beginUndoUnit");const ot=Q.getRangeAt(0);ot.deleteContents(),ot.insertNode(st.createTextNode(J)),st.execCommand("ms-endUndoUnit")}function Ct({anchorNode:st,focusNode:J},Q){return!!st&&!!J&&(0,l.tuiIsNodeIn)(st,Q)&&(0,l.tuiIsNodeIn)(J,Q)}function At(st){const J=(new DOMParser).parseFromString(st,"text/html");return kt(J.body),J.body.innerHTML}function kt(st){for(const J of Array.from(st.children))if(J.children.length&&kt(J),"FONT"===J.tagName)if(J.hasAttribute("size"))switch(J.getAttribute("size")){case"6":St("h1",J);break;case"5":St("h2",J);break;case"4":Pt("17px",J);break;case"3":Pt("15px",J);break;case"2":Pt("13px",J)}else J.hasAttribute("color")&&ht(J)}function St(st,J){var Q,ot,wt,Zt,jt,oe,Wt,pe,be;const Ae=document.createElement(st);if(Ae.innerHTML=J.innerHTML,"P"===(null===(Q=J.parentElement)||void 0===Q?void 0:Q.tagName)){const me=null===(wt=null===(ot=J.parentElement)||void 0===ot?void 0:ot.parentElement)||void 0===wt?void 0:wt.insertBefore(Ae,J.parentElement);null===(Zt=J.parentElement)||void 0===Zt||Zt.removeChild(J),(null==me?void 0:me.nextSibling)&&!(null===(oe=null===(jt=null==me?void 0:me.nextSibling)||void 0===jt?void 0:jt.textContent)||void 0===oe?void 0:oe.trim())&&(null===(pe=null===(Wt=me.nextSibling)||void 0===Wt?void 0:Wt.parentElement)||void 0===pe||pe.removeChild(me.nextSibling))}else null===(be=J.parentElement)||void 0===be||be.replaceChild(Ae,J)}function Pt(st,J){var Q;const ot=document.createElement("p"),wt=document.createElement("span");wt.setAttribute("style",`font-size: ${st}`),wt.innerHTML=J.innerHTML,ot.append(wt),null===(Q=J.parentElement)||void 0===Q||Q.replaceChild("P"===J.parentElement.tagName?wt:ot,J)}function ht(st){var J;const Q=document.createElement("span");Q.setAttribute("style",`color: ${st.getAttribute("color")}`),Q.innerHTML=st.innerHTML,null===(J=st.parentElement)||void 0===J||J.replaceChild(Q,st)}const Bt=["\\s*(","(?:","#(?:[a-f0-9]{6}|[a-f0-9]{3})","|","(?:rgb|hsl)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*\\)","|","(?:rgba|hsla)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*,\\s*\\d*\\.?\\d+\\)","|","[_a-z-][_a-z0-9-]*",")",")","(?:\\s+","(","(?:[+-]?\\d*\\.?\\d+)(?:%|[a-z]+)?","))?","(?:","\\s*,\\s*","\\s*)?"];function Ht(st){const J=new RegExp(Bt.join(""),"gi"),Q=st.startsWith("to")||st.match(/^\d/)?st.slice(Math.max(0,st.indexOf(",")+1)).trim():st,ot=st.startsWith("to")?st.split(",")[0]:"to bottom";let wt=[],Zt=J.exec(Q);for(;null!==Zt;)wt=wt.concat({color:Zt[1],position:Jt(Zt[2],wt.length)}),Zt=J.exec(Q);return wt=wt.filter(({color:jt})=>jt.startsWith("#")||jt.startsWith("rgb")),{stops:wt,side:ot}}function Jt(st,J){const Q=1===J?"100%":`${J}%`;return(null==st?void 0:st.includes("%"))?st:Q}function pt(st){return st.reduce((J,Q)=>(J[Q]={parseHTML:ot=>null==ot?void 0:ot.getAttribute(`${Q}`)},J),{})}function B(st){return st.split(";").reduce((J,Q)=>{var ot;const[wt,Zt]=null!==(ot=Q.split(":"))&&void 0!==ot?ot:[];return wt&&Zt&&(J[wt.trim()]=Zt.trim()),J},{})}function rt(st){var J;return st.endOffset-st.startOffset>0||0!==st.startOffset&&st.endOffset!==((null===(J=st.endContainer.nodeValue)||void 0===J?void 0:J.length)||0)}function dt({stops:st,side:J}){return`linear-gradient(${J}, ${st.map(({color:Q,position:ot})=>`rgba(${(0,l.tuiParseColor)(Q).join(", ")}) ${ot}`).join(", ")})`}},12867:(Vt,yt,c)=>{c.r(yt),c.d(yt,{CommandManager:()=>O,Editor:()=>Ko,Extension:()=>de,InputRule:()=>Re,Mark:()=>Fn,Node:()=>Kn,NodeView:()=>Bo,PasteRule:()=>_t,Tracker:()=>_,callOrReturn:()=>a,combineTransactionSteps:()=>_o,createChainableState:()=>Tt,createDocument:()=>sn,createNodeFromContent:()=>zt,createStyleTag:()=>Ro,defaultBlockAt:()=>no,deleteProps:()=>tn,elementFromString:()=>Nt,escapeForRegEx:()=>i,extensions:()=>Qn,findChildren:()=>To,findChildrenInRange:()=>Co,findDuplicates:()=>Qt,findParentNode:()=>Rn,findParentNodeClosestToPos:()=>oo,fromString:()=>E,generateHTML:()=>io,generateJSON:()=>vo,generateText:()=>ro,getAttributes:()=>so,getAttributesFromExtensions:()=>V,getChangedRanges:()=>Eo,getDebugJSON:()=>Ln,getExtensionField:()=>k,getHTMLFromFragment:()=>Jn,getMarkAttributes:()=>qn,getMarkRange:()=>C,getMarkType:()=>f,getMarksBetween:()=>to,getNodeAttributes:()=>zn,getNodeType:()=>U,getRenderedAttributes:()=>Rt,getSchema:()=>$n,getSchemaByResolvedExtensions:()=>F,getSchemaTypeByName:()=>at,getSchemaTypeNameByName:()=>fn,getSplittedAttributes:()=>Bn,getText:()=>Zn,getTextBetween:()=>Oe,getTextContentFromNodes:()=>te,getTextSerializersFromSchema:()=>Le,injectExtensionAttributesToParseRule:()=>P,inputRulesPlugin:()=>$,isActive:()=>Yn,isEmptyObject:()=>u,isExtensionRulesEnabled:()=>Lt,isFunction:()=>H,isList:()=>Cn,isMacOS:()=>Se,isMarkActive:()=>An,isNodeActive:()=>he,isNodeEmpty:()=>jn,isNodeSelection:()=>pn,isNumber:()=>ct,isPlainObject:()=>re,isRegExp:()=>ee,isString:()=>n,isTextSelection:()=>A,isiOS:()=>z,markInputRule:()=>Jo,markPasteRule:()=>mo,mergeAttributes:()=>Ot,mergeDeep:()=>ae,minMax:()=>R,nodeInputRule:()=>Lo,nodePasteRule:()=>r,objectIncludes:()=>Xe,pasteRulesPlugin:()=>Ft,posToDOMRect:()=>Nn,removeDuplicates:()=>Sn,resolveFocusPosition:()=>K,selectionToInsertionEnd:()=>Gt,splitExtensions:()=>L,textInputRule:()=>ho,textPasteRule:()=>d,textblockTypeInputRule:()=>po,wrappingInputRule:()=>fo});var M=c(62463),l=c(43594),b=c(70768),S=c(77346),g=c(38480);const it=(t,e)=>!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);const q=(t,e,o)=>{let s=function(t,e){let{$cursor:o}=t.selection;return!o||(e?!e.endOfTextblock("backward",t):o.parentOffset>0)?null:o}(t,o);if(!s)return!1;let p=Ct(s);if(!p){let y=s.blockRange(),D=y&&(0,g.k9)(y);return null!=D&&(e&&e(t.tr.lift(y,D).scrollIntoView()),!0)}let m=p.nodeBefore;if(!m.type.spec.isolating&&dt(t,p,e))return!0;if(0==s.parent.content.size&&(nt(m,"end")||M.qv.isSelectable(m))){let y=(0,g.dR)(t.doc,s.before(),s.after(),S.p2.empty);if(y&&y.slice.size<y.to-y.from){if(e){let D=t.tr.step(y);D.setSelection(nt(m,"end")?M.Y1.findFrom(D.doc.resolve(D.mapping.map(p.pos,-1)),-1):M.qv.create(D.doc,p.pos-m.nodeSize)),e(D.scrollIntoView())}return!0}}return!(!m.isAtom||p.depth!=s.depth-1||(e&&e(t.tr.delete(p.pos-m.nodeSize,p.pos).scrollIntoView()),0))};function nt(t,e,o=!1){for(let s=t;s;s="start"==e?s.firstChild:s.lastChild){if(s.isTextblock)return!0;if(o&&1!=s.childCount)return!1}return!1}const vt=(t,e,o)=>{let{$head:s,empty:p}=t.selection,m=s;if(!p)return!1;if(s.parent.isTextblock){if(o?!o.endOfTextblock("backward",t):s.parentOffset>0)return!1;m=Ct(s)}let y=m&&m.nodeBefore;return!(!y||!M.qv.isSelectable(y)||(e&&e(t.tr.setSelection(M.qv.create(t.doc,m.pos-y.nodeSize)).scrollIntoView()),0))};function Ct(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}const kt=(t,e,o)=>{let s=function(t,e){let{$cursor:o}=t.selection;return!o||(e?!e.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size)?null:o}(t,o);if(!s)return!1;let p=Pt(s);if(!p)return!1;let m=p.nodeAfter;if(dt(t,p,e))return!0;if(0==s.parent.content.size&&(nt(m,"start")||M.qv.isSelectable(m))){let y=(0,g.dR)(t.doc,s.before(),s.after(),S.p2.empty);if(y&&y.slice.size<y.to-y.from){if(e){let D=t.tr.step(y);D.setSelection(nt(m,"start")?M.Y1.findFrom(D.doc.resolve(D.mapping.map(p.pos)),1):M.qv.create(D.doc,D.mapping.map(p.pos))),e(D.scrollIntoView())}return!0}}return!(!m.isAtom||p.depth!=s.depth-1||(e&&e(t.tr.delete(p.pos,p.pos+m.nodeSize).scrollIntoView()),0))},St=(t,e,o)=>{let{$head:s,empty:p}=t.selection,m=s;if(!p)return!1;if(s.parent.isTextblock){if(o?!o.endOfTextblock("forward",t):s.parentOffset<s.parent.content.size)return!1;m=Pt(s)}let y=m&&m.nodeAfter;return!(!y||!M.qv.isSelectable(y)||(e&&e(t.tr.setSelection(M.qv.create(t.doc,m.pos)).scrollIntoView()),0))};function Pt(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let o=t.node(e);if(t.index(e)+1<o.childCount)return t.doc.resolve(t.after(e+1));if(o.type.spec.isolating)break}return null}const mt=(t,e)=>{let{$head:o,$anchor:s}=t.selection;return!(!o.parent.type.spec.code||!o.sameParent(s)||(e&&e(t.tr.insertText("\n").scrollIntoView()),0))};function j(t){for(let e=0;e<t.edgeCount;e++){let{type:o}=t.edge(e);if(o.isTextblock&&!o.hasRequiredAttrs())return o}return null}const Dt=(t,e)=>{let{$head:o,$anchor:s}=t.selection;if(!o.parent.type.spec.code||!o.sameParent(s))return!1;let p=o.node(-1),m=o.indexAfter(-1),y=j(p.contentMatchAt(m));if(!y||!p.canReplaceWith(m,m,y))return!1;if(e){let D=o.after(),I=t.tr.replaceWith(D,D,y.createAndFill());I.setSelection(M.Y1.near(I.doc.resolve(D),1)),e(I.scrollIntoView())}return!0},It=(t,e)=>{let o=t.selection,{$from:s,$to:p}=o;if(o instanceof M.C1||s.parent.inlineContent||p.parent.inlineContent)return!1;let m=j(p.parent.contentMatchAt(p.indexAfter()));if(!m||!m.isTextblock)return!1;if(e){let y=(!s.parentOffset&&p.index()<p.parent.childCount?s:p).pos,D=t.tr.insert(y,m.createAndFill());D.setSelection(M.Bs.create(D.doc,y+1)),e(D.scrollIntoView())}return!0},bt=(t,e)=>{let{$cursor:o}=t.selection;if(!o||o.parent.content.size)return!1;if(o.depth>1&&o.after()!=o.end(-1)){let m=o.before();if((0,g.Ax)(t.doc,m))return e&&e(t.tr.split(m).scrollIntoView()),!0}let s=o.blockRange(),p=s&&(0,g.k9)(s);return null!=p&&(e&&e(t.tr.lift(s,p).scrollIntoView()),!0)};var t;function dt(t,e,o){let m,y,s=e.nodeBefore,p=e.nodeAfter;if(s.type.spec.isolating||p.type.spec.isolating)return!1;if(function(t,e,o){let s=e.nodeBefore,p=e.nodeAfter,m=e.index();return!(!(s&&p&&s.type.compatibleContent(p.type))||(!s.content.size&&e.parent.canReplace(m-1,m)?(o&&o(t.tr.delete(e.pos-s.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(m,m+1)||!p.isTextblock&&!(0,g.Mn)(t.doc,e.pos)||(o&&o(t.tr.clearIncompatible(e.pos,s.type,s.contentMatchAt(s.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,o))return!0;let D=e.parent.canReplace(e.index(),e.index()+1);if(D&&(m=(y=s.contentMatchAt(s.childCount)).findWrapping(p.type))&&y.matchType(m[0]||p.type).validEnd){if(o){let lt=e.pos+p.nodeSize,gt=S.HY.empty;for(let Yt=m.length-1;Yt>=0;Yt--)gt=S.HY.from(m[Yt].create(null,gt));gt=S.HY.from(s.copy(gt));let Ut=t.tr.step(new g.FC(e.pos-1,lt,e.pos,lt,new S.p2(gt,1,0),m.length,!0)),$t=lt+2*m.length;(0,g.Mn)(Ut.doc,$t)&&Ut.join($t),o(Ut.scrollIntoView())}return!0}let I=M.Y1.findFrom(e,1),Z=I&&I.$from.blockRange(I.$to),X=Z&&(0,g.k9)(Z);if(null!=X&&X>=e.depth)return o&&o(t.tr.lift(Z,X).scrollIntoView()),!0;if(D&&nt(p,"start",!0)&&nt(s,"end")){let lt=s,gt=[];for(;gt.push(lt),!lt.isTextblock;)lt=lt.lastChild;let Ut=p,$t=1;for(;!Ut.isTextblock;Ut=Ut.firstChild)$t++;if(lt.canReplace(lt.childCount,lt.childCount,Ut.content)){if(o){let Yt=S.HY.empty;for(let le=gt.length-1;le>=0;le--)Yt=S.HY.from(gt[le].copy(Yt));o(t.tr.step(new g.FC(e.pos-gt.length,e.pos+p.nodeSize,e.pos+$t,e.pos+p.nodeSize-$t,new S.p2(Yt,gt.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function st(t){return function(e,o){let s=e.selection,p=t<0?s.$from:s.$to,m=p.depth;for(;p.node(m).isInline;){if(!m)return!1;m--}return!!p.node(m).isTextblock&&(o&&o(e.tr.setSelection(M.Bs.create(e.doc,t<0?p.start(m):p.end(m)))),!0)}}const J=st(-1),Q=st(1);function wt(t,e=null){return function(o,s){let p=!1;for(let m=0;m<o.selection.ranges.length&&!p;m++){let{$from:{pos:y},$to:{pos:D}}=o.selection.ranges[m];o.doc.nodesBetween(y,D,(I,Z)=>{if(p)return!1;if(I.isTextblock&&!I.hasMarkup(t,e))if(I.type==t)p=!0;else{let X=o.doc.resolve(Z),lt=X.index();p=X.parent.canReplaceWith(lt,lt+1,t)}})}if(!p)return!1;if(s){let m=o.tr;for(let y=0;y<o.selection.ranges.length;y++){let{$from:{pos:D},$to:{pos:I}}=o.selection.ranges[y];m.setBlockType(D,I,t,e)}s(m.scrollIntoView())}return!0}}function pe(...t){return function(e,o,s){for(let p=0;p<t.length;p++)if(t[p](e,o,s))return!0;return!1}}let be=pe(it,q,vt),Ae=pe(it,kt,St);const me={Enter:pe(mt,It,bt,(e,o)=>{let{$from:s,$to:p}=e.selection;if(e.selection instanceof M.qv&&e.selection.node.isBlock)return!(!s.parentOffset||!(0,g.Ax)(e.doc,s.pos)||(o&&o(e.tr.split(s.pos).scrollIntoView()),0));if(!s.parent.isBlock)return!1;if(o){let m=p.parentOffset==p.parent.content.size,y=e.tr;(e.selection instanceof M.Bs||e.selection instanceof M.C1)&&y.deleteSelection();let D=0==s.depth?null:j(s.node(-1).contentMatchAt(s.indexAfter(-1))),I=t,Z=I?[I]:m&&D?[{type:D}]:void 0,X=(0,g.Ax)(y.doc,y.mapping.map(s.pos),1,Z);if(!Z&&!X&&(0,g.Ax)(y.doc,y.mapping.map(s.pos),1,D?[{type:D}]:void 0)&&(D&&(Z=[{type:D}]),X=!0),X&&(y.split(y.mapping.map(s.pos),1,Z),!m&&!s.parentOffset&&s.parent.type!=D)){let lt=y.mapping.map(s.before()),gt=y.doc.resolve(lt);D&&s.node(-1).canReplaceWith(gt.index(),gt.index()+1,D)&&y.setNodeMarkup(y.mapping.map(s.before()),D)}o(y.scrollIntoView())}return!0}),"Mod-Enter":Dt,Backspace:be,"Mod-Backspace":be,"Shift-Backspace":be,Delete:Ae,"Mod-Delete":Ae,"Mod-a":(t,e)=>(e&&e(t.tr.setSelection(new M.C1(t.doc))),!0)},Je={"Ctrl-h":me.Backspace,"Alt-Backspace":me["Mod-Backspace"],"Ctrl-d":me.Delete,"Ctrl-Alt-Backspace":me["Mod-Delete"],"Alt-Delete":me["Mod-Delete"],"Alt-d":me["Mod-Delete"],"Ctrl-a":J,"Ctrl-e":Q};for(let t in me)Je[t]=me[t];function Tt(t){const{state:e,transaction:o}=t;let{selection:s}=o,{doc:p}=o,{storedMarks:m}=o;return _e(qt({},e),{apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return m},get selection(){return s},get doc(){return p},get tr(){return s=o.selection,p=o.doc,m=o.storedMarks,o}})}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();class O{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:o,state:s}=this,{view:p}=o,{tr:m}=s,y=this.buildProps(m);return Object.fromEntries(Object.entries(e).map(([D,I])=>[D,(...X)=>{const lt=I(...X)(y);return!m.getMeta("preventDispatch")&&!this.hasCustomState&&p.dispatch(m),lt}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,o=!0){const{rawCommands:s,editor:p,state:m}=this,{view:y}=p,D=[],I=!!e,Z=e||m.tr,lt=_e(qt({},Object.fromEntries(Object.entries(s).map(([gt,Ut])=>[gt,(...Yt)=>{const Xt=this.buildProps(Z,o),le=Ut(...Yt)(Xt);return D.push(le),lt}]))),{run:()=>(!I&&o&&!Z.getMeta("preventDispatch")&&!this.hasCustomState&&y.dispatch(Z),D.every(gt=>!0===gt))});return lt}createCan(e){const{rawCommands:o,state:s}=this,m=e||s.tr,y=this.buildProps(m,!1),D=Object.fromEntries(Object.entries(o).map(([I,Z])=>[I,(...X)=>Z(...X)(_e(qt({},y),{dispatch:void 0}))]));return _e(qt({},D),{chain:()=>this.createChain(m,!1)})}buildProps(e,o=!0){const{rawCommands:s,editor:p,state:m}=this,{view:y}=p;m.storedMarks&&e.setStoredMarks(m.storedMarks);const D={tr:e,editor:p,view:y,state:Tt({state:m,transaction:e}),dispatch:o?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(s).map(([I,Z])=>[I,(...X)=>Z(...X)(D)]))}};return D}}function k(t,e,o){return void 0===t.config[e]&&t.parent?k(t.parent,e,o):"function"==typeof t.config[e]?t.config[e].bind(_e(qt({},o),{parent:t.parent?k(t.parent,e,o):null})):t.config[e]}function L(t){return{baseExtensions:t.filter(p=>"extension"===p.type),nodeExtensions:t.filter(p=>"node"===p.type),markExtensions:t.filter(p=>"mark"===p.type)}}function V(t){const e=[],{nodeExtensions:o,markExtensions:s}=L(t),p=[...o,...s],m={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(y=>{const I=k(y,"addGlobalAttributes",{name:y.name,options:y.options,storage:y.storage});I&&I().forEach(X=>{X.types.forEach(lt=>{Object.entries(X.attributes).forEach(([gt,Ut])=>{e.push({type:lt,name:gt,attribute:qt(qt({},m),Ut)})})})})}),p.forEach(y=>{const I=k(y,"addAttributes",{name:y.name,options:y.options,storage:y.storage});if(!I)return;const Z=I();Object.entries(Z).forEach(([X,lt])=>{const gt=qt(qt({},m),lt);(null==lt?void 0:lt.isRequired)&&void 0===(null==lt?void 0:lt.default)&&delete gt.default,e.push({type:y.name,name:X,attribute:gt})})}),e}function U(t,e){if("string"==typeof t){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Ot(...t){return t.filter(e=>!!e).reduce((e,o)=>{const s=qt({},e);return Object.entries(o).forEach(([p,m])=>{s[p]=s[p]?"class"===p?[s[p],m].join(" "):"style"===p?[s[p],m].join("; "):m:m}),s},{})}function Rt(t,e){return e.filter(o=>o.attribute.rendered).map(o=>o.attribute.renderHTML?o.attribute.renderHTML(t.attrs)||{}:{[o.name]:t.attrs[o.name]}).reduce((o,s)=>Ot(o,s),{})}function H(t){return"function"==typeof t}function a(t,e,...o){return H(t)?e?t.bind(e)(...o):t(...o):t}function u(t={}){return 0===Object.keys(t).length&&t.constructor===Object}function E(t){return"string"!=typeof t?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):"true"===t||"false"!==t&&t}function P(t,e){return t.style?t:_e(qt({},t),{getAttrs:o=>{const s=t.getAttrs?t.getAttrs(o):t.attrs;if(!1===s)return!1;const p=e.reduce((m,y)=>{const D=y.attribute.parseHTML?y.attribute.parseHTML(o):E(o.getAttribute(y.name));return null==D?m:_e(qt({},m),{[y.name]:D})},{});return qt(qt({},s),p)}})}function w(t){return Object.fromEntries(Object.entries(t).filter(([e,o])=>("attrs"!==e||!u(o))&&null!=o))}function F(t){var e;const o=V(t),{nodeExtensions:s,markExtensions:p}=L(t),m=null===(e=s.find(I=>k(I,"topNode")))||void 0===e?void 0:e.name,y=Object.fromEntries(s.map(I=>{const Z=o.filter(Xt=>Xt.type===I.name),X={name:I.name,options:I.options,storage:I.storage},lt=t.reduce((Xt,le)=>{const Be=k(le,"extendNodeSchema",X);return qt(qt({},Xt),Be?Be(I):{})},{}),gt=w(_e(qt({},lt),{content:a(k(I,"content",X)),marks:a(k(I,"marks",X)),group:a(k(I,"group",X)),inline:a(k(I,"inline",X)),atom:a(k(I,"atom",X)),selectable:a(k(I,"selectable",X)),draggable:a(k(I,"draggable",X)),code:a(k(I,"code",X)),defining:a(k(I,"defining",X)),isolating:a(k(I,"isolating",X)),attrs:Object.fromEntries(Z.map(Xt=>{var le;return[Xt.name,{default:null===(le=null==Xt?void 0:Xt.attribute)||void 0===le?void 0:le.default}]}))})),Ut=a(k(I,"parseHTML",X));Ut&&(gt.parseDOM=Ut.map(Xt=>P(Xt,Z)));const $t=k(I,"renderHTML",X);$t&&(gt.toDOM=Xt=>$t({node:Xt,HTMLAttributes:Rt(Xt,Z)}));const Yt=k(I,"renderText",X);return Yt&&(gt.toText=Yt),[I.name,gt]})),D=Object.fromEntries(p.map(I=>{const Z=o.filter(Yt=>Yt.type===I.name),X={name:I.name,options:I.options,storage:I.storage},lt=t.reduce((Yt,Xt)=>{const le=k(Xt,"extendMarkSchema",X);return qt(qt({},Yt),le?le(I):{})},{}),gt=w(_e(qt({},lt),{inclusive:a(k(I,"inclusive",X)),excludes:a(k(I,"excludes",X)),group:a(k(I,"group",X)),spanning:a(k(I,"spanning",X)),code:a(k(I,"code",X)),attrs:Object.fromEntries(Z.map(Yt=>{var Xt;return[Yt.name,{default:null===(Xt=null==Yt?void 0:Yt.attribute)||void 0===Xt?void 0:Xt.default}]}))})),Ut=a(k(I,"parseHTML",X));Ut&&(gt.parseDOM=Ut.map(Yt=>P(Yt,Z)));const $t=k(I,"renderHTML",X);return $t&&(gt.toDOM=Yt=>$t({mark:Yt,HTMLAttributes:Rt(Yt,Z)})),[I.name,gt]}));return new S.V_({topNode:m,nodes:y,marks:D})}function at(t,e){return e.nodes[t]||e.marks[t]||null}function Lt(t,e){return Array.isArray(e)?e.some(o=>("string"==typeof o?o:o.name)===t.name):e}const te=(t,e=500)=>{let o="";const s=t.parentOffset;return t.parent.nodesBetween(Math.max(0,s-e),s,(p,m,y,D)=>{var I,Z;o+=((null===(Z=(I=p.type.spec).toText)||void 0===Z?void 0:Z.call(I,{node:p,pos:m,parent:y,index:D}))||p.textContent||"%leaf%").slice(0,Math.max(0,s-m))}),o};function ee(t){return"[object RegExp]"===Object.prototype.toString.call(t)}class Re{constructor(e){this.find=e.find,this.handler=e.handler}}function Y(t){var e;const{editor:o,from:s,to:p,text:m,rules:y,plugin:D}=t,{view:I}=o;if(I.composing)return!1;const Z=I.state.doc.resolve(s);if(Z.parent.type.spec.code||(null===(e=Z.nodeBefore||Z.nodeAfter)||void 0===e?void 0:e.marks.find(gt=>gt.type.spec.code)))return!1;let X=!1;const lt=te(Z)+m;return y.forEach(gt=>{if(X)return;const Ut=((t,e)=>{if(ee(e))return e.exec(t);const o=e(t);if(!o)return null;const s=[o.text];return s.index=o.index,s.input=t,s.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),s.push(o.replaceWith)),s})(lt,gt.find);if(!Ut)return;const $t=I.state.tr,Yt=Tt({state:I.state,transaction:$t}),Xt={from:s-(Ut[0].length-m.length),to:p},{commands:le,chain:Be,can:ce}=new O({editor:o,state:Yt});null===gt.handler({state:Yt,range:Xt,match:Ut,commands:le,chain:Be,can:ce})||!$t.steps.length||($t.setMeta(D,{transform:$t,from:s,to:p,text:m}),I.dispatch($t),X=!0)}),X}function $(t){const{editor:e,rules:o}=t,s=new M.Sy({state:{init:()=>null,apply:(p,m)=>p.getMeta(s)||(p.selectionSet||p.docChanged?null:m)},props:{handleTextInput:(p,m,y,D)=>Y({editor:e,from:m,to:y,text:D,rules:o,plugin:s}),handleDOMEvents:{compositionend:p=>(setTimeout(()=>{const{$cursor:m}=p.state.selection;m&&Y({editor:e,from:m.pos,to:m.pos,text:"",rules:o,plugin:s})}),!1)},handleKeyDown(p,m){if("Enter"!==m.key)return!1;const{$cursor:y}=p.state.selection;return!!y&&Y({editor:e,from:y.pos,to:y.pos,text:"\n",rules:o,plugin:s})}},isInputRules:!0});return s}function ct(t){return"number"==typeof t}class _t{constructor(e){this.find=e.find,this.handler=e.handler}}function Ft(t){const{editor:e,rules:o}=t;let s=null,p=!1,m=!1;return o.map(D=>new M.Sy({view(I){const Z=X=>{var lt;s=(null===(lt=I.dom.parentElement)||void 0===lt?void 0:lt.contains(X.target))?I.dom.parentElement:null};return window.addEventListener("dragstart",Z),{destroy(){window.removeEventListener("dragstart",Z)}}},props:{handleDOMEvents:{drop:I=>(m=s===I.dom.parentElement,!1),paste:(I,Z)=>{var X;const lt=null===(X=Z.clipboardData)||void 0===X?void 0:X.getData("text/html");return p=!!(null==lt?void 0:lt.includes("data-pm-slice")),!1}}},appendTransaction:(I,Z,X)=>{const lt=I[0],gt="paste"===lt.getMeta("uiEvent")&&!p,Ut="drop"===lt.getMeta("uiEvent")&&!m;if(!gt&&!Ut)return;const $t=Z.doc.content.findDiffStart(X.doc.content),Yt=Z.doc.content.findDiffEnd(X.doc.content);if(!ct($t)||!Yt||$t===Yt.b)return;const Xt=X.tr,le=Tt({state:X,transaction:Xt});return function(t){const{editor:e,state:o,from:s,to:p,rule:m}=t,{commands:y,chain:D,can:I}=new O({editor:e,state:o}),Z=[];return o.doc.nodesBetween(s,p,(lt,gt)=>{if(!lt.isTextblock||lt.type.spec.code)return;const Ut=Math.max(s,gt),$t=Math.min(p,gt+lt.content.size);((t,e)=>{if(ee(e))return[...t.matchAll(e)];const o=e(t);return o?o.map(s=>{const p=[s.text];return p.index=s.index,p.input=t,p.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),p.push(s.replaceWith)),p}):[]})(lt.textBetween(Ut-gt,$t-gt,void 0,"\ufffc"),m.find).forEach(le=>{if(void 0===le.index)return;const Be=Ut+le.index+1,ce=Be+le[0].length,je={from:o.tr.mapping.map(Be),to:o.tr.mapping.map(ce)},ln=m.handler({state:o,range:je,match:le,commands:y,chain:D,can:I});Z.push(ln)})}),Z.every(lt=>null!==lt)}({editor:e,state:le,from:Math.max($t-1,0),to:Yt.b-1,rule:D})&&Xt.steps.length?Xt:void 0}}))}function Qt(t){const e=t.filter((o,s)=>t.indexOf(o)!==s);return[...new Set(e)]}class ne{constructor(e,o){this.splittableMarks=[],this.editor=o,this.extensions=ne.resolve(e),this.schema=F(this.extensions),this.extensions.forEach(s=>{var p;this.editor.extensionStorage[s.name]=s.storage;const m={name:s.name,options:s.options,storage:s.storage,editor:this.editor,type:at(s.name,this.schema)};"mark"===s.type&&(null===(p=a(k(s,"keepOnSplit",m)))||void 0===p||p)&&this.splittableMarks.push(s.name);const y=k(s,"onBeforeCreate",m);y&&this.editor.on("beforeCreate",y);const D=k(s,"onCreate",m);D&&this.editor.on("create",D);const I=k(s,"onUpdate",m);I&&this.editor.on("update",I);const Z=k(s,"onSelectionUpdate",m);Z&&this.editor.on("selectionUpdate",Z);const X=k(s,"onTransaction",m);X&&this.editor.on("transaction",X);const lt=k(s,"onFocus",m);lt&&this.editor.on("focus",lt);const gt=k(s,"onBlur",m);gt&&this.editor.on("blur",gt);const Ut=k(s,"onDestroy",m);Ut&&this.editor.on("destroy",Ut)})}static resolve(e){const o=ne.sort(ne.flatten(e)),s=Qt(o.map(p=>p.name));return s.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${s.map(p=>`'${p}'`).join(", ")}]. This can lead to issues.`),o}static flatten(e){return e.map(o=>{const p=k(o,"addExtensions",{name:o.name,options:o.options,storage:o.storage});return p?[o,...this.flatten(p())]:o}).flat(10)}static sort(e){return e.sort((s,p)=>{const m=k(s,"priority")||100,y=k(p,"priority")||100;return m>y?-1:m<y?1:0})}get commands(){return this.extensions.reduce((e,o)=>{const p=k(o,"addCommands",{name:o.name,options:o.options,storage:o.storage,editor:this.editor,type:at(o.name,this.schema)});return p?qt(qt({},e),p()):e},{})}get plugins(){const{editor:e}=this,o=ne.sort([...this.extensions].reverse()),s=[],p=[],m=o.map(y=>{const D={name:y.name,options:y.options,storage:y.storage,editor:e,type:at(y.name,this.schema)},I=[],Z=k(y,"addKeyboardShortcuts",D);let X={};if("mark"===y.type&&y.config.exitable&&(X.ArrowRight=()=>Fn.handleExit({editor:e,mark:y})),Z){const Yt=Object.fromEntries(Object.entries(Z()).map(([Xt,le])=>[Xt,()=>le({editor:e})]));X=qt(qt({},X),Yt)}const lt=(0,b.h)(X);I.push(lt);const gt=k(y,"addInputRules",D);Lt(y,e.options.enableInputRules)&&gt&&s.push(...gt());const Ut=k(y,"addPasteRules",D);Lt(y,e.options.enablePasteRules)&&Ut&&p.push(...Ut());const $t=k(y,"addProseMirrorPlugins",D);if($t){const Yt=$t();I.push(...Yt)}return I}).flat();return[$({editor:e,rules:s}),...Ft({editor:e,rules:p}),...m]}get attributes(){return V(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:o}=L(this.extensions);return Object.fromEntries(o.filter(s=>!!k(s,"addNodeView")).map(s=>{const p=this.attributes.filter(I=>I.type===s.name),m={name:s.name,options:s.options,storage:s.storage,editor:e,type:U(s.name,this.schema)},y=k(s,"addNodeView",m);return y?[s.name,(I,Z,X,lt)=>{const gt=Rt(I,p);return y()({editor:e,node:I,getPos:X,decorations:lt,HTMLAttributes:gt,extension:s})}]:[]}))}}function re(t){return"Object"===function(t){return Object.prototype.toString.call(t).slice(8,-1)}(t)&&t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function ae(t,e){const o=qt({},t);return re(t)&&re(e)&&Object.keys(e).forEach(s=>{re(e[s])?s in t?o[s]=ae(t[s],e[s]):Object.assign(o,{[s]:e[s]}):Object.assign(o,{[s]:e[s]})}),o}class de{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=qt(qt({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(k(this,"addOptions",{name:this.name}))),this.storage=a(k(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new de(e)}configure(e={}){const o=this.extend();return o.options=ae(this.options,e),o.storage=a(k(o,"addStorage",{name:o.name,options:o.options})),o}extend(e={}){const o=new de(e);return o.parent=this,this.child=o,o.name=e.name?e.name:o.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${o.name}".`),o.options=a(k(o,"addOptions",{name:o.name})),o.storage=a(k(o,"addStorage",{name:o.name,options:o.options})),o}}function Oe(t,e,o){const{from:s,to:p}=e,{blockSeparator:m="\n\n",textSerializers:y={}}=o||{};let D="",I=!0;return t.nodesBetween(s,p,(Z,X,lt,gt)=>{var Ut;const $t=null==y?void 0:y[Z.type.name];$t?(Z.isBlock&&!I&&(D+=m,I=!0),lt&&(D+=$t({node:Z,pos:X,parent:lt,index:gt,range:e}))):Z.isText?(D+=null===(Ut=null==Z?void 0:Z.text)||void 0===Ut?void 0:Ut.slice(Math.max(s,X)-X,p-X),I=!1):Z.isBlock&&!I&&(D+=m,I=!0)}),D}function Le(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,o])=>[e,o.spec.toText]))}const en=de.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new M.Sy({key:new M.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:o}=t,{doc:s,selection:p}=e,{ranges:m}=p;return Oe(s,{from:Math.min(...m.map(X=>X.$from.pos)),to:Math.max(...m.map(X=>X.$to.pos))},{textSerializers:Le(o)})}}})]}});function Xe(t,e,o={strict:!0}){const s=Object.keys(e);return!s.length||s.every(p=>o.strict?e[p]===t[p]:ee(e[p])?e[p].test(t[p]):e[p]===t[p])}function qe(t,e,o={}){return t.find(s=>s.type===e&&Xe(s.attrs,o))}function T(t,e,o={}){return!!qe(t,e,o)}function C(t,e,o={}){if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if(t.parentOffset===s.offset&&0!==s.offset&&(s=t.parent.childBefore(t.parentOffset)),!s.node)return;const p=qe([...s.node.marks],e,o);if(!p)return;let m=s.index,y=t.start()+s.offset,D=m+1,I=y+s.node.nodeSize;for(qe([...s.node.marks],e,o);m>0&&p.isInSet(t.parent.child(m-1).marks);)m-=1,y-=t.parent.child(m).nodeSize;for(;D<t.parent.childCount&&T([...t.parent.child(D).marks],e,o);)I+=t.parent.child(D).nodeSize,D+=1;return{from:y,to:I}}function f(t,e){if("string"==typeof t){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function A(t){return t instanceof M.Bs}function R(t=0,e=0,o=0){return Math.min(Math.max(t,e),o)}function K(t,e=null){if(!e)return null;const o=M.Y1.atStart(t),s=M.Y1.atEnd(t);if("start"===e||!0===e)return o;if("end"===e)return s;const p=o.from,m=s.to;return"all"===e?M.Bs.create(t,R(0,p,m),R(t.content.size,p,m)):M.Bs.create(t,R(e,p,m),R(e,p,m))}function z(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Nt(t){const e=`<body>${t}</body>`;return(new window.DOMParser).parseFromString(e,"text/html").body}function zt(t,e,o){if(o=qt({slice:!0,parseOptions:{}},o),"object"==typeof t&&null!==t)try{return Array.isArray(t)&&t.length>0?S.HY.fromArray(t.map(s=>e.nodeFromJSON(s))):e.nodeFromJSON(t)}catch(s){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),zt("",e,o)}if("string"==typeof t){const s=S.aw.fromSchema(e);return o.slice?s.parseSlice(Nt(t),o.parseOptions).content:s.parse(Nt(t),o.parseOptions)}return zt("",e,o)}function Gt(t,e,o){const s=t.steps.length-1;if(s<e)return;const p=t.steps[s];if(!(p instanceof g.Pu||p instanceof g.FC))return;let y=0;t.mapping.maps[s].forEach((D,I,Z,X)=>{0===y&&(y=X)}),t.setSelection(M.Y1.near(t.doc.resolve(y),o))}function Se(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function he(t,e,o={}){const{from:s,to:p,empty:m}=t.selection,y=e?U(e,t.schema):null,D=[];t.doc.nodesBetween(s,p,(lt,gt)=>{if(lt.isText)return;const Ut=Math.max(s,gt),$t=Math.min(p,gt+lt.nodeSize);D.push({node:lt,from:Ut,to:$t})});const I=p-s,Z=D.filter(lt=>!y||y.name===lt.node.type.name).filter(lt=>Xe(lt.node.attrs,o,{strict:!1}));return m?!!Z.length:Z.reduce((lt,gt)=>lt+gt.to-gt.from,0)>=I}function fn(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function tn(t,e){const o="string"==typeof e?[e]:e;return Object.keys(t).reduce((s,p)=>(o.includes(p)||(s[p]=t[p]),s),{})}function sn(t,e,o={}){return zt(t,e,{slice:!1,parseOptions:o})}function _o(t,e){const o=new g.wx(t);return e.forEach(s=>{s.steps.forEach(p=>{o.step(p)})}),o}function no(t){for(let e=0;e<t.edgeCount;e+=1){const{type:o}=t.edge(e);if(o.isTextblock&&!o.hasRequiredAttrs())return o}return null}function To(t,e){const o=[];return t.descendants((s,p)=>{e(s)&&o.push({node:s,pos:p})}),o}function Co(t,e,o){const s=[];return t.nodesBetween(e.from,e.to,(p,m)=>{o(p)&&s.push({node:p,pos:m})}),s}function oo(t,e){for(let o=t.depth;o>0;o-=1){const s=t.node(o);if(e(s))return{pos:o>0?t.before(o):0,start:t.start(o),depth:o,node:s}}}function Rn(t){return e=>oo(e.$from,t)}function Jn(t,e){const o=S.PW.fromSchema(e).serializeFragment(t),p=document.implementation.createHTMLDocument().createElement("div");return p.appendChild(o),p.innerHTML}function $n(t){return F(ne.resolve(t))}function io(t,e){const o=$n(e);return Jn(S.NB.fromJSON(o,t).content,o)}function vo(t,e){const o=$n(e),s=Nt(t);return S.aw.fromSchema(o).parse(s).toJSON()}function Zn(t,e){return Oe(t,{from:0,to:t.content.size},e)}function ro(t,e,o){const{blockSeparator:s="\n\n",textSerializers:p={}}=o||{},m=$n(e);return Zn(S.NB.fromJSON(m,t),{blockSeparator:s,textSerializers:qt(qt({},Le(m)),p)})}function qn(t,e){const o=f(e,t.schema),{from:s,to:p,empty:m}=t.selection,y=[];m?(t.storedMarks&&y.push(...t.storedMarks),y.push(...t.selection.$head.marks())):t.doc.nodesBetween(s,p,I=>{y.push(...I.marks)});const D=y.find(I=>I.type.name===o.name);return D?qt({},D.attrs):{}}function zn(t,e){const o=U(e,t.schema),{from:s,to:p}=t.selection,m=[];t.doc.nodesBetween(s,p,D=>{m.push(D)});const y=m.reverse().find(D=>D.type.name===o.name);return y?qt({},y.attrs):{}}function so(t,e){const o=fn("string"==typeof e?e:e.name,t.schema);return"node"===o?zn(t,e):"mark"===o?qn(t,e):{}}function Sn(t,e=JSON.stringify){const o={};return t.filter(s=>{const p=e(s);return!Object.prototype.hasOwnProperty.call(o,p)&&(o[p]=!0)})}function Eo(t){const{mapping:e,steps:o}=t,s=[];return e.maps.forEach((p,m)=>{const y=[];if(p.ranges.length)p.forEach((D,I)=>{y.push({from:D,to:I})});else{const{from:D,to:I}=o[m];if(void 0===D||void 0===I)return;y.push({from:D,to:I})}y.forEach(({from:D,to:I})=>{const Z=e.slice(m).map(D,-1),X=e.slice(m).map(I),lt=e.invert().map(Z,-1),gt=e.invert().map(X);s.push({oldRange:{from:lt,to:gt},newRange:{from:Z,to:X}})})}),function(t){const e=Sn(t);return 1===e.length?e:e.filter((o,s)=>!e.filter((m,y)=>y!==s).some(m=>o.oldRange.from>=m.oldRange.from&&o.oldRange.to<=m.oldRange.to&&o.newRange.from>=m.newRange.from&&o.newRange.to<=m.newRange.to))}(s)}function Ln(t,e=0){const s=t.type===t.type.schema.topNodeType?0:1,p=e,m=p+t.nodeSize,y=t.marks.map(Z=>{const X={type:Z.type.name};return Object.keys(Z.attrs).length&&(X.attrs=qt({},Z.attrs)),X}),D=qt({},t.attrs),I={type:t.type.name,from:p,to:m};return Object.keys(D).length&&(I.attrs=D),y.length&&(I.marks=y),t.content.childCount&&(I.content=[],t.forEach((Z,X)=>{var lt;null===(lt=I.content)||void 0===lt||lt.push(Ln(Z,e+X+s))})),t.text&&(I.text=t.text),I}function to(t,e,o){const s=[];return t===e?o.resolve(t).marks().forEach(p=>{const y=C(o.resolve(t-1),p.type);!y||s.push(qt({mark:p},y))}):o.nodesBetween(t,e,(p,m)=>{s.push(...p.marks.map(y=>({from:m,to:m+p.nodeSize,mark:y})))}),s}function Bn(t,e,o){return Object.fromEntries(Object.entries(o).filter(([s])=>{const p=t.find(m=>m.type===e&&m.name===s);return!!p&&p.attribute.keepOnSplit}))}function An(t,e,o={}){const{empty:s,ranges:p}=t.selection,m=e?f(e,t.schema):null;if(s)return!!(t.storedMarks||t.selection.$from.marks()).filter(lt=>!m||m.name===lt.type.name).find(lt=>Xe(lt.attrs,o,{strict:!1}));let y=0;const D=[];if(p.forEach(({$from:lt,$to:gt})=>{const Ut=lt.pos,$t=gt.pos;t.doc.nodesBetween(Ut,$t,(Yt,Xt)=>{if(!Yt.isText&&!Yt.marks.length)return;const le=Math.max(Ut,Xt),Be=Math.min($t,Xt+Yt.nodeSize);y+=Be-le,D.push(...Yt.marks.map(je=>({mark:je,from:le,to:Be})))})}),0===y)return!1;const I=D.filter(lt=>!m||m.name===lt.mark.type.name).filter(lt=>Xe(lt.mark.attrs,o,{strict:!1})).reduce((lt,gt)=>lt+gt.to-gt.from,0),Z=D.filter(lt=>!m||lt.mark.type!==m&&lt.mark.type.excludes(m)).reduce((lt,gt)=>lt+gt.to-gt.from,0);return(I>0?I+Z:I)>=y}function Yn(t,e,o={}){if(!e)return he(t,null,o)||An(t,null,o);const s=fn(e,t.schema);return"node"===s?he(t,e,o):"mark"===s&&An(t,e,o)}function Cn(t,e){const{nodeExtensions:o}=L(e),s=o.find(y=>y.name===t);if(!s)return!1;const m=a(k(s,"group",{name:s.name,options:s.options,storage:s.storage}));return"string"==typeof m&&m.split(" ").includes("list")}function jn(t){var e;const o=null===(e=t.type.createAndFill())||void 0===e?void 0:e.toJSON(),s=t.toJSON();return JSON.stringify(o)===JSON.stringify(s)}function pn(t){return t instanceof M.qv}function Nn(t,e,o){const p=t.state.doc.content.size,m=R(e,0,p),y=R(o,0,p),D=t.coordsAtPos(m),I=t.coordsAtPos(y,-1),Z=Math.min(D.top,I.top),X=Math.max(D.bottom,I.bottom),lt=Math.min(D.left,I.left),gt=Math.max(D.right,I.right),le={top:Z,bottom:X,left:lt,right:gt,width:gt-lt,height:X-Z,x:lt,y:Z};return _e(qt({},le),{toJSON:()=>le})}function eo(t,e){const o=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(o){const s=o.filter(p=>null==e?void 0:e.includes(p.type.name));t.tr.ensureMarks(s)}}const bn=(t,e)=>{const o=Rn(y=>y.type===e)(t.selection);if(!o)return!0;const s=t.doc.resolve(Math.max(0,o.pos-1)).before(o.depth);if(void 0===s)return!0;const p=t.doc.nodeAt(s);return o.node.type===(null==p?void 0:p.type)&&(0,g.Mn)(t.doc,o.pos)&&t.join(o.pos),!0},Wn=(t,e)=>{const o=Rn(y=>y.type===e)(t.selection);if(!o)return!0;const s=t.doc.resolve(o.start).after(o.depth);if(void 0===s)return!0;const p=t.doc.nodeAt(s);return o.node.type===(null==p?void 0:p.type)&&(0,g.Mn)(t.doc,s)&&t.join(s),!0};var Do=Object.freeze({__proto__:null,blur:()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var o;t.isDestroyed||(e.dom.blur(),null===(o=null==window?void 0:window.getSelection())||void 0===o||o.removeAllRanges())}),!0),clearContent:(t=!1)=>({commands:e})=>e.setContent("",t),clearNodes:()=>({state:t,tr:e,dispatch:o})=>{const{selection:s}=e,{ranges:p}=s;return o&&p.forEach(({$from:m,$to:y})=>{t.doc.nodesBetween(m.pos,y.pos,(D,I)=>{if(D.type.isText)return;const{doc:Z,mapping:X}=e,lt=Z.resolve(X.map(I)),gt=Z.resolve(X.map(I+D.nodeSize)),Ut=lt.blockRange(gt);if(!Ut)return;const $t=(0,g.k9)(Ut);if(D.type.isTextblock){const{defaultType:Yt}=lt.parent.contentMatchAt(lt.index());e.setNodeMarkup(Ut.start,Yt)}($t||0===$t)&&e.lift(Ut,$t)})}),!0},command:t=>e=>t(e),createParagraphNear:()=>({state:t,dispatch:e})=>It(t,e),deleteCurrentNode:()=>({tr:t,dispatch:e})=>{const{selection:o}=t,s=o.$anchor.node();if(s.content.size>0)return!1;const p=t.selection.$anchor;for(let m=p.depth;m>0;m-=1)if(p.node(m).type===s.type){if(e){const D=p.before(m),I=p.after(m);t.delete(D,I).scrollIntoView()}return!0}return!1},deleteNode:t=>({tr:e,state:o,dispatch:s})=>{const p=U(t,o.schema),m=e.selection.$anchor;for(let y=m.depth;y>0;y-=1)if(m.node(y).type===p){if(s){const I=m.before(y),Z=m.after(y);e.delete(I,Z).scrollIntoView()}return!0}return!1},deleteRange:t=>({tr:e,dispatch:o})=>{const{from:s,to:p}=t;return o&&e.delete(s,p),!0},deleteSelection:()=>({state:t,dispatch:e})=>it(t,e),enter:()=>({commands:t})=>t.keyboardShortcut("Enter"),exitCode:()=>({state:t,dispatch:e})=>Dt(t,e),extendMarkRange:(t,e={})=>({tr:o,state:s,dispatch:p})=>{const m=f(t,s.schema),{doc:y,selection:D}=o,{$from:I,from:Z,to:X}=D;if(p){const lt=C(I,m,e);if(lt&&lt.from<=Z&&lt.to>=X){const gt=M.Bs.create(y,lt.from,lt.to);o.setSelection(gt)}}return!0},first:t=>e=>{const o="function"==typeof t?t(e):t;for(let s=0;s<o.length;s+=1)if(o[s](e))return!0;return!1},focus:(t=null,e={})=>({editor:o,view:s,tr:p,dispatch:m})=>{e=qt({scrollIntoView:!0},e);const y=()=>{z()&&s.dom.focus(),requestAnimationFrame(()=>{o.isDestroyed||(s.focus(),(null==e?void 0:e.scrollIntoView)&&o.commands.scrollIntoView())})};if(s.hasFocus()&&null===t||!1===t)return!0;if(m&&null===t&&!A(o.state.selection))return y(),!0;const D=K(p.doc,t)||o.state.selection,I=o.state.selection.eq(D);return m&&(I||p.setSelection(D),I&&p.storedMarks&&p.setStoredMarks(p.storedMarks),y()),!0},forEach:(t,e)=>o=>t.every((s,p)=>e(s,_e(qt({},o),{index:p}))),insertContent:(t,e)=>({tr:o,commands:s})=>s.insertContentAt({from:o.selection.from,to:o.selection.to},t,e),insertContentAt:(t,e,o)=>({tr:s,dispatch:p,editor:m})=>{if(p){o=qt({parseOptions:{},updateSelection:!0},o);const y=zt(e,m.schema,{parseOptions:qt({preserveWhitespace:"full"},o.parseOptions)});if("<>"===y.toString())return!0;let{from:D,to:I}="number"==typeof t?{from:t,to:t}:t,Z=!0,X=!0;if(((t=>t.toString().startsWith("<"))(y)?y:[y]).forEach(gt=>{gt.check(),Z=!!Z&&gt.isText&&0===gt.marks.length,X=!!X&&gt.isBlock}),D===I&&X){const{parent:gt}=s.doc.resolve(D);gt.isTextblock&&!gt.type.spec.code&&!gt.childCount&&(D-=1,I+=1)}Z?Array.isArray(e)?s.insertText(e.map(gt=>gt.text||"").join(""),D,I):s.insertText("object"==typeof e&&e&&e.text?e.text:e,D,I):s.replaceWith(D,I,y),o.updateSelection&&Gt(s,s.steps.length-1,-1)}return!0},joinUp:()=>({state:t,dispatch:e})=>((t,e)=>{let p,o=t.selection,s=o instanceof M.qv;if(s){if(o.node.isTextblock||!(0,g.Mn)(t.doc,o.from))return!1;p=o.from}else if(p=(0,g.GJ)(t.doc,o.from,-1),null==p)return!1;if(e){let m=t.tr.join(p);s&&m.setSelection(M.qv.create(m.doc,p-t.doc.resolve(p).nodeBefore.nodeSize)),e(m.scrollIntoView())}return!0})(t,e),joinDown:()=>({state:t,dispatch:e})=>((t,e)=>{let s,o=t.selection;if(o instanceof M.qv){if(o.node.isTextblock||!(0,g.Mn)(t.doc,o.to))return!1;s=o.to}else if(s=(0,g.GJ)(t.doc,o.to,1),null==s)return!1;return e&&e(t.tr.join(s).scrollIntoView()),!0})(t,e),joinBackward:()=>({state:t,dispatch:e})=>q(t,e),joinForward:()=>({state:t,dispatch:e})=>kt(t,e),keyboardShortcut:t=>({editor:e,view:o,tr:s,dispatch:p})=>{const m=function(t){const e=t.split(/-(?!$)/);let s,p,m,y,o=e[e.length-1];"Space"===o&&(o=" ");for(let D=0;D<e.length-1;D+=1){const I=e[D];if(/^(cmd|meta|m)$/i.test(I))y=!0;else if(/^a(lt)?$/i.test(I))s=!0;else if(/^(c|ctrl|control)$/i.test(I))p=!0;else if(/^s(hift)?$/i.test(I))m=!0;else{if(!/^mod$/i.test(I))throw new Error(`Unrecognized modifier name: ${I}`);z()||Se()?y=!0:p=!0}}return s&&(o=`Alt-${o}`),p&&(o=`Ctrl-${o}`),y&&(o=`Meta-${o}`),m&&(o=`Shift-${o}`),o}(t).split(/-(?!$)/),y=m.find(Z=>!["Alt","Ctrl","Meta","Shift"].includes(Z)),D=new KeyboardEvent("keydown",{key:"Space"===y?" ":y,altKey:m.includes("Alt"),ctrlKey:m.includes("Ctrl"),metaKey:m.includes("Meta"),shiftKey:m.includes("Shift"),bubbles:!0,cancelable:!0}),I=e.captureTransaction(()=>{o.someProp("handleKeyDown",Z=>Z(o,D))});return null==I||I.steps.forEach(Z=>{const X=Z.map(s.mapping);X&&p&&s.maybeStep(X)}),!0},lift:(t,e={})=>({state:o,dispatch:s})=>!!he(o,U(t,o.schema),e)&&((t,e)=>{let{$from:o,$to:s}=t.selection,p=o.blockRange(s),m=p&&(0,g.k9)(p);return null!=m&&(e&&e(t.tr.lift(p,m).scrollIntoView()),!0)})(o,s),liftEmptyBlock:()=>({state:t,dispatch:e})=>bt(t,e),liftListItem:t=>({state:e,dispatch:o})=>function(t){return function(e,o){let{$from:s,$to:p}=e.selection,m=s.blockRange(p,y=>y.childCount>0&&y.firstChild.type==t);return!!m&&(!o||(s.node(m.depth-1).type==t?function(t,e,o,s){let p=t.tr,m=s.end,y=s.$to.end(s.depth);m<y&&(p.step(new g.FC(m-1,y,m,y,new S.p2(S.HY.from(o.create(null,s.parent.copy())),1,0),1,!0)),s=new S.Ts(p.doc.resolve(s.$from.pos),p.doc.resolve(y),s.depth));const D=(0,g.k9)(s);if(null==D)return!1;p.lift(s,D);let I=p.mapping.map(m,-1)-1;return(0,g.Mn)(p.doc,I)&&p.join(I),e(p.scrollIntoView()),!0}(e,o,t,m):function(t,e,o){let s=t.tr,p=o.parent;for(let Ut=o.end,$t=o.endIndex-1,Yt=o.startIndex;$t>Yt;$t--)Ut-=p.child($t).nodeSize,s.delete(Ut-1,Ut+1);let m=s.doc.resolve(o.start),y=m.nodeAfter;if(s.mapping.map(o.end)!=o.start+m.nodeAfter.nodeSize)return!1;let D=0==o.startIndex,I=o.endIndex==p.childCount,Z=m.node(-1),X=m.index(-1);if(!Z.canReplace(X+(D?0:1),X+1,y.content.append(I?S.HY.empty:S.HY.from(p))))return!1;let lt=m.pos,gt=lt+y.nodeSize;return s.step(new g.FC(lt-(D?1:0),gt+(I?1:0),lt+1,gt-1,new S.p2((D?S.HY.empty:S.HY.from(p.copy(S.HY.empty))).append(I?S.HY.empty:S.HY.from(p.copy(S.HY.empty))),D?0:1,I?0:1),D?0:1)),e(s.scrollIntoView()),!0}(e,o,m)))}}(U(t,e.schema))(e,o),newlineInCode:()=>({state:t,dispatch:e})=>mt(t,e),resetAttributes:(t,e)=>({tr:o,state:s,dispatch:p})=>{let m=null,y=null;const D=fn("string"==typeof t?t:t.name,s.schema);return!!D&&("node"===D&&(m=U(t,s.schema)),"mark"===D&&(y=f(t,s.schema)),p&&o.selection.ranges.forEach(I=>{s.doc.nodesBetween(I.$from.pos,I.$to.pos,(Z,X)=>{m&&m===Z.type&&o.setNodeMarkup(X,void 0,tn(Z.attrs,e)),y&&Z.marks.length&&Z.marks.forEach(lt=>{y===lt.type&&o.addMark(X,X+Z.nodeSize,y.create(tn(lt.attrs,e)))})})}),!0)},scrollIntoView:()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),selectAll:()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),selectNodeBackward:()=>({state:t,dispatch:e})=>vt(t,e),selectNodeForward:()=>({state:t,dispatch:e})=>St(t,e),selectParentNode:()=>({state:t,dispatch:e})=>((t,e)=>{let p,{$from:o,to:s}=t.selection,m=o.sharedDepth(s);return 0!=m&&(p=o.before(m),e&&e(t.tr.setSelection(M.qv.create(t.doc,p))),!0)})(t,e),selectTextblockEnd:()=>({state:t,dispatch:e})=>Q(t,e),selectTextblockStart:()=>({state:t,dispatch:e})=>J(t,e),setContent:(t,e=!1,o={})=>({tr:s,editor:p,dispatch:m})=>{const{doc:y}=s,D=sn(t,p.schema,o);return m&&s.replaceWith(0,y.content.size,D).setMeta("preventUpdate",!e),!0},setMark:(t,e={})=>({tr:o,state:s,dispatch:p})=>{const{selection:m}=o,{empty:y,ranges:D}=m,I=f(t,s.schema);if(p)if(y){const Z=qn(s,I);o.addStoredMark(I.create(qt(qt({},Z),e)))}else D.forEach(Z=>{const X=Z.$from.pos,lt=Z.$to.pos;s.doc.nodesBetween(X,lt,(gt,Ut)=>{const $t=Math.max(Ut,X),Yt=Math.min(Ut+gt.nodeSize,lt);gt.marks.find(le=>le.type===I)?gt.marks.forEach(le=>{I===le.type&&o.addMark($t,Yt,I.create(qt(qt({},le.attrs),e)))}):o.addMark($t,Yt,I.create(e))})});return function(t,e,o){var s;const{selection:p}=e;let m=null;if(A(p)&&(m=p.$cursor),m){const D=null!==(s=t.storedMarks)&&void 0!==s?s:m.marks();return!!o.isInSet(D)||!D.some(I=>I.type.excludes(o))}const{ranges:y}=p;return y.some(({$from:D,$to:I})=>{let Z=0===D.depth&&t.doc.inlineContent&&t.doc.type.allowsMarkType(o);return t.doc.nodesBetween(D.pos,I.pos,(X,lt,gt)=>{if(Z)return!1;if(X.isInline){const Ut=!gt||gt.type.allowsMarkType(o),$t=!!o.isInSet(X.marks)||!X.marks.some(Yt=>Yt.type.excludes(o));Z=Ut&&$t}return!Z}),Z})}(s,o,I)},setMeta:(t,e)=>({tr:o})=>(o.setMeta(t,e),!0),setNode:(t,e={})=>({state:o,dispatch:s,chain:p})=>{const m=U(t,o.schema);return m.isTextblock?p().command(({commands:y})=>!!wt(m,e)(o)||y.clearNodes()).command(({state:y})=>wt(m,e)(y,s)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:t=>({tr:e,dispatch:o})=>{if(o){const{doc:s}=e,p=R(t,0,s.content.size),m=M.qv.create(s,p);e.setSelection(m)}return!0},setTextSelection:t=>({tr:e,dispatch:o})=>{if(o){const{doc:s}=e,{from:p,to:m}="number"==typeof t?{from:t,to:t}:t,y=M.Bs.atStart(s).from,D=M.Bs.atEnd(s).to,I=R(p,y,D),Z=R(m,y,D),X=M.Bs.create(s,I,Z);e.setSelection(X)}return!0},sinkListItem:t=>({state:e,dispatch:o})=>function(t){return function(e,o){let{$from:s,$to:p}=e.selection,m=s.blockRange(p,Z=>Z.childCount>0&&Z.firstChild.type==t);if(!m)return!1;let y=m.startIndex;if(0==y)return!1;let D=m.parent,I=D.child(y-1);if(I.type!=t)return!1;if(o){let Z=I.lastChild&&I.lastChild.type==D.type,X=S.HY.from(Z?t.create():null),lt=new S.p2(S.HY.from(t.create(null,S.HY.from(D.type.create(null,X)))),Z?3:1,0),gt=m.start,Ut=m.end;o(e.tr.step(new g.FC(gt-(Z?3:1),Ut,gt,Ut,lt,1,!0)).scrollIntoView())}return!0}}(U(t,e.schema))(e,o),splitBlock:({keepMarks:t=!0}={})=>({tr:e,state:o,dispatch:s,editor:p})=>{const{selection:m,doc:y}=e,{$from:D,$to:I}=m,X=Bn(p.extensionManager.attributes,D.node().type.name,D.node().attrs);if(m instanceof M.qv&&m.node.isBlock)return!(!D.parentOffset||!(0,g.Ax)(y,D.pos)||(s&&(t&&eo(o,p.extensionManager.splittableMarks),e.split(D.pos).scrollIntoView()),0));if(!D.parent.isBlock)return!1;if(s){const lt=I.parentOffset===I.parent.content.size;m instanceof M.Bs&&e.deleteSelection();const gt=0===D.depth?void 0:no(D.node(-1).contentMatchAt(D.indexAfter(-1)));let Ut=lt&&gt?[{type:gt,attrs:X}]:void 0,$t=(0,g.Ax)(e.doc,e.mapping.map(D.pos),1,Ut);if(!Ut&&!$t&&(0,g.Ax)(e.doc,e.mapping.map(D.pos),1,gt?[{type:gt}]:void 0)&&($t=!0,Ut=gt?[{type:gt,attrs:X}]:void 0),$t&&(e.split(e.mapping.map(D.pos),1,Ut),gt&&!lt&&!D.parentOffset&&D.parent.type!==gt)){const Yt=e.mapping.map(D.before()),Xt=e.doc.resolve(Yt);D.node(-1).canReplaceWith(Xt.index(),Xt.index()+1,gt)&&e.setNodeMarkup(e.mapping.map(D.before()),gt)}t&&eo(o,p.extensionManager.splittableMarks),e.scrollIntoView()}return!0},splitListItem:t=>({tr:e,state:o,dispatch:s,editor:p})=>{var m;const y=U(t,o.schema),{$from:D,$to:I}=o.selection,Z=o.selection.node;if(Z&&Z.isBlock||D.depth<2||!D.sameParent(I))return!1;const X=D.node(-1);if(X.type!==y)return!1;const lt=p.extensionManager.attributes;if(0===D.parent.content.size&&D.node(-1).childCount===D.indexAfter(-1)){if(2===D.depth||D.node(-3).type!==y||D.index(-2)!==D.node(-2).childCount-1)return!1;if(s){let Xt=S.HY.empty;const le=D.index(-1)?1:D.index(-2)?2:3;for(let Un=D.depth-le;Un>=D.depth-3;Un-=1)Xt=S.HY.from(D.node(Un).copy(Xt));const Be=D.indexAfter(-1)<D.node(-2).childCount?1:D.indexAfter(-2)<D.node(-3).childCount?2:3,ce=Bn(lt,D.node().type.name,D.node().attrs),je=(null===(m=y.contentMatch.defaultType)||void 0===m?void 0:m.createAndFill(ce))||void 0;Xt=Xt.append(S.HY.from(y.createAndFill(null,je)||void 0));const ln=D.before(D.depth-(le-1));e.replace(ln,D.after(-Be),new S.p2(Xt,4-le,0));let Hn=-1;e.doc.nodesBetween(ln,e.doc.content.size,(Un,Vo)=>{if(Hn>-1)return!1;Un.isTextblock&&0===Un.content.size&&(Hn=Vo+1)}),Hn>-1&&e.setSelection(M.Bs.near(e.doc.resolve(Hn))),e.scrollIntoView()}return!0}const gt=I.pos===D.end()?X.contentMatchAt(0).defaultType:null,Ut=Bn(lt,X.type.name,X.attrs),$t=Bn(lt,D.node().type.name,D.node().attrs);e.delete(D.pos,I.pos);const Yt=gt?[{type:y,attrs:Ut},{type:gt,attrs:$t}]:[{type:y,attrs:Ut}];if(!(0,g.Ax)(e.doc,D.pos,2))return!1;if(s){const{selection:Xt,storedMarks:le}=o,{splittableMarks:Be}=p.extensionManager,ce=le||Xt.$to.parentOffset&&Xt.$from.marks();if(e.split(D.pos,2,Yt).scrollIntoView(),!ce||!s)return!0;const je=ce.filter(ln=>Be.includes(ln.type.name));e.ensureMarks(je)}return!0},toggleList:(t,e,o)=>({editor:s,tr:p,state:m,dispatch:y,chain:D,commands:I,can:Z})=>{const{extensions:X,splittableMarks:lt}=s.extensionManager,gt=U(t,m.schema),Ut=U(e,m.schema),{selection:$t,storedMarks:Yt}=m,{$from:Xt,$to:le}=$t,Be=Xt.blockRange(le),ce=Yt||$t.$to.parentOffset&&$t.$from.marks();if(!Be)return!1;const je=Rn(ln=>Cn(ln.type.name,X))($t);if(Be.depth>=1&&je&&Be.depth-je.depth<=1){if(je.node.type===gt)return I.liftListItem(Ut);if(Cn(je.node.type.name,X)&&gt.validContent(je.node.content)&&y)return D().command(()=>(p.setNodeMarkup(je.pos,gt),!0)).command(()=>bn(p,gt)).command(()=>Wn(p,gt)).run()}return o&&ce&&y?D().command(()=>{const ln=Z().wrapInList(gt),Hn=ce.filter(Un=>lt.includes(Un.type.name));return p.ensureMarks(Hn),!!ln||I.clearNodes()}).wrapInList(gt).command(()=>bn(p,gt)).command(()=>Wn(p,gt)).run():D().command(()=>!!Z().wrapInList(gt)||I.clearNodes()).wrapInList(gt).command(()=>bn(p,gt)).command(()=>Wn(p,gt)).run()},toggleMark:(t,e={},o={})=>({state:s,commands:p})=>{const{extendEmptyMarkRange:m=!1}=o,y=f(t,s.schema);return An(s,y,e)?p.unsetMark(y,{extendEmptyMarkRange:m}):p.setMark(y,e)},toggleNode:(t,e,o={})=>({state:s,commands:p})=>{const m=U(t,s.schema),y=U(e,s.schema);return he(s,m,o)?p.setNode(y):p.setNode(m,o)},toggleWrap:(t,e={})=>({state:o,commands:s})=>{const p=U(t,o.schema);return he(o,p,e)?s.lift(p):s.wrapIn(p,e)},undoInputRule:()=>({state:t,dispatch:e})=>{const o=t.plugins;for(let s=0;s<o.length;s+=1){const p=o[s];let m;if(p.spec.isInputRules&&(m=p.getState(t))){if(e){const y=t.tr,D=m.transform;for(let I=D.steps.length-1;I>=0;I-=1)y.step(D.steps[I].invert(D.docs[I]));if(m.text){const I=y.doc.resolve(m.from).marks();y.replaceWith(m.from,m.to,t.schema.text(m.text,I))}else y.delete(m.from,m.to)}return!0}}return!1},unsetAllMarks:()=>({tr:t,dispatch:e})=>{const{selection:o}=t,{empty:s,ranges:p}=o;return s||e&&p.forEach(m=>{t.removeMark(m.$from.pos,m.$to.pos)}),!0},unsetMark:(t,e={})=>({tr:o,state:s,dispatch:p})=>{var m;const{extendEmptyMarkRange:y=!1}=e,{selection:D}=o,I=f(t,s.schema),{$from:Z,empty:X,ranges:lt}=D;if(!p)return!0;if(X&&y){let{from:gt,to:Ut}=D;const $t=null===(m=Z.marks().find(Xt=>Xt.type===I))||void 0===m?void 0:m.attrs,Yt=C(Z,I,$t);Yt&&(gt=Yt.from,Ut=Yt.to),o.removeMark(gt,Ut,I)}else lt.forEach(gt=>{o.removeMark(gt.$from.pos,gt.$to.pos,I)});return o.removeStoredMark(I),!0},updateAttributes:(t,e={})=>({tr:o,state:s,dispatch:p})=>{let m=null,y=null;const D=fn("string"==typeof t?t:t.name,s.schema);return!!D&&("node"===D&&(m=U(t,s.schema)),"mark"===D&&(y=f(t,s.schema)),p&&o.selection.ranges.forEach(I=>{const Z=I.$from.pos,X=I.$to.pos;s.doc.nodesBetween(Z,X,(lt,gt)=>{m&&m===lt.type&&o.setNodeMarkup(gt,void 0,qt(qt({},lt.attrs),e)),y&&lt.marks.length&&lt.marks.forEach(Ut=>{if(y===Ut.type){const $t=Math.max(gt,Z),Yt=Math.min(gt+lt.nodeSize,X);o.addMark($t,Yt,y.create(qt(qt({},Ut.attrs),e)))}})})}),!0)},wrapIn:(t,e={})=>({state:o,dispatch:s})=>function(t,e=null){return function(o,s){let{$from:p,$to:m}=o.selection,y=p.blockRange(m),D=y&&(0,g.nd)(y,t,e);return!!D&&(s&&s(o.tr.wrap(y,D).scrollIntoView()),!0)}}(U(t,o.schema),e)(o,s),wrapInList:(t,e={})=>({state:o,dispatch:s})=>function(t,e=null){return function(o,s){let{$from:p,$to:m}=o.selection,y=p.blockRange(m),D=!1,I=y;if(!y)return!1;if(y.depth>=2&&p.node(y.depth-1).type.compatibleContent(t)&&0==y.startIndex){if(0==p.index(y.depth-1))return!1;let X=o.doc.resolve(y.start-2);I=new S.Ts(X,X,y.depth),y.endIndex<y.parent.childCount&&(y=new S.Ts(p,o.doc.resolve(m.end(y.depth)),y.depth)),D=!0}let Z=(0,g.nd)(I,t,e,y);return!!Z&&(s&&s(function(t,e,o,s,p){let m=S.HY.empty;for(let X=o.length-1;X>=0;X--)m=S.HY.from(o[X].type.create(o[X].attrs,m));t.step(new g.FC(e.start-(s?2:0),e.end,e.start,e.end,new S.p2(m,0,0),o.length,!0));let y=0;for(let X=0;X<o.length;X++)o[X].type==p&&(y=X+1);let D=o.length-y,I=e.start+o.length-(s?2:0),Z=e.parent;for(let X=e.startIndex,lt=e.endIndex,gt=!0;X<lt;X++,gt=!1)!gt&&(0,g.Ax)(t.doc,I,D)&&(t.split(I,D),I+=2*D),I+=Z.child(X).nodeSize;return t}(o.tr,y,Z,D,t).scrollIntoView()),!0)}}(U(t,o.schema),e)(o,s)});const Po=de.create({name:"commands",addCommands:()=>qt({},Do)}),So=de.create({name:"editable",addProseMirrorPlugins(){return[new M.Sy({key:new M.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),uo=de.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new M.Sy({key:new M.H$("focusEvents"),props:{handleDOMEvents:{focus:(e,o)=>{t.isFocused=!0;const s=t.state.tr.setMeta("focus",{event:o}).setMeta("addToHistory",!1);return e.dispatch(s),!1},blur:(e,o)=>{t.isFocused=!1;const s=t.state.tr.setMeta("blur",{event:o}).setMeta("addToHistory",!1);return e.dispatch(s),!1}}}})]}}),Io=de.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:y})=>[()=>y.undoInputRule(),()=>y.command(({tr:D})=>{const{selection:I,doc:Z}=D,{empty:X,$anchor:lt}=I,{pos:gt,parent:Ut}=lt,$t=M.Y1.atStart(Z).from===gt;return!(!(X&&$t&&Ut.type.isTextblock)||Ut.textContent.length)&&y.clearNodes()}),()=>y.deleteSelection(),()=>y.joinBackward(),()=>y.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:y})=>[()=>y.deleteSelection(),()=>y.deleteCurrentNode(),()=>y.joinForward(),()=>y.selectNodeForward()]),s={Enter:()=>this.editor.commands.first(({commands:y})=>[()=>y.newlineInCode(),()=>y.createParagraphNear(),()=>y.liftEmptyBlock(),()=>y.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},p=qt({},s),m=_e(qt({},s),{"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return z()||Se()?m:p},addProseMirrorPlugins(){return[new M.Sy({key:new M.H$("clearDocument"),appendTransaction:(t,e,o)=>{if(!t.some($t=>$t.docChanged)||e.doc.eq(o.doc))return;const{empty:p,from:m,to:y}=e.selection,D=M.Y1.atStart(e.doc).from,I=M.Y1.atEnd(e.doc).to,Z=m===D&&y===I,X=0===o.doc.textBetween(0,o.doc.content.size," "," ").length;if(p||!Z||!X)return;const lt=o.tr,gt=Tt({state:o,transaction:lt}),{commands:Ut}=new O({editor:this.editor,state:gt});return Ut.clearNodes(),lt.steps.length?lt:void 0}})]}}),ko=de.create({name:"tabindex",addProseMirrorPlugins(){return[new M.Sy({key:new M.H$("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Qn=Object.freeze({__proto__:null,ClipboardTextSerializer:en,Commands:Po,Editable:So,FocusEvents:uo,Keymap:Io,Tabindex:ko});function Ro(t,e){const o=document.querySelector("style[data-tiptap-style]");if(null!==o)return o;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}class Ko extends class{constructor(){this.callbacks={}}on(e,o){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(o),this}emit(e,...o){const s=this.callbacks[e];return s&&s.forEach(p=>p.apply(this,o)),this}off(e,o){const s=this.callbacks[e];return s&&(o?this.callbacks[e]=s.filter(p=>p!==o):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Ro('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(e={}){this.options=qt(qt({},this.options),e),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,o=!0){this.setOptions({editable:e}),o&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,o){const s=H(o)?o(e,[...this.state.plugins]):[...this.state.plugins,e],p=this.state.reconfigure({plugins:s});this.view.updateState(p)}unregisterPlugin(e){if(this.isDestroyed)return;const o="string"==typeof e?`${e}$`:e.key,s=this.state.reconfigure({plugins:this.state.plugins.filter(p=>!p.key.startsWith(o))});this.view.updateState(s)}createExtensionManager(){const o=[...this.options.enableCoreExtensions?Object.values(Qn):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(null==s?void 0:s.type));this.extensionManager=new ne(o,this)}createCommandManager(){this.commandManager=new O({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=sn(this.options.content,this.schema,this.options.parseOptions),o=K(e,this.options.autofocus);this.view=new l.tk(this.options.element,_e(qt({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:M.yy.create({doc:e,selection:o||void 0})}));const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const o=this.capturedTransaction;return this.capturedTransaction=null,o}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach(y=>{var D;return null===(D=this.capturedTransaction)||void 0===D?void 0:D.step(y)}):void(this.capturedTransaction=e);const o=this.state.apply(e),s=!this.state.selection.eq(o.selection);this.view.updateState(o),this.emit("transaction",{editor:this,transaction:e}),s&&this.emit("selectionUpdate",{editor:this,transaction:e});const p=e.getMeta("focus"),m=e.getMeta("blur");p&&this.emit("focus",{editor:this,event:p.event,transaction:e}),m&&this.emit("blur",{editor:this,event:m.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return so(this.state,e)}isActive(e,o){return Yn(this.state,"string"==typeof e?e:null,"string"==typeof e?o:e)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Jn(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:o="\n\n",textSerializers:s={}}=e||{};return Zn(this.state.doc,{blockSeparator:o,textSerializers:qt(qt({},Le(this.schema)),s)})}get isEmpty(){return jn(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}}function Jo(t){return new Re({find:t.find,handler:({state:e,range:o,match:s})=>{const p=a(t.getAttributes,void 0,s);if(!1===p||null===p)return null;const{tr:m}=e,y=s[s.length-1],D=s[0];let I=o.to;if(y){const Z=D.search(/\S/),X=o.from+D.indexOf(y),lt=X+y.length;if(to(o.from,o.to,e.doc).filter(Ut=>Ut.mark.type.excluded.find(Yt=>Yt===t.type&&Yt!==Ut.mark.type)).filter(Ut=>Ut.to>X).length)return null;lt<o.to&&m.delete(lt,o.to),X>o.from&&m.delete(o.from+Z,X),I=o.from+Z+y.length,m.addMark(o.from+Z,I,t.type.create(p||{})),m.removeStoredMark(t.type)}}})}function Lo(t){return new Re({find:t.find,handler:({state:e,range:o,match:s})=>{const p=a(t.getAttributes,void 0,s)||{},{tr:m}=e,y=o.from;let D=o.to;if(s[1]){let Z=y+s[0].lastIndexOf(s[1]);Z>D?Z=D:D=Z+s[1].length,m.insertText(s[0][s[0].length-1],y+s[0].length-1),m.replaceWith(Z,D,t.type.create(p))}else s[0]&&m.replaceWith(y,D,t.type.create(p))}})}function po(t){return new Re({find:t.find,handler:({state:e,range:o,match:s})=>{const p=e.doc.resolve(o.from),m=a(t.getAttributes,void 0,s)||{};if(!p.node(-1).canReplaceWith(p.index(-1),p.indexAfter(-1),t.type))return null;e.tr.delete(o.from,o.to).setBlockType(o.from,o.from,t.type,m)}})}function ho(t){return new Re({find:t.find,handler:({state:e,range:o,match:s})=>{let p=t.replace,m=o.from;const y=o.to;if(s[1]){const D=s[0].lastIndexOf(s[1]);p+=s[0].slice(D+s[1].length),m+=D;const I=m-y;I>0&&(p=s[0].slice(D-I,D)+p,m=y)}e.tr.insertText(p,m,y)}})}function fo(t){return new Re({find:t.find,handler:({state:e,range:o,match:s,chain:p})=>{const m=a(t.getAttributes,void 0,s)||{},y=e.tr.delete(o.from,o.to),I=y.doc.resolve(o.from).blockRange(),Z=I&&(0,g.nd)(I,t.type,m);if(!Z)return null;if(y.wrap(I,Z),t.keepMarks&&t.editor){const{selection:lt,storedMarks:gt}=e,{splittableMarks:Ut}=t.editor.extensionManager,$t=gt||lt.$to.parentOffset&&lt.$from.marks();if($t){const Yt=$t.filter(Xt=>Ut.includes(Xt.type.name));y.ensureMarks(Yt)}}if(t.keepAttributes){const lt="bulletList"===t.type.name||"orderedList"===t.type.name?"listItem":"taskList";p().updateAttributes(lt,m).run()}const X=y.doc.resolve(o.from-1).nodeBefore;X&&X.type===t.type&&(0,g.Mn)(y.doc,o.from-1)&&(!t.joinPredicate||t.joinPredicate(s,X))&&y.join(o.from-1)}})}class Fn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=qt(qt({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(k(this,"addOptions",{name:this.name}))),this.storage=a(k(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Fn(e)}configure(e={}){const o=this.extend();return o.options=ae(this.options,e),o.storage=a(k(o,"addStorage",{name:o.name,options:o.options})),o}extend(e={}){const o=new Fn(e);return o.parent=this,this.child=o,o.name=e.name?e.name:o.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${o.name}".`),o.options=a(k(o,"addOptions",{name:o.name})),o.storage=a(k(o,"addStorage",{name:o.name,options:o.options})),o}static handleExit({editor:e,mark:o}){const{tr:s}=e.state,p=e.state.selection.$from;if(p.pos===p.end()){const y=p.marks();if(!y.find(Z=>(null==Z?void 0:Z.type.name)===o.name))return!1;const I=y.find(Z=>(null==Z?void 0:Z.type.name)===o.name);return I&&s.removeStoredMark(I),s.insertText(" ",p.pos),e.view.dispatch(s),!0}return!1}}class Kn{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=qt(qt({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(k(this,"addOptions",{name:this.name}))),this.storage=a(k(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Kn(e)}configure(e={}){const o=this.extend();return o.options=ae(this.options,e),o.storage=a(k(o,"addStorage",{name:o.name,options:o.options})),o}extend(e={}){const o=new Kn(e);return o.parent=this,this.child=o,o.name=e.name?e.name:o.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${o.name}".`),o.options=a(k(o,"addOptions",{name:o.name})),o.storage=a(k(o,"addStorage",{name:o.name,options:o.options})),o}}class Bo{constructor(e,o,s){this.isDragging=!1,this.component=e,this.editor=o.editor,this.options=qt({stopEvent:null,ignoreMutation:null},s),this.extension=o.extension,this.node=o.node,this.decorations=o.decorations,this.getPos=o.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var o,s,p,m,y,D,I;const{view:Z}=this.editor,X=e.target,lt=3===X.nodeType?null===(o=X.parentElement)||void 0===o?void 0:o.closest("[data-drag-handle]"):X.closest("[data-drag-handle]");if(!this.dom||(null===(s=this.contentDOM)||void 0===s?void 0:s.contains(X))||!lt)return;let gt=0,Ut=0;if(this.dom!==lt){const Xt=this.dom.getBoundingClientRect(),le=lt.getBoundingClientRect(),Be=null!==(p=e.offsetX)&&void 0!==p?p:null===(m=e.nativeEvent)||void 0===m?void 0:m.offsetX,ce=null!==(y=e.offsetY)&&void 0!==y?y:null===(D=e.nativeEvent)||void 0===D?void 0:D.offsetY;gt=le.x-Xt.x+Be,Ut=le.y-Xt.y+ce}null===(I=e.dataTransfer)||void 0===I||I.setDragImage(this.dom,gt,Ut);const $t=M.qv.create(Z.state.doc,this.getPos()),Yt=Z.state.tr.setSelection($t);Z.dispatch(Yt)}stopEvent(e){var o;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:e});const s=e.target;if(!this.dom.contains(s)||(null===(o=this.contentDOM)||void 0===o?void 0:o.contains(s)))return!1;const m=e.type.startsWith("drag"),y="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(s.tagName)||s.isContentEditable)&&!y&&!m)return!0;const{isEditable:I}=this.editor,{isDragging:Z}=this,X=!!this.node.type.spec.draggable,lt=M.qv.isSelectable(this.node),gt="copy"===e.type,Ut="paste"===e.type,$t="cut"===e.type,Yt="mousedown"===e.type;if(!X&&lt&&m&&e.preventDefault(),X&&m&&!Z)return e.preventDefault(),!1;if(X&&I&&!Z&&Yt){const Xt=s.closest("[data-drag-handle]");Xt&&(this.dom===Xt||this.dom.contains(Xt))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(Z||y||gt||Ut||$t||Yt&&lt)}ignoreMutation(e){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:e}):!(!this.node.isLeaf&&!this.node.isAtom&&("selection"===e.type||this.dom.contains(e.target)&&"childList"===e.type&&z()&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(s=>s.isContentEditable)||(this.contentDOM!==e.target||"attributes"!==e.type)&&this.contentDOM.contains(e.target))))}updateAttributes(e){this.editor.commands.command(({tr:o})=>{const s=this.getPos();return o.setNodeMarkup(s,void 0,qt(qt({},this.node.attrs),e)),!0})}deleteNode(){const e=this.getPos();this.editor.commands.deleteRange({from:e,to:e+this.node.nodeSize})}}function mo(t){return new _t({find:t.find,handler:({state:e,range:o,match:s})=>{const p=a(t.getAttributes,void 0,s);if(!1===p||null===p)return null;const{tr:m}=e,y=s[s.length-1],D=s[0];let I=o.to;if(y){const Z=D.search(/\S/),X=o.from+D.indexOf(y),lt=X+y.length;if(to(o.from,o.to,e.doc).filter(Ut=>Ut.mark.type.excluded.find(Yt=>Yt===t.type&&Yt!==Ut.mark.type)).filter(Ut=>Ut.to>X).length)return null;lt<o.to&&m.delete(lt,o.to),X>o.from&&m.delete(o.from+Z,X),I=o.from+Z+y.length,m.addMark(o.from+Z,I,t.type.create(p||{})),m.removeStoredMark(t.type)}}})}function i(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function n(t){return"string"==typeof t}function r(t){return new _t({find:t.find,handler({match:e,chain:o,range:s}){const p=a(t.getAttributes,void 0,e);if(!1===p||null===p)return null;e.input&&o().deleteRange(s).insertContentAt(s.from,{type:t.type.name,attrs:p})}})}function d(t){return new _t({find:t.find,handler:({state:e,range:o,match:s})=>{let p=t.replace,m=o.from;const y=o.to;if(s[1]){const D=s[0].lastIndexOf(s[1]);p+=s[0].slice(D+s[1].length),m+=D;const I=m-y;I>0&&(p=s[0].slice(D-I,D)+p,m=y)}e.tr.insertText(p,m,y)}})}class _{constructor(e){this.transaction=e,this.currentStep=this.transaction.steps.length}map(e){let o=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((p,m)=>{const y=m.getMap().mapResult(p);return y.deleted&&(o=!0),y.pos},e),deleted:o}}}},44632:(Vt,yt,c)=>{c.r(yt),c.d(yt,{Image:()=>b,default:()=>b,inputRegex:()=>l});var M=c(12867);const l=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,b=M.Node.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:S}){return["img",(0,M.mergeAttributes)(this.options.HTMLAttributes,S)]},addCommands(){return{setImage:S=>({commands:g})=>g.insertContent({type:this.name,attrs:S})}},addInputRules(){return[(0,M.nodeInputRule)({find:l,type:this.type,getAttributes:S=>{const[,,g,it,N]=S;return{src:it,alt:g,title:N}}})]}})},84402:(Vt,yt,c)=>{c.r(yt),c.d(yt,{TextStyle:()=>l,default:()=>l});var M=c(12867);const l=M.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:b=>!!b.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:b}){return["span",(0,M.mergeAttributes)(this.options.HTMLAttributes,b),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:b,commands:S})=>{const g=(0,M.getMarkAttributes)(b,this.type);return!!Object.entries(g).some(([,N])=>!!N)||S.unsetMark(this.name)}}}})},70768:(Vt,yt,c)=>{c.d(yt,{$:()=>St,h:()=>kt});for(var M={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},b="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),g=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),it="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),N=g||b&&+b[1]<57,q=0;q<10;q++)M[48+q]=M[96+q]=String(q);for(q=1;q<=24;q++)M[q+111]="F"+q;for(q=65;q<=90;q++)M[q]=String.fromCharCode(q+32),l[q]=String.fromCharCode(q);for(var et in M)l.hasOwnProperty(et)||(l[et]=M[et]);var ut=c(62463);const nt="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function vt(Pt){let W,mt,j,Dt,ht=Pt.split(/-(?!$)/),tt=ht[ht.length-1];"Space"==tt&&(tt=" ");for(let It=0;It<ht.length-1;It++){let bt=ht[It];if(/^(cmd|meta|m)$/i.test(bt))Dt=!0;else if(/^a(lt)?$/i.test(bt))W=!0;else if(/^(c|ctrl|control)$/i.test(bt))mt=!0;else if(/^s(hift)?$/i.test(bt))j=!0;else{if(!/^mod$/i.test(bt))throw new Error("Unrecognized modifier name: "+bt);nt?Dt=!0:mt=!0}}return W&&(tt="Alt-"+tt),mt&&(tt="Ctrl-"+tt),Dt&&(tt="Meta-"+tt),j&&(tt="Shift-"+tt),tt}function At(Pt,ht,tt=!0){return ht.altKey&&(Pt="Alt-"+Pt),ht.ctrlKey&&(Pt="Ctrl-"+Pt),ht.metaKey&&(Pt="Meta-"+Pt),tt&&ht.shiftKey&&(Pt="Shift-"+Pt),Pt}function kt(Pt){return new ut.Sy({props:{handleKeyDown:St(Pt)}})}function St(Pt){let ht=function(Pt){let ht=Object.create(null);for(let tt in Pt)ht[vt(tt)]=Pt[tt];return ht}(Pt);return function(tt,W){let j,mt=function(Pt){var tt=!(N&&(Pt.ctrlKey||Pt.altKey||Pt.metaKey)||it&&Pt.shiftKey&&Pt.key&&1==Pt.key.length||"Unidentified"==Pt.key)&&Pt.key||(Pt.shiftKey?l:M)[Pt.keyCode]||Pt.key||"Unidentified";return"Esc"==tt&&(tt="Escape"),"Del"==tt&&(tt="Delete"),"Left"==tt&&(tt="ArrowLeft"),"Up"==tt&&(tt="ArrowUp"),"Right"==tt&&(tt="ArrowRight"),"Down"==tt&&(tt="ArrowDown"),tt}(W),Dt=ht[At(mt,W)];if(Dt&&Dt(tt.state,tt.dispatch,tt))return!0;if(1==mt.length&&" "!=mt){if(W.shiftKey){let It=ht[At(mt,W,!1)];if(It&&It(tt.state,tt.dispatch,tt))return!0}if((W.shiftKey||W.altKey||W.metaKey||mt.charCodeAt(0)>127)&&(j=M[W.keyCode])&&j!=mt){let It=ht[At(j,W)];if(It&&It(tt.state,tt.dispatch,tt))return!0}}return!1}}},77346:(Vt,yt,c)=>{function M(H){this.content=H}c.d(yt,{aw:()=>Ee,PW:()=>U,HY:()=>g,vc:()=>et,ZU:()=>Me,NB:()=>pt,Ts:()=>Ht,e4:()=>ft,V_:()=>Ie,p2:()=>ut}),M.prototype={constructor:M,find:function(H){for(var a=0;a<this.content.length;a+=2)if(this.content[a]===H)return a;return-1},get:function(H){var a=this.find(H);return-1==a?void 0:this.content[a+1]},update:function(H,a,u){var E=u&&u!=H?this.remove(u):this,P=E.find(H),w=E.content.slice();return-1==P?w.push(u||H,a):(w[P+1]=a,u&&(w[P]=u)),new M(w)},remove:function(H){var a=this.find(H);if(-1==a)return this;var u=this.content.slice();return u.splice(a,2),new M(u)},addToStart:function(H,a){return new M([H,a].concat(this.remove(H).content))},addToEnd:function(H,a){var u=this.remove(H).content.slice();return u.push(H,a),new M(u)},addBefore:function(H,a,u){var E=this.remove(a),P=E.content.slice(),w=E.find(H);return P.splice(-1==w?P.length:w,0,a,u),new M(P)},forEach:function(H){for(var a=0;a<this.content.length;a+=2)H(this.content[a],this.content[a+1])},prepend:function(H){return(H=M.from(H)).size?new M(H.content.concat(this.subtract(H).content)):this},append:function(H){return(H=M.from(H)).size?new M(this.subtract(H).content.concat(H.content)):this},subtract:function(H){var a=this;H=M.from(H);for(var u=0;u<H.content.length;u+=2)a=a.remove(H.content[u]);return a},toObject:function(){var H={};return this.forEach(function(a,u){H[a]=u}),H},get size(){return this.content.length>>1}},M.from=function(H){if(H instanceof M)return H;var a=[];if(H)for(var u in H)a.push(u,H[u]);return new M(a)};const l=M;function b(H,a,u){for(let E=0;;E++){if(E==H.childCount||E==a.childCount)return H.childCount==a.childCount?null:u;let P=H.child(E),w=a.child(E);if(P!=w){if(!P.sameMarkup(w))return u;if(P.isText&&P.text!=w.text){for(let F=0;P.text[F]==w.text[F];F++)u++;return u}if(P.content.size||w.content.size){let F=b(P.content,w.content,u+1);if(null!=F)return F}u+=P.nodeSize}else u+=P.nodeSize}}function S(H,a,u,E){for(let P=H.childCount,w=a.childCount;;){if(0==P||0==w)return P==w?null:{a:u,b:E};let F=H.child(--P),at=a.child(--w),Lt=F.nodeSize;if(F!=at){if(!F.sameMarkup(at))return{a:u,b:E};if(F.isText&&F.text!=at.text){let te=0,ee=Math.min(F.text.length,at.text.length);for(;te<ee&&F.text[F.text.length-te-1]==at.text[at.text.length-te-1];)te++,u--,E--;return{a:u,b:E}}if(F.content.size||at.content.size){let te=S(F.content,at.content,u-1,E-1);if(te)return te}u-=Lt,E-=Lt}else u-=Lt,E-=Lt}}class g{constructor(a,u){if(this.content=a,this.size=u||0,null==u)for(let E=0;E<a.length;E++)this.size+=a[E].nodeSize}nodesBetween(a,u,E,P=0,w){for(let F=0,at=0;at<u;F++){let Lt=this.content[F],te=at+Lt.nodeSize;if(te>a&&!1!==E(Lt,P+at,w||null,F)&&Lt.content.size){let ee=at+1;Lt.nodesBetween(Math.max(0,a-ee),Math.min(Lt.content.size,u-ee),E,P+ee)}at=te}}descendants(a){this.nodesBetween(0,this.size,a)}textBetween(a,u,E,P){let w="",F=!0;return this.nodesBetween(a,u,(at,Lt)=>{at.isText?(w+=at.text.slice(Math.max(a,Lt)-Lt,u-Lt),F=!E):at.isLeaf?(P?w+="function"==typeof P?P(at):P:at.type.spec.leafText&&(w+=at.type.spec.leafText(at)),F=!E):!F&&at.isBlock&&(w+=E,F=!0)},0),w}append(a){if(!a.size)return this;if(!this.size)return a;let u=this.lastChild,E=a.firstChild,P=this.content.slice(),w=0;for(u.isText&&u.sameMarkup(E)&&(P[P.length-1]=u.withText(u.text+E.text),w=1);w<a.content.length;w++)P.push(a.content[w]);return new g(P,this.size+a.size)}cut(a,u=this.size){if(0==a&&u==this.size)return this;let E=[],P=0;if(u>a)for(let w=0,F=0;F<u;w++){let at=this.content[w],Lt=F+at.nodeSize;Lt>a&&((F<a||Lt>u)&&(at=at.isText?at.cut(Math.max(0,a-F),Math.min(at.text.length,u-F)):at.cut(Math.max(0,a-F-1),Math.min(at.content.size,u-F-1))),E.push(at),P+=at.nodeSize),F=Lt}return new g(E,P)}cutByIndex(a,u){return a==u?g.empty:0==a&&u==this.content.length?this:new g(this.content.slice(a,u))}replaceChild(a,u){let E=this.content[a];if(E==u)return this;let P=this.content.slice(),w=this.size+u.nodeSize-E.nodeSize;return P[a]=u,new g(P,w)}addToStart(a){return new g([a].concat(this.content),this.size+a.nodeSize)}addToEnd(a){return new g(this.content.concat(a),this.size+a.nodeSize)}eq(a){if(this.content.length!=a.content.length)return!1;for(let u=0;u<this.content.length;u++)if(!this.content[u].eq(a.content[u]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(a){let u=this.content[a];if(!u)throw new RangeError("Index "+a+" out of range for "+this);return u}maybeChild(a){return this.content[a]||null}forEach(a){for(let u=0,E=0;u<this.content.length;u++){let P=this.content[u];a(P,E,u),E+=P.nodeSize}}findDiffStart(a,u=0){return b(this,a,u)}findDiffEnd(a,u=this.size,E=a.size){return S(this,a,u,E)}findIndex(a,u=-1){if(0==a)return N(0,a);if(a==this.size)return N(this.content.length,a);if(a>this.size||a<0)throw new RangeError(`Position ${a} outside of fragment (${this})`);for(let E=0,P=0;;E++){let F=P+this.child(E).nodeSize;if(F>=a)return F==a||u>0?N(E+1,F):N(E,P);P=F}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(a=>a.toJSON()):null}static fromJSON(a,u){if(!u)return g.empty;if(!Array.isArray(u))throw new RangeError("Invalid input for Fragment.fromJSON");return new g(u.map(a.nodeFromJSON))}static fromArray(a){if(!a.length)return g.empty;let u,E=0;for(let P=0;P<a.length;P++){let w=a[P];E+=w.nodeSize,P&&w.isText&&a[P-1].sameMarkup(w)?(u||(u=a.slice(0,P)),u[u.length-1]=w.withText(u[u.length-1].text+w.text)):u&&u.push(w)}return new g(u||a,E)}static from(a){if(!a)return g.empty;if(a instanceof g)return a;if(Array.isArray(a))return this.fromArray(a);if(a.attrs)return new g([a],a.nodeSize);throw new RangeError("Can not convert "+a+" to a Fragment"+(a.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}g.empty=new g([],0);const it={index:0,offset:0};function N(H,a){return it.index=H,it.offset=a,it}function q(H,a){if(H===a)return!0;if(!H||"object"!=typeof H||!a||"object"!=typeof a)return!1;let u=Array.isArray(H);if(Array.isArray(a)!=u)return!1;if(u){if(H.length!=a.length)return!1;for(let E=0;E<H.length;E++)if(!q(H[E],a[E]))return!1}else{for(let E in H)if(!(E in a)||!q(H[E],a[E]))return!1;for(let E in a)if(!(E in H))return!1}return!0}let et=(()=>{class H{constructor(u,E){this.type=u,this.attrs=E}addToSet(u){let E,P=!1;for(let w=0;w<u.length;w++){let F=u[w];if(this.eq(F))return u;if(this.type.excludes(F.type))E||(E=u.slice(0,w));else{if(F.type.excludes(this.type))return u;!P&&F.type.rank>this.type.rank&&(E||(E=u.slice(0,w)),E.push(this),P=!0),E&&E.push(F)}}return E||(E=u.slice()),P||E.push(this),E}removeFromSet(u){for(let E=0;E<u.length;E++)if(this.eq(u[E]))return u.slice(0,E).concat(u.slice(E+1));return u}isInSet(u){for(let E=0;E<u.length;E++)if(this.eq(u[E]))return!0;return!1}eq(u){return this==u||this.type==u.type&&q(this.attrs,u.attrs)}toJSON(){let u={type:this.type.name};for(let E in this.attrs){u.attrs=this.attrs;break}return u}static fromJSON(u,E){if(!E)throw new RangeError("Invalid input for Mark.fromJSON");let P=u.marks[E.type];if(!P)throw new RangeError(`There is no mark type ${E.type} in this schema`);return P.create(E.attrs)}static sameSet(u,E){if(u==E)return!0;if(u.length!=E.length)return!1;for(let P=0;P<u.length;P++)if(!u[P].eq(E[P]))return!1;return!0}static setFrom(u){if(!u||Array.isArray(u)&&0==u.length)return H.none;if(u instanceof H)return[u];let E=u.slice();return E.sort((P,w)=>P.type.rank-w.type.rank),E}}return H.none=[],H})();class ft extends Error{}class ut{constructor(a,u,E){this.content=a,this.openStart=u,this.openEnd=E}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(a,u){let E=vt(this.content,a+this.openStart,u);return E&&new ut(E,this.openStart,this.openEnd)}removeBetween(a,u){return new ut(nt(this.content,a+this.openStart,u+this.openStart),this.openStart,this.openEnd)}eq(a){return this.content.eq(a.content)&&this.openStart==a.openStart&&this.openEnd==a.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let a={content:this.content.toJSON()};return this.openStart>0&&(a.openStart=this.openStart),this.openEnd>0&&(a.openEnd=this.openEnd),a}static fromJSON(a,u){if(!u)return ut.empty;let E=u.openStart||0,P=u.openEnd||0;if("number"!=typeof E||"number"!=typeof P)throw new RangeError("Invalid input for Slice.fromJSON");return new ut(g.fromJSON(a,u.content),E,P)}static maxOpen(a,u=!0){let E=0,P=0;for(let w=a.firstChild;w&&!w.isLeaf&&(u||!w.type.spec.isolating);w=w.firstChild)E++;for(let w=a.lastChild;w&&!w.isLeaf&&(u||!w.type.spec.isolating);w=w.lastChild)P++;return new ut(a,E,P)}}function nt(H,a,u){let{index:E,offset:P}=H.findIndex(a),w=H.maybeChild(E),{index:F,offset:at}=H.findIndex(u);if(P==a||w.isText){if(at!=u&&!H.child(F).isText)throw new RangeError("Removing non-flat range");return H.cut(0,a).append(H.cut(u))}if(E!=F)throw new RangeError("Removing non-flat range");return H.replaceChild(E,w.copy(nt(w.content,a-P-1,u-P-1)))}function vt(H,a,u,E){let{index:P,offset:w}=H.findIndex(a),F=H.maybeChild(P);if(w==a||F.isText)return E&&!E.canReplace(P,P,u)?null:H.cut(0,a).append(u).append(H.cut(a));let at=vt(F.content,a-w-1,u);return at&&H.replaceChild(P,F.copy(at))}function Ct(H,a,u){if(u.openStart>H.depth)throw new ft("Inserted content deeper than insertion position");if(H.depth-u.openStart!=a.depth-u.openEnd)throw new ft("Inconsistent open depths");return At(H,a,u,0)}function At(H,a,u,E){let P=H.index(E),w=H.node(E);if(P==a.index(E)&&E<H.depth-u.openStart){let F=At(H,a,u,E+1);return w.copy(w.content.replaceChild(P,F))}if(u.content.size){if(u.openStart||u.openEnd||H.depth!=E||a.depth!=E){let{start:F,end:at}=function(H,a){let u=a.depth-H.openStart,P=a.node(u).copy(H.content);for(let w=u-1;w>=0;w--)P=a.node(w).copy(g.from(P));return{start:P.resolveNoCache(H.openStart+u),end:P.resolveNoCache(P.content.size-H.openEnd-u)}}(u,H);return tt(w,W(H,F,at,a,E))}{let F=H.parent,at=F.content;return tt(F,at.cut(0,H.parentOffset).append(u.content).append(at.cut(a.parentOffset)))}}return tt(w,mt(H,a,E))}function kt(H,a){if(!a.type.compatibleContent(H.type))throw new ft("Cannot join "+a.type.name+" onto "+H.type.name)}function St(H,a,u){let E=H.node(u);return kt(E,a.node(u)),E}function Pt(H,a){let u=a.length-1;u>=0&&H.isText&&H.sameMarkup(a[u])?a[u]=H.withText(a[u].text+H.text):a.push(H)}function ht(H,a,u,E){let P=(a||H).node(u),w=0,F=a?a.index(u):P.childCount;H&&(w=H.index(u),H.depth>u?w++:H.textOffset&&(Pt(H.nodeAfter,E),w++));for(let at=w;at<F;at++)Pt(P.child(at),E);a&&a.depth==u&&a.textOffset&&Pt(a.nodeBefore,E)}function tt(H,a){return H.type.checkContent(a),H.copy(a)}function W(H,a,u,E,P){let w=H.depth>P&&St(H,a,P+1),F=E.depth>P&&St(u,E,P+1),at=[];return ht(null,H,P,at),w&&F&&a.index(P)==u.index(P)?(kt(w,F),Pt(tt(w,W(H,a,u,E,P+1)),at)):(w&&Pt(tt(w,mt(H,a,P+1)),at),ht(a,u,P,at),F&&Pt(tt(F,mt(u,E,P+1)),at)),ht(E,null,P,at),new g(at)}function mt(H,a,u){let E=[];return ht(null,H,u,E),H.depth>u&&Pt(tt(St(H,a,u+1),mt(H,a,u+1)),E),ht(a,null,u,E),new g(E)}ut.empty=new ut(g.empty,0,0);class Dt{constructor(a,u,E){this.pos=a,this.path=u,this.parentOffset=E,this.depth=u.length/3-1}resolveDepth(a){return null==a?this.depth:a<0?this.depth+a:a}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(a){return this.path[3*this.resolveDepth(a)]}index(a){return this.path[3*this.resolveDepth(a)+1]}indexAfter(a){return a=this.resolveDepth(a),this.index(a)+(a!=this.depth||this.textOffset?1:0)}start(a){return 0==(a=this.resolveDepth(a))?0:this.path[3*a-1]+1}end(a){return a=this.resolveDepth(a),this.start(a)+this.node(a).content.size}before(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position before the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]}after(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position after the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]+this.path[3*a].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let a=this.parent,u=this.index(this.depth);if(u==a.childCount)return null;let E=this.pos-this.path[this.path.length-1],P=a.child(u);return E?a.child(u).cut(E):P}get nodeBefore(){let a=this.index(this.depth),u=this.pos-this.path[this.path.length-1];return u?this.parent.child(a).cut(0,u):0==a?null:this.parent.child(a-1)}posAtIndex(a,u){u=this.resolveDepth(u);let E=this.path[3*u],P=0==u?0:this.path[3*u-1]+1;for(let w=0;w<a;w++)P+=E.child(w).nodeSize;return P}marks(){let a=this.parent,u=this.index();if(0==a.content.size)return et.none;if(this.textOffset)return a.child(u).marks;let E=a.maybeChild(u-1),P=a.maybeChild(u);if(!E){let at=E;E=P,P=at}let w=E.marks;for(var F=0;F<w.length;F++)!1===w[F].type.spec.inclusive&&(!P||!w[F].isInSet(P.marks))&&(w=w[F--].removeFromSet(w));return w}marksAcross(a){let u=this.parent.maybeChild(this.index());if(!u||!u.isInline)return null;let E=u.marks,P=a.parent.maybeChild(a.index());for(var w=0;w<E.length;w++)!1===E[w].type.spec.inclusive&&(!P||!E[w].isInSet(P.marks))&&(E=E[w--].removeFromSet(E));return E}sharedDepth(a){for(let u=this.depth;u>0;u--)if(this.start(u)<=a&&this.end(u)>=a)return u;return 0}blockRange(a=this,u){if(a.pos<this.pos)return a.blockRange(this);for(let E=this.depth-(this.parent.inlineContent||this.pos==a.pos?1:0);E>=0;E--)if(a.pos<=this.end(E)&&(!u||u(this.node(E))))return new Ht(this,a,E);return null}sameParent(a){return this.pos-this.parentOffset==a.pos-a.parentOffset}max(a){return a.pos>this.pos?a:this}min(a){return a.pos<this.pos?a:this}toString(){let a="";for(let u=1;u<=this.depth;u++)a+=(a?"/":"")+this.node(u).type.name+"_"+this.index(u-1);return a+":"+this.parentOffset}static resolve(a,u){if(!(u>=0&&u<=a.content.size))throw new RangeError("Position "+u+" out of range");let E=[],P=0,w=u;for(let F=a;;){let{index:at,offset:Lt}=F.content.findIndex(w),te=w-Lt;if(E.push(F,at,P+Lt),!te||(F=F.child(at),F.isText))break;w=te-1,P+=Lt+1}return new Dt(u,E,w)}static resolveCached(a,u){for(let P=0;P<It.length;P++){let w=It[P];if(w.pos==u&&w.doc==a)return w}let E=It[bt]=Dt.resolve(a,u);return bt=(bt+1)%Bt,E}}let It=[],bt=0,Bt=12;class Ht{constructor(a,u,E){this.$from=a,this.$to=u,this.depth=E}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Jt=Object.create(null);class pt{constructor(a,u,E,P=et.none){this.type=a,this.attrs=u,this.marks=P,this.content=E||g.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(a){return this.content.child(a)}maybeChild(a){return this.content.maybeChild(a)}forEach(a){this.content.forEach(a)}nodesBetween(a,u,E,P=0){this.content.nodesBetween(a,u,E,P,this)}descendants(a){this.nodesBetween(0,this.content.size,a)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(a,u,E,P){return this.content.textBetween(a,u,E,P)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(a){return this==a||this.sameMarkup(a)&&this.content.eq(a.content)}sameMarkup(a){return this.hasMarkup(a.type,a.attrs,a.marks)}hasMarkup(a,u,E){return this.type==a&&q(this.attrs,u||a.defaultAttrs||Jt)&&et.sameSet(this.marks,E||et.none)}copy(a=null){return a==this.content?this:new pt(this.type,this.attrs,a,this.marks)}mark(a){return a==this.marks?this:new pt(this.type,this.attrs,this.content,a)}cut(a,u=this.content.size){return 0==a&&u==this.content.size?this:this.copy(this.content.cut(a,u))}slice(a,u=this.content.size,E=!1){if(a==u)return ut.empty;let P=this.resolve(a),w=this.resolve(u),F=E?0:P.sharedDepth(u),at=P.start(F),te=P.node(F).content.cut(P.pos-at,w.pos-at);return new ut(te,P.depth-F,w.depth-F)}replace(a,u,E){return Ct(this.resolve(a),this.resolve(u),E)}nodeAt(a){for(let u=this;;){let{index:E,offset:P}=u.content.findIndex(a);if(u=u.maybeChild(E),!u)return null;if(P==a||u.isText)return u;a-=P+1}}childAfter(a){let{index:u,offset:E}=this.content.findIndex(a);return{node:this.content.maybeChild(u),index:u,offset:E}}childBefore(a){if(0==a)return{node:null,index:0,offset:0};let{index:u,offset:E}=this.content.findIndex(a);if(E<a)return{node:this.content.child(u),index:u,offset:E};let P=this.content.child(u-1);return{node:P,index:u-1,offset:E-P.nodeSize}}resolve(a){return Dt.resolveCached(this,a)}resolveNoCache(a){return Dt.resolve(this,a)}rangeHasMark(a,u,E){let P=!1;return u>a&&this.nodesBetween(a,u,w=>(E.isInSet(w.marks)&&(P=!0),!P)),P}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let a=this.type.name;return this.content.size&&(a+="("+this.content.toStringInner()+")"),rt(this.marks,a)}contentMatchAt(a){let u=this.type.contentMatch.matchFragment(this.content,0,a);if(!u)throw new Error("Called contentMatchAt on a node with invalid content");return u}canReplace(a,u,E=g.empty,P=0,w=E.childCount){let F=this.contentMatchAt(a).matchFragment(E,P,w),at=F&&F.matchFragment(this.content,u);if(!at||!at.validEnd)return!1;for(let Lt=P;Lt<w;Lt++)if(!this.type.allowsMarks(E.child(Lt).marks))return!1;return!0}canReplaceWith(a,u,E,P){if(P&&!this.type.allowsMarks(P))return!1;let w=this.contentMatchAt(a).matchType(E),F=w&&w.matchFragment(this.content,u);return!!F&&F.validEnd}canAppend(a){return a.content.size?this.canReplace(this.childCount,this.childCount,a.content):this.type.compatibleContent(a.type)}check(){this.type.checkContent(this.content);let a=et.none;for(let u=0;u<this.marks.length;u++)a=this.marks[u].addToSet(a);if(!et.sameSet(a,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(u=>u.type.name)}`);this.content.forEach(u=>u.check())}toJSON(){let a={type:this.type.name};for(let u in this.attrs){a.attrs=this.attrs;break}return this.content.size&&(a.content=this.content.toJSON()),this.marks.length&&(a.marks=this.marks.map(u=>u.toJSON())),a}static fromJSON(a,u){if(!u)throw new RangeError("Invalid input for Node.fromJSON");let E=null;if(u.marks){if(!Array.isArray(u.marks))throw new RangeError("Invalid mark data for Node.fromJSON");E=u.marks.map(a.markFromJSON)}if("text"==u.type){if("string"!=typeof u.text)throw new RangeError("Invalid text node in JSON");return a.text(u.text,E)}let P=g.fromJSON(a,u.content);return a.nodeType(u.type).create(u.attrs,P,E)}}pt.prototype.text=void 0;class B extends pt{constructor(a,u,E,P){if(super(a,u,null,P),!E)throw new RangeError("Empty text nodes are not allowed");this.text=E}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):rt(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(a,u){return this.text.slice(a,u)}get nodeSize(){return this.text.length}mark(a){return a==this.marks?this:new B(this.type,this.attrs,this.text,a)}withText(a){return a==this.text?this:new B(this.type,this.attrs,a,this.marks)}cut(a=0,u=this.text.length){return 0==a&&u==this.text.length?this:this.withText(this.text.slice(a,u))}eq(a){return this.sameMarkup(a)&&this.text==a.text}toJSON(){let a=super.toJSON();return a.text=this.text,a}}function rt(H,a){for(let u=H.length-1;u>=0;u--)a=H[u].type.name+"("+a+")";return a}class dt{constructor(a){this.validEnd=a,this.next=[],this.wrapCache=[]}static parse(a,u){let E=new st(a,u);if(null==E.next)return dt.empty;let P=J(E);E.next&&E.err("Unexpected trailing text");let w=function(H){let a=Object.create(null);return function u(E){let P=[];E.forEach(F=>{H[F].forEach(({term:at,to:Lt})=>{if(!at)return;let te;for(let ee=0;ee<P.length;ee++)P[ee][0]==at&&(te=P[ee][1]);be(H,Lt).forEach(ee=>{te||P.push([at,te=[]]),-1==te.indexOf(ee)&&te.push(ee)})})});let w=a[E.join(",")]=new dt(E.indexOf(H.length-1)>-1);for(let F=0;F<P.length;F++){let at=P[F][1].sort(pe);w.next.push({type:P[F][0],next:a[at.join(",")]||u(at)})}return w}(be(H,0))}(function(H){let a=[[]];return P(function w(F,at){if("choice"==F.type)return F.exprs.reduce((Lt,te)=>Lt.concat(w(te,at)),[]);if("seq"!=F.type){if("star"==F.type){let Lt=u();return E(at,Lt),P(w(F.expr,Lt),Lt),[E(Lt)]}if("plus"==F.type){let Lt=u();return P(w(F.expr,at),Lt),P(w(F.expr,Lt),Lt),[E(Lt)]}if("opt"==F.type)return[E(at)].concat(w(F.expr,at));if("range"==F.type){let Lt=at;for(let te=0;te<F.min;te++){let ee=u();P(w(F.expr,Lt),ee),Lt=ee}if(-1==F.max)P(w(F.expr,Lt),Lt);else for(let te=F.min;te<F.max;te++){let ee=u();E(Lt,ee),P(w(F.expr,Lt),ee),Lt=ee}return[E(Lt)]}if("name"==F.type)return[E(at,void 0,F.value)];throw new Error("Unknown expr type")}for(let Lt=0;;Lt++){let te=w(F.exprs[Lt],at);if(Lt==F.exprs.length-1)return te;P(te,at=u())}}(H,0),u()),a;function u(){return a.push([])-1}function E(F,at,Lt){let te={term:Lt,to:at};return a[F].push(te),te}function P(F,at){F.forEach(Lt=>Lt.to=at)}}(P));return function(H,a){for(let u=0,E=[H];u<E.length;u++){let P=E[u],w=!P.validEnd,F=[];for(let at=0;at<P.next.length;at++){let{type:Lt,next:te}=P.next[at];F.push(Lt.name),w&&!(Lt.isText||Lt.hasRequiredAttrs())&&(w=!1),-1==E.indexOf(te)&&E.push(te)}w&&a.err("Only non-generatable nodes ("+F.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(w,E),w}matchType(a){for(let u=0;u<this.next.length;u++)if(this.next[u].type==a)return this.next[u].next;return null}matchFragment(a,u=0,E=a.childCount){let P=this;for(let w=u;P&&w<E;w++)P=P.matchType(a.child(w).type);return P}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let a=0;a<this.next.length;a++){let{type:u}=this.next[a];if(!u.isText&&!u.hasRequiredAttrs())return u}return null}compatible(a){for(let u=0;u<this.next.length;u++)for(let E=0;E<a.next.length;E++)if(this.next[u].type==a.next[E].type)return!0;return!1}fillBefore(a,u=!1,E=0){let P=[this];return function w(F,at){let Lt=F.matchFragment(a,E);if(Lt&&(!u||Lt.validEnd))return g.from(at.map(te=>te.createAndFill()));for(let te=0;te<F.next.length;te++){let{type:ee,next:Re}=F.next[te];if(!ee.isText&&!ee.hasRequiredAttrs()&&-1==P.indexOf(Re)){P.push(Re);let $e=w(Re,at.concat(ee));if($e)return $e}}return null}(this,[])}findWrapping(a){for(let E=0;E<this.wrapCache.length;E+=2)if(this.wrapCache[E]==a)return this.wrapCache[E+1];let u=this.computeWrapping(a);return this.wrapCache.push(a,u),u}computeWrapping(a){let u=Object.create(null),E=[{match:this,type:null,via:null}];for(;E.length;){let P=E.shift(),w=P.match;if(w.matchType(a)){let F=[];for(let at=P;at.type;at=at.via)F.push(at.type);return F.reverse()}for(let F=0;F<w.next.length;F++){let{type:at,next:Lt}=w.next[F];!at.isLeaf&&!at.hasRequiredAttrs()&&!(at.name in u)&&(!P.type||Lt.validEnd)&&(E.push({match:at.contentMatch,type:at,via:P}),u[at.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(a){if(a>=this.next.length)throw new RangeError(`There's no ${a}th edge in this content match`);return this.next[a]}toString(){let a=[];return function u(E){a.push(E);for(let P=0;P<E.next.length;P++)-1==a.indexOf(E.next[P].next)&&u(E.next[P].next)}(this),a.map((E,P)=>{let w=P+(E.validEnd?"*":" ")+" ";for(let F=0;F<E.next.length;F++)w+=(F?", ":"")+E.next[F].type.name+"->"+a.indexOf(E.next[F].next);return w}).join("\n")}}dt.empty=new dt(!0);class st{constructor(a,u){this.string=a,this.nodeTypes=u,this.inline=null,this.pos=0,this.tokens=a.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(a){return this.next==a&&(this.pos++||!0)}err(a){throw new SyntaxError(a+" (in content expression '"+this.string+"')")}}function J(H){let a=[];do{a.push(Q(H))}while(H.eat("|"));return 1==a.length?a[0]:{type:"choice",exprs:a}}function Q(H){let a=[];do{a.push(ot(H))}while(H.next&&")"!=H.next&&"|"!=H.next);return 1==a.length?a[0]:{type:"seq",exprs:a}}function ot(H){let a=function(H){if(H.eat("(")){let a=J(H);return H.eat(")")||H.err("Missing closing paren"),a}if(!/\W/.test(H.next)){let a=function(H,a){let u=H.nodeTypes,E=u[a];if(E)return[E];let P=[];for(let w in u){let F=u[w];F.groups.indexOf(a)>-1&&P.push(F)}return 0==P.length&&H.err("No node type or group '"+a+"' found"),P}(H,H.next).map(u=>(null==H.inline?H.inline=u.isInline:H.inline!=u.isInline&&H.err("Mixing inline and block content"),{type:"name",value:u}));return H.pos++,1==a.length?a[0]:{type:"choice",exprs:a}}H.err("Unexpected token '"+H.next+"'")}(H);for(;;)if(H.eat("+"))a={type:"plus",expr:a};else if(H.eat("*"))a={type:"star",expr:a};else if(H.eat("?"))a={type:"opt",expr:a};else{if(!H.eat("{"))break;a=Zt(H,a)}return a}function wt(H){/\D/.test(H.next)&&H.err("Expected number, got '"+H.next+"'");let a=Number(H.next);return H.pos++,a}function Zt(H,a){let u=wt(H),E=u;return H.eat(",")&&(E="}"!=H.next?wt(H):-1),H.eat("}")||H.err("Unclosed braced range"),{type:"range",min:u,max:E,expr:a}}function pe(H,a){return a-H}function be(H,a){let u=[];return function E(P){let w=H[P];if(1==w.length&&!w[0].term)return E(w[0].to);u.push(P);for(let F=0;F<w.length;F++){let{term:at,to:Lt}=w[F];!at&&-1==u.indexOf(Lt)&&E(Lt)}}(a),u.sort(pe)}function Je(H){let a=Object.create(null);for(let u in H){let E=H[u];if(!E.hasDefault)return null;a[u]=E.default}return a}function De(H,a){let u=Object.create(null);for(let E in H){let P=a&&a[E];if(void 0===P){let w=H[E];if(!w.hasDefault)throw new RangeError("No value supplied for attribute "+E);P=w.default}u[E]=P}return u}function He(H){let a=Object.create(null);if(H)for(let u in H)a[u]=new Pe(H[u]);return a}class Te{constructor(a,u,E){this.name=a,this.schema=u,this.spec=E,this.markSet=null,this.groups=E.group?E.group.split(" "):[],this.attrs=He(E.attrs),this.defaultAttrs=Je(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(E.inline||"text"==a),this.isText="text"==a}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==dt.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let a in this.attrs)if(this.attrs[a].isRequired)return!0;return!1}compatibleContent(a){return this==a||this.contentMatch.compatible(a.contentMatch)}computeAttrs(a){return!a&&this.defaultAttrs?this.defaultAttrs:De(this.attrs,a)}create(a=null,u,E){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new pt(this,this.computeAttrs(a),g.from(u),et.setFrom(E))}createChecked(a=null,u,E){return u=g.from(u),this.checkContent(u),new pt(this,this.computeAttrs(a),u,et.setFrom(E))}createAndFill(a=null,u,E){if(a=this.computeAttrs(a),(u=g.from(u)).size){let F=this.contentMatch.fillBefore(u);if(!F)return null;u=F.append(u)}let P=this.contentMatch.matchFragment(u),w=P&&P.fillBefore(g.empty,!0);return w?new pt(this,a,u.append(w),et.setFrom(E)):null}validContent(a){let u=this.contentMatch.matchFragment(a);if(!u||!u.validEnd)return!1;for(let E=0;E<a.childCount;E++)if(!this.allowsMarks(a.child(E).marks))return!1;return!0}checkContent(a){if(!this.validContent(a))throw new RangeError(`Invalid content for node ${this.name}: ${a.toString().slice(0,50)}`)}allowsMarkType(a){return null==this.markSet||this.markSet.indexOf(a)>-1}allowsMarks(a){if(null==this.markSet)return!0;for(let u=0;u<a.length;u++)if(!this.allowsMarkType(a[u].type))return!1;return!0}allowedMarks(a){if(null==this.markSet)return a;let u;for(let E=0;E<a.length;E++)this.allowsMarkType(a[E].type)?u&&u.push(a[E]):u||(u=a.slice(0,E));return u?u.length?u:et.none:a}static compile(a,u){let E=Object.create(null);a.forEach((w,F)=>E[w]=new Te(w,u,F));let P=u.spec.topNode||"doc";if(!E[P])throw new RangeError("Schema is missing its top node type ('"+P+"')");if(!E.text)throw new RangeError("Every schema needs a 'text' type");for(let w in E.text.attrs)throw new RangeError("The text node type should not have attributes");return E}}class Pe{constructor(a){this.hasDefault=Object.prototype.hasOwnProperty.call(a,"default"),this.default=a.default}get isRequired(){return!this.hasDefault}}class Me{constructor(a,u,E,P){this.name=a,this.rank=u,this.schema=E,this.spec=P,this.attrs=He(P.attrs),this.excluded=null;let w=Je(this.attrs);this.instance=w?new et(this,w):null}create(a=null){return!a&&this.instance?this.instance:new et(this,De(this.attrs,a))}static compile(a,u){let E=Object.create(null),P=0;return a.forEach((w,F)=>E[w]=new Me(w,P++,u,F)),E}removeFromSet(a){for(var u=0;u<a.length;u++)a[u].type==this&&(a=a.slice(0,u).concat(a.slice(u+1)),u--);return a}isInSet(a){for(let u=0;u<a.length;u++)if(a[u].type==this)return a[u]}excludes(a){return this.excluded.indexOf(a)>-1}}class Ie{constructor(a){this.cached=Object.create(null);let u=this.spec={};for(let P in a)u[P]=a[P];u.nodes=l.from(a.nodes),u.marks=l.from(a.marks||{}),this.nodes=Te.compile(this.spec.nodes,this),this.marks=Me.compile(this.spec.marks,this);let E=Object.create(null);for(let P in this.nodes){if(P in this.marks)throw new RangeError(P+" can not be both a node and a mark");let w=this.nodes[P],F=w.spec.content||"",at=w.spec.marks;w.contentMatch=E[F]||(E[F]=dt.parse(F,this.nodes)),w.inlineContent=w.contentMatch.inlineContent,w.markSet="_"==at?null:at?Ue(this,at.split(" ")):""!=at&&w.inlineContent?null:[]}for(let P in this.marks){let w=this.marks[P],F=w.spec.excludes;w.excluded=null==F?[w]:""==F?[]:Ue(this,F.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(a,u=null,E,P){if("string"==typeof a)a=this.nodeType(a);else{if(!(a instanceof Te))throw new RangeError("Invalid node type: "+a);if(a.schema!=this)throw new RangeError("Node type from different schema used ("+a.name+")")}return a.createChecked(u,E,P)}text(a,u){let E=this.nodes.text;return new B(E,E.defaultAttrs,a,et.setFrom(u))}mark(a,u){return"string"==typeof a&&(a=this.marks[a]),a.create(u)}nodeFromJSON(a){return pt.fromJSON(this,a)}markFromJSON(a){return et.fromJSON(this,a)}nodeType(a){let u=this.nodes[a];if(!u)throw new RangeError("Unknown node type: "+a);return u}}function Ue(H,a){let u=[];for(let E=0;E<a.length;E++){let P=a[E],w=H.marks[P],F=w;if(w)u.push(w);else for(let at in H.marks){let Lt=H.marks[at];("_"==P||Lt.spec.group&&Lt.spec.group.split(" ").indexOf(P)>-1)&&u.push(F=Lt)}if(!F)throw new SyntaxError("Unknown mark type: '"+a[E]+"'")}return u}class Ee{constructor(a,u){this.schema=a,this.rules=u,this.tags=[],this.styles=[],u.forEach(E=>{E.tag?this.tags.push(E):E.style&&this.styles.push(E)}),this.normalizeLists=!this.tags.some(E=>{if(!/^(ul|ol)\b/.test(E.tag)||!E.node)return!1;let P=a.nodes[E.node];return P.contentMatch.matchType(P)})}parse(a,u={}){let E=new ye(this,u,!1);return E.addAll(a,u.from,u.to),E.finish()}parseSlice(a,u={}){let E=new ye(this,u,!0);return E.addAll(a,u.from,u.to),ut.maxOpen(E.finish())}matchTag(a,u,E){for(let P=E?this.tags.indexOf(E)+1:0;P<this.tags.length;P++){let w=this.tags[P];if(O(a,w.tag)&&(void 0===w.namespace||a.namespaceURI==w.namespace)&&(!w.context||u.matchesContext(w.context))){if(w.getAttrs){let F=w.getAttrs(a);if(!1===F)continue;w.attrs=F||void 0}return w}}}matchStyle(a,u,E,P){for(let w=P?this.styles.indexOf(P)+1:0;w<this.styles.length;w++){let F=this.styles[w],at=F.style;if(!(0!=at.indexOf(a)||F.context&&!E.matchesContext(F.context)||at.length>a.length&&(61!=at.charCodeAt(a.length)||at.slice(a.length+1)!=u))){if(F.getAttrs){let Lt=F.getAttrs(u);if(!1===Lt)continue;F.attrs=Lt||void 0}return F}}}static schemaRules(a){let u=[];function E(P){let w=null==P.priority?50:P.priority,F=0;for(;F<u.length;F++){let at=u[F];if((null==at.priority?50:at.priority)<w)break}u.splice(F,0,P)}for(let P in a.marks){let w=a.marks[P].spec.parseDOM;w&&w.forEach(F=>{E(F=k(F)),F.mark||F.ignore||F.clearMark||(F.mark=P)})}for(let P in a.nodes){let w=a.nodes[P].spec.parseDOM;w&&w.forEach(F=>{E(F=k(F)),F.node||F.ignore||F.mark||(F.node=P)})}return u}static fromSchema(a){return a.cached.domParser||(a.cached.domParser=new Ee(a,Ee.schemaRules(a)))}}const we={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ve={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ze={ol:!0,ul:!0};function Ce(H,a,u){return null!=a?(a?1:0)|("full"===a?2:0):H&&"pre"==H.whitespace?3:-5&u}class ge{constructor(a,u,E,P,w,F,at){this.type=a,this.attrs=u,this.marks=E,this.pendingMarks=P,this.solid=w,this.options=at,this.content=[],this.activeMarks=et.none,this.stashMarks=[],this.match=F||(4&at?null:a.contentMatch)}findWrapping(a){if(!this.match){if(!this.type)return[];let u=this.type.contentMatch.fillBefore(g.from(a));if(!u){let P,E=this.type.contentMatch;return(P=E.findWrapping(a.type))?(this.match=E,P):null}this.match=this.type.contentMatch.matchFragment(u)}return this.match.findWrapping(a.type)}finish(a){if(!(1&this.options)){let P,E=this.content[this.content.length-1];if(E&&E.isText&&(P=/[ \t\r\n\u000c]+$/.exec(E.text))){let w=E;E.text.length==P[0].length?this.content.pop():this.content[this.content.length-1]=w.withText(w.text.slice(0,w.text.length-P[0].length))}}let u=g.from(this.content);return!a&&this.match&&(u=u.append(this.match.fillBefore(g.empty,!0))),this.type?this.type.create(this.attrs,u,this.marks):u}popFromStashMark(a){for(let u=this.stashMarks.length-1;u>=0;u--)if(a.eq(this.stashMarks[u]))return this.stashMarks.splice(u,1)[0]}applyPending(a){for(let u=0,E=this.pendingMarks;u<E.length;u++){let P=E[u];(this.type?this.type.allowsMarkType(P.type):L(P.type,a))&&!P.isInSet(this.activeMarks)&&(this.activeMarks=P.addToSet(this.activeMarks),this.pendingMarks=P.removeFromSet(this.pendingMarks))}}inlineContext(a){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:a.parentNode&&!we.hasOwnProperty(a.parentNode.nodeName.toLowerCase())}}class ye{constructor(a,u,E){this.parser=a,this.options=u,this.isOpen=E,this.open=0;let w,P=u.topNode,F=Ce(null,u.preserveWhitespace,0)|(E?4:0);w=P?new ge(P.type,P.attrs,et.none,et.none,!0,u.topMatch||P.type.contentMatch,F):new ge(E?null:a.schema.topNodeType,null,et.none,et.none,!0,null,F),this.nodes=[w],this.find=u.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(a){if(3==a.nodeType)this.addTextNode(a);else if(1==a.nodeType){let u=a.getAttribute("style");if(u){let E=this.readStyles(function(H){let u,a=/\s*([\w-]+)\s*:\s*([^;]+)/g,E=[];for(;u=a.exec(H);)E.push(u[1],u[2].trim());return E}(u));if(!E)return;let[P,w]=E,F=this.top;for(let at=0;at<w.length;at++)this.removePendingMark(w[at],F);for(let at=0;at<P.length;at++)this.addPendingMark(P[at]);this.addElement(a);for(let at=0;at<P.length;at++)this.removePendingMark(P[at],F);for(let at=0;at<w.length;at++)this.addPendingMark(w[at])}else this.addElement(a)}}addTextNode(a){let u=a.nodeValue,E=this.top;if(2&E.options||E.inlineContext(a)||/[^ \t\r\n\u000c]/.test(u)){if(1&E.options)u=2&E.options?u.replace(/\r\n?/g,"\n"):u.replace(/\r?\n|\r/g," ");else if(u=u.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(u)&&this.open==this.nodes.length-1){let P=E.content[E.content.length-1],w=a.previousSibling;(!P||w&&"BR"==w.nodeName||P.isText&&/[ \t\r\n\u000c]$/.test(P.text))&&(u=u.slice(1))}u&&this.insertNode(this.parser.schema.text(u)),this.findInText(a)}else this.findInside(a)}addElement(a,u){let P,E=a.nodeName.toLowerCase();ze.hasOwnProperty(E)&&this.parser.normalizeLists&&function(H){for(let a=H.firstChild,u=null;a;a=a.nextSibling){let E=1==a.nodeType?a.nodeName.toLowerCase():null;E&&ze.hasOwnProperty(E)&&u?(u.appendChild(a),a=u):"li"==E?u=a:E&&(u=null)}}(a);let w=this.options.ruleFromNode&&this.options.ruleFromNode(a)||(P=this.parser.matchTag(a,this,u));if(w?w.ignore:Ve.hasOwnProperty(E))this.findInside(a),this.ignoreFallback(a);else if(!w||w.skip||w.closeParent){w&&w.closeParent?this.open=Math.max(0,this.open-1):w&&w.skip.nodeType&&(a=w.skip);let F,at=this.top,Lt=this.needsBlock;if(we.hasOwnProperty(E))at.content.length&&at.content[0].isInline&&this.open&&(this.open--,at=this.top),F=!0,at.type||(this.needsBlock=!0);else if(!a.firstChild)return void this.leafFallback(a);this.addAll(a),F&&this.sync(at),this.needsBlock=Lt}else this.addElementByRule(a,w,!1===w.consuming?P:void 0)}leafFallback(a){"BR"==a.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(a.ownerDocument.createTextNode("\n"))}ignoreFallback(a){"BR"==a.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(a){let u=et.none,E=et.none;t:for(let P=0;P<a.length;P+=2)for(let w;;){let F=this.parser.matchStyle(a[P],a[P+1],this,w);if(!F)continue t;if(F.ignore)return null;if(F.clearMark?this.top.pendingMarks.forEach(at=>{F.clearMark(at)&&(E=at.addToSet(E))}):u=this.parser.schema.marks[F.mark].create(F.attrs).addToSet(u),!1!==F.consuming)break;w=F}return[u,E]}addElementByRule(a,u,E){let P,w,F;u.node?(w=this.parser.schema.nodes[u.node],w.isLeaf?this.insertNode(w.create(u.attrs))||this.leafFallback(a):P=this.enter(w,u.attrs||null,u.preserveWhitespace)):(F=this.parser.schema.marks[u.mark].create(u.attrs),this.addPendingMark(F));let at=this.top;if(w&&w.isLeaf)this.findInside(a);else if(E)this.addElement(a,E);else if(u.getContent)this.findInside(a),u.getContent(a,this.parser.schema).forEach(Lt=>this.insertNode(Lt));else{let Lt=a;"string"==typeof u.contentElement?Lt=a.querySelector(u.contentElement):"function"==typeof u.contentElement?Lt=u.contentElement(a):u.contentElement&&(Lt=u.contentElement),this.findAround(a,Lt,!0),this.addAll(Lt)}P&&this.sync(at)&&this.open--,F&&this.removePendingMark(F,at)}addAll(a,u,E){let P=u||0;for(let w=u?a.childNodes[u]:a.firstChild,F=null==E?null:a.childNodes[E];w!=F;w=w.nextSibling,++P)this.findAtPoint(a,P),this.addDOM(w);this.findAtPoint(a,P)}findPlace(a){let u,E;for(let P=this.open;P>=0;P--){let w=this.nodes[P],F=w.findWrapping(a);if(F&&(!u||u.length>F.length)&&(u=F,E=w,!F.length)||w.solid)break}if(!u)return!1;this.sync(E);for(let P=0;P<u.length;P++)this.enterInner(u[P],null,!1);return!0}insertNode(a){if(a.isInline&&this.needsBlock&&!this.top.type){let u=this.textblockFromContext();u&&this.enterInner(u)}if(this.findPlace(a)){this.closeExtra();let u=this.top;u.applyPending(a.type),u.match&&(u.match=u.match.matchType(a.type));let E=u.activeMarks;for(let P=0;P<a.marks.length;P++)(!u.type||u.type.allowsMarkType(a.marks[P].type))&&(E=a.marks[P].addToSet(E));return u.content.push(a.mark(E)),!0}return!1}enter(a,u,E){let P=this.findPlace(a.create(u));return P&&this.enterInner(a,u,!0,E),P}enterInner(a,u=null,E=!1,P){this.closeExtra();let w=this.top;w.applyPending(a),w.match=w.match&&w.match.matchType(a);let F=Ce(a,P,w.options);4&w.options&&0==w.content.length&&(F|=4),this.nodes.push(new ge(a,u,w.activeMarks,w.pendingMarks,E,null,F)),this.open++}closeExtra(a=!1){let u=this.nodes.length-1;if(u>this.open){for(;u>this.open;u--)this.nodes[u-1].content.push(this.nodes[u].finish(a));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(a){for(let u=this.open;u>=0;u--)if(this.nodes[u]==a)return this.open=u,!0;return!1}get currentPos(){this.closeExtra();let a=0;for(let u=this.open;u>=0;u--){let E=this.nodes[u].content;for(let P=E.length-1;P>=0;P--)a+=E[P].nodeSize;u&&a++}return a}findAtPoint(a,u){if(this.find)for(let E=0;E<this.find.length;E++)this.find[E].node==a&&this.find[E].offset==u&&(this.find[E].pos=this.currentPos)}findInside(a){if(this.find)for(let u=0;u<this.find.length;u++)null==this.find[u].pos&&1==a.nodeType&&a.contains(this.find[u].node)&&(this.find[u].pos=this.currentPos)}findAround(a,u,E){if(a!=u&&this.find)for(let P=0;P<this.find.length;P++)null==this.find[P].pos&&1==a.nodeType&&a.contains(this.find[P].node)&&u.compareDocumentPosition(this.find[P].node)&(E?2:4)&&(this.find[P].pos=this.currentPos)}findInText(a){if(this.find)for(let u=0;u<this.find.length;u++)this.find[u].node==a&&(this.find[u].pos=this.currentPos-(a.nodeValue.length-this.find[u].offset))}matchesContext(a){if(a.indexOf("|")>-1)return a.split(/\s*\|\s*/).some(this.matchesContext,this);let u=a.split("/"),E=this.options.context,P=!(this.isOpen||E&&E.parent.type!=this.nodes[0].type),w=(P?0:1)-(E?E.depth+1:0),F=(at,Lt)=>{for(;at>=0;at--){let te=u[at];if(""==te){if(at==u.length-1||0==at)continue;for(;Lt>=w;Lt--)if(F(at-1,Lt))return!0;return!1}{let ee=Lt>0||0==Lt&&P?this.nodes[Lt].type:E&&Lt>=w?E.node(Lt-w).type:null;if(!ee||ee.name!=te&&-1==ee.groups.indexOf(te))return!1;Lt--}}return!0};return F(u.length-1,this.open)}textblockFromContext(){let a=this.options.context;if(a)for(let u=a.depth;u>=0;u--){let E=a.node(u).contentMatchAt(a.indexAfter(u)).defaultType;if(E&&E.isTextblock&&E.defaultAttrs)return E}for(let u in this.parser.schema.nodes){let E=this.parser.schema.nodes[u];if(E.isTextblock&&E.defaultAttrs)return E}}addPendingMark(a){let u=function(H,a){for(let u=0;u<a.length;u++)if(H.eq(a[u]))return a[u]}(a,this.top.pendingMarks);u&&this.top.stashMarks.push(u),this.top.pendingMarks=a.addToSet(this.top.pendingMarks)}removePendingMark(a,u){for(let E=this.open;E>=0;E--){let P=this.nodes[E];if(P.pendingMarks.lastIndexOf(a)>-1)P.pendingMarks=a.removeFromSet(P.pendingMarks);else{P.activeMarks=a.removeFromSet(P.activeMarks);let F=P.popFromStashMark(a);F&&P.type&&P.type.allowsMarkType(F.type)&&(P.activeMarks=F.addToSet(P.activeMarks))}if(P==u)break}}}function O(H,a){return(H.matches||H.msMatchesSelector||H.webkitMatchesSelector||H.mozMatchesSelector).call(H,a)}function k(H){let a={};for(let u in H)a[u]=H[u];return a}function L(H,a){let u=a.schema.nodes;for(let E in u){let P=u[E];if(!P.allowsMarkType(H))continue;let w=[],F=at=>{w.push(at);for(let Lt=0;Lt<at.edgeCount;Lt++){let{type:te,next:ee}=at.edge(Lt);if(te==a||w.indexOf(ee)<0&&F(ee))return!0}};if(F(P.contentMatch))return!0}}class U{constructor(a,u){this.nodes=a,this.marks=u}serializeFragment(a,u={},E){E||(E=Rt(u).createDocumentFragment());let P=E,w=[];return a.forEach(F=>{if(w.length||F.marks.length){let at=0,Lt=0;for(;at<w.length&&Lt<F.marks.length;){let te=F.marks[Lt];if(this.marks[te.type.name]){if(!te.eq(w[at][0])||!1===te.type.spec.spanning)break;at++,Lt++}else Lt++}for(;at<w.length;)P=w.pop()[1];for(;Lt<F.marks.length;){let te=F.marks[Lt++],ee=this.serializeMark(te,F.isInline,u);ee&&(w.push([te,P]),P.appendChild(ee.dom),P=ee.contentDOM||ee.dom)}}P.appendChild(this.serializeNodeInner(F,u))}),E}serializeNodeInner(a,u){let{dom:E,contentDOM:P}=U.renderSpec(Rt(u),this.nodes[a.type.name](a));if(P){if(a.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(a.content,u,P)}return E}serializeNode(a,u={}){let E=this.serializeNodeInner(a,u);for(let P=a.marks.length-1;P>=0;P--){let w=this.serializeMark(a.marks[P],a.isInline,u);w&&((w.contentDOM||w.dom).appendChild(E),E=w.dom)}return E}serializeMark(a,u,E={}){let P=this.marks[a.type.name];return P&&U.renderSpec(Rt(E),P(a,u))}static renderSpec(a,u,E=null){if("string"==typeof u)return{dom:a.createTextNode(u)};if(null!=u.nodeType)return{dom:u};if(u.dom&&null!=u.dom.nodeType)return u;let P=u[0],w=P.indexOf(" ");w>0&&(E=P.slice(0,w),P=P.slice(w+1));let F,at=E?a.createElementNS(E,P):a.createElement(P),Lt=u[1],te=1;if(Lt&&"object"==typeof Lt&&null==Lt.nodeType&&!Array.isArray(Lt)){te=2;for(let ee in Lt)if(null!=Lt[ee]){let Re=ee.indexOf(" ");Re>0?at.setAttributeNS(ee.slice(0,Re),ee.slice(Re+1),Lt[ee]):at.setAttribute(ee,Lt[ee])}}for(let ee=te;ee<u.length;ee++){let Re=u[ee];if(0===Re){if(ee<u.length-1||ee>te)throw new RangeError("Content hole must be the only child of its parent node");return{dom:at,contentDOM:at}}{let{dom:$e,contentDOM:Y}=U.renderSpec(a,Re,E);if(at.appendChild($e),Y){if(F)throw new RangeError("Multiple content holes");F=Y}}}return{dom:at,contentDOM:F}}static fromSchema(a){return a.cached.domSerializer||(a.cached.domSerializer=new U(this.nodesFromSchema(a),this.marksFromSchema(a)))}static nodesFromSchema(a){let u=Ot(a.nodes);return u.text||(u.text=E=>E.text),u}static marksFromSchema(a){return Ot(a.marks)}}function Ot(H){let a={};for(let u in H){let E=H[u].spec.toDOM;E&&(a[u]=E)}return a}function Rt(H){return H.document||window.document}},62463:(Vt,yt,c)=>{c.d(yt,{Bs:()=>q,C1:()=>nt,H$:()=>Jt,Sy:()=>bt,Y1:()=>S,qv:()=>ft,xm:()=>g,yy:()=>Dt});var M=c(77346),l=c(38480);const b=Object.create(null);class S{constructor(B,rt,dt){this.$anchor=B,this.$head=rt,this.ranges=dt||[new g(B.min(rt),B.max(rt))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let B=this.ranges;for(let rt=0;rt<B.length;rt++)if(B[rt].$from.pos!=B[rt].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(B,rt=M.p2.empty){let dt=rt.content.lastChild,st=null;for(let ot=0;ot<rt.openEnd;ot++)st=dt,dt=dt.lastChild;let J=B.steps.length,Q=this.ranges;for(let ot=0;ot<Q.length;ot++){let{$from:wt,$to:Zt}=Q[ot],jt=B.mapping.slice(J);B.replaceRange(jt.map(wt.pos),jt.map(Zt.pos),ot?M.p2.empty:rt),0==ot&&At(B,J,(dt?dt.isInline:st&&st.isTextblock)?-1:1)}}replaceWith(B,rt){let dt=B.steps.length,st=this.ranges;for(let J=0;J<st.length;J++){let{$from:Q,$to:ot}=st[J],wt=B.mapping.slice(dt),Zt=wt.map(Q.pos),jt=wt.map(ot.pos);J?B.deleteRange(Zt,jt):(B.replaceRangeWith(Zt,jt,rt),At(B,dt,rt.isInline?-1:1))}}static findFrom(B,rt,dt=!1){let st=B.parent.inlineContent?new q(B):Ct(B.node(0),B.parent,B.pos,B.index(),rt,dt);if(st)return st;for(let J=B.depth-1;J>=0;J--){let Q=rt<0?Ct(B.node(0),B.node(J),B.before(J+1),B.index(J),rt,dt):Ct(B.node(0),B.node(J),B.after(J+1),B.index(J)+1,rt,dt);if(Q)return Q}return null}static near(B,rt=1){return this.findFrom(B,rt)||this.findFrom(B,-rt)||new nt(B.node(0))}static atStart(B){return Ct(B,B,0,0,1)||new nt(B)}static atEnd(B){return Ct(B,B,B.content.size,B.childCount,-1)||new nt(B)}static fromJSON(B,rt){if(!rt||!rt.type)throw new RangeError("Invalid input for Selection.fromJSON");let dt=b[rt.type];if(!dt)throw new RangeError(`No selection type ${rt.type} defined`);return dt.fromJSON(B,rt)}static jsonID(B,rt){if(B in b)throw new RangeError("Duplicate use of selection JSON ID "+B);return b[B]=rt,rt.prototype.jsonID=B,rt}getBookmark(){return q.between(this.$anchor,this.$head).getBookmark()}}S.prototype.visible=!0;class g{constructor(B,rt){this.$from=B,this.$to=rt}}let it=!1;function N(pt){!it&&!pt.parent.inlineContent&&(it=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+pt.parent.type.name+")"))}class q extends S{constructor(B,rt=B){N(B),N(rt),super(B,rt)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(B,rt){let dt=B.resolve(rt.map(this.head));if(!dt.parent.inlineContent)return S.near(dt);let st=B.resolve(rt.map(this.anchor));return new q(st.parent.inlineContent?st:dt,dt)}replace(B,rt=M.p2.empty){if(super.replace(B,rt),rt==M.p2.empty){let dt=this.$from.marksAcross(this.$to);dt&&B.ensureMarks(dt)}}eq(B){return B instanceof q&&B.anchor==this.anchor&&B.head==this.head}getBookmark(){return new et(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(B,rt){if("number"!=typeof rt.anchor||"number"!=typeof rt.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new q(B.resolve(rt.anchor),B.resolve(rt.head))}static create(B,rt,dt=rt){let st=B.resolve(rt);return new this(st,dt==rt?st:B.resolve(dt))}static between(B,rt,dt){let st=B.pos-rt.pos;if((!dt||st)&&(dt=st>=0?1:-1),!rt.parent.inlineContent){let J=S.findFrom(rt,dt,!0)||S.findFrom(rt,-dt,!0);if(!J)return S.near(rt,dt);rt=J.$head}return B.parent.inlineContent||(0==st||(B=(S.findFrom(B,-dt,!0)||S.findFrom(B,dt,!0)).$anchor).pos<rt.pos!=st<0)&&(B=rt),new q(B,rt)}}S.jsonID("text",q);class et{constructor(B,rt){this.anchor=B,this.head=rt}map(B){return new et(B.map(this.anchor),B.map(this.head))}resolve(B){return q.between(B.resolve(this.anchor),B.resolve(this.head))}}class ft extends S{constructor(B){let rt=B.nodeAfter,dt=B.node(0).resolve(B.pos+rt.nodeSize);super(B,dt),this.node=rt}map(B,rt){let{deleted:dt,pos:st}=rt.mapResult(this.anchor),J=B.resolve(st);return dt?S.near(J):new ft(J)}content(){return new M.p2(M.HY.from(this.node),0,0)}eq(B){return B instanceof ft&&B.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new ut(this.anchor)}static fromJSON(B,rt){if("number"!=typeof rt.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ft(B.resolve(rt.anchor))}static create(B,rt){return new ft(B.resolve(rt))}static isSelectable(B){return!B.isText&&!1!==B.type.spec.selectable}}ft.prototype.visible=!1,S.jsonID("node",ft);class ut{constructor(B){this.anchor=B}map(B){let{deleted:rt,pos:dt}=B.mapResult(this.anchor);return rt?new et(dt,dt):new ut(dt)}resolve(B){let rt=B.resolve(this.anchor),dt=rt.nodeAfter;return dt&&ft.isSelectable(dt)?new ft(rt):S.near(rt)}}class nt extends S{constructor(B){super(B.resolve(0),B.resolve(B.content.size))}replace(B,rt=M.p2.empty){if(rt==M.p2.empty){B.delete(0,B.doc.content.size);let dt=S.atStart(B.doc);dt.eq(B.selection)||B.setSelection(dt)}else super.replace(B,rt)}toJSON(){return{type:"all"}}static fromJSON(B){return new nt(B)}map(B){return new nt(B)}eq(B){return B instanceof nt}getBookmark(){return vt}}S.jsonID("all",nt);const vt={map(){return this},resolve:pt=>new nt(pt)};function Ct(pt,B,rt,dt,st,J=!1){if(B.inlineContent)return q.create(pt,rt);for(let Q=dt-(st>0?0:1);st>0?Q<B.childCount:Q>=0;Q+=st){let ot=B.child(Q);if(ot.isAtom){if(!J&&ft.isSelectable(ot))return ft.create(pt,rt-(st<0?ot.nodeSize:0))}else{let wt=Ct(pt,ot,rt+st,st<0?ot.childCount:0,st,J);if(wt)return wt}rt+=ot.nodeSize*st}return null}function At(pt,B,rt){let dt=pt.steps.length-1;if(dt<B)return;let Q,st=pt.steps[dt];(st instanceof l.Pu||st instanceof l.FC)&&(pt.mapping.maps[dt].forEach((ot,wt,Zt,jt)=>{null==Q&&(Q=jt)}),pt.setSelection(S.near(pt.doc.resolve(Q),rt)))}class ht extends l.wx{constructor(B){super(B.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=B.selection,this.storedMarks=B.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(B){if(B.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=B,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(B){return this.storedMarks=B,this.updated|=2,this}ensureMarks(B){return M.vc.sameSet(this.storedMarks||this.selection.$from.marks(),B)||this.setStoredMarks(B),this}addStoredMark(B){return this.ensureMarks(B.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(B){return this.ensureMarks(B.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(B,rt){super.addStep(B,rt),this.updated=-3&this.updated,this.storedMarks=null}setTime(B){return this.time=B,this}replaceSelection(B){return this.selection.replace(this,B),this}replaceSelectionWith(B,rt=!0){let dt=this.selection;return rt&&(B=B.mark(this.storedMarks||(dt.empty?dt.$from.marks():dt.$from.marksAcross(dt.$to)||M.vc.none))),dt.replaceWith(this,B),this}deleteSelection(){return this.selection.replace(this),this}insertText(B,rt,dt){let st=this.doc.type.schema;if(null==rt)return B?this.replaceSelectionWith(st.text(B),!0):this.deleteSelection();{if(null==dt&&(dt=rt),dt=null==dt?rt:dt,!B)return this.deleteRange(rt,dt);let J=this.storedMarks;if(!J){let Q=this.doc.resolve(rt);J=dt==rt?Q.marks():Q.marksAcross(this.doc.resolve(dt))}return this.replaceRangeWith(rt,dt,st.text(B,J)),this.selection.empty||this.setSelection(S.near(this.selection.$to)),this}}setMeta(B,rt){return this.meta["string"==typeof B?B:B.key]=rt,this}getMeta(B){return this.meta["string"==typeof B?B:B.key]}get isGeneric(){for(let B in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function tt(pt,B){return B&&pt?pt.bind(B):pt}class W{constructor(B,rt,dt){this.name=B,this.init=tt(rt.init,dt),this.apply=tt(rt.apply,dt)}}const mt=[new W("doc",{init:pt=>pt.doc||pt.schema.topNodeType.createAndFill(),apply:pt=>pt.doc}),new W("selection",{init:(pt,B)=>pt.selection||S.atStart(B.doc),apply:pt=>pt.selection}),new W("storedMarks",{init:pt=>pt.storedMarks||null,apply:(pt,B,rt,dt)=>dt.selection.$cursor?pt.storedMarks:null}),new W("scrollToSelection",{init:()=>0,apply:(pt,B)=>pt.scrolledIntoView?B+1:B})];class j{constructor(B,rt){this.schema=B,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=mt.slice(),rt&&rt.forEach(dt=>{if(this.pluginsByKey[dt.key])throw new RangeError("Adding different instances of a keyed plugin ("+dt.key+")");this.plugins.push(dt),this.pluginsByKey[dt.key]=dt,dt.spec.state&&this.fields.push(new W(dt.key,dt.spec.state,dt))})}}class Dt{constructor(B){this.config=B}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(B){return this.applyTransaction(B).state}filterTransaction(B,rt=-1){for(let dt=0;dt<this.config.plugins.length;dt++)if(dt!=rt){let st=this.config.plugins[dt];if(st.spec.filterTransaction&&!st.spec.filterTransaction.call(st,B,this))return!1}return!0}applyTransaction(B){if(!this.filterTransaction(B))return{state:this,transactions:[]};let rt=[B],dt=this.applyInner(B),st=null;for(;;){let J=!1;for(let Q=0;Q<this.config.plugins.length;Q++){let ot=this.config.plugins[Q];if(ot.spec.appendTransaction){let wt=st?st[Q].n:0,Zt=st?st[Q].state:this,jt=wt<rt.length&&ot.spec.appendTransaction.call(ot,wt?rt.slice(wt):rt,Zt,dt);if(jt&&dt.filterTransaction(jt,Q)){if(jt.setMeta("appendedTransaction",B),!st){st=[];for(let oe=0;oe<this.config.plugins.length;oe++)st.push(oe<Q?{state:dt,n:rt.length}:{state:this,n:0})}rt.push(jt),dt=dt.applyInner(jt),J=!0}st&&(st[Q]={state:dt,n:rt.length})}}if(!J)return{state:dt,transactions:rt}}}applyInner(B){if(!B.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let rt=new Dt(this.config),dt=this.config.fields;for(let st=0;st<dt.length;st++){let J=dt[st];rt[J.name]=J.apply(B,this[J.name],this,rt)}return rt}get tr(){return new ht(this)}static create(B){let rt=new j(B.doc?B.doc.type.schema:B.schema,B.plugins),dt=new Dt(rt);for(let st=0;st<rt.fields.length;st++)dt[rt.fields[st].name]=rt.fields[st].init(B,dt);return dt}reconfigure(B){let rt=new j(this.schema,B.plugins),dt=rt.fields,st=new Dt(rt);for(let J=0;J<dt.length;J++){let Q=dt[J].name;st[Q]=this.hasOwnProperty(Q)?this[Q]:dt[J].init(B,st)}return st}toJSON(B){let rt={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(rt.storedMarks=this.storedMarks.map(dt=>dt.toJSON())),B&&"object"==typeof B)for(let dt in B){if("doc"==dt||"selection"==dt)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let st=B[dt],J=st.spec.state;J&&J.toJSON&&(rt[dt]=J.toJSON.call(st,this[st.key]))}return rt}static fromJSON(B,rt,dt){if(!rt)throw new RangeError("Invalid input for EditorState.fromJSON");if(!B.schema)throw new RangeError("Required config field 'schema' missing");let st=new j(B.schema,B.plugins),J=new Dt(st);return st.fields.forEach(Q=>{if("doc"==Q.name)J.doc=M.NB.fromJSON(B.schema,rt.doc);else if("selection"==Q.name)J.selection=S.fromJSON(J.doc,rt.selection);else if("storedMarks"==Q.name)rt.storedMarks&&(J.storedMarks=rt.storedMarks.map(B.schema.markFromJSON));else{if(dt)for(let ot in dt){let wt=dt[ot],Zt=wt.spec.state;if(wt.key==Q.name&&Zt&&Zt.fromJSON&&Object.prototype.hasOwnProperty.call(rt,ot))return void(J[Q.name]=Zt.fromJSON.call(wt,B,rt[ot],J))}J[Q.name]=Q.init(B,J)}}),J}}function It(pt,B,rt){for(let dt in pt){let st=pt[dt];st instanceof Function?st=st.bind(B):"handleDOMEvents"==dt&&(st=It(st,B,{})),rt[dt]=st}return rt}class bt{constructor(B){this.spec=B,this.props={},B.props&&It(B.props,this,this.props),this.key=B.key?B.key.key:Ht("plugin")}getState(B){return B[this.key]}}const Bt=Object.create(null);function Ht(pt){return pt in Bt?pt+"$"+ ++Bt[pt]:(Bt[pt]=0,pt+"$")}class Jt{constructor(B="key"){this.key=Ht(B)}get(B){return B.config.pluginsByKey[this.key]}getState(B){return B[this.key]}}},38480:(Vt,yt,c)=>{c.d(yt,{Ax:()=>Zt,FC:()=>j,GJ:()=>pe,Mn:()=>oe,Pu:()=>mt,dR:()=>Je,k9:()=>Jt,nd:()=>B,nj:()=>me,vs:()=>vt,wx:()=>ye});var M=c(77346);const b=Math.pow(2,16);function S(Tt,O){return Tt+O*b}function g(Tt){return 65535&Tt}class ut{constructor(O,x,k){this.pos=O,this.delInfo=x,this.recover=k}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class nt{constructor(O,x=!1){if(this.ranges=O,this.inverted=x,!O.length&&nt.empty)return nt.empty}recover(O){let x=0,k=g(O);if(!this.inverted)for(let L=0;L<k;L++)x+=this.ranges[3*L+2]-this.ranges[3*L+1];return this.ranges[3*k]+x+((Tt=O)-(65535&Tt))/b;var Tt}mapResult(O,x=1){return this._map(O,x,!1)}map(O,x=1){return this._map(O,x,!0)}_map(O,x,k){let L=0,V=this.inverted?2:1,U=this.inverted?1:2;for(let Ot=0;Ot<this.ranges.length;Ot+=3){let Rt=this.ranges[Ot]-(this.inverted?L:0);if(Rt>O)break;let H=this.ranges[Ot+V],a=this.ranges[Ot+U],u=Rt+H;if(O<=u){let P=Rt+L+((H?O==Rt?-1:O==u?1:x:x)<0?0:a);if(k)return P;let w=O==(x<0?Rt:u)?null:S(Ot/3,O-Rt),F=O==Rt?2:O==u?1:4;return(x<0?O!=Rt:O!=u)&&(F|=8),new ut(P,F,w)}L+=a-H}return k?O+L:new ut(O+L,0,null)}touches(O,x){let k=0,L=g(x),V=this.inverted?2:1,U=this.inverted?1:2;for(let Ot=0;Ot<this.ranges.length;Ot+=3){let Rt=this.ranges[Ot]-(this.inverted?k:0);if(Rt>O)break;let H=this.ranges[Ot+V];if(O<=Rt+H&&Ot==3*L)return!0;k+=this.ranges[Ot+U]-H}return!1}forEach(O){let x=this.inverted?2:1,k=this.inverted?1:2;for(let L=0,V=0;L<this.ranges.length;L+=3){let U=this.ranges[L],Ot=U-(this.inverted?V:0),Rt=U+(this.inverted?0:V),H=this.ranges[L+x],a=this.ranges[L+k];O(Ot,Ot+H,Rt,Rt+a),V+=a-H}}invert(){return new nt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(O){return 0==O?nt.empty:new nt(O<0?[0,-O,0]:[0,0,O])}}nt.empty=new nt([]);class vt{constructor(O=[],x,k=0,L=O.length){this.maps=O,this.mirror=x,this.from=k,this.to=L}slice(O=0,x=this.maps.length){return new vt(this.maps,this.mirror,O,x)}copy(){return new vt(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(O,x){this.to=this.maps.push(O),null!=x&&this.setMirror(this.maps.length-1,x)}appendMapping(O){for(let x=0,k=this.maps.length;x<O.maps.length;x++){let L=O.getMirror(x);this.appendMap(O.maps[x],null!=L&&L<x?k+L:void 0)}}getMirror(O){if(this.mirror)for(let x=0;x<this.mirror.length;x++)if(this.mirror[x]==O)return this.mirror[x+(x%2?-1:1)]}setMirror(O,x){this.mirror||(this.mirror=[]),this.mirror.push(O,x)}appendMappingInverted(O){for(let x=O.maps.length-1,k=this.maps.length+O.maps.length;x>=0;x--){let L=O.getMirror(x);this.appendMap(O.maps[x].invert(),null!=L&&L>x?k-L-1:void 0)}}invert(){let O=new vt;return O.appendMappingInverted(this),O}map(O,x=1){if(this.mirror)return this._map(O,x,!0);for(let k=this.from;k<this.to;k++)O=this.maps[k].map(O,x);return O}mapResult(O,x=1){return this._map(O,x,!1)}_map(O,x,k){let L=0;for(let V=this.from;V<this.to;V++){let Ot=this.maps[V].mapResult(O,x);if(null!=Ot.recover){let Rt=this.getMirror(V);if(null!=Rt&&Rt>V&&Rt<this.to){V=Rt,O=this.maps[Rt].recover(Ot.recover);continue}}L|=Ot.delInfo,O=Ot.pos}return k?O:new ut(O,L,null)}}const Ct=Object.create(null);class At{getMap(){return nt.empty}merge(O){return null}static fromJSON(O,x){if(!x||!x.stepType)throw new RangeError("Invalid input for Step.fromJSON");let k=Ct[x.stepType];if(!k)throw new RangeError(`No step type ${x.stepType} defined`);return k.fromJSON(O,x)}static jsonID(O,x){if(O in Ct)throw new RangeError("Duplicate use of step JSON ID "+O);return Ct[O]=x,x.prototype.jsonID=O,x}}class kt{constructor(O,x){this.doc=O,this.failed=x}static ok(O){return new kt(O,null)}static fail(O){return new kt(null,O)}static fromReplace(O,x,k,L){try{return kt.ok(O.replace(x,k,L))}catch(V){if(V instanceof M.e4)return kt.fail(V.message);throw V}}}function St(Tt,O,x){let k=[];for(let L=0;L<Tt.childCount;L++){let V=Tt.child(L);V.content.size&&(V=V.copy(St(V.content,O,V))),V.isInline&&(V=O(V,x,L)),k.push(V)}return M.HY.fromArray(k)}class Pt extends At{constructor(O,x,k){super(),this.from=O,this.to=x,this.mark=k}apply(O){let x=O.slice(this.from,this.to),k=O.resolve(this.from),L=k.node(k.sharedDepth(this.to)),V=new M.p2(St(x.content,(U,Ot)=>U.isAtom&&Ot.type.allowsMarkType(this.mark.type)?U.mark(this.mark.addToSet(U.marks)):U,L),x.openStart,x.openEnd);return kt.fromReplace(O,this.from,this.to,V)}invert(){return new ht(this.from,this.to,this.mark)}map(O){let x=O.mapResult(this.from,1),k=O.mapResult(this.to,-1);return x.deleted&&k.deleted||x.pos>=k.pos?null:new Pt(x.pos,k.pos,this.mark)}merge(O){return O instanceof Pt&&O.mark.eq(this.mark)&&this.from<=O.to&&this.to>=O.from?new Pt(Math.min(this.from,O.from),Math.max(this.to,O.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(O,x){if("number"!=typeof x.from||"number"!=typeof x.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Pt(x.from,x.to,O.markFromJSON(x.mark))}}At.jsonID("addMark",Pt);class ht extends At{constructor(O,x,k){super(),this.from=O,this.to=x,this.mark=k}apply(O){let x=O.slice(this.from,this.to),k=new M.p2(St(x.content,L=>L.mark(this.mark.removeFromSet(L.marks)),O),x.openStart,x.openEnd);return kt.fromReplace(O,this.from,this.to,k)}invert(){return new Pt(this.from,this.to,this.mark)}map(O){let x=O.mapResult(this.from,1),k=O.mapResult(this.to,-1);return x.deleted&&k.deleted||x.pos>=k.pos?null:new ht(x.pos,k.pos,this.mark)}merge(O){return O instanceof ht&&O.mark.eq(this.mark)&&this.from<=O.to&&this.to>=O.from?new ht(Math.min(this.from,O.from),Math.max(this.to,O.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(O,x){if("number"!=typeof x.from||"number"!=typeof x.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ht(x.from,x.to,O.markFromJSON(x.mark))}}At.jsonID("removeMark",ht);class tt extends At{constructor(O,x){super(),this.pos=O,this.mark=x}apply(O){let x=O.nodeAt(this.pos);if(!x)return kt.fail("No node at mark step's position");let k=x.type.create(x.attrs,null,this.mark.addToSet(x.marks));return kt.fromReplace(O,this.pos,this.pos+1,new M.p2(M.HY.from(k),0,x.isLeaf?0:1))}invert(O){let x=O.nodeAt(this.pos);if(x){let k=this.mark.addToSet(x.marks);if(k.length==x.marks.length){for(let L=0;L<x.marks.length;L++)if(!x.marks[L].isInSet(k))return new tt(this.pos,x.marks[L]);return new tt(this.pos,this.mark)}}return new W(this.pos,this.mark)}map(O){let x=O.mapResult(this.pos,1);return x.deletedAfter?null:new tt(x.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(O,x){if("number"!=typeof x.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new tt(x.pos,O.markFromJSON(x.mark))}}At.jsonID("addNodeMark",tt);class W extends At{constructor(O,x){super(),this.pos=O,this.mark=x}apply(O){let x=O.nodeAt(this.pos);if(!x)return kt.fail("No node at mark step's position");let k=x.type.create(x.attrs,null,this.mark.removeFromSet(x.marks));return kt.fromReplace(O,this.pos,this.pos+1,new M.p2(M.HY.from(k),0,x.isLeaf?0:1))}invert(O){let x=O.nodeAt(this.pos);return x&&this.mark.isInSet(x.marks)?new tt(this.pos,this.mark):this}map(O){let x=O.mapResult(this.pos,1);return x.deletedAfter?null:new W(x.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(O,x){if("number"!=typeof x.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new W(x.pos,O.markFromJSON(x.mark))}}At.jsonID("removeNodeMark",W);class mt extends At{constructor(O,x,k,L=!1){super(),this.from=O,this.to=x,this.slice=k,this.structure=L}apply(O){return this.structure&&Dt(O,this.from,this.to)?kt.fail("Structure replace would overwrite content"):kt.fromReplace(O,this.from,this.to,this.slice)}getMap(){return new nt([this.from,this.to-this.from,this.slice.size])}invert(O){return new mt(this.from,this.from+this.slice.size,O.slice(this.from,this.to))}map(O){let x=O.mapResult(this.from,1),k=O.mapResult(this.to,-1);return x.deletedAcross&&k.deletedAcross?null:new mt(x.pos,Math.max(x.pos,k.pos),this.slice)}merge(O){if(!(O instanceof mt)||O.structure||this.structure)return null;if(this.from+this.slice.size!=O.from||this.slice.openEnd||O.slice.openStart){if(O.to!=this.from||this.slice.openStart||O.slice.openEnd)return null;{let x=this.slice.size+O.slice.size==0?M.p2.empty:new M.p2(O.slice.content.append(this.slice.content),O.slice.openStart,this.slice.openEnd);return new mt(O.from,this.to,x,this.structure)}}{let x=this.slice.size+O.slice.size==0?M.p2.empty:new M.p2(this.slice.content.append(O.slice.content),this.slice.openStart,O.slice.openEnd);return new mt(this.from,this.to+(O.to-O.from),x,this.structure)}}toJSON(){let O={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(O.slice=this.slice.toJSON()),this.structure&&(O.structure=!0),O}static fromJSON(O,x){if("number"!=typeof x.from||"number"!=typeof x.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new mt(x.from,x.to,M.p2.fromJSON(O,x.slice),!!x.structure)}}At.jsonID("replace",mt);class j extends At{constructor(O,x,k,L,V,U,Ot=!1){super(),this.from=O,this.to=x,this.gapFrom=k,this.gapTo=L,this.slice=V,this.insert=U,this.structure=Ot}apply(O){if(this.structure&&(Dt(O,this.from,this.gapFrom)||Dt(O,this.gapTo,this.to)))return kt.fail("Structure gap-replace would overwrite content");let x=O.slice(this.gapFrom,this.gapTo);if(x.openStart||x.openEnd)return kt.fail("Gap is not a flat range");let k=this.slice.insertAt(this.insert,x.content);return k?kt.fromReplace(O,this.from,this.to,k):kt.fail("Content does not fit in gap")}getMap(){return new nt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(O){let x=this.gapTo-this.gapFrom;return new j(this.from,this.from+this.slice.size+x,this.from+this.insert,this.from+this.insert+x,O.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(O){let x=O.mapResult(this.from,1),k=O.mapResult(this.to,-1),L=O.map(this.gapFrom,-1),V=O.map(this.gapTo,1);return x.deletedAcross&&k.deletedAcross||L<x.pos||V>k.pos?null:new j(x.pos,k.pos,L,V,this.slice,this.insert,this.structure)}toJSON(){let O={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(O.slice=this.slice.toJSON()),this.structure&&(O.structure=!0),O}static fromJSON(O,x){if("number"!=typeof x.from||"number"!=typeof x.to||"number"!=typeof x.gapFrom||"number"!=typeof x.gapTo||"number"!=typeof x.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new j(x.from,x.to,x.gapFrom,x.gapTo,M.p2.fromJSON(O,x.slice),x.insert,!!x.structure)}}function Dt(Tt,O,x){let k=Tt.resolve(O),L=x-O,V=k.depth;for(;L>0&&V>0&&k.indexAfter(V)==k.node(V).childCount;)V--,L--;if(L>0){let U=k.node(V).maybeChild(k.indexAfter(V));for(;L>0;){if(!U||U.isLeaf)return!0;U=U.firstChild,L--}}return!1}function Ht(Tt,O,x){return(0==O||Tt.canReplace(O,Tt.childCount))&&(x==Tt.childCount||Tt.canReplace(0,x))}function Jt(Tt){let x=Tt.parent.content.cutByIndex(Tt.startIndex,Tt.endIndex);for(let k=Tt.depth;;--k){let L=Tt.$from.node(k),V=Tt.$from.index(k),U=Tt.$to.indexAfter(k);if(k<Tt.depth&&L.canReplace(V,U,x))return k;if(0==k||L.type.spec.isolating||!Ht(L,V,U))break}return null}function B(Tt,O,x=null,k=Tt){let L=function(Tt,O){let{parent:x,startIndex:k,endIndex:L}=Tt,V=x.contentMatchAt(k).findWrapping(O);return V&&x.canReplaceWith(k,L,V.length?V[0]:O)?V:null}(Tt,O),V=L&&function(Tt,O){let{parent:x,startIndex:k,endIndex:L}=Tt,V=x.child(k),U=O.contentMatch.findWrapping(V.type);if(!U)return null;let Rt=(U.length?U[U.length-1]:O).contentMatch;for(let H=k;Rt&&H<L;H++)Rt=Rt.matchType(x.child(H).type);return Rt&&Rt.validEnd?U:null}(k,O);return V?L.map(rt).concat({type:O,attrs:x}).concat(V.map(rt)):null}function rt(Tt){return{type:Tt,attrs:null}}function Zt(Tt,O,x=1,k){let L=Tt.resolve(O),V=L.depth-x,U=k&&k[k.length-1]||L.parent;if(V<0||L.parent.type.spec.isolating||!L.parent.canReplace(L.index(),L.parent.childCount)||!U.type.validContent(L.parent.content.cutByIndex(L.index(),L.parent.childCount)))return!1;for(let H=L.depth-1,a=x-2;H>V;H--,a--){let u=L.node(H),E=L.index(H);if(u.type.spec.isolating)return!1;let P=u.content.cutByIndex(E,u.childCount),w=k&&k[a]||u;if(w!=u&&(P=P.replaceChild(0,w.type.create(w.attrs))),!u.canReplace(E+1,u.childCount)||!w.type.validContent(P))return!1}let Ot=L.indexAfter(V),Rt=k&&k[0];return L.node(V).canReplaceWith(Ot,Ot,Rt?Rt.type:L.node(V+1).type)}function oe(Tt,O){let x=Tt.resolve(O),k=x.index();return Wt(x.nodeBefore,x.nodeAfter)&&x.parent.canReplace(k,k+1)}function Wt(Tt,O){return!(!Tt||!O||Tt.isLeaf||!Tt.canAppend(O))}function pe(Tt,O,x=-1){let k=Tt.resolve(O);for(let L=k.depth;;L--){let V,U,Ot=k.index(L);if(L==k.depth?(V=k.nodeBefore,U=k.nodeAfter):x>0?(V=k.node(L+1),Ot++,U=k.node(L).maybeChild(Ot)):(V=k.node(L).maybeChild(Ot-1),U=k.node(L+1)),V&&!V.isTextblock&&Wt(V,U)&&k.node(L).canReplace(Ot,Ot+1))return O;if(0==L)break;O=x<0?k.before(L):k.after(L)}}function me(Tt,O,x){let k=Tt.resolve(O);if(!x.content.size)return O;let L=x.content;for(let V=0;V<x.openStart;V++)L=L.firstChild.content;for(let V=1;V<=(0==x.openStart&&x.size?2:1);V++)for(let U=k.depth;U>=0;U--){let Ot=U==k.depth?0:k.pos<=(k.start(U+1)+k.end(U+1))/2?-1:1,Rt=k.index(U)+(Ot>0?1:0),H=k.node(U),a=!1;if(1==V)a=H.canReplace(Rt,Rt,L);else{let u=H.contentMatchAt(Rt).findWrapping(L.firstChild.type);a=u&&H.canReplaceWith(Rt,Rt,u[0])}if(a)return 0==Ot?k.pos:Ot<0?k.before(U+1):k.after(U+1)}return null}function Je(Tt,O,x=O,k=M.p2.empty){if(O==x&&!k.size)return null;let L=Tt.resolve(O),V=Tt.resolve(x);return De(L,V,k)?new mt(O,x,k):new He(L,V,k).fit()}function De(Tt,O,x){return!x.openStart&&!x.openEnd&&Tt.start()==O.start()&&Tt.parent.canReplace(Tt.index(),O.index(),x.content)}At.jsonID("replaceAround",j);class He{constructor(O,x,k){this.$from=O,this.$to=x,this.unplaced=k,this.frontier=[],this.placed=M.HY.empty;for(let L=0;L<=O.depth;L++){let V=O.node(L);this.frontier.push({type:V.type,match:V.contentMatchAt(O.indexAfter(L))})}for(let L=O.depth;L>0;L--)this.placed=M.HY.from(O.node(L).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let H=this.findFittable();H?this.placeNodes(H):this.openMore()||this.dropNode()}let O=this.mustMoveInline(),x=this.placed.size-this.depth-this.$from.depth,k=this.$from,L=this.close(O<0?this.$to:k.doc.resolve(O));if(!L)return null;let V=this.placed,U=k.depth,Ot=L.depth;for(;U&&Ot&&1==V.childCount;)V=V.firstChild.content,U--,Ot--;let Rt=new M.p2(V,U,Ot);return O>-1?new j(k.pos,O,this.$to.pos,this.$to.end(),Rt,x):Rt.size||k.pos!=this.$to.pos?new mt(k.pos,L.pos,Rt):null}findFittable(){let O=this.unplaced.openStart;for(let x=this.unplaced.content,k=0,L=this.unplaced.openEnd;k<O;k++){let V=x.firstChild;if(x.childCount>1&&(L=0),V.type.spec.isolating&&L<=k){O=k;break}x=V.content}for(let x=1;x<=2;x++)for(let k=1==x?O:this.unplaced.openStart;k>=0;k--){let L,V=null;k?(V=Me(this.unplaced.content,k-1).firstChild,L=V.content):L=this.unplaced.content;let U=L.firstChild;for(let Ot=this.depth;Ot>=0;Ot--){let a,{type:Rt,match:H}=this.frontier[Ot],u=null;if(1==x&&(U?H.matchType(U.type)||(u=H.fillBefore(M.HY.from(U),!1)):V&&Rt.compatibleContent(V.type)))return{sliceDepth:k,frontierDepth:Ot,parent:V,inject:u};if(2==x&&U&&(a=H.findWrapping(U.type)))return{sliceDepth:k,frontierDepth:Ot,parent:V,wrap:a};if(V&&H.matchType(V.type))break}}}openMore(){let{content:O,openStart:x,openEnd:k}=this.unplaced,L=Me(O,x);return!(!L.childCount||L.firstChild.isLeaf||(this.unplaced=new M.p2(O,x+1,Math.max(k,L.size+x>=O.size-k?x+1:0)),0))}dropNode(){let{content:O,openStart:x,openEnd:k}=this.unplaced,L=Me(O,x);if(L.childCount<=1&&x>0){let V=O.size-x<=x+L.size;this.unplaced=new M.p2(Te(O,x-1,1),x-1,V?x-1:k)}else this.unplaced=new M.p2(Te(O,x,1),x,k)}placeNodes({sliceDepth:O,frontierDepth:x,parent:k,inject:L,wrap:V}){for(;this.depth>x;)this.closeFrontierNode();if(V)for(let F=0;F<V.length;F++)this.openFrontierNode(V[F]);let U=this.unplaced,Ot=k?k.content:U.content,Rt=U.openStart-O,H=0,a=[],{match:u,type:E}=this.frontier[x];if(L){for(let F=0;F<L.childCount;F++)a.push(L.child(F));u=u.matchFragment(L)}let P=Ot.size+O-(U.content.size-U.openEnd);for(;H<Ot.childCount;){let F=Ot.child(H),at=u.matchType(F.type);if(!at)break;H++,(H>1||0==Rt||F.content.size)&&(u=at,a.push(Ie(F.mark(E.allowedMarks(F.marks)),1==H?Rt:0,H==Ot.childCount?P:-1)))}let w=H==Ot.childCount;w||(P=-1),this.placed=Pe(this.placed,x,M.HY.from(a)),this.frontier[x].match=u,w&&P<0&&k&&k.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let F=0,at=Ot;F<P;F++){let Lt=at.lastChild;this.frontier.push({type:Lt.type,match:Lt.contentMatchAt(Lt.childCount)}),at=Lt.content}this.unplaced=w?0==O?M.p2.empty:new M.p2(Te(U.content,O-1,1),O-1,P<0?U.openEnd:O-1):new M.p2(Te(U.content,O,H),U.openStart,U.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let x,O=this.frontier[this.depth];if(!O.type.isTextblock||!Ue(this.$to,this.$to.depth,O.type,O.match,!1)||this.$to.depth==this.depth&&(x=this.findCloseLevel(this.$to))&&x.depth==this.depth)return-1;let{depth:k}=this.$to,L=this.$to.after(k);for(;k>1&&L==this.$to.end(--k);)++L;return L}findCloseLevel(O){t:for(let x=Math.min(this.depth,O.depth);x>=0;x--){let{match:k,type:L}=this.frontier[x],V=x<O.depth&&O.end(x+1)==O.pos+(O.depth-(x+1)),U=Ue(O,x,L,k,V);if(U){for(let Ot=x-1;Ot>=0;Ot--){let{match:Rt,type:H}=this.frontier[Ot],a=Ue(O,Ot,H,Rt,!0);if(!a||a.childCount)continue t}return{depth:x,fit:U,move:V?O.doc.resolve(O.after(x+1)):O}}}}close(O){let x=this.findCloseLevel(O);if(!x)return null;for(;this.depth>x.depth;)this.closeFrontierNode();x.fit.childCount&&(this.placed=Pe(this.placed,x.depth,x.fit)),O=x.move;for(let k=x.depth+1;k<=O.depth;k++){let L=O.node(k),V=L.type.contentMatch.fillBefore(L.content,!0,O.index(k));this.openFrontierNode(L.type,L.attrs,V)}return O}openFrontierNode(O,x=null,k){let L=this.frontier[this.depth];L.match=L.match.matchType(O),this.placed=Pe(this.placed,this.depth,M.HY.from(O.create(x,k))),this.frontier.push({type:O,match:O.contentMatch})}closeFrontierNode(){let x=this.frontier.pop().match.fillBefore(M.HY.empty,!0);x.childCount&&(this.placed=Pe(this.placed,this.frontier.length,x))}}function Te(Tt,O,x){return 0==O?Tt.cutByIndex(x,Tt.childCount):Tt.replaceChild(0,Tt.firstChild.copy(Te(Tt.firstChild.content,O-1,x)))}function Pe(Tt,O,x){return 0==O?Tt.append(x):Tt.replaceChild(Tt.childCount-1,Tt.lastChild.copy(Pe(Tt.lastChild.content,O-1,x)))}function Me(Tt,O){for(let x=0;x<O;x++)Tt=Tt.firstChild.content;return Tt}function Ie(Tt,O,x){if(O<=0)return Tt;let k=Tt.content;return O>1&&(k=k.replaceChild(0,Ie(k.firstChild,O-1,1==k.childCount?x-1:0))),O>0&&(k=Tt.type.contentMatch.fillBefore(k).append(k),x<=0&&(k=k.append(Tt.type.contentMatch.matchFragment(k).fillBefore(M.HY.empty,!0)))),Tt.copy(k)}function Ue(Tt,O,x,k,L){let V=Tt.node(O),U=L?Tt.indexAfter(O):Tt.index(O);if(U==V.childCount&&!x.compatibleContent(V.type))return null;let Ot=k.fillBefore(V.content,!0,U);return Ot&&!function(Tt,O,x){for(let k=x;k<O.childCount;k++)if(!Tt.allowsMarks(O.child(k).marks))return!0;return!1}(x,V.content,U)?Ot:null}function we(Tt){return Tt.spec.defining||Tt.spec.definingForContent}function ze(Tt,O,x,k,L){if(O<x){let V=Tt.firstChild;Tt=Tt.replaceChild(0,V.copy(ze(V.content,O+1,x,k,V)))}if(O>k){let V=L.contentMatchAt(0),U=V.fillBefore(Tt).append(Tt);Tt=U.append(V.matchFragment(U).fillBefore(M.HY.empty,!0))}return Tt}function Fe(Tt,O){let x=[];for(let L=Math.min(Tt.depth,O.depth);L>=0;L--){let V=Tt.start(L);if(V<Tt.pos-(Tt.depth-L)||O.end(L)>O.pos+(O.depth-L)||Tt.node(L).type.spec.isolating||O.node(L).type.spec.isolating)break;(V==O.start(L)||L==Tt.depth&&L==O.depth&&Tt.parent.inlineContent&&O.parent.inlineContent&&L&&O.start(L-1)==V-1)&&x.push(L)}return x}class Ce extends At{constructor(O,x,k){super(),this.pos=O,this.attr=x,this.value=k}apply(O){let x=O.nodeAt(this.pos);if(!x)return kt.fail("No node at attribute step's position");let k=Object.create(null);for(let V in x.attrs)k[V]=x.attrs[V];k[this.attr]=this.value;let L=x.type.create(k,null,x.marks);return kt.fromReplace(O,this.pos,this.pos+1,new M.p2(M.HY.from(L),0,x.isLeaf?0:1))}getMap(){return nt.empty}invert(O){return new Ce(this.pos,this.attr,O.nodeAt(this.pos).attrs[this.attr])}map(O){let x=O.mapResult(this.pos,1);return x.deletedAfter?null:new Ce(x.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(O,x){if("number"!=typeof x.pos||"string"!=typeof x.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ce(x.pos,x.attr,x.value)}}At.jsonID("attr",Ce);let ge=class extends Error{};ge=function Tt(O){let x=Error.call(this,O);return x.__proto__=Tt.prototype,x},(ge.prototype=Object.create(Error.prototype)).constructor=ge,ge.prototype.name="TransformError";class ye{constructor(O){this.doc=O,this.steps=[],this.docs=[],this.mapping=new vt}get before(){return this.docs.length?this.docs[0]:this.doc}step(O){let x=this.maybeStep(O);if(x.failed)throw new ge(x.failed);return this}maybeStep(O){let x=O.apply(this.doc);return x.failed||this.addStep(O,x.doc),x}get docChanged(){return this.steps.length>0}addStep(O,x){this.docs.push(this.doc),this.steps.push(O),this.mapping.appendMap(O.getMap()),this.doc=x}replace(O,x=O,k=M.p2.empty){let L=Je(this.doc,O,x,k);return L&&this.step(L),this}replaceWith(O,x,k){return this.replace(O,x,new M.p2(M.HY.from(k),0,0))}delete(O,x){return this.replace(O,x,M.p2.empty)}insert(O,x){return this.replaceWith(O,O,x)}replaceRange(O,x,k){return function(Tt,O,x,k){if(!k.size)return Tt.deleteRange(O,x);let L=Tt.doc.resolve(O),V=Tt.doc.resolve(x);if(De(L,V,k))return Tt.step(new mt(O,x,k));let U=Fe(L,Tt.doc.resolve(x));0==U[U.length-1]&&U.pop();let Ot=-(L.depth+1);U.unshift(Ot);for(let E=L.depth,P=L.pos-1;E>0;E--,P--){let w=L.node(E).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;U.indexOf(E)>-1?Ot=E:L.before(E)==P&&U.splice(1,0,-E)}let Rt=U.indexOf(Ot),H=[],a=k.openStart;for(let E=k.content,P=0;;P++){let w=E.firstChild;if(H.push(w),P==k.openStart)break;E=w.content}for(let E=a-1;E>=0;E--){let P=H[E].type,w=we(P);if(w&&L.node(Rt).type!=P)a=E;else if(w||!P.isTextblock)break}for(let E=k.openStart;E>=0;E--){let P=(E+a+1)%(k.openStart+1),w=H[P];if(w)for(let F=0;F<U.length;F++){let at=U[(F+Rt)%U.length],Lt=!0;at<0&&(Lt=!1,at=-at);let te=L.node(at-1),ee=L.index(at-1);if(te.canReplaceWith(ee,ee,w.type,w.marks))return Tt.replace(L.before(at),Lt?V.after(at):x,new M.p2(ze(k.content,0,k.openStart,P),P,k.openEnd))}}let u=Tt.steps.length;for(let E=U.length-1;E>=0&&(Tt.replace(O,x,k),!(Tt.steps.length>u));E--){let P=U[E];P<0||(O=L.before(P),x=V.after(P))}}(this,O,x,k),this}replaceRangeWith(O,x,k){return function(Tt,O,x,k){if(!k.isInline&&O==x&&Tt.doc.resolve(O).parent.content.size){let L=function(Tt,O,x){let k=Tt.resolve(O);if(k.parent.canReplaceWith(k.index(),k.index(),x))return O;if(0==k.parentOffset)for(let L=k.depth-1;L>=0;L--){let V=k.index(L);if(k.node(L).canReplaceWith(V,V,x))return k.before(L+1);if(V>0)return null}if(k.parentOffset==k.parent.content.size)for(let L=k.depth-1;L>=0;L--){let V=k.indexAfter(L);if(k.node(L).canReplaceWith(V,V,x))return k.after(L+1);if(V<k.node(L).childCount)return null}return null}(Tt.doc,O,k.type);null!=L&&(O=x=L)}Tt.replaceRange(O,x,new M.p2(M.HY.from(k),0,0))}(this,O,x,k),this}deleteRange(O,x){return function(Tt,O,x){let k=Tt.doc.resolve(O),L=Tt.doc.resolve(x),V=Fe(k,L);for(let U=0;U<V.length;U++){let Ot=V[U],Rt=U==V.length-1;if(Rt&&0==Ot||k.node(Ot).type.contentMatch.validEnd)return Tt.delete(k.start(Ot),L.end(Ot));if(Ot>0&&(Rt||k.node(Ot-1).canReplace(k.index(Ot-1),L.indexAfter(Ot-1))))return Tt.delete(k.before(Ot),L.after(Ot))}for(let U=1;U<=k.depth&&U<=L.depth;U++)if(O-k.start(U)==k.depth-U&&x>k.end(U)&&L.end(U)-x!=L.depth-U)return Tt.delete(k.before(U),x);Tt.delete(O,x)}(this,O,x),this}lift(O,x){return function(Tt,O,x){let{$from:k,$to:L,depth:V}=O,U=k.before(V+1),Ot=L.after(V+1),Rt=U,H=Ot,a=M.HY.empty,u=0;for(let w=V,F=!1;w>x;w--)F||k.index(w)>0?(F=!0,a=M.HY.from(k.node(w).copy(a)),u++):Rt--;let E=M.HY.empty,P=0;for(let w=V,F=!1;w>x;w--)F||L.after(w+1)<L.end(w)?(F=!0,E=M.HY.from(L.node(w).copy(E)),P++):H++;Tt.step(new j(Rt,H,U,Ot,new M.p2(a.append(E),u,P),a.size-u,!0))}(this,O,x),this}join(O,x=1){return function(Tt,O,x){let k=new mt(O-x,O+x,M.p2.empty,!0);Tt.step(k)}(this,O,x),this}wrap(O,x){return function(Tt,O,x){let k=M.HY.empty;for(let U=x.length-1;U>=0;U--){if(k.size){let Ot=x[U].type.contentMatch.matchFragment(k);if(!Ot||!Ot.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}k=M.HY.from(x[U].type.create(x[U].attrs,k))}let L=O.start,V=O.end;Tt.step(new j(L,V,L,V,new M.p2(k,0,0),x.length,!0))}(this,O,x),this}setBlockType(O,x=O,k,L=null){return function(Tt,O,x,k,L){if(!k.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let V=Tt.steps.length;Tt.doc.nodesBetween(O,x,(U,Ot)=>{if(U.isTextblock&&!U.hasMarkup(k,L)&&function(Tt,O,x){let k=Tt.resolve(O),L=k.index();return k.parent.canReplaceWith(L,L+1,x)}(Tt.doc,Tt.mapping.slice(V).map(Ot),k)){Tt.clearIncompatible(Tt.mapping.slice(V).map(Ot,1),k);let Rt=Tt.mapping.slice(V),H=Rt.map(Ot,1),a=Rt.map(Ot+U.nodeSize,1);return Tt.step(new j(H,a,H+1,a-1,new M.p2(M.HY.from(k.create(L,null,U.marks)),0,0),1,!0)),!1}})}(this,O,x,k,L),this}setNodeMarkup(O,x,k=null,L){return function(Tt,O,x,k,L){let V=Tt.doc.nodeAt(O);if(!V)throw new RangeError("No node at given position");x||(x=V.type);let U=x.create(k,null,L||V.marks);if(V.isLeaf)return Tt.replaceWith(O,O+V.nodeSize,U);if(!x.validContent(V.content))throw new RangeError("Invalid content for node type "+x.name);Tt.step(new j(O,O+V.nodeSize,O+1,O+V.nodeSize-1,new M.p2(M.HY.from(U),0,0),1,!0))}(this,O,x,k,L),this}setNodeAttribute(O,x,k){return this.step(new Ce(O,x,k)),this}addNodeMark(O,x){return this.step(new tt(O,x)),this}removeNodeMark(O,x){if(!(x instanceof M.vc)){let k=this.doc.nodeAt(O);if(!k)throw new RangeError("No node at position "+O);if(!(x=x.isInSet(k.marks)))return this}return this.step(new W(O,x)),this}split(O,x=1,k){return function(Tt,O,x=1,k){let L=Tt.doc.resolve(O),V=M.HY.empty,U=M.HY.empty;for(let Ot=L.depth,Rt=L.depth-x,H=x-1;Ot>Rt;Ot--,H--){V=M.HY.from(L.node(Ot).copy(V));let a=k&&k[H];U=M.HY.from(a?a.type.create(a.attrs,U):L.node(Ot).copy(U))}Tt.step(new mt(O,O,new M.p2(V.append(U),x,x),!0))}(this,O,x,k),this}addMark(O,x,k){return function(Tt,O,x,k){let U,Ot,L=[],V=[];Tt.doc.nodesBetween(O,x,(Rt,H,a)=>{if(!Rt.isInline)return;let u=Rt.marks;if(!k.isInSet(u)&&a.type.allowsMarkType(k.type)){let E=Math.max(H,O),P=Math.min(H+Rt.nodeSize,x),w=k.addToSet(u);for(let F=0;F<u.length;F++)u[F].isInSet(w)||(U&&U.to==E&&U.mark.eq(u[F])?U.to=P:L.push(U=new ht(E,P,u[F])));Ot&&Ot.to==E?Ot.to=P:V.push(Ot=new Pt(E,P,k))}}),L.forEach(Rt=>Tt.step(Rt)),V.forEach(Rt=>Tt.step(Rt))}(this,O,x,k),this}removeMark(O,x,k){return function(Tt,O,x,k){let L=[],V=0;Tt.doc.nodesBetween(O,x,(U,Ot)=>{if(!U.isInline)return;V++;let Rt=null;if(k instanceof M.ZU){let a,H=U.marks;for(;a=k.isInSet(H);)(Rt||(Rt=[])).push(a),H=a.removeFromSet(H)}else k?k.isInSet(U.marks)&&(Rt=[k]):Rt=U.marks;if(Rt&&Rt.length){let H=Math.min(Ot+U.nodeSize,x);for(let a=0;a<Rt.length;a++){let E,u=Rt[a];for(let P=0;P<L.length;P++){let w=L[P];w.step==V-1&&u.eq(L[P].style)&&(E=w)}E?(E.to=H,E.step=V):L.push({style:u,from:Math.max(Ot,O),to:H,step:V})}}}),L.forEach(U=>Tt.step(new ht(U.from,U.to,U.style)))}(this,O,x,k),this}clearIncompatible(O,x,k){return function(Tt,O,x,k=x.contentMatch){let L=Tt.doc.nodeAt(O),V=[],U=O+1;for(let Ot=0;Ot<L.childCount;Ot++){let Rt=L.child(Ot),H=U+Rt.nodeSize,a=k.matchType(Rt.type);if(a){k=a;for(let u=0;u<Rt.marks.length;u++)x.allowsMarkType(Rt.marks[u].type)||Tt.step(new ht(U,H,Rt.marks[u]))}else V.push(new mt(U,H,M.p2.empty));U=H}if(!k.validEnd){let Ot=k.fillBefore(M.HY.empty,!0);Tt.replace(U,U,new M.p2(Ot,0,0))}for(let Ot=V.length-1;Ot>=0;Ot--)Tt.step(V[Ot])}(this,O,x,k),this}}},43594:(Vt,yt,c)=>{c.d(yt,{EH:()=>Ye,p:()=>pn,tk:()=>Lo});var M=c(62463),l=c(77346),b=c(38480);const S=function(i){for(var n=0;;n++)if(!(i=i.previousSibling))return n},g=function(i){let n=i.assignedSlot||i.parentNode;return n&&11==n.nodeType?n.host:n};let it=null;const N=function(i,n,r){let d=it||(it=document.createRange());return d.setEnd(i,null==r?i.nodeValue.length:r),d.setStart(i,n||0),d},q=function(i,n,r,d){return r&&(ft(i,n,r,d,-1)||ft(i,n,r,d,1))},et=/^(img|br|input|textarea|hr)$/i;function ft(i,n,r,d,_){for(;;){if(i==r&&n==d)return!0;if(n==(_<0?0:ut(i))){let t=i.parentNode;if(!t||1!=t.nodeType||vt(i)||et.test(i.nodeName)||"false"==i.contentEditable)return!1;n=S(i)+(_<0?0:1),i=t}else{if(1!=i.nodeType)return!1;if("false"==(i=i.childNodes[n+(_<0?-1:0)]).contentEditable)return!1;n=_<0?ut(i):0}}}function ut(i){return 3==i.nodeType?i.nodeValue.length:i.childNodes.length}function vt(i){let n;for(let r=i;r&&!(n=r.pmViewDesc);r=r.parentNode);return n&&n.node&&n.node.isBlock&&(n.dom==i||n.contentDOM==i)}const Ct=function(i){return i.focusNode&&q(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)};function At(i,n){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=i,r.key=r.code=n,r}const St="undefined"!=typeof navigator?navigator:null,Pt="undefined"!=typeof document?document:null,ht=St&&St.userAgent||"",tt=/Edge\/(\d+)/.exec(ht),W=/MSIE \d/.exec(ht),mt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ht),j=!!(W||mt||tt),Dt=W?document.documentMode:mt?+mt[1]:tt?+tt[1]:0,It=!j&&/gecko\/(\d+)/i.test(ht);It&&/Firefox\/(\d+)/.exec(ht);const bt=!j&&/Chrome\/(\d+)/.exec(ht),Bt=!!bt,Ht=bt?+bt[1]:0,Jt=!j&&!!St&&/Apple Computer/.test(St.vendor),pt=Jt&&(/Mobile\/\w+/.test(ht)||!!St&&St.maxTouchPoints>2),B=pt||!!St&&/Mac/.test(St.platform),rt=/Android \d/.test(ht),dt=!!Pt&&"webkitFontSmoothing"in Pt.documentElement.style,st=dt?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function J(i){return{left:0,right:i.documentElement.clientWidth,top:0,bottom:i.documentElement.clientHeight}}function Q(i,n){return"number"==typeof i?i:i[n]}function ot(i){let n=i.getBoundingClientRect();return{left:n.left,right:n.left+i.clientWidth*(n.width/i.offsetWidth||1),top:n.top,bottom:n.top+i.clientHeight*(n.height/i.offsetHeight||1)}}function wt(i,n,r){let d=i.someProp("scrollThreshold")||0,_=i.someProp("scrollMargin")||5,t=i.dom.ownerDocument;for(let e=r||i.dom;e;e=g(e)){if(1!=e.nodeType)continue;let o=e,s=o==t.body,p=s?J(t):ot(o),m=0,y=0;if(n.top<p.top+Q(d,"top")?y=-(p.top-n.top+Q(_,"top")):n.bottom>p.bottom-Q(d,"bottom")&&(y=n.bottom-p.bottom+Q(_,"bottom")),n.left<p.left+Q(d,"left")?m=-(p.left-n.left+Q(_,"left")):n.right>p.right-Q(d,"right")&&(m=n.right-p.right+Q(_,"right")),m||y)if(s)t.defaultView.scrollBy(m,y);else{let D=o.scrollLeft,I=o.scrollTop;y&&(o.scrollTop+=y),m&&(o.scrollLeft+=m);let Z=o.scrollLeft-D,X=o.scrollTop-I;n={left:n.left-Z,top:n.top-X,right:n.right-Z,bottom:n.bottom-X}}if(s)break}}function jt(i){let n=[],r=i.ownerDocument;for(let d=i;d&&(n.push({dom:d,top:d.scrollTop,left:d.scrollLeft}),i!=r);d=g(d));return n}function Wt(i,n){for(let r=0;r<i.length;r++){let{dom:d,top:_,left:t}=i[r];d.scrollTop!=_+n&&(d.scrollTop=_+n),d.scrollLeft!=t&&(d.scrollLeft=t)}}let pe=null;function Ae(i,n){let r,_,d=2e8,t=0,e=n.top,o=n.top;for(let s=i.firstChild,p=0;s;s=s.nextSibling,p++){let m;if(1==s.nodeType)m=s.getClientRects();else{if(3!=s.nodeType)continue;m=N(s).getClientRects()}for(let y=0;y<m.length;y++){let D=m[y];if(D.top<=e&&D.bottom>=o){e=Math.max(D.bottom,e),o=Math.min(D.top,o);let I=D.left>n.left?D.left-n.left:D.right<n.left?n.left-D.right:0;if(I<d){r=s,d=I,_=I&&3==r.nodeType?{left:D.right<n.left?D.right:D.left,top:n.top}:n,1==s.nodeType&&I&&(t=p+(n.left>=(D.left+D.right)/2?1:0));continue}}!r&&(n.left>=D.right&&n.top>=D.top||n.left>=D.left&&n.top>=D.bottom)&&(t=p+1)}}return r&&3==r.nodeType?function(i,n){let r=i.nodeValue.length,d=document.createRange();for(let _=0;_<r;_++){d.setEnd(i,_+1),d.setStart(i,_);let t=Ie(d,1);if(t.top!=t.bottom&&Je(n,t))return{node:i,offset:_+(n.left>=(t.left+t.right)/2?1:0)}}return{node:i,offset:0}}(r,_):!r||d&&1==r.nodeType?{node:i,offset:t}:Ae(r,_)}function Je(i,n){return i.left>=n.left-1&&i.left<=n.right+1&&i.top>=n.top-1&&i.top<=n.bottom+1}function Pe(i,n,r){let d=i.childNodes.length;if(d&&r.top<r.bottom)for(let _=Math.max(0,Math.min(d-1,Math.floor(d*(n.top-r.top)/(r.bottom-r.top))-2)),t=_;;){let e=i.childNodes[t];if(1==e.nodeType){let o=e.getClientRects();for(let s=0;s<o.length;s++){let p=o[s];if(Je(n,p))return Pe(e,n,p)}}if((t=(t+1)%d)==_)break}return i}function Me(i,n){let d,r=i.dom.ownerDocument,_=0;if(r.caretPositionFromPoint)try{let s=r.caretPositionFromPoint(n.left,n.top);s&&({offsetNode:d,offset:_}=s)}catch(s){}if(!d&&r.caretRangeFromPoint){let s=r.caretRangeFromPoint(n.left,n.top);s&&({startContainer:d,startOffset:_}=s)}let e,t=(i.root.elementFromPoint?i.root:r).elementFromPoint(n.left,n.top);if(!t||!i.dom.contains(1!=t.nodeType?t.parentNode:t)){let s=i.dom.getBoundingClientRect();if(!Je(n,s)||(t=Pe(i.dom,n,s),!t))return null}if(Jt)for(let s=t;d&&s;s=g(s))s.draggable&&(d=void 0);if(t=function(i,n){let r=i.parentNode;return r&&/^li$/i.test(r.nodeName)&&n.left<i.getBoundingClientRect().left?r:i}(t,n),d){if(It&&1==d.nodeType&&(_=Math.min(_,d.childNodes.length),_<d.childNodes.length)){let p,s=d.childNodes[_];"IMG"==s.nodeName&&(p=s.getBoundingClientRect()).right<=n.left&&p.bottom>n.top&&_++}d==i.dom&&_==d.childNodes.length-1&&1==d.lastChild.nodeType&&n.top>d.lastChild.getBoundingClientRect().bottom?e=i.state.doc.content.size:(0==_||1!=d.nodeType||"BR"!=d.childNodes[_-1].nodeName)&&(e=function(i,n,r,d){let _=-1;for(let t=n;t!=i.dom;){let e=i.docView.nearestDesc(t,!0);if(!e)return null;if(1==e.dom.nodeType&&(e.node.isBlock&&e.parent||!e.contentDOM)){let o=e.dom.getBoundingClientRect();if(e.node.isBlock&&e.parent&&(o.left>d.left||o.top>d.top?_=e.posBefore:(o.right<d.left||o.bottom<d.top)&&(_=e.posAfter)),!e.contentDOM&&_<0)return(e.node.isBlock?d.top<(o.top+o.bottom)/2:d.left<(o.left+o.right)/2)?e.posBefore:e.posAfter}t=e.dom.parentNode}return _>-1?_:i.docView.posFromDOM(n,r,-1)}(i,d,_,n))}null==e&&(e=function(i,n,r){let{node:d,offset:_}=Ae(n,r),t=-1;if(1==d.nodeType&&!d.firstChild){let e=d.getBoundingClientRect();t=e.left!=e.right&&r.left>(e.left+e.right)/2?1:-1}return i.docView.posFromDOM(d,_,t)}(i,t,n));let o=i.docView.nearestDesc(t,!0);return{pos:e,inside:o?o.posAtStart-o.border:-1}}function Ie(i,n){let r=i.getClientRects();return r.length?r[n<0?0:r.length-1]:i.getBoundingClientRect()}const Ue=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Ee(i,n,r){let{node:d,offset:_,atom:t}=i.docView.domFromPos(n,r<0?-1:1),e=dt||It;if(3==d.nodeType){if(!e||!Ue.test(d.nodeValue)&&(r<0?_:_!=d.nodeValue.length)){let s=_,p=_,m=r<0?1:-1;return r<0&&!_?(p++,m=-1):r>=0&&_==d.nodeValue.length?(s--,m=1):r<0?s--:p++,we(Ie(N(d,s,p),1),m<0)}{let s=Ie(N(d,_,_),r);if(It&&_&&/\s/.test(d.nodeValue[_-1])&&_<d.nodeValue.length){let p=Ie(N(d,_-1,_-1),-1);if(p.top==s.top){let m=Ie(N(d,_,_+1),-1);if(m.top!=s.top)return we(m,m.left<p.left)}}return s}}if(!i.state.doc.resolve(n-(t||0)).parent.inlineContent){if(null==t&&_&&(r<0||_==ut(d))){let s=d.childNodes[_-1];if(1==s.nodeType)return Ve(s.getBoundingClientRect(),!1)}if(null==t&&_<ut(d)){let s=d.childNodes[_];if(1==s.nodeType)return Ve(s.getBoundingClientRect(),!0)}return Ve(d.getBoundingClientRect(),r>=0)}if(null==t&&_&&(r<0||_==ut(d))){let s=d.childNodes[_-1],p=3==s.nodeType?N(s,ut(s)-(e?0:1)):1!=s.nodeType||"BR"==s.nodeName&&s.nextSibling?null:s;if(p)return we(Ie(p,1),!1)}if(null==t&&_<ut(d)){let s=d.childNodes[_];for(;s.pmViewDesc&&s.pmViewDesc.ignoreForCoords;)s=s.nextSibling;let p=s?3==s.nodeType?N(s,0,e?0:1):1==s.nodeType?s:null:null;if(p)return we(Ie(p,-1),!0)}return we(Ie(3==d.nodeType?N(d):d,-r),r>=0)}function we(i,n){if(0==i.width)return i;let r=n?i.left:i.right;return{top:i.top,bottom:i.bottom,left:r,right:r}}function Ve(i,n){if(0==i.height)return i;let r=n?i.top:i.bottom;return{top:r,bottom:r,left:i.left,right:i.right}}function ze(i,n,r){let d=i.state,_=i.root.activeElement;d!=n&&i.updateState(n),_!=i.dom&&i.focus();try{return r()}finally{d!=n&&i.updateState(d),_!=i.dom&&_&&_.focus()}}const Ne=/[\u0590-\u08ac]/;let Ce=null,ge=null,ye=!1;class V{constructor(n,r,d,_){this.parent=n,this.children=r,this.dom=d,this.contentDOM=_,this.dirty=0,d.pmViewDesc=this}matchesWidget(n){return!1}matchesMark(n){return!1}matchesNode(n,r,d){return!1}matchesHack(n){return!1}parseRule(){return null}stopEvent(n){return!1}get size(){let n=0;for(let r=0;r<this.children.length;r++)n+=this.children[r].size;return n}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let n=0;n<this.children.length;n++)this.children[n].destroy()}posBeforeChild(n){for(let r=0,d=this.posAtStart;;r++){let _=this.children[r];if(_==n)return d;d+=_.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(n,r,d){if(this.contentDOM&&this.contentDOM.contains(1==n.nodeType?n:n.parentNode)){if(d<0){let t,e;if(n==this.contentDOM)t=n.childNodes[r-1];else{for(;n.parentNode!=this.contentDOM;)n=n.parentNode;t=n.previousSibling}for(;t&&(!(e=t.pmViewDesc)||e.parent!=this);)t=t.previousSibling;return t?this.posBeforeChild(e)+e.size:this.posAtStart}{let t,e;if(n==this.contentDOM)t=n.childNodes[r];else{for(;n.parentNode!=this.contentDOM;)n=n.parentNode;t=n.nextSibling}for(;t&&(!(e=t.pmViewDesc)||e.parent!=this);)t=t.nextSibling;return t?this.posBeforeChild(e):this.posAtEnd}}let _;if(n==this.dom&&this.contentDOM)_=r>S(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))_=2&n.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==r)for(let t=n;;t=t.parentNode){if(t==this.dom){_=!1;break}if(t.previousSibling)break}if(null==_&&r==n.childNodes.length)for(let t=n;;t=t.parentNode){if(t==this.dom){_=!0;break}if(t.nextSibling)break}}return(null==_?d>0:_)?this.posAtEnd:this.posAtStart}nearestDesc(n,r=!1){for(let d=!0,_=n;_;_=_.parentNode){let e,t=this.getDesc(_);if(t&&(!r||t.node)){if(!d||!(e=t.nodeDOM)||(1==e.nodeType?e.contains(1==n.nodeType?n:n.parentNode):e==n))return t;d=!1}}}getDesc(n){let r=n.pmViewDesc;for(let d=r;d;d=d.parent)if(d==this)return r}posFromDOM(n,r,d){for(let _=n;_;_=_.parentNode){let t=this.getDesc(_);if(t)return t.localPosFromDOM(n,r,d)}return-1}descAt(n){for(let r=0,d=0;r<this.children.length;r++){let _=this.children[r],t=d+_.size;if(d==n&&t!=d){for(;!_.border&&_.children.length;)_=_.children[0];return _}if(n<t)return _.descAt(n-d-_.border);d=t}}domFromPos(n,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:n+1};let t,d=0,_=0;for(let t=0;d<this.children.length;d++){let e=this.children[d],o=t+e.size;if(o>n||e instanceof E){_=n-t;break}t=o}if(_)return this.children[d].domFromPos(_-this.children[d].border,r);for(;d&&!(t=this.children[d-1]).size&&t instanceof U&&t.side>=0;d--);if(r<=0){let t,e=!0;for(;t=d?this.children[d-1]:null,t&&t.dom.parentNode!=this.contentDOM;d--,e=!1);return t&&r&&e&&!t.border&&!t.domAtom?t.domFromPos(t.size,r):{node:this.contentDOM,offset:t?S(t.dom)+1:0}}{let t,e=!0;for(;t=d<this.children.length?this.children[d]:null,t&&t.dom.parentNode!=this.contentDOM;d++,e=!1);return t&&e&&!t.border&&!t.domAtom?t.domFromPos(0,r):{node:this.contentDOM,offset:t?S(t.dom):this.contentDOM.childNodes.length}}}parseRange(n,r,d=0){if(0==this.children.length)return{node:this.contentDOM,from:n,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let _=-1,t=-1;for(let e=d,o=0;;o++){let s=this.children[o],p=e+s.size;if(-1==_&&n<=p){let m=e+s.border;if(n>=m&&r<=p-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(n,r,m);n=e;for(let y=o;y>0;y--){let D=this.children[y-1];if(D.size&&D.dom.parentNode==this.contentDOM&&!D.emptyChildAt(1)){_=S(D.dom)+1;break}n-=D.size}-1==_&&(_=0)}if(_>-1&&(p>r||o==this.children.length-1)){r=p;for(let m=o+1;m<this.children.length;m++){let y=this.children[m];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(-1)){t=S(y.dom);break}r+=y.size}-1==t&&(t=this.contentDOM.childNodes.length);break}e=p}return{node:this.contentDOM,from:n,to:r,fromOffset:_,toOffset:t}}emptyChildAt(n){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[n<0?0:this.children.length-1];return 0==r.size||r.emptyChildAt(n)}domAfterPos(n){let{node:r,offset:d}=this.domFromPos(n,0);if(1!=r.nodeType||d==r.childNodes.length)throw new RangeError("No node after pos "+n);return r.childNodes[d]}setSelection(n,r,d,_=!1){let t=Math.min(n,r),e=Math.max(n,r);for(let D=0,I=0;D<this.children.length;D++){let Z=this.children[D],X=I+Z.size;if(t>I&&e<X)return Z.setSelection(n-I-Z.border,r-I-Z.border,d,_);I=X}let o=this.domFromPos(n,n?-1:1),s=r==n?o:this.domFromPos(r,r?-1:1),p=d.getSelection(),m=!1;if((It||Jt)&&n==r){let{node:D,offset:I}=o;if(3==D.nodeType){if(m=!(!I||"\n"!=D.nodeValue[I-1]),m&&I==D.nodeValue.length)for(let X,Z=D;Z;Z=Z.parentNode){if(X=Z.nextSibling){"BR"==X.nodeName&&(o=s={node:X.parentNode,offset:S(X)+1});break}let lt=Z.pmViewDesc;if(lt&&lt.node&&lt.node.isBlock)break}}else{let Z=D.childNodes[I-1];m=Z&&("BR"==Z.nodeName||"false"==Z.contentEditable)}}if(It&&p.focusNode&&p.focusNode!=s.node&&1==p.focusNode.nodeType){let D=p.focusNode.childNodes[p.focusOffset];D&&"false"==D.contentEditable&&(_=!0)}if(!(_||m&&Jt)&&q(o.node,o.offset,p.anchorNode,p.anchorOffset)&&q(s.node,s.offset,p.focusNode,p.focusOffset))return;let y=!1;if((p.extend||n==r)&&!m){p.collapse(o.node,o.offset);try{n!=r&&p.extend(s.node,s.offset),y=!0}catch(D){}}if(!y){if(n>r){let I=o;o=s,s=I}let D=document.createRange();D.setEnd(s.node,s.offset),D.setStart(o.node,o.offset),p.removeAllRanges(),p.addRange(D)}}ignoreMutation(n){return!this.contentDOM&&"selection"!=n.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(n,r){for(let d=0,_=0;_<this.children.length;_++){let t=this.children[_],e=d+t.size;if(d==e?n<=e&&r>=d:n<e&&r>d){let o=d+t.border,s=e-t.border;if(n>=o&&r<=s)return this.dirty=n==d||r==e?2:1,void(n!=o||r!=s||!t.contentLost&&t.dom.parentNode==this.contentDOM?t.markDirty(n-o,r-o):t.dirty=3);t.dirty=t.dom!=t.contentDOM||t.dom.parentNode!=this.contentDOM||t.children.length?3:2}d=e}this.dirty=2}markParentsDirty(){let n=1;for(let r=this.parent;r;r=r.parent,n++){let d=1==n?2:1;r.dirty<d&&(r.dirty=d)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class U extends V{constructor(n,r,d,_){let t,e=r.type.toDOM;if("function"==typeof e&&(e=e(d,()=>t?t.parent?t.parent.posBeforeChild(t):void 0:_)),!r.type.spec.raw){if(1!=e.nodeType){let o=document.createElement("span");o.appendChild(e),e=o}e.contentEditable="false",e.classList.add("ProseMirror-widget")}super(n,[],e,null),this.widget=r,this.widget=r,t=this}matchesWidget(n){return 0==this.dirty&&n.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(n){let r=this.widget.spec.stopEvent;return!!r&&r(n)}ignoreMutation(n){return"selection"!=n.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Ot extends V{constructor(n,r,d,_){super(n,[],r,null),this.textDOM=d,this.text=_}get size(){return this.text.length}localPosFromDOM(n,r){return n!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(n){return{node:this.textDOM,offset:n}}ignoreMutation(n){return"characterData"===n.type&&n.target.nodeValue==n.oldValue}}class Rt extends V{constructor(n,r,d,_){super(n,[],d,_),this.mark=r}static create(n,r,d,_){let t=_.nodeViews[r.type.name],e=t&&t(r,_,d);return(!e||!e.dom)&&(e=l.PW.renderSpec(document,r.type.spec.toDOM(r,d))),new Rt(n,r,e.dom,e.contentDOM||e.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(n){return 3!=this.dirty&&this.mark.eq(n)}markDirty(n,r){if(super.markDirty(n,r),0!=this.dirty){let d=this.parent;for(;!d.node;)d=d.parent;d.dirty<this.dirty&&(d.dirty=this.dirty),this.dirty=0}}slice(n,r,d){let _=Rt.create(this.parent,this.mark,!0,d),t=this.children,e=this.size;r<e&&(t=ne(t,r,e,d)),n>0&&(t=ne(t,0,n,d));for(let o=0;o<t.length;o++)t[o].parent=_;return _.children=t,_}}class H extends V{constructor(n,r,d,_,t,e,o,s,p){super(n,[],t,e),this.node=r,this.outerDeco=d,this.innerDeco=_,this.nodeDOM=o,e&&this.updateChildren(s,p)}static create(n,r,d,_,t,e){let s,o=t.nodeViews[r.type.name],p=o&&o(r,t,()=>s?s.parent?s.parent.posBeforeChild(s):void 0:e,d,_),m=p&&p.dom,y=p&&p.contentDOM;if(r.isText)if(m){if(3!=m.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else m=document.createTextNode(r.text);else m||({dom:m,contentDOM:y}=l.PW.renderSpec(document,r.type.spec.toDOM(r)));!y&&!r.isText&&"BR"!=m.nodeName&&(m.hasAttribute("contenteditable")||(m.contentEditable="false"),r.type.spec.draggable&&(m.draggable=!0));let D=m;return m=Re(m,d,r),p?s=new P(n,r,d,_,m,y||null,D,p,t,e+1):r.isText?new u(n,r,d,_,m,D,t):new H(n,r,d,_,m,y||null,D,t,e+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let n={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(n.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let r=this.children.length-1;r>=0;r--){let d=this.children[r];if(this.dom.contains(d.dom.parentNode)){n.contentElement=d.dom.parentNode;break}}n.contentElement||(n.getContent=()=>l.HY.empty)}else n.contentElement=this.contentDOM;else n.getContent=()=>this.node.content;return n}matchesNode(n,r,d){return 0==this.dirty&&n.eq(this.node)&&$e(r,this.outerDeco)&&d.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(n,r){let d=this.node.inlineContent,_=r,t=n.composing?this.localCompositionInfo(n,r):null,e=t&&t.pos>-1?t:null,o=t&&t.pos<0,s=new $(this,e&&e.node,n);(function(i,n,r,d){let _=n.locals(i),t=0;if(0==_.length){for(let p=0;p<i.childCount;p++){let m=i.child(p);d(m,_,n.forChild(t,m),p),t+=m.nodeSize}return}let e=0,o=[],s=null;for(let p=0;;){if(e<_.length&&_[e].to==t){let X,Z=_[e++];for(;e<_.length&&_[e].to==t;)(X||(X=[Z])).push(_[e++]);if(X){X.sort(_t);for(let lt=0;lt<X.length;lt++)r(X[lt],p,!!s)}else r(Z,p,!!s)}let m,y;if(s)y=-1,m=s,s=null;else{if(!(p<i.childCount))break;y=p,m=i.child(p++)}for(let Z=0;Z<o.length;Z++)o[Z].to<=t&&o.splice(Z--,1);for(;e<_.length&&_[e].from<=t&&_[e].to>t;)o.push(_[e++]);let D=t+m.nodeSize;if(m.isText){let Z=D;e<_.length&&_[e].from<Z&&(Z=_[e].from);for(let X=0;X<o.length;X++)o[X].to<Z&&(Z=o[X].to);Z<D&&(s=m.cut(Z-t),m=m.cut(0,Z-t),D=Z,y=-1)}d(m,m.isInline&&!m.isLeaf?o.filter(Z=>!Z.inline):o.slice(),n.forChild(t,m),y),t=D}})(this.node,this.innerDeco,(p,m,y)=>{p.spec.marks?s.syncToMarks(p.spec.marks,d,n):p.type.side>=0&&!y&&s.syncToMarks(m==this.node.childCount?l.vc.none:this.node.child(m).marks,d,n),s.placeWidget(p,n,_)},(p,m,y,D)=>{let I;s.syncToMarks(p.marks,d,n),s.findNodeMatch(p,m,y,D)||o&&n.state.selection.from>_&&n.state.selection.to<_+p.nodeSize&&(I=s.findIndexWithChild(t.node))>-1&&s.updateNodeAt(p,m,y,I,n)||s.updateNextNode(p,m,y,n,D)||s.addNode(p,m,y,n,_),_+=p.nodeSize}),s.syncToMarks([],d,n),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||2==this.dirty)&&(e&&this.protectLocalComposition(n,e),w(this.contentDOM,this.children,n),pt&&function(i){if("UL"==i.nodeName||"OL"==i.nodeName){let n=i.style.cssText;i.style.cssText=n+"; list-style: square !important",window.getComputedStyle(i),i.style.cssText=n}}(this.dom))}localCompositionInfo(n,r){let{from:d,to:_}=n.state.selection;if(!(n.state.selection instanceof M.Bs)||d<r||_>r+this.node.content.size)return null;let t=n.domSelectionRange(),e=function(i,n){for(;;){if(3==i.nodeType)return i;if(1==i.nodeType&&n>0){if(i.childNodes.length>n&&3==i.childNodes[n].nodeType)return i.childNodes[n];n=ut(i=i.childNodes[n-1])}else{if(!(1==i.nodeType&&n<i.childNodes.length))return null;i=i.childNodes[n],n=0}}}(t.focusNode,t.focusOffset);if(!e||!this.dom.contains(e.parentNode))return null;if(this.node.inlineContent){let o=e.nodeValue,s=function(i,n,r,d){for(let _=0,t=0;_<i.childCount&&t<=d;){let e=i.child(_++),o=t;if(t+=e.nodeSize,!e.isText)continue;let s=e.text;for(;_<i.childCount;){let p=i.child(_++);if(t+=p.nodeSize,!p.isText)break;s+=p.text}if(t>=r){let p=o<d?s.lastIndexOf(n,d-o-1):-1;if(p>=0&&p+n.length+o>=r)return o+p;if(r==d&&s.length>=d+n.length-o&&s.slice(d-o,d-o+n.length)==n)return d}}return-1}(this.node.content,o,d-r,_-r);return s<0?null:{node:e,pos:s,text:o}}return{node:e,pos:-1,text:""}}protectLocalComposition(n,{node:r,pos:d,text:_}){if(this.getDesc(r))return;let t=r;for(;t.parentNode!=this.contentDOM;t=t.parentNode){for(;t.previousSibling;)t.parentNode.removeChild(t.previousSibling);for(;t.nextSibling;)t.parentNode.removeChild(t.nextSibling);t.pmViewDesc&&(t.pmViewDesc=void 0)}let e=new Ot(this,t,r,_);n.input.compositionNodes.push(e),this.children=ne(this.children,d,d+_.length,n,e)}update(n,r,d,_){return!(3==this.dirty||!n.sameMarkup(this.node)||(this.updateInner(n,r,d,_),0))}updateInner(n,r,d,_){this.updateOuterDeco(r),this.node=n,this.innerDeco=d,this.contentDOM&&this.updateChildren(_,this.posAtStart),this.dirty=0}updateOuterDeco(n){if($e(n,this.outerDeco))return;let r=1!=this.nodeDOM.nodeType,d=this.dom;this.dom=te(this.dom,this.nodeDOM,Lt(this.outerDeco,this.node,r),Lt(n,this.node,r)),this.dom!=d&&(d.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=n}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function a(i,n,r,d,_){return Re(d,n,i),new H(void 0,i,n,r,d,d,d,_,0)}class u extends H{constructor(n,r,d,_,t,e,o){super(n,r,d,_,t,null,e,o,0)}parseRule(){let n=this.nodeDOM.parentNode;for(;n&&n!=this.dom&&!n.pmIsDeco;)n=n.parentNode;return{skip:n||!0}}update(n,r,d,_){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!n.sameMarkup(this.node)||(this.updateOuterDeco(r),(0!=this.dirty||n.text!=this.node.text)&&n.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=n.text,_.trackWrites==this.nodeDOM&&(_.trackWrites=null)),this.node=n,this.dirty=0,0))}inParent(){let n=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==n)return!0;return!1}domFromPos(n){return{node:this.nodeDOM,offset:n}}localPosFromDOM(n,r,d){return n==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(n,r,d)}ignoreMutation(n){return"characterData"!=n.type&&"selection"!=n.type}slice(n,r,d){let _=this.node.cut(n,r),t=document.createTextNode(_.text);return new u(this.parent,_,this.outerDeco,this.innerDeco,t,t,d)}markDirty(n,r){super.markDirty(n,r),this.dom!=this.nodeDOM&&(0==n||r==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}}class E extends V{parseRule(){return{ignore:!0}}matchesHack(n){return 0==this.dirty&&this.dom.nodeName==n}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class P extends H{constructor(n,r,d,_,t,e,o,s,p,m){super(n,r,d,_,t,e,o,p,m),this.spec=s}update(n,r,d,_){if(3==this.dirty)return!1;if(this.spec.update){let t=this.spec.update(n,r,d);return t&&this.updateInner(n,r,d,_),t}return!(!this.contentDOM&&!n.isLeaf)&&super.update(n,r,d,_)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(n,r,d,_){this.spec.setSelection?this.spec.setSelection(n,r,d):super.setSelection(n,r,d,_)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(n){return!!this.spec.stopEvent&&this.spec.stopEvent(n)}ignoreMutation(n){return this.spec.ignoreMutation?this.spec.ignoreMutation(n):super.ignoreMutation(n)}}function w(i,n,r){let d=i.firstChild,_=!1;for(let t=0;t<n.length;t++){let e=n[t],o=e.dom;if(o.parentNode==i){for(;o!=d;)d=Y(d),_=!0;d=d.nextSibling}else _=!0,i.insertBefore(o,d);if(e instanceof Rt){let s=d?d.previousSibling:i.lastChild;w(e.contentDOM,e.children,r),d=s?s.nextSibling:i.firstChild}}for(;d;)d=Y(d),_=!0;_&&r.trackWrites==i&&(r.trackWrites=null)}const F=function(i){i&&(this.nodeName=i)};F.prototype=Object.create(null);const at=[new F];function Lt(i,n,r){if(0==i.length)return at;let d=r?at[0]:new F,_=[d];for(let t=0;t<i.length;t++){let e=i[t].type.attrs;if(e){e.nodeName&&_.push(d=new F(e.nodeName));for(let o in e){let s=e[o];null!=s&&(r&&1==_.length&&_.push(d=new F(n.isInline?"span":"div")),"class"==o?d.class=(d.class?d.class+" ":"")+s:"style"==o?d.style=(d.style?d.style+";":"")+s:"nodeName"!=o&&(d[o]=s))}}}return _}function te(i,n,r,d){if(r==at&&d==at)return n;let _=n;for(let t=0;t<d.length;t++){let e=d[t],o=r[t];if(t){let s;o&&o.nodeName==e.nodeName&&_!=i&&(s=_.parentNode)&&s.nodeName.toLowerCase()==e.nodeName||(s=document.createElement(e.nodeName),s.pmIsDeco=!0,s.appendChild(_),o=at[0]),_=s}ee(_,o||at[0],e)}return _}function ee(i,n,r){for(let d in n)"class"!=d&&"style"!=d&&"nodeName"!=d&&!(d in r)&&i.removeAttribute(d);for(let d in r)"class"!=d&&"style"!=d&&"nodeName"!=d&&r[d]!=n[d]&&i.setAttribute(d,r[d]);if(n.class!=r.class){let d=n.class?n.class.split(" ").filter(Boolean):[],_=r.class?r.class.split(" ").filter(Boolean):[];for(let t=0;t<d.length;t++)-1==_.indexOf(d[t])&&i.classList.remove(d[t]);for(let t=0;t<_.length;t++)-1==d.indexOf(_[t])&&i.classList.add(_[t]);0==i.classList.length&&i.removeAttribute("class")}if(n.style!=r.style){if(n.style){let _,d=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;_=d.exec(n.style);)i.style.removeProperty(_[1])}r.style&&(i.style.cssText+=r.style)}}function Re(i,n,r){return te(i,i,at,Lt(n,r,1!=i.nodeType))}function $e(i,n){if(i.length!=n.length)return!1;for(let r=0;r<i.length;r++)if(!i[r].type.eq(n[r].type))return!1;return!0}function Y(i){let n=i.nextSibling;return i.parentNode.removeChild(i),n}class ${constructor(n,r,d){this.lock=r,this.view=d,this.index=0,this.stack=[],this.changed=!1,this.top=n,this.preMatch=function(i,n){let r=n,d=r.children.length,_=i.childCount,t=new Map,e=[];t:for(;_>0;){let o;for(;;)if(d){let p=r.children[d-1];if(!(p instanceof Rt)){o=p,d--;break}r=p,d=p.children.length}else{if(r==n)break t;d=r.parent.children.indexOf(r),r=r.parent}let s=o.node;if(s){if(s!=i.child(_-1))break;--_,t.set(o,_),e.push(o)}}return{index:_,matched:t,matches:e.reverse()}}(n.node.content,n)}destroyBetween(n,r){if(n!=r){for(let d=n;d<r;d++)this.top.children[d].destroy();this.top.children.splice(n,r-n),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(n,r,d){let _=0,t=this.stack.length>>1,e=Math.min(t,n.length);for(;_<e&&(_==t-1?this.top:this.stack[_+1<<1]).matchesMark(n[_])&&!1!==n[_].type.spec.spanning;)_++;for(;_<t;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),t--;for(;t<n.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let s=this.index;s<Math.min(this.index+3,this.top.children.length);s++){let p=this.top.children[s];if(p.matchesMark(n[t])&&!this.isLocked(p.dom)){o=s;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let s=Rt.create(this.top,n[t],r,d);this.top.children.splice(this.index,0,s),this.top=s,this.changed=!0}this.index=0,t++}}findNodeMatch(n,r,d,_){let e,t=-1;if(_>=this.preMatch.index&&(e=this.preMatch.matches[_-this.preMatch.index]).parent==this.top&&e.matchesNode(n,r,d))t=this.top.children.indexOf(e,this.index);else for(let o=this.index,s=Math.min(this.top.children.length,o+5);o<s;o++){let p=this.top.children[o];if(p.matchesNode(n,r,d)&&!this.preMatch.matched.has(p)){t=o;break}}return!(t<0||(this.destroyBetween(this.index,t),this.index++,0))}updateNodeAt(n,r,d,_,t){let e=this.top.children[_];return 3==e.dirty&&e.dom==e.contentDOM&&(e.dirty=2),!!e.update(n,r,d,t)&&(this.destroyBetween(this.index,_),this.index++,!0)}findIndexWithChild(n){for(;;){let r=n.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let d=n.pmViewDesc;if(d)for(let _=this.index;_<this.top.children.length;_++)if(this.top.children[_]==d)return _;return-1}n=r}}updateNextNode(n,r,d,_,t){for(let e=this.index;e<this.top.children.length;e++){let o=this.top.children[e];if(o instanceof H){let s=this.preMatch.matched.get(o);if(null!=s&&s!=t)return!1;let p=o.dom;if((!this.isLocked(p)||n.isText&&o.node&&o.node.isText&&o.nodeDOM.nodeValue==n.text&&3!=o.dirty&&$e(r,o.outerDeco))&&o.update(n,r,d,_))return this.destroyBetween(this.index,e),o.dom!=p&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(n,r,d,_,t){this.top.children.splice(this.index++,0,H.create(this.top,n,r,d,_,t)),this.changed=!0}placeWidget(n,r,d){let _=this.index<this.top.children.length?this.top.children[this.index]:null;if(!_||!_.matchesWidget(n)||n!=_.widget&&_.widget.type.toDOM.parentNode){let t=new U(this.top,n,r,d);this.top.children.splice(this.index++,0,t),this.changed=!0}else this.index++}addTextblockHacks(){let n=this.top.children[this.index-1],r=this.top;for(;n instanceof Rt;)r=n,n=r.children[r.children.length-1];(!n||!(n instanceof u)||/\n$/.test(n.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(n.node.text))&&((Jt||Bt)&&n&&"false"==n.dom.contentEditable&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(n,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(n))this.index++;else{let d=document.createElement(n);"IMG"==n&&(d.className="ProseMirror-separator",d.alt=""),"BR"==n&&(d.className="ProseMirror-trailingBreak");let _=new E(this.top,[],d,null);r!=this.top?r.children.push(_):r.children.splice(this.index++,0,_),this.changed=!0}}isLocked(n){return this.lock&&(n==this.lock||1==n.nodeType&&n.contains(this.lock.parentNode))}}function _t(i,n){return i.type.side-n.type.side}function ne(i,n,r,d,_){let t=[];for(let e=0,o=0;e<i.length;e++){let s=i[e],p=o,m=o+=s.size;p>=r||m<=n?t.push(s):(p<n&&t.push(s.slice(0,n-p,d)),_&&(t.push(_),_=void 0),m>r&&t.push(s.slice(r-p,s.size,d)))}return t}function fe(i,n=null){let r=i.domSelectionRange(),d=i.state.doc;if(!r.focusNode)return null;let _=i.docView.nearestDesc(r.focusNode),t=_&&0==_.size,e=i.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(e<0)return null;let s,p,o=d.resolve(e);if(Ct(r)){for(s=o;_&&!_.node;)_=_.parent;let m=_.node;if(_&&m.isAtom&&M.qv.isSelectable(m)&&_.parent&&(!m.isInline||!function(i,n,r){for(let d=0==n,_=n==ut(i);d||_;){if(i==r)return!0;let t=S(i);if(!(i=i.parentNode))return!1;d=d&&0==t,_=_&&t==ut(i)}}(r.focusNode,r.focusOffset,_.dom))){let y=_.posBefore;p=new M.qv(e==y?o:d.resolve(y))}}else{let m=i.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(m<0)return null;s=d.resolve(m)}return p||(p=nn(i,s,o,"pointer"==n||i.state.selection.head<o.pos&&!t?1:-1)),p}function re(i){return i.editable?i.hasFocus():an(i)&&document.activeElement&&document.activeElement.contains(i.dom)}function ae(i,n=!1){let r=i.state.selection;if(vn(i,r),re(i)){if(!n&&i.input.mouseDown&&i.input.mouseDown.allowDefault&&Bt){let d=i.domSelectionRange(),_=i.domObserver.currentSelection;if(d.anchorNode&&_.anchorNode&&q(d.anchorNode,d.anchorOffset,_.anchorNode,_.anchorOffset))return i.input.mouseDown.delayedSelectionSync=!0,void i.domObserver.setCurSelection()}if(i.domObserver.disconnectSelection(),i.cursorWrapper)!function(i){let n=i.domSelection(),r=document.createRange(),d=i.cursorWrapper.dom,_="IMG"==d.nodeName;_?r.setEnd(d.parentNode,S(d)+1):r.setEnd(d,0),r.collapse(!1),n.removeAllRanges(),n.addRange(r),!_&&!i.state.selection.visible&&j&&Dt<=11&&(d.disabled=!0,d.disabled=!1)}(i);else{let t,e,{anchor:d,head:_}=r;de&&!(r instanceof M.Bs)&&(r.$from.parent.inlineContent||(t=Oe(i,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(e=Oe(i,r.to))),i.docView.setSelection(d,_,i.root,n),de&&(t&&en(t),e&&en(e)),r.visible?i.dom.classList.remove("ProseMirror-hideselection"):(i.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(i){let n=i.dom.ownerDocument;n.removeEventListener("selectionchange",i.input.hideSelectionGuard);let r=i.domSelectionRange(),d=r.anchorNode,_=r.anchorOffset;n.addEventListener("selectionchange",i.input.hideSelectionGuard=()=>{(r.anchorNode!=d||r.anchorOffset!=_)&&(n.removeEventListener("selectionchange",i.input.hideSelectionGuard),setTimeout(()=>{(!re(i)||i.state.selection.visible)&&i.dom.classList.remove("ProseMirror-hideselection")},20))})}(i))}i.domObserver.setCurSelection(),i.domObserver.connectSelection()}}const de=Jt||Bt&&Ht<63;function Oe(i,n){let{node:r,offset:d}=i.docView.domFromPos(n,0),_=d<r.childNodes.length?r.childNodes[d]:null,t=d?r.childNodes[d-1]:null;if(Jt&&_&&"false"==_.contentEditable)return Le(_);if(!(_&&"false"!=_.contentEditable||t&&"false"!=t.contentEditable)){if(_)return Le(_);if(t)return Le(t)}}function Le(i){return i.contentEditable="true",Jt&&i.draggable&&(i.draggable=!1,i.wasDraggable=!0),i}function en(i){i.contentEditable="false",i.wasDraggable&&(i.draggable=!0,i.wasDraggable=null)}function vn(i,n){if(n instanceof M.qv){let r=i.docView.descAt(n.from);r!=i.lastSelectedViewDesc&&(Mn(i),r&&r.selectNode(),i.lastSelectedViewDesc=r)}else Mn(i)}function Mn(i){i.lastSelectedViewDesc&&(i.lastSelectedViewDesc.parent&&i.lastSelectedViewDesc.deselectNode(),i.lastSelectedViewDesc=void 0)}function nn(i,n,r,d){return i.someProp("createSelectionBetween",_=>_(i,n,r))||M.Bs.between(n,r,d)}function gn(i){return!(i.editable&&!i.hasFocus())&&an(i)}function an(i){let n=i.domSelectionRange();if(!n.anchorNode)return!1;try{return i.dom.contains(3==n.anchorNode.nodeType?n.anchorNode.parentNode:n.anchorNode)&&(i.editable||i.dom.contains(3==n.focusNode.nodeType?n.focusNode.parentNode:n.focusNode))}catch(r){return!1}}function cn(i,n){let{$anchor:r,$head:d}=i.selection,_=n>0?r.max(d):r.min(d),t=_.parent.inlineContent?_.depth?i.doc.resolve(n>0?_.after():_.before()):null:_;return t&&M.Y1.findFrom(t,n)}function Ze(i,n){return i.dispatch(i.state.tr.setSelection(n).scrollIntoView()),!0}function on(i,n,r){let d=i.state.selection;if(!(d instanceof M.Bs)){if(d instanceof M.qv&&d.node.isInline)return Ze(i,new M.Bs(n>0?d.$to:d.$from));{let _=cn(i.state,n);return!!_&&Ze(i,_)}}if(!d.empty||r.indexOf("s")>-1)return!1;if(i.endOfTextblock(n>0?"right":"left")){let _=cn(i.state,n);return!!(_&&_ instanceof M.qv)&&Ze(i,_)}if(!(B&&r.indexOf("m")>-1)){let e,_=d.$head,t=_.textOffset?null:n<0?_.nodeBefore:_.nodeAfter;if(!t||t.isText)return!1;let o=n<0?_.pos-t.nodeSize:_.pos;return!!(t.isAtom||(e=i.docView.descAt(o))&&!e.contentDOM)&&(M.qv.isSelectable(t)?Ze(i,new M.qv(n<0?i.state.doc.resolve(_.pos-t.nodeSize):_)):!!dt&&Ze(i,new M.Bs(i.state.doc.resolve(n<0?o:o+t.nodeSize))))}}function Xe(i){return 3==i.nodeType?i.nodeValue.length:i.childNodes.length}function qe(i){let n=i.pmViewDesc;return n&&0==n.size&&(i.nextSibling||"BR"!=i.nodeName)}function T(i){let n=i.domSelectionRange(),r=n.focusNode,d=n.focusOffset;if(!r)return;let _,t,e=!1;for(It&&1==r.nodeType&&d<Xe(r)&&qe(r.childNodes[d])&&(e=!0);;)if(d>0){if(1!=r.nodeType)break;{let o=r.childNodes[d-1];if(qe(o))_=r,t=--d;else{if(3!=o.nodeType)break;r=o,d=r.nodeValue.length}}}else{if(f(r))break;{let o=r.previousSibling;for(;o&&qe(o);)_=r.parentNode,t=S(o),o=o.previousSibling;if(o)r=o,d=Xe(r);else{if(r=r.parentNode,r==i.dom)break;d=0}}}e?h(i,r,d):_&&h(i,_,t)}function C(i){let n=i.domSelectionRange(),r=n.focusNode,d=n.focusOffset;if(!r)return;let t,e,_=Xe(r);for(;;)if(d<_){if(1!=r.nodeType)break;if(!qe(r.childNodes[d]))break;t=r,e=++d}else{if(f(r))break;{let o=r.nextSibling;for(;o&&qe(o);)t=o.parentNode,e=S(o)+1,o=o.nextSibling;if(o)r=o,d=0,_=Xe(r);else{if(r=r.parentNode,r==i.dom)break;d=_=0}}}t&&h(i,t,e)}function f(i){let n=i.pmViewDesc;return n&&n.node&&n.node.isBlock}function h(i,n,r){let d=i.domSelection();if(Ct(d)){let t=document.createRange();t.setEnd(n,r),t.setStart(n,r),d.removeAllRanges(),d.addRange(t)}else d.extend&&d.extend(n,r);i.domObserver.setCurSelection();let{state:_}=i;setTimeout(()=>{i.state==_&&ae(i)},50)}function v(i,n,r){let d=i.state.selection;if(d instanceof M.Bs&&!d.empty||r.indexOf("s")>-1||B&&r.indexOf("m")>-1)return!1;let{$from:_,$to:t}=d;if(!_.parent.inlineContent||i.endOfTextblock(n<0?"up":"down")){let e=cn(i.state,n);if(e&&e instanceof M.qv)return Ze(i,e)}if(!_.parent.inlineContent){let e=n<0?_:t,o=d instanceof M.C1?M.Y1.near(e,n):M.Y1.findFrom(e,n);return!!o&&Ze(i,o)}return!1}function A(i,n){if(!(i.state.selection instanceof M.Bs))return!0;let{$head:r,$anchor:d,empty:_}=i.state.selection;if(!r.sameParent(d))return!0;if(!_)return!1;if(i.endOfTextblock(n>0?"forward":"backward"))return!0;let t=!r.textOffset&&(n<0?r.nodeBefore:r.nodeAfter);if(t&&!t.isText){let e=i.state.tr;return n<0?e.delete(r.pos-t.nodeSize,r.pos):e.delete(r.pos,r.pos+t.nodeSize),i.dispatch(e),!0}return!1}function R(i,n,r){i.domObserver.stop(),n.contentEditable=r,i.domObserver.start()}function Et(i,n){i.someProp("transformCopied",I=>{n=I(n,i)});let r=[],{content:d,openStart:_,openEnd:t}=n;for(;_>1&&t>1&&1==d.childCount&&1==d.firstChild.childCount;){_--,t--;let I=d.firstChild;r.push(I.type.name,I.attrs!=I.type.defaultAttrs?I.attrs:null),d=I.content}let e=i.someProp("clipboardSerializer")||l.PW.fromSchema(i.state.schema),o=Se(),s=o.createElement("div");s.appendChild(e.serializeFragment(d,{document:o}));let m,p=s.firstChild,y=0;for(;p&&1==p.nodeType&&(m=Qe[p.nodeName.toLowerCase()]);){for(let I=m.length-1;I>=0;I--){let Z=o.createElement(m[I]);for(;s.firstChild;)Z.appendChild(s.firstChild);s.appendChild(Z),y++}p=s.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",`${_} ${t}${y?` -${y}`:""} ${JSON.stringify(r)}`),{dom:s,text:i.someProp("clipboardTextSerializer",I=>I(n,i))||n.content.textBetween(0,n.content.size,"\n\n")}}function xt(i,n,r,d,_){let e,o,t=_.parent.type.spec.code;if(!r&&!n)return null;let s=n&&(d||t||!r);if(s){if(i.someProp("transformPastedText",D=>{n=D(n,t||d,i)}),t)return n?new l.p2(l.HY.from(i.state.schema.text(n.replace(/\r\n?/g,"\n"))),0,0):l.p2.empty;let y=i.someProp("clipboardTextParser",D=>D(n,_,d,i));if(y)o=y;else{let D=_.marks(),{schema:I}=i.state,Z=l.PW.fromSchema(I);e=document.createElement("div"),n.split(/(?:\r\n?|\n)+/).forEach(X=>{let lt=e.appendChild(document.createElement("p"));X&&lt.appendChild(Z.serializeNode(I.text(X,D)))})}}else i.someProp("transformPastedHTML",y=>{r=y(r,i)}),e=function(i){let n=/^(\s*<meta [^>]*>)*/.exec(i);n&&(i=i.slice(n[0].length));let _,r=Se().createElement("div"),d=/<([a-z][^>\s]+)/i.exec(i);if((_=d&&Qe[d[1].toLowerCase()])&&(i=_.map(t=>"<"+t+">").join("")+i+_.map(t=>"</"+t+">").reverse().join("")),r.innerHTML=i,_)for(let t=0;t<_.length;t++)r=r.querySelector(_[t])||r;return r}(r),dt&&function(i){let n=i.querySelectorAll(Bt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<n.length;r++){let d=n[r];1==d.childNodes.length&&"\xa0"==d.textContent&&d.parentNode&&d.parentNode.replaceChild(i.ownerDocument.createTextNode(" "),d)}}(e);let p=e&&e.querySelector("[data-pm-slice]"),m=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(m&&m[3])for(let y=+m[3];y>0;y--){let D=e.firstChild;for(;D&&1!=D.nodeType;)D=D.nextSibling;if(!D)break;e=D}if(o||(o=(i.someProp("clipboardParser")||i.someProp("domParser")||l.aw.fromSchema(i.state.schema)).parseSlice(e,{preserveWhitespace:!(!s&&!m),context:_,ruleFromNode:D=>"BR"!=D.nodeName||D.nextSibling||!D.parentNode||Nt.test(D.parentNode.nodeName)?null:{ignore:!0}})),m)o=function(i,n){if(!i.size)return i;let d,r=i.content.firstChild.type.schema;try{d=JSON.parse(n)}catch(o){return i}let{content:_,openStart:t,openEnd:e}=i;for(let o=d.length-2;o>=0;o-=2){let s=r.nodes[d[o]];if(!s||s.hasRequiredAttrs())break;_=l.HY.from(s.create(d[o+1],_)),t++,e++}return new l.p2(_,t,e)}(rn(o,+m[1],+m[2]),m[4]);else if(o=l.p2.maxOpen(function(i,n){if(i.childCount<2)return i;for(let r=n.depth;r>=0;r--){let t,_=n.node(r).contentMatchAt(n.index(r)),e=[];if(i.forEach(o=>{if(!e)return;let p,s=_.findWrapping(o.type);if(!s)return e=null;if(p=e.length&&t.length&&se(s,t,o,e[e.length-1],0))e[e.length-1]=p;else{e.length&&(e[e.length-1]=ie(e[e.length-1],t.length));let m=Gt(o,s);e.push(m),_=_.matchType(m.type),t=s}}),e)return l.HY.from(e)}return i}(o.content,_),!0),o.openStart||o.openEnd){let y=0,D=0;for(let I=o.content.firstChild;y<o.openStart&&!I.type.spec.isolating;y++,I=I.firstChild);for(let I=o.content.lastChild;D<o.openEnd&&!I.type.spec.isolating;D++,I=I.lastChild);o=rn(o,y,D)}return i.someProp("transformPasted",y=>{o=y(o,i)}),o}const Nt=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Gt(i,n,r=0){for(let d=n.length-1;d>=r;d--)i=n[d].create(null,l.HY.from(i));return i}function se(i,n,r,d,_){if(_<i.length&&_<n.length&&i[_]==n[_]){let t=se(i,n,r,d.lastChild,_+1);if(t)return d.copy(d.content.replaceChild(d.childCount-1,t));if(d.contentMatchAt(d.childCount).matchType(_==i.length-1?r.type:i[_+1]))return d.copy(d.content.append(l.HY.from(Gt(r,i,_+1))))}}function ie(i,n){if(0==n)return i;let r=i.content.replaceChild(i.childCount-1,ie(i.lastChild,n-1)),d=i.contentMatchAt(i.childCount).fillBefore(l.HY.empty,!0);return i.copy(r.append(d))}function xe(i,n,r,d,_,t){let e=n<0?i.firstChild:i.lastChild,o=e.content;return _<d-1&&(o=xe(o,n,r,d,_+1,t)),_>=r&&(o=n<0?e.contentMatchAt(0).fillBefore(o,i.childCount>1||t<=_).append(o):o.append(e.contentMatchAt(e.childCount).fillBefore(l.HY.empty,!0))),i.replaceChild(n<0?0:i.childCount-1,e.copy(o))}function rn(i,n,r){return n<i.openStart&&(i=new l.p2(xe(i.content,-1,n,i.openStart,0,i.openEnd),n,i.openEnd)),r<i.openEnd&&(i=new l.p2(xe(i.content,1,r,i.openEnd,0,0),i.openStart,r)),i}const Qe={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ve=null;function Se(){return ve||(ve=document.implementation.createHTMLDocument("title"))}const ke={},Ke={},Gn={touchstart:!0,touchmove:!0};class Xn{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function tn(i,n){i.input.lastSelectionOrigin=n,i.input.lastSelectionTime=Date.now()}function On(i){i.someProp("handleDOMEvents",n=>{for(let r in n)i.input.eventHandlers[r]||i.dom.addEventListener(r,i.input.eventHandlers[r]=d=>Tn(i,d))})}function Tn(i,n){return i.someProp("handleDOMEvents",r=>{let d=r[n.type];return!!d&&(d(i,n)||n.defaultPrevented)})}function En(i,n){if(!n.bubbles)return!0;if(n.defaultPrevented)return!1;for(let r=n.target;r!=i.dom;r=r.parentNode)if(!r||11==r.nodeType||r.pmViewDesc&&r.pmViewDesc.stopEvent(n))return!1;return!0}function un(i){return{left:i.clientX,top:i.clientY}}function xn(i,n,r,d,_){if(-1==d)return!1;let t=i.state.doc.resolve(d);for(let e=t.depth+1;e>0;e--)if(i.someProp(n,o=>e>t.depth?o(i,r,t.nodeAfter,t.before(e),_,!0):o(i,r,t.node(e),t.before(e),_,!1)))return!0;return!1}function sn(i,n,r){i.focused||i.focus();let d=i.state.tr.setSelection(n);"pointer"==r&&d.setMeta("pointer",!0),i.dispatch(d)}function To(i,n,r,d){return xn(i,"handleDoubleClickOn",n,r,d)||i.someProp("handleDoubleClick",_=>_(i,n,d))}function Co(i,n,r,d){return xn(i,"handleTripleClickOn",n,r,d)||i.someProp("handleTripleClick",_=>_(i,n,d))||function(i,n,r){if(0!=r.button)return!1;let d=i.state.doc;if(-1==n)return!!d.inlineContent&&(sn(i,M.Bs.create(d,0,d.content.size),"pointer"),!0);let _=d.resolve(n);for(let t=_.depth+1;t>0;t--){let e=t>_.depth?_.nodeAfter:_.node(t),o=_.before(t);if(e.inlineContent)sn(i,M.Bs.create(d,o+1,o+1+e.content.size),"pointer");else{if(!M.qv.isSelectable(e))continue;sn(i,M.qv.create(d,o),"pointer")}return!0}}(i,r,d)}function Rn(i){return zn(i)}Ke.keydown=(i,n)=>{let r=n;if(i.input.shiftKey=16==r.keyCode||r.shiftKey,!io(i,r)&&(i.input.lastKeyCode=r.keyCode,i.input.lastKeyCodeTime=Date.now(),!rt||!Bt||13!=r.keyCode))if(229!=r.keyCode&&i.domObserver.forceFlush(),!pt||13!=r.keyCode||r.ctrlKey||r.altKey||r.metaKey)i.someProp("handleKeyDown",d=>d(i,r))||function(i,n){let r=n.keyCode,d=function(i){let n="";return i.ctrlKey&&(n+="c"),i.metaKey&&(n+="m"),i.altKey&&(n+="a"),i.shiftKey&&(n+="s"),n}(n);return 8==r||B&&72==r&&"c"==d?A(i,-1)||T(i):46==r||B&&68==r&&"c"==d?A(i,1)||C(i):13==r||27==r||(37==r||B&&66==r&&"c"==d?on(i,-1,d)||T(i):39==r||B&&70==r&&"c"==d?on(i,1,d)||C(i):38==r||B&&80==r&&"c"==d?v(i,-1,d)||T(i):40==r||B&&78==r&&"c"==d?function(i){if(!Jt||i.state.selection.$head.parentOffset>0)return!1;let{focusNode:n,focusOffset:r}=i.domSelectionRange();if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){let d=n.firstChild;R(i,d,"true"),setTimeout(()=>R(i,d,"false"),20)}return!1}(i)||v(i,1,d)||C(i):d==(B?"m":"c")&&(66==r||73==r||89==r||90==r))}(i,r)?r.preventDefault():tn(i,"key");else{let d=Date.now();i.input.lastIOSEnter=d,i.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{i.input.lastIOSEnter==d&&(i.someProp("handleKeyDown",_=>_(i,At(13,"Enter"))),i.input.lastIOSEnter=0)},200)}},Ke.keyup=(i,n)=>{16==n.keyCode&&(i.input.shiftKey=!1)},Ke.keypress=(i,n)=>{let r=n;if(io(i,r)||!r.charCode||r.ctrlKey&&!r.altKey||B&&r.metaKey)return;if(i.someProp("handleKeyPress",_=>_(i,r)))return void r.preventDefault();let d=i.state.selection;if(!(d instanceof M.Bs&&d.$from.sameParent(d.$to))){let _=String.fromCharCode(r.charCode);!/[\r\n]/.test(_)&&!i.someProp("handleTextInput",t=>t(i,d.$from.pos,d.$to.pos,_))&&i.dispatch(i.state.tr.insertText(_).scrollIntoView()),r.preventDefault()}};const Jn=B?"metaKey":"ctrlKey";ke.mousedown=(i,n)=>{let r=n;i.input.shiftKey=r.shiftKey;let d=Rn(i),_=Date.now(),t="singleClick";_-i.input.lastClick.time<500&&function(i,n){let r=n.x-i.clientX,d=n.y-i.clientY;return r*r+d*d<100}(r,i.input.lastClick)&&!r[Jn]&&("singleClick"==i.input.lastClick.type?t="doubleClick":"doubleClick"==i.input.lastClick.type&&(t="tripleClick")),i.input.lastClick={time:_,x:r.clientX,y:r.clientY,type:t};let e=i.posAtCoords(un(r));!e||("singleClick"==t?(i.input.mouseDown&&i.input.mouseDown.done(),i.input.mouseDown=new $n(i,e,r,!!d)):("doubleClick"==t?To:Co)(i,e.pos,e.inside,r)?r.preventDefault():tn(i,"pointer"))};class $n{constructor(n,r,d,_){let t,e;if(this.view=n,this.pos=r,this.event=d,this.flushed=_,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=n.state.doc,this.selectNode=!!d[Jn],this.allowDefault=d.shiftKey,r.inside>-1)t=n.state.doc.nodeAt(r.inside),e=r.inside;else{let m=n.state.doc.resolve(r.pos);t=m.parent,e=m.depth?m.before():0}const o=_?null:d.target,s=o?n.docView.nearestDesc(o,!0):null;this.target=s?s.dom:null;let{selection:p}=n.state;(0==d.button&&t.type.spec.draggable&&!1!==t.type.spec.selectable||p instanceof M.qv&&p.from<=e&&p.to>e)&&(this.mightDrag={node:t,pos:e,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!It||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),n.root.addEventListener("mouseup",this.up=this.up.bind(this)),n.root.addEventListener("mousemove",this.move=this.move.bind(this)),tn(n,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ae(this.view)),this.view.input.mouseDown=null}up(n){if(this.done(),!this.view.dom.contains(n.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(un(n))),this.updateAllowDefault(n),this.allowDefault||!r?tn(this.view,"pointer"):function(i,n,r,d,_){return xn(i,"handleClickOn",n,r,d)||i.someProp("handleClick",t=>t(i,n,d))||(_?function(i,n){if(-1==n)return!1;let d,_,r=i.state.selection;r instanceof M.qv&&(d=r.node);let t=i.state.doc.resolve(n);for(let e=t.depth+1;e>0;e--){let o=e>t.depth?t.nodeAfter:t.node(e);if(M.qv.isSelectable(o)){_=d&&r.$from.depth>0&&e>=r.$from.depth&&t.before(r.$from.depth+1)==r.$from.pos?t.before(r.$from.depth):t.before(e);break}}return null!=_&&(sn(i,M.qv.create(i.state.doc,_),"pointer"),!0)}(i,r):function(i,n){if(-1==n)return!1;let r=i.state.doc.resolve(n),d=r.nodeAfter;return!!(d&&d.isAtom&&M.qv.isSelectable(d))&&(sn(i,new M.qv(r),"pointer"),!0)}(i,r))}(this.view,r.pos,r.inside,n,this.selectNode)?n.preventDefault():0==n.button&&(this.flushed||Jt&&this.mightDrag&&!this.mightDrag.node.isAtom||Bt&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(sn(this.view,M.Y1.near(this.view.state.doc.resolve(r.pos)),"pointer"),n.preventDefault()):tn(this.view,"pointer")}move(n){this.updateAllowDefault(n),tn(this.view,"pointer"),0==n.buttons&&this.done()}updateAllowDefault(n){!this.allowDefault&&(Math.abs(this.event.x-n.clientX)>4||Math.abs(this.event.y-n.clientY)>4)&&(this.allowDefault=!0)}}function io(i,n){return!!i.composing||!!(Jt&&Math.abs(n.timeStamp-i.input.compositionEndedAt)<500)&&(i.input.compositionEndedAt=-2e8,!0)}ke.touchstart=i=>{i.input.lastTouch=Date.now(),Rn(i),tn(i,"pointer")},ke.touchmove=i=>{i.input.lastTouch=Date.now(),tn(i,"pointer")},ke.contextmenu=i=>Rn(i);const vo=rt?5e3:-1;function Zn(i,n){clearTimeout(i.input.composingTimeout),n>-1&&(i.input.composingTimeout=setTimeout(()=>zn(i),n))}function ro(i){for(i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=function(){let i=document.createEvent("Event");return i.initEvent("event",!0,!0),i.timeStamp}());i.input.compositionNodes.length>0;)i.input.compositionNodes.pop().markParentsDirty()}function zn(i,n=!1){if(!(rt&&i.domObserver.flushingSoon>=0)){if(i.domObserver.forceFlush(),ro(i),n||i.docView&&i.docView.dirty){let r=fe(i);return r&&!r.eq(i.state.selection)?i.dispatch(i.state.tr.setSelection(r)):i.updateState(i.state),!0}return!1}}Ke.compositionstart=Ke.compositionupdate=i=>{if(!i.composing){i.domObserver.flush();let{state:n}=i,r=n.selection.$from;if(n.selection.empty&&(n.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(d=>!1===d.type.spec.inclusive)))i.markCursor=i.state.storedMarks||r.marks(),zn(i,!0),i.markCursor=null;else if(zn(i),It&&n.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let d=i.domSelectionRange();for(let _=d.focusNode,t=d.focusOffset;_&&1==_.nodeType&&0!=t;){let e=t<0?_.lastChild:_.childNodes[t-1];if(!e)break;if(3==e.nodeType){i.domSelection().collapse(e,e.nodeValue.length);break}_=e,t=-1}}i.input.composing=!0}Zn(i,vo)},Ke.compositionend=(i,n)=>{i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=n.timeStamp,Zn(i,20))};const Sn=j&&Dt<15||pt&&st<604;function Ln(i,n,r,d,_){let t=xt(i,n,r,d,i.state.selection.$from);if(i.someProp("handlePaste",s=>s(i,_,t||l.p2.empty)))return!0;if(!t)return!1;let e=function(i){return 0==i.openStart&&0==i.openEnd&&1==i.content.childCount?i.content.firstChild:null}(t),o=e?i.state.tr.replaceSelectionWith(e,i.input.shiftKey):i.state.tr.replaceSelection(t);return i.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}ke.copy=Ke.cut=(i,n)=>{let r=n,d=i.state.selection,_="cut"==r.type;if(d.empty)return;let t=Sn?null:r.clipboardData,e=d.content(),{dom:o,text:s}=Et(i,e);t?(r.preventDefault(),t.clearData(),t.setData("text/html",o.innerHTML),t.setData("text/plain",s)):function(i,n){if(!i.dom.parentNode)return;let r=i.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(n),r.style.cssText="position: fixed; left: -10000px; top: 10px";let d=getSelection(),_=document.createRange();_.selectNodeContents(n),i.dom.blur(),d.removeAllRanges(),d.addRange(_),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),i.focus()},50)}(i,o),_&&i.dispatch(i.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Ke.paste=(i,n)=>{let r=n;if(i.composing&&!rt)return;let d=Sn?null:r.clipboardData;d&&Ln(i,d.getData("text/plain"),d.getData("text/html"),i.input.shiftKey,r)?r.preventDefault():function(i,n){if(!i.dom.parentNode)return;let r=i.input.shiftKey||i.state.selection.$from.parent.type.spec.code,d=i.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(d.contentEditable="true"),d.style.cssText="position: fixed; left: -10000px; top: 10px",d.focus(),setTimeout(()=>{i.focus(),d.parentNode&&d.parentNode.removeChild(d),r?Ln(i,d.value,null,i.input.shiftKey,n):Ln(i,d.textContent,d.innerHTML,i.input.shiftKey,n)},50)}(i,r)};class to{constructor(n,r){this.slice=n,this.move=r}}const Bn=B?"altKey":"ctrlKey";ke.dragstart=(i,n)=>{let r=n,d=i.input.mouseDown;if(d&&d.done(),!r.dataTransfer)return;let _=i.state.selection,t=_.empty?null:i.posAtCoords(un(r));if(!(t&&t.pos>=_.from&&t.pos<=(_ instanceof M.qv?_.to-1:_.to)))if(d&&d.mightDrag)i.dispatch(i.state.tr.setSelection(M.qv.create(i.state.doc,d.mightDrag.pos)));else if(r.target&&1==r.target.nodeType){let p=i.docView.nearestDesc(r.target,!0);p&&p.node.type.spec.draggable&&p!=i.docView&&i.dispatch(i.state.tr.setSelection(M.qv.create(i.state.doc,p.posBefore)))}let e=i.state.selection.content(),{dom:o,text:s}=Et(i,e);r.dataTransfer.clearData(),r.dataTransfer.setData(Sn?"Text":"text/html",o.innerHTML),r.dataTransfer.effectAllowed="copyMove",Sn||r.dataTransfer.setData("text/plain",s),i.dragging=new to(e,!r[Bn])},ke.dragend=i=>{let n=i.dragging;window.setTimeout(()=>{i.dragging==n&&(i.dragging=null)},50)},Ke.dragover=Ke.dragenter=(i,n)=>n.preventDefault(),Ke.drop=(i,n)=>{let r=n,d=i.dragging;if(i.dragging=null,!r.dataTransfer)return;let _=i.posAtCoords(un(r));if(!_)return;let t=i.state.doc.resolve(_.pos),e=d&&d.slice;e?i.someProp("transformPasted",Z=>{e=Z(e,i)}):e=xt(i,r.dataTransfer.getData(Sn?"Text":"text/plain"),Sn?null:r.dataTransfer.getData("text/html"),!1,t);let o=!(!d||r[Bn]);if(i.someProp("handleDrop",Z=>Z(i,r,e||l.p2.empty,o)))return void r.preventDefault();if(!e)return;r.preventDefault();let s=e?(0,b.nj)(i.state.doc,t.pos,e):t.pos;null==s&&(s=t.pos);let p=i.state.tr;o&&p.deleteSelection();let m=p.mapping.map(s),y=0==e.openStart&&0==e.openEnd&&1==e.content.childCount,D=p.doc;if(y?p.replaceRangeWith(m,m,e.content.firstChild):p.replaceRange(m,m,e),p.doc.eq(D))return;let I=p.doc.resolve(m);if(y&&M.qv.isSelectable(e.content.firstChild)&&I.nodeAfter&&I.nodeAfter.sameMarkup(e.content.firstChild))p.setSelection(new M.qv(I));else{let Z=p.mapping.map(s);p.mapping.maps[p.mapping.maps.length-1].forEach((X,lt,gt,Ut)=>Z=Ut),p.setSelection(nn(i,I,p.doc.resolve(Z)))}i.focus(),i.dispatch(p.setMeta("uiEvent","drop"))},ke.focus=i=>{i.input.lastFocus=Date.now(),i.focused||(i.domObserver.stop(),i.dom.classList.add("ProseMirror-focused"),i.domObserver.start(),i.focused=!0,setTimeout(()=>{i.docView&&i.hasFocus()&&!i.domObserver.currentSelection.eq(i.domSelectionRange())&&ae(i)},20))},ke.blur=(i,n)=>{let r=n;i.focused&&(i.domObserver.stop(),i.dom.classList.remove("ProseMirror-focused"),i.domObserver.start(),r.relatedTarget&&i.dom.contains(r.relatedTarget)&&i.domObserver.currentSelection.clear(),i.focused=!1)},ke.beforeinput=(i,n)=>{if(Bt&&rt&&"deleteContentBackward"==n.inputType){i.domObserver.flushSoon();let{domChangeCount:d}=i.input;setTimeout(()=>{if(i.input.domChangeCount!=d||(i.dom.blur(),i.focus(),i.someProp("handleKeyDown",t=>t(i,At(8,"Backspace")))))return;let{$cursor:_}=i.state.selection;_&&_.pos>0&&i.dispatch(i.state.tr.delete(_.pos-1,_.pos).scrollIntoView())},50)}};for(let i in Ke)ke[i]=Ke[i];function An(i,n){if(i==n)return!0;for(let r in i)if(i[r]!==n[r])return!1;for(let r in n)if(!(r in i))return!1;return!0}class Yn{constructor(n,r){this.toDOM=n,this.spec=r||In,this.side=this.spec.side||0}map(n,r,d,_){let{pos:t,deleted:e}=n.mapResult(r.from+_,this.side<0?-1:1);return e?null:new pn(t-d,t-d,this)}valid(){return!0}eq(n){return this==n||n instanceof Yn&&(this.spec.key&&this.spec.key==n.spec.key||this.toDOM==n.toDOM&&An(this.spec,n.spec))}destroy(n){this.spec.destroy&&this.spec.destroy(n)}}class Cn{constructor(n,r){this.attrs=n,this.spec=r||In}map(n,r,d,_){let t=n.map(r.from+_,this.spec.inclusiveStart?-1:1)-d,e=n.map(r.to+_,this.spec.inclusiveEnd?1:-1)-d;return t>=e?null:new pn(t,e,this)}valid(n,r){return r.from<r.to}eq(n){return this==n||n instanceof Cn&&An(this.attrs,n.attrs)&&An(this.spec,n.spec)}static is(n){return n.type instanceof Cn}destroy(){}}class jn{constructor(n,r){this.attrs=n,this.spec=r||In}map(n,r,d,_){let t=n.mapResult(r.from+_,1);if(t.deleted)return null;let e=n.mapResult(r.to+_,-1);return e.deleted||e.pos<=t.pos?null:new pn(t.pos-d,e.pos-d,this)}valid(n,r){let t,{index:d,offset:_}=n.content.findIndex(r.from);return _==r.from&&!(t=n.child(d)).isText&&_+t.nodeSize==r.to}eq(n){return this==n||n instanceof jn&&An(this.attrs,n.attrs)&&An(this.spec,n.spec)}destroy(){}}class pn{constructor(n,r,d){this.from=n,this.to=r,this.type=d}copy(n,r){return new pn(n,r,this.type)}eq(n,r=0){return this.type.eq(n.type)&&this.from+r==n.from&&this.to+r==n.to}map(n,r,d){return this.type.map(n,this,r,d)}static widget(n,r,d){return new pn(n,n,new Yn(r,d))}static inline(n,r,d,_){return new pn(n,r,new Cn(d,_))}static node(n,r,d,_){return new pn(n,r,new jn(d,_))}get spec(){return this.type.spec}get inline(){return this.type instanceof Cn}}const Nn=[],In={};class Ye{constructor(n,r){this.local=n.length?n:Nn,this.children=r.length?r:Nn}static create(n,r){return r.length?Vn(r,n,0,In):Ge}find(n,r,d){let _=[];return this.findInner(null==n?0:n,null==r?1e9:r,_,0,d),_}findInner(n,r,d,_,t){for(let e=0;e<this.local.length;e++){let o=this.local[e];o.from<=r&&o.to>=n&&(!t||t(o.spec))&&d.push(o.copy(o.from+_,o.to+_))}for(let e=0;e<this.children.length;e+=3)if(this.children[e]<r&&this.children[e+1]>n){let o=this.children[e]+1;this.children[e+2].findInner(n-o,r-o,d,_+o,t)}}map(n,r,d){return this==Ge||0==n.maps.length?this:this.mapInner(n,r,0,0,d||In)}mapInner(n,r,d,_,t){let e;for(let o=0;o<this.local.length;o++){let s=this.local[o].map(n,d,_);s&&s.type.valid(r,s)?(e||(e=[])).push(s):t.onRemove&&t.onRemove(this.local[o].spec)}return this.children.length?function(i,n,r,d,_,t,e){let o=i.slice();for(let p=0,m=t;p<r.maps.length;p++){let y=0;r.maps[p].forEach((D,I,Z,X)=>{let lt=X-Z-(I-D);for(let gt=0;gt<o.length;gt+=3){let Ut=o[gt+1];if(Ut<0||D>Ut+m-y)continue;let $t=o[gt]+m-y;I>=$t?o[gt+1]=D<=$t?-2:-1:Z>=_&&lt&&(o[gt]+=lt,o[gt+1]+=lt)}y+=lt}),m=r.maps[p].map(m,-1)}let s=!1;for(let p=0;p<o.length;p+=3)if(o[p+1]<0){if(-2==o[p+1]){s=!0,o[p+1]=-1;continue}let m=r.map(i[p]+t),y=m-_;if(y<0||y>=d.content.size){s=!0;continue}let I=r.map(i[p+1]+t,-1)-_,{index:Z,offset:X}=d.content.findIndex(y),lt=d.maybeChild(Z);if(lt&&X==y&&X+lt.nodeSize==I){let gt=o[p+2].mapInner(r,lt,m+1,i[p]+t+1,e);gt!=Ge?(o[p]=y,o[p+1]=I,o[p+2]=gt):(o[p+1]=-2,s=!0)}else s=!0}if(s){let p=function(i,n,r,d,_,t,e){function o(s,p){for(let m=0;m<s.local.length;m++){let y=s.local[m].map(d,_,p);y?r.push(y):e.onRemove&&e.onRemove(s.local[m].spec)}for(let m=0;m<s.children.length;m+=3)o(s.children[m+2],s.children[m]+p+1)}for(let s=0;s<i.length;s+=3)-1==i[s+1]&&o(i[s+2],n[s]+t+1);return r}(o,i,n,r,_,t,e),m=Vn(p,d,0,e);n=m.local;for(let y=0;y<o.length;y+=3)o[y+1]<0&&(o.splice(y,3),y-=3);for(let y=0,D=0;y<m.children.length;y+=3){let I=m.children[y];for(;D<o.length&&o[D]<I;)D+=3;o.splice(D,0,m.children[y],m.children[y+1],m.children[y+2])}}return new Ye(n.sort(bn),o)}(this.children,e||[],n,r,d,_,t):e?new Ye(e.sort(bn),Nn):Ge}add(n,r){return r.length?this==Ge?Ye.create(n,r):this.addInner(n,r,0):this}addInner(n,r,d){let _,t=0;n.forEach((o,s)=>{let m,p=s+d;if(m=eo(r,o,p)){for(_||(_=this.children.slice());t<_.length&&_[t]<s;)t+=3;_[t]==s?_[t+2]=_[t+2].addInner(o,m,p+1):_.splice(t,0,s,s+o.nodeSize,Vn(m,o,p+1,In)),t+=3}});let e=lo(t?ao(r):r,-d);for(let o=0;o<e.length;o++)e[o].type.valid(n,e[o])||e.splice(o--,1);return new Ye(e.length?this.local.concat(e).sort(bn):this.local,_||this.children)}remove(n){return 0==n.length||this==Ge?this:this.removeInner(n,0)}removeInner(n,r){let d=this.children,_=this.local;for(let t=0;t<d.length;t+=3){let e,o=d[t]+r,s=d[t+1]+r;for(let y,m=0;m<n.length;m++)(y=n[m])&&y.from>o&&y.to<s&&(n[m]=null,(e||(e=[])).push(y));if(!e)continue;d==this.children&&(d=this.children.slice());let p=d[t+2].removeInner(e,o+1);p!=Ge?d[t+2]=p:(d.splice(t,3),t-=3)}if(_.length)for(let e,t=0;t<n.length;t++)if(e=n[t])for(let o=0;o<_.length;o++)_[o].eq(e,r)&&(_==this.local&&(_=this.local.slice()),_.splice(o--,1));return d==this.children&&_==this.local?this:_.length||d.length?new Ye(_,d):Ge}forChild(n,r){if(this==Ge)return this;if(r.isLeaf)return Ye.empty;let d,_;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=n){this.children[o]==n&&(d=this.children[o+2]);break}let t=n+1,e=t+r.content.size;for(let o=0;o<this.local.length;o++){let s=this.local[o];if(s.from<e&&s.to>t&&s.type instanceof Cn){let p=Math.max(t,s.from)-t,m=Math.min(e,s.to)-t;p<m&&(_||(_=[])).push(s.copy(p,m))}}if(_){let o=new Ye(_.sort(bn),Nn);return d?new Dn([o,d]):o}return d||Ge}eq(n){if(this==n)return!0;if(!(n instanceof Ye)||this.local.length!=n.local.length||this.children.length!=n.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(n.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=n.children[r]||this.children[r+1]!=n.children[r+1]||!this.children[r+2].eq(n.children[r+2]))return!1;return!0}locals(n){return Wn(this.localsInner(n))}localsInner(n){if(this==Ge)return Nn;if(n.inlineContent||!this.local.some(Cn.is))return this.local;let r=[];for(let d=0;d<this.local.length;d++)this.local[d].type instanceof Cn||r.push(this.local[d]);return r}}Ye.empty=new Ye([],[]),Ye.removeOverlap=Wn;const Ge=Ye.empty;class Dn{constructor(n){this.members=n}map(n,r){const d=this.members.map(_=>_.map(n,r,In));return Dn.from(d)}forChild(n,r){if(r.isLeaf)return Ye.empty;let d=[];for(let _=0;_<this.members.length;_++){let t=this.members[_].forChild(n,r);t!=Ge&&(t instanceof Dn?d=d.concat(t.members):d.push(t))}return Dn.from(d)}eq(n){if(!(n instanceof Dn)||n.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(n.members[r]))return!1;return!0}locals(n){let r,d=!0;for(let _=0;_<this.members.length;_++){let t=this.members[_].localsInner(n);if(t.length)if(r){d&&(r=r.slice(),d=!1);for(let e=0;e<t.length;e++)r.push(t[e])}else r=t}return r?Wn(d?r:r.sort(bn)):Nn}static from(n){switch(n.length){case 0:return Ge;case 1:return n[0];default:return new Dn(n.every(r=>r instanceof Ye)?n:n.reduce((r,d)=>r.concat(d instanceof Ye?d:d.members),[]))}}}function lo(i,n){if(!n||!i.length)return i;let r=[];for(let d=0;d<i.length;d++){let _=i[d];r.push(new pn(_.from+n,_.to+n,_.type))}return r}function eo(i,n,r){if(n.isLeaf)return null;let d=r+n.nodeSize,_=null;for(let e,t=0;t<i.length;t++)(e=i[t])&&e.from>r&&e.to<d&&((_||(_=[])).push(e),i[t]=null);return _}function ao(i){let n=[];for(let r=0;r<i.length;r++)null!=i[r]&&n.push(i[r]);return n}function Vn(i,n,r,d){let _=[],t=!1;n.forEach((o,s)=>{let p=eo(i,o,s+r);if(p){t=!0;let m=Vn(p,o,r+s+1,d);m!=Ge&&_.push(s,s+o.nodeSize,m)}});let e=lo(t?ao(i):i,-r).sort(bn);for(let o=0;o<e.length;o++)e[o].type.valid(n,e[o])||(d.onRemove&&d.onRemove(e[o].spec),e.splice(o--,1));return e.length||_.length?new Ye(e,_):Ge}function bn(i,n){return i.from-n.from||i.to-n.to}function Wn(i){let n=i;for(let r=0;r<n.length-1;r++){let d=n[r];if(d.from!=d.to)for(let _=r+1;_<n.length;_++){let t=n[_];if(t.from!=d.from){t.from<d.to&&(n==i&&(n=i.slice()),n[r]=d.copy(d.from,t.from),Oo(n,_,d.copy(t.from,d.to)));break}t.to!=d.to&&(n==i&&(n=i.slice()),n[_]=t.copy(t.from,d.to),Oo(n,_+1,t.copy(d.to,t.to)))}}return n}function Oo(i,n,r){for(;n<i.length&&bn(r,i[n])>0;)n++;i.splice(n,0,r)}function co(i){let n=[];return i.someProp("decorations",r=>{let d=r(i.state);d&&d!=Ge&&n.push(d)}),i.cursorWrapper&&n.push(Ye.create(i.state.doc,[i.cursorWrapper.deco])),Dn.from(n)}const No={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ho=j&&Dt<=11;class Uo{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(n){this.anchorNode=n.anchorNode,this.anchorOffset=n.anchorOffset,this.focusNode=n.focusNode,this.focusOffset=n.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(n){return n.anchorNode==this.anchorNode&&n.anchorOffset==this.anchorOffset&&n.focusNode==this.focusNode&&n.focusOffset==this.focusOffset}}class zo{constructor(n,r){this.view=n,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Uo,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(d=>{for(let _=0;_<d.length;_++)this.queue.push(d[_]);j&&Dt<=11&&d.some(_=>"childList"==_.type&&_.removedNodes.length||"characterData"==_.type&&_.oldValue.length>_.target.nodeValue.length)?this.flushSoon():this.flush()}),Ho&&(this.onCharData=d=>{this.queue.push({target:d.target,type:"characterData",oldValue:d.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,No)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let n=this.observer.takeRecords();if(n.length){for(let r=0;r<n.length;r++)this.queue.push(n[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(gn(this.view)){if(this.suppressingSelectionUpdates)return ae(this.view);if(j&&Dt<=11&&!this.view.state.selection.empty){let n=this.view.domSelectionRange();if(n.focusNode&&q(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(n){if(!n.focusNode)return!0;let d,r=new Set;for(let t=n.focusNode;t;t=g(t))r.add(t);for(let t=n.anchorNode;t;t=g(t))if(r.has(t)){d=t;break}let _=d&&this.view.docView.nearestDesc(d);return _&&_.ignoreMutation({type:"selection",target:3==d.nodeType?d.parentNode:d})?(this.setCurSelection(),!0):void 0}flush(){let{view:n}=this;if(!n.docView||this.flushingSoon>-1)return;let r=this.observer?this.observer.takeRecords():[];this.queue.length&&(r=this.queue.concat(r),this.queue.length=0);let d=n.domSelectionRange(),_=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(d)&&gn(n)&&!this.ignoreSelectionChange(d),t=-1,e=-1,o=!1,s=[];if(n.editable)for(let m=0;m<r.length;m++){let y=this.registerMutation(r[m],s);y&&(t=t<0?y.from:Math.min(y.from,t),e=e<0?y.to:Math.max(y.to,e),y.typeOver&&(o=!0))}if(It&&s.length>1){let m=s.filter(y=>"BR"==y.nodeName);if(2==m.length){let y=m[0],D=m[1];y.parentNode&&y.parentNode.parentNode==D.parentNode?D.remove():y.remove()}}let p=null;t<0&&_&&n.input.lastFocus>Date.now()-200&&Math.max(n.input.lastTouch,n.input.lastClick.time)<Date.now()-300&&Ct(d)&&(p=fe(n))&&p.eq(M.Y1.near(n.state.doc.resolve(0),1))?(n.input.lastFocus=0,ae(n),this.currentSelection.set(d),n.scrollToSelection()):(t>-1||_)&&(t>-1&&(n.docView.markDirty(t,e),function(i){if(!xo.has(i)&&(xo.set(i,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(i.dom).whiteSpace))){if(i.requiresGeckoHackNode=It,Ao)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Ao=!0}}(n)),this.handleDOMChange(t,e,o,s),n.docView&&n.docView.dirty?n.updateState(n.state):this.currentSelection.eq(d)||ae(n),this.currentSelection.set(d))}registerMutation(n,r){if(r.indexOf(n.target)>-1)return null;let d=this.view.docView.nearestDesc(n.target);if("attributes"==n.type&&(d==this.view.docView||"contenteditable"==n.attributeName||"style"==n.attributeName&&!n.oldValue&&!n.target.getAttribute("style"))||!d||d.ignoreMutation(n))return null;if("childList"==n.type){for(let m=0;m<n.addedNodes.length;m++)r.push(n.addedNodes[m]);if(d.contentDOM&&d.contentDOM!=d.dom&&!d.contentDOM.contains(n.target))return{from:d.posBefore,to:d.posAfter};let _=n.previousSibling,t=n.nextSibling;if(j&&Dt<=11&&n.addedNodes.length)for(let m=0;m<n.addedNodes.length;m++){let{previousSibling:y,nextSibling:D}=n.addedNodes[m];(!y||Array.prototype.indexOf.call(n.addedNodes,y)<0)&&(_=y),(!D||Array.prototype.indexOf.call(n.addedNodes,D)<0)&&(t=D)}let e=_&&_.parentNode==n.target?S(_)+1:0,o=d.localPosFromDOM(n.target,e,-1),s=t&&t.parentNode==n.target?S(t):n.target.childNodes.length;return{from:o,to:d.localPosFromDOM(n.target,s,1)}}return"attributes"==n.type?{from:d.posAtStart-d.border,to:d.posAtEnd+d.border}:{from:d.posAtStart,to:d.posAtEnd,typeOver:n.target.nodeValue==n.oldValue}}}let xo=new WeakMap,Ao=!1;function Po(i){let n=i.pmViewDesc;if(n)return n.parseRule();if("BR"==i.nodeName&&i.parentNode){if(Jt&&/^(ul|ol)$/i.test(i.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}if(i.parentNode.lastChild==i||Jt&&/^(tr|table)$/i.test(i.parentNode.nodeName))return{ignore:!0}}else if("IMG"==i.nodeName&&i.getAttribute("mark-placeholder"))return{ignore:!0};return null}function uo(i,n,r){return Math.max(r.anchor,r.head)>n.content.size?null:nn(i,n.resolve(r.anchor),n.resolve(r.head))}function Qn(i,n,r){let d=i.depth,_=n?i.end():i.pos;for(;d>0&&(n||i.indexAfter(d)==i.node(d).childCount);)d--,_++,n=!1;if(r){let t=i.node(d).maybeChild(i.indexAfter(d));for(;t&&!t.isLeaf;)t=t.firstChild,_++}return _}class Lo{constructor(n,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Xn,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(mo),this.dispatch=this.dispatch.bind(this),this.dom=n&&n.mount||document.createElement("div"),n&&(n.appendChild?n.appendChild(this.dom):"function"==typeof n?n(this.dom):n.mount&&(this.mounted=!0)),this.editable=fo(this),ho(this),this.nodeViews=Kn(this),this.docView=a(this.state.doc,po(this),co(this),this.dom,this),this.domObserver=new zo(this,(d,_,t,e)=>function(i,n,r,d,_){if(n<0){let ce=i.input.lastSelectionTime>Date.now()-50?i.input.lastSelectionOrigin:null,je=fe(i,ce);if(je&&!i.state.selection.eq(je)){if(Bt&&rt&&13===i.input.lastKeyCode&&Date.now()-100<i.input.lastKeyCodeTime&&i.someProp("handleKeyDown",Hn=>Hn(i,At(13,"Enter"))))return;let ln=i.state.tr.setSelection(je);"pointer"==ce?ln.setMeta("pointer",!0):"key"==ce&&ln.scrollIntoView(),i.dispatch(ln)}return}let t=i.state.doc.resolve(n),e=t.sharedDepth(r);n=t.before(e+1),r=i.state.doc.resolve(r).after(e+1);let y,D,o=i.state.selection,s=function(i,n,r){let p,{node:d,fromOffset:_,toOffset:t,from:e,to:o}=i.docView.parseRange(n,r),s=i.domSelectionRange(),m=s.anchorNode;if(m&&i.dom.contains(1==m.nodeType?m:m.parentNode)&&(p=[{node:m,offset:s.anchorOffset}],Ct(s)||p.push({node:s.focusNode,offset:s.focusOffset})),Bt&&8===i.input.lastKeyCode)for(let lt=t;lt>_;lt--){let gt=d.childNodes[lt-1],Ut=gt.pmViewDesc;if("BR"==gt.nodeName&&!Ut){t=lt;break}if(!Ut||Ut.size)break}let y=i.state.doc,D=i.someProp("domParser")||l.aw.fromSchema(i.state.schema),I=y.resolve(e),Z=null,X=D.parse(d,{topNode:I.parent,topMatch:I.parent.contentMatchAt(I.index()),topOpen:!0,from:_,to:t,preserveWhitespace:"pre"!=I.parent.type.whitespace||"full",findPositions:p,ruleFromNode:Po,context:I});if(p&&null!=p[0].pos){let lt=p[0].pos,gt=p[1]&&p[1].pos;null==gt&&(gt=lt),Z={anchor:lt+e,head:gt+e}}return{doc:X,sel:Z,from:e,to:o}}(i,n,r),p=i.state.doc,m=p.slice(s.from,s.to);8===i.input.lastKeyCode&&Date.now()-100<i.input.lastKeyCodeTime?(y=i.state.selection.to,D="end"):(y=i.state.selection.from,D="start"),i.input.lastKeyCode=null;let I=function(i,n,r,d,_){let t=i.findDiffStart(n,r);if(null==t)return null;let{a:e,b:o}=i.findDiffEnd(n,r+i.size,r+n.size);return"end"==_&&(d-=e+Math.max(0,t-Math.min(e,o))-t),e<t&&i.size<n.size?(t-=d<=t&&d>=e?t-d:0,o=t+(o-e),e=t):o<t&&(t-=d<=t&&d>=o?t-d:0,e=t+(e-o),o=t),{start:t,endA:e,endB:o}}(m.content,s.doc.content,s.from,y,D);if((pt&&i.input.lastIOSEnter>Date.now()-225||rt)&&_.some(ce=>"DIV"==ce.nodeName||"P"==ce.nodeName||"LI"==ce.nodeName)&&(!I||I.endA>=I.endB)&&i.someProp("handleKeyDown",ce=>ce(i,At(13,"Enter"))))return void(i.input.lastIOSEnter=0);if(!I){if(!(d&&o instanceof M.Bs&&!o.empty&&o.$head.sameParent(o.$anchor))||i.composing||s.sel&&s.sel.anchor!=s.sel.head){if(s.sel){let ce=uo(i,i.state.doc,s.sel);ce&&!ce.eq(i.state.selection)&&i.dispatch(i.state.tr.setSelection(ce))}return}I={start:o.from,endA:o.to,endB:o.to}}if(Bt&&i.cursorWrapper&&s.sel&&s.sel.anchor==i.cursorWrapper.deco.from&&s.sel.head==s.sel.anchor){let ce=I.endB-I.start;s.sel={anchor:s.sel.anchor+ce,head:s.sel.anchor+ce}}i.input.domChangeCount++,i.state.selection.from<i.state.selection.to&&I.start==I.endB&&i.state.selection instanceof M.Bs&&(I.start>i.state.selection.from&&I.start<=i.state.selection.from+2&&i.state.selection.from>=s.from?I.start=i.state.selection.from:I.endA<i.state.selection.to&&I.endA>=i.state.selection.to-2&&i.state.selection.to<=s.to&&(I.endB+=i.state.selection.to-I.endA,I.endA=i.state.selection.to)),j&&Dt<=11&&I.endB==I.start+1&&I.endA==I.start&&I.start>s.from&&" \xa0"==s.doc.textBetween(I.start-s.from-1,I.start-s.from+1)&&(I.start--,I.endA--,I.endB--);let Ut,Z=s.doc.resolveNoCache(I.start-s.from),X=s.doc.resolveNoCache(I.endB-s.from),lt=p.resolve(I.start),gt=Z.sameParent(X)&&Z.parent.inlineContent&&lt.end()>=I.endA;if((pt&&i.input.lastIOSEnter>Date.now()-225&&(!gt||_.some(ce=>"DIV"==ce.nodeName||"P"==ce.nodeName))||!gt&&Z.pos<s.doc.content.size&&(Ut=M.Y1.findFrom(s.doc.resolve(Z.pos+1),1,!0))&&Ut.head==X.pos)&&i.someProp("handleKeyDown",ce=>ce(i,At(13,"Enter"))))return void(i.input.lastIOSEnter=0);if(i.state.selection.anchor>I.start&&function(i,n,r,d,_){if(!d.parent.isTextblock||r-n<=_.pos-d.pos||Qn(d,!0,!1)<_.pos)return!1;let t=i.resolve(n);if(t.parentOffset<t.parent.content.size||!t.parent.isTextblock)return!1;let e=i.resolve(Qn(t,!0,!0));return!(!e.parent.isTextblock||e.pos>r||Qn(e,!0,!1)<r)&&d.parent.content.cut(d.parentOffset).eq(e.parent.content)}(p,I.start,I.endA,Z,X)&&i.someProp("handleKeyDown",ce=>ce(i,At(8,"Backspace"))))return void(rt&&Bt&&i.domObserver.suppressSelectionUpdates());Bt&&rt&&I.endB==I.start&&(i.input.lastAndroidDelete=Date.now()),rt&&!gt&&Z.start()!=X.start()&&0==X.parentOffset&&Z.depth==X.depth&&s.sel&&s.sel.anchor==s.sel.head&&s.sel.head==I.endA&&(I.endB-=2,X=s.doc.resolveNoCache(I.endB-s.from),setTimeout(()=>{i.someProp("handleKeyDown",function(ce){return ce(i,At(13,"Enter"))})},20));let Xt,le,Be,$t=I.start,Yt=I.endA;if(gt)if(Z.pos==X.pos)j&&Dt<=11&&0==Z.parentOffset&&(i.domObserver.suppressSelectionUpdates(),setTimeout(()=>ae(i),20)),Xt=i.state.tr.delete($t,Yt),le=p.resolve(I.start).marksAcross(p.resolve(I.endA));else if(I.endA==I.endB&&(Be=function(i,n){let e,o,s,r=i.firstChild.marks,d=n.firstChild.marks,_=r,t=d;for(let m=0;m<d.length;m++)_=d[m].removeFromSet(_);for(let m=0;m<r.length;m++)t=r[m].removeFromSet(t);if(1==_.length&&0==t.length)o=_[0],e="add",s=m=>m.mark(o.addToSet(m.marks));else{if(0!=_.length||1!=t.length)return null;o=t[0],e="remove",s=m=>m.mark(o.removeFromSet(m.marks))}let p=[];for(let m=0;m<n.childCount;m++)p.push(s(n.child(m)));if(l.HY.from(p).eq(i))return{mark:o,type:e}}(Z.parent.content.cut(Z.parentOffset,X.parentOffset),lt.parent.content.cut(lt.parentOffset,I.endA-lt.start()))))Xt=i.state.tr,"add"==Be.type?Xt.addMark($t,Yt,Be.mark):Xt.removeMark($t,Yt,Be.mark);else if(Z.parent.child(Z.index()).isText&&Z.index()==X.index()-(X.textOffset?0:1)){let ce=Z.parent.textBetween(Z.parentOffset,X.parentOffset);if(i.someProp("handleTextInput",je=>je(i,$t,Yt,ce)))return;Xt=i.state.tr.insertText(ce,$t,Yt)}if(Xt||(Xt=i.state.tr.replace($t,Yt,s.doc.slice(I.start-s.from,I.endB-s.from))),s.sel){let ce=uo(i,Xt.doc,s.sel);ce&&!(Bt&&rt&&i.composing&&ce.empty&&(I.start!=I.endB||i.input.lastAndroidDelete<Date.now()-100)&&(ce.head==$t||ce.head==Xt.mapping.map(Yt)-1)||j&&ce.empty&&ce.head==$t)&&Xt.setSelection(ce)}le&&Xt.ensureMarks(le),i.dispatch(Xt.scrollIntoView())}(this,d,_,t,e)),this.domObserver.start(),function(i){for(let n in ke){let r=ke[n];i.dom.addEventListener(n,i.input.eventHandlers[n]=d=>{En(i,d)&&!Tn(i,d)&&(i.editable||!(d.type in Ke))&&r(i,d)},Gn[n]?{passive:!0}:void 0)}Jt&&i.dom.addEventListener("input",()=>null),On(i)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let n=this._props;this._props={};for(let r in n)this._props[r]=n[r];this._props.state=this.state}return this._props}update(n){n.handleDOMEvents!=this._props.handleDOMEvents&&On(this);let r=this._props;this._props=n,n.plugins&&(n.plugins.forEach(mo),this.directPlugins=n.plugins),this.updateStateInner(n.state,r)}setProps(n){let r={};for(let d in this._props)r[d]=this._props[d];r.state=this.state;for(let d in n)r[d]=n[d];this.update(r)}updateState(n){this.updateStateInner(n,this._props)}updateStateInner(n,r){let d=this.state,_=!1,t=!1;n.storedMarks&&this.composing&&(ro(this),t=!0),this.state=n;let e=d.plugins!=n.plugins||this._props.plugins!=r.plugins;if(e||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let D=Kn(this);(function(i,n){let r=0,d=0;for(let _ in i){if(i[_]!=n[_])return!0;r++}for(let _ in n)d++;return r!=d})(D,this.nodeViews)&&(this.nodeViews=D,_=!0)}(e||r.handleDOMEvents!=this._props.handleDOMEvents)&&On(this),this.editable=fo(this),ho(this);let o=co(this),s=po(this),p=d.plugins==n.plugins||d.doc.eq(n.doc)?n.scrollToSelection>d.scrollToSelection?"to selection":"preserve":"reset",m=_||!this.docView.matchesNode(n.doc,s,o);(m||!n.selection.eq(d.selection))&&(t=!0);let y="preserve"==p&&t&&null==this.dom.style.overflowAnchor&&function(i){let d,_,n=i.dom.getBoundingClientRect(),r=Math.max(0,n.top);for(let t=(n.left+n.right)/2,e=r+1;e<Math.min(innerHeight,n.bottom);e+=5){let o=i.root.elementFromPoint(t,e);if(!o||o==i.dom||!i.dom.contains(o))continue;let s=o.getBoundingClientRect();if(s.top>=r-20){d=o,_=s.top;break}}return{refDOM:d,refTop:_,stack:jt(i.dom)}}(this);if(t){this.domObserver.stop();let D=m&&(j||Bt)&&!this.composing&&!d.selection.empty&&!n.selection.empty&&function(i,n){let r=Math.min(i.$anchor.sharedDepth(i.head),n.$anchor.sharedDepth(n.head));return i.$anchor.start(r)!=n.$anchor.start(r)}(d.selection,n.selection);if(m){let I=Bt?this.trackWrites=this.domSelectionRange().focusNode:null;(_||!this.docView.update(n.doc,s,o,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=a(n.doc,s,o,this.dom,this)),I&&!this.trackWrites&&(D=!0)}D||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(i){let n=i.docView.domFromPos(i.state.selection.anchor,0),r=i.domSelectionRange();return q(n.node,n.offset,r.anchorNode,r.anchorOffset)}(this))?ae(this,D):(vn(this,n.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(d),"reset"==p?this.dom.scrollTop=0:"to selection"==p?this.scrollToSelection():y&&function({refDOM:i,refTop:n,stack:r}){let d=i?i.getBoundingClientRect().top:0;Wt(r,0==d?0:d-n)}(y)}scrollToSelection(){let n=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof M.qv){let r=this.docView.domAfterPos(this.state.selection.from);1==r.nodeType&&wt(this,r.getBoundingClientRect(),n)}else wt(this,this.coordsAtPos(this.state.selection.head,1),n)}destroyPluginViews(){let n;for(;n=this.pluginViews.pop();)n.destroy&&n.destroy()}updatePluginViews(n){if(n&&n.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let r=0;r<this.pluginViews.length;r++){let d=this.pluginViews[r];d.update&&d.update(this,n)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let d=this.directPlugins[r];d.spec.view&&this.pluginViews.push(d.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let d=this.state.plugins[r];d.spec.view&&this.pluginViews.push(d.spec.view(this))}}}someProp(n,r){let _,d=this._props&&this._props[n];if(null!=d&&(_=r?r(d):d))return _;for(let e=0;e<this.directPlugins.length;e++){let o=this.directPlugins[e].props[n];if(null!=o&&(_=r?r(o):o))return _}let t=this.state.plugins;if(t)for(let e=0;e<t.length;e++){let o=t[e].props[n];if(null!=o&&(_=r?r(o):o))return _}}hasFocus(){if(j){let n=this.root.activeElement;if(n==this.dom)return!0;if(!n||!this.dom.contains(n))return!1;for(;n&&this.dom!=n&&this.dom.contains(n);){if("false"==n.contentEditable)return!1;n=n.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(i){if(i.setActive)return i.setActive();if(pe)return i.focus(pe);let n=jt(i);i.focus(null==pe?{get preventScroll(){return pe={preventScroll:!0},!0}}:void 0),pe||(pe=!1,Wt(n,0))}(this.dom),ae(this),this.domObserver.start()}get root(){let n=this._root;if(null==n)for(let r=this.dom.parentNode;r;r=r.parentNode)if(9==r.nodeType||11==r.nodeType&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r;return n||document}posAtCoords(n){return Me(this,n)}coordsAtPos(n,r=1){return Ee(this,n,r)}domAtPos(n,r=0){return this.docView.domFromPos(n,r)}nodeDOM(n){let r=this.docView.descAt(n);return r?r.nodeDOM:null}posAtDOM(n,r,d=-1){let _=this.docView.posFromDOM(n,r,d);if(null==_)throw new RangeError("DOM position not inside the editor");return _}endOfTextblock(n,r){return function(i,n,r){return Ce==n&&ge==r?ye:(Ce=n,ge=r,ye="up"==r||"down"==r?function(i,n,r){let d=n.selection,_="up"==r?d.$from:d.$to;return ze(i,n,()=>{let{node:t}=i.docView.domFromPos(_.pos,"up"==r?-1:1);for(;;){let o=i.docView.nearestDesc(t,!0);if(!o)break;if(o.node.isBlock){t=o.contentDOM||o.dom;break}t=o.dom.parentNode}let e=Ee(i,_.pos,1);for(let o=t.firstChild;o;o=o.nextSibling){let s;if(1==o.nodeType)s=o.getClientRects();else{if(3!=o.nodeType)continue;s=N(o,0,o.nodeValue.length).getClientRects()}for(let p=0;p<s.length;p++){let m=s[p];if(m.bottom>m.top+1&&("up"==r?e.top-m.top>2*(m.bottom-e.top):m.bottom-e.bottom>2*(e.bottom-m.top)))return!1}}return!0})}(i,n,r):function(i,n,r){let{$head:d}=n.selection;if(!d.parent.isTextblock)return!1;let _=d.parentOffset,t=!_,e=_==d.parent.content.size,o=i.domSelection();return Ne.test(d.parent.textContent)&&o.modify?ze(i,n,()=>{let{focusNode:s,focusOffset:p,anchorNode:m,anchorOffset:y}=i.domSelectionRange(),D=o.caretBidiLevel;o.modify("move",r,"character");let I=d.depth?i.docView.domAfterPos(d.before()):i.dom,{focusNode:Z,focusOffset:X}=i.domSelectionRange(),lt=Z&&!I.contains(1==Z.nodeType?Z:Z.parentNode)||s==Z&&p==X;try{o.collapse(m,y),s&&(s!=m||p!=y)&&o.extend&&o.extend(s,p)}catch(gt){}return null!=D&&(o.caretBidiLevel=D),lt}):"left"==r||"backward"==r?t:e}(i,n,r))}(this,r||this.state,n)}pasteHTML(n,r){return Ln(this,"",n,!1,r||new ClipboardEvent("paste"))}pasteText(n,r){return Ln(this,n,null,!0,r||new ClipboardEvent("paste"))}destroy(){!this.docView||(function(i){i.domObserver.stop();for(let n in i.input.eventHandlers)i.dom.removeEventListener(n,i.input.eventHandlers[n]);clearTimeout(i.input.composingTimeout),clearTimeout(i.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],co(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(n){return function(i,n){!Tn(i,n)&&ke[n.type]&&(i.editable||!(n.type in Ke))&&ke[n.type](i,n)}(this,n)}dispatch(n){let r=this._props.dispatchTransaction;r?r.call(this,n):this.updateState(this.state.apply(n))}domSelectionRange(){return Jt&&11===this.root.nodeType&&function(i){let n=i.activeElement;for(;n&&n.shadowRoot;)n=n.shadowRoot.activeElement;return n}(this.dom.ownerDocument)==this.dom?function(i){let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}i.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),i.dom.removeEventListener("beforeinput",r,!0);let d=n.startContainer,_=n.startOffset,t=n.endContainer,e=n.endOffset,o=i.domAtPos(i.state.selection.anchor);return q(o.node,o.offset,t,e)&&([d,_,t,e]=[t,e,d,_]),{anchorNode:d,anchorOffset:_,focusNode:t,focusOffset:e}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function po(i){let n=Object.create(null);return n.class="ProseMirror",n.contenteditable=String(i.editable),n.translate="no",i.someProp("attributes",r=>{if("function"==typeof r&&(r=r(i.state)),r)for(let d in r)"class"==d&&(n.class+=" "+r[d]),"style"==d?n.style=(n.style?n.style+";":"")+r[d]:!n[d]&&"contenteditable"!=d&&"nodeName"!=d&&(n[d]=String(r[d]))}),[pn.node(0,i.state.doc.content.size,n)]}function ho(i){if(i.markCursor){let n=document.createElement("img");n.className="ProseMirror-separator",n.setAttribute("mark-placeholder","true"),n.setAttribute("alt",""),i.cursorWrapper={dom:n,deco:pn.widget(i.state.selection.head,n,{raw:!0,marks:i.markCursor})}}else i.cursorWrapper=null}function fo(i){return!i.someProp("editable",n=>!1===n(i.state))}function Kn(i){let n=Object.create(null);function r(d){for(let _ in d)Object.prototype.hasOwnProperty.call(n,_)||(n[_]=d[_])}return i.someProp("nodeViews",r),i.someProp("markViews",r),n}function mo(i){if(i.spec.state||i.spec.filterTransaction||i.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}}}]);