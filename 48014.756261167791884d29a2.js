"use strict";var Qo=Object.defineProperty,Go=Object.defineProperties,Xo=Object.getOwnPropertyDescriptors,To=Object.getOwnPropertySymbols,Zo=Object.prototype.hasOwnProperty,Yo=Object.prototype.propertyIsEnumerable,jo=(Yt,Ct,c)=>Ct in Yt?Qo(Yt,Ct,{enumerable:!0,configurable:!0,writable:!0,value:c}):Yt[Ct]=c,Gt=(Yt,Ct)=>{for(var c in Ct||(Ct={}))Zo.call(Ct,c)&&jo(Yt,c,Ct[c]);if(To)for(var c of To(Ct))Yo.call(Ct,c)&&jo(Yt,c,Ct[c]);return Yt},me=(Yt,Ct)=>Go(Yt,Xo(Ct)),Vo=(Yt,Ct)=>{var c={};for(var C in Yt)Zo.call(Yt,C)&&Ct.indexOf(C)<0&&(c[C]=Yt[C]);if(null!=Yt&&To)for(var C of To(Yt))Ct.indexOf(C)<0&&Yo.call(Yt,C)&&(c[C]=Yt[C]);return c};(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[48014],{77361:(Yt,Ct,c)=>{c.d(Ct,{_:()=>y});var C=c(79765),l=c(74788);let y=(()=>{class D{constructor(){this.stateChange$=new C.xQ,this.valueChange$=new C.xQ}}return D.\u0275fac=function(ot){return new(ot||D)},D.\u0275dir=l.lG2({type:D}),D})()},97019:(Yt,Ct,c)=>{c.d(Ct,{h:()=>Dt});var C=c(64762),l=c(74788),y=c(68807),D=c(50170),g=c(1414),ot=c(10200),B=c(33250),X=c(68874),et=c(24751),mt=c(52219),ct=c(12057),Mt=c(65009),it=c(10383),ft=c(89437),bt=c(20933),It=c(35065),Pt=c(63060),At=c(62733),pt=c(48214),tt=c(11189),F=c(91030);function ut(St,_t){if(1&St&&(l.TgZ(0,"button",7),l._uU(1),l.qZA()),2&St){const wt=_t.$implicit;l.Q6J("value",wt),l.xp6(1),l.hij(" ",wt," ")}}function Y(St,_t){if(1&St&&(l.TgZ(0,"tui-data-list",5),l.YNc(1,ut,2,2,"button",6),l.qZA()),2&St){const wt=l.oxw();l.xp6(1),l.Q6J("ngForOf",wt.modes)}}function xt(St,_t){if(1&St){const wt=l.EpF();l.TgZ(0,"tui-primitive-textfield",8),l.NdJ("valueChange",function(z){return l.CHM(wt),l.oxw().onHexChange(z)}),l._UZ(1,"input",9),l.qZA()}if(2&St){const wt=l.oxw();l.Q6J("textMask",wt.hexMask)("tuiTextfieldLabelOutside",!0)("value",wt.hex)}}function Bt(St,_t){if(1&St){const wt=l.EpF();l.TgZ(0,"tui-input-count",10),l.NdJ("ngModelChange",function(z){l.CHM(wt);const rt=l.oxw();return rt.onRgbChange(z,rt.color[1],rt.color[2],rt.color[3])}),l.qZA(),l.TgZ(1,"tui-input-count",10),l.NdJ("ngModelChange",function(z){l.CHM(wt);const rt=l.oxw();return rt.onRgbChange(rt.color[0],z,rt.color[2],rt.color[3])}),l.qZA(),l.TgZ(2,"tui-input-count",10),l.NdJ("ngModelChange",function(z){l.CHM(wt);const rt=l.oxw();return rt.onRgbChange(rt.color[0],rt.color[1],z,rt.color[3])}),l.qZA()}if(2&St){const wt=l.oxw();l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",wt.color[0]),l.xp6(1),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",wt.color[1]),l.xp6(1),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",wt.color[2])}}class Dt{constructor(){this.color=[0,0,0,1],this.colorChange=new l.vpe,this.hexMask={mask:({length:_t})=>Array.from({length:_t},()=>/\d|[a-f]|[A-F]/),guide:!1},this.modes=["HEX","RGB"],this.mode=this.modes[0]}get isHex(){return this.mode===this.modes[0]}get hex(){return(0,y.tuiRgbToHex)(this.color[0],this.color[1],this.color[2]).replace("#","")}get opacity(){return Math.round(100*this.color[3])}onHexChange(_t){if(6!==_t.length)return;const wt=(0,y.tuiHexToRgb)(_t);this.updateColor([wt[0],wt[1],wt[2],this.color[3]])}onRgbChange(..._t){this.updateColor(_t)}updateColor(_t){this.color=_t,this.colorChange.emit(_t)}}Dt.\u0275fac=function(_t){return new(_t||Dt)},Dt.\u0275cmp=l.Xpm({type:Dt,selectors:[["tui-color-edit"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:6,vars:8,consts:[["tuiTextfieldSize","m","tuiDropdownAlign","left","tuiDropdownLimitWidth","min",1,"t-select","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","ngModel","ngModelChange"],["size","s",4,"tuiDataList"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange",4,"ngIf","ngIfElse"],["rgb",""],["tuiTextfieldPostfix","%","tuiTextfieldSize","m",1,"t-opacity","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"],["size","s"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange"],["tuiTextfield","","maxlength","6"],["tuiTextfieldSize","m",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"]],template:function(_t,wt){if(1&_t&&(l.TgZ(0,"tui-select",0),l.NdJ("ngModelChange",function(z){return wt.mode=z}),l.YNc(1,Y,2,1,"tui-data-list",1),l.qZA(),l.YNc(2,xt,2,3,"tui-primitive-textfield",2),l.YNc(3,Bt,3,12,"ng-template",null,3,l.W1O),l.TgZ(5,"tui-input-count",4),l.NdJ("ngModelChange",function(z){return wt.onRgbChange(wt.color[0],wt.color[1],wt.color[2],z/100)}),l.qZA()),2&_t){const kt=l.MAs(4);l.Q6J("tuiTextfieldLabelOutside",!0)("ngModel",wt.mode),l.xp6(2),l.Q6J("ngIf",wt.isHex)("ngIfElse",kt),l.xp6(3),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",100)("ngModel",wt.opacity)}},directives:[D.u,g.O,ot.s,B.Ek,X.x,et.JJ,et.On,mt.g,ct.O5,Mt.E,it.a,ft.T,bt.q,ct.sg,It.v,Pt.y,At.B,pt.n,tt.h,F.M],styles:["[_nghost-%COMP%]{display:flex}.t-select[_ngcontent-%COMP%]{width:4.875rem}.t-opacity[_ngcontent-%COMP%]{width:4.275rem}"],changeDetection:0}),(0,C.gn)([(0,y.tuiDefaultProp)()],Dt.prototype,"color",void 0)},49289:(Yt,Ct,c)=>{c.d(Ct,{$:()=>B});var C=c(64762),l=c(74788),y=c(91211),D=c(68807),g=c(71424),ot=c(65720);class B{constructor(et){this.sanitizer=et,this.colorChange=new l.vpe,this.point=[0,1],this.hue=0,this.opacity=1}set color(et){if(this.currentColor.every((it,ft)=>it===et[ft])&&et[3]===this.opacity)return;const[mt,ct,Mt]=(0,D.tuiRgbToHsv)(et[0],et[1],et[2]);this.opacity=et[3],this.hue=mt/360,this.point=[ct,1-Mt/255]}get currentColor(){return this.getCurrentColor(this.hue,this.point)}get base(){return`rgb(${(0,D.tuiHsvToRgb)(360*this.hue,1,255)})`}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(`linear-gradient(to right, rgba(${this.currentColor.join(",")}, 0), rgb(${this.currentColor.join(",")}))`)}onPointChange(et){this.point=et,this.updateColor()}onHueChange(et){this.hue=et,this.updateColor()}onOpacityChange(et){this.opacity=(0,D.tuiRound)(et,2),this.updateColor()}getCurrentColor(et,mt){return(0,D.tuiHsvToRgb)(360*et,mt[0],255*(1-mt[1]))}updateColor(){this.colorChange.emit([...this.currentColor,this.opacity])}}B.\u0275fac=function(et){return new(et||B)(l.Y36(y.H7))},B.\u0275cmp=l.Xpm({type:B,selectors:[["tui-color-picker"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:5,vars:7,consts:[[1,"t-flat",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_hue"],[1,"t-hue",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_opacity"],[1,"t-opacity",3,"value","valueChange"]],template:function(et,mt){1&et&&(l.TgZ(0,"tui-flat-picker",0),l.NdJ("valueChange",function(Mt){return mt.onPointChange(Mt)}),l.qZA(),l.TgZ(1,"div",1),l.TgZ(2,"tui-linear-picker",2),l.NdJ("valueChange",function(Mt){return mt.onHueChange(Mt)}),l.qZA(),l.qZA(),l.TgZ(3,"div",3),l.TgZ(4,"tui-linear-picker",4),l.NdJ("valueChange",function(Mt){return mt.onOpacityChange(Mt)}),l.qZA(),l.qZA()),2&et&&(l.Udp("background-color",mt.base),l.Q6J("value",mt.point),l.xp6(2),l.Q6J("value",mt.hue),l.xp6(1),l.Udp("background",mt.gradient),l.xp6(1),l.Q6J("value",mt.opacity))},directives:[g.J,ot.P],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block}.t-flat[_ngcontent-%COMP%]{height:14rem;background:linear-gradient(rgba(0,0,0,0),#000000),linear-gradient(to right,#ffffff,rgba(255,255,255,0));margin-bottom:.25rem;overflow:hidden}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1rem 1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px #00000014;pointer-events:none;border-radius:inherit}.t-wrapper_hue[_ngcontent-%COMP%]{background:#ff0000}.t-wrapper_opacity[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hue[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff0000,#ffff00,#00ff00,#00ffff,#0000ff,#ff00ff,#ff0000);border-radius:inherit;margin:0 .5rem}.t-opacity[_ngcontent-%COMP%]{border-radius:inherit;margin:0 .5rem}'],changeDetection:0}),(0,C.gn)([(0,D.tuiDefaultProp)()],B.prototype,"color",null),(0,C.gn)([D.tuiPure],B.prototype,"getCurrentColor",null)},23999:(Yt,Ct,c)=>{c.d(Ct,{s:()=>st});var C=c(64762),l=c(74788),y=c(91211),D=c(14309),g=c(27863),ot=c(68807),B=c(62939),X=c(76189),et=c(12057),mt=c(49289),ct=c(34880),Mt=c(20933),it=c(35065),ft=c(49472),bt=c(219),It=c(67446),Pt=c(29070),At=c(54255),pt=c(15491),tt=c(97019),F=c(39607),ut=c(5451);function Y(J,Q){if(1&J&&l._UZ(0,"tui-svg",9),2&J){l.oxw();const nt=l.MAs(1);l.ekj("t-arrow_rotated",nt.open)}}function xt(J,Q){1&J&&l._UZ(0,"tui-svg",14)}function Bt(J,Q){if(1&J){const nt=l.EpF();l.TgZ(0,"button",12),l.NdJ("keydown.enter.prevent",function(){const Zt=l.CHM(nt).$implicit,ne=l.oxw(2),Wt=l.MAs(1);return ne.onModeSelect(Zt,Wt)})("keydown.space.prevent",function(){const Zt=l.CHM(nt).$implicit,ne=l.oxw(2),Wt=l.MAs(1);return ne.onModeSelect(Zt,Wt)})("click",function(){const Zt=l.CHM(nt).$implicit,ne=l.oxw(2),Wt=l.MAs(1);return ne.onModeSelect(Zt,Wt)}),l._uU(1),l.YNc(2,xt,1,0,"tui-svg",13),l.qZA()}if(2&J){const nt=Q.$implicit,Lt=l.oxw(2);l.uIk("aria-checked",Lt.isModeActive(nt)),l.xp6(1),l.hij(" ",nt," "),l.xp6(1),l.Q6J("ngIf",Lt.isModeActive(nt))}}function Dt(J,Q){if(1&J&&(l.TgZ(0,"tui-data-list",10),l.YNc(1,Bt,3,3,"button",11),l.qZA()),2&J){const nt=l.oxw();l.xp6(1),l.Q6J("ngForOf",nt.modes)}}function St(J,Q){if(1&J){const nt=l.EpF();l.TgZ(0,"button",20),l.NdJ("click",function(){const Zt=l.CHM(nt).$implicit;return l.oxw(2).onDirectionChange(Zt)}),l.qZA()}if(2&J){const nt=Q.$implicit,Lt=l.oxw(2);l.ekj("t-direction_active",Lt.isDirectionActive(nt)),l.Q6J("icon",Lt.getIcon(nt))("tuiHint",nt)}}function _t(J,Q){if(1&J){const nt=l.EpF();l.ynx(0),l._UZ(1,"hr",15),l.TgZ(2,"div",16),l.TgZ(3,"tui-linear-multi-picker",17),l.NdJ("valueChange",function(Jt){return l.CHM(nt),l.oxw().onStopsChange(Jt)})("indexChange",function(Jt){return l.CHM(nt),l.oxw().onIndexChange(Jt)}),l.qZA(),l.qZA(),l.TgZ(4,"div",18),l.YNc(5,St,1,4,"button",19),l.qZA(),l.BQk()}if(2&J){const nt=l.oxw();l.xp6(2),l.Udp("background",nt.gradient),l.xp6(1),l.Q6J("value",nt.stopsKeys),l.xp6(2),l.Q6J("ngForOf",nt.buttons)}}function wt(J,Q){if(1&J){const nt=l.EpF();l.TgZ(0,"tui-color-edit",21),l.NdJ("colorChange",function(Jt){return l.CHM(nt),l.oxw().onColorChange(Jt)}),l.qZA()}if(2&J){const nt=l.oxw();l.Q6J("color",nt.color)}}function kt(J,Q){if(1&J){const nt=l.EpF();l.TgZ(0,"tui-palette",22),l.NdJ("selectedColor",function(Jt){return l.CHM(nt),l.oxw().onPalettePick(Jt)}),l.qZA()}if(2&J){const nt=l.oxw();l.Q6J("colors",nt.palette)}}const z=[0,0,0,0],rt=[[0,[0,0,0,1]],[1,[255,255,255,1]]],dt={"to top right":"tuiIconArrowUpRight","to right":"tuiIconArrowRight","to bottom right":"tuiIconArrowDownRight","to bottom":"tuiIconArrowDown","to bottom left":"tuiIconArrowDownLeft","to left":"tuiIconArrowLeft","to top left":"tuiIconArrowUpLeft","to top":"tuiIconArrowUp"};class st{constructor(Q,nt){this.sanitizer=Q,this.modes=nt,this.stops=new Map(rt),this.currentStop=0,this.direction="to bottom",this.colors=new Map,this.colorChange=new l.vpe,this.color=[0,0,0,1],this.currentMode=this.modes[0],this.buttons=["to top right","to right","to bottom right","to bottom","to bottom left","to left","to top left","to top"]}set colorSetter(Q){this.parse(Q)}get palette(){return this.filterPalette(this.colors,this.isGradient)}get stopsKeys(){return this.getStopsKeys(this.stops)}get currentColor(){return this.isGradient?this.getStop(this.currentStop):this.color}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(this.getGradient("to right"))}get isGradient(){return this.currentMode===this.modes[1]}getIcon(Q){return dt[Q]}isModeActive(Q){return this.currentMode===Q}isDirectionActive(Q){return this.direction===Q}onPalettePick(Q){this.updateColor(Q)}onDirectionChange(Q){this.direction=Q,this.updateColor(this.getGradient(Q))}onModeSelect(Q,nt){this.currentMode=Q,nt.open=!1,this.updateColor(Q===this.modes[0]?`rgba(${this.color.join(", ")})`:this.getGradient(this.direction))}onIndexChange(Q){this.currentStop=this.stopsKeys[Q]}onColorChange(Q){this.isGradient?(this.stops.set(this.currentStop,Q),this.updateColor(this.getGradient(this.direction))):this.updateColor(`rgba(${Q.join(", ")})`)}onStopsChange(Q){const nt=this.stopsKeys.find(Jt=>!Q.includes(Jt)),Lt=Q.find(Jt=>!this.stopsKeys.includes(Jt));void 0===nt&&void 0!==Lt&&this.addStop(Lt),void 0!==nt&&void 0===Lt&&this.removeStop(nt),void 0!==nt&&void 0!==Lt&&this.replaceStop(nt,Lt),this.updateColor(this.getGradient(this.direction))}getStopsKeys(Q){return Array.from(Q.keys())}filterPalette(Q,nt){const Lt=new Map(Q);return Lt.forEach((Jt,Zt)=>{(Jt.startsWith("linear-gradient")&&!nt||!Jt.startsWith("linear-gradient")&&nt)&&Lt.delete(Zt)}),Lt}updateColor(Q){this.colorChange.emit(Q)}getGradient(Q){return`linear-gradient(${Q}, ${[...this.stopsKeys].sort(ot.tuiDefaultSort).map(nt=>`rgba(${this.getStop(nt).join(", ")}) ${100*nt}%`).join(", ")})`}getStop(Q){return this.stops.get(Q)||z}addStop(Q){const nt=this.stopsKeys.reduce((Lt,Jt)=>Math.abs(Jt-Q)<Math.abs(Lt-Q)?Jt:Lt,this.stopsKeys[0]);this.stops.set(Q,this.getStop(nt)),this.stops=new Map(this.stops),this.currentStop=Q}removeStop(Q){this.stops.delete(Q),this.stops=new Map(this.stops),this.currentStop=this.stopsKeys[0]}replaceStop(Q,nt){const Lt=this.getStop(Q);this.currentStop=nt,this.stops=new Map(this.stopsKeys.map(Jt=>Jt===Q?[nt,Lt]:[Jt,this.getStop(Jt)]))}parse(Q){Q.startsWith("linear-gradient")?this.parseGradient(Q):this.parseColor(Q)}parseGradient(Q){if(Q===this.getGradient(this.direction))return;const nt=(0,g._N)((0,g.U5)(Q));this.currentMode=this.modes[1],this.direction=nt.side,this.currentStop=0,this.stops=new Map(nt.stops.length?nt.stops.map(({color:Lt,position:Jt})=>[parseFloat(Jt)/100,(0,ot.tuiParseColor)(Lt)]):rt)}parseColor(Q){this.currentMode=this.modes[0],this.currentStop=0,this.color=(0,ot.tuiParseColor)(Q)}}st.\u0275fac=function(Q){return new(Q||st)(l.Y36(y.H7),l.Y36(D.dj))},st.\u0275cmp=l.Xpm({type:st,selectors:[["tui-color-selector"]],inputs:{colors:"colors",colorSetter:["color","colorSetter"]},outputs:{colorChange:"colorChange"},decls:12,vars:7,consts:[[1,"t-select",3,"content"],["dropdown",""],["tuiButton","","appearance","","size","s","type","button",3,"iconRight"],["arrow",""],["menu",""],[4,"ngIf"],[3,"color","colorChange"],["tuiGroup","","class","t-edit",3,"color","colorChange",4,"ngIf"],["class","t-palette",3,"colors","selectedColor",4,"ngIf"],["src","tuiIconChevronDown",1,"t-arrow"],["role","menu","size","s",1,"t-menu"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click"],["src","tuiIconCheck","class","t-checkmark",4,"ngIf"],["src","tuiIconCheck",1,"t-checkmark"],[1,"t-hr"],[1,"t-wrapper"],[1,"t-gradient",3,"value","valueChange","indexChange"],[1,"t-buttons"],["tuiIconButton","","type","button","size","xs","appearance","","tuiHintDescribe","","class","t-direction",3,"t-direction_active","icon","tuiHint","click",4,"ngFor","ngForOf"],["tuiIconButton","","type","button","size","xs","appearance","","tuiHintDescribe","",1,"t-direction",3,"icon","tuiHint","click"],["tuiGroup","",1,"t-edit",3,"color","colorChange"],[1,"t-palette",3,"colors","selectedColor"]],template:function(Q,nt){if(1&Q&&(l.TgZ(0,"tui-hosted-dropdown",0,1),l.TgZ(2,"button",2),l._uU(3),l.qZA(),l.YNc(4,Y,1,2,"ng-template",null,3,l.W1O),l.YNc(6,Dt,2,1,"ng-template",null,4,l.W1O),l.qZA(),l.YNc(8,_t,6,4,"ng-container",5),l.TgZ(9,"tui-color-picker",6),l.NdJ("colorChange",function(Jt){return nt.onColorChange(Jt)}),l.qZA(),l.YNc(10,wt,1,1,"tui-color-edit",7),l.YNc(11,kt,1,1,"tui-palette",8)),2&Q){const Lt=l.MAs(5),Jt=l.MAs(7);l.Q6J("content",Jt),l.xp6(2),l.Q6J("iconRight",Lt),l.xp6(1),l.hij(" ",nt.currentMode," "),l.xp6(5),l.Q6J("ngIf",nt.isGradient),l.xp6(1),l.Q6J("color",nt.currentColor),l.xp6(1),l.Q6J("ngIf",!nt.isGradient),l.xp6(1),l.Q6J("ngIf",nt.palette.size)}},directives:[B.o,X.v,et.O5,mt.$,ct.P,Mt.q,et.sg,it.v,ft.e,bt.$,It.D,Pt.x,At.t,pt.D,tt.h,F.g,ut.R],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block;width:22.6rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px #00000014;pointer-events:none;border-radius:inherit}.t-wrapper[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hr[_ngcontent-%COMP%]{height:1px;margin:0 0 0 -1px;border:none;background:var(--tui-base-03)}.t-gradient[_ngcontent-%COMP%]{margin:0 .5rem;border-radius:inherit}.t-select[_ngcontent-%COMP%]{margin:.75rem .5rem}.t-arrow[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-arrow_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.t-menu[_ngcontent-%COMP%]{width:11.25rem}.t-checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}.t-buttons[_ngcontent-%COMP%]{display:flex;padding:0 .75rem 1.25rem}.t-direction[_ngcontent-%COMP%]{color:var(--tui-text-02);margin:0 .375rem}.t-direction[_ngcontent-%COMP%]:hover, .t-direction_active[_ngcontent-%COMP%]{color:var(--tui-text-01);background:var(--tui-secondary-hover)}.t-edit[_ngcontent-%COMP%]{margin:1.25rem}.t-palette[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:inset 0 1px var(--tui-base-03)}'],changeDetection:0}),(0,C.gn)([(0,ot.tuiDefaultProp)()],st.prototype,"colors",void 0),(0,C.gn)([(0,ot.tuiRequiredSetter)()],st.prototype,"colorSetter",null),(0,C.gn)([ot.tuiPure],st.prototype,"getStopsKeys",null),(0,C.gn)([ot.tuiPure],st.prototype,"filterPalette",null)},71424:(Yt,Ct,c)=>{c.d(Ct,{J:()=>g});var C=c(64762),l=c(74788),y=c(62141),D=c(68807);class g{constructor(B){this.value=[0,0],this.valueChange=new l.vpe,B.subscribe(X=>{this.value=X,this.valueChange.emit([X[0],X[1]])})}get left(){return 100*this.value[0]}get top(){return 100*this.value[1]}}g.\u0275fac=function(B){return new(B||g)(l.Y36(y.i))},g.\u0275cmp=l.Xpm({type:g,selectors:[["tui-flat-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[l._Bn([D.TuiDestroyService,y.i])],decls:1,vars:4,consts:[[1,"t-circle"]],template:function(B,X){1&B&&l._UZ(0,"div",0),2&B&&l.Udp("left",X.left,"%")("top",X.top,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:-.5rem 0 0 -.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,C.gn)([(0,D.tuiDefaultProp)()],g.prototype,"value",void 0)},27050:(Yt,Ct,c)=>{c.d(Ct,{hR:()=>C.h,TD:()=>B,$v:()=>X.$,H9:()=>ct,sV:()=>Mt.s,wl:()=>It,Jd:()=>Pt.J,ui:()=>et,es:()=>At.e,GU:()=>ft,P:()=>pt.P,g7:()=>mt,Rh:()=>tt.R,VM:()=>bt});var C=c(97019),l=c(12057),y=c(24751),D=c(3497),g=c(55908),ot=c(74788);let B=(()=>{class F{}return F.\u0275fac=function(Y){return new(Y||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez,y.u5,g.TextMaskModule,g.TuiValueAccessorModule,g.TuiSelectModule,D.TuiPrimitiveTextfieldModule,D.TuiTextfieldControllerModule,D.TuiDropdownModule,g.TuiInputCountModule,D.TuiDataListModule]]}),F})();var X=c(49289);let et=(()=>{class F{}return F.\u0275fac=function(Y){return new(Y||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez]]}),F})(),mt=(()=>{class F{}return F.\u0275fac=function(Y){return new(Y||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez]]}),F})(),ct=(()=>{class F{}return F.\u0275fac=function(Y){return new(Y||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez,et,mt]]}),F})();var Mt=c(23999),it=c(68807);let ft=(()=>{class F{}return F.\u0275fac=function(Y){return new(Y||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez]]}),F})(),bt=(()=>{class F{}return F.\u0275fac=function(Y){return new(Y||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez,D.TuiHintModule]]}),F})(),It=(()=>{class F{}return F.\u0275fac=function(Y){return new(Y||F)},F.\u0275mod=ot.oAB({type:F}),F.\u0275inj=ot.cJS({imports:[[l.ez,D.TuiButtonModule,D.TuiHostedDropdownModule,ct,ft,D.TuiHintModule,D.TuiSvgModule,D.TuiDataListModule,it.TuiActiveZoneModule,B,D.TuiGroupModule,bt]]}),F})();var Pt=c(71424),At=c(49472),pt=c(65720),tt=c(5451)},49472:(Yt,Ct,c)=>{c.d(Ct,{e:()=>B});var C=c(64762),l=c(74788),y=c(62141),D=c(68807),g=c(12057);function ot(X,et){if(1&X){const mt=l.EpF();l.TgZ(0,"div",1),l.NdJ("mousedown",function(){const it=l.CHM(mt).index;return l.oxw().onMouseDown(it)})("dblclick",function(){const it=l.CHM(mt).index;return l.oxw().onClick(it)}),l.qZA()}2&X&&l.Udp("left",100*et.$implicit,"%")}class B{constructor(et){this.value=[0,1],this.valueChange=new l.vpe,this.indexChange=new l.vpe,this.index=NaN,et.subscribe(([mt])=>{this.onPicker(mt)})}onMouseUp(){this.index=NaN}onMouseDown(et){this.updateIndex(et)}onClick(et){this.value.length>2&&this.updateValue(this.value.filter((mt,ct)=>ct!==et))}onPicker(et){Number.isNaN(this.index)&&(this.updateIndex(this.value.length),this.value=[...this.value,0]),!this.value.some((mt,ct)=>mt===et&&ct!==this.index)&&this.updateValue(this.value.map((mt,ct)=>ct===this.index?et:mt))}updateIndex(et){this.index=et,this.indexChange.emit(et)}updateValue(et){this.value=et,this.valueChange.emit(et)}}B.\u0275fac=function(et){return new(et||B)(l.Y36(y.i))},B.\u0275cmp=l.Xpm({type:B,selectors:[["tui-linear-multi-picker"]],hostBindings:function(et,mt){1&et&&l.NdJ("mouseup",function(){return mt.onMouseUp()},!1,l.evT)},inputs:{value:"value"},outputs:{valueChange:"valueChange",indexChange:"indexChange"},features:[l._Bn([D.TuiDestroyService,y.i])],decls:1,vars:1,consts:[["class","t-circle",3,"left","mousedown","dblclick",4,"ngFor","ngForOf"],[1,"t-circle",3,"mousedown","dblclick"]],template:function(et,mt){1&et&&l.YNc(0,ot,1,2,"div",0),2&et&&l.Q6J("ngForOf",mt.value)},directives:[g.sg],styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,C.gn)([(0,D.tuiDefaultProp)()],B.prototype,"value",void 0)},65720:(Yt,Ct,c)=>{c.d(Ct,{P:()=>g});var C=c(64762),l=c(74788),y=c(62141),D=c(68807);class g{constructor(B){this.value=0,this.valueChange=new l.vpe,B.subscribe(([X])=>{this.value=X,this.valueChange.emit(X)})}get left(){return 100*this.value}}g.\u0275fac=function(B){return new(B||g)(l.Y36(y.i))},g.\u0275cmp=l.Xpm({type:g,selectors:[["tui-linear-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[l._Bn([D.TuiDestroyService,y.i])],decls:1,vars:2,consts:[[1,"t-circle"]],template:function(B,X){1&B&&l._UZ(0,"div",0),2&B&&l.Udp("left",X.left,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,C.gn)([(0,D.tuiDefaultProp)()],g.prototype,"value",void 0)},5451:(Yt,Ct,c)=>{c.d(Ct,{R:()=>ct});var C=c(64762),l=c(74788),y=c(68807),D=c(12057),g=c(67446),ot=c(29070),B=c(54255),X=c(15491),et=c(219);function mt(Mt,it){if(1&Mt){const ft=l.EpF();l.TgZ(0,"button",1),l.NdJ("click",function(){const Pt=l.CHM(ft).$implicit;return l.oxw().selectedColor.emit(Pt.value)}),l.qZA()}if(2&Mt){const ft=it.$implicit;l.Udp("background",ft.value),l.Q6J("tuiHint",ft.key)("tuiHintDescribe",ft.key)("id",ft.key)}}class ct{constructor(){this.colors=new Map,this.selectedColor=new l.vpe,this.originalOrder=(it,ft)=>0}}ct.\u0275fac=function(it){return new(it||ct)},ct.\u0275cmp=l.Xpm({type:ct,selectors:[["tui-palette"]],inputs:{colors:"colors"},outputs:{selectedColor:"selectedColor"},decls:2,vars:4,consts:[["type","button","class","t-button",3,"background","tuiHint","tuiHintDescribe","id","click",4,"ngFor","ngForOf"],["type","button",1,"t-button",3,"tuiHint","tuiHintDescribe","id","click"]],template:function(it,ft){1&it&&(l.YNc(0,mt,1,5,"button",0),l.ALo(1,"keyvalue")),2&it&&l.Q6J("ngForOf",l.xi3(1,1,ft.colors,ft.originalOrder))},directives:[D.sg,g.D,ot.x,B.t,X.D,et.$],pipes:[D.Nd],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;padding:.875rem}.t-button[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;width:1.5625rem;height:1.5625rem;box-sizing:border-box;margin:.375rem;border-radius:var(--tui-radius-m);border:1px solid rgba(0,0,0,.08)}"],changeDetection:0}),(0,C.gn)([(0,y.tuiDefaultProp)()],ct.prototype,"colors",void 0)},45050:(Yt,Ct,c)=>{c.d(Ct,{l:()=>Dt});var C=c(64762),l=c(12057),y=c(74788),D=c(64352),g=c(84614),ot=c(14309),B=c(68807),X=c(87623),et=c(20986),mt=c(24751),ct=c(34880),Mt=c(76189),it=c(66596),ft=c(3881),bt=c(22613),It=c(98266);function Pt(St,_t){1&St&&(y.ynx(0),y._uU(1,"Edit anchor"),y.BQk())}function At(St,_t){1&St&&(y.TgZ(0,"span"),y._uU(1,"Link to anchor"),y.qZA())}function pt(St,_t){1&St&&(y.TgZ(0,"span"),y._uU(1,"URL"),y.qZA())}function tt(St,_t){if(1&St&&(y.YNc(0,At,2,0,"span",1),y.YNc(1,pt,2,0,"ng-template",null,12,y.W1O)),2&St){const wt=y.MAs(2),kt=y.oxw(2);y.Q6J("ngIf",kt.prefixIsHashMode)("ngIfElse",wt)}}function F(St,_t){if(1&St&&(y.ynx(0),y._uU(1),y.BQk()),2&St){const wt=_t.ngIf,kt=y.oxw(2);y.xp6(1),y.hij(" ",kt.prefixIsHashMode?wt.anchorExample:wt.urlExample," ")}}function ut(St,_t){if(1&St){const wt=y.EpF();y.ynx(0),y.TgZ(1,"label",4),y.TgZ(2,"div",5),y.YNc(3,Pt,2,0,"ng-container",1),y.YNc(4,tt,3,2,"ng-template",null,6,y.W1O),y.qZA(),y.TgZ(6,"div",7),y.TgZ(7,"div",8),y._uU(8),y.qZA(),y.TgZ(9,"tui-input-inline",9),y.NdJ("ngModelChange",function(z){return y.CHM(wt),y.oxw().url=z})("input",function(z){let dt;return y.CHM(wt),y.oxw().onChange(null==(dt=z.target)?null:dt.value)})("keydown.prevent.enter",function(){return y.CHM(wt),y.oxw().onSave()})("keydown.backspace",function(){return y.CHM(wt),y.oxw().onBackspace()}),y.YNc(10,F,2,1,"ng-container",3),y.ALo(11,"async"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(12,"tui-svg",10),y.NdJ("click",function(){return y.CHM(wt),y.oxw().onClear()}),y.qZA(),y.TgZ(13,"button",11),y.NdJ("click",function(){return y.CHM(wt),y.oxw().onSave()}),y.qZA(),y.BQk()}if(2&St){const wt=y.MAs(5),kt=y.oxw();y.xp6(3),y.Q6J("ngIf",kt.anchorMode)("ngIfElse",wt),y.xp6(5),y.Oqu(kt.prefix),y.xp6(1),y.ekj("t-input_filled",kt.hasUrl),y.Q6J("ngModel",kt.url),y.xp6(1),y.Q6J("ngIf",y.lcZ(11,9,kt.texts$)),y.xp6(2),y.ekj("t-cleaner_hidden",!kt.hasUrl)}}function Y(St,_t){if(1&St){const wt=y.EpF();y.TgZ(0,"a",13),y._uU(1),y.ALo(2,"tuiShortUrl"),y.qZA(),y.TgZ(3,"button",14),y.NdJ("click",function(){return y.CHM(wt),y.oxw().onEdit()}),y.qZA(),y.TgZ(4,"button",15),y.NdJ("click",function(){return y.CHM(wt),y.oxw().onRemove()}),y.qZA()}if(2&St){const wt=y.oxw();y.Q6J("href",wt.href,y.LSH),y.xp6(1),y.AsE(" ",wt.anchorMode?"#":"","",y.lcZ(2,3,wt.url)," ")}}function xt(St,_t){if(1&St){const wt=y.EpF();y.TgZ(0,"button",19),y.NdJ("click",function(){const rt=y.CHM(wt).$implicit;return y.oxw(2).setAnchor(rt)}),y._uU(1),y.qZA()}if(2&St){const wt=_t.$implicit;y.xp6(1),y.hij(" #",wt," ")}}function Bt(St,_t){if(1&St&&(y.ynx(0),y._UZ(1,"hr",16),y.TgZ(2,"tui-scrollbar"),y.TgZ(3,"div",17),y.YNc(4,xt,2,1,"button",18),y.ALo(5,"tuiFilterAnchors"),y.qZA(),y.qZA(),y.BQk()),2&St){const wt=y.oxw();y.xp6(4),y.Q6J("ngForOf",y.Dn7(5,1,wt.anchorIds,wt.prefix,wt.url))}}class Dt{constructor(_t,wt,kt,z){this.doc=_t,this.texts$=wt,this.editor=kt,this.options=z,this.isOnlyAnchorMode=this.detectAnchorMode(),this.addLink=new y.vpe,this.removeLink=new y.vpe,this.url=this.getHrefOrAnchorId(),this.edit=!this.url,this.prefix=this.makeDefaultPrefix(),this.anchorIds=this.getAllAnchorsIds()}get defaultProtocol(){var _t,wt;return null!==(wt=null===(_t=this.options.linkOptions)||void 0===_t?void 0:_t.protocol)&&void 0!==wt?wt:D.Ci}set anchorMode(_t){this.isOnlyAnchorMode=_t,this.prefix=_t?D._s:this.makeDefaultPrefix()}get anchorMode(){return this.isOnlyAnchorMode}get prefixIsHashMode(){return this.prefix===D._s}get hasUrl(){return!!this.url}get href(){return`${this.prefix}${this.url}`}get showAnchorsList(){return!this.anchorMode&&this.edit&&this.anchorIds.length>0}get isViewMode(){return!this.edit}onSelectionChange(){this.isViewMode&&(this.url=this.getHrefOrAnchorId(),this.anchorMode=this.detectAnchorMode())}onMouseDown(_t){(0,B.tuiIsElement)(_t.target)&&!_t.target.matches("a, button, input")&&_t.preventDefault()}setAnchor(_t){this.url=_t,this.changePrefix(!0)}changePrefix(_t){this.prefix=_t?D._s:this.defaultProtocol}onSave(){this.url?this.addLink.emit(this.href):this.removeLink.emit()}onBackspace(){this.url||(this.prefix=this.isOnlyAnchorMode?D._s:this.defaultProtocol)}onEdit(){this.edit=!0}onRemove(){this.removeLink.emit()}onChange(_t){this.url=this.removePrefix(_t)}onClear(){this.url=""}makeDefaultPrefix(){var _t;const wt=this.getAnchorElement();return wt&&(!wt.getAttribute("href")&&wt.getAttribute("id")||(null===(_t=wt.getAttribute("href"))||void 0===_t?void 0:_t.startsWith(D._s)))?D._s:this.defaultProtocol}detectAnchorMode(){const _t=this.getAnchorElement();return!(null==_t?void 0:_t.href)&&!!(null==_t?void 0:_t.getAttribute("id"))}getFocusedParentElement(){var _t,wt;return(null===(wt=null===(_t=this.doc.getSelection())||void 0===_t?void 0:_t.focusNode)||void 0===wt?void 0:wt.parentElement)||null}getAnchorElement(){var _t;return(null===(_t=this.getFocusedParentElement())||void 0===_t?void 0:_t.closest("a"))||null}getHrefOrAnchorId(){const _t=this.getAnchorElement();return _t?this.removePrefix(_t.getAttribute("href")||_t.getAttribute("id")||""):this.url}removePrefix(_t){return _t.startsWith(D.ML)?(this.prefix=this.isOnlyAnchorMode?D._s:D.ML,_t.replace(D.ML,"")):_t.startsWith(D.Ci)?(this.prefix=this.isOnlyAnchorMode?D._s:D.Ci,_t.replace(D.Ci,"")):_t.startsWith(D._s)?(this.prefix=D._s,_t.replace(D._s,"")):_t}getAllAnchorsIds(){var _t;const wt=Array.from(null!==(_t=this.editor.getOriginTiptapEditor().view.dom.querySelectorAll('[data-type="jump-anchor"]'))&&void 0!==_t?_t:[]);return Array.from(wt).map(kt=>kt.getAttribute("id")||"").filter(Boolean)}}Dt.\u0275fac=function(_t){return new(_t||Dt)(y.Y36(l.K0),y.Y36(ot.b$),y.Y36(g.$3),y.Y36(ot.mJ))},Dt.\u0275cmp=y.Xpm({type:Dt,selectors:[["tui-edit-link"]],hostBindings:function(_t,wt){1&_t&&y.NdJ("selectionchange",function(){return wt.onSelectionChange()},!1,y.evT)("mousedown",function(z){return wt.onMouseDown(z)})},inputs:{anchorMode:"anchorMode"},outputs:{addLink:"addLink",removeLink:"removeLink"},decls:5,vars:3,consts:[[1,"t-edit-link"],[4,"ngIf","ngIfElse"],["view",""],[4,"ngIf"],[1,"t-label"],[1,"t-label-properties"],["fullOptions",""],[1,"t-url"],[1,"t-prefix"],["tuiAutoFocus","",1,"t-input",3,"ngModel","ngModelChange","input","keydown.prevent.enter","keydown.backspace"],["src","tuiIconCloseLarge",1,"t-cleaner",3,"click"],["tuiIconButton","","type","button","size","s","title","Insert link","icon","tuiIconCheckCircleLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],["urlTitle",""],["tuiLink","","target","_blank",1,"t-link",3,"href"],["tuiIconButton","","type","button","size","s","title","Change link","icon","tuiIconEdit2Large","shape","rounded","appearance","icon",1,"t-button","t-edit-button",3,"click"],["tuiIconButton","","type","button","size","s","title","Remove link","icon","tuiIconUnlinkLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],[1,"t-hr"],[1,"t-anchor-list"],["type","button","class","t-anchor",3,"click",4,"ngFor","ngForOf"],["type","button",1,"t-anchor",3,"click"]],template:function(_t,wt){if(1&_t&&(y.TgZ(0,"div",0),y.YNc(1,ut,14,11,"ng-container",1),y.YNc(2,Y,5,5,"ng-template",null,2,y.W1O),y.qZA(),y.YNc(4,Bt,6,5,"ng-container",3)),2&_t){const kt=y.MAs(3);y.xp6(1),y.Q6J("ngIf",wt.edit)("ngIfElse",kt),y.xp6(3),y.Q6J("ngIf",wt.showAnchorsList)}},directives:[l.O5,X.l,et.k,mt.JJ,mt.On,ct.P,Mt.v,it.V,ft.I,l.sg],pipes:[l.Ov,bt.X,It.b],styles:["[_nghost-%COMP%]{display:block;min-width:18.75rem}.t-edit-link[_ngcontent-%COMP%]{display:flex;min-height:4rem;align-items:center;padding-right:.75rem}.t-label[_ngcontent-%COMP%]{font:var(--tui-font-text-s);height:var(--tui-height-l);box-sizing:border-box;padding:.4375rem 1rem;min-width:12.5rem;max-width:25rem;width:100%}.t-label-properties[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:8.375rem;justify-content:space-between}.t-property_inactive[_ngcontent-%COMP%]{opacity:.5}.t-url[_ngcontent-%COMP%]{display:flex;font:var(--tui-font-text-m);color:var(--tui-text-02)}.t-input[_ngcontent-%COMP%]{flex:1}.t-input_filled[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-button[_ngcontent-%COMP%]{width:2rem;height:2rem;margin:0 .25rem;transition:background .2s}.t-edit-button[_ngcontent-%COMP%]{margin-left:auto}.t-link[_ngcontent-%COMP%]{margin:0 1rem}.t-cleaner[_ngcontent-%COMP%]{transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;color:var(--tui-base-06);cursor:pointer;margin-left:auto}.t-cleaner[_ngcontent-%COMP%]:hover{color:var(--tui-base-07)}.t-cleaner_hidden[_ngcontent-%COMP%]{visibility:hidden}.t-anchor-list[_ngcontent-%COMP%]{display:flex;max-height:12.5rem;flex-direction:column}.t-anchor[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;background:none;font-size:inherit;line-height:inherit;min-height:2.75rem;padding:.375rem .5rem;margin:.125rem .5rem;border-radius:var(--tui-radius-m);text-align:left}.t-anchor[_ngcontent-%COMP%]:hover{background:var(--tui-base-02);cursor:pointer}"],changeDetection:0}),(0,C.gn)([(0,B.tuiDefaultProp)()],Dt.prototype,"anchorMode",null)},71115:(Yt,Ct,c)=>{c.d(Ct,{lV:()=>C.l,Fu:()=>X,bL:()=>et.b,X:()=>mt.X});var C=c(45050),l=c(12057),y=c(24751),D=c(68807),g=c(3497),ot=c(55908),B=c(74788);let X=(()=>{class ct{}return ct.\u0275fac=function(it){return new(it||ct)},ct.\u0275mod=B.oAB({type:ct}),ct.\u0275inj=B.cJS({imports:[[l.ez,y.u5,D.TuiAutoFocusModule,g.TuiButtonModule,g.TuiSvgModule,g.TuiLinkModule,ot.TuiInputInlineModule,ot.TuiToggleModule,g.TuiScrollbarModule]]}),ct})();var et=c(98266),mt=c(22613)},98266:(Yt,Ct,c)=>{c.d(Ct,{b:()=>l});var C=c(74788);let l=(()=>{class y{transform(g,ot,B){return"#"===ot?g.filter(X=>X!==B):g}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275pipe=C.Yjl({name:"tuiFilterAnchors",type:y,pure:!0}),y})()},22613:(Yt,Ct,c)=>{c.d(Ct,{X:()=>g});var C=c(74788);let g=(()=>{class ot{transform(X){return X.length<60?X:`${X.slice(0,Math.max(0,40))}...${X.slice(X.length-10)}`}}return ot.\u0275fac=function(X){return new(X||ot)},ot.\u0275pipe=C.Yjl({name:"tuiShortUrl",type:ot,pure:!0}),ot})()},96570:(Yt,Ct,c)=>{c.d(Ct,{V:()=>ct});var C=c(74788),l=c(68807),y=c(25126),D=c(39953),g=c(12057);const ot=function(){return[0,1]};function B(Mt,it){if(1&Mt){const ft=C.EpF();C.TgZ(0,"div",4),C.NdJ("tuiSizeChange",function(It){return C.CHM(ft),C.oxw().sizeChange.emit(It)}),C.qZA()}2&Mt&&C.Q6J("tuiResizer",C.DdM(1,ot))}const X=function(Mt){return[Mt,0]},et=function(){return[1,0]},mt=["*"];let ct=(()=>{class Mt{constructor(){this.autoHeight=!1,this.width=null,this.height=null,this.sizeChange=new C.vpe}get hostWidth(){return(0,l.tuiIsNumber)(this.width)?(0,l.tuiPx)(this.width):this.width}get hostHeight(){return this.autoHeight?null:(0,l.tuiIsNumber)(this.height)?(0,l.tuiPx)(this.height):this.height}}return Mt.\u0275fac=function(ft){return new(ft||Mt)},Mt.\u0275cmp=C.Xpm({type:Mt,selectors:[["tui-editor-resizable"]],hostVars:4,hostBindings:function(ft,bt){2&ft&&C.Udp("width",bt.hostWidth)("height",bt.hostHeight)},inputs:{autoHeight:"autoHeight",width:"width",height:"height"},outputs:{sizeChange:"sizeChange"},ngContentSelectors:mt,decls:5,vars:8,consts:[["tuiResizeable","",1,"t-resizable"],[1,"t-handle","t-handle-left-side",3,"tuiResizer","tuiSizeChange"],["class","t-handle t-handle-bottom-side",3,"tuiResizer","tuiSizeChange",4,"ngIf"],[1,"t-handle","t-handle-right-side",3,"tuiResizer","tuiSizeChange"],[1,"t-handle","t-handle-bottom-side",3,"tuiResizer","tuiSizeChange"]],template:function(ft,bt){1&ft&&(C.F$t(),C.TgZ(0,"div",0),C.Hsn(1),C.TgZ(2,"div",1),C.NdJ("tuiSizeChange",function(Pt){return bt.sizeChange.emit(Pt)}),C.qZA(),C.YNc(3,B,1,2,"div",2),C.TgZ(4,"div",3),C.NdJ("tuiSizeChange",function(Pt){return bt.sizeChange.emit(Pt)}),C.qZA(),C.qZA()),2&ft&&(C.ekj("t-resizable-auto-height",bt.autoHeight),C.xp6(2),C.Q6J("tuiResizer",C.VKq(5,X,-1)),C.xp6(1),C.Q6J("ngIf",!bt.autoHeight),C.xp6(1),C.Q6J("tuiResizer",C.DdM(7,et)))},directives:[y.U,D.L,g.O5],styles:['[_nghost-%COMP%]{position:relative;display:inline-block;box-sizing:border-box}[_nghost-%COMP%]   .t-resizable[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]   .t-resizable-auto-height[_ngcontent-%COMP%]{height:auto!important}[_nghost-%COMP%]   iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}[_nghost-%COMP%]:hover   .t-handle[_ngcontent-%COMP%]:after{opacity:1}.t-handle[_ngcontent-%COMP%]{position:absolute;top:0;display:flex;width:.75rem;cursor:col-resize;justify-content:center;align-items:center;height:100%}.t-handle[_ngcontent-%COMP%]:after{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";width:50%;height:33%;box-sizing:border-box;border-radius:var(--tui-radius-m);background:var(--tui-base-08);border:1px solid var(--tui-base-03);opacity:0}.t-handle-left-side[_ngcontent-%COMP%]{left:0}.t-handle-bottom-side[_ngcontent-%COMP%]{top:unset;bottom:.3125rem;height:.95rem;width:100%}.t-handle-right-side[_ngcontent-%COMP%]{right:0}'],changeDetection:0}),Mt})()},95110:(Yt,Ct,c)=>{c.d(Ct,{_3:()=>ot,V_:()=>B.V,Sl:()=>et});var C=c(40400),l=c(68807),y=c(66682),D=c(46782),g=c(74788);let ot=(()=>{class mt extends C.d{constructor(Mt,it){super(),this._height=0,this._width=0,(0,y.T)((0,l.tuiTypedFromEvent)(Mt,"touchend"),(0,l.tuiTypedFromEvent)(Mt,"mouseup")).pipe((0,D.R)(it)).subscribe(()=>this.updateAttributes({width:this.width,height:this.height}))}get attrs(){var Mt;return(null===(Mt=this.node)||void 0===Mt?void 0:Mt.attrs)||{src:""}}get width(){return this._width||this.attrs.width||null}get height(){return this._height||this.attrs.height||null}}return mt.\u0275fac=function(Mt){return new(Mt||mt)(g.Y36(Document),g.Y36(l.TuiDestroyService))},mt.\u0275dir=g.lG2({type:mt,features:[g.qOj]}),mt})();var B=c(96570),X=c(12057);let et=(()=>{class mt{}return mt.\u0275fac=function(Mt){return new(Mt||mt)},mt.\u0275mod=g.oAB({type:mt}),mt.\u0275inj=g.cJS({imports:[[X.ez,l.TuiResizeModule,l.TuiResizerModule]]}),mt})()},20179:(Yt,Ct,c)=>{c.d(Ct,{D:()=>ot});var C=c(12057),l=c(74788),y=c(82113),D=c(68807),g=c(3497);let ot=(()=>{class B{constructor(et,mt,ct,Mt,it,ft){this.el=et,this.renderer=mt,this.sanitizer=ct,this.tuiSanitizer=Mt,this.document=it,this.editor=ft}set content(et){this.renderer.setProperty(this.el.nativeElement,"innerHTML",this.tuiSanitizer?this.tuiSanitizer.sanitize(l.q3G.HTML,et.replace(/colwidth/g,"width")):this.sanitizer.sanitize(l.q3G.HTML,et))}click(et){var mt,ct;if(this.editor||!(0,D.tuiIsElement)(et.target))return;const Mt=(null===(ct=null===(mt=et.target)||void 0===mt?void 0:mt.closest("a"))||void 0===ct?void 0:ct.getAttribute("href"))||"";!Mt.startsWith("#")||(this.document.location.hash=Mt.replace("#",""),et.preventDefault())}}return B.\u0275fac=function(et){return new(et||B)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.Tiy),l.Y36(g.TUI_SANITIZER,8),l.Y36(C.K0),l.Y36(y.JU,8))},B.\u0275cmp=l.Xpm({type:B,selectors:[["tui-editor-socket"]],hostAttrs:[1,"tui-editor-socket"],hostBindings:function(et,mt){1&et&&l.NdJ("click",function(Mt){return mt.click(Mt)})},inputs:{content:"content"},decls:0,vars:0,template:function(et,mt){},styles:['.tui-editor-socket{display:block;margin:0;color:var(--tui-text-01);font:var(--tui-font-text-m)}.tui-editor-socket[tuiTiptapEditor]{overflow:hidden}.tui-editor-socket .ProseMirror{min-height:5.375rem;padding:.2rem 1rem;outline:none;white-space:pre-wrap}.tui-editor-socket .resize-cursor{cursor:ew-resize;cursor:col-resize}.tui-editor-socket h1,.tui-editor-socket h2,.tui-editor-socket h3,.tui-editor-socket h4,.tui-editor-socket h5,.tui-editor-socket h6{word-break:break-word;line-height:normal}.tui-editor-socket h1:first-child,.tui-editor-socket h2:first-child,.tui-editor-socket p:last-child{margin-bottom:0}.tui-editor-socket p:last-child,.tui-editor-socket pre:last-child{margin-bottom:0}.tui-editor-socket p:empty:after{content:" ";white-space:pre}.tui-editor-socket p:first-child{margin-top:0}.tui-editor-socket p{margin:1rem 0}.tui-editor-socket blockquote{margin:1.25rem 0 1.25rem 1.5rem;padding-left:1.0625rem;border-left:1px solid var(--tui-base-04)}.tui-editor-socket hr{border:none;border-top:1px solid var(--tui-base-03);margin:1rem 0}.tui-editor-socket mark{background:unset;color:inherit}.tui-editor-socket font[face="Courier New"]{display:inline-block;padding:.25rem .5rem;border-radius:.25rem;background-color:#ecf1f7;word-break:break-word}.tui-editor-socket a:not([data-type="jump-anchor"]){color:var(--tui-link);text-decoration:none;outline:none}.tui-editor-socket a:not([data-type="jump-anchor"]):hover{color:var(--tui-link-hover);text-decoration:underline}.tui-editor-socket a:not([data-type="jump-anchor"]):active{color:var(--tui-primary-active)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]{text-decoration:underline;-webkit-text-decoration-color:var(--tui-link);text-decoration-color:var(--tui-link)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:before{content:"#"}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:hover{color:var(--tui-link)}.tui-editor-socket ul,.tui-editor-socket ol{list-style-type:none;margin:1rem 1rem 1rem 1.5rem;padding:0}.tui-editor-socket li{margin:1rem 0}.tui-editor-socket li>p{display:inline;margin:0 auto;word-break:break-word}.tui-editor-socket ul li>p{display:inline-block}.tui-editor-socket ul>li:before{content:"";display:inline-block;width:.5rem;height:.5rem;border-radius:100%;margin:.5rem .875rem .0625rem -1.375rem;background-color:var(--tui-primary);vertical-align:top;box-sizing:border-box}.tui-editor-socket li ul>li:before{background:none;border:.125rem solid var(--tui-primary)}.tui-editor-socket li ul>li>ul>li:before{background:var(--tui-primary);border-radius:0;width:.375rem;height:.375rem}.tui-editor-socket ol{counter-reset:item}.tui-editor-socket ol>li:before{content:counters(item,".") ".";width:1.5rem;margin:0 .75rem 0 -1.5rem;counter-increment:item;color:var(--tui-base-05);vertical-align:top}.tui-editor-socket._preview-image img{cursor:pointer}.tui-editor-socket .ProseMirror video,.tui-editor-socket .ProseMirror audio{pointer-events:none}.tui-editor-socket .t-editor-placeholder:before{content:attr(data-placeholder);float:left;color:var(--tui-base-05);pointer-events:none;height:0}.tui-editor-socket table{border-collapse:collapse;table-layout:fixed;width:100%;margin:0;overflow:hidden}.tui-editor-socket table .tableWrapper{overflow-x:auto}.tui-editor-socket .tableWrapper,.tui-editor-socket .tui-table-wrapper{overflow-x:auto}.tui-editor-socket table td{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word}.tui-editor-socket table th{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word;font-weight:bold;text-align:left;background-color:var(--tui-base-02);min-height:2rem}.tui-editor-socket table .column-resize-handle{position:absolute;right:-2px;top:0;bottom:-2px;width:4px;background-color:#adf;pointer-events:none}.tui-editor-socket table td>*{margin-top:0;margin-bottom:0}.tui-editor-socket table th>*{margin-top:0;margin-bottom:0}.tui-editor-socket .selectedCell:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:var(--tui-selection);pointer-events:none}.tui-editor-socket summary{display:flex;align-items:center;min-height:3.5rem;width:100%;padding:0 1.25rem;box-sizing:border-box;border-radius:var(--tui-radius-l);pointer-events:none;outline:none}.tui-editor-socket summary:focus-visible{outline:2px solid var(--tui-link)}.tui-editor-socket summary p{min-width:1px;margin:0}.tui-editor-socket summary::-webkit-details-marker{display:none}.tui-editor-socket details[open] summary{border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-editor-socket .details-arrow,.tui-editor-socket .t-details-arrow{position:absolute;top:1.5rem;right:1.25rem;height:.575rem;width:.575rem;border:1px solid var(--tui-base-06);border-width:0 2px 2px 0;transform:rotate(45deg);transition:var(--tui-duration, .3s);-webkit-appearance:none;-moz-appearance:none;appearance:none;box-sizing:border-box;padding:0;background:none;cursor:pointer;outline:none}.tui-editor-socket details{width:100%;border:1px solid var(--tui-base-04);border-radius:var(--tui-radius-l)}.tui-editor-socket div[data-type=details-content]{padding:1.25rem;min-height:3rem;border:1px solid var(--tui-base-04);border-width:1px 0 0}.tui-editor-socket div[data-type=details-content] h1:first-child,.tui-editor-socket div[data-type=details-content] h2:first-child,.tui-editor-socket div[data-type=details-content] pre:first-child,.tui-editor-socket div[data-type=details-content] ul:first-child,.tui-editor-socket div[data-type=details-content] ol:first-child,.tui-editor-socket div[data-type=details-content] ol li:first-child,.tui-editor-socket div[data-type=details-content] ul li:first-child{margin-top:0}.tui-editor-socket .details-wrapper,.tui-editor-socket .t-details-wrapper{margin-bottom:.5rem;position:relative;display:flex}.tui-editor-socket .details-wrapper_rendered .details-arrow,.tui-editor-socket .t-details-wrapper_rendered .details-arrow,.tui-editor-socket .details-wrapper_rendered .t-details-arrow,.tui-editor-socket .t-details-wrapper_rendered .t-details-arrow{pointer-events:none}.tui-editor-socket .details-wrapper_rendered summary,.tui-editor-socket .t-details-wrapper_rendered summary{transition:transform var(--tui-duration, .3s);cursor:pointer;pointer-events:auto}.tui-editor-socket .details-wrapper_rendered summary:hover,.tui-editor-socket .t-details-wrapper_rendered summary:hover{background:var(--tui-base-02)}.tui-editor-socket details[open]+.details-arrow,.tui-editor-socket details[open]+.t-details-arrow{top:1.75rem;transform:rotate(225deg)}.tui-editor-socket pre{white-space:pre-wrap;word-break:break-word;border-radius:.25rem;margin:1rem 0;padding:.75rem 1rem;font-family:Courier,monospace;color:var(--tui-text-02);background:var(--tui-base-02)}.tui-editor-socket .tui-group-node{display:flex;flex-direction:row}.tui-editor-socket .tui-group-node:hover>.tui-group-pointer{pointer-events:auto;opacity:1}.tui-editor-socket .tui-group-pointer{opacity:0;min-height:.8125rem;max-height:.8125rem;min-width:.8125rem;max-width:.8125rem;margin:.3125rem .3125rem 0 0;cursor:grab;background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="black" /></svg>\');background-repeat:no-repeat;background-size:contain;background-position:center}.tui-editor-socket [data-mode=onDark] .tui-group-pointer{background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="white" /></svg>\')}\n'],encapsulation:2,changeDetection:0}),B})()},69303:(Yt,Ct,c)=>{c.d(Ct,{a:()=>st});var C=c(64762),l=c(12057),y=c(74788),D=c(24751),g=c(17406),ot=c(64352),B=c(84614),X=c(14309),et=c(27863),mt=c(68807),ct=c(79089),Mt=c(40939),it=c(2697),ft=c(17163),bt=c(3881),It=c(1433),Pt=c(9872),At=c(4997),pt=c(33250),tt=c(26072),F=c(9829),ut=c(82886),Y=c(39088),xt=c(20179),Bt=c(74982),Dt=c(45050);function St(J,Q){if(1&J){const nt=y.EpF();y.TgZ(0,"tui-toolbar",9),y.NdJ("fileAttached",function(Jt){return y.CHM(nt),y.oxw(2).fileAttached.emit(Jt)}),y.Hsn(1,1),y.qZA()}if(2&J){const nt=y.oxw(2);y.Q6J("tools",nt.tools)("disabled",!nt.interactive)}}function _t(J,Q){if(1&J&&(y.TgZ(0,"div",10),y._uU(1),y.qZA()),2&J){const nt=y.oxw(2);y.xp6(1),y.hij(" ",nt.exampleText," ")}}function wt(J,Q){if(1&J){const nt=y.EpF();y.TgZ(0,"div",11),y.TgZ(1,"tui-editor-socket",12),y.NdJ("valueChange",function(Jt){return y.CHM(nt),y.oxw(2).onModelChange(Jt)})("stateChange",function(){return 0}),y.qZA(),y.qZA()}if(2&J){y.oxw();const nt=y.MAs(9),Lt=y.oxw();y.Q6J("tuiDropdownSelection",Lt.dropdownSelectionHandler)("tuiDropdown",nt),y.xp6(1),y.Q6J("value",Lt.value)("editable",Lt.interactive)}}function kt(J,Q){if(1&J){const nt=y.EpF();y.TgZ(0,"tui-edit-link",13,14),y.NdJ("addLink",function(Jt){y.CHM(nt);const Zt=y.MAs(1),ne=y.oxw(2);return Zt.anchorMode?ne.addAnchor(Jt):ne.addLink(Jt)})("removeLink",function(){y.CHM(nt);const Jt=y.MAs(1),Zt=y.oxw(2);return Jt.anchorMode?Zt.removeAnchor():Zt.removeLink()}),y.qZA()}}function z(J,Q){if(1&J){const nt=y.EpF();y.TgZ(0,"div",1),y.NdJ("tuiActiveZoneChange",function(Jt){return y.CHM(nt),y.oxw().onActiveZone(Jt)}),y.TgZ(1,"div",2),y.YNc(2,St,2,2,"tui-toolbar",3),y.TgZ(3,"div",4),y.Hsn(4),y.qZA(),y.YNc(5,_t,2,1,"div",5),y.qZA(),y.TgZ(6,"tui-scrollbar",6),y.YNc(7,wt,2,4,"div",7),y.YNc(8,kt,2,0,"ng-template",null,8,y.W1O),y._UZ(10,"tui-editor-portal-host"),y.qZA(),y.qZA()}if(2&J){const nt=Q.tuiLet,Lt=y.oxw();y.Q6J("readOnly",Lt.readOnly)("disabled",Lt.disabled)("focus",Lt.computedFocused)("hover",Lt.pseudoHover)("invalid",Lt.computedInvalid),y.xp6(2),y.Q6J("ngIf",nt),y.xp6(1),y.ekj("t-placeholder_raised",Lt.placeholderRaised),y.xp6(2),y.Q6J("ngIf",Lt.hasExampleText),y.xp6(2),y.Q6J("ngIf",nt)}}const rt=["*",[["tools"]]];class st extends mt.AbstractTuiControl{constructor(Q,nt,Lt,Jt,Zt,ne){super(Q,nt),this.editorLoaded$=Lt,this.editorService=Jt,this.contentProcessor=Zt,this.doc=ne,this.exampleText="",this.tools=ot.Db,this.fileAttached=new y.vpe,this.focused=!1,this.isSelectionLink=Wt=>this.currentFocusedNodeIsAnchor(Wt)&&(0,et.nC)(Wt)}get nativeFocusableElement(){var Q;return this.computedDisabled?null:(null===(Q=this.el)||void 0===Q?void 0:Q.nativeElement)||null}get dropdownSelectionHandler(){return this.focused?this.isSelectionLink:mt.ALWAYS_FALSE_HANDLER}get editor(){return this.editorService.getOriginTiptapEditor()?this.editorService:null}get placeholderRaised(){return this.computedFocused&&!this.readOnly||this.hasValue}get hasExampleText(){return!!this.exampleText&&this.computedFocused&&!this.hasValue&&!this.readOnly}writeValue(Q){var nt;if(Q===this.value)return;const Lt=this.contentProcessor(Q||"");super.writeValue(Lt),Lt!==Q&&(null===(nt=this.control)||void 0===nt||nt.setValue(Lt,{onlySelf:!1,emitEvent:!1,emitModelToViewChange:!1,emitViewToModelChange:!1}))}onActiveZone(Q){var nt;this.focused=Q,this.updateFocused(Q),null===(nt=this.control)||void 0===nt||nt.updateValueAndValidity()}onModelChange(Q){this.value=Q}addAnchor(Q){var nt;null===(nt=this.editor)||void 0===nt||nt.setAnchor(Q)}removeAnchor(){var Q;null===(Q=this.editor)||void 0===Q||Q.removeAnchor()}addLink(Q){var nt,Lt;null===(nt=this.editor)||void 0===nt||nt.selectClosest(),null===(Lt=this.editor)||void 0===Lt||Lt.setLink(Q)}removeLink(){var Q;null===(Q=this.editor)||void 0===Q||Q.unsetLink()}ngOnDestroy(){var Q;null===(Q=this.editor)||void 0===Q||Q.destroy()}getFallbackValue(){return""}currentFocusedNodeIsAnchor(Q){var nt,Lt,Jt;return!!(null===(Lt=null===(nt=Q.startContainer.parentElement)||void 0===nt?void 0:nt.closest("a"))||void 0===Lt?void 0:Lt.contains((null===(Jt=this.doc.getSelection())||void 0===Jt?void 0:Jt.focusNode)||null))}get hasValue(){return!!this.value}}st.\u0275fac=function(Q){return new(Q||st)(y.Y36(D.a5,10),y.Y36(y.sBO),y.Y36(X.ZW),y.Y36(B.$3),y.Y36(X.F1),y.Y36(l.K0))},st.\u0275cmp=y.Xpm({type:st,selectors:[["tui-editor"]],viewQuery:function(Q,nt){if(1&Q&&(y.Gf(B.JU,5,y.SBq),y.Gf(g.M6,5)),2&Q){let Lt;y.iGM(Lt=y.CRH())&&(nt.el=Lt.first),y.iGM(Lt=y.CRH())&&(nt.toolbar=Lt.first)}},inputs:{exampleText:"exampleText",tools:"tools"},outputs:{fileAttached:"fileAttached"},features:[y._Bn([(0,mt.tuiAsFocusableItemAccessor)(st),ct.m]),y.qOj],ngContentSelectors:["*","tools"],decls:2,vars:3,consts:[["tuiWrapper","","appearance","textfield","class","t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange",4,"tuiLet"],["tuiWrapper","","appearance","textfield",1,"t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange"],[1,"t-toolbar-wrapper"],[3,"tools","disabled","fileAttached",4,"ngIf"],[1,"t-placeholder"],["class","t-example-text",4,"ngIf"],["tuiEditorPortal","",1,"t-scrollbar"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown",4,"ngIf"],["dropdown",""],[3,"tools","disabled","fileAttached"],[1,"t-example-text"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown"],["tuiTiptapEditor","","spellcheck","false",1,"tui-editor-socket",3,"value","editable","valueChange","stateChange"],[3,"addLink","removeLink"],["link",""]],template:function(Q,nt){1&Q&&(y.F$t(rt),y.YNc(0,z,11,10,"div",0),y.ALo(1,"async")),2&Q&&y.Q6J("tuiLet",y.lcZ(1,1,nt.editorLoaded$))},directives:[Mt.L,it.o,ft.e,l.O5,bt.I,It.A,Pt.d,At.M,pt.Ek,tt.t,F.V,ut.A,Y.y,xt.D,Bt.J,Dt.l],pipes:[l.Ov],styles:["[_nghost-%COMP%]{position:relative;z-index:0;display:block;font:var(--tui-font-text-m);border-radius:var(--tui-radius-m)}.t-wrapper[_ngcontent-%COMP%]{display:flex;max-height:inherit;min-height:10rem;cursor:text;overflow:hidden;flex-direction:column;border-radius:inherit}.t-placeholder[_ngcontent-%COMP%]{transition-property:transform,font-size,color,letter-spacing;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;font:var(--tui-font-text-s);color:var(--tui-text-01);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;width:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;color:var(--tui-text-02);pointer-events:none;will-change:transform;transform:translateY(0);position:absolute;left:1rem;margin-top:1rem;width:95%;font-size:.9375rem}.t-placeholder_raised[_ngcontent-%COMP%]{transform:translateY(-.625rem)}[data-size=m][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font:var(--tui-font-text-xs);transform:translateY(-.5rem);letter-spacing:.025rem}._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], ._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill)}[data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], [data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill-night)}._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-03)}[data-size=l][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{font-size:.9375rem}[data-size=l][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font-size:.8156rem}[data-size=m]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01)}[data-mode=onDark][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}[data-size=m][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}@supports (-webkit-hyphens: none){.t-placeholder[_ngcontent-%COMP%]{will-change:unset;transition-property:transform,color,letter-spacing}}.t-placeholder_raised[_ngcontent-%COMP%]{width:110%}.t-example-text[_ngcontent-%COMP%]{position:absolute;left:1rem;margin-top:1.6rem;color:var(--tui-base-06);letter-spacing:normal;text-transform:none}.t-example-text_light[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}.t-example-text_dark[_ngcontent-%COMP%]{color:var(--tui-text-03)}.t-scrollbar[_ngcontent-%COMP%]{display:flex;max-height:inherit;border-top:1.625rem solid transparent;border-bottom:1px solid transparent;box-sizing:border-box}"],changeDetection:0}),(0,C.gn)([(0,mt.tuiDefaultProp)()],st.prototype,"exampleText",void 0),(0,C.gn)([(0,mt.tuiDefaultProp)()],st.prototype,"tools",void 0)},79089:(Yt,Ct,c)=>{c.d(Ct,{m:()=>mt});var C=c(74788),l=c(84614),y=c(14309),D=c(82298),g=c(9112),ot=c(15257),B=c(88002),X=c(47349),et=c(73825);const mt=[{provide:y.F4,deps:[y.Wf],useFactory:ct=>{const Mt=new D.t(1);return Promise.all(ct).then(it=>Mt.next(it)),Mt}},{provide:y.Y1,deps:[C.Qsj],useFactory:ct=>ct.createElement("div")},{provide:y.ZW,deps:[y.Y1,y.F4,y.bG],useFactory:(ct,Mt,it)=>(0,g.aj)([it,Mt]).pipe((0,ot.q)(1),(0,B.U)(([ft,bt])=>new ft({element:ct,extensions:bt})),(0,X.d)({bufferSize:1,refCount:!0}))},l.$3,et.Y]},9872:(Yt,Ct,c)=>{c.d(Ct,{d:()=>y});var C=c(68807),l=c(74788);let y=(()=>{class D extends C.AbstractTuiPortalHostComponent{}return D.\u0275fac=function(){let g;return function(B){return(g||(g=l.n5z(D)))(B||D)}}(),D.\u0275cmp=l.Xpm({type:D,selectors:[["tui-editor-portal-host"]],features:[l._Bn([{provide:C.AbstractTuiPortalService,useExisting:C.TuiDropdownPortalService},{provide:C.AbstractTuiPortalHostComponent,useExisting:D}]),l.qOj],decls:2,vars:0,consts:[["viewContainer",""]],template:function(ot,B){1&ot&&l.GkF(0,null,0)},styles:["[_nghost-%COMP%]{position:relative;z-index:1;display:block;height:100%}"],changeDetection:0}),D})()},1433:(Yt,Ct,c)=>{c.d(Ct,{A:()=>g});var C=c(74788),l=c(68807),y=c(3497),D=c(73825);let g=(()=>{class ot extends y.TuiRectAccessor{constructor(X){super(),this.el=X,this.type="viewport"}getClientRect(){return this.el.nativeElement.getBoundingClientRect()}}return ot.\u0275fac=function(X){return new(X||ot)(C.Y36(C.SBq))},ot.\u0275dir=C.lG2({type:ot,selectors:[["","tuiEditorPortal",""]],features:[C._Bn([{provide:l.TuiDropdownPortalService,useExisting:D.Y},(0,y.tuiAsViewport)(ot)]),C.qOj]}),ot})()},73825:(Yt,Ct,c)=>{c.d(Ct,{Y:()=>y});var C=c(68807),l=c(74788);let y=(()=>{class D extends C.AbstractTuiPortalService{}return D.\u0275fac=function(){let g;return function(B){return(g||(g=l.n5z(D)))(B||D)}}(),D.\u0275prov=l.Yz7({token:D,factory:D.\u0275fac}),D})()},19769:(Yt,Ct,c)=>{c.d(Ct,{j:()=>Pt});var C=c(64762),l=c(74788),y=c(24751),D=c(91211),g=c(27863),ot=c(68807),B=c(3497),X=c(62939),et=c(63060),mt=c(62733),ct=c(3729),Mt=c(23999),it=c(17163);function ft(At,pt){if(1&At&&l._UZ(0,"div",4),2&At){const tt=l.oxw();l.Udp("background",tt.background)}}function bt(At,pt){if(1&At){const tt=l.EpF();l.TgZ(0,"tui-color-selector",5),l.NdJ("colorChange",function(ut){return l.CHM(tt),l.oxw().value=ut}),l.qZA()}if(2&At){const tt=pt.$implicit,F=l.oxw();l.Q6J("tuiActiveZoneParent",tt)("colors",F.colors)("color",F.value)}}class Pt extends ot.AbstractTuiControl{constructor(pt,tt,F){super(pt,tt),this.domSanitizer=F,this.colors=new Map,this.open=!1}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return!!this.dropdown&&this.dropdown.focused}get background(){return this.sanitize(this.value,this.domSanitizer)}onClick(){this.open=!this.open}onValueChange(pt){this.value=pt}onFocused(pt){this.updateFocused(pt)}getFallbackValue(){return"#000000"}sanitize(pt,tt){return pt.startsWith("linear-gradient(")?tt.bypassSecurityTrustStyle((0,g.CH)((0,g._N)((0,g.U5)(pt)))):pt}}Pt.\u0275fac=function(pt){return new(pt||Pt)(l.Y36(y.a5,10),l.Y36(l.sBO),l.Y36(D.H7))},Pt.\u0275cmp=l.Xpm({type:Pt,selectors:[["tui-input-color"]],viewQuery:function(pt,tt){if(1&pt&&(l.Gf(B.TuiPrimitiveTextfieldComponent,5),l.Gf(B.TuiHostedDropdownComponent,5)),2&pt){let F;l.iGM(F=l.CRH())&&(tt.textfield=F.first),l.iGM(F=l.CRH())&&(tt.dropdown=F.first)}},hostBindings:function(pt,tt){1&pt&&l.NdJ("click",function(){return tt.onClick()})},inputs:{colors:"colors"},features:[l._Bn([],[(0,B.tuiDropdownOptionsProvider)({maxHeight:600})]),l.qOj],ngContentSelectors:["*"],decls:7,vars:12,consts:[[1,"t-wrapper",3,"content","open","openChange"],[1,"t-textfield",3,"tuiTextfieldIconLeft","pseudoFocus","pseudoHover","pseudoActive","invalid","focusable","nativeId","disabled","readOnly","value","valueChange","focusedChange"],["color",""],["picker",""],[1,"t-color"],[3,"tuiActiveZoneParent","colors","color","colorChange"]],template:function(pt,tt){if(1&pt&&(l.F$t(),l.TgZ(0,"tui-hosted-dropdown",0),l.NdJ("openChange",function(ut){return tt.open=ut}),l.TgZ(1,"tui-primitive-textfield",1),l.NdJ("valueChange",function(ut){return tt.value=ut})("focusedChange",function(ut){return tt.onFocused(ut)}),l.Hsn(2),l.qZA(),l.qZA(),l.YNc(3,ft,1,2,"ng-template",null,2,l.W1O),l.YNc(5,bt,1,3,"ng-template",null,3,l.W1O)),2&pt){const F=l.MAs(4),ut=l.MAs(6);l.Q6J("content",ut)("open",tt.open),l.xp6(1),l.Q6J("tuiTextfieldIconLeft",F)("pseudoFocus",tt.computedFocused)("pseudoHover",tt.pseudoHover)("pseudoActive",tt.pseudoActive)("invalid",tt.computedInvalid)("focusable",tt.focusable)("nativeId",tt.nativeId)("disabled",tt.disabled)("readOnly",tt.readOnly)("value",tt.value)}},directives:[X.o,et.y,mt.B,ct.aR,Mt.s,it.e],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-wrapper[_ngcontent-%COMP%]{display:flex;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-color[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-03-dark);border-radius:.125rem}"],changeDetection:0}),(0,C.gn)([(0,ot.tuiDefaultProp)()],Pt.prototype,"colors",void 0),(0,C.gn)([ot.tuiPure],Pt.prototype,"sanitize",null)},37924:(Yt,Ct,c)=>{c.d(Ct,{X:()=>At});var C=c(84614),l=c(14309),y=c(9112),D=c(88002),g=c(74788),ot=c(12057),B=c(40939),X=c(62939),et=c(76189),mt=c(219),ct=c(67446),Mt=c(29070),it=c(54255),ft=c(15491);function bt(pt,tt){if(1&pt){const F=g.EpF();g.TgZ(0,"div",6),g.TgZ(1,"button",7),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.onAlign("left")}),g.qZA(),g.TgZ(2,"button",8),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.onAlign("center")}),g.qZA(),g.TgZ(3,"button",9),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.onAlign("right")}),g.qZA(),g.TgZ(4,"button",10),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.onAlign("justify")}),g.qZA(),g.qZA()}if(2&pt){const F=g.oxw().tuiLet,ut=g.oxw().ngIf;g.xp6(1),g.Q6J("pseudoActive",!(null==F||!F.left))("tuiHint",ut.justifyLeft),g.xp6(1),g.Q6J("pseudoActive",!(null==F||!F.center))("tuiHint",ut.justifyCenter),g.xp6(1),g.Q6J("pseudoActive",!(null==F||!F.right))("tuiHint",ut.justifyRight),g.xp6(1),g.Q6J("pseudoActive",!(null==F||!F.justify))("tuiHint",ut.justifyFull)}}function It(pt,tt){if(1&pt&&(g.TgZ(0,"tui-hosted-dropdown",2,3),g._UZ(2,"button",4),g.YNc(3,bt,5,8,"ng-template",null,5,g.W1O),g.qZA()),2&pt){const F=g.MAs(1),ut=g.MAs(4),Y=g.oxw().ngIf;g.Q6J("content",ut),g.xp6(2),g.Q6J("tuiHint",Y.justify)("pseudoActive",F.open)("focusable",F.open)}}function Pt(pt,tt){if(1&pt&&(g.ynx(0),g.YNc(1,It,5,4,"tui-hosted-dropdown",1),g.ALo(2,"async"),g.BQk()),2&pt){const F=g.oxw();g.xp6(1),g.Q6J("tuiLet",g.lcZ(2,1,F.alignState$))}}let At=(()=>{class pt{constructor(F,ut){this.editor=F,this.texts$=ut,this.alignState$=(0,y.aj)([this.editor.isActive$({textAlign:"left"}),this.editor.isActive$({textAlign:"right"}),this.editor.isActive$({textAlign:"center"}),this.editor.isActive$({textAlign:"justify"})]).pipe((0,D.U)(([Y,xt,Bt,Dt])=>({left:Y,right:xt,center:Bt,justify:Dt})))}}return pt.\u0275fac=function(F){return new(F||pt)(g.Y36(C.$3),g.Y36(l.rf))},pt.\u0275cmp=g.Xpm({type:pt,selectors:[["tui-align-content"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["align",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["alignDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignCenterLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignRightLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignJustifyLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"]],template:function(F,ut){1&F&&(g.YNc(0,Pt,3,3,"ng-container",0),g.ALo(1,"async")),2&F&&g.Q6J("ngIf",g.lcZ(1,1,ut.texts$))},directives:[ot.O5,B.L,X.o,et.v,mt.$,ct.D,Mt.x,it.t,ft.D],pipes:[ot.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),pt})()},15587:(Yt,Ct,c)=>{c.d(Ct,{T:()=>At});var C=c(84614),l=c(14309),y=c(88002),D=c(87519),g=c(74788),ot=c(62939),B=c(76189),X=c(219),et=c(67446),mt=c(29070),ct=c(54255),Mt=c(15491),it=c(20933),ft=c(12057),bt=c(35065);function It(pt,tt){if(1&pt){const F=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){const xt=g.CHM(F).index;return g.oxw(2).onCode(!!xt)}),g._uU(1),g.qZA()}if(2&pt){const F=tt.$implicit;g.xp6(1),g.hij(" ",F," ")}}function Pt(pt,tt){if(1&pt&&(g.TgZ(0,"tui-data-list"),g.YNc(1,It,2,1,"button",4),g.ALo(2,"async"),g.qZA()),2&pt){const F=g.oxw();g.xp6(1),g.Q6J("ngForOf",g.lcZ(2,1,F.codeOptionsTexts$))}}let At=(()=>{class pt{constructor(F,ut,Y){this.editor=F,this.texts$=ut,this.codeOptionsTexts$=Y,this.hintText$=this.texts$.pipe((0,y.U)(xt=>xt.code)),this.insideCode$=this.editor.stateChange$.pipe((0,y.U)(()=>this.editor.isActive("code")||this.editor.isActive("codeBlock")),(0,D.x)())}onCode(F){F?this.editor.toggleCodeBlock():this.editor.toggleCode()}}return pt.\u0275fac=function(F){return new(F||pt)(g.Y36(C.$3),g.Y36(l.rf),g.Y36(l.Mr))},pt.\u0275cmp=g.Xpm({type:pt,selectors:[["tui-code"]],decls:7,vars:8,consts:[[3,"content"],["codes",""],["tuiIconButton","","type","button","size","s","icon","tuiIconCodeLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["codesDropdown",""],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(F,ut){if(1&F&&(g.TgZ(0,"tui-hosted-dropdown",0,1),g._UZ(2,"button",2),g.ALo(3,"async"),g.ALo(4,"async"),g.YNc(5,Pt,3,3,"ng-template",null,3,g.W1O),g.qZA()),2&F){const Y=g.MAs(1),xt=g.MAs(6);g.Q6J("content",xt),g.xp6(2),g.Q6J("tuiHint",g.lcZ(3,4,ut.hintText$))("pseudoActive",Y.open||g.lcZ(4,6,ut.insideCode$))("focusable",Y.open)}},directives:[ot.o,B.v,X.$,et.D,mt.x,ct.t,Mt.D,it.q,ft.sg,bt.v],pipes:[ft.Ov],encapsulation:2,changeDetection:0}),pt})()},18832:(Yt,Ct,c)=>{c.d(Ct,{U:()=>ft});var C=c(84614),l=c(14309),y=c(88002),D=c(87519),g=c(74788),ot=c(12057),B=c(76189),X=c(219),et=c(67446),mt=c(29070),ct=c(54255),Mt=c(15491);function it(bt,It){if(1&bt){const Pt=g.EpF();g.TgZ(0,"button",1),g.NdJ("click",function(){return g.CHM(Pt),g.oxw().removeDetails()}),g.ALo(1,"async"),g.qZA()}if(2&bt){const Pt=It.ngIf,At=g.oxw();g.Q6J("tuiHint",Pt.removeDetails)("focusable",!1)("disabled",!!g.lcZ(1,3,At.disabled$))}}let ft=(()=>{class bt{constructor(Pt,At){this.editor=Pt,this.texts$=At,this.disabled$=this.editor.stateChange$.pipe((0,y.U)(()=>!this.editor.isActive("details")),(0,D.x)())}removeDetails(){this.editor.removeDetails()}}return bt.\u0275fac=function(Pt){return new(Pt||bt)(g.Y36(C.$3),g.Y36(l.rf))},bt.\u0275cmp=g.Xpm({type:bt,selectors:[["tui-details-remove"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled","click"]],template:function(Pt,At){1&Pt&&(g.YNc(0,it,2,5,"button",0),g.ALo(1,"async")),2&Pt&&g.Q6J("ngIf",g.lcZ(1,1,At.texts$))},directives:[ot.O5,B.v,X.$,et.D,mt.x,ct.t,Mt.D],pipes:[ot.Ov],encapsulation:2,changeDetection:0}),bt})()},50237:(Yt,Ct,c)=>{c.d(Ct,{y:()=>Mt});var C=c(84614),l=c(14309),y=c(74788),D=c(12057),g=c(76189),ot=c(219),B=c(67446),X=c(29070),et=c(54255),mt=c(15491);function ct(it,ft){if(1&it){const bt=y.EpF();y.TgZ(0,"button",1),y.NdJ("click",function(){return y.CHM(bt),y.oxw().setDetails()}),y.qZA()}2&it&&y.Q6J("tuiHint",ft.ngIf.setDetails)("focusable",!1)}let Mt=(()=>{class it{constructor(bt,It){this.editor=bt,this.texts$=It}setDetails(){this.editor.setDetails()}}return it.\u0275fac=function(bt){return new(bt||it)(y.Y36(C.$3),y.Y36(l.rf))},it.\u0275cmp=y.Xpm({type:it,selectors:[["tui-details"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","click"]],template:function(bt,It){1&bt&&(y.YNc(0,ct,1,2,"button",0),y.ALo(1,"async")),2&bt&&y.Q6J("ngIf",y.lcZ(1,1,It.texts$))},directives:[D.O5,g.v,ot.$,B.D,X.x,et.t,mt.D],pipes:[D.Ov],encapsulation:2,changeDetection:0}),it})()},84985:(Yt,Ct,c)=>{c.d(Ct,{m:()=>pt});var C=c(84614),l=c(14309),y=c(68807),D=c(88002),g=c(74788),ot=c(62939),B=c(76189),X=c(219),et=c(67446),mt=c(29070),ct=c(54255),Mt=c(15491),it=c(20933),ft=c(12057),bt=c(35065);const It=function(){return{}};function Pt(tt,F){if(1&tt){const ut=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){const Bt=g.CHM(ut).$implicit;return g.oxw(2).setFontOption(Bt)}),g.ALo(1,"lowercase"),g._uU(2),g.qZA()}if(2&tt){const ut=F.$implicit;g.Udp("font-family",ut.family)("font-size",ut.px,"px")("font-weight",ut.weight),g.Q6J("ngClass",(null==ut?null:ut.ngClass)||g.DdM(11,It)),g.uIk("automation-id","tui_font__"+g.lcZ(1,9,ut.name||"")),g.xp6(2),g.hij(" ",ut.name," ")}}function At(tt,F){if(1&tt&&(g.TgZ(0,"tui-data-list"),g.YNc(1,Pt,3,12,"button",4),g.ALo(2,"async"),g.qZA()),2&tt){const ut=g.oxw();g.xp6(1),g.Q6J("ngForOf",g.lcZ(2,1,ut.fontsOptions$))}}let pt=(()=>{class tt{constructor(ut,Y,xt,Bt){this.options=ut,this.editor=Y,this.texts$=xt,this.fontOptionsTexts$=Bt,this.fontsOptions$=this.fontOptionsTexts$.pipe((0,D.U)(Dt=>this.options.fontOptions(Dt))),this.fontText$=this.texts$.pipe((0,D.U)(Dt=>Dt.font))}onClick({headingLevel:ut,px:Y}){this.setFontOption({headingLevel:ut,px:Y})}setFontOption({headingLevel:ut,px:Y}){this.clearPreviousTextStyles(),ut?this.editor.setHeading(ut):this.editor.setParagraph({fontSize:(0,y.tuiPx)(Y||0)})}clearPreviousTextStyles(){this.editor.removeEmptyTextStyle(),this.editor.toggleMark("textStyle")}}return tt.\u0275fac=function(ut){return new(ut||tt)(g.Y36(l.mJ),g.Y36(C.$3),g.Y36(l.rf),g.Y36(l.UN))},tt.\u0275cmp=g.Xpm({type:tt,selectors:[["tui-font-size"]],decls:6,vars:6,consts:[[3,"content"],["fonts",""],["tuiIconButton","","type","button","size","s","appearance","icon","icon","tuiIconFontLarge","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["fontsDropdown",""],["tuiOption","",3,"fontFamily","fontSize","fontWeight","ngClass","click",4,"ngFor","ngForOf"],["tuiOption","",3,"ngClass","click"]],template:function(ut,Y){if(1&ut&&(g.TgZ(0,"tui-hosted-dropdown",0,1),g._UZ(2,"button",2),g.ALo(3,"async"),g.YNc(4,At,3,3,"ng-template",null,3,g.W1O),g.qZA()),2&ut){const xt=g.MAs(1),Bt=g.MAs(5);g.Q6J("content",Bt),g.xp6(2),g.Q6J("tuiHint",g.lcZ(3,4,Y.fontText$))("pseudoActive",xt.open)("focusable",xt.open)}},directives:[ot.o,B.v,X.$,et.D,mt.x,ct.t,Mt.D,it.q,ft.sg,bt.v,ft.mk],pipes:[ft.Ov,ft.i8],encapsulation:2,changeDetection:0}),tt})()},62976:(Yt,Ct,c)=>{c.d(Ct,{h:()=>Y});var C=c(64352),l=c(84614),y=c(48699),D=c(14309),g=c(9112),ot=c(88002),B=c(74788),X=c(12057),et=c(62939),mt=c(76189),ct=c(219),Mt=c(67446),it=c(29070),ft=c(54255),bt=c(15491);function It(xt,Bt){if(1&xt){const Dt=B.EpF();B.TgZ(0,"button",11),B.NdJ("click",function(){return B.CHM(Dt),B.oxw(4).editor.toggleBold()}),B.qZA()}if(2&xt){const Dt=B.oxw(2).ngIf,St=B.oxw().ngIf;B.Q6J("tuiHint",St.bold)("pseudoActive",Dt.bold)}}function Pt(xt,Bt){if(1&xt){const Dt=B.EpF();B.TgZ(0,"button",12),B.NdJ("click",function(){return B.CHM(Dt),B.oxw(4).editor.toggleItalic()}),B.qZA()}if(2&xt){const Dt=B.oxw(2).ngIf,St=B.oxw().ngIf;B.Q6J("tuiHint",St.italic)("pseudoActive",Dt.italic)}}function At(xt,Bt){if(1&xt){const Dt=B.EpF();B.TgZ(0,"button",13),B.NdJ("click",function(){return B.CHM(Dt),B.oxw(4).editor.toggleUnderline()}),B.qZA()}if(2&xt){const Dt=B.oxw(2).ngIf,St=B.oxw().ngIf;B.Q6J("tuiHint",St.underline)("pseudoActive",Dt.underline)}}function pt(xt,Bt){if(1&xt){const Dt=B.EpF();B.TgZ(0,"button",14),B.NdJ("click",function(){return B.CHM(Dt),B.oxw(4).editor.toggleStrike()}),B.qZA()}if(2&xt){const Dt=B.oxw(2).ngIf,St=B.oxw().ngIf;B.Q6J("tuiHint",St.strikeThrough)("pseudoActive",Dt.strike)}}function tt(xt,Bt){if(1&xt&&(B.TgZ(0,"div",6),B.YNc(1,It,1,2,"button",7),B.YNc(2,Pt,1,2,"button",8),B.YNc(3,At,1,2,"button",9),B.YNc(4,pt,1,2,"button",10),B.qZA()),2&xt){const Dt=B.oxw(3);B.xp6(1),B.Q6J("ngIf",Dt.isEnabled(Dt.TuiEditorTool.Bold)),B.xp6(1),B.Q6J("ngIf",Dt.isEnabled(Dt.TuiEditorTool.Italic)),B.xp6(1),B.Q6J("ngIf",Dt.isEnabled(Dt.TuiEditorTool.Underline)),B.xp6(1),B.Q6J("ngIf",Dt.isEnabled(Dt.TuiEditorTool.Strikethrough))}}function F(xt,Bt){if(1&xt&&(B.TgZ(0,"tui-hosted-dropdown",2,3),B._UZ(2,"button",4),B.YNc(3,tt,5,4,"ng-template",null,5,B.W1O),B.qZA()),2&xt){const Dt=Bt.ngIf,St=B.MAs(1),_t=B.MAs(4),wt=B.oxw().ngIf;B.Q6J("content",_t),B.xp6(2),B.Q6J("tuiHint",wt.fontStyle)("pseudoActive",St.open||Dt.bold||Dt.italic||Dt.underline||Dt.strike)("focusable",St.open)}}function ut(xt,Bt){if(1&xt&&(B.ynx(0),B.YNc(1,F,5,4,"tui-hosted-dropdown",1),B.ALo(2,"async"),B.BQk()),2&xt){const Dt=B.oxw();B.xp6(1),B.Q6J("ngIf",B.lcZ(2,1,Dt.fontStyleState$))}}let Y=(()=>{class xt{constructor(Dt,St){this.editor=Dt,this.texts$=St,this.toolsSet=new Set(C.Db),this.TuiEditorTool=y._,this.fontStyleState$=(0,g.aj)([this.editor.isActive$("bold"),this.editor.isActive$("italic"),this.editor.isActive$("underline"),this.editor.isActive$("strike")]).pipe((0,ot.U)(([_t,wt,kt,z])=>({bold:_t,italic:wt,underline:kt,strike:z})))}set enabledTools(Dt){this.toolsSet=new Set(Dt)}isEnabled(Dt){return this.toolsSet.has(Dt)}}return xt.\u0275fac=function(Dt){return new(Dt||xt)(B.Y36(l.$3),B.Y36(D.rf))},xt.\u0275cmp=B.Xpm({type:xt,selectors:[["tui-font-style"]],inputs:{enabledTools:"enabledTools"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"ngIf"],[3,"content"],["format",""],["tuiIconButton","","type","button","size","s","icon","tuiIconFormatLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__font-style-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["formatDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"]],template:function(Dt,St){1&Dt&&(B.YNc(0,ut,3,3,"ng-container",0),B.ALo(1,"async")),2&Dt&&B.Q6J("ngIf",B.lcZ(1,1,St.texts$))},directives:[X.O5,et.o,mt.v,ct.$,Mt.D,it.x,ft.t,bt.D],pipes:[X.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),xt})()},19762:(Yt,Ct,c)=>{c.d(Ct,{d:()=>it});var C=c(84614),l=c(14309),y=c(88002),D=c(87519),g=c(74788),ot=c(76189),B=c(219),X=c(67446),et=c(29070),mt=c(54255),ct=c(15491),Mt=c(12057);let it=(()=>{class ft{constructor(It,Pt){this.editor=It,this.texts$=Pt,this.insertGroupText$=this.texts$.pipe((0,y.U)(At=>At.insertGroup)),this.removeGroupText$=this.texts$.pipe((0,y.U)(At=>At.removeGroup)),this.disabled$=this.editor.stateChange$.pipe((0,y.U)(()=>!this.editor.isActive("group")),(0,D.x)())}addGroup(){this.editor.setGroup()}removeGroup(){this.editor.removeGroup()}}return ft.\u0275fac=function(It){return new(It||ft)(g.Y36(C.$3),g.Y36(l.rf))},ft.\u0275cmp=g.Xpm({type:ft,selectors:[["tui-editor-group-tool"]],decls:5,vars:11,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconPlusLarge","appearance","icon","tuiHintDescribe","",3,"focusable","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconCloseLarge","appearance","icon","tuiHintDescribe","",3,"focusable","disabled","tuiHint","click"]],template:function(It,Pt){1&It&&(g.TgZ(0,"button",0),g.NdJ("click",function(){return Pt.addGroup()}),g.ALo(1,"async"),g.qZA(),g.TgZ(2,"button",1),g.NdJ("click",function(){return Pt.removeGroup()}),g.ALo(3,"async"),g.ALo(4,"async"),g.qZA()),2&It&&(g.Q6J("focusable",!1)("tuiHint",g.lcZ(1,5,Pt.insertGroupText$)),g.xp6(2),g.Q6J("focusable",!1)("disabled",!!g.lcZ(3,7,Pt.disabled$))("tuiHint",g.lcZ(4,9,Pt.removeGroupText$)))},directives:[ot.v,B.$,X.D,et.x,mt.t,ct.D],pipes:[Mt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),ft})()},7416:(Yt,Ct,c)=>{c.d(Ct,{U:()=>Y});var C=c(64762),l=c(84614),y=c(14309),D=c(68807),g=c(88002),ot=c(87519),B=c(74788),X=c(40939),et=c(62939),mt=c(33250),ct=c(76189),Mt=c(219),it=c(67446),ft=c(29070),bt=c(54255),It=c(15491),Pt=c(12057),At=c(5451),pt=c(17163);function tt(xt,Bt){if(1&xt&&B._UZ(0,"div",6),2&xt){const Dt=B.oxw().tuiLet;B.Udp("background",Dt)}}function F(xt,Bt){if(1&xt){const Dt=B.EpF();B.TgZ(0,"tui-palette",7),B.NdJ("selectedColor",function(_t){return B.CHM(Dt),B.oxw(2).editor.setBackgroundColor(_t)}),B.qZA()}if(2&xt){const Dt=Bt.$implicit,St=B.oxw(2);B.Q6J("tuiActiveZoneParent",Dt)("colors",St.colors)}}function ut(xt,Bt){if(1&xt&&(B.TgZ(0,"tui-hosted-dropdown",1,2),B._UZ(2,"button",3),B.ALo(3,"async"),B.YNc(4,tt,1,2,"div",4),B.YNc(5,F,1,2,"ng-template",null,5,B.W1O),B.qZA()),2&xt){const Dt=Bt.tuiLet,St=B.MAs(1),_t=B.MAs(6),wt=B.oxw();B.Q6J("content",_t)("tuiDropdownMaxHeight",999),B.xp6(2),B.Q6J("tuiHint",B.lcZ(3,6,wt.backColorText$))("pseudoActive",St.open)("focusable",St.open),B.xp6(2),B.Q6J("ngIf",!wt.isBlankColor(Dt||""))}}class Y{constructor(Bt,Dt,St){this.editor=Bt,this.texts$=Dt,this.defaultOptions=St,this.colors=this.defaultOptions.colors,this.backgroundColor$=this.editor.stateChange$.pipe((0,g.U)(()=>this.editor.getBackgroundColor()||this.defaultOptions.blankColor),(0,ot.x)()),this.backColorText$=this.texts$.pipe((0,g.U)(_t=>_t.backColor))}isBlankColor(Bt){return Bt===this.defaultOptions.blankColor}}Y.\u0275fac=function(Bt){return new(Bt||Y)(B.Y36(l.$3),B.Y36(y.rf),B.Y36(y.mJ))},Y.\u0275cmp=B.Xpm({type:Y,selectors:[["tui-highlight-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["hilite",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconHiliteLarge","automation-id","toolbar__hilite-button","tuiHintDescribe","",1,"t-tool",3,"tuiHint","pseudoActive","focusable"],["class","t-plate",3,"background",4,"ngIf"],["hiliteDropdown",""],[1,"t-plate"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(Bt,Dt){1&Bt&&(B.YNc(0,ut,7,8,"tui-hosted-dropdown",0),B.ALo(1,"async")),2&Bt&&B.Q6J("tuiLet",B.lcZ(1,1,Dt.backgroundColor$))},directives:[X.L,et.o,mt.Ek,ct.v,Mt.$,it.D,ft.x,bt.t,It.D,Pt.O5,At.R,pt.e],pipes:[Pt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,C.gn)([(0,D.tuiDefaultProp)()],Y.prototype,"colors",void 0)},93252:(Yt,Ct,c)=>{c.d(Ct,{Xp:()=>C.X,pu:()=>ot,Tf:()=>B.T,P_:()=>X,yj:()=>et.y,y9:()=>mt,Un:()=>ct.U,dN:()=>It.d,jP:()=>Pt,mK:()=>Mt.m,p7:()=>it,hr:()=>ft.h,Zv:()=>bt,UT:()=>At.U,XC:()=>tt,w2:()=>F.w,Ur:()=>ut,pH:()=>Y.p,mp:()=>xt,iN:()=>z.i,lT:()=>Bt.l,iA:()=>_t,YH:()=>wt.Y,er:()=>kt,_I:()=>z._,__:()=>rt,M8:()=>Dt.M,kU:()=>St,G0:()=>dt.G,_t:()=>st});var C=c(37924),l=c(12057),y=c(68807),D=c(3497),g=c(74788);let ot=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,D.TuiHostedDropdownModule,D.TuiButtonModule,D.TuiHintModule,y.TuiLetModule]]}),J})();var B=c(15587);let X=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,D.TuiHostedDropdownModule,D.TuiButtonModule,D.TuiHintModule,D.TuiDataListModule]]}),J})();var et=c(50237);let mt=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,D.TuiButtonModule,D.TuiHintModule]]}),J})();var ct=c(18832),Mt=c(84985);let it=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,D.TuiHostedDropdownModule,D.TuiButtonModule,D.TuiHintModule,D.TuiDataListModule]]}),J})();var ft=c(62976);let bt=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,D.TuiHostedDropdownModule,D.TuiButtonModule,D.TuiHintModule]]}),J})();var It=c(19762);let Pt=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,D.TuiButtonModule,D.TuiHintModule]]}),J})();var At=c(7416),pt=c(27050);let tt=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,D.TuiHostedDropdownModule,D.TuiButtonModule,pt.VM,D.TuiHintModule,D.TuiDropdownModule,y.TuiActiveZoneModule,y.TuiLetModule]]}),J})();var F=c(13441);let ut=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,D.TuiHostedDropdownModule,D.TuiButtonModule,D.TuiHintModule,y.TuiLetModule]]}),J})();var Y=c(95558);let xt=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,D.TuiHostedDropdownModule,pt.VM,D.TuiButtonModule,D.TuiHintModule,y.TuiActiveZoneModule,D.TuiDropdownModule,y.TuiLetModule]]}),J})();var Bt=c(28962),Dt=c(74549);let St=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,y.TuiRepeatTimesModule]]}),J})(),_t=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,D.TuiHostedDropdownModule,D.TuiDropdownModule,D.TuiButtonModule,D.TuiHintModule,St]]}),J})();var wt=c(76965);let kt=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,D.TuiButtonModule,D.TuiHintModule,y.TuiLetModule]]}),J})();var z=c(22063);let rt=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,D.TuiHostedDropdownModule,D.TuiHintModule,D.TuiButtonModule,D.TuiDataListModule,y.TuiLetModule]]}),J})();var dt=c(10528);let st=(()=>{class J{}return J.\u0275fac=function(nt){return new(nt||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,D.TuiButtonModule,D.TuiHostedDropdownModule,D.TuiDropdownModule,D.TuiHintModule,pt.VM,y.TuiActiveZoneModule,y.TuiLetModule]]}),J})()},13441:(Yt,Ct,c)=>{c.d(Ct,{w:()=>At});var C=c(84614),l=c(14309),y=c(9112),D=c(88002),g=c(74788),ot=c(12057),B=c(40939),X=c(62939),et=c(76189),mt=c(219),ct=c(67446),Mt=c(29070),it=c(54255),ft=c(15491);function bt(pt,tt){if(1&pt){const F=g.EpF();g.TgZ(0,"div",6),g.TgZ(1,"button",7),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.toggleUnorderedList()}),g.qZA(),g.TgZ(2,"button",8),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.toggleOrderedList()}),g.qZA(),g.TgZ(3,"button",9),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).sinkListItem()}),g.qZA(),g.TgZ(4,"button",10),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).liftListItem()}),g.qZA(),g.qZA()}if(2&pt){const F=g.oxw().tuiLet,ut=g.oxw().ngIf;g.xp6(1),g.Q6J("tuiHint",ut.unorderedList)("pseudoActive",!(null==F||!F.unordered)),g.xp6(1),g.Q6J("tuiHint",ut.orderedList)("pseudoActive",!(null==F||!F.ordered)),g.xp6(1),g.Q6J("tuiHint",ut.indent)("disabled",!(null!=F&&F.ordered||null!=F&&F.unordered)),g.xp6(1),g.Q6J("tuiHint",ut.outdent)("disabled",!(null!=F&&F.ordered||null!=F&&F.unordered))}}function It(pt,tt){if(1&pt&&(g.TgZ(0,"tui-hosted-dropdown",2,3),g._UZ(2,"button",4),g.YNc(3,bt,5,8,"ng-template",null,5,g.W1O),g.qZA()),2&pt){const F=tt.tuiLet,ut=g.MAs(1),Y=g.MAs(4),xt=g.oxw().ngIf;g.Q6J("content",Y),g.xp6(2),g.Q6J("tuiHint",xt.list)("pseudoActive",(null==ut?null:ut.open)||(null==F?null:F.unordered)||(null==F?null:F.ordered)||!1)("focusable",ut.open)}}function Pt(pt,tt){if(1&pt&&(g.ynx(0),g.YNc(1,It,5,4,"tui-hosted-dropdown",1),g.ALo(2,"async"),g.BQk()),2&pt){const F=g.oxw();g.xp6(1),g.Q6J("tuiLet",g.lcZ(2,1,F.listState$))}}let At=(()=>{class pt{constructor(F,ut){this.editor=F,this.texts$=ut,this.listState$=(0,y.aj)([this.editor.isActive$("orderedList"),this.editor.isActive$("bulletList")]).pipe((0,D.U)(([Y,xt])=>({ordered:Y,unordered:xt})))}sinkListItem(){this.editor.sinkListItem()}liftListItem(){this.editor.liftListItem()}}return pt.\u0275fac=function(F){return new(F||pt)(g.Y36(C.$3),g.Y36(l.rf))},pt.\u0275cmp=g.Xpm({type:pt,selectors:[["tui-list-configs"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["list",""],["tuiIconButton","","type","button","size","s","icon","tuiIconListLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__ordering-list-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["listDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconListLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOLLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconIndentLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","disabled","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOutdentLarge","appearance","icon",1,"t-option",3,"tuiHint","disabled","click"]],template:function(F,ut){1&F&&(g.YNc(0,Pt,3,3,"ng-container",0),g.ALo(1,"async")),2&F&&g.Q6J("ngIf",g.lcZ(1,1,ut.texts$))},directives:[ot.O5,B.L,X.o,et.v,mt.$,ct.D,Mt.x,it.t,ft.D],pipes:[ot.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),pt})()},95558:(Yt,Ct,c)=>{c.d(Ct,{p:()=>Bt});var C=c(64762),l=c(84614),y=c(14309),D=c(68807),g=c(9112),ot=c(88002),B=c(87519),X=c(74788),et=c(40939),mt=c(62939),ct=c(33250),Mt=c(76189),it=c(219),ft=c(67446),bt=c(29070),It=c(54255),Pt=c(15491),At=c(12057),pt=c(5451),tt=c(17163);function F(Dt,St){if(1&Dt&&X._UZ(0,"div",7),2&Dt){const _t=X.oxw(2).tuiLet;X.Udp("background",_t)}}function ut(Dt,St){if(1&Dt){const _t=X.EpF();X.TgZ(0,"tui-palette",8),X.NdJ("selectedColor",function(kt){X.CHM(_t),X.oxw();const z=X.MAs(1);return X.oxw(2).setCellColor(kt),z.close()}),X.qZA()}if(2&Dt){const _t=St.$implicit,wt=X.oxw(3);X.Q6J("tuiActiveZoneParent",_t)("colors",wt.colors)}}function Y(Dt,St){if(1&Dt&&(X.TgZ(0,"tui-hosted-dropdown",2,3),X._UZ(2,"button",4),X.ALo(3,"async"),X.YNc(4,F,1,2,"div",5),X.YNc(5,ut,1,2,"ng-template",null,6,X.W1O),X.qZA()),2&Dt){const _t=St.tuiLet,wt=X.MAs(1),kt=X.MAs(6),z=X.oxw().tuiLet,rt=X.oxw();X.Q6J("content",kt)("tuiDropdownMaxHeight",999)("canOpen",!!_t),X.xp6(2),X.Q6J("tuiHint",X.lcZ(3,8,rt.colorText$))("pseudoActive",wt.open)("focusable",wt.open)("disabled",!_t),X.xp6(2),X.Q6J("ngIf",!rt.isBlankColor(z||""))}}function xt(Dt,St){if(1&Dt&&(X.ynx(0),X.YNc(1,Y,7,10,"tui-hosted-dropdown",1),X.ALo(2,"async"),X.BQk()),2&Dt){const _t=X.oxw();X.xp6(1),X.Q6J("tuiLet",X.lcZ(2,1,_t.isActive$))}}class Bt{constructor(St,_t,wt){this.defaultOptions=St,this.editor=_t,this.texts$=wt,this.colors=this.defaultOptions.colors,this.colorText$=this.texts$.pipe((0,ot.U)(kt=>this.editor.isActive("group")&&kt.hiliteGroup||this.editor.isActive("table")&&kt.cellColor||"")),this.isActive$=(0,g.aj)([this.editor.isActive$("table"),this.editor.isActive$("group")]).pipe((0,ot.U)(([kt,z])=>kt||z)),this.color$=this.editor.stateChange$.pipe((0,ot.U)(()=>this.editor.getCellColor()||this.editor.getGroupColor()||this.defaultOptions.blankColor),(0,B.x)())}isBlankColor(St){return St===this.defaultOptions.blankColor}setCellColor(St){this.editor.isActive("group")?this.editor.setGroupHilite(St):this.editor.isActive("table")&&this.editor.setCellColor(St)}}Bt.\u0275fac=function(St){return new(St||Bt)(X.Y36(y.mJ),X.Y36(l.$3),X.Y36(y.rf))},Bt.\u0275cmp=X.Xpm({type:Bt,selectors:[["tui-table-cell-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen"],["colorSelect",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconPaintLarge","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable","disabled"],["class","t-plate t-plate_paint",3,"background",4,"ngIf"],["cellColorDropdown",""],[1,"t-plate","t-plate_paint"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(St,_t){1&St&&(X.YNc(0,xt,3,3,"ng-container",0),X.ALo(1,"async")),2&St&&X.Q6J("tuiLet",X.lcZ(1,1,_t.color$))},directives:[et.L,mt.o,ct.Ek,Mt.v,it.$,ft.D,bt.x,It.t,Pt.D,At.O5,pt.R,tt.e],pipes:[At.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,C.gn)([(0,D.tuiDefaultProp)()],Bt.prototype,"colors",void 0)},28962:(Yt,Ct,c)=>{c.d(Ct,{l:()=>It});var C=c(84614),l=c(14309),y=c(88002),D=c(74788),g=c(62939),ot=c(33250),B=c(76189),X=c(219),et=c(67446),mt=c(29070),ct=c(54255),Mt=c(15491),it=c(74549),ft=c(12057);function bt(Pt,At){if(1&Pt){const pt=D.EpF();D.TgZ(0,"tui-table-size-selector",4),D.NdJ("onSelectSize",function(F){return D.CHM(pt),D.oxw().addTable(F)}),D.qZA()}}let It=(()=>{class Pt{constructor(pt,tt){this.editor=pt,this.texts$=tt,this.insertTableText$=this.texts$.pipe((0,y.U)(F=>F.insertTable))}addTable({rows:pt,cols:tt}){this.editor.enter();const F=this.editor.state.selection.anchor;this.editor.enter(),this.editor.enter(),this.editor.setTextSelection(F),this.editor.insertTable(pt,tt)}}return Pt.\u0275fac=function(pt){return new(pt||Pt)(D.Y36(C.$3),D.Y36(l.rf))},Pt.\u0275cmp=D.Xpm({type:Pt,selectors:[["tui-table-create"]],decls:6,vars:5,consts:[["tuiDropdownAlign","left","tuiDropdownDirection","bottom",3,"content"],["table",""],["tuiIconButton","","type","button","size","s","icon","tuiIconTableLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable"],["tableDropdown",""],[3,"onSelectSize"]],template:function(pt,tt){if(1&pt&&(D.TgZ(0,"tui-hosted-dropdown",0,1),D._UZ(2,"button",2),D.ALo(3,"async"),D.qZA(),D.YNc(4,bt,1,0,"ng-template",null,3,D.W1O)),2&pt){const F=D.MAs(1),ut=D.MAs(5);D.Q6J("content",ut),D.xp6(2),D.Q6J("tuiHint",D.lcZ(3,3,tt.insertTableText$))("focusable",F.open)}},directives:[g.o,ot.Ek,B.v,X.$,et.D,mt.x,ct.t,Mt.D,it.M],pipes:[ft.Ov],encapsulation:2,changeDetection:0}),Pt})()},76965:(Yt,Ct,c)=>{c.d(Ct,{Y:()=>Pt});var C=c(84614),l=c(14309),y=c(88002),D=c(87519),g=c(74788),ot=c(40939),B=c(12057),X=c(76189),et=c(219),mt=c(67446),ct=c(29070),Mt=c(54255),it=c(15491);function ft(At,pt){if(1&At){const tt=g.EpF();g.TgZ(0,"button",2),g.NdJ("click",function(){g.CHM(tt);const ut=g.oxw().tuiLet,Y=g.oxw();return ut.mergeCells?Y.mergeCells():Y.splitCell()}),g.qZA()}if(2&At){const tt=pt.ngIf,F=g.oxw().tuiLet;g.Q6J("icon",F.mergeCells?"tuiIconTableMergeLarge":"tuiIconTableSplitLarge")("tuiHint",F.mergeCells?tt.mergeCells:tt.splitCells)("focusable",!1)("disabled",!F.mergeCells&&!F.splitCells)}}function bt(At,pt){if(1&At&&(g.ynx(0),g.YNc(1,ft,1,4,"button",1),g.ALo(2,"async"),g.BQk()),2&At){const tt=g.oxw();g.xp6(1),g.Q6J("ngIf",g.lcZ(2,1,tt.texts$))}}const It=function(At,pt){return{mergeCells:At,splitCells:pt}};let Pt=(()=>{class At{constructor(tt,F){this.editor=tt,this.texts$=F,this.canMergeCells$=this.editor.stateChange$.pipe((0,y.U)(()=>this.editor.canMergeCells()),(0,D.x)()),this.canSplitCells$=this.editor.stateChange$.pipe((0,y.U)(()=>this.editor.canSplitCells()),(0,D.x)())}mergeCells(){this.editor.mergeCells()}splitCell(){this.editor.splitCell()}}return At.\u0275fac=function(tt){return new(tt||At)(g.Y36(C.$3),g.Y36(l.rf))},At.\u0275cmp=g.Xpm({type:At,selectors:[["tui-table-merge-cells"]],decls:3,vars:8,consts:[[4,"tuiLet"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"icon","tuiHint","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"icon","tuiHint","focusable","disabled","click"]],template:function(tt,F){1&tt&&(g.YNc(0,bt,3,3,"ng-container",0),g.ALo(1,"async"),g.ALo(2,"async")),2&tt&&g.Q6J("tuiLet",g.WLB(5,It,g.lcZ(1,1,F.canMergeCells$),g.lcZ(2,3,F.canSplitCells$)))},directives:[ot.L,B.O5,X.v,et.$,mt.D,ct.x,Mt.t,it.D],pipes:[B.Ov],encapsulation:2,changeDetection:0}),At})()},22063:(Yt,Ct,c)=>{c.d(Ct,{_:()=>ut,i:()=>F});var C=c(84614),l=c(14309),y=c(88002),D=c(74788),g=c(40939),ot=c(62939),B=c(76189),X=c(219),et=c(67446),mt=c(29070),ct=c(54255),Mt=c(15491),it=c(20933),ft=c(12057),bt=c(89786),It=c(35065);function Pt(Y,xt){if(1&Y&&(D.TgZ(0,"tui-hosted-dropdown",2,3),D._UZ(2,"button",4),D.ALo(3,"async"),D.qZA()),2&Y){const Bt=xt.tuiLet,Dt=D.MAs(1),St=D.oxw(),_t=D.MAs(3);D.Q6J("content",_t)("canOpen",!!Bt),D.xp6(2),D.Q6J("tuiHint",D.lcZ(3,5,St.rowsColumnsManagingText$))("focusable",Dt.open)("disabled",!Bt)}}function At(Y,xt){if(1&Y){const Bt=D.EpF();D.TgZ(0,"button",7),D.NdJ("click",function(){const _t=D.CHM(Bt).index,wt=D.oxw().index;return D.oxw(2).onTableOption(2*wt+_t)}),D._uU(1),D.qZA()}if(2&Y){const Bt=xt.$implicit;D.xp6(1),D.hij(" ",Bt," ")}}function pt(Y,xt){if(1&Y&&(D.TgZ(0,"tui-opt-group"),D.YNc(1,At,2,1,"button",6),D.qZA()),2&Y){const Bt=xt.$implicit;D.xp6(1),D.Q6J("ngForOf",Bt)}}function tt(Y,xt){if(1&Y&&(D.TgZ(0,"tui-data-list"),D.YNc(1,pt,2,1,"tui-opt-group",5),D.ALo(2,"async"),D.qZA()),2&Y){const Bt=D.oxw();D.xp6(1),D.Q6J("ngForOf",D.lcZ(2,1,Bt.tableCommandTexts$))}}var F=(()=>{return(Y=F||(F={}))[Y.InsertColumnBefore=0]="InsertColumnBefore",Y[Y.InsertColumnAfter=1]="InsertColumnAfter",Y[Y.InsertRowBefore=2]="InsertRowBefore",Y[Y.InsertRowAfter=3]="InsertRowAfter",Y[Y.DeleteColumn=4]="DeleteColumn",Y[Y.DeleteRow=5]="DeleteRow",F;var Y})();let ut=(()=>{class Y{constructor(Bt,Dt,St){this.editor=Bt,this.texts$=Dt,this.tableCommandTexts$=St,this.commandsRegistry={[F.InsertColumnAfter]:()=>this.editor.addColumnAfter(),[F.InsertColumnBefore]:()=>this.editor.addColumnBefore(),[F.InsertRowAfter]:()=>this.editor.addRowAfter(),[F.InsertRowBefore]:()=>this.editor.addRowBefore(),[F.DeleteColumn]:()=>this.editor.deleteColumn(),[F.DeleteRow]:()=>this.editor.deleteRow()},this.isActive$=this.editor.isActive$("table"),this.rowsColumnsManagingText$=this.texts$.pipe((0,y.U)(_t=>_t.rowsColumnsManaging))}onTableOption(Bt){this.commandsRegistry[Bt]()}}return Y.\u0275fac=function(Bt){return new(Bt||Y)(D.Y36(C.$3),D.Y36(l.rf),D.Y36(l.$i))},Y.\u0275cmp=D.Xpm({type:Y,selectors:[["tui-table-row-column-manager"]],decls:4,vars:3,consts:[[3,"content","canOpen",4,"tuiLet"],["tableOptionsDropdown",""],[3,"content","canOpen"],["tableCommand",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAddRowLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled"],[4,"ngFor","ngForOf"],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(Bt,Dt){1&Bt&&(D.YNc(0,Pt,4,7,"tui-hosted-dropdown",0),D.ALo(1,"async"),D.YNc(2,tt,3,3,"ng-template",null,1,D.W1O)),2&Bt&&D.Q6J("tuiLet",D.lcZ(1,1,Dt.isActive$))},directives:[g.L,ot.o,B.v,X.$,et.D,mt.x,ct.t,Mt.D,it.q,ft.sg,bt.R,It.v],pipes:[ft.Ov],encapsulation:2,changeDetection:0}),Y})()},74549:(Yt,Ct,c)=>{c.d(Ct,{M:()=>mt});var C=c(74788),l=c(62579),y=c(3497),D=c(36097);function g(ct,Mt){if(1&ct){const it=C.EpF();C.TgZ(0,"div",4),C.NdJ("mouseenter",function(bt){const Pt=C.CHM(it).$implicit,At=C.oxw().$implicit;return C.oxw().updateCurrentSize(Pt+1,At+1,bt)})("click",function(){return C.CHM(it),C.oxw(2).select()}),C.qZA()}if(2&ct){const it=Mt.$implicit,ft=C.oxw().$implicit,bt=C.oxw();C.ekj("t-cell_hovered",bt.tableSelectHovered(it,ft))}}function ot(ct,Mt){if(1&ct&&(C.TgZ(0,"div",2),C.YNc(1,g,1,2,"div",3),C.qZA()),2&ct){const it=C.oxw();C.xp6(1),C.Q6J("tuiRepeatTimesOf",it.rowsNumber)}}let mt=(()=>{class ct{constructor(it){this.win=it,this.selectSize=new C.vpe,this.onSelectSize=this.selectSize,this.tableSize={rows:1,cols:1}}get columnsNumber(){return Math.min(Math.max(3,this.tableSize.cols+1),15)}get rowsNumber(){return Math.min(Math.max(3,this.tableSize.rows+1),15)}tableSelectHovered(it,ft){return it<this.tableSize.rows&&ft<this.tableSize.cols}updateCurrentSize(it,ft,bt){(0,y.tuiGetViewportWidth)(this.win)-bt.clientX>70&&(this.tableSize={rows:it,cols:ft})}onClick(){this.select()}select(){this.selectSize.emit(this.tableSize)}}return ct.\u0275fac=function(it){return new(it||ct)(C.Y36(l.m9))},ct.\u0275cmp=C.Xpm({type:ct,selectors:[["tui-table-size-selector"]],outputs:{selectSize:"selectSize",onSelectSize:"onSelectSize"},decls:3,vars:3,consts:[["class","t-column",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-description"],[1,"t-column"],["class","t-cell",3,"t-cell_hovered","mouseenter","click",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-cell",3,"mouseenter","click"]],template:function(it,ft){1&it&&(C.YNc(0,ot,2,1,"div",0),C.TgZ(1,"div",1),C._uU(2),C.qZA()),2&it&&(C.Q6J("tuiRepeatTimesOf",ft.columnsNumber),C.xp6(2),C.AsE("",ft.tableSize.cols,"\xd7",ft.tableSize.rows,""))},directives:[D.X],styles:["[_nghost-%COMP%]{display:block;padding:.75rem}.t-cell[_ngcontent-%COMP%]{display:inline-block;background-color:var(--tui-base-01);width:1.25rem;height:1.25rem;border-radius:.25rem;margin:.125rem;border:1px solid var(--tui-base-04);cursor:pointer}.t-cell_hovered[_ngcontent-%COMP%]{background-color:var(--tui-base-02)}.t-column[_ngcontent-%COMP%]{white-space:nowrap}.t-description[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),ct})()},10528:(Yt,Ct,c)=>{c.d(Ct,{G:()=>ut});var C=c(64762),l=c(84614),y=c(14309),D=c(68807),g=c(88002),ot=c(87519),B=c(74788),X=c(40939),et=c(62939),mt=c(33250),ct=c(76189),Mt=c(219),it=c(67446),ft=c(29070),bt=c(54255),It=c(15491),Pt=c(5451),At=c(17163),pt=c(12057);function tt(Y,xt){if(1&Y){const Bt=B.EpF();B.TgZ(0,"tui-palette",6),B.NdJ("selectedColor",function(St){return B.CHM(Bt),B.oxw(2).editor.setFontColor(St)}),B.qZA()}if(2&Y){const Bt=xt.$implicit,Dt=B.oxw(2);B.Q6J("tuiActiveZoneParent",Bt)("colors",Dt.colors)}}function F(Y,xt){if(1&Y&&(B.TgZ(0,"tui-hosted-dropdown",1,2),B._UZ(2,"button",3),B.ALo(3,"async"),B._UZ(4,"div",4),B.YNc(5,tt,1,2,"ng-template",null,5,B.W1O),B.qZA()),2&Y){const Bt=xt.tuiLet,Dt=B.MAs(1),St=B.MAs(6),_t=B.oxw();B.Q6J("content",St)("tuiDropdownMaxHeight",999),B.xp6(2),B.Q6J("tuiHint",B.lcZ(3,7,_t.foreColorText$))("pseudoActive",Dt.open)("focusable",Dt.open),B.xp6(2),B.Udp("background",Bt)}}class ut{constructor(xt,Bt,Dt){this.defaultOptions=xt,this.editor=Bt,this.texts$=Dt,this.colors=this.defaultOptions.colors,this.fontColor$=this.editor.stateChange$.pipe((0,g.U)(()=>this.editor.getFontColor()||this.defaultOptions.blankColor),(0,ot.x)()),this.foreColorText$=this.texts$.pipe((0,g.U)(St=>St.foreColor))}}ut.\u0275fac=function(xt){return new(xt||ut)(B.Y36(y.mJ),B.Y36(l.$3),B.Y36(y.rf))},ut.\u0275cmp=B.Xpm({type:ut,selectors:[["tui-text-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["color",""],["tuiIconButton","","type","button","size","s","icon","tuiIconColorLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__color-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],[1,"t-plate"],["colorDropdown",""],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(xt,Bt){1&xt&&(B.YNc(0,F,7,9,"tui-hosted-dropdown",0),B.ALo(1,"async")),2&xt&&B.Q6J("tuiLet",B.lcZ(1,1,Bt.fontColor$))},directives:[X.L,et.o,mt.Ek,ct.v,Mt.$,it.D,ft.x,bt.t,It.D,Pt.R,At.e],pipes:[pt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,C.gn)([(0,D.tuiDefaultProp)()],ut.prototype,"colors",void 0)},17406:(Yt,Ct,c)=>{c.d(Ct,{M6:()=>C.M,yB:()=>X,Bp:()=>et.B});var C=c(4997),l=c(12057),y=c(71115),D=c(93252),g=c(68807),ot=c(3497),B=c(74788);let X=(()=>{class mt{}return mt.\u0275fac=function(Mt){return new(Mt||mt)},mt.\u0275mod=B.oAB({type:mt}),mt.\u0275inj=B.cJS({imports:[[l.ez,ot.TuiHintModule,g.TuiFocusableModule,ot.TuiButtonModule,ot.TuiHostedDropdownModule,y.Fu,D.er,D.mp,D.__,D.iA,D.p7,D.Zv,D.pu,D.Ur,D._t,D.XC,D.P_,D.y9,g.TuiItemModule,D.jP]]}),mt})();var et=c(13044)},13044:(Yt,Ct,c)=>{c.d(Ct,{B:()=>y});var C=c(74788),l=c(68807);let y=(()=>{class D{constructor(ot){this.el=ot}get toolsContainers(){return Array.from(this.el.nativeElement.querySelectorAll("[tuiItem]"))}onHorizontalNavigation(ot){const{toolsContainers:B}=this,X=B.findIndex(l.tuiIsNativeFocusedIn),mt=B[(0,l.tuiClamp)(X+(ot?-1:1),0,B.length-1)],ct=ot?this.findPreviousTool(mt):this.findNextTool(mt);ct&&ct.focus()}findFirstFocusableTool(ot=!1){const B=ot?this.toolsContainers.slice().reverse():this.toolsContainers;for(const X of B){const et=(0,l.tuiIsNativeMouseFocusable)(X)?X:(0,l.tuiGetClosestFocusable)({initial:X,root:X,keyboard:!1});if(et)return et}return null}findPreviousTool(ot){return(0,l.tuiIsNativeMouseFocusable)(ot)?ot:(0,l.tuiGetClosestFocusable)({initial:ot,root:ot,keyboard:!1})||(0,l.tuiGetClosestFocusable)({initial:ot,root:this.el.nativeElement,previous:!0,keyboard:!1})}findNextTool(ot){return(0,l.tuiIsNativeMouseFocusable)(ot)?ot:(0,l.tuiGetClosestFocusable)({initial:ot,root:this.el.nativeElement,keyboard:!1})}}return D.\u0275fac=function(ot){return new(ot||D)(C.Y36(C.SBq))},D.\u0275dir=C.lG2({type:D,selectors:[["","tuiToolbarNavigationManager",""]],hostBindings:function(ot,B){1&ot&&C.NdJ("keydown.arrowRight.prevent",function(){return B.onHorizontalNavigation(!1)})("keydown.arrowLeft.prevent",function(){return B.onHorizontalNavigation(!0)})}}),D})()},4997:(Yt,Ct,c)=>{c.d(Ct,{M:()=>O});var C=c(64762),l=c(74788),y=c(64352),D=c(84614),g=c(48699),ot=c(14309),B=c(68807),X=c(15257),et=c(13044),mt=c(12057),ct=c(48893),Mt=c(76189),it=c(82707),ft=c(219),bt=c(67446),It=c(29070),Pt=c(54255),At=c(15491),pt=c(84985),tt=c(62976),F=c(37924),ut=c(13441),Y=c(62939),xt=c(45050),Bt=c(10528),Dt=c(7416),St=c(15587),_t=c(50237),wt=c(18832),kt=c(19762),z=c(95558),rt=c(28962),dt=c(22063),st=c(76965);const J=["dropdown"];function Q(w,V){1&w&&l.GkF(0)}function nt(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"div",6),l.TgZ(1,"button",7),l.NdJ("click",function(){return l.CHM(U),l.oxw(2).undo()}),l.qZA(),l.TgZ(2,"button",8),l.NdJ("click",function(){return l.CHM(U),l.oxw(2).redo()}),l.qZA(),l.qZA()}if(2&w){const U=l.oxw().ngIf,yt=l.oxw();l.xp6(1),l.Q6J("tuiHint",U.undo)("disabled",yt.undoDisabled)("focusable",!1),l.xp6(1),l.Q6J("tuiHint",U.redo)("disabled",yt.redoDisabled)("focusable",!1)}}function Lt(w,V){1&w&&(l.TgZ(0,"div",6),l._UZ(1,"tui-font-size",9),l.qZA())}function Jt(w,V){if(1&w&&l._UZ(0,"tui-font-style",15),2&w){const U=l.oxw(3);l.Q6J("enabledTools",U.toolsSet)}}function Zt(w,V){1&w&&l._UZ(0,"tui-align-content",9)}function ne(w,V){1&w&&l._UZ(0,"tui-list-configs",9)}function Wt(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"button",16,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).toggleQuote()}),l.qZA()}if(2&w){const U=l.oxw(2).ngIf,yt=l.oxw();l.Q6J("tuiHint",U.quote)("pseudoActive",yt.blockquote)("disabled",yt.unorderedList||yt.orderedList)("focusable",!1)}}function pe(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"tui-edit-link",22,23),l.NdJ("addLink",function(Nt){l.CHM(U),l.oxw();const H=l.MAs(1);return l.oxw(3).onLink(H,Nt)})("removeLink",function(){l.CHM(U),l.oxw();const Nt=l.MAs(1);return l.oxw(3).onLink(Nt)}),l.qZA()}}function ye(w,V){if(1&w&&(l.TgZ(0,"tui-hosted-dropdown",18,19),l._UZ(2,"button",20,17),l.YNc(4,pe,2,0,"ng-template",null,21,l.W1O),l.qZA()),2&w){const U=l.MAs(1),yt=l.MAs(5),Nt=l.oxw(2).ngIf,H=l.oxw();l.Q6J("canOpen",H.canOpenAnchor)("content",yt),l.xp6(2),l.Q6J("tuiHint",Nt.link)("pseudoActive",U.open||H.a)("focusable",U.open)}}function Oe(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"tui-edit-link",28),l.NdJ("addLink",function(Nt){l.CHM(U),l.oxw();const H=l.MAs(1);return l.oxw(3).setAnchor(H,Nt)})("removeLink",function(){return l.CHM(U),l.oxw(4).removeAnchor()}),l.qZA()}2&w&&l.Q6J("anchorMode",!0)}function fe(w,V){if(1&w&&(l.TgZ(0,"tui-hosted-dropdown",24,25),l._UZ(2,"button",26),l.YNc(3,Oe,1,1,"ng-template",null,27,l.W1O),l.qZA()),2&w){const U=l.MAs(1),yt=l.MAs(4),Nt=l.oxw(2).ngIf,H=l.oxw();l.Q6J("canOpen",H.canOpenAnchor)("content",yt),l.xp6(2),l.Q6J("focusable",!1)("pseudoActive",U.open||H.jumpAnchor)("tuiHint",Nt.insertAnchor)}}function Ke(w,V){if(1&w){const U=l.EpF();l.ynx(0),l.TgZ(1,"button",29,17),l.NdJ("click",function(){return l.CHM(U),l.MAs(4).click()}),l.qZA(),l.TgZ(3,"input",30,31),l.NdJ("change",function(){l.CHM(U);const Nt=l.MAs(4);return l.oxw(3).onAttach(Nt)}),l.qZA(),l.BQk()}if(2&w){const U=l.oxw(2).ngIf,yt=l.oxw();l.xp6(1),l.Q6J("tuiHint",U.attach)("focusable",!1),l.xp6(2),l.Q6J("accept",yt.attachOptions.accept)("multiple",yt.attachOptions.multiple)("tuiFocusable",!1)}}function xe(w,V){if(1&w&&(l.TgZ(0,"div",6),l.YNc(1,Jt,1,1,"tui-font-style",10),l.YNc(2,Zt,1,0,"tui-align-content",11),l.YNc(3,ne,1,0,"tui-list-configs",11),l.YNc(4,Wt,2,4,"button",12),l.YNc(5,ye,6,5,"tui-hosted-dropdown",13),l.YNc(6,fe,5,5,"tui-hosted-dropdown",14),l.YNc(7,Ke,5,5,"ng-container",1),l.qZA()),2&w){const U=l.oxw(2);l.xp6(1),l.Q6J("ngIf",U.formatEnabled),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Align)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.List)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Quote)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Link)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Anchor)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Attach))}}function Ne(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"button",34,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).toggleSubscript()}),l.qZA()}if(2&w){const U=l.oxw(2).ngIf,yt=l.oxw();l.Q6J("tuiHint",U.subscript)("pseudoActive",yt.subscript)("focusable",!1)}}function ge(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"button",35,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).toggleSuperscript()}),l.qZA()}if(2&w){const U=l.oxw(2).ngIf,yt=l.oxw();l.Q6J("tuiHint",U.superscript)("pseudoActive",yt.superscript)("focusable",!1)}}function Ae(w,V){if(1&w&&(l.TgZ(0,"div",6),l.YNc(1,Ne,2,3,"button",32),l.YNc(2,ge,2,3,"button",33),l.qZA()),2&w){const U=l.oxw(2);l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Sub)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Sup))}}function Ce(w,V){if(1&w&&l._UZ(0,"tui-text-color",37),2&w){const U=l.oxw(3);l.Q6J("colors",U.colors)}}function Pe(w,V){if(1&w&&l._UZ(0,"tui-highlight-color",37),2&w){const U=l.oxw(3);l.Q6J("colors",U.colors)}}function Be(w,V){if(1&w&&(l.TgZ(0,"div",6),l.YNc(1,Ce,1,1,"tui-text-color",36),l.YNc(2,Pe,1,1,"tui-highlight-color",36),l.qZA()),2&w){const U=l.oxw(2);l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Color)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Hilite))}}function Me(w,V){1&w&&l._UZ(0,"tui-code",9)}function ke(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"button",41,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).onTeX()}),l.qZA()}if(2&w){const U=l.oxw(2).ngIf;l.Q6J("tuiHint",U.tex)("focusable",!1)}}function Ye(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"div",42),l.TgZ(1,"button",43,17),l.NdJ("click",function(){return l.CHM(U),l.MAs(4).click()}),l.qZA(),l.TgZ(3,"input",44,45),l.NdJ("change",function(){l.CHM(U);const Nt=l.MAs(4);return l.oxw(3).onImage(Nt)}),l.qZA(),l.qZA()}if(2&w){const U=l.oxw(2).ngIf;l.xp6(1),l.Q6J("tuiHint",U.image)("focusable",!1),l.xp6(2),l.Q6J("tuiFocusable",!1)}}function He(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"button",46,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).insertHorizontalRule()}),l.qZA()}if(2&w){const U=l.oxw(2).ngIf;l.Q6J("tuiHint",U.insertHorizontalRule)("focusable",!1)}}function Ue(w,V){if(1&w&&(l.TgZ(0,"div",6),l.YNc(1,Me,1,0,"tui-code",11),l.YNc(2,ke,2,2,"button",38),l.YNc(3,Ye,5,3,"div",39),l.YNc(4,He,2,2,"button",40),l.qZA()),2&w){const U=l.oxw(2);l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Code)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Tex)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Img)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.HR))}}function Le(w,V){if(1&w){const U=l.EpF();l.TgZ(0,"div",6),l.TgZ(1,"button",47,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(2).removeFormat()}),l.qZA(),l.qZA()}if(2&w){const U=l.oxw().ngIf;l.xp6(1),l.Q6J("tuiHint",U.clear)("focusable",!1)}}function ze(w,V){1&w&&(l.TgZ(0,"div",6),l._UZ(1,"tui-details",48),l._UZ(2,"tui-details-remove",48),l.qZA())}function _e(w,V){if(1&w&&l._UZ(0,"tui-table-cell-color",37),2&w){const U=l.oxw(3);l.Q6J("colors",U.colors)}}function he(w,V){if(1&w&&(l.TgZ(0,"div",6),l._UZ(1,"tui-editor-group-tool",48),l.YNc(2,_e,1,1,"tui-table-cell-color",36),l.qZA()),2&w){const U=l.oxw(2);l.xp6(2),l.Q6J("ngIf",!U.enabled(U.TuiEditorTool.Table))}}function Ee(w,V){if(1&w&&(l.TgZ(0,"div",6),l._UZ(1,"tui-table-create",48),l._UZ(2,"tui-table-row-column-manager",48),l._UZ(3,"tui-table-merge-cells",48),l._UZ(4,"tui-table-cell-color",37),l.qZA()),2&w){const U=l.oxw(2);l.xp6(4),l.Q6J("colors",U.colors)}}function gt(w,V){if(1&w&&(l.TgZ(0,"section",4),l.YNc(1,nt,3,6,"div",5),l.YNc(2,Lt,2,0,"div",5),l.YNc(3,xe,8,7,"div",5),l.YNc(4,Ae,3,2,"div",5),l.YNc(5,Be,3,2,"div",5),l.YNc(6,Ue,5,4,"div",5),l.YNc(7,Le,3,2,"div",5),l.YNc(8,ze,3,0,"div",5),l.YNc(9,he,3,1,"div",5),l.YNc(10,Ee,5,1,"div",5),l.TgZ(11,"div",6),l.Hsn(12),l.qZA(),l.qZA()),2&w){const U=l.oxw();l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Undo)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Size)),l.xp6(1),l.Q6J("ngIf",U.firstBigBlockEnabled),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Sub)||U.enabled(U.TuiEditorTool.Sup)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Color)||U.enabled(U.TuiEditorTool.Hilite)),l.xp6(1),l.Q6J("ngIf",U.secondBigBlockEnabled),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Clear)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Details)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Group)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Table))}}class O{constructor(V,U,yt,Nt,H,a,p){this.el=V,this.editor=U,this.imageLoader=yt,this.attachOptions=Nt,this.filesLoader=H,this.texts$=a,this.defaultOptions=p,this.dropdowns=B.EMPTY_QUERY,this.colors=this.defaultOptions.colors,this.disabled=!1,this.linkAdded=new l.vpe,this.texClicked=new l.vpe,this.fileAttached=new l.vpe,this.TuiEditorTool=g._,this.toolsSet=new Set(y.Db)}set tools(V){this.toolsSet=new Set(V)}get focused(){return(0,B.tuiIsNativeFocusedIn)(this.el.nativeElement)||!!this.dropdowns.find(({nativeElement:V})=>(0,B.tuiIsNativeFocusedIn)(V))}get focusable(){return!this.focused&&!this.disabled}get unorderedList(){return this.editor.isActive("bulletList")}get orderedList(){return this.editor.isActive("orderedList")}get blockquote(){return this.editor.isActive("blockquote")}get a(){return this.editor.isActive("link")}get jumpAnchor(){return this.editor.isActive("jumpAnchor")}get canOpenAnchor(){return!this.a&&!this.jumpAnchor}get undoDisabled(){return this.editor.undoDisabled()}get redoDisabled(){return this.editor.redoDisabled()}get subscript(){return this.editor.isActive("subscript")}get superscript(){return this.editor.isActive("superscript")}get formatEnabled(){return this.enabled(g._.Bold)||this.enabled(g._.Italic)||this.enabled(g._.Underline)||this.enabled(g._.Strikethrough)}get firstBigBlockEnabled(){return this.formatEnabled||this.enabled(g._.Align)||this.enabled(g._.List)||this.enabled(g._.Quote)||this.enabled(g._.Link)||this.enabled(g._.Anchor)||this.enabled(g._.Attach)}get secondBigBlockEnabled(){return this.enabled(g._.Code)||this.enabled(g._.Tex)||this.enabled(g._.Img)||this.enabled(g._.HR)}onMouseDown(V,U){U.closest("button")||(V.preventDefault(),this.editor.focus())}onBottomFocus(){this.focusLast()}onTopFocus(){this.focusFirst()}onImage(V){var U;const yt=null===(U=V.files)||void 0===U?void 0:U[0];V.value="",yt&&this.imageLoader(yt).pipe((0,X.q)(1)).subscribe(Nt=>{this.addImage(Nt)})}onAttach(V){var U;const yt=Array.from(V.files||[]);V.value="",yt&&(null===(U=this.filesLoader)||void 0===U||U.call(this,yt).pipe((0,X.q)(1)).subscribe(Nt=>this.fileAttached.emit(Nt)))}onTeX(){this.texClicked.emit()}onLink(V,U){V.open=!1,U&&this.editor.toggleLink(U)}setAnchor(V,U){V.open=!1,U&&(this.editor.setAnchor(U),this.editor.selectClosest())}removeAnchor(){this.editor.removeAnchor()}enabled(V){return this.toolsSet.has(V)}undo(){this.editor.undo()}redo(){this.editor.redo()}insertHorizontalRule(){this.editor.setHorizontalRule()}removeFormat(){this.editor.removeFormat()}toggleOrderedList(){this.editor.toggleOrderedList()}toggleQuote(){this.editor.toggleBlockquote()}toggleSubscript(){this.editor.toggleSubscript()}toggleSuperscript(){this.editor.toggleSuperscript()}addImage(V){this.editor.setImage(V)}focusFirst(){var V;const U=null===(V=this.navigationManager)||void 0===V?void 0:V.findFirstFocusableTool();U&&U.focus()}focusLast(){var V;const U=null===(V=this.navigationManager)||void 0===V?void 0:V.findFirstFocusableTool(!0);U&&U.focus()}}O.\u0275fac=function(V){return new(V||O)(l.Y36(l.SBq,8),l.Y36(D.$3),l.Y36(ot.p7),l.Y36(ot.dR),l.Y36(ot.zc,8),l.Y36(ot.rf),l.Y36(ot.mJ))},O.\u0275cmp=l.Xpm({type:O,selectors:[["tui-toolbar"]],viewQuery:function(V,U){if(1&V&&(l.Gf(et.B,5),l.Gf(J,5,l.SBq)),2&V){let yt;l.iGM(yt=l.CRH())&&(U.navigationManager=yt.first),l.iGM(yt=l.CRH())&&(U.dropdowns=yt)}},hostAttrs:["role","toolbar"],hostVars:2,hostBindings:function(V,U){1&V&&l.NdJ("mousedown",function(Nt){return U.onMouseDown(Nt,Nt.target)}),2&V&&l.ekj("_disabled",U.disabled)},inputs:{colors:"colors",disabled:"disabled",tools:"tools"},outputs:{linkAdded:"linkAdded",texClicked:"texClicked",fileAttached:"fileAttached"},ngContentSelectors:["*"],decls:7,vars:8,consts:[["type","button",1,"t-prevent-parent-label-behavior"],[4,"ngIf"],[3,"tuiFocusable","focus"],["tuiToolbarNavigationManager","","class","t-tools-wrapper",4,"ngIf"],["tuiToolbarNavigationManager","",1,"t-tools-wrapper"],["class","t-block",4,"ngIf"],[1,"t-block"],["tuiItem","","tuiIconButton","","type","button","size","s","icon","tuiIconUndoLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","disabled","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconRedoLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","disabled","focusable","click"],["tuiItem","",1,"t-tool","t-wrapper"],["tuiItem","","class","t-tool t-wrapper",3,"enabledTools",4,"ngIf"],["tuiItem","","class","t-tool t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","disabled","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",3,"canOpen","content",4,"ngIf"],["class","t-wrapper",3,"canOpen","content",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"enabledTools"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","disabled","focusable","click"],["button",""],["tuiItem","",1,"t-wrapper",3,"canOpen","content"],["link",""],["tuiIconButton","","type","button","size","s","icon","tuiIconLinkLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","pseudoActive","focusable"],["linkDropdown",""],[3,"addLink","removeLink"],["dropdown",""],[1,"t-wrapper",3,"canOpen","content"],["anchor",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAnchorLarge","tuiHintDirection","top-left","appearance","icon","tuiHintDescribe","",3,"focusable","pseudoActive","tuiHint"],["anchorDropdown",""],[3,"anchorMode","addLink","removeLink"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconPaperclipLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["type","file",1,"t-file-upload",3,"accept","multiple","tuiFocusable","change"],["fileUpload",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","focusable","click"],["tuiItem","","class","t-tool t-wrapper",3,"colors",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"colors"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool",3,"tuiHint","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","focusable","click"],["tuiItem","",1,"t-wrapper"],["tuiIconButton","","type","button","size","s","icon","tuiIconImageLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","focusable","click"],["type","file","accept","image/*",1,"t-image",3,"tuiFocusable","change"],["image",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconClearFormatLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["tuiItem","",1,"t-tool","t-tool_margin"]],template:function(V,U){1&V&&(l.F$t(),l._UZ(0,"button",0),l.YNc(1,Q,1,0,"ng-container",1),l.ALo(2,"async"),l.TgZ(3,"div",2),l.NdJ("focus",function(){return U.onTopFocus()}),l.qZA(),l.TgZ(4,"div",2),l.NdJ("focus",function(){return U.onBottomFocus()}),l.qZA(),l.YNc(5,gt,13,10,"section",3),l.ALo(6,"async")),2&V&&(l.xp6(1),l.Q6J("ngIf",l.lcZ(2,4,U.editor.stateChange$)),l.xp6(2),l.Q6J("tuiFocusable",U.focusable),l.xp6(1),l.Q6J("tuiFocusable",U.focusable),l.xp6(1),l.Q6J("ngIf",l.lcZ(6,6,U.texts$)))},directives:[mt.O5,ct.t,et.B,Mt.v,it.w,ft.$,bt.D,It.x,Pt.t,At.D,pt.m,tt.h,F.X,ut.w,Y.o,xt.l,Bt.G,Dt.U,St.T,_t.y,wt.U,kt.d,z.p,rt.l,dt._,st.Y],pipes:[mt.Ov],styles:['.t-tools-wrapper[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;padding:.25rem .75rem;overflow:auto;flex-wrap:wrap;box-shadow:0 .125rem .1875rem #0000001a}.t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar, .t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-tools-wrapper._disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:var(--tui-disabled-opacity)}.t-block[_ngcontent-%COMP%]{display:flex;padding:.25rem 0}.t-block[_ngcontent-%COMP%]:not(:last-child):after{content:"";display:block;margin:0 .25rem;width:1px;background:var(--tui-secondary-active)}.t-tool[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}button.t-tool[_ngcontent-%COMP%]:hover, .t-tool[_ngcontent-%COMP%]     button:hover{background:var(--tui-secondary-hover)}.t-tool_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-font[_ngcontent-%COMP%]{padding:.3em 0;outline:none;width:100%;pointer-events:none}.t-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;font-size:0;opacity:0;cursor:pointer}.t-image[_ngcontent-%COMP%]::-webkit-file-upload-button{display:none}.t-file-upload[_ngcontent-%COMP%]{display:none}.t-color-picker[_ngcontent-%COMP%]     tui-hosted-dropdown, .t-color-picker[_ngcontent-%COMP%]     tui-color-picker, .t-color-picker[_ngcontent-%COMP%]     tui-color-edit{display:none}.t-prevent-parent-label-behavior[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),(0,C.gn)([(0,B.tuiDefaultProp)()],O.prototype,"colors",void 0),(0,C.gn)([(0,B.tuiDefaultProp)()],O.prototype,"disabled",void 0),(0,C.gn)([(0,B.tuiDefaultProp)(function(w){return!w.includes(g._.Tex)&&!w.includes(g._.Attach)},"Attach and TeX are not yet implemented in Editor")],O.prototype,"tools",null)},64352:(Yt,Ct,c)=>{c.d(Ct,{hK:()=>l,pL:()=>et,_s:()=>ot,Ci:()=>X,ML:()=>B,sw:()=>C,Db:()=>D,RR:()=>g});const C=new Map([["transparent","transparent"],["color-black-300","#333333"],["color-black-200","#666666"],["color-black-100","#909090"],["color-yellow-100","#FFDD2C"],["color-yellow-200","#FCC521"],["color-yellow-300","#FAB618"],["color-gray-100","#f5f5f6"],["color-gray-200","#e7e8ea"],["color-gray-300","#cbcfd3"],["color-gray-400","#959ba4"],["color-gray-500","#79818c"],["color-gray-600","#616871"],["color-light-blue-100","#ecf1f7"],["color-light-blue-200","#e4ebf3"],["color-light-blue-300","#dde4ed"],["color-blue-100","#1771e6"],["color-blue-200","#1464cc"],["color-blue-300","#0953b3"],["color-green-100","#39b54a"],["color-green-200","#2ca53a"],["color-green-300","#168a21"],["color-red-100","#e01f19"],["color-red-200","#d3120e"],["color-red-300","#c40b08"]]),l="rgb(51, 51, 51)";var y=c(48699);const D=[y._.Undo,y._.Size,y._.Bold,y._.Italic,y._.Underline,y._.Align,y._.List,y._.Quote,y._.Link,y._.Anchor,y._.Color,y._.Hilite,y._.Clear,y._.Strikethrough,y._.Code,y._.Img,y._.HR,y._.Sup,y._.Sub,y._.Table,y._.Details];function g(mt){return[{px:13,name:mt.small},{px:15,name:mt.normal},{px:17,name:mt.large},{px:24,family:"var(--tui-font-heading)",name:mt.subtitle,headingLevel:2,weight:"bold"},{px:30,family:"var(--tui-font-heading)",name:mt.title,headingLevel:1,weight:"bold"}]}const ot="#",B="http://",X="https://",et={protocol:X}},60153:(Yt,Ct,c)=>{c.d(Ct,{Z:()=>l});var C=c(74788);let l=(()=>{class y{constructor(){this.imagePreview=new C.vpe}click(g){g instanceof HTMLImageElement&&this.imagePreview.emit(g)}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275dir=C.lG2({type:y,selectors:[["tui-editor-socket","imagePreview",""]],hostAttrs:[1,"_preview-image"],hostBindings:function(g,ot){1&g&&C.NdJ("click",function(X){return ot.click(X.target)})},outputs:{imagePreview:"imagePreview"}}),y})()},84614:(Yt,Ct,c)=>{c.d(Ct,{Zj:()=>C.Z,BN:()=>y,JU:()=>D.JU,mJ:()=>D.mJ,$3:()=>D.$3});var C=c(60153),l=c(74788);let y=(()=>{class g{}return g.\u0275fac=function(B){return new(B||g)},g.\u0275mod=l.oAB({type:g}),g.\u0275inj=l.cJS({}),g})();var D=c(82113)},82113:(Yt,Ct,c)=>{c.d(Ct,{JU:()=>C.J,mJ:()=>y,$3:()=>D.$});var C=c(74982),l=c(74788);let y=(()=>{class g{}return g.\u0275fac=function(B){return new(B||g)},g.\u0275mod=l.oAB({type:g}),g.\u0275inj=l.cJS({}),g})();var D=c(76954)},74982:(Yt,Ct,c)=>{c.d(Ct,{J:()=>ot});var C=c(74788),l=c(14309),y=c(68807),D=c(46782),g=c(76954);let ot=(()=>{class B{constructor(et,mt,ct,Mt,it,ft){this.el=et,this.renderer=mt,this.editor=ct,this.editorContainer=Mt,this.editorLoaded$=it,this.valueChange=this.editor.valueChange$,this.stateChange=this.editor.stateChange$,this.editorLoaded$.pipe((0,D.R)(ft)).subscribe(()=>{this.renderer.appendChild(this.el.nativeElement,this.editorContainer)})}set value(et){this.editor.setValue(et)}set editable(et){this.editor.editable=et}}return B.\u0275fac=function(et){return new(et||B)(C.Y36(C.SBq),C.Y36(C.Qsj),C.Y36(g.$),C.Y36(l.Y1),C.Y36(l.ZW),C.Y36(y.TuiDestroyService,2))},B.\u0275dir=C.lG2({type:B,selectors:[["","tuiTiptapEditor",""]],inputs:{value:"value",editable:"editable"},outputs:{valueChange:"valueChange",stateChange:"stateChange"},features:[C._Bn([y.TuiDestroyService])]}),B})()},76954:(Yt,Ct,c)=>{c.d(Ct,{$:()=>mt});var C=c(77361),l=c(64352),y=c(14309),D=c(27863),g=c(39761),ot=c(88002),B=c(87519),et=c(74788);let mt=(()=>{class ct extends C._{constructor(it){super(),this.editorRef=it,this.editorRef.subscribe(ft=>{this.editor=ft,ft.on("transaction",()=>{this.stateChange$.next()}),ft.on("update",()=>{const bt=ft.getHTML(),Pt=function(ct){return Array.isArray(ct)&&1===ct.length&&!ct[0].hasOwnProperty("content")}(ft.getJSON().content)?"":bt;this.valueChange$.next(Pt)})})}get isFocused(){return this.editor.isFocused}get html(){return this.editor.getHTML()}get editable(){return this.editor.isEditable}set editable(it){this.editor.setEditable(it)}get state(){return this.editor.state}getOriginTiptapEditor(){return this.editor}undoDisabled(){return!this.editor.can().undo()}redoDisabled(){return!this.editor.can().redo()}getFontColor(){return this.editor.getAttributes("textStyle").fontColor||l.hK}getBackgroundColor(){var it;return(null===(it=this.editor)||void 0===it?void 0:it.getAttributes("textStyle").backgroundColor)||"transparent"}getCellColor(){return this.editor.getAttributes("tableCell").background||this.editor.getAttributes("tableHeader").background}getGroupColor(){var it,ft,bt,It;if(this.editor.isActive("group")){const Pt=null!==(ft=null===(it=this.editor.getAttributes("group"))||void 0===it?void 0:it.style)&&void 0!==ft?ft:"",At=(0,D.jx)(Pt);return null!==(It=null!==(bt=At["background-color"])&&void 0!==bt?bt:At.background)&&void 0!==It?It:""}return""}onAlign(it){this.editor.chain().focus().setTextAlign(it).run()}setImage(it){this.editor.chain().focus().command(({commands:ft,state:bt})=>{var It;const Pt=null!==(It=ft.setEditableImage)&&void 0!==It?It:ft.setImage;if(Pt){const At=bt.selection.anchor;return Pt({src:it}),ft.setTextSelection(At),ft.insertContent("<p></p>"),!0}return!1}).run()}undo(){this.editor.chain().undo().run()}redo(){this.editor.chain().redo().run()}setHorizontalRule(){this.editor.chain().focus().setHorizontalRule().run()}removeFormat(){this.editor.commands.unsetAllMarks(),this.editor.commands.clearNodes()}setFontColor(it){this.editor.chain().focus().setFontColor(it).run()}setBackgroundColor(it){this.editor.chain().focus().setBackgroundColor(it).run()}toggleUnderline(){this.editor.chain().focus().toggleUnderline().run()}toggleStrike(){this.editor.chain().focus().toggleStrike().run()}toggleOrderedList(){this.editor.chain().focus().toggleOrderedList().run()}toggleUnorderedList(){this.editor.chain().focus().toggleBulletList().run()}togglePre(){this.editor.chain().focus().toggleCodeBlock().run()}sinkListItem(){this.editor.chain().focus().sinkListItem("listItem").run()}liftListItem(){this.editor.chain().focus().liftListItem("listItem").run()}isActive(it){return this.editor.isActive(it)}isActive$(it){return this.stateChange$.pipe((0,g.O)(null),(0,ot.U)(()=>this.isActive(it)),(0,B.x)())}toggleBold(){this.editor.chain().focus().toggleBold().run()}toggleCode(){this.editor.chain().focus().toggleCode().run()}toggleItalic(){this.editor.chain().focus().toggleItalic().run()}toggleBlockquote(){this.editor.chain().focus().toggleBlockquote().run()}toggleSubscript(){this.editor.chain().focus().toggleSubscript().run()}toggleSuperscript(){this.editor.chain().focus().toggleSuperscript().run()}toggleCodeBlock(){this.editor.chain().focus().toggleCodeBlock().run()}insertTable(it,ft){this.editor.chain().focus().insertTable({cols:it,rows:ft}).run()}addColumnAfter(){this.editor.chain().focus().addColumnAfter().run()}addColumnBefore(){this.editor.chain().focus().addColumnBefore().run()}addRowAfter(){this.editor.chain().focus().addRowAfter().run()}addRowBefore(){this.editor.chain().focus().addRowBefore().run()}deleteColumn(){this.editor.chain().focus().deleteColumn().run()}deleteRow(){this.editor.chain().focus().deleteRow().run()}mergeCells(){this.editor.chain().focus().mergeCells().run()}splitCell(){this.editor.chain().focus().splitCell().run()}canMergeCells(){return this.editor.can().mergeCells()}canSplitCells(){return this.editor.can().splitCell()}setHeading(it){this.editor.chain().focus().setHeading({level:it}).run()}setParagraph(it){this.editor.chain().focus().setParagraph().run(),it&&this.editor.chain().setMark("textStyle",it).run()}setHardBreak(){this.editor.chain().setHardBreak().run()}setTextSelection(it){this.editor.commands.setTextSelection(it)}toggleLink(it){this.editor.chain().focus().toggleLink({href:it}).run()}setLink(it){this.editor.chain().focus().setLink({href:it}).run()}unsetLink(){this.editor.chain().focus().unsetLink().run()}focus(){this.editor.chain().focus().run()}setValue(it){it!==this.html&&this.editor.commands.setContent(it)}destroy(){this.editor.destroy()}setCellColor(it){this.editor.chain().focus().setCellBackground(it).run()}selectClosest(){const it=this.editor.state.selection.anchor,{schema:ft,doc:bt}=this.editor.state,It=(0,D.Yz)(bt.resolve(it),ft.marks.link);It&&this.editor.chain().setTextSelection(It).run()}enter(){this.editor.commands.enter()}setDetails(){this.editor.commands.setDetails()}removeDetails(){this.editor.commands.removeDetails()}setGroup(){this.editor.commands.setGroup()}removeGroup(){this.editor.commands.removeGroup()}setGroupHilite(it){this.editor.commands.setGroupHilite(it)}setAnchor(it){this.editor.commands.setAnchor(it.replace("#",""))}removeAnchor(){this.editor.commands.removeAnchor()}setFileLink(it){this.editor.commands.setFileLink(it)}setYoutubeVideo(it){this.editor.commands.setYoutubeVideo(it)}setIframe(it){this.editor.commands.setIframe(it)}removeEmptyTextStyle(){this.editor.commands.removeEmptyTextStyle()}toggleMark(it,ft,bt){this.editor.commands.toggleMark(it,ft,bt)}}return ct.\u0275fac=function(it){return new(it||ct)(et.LFG(y.ZW))},ct.\u0275prov=et.Yz7({token:ct,factory:ct.\u0275fac}),ct})()},48699:(Yt,Ct,c)=>{c.d(Ct,{_:()=>C});var C=(()=>{return(l=C||(C={})).Undo="undo",l.Anchor="anchor",l.Size="fontSize",l.Bold="bold",l.Italic="italic",l.Underline="underline",l.Strikethrough="strikeThrough",l.Align="justify",l.List="list",l.Quote="quote",l.Color="foreColor",l.Hilite="hiliteColor",l.Clear="clear",l.Link="link",l.Attach="attach",l.Tex="tex",l.Code="code",l.Img="image",l.HR="insertHorizontalRule",l.Sup="superscript",l.Sub="subscript",l.Table="insertTable",l.MergeCells="mergeCells",l.SplitCells="splitCells",l.RowsColumnsManaging="rowsColumnsManaging",l.Details="details",l.Group="group",C;var l})()},15736:(Yt,Ct,c)=>{c.r(Ct),c.d(Ct,{BackgroundColor:()=>y}),c(84402);const y=c(12867).Extension.create({name:"backgroundColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,renderHTML:({backgroundColor:D})=>D?{style:`background-color: ${D}`}:{},parseHTML:({style:D})=>D.backgroundColor.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setBackgroundColor:D=>({chain:g})=>g().setMark("textStyle",{backgroundColor:D}).run(),unsetBackgroundColor:()=>({chain:D})=>D().setMark("textStyle",{backgroundColor:null}).run()})})},93763:(Yt,Ct,c)=>{c.r(Ct),c.d(Ct,{TuiFileLink:()=>l});const l=c(12867).Extension.create({name:"fileLink",addCommands:()=>({setFileLink:y=>({state:D,chain:g})=>{const{selection:ot}=D,X='<span style="font-size: 15px"> </span>';return(Math.abs(ot.to-ot.from)>0?g().toggleMark("link",{href:y.link},{extendEmptyMarkRange:!0}).setTextSelection(ot.to).insertContent(X):g().insertContent(`<a href="${y.link}">${y.name}</a>${X}`)).setTextSelection(ot.to).run()}})})},52658:(Yt,Ct,c)=>{c.r(Ct),c.d(Ct,{FontColor:()=>y}),c(84402);const y=c(12867).Extension.create({name:"fontColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontColor:{default:null,renderHTML:({fontColor:D})=>D?{style:`color: ${D}`}:{},parseHTML:({style:D})=>D.color.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setFontColor:D=>({chain:g})=>g().setMark("textStyle",{fontColor:D}).run(),unsetFontColor:()=>({chain:D})=>D().setMark("textStyle",{fontColor:null}).run()})})},9492:(Yt,Ct,c)=>{c.r(Ct),c.d(Ct,{TuiFontSize:()=>y}),c(84402);const y=c(12867).Extension.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:({style:D})=>D.fontSize,renderHTML:({fontSize:D})=>D?{style:`font-size: ${D}`}:{}}}}]},addCommands:()=>({setFontSize:D=>({chain:g})=>g().setMark("textStyle",{fontSize:D}).run(),unsetFontSize:()=>({chain:D})=>D().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()})})},54920:(Yt,Ct,c)=>{c.r(Ct),c.d(Ct,{TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>y,createGroupExtension:()=>D});var C=c(27863),l=c(12867);const y={groupNodeClass:"tui-group-node",groupPointerNodeClass:"tui-group-pointer",nested:!0,draggable:!0,createOnEnter:!1},D=(g={})=>{const{draggable:ot,nested:B,groupNodeClass:X,groupPointerNodeClass:et,createOnEnter:mt}=Object.assign(Object.assign({},y),g);return l.Node.create({name:"group",draggable:ot,group:"block",content:B?"block+":"block",addAttributes:()=>({style:{default:null,parseHTML:ct=>ct.getAttribute("style"),renderHTML:ct=>ct.style?{style:ct.style}:{}}}),parseHTML:()=>[{tag:'div[data-type="group"]'}],renderHTML:({HTMLAttributes:ct})=>["div",(0,l.mergeAttributes)(ct,{"data-type":"group"}),0],addNodeView:()=>({HTMLAttributes:ct,node:Mt})=>{const it=document.createElement("div"),ft=document.createElement("div");if(it.classList.add(X),ft.setAttribute("data-type","group"),ct.style&&(Mt.attrs.style=ct.style,ft.setAttribute("style",ct.style)),ot){const bt=document.createElement("div");bt.classList.add(et),bt.innerHTML="",bt.contentEditable="false",it.append(bt,ft)}else it.append(ft);return{dom:it,contentDOM:ft}},addCommands(){return{setGroup:()=>({commands:ct,state:Mt})=>{this.editor.chain().focus().run();const it=(0,C.Ap)(Mt,""),bt=`<div data-type="group">${it.trim().startsWith("<p>")?it:`<p>${it}</p>`}</div>`;return ct.insertContent(bt)},setGroupHilite:ct=>({editor:Mt})=>{for(let it=Mt.state.selection.$anchor,ft=it.depth;ft>0;ft--){const bt=it.node(ft);if(bt.type.name===this.name){setTimeout(()=>Mt.commands.updateAttributes(bt.type,{style:`background: ${ct}`}));break}}return!0},removeGroup:()=>({state:ct,dispatch:Mt})=>(0,C.yU)(ct,Mt,this.name)}},addKeyboardShortcuts(){return mt?{Enter:()=>this.editor.commands.setGroup()}:{}}})}},20854:(Yt,Ct,c)=>{c.r(Ct),c.d(Ct,{TUI_IFRAME_EDITOR_OPTIONS:()=>ot,TuiIframeEditorComponent:()=>X,TuiIframeEditorModule:()=>Mt,createIframeEditorExtension:()=>ct});var C=c(12057),l=c(91211),y=c(95110),D=c(68807),g=c(74788);const ot=new g.OlP("[TUI_IFRAME_EDITOR_OPTIONS]",{factory:()=>({minWidth:100,maxWidth:1/0,minHeight:100,maxHeight:1/0})});var B=c(96570);let X=(()=>{class it extends y._3{constructor(bt,It,Pt,At){super(It,At),this.options=bt,this.sanitizer=Pt}get src(){var bt;return this.sanitizer.bypassSecurityTrustResourceUrl(null!==(bt=this.attrs.src)&&void 0!==bt?bt:"")}updateSize([bt,It]){this._width=Math.max(this.options.minWidth,Math.min(this.options.maxWidth,bt)),this._height=Math.max(this.options.minHeight,Math.min(this.options.maxHeight,It))}}return it.\u0275fac=function(bt){return new(bt||it)(g.Y36(ot),g.Y36(C.K0),g.Y36(l.H7),g.Y36(D.TuiDestroyService,2))},it.\u0275cmp=g.Xpm({type:it,selectors:[["tui-iframe-editor"]],features:[g._Bn([D.TuiDestroyService]),g.qOj],decls:2,vars:13,consts:[[3,"width","height","sizeChange"],[3,"src","width","height"]],template:function(bt,It){1&bt&&(g.TgZ(0,"tui-editor-resizable",0),g.NdJ("sizeChange",function(At){return It.updateSize(At)}),g._UZ(1,"iframe",1),g.qZA()),2&bt&&(g.Q6J("width",It.width)("height",It.height),g.xp6(1),g.Udp("min-width",It.options.minWidth)("min-height",It.options.minHeight)("max-width",It.options.maxWidth)("max-height",It.options.maxHeight),g.Q6J("src",It.src,g.uOi)("width",It.width)("height",It.height))},directives:[B.V],styles:["iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}"],changeDetection:0}),it})();var et=c(40400),mt=c(12867);const ct=it=>mt.Node.create({name:"iframe",group:"block",atom:!0,draggable:!1,parseHTML:()=>[{tag:'iframe[data-type="iframe-editor"]'}],addAttributes(){return{src:{default:null,keepOnSplit:!1,parseHTML:ft=>ft.getAttribute("src")},frameborder:{default:0,keepOnSplit:!1,parseHTML:ft=>ft.getAttribute("frameborder")},width:{default:"100%",keepOnSplit:!1,parseHTML:ft=>ft.getAttribute("width")},height:{default:null,keepOnSplit:!1,parseHTML:ft=>ft.getAttribute("height")},allowfullscreen:{keepOnSplit:!1,default:this.options.allowFullscreen,parseHTML:ft=>ft.getAttribute("allowfullscreen")}}},renderHTML:({HTMLAttributes:ft})=>["iframe",(0,mt.mergeAttributes)(ft,{"data-type":"iframe-editor"})],addNodeView:()=>(0,et.x)(X,{injector:it}),addCommands(){return{setIframe:ft=>({commands:bt,state:It})=>{const Pt=It.selection.anchor;return bt.enter(),bt.setTextSelection(Pt),bt.insertContent({type:this.name,attrs:ft}),bt.setTextSelection(It.selection.anchor),!0}}}});let Mt=(()=>{class it{}return it.\u0275fac=function(bt){return new(bt||it)},it.\u0275mod=g.oAB({type:it}),it.\u0275inj=g.cJS({imports:[[y.Sl]]}),it})()},53380:(Yt,Ct,c)=>{c.r(Ct),c.d(Ct,{TUI_EDITOR_MAX_IMAGE_WIDTH:()=>B,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>ot,TUI_IMAGE_EDITOR_OPTIONS:()=>X,TuiImageEditorComponent:()=>mt,TuiImageEditorModule:()=>tt,createImageEditorExtension:()=>Pt,tuiCreateImageEditorExtension:()=>pt});var C=c(12057),l=c(91211),y=c(95110),D=c(68807),g=c(74788);const ot=new g.OlP("[TUI_EDITOR_MIN_IMAGE_WIDTH]",{factory:()=>null}),B=new g.OlP("[TUI_EDITOR_MAX_IMAGE_WIDTH]",{factory:()=>null}),X=new g.OlP("[TUI_IMAGE_EDITOR_OPTIONS]",{factory:()=>({minWidth:100,maxWidth:1/0})});var et=c(96570);let mt=(()=>{class F extends y._3{constructor(Y,xt,Bt,Dt,St,_t){super(Dt,_t),this.minWidth=Y,this.maxWidth=xt,this.options=Bt,this.sanitizer=St}get dragHandle(){var Y;return null!==(Y=this.attrs.draggable)&&void 0!==Y?Y:null}get height(){return null}get alt(){return this.attrs.alt||""}get title(){return this.attrs.title||""}get src(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.attrs.src)}updateSize([Y]){var xt,Bt;const Dt=null!==(xt=this.minWidth)&&void 0!==xt?xt:this.options.minWidth,St=null!==(Bt=this.maxWidth)&&void 0!==Bt?Bt:this.options.maxWidth;this._width=Math.max(Dt,Math.min(St,Y))}}return F.\u0275fac=function(Y){return new(Y||F)(g.Y36(ot),g.Y36(B),g.Y36(X),g.Y36(C.K0),g.Y36(l.H7),g.Y36(D.TuiDestroyService,2))},F.\u0275cmp=g.Xpm({type:F,selectors:[["tui-image-editor"]],hostVars:1,hostBindings:function(Y,xt){2&Y&&g.uIk("data-drag-handle",xt.dragHandle)},features:[g._Bn([D.TuiDestroyService]),g.qOj],decls:2,vars:10,consts:[[3,"width","autoHeight","sizeChange"],[3,"src","width","alt","title"]],template:function(Y,xt){1&Y&&(g.TgZ(0,"tui-editor-resizable",0),g.NdJ("sizeChange",function(Dt){return xt.updateSize(Dt)}),g._UZ(1,"img",1),g.qZA()),2&Y&&(g.Q6J("width",xt.width)("autoHeight",!0),g.xp6(1),g.Udp("min-width",xt.options.minWidth,"px")("max-width",xt.options.maxWidth,"px"),g.Q6J("src",xt.src,g.LSH)("width",xt.width)("alt",xt.alt)("title",xt.title))},directives:[et.V],styles:["[data-drag-handle][_nghost-%COMP%]{cursor:move}img[_ngcontent-%COMP%]{pointer-events:none}"],changeDetection:0}),F})();var ct=c(40400),Mt=c(12867),it=c(44632),ft=c(62463);const bt=[{tag:'img[data-type="image-editor"]'}],It={src:{default:"",keepOnSplit:!1},width:{default:300,keepOnSplit:!1},alt:{default:"",keepOnSplit:!1},title:{default:"",keepOnSplit:!1}};function Pt(F,{draggable:ut}={}){const Y=!(0,D.tuiIsPresent)(ut)||ut;return it.Image.extend({name:"imageEditor",group:"block",atom:!0,draggable:Y,parseHTML:()=>bt,addAttributes:()=>Object.assign(Object.assign({},It),{draggable:{default:Y?"":null,keepOnSplit:!1}}),renderHTML:({HTMLAttributes:xt})=>["img",(0,Mt.mergeAttributes)(xt,{"data-type":"image-editor"})],addNodeView:()=>(0,ct.x)(mt,{injector:F}),addCommands(){return{setEditableImage:xt=>({commands:Bt})=>Bt.insertContent({type:this.name,attrs:xt})}},addProseMirrorPlugins:()=>[new ft.Sy({props:{handleDOMEvents:{paste:At,drop:At}}})]})}function At(F,ut){var Y;const xt=ut instanceof DragEvent?ut.dataTransfer:ut.clipboardData,Bt=Array.from(null!==(Y=null==xt?void 0:xt.files)&&void 0!==Y?Y:[]).filter(Dt=>/image/i.test(Dt.type));Bt.length&&ut.preventDefault();for(const Dt of Bt){const St=new FileReader;St.onload=_t=>{var wt;const kt=F.state.schema.nodes.imageEditor.create({src:null===(wt=_t.target)||void 0===wt?void 0:wt.result}),z=F.state.tr.replaceSelectionWith(kt);setTimeout(()=>F.dispatch(z))},St.readAsDataURL(Dt)}}function pt({injector:F,draggable:ut}){return Pt(F,{draggable:ut})}let tt=(()=>{class F{}return F.\u0275fac=function(Y){return new(Y||F)},F.\u0275mod=g.oAB({type:F}),F.\u0275inj=g.cJS({imports:[[C.ez,y.Sl]]}),F})()},12177:(Yt,Ct,c)=>{function l(D){return D.isActive("bulletList")||D.isActive("orderedList")}c.r(Ct),c.d(Ct,{TuiTabExtension:()=>y,tuiIsOrderedOrBulletList:()=>l});const y=c(12867).Extension.create({name:"indent",addKeyboardShortcuts(){return{Tab:()=>l(this.editor)?null:this.editor.commands.insertContent("\t")}}})},82091:(Yt,Ct,c)=>{c.r(Ct),c.d(Ct,{TuiLink:()=>v});var C=c(27863),l=c(12867);const g=(m,f)=>{for(const M in f)m[M]=f[M];return m},ot="numeric",B="ascii",X="alpha",et="asciinumeric",mt="alphanumeric",ct="domain",bt="whitespace";function It(m,f){return m in f||(f[m]=[]),f[m]}function Pt(m,f,M){f[ot]&&(f[et]=!0,f[mt]=!0),f[B]&&(f[et]=!0,f[X]=!0),f[et]&&(f[mt]=!0),f[X]&&(f[mt]=!0),f[mt]&&(f[ct]=!0),f.emoji&&(f[ct]=!0);for(const x in f){const R=It(x,M);R.indexOf(m)<0&&R.push(m)}}function pt(m){void 0===m&&(m=null),this.j={},this.jr=[],this.jd=null,this.t=m}pt.groups={},pt.prototype={accepts(){return!!this.t},go(m){const f=this,M=f.j[m];if(M)return M;for(let x=0;x<f.jr.length;x++){const R=f.jr[x][0],Z=f.jr[x][1];if(Z&&R.test(m))return Z}return f.jd},has(m,f){return void 0===f&&(f=!1),f?m in this.j:!!this.go(m)},ta(m,f,M,x){for(let R=0;R<m.length;R++)this.tt(m[R],f,M,x)},tr(m,f,M,x){let R;return x=x||pt.groups,f&&f.j?R=f:(R=new pt(f),M&&x&&Pt(f,M,x)),this.jr.push([m,R]),R},ts(m,f,M,x){let R=this;const Z=m.length;if(!Z)return R;for(let W=0;W<Z-1;W++)R=R.tt(m[W]);return R.tt(m[Z-1],f,M,x)},tt(m,f,M,x){x=x||pt.groups;const R=this;if(f&&f.j)return R.j[m]=f,f;const Z=f;let W,G=R.go(m);if(G?(W=new pt,g(W.j,G.j),W.jr.push.apply(W.jr,G.jr),W.jd=G.jd,W.t=G.t):W=new pt,Z){if(x)if(W.t&&"string"==typeof W.t){const vt=g(function(m,f){const M={};for(const x in f)f[x].indexOf(m)>=0&&(M[x]=!0);return M}(W.t,x),M);Pt(Z,vt,x)}else M&&Pt(Z,M,x);W.t=Z}return R.j[m]=W,W}};const tt=(m,f,M,x,R)=>m.ta(f,M,x,R),F=(m,f,M,x,R)=>m.tr(f,M,x,R),ut=(m,f,M,x,R)=>m.ts(f,M,x,R),Y=(m,f,M,x,R)=>m.tt(f,M,x,R),xt="WORD",Bt="UWORD",Dt="LOCALHOST",_t="UTLD",wt="SCHEME",kt="SLASH_SCHEME",z="NUM",st="OPENBRACE",J="OPENBRACKET",Q="OPENANGLEBRACKET",nt="OPENPAREN",Lt="CLOSEBRACE",Jt="CLOSEBRACKET",Zt="CLOSEANGLEBRACKET",ne="CLOSEPAREN",Wt="AMPERSAND",pe="APOSTROPHE",ye="ASTERISK",Oe="AT",fe="BACKSLASH",Ke="BACKTICK",xe="CARET",Ne="COLON",ge="COMMA",Ae="DOLLAR",Ce="DOT",Pe="EQUALS",Be="EXCLAMATION",Me="HYPHEN",ke="PERCENT",Ye="PIPE",He="PLUS",Ue="POUND",Le="QUERY",ze="QUOTE",_e="SEMI",he="SLASH",Ee="TILDE",gt="UNDERSCORE",b="EMOJI",O="SYM";var I=Object.freeze({__proto__:null,WORD:xt,UWORD:Bt,LOCALHOST:Dt,TLD:"TLD",UTLD:_t,SCHEME:wt,SLASH_SCHEME:kt,NUM:z,WS:"WS",NL:"NL",OPENBRACE:st,OPENBRACKET:J,OPENANGLEBRACKET:Q,OPENPAREN:nt,CLOSEBRACE:Lt,CLOSEBRACKET:Jt,CLOSEANGLEBRACKET:Zt,CLOSEPAREN:ne,AMPERSAND:Wt,APOSTROPHE:pe,ASTERISK:ye,AT:Oe,BACKSLASH:fe,BACKTICK:Ke,CARET:xe,COLON:Ne,COMMA:ge,DOLLAR:Ae,DOT:Ce,EQUALS:Pe,EXCLAMATION:Be,HYPHEN:Me,PERCENT:ke,PIPE:Ye,PLUS:He,POUND:Ue,QUERY:Le,QUOTE:ze,SEMI:_e,SLASH:he,TILDE:Ee,UNDERSCORE:gt,EMOJI:b,SYM:O});const w=/[a-z]/,V=/\p{L}/u,U=/\p{Emoji}/u,Nt=/\d/,H=/\s/;let k=null,K=null;function ee(m,f,M,x,R){let Z;const W=f.length;for(let G=0;G<W-1;G++){const vt=f[G];m.j[vt]?Z=m.j[vt]:(Z=new pt(x),Z.jr=R.slice(),m.j[vt]=Z),m=Z}return Z=new pt(M),Z.jr=R.slice(),m.j[f[W-1]]=Z,Z}function we(m){const f=[],M=[];let x=0;for(;x<m.length;){let Z=0;for(;"0123456789".indexOf(m[x+Z])>=0;)Z++;if(Z>0){f.push(M.join(""));for(let W=parseInt(m.substring(x,x+Z),10);W>0;W--)M.pop();x+=Z}else M.push(m[x]),x++}return f}const Je={defaultProtocol:"http",events:null,format:S,formatHref:S,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function $(m,f){void 0===f&&(f=null);let M=g({},Je);m&&(M=g(M,m instanceof $?m.o:m));const x=M.ignoreTags,R=[];for(let Z=0;Z<x.length;Z++)R.push(x[Z].toUpperCase());this.o=M,f&&(this.defaultRender=f),this.ignoreTags=R}function S(m){return m}function Tt(m,f){this.t="token",this.v=m,this.tk=f}function Et(m,f){class M extends Tt{constructor(R,Z){super(R,Z),this.t=m}}for(const x in f)M.prototype[x]=f[x];return M.t=m,M}$.prototype={o:Je,ignoreTags:[],defaultRender:m=>m,check(m){return this.get("validate",m.toString(),m)},get(m,f,M){const x=null!=f;let R=this.o[m];return R&&("object"==typeof R?(R=M.t in R?R[M.t]:Je[m],"function"==typeof R&&x&&(R=R(f,M))):"function"==typeof R&&x&&(R=R(f,M.t,M)),R)},getObj(m,f,M){let x=this.o[m];return"function"==typeof x&&null!=f&&(x=x(f,M.t,M)),x},render(m){const f=m.render(this);return(this.get("render",null,m)||this.defaultRender)(f,m.t,m)}},Tt.prototype={isLink:!1,toString(){return this.v},toHref(m){return this.toString()},toFormattedString(m){const f=this.toString(),M=m.get("truncate",f,this),x=m.get("format",f,this);return M&&x.length>M?x.substring(0,M)+"\u2026":x},toFormattedHref(m){return m.get("formatHref",this.toHref(m.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(m){return void 0===m&&(m=Je.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(m),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(m){return{type:this.t,value:this.toFormattedString(m),isLink:this.isLink,href:this.toFormattedHref(m),start:this.startIndex(),end:this.endIndex()}},validate(m){return m.get("validate",this.toString(),this)},render(m){const f=this,M=this.toHref(m.get("defaultProtocol")),x=m.get("formatHref",M,this),R=m.get("tagName",M,f),Z=this.toFormattedString(m),W={},G=m.get("className",M,f),vt=m.get("target",M,f),Ot=m.get("rel",M,f),Ut=m.getObj("attributes",M,f),zt=m.getObj("events",M,f);return W.href=x,G&&(W.class=G),vt&&(W.target=vt),Ot&&(W.rel=Ot),Ut&&g(W,Ut),{tagName:R,attributes:W,content:Z,eventListeners:zt}}};const Kt=Et("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Ft=Et("text"),Qt=Et("nl"),oe=Et("url",{isLink:!0,toHref(m){return void 0===m&&(m=Je.defaultProtocol),this.hasProtocol()?this.v:`${m}://${this.v}`},hasProtocol(){const m=this.tk;return m.length>=2&&m[0].t!==Dt&&m[1].t===Ne}}),se=m=>new pt(m);function Re(m,f,M){return new m(f.slice(M[0].s,M[M.length-1].e),M)}const We="undefined"!=typeof console&&console&&console.warn||(()=>{}),ue={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function un(m,f){if(void 0===f&&(f=!1),ue.initialized&&We(`linkifyjs: already initialized - will not register custom scheme "${m}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(m))throw new Error('linkifyjs: incorrect scheme format.\n 1. Must only contain digits, lowercase ASCII letters or "-"\n 2. Cannot start or end with "-"\n 3. "-" cannot repeat');ue.customSchemes.push([m,f])}function Tn(m){return ue.initialized||function(){ue.scanner=function(m){void 0===m&&(m=[]);const f={};pt.groups=f;const M=new pt;null==k&&(k=we("aaa1rp3barth4b0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re2s2c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y0eats7k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking0channel11l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t0isalat7u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0at2delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d0network8tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0eles2s3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster5ia3d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0cys3drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7serati6ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic3tual5v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rthwesternmutual14on4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cher3ks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w0time7i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0channel7ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5m\xf6gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u0elos6wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2")),null==K&&(K=we("\u03b5\u03bb1\u03c52\u0431\u04331\u0435\u043b3\u0434\u0435\u0442\u04384\u0435\u044e2\u043a\u0430\u0442\u043e\u043b\u0438\u043a6\u043e\u043c3\u043c\u043a\u04342\u043e\u043d1\u0441\u043a\u0432\u04306\u043e\u043d\u043b\u0430\u0439\u043d5\u0440\u04333\u0440\u0443\u04412\u04442\u0441\u0430\u0439\u04423\u0440\u04313\u0443\u043a\u04403\u049b\u0430\u04373\u0570\u0561\u05753\u05d9\u05e9\u05e8\u05d0\u05dc5\u05e7\u05d5\u05dd3\u0627\u0628\u0648\u0638\u0628\u064a5\u062a\u0635\u0627\u0644\u0627\u062a6\u0631\u0627\u0645\u0643\u06485\u0644\u0627\u0631\u062f\u06464\u0628\u062d\u0631\u064a\u06465\u062c\u0632\u0627\u0626\u06315\u0633\u0639\u0648\u062f\u064a\u06296\u0639\u0644\u064a\u0627\u06465\u0645\u063a\u0631\u06285\u0645\u0627\u0631\u0627\u062a5\u06cc\u0631\u0627\u06465\u0628\u0627\u0631\u062a2\u0632\u0627\u06314\u064a\u062a\u06433\u06be\u0627\u0631\u062a5\u062a\u0648\u0646\u06334\u0633\u0648\u062f\u0627\u06463\u0631\u064a\u06295\u0634\u0628\u0643\u06294\u0639\u0631\u0627\u06422\u06282\u0645\u0627\u06464\u0641\u0644\u0633\u0637\u064a\u06466\u0642\u0637\u06313\u0643\u0627\u062b\u0648\u0644\u064a\u06436\u0648\u06453\u0645\u0635\u06312\u0644\u064a\u0633\u064a\u06275\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u06277\u0642\u06394\u0647\u0645\u0631\u0627\u06475\u067e\u0627\u06a9\u0633\u062a\u0627\u06467\u0680\u0627\u0631\u062a4\u0915\u0949\u092e3\u0928\u0947\u091f3\u092d\u093e\u0930\u09240\u092e\u094d3\u094b\u09245\u0938\u0902\u0917\u0920\u09285\u09ac\u09be\u0982\u09b2\u09be5\u09ad\u09be\u09b0\u09a42\u09f0\u09a44\u0a2d\u0a3e\u0a30\u0a244\u0aad\u0abe\u0ab0\u0aa44\u0b2d\u0b3e\u0b30\u0b244\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe6\u0bb2\u0b99\u0bcd\u0b95\u0bc86\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd11\u0c2d\u0c3e\u0c30\u0c24\u0c4d5\u0cad\u0cbe\u0cb0\u0ca44\u0d2d\u0d3e\u0d30\u0d24\u0d025\u0dbd\u0d82\u0d9a\u0dcf4\u0e04\u0e2d\u0e213\u0e44\u0e17\u0e223\u0ea5\u0eb2\u0ea73\u10d2\u10d42\u307f\u3093\u306a3\u30a2\u30de\u30be\u30f34\u30af\u30e9\u30a6\u30c94\u30b0\u30fc\u30b0\u30eb4\u30b3\u30e02\u30b9\u30c8\u30a23\u30bb\u30fc\u30eb3\u30d5\u30a1\u30c3\u30b7\u30e7\u30f36\u30dd\u30a4\u30f3\u30c84\u4e16\u754c2\u4e2d\u4fe11\u56fd1\u570b1\u6587\u7f513\u4e9a\u9a6c\u900a3\u4f01\u4e1a2\u4f5b\u5c712\u4fe1\u606f2\u5065\u5eb72\u516b\u53662\u516c\u53f81\u76ca2\u53f0\u6e7e1\u70632\u5546\u57ce1\u5e971\u68072\u5609\u91cc0\u5927\u9152\u5e975\u5728\u7ebf2\u5927\u62ff2\u5929\u4e3b\u65593\u5a31\u4e502\u5bb6\u96fb2\u5e7f\u4e1c2\u5fae\u535a2\u6148\u55842\u6211\u7231\u4f603\u624b\u673a2\u62db\u80582\u653f\u52a11\u5e9c2\u65b0\u52a0\u57612\u95fb2\u65f6\u5c1a2\u66f8\u7c4d2\u673a\u67842\u6de1\u9a6c\u95213\u6e38\u620f2\u6fb3\u95802\u70b9\u770b2\u79fb\u52a82\u7ec4\u7ec7\u673a\u67844\u7f51\u57401\u5e971\u7ad91\u7edc2\u8054\u901a2\u8c37\u6b4c2\u8d2d\u72692\u901a\u8ca92\u96c6\u56e22\u96fb\u8a0a\u76c8\u79d14\u98de\u5229\u6d663\u98df\u54c12\u9910\u53852\u9999\u683c\u91cc\u62c93\u6e2f2\ub2f7\ub1371\ucef42\uc0bc\uc1312\ud55c\uad6d2")),Y(M,"'",pe),Y(M,"{",st),Y(M,"[",J),Y(M,"<",Q),Y(M,"(",nt),Y(M,"}",Lt),Y(M,"]",Jt),Y(M,">",Zt),Y(M,")",ne),Y(M,"&",Wt),Y(M,"*",ye),Y(M,"@",Oe),Y(M,"`",Ke),Y(M,"^",xe),Y(M,":",Ne),Y(M,",",ge),Y(M,"$",Ae),Y(M,".",Ce),Y(M,"=",Pe),Y(M,"!",Be),Y(M,"-",Me),Y(M,"%",ke),Y(M,"|",Ye),Y(M,"+",He),Y(M,"#",Ue),Y(M,"?",Le),Y(M,'"',ze),Y(M,"/",he),Y(M,";",_e),Y(M,"~",Ee),Y(M,"_",gt),Y(M,"\\",fe);const x=F(M,Nt,z,{[ot]:!0});F(x,Nt,x);const R=F(M,w,xt,{[B]:!0});F(R,w,R);const Z=F(M,V,Bt,{[X]:!0});F(Z,w),F(Z,V,Z);const W=F(M,H,"WS",{[bt]:!0});Y(M,"\n","NL",{[bt]:!0}),Y(W,"\n"),F(W,H,W);const G=F(M,U,b,{emoji:!0});F(G,U,G),Y(G,"\ufe0f",G);const vt=Y(G,"\u200d");F(vt,U,G);const Ot=[[w,R]],Ut=[[w,null],[V,Z]];for(let zt=0;zt<k.length;zt++)ee(M,k[zt],"TLD",xt,Ot);for(let zt=0;zt<K.length;zt++)ee(M,K[zt],_t,Bt,Ut);Pt("TLD",{tld:!0,ascii:!0},f),Pt(_t,{utld:!0,alpha:!0},f),ee(M,"file",wt,xt,Ot),ee(M,"mailto",wt,xt,Ot),ee(M,"http",kt,xt,Ot),ee(M,"https",kt,xt,Ot),ee(M,"ftp",kt,xt,Ot),ee(M,"ftps",kt,xt,Ot),Pt(wt,{scheme:!0,ascii:!0},f),Pt(kt,{slashscheme:!0,ascii:!0},f),m=m.sort((zt,jt)=>zt[0]>jt[0]?1:-1);for(let zt=0;zt<m.length;zt++){const jt=m[zt][0],ie=m[zt][1]?{scheme:!0}:{slashscheme:!0};jt.indexOf("-")>=0?ie[ct]=!0:w.test(jt)?Nt.test(jt)?ie[et]=!0:ie[B]=!0:ie[ot]=!0,ut(M,jt,jt,ie)}return ut(M,"localhost",Dt,{ascii:!0}),M.jd=new pt(O),{start:M,tokens:g({groups:f},I)}}(ue.customSchemes);for(let m=0;m<ue.tokenQueue.length;m++)ue.tokenQueue[m][1]({scanner:ue.scanner});ue.parser=function(m){let{groups:f}=m;const M=f.domain.concat([Wt,ye,Oe,fe,Ke,xe,Ae,Pe,Me,z,ke,Ye,He,Ue,he,O,Ee,gt]),x=[pe,Zt,Lt,Jt,ne,Ne,ge,Ce,Be,Q,st,J,nt,Le,ze,_e],R=[Wt,pe,ye,fe,Ke,xe,Lt,Ae,Pe,Me,st,ke,Ye,He,Ue,Le,he,O,Ee,gt],Z=se(),W=Y(Z,Ee);tt(W,R,W),tt(W,f.domain,W);const G=se(),vt=se(),Ot=se();tt(Z,f.domain,G),tt(Z,f.scheme,vt),tt(Z,f.slashscheme,Ot),tt(G,R,W),tt(G,f.domain,G);const Ut=Y(G,Oe);Y(W,Oe,Ut),Y(vt,Oe,Ut),Y(Ot,Oe,Ut);const zt=Y(W,Ce);tt(zt,R,W),tt(zt,f.domain,W);const jt=se();tt(Ut,f.domain,jt),tt(jt,f.domain,jt);const re=Y(jt,Ce);tt(re,f.domain,jt);const ie=se(Kt);tt(re,f.tld,ie),tt(re,f.utld,ie),Y(Ut,Dt,ie);const be=Y(jt,Me);tt(be,f.domain,jt),tt(ie,f.domain,jt),Y(ie,Ce,re),Y(ie,Me,be);const qe=Y(ie,Ne);tt(qe,f.numeric,Kt);const je=Y(G,Me),ve=Y(G,Ce);tt(je,f.domain,G),tt(ve,R,W),tt(ve,f.domain,G);const De=se(oe);tt(ve,f.tld,De),tt(ve,f.utld,De),tt(De,f.domain,G),tt(De,R,W),Y(De,Ce,ve),Y(De,Me,je),Y(De,Oe,Ut);const cn=Y(De,Ne),en=se(oe);tt(cn,f.numeric,en);const de=se(oe),Ie=se();tt(de,M,de),tt(de,x,Ie),tt(Ie,M,de),tt(Ie,x,Ie),Y(De,he,de),Y(en,he,de);const $e=Y(vt,Ne),Qn=Y(Ot,Ne),Gn=Y(Qn,he),hn=Y(Gn,he);tt(vt,f.domain,G),Y(vt,Ce,ve),Y(vt,Me,je),tt(Ot,f.domain,G),Y(Ot,Ce,ve),Y(Ot,Me,je),tt($e,f.domain,de),Y($e,he,de),tt(hn,f.domain,de),tt(hn,M,de),Y(hn,he,de);const Ge=Y(de,st),In=Y(de,J),Cn=Y(de,Q),Mn=Y(de,nt);Y(Ie,st,Ge),Y(Ie,J,In),Y(Ie,Q,Cn),Y(Ie,nt,Mn),Y(Ge,Lt,de),Y(In,Jt,de),Y(Cn,Zt,de),Y(Mn,ne,de),Y(Ge,Lt,de);const En=se(oe),fn=se(oe),nn=se(oe),mn=se(oe);tt(Ge,M,En),tt(In,M,fn),tt(Cn,M,nn),tt(Mn,M,mn);const gn=se(),tn=se(),kn=se(),wn=se();return tt(Ge,x),tt(In,x),tt(Cn,x),tt(Mn,x),tt(En,M,En),tt(fn,M,fn),tt(nn,M,nn),tt(mn,M,mn),tt(En,x,En),tt(fn,x,fn),tt(nn,x,nn),tt(mn,x,mn),tt(gn,M,gn),tt(tn,M,fn),tt(kn,M,nn),tt(wn,M,mn),tt(gn,x,gn),tt(tn,x,tn),tt(kn,x,kn),tt(wn,x,wn),Y(fn,Jt,de),Y(nn,Zt,de),Y(mn,ne,de),Y(En,Lt,de),Y(tn,Jt,de),Y(kn,Zt,de),Y(wn,ne,de),Y(gn,ne,de),Y(Z,Dt,De),Y(Z,"NL",Qt),{start:Z,tokens:I}}(ue.scanner.tokens);for(let m=0;m<ue.pluginQueue.length;m++)ue.pluginQueue[m][1]({scanner:ue.scanner,parser:ue.parser});ue.initialized=!0}(),function(m,f,M){let x=M.length,R=0,Z=[],W=[];for(;R<x;){let G=m,vt=null,Ot=null,Ut=0,zt=null,jt=-1;for(;R<x&&!(vt=G.go(M[R].t));)W.push(M[R++]);for(;R<x&&(Ot=vt||G.go(M[R].t));)vt=null,G=Ot,G.accepts()?(jt=0,zt=G):jt>=0&&jt++,R++,Ut++;if(jt<0)R-=Ut,R<x&&(W.push(M[R]),R++);else{W.length>0&&(Z.push(Re(Ft,f,W)),W=[]),R-=jt,Ut-=jt;const re=zt.t,ie=M.slice(R-Ut,R);Z.push(Re(re,f,ie))}}return W.length>0&&Z.push(Re(Ft,f,W)),Z}(ue.parser.start,m,function(m,f){const M=function(m){const f=[],M=m.length;let x=0;for(;x<M;){let Z,R=m.charCodeAt(x),W=R<55296||R>56319||x+1===M||(Z=m.charCodeAt(x+1))<56320||Z>57343?m[x]:m.slice(x,x+2);f.push(W),x+=W.length}return f}(f.replace(/[A-Z]/g,G=>G.toLowerCase())),x=M.length,R=[];let Z=0,W=0;for(;W<x;){let G=m,vt=null,Ot=0,Ut=null,zt=-1,jt=-1;for(;W<x&&(vt=G.go(M[W]));)G=vt,G.accepts()?(zt=0,jt=0,Ut=G):zt>=0&&(zt+=M[W].length,jt++),Ot+=M[W].length,Z+=M[W].length,W++;Z-=zt,W-=jt,Ot-=zt,R.push({t:Ut.t,v:f.slice(Z-Ot,Z),s:Z-Ot,e:Z})}return R}(ue.scanner.start,m))}function xn(m,f,M){if(void 0===f&&(f=null),void 0===M&&(M=null),f&&"object"==typeof f){if(M)throw Error(`linkifyjs: Invalid link type ${f}; must be a string`);M=f,f=null}const x=new $(M),R=Tn(m),Z=[];for(let W=0;W<R.length;W++){const G=R[W];G.isLink&&(!f||G.t===f)&&Z.push(G.toFormattedObject(x))}return Z}function vn(m,f){void 0===f&&(f=null);const M=Tn(m);return 1===M.length&&M[0].isLink&&(!f||M[0].t===f)}var Qe=c(62463);const v=l.Mark.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(m=>{"string"!=typeof m?un(m.scheme,m.optionalSlashes):un(m)})},onDestroy(){pt.groups={},ue.scanner=null,ue.parser=null,ue.tokenQueue=[],ue.pluginQueue=[],ue.customSchemes=[],ue.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}),addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML:()=>[{tag:'a[href]:not([href *= "javascript:" i])'}],renderHTML({HTMLAttributes:m}){return["a",(0,l.mergeAttributes)(this.options.HTMLAttributes,m),0]},addCommands(){return{setLink:m=>({chain:f})=>f().setMark(this.name,m).setMeta("preventAutolink",!0).run(),toggleLink:m=>({chain:f})=>f().toggleMark(this.name,m,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:m})=>m().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[(0,l.markPasteRule)({find:m=>xn(m).filter(f=>!this.options.validate||this.options.validate(f.value)).filter(f=>f.isLink).map(f=>({text:f.value,index:f.start,data:f})),type:this.type,getAttributes:m=>{var f;return{href:null===(f=m.data)||void 0===f?void 0:f.href}}})]},addProseMirrorPlugins(){const m=[];return this.options.autolink&&m.push(function(m){return new Qe.Sy({key:new Qe.H$("autolink"),appendTransaction:(f,M,x)=>{const R=f.some(Ut=>Ut.docChanged)&&!M.doc.eq(x.doc),Z=f.some(Ut=>Ut.getMeta("preventAutolink"));if(!R||Z)return;const{tr:W}=x,G=(0,l.combineTransactionSteps)(M.doc,[...f]),{mapping:vt}=G;return(0,l.getChangedRanges)(G).forEach(({oldRange:Ut,newRange:zt})=>{(0,l.getMarksBetween)(Ut.from,Ut.to,M.doc).filter(be=>be.mark.type===m.type).forEach(be=>{const qe=vt.map(be.from),je=vt.map(be.to),ve=(0,l.getMarksBetween)(qe,je,x.doc).filter($e=>$e.mark.type===m.type);if(!ve.length)return;const De=ve[0],cn=M.doc.textBetween(be.from,be.to,void 0," "),en=x.doc.textBetween(De.from,De.to,void 0," "),de=vn(cn),Ie=vn(en);de&&!Ie&&W.removeMark(De.from,De.to,m.type)});const jt=(0,l.findChildrenInRange)(x.doc,zt,be=>be.isTextblock);let re,ie;if(jt.length>1?(re=jt[0],ie=x.doc.textBetween(re.pos,re.pos+re.node.nodeSize,void 0," ")):jt.length&&x.doc.textBetween(zt.from,zt.to," "," ").endsWith(" ")&&(re=jt[0],ie=x.doc.textBetween(re.pos,zt.to,void 0," ")),re&&ie){const be=ie.split(" ").filter(ve=>""!==ve);if(be.length<=0)return!1;const qe=be[be.length-1],je=re.pos+ie.lastIndexOf(qe);if(!qe)return!1;xn(qe).filter(ve=>ve.isLink).filter(ve=>!m.validate||m.validate(ve.value)).map(ve=>me(Gt({},ve),{from:je+ve.start+1,to:je+ve.end+1})).forEach(ve=>{W.addMark(ve.from,ve.to,m.type.create({href:ve.href}))})}}),W.steps.length?W:void 0}})}({type:this.type,validate:this.options.validate})),this.options.openOnClick&&m.push(function(m){return new Qe.Sy({key:new Qe.H$("handleClickLink"),props:{handleClick:(f,M,x)=>{var R,Z,W;if(0!==x.button)return!1;const G=(0,l.getAttributes)(f.state,m.type.name),vt=null===(R=x.target)||void 0===R?void 0:R.closest("a"),Ot=null!==(Z=null==vt?void 0:vt.href)&&void 0!==Z?Z:G.href,Ut=null!==(W=null==vt?void 0:vt.target)&&void 0!==W?W:G.target;return!(!vt||!Ot||(window.open(Ot,Ut),0))}}})}({type:this.type})),this.options.linkOnPaste&&m.push(function(m){return new Qe.Sy({key:new Qe.H$("handlePasteLink"),props:{handlePaste:(f,M,x)=>{const{state:R}=f,{selection:Z}=R,{empty:W}=Z;if(W)return!1;let G="";x.content.forEach(Ot=>{G+=Ot.textContent});const vt=xn(G).find(Ot=>Ot.isLink&&Ot.value===G);return!(!G||!vt||(m.editor.commands.setMark(m.type,{href:vt.href}),0))}}})}({editor:this.editor,type:this.type})),m}}).extend({addAttributes(){var m;return Object.assign(Object.assign({},null===(m=this.parent)||void 0===m?void 0:m.call(this)),(0,C.x6)(["download"]))},addCommands(){var m;return Object.assign(Object.assign({},null===(m=this.parent)||void 0===m?void 0:m.call(this)),{toggleLink:f=>({chain:M,state:x})=>{{const{selection:R,doc:Z}=x,W=Z.cut(R.to,R.to+1),vt=" "===(0,l.getHTMLFromFragment)(W.content,x.schema).replace(/<\/?[^>]+(>|$)/g,""),Ot=M().toggleMark(this.name,f,{extendEmptyMarkRange:!0});return(vt?Ot.setTextSelection(R.to+1):Ot.setTextSelection(R.to).insertContent('<span style="font-size: 15px"> </span>')).run()}}})}}).configure({openOnClick:!1})},41512:(Yt,Ct,c)=>{c.r(Ct),c.d(Ct,{TuiAudio:()=>y,TuiSource:()=>D,TuiVideo:()=>g});var C=c(27863),l=c(12867);const y=l.Node.create({name:"audio",group:"block",content:"source+",addAttributes:()=>(0,C.x6)(["id","class","src","style","controls","loop","muted","preload","autoplay","width","height"]),parseHTML:()=>[{tag:"audio"}],renderHTML:({node:ot,HTMLAttributes:B})=>["audio",B,...(0,C.YX)(ot)]}),D=l.Node.create({name:"source",addAttributes:()=>(0,C.x6)(["src","type","width","height","media","sizes","srcset"]),parseHTML:()=>[{tag:"source"}],renderHTML:({HTMLAttributes:ot})=>["source",(0,l.mergeAttributes)(ot)]}),g=l.Node.create({name:"video",group:"block",content:"source+",addAttributes:()=>(0,C.x6)(["id","class","src","style","controls","loop","muted","preload","autoplay","width","height"]),parseHTML:()=>[{tag:"video"}],renderHTML:({node:ot,HTMLAttributes:B})=>["video",B,...(0,C.YX)(ot)]})},2823:(Yt,Ct,c)=>{c.r(Ct),c.d(Ct,{StarterKit:()=>Je});var C=c(12867);const l=/^\s*>\s$/,y=C.Node.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:$}){return["blockquote",(0,C.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setBlockquote:()=>({commands:$})=>$.wrapIn(this.name),toggleBlockquote:()=>({commands:$})=>$.toggleWrap(this.name),unsetBlockquote:()=>({commands:$})=>$.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,C.wrappingInputRule)({find:l,type:this.type})]}}),D=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,g=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,ot=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,B=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,X=C.Mark.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:$=>"normal"!==$.style.fontWeight&&null},{style:"font-weight",getAttrs:$=>/^(bold(er)?|[5-9]\d{2,})$/.test($)&&null}],renderHTML({HTMLAttributes:$}){return["strong",(0,C.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setBold:()=>({commands:$})=>$.setMark(this.name),toggleBold:()=>({commands:$})=>$.toggleMark(this.name),unsetBold:()=>({commands:$})=>$.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,C.markInputRule)({find:D,type:this.type}),(0,C.markInputRule)({find:ot,type:this.type})]},addPasteRules(){return[(0,C.markPasteRule)({find:g,type:this.type}),(0,C.markPasteRule)({find:B,type:this.type})]}}),et=C.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:$}){return["li",(0,C.mergeAttributes)(this.options.HTMLAttributes,$),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),mt=C.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:$=>!!$.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:$}){return["span",(0,C.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:$,commands:S})=>{const lt=(0,C.getMarkAttributes)($,this.type);return!!Object.entries(lt).some(([,Et])=>!!Et)||S.unsetMark(this.name)}}}}),ct=/^\s*([-+*])\s$/,Mt=C.Node.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:$}){return["ul",(0,C.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{toggleBulletList:()=>({commands:$,chain:S})=>this.options.keepAttributes?S().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(et.name,this.editor.getAttributes(mt.name)).run():$.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let $=(0,C.wrappingInputRule)({find:ct,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&($=(0,C.wrappingInputRule)({find:ct,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(mt.name),editor:this.editor})),[$]}}),it=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,ft=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,bt=C.Mark.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:$}){return["code",(0,C.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setCode:()=>({commands:$})=>$.setMark(this.name),toggleCode:()=>({commands:$})=>$.toggleMark(this.name),unsetCode:()=>({commands:$})=>$.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,C.markInputRule)({find:it,type:this.type})]},addPasteRules(){return[(0,C.markPasteRule)({find:ft,type:this.type})]}});var It=c(62463);const Pt=/^```([a-z]+)?[\s\n]$/,At=/^~~~([a-z]+)?[\s\n]$/,pt=C.Node.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:$=>{var S;const{languageClassPrefix:lt}=this.options;return[...(null===(S=$.firstElementChild)||void 0===S?void 0:S.classList)||[]].filter(Ft=>Ft.startsWith(lt)).map(Ft=>Ft.replace(lt,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:$,HTMLAttributes:S}){return["pre",(0,C.mergeAttributes)(this.options.HTMLAttributes,S),["code",{class:$.attrs.language?this.options.languageClassPrefix+$.attrs.language:null},0]]},addCommands(){return{setCodeBlock:$=>({commands:S})=>S.setNode(this.name,$),toggleCodeBlock:$=>({commands:S})=>S.toggleNode(this.name,"paragraph",$)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:$,$anchor:S}=this.editor.state.selection;return!(!$||S.parent.type.name!==this.name)&&!(1!==S.pos&&S.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:$})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:S}=$,{selection:lt}=S,{$from:Tt,empty:Et}=lt;if(!Et||Tt.parent.type!==this.type)return!1;const Kt=Tt.parentOffset===Tt.parent.nodeSize-2,Ft=Tt.parent.textContent.endsWith("\n\n");return!(!Kt||!Ft)&&$.chain().command(({tr:Qt})=>(Qt.delete(Tt.pos-2,Tt.pos),!0)).exitCode().run()},ArrowDown:({editor:$})=>{if(!this.options.exitOnArrowDown)return!1;const{state:S}=$,{selection:lt,doc:Tt}=S,{$from:Et,empty:Kt}=lt;if(!Kt||Et.parent.type!==this.type||Et.parentOffset!==Et.parent.nodeSize-2)return!1;const Qt=Et.after();return void 0!==Qt&&!Tt.nodeAt(Qt)&&$.commands.exitCode()}}},addInputRules(){return[(0,C.textblockTypeInputRule)({find:Pt,type:this.type,getAttributes:$=>({language:$[1]})}),(0,C.textblockTypeInputRule)({find:At,type:this.type,getAttributes:$=>({language:$[1]})})]},addProseMirrorPlugins(){return[new It.Sy({key:new It.H$("codeBlockVSCodeHandler"),props:{handlePaste:($,S)=>{if(!S.clipboardData||this.editor.isActive(this.type.name))return!1;const lt=S.clipboardData.getData("text/plain"),Tt=S.clipboardData.getData("vscode-editor-data"),Et=Tt?JSON.parse(Tt):void 0,Kt=null==Et?void 0:Et.mode;if(!lt||!Kt)return!1;const{tr:Ft}=$.state;return Ft.replaceSelectionWith(this.type.create({language:Kt})),Ft.setSelection(It.Bs.near(Ft.doc.resolve(Math.max(0,Ft.selection.from-2)))),Ft.insertText(lt.replace(/\r\n?/g,"\n")),Ft.setMeta("paste",!0),$.dispatch(Ft),!0}}})]}}),tt=C.Node.create({name:"doc",topNode:!0,content:"block+"});var F=c(38480);function ut($={}){return new It.Sy({view:S=>new Y(S,$)})}class Y{constructor(S,lt){var Tt;this.editorView=S,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(Tt=lt.width)&&void 0!==Tt?Tt:1,this.color=!1===lt.color?void 0:lt.color||"black",this.class=lt.class,this.handlers=["dragover","dragend","drop","dragleave"].map(Et=>{let Kt=Ft=>{this[Et](Ft)};return S.dom.addEventListener(Et,Kt),{name:Et,handler:Kt}})}destroy(){this.handlers.forEach(({name:S,handler:lt})=>this.editorView.dom.removeEventListener(S,lt))}update(S,lt){null!=this.cursorPos&&lt.doc!=S.state.doc&&(this.cursorPos>S.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(S){S!=this.cursorPos&&(this.cursorPos=S,null==S?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let Tt,S=this.editorView.state.doc.resolve(this.cursorPos),lt=!S.parent.inlineContent;if(lt){let Qt=S.nodeBefore,oe=S.nodeAfter;if(Qt||oe){let Te=this.editorView.nodeDOM(this.cursorPos-(Qt?Qt.nodeSize:0));if(Te){let se=Te.getBoundingClientRect(),le=Qt?se.bottom:se.top;Qt&&oe&&(le=(le+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),Tt={left:se.left,right:se.right,top:le-this.width/2,bottom:le+this.width/2}}}}if(!Tt){let Qt=this.editorView.coordsAtPos(this.cursorPos);Tt={left:Qt.left-this.width/2,right:Qt.left+this.width/2,top:Qt.top,bottom:Qt.bottom}}let Kt,Ft,Et=this.editorView.dom.offsetParent;if(this.element||(this.element=Et.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",lt),this.element.classList.toggle("prosemirror-dropcursor-inline",!lt),!Et||Et==document.body&&"static"==getComputedStyle(Et).position)Kt=-pageXOffset,Ft=-pageYOffset;else{let Qt=Et.getBoundingClientRect();Kt=Qt.left-Et.scrollLeft,Ft=Qt.top-Et.scrollTop}this.element.style.left=Tt.left-Kt+"px",this.element.style.top=Tt.top-Ft+"px",this.element.style.width=Tt.right-Tt.left+"px",this.element.style.height=Tt.bottom-Tt.top+"px"}scheduleRemoval(S){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),S)}dragover(S){if(!this.editorView.editable)return;let lt=this.editorView.posAtCoords({left:S.clientX,top:S.clientY}),Tt=lt&&lt.inside>=0&&this.editorView.state.doc.nodeAt(lt.inside),Et=Tt&&Tt.type.spec.disableDropCursor,Kt="function"==typeof Et?Et(this.editorView,lt,S):Et;if(lt&&!Kt){let Ft=lt.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let Qt=(0,F.nj)(this.editorView.state.doc,Ft,this.editorView.dragging.slice);null!=Qt&&(Ft=Qt)}this.setCursor(Ft),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(S){(S.target==this.editorView.dom||!this.editorView.dom.contains(S.relatedTarget))&&this.setCursor(null)}}const xt=C.Extension.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[ut(this.options)]}});var Bt=c(70768),Dt=c(77346),St=c(43594);class _t extends It.Y1{constructor(S){super(S,S)}map(S,lt){let Tt=S.resolve(lt.map(this.head));return _t.valid(Tt)?new _t(Tt):It.Y1.near(Tt)}content(){return Dt.p2.empty}eq(S){return S instanceof _t&&S.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(S,lt){if("number"!=typeof lt.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new _t(S.resolve(lt.pos))}getBookmark(){return new wt(this.anchor)}static valid(S){let lt=S.parent;if(lt.isTextblock||!function($){for(let S=$.depth;S>=0;S--){let lt=$.index(S),Tt=$.node(S);if(0!=lt)for(let Et=Tt.child(lt-1);;Et=Et.lastChild){if(0==Et.childCount&&!Et.inlineContent||Et.isAtom||Et.type.spec.isolating)return!0;if(Et.inlineContent)return!1}else if(Tt.type.spec.isolating)return!0}return!0}(S)||!function($){for(let S=$.depth;S>=0;S--){let lt=$.indexAfter(S),Tt=$.node(S);if(lt!=Tt.childCount)for(let Et=Tt.child(lt);;Et=Et.firstChild){if(0==Et.childCount&&!Et.inlineContent||Et.isAtom||Et.type.spec.isolating)return!0;if(Et.inlineContent)return!1}else if(Tt.type.spec.isolating)return!0}return!0}(S))return!1;let Tt=lt.type.spec.allowGapCursor;if(null!=Tt)return Tt;let Et=lt.contentMatchAt(S.index()).defaultType;return Et&&Et.isTextblock}static findGapCursorFrom(S,lt,Tt=!1){t:for(;;){if(!Tt&&_t.valid(S))return S;let Et=S.pos,Kt=null;for(let Ft=S.depth;;Ft--){let Qt=S.node(Ft);if(lt>0?S.indexAfter(Ft)<Qt.childCount:S.index(Ft)>0){Kt=Qt.child(lt>0?S.indexAfter(Ft):S.index(Ft)-1);break}if(0==Ft)return null;Et+=lt;let oe=S.doc.resolve(Et);if(_t.valid(oe))return oe}for(;;){let Ft=lt>0?Kt.firstChild:Kt.lastChild;if(!Ft){if(Kt.isAtom&&!Kt.isText&&!It.qv.isSelectable(Kt)){S=S.doc.resolve(Et+Kt.nodeSize*lt),Tt=!1;continue t}break}Kt=Ft,Et+=lt;let Qt=S.doc.resolve(Et);if(_t.valid(Qt))return Qt}return null}}}_t.prototype.visible=!1,_t.findFrom=_t.findGapCursorFrom,It.Y1.jsonID("gapcursor",_t);class wt{constructor(S){this.pos=S}map(S){return new wt(S.map(this.pos))}resolve(S){let lt=S.resolve(this.pos);return _t.valid(lt)?new _t(lt):It.Y1.near(lt)}}const dt=(0,Bt.$)({ArrowLeft:st("horiz",-1),ArrowRight:st("horiz",1),ArrowUp:st("vert",-1),ArrowDown:st("vert",1)});function st($,S){const lt="vert"==$?S>0?"down":"up":S>0?"right":"left";return function(Tt,Et,Kt){let Ft=Tt.selection,Qt=S>0?Ft.$to:Ft.$from,oe=Ft.empty;if(Ft instanceof It.Bs){if(!Kt.endOfTextblock(lt)||0==Qt.depth)return!1;oe=!1,Qt=Tt.doc.resolve(S>0?Qt.after():Qt.before())}let Te=_t.findGapCursorFrom(Qt,S,oe);return!!Te&&(Et&&Et(Tt.tr.setSelection(new _t(Te))),!0)}}function J($,S,lt){if(!$||!$.editable)return!1;let Tt=$.state.doc.resolve(S);if(!_t.valid(Tt))return!1;let Et=$.posAtCoords({left:lt.clientX,top:lt.clientY});return!(Et&&Et.inside>-1&&It.qv.isSelectable($.state.doc.nodeAt(Et.inside))||($.dispatch($.state.tr.setSelection(new _t(Tt))),0))}function Q($,S){if("insertCompositionText"!=S.inputType||!($.state.selection instanceof _t))return!1;let{$from:lt}=$.state.selection,Tt=lt.parent.contentMatchAt(lt.index()).findWrapping($.state.schema.nodes.text);if(!Tt)return!1;let Et=Dt.HY.empty;for(let Ft=Tt.length-1;Ft>=0;Ft--)Et=Dt.HY.from(Tt[Ft].createAndFill(null,Et));let Kt=$.state.tr.replace(lt.pos,lt.pos,new Dt.p2(Et,0,0));return Kt.setSelection(It.Bs.near(Kt.doc.resolve(lt.pos+1))),$.dispatch(Kt),!1}function nt($){if(!($.selection instanceof _t))return null;let S=document.createElement("div");return S.className="ProseMirror-gapcursor",St.EH.create($.doc,[St.p.widget($.selection.head,S,{key:"gapcursor"})])}const Lt=C.Extension.create({name:"gapCursor",addProseMirrorPlugins:()=>[new It.Sy({props:{decorations:nt,createSelectionBetween:($,S,lt)=>S.pos==lt.pos&&_t.valid(lt)?new _t(lt):null,handleClick:J,handleKeyDown:dt,handleDOMEvents:{beforeinput:Q}}})],extendNodeSchema($){var S;return{allowGapCursor:null!==(S=(0,C.callOrReturn)((0,C.getExtensionField)($,"allowGapCursor",{name:$.name,options:$.options,storage:$.storage})))&&void 0!==S?S:null}}}),Jt=C.Node.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:$}){return["br",(0,C.mergeAttributes)(this.options.HTMLAttributes,$)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:$,chain:S,state:lt,editor:Tt})=>$.first([()=>$.exitCode(),()=>$.command(()=>{const{selection:Et,storedMarks:Kt}=lt;if(Et.$from.parent.type.spec.isolating)return!1;const{keepMarks:Ft}=this.options,{splittableMarks:Qt}=Tt.extensionManager,oe=Kt||Et.$to.parentOffset&&Et.$from.marks();return S().insertContent({type:this.name}).command(({tr:Te,dispatch:se})=>{if(se&&oe&&Ft){const le=oe.filter(ce=>Qt.includes(ce.type.name));Te.ensureMarks(le)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Zt=C.Node.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map($=>({tag:`h${$}`,attrs:{level:$}}))},renderHTML({node:$,HTMLAttributes:S}){return[`h${this.options.levels.includes($.attrs.level)?$.attrs.level:this.options.levels[0]}`,(0,C.mergeAttributes)(this.options.HTMLAttributes,S),0]},addCommands(){return{setHeading:$=>({commands:S})=>!!this.options.levels.includes($.level)&&S.setNode(this.name,$),toggleHeading:$=>({commands:S})=>!!this.options.levels.includes($.level)&&S.toggleNode(this.name,"paragraph",$)}},addKeyboardShortcuts(){return this.options.levels.reduce(($,S)=>me(Gt({},$),{[`Mod-Alt-${S}`]:()=>this.editor.commands.toggleHeading({level:S})}),{})},addInputRules(){return this.options.levels.map($=>(0,C.textblockTypeInputRule)({find:new RegExp(`^(#{1,${$}})\\s$`),type:this.type,getAttributes:{level:$}}))}});var Wt=function(){};Wt.prototype.append=function(S){return S.length?(S=Wt.from(S),!this.length&&S||S.length<200&&this.leafAppend(S)||this.length<200&&S.leafPrepend(this)||this.appendInner(S)):this},Wt.prototype.prepend=function(S){return S.length?Wt.from(S).append(this):this},Wt.prototype.appendInner=function(S){return new ye(this,S)},Wt.prototype.slice=function(S,lt){return void 0===S&&(S=0),void 0===lt&&(lt=this.length),S>=lt?Wt.empty:this.sliceInner(Math.max(0,S),Math.min(this.length,lt))},Wt.prototype.get=function(S){if(!(S<0||S>=this.length))return this.getInner(S)},Wt.prototype.forEach=function(S,lt,Tt){void 0===lt&&(lt=0),void 0===Tt&&(Tt=this.length),lt<=Tt?this.forEachInner(S,lt,Tt,0):this.forEachInvertedInner(S,lt,Tt,0)},Wt.prototype.map=function(S,lt,Tt){void 0===lt&&(lt=0),void 0===Tt&&(Tt=this.length);var Et=[];return this.forEach(function(Kt,Ft){return Et.push(S(Kt,Ft))},lt,Tt),Et},Wt.from=function(S){return S instanceof Wt?S:S&&S.length?new pe(S):Wt.empty};var pe=function($){function S(Tt){$.call(this),this.values=Tt}$&&(S.__proto__=$),(S.prototype=Object.create($&&$.prototype)).constructor=S;var lt={length:{configurable:!0},depth:{configurable:!0}};return S.prototype.flatten=function(){return this.values},S.prototype.sliceInner=function(Et,Kt){return 0==Et&&Kt==this.length?this:new S(this.values.slice(Et,Kt))},S.prototype.getInner=function(Et){return this.values[Et]},S.prototype.forEachInner=function(Et,Kt,Ft,Qt){for(var oe=Kt;oe<Ft;oe++)if(!1===Et(this.values[oe],Qt+oe))return!1},S.prototype.forEachInvertedInner=function(Et,Kt,Ft,Qt){for(var oe=Kt-1;oe>=Ft;oe--)if(!1===Et(this.values[oe],Qt+oe))return!1},S.prototype.leafAppend=function(Et){if(this.length+Et.length<=200)return new S(this.values.concat(Et.flatten()))},S.prototype.leafPrepend=function(Et){if(this.length+Et.length<=200)return new S(Et.flatten().concat(this.values))},lt.length.get=function(){return this.values.length},lt.depth.get=function(){return 0},Object.defineProperties(S.prototype,lt),S}(Wt);Wt.empty=new pe([]);var ye=function($){function S(lt,Tt){$.call(this),this.left=lt,this.right=Tt,this.length=lt.length+Tt.length,this.depth=Math.max(lt.depth,Tt.depth)+1}return $&&(S.__proto__=$),(S.prototype=Object.create($&&$.prototype)).constructor=S,S.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},S.prototype.getInner=function(Tt){return Tt<this.left.length?this.left.get(Tt):this.right.get(Tt-this.left.length)},S.prototype.forEachInner=function(Tt,Et,Kt,Ft){var Qt=this.left.length;if(Et<Qt&&!1===this.left.forEachInner(Tt,Et,Math.min(Kt,Qt),Ft)||Kt>Qt&&!1===this.right.forEachInner(Tt,Math.max(Et-Qt,0),Math.min(this.length,Kt)-Qt,Ft+Qt))return!1},S.prototype.forEachInvertedInner=function(Tt,Et,Kt,Ft){var Qt=this.left.length;if(Et>Qt&&!1===this.right.forEachInvertedInner(Tt,Et-Qt,Math.max(Kt,Qt)-Qt,Ft+Qt)||Kt<Qt&&!1===this.left.forEachInvertedInner(Tt,Math.min(Et,Qt),Kt,Ft))return!1},S.prototype.sliceInner=function(Tt,Et){if(0==Tt&&Et==this.length)return this;var Kt=this.left.length;return Et<=Kt?this.left.slice(Tt,Et):Tt>=Kt?this.right.slice(Tt-Kt,Et-Kt):this.left.slice(Tt,Kt).append(this.right.slice(0,Et-Kt))},S.prototype.leafAppend=function(Tt){var Et=this.right.leafAppend(Tt);if(Et)return new S(this.left,Et)},S.prototype.leafPrepend=function(Tt){var Et=this.left.leafPrepend(Tt);if(Et)return new S(Et,this.right)},S.prototype.appendInner=function(Tt){return this.left.depth>=Math.max(this.right.depth,Tt.depth)+1?new S(this.left,new S(this.right,Tt)):new S(this,Tt)},S}(Wt);const fe=Wt;class xe{constructor(S,lt){this.items=S,this.eventCount=lt}popEvent(S,lt){if(0==this.eventCount)return null;let Et,Kt,Tt=this.items.length;for(;;Tt--)if(this.items.get(Tt-1).selection){--Tt;break}lt&&(Et=this.remapping(Tt,this.items.length),Kt=Et.maps.length);let Qt,oe,Ft=S.tr,Te=[],se=[];return this.items.forEach((le,ce)=>{if(!le.step)return Et||(Et=this.remapping(Tt,ce+1),Kt=Et.maps.length),Kt--,void se.push(le);if(Et){se.push(new ge(le.map));let We,Re=le.step.map(Et.slice(Kt));Re&&Ft.maybeStep(Re).doc&&(We=Ft.mapping.maps[Ft.mapping.maps.length-1],Te.push(new ge(We,void 0,void 0,Te.length+se.length))),Kt--,We&&Et.appendMap(We,Kt)}else Ft.maybeStep(le.step);return le.selection?(Qt=Et?le.selection.map(Et.slice(Kt)):le.selection,oe=new xe(this.items.slice(0,Tt).append(se.reverse().concat(Te)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:oe,transform:Ft,selection:Qt}}addTransform(S,lt,Tt,Et){let Kt=[],Ft=this.eventCount,Qt=this.items,oe=!Et&&Qt.length?Qt.get(Qt.length-1):null;for(let se=0;se<S.steps.length;se++){let Re,le=S.steps[se].invert(S.docs[se]),ce=new ge(S.mapping.maps[se],le,lt);(Re=oe&&oe.merge(ce))&&(ce=Re,se?Kt.pop():Qt=Qt.slice(0,Qt.length-1)),Kt.push(ce),lt&&(Ft++,lt=void 0),Et||(oe=ce)}let Te=Ft-Tt.depth;return Te>Ce&&(Qt=function($,S){let lt;return $.forEach((Tt,Et)=>{if(Tt.selection&&0==S--)return lt=Et,!1}),$.slice(lt)}(Qt,Te),Ft-=Te),new xe(Qt.append(Kt),Ft)}remapping(S,lt){let Tt=new F.vs;return this.items.forEach((Et,Kt)=>{Tt.appendMap(Et.map,null!=Et.mirrorOffset&&Kt-Et.mirrorOffset>=S?Tt.maps.length-Et.mirrorOffset:void 0)},S,lt),Tt}addMaps(S){return 0==this.eventCount?this:new xe(this.items.append(S.map(lt=>new ge(lt))),this.eventCount)}rebased(S,lt){if(!this.eventCount)return this;let Tt=[],Et=Math.max(0,this.items.length-lt),Kt=S.mapping,Ft=S.steps.length,Qt=this.eventCount;this.items.forEach(ce=>{ce.selection&&Qt--},Et);let oe=lt;this.items.forEach(ce=>{let Re=Kt.getMirror(--oe);if(null==Re)return;Ft=Math.min(Ft,Re);let We=Kt.maps[Re];if(ce.step){let an=S.steps[Re].invert(S.docs[Re]),ue=ce.selection&&ce.selection.map(Kt.slice(oe+1,Re));ue&&Qt++,Tt.push(new ge(We,an,ue))}else Tt.push(new ge(We))},Et);let Te=[];for(let ce=lt;ce<Ft;ce++)Te.push(new ge(Kt.maps[ce]));let se=this.items.slice(0,Et).append(Te).append(Tt),le=new xe(se,Qt);return le.emptyItemCount()>500&&(le=le.compress(this.items.length-Tt.length)),le}emptyItemCount(){let S=0;return this.items.forEach(lt=>{lt.step||S++}),S}compress(S=this.items.length){let lt=this.remapping(0,S),Tt=lt.maps.length,Et=[],Kt=0;return this.items.forEach((Ft,Qt)=>{if(Qt>=S)Et.push(Ft),Ft.selection&&Kt++;else if(Ft.step){let oe=Ft.step.map(lt.slice(Tt)),Te=oe&&oe.getMap();if(Tt--,Te&&lt.appendMap(Te,Tt),oe){let se=Ft.selection&&Ft.selection.map(lt.slice(Tt));se&&Kt++;let ce,le=new ge(Te.invert(),oe,se),Re=Et.length-1;(ce=Et.length&&Et[Re].merge(le))?Et[Re]=ce:Et.push(le)}}else Ft.map&&Tt--},this.items.length,0),new xe(fe.from(Et.reverse()),Kt)}}xe.empty=new xe(fe.empty,0);class ge{constructor(S,lt,Tt,Et){this.map=S,this.step=lt,this.selection=Tt,this.mirrorOffset=Et}merge(S){if(this.step&&S.step&&!S.selection){let lt=S.step.merge(this.step);if(lt)return new ge(lt.getMap().invert(),lt,this.selection)}}}class Ae{constructor(S,lt,Tt,Et){this.done=S,this.undone=lt,this.prevRanges=Tt,this.prevTime=Et}}const Ce=20;function Me($){let S=[];return $.forEach((lt,Tt,Et,Kt)=>S.push(Et,Kt)),S}function ke($,S){if(!$)return null;let lt=[];for(let Tt=0;Tt<$.length;Tt+=2){let Et=S.map($[Tt],1),Kt=S.map($[Tt+1],-1);Et<=Kt&&lt.push(Et,Kt)}return lt}function Ye($,S,lt,Tt){let Et=Le(S),Kt=_e.get(S).spec.config,Ft=(Tt?$.undone:$.done).popEvent(S,Et);if(!Ft)return;let Qt=Ft.selection.resolve(Ft.transform.doc),oe=(Tt?$.done:$.undone).addTransform(Ft.transform,S.selection.getBookmark(),Kt,Et),Te=new Ae(Tt?oe:Ft.remaining,Tt?Ft.remaining:oe,null,0);lt(Ft.transform.setSelection(Qt).setMeta(_e,{redo:Tt,historyState:Te}).scrollIntoView())}let He=!1,Ue=null;function Le($){let S=$.plugins;if(Ue!=S){He=!1,Ue=S;for(let lt=0;lt<S.length;lt++)if(S[lt].spec.historyPreserveItems){He=!0;break}}return He}const _e=new It.H$("history"),he=new It.H$("closeHistory");function Ee($={}){return new It.Sy({key:_e,state:{init:()=>new Ae(xe.empty,xe.empty,null,0),apply:(S,lt,Tt)=>function($,S,lt,Tt){let Kt,Et=lt.getMeta(_e);if(Et)return Et.historyState;lt.getMeta(he)&&($=new Ae($.done,$.undone,null,0));let Ft=lt.getMeta("appendedTransaction");if(0==lt.steps.length)return $;if(Ft&&Ft.getMeta(_e))return Ft.getMeta(_e).redo?new Ae($.done.addTransform(lt,void 0,Tt,Le(S)),$.undone,Me(lt.mapping.maps[lt.steps.length-1]),$.prevTime):new Ae($.done,$.undone.addTransform(lt,void 0,Tt,Le(S)),null,$.prevTime);if(!1===lt.getMeta("addToHistory")||Ft&&!1===Ft.getMeta("addToHistory"))return(Kt=lt.getMeta("rebased"))?new Ae($.done.rebased(lt,Kt),$.undone.rebased(lt,Kt),ke($.prevRanges,lt.mapping),$.prevTime):new Ae($.done.addMaps(lt.mapping.maps),$.undone.addMaps(lt.mapping.maps),ke($.prevRanges,lt.mapping),$.prevTime);{let Qt=0==$.prevTime||!Ft&&($.prevTime<(lt.time||0)-Tt.newGroupDelay||!function($,S){if(!S)return!1;if(!$.docChanged)return!0;let lt=!1;return $.mapping.maps[0].forEach((Tt,Et)=>{for(let Kt=0;Kt<S.length;Kt+=2)Tt<=S[Kt+1]&&Et>=S[Kt]&&(lt=!0)}),lt}(lt,$.prevRanges)),oe=Ft?ke($.prevRanges,lt.mapping):Me(lt.mapping.maps[lt.steps.length-1]);return new Ae($.done.addTransform(lt,Qt?S.selection.getBookmark():void 0,Tt,Le(S)),xe.empty,oe,lt.time)}}(lt,Tt,S,$)},config:$={depth:$.depth||100,newGroupDelay:$.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(S,lt){let Tt=lt.inputType,Et="historyUndo"==Tt?gt:"historyRedo"==Tt?b:null;return!!Et&&(lt.preventDefault(),Et(S.state,S.dispatch))}}}})}const gt=($,S)=>{let lt=_e.getState($);return!(!lt||0==lt.done.eventCount||(S&&Ye(lt,$,S,!1),0))},b=($,S)=>{let lt=_e.getState($);return!(!lt||0==lt.undone.eventCount||(S&&Ye(lt,$,S,!0),0))},w=C.Extension.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:$,dispatch:S})=>gt($,S),redo:()=>({state:$,dispatch:S})=>b($,S)}),addProseMirrorPlugins(){return[Ee(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),V=C.Node.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:$}){return["hr",(0,C.mergeAttributes)(this.options.HTMLAttributes,$)]},addCommands(){return{setHorizontalRule:()=>({chain:$})=>$().insertContent({type:this.name}).command(({tr:S,dispatch:lt})=>{var Tt;if(lt){const{$to:Et}=S.selection,Kt=Et.end();if(Et.nodeAfter)S.setSelection(It.Bs.create(S.doc,Et.pos));else{const Ft=null===(Tt=Et.parent.type.contentMatch.defaultType)||void 0===Tt?void 0:Tt.create();Ft&&(S.insert(Kt,Ft),S.setSelection(It.Bs.create(S.doc,Kt)))}S.scrollIntoView()}return!0}).run()}},addInputRules(){return[(0,C.nodeInputRule)({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),U=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,yt=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,Nt=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,H=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,a=C.Mark.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:$=>"normal"!==$.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:$}){return["em",(0,C.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setItalic:()=>({commands:$})=>$.setMark(this.name),toggleItalic:()=>({commands:$})=>$.toggleMark(this.name),unsetItalic:()=>({commands:$})=>$.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,C.markInputRule)({find:U,type:this.type}),(0,C.markInputRule)({find:Nt,type:this.type})]},addPasteRules(){return[(0,C.markPasteRule)({find:yt,type:this.type}),(0,C.markPasteRule)({find:H,type:this.type})]}}),p=C.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:$}){return["li",(0,C.mergeAttributes)(this.options.HTMLAttributes,$),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),E=C.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:$}){return["li",(0,C.mergeAttributes)(this.options.HTMLAttributes,$),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),P=C.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:$=>!!$.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:$}){return["span",(0,C.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:$,commands:S})=>{const lt=(0,C.getMarkAttributes)($,this.type);return!!Object.entries(lt).some(([,Et])=>!!Et)||S.unsetMark(this.name)}}}}),k=/^(\d+)\.\s$/,K=C.Node.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:$=>$.hasAttribute("start")?parseInt($.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:$}){const Tt=$,{start:S}=Tt,lt=Vo(Tt,["start"]);return 1===S?["ol",(0,C.mergeAttributes)(this.options.HTMLAttributes,lt),0]:["ol",(0,C.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{toggleOrderedList:()=>({commands:$,chain:S})=>this.options.keepAttributes?S().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(E.name,this.editor.getAttributes(P.name)).run():$.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let $=(0,C.wrappingInputRule)({find:k,type:this.type,getAttributes:S=>({start:+S[1]}),joinPredicate:(S,lt)=>lt.childCount+lt.attrs.start===+S[1]});return(this.options.keepMarks||this.options.keepAttributes)&&($=(0,C.wrappingInputRule)({find:k,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:S=>Gt({start:+S[1]},this.editor.getAttributes(P.name)),joinPredicate:(S,lt)=>lt.childCount+lt.attrs.start===+S[1],editor:this.editor})),[$]}}),at=C.Node.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:$}){return["p",(0,C.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setParagraph:()=>({commands:$})=>$.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Ht=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,te=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,ee=C.Mark.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:$=>!!$.includes("line-through")&&{}}],renderHTML({HTMLAttributes:$}){return["s",(0,C.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setStrike:()=>({commands:$})=>$.setMark(this.name),toggleStrike:()=>({commands:$})=>$.toggleMark(this.name),unsetStrike:()=>({commands:$})=>$.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,C.markInputRule)({find:Ht,type:this.type})]},addPasteRules(){return[(0,C.markPasteRule)({find:te,type:this.type})]}}),we=C.Node.create({name:"text",group:"inline"}),Je=C.Extension.create({name:"starterKit",addExtensions(){const $=[],S=this.options;return!1!==(null==S?void 0:S.blockquote)&&$.push(y.configure(null==S?void 0:S.blockquote)),!1!==(null==S?void 0:S.bold)&&$.push(X.configure(null==S?void 0:S.bold)),!1!==(null==S?void 0:S.bulletList)&&$.push(Mt.configure(null==S?void 0:S.bulletList)),!1!==(null==S?void 0:S.code)&&$.push(bt.configure(null==S?void 0:S.code)),!1!==(null==S?void 0:S.codeBlock)&&$.push(pt.configure(null==S?void 0:S.codeBlock)),!1!==(null==S?void 0:S.document)&&$.push(tt.configure(null==S?void 0:S.document)),!1!==(null==S?void 0:S.dropcursor)&&$.push(xt.configure(null==S?void 0:S.dropcursor)),!1!==(null==S?void 0:S.gapcursor)&&$.push(Lt.configure(null==S?void 0:S.gapcursor)),!1!==(null==S?void 0:S.hardBreak)&&$.push(Jt.configure(null==S?void 0:S.hardBreak)),!1!==(null==S?void 0:S.heading)&&$.push(Zt.configure(null==S?void 0:S.heading)),!1!==(null==S?void 0:S.history)&&$.push(w.configure(null==S?void 0:S.history)),!1!==(null==S?void 0:S.horizontalRule)&&$.push(V.configure(null==S?void 0:S.horizontalRule)),!1!==(null==S?void 0:S.italic)&&$.push(a.configure(null==S?void 0:S.italic)),!1!==(null==S?void 0:S.listItem)&&$.push(p.configure(null==S?void 0:S.listItem)),!1!==(null==S?void 0:S.orderedList)&&$.push(K.configure(null==S?void 0:S.orderedList)),!1!==(null==S?void 0:S.paragraph)&&$.push(at.configure(null==S?void 0:S.paragraph)),!1!==(null==S?void 0:S.strike)&&$.push(ee.configure(null==S?void 0:S.strike)),!1!==(null==S?void 0:S.text)&&$.push(we.configure(null==S?void 0:S.text)),$}})},51919:(Yt,Ct,c)=>{c.r(Ct),c.d(Ct,{TableCellBackground:()=>l});const l=c(12867).Extension.create({addGlobalAttributes:()=>[{types:["tableCell","tableHeader"],attributes:{background:{default:null,renderHTML:({background:y})=>y?{style:`background: ${y}`}:null,parseHTML:({style:y})=>y.background,keepOnSplit:!1}}}],addCommands:()=>({setCellBackground:y=>({chain:D})=>D().updateAttributes("tableCell",{background:y}).updateAttributes("tableHeader",{background:y}).run(),unsetCellBackground:()=>({chain:y})=>y().updateAttributes("tableCell",{background:null}).updateAttributes("tableHeader",{background:null}).run()})})},86624:(Yt,Ct,c)=>{c.r(Ct),c.d(Ct,{TuiTable:()=>sn});var B,X,C=c(12867),l=c(62463),y=c(77346),D=c(43594),g=c(70768),ot=c(38480);if("undefined"!=typeof WeakMap){let _=new WeakMap;B=v=>_.get(v),X=(v,m)=>(_.set(v,m),m)}else{const _=[],v=10;let m=0;B=f=>{for(let M=0;M<_.length;M+=2)if(_[M]==f)return _[M+1]},X=(f,M)=>(m==v&&(m=0),_[m++]=f,_[m++]=M)}var et=class{constructor(_,v,m,f){this.width=_,this.height=v,this.map=m,this.problems=f}findCell(_){for(let v=0;v<this.map.length;v++){const m=this.map[v];if(m!=_)continue;const f=v%this.width,M=v/this.width|0;let x=f+1,R=M+1;for(let Z=1;x<this.width&&this.map[v+Z]==m;Z++)x++;for(let Z=1;R<this.height&&this.map[v+this.width*Z]==m;Z++)R++;return{left:f,top:M,right:x,bottom:R}}throw new RangeError(`No cell with offset ${_} found`)}colCount(_){for(let v=0;v<this.map.length;v++)if(this.map[v]==_)return v%this.width;throw new RangeError(`No cell with offset ${_} found`)}nextCell(_,v,m){const{left:f,right:M,top:x,bottom:R}=this.findCell(_);return"horiz"==v?(m<0?0==f:M==this.width)?null:this.map[x*this.width+(m<0?f-1:M)]:(m<0?0==x:R==this.height)?null:this.map[f+this.width*(m<0?x-1:R)]}rectBetween(_,v){const{left:m,right:f,top:M,bottom:x}=this.findCell(_),{left:R,right:Z,top:W,bottom:G}=this.findCell(v);return{left:Math.min(m,R),top:Math.min(M,W),right:Math.max(f,Z),bottom:Math.max(x,G)}}cellsInRect(_){const v=[],m={};for(let f=_.top;f<_.bottom;f++)for(let M=_.left;M<_.right;M++){const x=f*this.width+M,R=this.map[x];m[R]||(m[R]=!0,!(M==_.left&&M&&this.map[x-1]==R||f==_.top&&f&&this.map[x-this.width]==R)&&v.push(R))}return v}positionAt(_,v,m){for(let f=0,M=0;;f++){const x=M+m.child(f).nodeSize;if(f==_){let R=v+_*this.width;const Z=(_+1)*this.width;for(;R<Z&&this.map[R]<M;)R++;return R==Z?x-1:this.map[R]}M=x}}static get(_){return B(_)||X(_,function(_){if("table"!=_.type.spec.tableRole)throw new RangeError("Not a table node: "+_.type.name);const v=function(_){let v=-1,m=!1;for(let f=0;f<_.childCount;f++){const M=_.child(f);let x=0;if(m)for(let R=0;R<f;R++){const Z=_.child(R);for(let W=0;W<Z.childCount;W++){const G=Z.child(W);R+G.attrs.rowspan>f&&(x+=G.attrs.colspan)}}for(let R=0;R<M.childCount;R++){const Z=M.child(R);x+=Z.attrs.colspan,Z.attrs.rowspan>1&&(m=!0)}-1==v?v=x:v!=x&&(v=Math.max(v,x))}return v}(_),m=_.childCount,f=[];let M=0,x=null;const R=[];for(let G=0,vt=v*m;G<vt;G++)f[G]=0;for(let G=0,vt=0;G<m;G++){const Ot=_.child(G);vt++;for(let jt=0;;jt++){for(;M<f.length&&0!=f[M];)M++;if(jt==Ot.childCount)break;const re=Ot.child(jt),{colspan:ie,rowspan:be,colwidth:qe}=re.attrs;for(let je=0;je<be;je++){if(je+G>=m){(x||(x=[])).push({type:"overlong_rowspan",pos:vt,n:be-je});break}const ve=M+je*v;for(let De=0;De<ie;De++){0==f[ve+De]?f[ve+De]=vt:(x||(x=[])).push({type:"collision",row:G,pos:vt,n:ie-De});const cn=qe&&qe[De];if(cn){const en=(ve+De)%v*2,de=R[en];null==de||de!=cn&&1==R[en+1]?(R[en]=cn,R[en+1]=1):de==cn&&R[en+1]++}}}M+=ie,vt+=re.nodeSize}const Ut=(G+1)*v;let zt=0;for(;M<Ut;)0==f[M++]&&zt++;zt&&(x||(x=[])).push({type:"missing",row:G,n:zt}),vt++}const Z=new et(v,m,f,x);let W=!1;for(let G=0;!W&&G<R.length;G+=2)null!=R[G]&&R[G+1]<m&&(W=!0);return W&&function(_,v,m){_.problems||(_.problems=[]);const f={};for(let M=0;M<_.map.length;M++){const x=_.map[M];if(f[x])continue;f[x]=!0;const R=m.nodeAt(x);if(!R)throw new RangeError(`No cell with offset ${x} found`);let Z=null;const W=R.attrs;for(let G=0;G<W.colspan;G++){const Ot=v[(M+G)%_.width*2];null!=Ot&&(!W.colwidth||W.colwidth[G]!=Ot)&&((Z||(Z=it(W)))[G]=Ot)}Z&&_.problems.unshift({type:"colwidth mismatch",pos:x,colwidth:Z})}}(Z,R,_),Z}(_))}};function it(_){if(_.colwidth)return _.colwidth.slice();const v=[];for(let m=0;m<_.colspan;m++)v.push(0);return v}function Pt(_){let v=_.cached.tableNodeTypes;if(!v){v=_.cached.tableNodeTypes={};for(const m in _.nodes){const f=_.nodes[m],M=f.spec.tableRole;M&&(v[M]=f)}}return v}var At=new l.H$("selectingCells");function pt(_){for(let v=_.depth-1;v>0;v--)if("row"==_.node(v).type.spec.tableRole)return _.node(0).resolve(_.before(v+1));return null}function F(_){const v=_.selection.$head;for(let m=v.depth;m>0;m--)if("row"==v.node(m).type.spec.tableRole)return!0;return!1}function ut(_){const v=_.selection;if("$anchorCell"in v&&v.$anchorCell)return v.$anchorCell.pos>v.$headCell.pos?v.$anchorCell:v.$headCell;if("node"in v&&v.node&&"cell"==v.node.type.spec.tableRole)return v.$anchor;const m=pt(v.$head)||function(_){for(let v=_.nodeAfter,m=_.pos;v;v=v.firstChild,m++){const f=v.type.spec.tableRole;if("cell"==f||"header_cell"==f)return _.doc.resolve(m)}for(let v=_.nodeBefore,m=_.pos;v;v=v.lastChild,m--){const f=v.type.spec.tableRole;if("cell"==f||"header_cell"==f)return _.doc.resolve(m-v.nodeSize)}}(v.$head);if(m)return m;throw new RangeError(`No cell found around position ${v.head}`)}function xt(_){return"row"==_.parent.type.spec.tableRole&&!!_.nodeAfter}function Dt(_,v){return _.depth==v.depth&&_.pos>=v.start(-1)&&_.pos<=v.end(-1)}function wt(_,v,m){const f=_.node(-1),M=et.get(f),x=_.start(-1),R=M.nextCell(_.pos-x,v,m);return null==R?null:_.node(0).resolve(x+R)}function kt(_,v,m=1){const f=me(Gt({},_),{colspan:_.colspan-m});return f.colwidth&&(f.colwidth=f.colwidth.slice(),f.colwidth.splice(v,m),f.colwidth.some(M=>M>0)||(f.colwidth=null)),f}function z(_,v,m=1){const f=me(Gt({},_),{colspan:_.colspan+m});if(f.colwidth){f.colwidth=f.colwidth.slice();for(let M=0;M<m;M++)f.colwidth.splice(v,0,0)}return f}var dt=class extends l.Y1{constructor(_,v=_){const m=_.node(-1),f=et.get(m),M=_.start(-1),x=f.rectBetween(_.pos-M,v.pos-M),R=_.node(0),Z=f.cellsInRect(x).filter(G=>G!=v.pos-M);Z.unshift(v.pos-M);const W=Z.map(G=>{const vt=m.nodeAt(G);if(!vt)throw RangeError(`No cell with offset ${G} found`);const Ot=M+G+1;return new l.xm(R.resolve(Ot),R.resolve(Ot+vt.content.size))});super(W[0].$from,W[0].$to,W),this.$anchorCell=_,this.$headCell=v}map(_,v){const m=_.resolve(v.map(this.$anchorCell.pos)),f=_.resolve(v.map(this.$headCell.pos));if(xt(m)&&xt(f)&&Dt(m,f)){const M=this.$anchorCell.node(-1)!=m.node(-1);return M&&this.isRowSelection()?dt.rowSelection(m,f):M&&this.isColSelection()?dt.colSelection(m,f):new dt(m,f)}return l.Bs.between(m,f)}content(){const _=this.$anchorCell.node(-1),v=et.get(_),m=this.$anchorCell.start(-1),f=v.rectBetween(this.$anchorCell.pos-m,this.$headCell.pos-m),M={},x=[];for(let Z=f.top;Z<f.bottom;Z++){const W=[];for(let G=Z*v.width+f.left,vt=f.left;vt<f.right;vt++,G++){const Ot=v.map[G];if(M[Ot])continue;M[Ot]=!0;const Ut=v.findCell(Ot);let zt=_.nodeAt(Ot);if(!zt)throw RangeError(`No cell with offset ${Ot} found`);const jt=f.left-Ut.left,re=Ut.right-f.right;if(jt>0||re>0){let ie=zt.attrs;if(jt>0&&(ie=kt(ie,0,jt)),re>0&&(ie=kt(ie,ie.colspan-re,re)),Ut.left<f.left){if(zt=zt.type.createAndFill(ie),!zt)throw RangeError(`Could not create cell with attrs ${JSON.stringify(ie)}`)}else zt=zt.type.create(ie,zt.content)}if(Ut.top<f.top||Ut.bottom>f.bottom){const ie=me(Gt({},zt.attrs),{rowspan:Math.min(Ut.bottom,f.bottom)-Math.max(Ut.top,f.top)});zt=Ut.top<f.top?zt.type.createAndFill(ie):zt.type.create(ie,zt.content)}W.push(zt)}x.push(_.child(Z).copy(y.HY.from(W)))}const R=this.isColSelection()&&this.isRowSelection()?_:x;return new y.p2(y.HY.from(R),1,1)}replace(_,v=y.p2.empty){const m=_.steps.length,f=this.ranges;for(let x=0;x<f.length;x++){const{$from:R,$to:Z}=f[x],W=_.mapping.slice(m);_.replace(W.map(R.pos),W.map(Z.pos),x?y.p2.empty:v)}const M=l.Y1.findFrom(_.doc.resolve(_.mapping.slice(m).map(this.to)),-1);M&&_.setSelection(M)}replaceWith(_,v){this.replace(_,new y.p2(y.HY.from(v),0,0))}forEachCell(_){const v=this.$anchorCell.node(-1),m=et.get(v),f=this.$anchorCell.start(-1),M=m.cellsInRect(m.rectBetween(this.$anchorCell.pos-f,this.$headCell.pos-f));for(let x=0;x<M.length;x++)_(v.nodeAt(M[x]),f+M[x])}isColSelection(){const _=this.$anchorCell.index(-1),v=this.$headCell.index(-1);return!(Math.min(_,v)>0)&&Math.max(_+this.$anchorCell.nodeAfter.attrs.rowspan,v+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(_,v=_){const m=_.node(-1),f=et.get(m),M=_.start(-1),x=f.findCell(_.pos-M),R=f.findCell(v.pos-M),Z=_.node(0);return x.top<=R.top?(x.top>0&&(_=Z.resolve(M+f.map[x.left])),R.bottom<f.height&&(v=Z.resolve(M+f.map[f.width*(f.height-1)+R.right-1]))):(R.top>0&&(v=Z.resolve(M+f.map[R.left])),x.bottom<f.height&&(_=Z.resolve(M+f.map[f.width*(f.height-1)+x.right-1]))),new dt(_,v)}isRowSelection(){const _=this.$anchorCell.node(-1),v=et.get(_),m=this.$anchorCell.start(-1),f=v.colCount(this.$anchorCell.pos-m),M=v.colCount(this.$headCell.pos-m);return!(Math.min(f,M)>0)&&Math.max(f+this.$anchorCell.nodeAfter.attrs.colspan,M+this.$headCell.nodeAfter.attrs.colspan)==v.width}eq(_){return _ instanceof dt&&_.$anchorCell.pos==this.$anchorCell.pos&&_.$headCell.pos==this.$headCell.pos}static rowSelection(_,v=_){const m=_.node(-1),f=et.get(m),M=_.start(-1),x=f.findCell(_.pos-M),R=f.findCell(v.pos-M),Z=_.node(0);return x.left<=R.left?(x.left>0&&(_=Z.resolve(M+f.map[x.top*f.width])),R.right<f.width&&(v=Z.resolve(M+f.map[f.width*(R.top+1)-1]))):(R.left>0&&(v=Z.resolve(M+f.map[R.top*f.width])),x.right<f.width&&(_=Z.resolve(M+f.map[f.width*(x.top+1)-1]))),new dt(_,v)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(_,v){return new dt(_.resolve(v.anchor),_.resolve(v.head))}static create(_,v,m=v){return new dt(_.resolve(v),_.resolve(m))}getBookmark(){return new st(this.$anchorCell.pos,this.$headCell.pos)}};dt.prototype.visible=!1,l.Y1.jsonID("cell",dt);var st=class{constructor(_,v){this.anchor=_,this.head=v}map(_){return new st(_.map(this.anchor),_.map(this.head))}resolve(_){const v=_.resolve(this.anchor),m=_.resolve(this.head);return"row"==v.parent.type.spec.tableRole&&"row"==m.parent.type.spec.tableRole&&v.index()<v.parent.childCount&&m.index()<m.parent.childCount&&Dt(v,m)?new dt(v,m):l.Y1.near(m,1)}};function J(_){if(!(_.selection instanceof dt))return null;const v=[];return _.selection.forEachCell((m,f)=>{v.push(D.p.node(f,f+m.nodeSize,{class:"selectedCell"}))}),D.EH.create(_.doc,v)}var Jt=new l.H$("fix-tables");function Zt(_,v,m,f){const M=_.childCount,x=v.childCount;t:for(let R=0,Z=0;R<x;R++){const W=v.child(R);for(let G=Z,vt=Math.min(M,R+3);G<vt;G++)if(_.child(G)==W){Z=G+1,m+=W.nodeSize;continue t}f(W,m),Z<M&&_.child(Z).sameMarkup(W)?Zt(_.child(Z),W,m+1,f):W.nodesBetween(0,W.content.size,f,m+1),m+=W.nodeSize}}function ne(_,v){let m;const f=(M,x)=>{"table"==M.type.spec.tableRole&&(m=function(_,v,m,f){const M=et.get(v);if(!M.problems)return f;f||(f=_.tr);const x=[];for(let W=0;W<M.height;W++)x.push(0);for(let W=0;W<M.problems.length;W++){const G=M.problems[W];if("collision"==G.type){const vt=v.nodeAt(G.pos);if(!vt)continue;const Ot=vt.attrs;for(let Ut=0;Ut<Ot.rowspan;Ut++)x[G.row+Ut]+=G.n;f.setNodeMarkup(f.mapping.map(m+1+G.pos),null,kt(Ot,Ot.colspan-G.n,G.n))}else if("missing"==G.type)x[G.row]+=G.n;else if("overlong_rowspan"==G.type){const vt=v.nodeAt(G.pos);if(!vt)continue;f.setNodeMarkup(f.mapping.map(m+1+G.pos),null,me(Gt({},vt.attrs),{rowspan:vt.attrs.rowspan-G.n}))}else if("colwidth mismatch"==G.type){const vt=v.nodeAt(G.pos);if(!vt)continue;f.setNodeMarkup(f.mapping.map(m+1+G.pos),null,me(Gt({},vt.attrs),{colwidth:G.colwidth}))}}let R,Z;for(let W=0;W<x.length;W++)x[W]&&(null==R&&(R=W),Z=W);for(let W=0,G=m+1;W<M.height;W++){const vt=v.child(W),Ot=G+vt.nodeSize,Ut=x[W];if(Ut>0){let zt="cell";vt.firstChild&&(zt=vt.firstChild.type.spec.tableRole);const jt=[];for(let ie=0;ie<Ut;ie++){const be=Pt(_.schema)[zt].createAndFill();be&&jt.push(be)}f.insert(f.mapping.map(0!=W&&R!=W-1||Z!=W?Ot-1:G+1),jt)}G=Ot}return f.setMeta(Jt,{fixTables:!0})}(_,M,x,m))};return v?v.doc!=_.doc&&Zt(v.doc,_.doc,0,f):_.doc.descendants(f),m}function Oe(_,v){const m=_.createAndFill();return new ot.wx(m).replace(0,m.content.size,v).doc}function xe(_,v,m,f,M,x,R,Z){if(0==R||R==v.height)return!1;let W=!1;for(let G=M;G<x;G++){const vt=R*v.width+G,Ot=v.map[vt];if(v.map[vt-v.width]==Ot){W=!0;const Ut=m.nodeAt(Ot),{top:zt,left:jt}=v.findCell(Ot);_.setNodeMarkup(_.mapping.slice(Z).map(Ot+f),null,me(Gt({},Ut.attrs),{rowspan:R-zt})),_.insert(_.mapping.slice(Z).map(v.positionAt(R,jt,m)),Ut.type.createAndFill(me(Gt({},Ut.attrs),{rowspan:zt+Ut.attrs.rowspan-R}))),G+=Ut.attrs.colspan-1}}return W}function Ne(_,v,m,f,M,x,R,Z){if(0==R||R==v.width)return!1;let W=!1;for(let G=M;G<x;G++){const vt=G*v.width+R,Ot=v.map[vt];if(v.map[vt-1]==Ot){W=!0;const Ut=m.nodeAt(Ot),zt=v.colCount(Ot),jt=_.mapping.slice(Z).map(Ot+f);_.setNodeMarkup(jt,null,kt(Ut.attrs,R-zt,Ut.attrs.colspan-(R-zt))),_.insert(jt+Ut.nodeSize,Ut.type.createAndFill(kt(Ut.attrs,0,R-zt))),G+=Ut.attrs.rowspan-1}}return W}function ge(_,v,m,f,M){let x=m?_.doc.nodeAt(m-1):_.doc;if(!x)throw new Error("No table found");let R=et.get(x);const{top:Z,left:W}=f,G=W+M.width,vt=Z+M.height,Ot=_.tr;let Ut=0;function zt(){if(x=m?Ot.doc.nodeAt(m-1):Ot.doc,!x)throw new Error("No table found");R=et.get(x),Ut=Ot.mapping.maps.length}(function(_,v,m,f,M,x,R){const W=Pt(_.doc.type.schema);let G,vt;if(M>v.width)for(let Ot=0,Ut=0;Ot<v.height;Ot++){const zt=m.child(Ot);Ut+=zt.nodeSize;const jt=[];let re;re=null==zt.lastChild||zt.lastChild.type==W.cell?G||(G=W.cell.createAndFill()):vt||(vt=W.header_cell.createAndFill());for(let ie=v.width;ie<M;ie++)jt.push(re);_.insert(_.mapping.slice(R).map(Ut-1+f),jt)}if(x>v.height){const Ot=[];for(let jt=0,re=(v.height-1)*v.width;jt<Math.max(v.width,M);jt++){const ie=!(jt>=v.width)&&m.nodeAt(v.map[re+jt]).type==W.header_cell;Ot.push(ie?vt||(vt=W.header_cell.createAndFill()):G||(G=W.cell.createAndFill()))}const Ut=W.row.create(null,y.HY.from(Ot)),zt=[];for(let jt=v.height;jt<x;jt++)zt.push(Ut);_.insert(_.mapping.slice(R).map(f+m.nodeSize-2),zt)}return!(!G&&!vt)})(Ot,R,x,m,G,vt,Ut)&&zt(),xe(Ot,R,x,m,W,G,Z,Ut)&&zt(),xe(Ot,R,x,m,W,G,vt,Ut)&&zt(),Ne(Ot,R,x,m,Z,vt,W,Ut)&&zt(),Ne(Ot,R,x,m,Z,vt,G,Ut)&&zt();for(let jt=Z;jt<vt;jt++){const re=R.positionAt(jt,W,x),ie=R.positionAt(jt,G,x);Ot.replace(Ot.mapping.slice(Ut).map(re+m),Ot.mapping.slice(Ut).map(ie+m),new y.p2(M.rows[jt-Z],0,0))}zt(),Ot.setSelection(new dt(Ot.doc.resolve(m+R.positionAt(Z,W,x)),Ot.doc.resolve(m+R.positionAt(vt-1,G-1,x)))),v(Ot)}var Ae=(0,g.$)({ArrowLeft:Pe("horiz",-1),ArrowRight:Pe("horiz",1),ArrowUp:Pe("vert",-1),ArrowDown:Pe("vert",1),"Shift-ArrowLeft":Be("horiz",-1),"Shift-ArrowRight":Be("horiz",1),"Shift-ArrowUp":Be("vert",-1),"Shift-ArrowDown":Be("vert",1),Backspace:Me,"Mod-Backspace":Me,Delete:Me,"Mod-Delete":Me});function Ce(_,v,m){return!m.eq(_.selection)&&(v&&v(_.tr.setSelection(m).scrollIntoView()),!0)}function Pe(_,v){return(m,f,M)=>{if(!M)return!1;const x=m.selection;if(x instanceof dt)return Ce(m,f,l.Y1.near(x.$headCell,v));if("horiz"!=_&&!x.empty)return!1;const R=Ue(M,_,v);if(null==R)return!1;if("horiz"==_)return Ce(m,f,l.Y1.near(m.doc.resolve(x.head+v),v));{const Z=m.doc.resolve(R),W=wt(Z,_,v);let G;return G=W?l.Y1.near(W,1):v<0?l.Y1.near(m.doc.resolve(Z.before(-1)),-1):l.Y1.near(m.doc.resolve(Z.after(-1)),1),Ce(m,f,G)}}}function Be(_,v){return(m,f,M)=>{if(!M)return!1;const x=m.selection;let R;if(x instanceof dt)R=x;else{const W=Ue(M,_,v);if(null==W)return!1;R=new dt(m.doc.resolve(W))}const Z=wt(R.$headCell,_,v);return!!Z&&Ce(m,f,new dt(R.$anchorCell,Z))}}function Me(_,v){const m=_.selection;if(!(m instanceof dt))return!1;if(v){const f=_.tr,M=Pt(_.schema).cell.createAndFill().content;m.forEachCell((x,R)=>{x.content.eq(M)||f.replace(f.mapping.map(R+1),f.mapping.map(R+x.nodeSize-1),new y.p2(M,0,0))}),f.docChanged&&v(f)}return!0}function ke(_,v){const f=pt(_.state.doc.resolve(v));return!!f&&(_.dispatch(_.state.tr.setSelection(new dt(f))),!0)}function Ye(_,v,m){if(!F(_.state))return!1;let f=function(_){if(!_.size)return null;let{content:v,openStart:m,openEnd:f}=_;for(;1==v.childCount&&(m>0&&f>0||"table"==v.child(0).type.spec.tableRole);)m--,f--,v=v.child(0).content;const M=v.child(0),x=M.type.spec.tableRole,R=M.type.schema,Z=[];if("row"==x)for(let W=0;W<v.childCount;W++){let G=v.child(W).content;const vt=W?0:Math.max(0,m-1),Ot=W<v.childCount-1?0:Math.max(0,f-1);(vt||Ot)&&(G=Oe(Pt(R).row,new y.p2(G,vt,Ot)).content),Z.push(G)}else{if("cell"!=x&&"header_cell"!=x)return null;Z.push(m||f?Oe(Pt(R).row,new y.p2(v,m,f)).content:v)}return function(_,v){const m=[];for(let M=0;M<v.length;M++){const x=v[M];for(let R=x.childCount-1;R>=0;R--){const{rowspan:Z,colspan:W}=x.child(R).attrs;for(let G=M;G<M+Z;G++)m[G]=(m[G]||0)+W}}let f=0;for(let M=0;M<m.length;M++)f=Math.max(f,m[M]);for(let M=0;M<m.length;M++)if(M>=v.length&&v.push(y.HY.empty),m[M]<f){const x=Pt(_).cell.createAndFill(),R=[];for(let Z=m[M];Z<f;Z++)R.push(x);v[M]=v[M].append(y.HY.from(R))}return{height:v.length,width:f,rows:v}}(R,Z)}(m);const M=_.state.selection;if(M instanceof dt){f||(f={width:1,height:1,rows:[y.HY.from(Oe(Pt(_.state.schema).cell,m))]});const x=M.$anchorCell.node(-1),R=M.$anchorCell.start(-1),Z=et.get(x).rectBetween(M.$anchorCell.pos-R,M.$headCell.pos-R);return f=function({width:_,height:v,rows:m},f,M){if(_!=f){const x=[],R=[];for(let Z=0;Z<m.length;Z++){const W=m[Z],G=[];for(let vt=x[Z]||0,Ot=0;vt<f;Ot++){let Ut=W.child(Ot%W.childCount);vt+Ut.attrs.colspan>f&&(Ut=Ut.type.createChecked(kt(Ut.attrs,Ut.attrs.colspan,vt+Ut.attrs.colspan-f),Ut.content)),G.push(Ut),vt+=Ut.attrs.colspan;for(let zt=1;zt<Ut.attrs.rowspan;zt++)x[Z+zt]=(x[Z+zt]||0)+Ut.attrs.colspan}R.push(y.HY.from(G))}m=R,_=f}if(v!=M){const x=[];for(let R=0,Z=0;R<M;R++,Z++){const W=[],G=m[Z%v];for(let vt=0;vt<G.childCount;vt++){let Ot=G.child(vt);R+Ot.attrs.rowspan>M&&(Ot=Ot.type.create(me(Gt({},Ot.attrs),{rowspan:Math.max(1,M-Ot.attrs.rowspan)}),Ot.content)),W.push(Ot)}x.push(y.HY.from(W))}m=x,v=M}return{width:_,height:v,rows:m}}(f,Z.right-Z.left,Z.bottom-Z.top),ge(_.state,_.dispatch,R,Z,f),!0}if(f){const x=ut(_.state),R=x.start(-1);return ge(_.state,_.dispatch,R,et.get(x.node(-1)).findCell(x.pos-R),f),!0}return!1}function He(_,v){var m;if(v.ctrlKey||v.metaKey)return;const f=Le(_,v.target);let M;if(v.shiftKey&&_.state.selection instanceof dt)x(_.state.selection.$anchorCell,v),v.preventDefault();else if(v.shiftKey&&f&&null!=(M=pt(_.state.selection.$anchor))&&(null==(m=ze(_,v))?void 0:m.pos)!=M.pos)x(M,v),v.preventDefault();else if(!f)return;function x(W,G){let vt=ze(_,G);const Ot=null==At.getState(_.state);if(!vt||!Dt(W,vt)){if(!Ot)return;vt=W}const Ut=new dt(W,vt);if(Ot||!_.state.selection.eq(Ut)){const zt=_.state.tr.setSelection(Ut);Ot&&zt.setMeta(At,W.pos),_.dispatch(zt)}}function R(){_.root.removeEventListener("mouseup",R),_.root.removeEventListener("dragstart",R),_.root.removeEventListener("mousemove",Z),null!=At.getState(_.state)&&_.dispatch(_.state.tr.setMeta(At,-1))}function Z(W){const G=W,vt=At.getState(_.state);let Ot;if(null!=vt)Ot=_.state.doc.resolve(vt);else if(Le(_,G.target)!=f&&(Ot=ze(_,v),!Ot))return R();Ot&&x(Ot,G)}_.root.addEventListener("mouseup",R),_.root.addEventListener("dragstart",R),_.root.addEventListener("mousemove",Z)}function Ue(_,v,m){if(!(_.state.selection instanceof l.Bs))return null;const{$head:f}=_.state.selection;for(let M=f.depth-1;M>=0;M--){const x=f.node(M);if((m<0?f.index(M):f.indexAfter(M))!=(m<0?0:x.childCount))return null;if("cell"==x.type.spec.tableRole||"header_cell"==x.type.spec.tableRole){const Z=f.before(M);return _.endOfTextblock("vert"==v?m>0?"down":"up":m>0?"right":"left")?Z:null}}return null}function Le(_,v){for(;v&&v!=_.dom;v=v.parentNode)if("TD"==v.nodeName||"TH"==v.nodeName)return v;return null}function ze(_,v){const m=_.posAtCoords({left:v.clientX,top:v.clientY});return m&&m?pt(_.state.doc.resolve(m.pos)):null}var _e=class{constructor(_,v){this.node=_,this.cellMinWidth=v,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),he(_,this.colgroup,this.table,v),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(_){return _.type==this.node.type&&(this.node=_,he(_,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(_){return"attributes"==_.type&&(_.target==this.table||this.colgroup.contains(_.target))}};function he(_,v,m,f,M,x){var R;let Z=0,W=!0,G=v.firstChild;const vt=_.firstChild;if(vt){for(let Ot=0,Ut=0;Ot<vt.childCount;Ot++){const{colspan:zt,colwidth:jt}=vt.child(Ot).attrs;for(let re=0;re<zt;re++,Ut++){const ie=M==Ut?x:jt&&jt[re],be=ie?ie+"px":"";Z+=ie||f,ie||(W=!1),G?(G.style.width!=be&&(G.style.width=be),G=G.nextSibling):v.appendChild(document.createElement("col")).style.width=be}}for(;G;){const Ot=G.nextSibling;null==(R=G.parentNode)||R.removeChild(G),G=Ot}W?(m.style.width=Z+"px",m.style.minWidth=""):(m.style.width="",m.style.minWidth=Z+"px")}}var Ee=new l.H$("tableColumnResizing");function gt({handleWidth:_=5,cellMinWidth:v=25,View:m=_e,lastColumnResizable:f=!0}={}){const M=new l.Sy({key:Ee,state:{init:(x,R)=>(M.spec.props.nodeViews[Pt(R.schema).table.name]=(Z,W)=>new m(Z,v,W),new b(-1,!1)),apply:(x,R)=>R.apply(x)},props:{attributes:x=>{const R=Ee.getState(x);return R&&R.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(x,R)=>{!function(_,v,m,f,M){const x=Ee.getState(_.state);if(x&&!x.dragging){const R=function(_){for(;_&&"TD"!=_.nodeName&&"TH"!=_.nodeName;)_=_.classList&&_.classList.contains("ProseMirror")?null:_.parentNode;return _}(v.target);let Z=-1;if(R){const{left:W,right:G}=R.getBoundingClientRect();v.clientX-W<=m?Z=yt(_,v,"left"):G-v.clientX<=m&&(Z=yt(_,v,"right"))}if(Z!=x.activeHandle){if(!M&&-1!==Z){const W=_.state.doc.resolve(Z),G=W.node(-1),vt=et.get(G),Ot=W.start(-1);if(vt.colCount(W.pos-Ot)+W.nodeAfter.attrs.colspan-1==vt.width-1)return}H(_,Z)}}}(x,R,_,0,f)},mouseleave:x=>{!function(_){const v=Ee.getState(_.state);v&&v.activeHandle>-1&&!v.dragging&&H(_,-1)}(x)},mousedown:(x,R)=>{!function(_,v,m){const f=Ee.getState(_.state);if(!f||-1==f.activeHandle||f.dragging)return!1;const M=_.state.doc.nodeAt(f.activeHandle),x=function(_,v,{colspan:m,colwidth:f}){const M=f&&f[f.length-1];if(M)return M;const x=_.domAtPos(v);let Z=x.node.childNodes[x.offset].offsetWidth,W=m;if(f)for(let G=0;G<m;G++)f[G]&&(Z-=f[G],W--);return Z/W}(_,f.activeHandle,M.attrs);function R(W){window.removeEventListener("mouseup",R),window.removeEventListener("mousemove",Z);const G=Ee.getState(_.state);(null==G?void 0:G.dragging)&&(function(_,v,m){const f=_.state.doc.resolve(v),M=f.node(-1),x=et.get(M),R=f.start(-1),Z=x.colCount(f.pos-R)+f.nodeAfter.attrs.colspan-1,W=_.state.tr;for(let G=0;G<x.height;G++){const vt=G*x.width+Z;if(G&&x.map[vt]==x.map[vt-x.width])continue;const Ot=x.map[vt],Ut=M.nodeAt(Ot).attrs,zt=1==Ut.colspan?0:Z-x.colCount(Ot);if(Ut.colwidth&&Ut.colwidth[zt]==m)continue;const jt=Ut.colwidth?Ut.colwidth.slice():E(Ut.colspan);jt[zt]=m,W.setNodeMarkup(R+Ot,null,me(Gt({},Ut),{colwidth:jt}))}W.docChanged&&_.dispatch(W)}(_,G.activeHandle,Nt(G.dragging,W,m)),_.dispatch(_.state.tr.setMeta(Ee,{setDragging:null})))}function Z(W){if(!W.which)return R(W);const G=Ee.getState(_.state);if(G&&G.dragging){const vt=Nt(G.dragging,W,m);!function(_,v,m,f){const M=_.state.doc.resolve(v),x=M.node(-1),R=M.start(-1),Z=et.get(x).colCount(M.pos-R)+M.nodeAfter.attrs.colspan-1;let W=_.domAtPos(M.start(-1)).node;for(;W&&"TABLE"!=W.nodeName;)W=W.parentNode;!W||he(x,W.firstChild,W,f,Z,m)}(_,G.activeHandle,vt,m)}}_.dispatch(_.state.tr.setMeta(Ee,{setDragging:{startX:v.clientX,startWidth:x}})),window.addEventListener("mouseup",R),window.addEventListener("mousemove",Z),v.preventDefault()}(x,R,v)}},decorations:x=>{const R=Ee.getState(x);if(R&&R.activeHandle>-1)return function(_,v){const m=[],f=_.doc.resolve(v),M=f.node(-1);if(!M)return D.EH.empty;const x=et.get(M),R=f.start(-1),Z=x.colCount(f.pos-R)+f.nodeAfter.attrs.colspan;for(let W=0;W<x.height;W++){const G=Z+W*x.width-1;if(!(Z!=x.width&&x.map[G]==x.map[G+1]||0!=W&&x.map[G-1]==x.map[G-1-x.width])){const vt=x.map[G],Ot=R+vt+M.nodeAt(vt).nodeSize-1,Ut=document.createElement("div");Ut.className="column-resize-handle",m.push(D.p.widget(Ot,Ut))}}return D.EH.create(_.doc,m)}(x,R.activeHandle)},nodeViews:{}}});return M}var b=class{constructor(_,v){this.activeHandle=_,this.dragging=v}apply(_){const v=this,m=_.getMeta(Ee);if(m&&null!=m.setHandle)return new b(m.setHandle,!1);if(m&&void 0!==m.setDragging)return new b(v.activeHandle,m.setDragging);if(v.activeHandle>-1&&_.docChanged){let f=_.mapping.map(v.activeHandle,-1);return xt(_.doc.resolve(f))||(f=-1),new b(f,v.dragging)}return v}};function yt(_,v,m){const f=_.posAtCoords({left:v.clientX,top:v.clientY});if(!f)return-1;const{pos:M}=f,x=pt(_.state.doc.resolve(M));if(!x)return-1;if("right"==m)return x.pos;const R=et.get(x.node(-1)),Z=x.start(-1),W=R.map.indexOf(x.pos-Z);return W%R.width==0?-1:Z+R.map[W-1]}function Nt(_,v,m){return Math.max(m,_.startWidth+(v.clientX-_.startX))}function H(_,v){_.dispatch(_.state.tr.setMeta(Ee,{setHandle:v}))}function E(_){return Array(_).fill(0)}function k(_){const v=_.selection,m=ut(_),f=m.node(-1),M=m.start(-1),x=et.get(f),R=v instanceof dt?x.rectBetween(v.$anchorCell.pos-M,v.$headCell.pos-M):x.findCell(m.pos-M);return me(Gt({},R),{tableStart:M,map:x,table:f})}function K(_,{map:v,tableStart:m,table:f},M){let x=M>0?-1:0;(function(_,v,m){const f=Pt(v.type.schema).header_cell;for(let M=0;M<_.height;M++)if(v.nodeAt(_.map[m+M*_.width]).type!=f)return!1;return!0})(v,f,M+x)&&(x=0==M||M==v.width?null:0);for(let R=0;R<v.height;R++){const Z=R*v.width+M;if(M>0&&M<v.width&&v.map[Z-1]==v.map[Z]){const W=v.map[Z],G=f.nodeAt(W);_.setNodeMarkup(_.mapping.map(m+W),null,z(G.attrs,M-v.colCount(W))),R+=G.attrs.rowspan-1}else{const W=null==x?Pt(f.type.schema).cell:f.nodeAt(v.map[Z+x]).type,G=v.positionAt(R,M,f);_.insert(_.mapping.map(m+G),W.createAndFill())}}return _}function te(_,{map:v,table:m,tableStart:f},M){const x=_.mapping.maps.length;for(let R=0;R<v.height;){const Z=R*v.width+M,W=v.map[Z],G=m.nodeAt(W),vt=G.attrs;if(M>0&&v.map[Z-1]==W||M<v.width-1&&v.map[Z+1]==W)_.setNodeMarkup(_.mapping.slice(x).map(f+W),null,kt(vt,M-v.colCount(W)));else{const Ot=_.mapping.slice(x).map(f+W);_.delete(Ot,Ot+G.nodeSize)}R+=vt.rowspan}}function Je(_,{map:v,tableStart:m,table:f},M){var x;let R=m;for(let G=0;G<M;G++)R+=f.child(G).nodeSize;const Z=[];let W=M>0?-1:0;(function(_,v,m){var f;const M=Pt(v.type.schema).header_cell;for(let x=0;x<_.width;x++)if((null==(f=v.nodeAt(_.map[x+m*_.width]))?void 0:f.type)!=M)return!1;return!0})(v,f,M+W)&&(W=0==M||M==v.height?null:0);for(let G=0,vt=v.width*M;G<v.width;G++,vt++)if(M>0&&M<v.height&&v.map[vt]==v.map[vt-v.width]){const Ot=v.map[vt],Ut=f.nodeAt(Ot).attrs;_.setNodeMarkup(m+Ot,null,me(Gt({},Ut),{rowspan:Ut.rowspan+1})),G+=Ut.colspan-1}else{const Ot=null==W?Pt(f.type.schema).cell:null==(x=f.nodeAt(v.map[vt+W*v.width]))?void 0:x.type,Ut=null==Ot?void 0:Ot.createAndFill();Ut&&Z.push(Ut)}return _.insert(R,Pt(f.type.schema).row.create(null,Z)),_}function lt(_,{map:v,table:m,tableStart:f},M){let x=0;for(let W=0;W<M;W++)x+=m.child(W).nodeSize;const R=x+m.child(M).nodeSize,Z=_.mapping.maps.length;_.delete(x+f,R+f);for(let W=0,G=M*v.width;W<v.width;W++,G++){const vt=v.map[G];if(M>0&&vt==v.map[G-v.width]){const Ot=m.nodeAt(vt).attrs;_.setNodeMarkup(_.mapping.slice(Z).map(vt+f),null,me(Gt({},Ot),{rowspan:Ot.rowspan-1})),W+=Ot.colspan-1}else if(M<v.width&&vt==v.map[G+v.width]){const Ot=m.nodeAt(vt),Ut=Ot.attrs,zt=Ot.type.create(me(Gt({},Ut),{rowspan:Ot.attrs.rowspan-1}),Ot.content),jt=v.positionAt(M+1,W,m);_.insert(_.mapping.slice(Z).map(f+jt),zt),W+=Ut.colspan-1}}}function Et(_){const v=_.content;return 1==v.childCount&&v.child(0).isTextblock&&0==v.child(0).childCount}function Ft(_,v){const m=_.selection;if(!(m instanceof dt)||m.$anchorCell.pos==m.$headCell.pos)return!1;const f=k(_),{map:M}=f;if(function({width:_,height:v,map:m},f){let M=f.top*_+f.left,x=M,R=(f.bottom-1)*_+f.left,Z=M+(f.right-f.left-1);for(let W=f.top;W<f.bottom;W++){if(f.left>0&&m[x]==m[x-1]||f.right<_&&m[Z]==m[Z+1])return!0;x+=_,Z+=_}for(let W=f.left;W<f.right;W++){if(f.top>0&&m[M]==m[M-_]||f.bottom<v&&m[R]==m[R+_])return!0;M++,R++}return!1}(M,f))return!1;if(v){const x=_.tr,R={};let W,G,Z=y.HY.empty;for(let vt=f.top;vt<f.bottom;vt++)for(let Ot=f.left;Ot<f.right;Ot++){const Ut=M.map[vt*M.width+Ot],zt=f.table.nodeAt(Ut);if(!R[Ut]&&zt)if(R[Ut]=!0,null==W)W=Ut,G=zt;else{Et(zt)||(Z=Z.append(zt.content));const jt=x.mapping.map(Ut+f.tableStart);x.delete(jt,jt+zt.nodeSize)}}if(null==W||null==G)return!0;if(x.setNodeMarkup(W+f.tableStart,null,me(Gt({},z(G.attrs,G.attrs.colspan,f.right-f.left-G.attrs.colspan)),{rowspan:f.bottom-f.top})),Z.size){const vt=W+1+G.content.size,Ot=Et(G)?W+1:vt;x.replaceWith(Ot+f.tableStart,vt+f.tableStart,Z)}x.setSelection(new dt(x.doc.resolve(W+f.tableStart))),v(x)}return!0}function Qt(_,v){const m=Pt(_.schema);return function(_){return(v,m)=>{var f;const M=v.selection;let x,R;if(M instanceof dt){if(M.$anchorCell.pos!=M.$headCell.pos)return!1;x=M.$anchorCell.nodeAfter,R=M.$anchorCell.pos}else{if(x=function(_){for(let v=_.depth;v>0;v--){const m=_.node(v).type.spec.tableRole;if("cell"===m||"header_cell"===m)return _.node(v)}return null}(M.$from),!x)return!1;R=null==(f=pt(M.$from))?void 0:f.pos}if(null==x||null==R||1==x.attrs.colspan&&1==x.attrs.rowspan)return!1;if(m){let Z=x.attrs;const W=[],G=Z.colwidth;Z.rowspan>1&&(Z=me(Gt({},Z),{rowspan:1})),Z.colspan>1&&(Z=me(Gt({},Z),{colspan:1}));const vt=k(v),Ot=v.tr;for(let zt=0;zt<vt.right-vt.left;zt++)W.push(G?me(Gt({},Z),{colwidth:G&&G[zt]?[G[zt]]:null}):Z);let Ut;for(let zt=vt.top;zt<vt.bottom;zt++){let jt=vt.map.positionAt(zt,vt.left,vt.table);zt==vt.top&&(jt+=x.nodeSize);for(let re=vt.left,ie=0;re<vt.right;re++,ie++)re==vt.left&&zt==vt.top||Ot.insert(Ut=Ot.mapping.map(jt+vt.tableStart,1),_({node:x,row:zt,col:re}).createAndFill(W[ie]))}Ot.setNodeMarkup(R,_({node:x,row:vt.top,col:vt.left}),W[0]),M instanceof dt&&Ot.setSelection(new dt(Ot.doc.resolve(M.$anchorCell.pos),Ut?Ot.doc.resolve(Ut):void 0)),m(Ot)}return!0}}(({node:f})=>m[f.type.spec.tableRole])(_,v)}function le(_,v,m){const f=v.map.cellsInRect({left:0,top:0,right:"row"==_?v.map.width:1,bottom:"column"==_?v.map.height:1});for(let M=0;M<f.length;M++){const x=v.table.nodeAt(f[M]);if(x&&x.type!==m.header_cell)return!1}return!0}function ce(_,v){return(v=v||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(_){return function(v,m){if(!F(v))return!1;if(m){const f=Pt(v.schema),M=k(v),x=v.tr,R=M.map.cellsInRect("column"==_?{left:M.left,top:0,right:M.right,bottom:M.map.height}:"row"==_?{left:0,top:M.top,right:M.map.width,bottom:M.bottom}:M),Z=R.map(W=>M.table.nodeAt(W));for(let W=0;W<R.length;W++)Z[W].type==f.header_cell&&x.setNodeMarkup(M.tableStart+R[W],f.cell,Z[W].attrs);if(0==x.steps.length)for(let W=0;W<R.length;W++)x.setNodeMarkup(M.tableStart+R[W],f.header_cell,Z[W].attrs);m(x)}return!0}}(_):function(m,f){if(!F(m))return!1;if(f){const M=Pt(m.schema),x=k(m),R=m.tr,Z=le("row",x,M),W=le("column",x,M),vt=("column"===_?Z:"row"===_&&W)?1:0,Ut="column"==_?W?M.cell:M.header_cell:"row"==_?Z?M.cell:M.header_cell:M.cell;x.map.cellsInRect("column"==_?{left:0,top:vt,right:1,bottom:x.map.height}:"row"==_?{left:vt,top:0,right:x.map.width,bottom:1}:x).forEach(zt=>{const jt=zt+x.tableStart,re=R.doc.nodeAt(jt);re&&R.setNodeMarkup(jt,Ut,re.attrs)}),f(R)}return!0}}ce("row",{useDeprecatedLogic:!0}),ce("column",{useDeprecatedLogic:!0});var an=ce("cell",{useDeprecatedLogic:!0});function Pn(_){return function(v,m){if(!F(v))return!1;const f=function(_,v){if(v<0){const m=_.nodeBefore;if(m)return _.pos-m.nodeSize;for(let f=_.index(-1)-1,M=_.before();f>=0;f--){const x=_.node(-1).child(f),R=x.lastChild;if(R)return M-1-R.nodeSize;M-=x.nodeSize}}else{if(_.index()<_.parent.childCount-1)return _.pos+_.nodeAfter.nodeSize;const m=_.node(-1);for(let f=_.indexAfter(-1),M=_.after();f<m.childCount;f++){const x=m.child(f);if(x.childCount)return M+1;M+=x.nodeSize}}return null}(ut(v),_);if(null==f)return!1;if(m){const M=v.doc.resolve(f);m(v.tr.setSelection(l.Bs.between(M,function(_){return _.node(0).resolve(_.pos+_.nodeAfter.nodeSize)}(M))).scrollIntoView())}return!0}}function zn({allowTableNodeSelection:_=!1}={}){return new l.Sy({key:At,state:{init:()=>null,apply(v,m){const f=v.getMeta(At);if(null!=f)return-1==f?null:f;if(null==m||!v.docChanged)return m;const{deleted:M,pos:x}=v.mapping.mapResult(m);return M?null:x}},props:{decorations:J,handleDOMEvents:{mousedown:He},createSelectionBetween:v=>null!=At.getState(v.state)?v.state.selection:null,handleTripleClick:ke,handleKeyDown:Ae,handlePaste:Ye},appendTransaction:(v,m,f)=>function(_,v,m){const f=(v||_).selection,M=(v||_).doc;let x,R;if(f instanceof l.qv&&(R=f.node.type.spec.tableRole)){if("cell"==R||"header_cell"==R)x=dt.create(M,f.from);else if("row"==R){const Z=M.resolve(f.from+1);x=dt.rowSelection(Z,Z)}else if(!m){const Z=et.get(f.node),W=f.from+1;x=dt.create(M,W+1,W+Z.map[Z.width*Z.height-1])}}else f instanceof l.Bs&&function({$from:_,$to:v}){if(_.pos==v.pos||_.pos<_.pos-6)return!1;let m=_.pos,f=v.pos,M=_.depth;for(;M>=0&&!(_.after(M+1)<_.end(M));M--,m++);for(let x=v.depth;x>=0&&!(v.before(x+1)>v.start(x));x--,f--);return m==f&&/row|table/.test(_.node(M).type.spec.tableRole)}(f)?x=l.Bs.create(M,f.from):f instanceof l.Bs&&function({$from:_,$to:v}){let m,f;for(let M=_.depth;M>0;M--){const x=_.node(M);if("cell"===x.type.spec.tableRole||"header_cell"===x.type.spec.tableRole){m=x;break}}for(let M=v.depth;M>0;M--){const x=v.node(M);if("cell"===x.type.spec.tableRole||"header_cell"===x.type.spec.tableRole){f=x;break}}return m!==f&&0===v.parentOffset}(f)&&(x=l.Bs.create(M,f.$from.start(),f.$from.end()));return x&&(v||(v=_.tr)).setSelection(x),v}(f,ne(f,m),_)})}function un(_,v,m,f,M,x){let R=0,Z=!0,W=v.firstChild;const G=_.firstChild;for(let vt=0,Ot=0;vt<G.childCount;vt+=1){const{colspan:Ut,colwidth:zt}=G.child(vt).attrs;for(let jt=0;jt<Ut;jt+=1,Ot+=1){const re=M===Ot?x:zt&&zt[jt],ie=re?`${re}px`:"";R+=re||f,re||(Z=!1),W?(W.style.width!==ie&&(W.style.width=ie),W=W.nextSibling):v.appendChild(document.createElement("col")).style.width=ie}}for(;W;){const vt=W.nextSibling;W.parentNode.removeChild(W),W=vt}Z?(m.style.width=`${R}px`,m.style.minWidth=""):(m.style.width="",m.style.minWidth=`${R}px`)}class Sn{constructor(v,m){this.node=v,this.cellMinWidth=m,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),un(v,this.colgroup,this.table,m),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(v){return v.type===this.node.type&&(this.node=v,un(v,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(v){return"attributes"===v.type&&(v.target===this.table||this.colgroup.contains(v.target))}}function Tn(_,v){return v?_.createChecked(null,v):_.createAndFill()}const pn=({editor:_})=>{const{selection:v}=_.state;if(!function(_){return _ instanceof dt}(v))return!1;let m=0;const f=(0,C.findParentNodeClosestToPos)(v.ranges[0].$from,x=>"table"===x.type.name);return null==f||f.node.descendants(x=>{if("table"===x.type.name)return!1;["tableCell","tableHeader"].includes(x.type.name)&&(m+=1)}),m===v.ranges.length&&(_.commands.deleteTable(),!0)},sn=C.Node.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Sn,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML({HTMLAttributes:_}){return["table",(0,C.mergeAttributes)(this.options.HTMLAttributes,_),["tbody",0]]},addCommands:()=>({insertTable:({rows:_=3,cols:v=3,withHeaderRow:m=!0}={})=>({tr:f,dispatch:M,editor:x})=>{const R=function(_,v,m,f,M){const x=function(_){if(_.cached.tableNodeTypes)return _.cached.tableNodeTypes;const v={};return Object.keys(_.nodes).forEach(m=>{const f=_.nodes[m];f.spec.tableRole&&(v[f.spec.tableRole]=f)}),_.cached.tableNodeTypes=v,v}(_),R=[],Z=[];for(let G=0;G<m;G+=1){const vt=Tn(x.cell,M);if(vt&&Z.push(vt),f){const Ot=Tn(x.header_cell,M);Ot&&R.push(Ot)}}const W=[];for(let G=0;G<v;G+=1)W.push(x.row.createChecked(null,f&&0===G?R:Z));return x.table.createChecked(null,W)}(x.schema,_,v,m);if(M){const Z=f.selection.anchor+1;f.replaceSelectionWith(R).scrollIntoView().setSelection(l.Bs.near(f.doc.resolve(Z)))}return!0},addColumnBefore:()=>({state:_,dispatch:v})=>function(_,v){if(!F(_))return!1;if(v){const m=k(_);v(K(_.tr,m,m.left))}return!0}(_,v),addColumnAfter:()=>({state:_,dispatch:v})=>function(_,v){if(!F(_))return!1;if(v){const m=k(_);v(K(_.tr,m,m.right))}return!0}(_,v),deleteColumn:()=>({state:_,dispatch:v})=>function(_,v){if(!F(_))return!1;if(v){const m=k(_),f=_.tr;if(0==m.left&&m.right==m.map.width)return!1;for(let M=m.right-1;te(f,m,M),M!=m.left;M--){const x=m.tableStart?f.doc.nodeAt(m.tableStart-1):f.doc;if(!x)throw RangeError("No table found");m.table=x,m.map=et.get(x)}v(f)}return!0}(_,v),addRowBefore:()=>({state:_,dispatch:v})=>function(_,v){if(!F(_))return!1;if(v){const m=k(_);v(Je(_.tr,m,m.top))}return!0}(_,v),addRowAfter:()=>({state:_,dispatch:v})=>function(_,v){if(!F(_))return!1;if(v){const m=k(_);v(Je(_.tr,m,m.bottom))}return!0}(_,v),deleteRow:()=>({state:_,dispatch:v})=>function(_,v){if(!F(_))return!1;if(v){const m=k(_),f=_.tr;if(0==m.top&&m.bottom==m.map.height)return!1;for(let M=m.bottom-1;lt(f,m,M),M!=m.top;M--){const x=m.tableStart?f.doc.nodeAt(m.tableStart-1):f.doc;if(!x)throw RangeError("No table found");m.table=x,m.map=et.get(m.table)}v(f)}return!0}(_,v),deleteTable:()=>({state:_,dispatch:v})=>function(_,v){const m=_.selection.$anchor;for(let f=m.depth;f>0;f--)if("table"==m.node(f).type.spec.tableRole)return v&&v(_.tr.delete(m.before(f),m.after(f)).scrollIntoView()),!0;return!1}(_,v),mergeCells:()=>({state:_,dispatch:v})=>Ft(_,v),splitCell:()=>({state:_,dispatch:v})=>Qt(_,v),toggleHeaderColumn:()=>({state:_,dispatch:v})=>ce("column")(_,v),toggleHeaderRow:()=>({state:_,dispatch:v})=>ce("row")(_,v),toggleHeaderCell:()=>({state:_,dispatch:v})=>an(_,v),mergeOrSplit:()=>({state:_,dispatch:v})=>!!Ft(_,v)||Qt(_,v),setCellAttribute:(_,v)=>({state:m,dispatch:f})=>function(_,v){return function(m,f){if(!F(m))return!1;const M=ut(m);if(M.nodeAfter.attrs[_]===v)return!1;if(f){const x=m.tr;m.selection instanceof dt?m.selection.forEachCell((R,Z)=>{R.attrs[_]!==v&&x.setNodeMarkup(Z,null,me(Gt({},R.attrs),{[_]:v}))}):x.setNodeMarkup(M.pos,null,me(Gt({},M.nodeAfter.attrs),{[_]:v})),f(x)}return!0}}(_,v)(m,f),goToNextCell:()=>({state:_,dispatch:v})=>Pn(1)(_,v),goToPreviousCell:()=>({state:_,dispatch:v})=>Pn(-1)(_,v),fixTables:()=>({state:_,dispatch:v})=>(v&&ne(_),!0),setCellSelection:_=>({tr:v,dispatch:m})=>{if(m){const f=dt.create(v.doc,_.anchorCell,_.headCell);v.setSelection(f)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:pn,"Mod-Backspace":pn,Delete:pn,"Mod-Delete":pn}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[gt({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],zn({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema:_=>({tableRole:(0,C.callOrReturn)((0,C.getExtensionField)(_,"tableRole",{name:_.name,options:_.options,storage:_.storage}))})}).extend({renderHTML({node:_,HTMLAttributes:v}){var m,f;let M=0,x=!0;try{const R=(null===(m=_.content)||void 0===m?void 0:m.content)[0];null===(f=null==R?void 0:R.content)||void 0===f||f.content.forEach(Z=>{Z.attrs.colwidth?Z.attrs.colwidth.forEach(W=>{W?M+=W:(x=!1,M+=this.options.cellMinWidth)}):(x=!1,M+=this.options.cellMinWidth*(Z.attrs.colspan||1))})}catch(R){x=!1}return v.style=x&&M>0?`width: ${M}px;`:M&&M>0?`min-width: ${M}px`:null,["div",{class:"tui-table-wrapper"},["table",(0,C.mergeAttributes)(this.options.HTMLAttributes,v),["tbody",0]]]}})},88806:(Yt,Ct,c)=>{c.d(Ct,{v:()=>l});var C=c(74788);class l{constructor(D,g,ot){const B=g.get(C.z2F),et=g.get(C._Vd).resolveComponentFactory(D);this.componentRef=et.create(g,[]),this.updateProps(ot),B.attachView(this.componentRef.hostView)}get instance(){return this.componentRef.instance}get el(){return this.componentRef.injector.get(C.SBq)}get dom(){return this.el.nativeElement}updateProps(D){Object.entries(D).forEach(([g,ot])=>{this.instance[g]=ot})}detectChanges(){this.componentRef.changeDetectorRef.detectChanges()}destroy(){this.componentRef.destroy()}}},40400:(Yt,Ct,c)=>{c.d(Ct,{d:()=>D,x:()=>ot});var C=c(12057),l=c(12867),y=c(88806);class D{}class g extends l.NodeView{constructor(){super(...arguments),this.contentDOMElement=null}mount(){const X=this.options.injector,et=X.get(C.K0);this.renderer=new y.v(this.component,X,{editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(ct={})=>this.updateAttributes(ct),deleteNode:()=>this.deleteNode()}),this.extension.config.draggable&&(this.renderer.el.nativeElement.ondragstart=ct=>{this.onDragStart(ct)}),this.contentDOMElement=this.node.isLeaf?null:et.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit",this.renderer.detectChanges())}get dom(){return this.renderer.dom}get contentDOM(){return this.node.isLeaf?null:(this.maybeMoveContentDOM(),this.contentDOMElement)}update(X,et){return this.options.update?this.options.update(X,et):X.type===this.node.type&&(X===this.node&&this.decorations===et||(this.node=X,this.decorations=et,this.renderer.updateProps({node:X,decorations:et}),this.maybeMoveContentDOM()),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy()}maybeMoveContentDOM(){const X=this.dom.querySelector("[data-node-view-content]");this.contentDOMElement&&X&&!X.contains(this.contentDOMElement)&&X.appendChild(this.contentDOMElement)}}const ot=(B,X)=>et=>new g(B,et,X)},48014:(Yt,Ct,c)=>{c.r(Ct),c.d(Ct,{AbstractTuiEditor:()=>C._,AbstractTuiEditorResizable:()=>At._3,BackgroundColor:()=>xt.BackgroundColor,EDITOR_BLANK_COLOR:()=>ut.hK,FontColor:()=>St.FontColor,INITIALIZATION_TIPTAP_CONTAINER:()=>Zt.Y1,LAZY_EDITOR_EXTENSIONS:()=>Zt.F4,LAZY_TIPTAP_EDITOR:()=>Zt.bG,StarterKit:()=>J.StarterKit,TIPTAP_EDITOR:()=>Zt.ZW,TUI_ATTACH_FILES_LOADER:()=>Zt.zc,TUI_ATTACH_FILES_OPTIONS:()=>Zt.dR,TUI_DEFAULT_LINK_OPTIONS:()=>ut.pL,TUI_EDITOR_CODE_OPTIONS:()=>Zt.Mr,TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES:()=>Zt.dj,TUI_EDITOR_CONTENT_PROCESSOR:()=>Zt.F1,TUI_EDITOR_DEFAULT_OPTIONS:()=>Zt.HG,TUI_EDITOR_EXTENSIONS:()=>Zt.Wf,TUI_EDITOR_FONT_OPTIONS:()=>Zt.UN,TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>wt.TUI_EDITOR_GROUP_DEFAULT_OPTIONS,TUI_EDITOR_LINK_HASH_PREFIX:()=>ut._s,TUI_EDITOR_LINK_HTTPS_PREFIX:()=>ut.Ci,TUI_EDITOR_LINK_HTTP_PREFIX:()=>ut.ML,TUI_EDITOR_LINK_TEXTS:()=>Zt.b$,TUI_EDITOR_MAX_IMAGE_WIDTH:()=>z.TUI_EDITOR_MAX_IMAGE_WIDTH,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>z.TUI_EDITOR_MIN_IMAGE_WIDTH,TUI_EDITOR_OPTIONS:()=>Zt.mJ,TUI_EDITOR_PROVIDERS:()=>ft.m,TUI_EDITOR_TABLE_COMMANDS:()=>Zt.$i,TUI_EDITOR_TOOLBAR_TEXTS:()=>Zt.rf,TUI_IFRAME_EDITOR_OPTIONS:()=>kt.TUI_IFRAME_EDITOR_OPTIONS,TUI_IMAGE_EDITOR_OPTIONS:()=>z.TUI_IMAGE_EDITOR_OPTIONS,TUI_IMAGE_LOADER:()=>Zt.p7,TableCellBackground:()=>nt.TableCellBackground,TuiAlignContentComponent:()=>F.Xp,TuiAlignContentModule:()=>F.pu,TuiAudio:()=>st.TuiAudio,TuiCodeComponent:()=>F.Tf,TuiCodeModule:()=>F.P_,TuiColorEditComponent:()=>l.hR,TuiColorEditModule:()=>l.TD,TuiColorPickerComponent:()=>l.$v,TuiColorPickerModule:()=>l.H9,TuiColorSelectorComponent:()=>l.sV,TuiColorSelectorModule:()=>l.wl,TuiComponentRenderer:()=>Lt.v,TuiDetailsComponent:()=>F.yj,TuiDetailsModule:()=>F.y9,TuiDetailsRemoveComponent:()=>F.Un,TuiEditLinkComponent:()=>y.lV,TuiEditLinkModule:()=>y.Fu,TuiEditorComponent:()=>D.a,TuiEditorGroupToolComponent:()=>F.dN,TuiEditorImagePreviewDirective:()=>mt.Zj,TuiEditorImagePreviewModule:()=>mt.BN,TuiEditorModule:()=>it,TuiEditorPortalDirective:()=>bt.A,TuiEditorPortalHostComponent:()=>Pt.d,TuiEditorPortalService:()=>It.Y,TuiEditorResizableComponent:()=>At.V_,TuiEditorResizableModule:()=>At.Sl,TuiEditorSocketComponent:()=>ot.D,TuiEditorSocketModule:()=>X,TuiEditorTool:()=>Y._,TuiEditorToolGroup:()=>F.jP,TuiFileLink:()=>Dt.TuiFileLink,TuiFilterAnchorsPipe:()=>y.bL,TuiFlatPickerComponent:()=>l.Jd,TuiFlatPickerModule:()=>l.ui,TuiFontSize:()=>_t.TuiFontSize,TuiFontSizeComponent:()=>F.mK,TuiFontSizeModule:()=>F.p7,TuiFontStyleComponent:()=>F.hr,TuiFontStyleModule:()=>F.Zv,TuiHighlightColorComponent:()=>F.UT,TuiHighlightColorModule:()=>F.XC,TuiIframeEditorComponent:()=>kt.TuiIframeEditorComponent,TuiIframeEditorModule:()=>kt.TuiIframeEditorModule,TuiImageEditorComponent:()=>z.TuiImageEditorComponent,TuiImageEditorModule:()=>z.TuiImageEditorModule,TuiInputColorComponent:()=>pt.j,TuiInputColorModule:()=>tt,TuiLinearMultiPickerComponent:()=>l.es,TuiLinearMultiPickerModule:()=>l.GU,TuiLinearPickerComponent:()=>l.P,TuiLinearPickerModule:()=>l.g7,TuiLink:()=>dt.TuiLink,TuiListConfigsComponent:()=>F.w2,TuiListConfigsModule:()=>F.Ur,TuiNodeViewNgComponent:()=>Jt.d,TuiNodeViewRenderer:()=>Jt.x,TuiPaletteComponent:()=>l.Rh,TuiPaletteModule:()=>l.VM,TuiShortUrlPipe:()=>y.X,TuiSource:()=>st.TuiSource,TuiTabExtension:()=>rt.TuiTabExtension,TuiTable:()=>Q.TuiTable,TuiTableCellColorComponent:()=>F.pH,TuiTableCellColorModule:()=>F.mp,TuiTableCommands:()=>F.iN,TuiTableCreateComponent:()=>F.lT,TuiTableCreateModule:()=>F.iA,TuiTableMergeCellsComponent:()=>F.YH,TuiTableMergeCellsModule:()=>F.er,TuiTableRowColumnManagerComponent:()=>F._I,TuiTableRowColumnManagerModule:()=>F.__,TuiTableSizeSelectorComponent:()=>F.M8,TuiTableSizeSelectorModule:()=>F.kU,TuiTextColorComponent:()=>F.G0,TuiTextColorModule:()=>F._t,TuiTiptapEditorDirective:()=>mt.JU,TuiTiptapEditorModule:()=>mt.mJ,TuiTiptapEditorService:()=>mt.$3,TuiToolbarComponent:()=>et.M6,TuiToolbarModule:()=>et.yB,TuiToolbarNavigationManagerDirective:()=>et.Bp,TuiVideo:()=>st.TuiVideo,createGroupExtension:()=>wt.createGroupExtension,createIframeEditorExtension:()=>kt.createIframeEditorExtension,createImageEditorExtension:()=>z.createImageEditorExtension,defaultEditorColors:()=>ut.sw,defaultEditorExtensions:()=>Bt,defaultEditorTools:()=>ut.Db,tuiCreateImageEditorExtension:()=>z.tuiCreateImageEditorExtension,tuiDefaultFontOptionsHandler:()=>ut.RR,tuiDeleteNode:()=>ne.yU,tuiEditorOptionsProvider:()=>Zt.Uv,tuiGetElementPoint:()=>ne.Ws,tuiGetGradientData:()=>ne.U5,tuiGetMarkRange:()=>ne.Yz,tuiGetNestedNodes:()=>ne.YX,tuiGetSelectedContent:()=>ne.Ap,tuiInsertHtml:()=>ne.Xd,tuiInsertText:()=>ne.Oi,tuiIsOrderedOrBulletList:()=>rt.tuiIsOrderedOrBulletList,tuiIsSafeLinkRange:()=>ne.nC,tuiIsSelectionIn:()=>ne.i0,tuiLegacyEditorConverter:()=>ne.Er,tuiParseGradient:()=>ne._N,tuiParseNodeAttributes:()=>ne.x6,tuiParseStyle:()=>ne.jx,tuiToGradient:()=>ne.CH});var C=c(77361),l=c(27050),y=c(71115),D=c(69303),g=c(12057),ot=c(20179),B=c(74788);let X=(()=>{class Wt{}return Wt.\u0275fac=function(ye){return new(ye||Wt)},Wt.\u0275mod=B.oAB({type:Wt}),Wt.\u0275inj=B.cJS({}),Wt})();var et=c(17406),mt=c(84614),ct=c(68807),Mt=c(3497);let it=(()=>{class Wt{}return Wt.\u0275fac=function(ye){return new(ye||Wt)},Wt.\u0275mod=B.oAB({type:Wt}),Wt.\u0275inj=B.cJS({imports:[[g.ez,et.yB,Mt.TuiWrapperModule,Mt.TuiScrollbarModule,y.Fu,ct.TuiActiveZoneModule,Mt.TuiDropdownModule,mt.mJ,X,ct.TuiLetModule]]}),Wt})();var ft=c(79089),bt=c(1433),It=c(73825),Pt=c(9872),At=c(95110),pt=c(19769);let tt=(()=>{class Wt{}return Wt.\u0275fac=function(ye){return new(ye||Wt)},Wt.\u0275mod=B.oAB({type:Wt}),Wt.\u0275inj=B.cJS({imports:[[g.ez,Mt.TuiPrimitiveTextfieldModule,Mt.TuiTextfieldControllerModule,Mt.TuiHostedDropdownModule,l.wl,ct.TuiActiveZoneModule]]}),Wt})();var F=c(93252),ut=c(64352),Y=c(48699),xt=c(15736);const Bt=[Promise.resolve().then(c.bind(c,2823)).then(({StarterKit:Wt})=>Wt).then(Wt=>Wt.configure({heading:{levels:[1,2]}})),c.e(73336).then(c.bind(c,73336)).then(({default:Wt})=>Wt.configure({types:["heading","paragraph"]})),Promise.resolve().then(c.bind(c,84402)).then(({default:Wt})=>Wt),c.e(17991).then(c.bind(c,17991)).then(({default:Wt})=>Wt),c.e(77147).then(c.bind(c,77147)).then(({default:Wt})=>Wt),c.e(25034).then(c.bind(c,25034)).then(({default:Wt})=>Wt),Promise.resolve().then(c.bind(c,52658)).then(({FontColor:Wt})=>Wt),Promise.resolve().then(c.bind(c,44632)).then(({default:Wt})=>Wt.configure({inline:!0,allowBase64:!0})),Promise.resolve().then(c.bind(c,82091)).then(({TuiLink:Wt})=>Wt),c.e(54058).then(c.bind(c,54058)).then(({TuiJumpAnchor:Wt})=>Wt),Promise.resolve().then(c.bind(c,93763)).then(({TuiFileLink:Wt})=>Wt),Promise.resolve().then(c.bind(c,15736)).then(({BackgroundColor:Wt})=>Wt),Promise.resolve().then(c.bind(c,86624)).then(({TuiTable:Wt})=>Wt.configure({resizable:!0})),c.e(45213).then(c.bind(c,45213)).then(({default:Wt})=>Wt),c.e(71397).then(c.bind(c,71397)).then(({default:Wt})=>Wt),c.e(38840).then(c.bind(c,38840)).then(({TableHeader:Wt})=>Wt),Promise.resolve().then(c.bind(c,12177)).then(({TuiTabExtension:Wt})=>Wt),Promise.resolve().then(c.bind(c,51919)).then(({TableCellBackground:Wt})=>Wt),c.e(44312).then(c.bind(c,44312)).then(({TuiDetailsContent:Wt})=>Wt),c.e(44312).then(c.bind(c,44312)).then(({TuiDetails:Wt})=>Wt),c.e(44312).then(c.bind(c,44312)).then(({TuiSummary:Wt})=>Wt),Promise.resolve().then(c.bind(c,9492)).then(({TuiFontSize:Wt})=>Wt)];var Dt=c(93763),St=c(52658),_t=c(9492),wt=c(54920),kt=c(20854),z=c(53380),rt=c(12177),dt=c(82091),st=c(41512),J=c(2823),Q=c(86624),nt=c(51919),Lt=c(88806),Jt=c(40400),Zt=c(14309),ne=c(27863)},62141:(Yt,Ct,c)=>{c.d(Ct,{i:()=>mt});var C=c(12057),l=c(74788),y=c(27863),D=c(68807),g=c(18891),ot=c(43190),B=c(88002),X=c(46782),et=c(39761);let mt=(()=>{class ct extends g.y{constructor(it,{nativeElement:ft},bt){const It=(0,D.tuiTypedFromEvent)(ft,"mousedown").pipe((0,D.tuiPreventDefault)(),(0,ot.w)(Pt=>{const At=(0,D.tuiTypedFromEvent)(bt,"mousemove").pipe((0,B.U)(({clientX:pt,clientY:tt})=>(0,y.Ws)(pt,tt,ft)),(0,X.R)((0,D.tuiTypedFromEvent)(bt,"mouseup")));return Pt.target===ft?At.pipe((0,et.O)((0,y.Ws)(Pt.clientX,Pt.clientY,ft))):At}),(0,X.R)(it));super(Pt=>It.subscribe(Pt))}}return ct.\u0275fac=function(it){return new(it||ct)(l.LFG(D.TuiDestroyService,2),l.LFG(l.SBq),l.LFG(C.K0))},ct.\u0275prov=l.Yz7({token:ct,factory:ct.\u0275fac}),ct})()},14309:(Yt,Ct,c)=>{c.d(Ct,{Y1:()=>Bt,F4:()=>y,bG:()=>xt,ZW:()=>Y,zc:()=>ct,dR:()=>mt,Mr:()=>Pt,dj:()=>it,F1:()=>et,HG:()=>g,Wf:()=>l,UN:()=>At,b$:()=>It,mJ:()=>ot,$i:()=>bt,rf:()=>ft,p7:()=>F,Uv:()=>B});var C=c(74788);const l=new C.OlP("[TUI_EDITOR_EXTENSIONS]"),y=new C.OlP("[LAZY_EDITOR_EXTENSIONS]");var D=c(64352);const g={colors:D.sw,blankColor:D.hK,linkOptions:D.pL,fontOptions:D.RR},ot=new C.OlP("[TUI_EDITOR_OPTIONS]",{factory:()=>g});function B(Dt){return{provide:ot,useValue:Object.assign(Object.assign({},g),Dt)}}var X=c(54487);const et=new C.OlP("[TUI_EDITOR_CONTENT_PROCESSOR]",{factory:()=>X.y}),mt=new C.OlP("[TUI_ATTACH_FILES_OPTIONS]",{factory:()=>({accept:"*/*",multiple:!0})}),ct=new C.OlP("[TUI_ATTACH_FILES_LOADER]");var Mt=c(72773);const it=new C.OlP("[TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES]",{factory:()=>["Solid color","Gradient"]}),ft=new C.OlP("[TUI_EDITOR_TOOLBAR_TEXTS]",{factory:(0,Mt.vv)("toolbarTools")}),bt=new C.OlP("[TUI_EDITOR_TABLE_COMMANDS]",{factory:(0,Mt.vv)("editorTableCommands")}),It=new C.OlP("[TUI_EDITOR_LINK_TEXTS]",{factory:(0,Mt.vv)("editorEditLink")}),Pt=new C.OlP("[TUI_EDITOR_CODE_OPTIONS]",{factory:(0,Mt.vv)("editorCodeOptions")}),At=new C.OlP("[TUI_EDITOR_FONT_OPTIONS]",{factory:(0,Mt.vv)("editorFontOptions")});var pt=c(68807),tt=c(88002);const F=new C.OlP("[TUI_IMAGE_LOADER]",{factory:()=>Dt=>{const St=new FileReader;return St.readAsDataURL(Dt),(0,pt.tuiTypedFromEvent)(St,"load").pipe((0,tt.U)(()=>String(St.result)))}});var ut=c(82298);const Y=new C.OlP("[TIPTAP_EDITOR]"),xt=new C.OlP("[LAZY_TIPTAP_EDITOR]",{factory:()=>{const Dt=new ut.t(1);return Promise.resolve().then(c.bind(c,12867)).then(St=>Dt.next(St.Editor)),Dt}}),Bt=new C.OlP("[INITIALIZATION_TIPTAP_CONTAINER]")},27863:(Yt,Ct,c)=>{function C(st,J,Q){const nt=st.selection.$anchor;for(let Lt=nt.depth;Lt>0;Lt--)if(nt.node(Lt).type.name===Q)return J&&J(st.tr.delete(nt.before(Lt),nt.after(Lt)).scrollIntoView()),!0;return!1}c.d(Ct,{yU:()=>C,Ws:()=>y,U5:()=>D,Yz:()=>B,YX:()=>et,Ap:()=>ct,Xd:()=>Mt,Oi:()=>it,nC:()=>rt,i0:()=>ft,Er:()=>bt,_N:()=>_t,x6:()=>kt,jx:()=>z,CH:()=>dt});var l=c(68807);function y(st,J,Q){const{left:nt,top:Lt,width:Jt,height:Zt}=Q.getBoundingClientRect();return[(0,l.tuiClamp)(st-nt,0,Jt)/Jt,(0,l.tuiClamp)(J-Lt,0,Zt)/Zt]}function D(st){return st.slice(0,Math.max(0,st.length-1)).replace("linear-gradient(","")}function ot(st,J,Q={}){return st.find(({attrs:nt,type:Lt})=>Lt===J&&function(st,J){const Q=Object.keys(J);return!Q.length||!!Q.filter(nt=>J[nt]===st[nt]).length}(nt,Q))||null}function B(st,J,Q={}){if(!st||!J)return null;const{node:nt,offset:Lt}=st.parent.childAfter(st.parentOffset);if(!nt)return null;const Jt=ot(nt.marks,J,Q);if(!Jt)return null;let Zt=st.index(),ne=st.start()+Lt,Wt=Zt+1,pe=ne+nt.nodeSize;for(ot(nt.marks,J,Q);Zt>0&&Jt.isInSet(st.parent.child(Zt-1).marks);)Zt-=1,ne-=st.parent.child(Zt).nodeSize;for(;Wt<st.parent.childCount&&ot(st.parent.child(Wt).marks,J,Q);)pe+=st.parent.child(Wt).nodeSize,Wt+=1;return{from:ne,to:pe}}var X=c(77346);function et(st){const J=[];return st.content.forEach(Q=>{Q instanceof X.NB&&J.push([Q.type.name,Q.attrs])}),J}var mt=c(12867);function ct(st,J){const Q=null!=J?J:st.selection.$head.parent.textContent,nt=st.doc.cut(st.selection.from,st.selection.to);return nt.content.size?(0,mt.getHTMLFromFragment)(nt.content,st.schema):Q}function Mt(st,J){if(st.queryCommandSupported("insertHTML"))return void st.execCommand("insertHTML",!1,J);const Q=st.getSelection();if(!Q)throw new l.TuiDocumentSelectionException;st.execCommand("ms-beginUndoUnit");const nt=Q.getRangeAt(0),Lt=nt.createContextualFragment(J);nt.deleteContents(),nt.insertNode(Lt),st.execCommand("ms-endUndoUnit")}function it(st,J){if(st.queryCommandSupported("insertText"))return void st.execCommand("insertText",!1,J);const Q=st.getSelection();if(!Q)throw new l.TuiDocumentSelectionException;st.execCommand("ms-beginUndoUnit");const nt=Q.getRangeAt(0);nt.deleteContents(),nt.insertNode(st.createTextNode(J)),st.execCommand("ms-endUndoUnit")}function ft({anchorNode:st,focusNode:J},Q){return!!st&&!!J&&(0,l.tuiIsNodeIn)(st,Q)&&(0,l.tuiIsNodeIn)(J,Q)}function bt(st){const J=(new DOMParser).parseFromString(st,"text/html");return It(J.body),J.body.innerHTML}function It(st){for(const J of Array.from(st.children))if(J.children.length&&It(J),"FONT"===J.tagName)if(J.hasAttribute("size"))switch(J.getAttribute("size")){case"6":Pt("h1",J);break;case"5":Pt("h2",J);break;case"4":At("17px",J);break;case"3":At("15px",J);break;case"2":At("13px",J)}else J.hasAttribute("color")&&pt(J)}function Pt(st,J){var Q,nt,Lt,Jt,Zt,ne,Wt,pe,ye;const Oe=document.createElement(st);if(Oe.innerHTML=J.innerHTML,"P"===(null===(Q=J.parentElement)||void 0===Q?void 0:Q.tagName)){const fe=null===(Lt=null===(nt=J.parentElement)||void 0===nt?void 0:nt.parentElement)||void 0===Lt?void 0:Lt.insertBefore(Oe,J.parentElement);null===(Jt=J.parentElement)||void 0===Jt||Jt.removeChild(J),(null==fe?void 0:fe.nextSibling)&&!(null===(ne=null===(Zt=null==fe?void 0:fe.nextSibling)||void 0===Zt?void 0:Zt.textContent)||void 0===ne?void 0:ne.trim())&&(null===(pe=null===(Wt=fe.nextSibling)||void 0===Wt?void 0:Wt.parentElement)||void 0===pe||pe.removeChild(fe.nextSibling))}else null===(ye=J.parentElement)||void 0===ye||ye.replaceChild(Oe,J)}function At(st,J){var Q;const nt=document.createElement("p"),Lt=document.createElement("span");Lt.setAttribute("style",`font-size: ${st}`),Lt.innerHTML=J.innerHTML,nt.append(Lt),null===(Q=J.parentElement)||void 0===Q||Q.replaceChild("P"===J.parentElement.tagName?Lt:nt,J)}function pt(st){var J;const Q=document.createElement("span");Q.setAttribute("style",`color: ${st.getAttribute("color")}`),Q.innerHTML=st.innerHTML,null===(J=st.parentElement)||void 0===J||J.replaceChild(Q,st)}const St=["\\s*(","(?:","#(?:[a-f0-9]{6}|[a-f0-9]{3})","|","(?:rgb|hsl)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*\\)","|","(?:rgba|hsla)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*,\\s*\\d*\\.?\\d+\\)","|","[_a-z-][_a-z0-9-]*",")",")","(?:\\s+","(","(?:[+-]?\\d*\\.?\\d+)(?:%|[a-z]+)?","))?","(?:","\\s*,\\s*","\\s*)?"];function _t(st){const J=new RegExp(St.join(""),"gi"),Q=st.startsWith("to")||st.match(/^\d/)?st.slice(Math.max(0,st.indexOf(",")+1)).trim():st,nt=st.startsWith("to")?st.split(",")[0]:"to bottom";let Lt=[],Jt=J.exec(Q);for(;null!==Jt;)Lt=Lt.concat({color:Jt[1],position:wt(Jt[2],Lt.length)}),Jt=J.exec(Q);return Lt=Lt.filter(({color:Zt})=>Zt.startsWith("#")||Zt.startsWith("rgb")),{stops:Lt,side:nt}}function wt(st,J){const Q=1===J?"100%":`${J}%`;return(null==st?void 0:st.includes("%"))?st:Q}function kt(st){return st.reduce((J,Q)=>(J[Q]={parseHTML:nt=>null==nt?void 0:nt.getAttribute(`${Q}`)},J),{})}function z(st){return st.split(";").reduce((J,Q)=>{var nt;const[Lt,Jt]=null!==(nt=Q.split(":"))&&void 0!==nt?nt:[];return Lt&&Jt&&(J[Lt.trim()]=Jt.trim()),J},{})}function rt(st){var J;return st.endOffset-st.startOffset>0||0!==st.startOffset&&st.endOffset!==((null===(J=st.endContainer.nodeValue)||void 0===J?void 0:J.length)||0)}function dt({stops:st,side:J}){return`linear-gradient(${J}, ${st.map(({color:Q,position:nt})=>`rgba(${(0,l.tuiParseColor)(Q).join(", ")}) ${nt}`).join(", ")})`}},12867:(Yt,Ct,c)=>{c.r(Ct),c.d(Ct,{CommandManager:()=>b,Editor:()=>Ko,Extension:()=>ce,InputRule:()=>we,Mark:()=>Hn,Node:()=>Vn,NodeView:()=>go,PasteRule:()=>Tt,Tracker:()=>d,callOrReturn:()=>a,combineTransactionSteps:()=>wn,createChainableState:()=>gt,createDocument:()=>tn,createNodeFromContent:()=>zt,createStyleTag:()=>ho,defaultBlockAt:()=>no,deleteProps:()=>Ge,elementFromString:()=>Ut,escapeForRegEx:()=>_o,extensions:()=>po,findChildren:()=>vo,findChildrenInRange:()=>Co,findDuplicates:()=>Qt,findParentNode:()=>Rn,findParentNodeClosestToPos:()=>oo,fromString:()=>E,generateHTML:()=>io,generateJSON:()=>Mo,generateText:()=>ro,getAttributes:()=>so,getAttributesFromExtensions:()=>V,getChangedRanges:()=>yo,getDebugJSON:()=>Ln,getExtensionField:()=>I,getHTMLFromFragment:()=>Kn,getMarkAttributes:()=>Xn,getMarkRange:()=>v,getMarkType:()=>m,getMarksBetween:()=>qn,getNodeAttributes:()=>Wn,getNodeType:()=>U,getRenderedAttributes:()=>Nt,getSchema:()=>Jn,getSchemaByResolvedExtensions:()=>K,getSchemaTypeByName:()=>at,getSchemaTypeNameByName:()=>hn,getSplittedAttributes:()=>Nn,getText:()=>$n,getTextBetween:()=>Re,getTextContentFromNodes:()=>te,getTextSerializersFromSchema:()=>We,injectExtensionAttributesToParseRule:()=>P,inputRulesPlugin:()=>S,isActive:()=>Zn,isEmptyObject:()=>p,isExtensionRulesEnabled:()=>Ht,isFunction:()=>H,isList:()=>dn,isMacOS:()=>De,isMarkActive:()=>yn,isNodeActive:()=>de,isNodeEmpty:()=>Yn,isNodeSelection:()=>on,isNumber:()=>lt,isPlainObject:()=>se,isRegExp:()=>ee,isString:()=>r,isTextSelection:()=>x,isiOS:()=>W,markInputRule:()=>Jo,markPasteRule:()=>Lo,mergeAttributes:()=>yt,mergeDeep:()=>le,minMax:()=>R,nodeInputRule:()=>$o,nodePasteRule:()=>o,objectIncludes:()=>rn,pasteRulesPlugin:()=>Ft,posToDOMRect:()=>Bn,removeDuplicates:()=>An,resolveFocusPosition:()=>Z,selectionToInsertionEnd:()=>jt,splitExtensions:()=>w,textInputRule:()=>fo,textPasteRule:()=>s,textblockTypeInputRule:()=>Ro,wrappingInputRule:()=>mo});var C=c(62463),l=c(43594),y=c(70768),D=c(77346),g=c(38480);const ot=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);const X=(e,t,n)=>{let i=function(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}(e,n);if(!i)return!1;let u=ft(i);if(!u){let T=i.blockRange(),A=T&&(0,g.k9)(T);return null!=A&&(t&&t(e.tr.lift(T,A).scrollIntoView()),!0)}let h=u.nodeBefore;if(!h.type.spec.isolating&&dt(e,u,t))return!0;if(0==i.parent.content.size&&(Mt(h,"end")||C.qv.isSelectable(h))){let T=(0,g.dR)(e.doc,i.before(),i.after(),D.p2.empty);if(T&&T.slice.size<T.to-T.from){if(t){let A=e.tr.step(T);A.setSelection(Mt(h,"end")?C.Y1.findFrom(A.doc.resolve(A.mapping.map(u.pos,-1)),-1):C.qv.create(A.doc,u.pos-h.nodeSize)),t(A.scrollIntoView())}return!0}}return!(!h.isAtom||u.depth!=i.depth-1||(t&&t(e.tr.delete(u.pos-h.nodeSize,u.pos).scrollIntoView()),0))};function Mt(e,t,n=!1){for(let i=e;i;i="start"==t?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&1!=i.childCount)return!1}return!1}const it=(e,t,n)=>{let{$head:i,empty:u}=e.selection,h=i;if(!u)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):i.parentOffset>0)return!1;h=ft(i)}let T=h&&h.nodeBefore;return!(!T||!C.qv.isSelectable(T)||(t&&t(e.tr.setSelection(C.qv.create(e.doc,h.pos-T.nodeSize)).scrollIntoView()),0))};function ft(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}const It=(e,t,n)=>{let i=function(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}(e,n);if(!i)return!1;let u=At(i);if(!u)return!1;let h=u.nodeAfter;if(dt(e,u,t))return!0;if(0==i.parent.content.size&&(Mt(h,"start")||C.qv.isSelectable(h))){let T=(0,g.dR)(e.doc,i.before(),i.after(),D.p2.empty);if(T&&T.slice.size<T.to-T.from){if(t){let A=e.tr.step(T);A.setSelection(Mt(h,"start")?C.Y1.findFrom(A.doc.resolve(A.mapping.map(u.pos)),1):C.qv.create(A.doc,A.mapping.map(u.pos))),t(A.scrollIntoView())}return!0}}return!(!h.isAtom||u.depth!=i.depth-1||(t&&t(e.tr.delete(u.pos,u.pos+h.nodeSize).scrollIntoView()),0))},Pt=(e,t,n)=>{let{$head:i,empty:u}=e.selection,h=i;if(!u)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size)return!1;h=At(i)}let T=h&&h.nodeAfter;return!(!T||!C.qv.isSelectable(T)||(t&&t(e.tr.setSelection(C.qv.create(e.doc,h.pos)).scrollIntoView()),0))};function At(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const ut=(e,t)=>{let{$head:n,$anchor:i}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(i)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))};function Y(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const xt=(e,t)=>{let{$head:n,$anchor:i}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let u=n.node(-1),h=n.indexAfter(-1),T=Y(u.contentMatchAt(h));if(!T||!u.canReplaceWith(h,h,T))return!1;if(t){let A=n.after(),L=e.tr.replaceWith(A,A,T.createAndFill());L.setSelection(C.Y1.near(L.doc.resolve(A),1)),t(L.scrollIntoView())}return!0},Bt=(e,t)=>{let n=e.selection,{$from:i,$to:u}=n;if(n instanceof C.C1||i.parent.inlineContent||u.parent.inlineContent)return!1;let h=Y(u.parent.contentMatchAt(u.indexAfter()));if(!h||!h.isTextblock)return!1;if(t){let T=(!i.parentOffset&&u.index()<u.parent.childCount?i:u).pos,A=e.tr.insert(T,h.createAndFill());A.setSelection(C.Bs.create(A.doc,T+1)),t(A.scrollIntoView())}return!0},Dt=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let h=n.before();if((0,g.Ax)(e.doc,h))return t&&t(e.tr.split(h).scrollIntoView()),!0}let i=n.blockRange(),u=i&&(0,g.k9)(i);return null!=u&&(t&&t(e.tr.lift(i,u).scrollIntoView()),!0)};var e;function dt(e,t,n){let h,T,i=t.nodeBefore,u=t.nodeAfter;if(i.type.spec.isolating||u.type.spec.isolating)return!1;if(function(e,t,n){let i=t.nodeBefore,u=t.nodeAfter,h=t.index();return!(!(i&&u&&i.type.compatibleContent(u.type))||(!i.content.size&&t.parent.canReplace(h-1,h)?(n&&n(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(h,h+1)||!u.isTextblock&&!(0,g.Mn)(e.doc,t.pos)||(n&&n(e.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;let A=t.parent.canReplace(t.index(),t.index()+1);if(A&&(h=(T=i.contentMatchAt(i.childCount)).findWrapping(u.type))&&T.matchType(h[0]||u.type).validEnd){if(n){let q=t.pos+u.nodeSize,ht=D.HY.empty;for(let Vt=h.length-1;Vt>=0;Vt--)ht=D.HY.from(h[Vt].create(null,ht));ht=D.HY.from(i.copy(ht));let Rt=e.tr.step(new g.FC(t.pos-1,q,t.pos,q,new D.p2(ht,1,0),h.length,!0)),$t=q+2*h.length;(0,g.Mn)(Rt.doc,$t)&&Rt.join($t),n(Rt.scrollIntoView())}return!0}let L=C.Y1.findFrom(t,1),N=L&&L.$from.blockRange(L.$to),j=N&&(0,g.k9)(N);if(null!=j&&j>=t.depth)return n&&n(e.tr.lift(N,j).scrollIntoView()),!0;if(A&&Mt(u,"start",!0)&&Mt(i,"end")){let q=i,ht=[];for(;ht.push(q),!q.isTextblock;)q=q.lastChild;let Rt=u,$t=1;for(;!Rt.isTextblock;Rt=Rt.firstChild)$t++;if(q.canReplace(q.childCount,q.childCount,Rt.content)){if(n){let Vt=D.HY.empty;for(let qt=ht.length-1;qt>=0;qt--)Vt=D.HY.from(ht[qt].copy(Vt));n(e.tr.step(new g.FC(t.pos-ht.length,t.pos+u.nodeSize,t.pos+$t,t.pos+u.nodeSize-$t,new D.p2(Vt,ht.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function st(e){return function(t,n){let i=t.selection,u=e<0?i.$from:i.$to,h=u.depth;for(;u.node(h).isInline;){if(!h)return!1;h--}return!!u.node(h).isTextblock&&(n&&n(t.tr.setSelection(C.Bs.create(t.doc,e<0?u.start(h):u.end(h)))),!0)}}const J=st(-1),Q=st(1);function Lt(e,t=null){return function(n,i){let u=!1;for(let h=0;h<n.selection.ranges.length&&!u;h++){let{$from:{pos:T},$to:{pos:A}}=n.selection.ranges[h];n.doc.nodesBetween(T,A,(L,N)=>{if(u)return!1;if(L.isTextblock&&!L.hasMarkup(e,t))if(L.type==e)u=!0;else{let j=n.doc.resolve(N),q=j.index();u=j.parent.canReplaceWith(q,q+1,e)}})}if(!u)return!1;if(i){let h=n.tr;for(let T=0;T<n.selection.ranges.length;T++){let{$from:{pos:A},$to:{pos:L}}=n.selection.ranges[T];h.setBlockType(A,L,e,t)}i(h.scrollIntoView())}return!0}}function pe(...e){return function(t,n,i){for(let u=0;u<e.length;u++)if(e[u](t,n,i))return!0;return!1}}let ye=pe(ot,X,it),Oe=pe(ot,It,Pt);const fe={Enter:pe(ut,Bt,Dt,(t,n)=>{let{$from:i,$to:u}=t.selection;if(t.selection instanceof C.qv&&t.selection.node.isBlock)return!(!i.parentOffset||!(0,g.Ax)(t.doc,i.pos)||(n&&n(t.tr.split(i.pos).scrollIntoView()),0));if(!i.parent.isBlock)return!1;if(n){let h=u.parentOffset==u.parent.content.size,T=t.tr;(t.selection instanceof C.Bs||t.selection instanceof C.C1)&&T.deleteSelection();let A=0==i.depth?null:Y(i.node(-1).contentMatchAt(i.indexAfter(-1))),L=e,N=L?[L]:h&&A?[{type:A}]:void 0,j=(0,g.Ax)(T.doc,T.mapping.map(i.pos),1,N);if(!N&&!j&&(0,g.Ax)(T.doc,T.mapping.map(i.pos),1,A?[{type:A}]:void 0)&&(A&&(N=[{type:A}]),j=!0),j&&(T.split(T.mapping.map(i.pos),1,N),!h&&!i.parentOffset&&i.parent.type!=A)){let q=T.mapping.map(i.before()),ht=T.doc.resolve(q);A&&i.node(-1).canReplaceWith(ht.index(),ht.index()+1,A)&&T.setNodeMarkup(T.mapping.map(i.before()),A)}n(T.scrollIntoView())}return!0}),"Mod-Enter":xt,Backspace:ye,"Mod-Backspace":ye,"Shift-Backspace":ye,Delete:Oe,"Mod-Delete":Oe,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new C.C1(e.doc))),!0)},Ke={"Ctrl-h":fe.Backspace,"Alt-Backspace":fe["Mod-Backspace"],"Ctrl-d":fe.Delete,"Ctrl-Alt-Backspace":fe["Mod-Delete"],"Alt-Delete":fe["Mod-Delete"],"Alt-d":fe["Mod-Delete"],"Ctrl-a":J,"Ctrl-e":Q};for(let e in fe)Ke[e]=fe[e];function gt(e){const{state:t,transaction:n}=e;let{selection:i}=n,{doc:u}=n,{storedMarks:h}=n;return me(Gt({},t),{apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),filterTransaction:t.filterTransaction,plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return h},get selection(){return i},get doc(){return u},get tr(){return i=n.selection,u=n.doc,h=n.storedMarks,n}})}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();class b{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:i}=this,{view:u}=n,{tr:h}=i,T=this.buildProps(h);return Object.fromEntries(Object.entries(t).map(([A,L])=>[A,(...j)=>{const q=L(...j)(T);return!h.getMeta("preventDispatch")&&!this.hasCustomState&&u.dispatch(h),q}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:i,editor:u,state:h}=this,{view:T}=u,A=[],L=!!t,N=t||h.tr,q=me(Gt({},Object.fromEntries(Object.entries(i).map(([ht,Rt])=>[ht,(...Vt)=>{const Xt=this.buildProps(N,n),qt=Rt(...Vt)(Xt);return A.push(qt),q}]))),{run:()=>(!L&&n&&!N.getMeta("preventDispatch")&&!this.hasCustomState&&T.dispatch(N),A.every(ht=>!0===ht))});return q}createCan(t){const{rawCommands:n,state:i}=this,h=t||i.tr,T=this.buildProps(h,!1),A=Object.fromEntries(Object.entries(n).map(([L,N])=>[L,(...j)=>N(...j)(me(Gt({},T),{dispatch:void 0}))]));return me(Gt({},A),{chain:()=>this.createChain(h,!1)})}buildProps(t,n=!0){const{rawCommands:i,editor:u,state:h}=this,{view:T}=u;h.storedMarks&&t.setStoredMarks(h.storedMarks);const A={tr:t,editor:u,view:T,state:gt({state:h,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(i).map(([L,N])=>[L,(...j)=>N(...j)(A)]))}};return A}}function I(e,t,n){return void 0===e.config[t]&&e.parent?I(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind(me(Gt({},n),{parent:e.parent?I(e.parent,t,n):null})):e.config[t]}function w(e){return{baseExtensions:e.filter(u=>"extension"===u.type),nodeExtensions:e.filter(u=>"node"===u.type),markExtensions:e.filter(u=>"mark"===u.type)}}function V(e){const t=[],{nodeExtensions:n,markExtensions:i}=w(e),u=[...n,...i],h={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(T=>{const L=I(T,"addGlobalAttributes",{name:T.name,options:T.options,storage:T.storage});L&&L().forEach(j=>{j.types.forEach(q=>{Object.entries(j.attributes).forEach(([ht,Rt])=>{t.push({type:q,name:ht,attribute:Gt(Gt({},h),Rt)})})})})}),u.forEach(T=>{const L=I(T,"addAttributes",{name:T.name,options:T.options,storage:T.storage});if(!L)return;const N=L();Object.entries(N).forEach(([j,q])=>{const ht=Gt(Gt({},h),q);"function"==typeof(null==ht?void 0:ht.default)&&(ht.default=ht.default()),(null==ht?void 0:ht.isRequired)&&void 0===(null==ht?void 0:ht.default)&&delete ht.default,t.push({type:T.name,name:j,attribute:ht})})}),t}function U(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function yt(...e){return e.filter(t=>!!t).reduce((t,n)=>{const i=Gt({},t);return Object.entries(n).forEach(([u,h])=>{i[u]=i[u]?"class"===u?[i[u],h].join(" "):"style"===u?[i[u],h].join("; "):h:h}),i},{})}function Nt(e,t){return t.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,i)=>yt(n,i),{})}function H(e){return"function"==typeof e}function a(e,t,...n){return H(e)?t?e.bind(t)(...n):e(...n):e}function p(e={}){return 0===Object.keys(e).length&&e.constructor===Object}function E(e){return"string"!=typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}function P(e,t){return e.style?e:me(Gt({},e),{getAttrs:n=>{const i=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===i)return!1;const u=t.reduce((h,T)=>{const A=T.attribute.parseHTML?T.attribute.parseHTML(n):E(n.getAttribute(T.name));return null==A?h:me(Gt({},h),{[T.name]:A})},{});return Gt(Gt({},i),u)}})}function k(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>("attrs"!==t||!p(n))&&null!=n))}function K(e,t){var n;const i=V(e),{nodeExtensions:u,markExtensions:h}=w(e),T=null===(n=u.find(N=>I(N,"topNode")))||void 0===n?void 0:n.name,A=Object.fromEntries(u.map(N=>{const j=i.filter(qt=>qt.type===N.name),q={name:N.name,options:N.options,storage:N.storage,editor:t},ht=e.reduce((qt,Se)=>{const Fe=I(Se,"extendNodeSchema",q);return Gt(Gt({},qt),Fe?Fe(N):{})},{}),Rt=k(me(Gt({},ht),{content:a(I(N,"content",q)),marks:a(I(N,"marks",q)),group:a(I(N,"group",q)),inline:a(I(N,"inline",q)),atom:a(I(N,"atom",q)),selectable:a(I(N,"selectable",q)),draggable:a(I(N,"draggable",q)),code:a(I(N,"code",q)),defining:a(I(N,"defining",q)),isolating:a(I(N,"isolating",q)),attrs:Object.fromEntries(j.map(qt=>{var Se;return[qt.name,{default:null===(Se=null==qt?void 0:qt.attribute)||void 0===Se?void 0:Se.default}]}))})),$t=a(I(N,"parseHTML",q));$t&&(Rt.parseDOM=$t.map(qt=>P(qt,j)));const Vt=I(N,"renderHTML",q);Vt&&(Rt.toDOM=qt=>Vt({node:qt,HTMLAttributes:Nt(qt,j)}));const Xt=I(N,"renderText",q);return Xt&&(Rt.toText=Xt),[N.name,Rt]})),L=Object.fromEntries(h.map(N=>{const j=i.filter(Xt=>Xt.type===N.name),q={name:N.name,options:N.options,storage:N.storage,editor:t},ht=e.reduce((Xt,qt)=>{const Se=I(qt,"extendMarkSchema",q);return Gt(Gt({},Xt),Se?Se(N):{})},{}),Rt=k(me(Gt({},ht),{inclusive:a(I(N,"inclusive",q)),excludes:a(I(N,"excludes",q)),group:a(I(N,"group",q)),spanning:a(I(N,"spanning",q)),code:a(I(N,"code",q)),attrs:Object.fromEntries(j.map(Xt=>{var qt;return[Xt.name,{default:null===(qt=null==Xt?void 0:Xt.attribute)||void 0===qt?void 0:qt.default}]}))})),$t=a(I(N,"parseHTML",q));$t&&(Rt.parseDOM=$t.map(Xt=>P(Xt,j)));const Vt=I(N,"renderHTML",q);return Vt&&(Rt.toDOM=Xt=>Vt({mark:Xt,HTMLAttributes:Nt(Xt,j)})),[N.name,Rt]}));return new D.V_({topNode:T,nodes:A,marks:L})}function at(e,t){return t.nodes[e]||t.marks[e]||null}function Ht(e,t){return Array.isArray(t)?t.some(n=>("string"==typeof n?n:n.name)===e.name):t}const te=(e,t=500)=>{let n="";const i=e.parentOffset;return e.parent.nodesBetween(Math.max(0,i-t),i,(u,h,T,A)=>{var L,N;n+=((null===(N=(L=u.type.spec).toText)||void 0===N?void 0:N.call(L,{node:u,pos:h,parent:T,index:A}))||u.textContent||"%leaf%").slice(0,Math.max(0,i-h))}),n};function ee(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class we{constructor(t){this.find=t.find,this.handler=t.handler}}function $(e){var t;const{editor:n,from:i,to:u,text:h,rules:T,plugin:A}=e,{view:L}=n;if(L.composing)return!1;const N=L.state.doc.resolve(i);if(N.parent.type.spec.code||(null===(t=N.nodeBefore||N.nodeAfter)||void 0===t?void 0:t.marks.find(ht=>ht.type.spec.code)))return!1;let j=!1;const q=te(N)+h;return T.forEach(ht=>{if(j)return;const Rt=((e,t)=>{if(ee(t))return t.exec(e);const n=t(e);if(!n)return null;const i=[n.text];return i.index=n.index,i.input=e,i.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(n.replaceWith)),i})(q,ht.find);if(!Rt)return;const $t=L.state.tr,Vt=gt({state:L.state,transaction:$t}),Xt={from:i-(Rt[0].length-h.length),to:u},{commands:qt,chain:Se,can:Fe}=new b({editor:n,state:Vt});null===ht.handler({state:Vt,range:Xt,match:Rt,commands:qt,chain:Se,can:Fe})||!$t.steps.length||($t.setMeta(A,{transform:$t,from:i,to:u,text:h}),L.dispatch($t),j=!0)}),j}function S(e){const{editor:t,rules:n}=e,i=new C.Sy({state:{init:()=>null,apply:(u,h)=>u.getMeta(i)||(u.selectionSet||u.docChanged?null:h)},props:{handleTextInput:(u,h,T,A)=>$({editor:t,from:h,to:T,text:A,rules:n,plugin:i}),handleDOMEvents:{compositionend:u=>(setTimeout(()=>{const{$cursor:h}=u.state.selection;h&&$({editor:t,from:h.pos,to:h.pos,text:"",rules:n,plugin:i})}),!1)},handleKeyDown(u,h){if("Enter"!==h.key)return!1;const{$cursor:T}=u.state.selection;return!!T&&$({editor:t,from:T.pos,to:T.pos,text:"\n",rules:n,plugin:i})}},isInputRules:!0});return i}function lt(e){return"number"==typeof e}class Tt{constructor(t){this.find=t.find,this.handler=t.handler}}function Ft(e){const{editor:t,rules:n}=e;let i=null,u=!1,h=!1;return n.map(A=>new C.Sy({view(L){const N=j=>{var q;i=(null===(q=L.dom.parentElement)||void 0===q?void 0:q.contains(j.target))?L.dom.parentElement:null};return window.addEventListener("dragstart",N),{destroy(){window.removeEventListener("dragstart",N)}}},props:{handleDOMEvents:{drop:L=>(h=i===L.dom.parentElement,!1),paste:(L,N)=>{var j;const q=null===(j=N.clipboardData)||void 0===j?void 0:j.getData("text/html");return u=!!(null==q?void 0:q.includes("data-pm-slice")),!1}}},appendTransaction:(L,N,j)=>{const q=L[0],ht="paste"===q.getMeta("uiEvent")&&!u,Rt="drop"===q.getMeta("uiEvent")&&!h;if(!ht&&!Rt)return;const $t=N.doc.content.findDiffStart(j.doc.content),Vt=N.doc.content.findDiffEnd(j.doc.content);if(!lt($t)||!Vt||$t===Vt.b)return;const Xt=j.tr,qt=gt({state:j,transaction:Xt});return function(e){const{editor:t,state:n,from:i,to:u,rule:h}=e,{commands:T,chain:A,can:L}=new b({editor:t,state:n}),N=[];return n.doc.nodesBetween(i,u,(q,ht)=>{if(!q.isTextblock||q.type.spec.code)return;const Rt=Math.max(i,ht),$t=Math.min(u,ht+q.content.size);((e,t)=>{if(ee(t))return[...e.matchAll(t)];const n=t(e);return n?n.map(i=>{const u=[i.text];return u.index=i.index,u.input=e,u.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),u.push(i.replaceWith)),u}):[]})(q.textBetween(Rt-ht,$t-ht,void 0,"\ufffc"),h.find).forEach(qt=>{if(void 0===qt.index)return;const Se=Rt+qt.index+1,Fe=Se+qt[0].length,ae={from:n.tr.mapping.map(Se),to:n.tr.mapping.map(Fe)},Ve=h.handler({state:n,range:ae,match:qt,commands:T,chain:A,can:L});N.push(Ve)})}),N.every(q=>null!==q)}({editor:t,state:qt,from:Math.max($t-1,0),to:Vt.b-1,rule:A})&&Xt.steps.length?Xt:void 0}}))}function Qt(e){const t=e.filter((n,i)=>e.indexOf(n)!==i);return[...new Set(t)]}class oe{constructor(t,n){this.splittableMarks=[],this.editor=n,this.extensions=oe.resolve(t),this.schema=K(this.extensions,n),this.extensions.forEach(i=>{var u;this.editor.extensionStorage[i.name]=i.storage;const h={name:i.name,options:i.options,storage:i.storage,editor:this.editor,type:at(i.name,this.schema)};"mark"===i.type&&(null===(u=a(I(i,"keepOnSplit",h)))||void 0===u||u)&&this.splittableMarks.push(i.name);const T=I(i,"onBeforeCreate",h);T&&this.editor.on("beforeCreate",T);const A=I(i,"onCreate",h);A&&this.editor.on("create",A);const L=I(i,"onUpdate",h);L&&this.editor.on("update",L);const N=I(i,"onSelectionUpdate",h);N&&this.editor.on("selectionUpdate",N);const j=I(i,"onTransaction",h);j&&this.editor.on("transaction",j);const q=I(i,"onFocus",h);q&&this.editor.on("focus",q);const ht=I(i,"onBlur",h);ht&&this.editor.on("blur",ht);const Rt=I(i,"onDestroy",h);Rt&&this.editor.on("destroy",Rt)})}static resolve(t){const n=oe.sort(oe.flatten(t)),i=Qt(n.map(u=>u.name));return i.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${i.map(u=>`'${u}'`).join(", ")}]. This can lead to issues.`),n}static flatten(t){return t.map(n=>{const u=I(n,"addExtensions",{name:n.name,options:n.options,storage:n.storage});return u?[n,...this.flatten(u())]:n}).flat(10)}static sort(t){return t.sort((i,u)=>{const h=I(i,"priority")||100,T=I(u,"priority")||100;return h>T?-1:h<T?1:0})}get commands(){return this.extensions.reduce((t,n)=>{const u=I(n,"addCommands",{name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:at(n.name,this.schema)});return u?Gt(Gt({},t),u()):t},{})}get plugins(){const{editor:t}=this,n=oe.sort([...this.extensions].reverse()),i=[],u=[],h=n.map(T=>{const A={name:T.name,options:T.options,storage:T.storage,editor:t,type:at(T.name,this.schema)},L=[],N=I(T,"addKeyboardShortcuts",A);let j={};if("mark"===T.type&&T.config.exitable&&(j.ArrowRight=()=>Hn.handleExit({editor:t,mark:T})),N){const Vt=Object.fromEntries(Object.entries(N()).map(([Xt,qt])=>[Xt,()=>qt({editor:t})]));j=Gt(Gt({},j),Vt)}const q=(0,y.h)(j);L.push(q);const ht=I(T,"addInputRules",A);Ht(T,t.options.enableInputRules)&&ht&&i.push(...ht());const Rt=I(T,"addPasteRules",A);Ht(T,t.options.enablePasteRules)&&Rt&&u.push(...Rt());const $t=I(T,"addProseMirrorPlugins",A);if($t){const Vt=$t();L.push(...Vt)}return L}).flat();return[S({editor:t,rules:i}),...Ft({editor:t,rules:u}),...h]}get attributes(){return V(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:n}=w(this.extensions);return Object.fromEntries(n.filter(i=>!!I(i,"addNodeView")).map(i=>{const u=this.attributes.filter(L=>L.type===i.name),h={name:i.name,options:i.options,storage:i.storage,editor:t,type:U(i.name,this.schema)},T=I(i,"addNodeView",h);return T?[i.name,(L,N,j,q)=>{const ht=Nt(L,u);return T()({editor:t,node:L,getPos:j,decorations:q,HTMLAttributes:ht,extension:i})}]:[]}))}}function se(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function le(e,t){const n=Gt({},e);return se(e)&&se(t)&&Object.keys(t).forEach(i=>{se(t[i])?i in e?n[i]=le(e[i],t[i]):Object.assign(n,{[i]:t[i]}):Object.assign(n,{[i]:t[i]})}),n}class ce{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Gt(Gt({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(I(this,"addOptions",{name:this.name}))),this.storage=a(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new ce(t)}configure(t={}){const n=this.extend();return n.options=le(this.options,t),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new ce(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=a(I(n,"addOptions",{name:n.name})),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}}function Re(e,t,n){const{from:i,to:u}=t,{blockSeparator:h="\n\n",textSerializers:T={}}=n||{};let A="",L=!0;return e.nodesBetween(i,u,(N,j,q,ht)=>{var Rt;const $t=null==T?void 0:T[N.type.name];$t?(N.isBlock&&!L&&(A+=h,L=!0),q&&(A+=$t({node:N,pos:j,parent:q,index:ht,range:t}))):N.isText?(A+=null===(Rt=null==N?void 0:N.text)||void 0===Rt?void 0:Rt.slice(Math.max(i,j)-j,u-j),L=!1):N.isBlock&&!L&&(A+=h,L=!0)}),A}function We(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}const an=ce.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new C.Sy({key:new C.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:i,selection:u}=t,{ranges:h}=u;return Re(i,{from:Math.min(...h.map(j=>j.$from.pos)),to:Math.max(...h.map(j=>j.$to.pos))},{textSerializers:We(n)})}}})]}});function rn(e,t,n={strict:!0}){const i=Object.keys(t);return!i.length||i.every(u=>n.strict?t[u]===e[u]:ee(t[u])?t[u].test(e[u]):t[u]===e[u])}function sn(e,t,n={}){return e.find(i=>i.type===t&&rn(i.attrs,n))}function _(e,t,n={}){return!!sn(e,t,n)}function v(e,t,n={}){if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if(e.parentOffset===i.offset&&0!==i.offset&&(i=e.parent.childBefore(e.parentOffset)),!i.node)return;const u=sn([...i.node.marks],t,n);if(!u)return;let h=i.index,T=e.start()+i.offset,A=h+1,L=T+i.node.nodeSize;for(sn([...i.node.marks],t,n);h>0&&u.isInSet(e.parent.child(h-1).marks);)h-=1,T-=e.parent.child(h).nodeSize;for(;A<e.parent.childCount&&_([...e.parent.child(A).marks],t,n);)L+=e.parent.child(A).nodeSize,A+=1;return{from:T,to:L}}function m(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function x(e){return e instanceof C.Bs}function R(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Z(e,t=null){if(!t)return null;const n=C.Y1.atStart(e),i=C.Y1.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return i;const u=n.from,h=i.to;return"all"===t?C.Bs.create(e,R(0,u,h),R(e.content.size,u,h)):C.Bs.create(e,R(t,u,h),R(t,u,h))}function W(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Ut(e){const t=`<body>${e}</body>`;return(new window.DOMParser).parseFromString(t,"text/html").body}function zt(e,t,n){if(n=Gt({slice:!0,parseOptions:{}},n),"object"==typeof e&&null!==e)try{return Array.isArray(e)&&e.length>0?D.HY.fromArray(e.map(i=>t.nodeFromJSON(i))):t.nodeFromJSON(e)}catch(i){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",i),zt("",t,n)}if("string"==typeof e){const i=D.aw.fromSchema(t);return n.slice?i.parseSlice(Ut(e),n.parseOptions).content:i.parse(Ut(e),n.parseOptions)}return zt("",t,n)}function jt(e,t,n){const i=e.steps.length-1;if(i<t)return;const u=e.steps[i];if(!(u instanceof g.Pu||u instanceof g.FC))return;let T=0;e.mapping.maps[i].forEach((A,L,N,j)=>{0===T&&(T=j)}),e.setSelection(C.Y1.near(e.doc.resolve(T),n))}function De(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function de(e,t,n={}){const{from:i,to:u,empty:h}=e.selection,T=t?U(t,e.schema):null,A=[];e.doc.nodesBetween(i,u,(q,ht)=>{if(q.isText)return;const Rt=Math.max(i,ht),$t=Math.min(u,ht+q.nodeSize);A.push({node:q,from:Rt,to:$t})});const L=u-i,N=A.filter(q=>!T||T.name===q.node.type.name).filter(q=>rn(q.node.attrs,n,{strict:!1}));return h?!!N.length:N.reduce((q,ht)=>q+ht.to-ht.from,0)>=L}function hn(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Ge(e,t){const n="string"==typeof t?[t]:t;return Object.keys(e).reduce((i,u)=>(n.includes(u)||(i[u]=e[u]),i),{})}function tn(e,t,n={}){return zt(e,t,{slice:!1,parseOptions:n})}function wn(e,t){const n=new g.wx(e);return t.forEach(i=>{i.steps.forEach(u=>{n.step(u)})}),n}function no(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function vo(e,t){const n=[];return e.descendants((i,u)=>{t(i)&&n.push({node:i,pos:u})}),n}function Co(e,t,n){const i=[];return e.nodesBetween(t.from,t.to,(u,h)=>{n(u)&&i.push({node:u,pos:h})}),i}function oo(e,t){for(let n=e.depth;n>0;n-=1){const i=e.node(n);if(t(i))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:i}}}function Rn(e){return t=>oo(t.$from,e)}function Kn(e,t){const n=D.PW.fromSchema(t).serializeFragment(e),u=document.implementation.createHTMLDocument().createElement("div");return u.appendChild(n),u.innerHTML}function Jn(e,t){return K(oe.resolve(e),t)}function io(e,t){const n=Jn(t);return Kn(D.NB.fromJSON(n,e).content,n)}function Mo(e,t){const n=Jn(t),i=Ut(e);return D.aw.fromSchema(n).parse(i).toJSON()}function $n(e,t){return Re(e,{from:0,to:e.content.size},t)}function ro(e,t,n){const{blockSeparator:i="\n\n",textSerializers:u={}}=n||{},h=Jn(t);return $n(D.NB.fromJSON(h,e),{blockSeparator:i,textSerializers:Gt(Gt({},We(h)),u)})}function Xn(e,t){const n=m(t,e.schema),{from:i,to:u,empty:h}=e.selection,T=[];h?(e.storedMarks&&T.push(...e.storedMarks),T.push(...e.selection.$head.marks())):e.doc.nodesBetween(i,u,L=>{T.push(...L.marks)});const A=T.find(L=>L.type.name===n.name);return A?Gt({},A.attrs):{}}function Wn(e,t){const n=U(t,e.schema),{from:i,to:u}=e.selection,h=[];e.doc.nodesBetween(i,u,A=>{h.push(A)});const T=h.reverse().find(A=>A.type.name===n.name);return T?Gt({},T.attrs):{}}function so(e,t){const n=hn("string"==typeof t?t:t.name,e.schema);return"node"===n?Wn(e,t):"mark"===n?Xn(e,t):{}}function An(e,t=JSON.stringify){const n={};return e.filter(i=>{const u=t(i);return!Object.prototype.hasOwnProperty.call(n,u)&&(n[u]=!0)})}function yo(e){const{mapping:t,steps:n}=e,i=[];return t.maps.forEach((u,h)=>{const T=[];if(u.ranges.length)u.forEach((A,L)=>{T.push({from:A,to:L})});else{const{from:A,to:L}=n[h];if(void 0===A||void 0===L)return;T.push({from:A,to:L})}T.forEach(({from:A,to:L})=>{const N=t.slice(h).map(A,-1),j=t.slice(h).map(L),q=t.invert().map(N,-1),ht=t.invert().map(j);i.push({oldRange:{from:q,to:ht},newRange:{from:N,to:j}})})}),function(e){const t=An(e);return 1===t.length?t:t.filter((n,i)=>!t.filter((h,T)=>T!==i).some(h=>n.oldRange.from>=h.oldRange.from&&n.oldRange.to<=h.oldRange.to&&n.newRange.from>=h.newRange.from&&n.newRange.to<=h.newRange.to))}(i)}function Ln(e,t=0){const i=e.type===e.type.schema.topNodeType?0:1,u=t,h=u+e.nodeSize,T=e.marks.map(N=>{const j={type:N.type.name};return Object.keys(N.attrs).length&&(j.attrs=Gt({},N.attrs)),j}),A=Gt({},e.attrs),L={type:e.type.name,from:u,to:h};return Object.keys(A).length&&(L.attrs=A),T.length&&(L.marks=T),e.content.childCount&&(L.content=[],e.forEach((N,j)=>{var q;null===(q=L.content)||void 0===q||q.push(Ln(N,t+j+i))})),e.text&&(L.text=e.text),L}function qn(e,t,n){const i=[];return e===t?n.resolve(e).marks().forEach(u=>{const T=v(n.resolve(e-1),u.type);!T||i.push(Gt({mark:u},T))}):n.nodesBetween(e,t,(u,h)=>{i.push(...u.marks.map(T=>({from:h,to:h+u.nodeSize,mark:T})))}),i}function Nn(e,t,n){return Object.fromEntries(Object.entries(n).filter(([i])=>{const u=e.find(h=>h.type===t&&h.name===i);return!!u&&u.attribute.keepOnSplit}))}function yn(e,t,n={}){const{empty:i,ranges:u}=e.selection,h=t?m(t,e.schema):null;if(i)return!!(e.storedMarks||e.selection.$from.marks()).filter(q=>!h||h.name===q.type.name).find(q=>rn(q.attrs,n,{strict:!1}));let T=0;const A=[];if(u.forEach(({$from:q,$to:ht})=>{const Rt=q.pos,$t=ht.pos;e.doc.nodesBetween(Rt,$t,(Vt,Xt)=>{if(!Vt.isText&&!Vt.marks.length)return;const qt=Math.max(Rt,Xt),Se=Math.min($t,Xt+Vt.nodeSize);T+=Se-qt,A.push(...Vt.marks.map(ae=>({mark:ae,from:qt,to:Se})))})}),0===T)return!1;const L=A.filter(q=>!h||h.name===q.mark.type.name).filter(q=>rn(q.mark.attrs,n,{strict:!1})).reduce((q,ht)=>q+ht.to-ht.from,0),N=A.filter(q=>!h||q.mark.type!==h&&q.mark.type.excludes(h)).reduce((q,ht)=>q+ht.to-ht.from,0);return(L>0?L+N:L)>=T}function Zn(e,t,n={}){if(!t)return de(e,null,n)||yn(e,null,n);const i=hn(t,e.schema);return"node"===i?de(e,t,n):"mark"===i&&yn(e,t,n)}function dn(e,t){const{nodeExtensions:n}=w(t),i=n.find(T=>T.name===e);if(!i)return!1;const h=a(I(i,"group",{name:i.name,options:i.options,storage:i.storage}));return"string"==typeof h&&h.split(" ").includes("list")}function Yn(e){var t;const n=null===(t=e.type.createAndFill())||void 0===t?void 0:t.toJSON(),i=e.toJSON();return JSON.stringify(n)===JSON.stringify(i)}function on(e){return e instanceof C.qv}function Bn(e,t,n){const u=e.state.doc.content.size,h=R(t,0,u),T=R(n,0,u),A=e.coordsAtPos(h),L=e.coordsAtPos(T,-1),N=Math.min(A.top,L.top),j=Math.max(A.bottom,L.bottom),q=Math.min(A.left,L.left),ht=Math.max(A.right,L.right),qt={top:N,bottom:j,left:q,right:ht,width:ht-q,height:j-N,x:q,y:N};return me(Gt({},qt),{toJSON:()=>qt})}function to(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const i=n.filter(u=>null==t?void 0:t.includes(u.type.name));e.tr.ensureMarks(i)}}const _n=(e,t)=>{const n=Rn(T=>T.type===t)(e.selection);if(!n)return!0;const i=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===i)return!0;const u=e.doc.nodeAt(i);return n.node.type===(null==u?void 0:u.type)&&(0,g.Mn)(e.doc,n.pos)&&e.join(n.pos),!0},Fn=(e,t)=>{const n=Rn(T=>T.type===t)(e.selection);if(!n)return!0;const i=e.doc.resolve(n.start).after(n.depth);if(void 0===i)return!0;const u=e.doc.nodeAt(i);return n.node.type===(null==u?void 0:u.type)&&(0,g.Mn)(e.doc,i)&&e.join(i),!0};var Po=Object.freeze({__proto__:null,blur:()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),null===(n=null==window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())}),!0),clearContent:(e=!1)=>({commands:t})=>t.setContent("",e),clearNodes:()=>({state:e,tr:t,dispatch:n})=>{const{selection:i}=t,{ranges:u}=i;return n&&u.forEach(({$from:h,$to:T})=>{e.doc.nodesBetween(h.pos,T.pos,(A,L)=>{if(A.type.isText)return;const{doc:N,mapping:j}=t,q=N.resolve(j.map(L)),ht=N.resolve(j.map(L+A.nodeSize)),Rt=q.blockRange(ht);if(!Rt)return;const $t=(0,g.k9)(Rt);if(A.type.isTextblock){const{defaultType:Vt}=q.parent.contentMatchAt(q.index());t.setNodeMarkup(Rt.start,Vt)}($t||0===$t)&&t.lift(Rt,$t)})}),!0},command:e=>t=>e(t),createParagraphNear:()=>({state:e,dispatch:t})=>Bt(e,t),deleteCurrentNode:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,i=n.$anchor.node();if(i.content.size>0)return!1;const u=e.selection.$anchor;for(let h=u.depth;h>0;h-=1)if(u.node(h).type===i.type){if(t){const A=u.before(h),L=u.after(h);e.delete(A,L).scrollIntoView()}return!0}return!1},deleteNode:e=>({tr:t,state:n,dispatch:i})=>{const u=U(e,n.schema),h=t.selection.$anchor;for(let T=h.depth;T>0;T-=1)if(h.node(T).type===u){if(i){const L=h.before(T),N=h.after(T);t.delete(L,N).scrollIntoView()}return!0}return!1},deleteRange:e=>({tr:t,dispatch:n})=>{const{from:i,to:u}=e;return n&&t.delete(i,u),!0},deleteSelection:()=>({state:e,dispatch:t})=>ot(e,t),enter:()=>({commands:e})=>e.keyboardShortcut("Enter"),exitCode:()=>({state:e,dispatch:t})=>xt(e,t),extendMarkRange:(e,t={})=>({tr:n,state:i,dispatch:u})=>{const h=m(e,i.schema),{doc:T,selection:A}=n,{$from:L,from:N,to:j}=A;if(u){const q=v(L,h,t);if(q&&q.from<=N&&q.to>=j){const ht=C.Bs.create(T,q.from,q.to);n.setSelection(ht)}}return!0},first:e=>t=>{const n="function"==typeof e?e(t):e;for(let i=0;i<n.length;i+=1)if(n[i](t))return!0;return!1},focus:(e=null,t={})=>({editor:n,view:i,tr:u,dispatch:h})=>{t=Gt({scrollIntoView:!0},t);const T=()=>{W()&&i.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(i.focus(),(null==t?void 0:t.scrollIntoView)&&n.commands.scrollIntoView())})};if(i.hasFocus()&&null===e||!1===e)return!0;if(h&&null===e&&!x(n.state.selection))return T(),!0;const A=Z(u.doc,e)||n.state.selection,L=n.state.selection.eq(A);return h&&(L||u.setSelection(A),L&&u.storedMarks&&u.setStoredMarks(u.storedMarks),T()),!0},forEach:(e,t)=>n=>e.every((i,u)=>t(i,me(Gt({},n),{index:u}))),insertContent:(e,t)=>({tr:n,commands:i})=>i.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),insertContentAt:(e,t,n)=>({tr:i,dispatch:u,editor:h})=>{if(u){n=Gt({parseOptions:{},updateSelection:!0},n);const T=zt(t,h.schema,{parseOptions:Gt({preserveWhitespace:"full"},n.parseOptions)});if("<>"===T.toString())return!0;let{from:A,to:L}="number"==typeof e?{from:e,to:e}:e,N=!0,j=!0;if(((e=>e.toString().startsWith("<"))(T)?T:[T]).forEach(ht=>{ht.check(),N=!!N&&ht.isText&&0===ht.marks.length,j=!!j&&ht.isBlock}),A===L&&j){const{parent:ht}=i.doc.resolve(A);ht.isTextblock&&!ht.type.spec.code&&!ht.childCount&&(A-=1,L+=1)}N?Array.isArray(t)?i.insertText(t.map(ht=>ht.text||"").join(""),A,L):i.insertText("object"==typeof t&&t&&t.text?t.text:t,A,L):i.replaceWith(A,L,T),n.updateSelection&&jt(i,i.steps.length-1,-1)}return!0},joinUp:()=>({state:e,dispatch:t})=>((e,t)=>{let u,n=e.selection,i=n instanceof C.qv;if(i){if(n.node.isTextblock||!(0,g.Mn)(e.doc,n.from))return!1;u=n.from}else if(u=(0,g.GJ)(e.doc,n.from,-1),null==u)return!1;if(t){let h=e.tr.join(u);i&&h.setSelection(C.qv.create(h.doc,u-e.doc.resolve(u).nodeBefore.nodeSize)),t(h.scrollIntoView())}return!0})(e,t),joinDown:()=>({state:e,dispatch:t})=>((e,t)=>{let i,n=e.selection;if(n instanceof C.qv){if(n.node.isTextblock||!(0,g.Mn)(e.doc,n.to))return!1;i=n.to}else if(i=(0,g.GJ)(e.doc,n.to,1),null==i)return!1;return t&&t(e.tr.join(i).scrollIntoView()),!0})(e,t),joinBackward:()=>({state:e,dispatch:t})=>X(e,t),joinForward:()=>({state:e,dispatch:t})=>It(e,t),keyboardShortcut:e=>({editor:t,view:n,tr:i,dispatch:u})=>{const h=function(e){const t=e.split(/-(?!$)/);let i,u,h,T,n=t[t.length-1];"Space"===n&&(n=" ");for(let A=0;A<t.length-1;A+=1){const L=t[A];if(/^(cmd|meta|m)$/i.test(L))T=!0;else if(/^a(lt)?$/i.test(L))i=!0;else if(/^(c|ctrl|control)$/i.test(L))u=!0;else if(/^s(hift)?$/i.test(L))h=!0;else{if(!/^mod$/i.test(L))throw new Error(`Unrecognized modifier name: ${L}`);W()||De()?T=!0:u=!0}}return i&&(n=`Alt-${n}`),u&&(n=`Ctrl-${n}`),T&&(n=`Meta-${n}`),h&&(n=`Shift-${n}`),n}(e).split(/-(?!$)/),T=h.find(N=>!["Alt","Ctrl","Meta","Shift"].includes(N)),A=new KeyboardEvent("keydown",{key:"Space"===T?" ":T,altKey:h.includes("Alt"),ctrlKey:h.includes("Ctrl"),metaKey:h.includes("Meta"),shiftKey:h.includes("Shift"),bubbles:!0,cancelable:!0}),L=t.captureTransaction(()=>{n.someProp("handleKeyDown",N=>N(n,A))});return null==L||L.steps.forEach(N=>{const j=N.map(i.mapping);j&&u&&i.maybeStep(j)}),!0},lift:(e,t={})=>({state:n,dispatch:i})=>!!de(n,U(e,n.schema),t)&&((e,t)=>{let{$from:n,$to:i}=e.selection,u=n.blockRange(i),h=u&&(0,g.k9)(u);return null!=h&&(t&&t(e.tr.lift(u,h).scrollIntoView()),!0)})(n,i),liftEmptyBlock:()=>({state:e,dispatch:t})=>Dt(e,t),liftListItem:e=>({state:t,dispatch:n})=>function(e){return function(t,n){let{$from:i,$to:u}=t.selection,h=i.blockRange(u,T=>T.childCount>0&&T.firstChild.type==e);return!!h&&(!n||(i.node(h.depth-1).type==e?function(e,t,n,i){let u=e.tr,h=i.end,T=i.$to.end(i.depth);h<T&&(u.step(new g.FC(h-1,T,h,T,new D.p2(D.HY.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new D.Ts(u.doc.resolve(i.$from.pos),u.doc.resolve(T),i.depth));const A=(0,g.k9)(i);if(null==A)return!1;u.lift(i,A);let L=u.mapping.map(h,-1)-1;return(0,g.Mn)(u.doc,L)&&u.join(L),t(u.scrollIntoView()),!0}(t,n,e,h):function(e,t,n){let i=e.tr,u=n.parent;for(let Rt=n.end,$t=n.endIndex-1,Vt=n.startIndex;$t>Vt;$t--)Rt-=u.child($t).nodeSize,i.delete(Rt-1,Rt+1);let h=i.doc.resolve(n.start),T=h.nodeAfter;if(i.mapping.map(n.end)!=n.start+h.nodeAfter.nodeSize)return!1;let A=0==n.startIndex,L=n.endIndex==u.childCount,N=h.node(-1),j=h.index(-1);if(!N.canReplace(j+(A?0:1),j+1,T.content.append(L?D.HY.empty:D.HY.from(u))))return!1;let q=h.pos,ht=q+T.nodeSize;return i.step(new g.FC(q-(A?1:0),ht+(L?1:0),q+1,ht-1,new D.p2((A?D.HY.empty:D.HY.from(u.copy(D.HY.empty))).append(L?D.HY.empty:D.HY.from(u.copy(D.HY.empty))),A?0:1,L?0:1),A?0:1)),t(i.scrollIntoView()),!0}(t,n,h)))}}(U(e,t.schema))(t,n),newlineInCode:()=>({state:e,dispatch:t})=>ut(e,t),resetAttributes:(e,t)=>({tr:n,state:i,dispatch:u})=>{let h=null,T=null;const A=hn("string"==typeof e?e:e.name,i.schema);return!!A&&("node"===A&&(h=U(e,i.schema)),"mark"===A&&(T=m(e,i.schema)),u&&n.selection.ranges.forEach(L=>{i.doc.nodesBetween(L.$from.pos,L.$to.pos,(N,j)=>{h&&h===N.type&&n.setNodeMarkup(j,void 0,Ge(N.attrs,t)),T&&N.marks.length&&N.marks.forEach(q=>{T===q.type&&n.addMark(j,j+N.nodeSize,T.create(Ge(q.attrs,t)))})})}),!0)},scrollIntoView:()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),selectAll:()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size}),selectNodeBackward:()=>({state:e,dispatch:t})=>it(e,t),selectNodeForward:()=>({state:e,dispatch:t})=>Pt(e,t),selectParentNode:()=>({state:e,dispatch:t})=>((e,t)=>{let u,{$from:n,to:i}=e.selection,h=n.sharedDepth(i);return 0!=h&&(u=n.before(h),t&&t(e.tr.setSelection(C.qv.create(e.doc,u))),!0)})(e,t),selectTextblockEnd:()=>({state:e,dispatch:t})=>Q(e,t),selectTextblockStart:()=>({state:e,dispatch:t})=>J(e,t),setContent:(e,t=!1,n={})=>({tr:i,editor:u,dispatch:h})=>{const{doc:T}=i,A=tn(e,u.schema,n);return h&&i.replaceWith(0,T.content.size,A).setMeta("preventUpdate",!t),!0},setMark:(e,t={})=>({tr:n,state:i,dispatch:u})=>{const{selection:h}=n,{empty:T,ranges:A}=h,L=m(e,i.schema);if(u)if(T){const N=Xn(i,L);n.addStoredMark(L.create(Gt(Gt({},N),t)))}else A.forEach(N=>{const j=N.$from.pos,q=N.$to.pos;i.doc.nodesBetween(j,q,(ht,Rt)=>{const $t=Math.max(Rt,j),Vt=Math.min(Rt+ht.nodeSize,q);ht.marks.find(qt=>qt.type===L)?ht.marks.forEach(qt=>{L===qt.type&&n.addMark($t,Vt,L.create(Gt(Gt({},qt.attrs),t)))}):n.addMark($t,Vt,L.create(t))})});return function(e,t,n){var i;const{selection:u}=t;let h=null;if(x(u)&&(h=u.$cursor),h){const A=null!==(i=e.storedMarks)&&void 0!==i?i:h.marks();return!!n.isInSet(A)||!A.some(L=>L.type.excludes(n))}const{ranges:T}=u;return T.some(({$from:A,$to:L})=>{let N=0===A.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(A.pos,L.pos,(j,q,ht)=>{if(N)return!1;if(j.isInline){const Rt=!ht||ht.type.allowsMarkType(n),$t=!!n.isInSet(j.marks)||!j.marks.some(Vt=>Vt.type.excludes(n));N=Rt&&$t}return!N}),N})}(i,n,L)},setMeta:(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),setNode:(e,t={})=>({state:n,dispatch:i,chain:u})=>{const h=U(e,n.schema);return h.isTextblock?u().command(({commands:T})=>!!Lt(h,t)(n)||T.clearNodes()).command(({state:T})=>Lt(h,t)(T,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:i}=t,u=R(e,0,i.content.size),h=C.qv.create(i,u);t.setSelection(h)}return!0},setTextSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:i}=t,{from:u,to:h}="number"==typeof e?{from:e,to:e}:e,T=C.Bs.atStart(i).from,A=C.Bs.atEnd(i).to,L=R(u,T,A),N=R(h,T,A),j=C.Bs.create(i,L,N);t.setSelection(j)}return!0},sinkListItem:e=>({state:t,dispatch:n})=>function(e){return function(t,n){let{$from:i,$to:u}=t.selection,h=i.blockRange(u,N=>N.childCount>0&&N.firstChild.type==e);if(!h)return!1;let T=h.startIndex;if(0==T)return!1;let A=h.parent,L=A.child(T-1);if(L.type!=e)return!1;if(n){let N=L.lastChild&&L.lastChild.type==A.type,j=D.HY.from(N?e.create():null),q=new D.p2(D.HY.from(e.create(null,D.HY.from(A.type.create(null,j)))),N?3:1,0),ht=h.start,Rt=h.end;n(t.tr.step(new g.FC(ht-(N?3:1),Rt,ht,Rt,q,1,!0)).scrollIntoView())}return!0}}(U(e,t.schema))(t,n),splitBlock:({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:i,editor:u})=>{const{selection:h,doc:T}=t,{$from:A,$to:L}=h,j=Nn(u.extensionManager.attributes,A.node().type.name,A.node().attrs);if(h instanceof C.qv&&h.node.isBlock)return!(!A.parentOffset||!(0,g.Ax)(T,A.pos)||(i&&(e&&to(n,u.extensionManager.splittableMarks),t.split(A.pos).scrollIntoView()),0));if(!A.parent.isBlock)return!1;if(i){const q=L.parentOffset===L.parent.content.size;h instanceof C.Bs&&t.deleteSelection();const ht=0===A.depth?void 0:no(A.node(-1).contentMatchAt(A.indexAfter(-1)));let Rt=q&&ht?[{type:ht,attrs:j}]:void 0,$t=(0,g.Ax)(t.doc,t.mapping.map(A.pos),1,Rt);if(!Rt&&!$t&&(0,g.Ax)(t.doc,t.mapping.map(A.pos),1,ht?[{type:ht}]:void 0)&&($t=!0,Rt=ht?[{type:ht,attrs:j}]:void 0),$t&&(t.split(t.mapping.map(A.pos),1,Rt),ht&&!q&&!A.parentOffset&&A.parent.type!==ht)){const Vt=t.mapping.map(A.before()),Xt=t.doc.resolve(Vt);A.node(-1).canReplaceWith(Xt.index(),Xt.index()+1,ht)&&t.setNodeMarkup(t.mapping.map(A.before()),ht)}e&&to(n,u.extensionManager.splittableMarks),t.scrollIntoView()}return!0},splitListItem:e=>({tr:t,state:n,dispatch:i,editor:u})=>{var h;const T=U(e,n.schema),{$from:A,$to:L}=n.selection,N=n.selection.node;if(N&&N.isBlock||A.depth<2||!A.sameParent(L))return!1;const j=A.node(-1);if(j.type!==T)return!1;const q=u.extensionManager.attributes;if(0===A.parent.content.size&&A.node(-1).childCount===A.indexAfter(-1)){if(2===A.depth||A.node(-3).type!==T||A.index(-2)!==A.node(-2).childCount-1)return!1;if(i){let Xt=D.HY.empty;const qt=A.index(-1)?1:A.index(-2)?2:3;for(let On=A.depth-qt;On>=A.depth-3;On-=1)Xt=D.HY.from(A.node(On).copy(Xt));const Se=A.indexAfter(-1)<A.node(-2).childCount?1:A.indexAfter(-2)<A.node(-3).childCount?2:3,Fe=Nn(q,A.node().type.name,A.node().attrs),ae=(null===(h=T.contentMatch.defaultType)||void 0===h?void 0:h.createAndFill(Fe))||void 0;Xt=Xt.append(D.HY.from(T.createAndFill(null,ae)||void 0));const Ve=A.before(A.depth-(qt-1));t.replace(Ve,A.after(-Se),new D.p2(Xt,4-qt,0));let ln=-1;t.doc.nodesBetween(Ve,t.doc.content.size,(On,No)=>{if(ln>-1)return!1;On.isTextblock&&0===On.content.size&&(ln=No+1)}),ln>-1&&t.setSelection(C.Bs.near(t.doc.resolve(ln))),t.scrollIntoView()}return!0}const ht=L.pos===A.end()?j.contentMatchAt(0).defaultType:null,Rt=Nn(q,j.type.name,j.attrs),$t=Nn(q,A.node().type.name,A.node().attrs);t.delete(A.pos,L.pos);const Vt=ht?[{type:T,attrs:Rt},{type:ht,attrs:$t}]:[{type:T,attrs:Rt}];if(!(0,g.Ax)(t.doc,A.pos,2))return!1;if(i){const{selection:Xt,storedMarks:qt}=n,{splittableMarks:Se}=u.extensionManager,Fe=qt||Xt.$to.parentOffset&&Xt.$from.marks();if(t.split(A.pos,2,Vt).scrollIntoView(),!Fe||!i)return!0;const ae=Fe.filter(Ve=>Se.includes(Ve.type.name));t.ensureMarks(ae)}return!0},toggleList:(e,t,n,i={})=>({editor:u,tr:h,state:T,dispatch:A,chain:L,commands:N,can:j})=>{const{extensions:q,splittableMarks:ht}=u.extensionManager,Rt=U(e,T.schema),$t=U(t,T.schema),{selection:Vt,storedMarks:Xt}=T,{$from:qt,$to:Se}=Vt,Fe=qt.blockRange(Se),ae=Xt||Vt.$to.parentOffset&&Vt.$from.marks();if(!Fe)return!1;const Ve=Rn(ln=>dn(ln.type.name,q))(Vt);if(Fe.depth>=1&&Ve&&Fe.depth-Ve.depth<=1){if(Ve.node.type===Rt)return N.liftListItem($t);if(dn(Ve.node.type.name,q)&&Rt.validContent(Ve.node.content)&&A)return L().command(()=>(h.setNodeMarkup(Ve.pos,Rt),!0)).command(()=>_n(h,Rt)).command(()=>Fn(h,Rt)).run()}return n&&ae&&A?L().command(()=>{const ln=j().wrapInList(Rt,i),On=ae.filter(No=>ht.includes(No.type.name));return h.ensureMarks(On),!!ln||N.clearNodes()}).wrapInList(Rt,i).command(()=>_n(h,Rt)).command(()=>Fn(h,Rt)).run():L().command(()=>!!j().wrapInList(Rt,i)||N.clearNodes()).wrapInList(Rt,i).command(()=>_n(h,Rt)).command(()=>Fn(h,Rt)).run()},toggleMark:(e,t={},n={})=>({state:i,commands:u})=>{const{extendEmptyMarkRange:h=!1}=n,T=m(e,i.schema);return yn(i,T,t)?u.unsetMark(T,{extendEmptyMarkRange:h}):u.setMark(T,t)},toggleNode:(e,t,n={})=>({state:i,commands:u})=>{const h=U(e,i.schema),T=U(t,i.schema);return de(i,h,n)?u.setNode(T):u.setNode(h,n)},toggleWrap:(e,t={})=>({state:n,commands:i})=>{const u=U(e,n.schema);return de(n,u,t)?i.lift(u):i.wrapIn(u,t)},undoInputRule:()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let i=0;i<n.length;i+=1){const u=n[i];let h;if(u.spec.isInputRules&&(h=u.getState(e))){if(t){const T=e.tr,A=h.transform;for(let L=A.steps.length-1;L>=0;L-=1)T.step(A.steps[L].invert(A.docs[L]));if(h.text){const L=T.doc.resolve(h.from).marks();T.replaceWith(h.from,h.to,e.schema.text(h.text,L))}else T.delete(h.from,h.to)}return!0}}return!1},unsetAllMarks:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:i,ranges:u}=n;return i||t&&u.forEach(h=>{e.removeMark(h.$from.pos,h.$to.pos)}),!0},unsetMark:(e,t={})=>({tr:n,state:i,dispatch:u})=>{var h;const{extendEmptyMarkRange:T=!1}=t,{selection:A}=n,L=m(e,i.schema),{$from:N,empty:j,ranges:q}=A;if(!u)return!0;if(j&&T){let{from:ht,to:Rt}=A;const $t=null===(h=N.marks().find(Xt=>Xt.type===L))||void 0===h?void 0:h.attrs,Vt=v(N,L,$t);Vt&&(ht=Vt.from,Rt=Vt.to),n.removeMark(ht,Rt,L)}else q.forEach(ht=>{n.removeMark(ht.$from.pos,ht.$to.pos,L)});return n.removeStoredMark(L),!0},updateAttributes:(e,t={})=>({tr:n,state:i,dispatch:u})=>{let h=null,T=null;const A=hn("string"==typeof e?e:e.name,i.schema);return!!A&&("node"===A&&(h=U(e,i.schema)),"mark"===A&&(T=m(e,i.schema)),u&&n.selection.ranges.forEach(L=>{const N=L.$from.pos,j=L.$to.pos;i.doc.nodesBetween(N,j,(q,ht)=>{h&&h===q.type&&n.setNodeMarkup(ht,void 0,Gt(Gt({},q.attrs),t)),T&&q.marks.length&&q.marks.forEach(Rt=>{if(T===Rt.type){const $t=Math.max(ht,N),Vt=Math.min(ht+q.nodeSize,j);n.addMark($t,Vt,T.create(Gt(Gt({},Rt.attrs),t)))}})})}),!0)},wrapIn:(e,t={})=>({state:n,dispatch:i})=>function(e,t=null){return function(n,i){let{$from:u,$to:h}=n.selection,T=u.blockRange(h),A=T&&(0,g.nd)(T,e,t);return!!A&&(i&&i(n.tr.wrap(T,A).scrollIntoView()),!0)}}(U(e,n.schema),t)(n,i),wrapInList:(e,t={})=>({state:n,dispatch:i})=>function(e,t=null){return function(n,i){let{$from:u,$to:h}=n.selection,T=u.blockRange(h),A=!1,L=T;if(!T)return!1;if(T.depth>=2&&u.node(T.depth-1).type.compatibleContent(e)&&0==T.startIndex){if(0==u.index(T.depth-1))return!1;let j=n.doc.resolve(T.start-2);L=new D.Ts(j,j,T.depth),T.endIndex<T.parent.childCount&&(T=new D.Ts(u,n.doc.resolve(h.end(T.depth)),T.depth)),A=!0}let N=(0,g.nd)(L,e,t,T);return!!N&&(i&&i(function(e,t,n,i,u){let h=D.HY.empty;for(let j=n.length-1;j>=0;j--)h=D.HY.from(n[j].type.create(n[j].attrs,h));e.step(new g.FC(t.start-(i?2:0),t.end,t.start,t.end,new D.p2(h,0,0),n.length,!0));let T=0;for(let j=0;j<n.length;j++)n[j].type==u&&(T=j+1);let A=n.length-T,L=t.start+n.length-(i?2:0),N=t.parent;for(let j=t.startIndex,q=t.endIndex,ht=!0;j<q;j++,ht=!1)!ht&&(0,g.Ax)(e.doc,L,A)&&(e.split(L,A),L+=2*A),L+=N.child(j).nodeSize;return e}(n.tr,T,N,A,e).scrollIntoView()),!0)}}(U(e,n.schema),t)(n,i)});const So=ce.create({name:"commands",addCommands:()=>Gt({},Po)}),Io=ce.create({name:"editable",addProseMirrorPlugins(){return[new C.Sy({key:new C.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),ko=ce.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new C.Sy({key:new C.H$("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const i=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1},blur:(t,n)=>{e.isFocused=!1;const i=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1}}}})]}}),uo=ce.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:T})=>[()=>T.undoInputRule(),()=>T.command(({tr:A})=>{const{selection:L,doc:N}=A,{empty:j,$anchor:q}=L,{pos:ht,parent:Rt}=q,$t=C.Y1.atStart(N).from===ht;return!(!(j&&$t&&Rt.type.isTextblock)||Rt.textContent.length)&&T.clearNodes()}),()=>T.deleteSelection(),()=>T.joinBackward(),()=>T.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:T})=>[()=>T.deleteSelection(),()=>T.deleteCurrentNode(),()=>T.joinForward(),()=>T.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:T})=>[()=>T.newlineInCode(),()=>T.createParagraphNear(),()=>T.liftEmptyBlock(),()=>T.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},u=Gt({},i),h=me(Gt({},i),{"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return W()||De()?h:u},addProseMirrorPlugins(){return[new C.Sy({key:new C.H$("clearDocument"),appendTransaction:(e,t,n)=>{if(!e.some($t=>$t.docChanged)||t.doc.eq(n.doc))return;const{empty:u,from:h,to:T}=t.selection,A=C.Y1.atStart(t.doc).from,L=C.Y1.atEnd(t.doc).to;if(u||h!==A||T!==L||0!==n.doc.textBetween(0,n.doc.content.size," "," ").length)return;const q=n.tr,ht=gt({state:n,transaction:q}),{commands:Rt}=new b({editor:this.editor,state:ht});return Rt.clearNodes(),q.steps.length?q:void 0}})]}}),wo=ce.create({name:"tabindex",addProseMirrorPlugins(){return[new C.Sy({key:new C.H$("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var po=Object.freeze({__proto__:null,ClipboardTextSerializer:an,Commands:So,Editable:Io,FocusEvents:ko,Keymap:uo,Tabindex:wo});function ho(e,t){const n=document.querySelector("style[data-tiptap-style]");if(null!==n)return n;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}class Ko extends class{constructor(){this.callbacks={}}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),this}emit(t,...n){const i=this.callbacks[t];return i&&i.forEach(u=>u.apply(this,n)),this}off(t,n){const i=this.callbacks[t];return i&&(n?this.callbacks[t]=i.filter(u=>u!==n):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=ho('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(t={}){this.options=Gt(Gt({},this.options),t),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,n=!0){this.setOptions({editable:t}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,n){const i=H(n)?n(t,[...this.state.plugins]):[...this.state.plugins,t],u=this.state.reconfigure({plugins:i});this.view.updateState(u)}unregisterPlugin(t){if(this.isDestroyed)return;const n="string"==typeof t?`${t}$`:t.key,i=this.state.reconfigure({plugins:this.state.plugins.filter(u=>!u.key.startsWith(n))});this.view.updateState(i)}createExtensionManager(){const n=[...this.options.enableCoreExtensions?Object.values(po):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(null==i?void 0:i.type));this.extensionManager=new oe(n,this)}createCommandManager(){this.commandManager=new b({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=tn(this.options.content,this.schema,this.options.parseOptions),n=Z(t,this.options.autofocus);this.view=new l.tk(this.options.element,me(Gt({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:C.yy.create({doc:t,selection:n||void 0})}));const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach(T=>{var A;return null===(A=this.capturedTransaction)||void 0===A?void 0:A.step(T)}):void(this.capturedTransaction=t);const n=this.state.apply(t),i=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),i&&this.emit("selectionUpdate",{editor:this,transaction:t});const u=t.getMeta("focus"),h=t.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:t}),h&&this.emit("blur",{editor:this,event:h.event,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return so(this.state,t)}isActive(t,n){return Zn(this.state,"string"==typeof t?t:null,"string"==typeof t?n:t)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Kn(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:n="\n\n",textSerializers:i={}}=t||{};return $n(this.state.doc,{blockSeparator:n,textSerializers:Gt(Gt({},We(this.schema)),i)})}get isEmpty(){return Yn(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}}function Jo(e){return new we({find:e.find,handler:({state:t,range:n,match:i})=>{const u=a(e.getAttributes,void 0,i);if(!1===u||null===u)return null;const{tr:h}=t,T=i[i.length-1],A=i[0];let L=n.to;if(T){const N=A.search(/\S/),j=n.from+A.indexOf(T),q=j+T.length;if(qn(n.from,n.to,t.doc).filter(Rt=>Rt.mark.type.excluded.find(Vt=>Vt===e.type&&Vt!==Rt.mark.type)).filter(Rt=>Rt.to>j).length)return null;q<n.to&&h.delete(q,n.to),j>n.from&&h.delete(n.from+N,j),L=n.from+N+T.length,h.addMark(n.from+N,L,e.type.create(u||{})),h.removeStoredMark(e.type)}}})}function $o(e){return new we({find:e.find,handler:({state:t,range:n,match:i})=>{const u=a(e.getAttributes,void 0,i)||{},{tr:h}=t,T=n.from;let A=n.to;if(i[1]){let N=T+i[0].lastIndexOf(i[1]);N>A?N=A:A=N+i[1].length,h.insertText(i[0][i[0].length-1],T+i[0].length-1),h.replaceWith(N,A,e.type.create(u))}else i[0]&&h.replaceWith(T,A,e.type.create(u))}})}function Ro(e){return new we({find:e.find,handler:({state:t,range:n,match:i})=>{const u=t.doc.resolve(n.from),h=a(e.getAttributes,void 0,i)||{};if(!u.node(-1).canReplaceWith(u.index(-1),u.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,h)}})}function fo(e){return new we({find:e.find,handler:({state:t,range:n,match:i})=>{let u=e.replace,h=n.from;const T=n.to;if(i[1]){const A=i[0].lastIndexOf(i[1]);u+=i[0].slice(A+i[1].length),h+=A;const L=h-T;L>0&&(u=i[0].slice(A-L,A)+u,h=T)}t.tr.insertText(u,h,T)}})}function mo(e){return new we({find:e.find,handler:({state:t,range:n,match:i,chain:u})=>{const h=a(e.getAttributes,void 0,i)||{},T=t.tr.delete(n.from,n.to),L=T.doc.resolve(n.from).blockRange(),N=L&&(0,g.nd)(L,e.type,h);if(!N)return null;if(T.wrap(L,N),e.keepMarks&&e.editor){const{selection:q,storedMarks:ht}=t,{splittableMarks:Rt}=e.editor.extensionManager,$t=ht||q.$to.parentOffset&&q.$from.marks();if($t){const Vt=$t.filter(Xt=>Rt.includes(Xt.type.name));T.ensureMarks(Vt)}}if(e.keepAttributes){const q="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";u().updateAttributes(q,h).run()}const j=T.doc.resolve(n.from-1).nodeBefore;j&&j.type===e.type&&(0,g.Mn)(T.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(i,j))&&T.join(n.from-1)}})}class Hn{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Gt(Gt({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(I(this,"addOptions",{name:this.name}))),this.storage=a(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Hn(t)}configure(t={}){const n=this.extend();return n.options=le(this.options,t),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new Hn(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=a(I(n,"addOptions",{name:n.name})),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:t,mark:n}){const{tr:i}=t.state,u=t.state.selection.$from;if(u.pos===u.end()){const T=u.marks();if(!T.find(N=>(null==N?void 0:N.type.name)===n.name))return!1;const L=T.find(N=>(null==N?void 0:N.type.name)===n.name);return L&&i.removeStoredMark(L),i.insertText(" ",u.pos),t.view.dispatch(i),!0}return!1}}class Vn{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Gt(Gt({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(I(this,"addOptions",{name:this.name}))),this.storage=a(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Vn(t)}configure(t={}){const n=this.extend();return n.options=le(this.options,t),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new Vn(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=a(I(n,"addOptions",{name:n.name})),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}}class go{constructor(t,n,i){this.isDragging=!1,this.component=t,this.editor=n.editor,this.options=Gt({stopEvent:null,ignoreMutation:null},i),this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var n,i,u,h,T,A,L;const{view:N}=this.editor,j=t.target,q=3===j.nodeType?null===(n=j.parentElement)||void 0===n?void 0:n.closest("[data-drag-handle]"):j.closest("[data-drag-handle]");if(!this.dom||(null===(i=this.contentDOM)||void 0===i?void 0:i.contains(j))||!q)return;let ht=0,Rt=0;if(this.dom!==q){const Xt=this.dom.getBoundingClientRect(),qt=q.getBoundingClientRect(),Se=null!==(u=t.offsetX)&&void 0!==u?u:null===(h=t.nativeEvent)||void 0===h?void 0:h.offsetX,Fe=null!==(T=t.offsetY)&&void 0!==T?T:null===(A=t.nativeEvent)||void 0===A?void 0:A.offsetY;ht=qt.x-Xt.x+Se,Rt=qt.y-Xt.y+Fe}null===(L=t.dataTransfer)||void 0===L||L.setDragImage(this.dom,ht,Rt);const $t=C.qv.create(N.state.doc,this.getPos()),Vt=N.state.tr.setSelection($t);N.dispatch(Vt)}stopEvent(t){var n;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:t});const i=t.target;if(!this.dom.contains(i)||(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(i)))return!1;const h=t.type.startsWith("drag"),T="drop"===t.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(i.tagName)||i.isContentEditable)&&!T&&!h)return!0;const{isEditable:L}=this.editor,{isDragging:N}=this,j=!!this.node.type.spec.draggable,q=C.qv.isSelectable(this.node),ht="copy"===t.type,Rt="paste"===t.type,$t="cut"===t.type,Vt="mousedown"===t.type;if(!j&&q&&h&&t.preventDefault(),j&&h&&!N)return t.preventDefault(),!1;if(j&&L&&!N&&Vt){const Xt=i.closest("[data-drag-handle]");Xt&&(this.dom===Xt||this.dom.contains(Xt))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(N||T||ht||Rt||$t||Vt&&q)}ignoreMutation(t){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:t}):!(!this.node.isLeaf&&!this.node.isAtom&&("selection"===t.type||this.dom.contains(t.target)&&"childList"===t.type&&W()&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(i=>i.isContentEditable)||(this.contentDOM!==t.target||"attributes"!==t.type)&&this.contentDOM.contains(t.target))))}updateAttributes(t){this.editor.commands.command(({tr:n})=>{const i=this.getPos();return n.setNodeMarkup(i,void 0,Gt(Gt({},this.node.attrs),t)),!0})}deleteNode(){const t=this.getPos();this.editor.commands.deleteRange({from:t,to:t+this.node.nodeSize})}}function Lo(e){return new Tt({find:e.find,handler:({state:t,range:n,match:i})=>{const u=a(e.getAttributes,void 0,i);if(!1===u||null===u)return null;const{tr:h}=t,T=i[i.length-1],A=i[0];let L=n.to;if(T){const N=A.search(/\S/),j=n.from+A.indexOf(T),q=j+T.length;if(qn(n.from,n.to,t.doc).filter(Rt=>Rt.mark.type.excluded.find(Vt=>Vt===e.type&&Vt!==Rt.mark.type)).filter(Rt=>Rt.to>j).length)return null;q<n.to&&h.delete(q,n.to),j>n.from&&h.delete(n.from+N,j),L=n.from+N+T.length,h.addMark(n.from+N,L,e.type.create(u||{})),h.removeStoredMark(e.type)}}})}function _o(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function r(e){return"string"==typeof e}function o(e){return new Tt({find:e.find,handler({match:t,chain:n,range:i}){const u=a(e.getAttributes,void 0,t);if(!1===u||null===u)return null;t.input&&n().deleteRange(i).insertContentAt(i.from,{type:e.type.name,attrs:u})}})}function s(e){return new Tt({find:e.find,handler:({state:t,range:n,match:i})=>{let u=e.replace,h=n.from;const T=n.to;if(i[1]){const A=i[0].lastIndexOf(i[1]);u+=i[0].slice(A+i[1].length),h+=A;const L=h-T;L>0&&(u=i[0].slice(A-L,A)+u,h=T)}t.tr.insertText(u,h,T)}})}class d{constructor(t){this.transaction=t,this.currentStep=this.transaction.steps.length}map(t){let n=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((u,h)=>{const T=h.getMap().mapResult(u);return T.deleted&&(n=!0),T.pos},t),deleted:n}}}},44632:(Yt,Ct,c)=>{c.r(Ct),c.d(Ct,{Image:()=>y,default:()=>y,inputRegex:()=>l});var C=c(12867);const l=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,y=C.Node.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:D}){return["img",(0,C.mergeAttributes)(this.options.HTMLAttributes,D)]},addCommands(){return{setImage:D=>({commands:g})=>g.insertContent({type:this.name,attrs:D})}},addInputRules(){return[(0,C.nodeInputRule)({find:l,type:this.type,getAttributes:D=>{const[,,g,ot,B]=D;return{src:ot,alt:g,title:B}}})]}})},84402:(Yt,Ct,c)=>{c.r(Ct),c.d(Ct,{TextStyle:()=>l,default:()=>l});var C=c(12867);const l=C.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:y=>!!y.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:y}){return["span",(0,C.mergeAttributes)(this.options.HTMLAttributes,y),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:y,commands:D})=>{const g=(0,C.getMarkAttributes)(y,this.type);return!!Object.entries(g).some(([,B])=>!!B)||D.unsetMark(this.name)}}}})},70768:(Yt,Ct,c)=>{c.d(Ct,{$:()=>Pt,h:()=>It});for(var C={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},y="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),g=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),ot="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),B=g||y&&+y[1]<57,X=0;X<10;X++)C[48+X]=C[96+X]=String(X);for(X=1;X<=24;X++)C[X+111]="F"+X;for(X=65;X<=90;X++)C[X]=String.fromCharCode(X+32),l[X]=String.fromCharCode(X);for(var et in C)l.hasOwnProperty(et)||(l[et]=C[et]);var ct=c(62463);const Mt="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function it(At){let F,ut,Y,xt,pt=At.split(/-(?!$)/),tt=pt[pt.length-1];"Space"==tt&&(tt=" ");for(let Bt=0;Bt<pt.length-1;Bt++){let Dt=pt[Bt];if(/^(cmd|meta|m)$/i.test(Dt))xt=!0;else if(/^a(lt)?$/i.test(Dt))F=!0;else if(/^(c|ctrl|control)$/i.test(Dt))ut=!0;else if(/^s(hift)?$/i.test(Dt))Y=!0;else{if(!/^mod$/i.test(Dt))throw new Error("Unrecognized modifier name: "+Dt);Mt?xt=!0:ut=!0}}return F&&(tt="Alt-"+tt),ut&&(tt="Ctrl-"+tt),xt&&(tt="Meta-"+tt),Y&&(tt="Shift-"+tt),tt}function bt(At,pt,tt=!0){return pt.altKey&&(At="Alt-"+At),pt.ctrlKey&&(At="Ctrl-"+At),pt.metaKey&&(At="Meta-"+At),tt&&pt.shiftKey&&(At="Shift-"+At),At}function It(At){return new ct.Sy({props:{handleKeyDown:Pt(At)}})}function Pt(At){let pt=function(At){let pt=Object.create(null);for(let tt in At)pt[it(tt)]=At[tt];return pt}(At);return function(tt,F){let Y,ut=function(At){var tt=!(B&&(At.ctrlKey||At.altKey||At.metaKey)||ot&&At.shiftKey&&At.key&&1==At.key.length||"Unidentified"==At.key)&&At.key||(At.shiftKey?l:C)[At.keyCode]||At.key||"Unidentified";return"Esc"==tt&&(tt="Escape"),"Del"==tt&&(tt="Delete"),"Left"==tt&&(tt="ArrowLeft"),"Up"==tt&&(tt="ArrowUp"),"Right"==tt&&(tt="ArrowRight"),"Down"==tt&&(tt="ArrowDown"),tt}(F),xt=pt[bt(ut,F)];if(xt&&xt(tt.state,tt.dispatch,tt))return!0;if(1==ut.length&&" "!=ut){if(F.shiftKey){let Bt=pt[bt(ut,F,!1)];if(Bt&&Bt(tt.state,tt.dispatch,tt))return!0}if((F.shiftKey||F.altKey||F.metaKey||ut.charCodeAt(0)>127)&&(Y=C[F.keyCode])&&Y!=ut){let Bt=pt[bt(Y,F)];if(Bt&&Bt(tt.state,tt.dispatch,tt))return!0}}return!1}}},77346:(Yt,Ct,c)=>{function C(H){this.content=H}c.d(Ct,{aw:()=>Me,PW:()=>U,HY:()=>g,vc:()=>et,ZU:()=>Ce,NB:()=>kt,Ts:()=>_t,e4:()=>mt,V_:()=>Pe,p2:()=>ct}),C.prototype={constructor:C,find:function(H){for(var a=0;a<this.content.length;a+=2)if(this.content[a]===H)return a;return-1},get:function(H){var a=this.find(H);return-1==a?void 0:this.content[a+1]},update:function(H,a,p){var E=p&&p!=H?this.remove(p):this,P=E.find(H),k=E.content.slice();return-1==P?k.push(p||H,a):(k[P+1]=a,p&&(k[P]=p)),new C(k)},remove:function(H){var a=this.find(H);if(-1==a)return this;var p=this.content.slice();return p.splice(a,2),new C(p)},addToStart:function(H,a){return new C([H,a].concat(this.remove(H).content))},addToEnd:function(H,a){var p=this.remove(H).content.slice();return p.push(H,a),new C(p)},addBefore:function(H,a,p){var E=this.remove(a),P=E.content.slice(),k=E.find(H);return P.splice(-1==k?P.length:k,0,a,p),new C(P)},forEach:function(H){for(var a=0;a<this.content.length;a+=2)H(this.content[a],this.content[a+1])},prepend:function(H){return(H=C.from(H)).size?new C(H.content.concat(this.subtract(H).content)):this},append:function(H){return(H=C.from(H)).size?new C(this.subtract(H).content.concat(H.content)):this},subtract:function(H){var a=this;H=C.from(H);for(var p=0;p<H.content.length;p+=2)a=a.remove(H.content[p]);return a},toObject:function(){var H={};return this.forEach(function(a,p){H[a]=p}),H},get size(){return this.content.length>>1}},C.from=function(H){if(H instanceof C)return H;var a=[];if(H)for(var p in H)a.push(p,H[p]);return new C(a)};const l=C;function y(H,a,p){for(let E=0;;E++){if(E==H.childCount||E==a.childCount)return H.childCount==a.childCount?null:p;let P=H.child(E),k=a.child(E);if(P!=k){if(!P.sameMarkup(k))return p;if(P.isText&&P.text!=k.text){for(let K=0;P.text[K]==k.text[K];K++)p++;return p}if(P.content.size||k.content.size){let K=y(P.content,k.content,p+1);if(null!=K)return K}p+=P.nodeSize}else p+=P.nodeSize}}function D(H,a,p,E){for(let P=H.childCount,k=a.childCount;;){if(0==P||0==k)return P==k?null:{a:p,b:E};let K=H.child(--P),at=a.child(--k),Ht=K.nodeSize;if(K!=at){if(!K.sameMarkup(at))return{a:p,b:E};if(K.isText&&K.text!=at.text){let te=0,ee=Math.min(K.text.length,at.text.length);for(;te<ee&&K.text[K.text.length-te-1]==at.text[at.text.length-te-1];)te++,p--,E--;return{a:p,b:E}}if(K.content.size||at.content.size){let te=D(K.content,at.content,p-1,E-1);if(te)return te}p-=Ht,E-=Ht}else p-=Ht,E-=Ht}}class g{constructor(a,p){if(this.content=a,this.size=p||0,null==p)for(let E=0;E<a.length;E++)this.size+=a[E].nodeSize}nodesBetween(a,p,E,P=0,k){for(let K=0,at=0;at<p;K++){let Ht=this.content[K],te=at+Ht.nodeSize;if(te>a&&!1!==E(Ht,P+at,k||null,K)&&Ht.content.size){let ee=at+1;Ht.nodesBetween(Math.max(0,a-ee),Math.min(Ht.content.size,p-ee),E,P+ee)}at=te}}descendants(a){this.nodesBetween(0,this.size,a)}textBetween(a,p,E,P){let k="",K=!0;return this.nodesBetween(a,p,(at,Ht)=>{at.isText?(k+=at.text.slice(Math.max(a,Ht)-Ht,p-Ht),K=!E):at.isLeaf?(P?k+="function"==typeof P?P(at):P:at.type.spec.leafText&&(k+=at.type.spec.leafText(at)),K=!E):!K&&at.isBlock&&(k+=E,K=!0)},0),k}append(a){if(!a.size)return this;if(!this.size)return a;let p=this.lastChild,E=a.firstChild,P=this.content.slice(),k=0;for(p.isText&&p.sameMarkup(E)&&(P[P.length-1]=p.withText(p.text+E.text),k=1);k<a.content.length;k++)P.push(a.content[k]);return new g(P,this.size+a.size)}cut(a,p=this.size){if(0==a&&p==this.size)return this;let E=[],P=0;if(p>a)for(let k=0,K=0;K<p;k++){let at=this.content[k],Ht=K+at.nodeSize;Ht>a&&((K<a||Ht>p)&&(at=at.isText?at.cut(Math.max(0,a-K),Math.min(at.text.length,p-K)):at.cut(Math.max(0,a-K-1),Math.min(at.content.size,p-K-1))),E.push(at),P+=at.nodeSize),K=Ht}return new g(E,P)}cutByIndex(a,p){return a==p?g.empty:0==a&&p==this.content.length?this:new g(this.content.slice(a,p))}replaceChild(a,p){let E=this.content[a];if(E==p)return this;let P=this.content.slice(),k=this.size+p.nodeSize-E.nodeSize;return P[a]=p,new g(P,k)}addToStart(a){return new g([a].concat(this.content),this.size+a.nodeSize)}addToEnd(a){return new g(this.content.concat(a),this.size+a.nodeSize)}eq(a){if(this.content.length!=a.content.length)return!1;for(let p=0;p<this.content.length;p++)if(!this.content[p].eq(a.content[p]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(a){let p=this.content[a];if(!p)throw new RangeError("Index "+a+" out of range for "+this);return p}maybeChild(a){return this.content[a]||null}forEach(a){for(let p=0,E=0;p<this.content.length;p++){let P=this.content[p];a(P,E,p),E+=P.nodeSize}}findDiffStart(a,p=0){return y(this,a,p)}findDiffEnd(a,p=this.size,E=a.size){return D(this,a,p,E)}findIndex(a,p=-1){if(0==a)return B(0,a);if(a==this.size)return B(this.content.length,a);if(a>this.size||a<0)throw new RangeError(`Position ${a} outside of fragment (${this})`);for(let E=0,P=0;;E++){let K=P+this.child(E).nodeSize;if(K>=a)return K==a||p>0?B(E+1,K):B(E,P);P=K}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(a=>a.toJSON()):null}static fromJSON(a,p){if(!p)return g.empty;if(!Array.isArray(p))throw new RangeError("Invalid input for Fragment.fromJSON");return new g(p.map(a.nodeFromJSON))}static fromArray(a){if(!a.length)return g.empty;let p,E=0;for(let P=0;P<a.length;P++){let k=a[P];E+=k.nodeSize,P&&k.isText&&a[P-1].sameMarkup(k)?(p||(p=a.slice(0,P)),p[p.length-1]=k.withText(p[p.length-1].text+k.text)):p&&p.push(k)}return new g(p||a,E)}static from(a){if(!a)return g.empty;if(a instanceof g)return a;if(Array.isArray(a))return this.fromArray(a);if(a.attrs)return new g([a],a.nodeSize);throw new RangeError("Can not convert "+a+" to a Fragment"+(a.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}g.empty=new g([],0);const ot={index:0,offset:0};function B(H,a){return ot.index=H,ot.offset=a,ot}function X(H,a){if(H===a)return!0;if(!H||"object"!=typeof H||!a||"object"!=typeof a)return!1;let p=Array.isArray(H);if(Array.isArray(a)!=p)return!1;if(p){if(H.length!=a.length)return!1;for(let E=0;E<H.length;E++)if(!X(H[E],a[E]))return!1}else{for(let E in H)if(!(E in a)||!X(H[E],a[E]))return!1;for(let E in a)if(!(E in H))return!1}return!0}let et=(()=>{class H{constructor(p,E){this.type=p,this.attrs=E}addToSet(p){let E,P=!1;for(let k=0;k<p.length;k++){let K=p[k];if(this.eq(K))return p;if(this.type.excludes(K.type))E||(E=p.slice(0,k));else{if(K.type.excludes(this.type))return p;!P&&K.type.rank>this.type.rank&&(E||(E=p.slice(0,k)),E.push(this),P=!0),E&&E.push(K)}}return E||(E=p.slice()),P||E.push(this),E}removeFromSet(p){for(let E=0;E<p.length;E++)if(this.eq(p[E]))return p.slice(0,E).concat(p.slice(E+1));return p}isInSet(p){for(let E=0;E<p.length;E++)if(this.eq(p[E]))return!0;return!1}eq(p){return this==p||this.type==p.type&&X(this.attrs,p.attrs)}toJSON(){let p={type:this.type.name};for(let E in this.attrs){p.attrs=this.attrs;break}return p}static fromJSON(p,E){if(!E)throw new RangeError("Invalid input for Mark.fromJSON");let P=p.marks[E.type];if(!P)throw new RangeError(`There is no mark type ${E.type} in this schema`);return P.create(E.attrs)}static sameSet(p,E){if(p==E)return!0;if(p.length!=E.length)return!1;for(let P=0;P<p.length;P++)if(!p[P].eq(E[P]))return!1;return!0}static setFrom(p){if(!p||Array.isArray(p)&&0==p.length)return H.none;if(p instanceof H)return[p];let E=p.slice();return E.sort((P,k)=>P.type.rank-k.type.rank),E}}return H.none=[],H})();class mt extends Error{}class ct{constructor(a,p,E){this.content=a,this.openStart=p,this.openEnd=E}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(a,p){let E=it(this.content,a+this.openStart,p);return E&&new ct(E,this.openStart,this.openEnd)}removeBetween(a,p){return new ct(Mt(this.content,a+this.openStart,p+this.openStart),this.openStart,this.openEnd)}eq(a){return this.content.eq(a.content)&&this.openStart==a.openStart&&this.openEnd==a.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let a={content:this.content.toJSON()};return this.openStart>0&&(a.openStart=this.openStart),this.openEnd>0&&(a.openEnd=this.openEnd),a}static fromJSON(a,p){if(!p)return ct.empty;let E=p.openStart||0,P=p.openEnd||0;if("number"!=typeof E||"number"!=typeof P)throw new RangeError("Invalid input for Slice.fromJSON");return new ct(g.fromJSON(a,p.content),E,P)}static maxOpen(a,p=!0){let E=0,P=0;for(let k=a.firstChild;k&&!k.isLeaf&&(p||!k.type.spec.isolating);k=k.firstChild)E++;for(let k=a.lastChild;k&&!k.isLeaf&&(p||!k.type.spec.isolating);k=k.lastChild)P++;return new ct(a,E,P)}}function Mt(H,a,p){let{index:E,offset:P}=H.findIndex(a),k=H.maybeChild(E),{index:K,offset:at}=H.findIndex(p);if(P==a||k.isText){if(at!=p&&!H.child(K).isText)throw new RangeError("Removing non-flat range");return H.cut(0,a).append(H.cut(p))}if(E!=K)throw new RangeError("Removing non-flat range");return H.replaceChild(E,k.copy(Mt(k.content,a-P-1,p-P-1)))}function it(H,a,p,E){let{index:P,offset:k}=H.findIndex(a),K=H.maybeChild(P);if(k==a||K.isText)return E&&!E.canReplace(P,P,p)?null:H.cut(0,a).append(p).append(H.cut(a));let at=it(K.content,a-k-1,p);return at&&H.replaceChild(P,K.copy(at))}function ft(H,a,p){if(p.openStart>H.depth)throw new mt("Inserted content deeper than insertion position");if(H.depth-p.openStart!=a.depth-p.openEnd)throw new mt("Inconsistent open depths");return bt(H,a,p,0)}function bt(H,a,p,E){let P=H.index(E),k=H.node(E);if(P==a.index(E)&&E<H.depth-p.openStart){let K=bt(H,a,p,E+1);return k.copy(k.content.replaceChild(P,K))}if(p.content.size){if(p.openStart||p.openEnd||H.depth!=E||a.depth!=E){let{start:K,end:at}=function(H,a){let p=a.depth-H.openStart,P=a.node(p).copy(H.content);for(let k=p-1;k>=0;k--)P=a.node(k).copy(g.from(P));return{start:P.resolveNoCache(H.openStart+p),end:P.resolveNoCache(P.content.size-H.openEnd-p)}}(p,H);return tt(k,F(H,K,at,a,E))}{let K=H.parent,at=K.content;return tt(K,at.cut(0,H.parentOffset).append(p.content).append(at.cut(a.parentOffset)))}}return tt(k,ut(H,a,E))}function It(H,a){if(!a.type.compatibleContent(H.type))throw new mt("Cannot join "+a.type.name+" onto "+H.type.name)}function Pt(H,a,p){let E=H.node(p);return It(E,a.node(p)),E}function At(H,a){let p=a.length-1;p>=0&&H.isText&&H.sameMarkup(a[p])?a[p]=H.withText(a[p].text+H.text):a.push(H)}function pt(H,a,p,E){let P=(a||H).node(p),k=0,K=a?a.index(p):P.childCount;H&&(k=H.index(p),H.depth>p?k++:H.textOffset&&(At(H.nodeAfter,E),k++));for(let at=k;at<K;at++)At(P.child(at),E);a&&a.depth==p&&a.textOffset&&At(a.nodeBefore,E)}function tt(H,a){return H.type.checkContent(a),H.copy(a)}function F(H,a,p,E,P){let k=H.depth>P&&Pt(H,a,P+1),K=E.depth>P&&Pt(p,E,P+1),at=[];return pt(null,H,P,at),k&&K&&a.index(P)==p.index(P)?(It(k,K),At(tt(k,F(H,a,p,E,P+1)),at)):(k&&At(tt(k,ut(H,a,P+1)),at),pt(a,p,P,at),K&&At(tt(K,ut(p,E,P+1)),at)),pt(E,null,P,at),new g(at)}function ut(H,a,p){let E=[];return pt(null,H,p,E),H.depth>p&&At(tt(Pt(H,a,p+1),ut(H,a,p+1)),E),pt(a,null,p,E),new g(E)}ct.empty=new ct(g.empty,0,0);class xt{constructor(a,p,E){this.pos=a,this.path=p,this.parentOffset=E,this.depth=p.length/3-1}resolveDepth(a){return null==a?this.depth:a<0?this.depth+a:a}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(a){return this.path[3*this.resolveDepth(a)]}index(a){return this.path[3*this.resolveDepth(a)+1]}indexAfter(a){return a=this.resolveDepth(a),this.index(a)+(a!=this.depth||this.textOffset?1:0)}start(a){return 0==(a=this.resolveDepth(a))?0:this.path[3*a-1]+1}end(a){return a=this.resolveDepth(a),this.start(a)+this.node(a).content.size}before(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position before the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]}after(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position after the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]+this.path[3*a].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let a=this.parent,p=this.index(this.depth);if(p==a.childCount)return null;let E=this.pos-this.path[this.path.length-1],P=a.child(p);return E?a.child(p).cut(E):P}get nodeBefore(){let a=this.index(this.depth),p=this.pos-this.path[this.path.length-1];return p?this.parent.child(a).cut(0,p):0==a?null:this.parent.child(a-1)}posAtIndex(a,p){p=this.resolveDepth(p);let E=this.path[3*p],P=0==p?0:this.path[3*p-1]+1;for(let k=0;k<a;k++)P+=E.child(k).nodeSize;return P}marks(){let a=this.parent,p=this.index();if(0==a.content.size)return et.none;if(this.textOffset)return a.child(p).marks;let E=a.maybeChild(p-1),P=a.maybeChild(p);if(!E){let at=E;E=P,P=at}let k=E.marks;for(var K=0;K<k.length;K++)!1===k[K].type.spec.inclusive&&(!P||!k[K].isInSet(P.marks))&&(k=k[K--].removeFromSet(k));return k}marksAcross(a){let p=this.parent.maybeChild(this.index());if(!p||!p.isInline)return null;let E=p.marks,P=a.parent.maybeChild(a.index());for(var k=0;k<E.length;k++)!1===E[k].type.spec.inclusive&&(!P||!E[k].isInSet(P.marks))&&(E=E[k--].removeFromSet(E));return E}sharedDepth(a){for(let p=this.depth;p>0;p--)if(this.start(p)<=a&&this.end(p)>=a)return p;return 0}blockRange(a=this,p){if(a.pos<this.pos)return a.blockRange(this);for(let E=this.depth-(this.parent.inlineContent||this.pos==a.pos?1:0);E>=0;E--)if(a.pos<=this.end(E)&&(!p||p(this.node(E))))return new _t(this,a,E);return null}sameParent(a){return this.pos-this.parentOffset==a.pos-a.parentOffset}max(a){return a.pos>this.pos?a:this}min(a){return a.pos<this.pos?a:this}toString(){let a="";for(let p=1;p<=this.depth;p++)a+=(a?"/":"")+this.node(p).type.name+"_"+this.index(p-1);return a+":"+this.parentOffset}static resolve(a,p){if(!(p>=0&&p<=a.content.size))throw new RangeError("Position "+p+" out of range");let E=[],P=0,k=p;for(let K=a;;){let{index:at,offset:Ht}=K.content.findIndex(k),te=k-Ht;if(E.push(K,at,P+Ht),!te||(K=K.child(at),K.isText))break;k=te-1,P+=Ht+1}return new xt(p,E,k)}static resolveCached(a,p){for(let P=0;P<Bt.length;P++){let k=Bt[P];if(k.pos==p&&k.doc==a)return k}let E=Bt[Dt]=xt.resolve(a,p);return Dt=(Dt+1)%St,E}}let Bt=[],Dt=0,St=12;class _t{constructor(a,p,E){this.$from=a,this.$to=p,this.depth=E}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const wt=Object.create(null);class kt{constructor(a,p,E,P=et.none){this.type=a,this.attrs=p,this.marks=P,this.content=E||g.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(a){return this.content.child(a)}maybeChild(a){return this.content.maybeChild(a)}forEach(a){this.content.forEach(a)}nodesBetween(a,p,E,P=0){this.content.nodesBetween(a,p,E,P,this)}descendants(a){this.nodesBetween(0,this.content.size,a)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(a,p,E,P){return this.content.textBetween(a,p,E,P)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(a){return this==a||this.sameMarkup(a)&&this.content.eq(a.content)}sameMarkup(a){return this.hasMarkup(a.type,a.attrs,a.marks)}hasMarkup(a,p,E){return this.type==a&&X(this.attrs,p||a.defaultAttrs||wt)&&et.sameSet(this.marks,E||et.none)}copy(a=null){return a==this.content?this:new kt(this.type,this.attrs,a,this.marks)}mark(a){return a==this.marks?this:new kt(this.type,this.attrs,this.content,a)}cut(a,p=this.content.size){return 0==a&&p==this.content.size?this:this.copy(this.content.cut(a,p))}slice(a,p=this.content.size,E=!1){if(a==p)return ct.empty;let P=this.resolve(a),k=this.resolve(p),K=E?0:P.sharedDepth(p),at=P.start(K),te=P.node(K).content.cut(P.pos-at,k.pos-at);return new ct(te,P.depth-K,k.depth-K)}replace(a,p,E){return ft(this.resolve(a),this.resolve(p),E)}nodeAt(a){for(let p=this;;){let{index:E,offset:P}=p.content.findIndex(a);if(p=p.maybeChild(E),!p)return null;if(P==a||p.isText)return p;a-=P+1}}childAfter(a){let{index:p,offset:E}=this.content.findIndex(a);return{node:this.content.maybeChild(p),index:p,offset:E}}childBefore(a){if(0==a)return{node:null,index:0,offset:0};let{index:p,offset:E}=this.content.findIndex(a);if(E<a)return{node:this.content.child(p),index:p,offset:E};let P=this.content.child(p-1);return{node:P,index:p-1,offset:E-P.nodeSize}}resolve(a){return xt.resolveCached(this,a)}resolveNoCache(a){return xt.resolve(this,a)}rangeHasMark(a,p,E){let P=!1;return p>a&&this.nodesBetween(a,p,k=>(E.isInSet(k.marks)&&(P=!0),!P)),P}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let a=this.type.name;return this.content.size&&(a+="("+this.content.toStringInner()+")"),rt(this.marks,a)}contentMatchAt(a){let p=this.type.contentMatch.matchFragment(this.content,0,a);if(!p)throw new Error("Called contentMatchAt on a node with invalid content");return p}canReplace(a,p,E=g.empty,P=0,k=E.childCount){let K=this.contentMatchAt(a).matchFragment(E,P,k),at=K&&K.matchFragment(this.content,p);if(!at||!at.validEnd)return!1;for(let Ht=P;Ht<k;Ht++)if(!this.type.allowsMarks(E.child(Ht).marks))return!1;return!0}canReplaceWith(a,p,E,P){if(P&&!this.type.allowsMarks(P))return!1;let k=this.contentMatchAt(a).matchType(E),K=k&&k.matchFragment(this.content,p);return!!K&&K.validEnd}canAppend(a){return a.content.size?this.canReplace(this.childCount,this.childCount,a.content):this.type.compatibleContent(a.type)}check(){this.type.checkContent(this.content);let a=et.none;for(let p=0;p<this.marks.length;p++)a=this.marks[p].addToSet(a);if(!et.sameSet(a,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(p=>p.type.name)}`);this.content.forEach(p=>p.check())}toJSON(){let a={type:this.type.name};for(let p in this.attrs){a.attrs=this.attrs;break}return this.content.size&&(a.content=this.content.toJSON()),this.marks.length&&(a.marks=this.marks.map(p=>p.toJSON())),a}static fromJSON(a,p){if(!p)throw new RangeError("Invalid input for Node.fromJSON");let E=null;if(p.marks){if(!Array.isArray(p.marks))throw new RangeError("Invalid mark data for Node.fromJSON");E=p.marks.map(a.markFromJSON)}if("text"==p.type){if("string"!=typeof p.text)throw new RangeError("Invalid text node in JSON");return a.text(p.text,E)}let P=g.fromJSON(a,p.content);return a.nodeType(p.type).create(p.attrs,P,E)}}kt.prototype.text=void 0;class z extends kt{constructor(a,p,E,P){if(super(a,p,null,P),!E)throw new RangeError("Empty text nodes are not allowed");this.text=E}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):rt(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(a,p){return this.text.slice(a,p)}get nodeSize(){return this.text.length}mark(a){return a==this.marks?this:new z(this.type,this.attrs,this.text,a)}withText(a){return a==this.text?this:new z(this.type,this.attrs,a,this.marks)}cut(a=0,p=this.text.length){return 0==a&&p==this.text.length?this:this.withText(this.text.slice(a,p))}eq(a){return this.sameMarkup(a)&&this.text==a.text}toJSON(){let a=super.toJSON();return a.text=this.text,a}}function rt(H,a){for(let p=H.length-1;p>=0;p--)a=H[p].type.name+"("+a+")";return a}class dt{constructor(a){this.validEnd=a,this.next=[],this.wrapCache=[]}static parse(a,p){let E=new st(a,p);if(null==E.next)return dt.empty;let P=J(E);E.next&&E.err("Unexpected trailing text");let k=function(H){let a=Object.create(null);return function p(E){let P=[];E.forEach(K=>{H[K].forEach(({term:at,to:Ht})=>{if(!at)return;let te;for(let ee=0;ee<P.length;ee++)P[ee][0]==at&&(te=P[ee][1]);ye(H,Ht).forEach(ee=>{te||P.push([at,te=[]]),-1==te.indexOf(ee)&&te.push(ee)})})});let k=a[E.join(",")]=new dt(E.indexOf(H.length-1)>-1);for(let K=0;K<P.length;K++){let at=P[K][1].sort(pe);k.next.push({type:P[K][0],next:a[at.join(",")]||p(at)})}return k}(ye(H,0))}(function(H){let a=[[]];return P(function k(K,at){if("choice"==K.type)return K.exprs.reduce((Ht,te)=>Ht.concat(k(te,at)),[]);if("seq"!=K.type){if("star"==K.type){let Ht=p();return E(at,Ht),P(k(K.expr,Ht),Ht),[E(Ht)]}if("plus"==K.type){let Ht=p();return P(k(K.expr,at),Ht),P(k(K.expr,Ht),Ht),[E(Ht)]}if("opt"==K.type)return[E(at)].concat(k(K.expr,at));if("range"==K.type){let Ht=at;for(let te=0;te<K.min;te++){let ee=p();P(k(K.expr,Ht),ee),Ht=ee}if(-1==K.max)P(k(K.expr,Ht),Ht);else for(let te=K.min;te<K.max;te++){let ee=p();E(Ht,ee),P(k(K.expr,Ht),ee),Ht=ee}return[E(Ht)]}if("name"==K.type)return[E(at,void 0,K.value)];throw new Error("Unknown expr type")}for(let Ht=0;;Ht++){let te=k(K.exprs[Ht],at);if(Ht==K.exprs.length-1)return te;P(te,at=p())}}(H,0),p()),a;function p(){return a.push([])-1}function E(K,at,Ht){let te={term:Ht,to:at};return a[K].push(te),te}function P(K,at){K.forEach(Ht=>Ht.to=at)}}(P));return function(H,a){for(let p=0,E=[H];p<E.length;p++){let P=E[p],k=!P.validEnd,K=[];for(let at=0;at<P.next.length;at++){let{type:Ht,next:te}=P.next[at];K.push(Ht.name),k&&!(Ht.isText||Ht.hasRequiredAttrs())&&(k=!1),-1==E.indexOf(te)&&E.push(te)}k&&a.err("Only non-generatable nodes ("+K.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(k,E),k}matchType(a){for(let p=0;p<this.next.length;p++)if(this.next[p].type==a)return this.next[p].next;return null}matchFragment(a,p=0,E=a.childCount){let P=this;for(let k=p;P&&k<E;k++)P=P.matchType(a.child(k).type);return P}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let a=0;a<this.next.length;a++){let{type:p}=this.next[a];if(!p.isText&&!p.hasRequiredAttrs())return p}return null}compatible(a){for(let p=0;p<this.next.length;p++)for(let E=0;E<a.next.length;E++)if(this.next[p].type==a.next[E].type)return!0;return!1}fillBefore(a,p=!1,E=0){let P=[this];return function k(K,at){let Ht=K.matchFragment(a,E);if(Ht&&(!p||Ht.validEnd))return g.from(at.map(te=>te.createAndFill()));for(let te=0;te<K.next.length;te++){let{type:ee,next:we}=K.next[te];if(!ee.isText&&!ee.hasRequiredAttrs()&&-1==P.indexOf(we)){P.push(we);let Je=k(we,at.concat(ee));if(Je)return Je}}return null}(this,[])}findWrapping(a){for(let E=0;E<this.wrapCache.length;E+=2)if(this.wrapCache[E]==a)return this.wrapCache[E+1];let p=this.computeWrapping(a);return this.wrapCache.push(a,p),p}computeWrapping(a){let p=Object.create(null),E=[{match:this,type:null,via:null}];for(;E.length;){let P=E.shift(),k=P.match;if(k.matchType(a)){let K=[];for(let at=P;at.type;at=at.via)K.push(at.type);return K.reverse()}for(let K=0;K<k.next.length;K++){let{type:at,next:Ht}=k.next[K];!at.isLeaf&&!at.hasRequiredAttrs()&&!(at.name in p)&&(!P.type||Ht.validEnd)&&(E.push({match:at.contentMatch,type:at,via:P}),p[at.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(a){if(a>=this.next.length)throw new RangeError(`There's no ${a}th edge in this content match`);return this.next[a]}toString(){let a=[];return function p(E){a.push(E);for(let P=0;P<E.next.length;P++)-1==a.indexOf(E.next[P].next)&&p(E.next[P].next)}(this),a.map((E,P)=>{let k=P+(E.validEnd?"*":" ")+" ";for(let K=0;K<E.next.length;K++)k+=(K?", ":"")+E.next[K].type.name+"->"+a.indexOf(E.next[K].next);return k}).join("\n")}}dt.empty=new dt(!0);class st{constructor(a,p){this.string=a,this.nodeTypes=p,this.inline=null,this.pos=0,this.tokens=a.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(a){return this.next==a&&(this.pos++||!0)}err(a){throw new SyntaxError(a+" (in content expression '"+this.string+"')")}}function J(H){let a=[];do{a.push(Q(H))}while(H.eat("|"));return 1==a.length?a[0]:{type:"choice",exprs:a}}function Q(H){let a=[];do{a.push(nt(H))}while(H.next&&")"!=H.next&&"|"!=H.next);return 1==a.length?a[0]:{type:"seq",exprs:a}}function nt(H){let a=function(H){if(H.eat("(")){let a=J(H);return H.eat(")")||H.err("Missing closing paren"),a}if(!/\W/.test(H.next)){let a=function(H,a){let p=H.nodeTypes,E=p[a];if(E)return[E];let P=[];for(let k in p){let K=p[k];K.groups.indexOf(a)>-1&&P.push(K)}return 0==P.length&&H.err("No node type or group '"+a+"' found"),P}(H,H.next).map(p=>(null==H.inline?H.inline=p.isInline:H.inline!=p.isInline&&H.err("Mixing inline and block content"),{type:"name",value:p}));return H.pos++,1==a.length?a[0]:{type:"choice",exprs:a}}H.err("Unexpected token '"+H.next+"'")}(H);for(;;)if(H.eat("+"))a={type:"plus",expr:a};else if(H.eat("*"))a={type:"star",expr:a};else if(H.eat("?"))a={type:"opt",expr:a};else{if(!H.eat("{"))break;a=Jt(H,a)}return a}function Lt(H){/\D/.test(H.next)&&H.err("Expected number, got '"+H.next+"'");let a=Number(H.next);return H.pos++,a}function Jt(H,a){let p=Lt(H),E=p;return H.eat(",")&&(E="}"!=H.next?Lt(H):-1),H.eat("}")||H.err("Unclosed braced range"),{type:"range",min:p,max:E,expr:a}}function pe(H,a){return a-H}function ye(H,a){let p=[];return function E(P){let k=H[P];if(1==k.length&&!k[0].term)return E(k[0].to);p.push(P);for(let K=0;K<k.length;K++){let{term:at,to:Ht}=k[K];!at&&-1==p.indexOf(Ht)&&E(Ht)}}(a),p.sort(pe)}function Ke(H){let a=Object.create(null);for(let p in H){let E=H[p];if(!E.hasDefault)return null;a[p]=E.default}return a}function xe(H,a){let p=Object.create(null);for(let E in H){let P=a&&a[E];if(void 0===P){let k=H[E];if(!k.hasDefault)throw new RangeError("No value supplied for attribute "+E);P=k.default}p[E]=P}return p}function Ne(H){let a=Object.create(null);if(H)for(let p in H)a[p]=new Ae(H[p]);return a}class ge{constructor(a,p,E){this.name=a,this.schema=p,this.spec=E,this.markSet=null,this.groups=E.group?E.group.split(" "):[],this.attrs=Ne(E.attrs),this.defaultAttrs=Ke(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(E.inline||"text"==a),this.isText="text"==a}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==dt.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let a in this.attrs)if(this.attrs[a].isRequired)return!0;return!1}compatibleContent(a){return this==a||this.contentMatch.compatible(a.contentMatch)}computeAttrs(a){return!a&&this.defaultAttrs?this.defaultAttrs:xe(this.attrs,a)}create(a=null,p,E){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new kt(this,this.computeAttrs(a),g.from(p),et.setFrom(E))}createChecked(a=null,p,E){return p=g.from(p),this.checkContent(p),new kt(this,this.computeAttrs(a),p,et.setFrom(E))}createAndFill(a=null,p,E){if(a=this.computeAttrs(a),(p=g.from(p)).size){let K=this.contentMatch.fillBefore(p);if(!K)return null;p=K.append(p)}let P=this.contentMatch.matchFragment(p),k=P&&P.fillBefore(g.empty,!0);return k?new kt(this,a,p.append(k),et.setFrom(E)):null}validContent(a){let p=this.contentMatch.matchFragment(a);if(!p||!p.validEnd)return!1;for(let E=0;E<a.childCount;E++)if(!this.allowsMarks(a.child(E).marks))return!1;return!0}checkContent(a){if(!this.validContent(a))throw new RangeError(`Invalid content for node ${this.name}: ${a.toString().slice(0,50)}`)}allowsMarkType(a){return null==this.markSet||this.markSet.indexOf(a)>-1}allowsMarks(a){if(null==this.markSet)return!0;for(let p=0;p<a.length;p++)if(!this.allowsMarkType(a[p].type))return!1;return!0}allowedMarks(a){if(null==this.markSet)return a;let p;for(let E=0;E<a.length;E++)this.allowsMarkType(a[E].type)?p&&p.push(a[E]):p||(p=a.slice(0,E));return p?p.length?p:et.none:a}static compile(a,p){let E=Object.create(null);a.forEach((k,K)=>E[k]=new ge(k,p,K));let P=p.spec.topNode||"doc";if(!E[P])throw new RangeError("Schema is missing its top node type ('"+P+"')");if(!E.text)throw new RangeError("Every schema needs a 'text' type");for(let k in E.text.attrs)throw new RangeError("The text node type should not have attributes");return E}}class Ae{constructor(a){this.hasDefault=Object.prototype.hasOwnProperty.call(a,"default"),this.default=a.default}get isRequired(){return!this.hasDefault}}class Ce{constructor(a,p,E,P){this.name=a,this.rank=p,this.schema=E,this.spec=P,this.attrs=Ne(P.attrs),this.excluded=null;let k=Ke(this.attrs);this.instance=k?new et(this,k):null}create(a=null){return!a&&this.instance?this.instance:new et(this,xe(this.attrs,a))}static compile(a,p){let E=Object.create(null),P=0;return a.forEach((k,K)=>E[k]=new Ce(k,P++,p,K)),E}removeFromSet(a){for(var p=0;p<a.length;p++)a[p].type==this&&(a=a.slice(0,p).concat(a.slice(p+1)),p--);return a}isInSet(a){for(let p=0;p<a.length;p++)if(a[p].type==this)return a[p]}excludes(a){return this.excluded.indexOf(a)>-1}}class Pe{constructor(a){this.cached=Object.create(null);let p=this.spec={};for(let P in a)p[P]=a[P];p.nodes=l.from(a.nodes),p.marks=l.from(a.marks||{}),this.nodes=ge.compile(this.spec.nodes,this),this.marks=Ce.compile(this.spec.marks,this);let E=Object.create(null);for(let P in this.nodes){if(P in this.marks)throw new RangeError(P+" can not be both a node and a mark");let k=this.nodes[P],K=k.spec.content||"",at=k.spec.marks;k.contentMatch=E[K]||(E[K]=dt.parse(K,this.nodes)),k.inlineContent=k.contentMatch.inlineContent,k.markSet="_"==at?null:at?Be(this,at.split(" ")):""!=at&&k.inlineContent?null:[]}for(let P in this.marks){let k=this.marks[P],K=k.spec.excludes;k.excluded=null==K?[k]:""==K?[]:Be(this,K.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(a,p=null,E,P){if("string"==typeof a)a=this.nodeType(a);else{if(!(a instanceof ge))throw new RangeError("Invalid node type: "+a);if(a.schema!=this)throw new RangeError("Node type from different schema used ("+a.name+")")}return a.createChecked(p,E,P)}text(a,p){let E=this.nodes.text;return new z(E,E.defaultAttrs,a,et.setFrom(p))}mark(a,p){return"string"==typeof a&&(a=this.marks[a]),a.create(p)}nodeFromJSON(a){return kt.fromJSON(this,a)}markFromJSON(a){return et.fromJSON(this,a)}nodeType(a){let p=this.nodes[a];if(!p)throw new RangeError("Unknown node type: "+a);return p}}function Be(H,a){let p=[];for(let E=0;E<a.length;E++){let P=a[E],k=H.marks[P],K=k;if(k)p.push(k);else for(let at in H.marks){let Ht=H.marks[at];("_"==P||Ht.spec.group&&Ht.spec.group.split(" ").indexOf(P)>-1)&&p.push(K=Ht)}if(!K)throw new SyntaxError("Unknown mark type: '"+a[E]+"'")}return p}class Me{constructor(a,p){this.schema=a,this.rules=p,this.tags=[],this.styles=[],p.forEach(E=>{E.tag?this.tags.push(E):E.style&&this.styles.push(E)}),this.normalizeLists=!this.tags.some(E=>{if(!/^(ul|ol)\b/.test(E.tag)||!E.node)return!1;let P=a.nodes[E.node];return P.contentMatch.matchType(P)})}parse(a,p={}){let E=new Ee(this,p,!1);return E.addAll(a,p.from,p.to),E.finish()}parseSlice(a,p={}){let E=new Ee(this,p,!0);return E.addAll(a,p.from,p.to),ct.maxOpen(E.finish())}matchTag(a,p,E){for(let P=E?this.tags.indexOf(E)+1:0;P<this.tags.length;P++){let k=this.tags[P];if(b(a,k.tag)&&(void 0===k.namespace||a.namespaceURI==k.namespace)&&(!k.context||p.matchesContext(k.context))){if(k.getAttrs){let K=k.getAttrs(a);if(!1===K)continue;k.attrs=K||void 0}return k}}}matchStyle(a,p,E,P){for(let k=P?this.styles.indexOf(P)+1:0;k<this.styles.length;k++){let K=this.styles[k],at=K.style;if(!(0!=at.indexOf(a)||K.context&&!E.matchesContext(K.context)||at.length>a.length&&(61!=at.charCodeAt(a.length)||at.slice(a.length+1)!=p))){if(K.getAttrs){let Ht=K.getAttrs(p);if(!1===Ht)continue;K.attrs=Ht||void 0}return K}}}static schemaRules(a){let p=[];function E(P){let k=null==P.priority?50:P.priority,K=0;for(;K<p.length;K++){let at=p[K];if((null==at.priority?50:at.priority)<k)break}p.splice(K,0,P)}for(let P in a.marks){let k=a.marks[P].spec.parseDOM;k&&k.forEach(K=>{E(K=I(K)),K.mark||K.ignore||K.clearMark||(K.mark=P)})}for(let P in a.nodes){let k=a.nodes[P].spec.parseDOM;k&&k.forEach(K=>{E(K=I(K)),K.node||K.ignore||K.mark||(K.node=P)})}return p}static fromSchema(a){return a.cached.domParser||(a.cached.domParser=new Me(a,Me.schemaRules(a)))}}const ke={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ye={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},He={ol:!0,ul:!0};function _e(H,a,p){return null!=a?(a?1:0)|("full"===a?2:0):H&&"pre"==H.whitespace?3:-5&p}class he{constructor(a,p,E,P,k,K,at){this.type=a,this.attrs=p,this.marks=E,this.pendingMarks=P,this.solid=k,this.options=at,this.content=[],this.activeMarks=et.none,this.stashMarks=[],this.match=K||(4&at?null:a.contentMatch)}findWrapping(a){if(!this.match){if(!this.type)return[];let p=this.type.contentMatch.fillBefore(g.from(a));if(!p){let P,E=this.type.contentMatch;return(P=E.findWrapping(a.type))?(this.match=E,P):null}this.match=this.type.contentMatch.matchFragment(p)}return this.match.findWrapping(a.type)}finish(a){if(!(1&this.options)){let P,E=this.content[this.content.length-1];if(E&&E.isText&&(P=/[ \t\r\n\u000c]+$/.exec(E.text))){let k=E;E.text.length==P[0].length?this.content.pop():this.content[this.content.length-1]=k.withText(k.text.slice(0,k.text.length-P[0].length))}}let p=g.from(this.content);return!a&&this.match&&(p=p.append(this.match.fillBefore(g.empty,!0))),this.type?this.type.create(this.attrs,p,this.marks):p}popFromStashMark(a){for(let p=this.stashMarks.length-1;p>=0;p--)if(a.eq(this.stashMarks[p]))return this.stashMarks.splice(p,1)[0]}applyPending(a){for(let p=0,E=this.pendingMarks;p<E.length;p++){let P=E[p];(this.type?this.type.allowsMarkType(P.type):w(P.type,a))&&!P.isInSet(this.activeMarks)&&(this.activeMarks=P.addToSet(this.activeMarks),this.pendingMarks=P.removeFromSet(this.pendingMarks))}}inlineContext(a){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:a.parentNode&&!ke.hasOwnProperty(a.parentNode.nodeName.toLowerCase())}}class Ee{constructor(a,p,E){this.parser=a,this.options=p,this.isOpen=E,this.open=0;let k,P=p.topNode,K=_e(null,p.preserveWhitespace,0)|(E?4:0);k=P?new he(P.type,P.attrs,et.none,et.none,!0,p.topMatch||P.type.contentMatch,K):new he(E?null:a.schema.topNodeType,null,et.none,et.none,!0,null,K),this.nodes=[k],this.find=p.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(a){if(3==a.nodeType)this.addTextNode(a);else if(1==a.nodeType){let p=a.getAttribute("style");if(p){let E=this.readStyles(function(H){let p,a=/\s*([\w-]+)\s*:\s*([^;]+)/g,E=[];for(;p=a.exec(H);)E.push(p[1],p[2].trim());return E}(p));if(!E)return;let[P,k]=E,K=this.top;for(let at=0;at<k.length;at++)this.removePendingMark(k[at],K);for(let at=0;at<P.length;at++)this.addPendingMark(P[at]);this.addElement(a);for(let at=0;at<P.length;at++)this.removePendingMark(P[at],K);for(let at=0;at<k.length;at++)this.addPendingMark(k[at])}else this.addElement(a)}}addTextNode(a){let p=a.nodeValue,E=this.top;if(2&E.options||E.inlineContext(a)||/[^ \t\r\n\u000c]/.test(p)){if(1&E.options)p=2&E.options?p.replace(/\r\n?/g,"\n"):p.replace(/\r?\n|\r/g," ");else if(p=p.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(p)&&this.open==this.nodes.length-1){let P=E.content[E.content.length-1],k=a.previousSibling;(!P||k&&"BR"==k.nodeName||P.isText&&/[ \t\r\n\u000c]$/.test(P.text))&&(p=p.slice(1))}p&&this.insertNode(this.parser.schema.text(p)),this.findInText(a)}else this.findInside(a)}addElement(a,p){let P,E=a.nodeName.toLowerCase();He.hasOwnProperty(E)&&this.parser.normalizeLists&&function(H){for(let a=H.firstChild,p=null;a;a=a.nextSibling){let E=1==a.nodeType?a.nodeName.toLowerCase():null;E&&He.hasOwnProperty(E)&&p?(p.appendChild(a),a=p):"li"==E?p=a:E&&(p=null)}}(a);let k=this.options.ruleFromNode&&this.options.ruleFromNode(a)||(P=this.parser.matchTag(a,this,p));if(k?k.ignore:Ye.hasOwnProperty(E))this.findInside(a),this.ignoreFallback(a);else if(!k||k.skip||k.closeParent){k&&k.closeParent?this.open=Math.max(0,this.open-1):k&&k.skip.nodeType&&(a=k.skip);let K,at=this.top,Ht=this.needsBlock;if(ke.hasOwnProperty(E))at.content.length&&at.content[0].isInline&&this.open&&(this.open--,at=this.top),K=!0,at.type||(this.needsBlock=!0);else if(!a.firstChild)return void this.leafFallback(a);this.addAll(a),K&&this.sync(at),this.needsBlock=Ht}else this.addElementByRule(a,k,!1===k.consuming?P:void 0)}leafFallback(a){"BR"==a.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(a.ownerDocument.createTextNode("\n"))}ignoreFallback(a){"BR"==a.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(a){let p=et.none,E=et.none;t:for(let P=0;P<a.length;P+=2)for(let k;;){let K=this.parser.matchStyle(a[P],a[P+1],this,k);if(!K)continue t;if(K.ignore)return null;if(K.clearMark?this.top.pendingMarks.forEach(at=>{K.clearMark(at)&&(E=at.addToSet(E))}):p=this.parser.schema.marks[K.mark].create(K.attrs).addToSet(p),!1!==K.consuming)break;k=K}return[p,E]}addElementByRule(a,p,E){let P,k,K;p.node?(k=this.parser.schema.nodes[p.node],k.isLeaf?this.insertNode(k.create(p.attrs))||this.leafFallback(a):P=this.enter(k,p.attrs||null,p.preserveWhitespace)):(K=this.parser.schema.marks[p.mark].create(p.attrs),this.addPendingMark(K));let at=this.top;if(k&&k.isLeaf)this.findInside(a);else if(E)this.addElement(a,E);else if(p.getContent)this.findInside(a),p.getContent(a,this.parser.schema).forEach(Ht=>this.insertNode(Ht));else{let Ht=a;"string"==typeof p.contentElement?Ht=a.querySelector(p.contentElement):"function"==typeof p.contentElement?Ht=p.contentElement(a):p.contentElement&&(Ht=p.contentElement),this.findAround(a,Ht,!0),this.addAll(Ht)}P&&this.sync(at)&&this.open--,K&&this.removePendingMark(K,at)}addAll(a,p,E){let P=p||0;for(let k=p?a.childNodes[p]:a.firstChild,K=null==E?null:a.childNodes[E];k!=K;k=k.nextSibling,++P)this.findAtPoint(a,P),this.addDOM(k);this.findAtPoint(a,P)}findPlace(a){let p,E;for(let P=this.open;P>=0;P--){let k=this.nodes[P],K=k.findWrapping(a);if(K&&(!p||p.length>K.length)&&(p=K,E=k,!K.length)||k.solid)break}if(!p)return!1;this.sync(E);for(let P=0;P<p.length;P++)this.enterInner(p[P],null,!1);return!0}insertNode(a){if(a.isInline&&this.needsBlock&&!this.top.type){let p=this.textblockFromContext();p&&this.enterInner(p)}if(this.findPlace(a)){this.closeExtra();let p=this.top;p.applyPending(a.type),p.match&&(p.match=p.match.matchType(a.type));let E=p.activeMarks;for(let P=0;P<a.marks.length;P++)(!p.type||p.type.allowsMarkType(a.marks[P].type))&&(E=a.marks[P].addToSet(E));return p.content.push(a.mark(E)),!0}return!1}enter(a,p,E){let P=this.findPlace(a.create(p));return P&&this.enterInner(a,p,!0,E),P}enterInner(a,p=null,E=!1,P){this.closeExtra();let k=this.top;k.applyPending(a),k.match=k.match&&k.match.matchType(a);let K=_e(a,P,k.options);4&k.options&&0==k.content.length&&(K|=4),this.nodes.push(new he(a,p,k.activeMarks,k.pendingMarks,E,null,K)),this.open++}closeExtra(a=!1){let p=this.nodes.length-1;if(p>this.open){for(;p>this.open;p--)this.nodes[p-1].content.push(this.nodes[p].finish(a));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(a){for(let p=this.open;p>=0;p--)if(this.nodes[p]==a)return this.open=p,!0;return!1}get currentPos(){this.closeExtra();let a=0;for(let p=this.open;p>=0;p--){let E=this.nodes[p].content;for(let P=E.length-1;P>=0;P--)a+=E[P].nodeSize;p&&a++}return a}findAtPoint(a,p){if(this.find)for(let E=0;E<this.find.length;E++)this.find[E].node==a&&this.find[E].offset==p&&(this.find[E].pos=this.currentPos)}findInside(a){if(this.find)for(let p=0;p<this.find.length;p++)null==this.find[p].pos&&1==a.nodeType&&a.contains(this.find[p].node)&&(this.find[p].pos=this.currentPos)}findAround(a,p,E){if(a!=p&&this.find)for(let P=0;P<this.find.length;P++)null==this.find[P].pos&&1==a.nodeType&&a.contains(this.find[P].node)&&p.compareDocumentPosition(this.find[P].node)&(E?2:4)&&(this.find[P].pos=this.currentPos)}findInText(a){if(this.find)for(let p=0;p<this.find.length;p++)this.find[p].node==a&&(this.find[p].pos=this.currentPos-(a.nodeValue.length-this.find[p].offset))}matchesContext(a){if(a.indexOf("|")>-1)return a.split(/\s*\|\s*/).some(this.matchesContext,this);let p=a.split("/"),E=this.options.context,P=!(this.isOpen||E&&E.parent.type!=this.nodes[0].type),k=(P?0:1)-(E?E.depth+1:0),K=(at,Ht)=>{for(;at>=0;at--){let te=p[at];if(""==te){if(at==p.length-1||0==at)continue;for(;Ht>=k;Ht--)if(K(at-1,Ht))return!0;return!1}{let ee=Ht>0||0==Ht&&P?this.nodes[Ht].type:E&&Ht>=k?E.node(Ht-k).type:null;if(!ee||ee.name!=te&&-1==ee.groups.indexOf(te))return!1;Ht--}}return!0};return K(p.length-1,this.open)}textblockFromContext(){let a=this.options.context;if(a)for(let p=a.depth;p>=0;p--){let E=a.node(p).contentMatchAt(a.indexAfter(p)).defaultType;if(E&&E.isTextblock&&E.defaultAttrs)return E}for(let p in this.parser.schema.nodes){let E=this.parser.schema.nodes[p];if(E.isTextblock&&E.defaultAttrs)return E}}addPendingMark(a){let p=function(H,a){for(let p=0;p<a.length;p++)if(H.eq(a[p]))return a[p]}(a,this.top.pendingMarks);p&&this.top.stashMarks.push(p),this.top.pendingMarks=a.addToSet(this.top.pendingMarks)}removePendingMark(a,p){for(let E=this.open;E>=0;E--){let P=this.nodes[E];if(P.pendingMarks.lastIndexOf(a)>-1)P.pendingMarks=a.removeFromSet(P.pendingMarks);else{P.activeMarks=a.removeFromSet(P.activeMarks);let K=P.popFromStashMark(a);K&&P.type&&P.type.allowsMarkType(K.type)&&(P.activeMarks=K.addToSet(P.activeMarks))}if(P==p)break}}}function b(H,a){return(H.matches||H.msMatchesSelector||H.webkitMatchesSelector||H.mozMatchesSelector).call(H,a)}function I(H){let a={};for(let p in H)a[p]=H[p];return a}function w(H,a){let p=a.schema.nodes;for(let E in p){let P=p[E];if(!P.allowsMarkType(H))continue;let k=[],K=at=>{k.push(at);for(let Ht=0;Ht<at.edgeCount;Ht++){let{type:te,next:ee}=at.edge(Ht);if(te==a||k.indexOf(ee)<0&&K(ee))return!0}};if(K(P.contentMatch))return!0}}class U{constructor(a,p){this.nodes=a,this.marks=p}serializeFragment(a,p={},E){E||(E=Nt(p).createDocumentFragment());let P=E,k=[];return a.forEach(K=>{if(k.length||K.marks.length){let at=0,Ht=0;for(;at<k.length&&Ht<K.marks.length;){let te=K.marks[Ht];if(this.marks[te.type.name]){if(!te.eq(k[at][0])||!1===te.type.spec.spanning)break;at++,Ht++}else Ht++}for(;at<k.length;)P=k.pop()[1];for(;Ht<K.marks.length;){let te=K.marks[Ht++],ee=this.serializeMark(te,K.isInline,p);ee&&(k.push([te,P]),P.appendChild(ee.dom),P=ee.contentDOM||ee.dom)}}P.appendChild(this.serializeNodeInner(K,p))}),E}serializeNodeInner(a,p){let{dom:E,contentDOM:P}=U.renderSpec(Nt(p),this.nodes[a.type.name](a));if(P){if(a.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(a.content,p,P)}return E}serializeNode(a,p={}){let E=this.serializeNodeInner(a,p);for(let P=a.marks.length-1;P>=0;P--){let k=this.serializeMark(a.marks[P],a.isInline,p);k&&((k.contentDOM||k.dom).appendChild(E),E=k.dom)}return E}serializeMark(a,p,E={}){let P=this.marks[a.type.name];return P&&U.renderSpec(Nt(E),P(a,p))}static renderSpec(a,p,E=null){if("string"==typeof p)return{dom:a.createTextNode(p)};if(null!=p.nodeType)return{dom:p};if(p.dom&&null!=p.dom.nodeType)return p;let P=p[0],k=P.indexOf(" ");k>0&&(E=P.slice(0,k),P=P.slice(k+1));let K,at=E?a.createElementNS(E,P):a.createElement(P),Ht=p[1],te=1;if(Ht&&"object"==typeof Ht&&null==Ht.nodeType&&!Array.isArray(Ht)){te=2;for(let ee in Ht)if(null!=Ht[ee]){let we=ee.indexOf(" ");we>0?at.setAttributeNS(ee.slice(0,we),ee.slice(we+1),Ht[ee]):at.setAttribute(ee,Ht[ee])}}for(let ee=te;ee<p.length;ee++){let we=p[ee];if(0===we){if(ee<p.length-1||ee>te)throw new RangeError("Content hole must be the only child of its parent node");return{dom:at,contentDOM:at}}{let{dom:Je,contentDOM:$}=U.renderSpec(a,we,E);if(at.appendChild(Je),$){if(K)throw new RangeError("Multiple content holes");K=$}}}return{dom:at,contentDOM:K}}static fromSchema(a){return a.cached.domSerializer||(a.cached.domSerializer=new U(this.nodesFromSchema(a),this.marksFromSchema(a)))}static nodesFromSchema(a){let p=yt(a.nodes);return p.text||(p.text=E=>E.text),p}static marksFromSchema(a){return yt(a.marks)}}function yt(H){let a={};for(let p in H){let E=H[p].spec.toDOM;E&&(a[p]=E)}return a}function Nt(H){return H.document||window.document}},62463:(Yt,Ct,c)=>{c.d(Ct,{Bs:()=>X,C1:()=>Mt,H$:()=>wt,Sy:()=>Dt,Y1:()=>D,qv:()=>mt,xm:()=>g,yy:()=>xt});var C=c(77346),l=c(38480);const y=Object.create(null);class D{constructor(z,rt,dt){this.$anchor=z,this.$head=rt,this.ranges=dt||[new g(z.min(rt),z.max(rt))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let z=this.ranges;for(let rt=0;rt<z.length;rt++)if(z[rt].$from.pos!=z[rt].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(z,rt=C.p2.empty){let dt=rt.content.lastChild,st=null;for(let nt=0;nt<rt.openEnd;nt++)st=dt,dt=dt.lastChild;let J=z.steps.length,Q=this.ranges;for(let nt=0;nt<Q.length;nt++){let{$from:Lt,$to:Jt}=Q[nt],Zt=z.mapping.slice(J);z.replaceRange(Zt.map(Lt.pos),Zt.map(Jt.pos),nt?C.p2.empty:rt),0==nt&&bt(z,J,(dt?dt.isInline:st&&st.isTextblock)?-1:1)}}replaceWith(z,rt){let dt=z.steps.length,st=this.ranges;for(let J=0;J<st.length;J++){let{$from:Q,$to:nt}=st[J],Lt=z.mapping.slice(dt),Jt=Lt.map(Q.pos),Zt=Lt.map(nt.pos);J?z.deleteRange(Jt,Zt):(z.replaceRangeWith(Jt,Zt,rt),bt(z,dt,rt.isInline?-1:1))}}static findFrom(z,rt,dt=!1){let st=z.parent.inlineContent?new X(z):ft(z.node(0),z.parent,z.pos,z.index(),rt,dt);if(st)return st;for(let J=z.depth-1;J>=0;J--){let Q=rt<0?ft(z.node(0),z.node(J),z.before(J+1),z.index(J),rt,dt):ft(z.node(0),z.node(J),z.after(J+1),z.index(J)+1,rt,dt);if(Q)return Q}return null}static near(z,rt=1){return this.findFrom(z,rt)||this.findFrom(z,-rt)||new Mt(z.node(0))}static atStart(z){return ft(z,z,0,0,1)||new Mt(z)}static atEnd(z){return ft(z,z,z.content.size,z.childCount,-1)||new Mt(z)}static fromJSON(z,rt){if(!rt||!rt.type)throw new RangeError("Invalid input for Selection.fromJSON");let dt=y[rt.type];if(!dt)throw new RangeError(`No selection type ${rt.type} defined`);return dt.fromJSON(z,rt)}static jsonID(z,rt){if(z in y)throw new RangeError("Duplicate use of selection JSON ID "+z);return y[z]=rt,rt.prototype.jsonID=z,rt}getBookmark(){return X.between(this.$anchor,this.$head).getBookmark()}}D.prototype.visible=!0;class g{constructor(z,rt){this.$from=z,this.$to=rt}}let ot=!1;function B(kt){!ot&&!kt.parent.inlineContent&&(ot=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+kt.parent.type.name+")"))}class X extends D{constructor(z,rt=z){B(z),B(rt),super(z,rt)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(z,rt){let dt=z.resolve(rt.map(this.head));if(!dt.parent.inlineContent)return D.near(dt);let st=z.resolve(rt.map(this.anchor));return new X(st.parent.inlineContent?st:dt,dt)}replace(z,rt=C.p2.empty){if(super.replace(z,rt),rt==C.p2.empty){let dt=this.$from.marksAcross(this.$to);dt&&z.ensureMarks(dt)}}eq(z){return z instanceof X&&z.anchor==this.anchor&&z.head==this.head}getBookmark(){return new et(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(z,rt){if("number"!=typeof rt.anchor||"number"!=typeof rt.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new X(z.resolve(rt.anchor),z.resolve(rt.head))}static create(z,rt,dt=rt){let st=z.resolve(rt);return new this(st,dt==rt?st:z.resolve(dt))}static between(z,rt,dt){let st=z.pos-rt.pos;if((!dt||st)&&(dt=st>=0?1:-1),!rt.parent.inlineContent){let J=D.findFrom(rt,dt,!0)||D.findFrom(rt,-dt,!0);if(!J)return D.near(rt,dt);rt=J.$head}return z.parent.inlineContent||(0==st||(z=(D.findFrom(z,-dt,!0)||D.findFrom(z,dt,!0)).$anchor).pos<rt.pos!=st<0)&&(z=rt),new X(z,rt)}}D.jsonID("text",X);class et{constructor(z,rt){this.anchor=z,this.head=rt}map(z){return new et(z.map(this.anchor),z.map(this.head))}resolve(z){return X.between(z.resolve(this.anchor),z.resolve(this.head))}}class mt extends D{constructor(z){let rt=z.nodeAfter,dt=z.node(0).resolve(z.pos+rt.nodeSize);super(z,dt),this.node=rt}map(z,rt){let{deleted:dt,pos:st}=rt.mapResult(this.anchor),J=z.resolve(st);return dt?D.near(J):new mt(J)}content(){return new C.p2(C.HY.from(this.node),0,0)}eq(z){return z instanceof mt&&z.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new ct(this.anchor)}static fromJSON(z,rt){if("number"!=typeof rt.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new mt(z.resolve(rt.anchor))}static create(z,rt){return new mt(z.resolve(rt))}static isSelectable(z){return!z.isText&&!1!==z.type.spec.selectable}}mt.prototype.visible=!1,D.jsonID("node",mt);class ct{constructor(z){this.anchor=z}map(z){let{deleted:rt,pos:dt}=z.mapResult(this.anchor);return rt?new et(dt,dt):new ct(dt)}resolve(z){let rt=z.resolve(this.anchor),dt=rt.nodeAfter;return dt&&mt.isSelectable(dt)?new mt(rt):D.near(rt)}}class Mt extends D{constructor(z){super(z.resolve(0),z.resolve(z.content.size))}replace(z,rt=C.p2.empty){if(rt==C.p2.empty){z.delete(0,z.doc.content.size);let dt=D.atStart(z.doc);dt.eq(z.selection)||z.setSelection(dt)}else super.replace(z,rt)}toJSON(){return{type:"all"}}static fromJSON(z){return new Mt(z)}map(z){return new Mt(z)}eq(z){return z instanceof Mt}getBookmark(){return it}}D.jsonID("all",Mt);const it={map(){return this},resolve:kt=>new Mt(kt)};function ft(kt,z,rt,dt,st,J=!1){if(z.inlineContent)return X.create(kt,rt);for(let Q=dt-(st>0?0:1);st>0?Q<z.childCount:Q>=0;Q+=st){let nt=z.child(Q);if(nt.isAtom){if(!J&&mt.isSelectable(nt))return mt.create(kt,rt-(st<0?nt.nodeSize:0))}else{let Lt=ft(kt,nt,rt+st,st<0?nt.childCount:0,st,J);if(Lt)return Lt}rt+=nt.nodeSize*st}return null}function bt(kt,z,rt){let dt=kt.steps.length-1;if(dt<z)return;let Q,st=kt.steps[dt];(st instanceof l.Pu||st instanceof l.FC)&&(kt.mapping.maps[dt].forEach((nt,Lt,Jt,Zt)=>{null==Q&&(Q=Zt)}),kt.setSelection(D.near(kt.doc.resolve(Q),rt)))}class pt extends l.wx{constructor(z){super(z.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=z.selection,this.storedMarks=z.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(z){if(z.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=z,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(z){return this.storedMarks=z,this.updated|=2,this}ensureMarks(z){return C.vc.sameSet(this.storedMarks||this.selection.$from.marks(),z)||this.setStoredMarks(z),this}addStoredMark(z){return this.ensureMarks(z.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(z){return this.ensureMarks(z.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(z,rt){super.addStep(z,rt),this.updated=-3&this.updated,this.storedMarks=null}setTime(z){return this.time=z,this}replaceSelection(z){return this.selection.replace(this,z),this}replaceSelectionWith(z,rt=!0){let dt=this.selection;return rt&&(z=z.mark(this.storedMarks||(dt.empty?dt.$from.marks():dt.$from.marksAcross(dt.$to)||C.vc.none))),dt.replaceWith(this,z),this}deleteSelection(){return this.selection.replace(this),this}insertText(z,rt,dt){let st=this.doc.type.schema;if(null==rt)return z?this.replaceSelectionWith(st.text(z),!0):this.deleteSelection();{if(null==dt&&(dt=rt),dt=null==dt?rt:dt,!z)return this.deleteRange(rt,dt);let J=this.storedMarks;if(!J){let Q=this.doc.resolve(rt);J=dt==rt?Q.marks():Q.marksAcross(this.doc.resolve(dt))}return this.replaceRangeWith(rt,dt,st.text(z,J)),this.selection.empty||this.setSelection(D.near(this.selection.$to)),this}}setMeta(z,rt){return this.meta["string"==typeof z?z:z.key]=rt,this}getMeta(z){return this.meta["string"==typeof z?z:z.key]}get isGeneric(){for(let z in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function tt(kt,z){return z&&kt?kt.bind(z):kt}class F{constructor(z,rt,dt){this.name=z,this.init=tt(rt.init,dt),this.apply=tt(rt.apply,dt)}}const ut=[new F("doc",{init:kt=>kt.doc||kt.schema.topNodeType.createAndFill(),apply:kt=>kt.doc}),new F("selection",{init:(kt,z)=>kt.selection||D.atStart(z.doc),apply:kt=>kt.selection}),new F("storedMarks",{init:kt=>kt.storedMarks||null,apply:(kt,z,rt,dt)=>dt.selection.$cursor?kt.storedMarks:null}),new F("scrollToSelection",{init:()=>0,apply:(kt,z)=>kt.scrolledIntoView?z+1:z})];class Y{constructor(z,rt){this.schema=z,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=ut.slice(),rt&&rt.forEach(dt=>{if(this.pluginsByKey[dt.key])throw new RangeError("Adding different instances of a keyed plugin ("+dt.key+")");this.plugins.push(dt),this.pluginsByKey[dt.key]=dt,dt.spec.state&&this.fields.push(new F(dt.key,dt.spec.state,dt))})}}class xt{constructor(z){this.config=z}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(z){return this.applyTransaction(z).state}filterTransaction(z,rt=-1){for(let dt=0;dt<this.config.plugins.length;dt++)if(dt!=rt){let st=this.config.plugins[dt];if(st.spec.filterTransaction&&!st.spec.filterTransaction.call(st,z,this))return!1}return!0}applyTransaction(z){if(!this.filterTransaction(z))return{state:this,transactions:[]};let rt=[z],dt=this.applyInner(z),st=null;for(;;){let J=!1;for(let Q=0;Q<this.config.plugins.length;Q++){let nt=this.config.plugins[Q];if(nt.spec.appendTransaction){let Lt=st?st[Q].n:0,Jt=st?st[Q].state:this,Zt=Lt<rt.length&&nt.spec.appendTransaction.call(nt,Lt?rt.slice(Lt):rt,Jt,dt);if(Zt&&dt.filterTransaction(Zt,Q)){if(Zt.setMeta("appendedTransaction",z),!st){st=[];for(let ne=0;ne<this.config.plugins.length;ne++)st.push(ne<Q?{state:dt,n:rt.length}:{state:this,n:0})}rt.push(Zt),dt=dt.applyInner(Zt),J=!0}st&&(st[Q]={state:dt,n:rt.length})}}if(!J)return{state:dt,transactions:rt}}}applyInner(z){if(!z.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let rt=new xt(this.config),dt=this.config.fields;for(let st=0;st<dt.length;st++){let J=dt[st];rt[J.name]=J.apply(z,this[J.name],this,rt)}return rt}get tr(){return new pt(this)}static create(z){let rt=new Y(z.doc?z.doc.type.schema:z.schema,z.plugins),dt=new xt(rt);for(let st=0;st<rt.fields.length;st++)dt[rt.fields[st].name]=rt.fields[st].init(z,dt);return dt}reconfigure(z){let rt=new Y(this.schema,z.plugins),dt=rt.fields,st=new xt(rt);for(let J=0;J<dt.length;J++){let Q=dt[J].name;st[Q]=this.hasOwnProperty(Q)?this[Q]:dt[J].init(z,st)}return st}toJSON(z){let rt={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(rt.storedMarks=this.storedMarks.map(dt=>dt.toJSON())),z&&"object"==typeof z)for(let dt in z){if("doc"==dt||"selection"==dt)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let st=z[dt],J=st.spec.state;J&&J.toJSON&&(rt[dt]=J.toJSON.call(st,this[st.key]))}return rt}static fromJSON(z,rt,dt){if(!rt)throw new RangeError("Invalid input for EditorState.fromJSON");if(!z.schema)throw new RangeError("Required config field 'schema' missing");let st=new Y(z.schema,z.plugins),J=new xt(st);return st.fields.forEach(Q=>{if("doc"==Q.name)J.doc=C.NB.fromJSON(z.schema,rt.doc);else if("selection"==Q.name)J.selection=D.fromJSON(J.doc,rt.selection);else if("storedMarks"==Q.name)rt.storedMarks&&(J.storedMarks=rt.storedMarks.map(z.schema.markFromJSON));else{if(dt)for(let nt in dt){let Lt=dt[nt],Jt=Lt.spec.state;if(Lt.key==Q.name&&Jt&&Jt.fromJSON&&Object.prototype.hasOwnProperty.call(rt,nt))return void(J[Q.name]=Jt.fromJSON.call(Lt,z,rt[nt],J))}J[Q.name]=Q.init(z,J)}}),J}}function Bt(kt,z,rt){for(let dt in kt){let st=kt[dt];st instanceof Function?st=st.bind(z):"handleDOMEvents"==dt&&(st=Bt(st,z,{})),rt[dt]=st}return rt}class Dt{constructor(z){this.spec=z,this.props={},z.props&&Bt(z.props,this,this.props),this.key=z.key?z.key.key:_t("plugin")}getState(z){return z[this.key]}}const St=Object.create(null);function _t(kt){return kt in St?kt+"$"+ ++St[kt]:(St[kt]=0,kt+"$")}class wt{constructor(z="key"){this.key=_t(z)}get(z){return z.config.pluginsByKey[this.key]}getState(z){return z[this.key]}}},38480:(Yt,Ct,c)=>{c.d(Ct,{Ax:()=>Jt,FC:()=>Y,GJ:()=>pe,Mn:()=>ne,Pu:()=>ut,dR:()=>Ke,k9:()=>wt,nd:()=>z,nj:()=>fe,vs:()=>it,wx:()=>Ee});var C=c(77346);const y=Math.pow(2,16);function D(gt,b){return gt+b*y}function g(gt){return 65535&gt}class ct{constructor(b,O,I){this.pos=b,this.delInfo=O,this.recover=I}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class Mt{constructor(b,O=!1){if(this.ranges=b,this.inverted=O,!b.length&&Mt.empty)return Mt.empty}recover(b){let O=0,I=g(b);if(!this.inverted)for(let w=0;w<I;w++)O+=this.ranges[3*w+2]-this.ranges[3*w+1];return this.ranges[3*I]+O+((gt=b)-(65535&gt))/y;var gt}mapResult(b,O=1){return this._map(b,O,!1)}map(b,O=1){return this._map(b,O,!0)}_map(b,O,I){let w=0,V=this.inverted?2:1,U=this.inverted?1:2;for(let yt=0;yt<this.ranges.length;yt+=3){let Nt=this.ranges[yt]-(this.inverted?w:0);if(Nt>b)break;let H=this.ranges[yt+V],a=this.ranges[yt+U],p=Nt+H;if(b<=p){let P=Nt+w+((H?b==Nt?-1:b==p?1:O:O)<0?0:a);if(I)return P;let k=b==(O<0?Nt:p)?null:D(yt/3,b-Nt),K=b==Nt?2:b==p?1:4;return(O<0?b!=Nt:b!=p)&&(K|=8),new ct(P,K,k)}w+=a-H}return I?b+w:new ct(b+w,0,null)}touches(b,O){let I=0,w=g(O),V=this.inverted?2:1,U=this.inverted?1:2;for(let yt=0;yt<this.ranges.length;yt+=3){let Nt=this.ranges[yt]-(this.inverted?I:0);if(Nt>b)break;let H=this.ranges[yt+V];if(b<=Nt+H&&yt==3*w)return!0;I+=this.ranges[yt+U]-H}return!1}forEach(b){let O=this.inverted?2:1,I=this.inverted?1:2;for(let w=0,V=0;w<this.ranges.length;w+=3){let U=this.ranges[w],yt=U-(this.inverted?V:0),Nt=U+(this.inverted?0:V),H=this.ranges[w+O],a=this.ranges[w+I];b(yt,yt+H,Nt,Nt+a),V+=a-H}}invert(){return new Mt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(b){return 0==b?Mt.empty:new Mt(b<0?[0,-b,0]:[0,0,b])}}Mt.empty=new Mt([]);class it{constructor(b=[],O,I=0,w=b.length){this.maps=b,this.mirror=O,this.from=I,this.to=w}slice(b=0,O=this.maps.length){return new it(this.maps,this.mirror,b,O)}copy(){return new it(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(b,O){this.to=this.maps.push(b),null!=O&&this.setMirror(this.maps.length-1,O)}appendMapping(b){for(let O=0,I=this.maps.length;O<b.maps.length;O++){let w=b.getMirror(O);this.appendMap(b.maps[O],null!=w&&w<O?I+w:void 0)}}getMirror(b){if(this.mirror)for(let O=0;O<this.mirror.length;O++)if(this.mirror[O]==b)return this.mirror[O+(O%2?-1:1)]}setMirror(b,O){this.mirror||(this.mirror=[]),this.mirror.push(b,O)}appendMappingInverted(b){for(let O=b.maps.length-1,I=this.maps.length+b.maps.length;O>=0;O--){let w=b.getMirror(O);this.appendMap(b.maps[O].invert(),null!=w&&w>O?I-w-1:void 0)}}invert(){let b=new it;return b.appendMappingInverted(this),b}map(b,O=1){if(this.mirror)return this._map(b,O,!0);for(let I=this.from;I<this.to;I++)b=this.maps[I].map(b,O);return b}mapResult(b,O=1){return this._map(b,O,!1)}_map(b,O,I){let w=0;for(let V=this.from;V<this.to;V++){let yt=this.maps[V].mapResult(b,O);if(null!=yt.recover){let Nt=this.getMirror(V);if(null!=Nt&&Nt>V&&Nt<this.to){V=Nt,b=this.maps[Nt].recover(yt.recover);continue}}w|=yt.delInfo,b=yt.pos}return I?b:new ct(b,w,null)}}const ft=Object.create(null);class bt{getMap(){return Mt.empty}merge(b){return null}static fromJSON(b,O){if(!O||!O.stepType)throw new RangeError("Invalid input for Step.fromJSON");let I=ft[O.stepType];if(!I)throw new RangeError(`No step type ${O.stepType} defined`);return I.fromJSON(b,O)}static jsonID(b,O){if(b in ft)throw new RangeError("Duplicate use of step JSON ID "+b);return ft[b]=O,O.prototype.jsonID=b,O}}class It{constructor(b,O){this.doc=b,this.failed=O}static ok(b){return new It(b,null)}static fail(b){return new It(null,b)}static fromReplace(b,O,I,w){try{return It.ok(b.replace(O,I,w))}catch(V){if(V instanceof C.e4)return It.fail(V.message);throw V}}}function Pt(gt,b,O){let I=[];for(let w=0;w<gt.childCount;w++){let V=gt.child(w);V.content.size&&(V=V.copy(Pt(V.content,b,V))),V.isInline&&(V=b(V,O,w)),I.push(V)}return C.HY.fromArray(I)}class At extends bt{constructor(b,O,I){super(),this.from=b,this.to=O,this.mark=I}apply(b){let O=b.slice(this.from,this.to),I=b.resolve(this.from),w=I.node(I.sharedDepth(this.to)),V=new C.p2(Pt(O.content,(U,yt)=>U.isAtom&&yt.type.allowsMarkType(this.mark.type)?U.mark(this.mark.addToSet(U.marks)):U,w),O.openStart,O.openEnd);return It.fromReplace(b,this.from,this.to,V)}invert(){return new pt(this.from,this.to,this.mark)}map(b){let O=b.mapResult(this.from,1),I=b.mapResult(this.to,-1);return O.deleted&&I.deleted||O.pos>=I.pos?null:new At(O.pos,I.pos,this.mark)}merge(b){return b instanceof At&&b.mark.eq(this.mark)&&this.from<=b.to&&this.to>=b.from?new At(Math.min(this.from,b.from),Math.max(this.to,b.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new At(O.from,O.to,b.markFromJSON(O.mark))}}bt.jsonID("addMark",At);class pt extends bt{constructor(b,O,I){super(),this.from=b,this.to=O,this.mark=I}apply(b){let O=b.slice(this.from,this.to),I=new C.p2(Pt(O.content,w=>w.mark(this.mark.removeFromSet(w.marks)),b),O.openStart,O.openEnd);return It.fromReplace(b,this.from,this.to,I)}invert(){return new At(this.from,this.to,this.mark)}map(b){let O=b.mapResult(this.from,1),I=b.mapResult(this.to,-1);return O.deleted&&I.deleted||O.pos>=I.pos?null:new pt(O.pos,I.pos,this.mark)}merge(b){return b instanceof pt&&b.mark.eq(this.mark)&&this.from<=b.to&&this.to>=b.from?new pt(Math.min(this.from,b.from),Math.max(this.to,b.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new pt(O.from,O.to,b.markFromJSON(O.mark))}}bt.jsonID("removeMark",pt);class tt extends bt{constructor(b,O){super(),this.pos=b,this.mark=O}apply(b){let O=b.nodeAt(this.pos);if(!O)return It.fail("No node at mark step's position");let I=O.type.create(O.attrs,null,this.mark.addToSet(O.marks));return It.fromReplace(b,this.pos,this.pos+1,new C.p2(C.HY.from(I),0,O.isLeaf?0:1))}invert(b){let O=b.nodeAt(this.pos);if(O){let I=this.mark.addToSet(O.marks);if(I.length==O.marks.length){for(let w=0;w<O.marks.length;w++)if(!O.marks[w].isInSet(I))return new tt(this.pos,O.marks[w]);return new tt(this.pos,this.mark)}}return new F(this.pos,this.mark)}map(b){let O=b.mapResult(this.pos,1);return O.deletedAfter?null:new tt(O.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(b,O){if("number"!=typeof O.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new tt(O.pos,b.markFromJSON(O.mark))}}bt.jsonID("addNodeMark",tt);class F extends bt{constructor(b,O){super(),this.pos=b,this.mark=O}apply(b){let O=b.nodeAt(this.pos);if(!O)return It.fail("No node at mark step's position");let I=O.type.create(O.attrs,null,this.mark.removeFromSet(O.marks));return It.fromReplace(b,this.pos,this.pos+1,new C.p2(C.HY.from(I),0,O.isLeaf?0:1))}invert(b){let O=b.nodeAt(this.pos);return O&&this.mark.isInSet(O.marks)?new tt(this.pos,this.mark):this}map(b){let O=b.mapResult(this.pos,1);return O.deletedAfter?null:new F(O.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(b,O){if("number"!=typeof O.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new F(O.pos,b.markFromJSON(O.mark))}}bt.jsonID("removeNodeMark",F);class ut extends bt{constructor(b,O,I,w=!1){super(),this.from=b,this.to=O,this.slice=I,this.structure=w}apply(b){return this.structure&&xt(b,this.from,this.to)?It.fail("Structure replace would overwrite content"):It.fromReplace(b,this.from,this.to,this.slice)}getMap(){return new Mt([this.from,this.to-this.from,this.slice.size])}invert(b){return new ut(this.from,this.from+this.slice.size,b.slice(this.from,this.to))}map(b){let O=b.mapResult(this.from,1),I=b.mapResult(this.to,-1);return O.deletedAcross&&I.deletedAcross?null:new ut(O.pos,Math.max(O.pos,I.pos),this.slice)}merge(b){if(!(b instanceof ut)||b.structure||this.structure)return null;if(this.from+this.slice.size!=b.from||this.slice.openEnd||b.slice.openStart){if(b.to!=this.from||this.slice.openStart||b.slice.openEnd)return null;{let O=this.slice.size+b.slice.size==0?C.p2.empty:new C.p2(b.slice.content.append(this.slice.content),b.slice.openStart,this.slice.openEnd);return new ut(b.from,this.to,O,this.structure)}}{let O=this.slice.size+b.slice.size==0?C.p2.empty:new C.p2(this.slice.content.append(b.slice.content),this.slice.openStart,b.slice.openEnd);return new ut(this.from,this.to+(b.to-b.from),O,this.structure)}}toJSON(){let b={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(b.slice=this.slice.toJSON()),this.structure&&(b.structure=!0),b}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ut(O.from,O.to,C.p2.fromJSON(b,O.slice),!!O.structure)}}bt.jsonID("replace",ut);class Y extends bt{constructor(b,O,I,w,V,U,yt=!1){super(),this.from=b,this.to=O,this.gapFrom=I,this.gapTo=w,this.slice=V,this.insert=U,this.structure=yt}apply(b){if(this.structure&&(xt(b,this.from,this.gapFrom)||xt(b,this.gapTo,this.to)))return It.fail("Structure gap-replace would overwrite content");let O=b.slice(this.gapFrom,this.gapTo);if(O.openStart||O.openEnd)return It.fail("Gap is not a flat range");let I=this.slice.insertAt(this.insert,O.content);return I?It.fromReplace(b,this.from,this.to,I):It.fail("Content does not fit in gap")}getMap(){return new Mt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(b){let O=this.gapTo-this.gapFrom;return new Y(this.from,this.from+this.slice.size+O,this.from+this.insert,this.from+this.insert+O,b.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(b){let O=b.mapResult(this.from,1),I=b.mapResult(this.to,-1),w=b.map(this.gapFrom,-1),V=b.map(this.gapTo,1);return O.deletedAcross&&I.deletedAcross||w<O.pos||V>I.pos?null:new Y(O.pos,I.pos,w,V,this.slice,this.insert,this.structure)}toJSON(){let b={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(b.slice=this.slice.toJSON()),this.structure&&(b.structure=!0),b}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to||"number"!=typeof O.gapFrom||"number"!=typeof O.gapTo||"number"!=typeof O.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Y(O.from,O.to,O.gapFrom,O.gapTo,C.p2.fromJSON(b,O.slice),O.insert,!!O.structure)}}function xt(gt,b,O){let I=gt.resolve(b),w=O-b,V=I.depth;for(;w>0&&V>0&&I.indexAfter(V)==I.node(V).childCount;)V--,w--;if(w>0){let U=I.node(V).maybeChild(I.indexAfter(V));for(;w>0;){if(!U||U.isLeaf)return!0;U=U.firstChild,w--}}return!1}function _t(gt,b,O){return(0==b||gt.canReplace(b,gt.childCount))&&(O==gt.childCount||gt.canReplace(0,O))}function wt(gt){let O=gt.parent.content.cutByIndex(gt.startIndex,gt.endIndex);for(let I=gt.depth;;--I){let w=gt.$from.node(I),V=gt.$from.index(I),U=gt.$to.indexAfter(I);if(I<gt.depth&&w.canReplace(V,U,O))return I;if(0==I||w.type.spec.isolating||!_t(w,V,U))break}return null}function z(gt,b,O=null,I=gt){let w=function(gt,b){let{parent:O,startIndex:I,endIndex:w}=gt,V=O.contentMatchAt(I).findWrapping(b);return V&&O.canReplaceWith(I,w,V.length?V[0]:b)?V:null}(gt,b),V=w&&function(gt,b){let{parent:O,startIndex:I,endIndex:w}=gt,V=O.child(I),U=b.contentMatch.findWrapping(V.type);if(!U)return null;let Nt=(U.length?U[U.length-1]:b).contentMatch;for(let H=I;Nt&&H<w;H++)Nt=Nt.matchType(O.child(H).type);return Nt&&Nt.validEnd?U:null}(I,b);return V?w.map(rt).concat({type:b,attrs:O}).concat(V.map(rt)):null}function rt(gt){return{type:gt,attrs:null}}function Jt(gt,b,O=1,I){let w=gt.resolve(b),V=w.depth-O,U=I&&I[I.length-1]||w.parent;if(V<0||w.parent.type.spec.isolating||!w.parent.canReplace(w.index(),w.parent.childCount)||!U.type.validContent(w.parent.content.cutByIndex(w.index(),w.parent.childCount)))return!1;for(let H=w.depth-1,a=O-2;H>V;H--,a--){let p=w.node(H),E=w.index(H);if(p.type.spec.isolating)return!1;let P=p.content.cutByIndex(E,p.childCount),k=I&&I[a]||p;if(k!=p&&(P=P.replaceChild(0,k.type.create(k.attrs))),!p.canReplace(E+1,p.childCount)||!k.type.validContent(P))return!1}let yt=w.indexAfter(V),Nt=I&&I[0];return w.node(V).canReplaceWith(yt,yt,Nt?Nt.type:w.node(V+1).type)}function ne(gt,b){let O=gt.resolve(b),I=O.index();return Wt(O.nodeBefore,O.nodeAfter)&&O.parent.canReplace(I,I+1)}function Wt(gt,b){return!(!gt||!b||gt.isLeaf||!gt.canAppend(b))}function pe(gt,b,O=-1){let I=gt.resolve(b);for(let w=I.depth;;w--){let V,U,yt=I.index(w);if(w==I.depth?(V=I.nodeBefore,U=I.nodeAfter):O>0?(V=I.node(w+1),yt++,U=I.node(w).maybeChild(yt)):(V=I.node(w).maybeChild(yt-1),U=I.node(w+1)),V&&!V.isTextblock&&Wt(V,U)&&I.node(w).canReplace(yt,yt+1))return b;if(0==w)break;b=O<0?I.before(w):I.after(w)}}function fe(gt,b,O){let I=gt.resolve(b);if(!O.content.size)return b;let w=O.content;for(let V=0;V<O.openStart;V++)w=w.firstChild.content;for(let V=1;V<=(0==O.openStart&&O.size?2:1);V++)for(let U=I.depth;U>=0;U--){let yt=U==I.depth?0:I.pos<=(I.start(U+1)+I.end(U+1))/2?-1:1,Nt=I.index(U)+(yt>0?1:0),H=I.node(U),a=!1;if(1==V)a=H.canReplace(Nt,Nt,w);else{let p=H.contentMatchAt(Nt).findWrapping(w.firstChild.type);a=p&&H.canReplaceWith(Nt,Nt,p[0])}if(a)return 0==yt?I.pos:yt<0?I.before(U+1):I.after(U+1)}return null}function Ke(gt,b,O=b,I=C.p2.empty){if(b==O&&!I.size)return null;let w=gt.resolve(b),V=gt.resolve(O);return xe(w,V,I)?new ut(b,O,I):new Ne(w,V,I).fit()}function xe(gt,b,O){return!O.openStart&&!O.openEnd&&gt.start()==b.start()&&gt.parent.canReplace(gt.index(),b.index(),O.content)}bt.jsonID("replaceAround",Y);class Ne{constructor(b,O,I){this.$from=b,this.$to=O,this.unplaced=I,this.frontier=[],this.placed=C.HY.empty;for(let w=0;w<=b.depth;w++){let V=b.node(w);this.frontier.push({type:V.type,match:V.contentMatchAt(b.indexAfter(w))})}for(let w=b.depth;w>0;w--)this.placed=C.HY.from(b.node(w).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let H=this.findFittable();H?this.placeNodes(H):this.openMore()||this.dropNode()}let b=this.mustMoveInline(),O=this.placed.size-this.depth-this.$from.depth,I=this.$from,w=this.close(b<0?this.$to:I.doc.resolve(b));if(!w)return null;let V=this.placed,U=I.depth,yt=w.depth;for(;U&&yt&&1==V.childCount;)V=V.firstChild.content,U--,yt--;let Nt=new C.p2(V,U,yt);return b>-1?new Y(I.pos,b,this.$to.pos,this.$to.end(),Nt,O):Nt.size||I.pos!=this.$to.pos?new ut(I.pos,w.pos,Nt):null}findFittable(){let b=this.unplaced.openStart;for(let O=this.unplaced.content,I=0,w=this.unplaced.openEnd;I<b;I++){let V=O.firstChild;if(O.childCount>1&&(w=0),V.type.spec.isolating&&w<=I){b=I;break}O=V.content}for(let O=1;O<=2;O++)for(let I=1==O?b:this.unplaced.openStart;I>=0;I--){let w,V=null;I?(V=Ce(this.unplaced.content,I-1).firstChild,w=V.content):w=this.unplaced.content;let U=w.firstChild;for(let yt=this.depth;yt>=0;yt--){let a,{type:Nt,match:H}=this.frontier[yt],p=null;if(1==O&&(U?H.matchType(U.type)||(p=H.fillBefore(C.HY.from(U),!1)):V&&Nt.compatibleContent(V.type)))return{sliceDepth:I,frontierDepth:yt,parent:V,inject:p};if(2==O&&U&&(a=H.findWrapping(U.type)))return{sliceDepth:I,frontierDepth:yt,parent:V,wrap:a};if(V&&H.matchType(V.type))break}}}openMore(){let{content:b,openStart:O,openEnd:I}=this.unplaced,w=Ce(b,O);return!(!w.childCount||w.firstChild.isLeaf||(this.unplaced=new C.p2(b,O+1,Math.max(I,w.size+O>=b.size-I?O+1:0)),0))}dropNode(){let{content:b,openStart:O,openEnd:I}=this.unplaced,w=Ce(b,O);if(w.childCount<=1&&O>0){let V=b.size-O<=O+w.size;this.unplaced=new C.p2(ge(b,O-1,1),O-1,V?O-1:I)}else this.unplaced=new C.p2(ge(b,O,1),O,I)}placeNodes({sliceDepth:b,frontierDepth:O,parent:I,inject:w,wrap:V}){for(;this.depth>O;)this.closeFrontierNode();if(V)for(let K=0;K<V.length;K++)this.openFrontierNode(V[K]);let U=this.unplaced,yt=I?I.content:U.content,Nt=U.openStart-b,H=0,a=[],{match:p,type:E}=this.frontier[O];if(w){for(let K=0;K<w.childCount;K++)a.push(w.child(K));p=p.matchFragment(w)}let P=yt.size+b-(U.content.size-U.openEnd);for(;H<yt.childCount;){let K=yt.child(H),at=p.matchType(K.type);if(!at)break;H++,(H>1||0==Nt||K.content.size)&&(p=at,a.push(Pe(K.mark(E.allowedMarks(K.marks)),1==H?Nt:0,H==yt.childCount?P:-1)))}let k=H==yt.childCount;k||(P=-1),this.placed=Ae(this.placed,O,C.HY.from(a)),this.frontier[O].match=p,k&&P<0&&I&&I.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let K=0,at=yt;K<P;K++){let Ht=at.lastChild;this.frontier.push({type:Ht.type,match:Ht.contentMatchAt(Ht.childCount)}),at=Ht.content}this.unplaced=k?0==b?C.p2.empty:new C.p2(ge(U.content,b-1,1),b-1,P<0?U.openEnd:b-1):new C.p2(ge(U.content,b,H),U.openStart,U.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let O,b=this.frontier[this.depth];if(!b.type.isTextblock||!Be(this.$to,this.$to.depth,b.type,b.match,!1)||this.$to.depth==this.depth&&(O=this.findCloseLevel(this.$to))&&O.depth==this.depth)return-1;let{depth:I}=this.$to,w=this.$to.after(I);for(;I>1&&w==this.$to.end(--I);)++w;return w}findCloseLevel(b){t:for(let O=Math.min(this.depth,b.depth);O>=0;O--){let{match:I,type:w}=this.frontier[O],V=O<b.depth&&b.end(O+1)==b.pos+(b.depth-(O+1)),U=Be(b,O,w,I,V);if(U){for(let yt=O-1;yt>=0;yt--){let{match:Nt,type:H}=this.frontier[yt],a=Be(b,yt,H,Nt,!0);if(!a||a.childCount)continue t}return{depth:O,fit:U,move:V?b.doc.resolve(b.after(O+1)):b}}}}close(b){let O=this.findCloseLevel(b);if(!O)return null;for(;this.depth>O.depth;)this.closeFrontierNode();O.fit.childCount&&(this.placed=Ae(this.placed,O.depth,O.fit)),b=O.move;for(let I=O.depth+1;I<=b.depth;I++){let w=b.node(I),V=w.type.contentMatch.fillBefore(w.content,!0,b.index(I));this.openFrontierNode(w.type,w.attrs,V)}return b}openFrontierNode(b,O=null,I){let w=this.frontier[this.depth];w.match=w.match.matchType(b),this.placed=Ae(this.placed,this.depth,C.HY.from(b.create(O,I))),this.frontier.push({type:b,match:b.contentMatch})}closeFrontierNode(){let O=this.frontier.pop().match.fillBefore(C.HY.empty,!0);O.childCount&&(this.placed=Ae(this.placed,this.frontier.length,O))}}function ge(gt,b,O){return 0==b?gt.cutByIndex(O,gt.childCount):gt.replaceChild(0,gt.firstChild.copy(ge(gt.firstChild.content,b-1,O)))}function Ae(gt,b,O){return 0==b?gt.append(O):gt.replaceChild(gt.childCount-1,gt.lastChild.copy(Ae(gt.lastChild.content,b-1,O)))}function Ce(gt,b){for(let O=0;O<b;O++)gt=gt.firstChild.content;return gt}function Pe(gt,b,O){if(b<=0)return gt;let I=gt.content;return b>1&&(I=I.replaceChild(0,Pe(I.firstChild,b-1,1==I.childCount?O-1:0))),b>0&&(I=gt.type.contentMatch.fillBefore(I).append(I),O<=0&&(I=I.append(gt.type.contentMatch.matchFragment(I).fillBefore(C.HY.empty,!0)))),gt.copy(I)}function Be(gt,b,O,I,w){let V=gt.node(b),U=w?gt.indexAfter(b):gt.index(b);if(U==V.childCount&&!O.compatibleContent(V.type))return null;let yt=I.fillBefore(V.content,!0,U);return yt&&!function(gt,b,O){for(let I=O;I<b.childCount;I++)if(!gt.allowsMarks(b.child(I).marks))return!0;return!1}(O,V.content,U)?yt:null}function ke(gt){return gt.spec.defining||gt.spec.definingForContent}function He(gt,b,O,I,w){if(b<O){let V=gt.firstChild;gt=gt.replaceChild(0,V.copy(He(V.content,b+1,O,I,V)))}if(b>I){let V=w.contentMatchAt(0),U=V.fillBefore(gt).append(gt);gt=U.append(V.matchFragment(U).fillBefore(C.HY.empty,!0))}return gt}function ze(gt,b){let O=[];for(let w=Math.min(gt.depth,b.depth);w>=0;w--){let V=gt.start(w);if(V<gt.pos-(gt.depth-w)||b.end(w)>b.pos+(b.depth-w)||gt.node(w).type.spec.isolating||b.node(w).type.spec.isolating)break;(V==b.start(w)||w==gt.depth&&w==b.depth&&gt.parent.inlineContent&&b.parent.inlineContent&&w&&b.start(w-1)==V-1)&&O.push(w)}return O}class _e extends bt{constructor(b,O,I){super(),this.pos=b,this.attr=O,this.value=I}apply(b){let O=b.nodeAt(this.pos);if(!O)return It.fail("No node at attribute step's position");let I=Object.create(null);for(let V in O.attrs)I[V]=O.attrs[V];I[this.attr]=this.value;let w=O.type.create(I,null,O.marks);return It.fromReplace(b,this.pos,this.pos+1,new C.p2(C.HY.from(w),0,O.isLeaf?0:1))}getMap(){return Mt.empty}invert(b){return new _e(this.pos,this.attr,b.nodeAt(this.pos).attrs[this.attr])}map(b){let O=b.mapResult(this.pos,1);return O.deletedAfter?null:new _e(O.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(b,O){if("number"!=typeof O.pos||"string"!=typeof O.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new _e(O.pos,O.attr,O.value)}}bt.jsonID("attr",_e);let he=class extends Error{};he=function gt(b){let O=Error.call(this,b);return O.__proto__=gt.prototype,O},(he.prototype=Object.create(Error.prototype)).constructor=he,he.prototype.name="TransformError";class Ee{constructor(b){this.doc=b,this.steps=[],this.docs=[],this.mapping=new it}get before(){return this.docs.length?this.docs[0]:this.doc}step(b){let O=this.maybeStep(b);if(O.failed)throw new he(O.failed);return this}maybeStep(b){let O=b.apply(this.doc);return O.failed||this.addStep(b,O.doc),O}get docChanged(){return this.steps.length>0}addStep(b,O){this.docs.push(this.doc),this.steps.push(b),this.mapping.appendMap(b.getMap()),this.doc=O}replace(b,O=b,I=C.p2.empty){let w=Ke(this.doc,b,O,I);return w&&this.step(w),this}replaceWith(b,O,I){return this.replace(b,O,new C.p2(C.HY.from(I),0,0))}delete(b,O){return this.replace(b,O,C.p2.empty)}insert(b,O){return this.replaceWith(b,b,O)}replaceRange(b,O,I){return function(gt,b,O,I){if(!I.size)return gt.deleteRange(b,O);let w=gt.doc.resolve(b),V=gt.doc.resolve(O);if(xe(w,V,I))return gt.step(new ut(b,O,I));let U=ze(w,gt.doc.resolve(O));0==U[U.length-1]&&U.pop();let yt=-(w.depth+1);U.unshift(yt);for(let E=w.depth,P=w.pos-1;E>0;E--,P--){let k=w.node(E).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;U.indexOf(E)>-1?yt=E:w.before(E)==P&&U.splice(1,0,-E)}let Nt=U.indexOf(yt),H=[],a=I.openStart;for(let E=I.content,P=0;;P++){let k=E.firstChild;if(H.push(k),P==I.openStart)break;E=k.content}for(let E=a-1;E>=0;E--){let P=H[E].type,k=ke(P);if(k&&w.node(Nt).type!=P)a=E;else if(k||!P.isTextblock)break}for(let E=I.openStart;E>=0;E--){let P=(E+a+1)%(I.openStart+1),k=H[P];if(k)for(let K=0;K<U.length;K++){let at=U[(K+Nt)%U.length],Ht=!0;at<0&&(Ht=!1,at=-at);let te=w.node(at-1),ee=w.index(at-1);if(te.canReplaceWith(ee,ee,k.type,k.marks))return gt.replace(w.before(at),Ht?V.after(at):O,new C.p2(He(I.content,0,I.openStart,P),P,I.openEnd))}}let p=gt.steps.length;for(let E=U.length-1;E>=0&&(gt.replace(b,O,I),!(gt.steps.length>p));E--){let P=U[E];P<0||(b=w.before(P),O=V.after(P))}}(this,b,O,I),this}replaceRangeWith(b,O,I){return function(gt,b,O,I){if(!I.isInline&&b==O&&gt.doc.resolve(b).parent.content.size){let w=function(gt,b,O){let I=gt.resolve(b);if(I.parent.canReplaceWith(I.index(),I.index(),O))return b;if(0==I.parentOffset)for(let w=I.depth-1;w>=0;w--){let V=I.index(w);if(I.node(w).canReplaceWith(V,V,O))return I.before(w+1);if(V>0)return null}if(I.parentOffset==I.parent.content.size)for(let w=I.depth-1;w>=0;w--){let V=I.indexAfter(w);if(I.node(w).canReplaceWith(V,V,O))return I.after(w+1);if(V<I.node(w).childCount)return null}return null}(gt.doc,b,I.type);null!=w&&(b=O=w)}gt.replaceRange(b,O,new C.p2(C.HY.from(I),0,0))}(this,b,O,I),this}deleteRange(b,O){return function(gt,b,O){let I=gt.doc.resolve(b),w=gt.doc.resolve(O),V=ze(I,w);for(let U=0;U<V.length;U++){let yt=V[U],Nt=U==V.length-1;if(Nt&&0==yt||I.node(yt).type.contentMatch.validEnd)return gt.delete(I.start(yt),w.end(yt));if(yt>0&&(Nt||I.node(yt-1).canReplace(I.index(yt-1),w.indexAfter(yt-1))))return gt.delete(I.before(yt),w.after(yt))}for(let U=1;U<=I.depth&&U<=w.depth;U++)if(b-I.start(U)==I.depth-U&&O>I.end(U)&&w.end(U)-O!=w.depth-U)return gt.delete(I.before(U),O);gt.delete(b,O)}(this,b,O),this}lift(b,O){return function(gt,b,O){let{$from:I,$to:w,depth:V}=b,U=I.before(V+1),yt=w.after(V+1),Nt=U,H=yt,a=C.HY.empty,p=0;for(let k=V,K=!1;k>O;k--)K||I.index(k)>0?(K=!0,a=C.HY.from(I.node(k).copy(a)),p++):Nt--;let E=C.HY.empty,P=0;for(let k=V,K=!1;k>O;k--)K||w.after(k+1)<w.end(k)?(K=!0,E=C.HY.from(w.node(k).copy(E)),P++):H++;gt.step(new Y(Nt,H,U,yt,new C.p2(a.append(E),p,P),a.size-p,!0))}(this,b,O),this}join(b,O=1){return function(gt,b,O){let I=new ut(b-O,b+O,C.p2.empty,!0);gt.step(I)}(this,b,O),this}wrap(b,O){return function(gt,b,O){let I=C.HY.empty;for(let U=O.length-1;U>=0;U--){if(I.size){let yt=O[U].type.contentMatch.matchFragment(I);if(!yt||!yt.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}I=C.HY.from(O[U].type.create(O[U].attrs,I))}let w=b.start,V=b.end;gt.step(new Y(w,V,w,V,new C.p2(I,0,0),O.length,!0))}(this,b,O),this}setBlockType(b,O=b,I,w=null){return function(gt,b,O,I,w){if(!I.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let V=gt.steps.length;gt.doc.nodesBetween(b,O,(U,yt)=>{if(U.isTextblock&&!U.hasMarkup(I,w)&&function(gt,b,O){let I=gt.resolve(b),w=I.index();return I.parent.canReplaceWith(w,w+1,O)}(gt.doc,gt.mapping.slice(V).map(yt),I)){gt.clearIncompatible(gt.mapping.slice(V).map(yt,1),I);let Nt=gt.mapping.slice(V),H=Nt.map(yt,1),a=Nt.map(yt+U.nodeSize,1);return gt.step(new Y(H,a,H+1,a-1,new C.p2(C.HY.from(I.create(w,null,U.marks)),0,0),1,!0)),!1}})}(this,b,O,I,w),this}setNodeMarkup(b,O,I=null,w){return function(gt,b,O,I,w){let V=gt.doc.nodeAt(b);if(!V)throw new RangeError("No node at given position");O||(O=V.type);let U=O.create(I,null,w||V.marks);if(V.isLeaf)return gt.replaceWith(b,b+V.nodeSize,U);if(!O.validContent(V.content))throw new RangeError("Invalid content for node type "+O.name);gt.step(new Y(b,b+V.nodeSize,b+1,b+V.nodeSize-1,new C.p2(C.HY.from(U),0,0),1,!0))}(this,b,O,I,w),this}setNodeAttribute(b,O,I){return this.step(new _e(b,O,I)),this}addNodeMark(b,O){return this.step(new tt(b,O)),this}removeNodeMark(b,O){if(!(O instanceof C.vc)){let I=this.doc.nodeAt(b);if(!I)throw new RangeError("No node at position "+b);if(!(O=O.isInSet(I.marks)))return this}return this.step(new F(b,O)),this}split(b,O=1,I){return function(gt,b,O=1,I){let w=gt.doc.resolve(b),V=C.HY.empty,U=C.HY.empty;for(let yt=w.depth,Nt=w.depth-O,H=O-1;yt>Nt;yt--,H--){V=C.HY.from(w.node(yt).copy(V));let a=I&&I[H];U=C.HY.from(a?a.type.create(a.attrs,U):w.node(yt).copy(U))}gt.step(new ut(b,b,new C.p2(V.append(U),O,O),!0))}(this,b,O,I),this}addMark(b,O,I){return function(gt,b,O,I){let U,yt,w=[],V=[];gt.doc.nodesBetween(b,O,(Nt,H,a)=>{if(!Nt.isInline)return;let p=Nt.marks;if(!I.isInSet(p)&&a.type.allowsMarkType(I.type)){let E=Math.max(H,b),P=Math.min(H+Nt.nodeSize,O),k=I.addToSet(p);for(let K=0;K<p.length;K++)p[K].isInSet(k)||(U&&U.to==E&&U.mark.eq(p[K])?U.to=P:w.push(U=new pt(E,P,p[K])));yt&&yt.to==E?yt.to=P:V.push(yt=new At(E,P,I))}}),w.forEach(Nt=>gt.step(Nt)),V.forEach(Nt=>gt.step(Nt))}(this,b,O,I),this}removeMark(b,O,I){return function(gt,b,O,I){let w=[],V=0;gt.doc.nodesBetween(b,O,(U,yt)=>{if(!U.isInline)return;V++;let Nt=null;if(I instanceof C.ZU){let a,H=U.marks;for(;a=I.isInSet(H);)(Nt||(Nt=[])).push(a),H=a.removeFromSet(H)}else I?I.isInSet(U.marks)&&(Nt=[I]):Nt=U.marks;if(Nt&&Nt.length){let H=Math.min(yt+U.nodeSize,O);for(let a=0;a<Nt.length;a++){let E,p=Nt[a];for(let P=0;P<w.length;P++){let k=w[P];k.step==V-1&&p.eq(w[P].style)&&(E=k)}E?(E.to=H,E.step=V):w.push({style:p,from:Math.max(yt,b),to:H,step:V})}}}),w.forEach(U=>gt.step(new pt(U.from,U.to,U.style)))}(this,b,O,I),this}clearIncompatible(b,O,I){return function(gt,b,O,I=O.contentMatch){let w=gt.doc.nodeAt(b),V=[],U=b+1;for(let yt=0;yt<w.childCount;yt++){let Nt=w.child(yt),H=U+Nt.nodeSize,a=I.matchType(Nt.type);if(a){I=a;for(let p=0;p<Nt.marks.length;p++)O.allowsMarkType(Nt.marks[p].type)||gt.step(new pt(U,H,Nt.marks[p]))}else V.push(new ut(U,H,C.p2.empty));U=H}if(!I.validEnd){let yt=I.fillBefore(C.HY.empty,!0);gt.replace(U,U,new C.p2(yt,0,0))}for(let yt=V.length-1;yt>=0;yt--)gt.step(V[yt])}(this,b,O,I),this}}},43594:(Yt,Ct,c)=>{c.d(Ct,{EH:()=>Ze,p:()=>on,tk:()=>Ro});var C=c(62463),l=c(77346),y=c(38480);const D=function(r){for(var o=0;;o++)if(!(r=r.previousSibling))return o},g=function(r){let o=r.assignedSlot||r.parentNode;return o&&11==o.nodeType?o.host:o};let ot=null;const B=function(r,o,s){let d=ot||(ot=document.createRange());return d.setEnd(r,null==s?r.nodeValue.length:s),d.setStart(r,o||0),d},X=function(r,o,s,d){return s&&(mt(r,o,s,d,-1)||mt(r,o,s,d,1))},et=/^(img|br|input|textarea|hr)$/i;function mt(r,o,s,d,e){for(;;){if(r==s&&o==d)return!0;if(o==(e<0?0:ct(r))){let t=r.parentNode;if(!t||1!=t.nodeType||it(r)||et.test(r.nodeName)||"false"==r.contentEditable)return!1;o=D(r)+(e<0?0:1),r=t}else{if(1!=r.nodeType)return!1;if("false"==(r=r.childNodes[o+(e<0?-1:0)]).contentEditable)return!1;o=e<0?ct(r):0}}}function ct(r){return 3==r.nodeType?r.nodeValue.length:r.childNodes.length}function it(r){let o;for(let s=r;s&&!(o=s.pmViewDesc);s=s.parentNode);return o&&o.node&&o.node.isBlock&&(o.dom==r||o.contentDOM==r)}const ft=function(r){return r.focusNode&&X(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)};function bt(r,o){let s=document.createEvent("Event");return s.initEvent("keydown",!0,!0),s.keyCode=r,s.key=s.code=o,s}const Pt="undefined"!=typeof navigator?navigator:null,At="undefined"!=typeof document?document:null,pt=Pt&&Pt.userAgent||"",tt=/Edge\/(\d+)/.exec(pt),F=/MSIE \d/.exec(pt),ut=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(pt),Y=!!(F||ut||tt),xt=F?document.documentMode:ut?+ut[1]:tt?+tt[1]:0,Bt=!Y&&/gecko\/(\d+)/i.test(pt);Bt&&/Firefox\/(\d+)/.exec(pt);const Dt=!Y&&/Chrome\/(\d+)/.exec(pt),St=!!Dt,_t=Dt?+Dt[1]:0,wt=!Y&&!!Pt&&/Apple Computer/.test(Pt.vendor),kt=wt&&(/Mobile\/\w+/.test(pt)||!!Pt&&Pt.maxTouchPoints>2),z=kt||!!Pt&&/Mac/.test(Pt.platform),rt=/Android \d/.test(pt),dt=!!At&&"webkitFontSmoothing"in At.documentElement.style,st=dt?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function J(r){return{left:0,right:r.documentElement.clientWidth,top:0,bottom:r.documentElement.clientHeight}}function Q(r,o){return"number"==typeof r?r:r[o]}function nt(r){let o=r.getBoundingClientRect();return{left:o.left,right:o.left+r.clientWidth*(o.width/r.offsetWidth||1),top:o.top,bottom:o.top+r.clientHeight*(o.height/r.offsetHeight||1)}}function Lt(r,o,s){let d=r.someProp("scrollThreshold")||0,e=r.someProp("scrollMargin")||5,t=r.dom.ownerDocument;for(let n=s||r.dom;n;n=g(n)){if(1!=n.nodeType)continue;let i=n,u=i==t.body,h=u?J(t):nt(i),T=0,A=0;if(o.top<h.top+Q(d,"top")?A=-(h.top-o.top+Q(e,"top")):o.bottom>h.bottom-Q(d,"bottom")&&(A=o.bottom-h.bottom+Q(e,"bottom")),o.left<h.left+Q(d,"left")?T=-(h.left-o.left+Q(e,"left")):o.right>h.right-Q(d,"right")&&(T=o.right-h.right+Q(e,"right")),T||A)if(u)t.defaultView.scrollBy(T,A);else{let L=i.scrollLeft,N=i.scrollTop;A&&(i.scrollTop+=A),T&&(i.scrollLeft+=T);let j=i.scrollLeft-L,q=i.scrollTop-N;o={left:o.left-j,top:o.top-q,right:o.right-j,bottom:o.bottom-q}}if(u)break}}function Zt(r){let o=[],s=r.ownerDocument;for(let d=r;d&&(o.push({dom:d,top:d.scrollTop,left:d.scrollLeft}),r!=s);d=g(d));return o}function Wt(r,o){for(let s=0;s<r.length;s++){let{dom:d,top:e,left:t}=r[s];d.scrollTop!=e+o&&(d.scrollTop=e+o),d.scrollLeft!=t&&(d.scrollLeft=t)}}let pe=null;function Oe(r,o){let s,e,d=2e8,t=0,n=o.top,i=o.top;for(let u=r.firstChild,h=0;u;u=u.nextSibling,h++){let T;if(1==u.nodeType)T=u.getClientRects();else{if(3!=u.nodeType)continue;T=B(u).getClientRects()}for(let A=0;A<T.length;A++){let L=T[A];if(L.top<=n&&L.bottom>=i){n=Math.max(L.bottom,n),i=Math.min(L.top,i);let N=L.left>o.left?L.left-o.left:L.right<o.left?o.left-L.right:0;if(N<d){s=u,d=N,e=N&&3==s.nodeType?{left:L.right<o.left?L.right:L.left,top:o.top}:o,1==u.nodeType&&N&&(t=h+(o.left>=(L.left+L.right)/2?1:0));continue}}!s&&(o.left>=L.right&&o.top>=L.top||o.left>=L.left&&o.top>=L.bottom)&&(t=h+1)}}return s&&3==s.nodeType?function(r,o){let s=r.nodeValue.length,d=document.createRange();for(let e=0;e<s;e++){d.setEnd(r,e+1),d.setStart(r,e);let t=Pe(d,1);if(t.top!=t.bottom&&Ke(o,t))return{node:r,offset:e+(o.left>=(t.left+t.right)/2?1:0)}}return{node:r,offset:0}}(s,e):!s||d&&1==s.nodeType?{node:r,offset:t}:Oe(s,e)}function Ke(r,o){return r.left>=o.left-1&&r.left<=o.right+1&&r.top>=o.top-1&&r.top<=o.bottom+1}function Ae(r,o,s){let d=r.childNodes.length;if(d&&s.top<s.bottom)for(let e=Math.max(0,Math.min(d-1,Math.floor(d*(o.top-s.top)/(s.bottom-s.top))-2)),t=e;;){let n=r.childNodes[t];if(1==n.nodeType){let i=n.getClientRects();for(let u=0;u<i.length;u++){let h=i[u];if(Ke(o,h))return Ae(n,o,h)}}if((t=(t+1)%d)==e)break}return r}function Ce(r,o){let d,s=r.dom.ownerDocument,e=0;if(s.caretPositionFromPoint)try{let u=s.caretPositionFromPoint(o.left,o.top);u&&({offsetNode:d,offset:e}=u)}catch(u){}if(!d&&s.caretRangeFromPoint){let u=s.caretRangeFromPoint(o.left,o.top);u&&({startContainer:d,startOffset:e}=u)}let n,t=(r.root.elementFromPoint?r.root:s).elementFromPoint(o.left,o.top);if(!t||!r.dom.contains(1!=t.nodeType?t.parentNode:t)){let u=r.dom.getBoundingClientRect();if(!Ke(o,u)||(t=Ae(r.dom,o,u),!t))return null}if(wt)for(let u=t;d&&u;u=g(u))u.draggable&&(d=void 0);if(t=function(r,o){let s=r.parentNode;return s&&/^li$/i.test(s.nodeName)&&o.left<r.getBoundingClientRect().left?s:r}(t,o),d){if(Bt&&1==d.nodeType&&(e=Math.min(e,d.childNodes.length),e<d.childNodes.length)){let h,u=d.childNodes[e];"IMG"==u.nodeName&&(h=u.getBoundingClientRect()).right<=o.left&&h.bottom>o.top&&e++}d==r.dom&&e==d.childNodes.length-1&&1==d.lastChild.nodeType&&o.top>d.lastChild.getBoundingClientRect().bottom?n=r.state.doc.content.size:(0==e||1!=d.nodeType||"BR"!=d.childNodes[e-1].nodeName)&&(n=function(r,o,s,d){let e=-1;for(let t=o,n=!1;t!=r.dom;){let i=r.docView.nearestDesc(t,!0);if(!i)return null;if(1==i.dom.nodeType&&(i.node.isBlock&&i.parent&&!n||!i.contentDOM)){let u=i.dom.getBoundingClientRect();if(i.node.isBlock&&i.parent&&!n&&(n=!0,u.left>d.left||u.top>d.top?e=i.posBefore:(u.right<d.left||u.bottom<d.top)&&(e=i.posAfter)),!i.contentDOM&&e<0)return(i.node.isBlock?d.top<(u.top+u.bottom)/2:d.left<(u.left+u.right)/2)?i.posBefore:i.posAfter}t=i.dom.parentNode}return e>-1?e:r.docView.posFromDOM(o,s,-1)}(r,d,e,o))}null==n&&(n=function(r,o,s){let{node:d,offset:e}=Oe(o,s),t=-1;if(1==d.nodeType&&!d.firstChild){let n=d.getBoundingClientRect();t=n.left!=n.right&&s.left>(n.left+n.right)/2?1:-1}return r.docView.posFromDOM(d,e,t)}(r,t,o));let i=r.docView.nearestDesc(t,!0);return{pos:n,inside:i?i.posAtStart-i.border:-1}}function Pe(r,o){let s=r.getClientRects();return s.length?s[o<0?0:s.length-1]:r.getBoundingClientRect()}const Be=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Me(r,o,s){let{node:d,offset:e,atom:t}=r.docView.domFromPos(o,s<0?-1:1),n=dt||Bt;if(3==d.nodeType){if(!n||!Be.test(d.nodeValue)&&(s<0?e:e!=d.nodeValue.length)){let u=e,h=e,T=s<0?1:-1;return s<0&&!e?(h++,T=-1):s>=0&&e==d.nodeValue.length?(u--,T=1):s<0?u--:h++,ke(Pe(B(d,u,h),1),T<0)}{let u=Pe(B(d,e,e),s);if(Bt&&e&&/\s/.test(d.nodeValue[e-1])&&e<d.nodeValue.length){let h=Pe(B(d,e-1,e-1),-1);if(h.top==u.top){let T=Pe(B(d,e,e+1),-1);if(T.top!=u.top)return ke(T,T.left<h.left)}}return u}}if(!r.state.doc.resolve(o-(t||0)).parent.inlineContent){if(null==t&&e&&(s<0||e==ct(d))){let u=d.childNodes[e-1];if(1==u.nodeType)return Ye(u.getBoundingClientRect(),!1)}if(null==t&&e<ct(d)){let u=d.childNodes[e];if(1==u.nodeType)return Ye(u.getBoundingClientRect(),!0)}return Ye(d.getBoundingClientRect(),s>=0)}if(null==t&&e&&(s<0||e==ct(d))){let u=d.childNodes[e-1],h=3==u.nodeType?B(u,ct(u)-(n?0:1)):1!=u.nodeType||"BR"==u.nodeName&&u.nextSibling?null:u;if(h)return ke(Pe(h,1),!1)}if(null==t&&e<ct(d)){let u=d.childNodes[e];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let h=u?3==u.nodeType?B(u,0,n?0:1):1==u.nodeType?u:null:null;if(h)return ke(Pe(h,-1),!0)}return ke(Pe(3==d.nodeType?B(d):d,-s),s>=0)}function ke(r,o){if(0==r.width)return r;let s=o?r.left:r.right;return{top:r.top,bottom:r.bottom,left:s,right:s}}function Ye(r,o){if(0==r.height)return r;let s=o?r.top:r.bottom;return{top:s,bottom:s,left:r.left,right:r.right}}function He(r,o,s){let d=r.state,e=r.root.activeElement;d!=o&&r.updateState(o),e!=r.dom&&r.focus();try{return s()}finally{d!=o&&r.updateState(d),e!=r.dom&&e&&e.focus()}}const Le=/[\u0590-\u08ac]/;let _e=null,he=null,Ee=!1;class V{constructor(o,s,d,e){this.parent=o,this.children=s,this.dom=d,this.contentDOM=e,this.dirty=0,d.pmViewDesc=this}matchesWidget(o){return!1}matchesMark(o){return!1}matchesNode(o,s,d){return!1}matchesHack(o){return!1}parseRule(){return null}stopEvent(o){return!1}get size(){let o=0;for(let s=0;s<this.children.length;s++)o+=this.children[s].size;return o}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let o=0;o<this.children.length;o++)this.children[o].destroy()}posBeforeChild(o){for(let s=0,d=this.posAtStart;;s++){let e=this.children[s];if(e==o)return d;d+=e.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(o,s,d){if(this.contentDOM&&this.contentDOM.contains(1==o.nodeType?o:o.parentNode)){if(d<0){let t,n;if(o==this.contentDOM)t=o.childNodes[s-1];else{for(;o.parentNode!=this.contentDOM;)o=o.parentNode;t=o.previousSibling}for(;t&&(!(n=t.pmViewDesc)||n.parent!=this);)t=t.previousSibling;return t?this.posBeforeChild(n)+n.size:this.posAtStart}{let t,n;if(o==this.contentDOM)t=o.childNodes[s];else{for(;o.parentNode!=this.contentDOM;)o=o.parentNode;t=o.nextSibling}for(;t&&(!(n=t.pmViewDesc)||n.parent!=this);)t=t.nextSibling;return t?this.posBeforeChild(n):this.posAtEnd}}let e;if(o==this.dom&&this.contentDOM)e=s>D(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))e=2&o.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==s)for(let t=o;;t=t.parentNode){if(t==this.dom){e=!1;break}if(t.previousSibling)break}if(null==e&&s==o.childNodes.length)for(let t=o;;t=t.parentNode){if(t==this.dom){e=!0;break}if(t.nextSibling)break}}return(null==e?d>0:e)?this.posAtEnd:this.posAtStart}nearestDesc(o,s=!1){for(let d=!0,e=o;e;e=e.parentNode){let n,t=this.getDesc(e);if(t&&(!s||t.node)){if(!d||!(n=t.nodeDOM)||(1==n.nodeType?n.contains(1==o.nodeType?o:o.parentNode):n==o))return t;d=!1}}}getDesc(o){let s=o.pmViewDesc;for(let d=s;d;d=d.parent)if(d==this)return s}posFromDOM(o,s,d){for(let e=o;e;e=e.parentNode){let t=this.getDesc(e);if(t)return t.localPosFromDOM(o,s,d)}return-1}descAt(o){for(let s=0,d=0;s<this.children.length;s++){let e=this.children[s],t=d+e.size;if(d==o&&t!=d){for(;!e.border&&e.children.length;)e=e.children[0];return e}if(o<t)return e.descAt(o-d-e.border);d=t}}domFromPos(o,s){if(!this.contentDOM)return{node:this.dom,offset:0,atom:o+1};let t,d=0,e=0;for(let t=0;d<this.children.length;d++){let n=this.children[d],i=t+n.size;if(i>o||n instanceof E){e=o-t;break}t=i}if(e)return this.children[d].domFromPos(e-this.children[d].border,s);for(;d&&!(t=this.children[d-1]).size&&t instanceof U&&t.side>=0;d--);if(s<=0){let t,n=!0;for(;t=d?this.children[d-1]:null,t&&t.dom.parentNode!=this.contentDOM;d--,n=!1);return t&&s&&n&&!t.border&&!t.domAtom?t.domFromPos(t.size,s):{node:this.contentDOM,offset:t?D(t.dom)+1:0}}{let t,n=!0;for(;t=d<this.children.length?this.children[d]:null,t&&t.dom.parentNode!=this.contentDOM;d++,n=!1);return t&&n&&!t.border&&!t.domAtom?t.domFromPos(0,s):{node:this.contentDOM,offset:t?D(t.dom):this.contentDOM.childNodes.length}}}parseRange(o,s,d=0){if(0==this.children.length)return{node:this.contentDOM,from:o,to:s,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let e=-1,t=-1;for(let n=d,i=0;;i++){let u=this.children[i],h=n+u.size;if(-1==e&&o<=h){let T=n+u.border;if(o>=T&&s<=h-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(o,s,T);o=n;for(let A=i;A>0;A--){let L=this.children[A-1];if(L.size&&L.dom.parentNode==this.contentDOM&&!L.emptyChildAt(1)){e=D(L.dom)+1;break}o-=L.size}-1==e&&(e=0)}if(e>-1&&(h>s||i==this.children.length-1)){s=h;for(let T=i+1;T<this.children.length;T++){let A=this.children[T];if(A.size&&A.dom.parentNode==this.contentDOM&&!A.emptyChildAt(-1)){t=D(A.dom);break}s+=A.size}-1==t&&(t=this.contentDOM.childNodes.length);break}n=h}return{node:this.contentDOM,from:o,to:s,fromOffset:e,toOffset:t}}emptyChildAt(o){if(this.border||!this.contentDOM||!this.children.length)return!1;let s=this.children[o<0?0:this.children.length-1];return 0==s.size||s.emptyChildAt(o)}domAfterPos(o){let{node:s,offset:d}=this.domFromPos(o,0);if(1!=s.nodeType||d==s.childNodes.length)throw new RangeError("No node after pos "+o);return s.childNodes[d]}setSelection(o,s,d,e=!1){let t=Math.min(o,s),n=Math.max(o,s);for(let L=0,N=0;L<this.children.length;L++){let j=this.children[L],q=N+j.size;if(t>N&&n<q)return j.setSelection(o-N-j.border,s-N-j.border,d,e);N=q}let i=this.domFromPos(o,o?-1:1),u=s==o?i:this.domFromPos(s,s?-1:1),h=d.getSelection(),T=!1;if((Bt||wt)&&o==s){let{node:L,offset:N}=i;if(3==L.nodeType){if(T=!(!N||"\n"!=L.nodeValue[N-1]),T&&N==L.nodeValue.length)for(let q,j=L;j;j=j.parentNode){if(q=j.nextSibling){"BR"==q.nodeName&&(i=u={node:q.parentNode,offset:D(q)+1});break}let ht=j.pmViewDesc;if(ht&&ht.node&&ht.node.isBlock)break}}else{let j=L.childNodes[N-1];T=j&&("BR"==j.nodeName||"false"==j.contentEditable)}}if(Bt&&h.focusNode&&h.focusNode!=u.node&&1==h.focusNode.nodeType){let L=h.focusNode.childNodes[h.focusOffset];L&&"false"==L.contentEditable&&(e=!0)}if(!(e||T&&wt)&&X(i.node,i.offset,h.anchorNode,h.anchorOffset)&&X(u.node,u.offset,h.focusNode,h.focusOffset))return;let A=!1;if((h.extend||o==s)&&!T){h.collapse(i.node,i.offset);try{o!=s&&h.extend(u.node,u.offset),A=!0}catch(L){}}if(!A){if(o>s){let N=i;i=u,u=N}let L=document.createRange();L.setEnd(u.node,u.offset),L.setStart(i.node,i.offset),h.removeAllRanges(),h.addRange(L)}}ignoreMutation(o){return!this.contentDOM&&"selection"!=o.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(o,s){for(let d=0,e=0;e<this.children.length;e++){let t=this.children[e],n=d+t.size;if(d==n?o<=n&&s>=d:o<n&&s>d){let i=d+t.border,u=n-t.border;if(o>=i&&s<=u)return this.dirty=o==d||s==n?2:1,void(o!=i||s!=u||!t.contentLost&&t.dom.parentNode==this.contentDOM?t.markDirty(o-i,s-i):t.dirty=3);t.dirty=t.dom!=t.contentDOM||t.dom.parentNode!=this.contentDOM||t.children.length?3:2}d=n}this.dirty=2}markParentsDirty(){let o=1;for(let s=this.parent;s;s=s.parent,o++){let d=1==o?2:1;s.dirty<d&&(s.dirty=d)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class U extends V{constructor(o,s,d,e){let t,n=s.type.toDOM;if("function"==typeof n&&(n=n(d,()=>t?t.parent?t.parent.posBeforeChild(t):void 0:e)),!s.type.spec.raw){if(1!=n.nodeType){let i=document.createElement("span");i.appendChild(n),n=i}n.contentEditable="false",n.classList.add("ProseMirror-widget")}super(o,[],n,null),this.widget=s,this.widget=s,t=this}matchesWidget(o){return 0==this.dirty&&o.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(o){let s=this.widget.spec.stopEvent;return!!s&&s(o)}ignoreMutation(o){return"selection"!=o.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class yt extends V{constructor(o,s,d,e){super(o,[],s,null),this.textDOM=d,this.text=e}get size(){return this.text.length}localPosFromDOM(o,s){return o!=this.textDOM?this.posAtStart+(s?this.size:0):this.posAtStart+s}domFromPos(o){return{node:this.textDOM,offset:o}}ignoreMutation(o){return"characterData"===o.type&&o.target.nodeValue==o.oldValue}}class Nt extends V{constructor(o,s,d,e){super(o,[],d,e),this.mark=s}static create(o,s,d,e){let t=e.nodeViews[s.type.name],n=t&&t(s,e,d);return(!n||!n.dom)&&(n=l.PW.renderSpec(document,s.type.spec.toDOM(s,d))),new Nt(o,s,n.dom,n.contentDOM||n.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(o){return 3!=this.dirty&&this.mark.eq(o)}markDirty(o,s){if(super.markDirty(o,s),0!=this.dirty){let d=this.parent;for(;!d.node;)d=d.parent;d.dirty<this.dirty&&(d.dirty=this.dirty),this.dirty=0}}slice(o,s,d){let e=Nt.create(this.parent,this.mark,!0,d),t=this.children,n=this.size;s<n&&(t=oe(t,s,n,d)),o>0&&(t=oe(t,0,o,d));for(let i=0;i<t.length;i++)t[i].parent=e;return e.children=t,e}}class H extends V{constructor(o,s,d,e,t,n,i,u,h){super(o,[],t,n),this.node=s,this.outerDeco=d,this.innerDeco=e,this.nodeDOM=i,n&&this.updateChildren(u,h)}static create(o,s,d,e,t,n){let u,i=t.nodeViews[s.type.name],h=i&&i(s,t,()=>u?u.parent?u.parent.posBeforeChild(u):void 0:n,d,e),T=h&&h.dom,A=h&&h.contentDOM;if(s.isText)if(T){if(3!=T.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else T=document.createTextNode(s.text);else T||({dom:T,contentDOM:A}=l.PW.renderSpec(document,s.type.spec.toDOM(s)));!A&&!s.isText&&"BR"!=T.nodeName&&(T.hasAttribute("contenteditable")||(T.contentEditable="false"),s.type.spec.draggable&&(T.draggable=!0));let L=T;return T=we(T,d,s),h?u=new P(o,s,d,e,T,A||null,L,h,t,n+1):s.isText?new p(o,s,d,e,T,L,t):new H(o,s,d,e,T,A||null,L,t,n+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let o={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(o.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let s=this.children.length-1;s>=0;s--){let d=this.children[s];if(this.dom.contains(d.dom.parentNode)){o.contentElement=d.dom.parentNode;break}}o.contentElement||(o.getContent=()=>l.HY.empty)}else o.contentElement=this.contentDOM;else o.getContent=()=>this.node.content;return o}matchesNode(o,s,d){return 0==this.dirty&&o.eq(this.node)&&Je(s,this.outerDeco)&&d.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(o,s){let d=this.node.inlineContent,e=s,t=o.composing?this.localCompositionInfo(o,s):null,n=t&&t.pos>-1?t:null,i=t&&t.pos<0,u=new S(this,n&&n.node,o);(function(r,o,s,d){let e=o.locals(r),t=0;if(0==e.length){for(let h=0;h<r.childCount;h++){let T=r.child(h);d(T,e,o.forChild(t,T),h),t+=T.nodeSize}return}let n=0,i=[],u=null;for(let h=0;;){if(n<e.length&&e[n].to==t){let q,j=e[n++];for(;n<e.length&&e[n].to==t;)(q||(q=[j])).push(e[n++]);if(q){q.sort(Tt);for(let ht=0;ht<q.length;ht++)s(q[ht],h,!!u)}else s(j,h,!!u)}let T,A;if(u)A=-1,T=u,u=null;else{if(!(h<r.childCount))break;A=h,T=r.child(h++)}for(let j=0;j<i.length;j++)i[j].to<=t&&i.splice(j--,1);for(;n<e.length&&e[n].from<=t&&e[n].to>t;)i.push(e[n++]);let L=t+T.nodeSize;if(T.isText){let j=L;n<e.length&&e[n].from<j&&(j=e[n].from);for(let q=0;q<i.length;q++)i[q].to<j&&(j=i[q].to);j<L&&(u=T.cut(j-t),T=T.cut(0,j-t),L=j,A=-1)}d(T,T.isInline&&!T.isLeaf?i.filter(j=>!j.inline):i.slice(),o.forChild(t,T),A),t=L}})(this.node,this.innerDeco,(h,T,A)=>{h.spec.marks?u.syncToMarks(h.spec.marks,d,o):h.type.side>=0&&!A&&u.syncToMarks(T==this.node.childCount?l.vc.none:this.node.child(T).marks,d,o),u.placeWidget(h,o,e)},(h,T,A,L)=>{let N;u.syncToMarks(h.marks,d,o),u.findNodeMatch(h,T,A,L)||i&&o.state.selection.from>e&&o.state.selection.to<e+h.nodeSize&&(N=u.findIndexWithChild(t.node))>-1&&u.updateNodeAt(h,T,A,N,o)||u.updateNextNode(h,T,A,o,L)||u.addNode(h,T,A,o,e),e+=h.nodeSize}),u.syncToMarks([],d,o),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||2==this.dirty)&&(n&&this.protectLocalComposition(o,n),k(this.contentDOM,this.children,o),kt&&function(r){if("UL"==r.nodeName||"OL"==r.nodeName){let o=r.style.cssText;r.style.cssText=o+"; list-style: square !important",window.getComputedStyle(r),r.style.cssText=o}}(this.dom))}localCompositionInfo(o,s){let{from:d,to:e}=o.state.selection;if(!(o.state.selection instanceof C.Bs)||d<s||e>s+this.node.content.size)return null;let t=o.domSelectionRange(),n=function(r,o){for(;;){if(3==r.nodeType)return r;if(1==r.nodeType&&o>0){if(r.childNodes.length>o&&3==r.childNodes[o].nodeType)return r.childNodes[o];o=ct(r=r.childNodes[o-1])}else{if(!(1==r.nodeType&&o<r.childNodes.length))return null;r=r.childNodes[o],o=0}}}(t.focusNode,t.focusOffset);if(!n||!this.dom.contains(n.parentNode))return null;if(this.node.inlineContent){let i=n.nodeValue,u=function(r,o,s,d){for(let e=0,t=0;e<r.childCount&&t<=d;){let n=r.child(e++),i=t;if(t+=n.nodeSize,!n.isText)continue;let u=n.text;for(;e<r.childCount;){let h=r.child(e++);if(t+=h.nodeSize,!h.isText)break;u+=h.text}if(t>=s){let h=i<d?u.lastIndexOf(o,d-i-1):-1;if(h>=0&&h+o.length+i>=s)return i+h;if(s==d&&u.length>=d+o.length-i&&u.slice(d-i,d-i+o.length)==o)return d}}return-1}(this.node.content,i,d-s,e-s);return u<0?null:{node:n,pos:u,text:i}}return{node:n,pos:-1,text:""}}protectLocalComposition(o,{node:s,pos:d,text:e}){if(this.getDesc(s))return;let t=s;for(;t.parentNode!=this.contentDOM;t=t.parentNode){for(;t.previousSibling;)t.parentNode.removeChild(t.previousSibling);for(;t.nextSibling;)t.parentNode.removeChild(t.nextSibling);t.pmViewDesc&&(t.pmViewDesc=void 0)}let n=new yt(this,t,s,e);o.input.compositionNodes.push(n),this.children=oe(this.children,d,d+e.length,o,n)}update(o,s,d,e){return!(3==this.dirty||!o.sameMarkup(this.node)||(this.updateInner(o,s,d,e),0))}updateInner(o,s,d,e){this.updateOuterDeco(s),this.node=o,this.innerDeco=d,this.contentDOM&&this.updateChildren(e,this.posAtStart),this.dirty=0}updateOuterDeco(o){if(Je(o,this.outerDeco))return;let s=1!=this.nodeDOM.nodeType,d=this.dom;this.dom=te(this.dom,this.nodeDOM,Ht(this.outerDeco,this.node,s),Ht(o,this.node,s)),this.dom!=d&&(d.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=o}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function a(r,o,s,d,e){return we(d,o,r),new H(void 0,r,o,s,d,d,d,e,0)}class p extends H{constructor(o,s,d,e,t,n,i){super(o,s,d,e,t,null,n,i,0)}parseRule(){let o=this.nodeDOM.parentNode;for(;o&&o!=this.dom&&!o.pmIsDeco;)o=o.parentNode;return{skip:o||!0}}update(o,s,d,e){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!o.sameMarkup(this.node)||(this.updateOuterDeco(s),(0!=this.dirty||o.text!=this.node.text)&&o.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=o.text,e.trackWrites==this.nodeDOM&&(e.trackWrites=null)),this.node=o,this.dirty=0,0))}inParent(){let o=this.parent.contentDOM;for(let s=this.nodeDOM;s;s=s.parentNode)if(s==o)return!0;return!1}domFromPos(o){return{node:this.nodeDOM,offset:o}}localPosFromDOM(o,s,d){return o==this.nodeDOM?this.posAtStart+Math.min(s,this.node.text.length):super.localPosFromDOM(o,s,d)}ignoreMutation(o){return"characterData"!=o.type&&"selection"!=o.type}slice(o,s,d){let e=this.node.cut(o,s),t=document.createTextNode(e.text);return new p(this.parent,e,this.outerDeco,this.innerDeco,t,t,d)}markDirty(o,s){super.markDirty(o,s),this.dom!=this.nodeDOM&&(0==o||s==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}}class E extends V{parseRule(){return{ignore:!0}}matchesHack(o){return 0==this.dirty&&this.dom.nodeName==o}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class P extends H{constructor(o,s,d,e,t,n,i,u,h,T){super(o,s,d,e,t,n,i,h,T),this.spec=u}update(o,s,d,e){if(3==this.dirty)return!1;if(this.spec.update){let t=this.spec.update(o,s,d);return t&&this.updateInner(o,s,d,e),t}return!(!this.contentDOM&&!o.isLeaf)&&super.update(o,s,d,e)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(o,s,d,e){this.spec.setSelection?this.spec.setSelection(o,s,d):super.setSelection(o,s,d,e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(o){return!!this.spec.stopEvent&&this.spec.stopEvent(o)}ignoreMutation(o){return this.spec.ignoreMutation?this.spec.ignoreMutation(o):super.ignoreMutation(o)}}function k(r,o,s){let d=r.firstChild,e=!1;for(let t=0;t<o.length;t++){let n=o[t],i=n.dom;if(i.parentNode==r){for(;i!=d;)d=$(d),e=!0;d=d.nextSibling}else e=!0,r.insertBefore(i,d);if(n instanceof Nt){let u=d?d.previousSibling:r.lastChild;k(n.contentDOM,n.children,s),d=u?u.nextSibling:r.firstChild}}for(;d;)d=$(d),e=!0;e&&s.trackWrites==r&&(s.trackWrites=null)}const K=function(r){r&&(this.nodeName=r)};K.prototype=Object.create(null);const at=[new K];function Ht(r,o,s){if(0==r.length)return at;let d=s?at[0]:new K,e=[d];for(let t=0;t<r.length;t++){let n=r[t].type.attrs;if(n){n.nodeName&&e.push(d=new K(n.nodeName));for(let i in n){let u=n[i];null!=u&&(s&&1==e.length&&e.push(d=new K(o.isInline?"span":"div")),"class"==i?d.class=(d.class?d.class+" ":"")+u:"style"==i?d.style=(d.style?d.style+";":"")+u:"nodeName"!=i&&(d[i]=u))}}}return e}function te(r,o,s,d){if(s==at&&d==at)return o;let e=o;for(let t=0;t<d.length;t++){let n=d[t],i=s[t];if(t){let u;i&&i.nodeName==n.nodeName&&e!=r&&(u=e.parentNode)&&u.nodeName.toLowerCase()==n.nodeName||(u=document.createElement(n.nodeName),u.pmIsDeco=!0,u.appendChild(e),i=at[0]),e=u}ee(e,i||at[0],n)}return e}function ee(r,o,s){for(let d in o)"class"!=d&&"style"!=d&&"nodeName"!=d&&!(d in s)&&r.removeAttribute(d);for(let d in s)"class"!=d&&"style"!=d&&"nodeName"!=d&&s[d]!=o[d]&&r.setAttribute(d,s[d]);if(o.class!=s.class){let d=o.class?o.class.split(" ").filter(Boolean):[],e=s.class?s.class.split(" ").filter(Boolean):[];for(let t=0;t<d.length;t++)-1==e.indexOf(d[t])&&r.classList.remove(d[t]);for(let t=0;t<e.length;t++)-1==d.indexOf(e[t])&&r.classList.add(e[t]);0==r.classList.length&&r.removeAttribute("class")}if(o.style!=s.style){if(o.style){let e,d=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;e=d.exec(o.style);)r.style.removeProperty(e[1])}s.style&&(r.style.cssText+=s.style)}}function we(r,o,s){return te(r,r,at,Ht(o,s,1!=r.nodeType))}function Je(r,o){if(r.length!=o.length)return!1;for(let s=0;s<r.length;s++)if(!r[s].type.eq(o[s].type))return!1;return!0}function $(r){let o=r.nextSibling;return r.parentNode.removeChild(r),o}class S{constructor(o,s,d){this.lock=s,this.view=d,this.index=0,this.stack=[],this.changed=!1,this.top=o,this.preMatch=function(r,o){let s=o,d=s.children.length,e=r.childCount,t=new Map,n=[];t:for(;e>0;){let i;for(;;)if(d){let h=s.children[d-1];if(!(h instanceof Nt)){i=h,d--;break}s=h,d=h.children.length}else{if(s==o)break t;d=s.parent.children.indexOf(s),s=s.parent}let u=i.node;if(u){if(u!=r.child(e-1))break;--e,t.set(i,e),n.push(i)}}return{index:e,matched:t,matches:n.reverse()}}(o.node.content,o)}destroyBetween(o,s){if(o!=s){for(let d=o;d<s;d++)this.top.children[d].destroy();this.top.children.splice(o,s-o),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(o,s,d){let e=0,t=this.stack.length>>1,n=Math.min(t,o.length);for(;e<n&&(e==t-1?this.top:this.stack[e+1<<1]).matchesMark(o[e])&&!1!==o[e].type.spec.spanning;)e++;for(;e<t;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),t--;for(;t<o.length;){this.stack.push(this.top,this.index+1);let i=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let h=this.top.children[u];if(h.matchesMark(o[t])&&!this.isLocked(h.dom)){i=u;break}}if(i>-1)i>this.index&&(this.changed=!0,this.destroyBetween(this.index,i)),this.top=this.top.children[this.index];else{let u=Nt.create(this.top,o[t],s,d);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,t++}}findNodeMatch(o,s,d,e){let n,t=-1;if(e>=this.preMatch.index&&(n=this.preMatch.matches[e-this.preMatch.index]).parent==this.top&&n.matchesNode(o,s,d))t=this.top.children.indexOf(n,this.index);else for(let i=this.index,u=Math.min(this.top.children.length,i+5);i<u;i++){let h=this.top.children[i];if(h.matchesNode(o,s,d)&&!this.preMatch.matched.has(h)){t=i;break}}return!(t<0||(this.destroyBetween(this.index,t),this.index++,0))}updateNodeAt(o,s,d,e,t){let n=this.top.children[e];return 3==n.dirty&&n.dom==n.contentDOM&&(n.dirty=2),!!n.update(o,s,d,t)&&(this.destroyBetween(this.index,e),this.index++,!0)}findIndexWithChild(o){for(;;){let s=o.parentNode;if(!s)return-1;if(s==this.top.contentDOM){let d=o.pmViewDesc;if(d)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==d)return e;return-1}o=s}}updateNextNode(o,s,d,e,t){for(let n=this.index;n<this.top.children.length;n++){let i=this.top.children[n];if(i instanceof H){let u=this.preMatch.matched.get(i);if(null!=u&&u!=t)return!1;let h=i.dom;if((!this.isLocked(h)||o.isText&&i.node&&i.node.isText&&i.nodeDOM.nodeValue==o.text&&3!=i.dirty&&Je(s,i.outerDeco))&&i.update(o,s,d,e))return this.destroyBetween(this.index,n),i.dom!=h&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(o,s,d,e,t){this.top.children.splice(this.index++,0,H.create(this.top,o,s,d,e,t)),this.changed=!0}placeWidget(o,s,d){let e=this.index<this.top.children.length?this.top.children[this.index]:null;if(!e||!e.matchesWidget(o)||o!=e.widget&&e.widget.type.toDOM.parentNode){let t=new U(this.top,o,s,d);this.top.children.splice(this.index++,0,t),this.changed=!0}else this.index++}addTextblockHacks(){let o=this.top.children[this.index-1],s=this.top;for(;o instanceof Nt;)s=o,o=s.children[s.children.length-1];(!o||!(o instanceof p)||/\n$/.test(o.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(o.node.text))&&((wt||St)&&o&&"false"==o.dom.contentEditable&&this.addHackNode("IMG",s),this.addHackNode("BR",this.top))}addHackNode(o,s){if(s==this.top&&this.index<s.children.length&&s.children[this.index].matchesHack(o))this.index++;else{let d=document.createElement(o);"IMG"==o&&(d.className="ProseMirror-separator",d.alt=""),"BR"==o&&(d.className="ProseMirror-trailingBreak");let e=new E(this.top,[],d,null);s!=this.top?s.children.push(e):s.children.splice(this.index++,0,e),this.changed=!0}}isLocked(o){return this.lock&&(o==this.lock||1==o.nodeType&&o.contains(this.lock.parentNode))}}function Tt(r,o){return r.type.side-o.type.side}function oe(r,o,s,d,e){let t=[];for(let n=0,i=0;n<r.length;n++){let u=r[n],h=i,T=i+=u.size;h>=s||T<=o?t.push(u):(h<o&&t.push(u.slice(0,o-h,d)),e&&(t.push(e),e=void 0),T>s&&t.push(u.slice(s-h,u.size,d)))}return t}function Te(r,o=null){let s=r.domSelectionRange(),d=r.state.doc;if(!s.focusNode)return null;let e=r.docView.nearestDesc(s.focusNode),t=e&&0==e.size,n=r.docView.posFromDOM(s.focusNode,s.focusOffset,1);if(n<0)return null;let u,h,i=d.resolve(n);if(ft(s)){for(u=i;e&&!e.node;)e=e.parent;let T=e.node;if(e&&T.isAtom&&C.qv.isSelectable(T)&&e.parent&&(!T.isInline||!function(r,o,s){for(let d=0==o,e=o==ct(r);d||e;){if(r==s)return!0;let t=D(r);if(!(r=r.parentNode))return!1;d=d&&0==t,e=e&&t==ct(r)}}(s.focusNode,s.focusOffset,e.dom))){let A=e.posBefore;h=new C.qv(n==A?i:d.resolve(A))}}else{let T=r.docView.posFromDOM(s.anchorNode,s.anchorOffset,1);if(T<0)return null;u=d.resolve(T)}return h||(h=un(r,u,i,"pointer"==o||r.state.selection.head<i.pos&&!t?1:-1)),h}function se(r){return r.editable?r.hasFocus():Tn(r)&&document.activeElement&&document.activeElement.contains(r.dom)}function le(r,o=!1){let s=r.state.selection;if(Un(r,s),se(r)){if(!o&&r.input.mouseDown&&r.input.mouseDown.allowDefault&&St){let d=r.domSelectionRange(),e=r.domObserver.currentSelection;if(d.anchorNode&&e.anchorNode&&X(d.anchorNode,d.anchorOffset,e.anchorNode,e.anchorOffset))return r.input.mouseDown.delayedSelectionSync=!0,void r.domObserver.setCurSelection()}if(r.domObserver.disconnectSelection(),r.cursorWrapper)!function(r){let o=r.domSelection(),s=document.createRange(),d=r.cursorWrapper.dom,e="IMG"==d.nodeName;e?s.setEnd(d.parentNode,D(d)+1):s.setEnd(d,0),s.collapse(!1),o.removeAllRanges(),o.addRange(s),!e&&!r.state.selection.visible&&Y&&xt<=11&&(d.disabled=!0,d.disabled=!1)}(r);else{let t,n,{anchor:d,head:e}=s;ce&&!(s instanceof C.Bs)&&(s.$from.parent.inlineContent||(t=Re(r,s.from)),!s.empty&&!s.$from.parent.inlineContent&&(n=Re(r,s.to))),r.docView.setSelection(d,e,r.root,o),ce&&(t&&an(t),n&&an(n)),s.visible?r.dom.classList.remove("ProseMirror-hideselection"):(r.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(r){let o=r.dom.ownerDocument;o.removeEventListener("selectionchange",r.input.hideSelectionGuard);let s=r.domSelectionRange(),d=s.anchorNode,e=s.anchorOffset;o.addEventListener("selectionchange",r.input.hideSelectionGuard=()=>{(s.anchorNode!=d||s.anchorOffset!=e)&&(o.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(()=>{(!se(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})}(r))}r.domObserver.setCurSelection(),r.domObserver.connectSelection()}}const ce=wt||St&&_t<63;function Re(r,o){let{node:s,offset:d}=r.docView.domFromPos(o,0),e=d<s.childNodes.length?s.childNodes[d]:null,t=d?s.childNodes[d-1]:null;if(wt&&e&&"false"==e.contentEditable)return We(e);if(!(e&&"false"!=e.contentEditable||t&&"false"!=t.contentEditable)){if(e)return We(e);if(t)return We(t)}}function We(r){return r.contentEditable="true",wt&&r.draggable&&(r.draggable=!1,r.wasDraggable=!0),r}function an(r){r.contentEditable="false",r.wasDraggable&&(r.draggable=!0,r.wasDraggable=null)}function Un(r,o){if(o instanceof C.qv){let s=r.docView.descAt(o.from);s!=r.lastSelectedViewDesc&&(zn(r),s&&s.selectNode(),r.lastSelectedViewDesc=s)}else zn(r)}function zn(r){r.lastSelectedViewDesc&&(r.lastSelectedViewDesc.parent&&r.lastSelectedViewDesc.deselectNode(),r.lastSelectedViewDesc=void 0)}function un(r,o,s,d){return r.someProp("createSelectionBetween",e=>e(r,o,s))||C.Bs.between(o,s,d)}function Sn(r){return!(r.editable&&!r.hasFocus())&&Tn(r)}function Tn(r){let o=r.domSelectionRange();if(!o.anchorNode)return!1;try{return r.dom.contains(3==o.anchorNode.nodeType?o.anchorNode.parentNode:o.anchorNode)&&(r.editable||r.dom.contains(3==o.focusNode.nodeType?o.focusNode.parentNode:o.focusNode))}catch(s){return!1}}function vn(r,o){let{$anchor:s,$head:d}=r.selection,e=o>0?s.max(d):s.min(d),t=e.parent.inlineContent?e.depth?r.doc.resolve(o>0?e.after():e.before()):null:e;return t&&C.Y1.findFrom(t,o)}function Qe(r,o){return r.dispatch(r.state.tr.setSelection(o).scrollIntoView()),!0}function pn(r,o,s){let d=r.state.selection;if(!(d instanceof C.Bs)){if(d instanceof C.qv&&d.node.isInline)return Qe(r,new C.Bs(o>0?d.$to:d.$from));{let e=vn(r.state,o);return!!e&&Qe(r,e)}}if(!d.empty||s.indexOf("s")>-1)return!1;if(r.endOfTextblock(o>0?"right":"left")){let e=vn(r.state,o);return!!(e&&e instanceof C.qv)&&Qe(r,e)}if(!(z&&s.indexOf("m")>-1)){let n,e=d.$head,t=e.textOffset?null:o<0?e.nodeBefore:e.nodeAfter;if(!t||t.isText)return!1;let i=o<0?e.pos-t.nodeSize:e.pos;return!!(t.isAtom||(n=r.docView.descAt(i))&&!n.contentDOM)&&(C.qv.isSelectable(t)?Qe(r,new C.qv(o<0?r.state.doc.resolve(e.pos-t.nodeSize):e)):!!dt&&Qe(r,new C.Bs(r.state.doc.resolve(o<0?i:i+t.nodeSize))))}}function rn(r){return 3==r.nodeType?r.nodeValue.length:r.childNodes.length}function sn(r){let o=r.pmViewDesc;return o&&0==o.size&&(r.nextSibling||"BR"!=r.nodeName)}function _(r){let o=r.domSelectionRange(),s=o.focusNode,d=o.focusOffset;if(!s)return;let e,t,n=!1;for(Bt&&1==s.nodeType&&d<rn(s)&&sn(s.childNodes[d])&&(n=!0);;)if(d>0){if(1!=s.nodeType)break;{let i=s.childNodes[d-1];if(sn(i))e=s,t=--d;else{if(3!=i.nodeType)break;s=i,d=s.nodeValue.length}}}else{if(m(s))break;{let i=s.previousSibling;for(;i&&sn(i);)e=s.parentNode,t=D(i),i=i.previousSibling;if(i)s=i,d=rn(s);else{if(s=s.parentNode,s==r.dom)break;d=0}}}n?f(r,s,d):e&&f(r,e,t)}function v(r){let o=r.domSelectionRange(),s=o.focusNode,d=o.focusOffset;if(!s)return;let t,n,e=rn(s);for(;;)if(d<e){if(1!=s.nodeType)break;if(!sn(s.childNodes[d]))break;t=s,n=++d}else{if(m(s))break;{let i=s.nextSibling;for(;i&&sn(i);)t=i.parentNode,n=D(i)+1,i=i.nextSibling;if(i)s=i,d=0,e=rn(s);else{if(s=s.parentNode,s==r.dom)break;d=e=0}}}t&&f(r,t,n)}function m(r){let o=r.pmViewDesc;return o&&o.node&&o.node.isBlock}function f(r,o,s){let d=r.domSelection();if(ft(d)){let t=document.createRange();t.setEnd(o,s),t.setStart(o,s),d.removeAllRanges(),d.addRange(t)}else d.extend&&d.extend(o,s);r.domObserver.setCurSelection();let{state:e}=r;setTimeout(()=>{r.state==e&&le(r)},50)}function M(r,o,s){let d=r.state.selection;if(d instanceof C.Bs&&!d.empty||s.indexOf("s")>-1||z&&s.indexOf("m")>-1)return!1;let{$from:e,$to:t}=d;if(!e.parent.inlineContent||r.endOfTextblock(o<0?"up":"down")){let n=vn(r.state,o);if(n&&n instanceof C.qv)return Qe(r,n)}if(!e.parent.inlineContent){let n=o<0?e:t,i=d instanceof C.C1?C.Y1.near(n,o):C.Y1.findFrom(n,o);return!!i&&Qe(r,i)}return!1}function x(r,o){if(!(r.state.selection instanceof C.Bs))return!0;let{$head:s,$anchor:d,empty:e}=r.state.selection;if(!s.sameParent(d))return!0;if(!e)return!1;if(r.endOfTextblock(o>0?"forward":"backward"))return!0;let t=!s.textOffset&&(o<0?s.nodeBefore:s.nodeAfter);if(t&&!t.isText){let n=r.state.tr;return o<0?n.delete(s.pos-t.nodeSize,s.pos):n.delete(s.pos,s.pos+t.nodeSize),r.dispatch(n),!0}return!1}function R(r,o,s){r.domObserver.stop(),o.contentEditable=s,r.domObserver.start()}function vt(r,o){r.someProp("transformCopied",N=>{o=N(o,r)});let s=[],{content:d,openStart:e,openEnd:t}=o;for(;e>1&&t>1&&1==d.childCount&&1==d.firstChild.childCount;){e--,t--;let N=d.firstChild;s.push(N.type.name,N.attrs!=N.type.defaultAttrs?N.attrs:null),d=N.content}let n=r.someProp("clipboardSerializer")||l.PW.fromSchema(r.state.schema),i=De(),u=i.createElement("div");u.appendChild(n.serializeFragment(d,{document:i}));let T,h=u.firstChild,A=0;for(;h&&1==h.nodeType&&(T=je[h.nodeName.toLowerCase()]);){for(let N=T.length-1;N>=0;N--){let j=i.createElement(T[N]);for(;u.firstChild;)j.appendChild(u.firstChild);u.appendChild(j),A++}h=u.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",`${e} ${t}${A?` -${A}`:""} ${JSON.stringify(s)}`),{dom:u,text:r.someProp("clipboardTextSerializer",N=>N(o,r))||o.content.textBetween(0,o.content.size,"\n\n")}}function Ot(r,o,s,d,e){let n,i,t=e.parent.type.spec.code;if(!s&&!o)return null;let u=o&&(d||t||!s);if(u){if(r.someProp("transformPastedText",L=>{o=L(o,t||d,r)}),t)return o?new l.p2(l.HY.from(r.state.schema.text(o.replace(/\r\n?/g,"\n"))),0,0):l.p2.empty;let A=r.someProp("clipboardTextParser",L=>L(o,e,d,r));if(A)i=A;else{let L=e.marks(),{schema:N}=r.state,j=l.PW.fromSchema(N);n=document.createElement("div"),o.split(/(?:\r\n?|\n)+/).forEach(q=>{let ht=n.appendChild(document.createElement("p"));q&&ht.appendChild(j.serializeNode(N.text(q,L)))})}}else r.someProp("transformPastedHTML",A=>{s=A(s,r)}),n=function(r){let o=/^(\s*<meta [^>]*>)*/.exec(r);o&&(r=r.slice(o[0].length));let e,s=De().createElement("div"),d=/<([a-z][^>\s]+)/i.exec(r);if((e=d&&je[d[1].toLowerCase()])&&(r=e.map(t=>"<"+t+">").join("")+r+e.map(t=>"</"+t+">").reverse().join("")),s.innerHTML=r,e)for(let t=0;t<e.length;t++)s=s.querySelector(e[t])||s;return s}(s),dt&&function(r){let o=r.querySelectorAll(St?"span:not([class]):not([style])":"span.Apple-converted-space");for(let s=0;s<o.length;s++){let d=o[s];1==d.childNodes.length&&"\xa0"==d.textContent&&d.parentNode&&d.parentNode.replaceChild(r.ownerDocument.createTextNode(" "),d)}}(n);let h=n&&n.querySelector("[data-pm-slice]"),T=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(T&&T[3])for(let A=+T[3];A>0;A--){let L=n.firstChild;for(;L&&1!=L.nodeType;)L=L.nextSibling;if(!L)break;n=L}if(i||(i=(r.someProp("clipboardParser")||r.someProp("domParser")||l.aw.fromSchema(r.state.schema)).parseSlice(n,{preserveWhitespace:!(!u&&!T),context:e,ruleFromNode:L=>"BR"!=L.nodeName||L.nextSibling||!L.parentNode||Ut.test(L.parentNode.nodeName)?null:{ignore:!0}})),T)i=function(r,o){if(!r.size)return r;let d,s=r.content.firstChild.type.schema;try{d=JSON.parse(o)}catch(i){return r}let{content:e,openStart:t,openEnd:n}=r;for(let i=d.length-2;i>=0;i-=2){let u=s.nodes[d[i]];if(!u||u.hasRequiredAttrs())break;e=l.HY.from(u.create(d[i+1],e)),t++,n++}return new l.p2(e,t,n)}(qe(i,+T[1],+T[2]),T[4]);else if(i=l.p2.maxOpen(function(r,o){if(r.childCount<2)return r;for(let s=o.depth;s>=0;s--){let t,e=o.node(s).contentMatchAt(o.index(s)),n=[];if(r.forEach(i=>{if(!n)return;let h,u=e.findWrapping(i.type);if(!u)return n=null;if(h=n.length&&t.length&&re(u,t,i,n[n.length-1],0))n[n.length-1]=h;else{n.length&&(n[n.length-1]=ie(n[n.length-1],t.length));let T=jt(i,u);n.push(T),e=e.matchType(T.type),t=u}}),n)return l.HY.from(n)}return r}(i.content,e),!0),i.openStart||i.openEnd){let A=0,L=0;for(let N=i.content.firstChild;A<i.openStart&&!N.type.spec.isolating;A++,N=N.firstChild);for(let N=i.content.lastChild;L<i.openEnd&&!N.type.spec.isolating;L++,N=N.lastChild);i=qe(i,A,L)}return r.someProp("transformPasted",A=>{i=A(i,r)}),i}const Ut=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function jt(r,o,s=0){for(let d=o.length-1;d>=s;d--)r=o[d].create(null,l.HY.from(r));return r}function re(r,o,s,d,e){if(e<r.length&&e<o.length&&r[e]==o[e]){let t=re(r,o,s,d.lastChild,e+1);if(t)return d.copy(d.content.replaceChild(d.childCount-1,t));if(d.contentMatchAt(d.childCount).matchType(e==r.length-1?s.type:r[e+1]))return d.copy(d.content.append(l.HY.from(jt(s,r,e+1))))}}function ie(r,o){if(0==o)return r;let s=r.content.replaceChild(r.childCount-1,ie(r.lastChild,o-1)),d=r.contentMatchAt(r.childCount).fillBefore(l.HY.empty,!0);return r.copy(s.append(d))}function be(r,o,s,d,e,t){let n=o<0?r.firstChild:r.lastChild,i=n.content;return e<d-1&&(i=be(i,o,s,d,e+1,t)),e>=s&&(i=o<0?n.contentMatchAt(0).fillBefore(i,r.childCount>1||t<=e).append(i):i.append(n.contentMatchAt(n.childCount).fillBefore(l.HY.empty,!0))),r.replaceChild(o<0?0:r.childCount-1,n.copy(i))}function qe(r,o,s){return o<r.openStart&&(r=new l.p2(be(r.content,-1,o,r.openStart,0,r.openEnd),o,r.openEnd)),s<r.openEnd&&(r=new l.p2(be(r.content,1,s,r.openEnd,0,0),r.openStart,s)),r}const je={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ve=null;function De(){return ve||(ve=document.implementation.createHTMLDocument("title"))}const Ie={},$e={},Qn={touchstart:!0,touchmove:!0};class Gn{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Ge(r,o){r.input.lastSelectionOrigin=o,r.input.lastSelectionTime=Date.now()}function Cn(r){r.someProp("handleDOMEvents",o=>{for(let s in o)r.input.eventHandlers[s]||r.dom.addEventListener(s,r.input.eventHandlers[s]=d=>Mn(r,d))})}function Mn(r,o){return r.someProp("handleDOMEvents",s=>{let d=s[o.type];return!!d&&(d(r,o)||o.defaultPrevented)})}function En(r,o){if(!o.bubbles)return!0;if(o.defaultPrevented)return!1;for(let s=o.target;s!=r.dom;s=s.parentNode)if(!s||11==s.nodeType||s.pmViewDesc&&s.pmViewDesc.stopEvent(o))return!1;return!0}function nn(r){return{left:r.clientX,top:r.clientY}}function gn(r,o,s,d,e){if(-1==d)return!1;let t=r.state.doc.resolve(d);for(let n=t.depth+1;n>0;n--)if(r.someProp(o,i=>n>t.depth?i(r,s,t.nodeAfter,t.before(n),e,!0):i(r,s,t.node(n),t.before(n),e,!1)))return!0;return!1}function tn(r,o,s){r.focused||r.focus();let d=r.state.tr.setSelection(o);"pointer"==s&&d.setMeta("pointer",!0),r.dispatch(d)}function vo(r,o,s,d){return gn(r,"handleDoubleClickOn",o,s,d)||r.someProp("handleDoubleClick",e=>e(r,o,d))}function Co(r,o,s,d){return gn(r,"handleTripleClickOn",o,s,d)||r.someProp("handleTripleClick",e=>e(r,o,d))||function(r,o,s){if(0!=s.button)return!1;let d=r.state.doc;if(-1==o)return!!d.inlineContent&&(tn(r,C.Bs.create(d,0,d.content.size),"pointer"),!0);let e=d.resolve(o);for(let t=e.depth+1;t>0;t--){let n=t>e.depth?e.nodeAfter:e.node(t),i=e.before(t);if(n.inlineContent)tn(r,C.Bs.create(d,i+1,i+1+n.content.size),"pointer");else{if(!C.qv.isSelectable(n))continue;tn(r,C.qv.create(d,i),"pointer")}return!0}}(r,s,d)}function Rn(r){return Wn(r)}$e.keydown=(r,o)=>{let s=o;if(r.input.shiftKey=16==s.keyCode||s.shiftKey,!io(r,s)&&(r.input.lastKeyCode=s.keyCode,r.input.lastKeyCodeTime=Date.now(),!rt||!St||13!=s.keyCode))if(229!=s.keyCode&&r.domObserver.forceFlush(),!kt||13!=s.keyCode||s.ctrlKey||s.altKey||s.metaKey)r.someProp("handleKeyDown",d=>d(r,s))||function(r,o){let s=o.keyCode,d=function(r){let o="";return r.ctrlKey&&(o+="c"),r.metaKey&&(o+="m"),r.altKey&&(o+="a"),r.shiftKey&&(o+="s"),o}(o);return 8==s||z&&72==s&&"c"==d?x(r,-1)||_(r):46==s||z&&68==s&&"c"==d?x(r,1)||v(r):13==s||27==s||(37==s||z&&66==s&&"c"==d?pn(r,-1,d)||_(r):39==s||z&&70==s&&"c"==d?pn(r,1,d)||v(r):38==s||z&&80==s&&"c"==d?M(r,-1,d)||_(r):40==s||z&&78==s&&"c"==d?function(r){if(!wt||r.state.selection.$head.parentOffset>0)return!1;let{focusNode:o,focusOffset:s}=r.domSelectionRange();if(o&&1==o.nodeType&&0==s&&o.firstChild&&"false"==o.firstChild.contentEditable){let d=o.firstChild;R(r,d,"true"),setTimeout(()=>R(r,d,"false"),20)}return!1}(r)||M(r,1,d)||v(r):d==(z?"m":"c")&&(66==s||73==s||89==s||90==s))}(r,s)?s.preventDefault():Ge(r,"key");else{let d=Date.now();r.input.lastIOSEnter=d,r.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{r.input.lastIOSEnter==d&&(r.someProp("handleKeyDown",e=>e(r,bt(13,"Enter"))),r.input.lastIOSEnter=0)},200)}},$e.keyup=(r,o)=>{16==o.keyCode&&(r.input.shiftKey=!1)},$e.keypress=(r,o)=>{let s=o;if(io(r,s)||!s.charCode||s.ctrlKey&&!s.altKey||z&&s.metaKey)return;if(r.someProp("handleKeyPress",e=>e(r,s)))return void s.preventDefault();let d=r.state.selection;if(!(d instanceof C.Bs&&d.$from.sameParent(d.$to))){let e=String.fromCharCode(s.charCode);!/[\r\n]/.test(e)&&!r.someProp("handleTextInput",t=>t(r,d.$from.pos,d.$to.pos,e))&&r.dispatch(r.state.tr.insertText(e).scrollIntoView()),s.preventDefault()}};const Kn=z?"metaKey":"ctrlKey";Ie.mousedown=(r,o)=>{let s=o;r.input.shiftKey=s.shiftKey;let d=Rn(r),e=Date.now(),t="singleClick";e-r.input.lastClick.time<500&&function(r,o){let s=o.x-r.clientX,d=o.y-r.clientY;return s*s+d*d<100}(s,r.input.lastClick)&&!s[Kn]&&("singleClick"==r.input.lastClick.type?t="doubleClick":"doubleClick"==r.input.lastClick.type&&(t="tripleClick")),r.input.lastClick={time:e,x:s.clientX,y:s.clientY,type:t};let n=r.posAtCoords(nn(s));!n||("singleClick"==t?(r.input.mouseDown&&r.input.mouseDown.done(),r.input.mouseDown=new Jn(r,n,s,!!d)):("doubleClick"==t?vo:Co)(r,n.pos,n.inside,s)?s.preventDefault():Ge(r,"pointer"))};class Jn{constructor(o,s,d,e){let t,n;if(this.view=o,this.pos=s,this.event=d,this.flushed=e,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=o.state.doc,this.selectNode=!!d[Kn],this.allowDefault=d.shiftKey,s.inside>-1)t=o.state.doc.nodeAt(s.inside),n=s.inside;else{let T=o.state.doc.resolve(s.pos);t=T.parent,n=T.depth?T.before():0}const i=e?null:d.target,u=i?o.docView.nearestDesc(i,!0):null;this.target=u?u.dom:null;let{selection:h}=o.state;(0==d.button&&t.type.spec.draggable&&!1!==t.type.spec.selectable||h instanceof C.qv&&h.from<=n&&h.to>n)&&(this.mightDrag={node:t,pos:n,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!Bt||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),o.root.addEventListener("mouseup",this.up=this.up.bind(this)),o.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ge(o,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>le(this.view)),this.view.input.mouseDown=null}up(o){if(this.done(),!this.view.dom.contains(o.target))return;let s=this.pos;this.view.state.doc!=this.startDoc&&(s=this.view.posAtCoords(nn(o))),this.updateAllowDefault(o),this.allowDefault||!s?Ge(this.view,"pointer"):function(r,o,s,d,e){return gn(r,"handleClickOn",o,s,d)||r.someProp("handleClick",t=>t(r,o,d))||(e?function(r,o){if(-1==o)return!1;let d,e,s=r.state.selection;s instanceof C.qv&&(d=s.node);let t=r.state.doc.resolve(o);for(let n=t.depth+1;n>0;n--){let i=n>t.depth?t.nodeAfter:t.node(n);if(C.qv.isSelectable(i)){e=d&&s.$from.depth>0&&n>=s.$from.depth&&t.before(s.$from.depth+1)==s.$from.pos?t.before(s.$from.depth):t.before(n);break}}return null!=e&&(tn(r,C.qv.create(r.state.doc,e),"pointer"),!0)}(r,s):function(r,o){if(-1==o)return!1;let s=r.state.doc.resolve(o),d=s.nodeAfter;return!!(d&&d.isAtom&&C.qv.isSelectable(d))&&(tn(r,new C.qv(s),"pointer"),!0)}(r,s))}(this.view,s.pos,s.inside,o,this.selectNode)?o.preventDefault():0==o.button&&(this.flushed||wt&&this.mightDrag&&!this.mightDrag.node.isAtom||St&&!this.view.state.selection.visible&&Math.min(Math.abs(s.pos-this.view.state.selection.from),Math.abs(s.pos-this.view.state.selection.to))<=2)?(tn(this.view,C.Y1.near(this.view.state.doc.resolve(s.pos)),"pointer"),o.preventDefault()):Ge(this.view,"pointer")}move(o){this.updateAllowDefault(o),Ge(this.view,"pointer"),0==o.buttons&&this.done()}updateAllowDefault(o){!this.allowDefault&&(Math.abs(this.event.x-o.clientX)>4||Math.abs(this.event.y-o.clientY)>4)&&(this.allowDefault=!0)}}function io(r,o){return!!r.composing||!!(wt&&Math.abs(o.timeStamp-r.input.compositionEndedAt)<500)&&(r.input.compositionEndedAt=-2e8,!0)}Ie.touchstart=r=>{r.input.lastTouch=Date.now(),Rn(r),Ge(r,"pointer")},Ie.touchmove=r=>{r.input.lastTouch=Date.now(),Ge(r,"pointer")},Ie.contextmenu=r=>Rn(r);const Mo=rt?5e3:-1;function $n(r,o){clearTimeout(r.input.composingTimeout),o>-1&&(r.input.composingTimeout=setTimeout(()=>Wn(r),o))}function ro(r){for(r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=function(){let r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function Wn(r,o=!1){if(!(rt&&r.domObserver.flushingSoon>=0)){if(r.domObserver.forceFlush(),ro(r),o||r.docView&&r.docView.dirty){let s=Te(r);return s&&!s.eq(r.state.selection)?r.dispatch(r.state.tr.setSelection(s)):r.updateState(r.state),!0}return!1}}$e.compositionstart=$e.compositionupdate=r=>{if(!r.composing){r.domObserver.flush();let{state:o}=r,s=o.selection.$from;if(o.selection.empty&&(o.storedMarks||!s.textOffset&&s.parentOffset&&s.nodeBefore.marks.some(d=>!1===d.type.spec.inclusive)))r.markCursor=r.state.storedMarks||s.marks(),Wn(r,!0),r.markCursor=null;else if(Wn(r),Bt&&o.selection.empty&&s.parentOffset&&!s.textOffset&&s.nodeBefore.marks.length){let d=r.domSelectionRange();for(let e=d.focusNode,t=d.focusOffset;e&&1==e.nodeType&&0!=t;){let n=t<0?e.lastChild:e.childNodes[t-1];if(!n)break;if(3==n.nodeType){r.domSelection().collapse(n,n.nodeValue.length);break}e=n,t=-1}}r.input.composing=!0}$n(r,Mo)},$e.compositionend=(r,o)=>{r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=o.timeStamp,$n(r,20))};const An=Y&&xt<15||kt&&st<604;function Ln(r,o,s,d,e){let t=Ot(r,o,s,d,r.state.selection.$from);if(r.someProp("handlePaste",u=>u(r,e,t||l.p2.empty)))return!0;if(!t)return!1;let n=function(r){return 0==r.openStart&&0==r.openEnd&&1==r.content.childCount?r.content.firstChild:null}(t),i=n?r.state.tr.replaceSelectionWith(n,r.input.shiftKey):r.state.tr.replaceSelection(t);return r.dispatch(i.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ie.copy=$e.cut=(r,o)=>{let s=o,d=r.state.selection,e="cut"==s.type;if(d.empty)return;let t=An?null:s.clipboardData,n=d.content(),{dom:i,text:u}=vt(r,n);t?(s.preventDefault(),t.clearData(),t.setData("text/html",i.innerHTML),t.setData("text/plain",u)):function(r,o){if(!r.dom.parentNode)return;let s=r.dom.parentNode.appendChild(document.createElement("div"));s.appendChild(o),s.style.cssText="position: fixed; left: -10000px; top: 10px";let d=getSelection(),e=document.createRange();e.selectNodeContents(o),r.dom.blur(),d.removeAllRanges(),d.addRange(e),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s),r.focus()},50)}(r,i),e&&r.dispatch(r.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},$e.paste=(r,o)=>{let s=o;if(r.composing&&!rt)return;let d=An?null:s.clipboardData;d&&Ln(r,d.getData("text/plain"),d.getData("text/html"),r.input.shiftKey,s)?s.preventDefault():function(r,o){if(!r.dom.parentNode)return;let s=r.input.shiftKey||r.state.selection.$from.parent.type.spec.code,d=r.dom.parentNode.appendChild(document.createElement(s?"textarea":"div"));s||(d.contentEditable="true"),d.style.cssText="position: fixed; left: -10000px; top: 10px",d.focus(),setTimeout(()=>{r.focus(),d.parentNode&&d.parentNode.removeChild(d),s?Ln(r,d.value,null,r.input.shiftKey,o):Ln(r,d.textContent,d.innerHTML,r.input.shiftKey,o)},50)}(r,s)};class qn{constructor(o,s){this.slice=o,this.move=s}}const Nn=z?"altKey":"ctrlKey";Ie.dragstart=(r,o)=>{let s=o,d=r.input.mouseDown;if(d&&d.done(),!s.dataTransfer)return;let e=r.state.selection,t=e.empty?null:r.posAtCoords(nn(s));if(!(t&&t.pos>=e.from&&t.pos<=(e instanceof C.qv?e.to-1:e.to)))if(d&&d.mightDrag)r.dispatch(r.state.tr.setSelection(C.qv.create(r.state.doc,d.mightDrag.pos)));else if(s.target&&1==s.target.nodeType){let h=r.docView.nearestDesc(s.target,!0);h&&h.node.type.spec.draggable&&h!=r.docView&&r.dispatch(r.state.tr.setSelection(C.qv.create(r.state.doc,h.posBefore)))}let n=r.state.selection.content(),{dom:i,text:u}=vt(r,n);s.dataTransfer.clearData(),s.dataTransfer.setData(An?"Text":"text/html",i.innerHTML),s.dataTransfer.effectAllowed="copyMove",An||s.dataTransfer.setData("text/plain",u),r.dragging=new qn(n,!s[Nn])},Ie.dragend=r=>{let o=r.dragging;window.setTimeout(()=>{r.dragging==o&&(r.dragging=null)},50)},$e.dragover=$e.dragenter=(r,o)=>o.preventDefault(),$e.drop=(r,o)=>{let s=o,d=r.dragging;if(r.dragging=null,!s.dataTransfer)return;let e=r.posAtCoords(nn(s));if(!e)return;let t=r.state.doc.resolve(e.pos),n=d&&d.slice;n?r.someProp("transformPasted",j=>{n=j(n,r)}):n=Ot(r,s.dataTransfer.getData(An?"Text":"text/plain"),An?null:s.dataTransfer.getData("text/html"),!1,t);let i=!(!d||s[Nn]);if(r.someProp("handleDrop",j=>j(r,s,n||l.p2.empty,i)))return void s.preventDefault();if(!n)return;s.preventDefault();let u=n?(0,y.nj)(r.state.doc,t.pos,n):t.pos;null==u&&(u=t.pos);let h=r.state.tr;i&&h.deleteSelection();let T=h.mapping.map(u),A=0==n.openStart&&0==n.openEnd&&1==n.content.childCount,L=h.doc;if(A?h.replaceRangeWith(T,T,n.content.firstChild):h.replaceRange(T,T,n),h.doc.eq(L))return;let N=h.doc.resolve(T);if(A&&C.qv.isSelectable(n.content.firstChild)&&N.nodeAfter&&N.nodeAfter.sameMarkup(n.content.firstChild))h.setSelection(new C.qv(N));else{let j=h.mapping.map(u);h.mapping.maps[h.mapping.maps.length-1].forEach((q,ht,Rt,$t)=>j=$t),h.setSelection(un(r,N,h.doc.resolve(j)))}r.focus(),r.dispatch(h.setMeta("uiEvent","drop"))},Ie.focus=r=>{r.input.lastFocus=Date.now(),r.focused||(r.domObserver.stop(),r.dom.classList.add("ProseMirror-focused"),r.domObserver.start(),r.focused=!0,setTimeout(()=>{r.docView&&r.hasFocus()&&!r.domObserver.currentSelection.eq(r.domSelectionRange())&&le(r)},20))},Ie.blur=(r,o)=>{let s=o;r.focused&&(r.domObserver.stop(),r.dom.classList.remove("ProseMirror-focused"),r.domObserver.start(),s.relatedTarget&&r.dom.contains(s.relatedTarget)&&r.domObserver.currentSelection.clear(),r.focused=!1)},Ie.beforeinput=(r,o)=>{if(St&&rt&&"deleteContentBackward"==o.inputType){r.domObserver.flushSoon();let{domChangeCount:d}=r.input;setTimeout(()=>{if(r.input.domChangeCount!=d||(r.dom.blur(),r.focus(),r.someProp("handleKeyDown",t=>t(r,bt(8,"Backspace")))))return;let{$cursor:e}=r.state.selection;e&&e.pos>0&&r.dispatch(r.state.tr.delete(e.pos-1,e.pos).scrollIntoView())},50)}};for(let r in $e)Ie[r]=$e[r];function yn(r,o){if(r==o)return!0;for(let s in r)if(r[s]!==o[s])return!1;for(let s in o)if(!(s in r))return!1;return!0}class Zn{constructor(o,s){this.toDOM=o,this.spec=s||Dn,this.side=this.spec.side||0}map(o,s,d,e){let{pos:t,deleted:n}=o.mapResult(s.from+e,this.side<0?-1:1);return n?null:new on(t-d,t-d,this)}valid(){return!0}eq(o){return this==o||o instanceof Zn&&(this.spec.key&&this.spec.key==o.spec.key||this.toDOM==o.toDOM&&yn(this.spec,o.spec))}destroy(o){this.spec.destroy&&this.spec.destroy(o)}}class dn{constructor(o,s){this.attrs=o,this.spec=s||Dn}map(o,s,d,e){let t=o.map(s.from+e,this.spec.inclusiveStart?-1:1)-d,n=o.map(s.to+e,this.spec.inclusiveEnd?1:-1)-d;return t>=n?null:new on(t,n,this)}valid(o,s){return s.from<s.to}eq(o){return this==o||o instanceof dn&&yn(this.attrs,o.attrs)&&yn(this.spec,o.spec)}static is(o){return o.type instanceof dn}destroy(){}}class Yn{constructor(o,s){this.attrs=o,this.spec=s||Dn}map(o,s,d,e){let t=o.mapResult(s.from+e,1);if(t.deleted)return null;let n=o.mapResult(s.to+e,-1);return n.deleted||n.pos<=t.pos?null:new on(t.pos-d,n.pos-d,this)}valid(o,s){let t,{index:d,offset:e}=o.content.findIndex(s.from);return e==s.from&&!(t=o.child(d)).isText&&e+t.nodeSize==s.to}eq(o){return this==o||o instanceof Yn&&yn(this.attrs,o.attrs)&&yn(this.spec,o.spec)}destroy(){}}class on{constructor(o,s,d){this.from=o,this.to=s,this.type=d}copy(o,s){return new on(o,s,this.type)}eq(o,s=0){return this.type.eq(o.type)&&this.from+s==o.from&&this.to+s==o.to}map(o,s,d){return this.type.map(o,this,s,d)}static widget(o,s,d){return new on(o,o,new Zn(s,d))}static inline(o,s,d,e){return new on(o,s,new dn(d,e))}static node(o,s,d,e){return new on(o,s,new Yn(d,e))}get spec(){return this.type.spec}get inline(){return this.type instanceof dn}}const Bn=[],Dn={};class Ze{constructor(o,s){this.local=o.length?o:Bn,this.children=s.length?s:Bn}static create(o,s){return s.length?jn(s,o,0,Dn):Xe}find(o,s,d){let e=[];return this.findInner(null==o?0:o,null==s?1e9:s,e,0,d),e}findInner(o,s,d,e,t){for(let n=0;n<this.local.length;n++){let i=this.local[n];i.from<=s&&i.to>=o&&(!t||t(i.spec))&&d.push(i.copy(i.from+e,i.to+e))}for(let n=0;n<this.children.length;n+=3)if(this.children[n]<s&&this.children[n+1]>o){let i=this.children[n]+1;this.children[n+2].findInner(o-i,s-i,d,e+i,t)}}map(o,s,d){return this==Xe||0==o.maps.length?this:this.mapInner(o,s,0,0,d||Dn)}mapInner(o,s,d,e,t){let n;for(let i=0;i<this.local.length;i++){let u=this.local[i].map(o,d,e);u&&u.type.valid(s,u)?(n||(n=[])).push(u):t.onRemove&&t.onRemove(this.local[i].spec)}return this.children.length?function(r,o,s,d,e,t,n){let i=r.slice();for(let h=0,T=t;h<s.maps.length;h++){let A=0;s.maps[h].forEach((L,N,j,q)=>{let ht=q-j-(N-L);for(let Rt=0;Rt<i.length;Rt+=3){let $t=i[Rt+1];if($t<0||L>$t+T-A)continue;let Vt=i[Rt]+T-A;N>=Vt?i[Rt+1]=L<=Vt?-2:-1:j>=e&&ht&&(i[Rt]+=ht,i[Rt+1]+=ht)}A+=ht}),T=s.maps[h].map(T,-1)}let u=!1;for(let h=0;h<i.length;h+=3)if(i[h+1]<0){if(-2==i[h+1]){u=!0,i[h+1]=-1;continue}let T=s.map(r[h]+t),A=T-e;if(A<0||A>=d.content.size){u=!0;continue}let N=s.map(r[h+1]+t,-1)-e,{index:j,offset:q}=d.content.findIndex(A),ht=d.maybeChild(j);if(ht&&q==A&&q+ht.nodeSize==N){let Rt=i[h+2].mapInner(s,ht,T+1,r[h]+t+1,n);Rt!=Xe?(i[h]=A,i[h+1]=N,i[h+2]=Rt):(i[h+1]=-2,u=!0)}else u=!0}if(u){let h=function(r,o,s,d,e,t,n){function i(u,h){for(let T=0;T<u.local.length;T++){let A=u.local[T].map(d,e,h);A?s.push(A):n.onRemove&&n.onRemove(u.local[T].spec)}for(let T=0;T<u.children.length;T+=3)i(u.children[T+2],u.children[T]+h+1)}for(let u=0;u<r.length;u+=3)-1==r[u+1]&&i(r[u+2],o[u]+t+1);return s}(i,r,o,s,e,t,n),T=jn(h,d,0,n);o=T.local;for(let A=0;A<i.length;A+=3)i[A+1]<0&&(i.splice(A,3),A-=3);for(let A=0,L=0;A<T.children.length;A+=3){let N=T.children[A];for(;L<i.length&&i[L]<N;)L+=3;i.splice(L,0,T.children[A],T.children[A+1],T.children[A+2])}}return new Ze(o.sort(_n),i)}(this.children,n||[],o,s,d,e,t):n?new Ze(n.sort(_n),Bn):Xe}add(o,s){return s.length?this==Xe?Ze.create(o,s):this.addInner(o,s,0):this}addInner(o,s,d){let e,t=0;o.forEach((i,u)=>{let T,h=u+d;if(T=to(s,i,h)){for(e||(e=this.children.slice());t<e.length&&e[t]<u;)t+=3;e[t]==u?e[t+2]=e[t+2].addInner(i,T,h+1):e.splice(t,0,u,u+i.nodeSize,jn(T,i,h+1,Dn)),t+=3}});let n=lo(t?ao(s):s,-d);for(let i=0;i<n.length;i++)n[i].type.valid(o,n[i])||n.splice(i--,1);return new Ze(n.length?this.local.concat(n).sort(_n):this.local,e||this.children)}remove(o){return 0==o.length||this==Xe?this:this.removeInner(o,0)}removeInner(o,s){let d=this.children,e=this.local;for(let t=0;t<d.length;t+=3){let n,i=d[t]+s,u=d[t+1]+s;for(let A,T=0;T<o.length;T++)(A=o[T])&&A.from>i&&A.to<u&&(o[T]=null,(n||(n=[])).push(A));if(!n)continue;d==this.children&&(d=this.children.slice());let h=d[t+2].removeInner(n,i+1);h!=Xe?d[t+2]=h:(d.splice(t,3),t-=3)}if(e.length)for(let n,t=0;t<o.length;t++)if(n=o[t])for(let i=0;i<e.length;i++)e[i].eq(n,s)&&(e==this.local&&(e=this.local.slice()),e.splice(i--,1));return d==this.children&&e==this.local?this:e.length||d.length?new Ze(e,d):Xe}forChild(o,s){if(this==Xe)return this;if(s.isLeaf)return Ze.empty;let d,e;for(let i=0;i<this.children.length;i+=3)if(this.children[i]>=o){this.children[i]==o&&(d=this.children[i+2]);break}let t=o+1,n=t+s.content.size;for(let i=0;i<this.local.length;i++){let u=this.local[i];if(u.from<n&&u.to>t&&u.type instanceof dn){let h=Math.max(t,u.from)-t,T=Math.min(n,u.to)-t;h<T&&(e||(e=[])).push(u.copy(h,T))}}if(e){let i=new Ze(e.sort(_n),Bn);return d?new bn([i,d]):i}return d||Xe}eq(o){if(this==o)return!0;if(!(o instanceof Ze)||this.local.length!=o.local.length||this.children.length!=o.children.length)return!1;for(let s=0;s<this.local.length;s++)if(!this.local[s].eq(o.local[s]))return!1;for(let s=0;s<this.children.length;s+=3)if(this.children[s]!=o.children[s]||this.children[s+1]!=o.children[s+1]||!this.children[s+2].eq(o.children[s+2]))return!1;return!0}locals(o){return Fn(this.localsInner(o))}localsInner(o){if(this==Xe)return Bn;if(o.inlineContent||!this.local.some(dn.is))return this.local;let s=[];for(let d=0;d<this.local.length;d++)this.local[d].type instanceof dn||s.push(this.local[d]);return s}}Ze.empty=new Ze([],[]),Ze.removeOverlap=Fn;const Xe=Ze.empty;class bn{constructor(o){this.members=o}map(o,s){const d=this.members.map(e=>e.map(o,s,Dn));return bn.from(d)}forChild(o,s){if(s.isLeaf)return Ze.empty;let d=[];for(let e=0;e<this.members.length;e++){let t=this.members[e].forChild(o,s);t!=Xe&&(t instanceof bn?d=d.concat(t.members):d.push(t))}return bn.from(d)}eq(o){if(!(o instanceof bn)||o.members.length!=this.members.length)return!1;for(let s=0;s<this.members.length;s++)if(!this.members[s].eq(o.members[s]))return!1;return!0}locals(o){let s,d=!0;for(let e=0;e<this.members.length;e++){let t=this.members[e].localsInner(o);if(t.length)if(s){d&&(s=s.slice(),d=!1);for(let n=0;n<t.length;n++)s.push(t[n])}else s=t}return s?Fn(d?s:s.sort(_n)):Bn}static from(o){switch(o.length){case 0:return Xe;case 1:return o[0];default:return new bn(o.every(s=>s instanceof Ze)?o:o.reduce((s,d)=>s.concat(d instanceof Ze?d:d.members),[]))}}}function lo(r,o){if(!o||!r.length)return r;let s=[];for(let d=0;d<r.length;d++){let e=r[d];s.push(new on(e.from+o,e.to+o,e.type))}return s}function to(r,o,s){if(o.isLeaf)return null;let d=s+o.nodeSize,e=null;for(let n,t=0;t<r.length;t++)(n=r[t])&&n.from>s&&n.to<d&&((e||(e=[])).push(n),r[t]=null);return e}function ao(r){let o=[];for(let s=0;s<r.length;s++)null!=r[s]&&o.push(r[s]);return o}function jn(r,o,s,d){let e=[],t=!1;o.forEach((i,u)=>{let h=to(r,i,u+s);if(h){t=!0;let T=jn(h,i,s+u+1,d);T!=Xe&&e.push(u,u+i.nodeSize,T)}});let n=lo(t?ao(r):r,-s).sort(_n);for(let i=0;i<n.length;i++)n[i].type.valid(o,n[i])||(d.onRemove&&d.onRemove(n[i].spec),n.splice(i--,1));return n.length||e.length?new Ze(n,e):Xe}function _n(r,o){return r.from-o.from||r.to-o.to}function Fn(r){let o=r;for(let s=0;s<o.length-1;s++){let d=o[s];if(d.from!=d.to)for(let e=s+1;e<o.length;e++){let t=o[e];if(t.from!=d.from){t.from<d.to&&(o==r&&(o=r.slice()),o[s]=d.copy(d.from,t.from),xo(o,e,d.copy(t.from,d.to)));break}t.to!=d.to&&(o==r&&(o=r.slice()),o[e]=t.copy(t.from,d.to),xo(o,e+1,t.copy(d.to,t.to)))}}return o}function xo(r,o,s){for(;o<r.length&&_n(s,r[o])>0;)o++;r.splice(o,0,s)}function co(r){let o=[];return r.someProp("decorations",s=>{let d=s(r.state);d&&d!=Xe&&o.push(d)}),r.cursorWrapper&&o.push(Ze.create(r.state.doc,[r.cursorWrapper.deco])),bn.from(o)}const Bo={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ho=Y&&xt<=11;class Uo{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(o){this.anchorNode=o.anchorNode,this.anchorOffset=o.anchorOffset,this.focusNode=o.focusNode,this.focusOffset=o.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(o){return o.anchorNode==this.anchorNode&&o.anchorOffset==this.anchorOffset&&o.focusNode==this.focusNode&&o.focusOffset==this.focusOffset}}class zo{constructor(o,s){this.view=o,this.handleDOMChange=s,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Uo,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(d=>{for(let e=0;e<d.length;e++)this.queue.push(d[e]);Y&&xt<=11&&d.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),Ho&&(this.onCharData=d=>{this.queue.push({target:d.target,type:"characterData",oldValue:d.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Bo)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let o=this.observer.takeRecords();if(o.length){for(let s=0;s<o.length;s++)this.queue.push(o[s]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Sn(this.view)){if(this.suppressingSelectionUpdates)return le(this.view);if(Y&&xt<=11&&!this.view.state.selection.empty){let o=this.view.domSelectionRange();if(o.focusNode&&X(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(o){if(!o.focusNode)return!0;let d,s=new Set;for(let t=o.focusNode;t;t=g(t))s.add(t);for(let t=o.anchorNode;t;t=g(t))if(s.has(t)){d=t;break}let e=d&&this.view.docView.nearestDesc(d);return e&&e.ignoreMutation({type:"selection",target:3==d.nodeType?d.parentNode:d})?(this.setCurSelection(),!0):void 0}flush(){let{view:o}=this;if(!o.docView||this.flushingSoon>-1)return;let s=this.observer?this.observer.takeRecords():[];this.queue.length&&(s=this.queue.concat(s),this.queue.length=0);let d=o.domSelectionRange(),e=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(d)&&Sn(o)&&!this.ignoreSelectionChange(d),t=-1,n=-1,i=!1,u=[];if(o.editable)for(let T=0;T<s.length;T++){let A=this.registerMutation(s[T],u);A&&(t=t<0?A.from:Math.min(A.from,t),n=n<0?A.to:Math.max(A.to,n),A.typeOver&&(i=!0))}if(Bt&&u.length>1){let T=u.filter(A=>"BR"==A.nodeName);if(2==T.length){let A=T[0],L=T[1];A.parentNode&&A.parentNode.parentNode==L.parentNode?L.remove():A.remove()}}let h=null;t<0&&e&&o.input.lastFocus>Date.now()-200&&Math.max(o.input.lastTouch,o.input.lastClick.time)<Date.now()-300&&ft(d)&&(h=Te(o))&&h.eq(C.Y1.near(o.state.doc.resolve(0),1))?(o.input.lastFocus=0,le(o),this.currentSelection.set(d),o.scrollToSelection()):(t>-1||e)&&(t>-1&&(o.docView.markDirty(t,n),function(r){if(!Ao.has(r)&&(Ao.set(r,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(r.dom).whiteSpace))){if(r.requiresGeckoHackNode=Bt,Do)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Do=!0}}(o)),this.handleDOMChange(t,n,i,u),o.docView&&o.docView.dirty?o.updateState(o.state):this.currentSelection.eq(d)||le(o),this.currentSelection.set(d))}registerMutation(o,s){if(s.indexOf(o.target)>-1)return null;let d=this.view.docView.nearestDesc(o.target);if("attributes"==o.type&&(d==this.view.docView||"contenteditable"==o.attributeName||"style"==o.attributeName&&!o.oldValue&&!o.target.getAttribute("style"))||!d||d.ignoreMutation(o))return null;if("childList"==o.type){for(let T=0;T<o.addedNodes.length;T++)s.push(o.addedNodes[T]);if(d.contentDOM&&d.contentDOM!=d.dom&&!d.contentDOM.contains(o.target))return{from:d.posBefore,to:d.posAfter};let e=o.previousSibling,t=o.nextSibling;if(Y&&xt<=11&&o.addedNodes.length)for(let T=0;T<o.addedNodes.length;T++){let{previousSibling:A,nextSibling:L}=o.addedNodes[T];(!A||Array.prototype.indexOf.call(o.addedNodes,A)<0)&&(e=A),(!L||Array.prototype.indexOf.call(o.addedNodes,L)<0)&&(t=L)}let n=e&&e.parentNode==o.target?D(e)+1:0,i=d.localPosFromDOM(o.target,n,-1),u=t&&t.parentNode==o.target?D(t):o.target.childNodes.length;return{from:i,to:d.localPosFromDOM(o.target,u,1)}}return"attributes"==o.type?{from:d.posAtStart-d.border,to:d.posAtEnd+d.border}:{from:d.posAtStart,to:d.posAtEnd,typeOver:o.target.nodeValue==o.oldValue}}}let Ao=new WeakMap,Do=!1;function So(r){let o=r.pmViewDesc;if(o)return o.parseRule();if("BR"==r.nodeName&&r.parentNode){if(wt&&/^(ul|ol)$/i.test(r.parentNode.nodeName)){let s=document.createElement("div");return s.appendChild(document.createElement("li")),{skip:s}}if(r.parentNode.lastChild==r||wt&&/^(tr|table)$/i.test(r.parentNode.nodeName))return{ignore:!0}}else if("IMG"==r.nodeName&&r.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Io=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function uo(r,o,s){return Math.max(s.anchor,s.head)>o.content.size?null:un(r,o.resolve(s.anchor),o.resolve(s.head))}function eo(r,o,s){let d=r.depth,e=o?r.end():r.pos;for(;d>0&&(o||r.indexAfter(d)==r.node(d).childCount);)d--,e++,o=!1;if(s){let t=r.node(d).maybeChild(r.indexAfter(d));for(;t&&!t.isLeaf;)t=t.firstChild,e++}return e}class Ro{constructor(o,s){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Gn,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=s,this.state=s.state,this.directPlugins=s.plugins||[],this.directPlugins.forEach(_o),this.dispatch=this.dispatch.bind(this),this.dom=o&&o.mount||document.createElement("div"),o&&(o.appendChild?o.appendChild(this.dom):"function"==typeof o?o(this.dom):o.mount&&(this.mounted=!0)),this.editable=Hn(this),mo(this),this.nodeViews=go(this),this.docView=a(this.state.doc,fo(this),co(this),this.dom,this),this.domObserver=new zo(this,(d,e,t,n)=>function(r,o,s,d,e){if(o<0){let ae=r.input.lastSelectionTime>Date.now()-50?r.input.lastSelectionOrigin:null,Ve=Te(r,ae);if(Ve&&!r.state.selection.eq(Ve)){if(St&&rt&&13===r.input.lastKeyCode&&Date.now()-100<r.input.lastKeyCodeTime&&r.someProp("handleKeyDown",On=>On(r,bt(13,"Enter"))))return;let ln=r.state.tr.setSelection(Ve);"pointer"==ae?ln.setMeta("pointer",!0):"key"==ae&&ln.scrollIntoView(),r.dispatch(ln)}return}let t=r.state.doc.resolve(o),n=t.sharedDepth(s);o=t.before(n+1),s=r.state.doc.resolve(s).after(n+1);let A,L,i=r.state.selection,u=function(r,o,s){let h,{node:d,fromOffset:e,toOffset:t,from:n,to:i}=r.docView.parseRange(o,s),u=r.domSelectionRange(),T=u.anchorNode;if(T&&r.dom.contains(1==T.nodeType?T:T.parentNode)&&(h=[{node:T,offset:u.anchorOffset}],ft(u)||h.push({node:u.focusNode,offset:u.focusOffset})),St&&8===r.input.lastKeyCode)for(let ht=t;ht>e;ht--){let Rt=d.childNodes[ht-1],$t=Rt.pmViewDesc;if("BR"==Rt.nodeName&&!$t){t=ht;break}if(!$t||$t.size)break}let A=r.state.doc,L=r.someProp("domParser")||l.aw.fromSchema(r.state.schema),N=A.resolve(n),j=null,q=L.parse(d,{topNode:N.parent,topMatch:N.parent.contentMatchAt(N.index()),topOpen:!0,from:e,to:t,preserveWhitespace:"pre"!=N.parent.type.whitespace||"full",findPositions:h,ruleFromNode:So,context:N});if(h&&null!=h[0].pos){let ht=h[0].pos,Rt=h[1]&&h[1].pos;null==Rt&&(Rt=ht),j={anchor:ht+n,head:Rt+n}}return{doc:q,sel:j,from:n,to:i}}(r,o,s),h=r.state.doc,T=h.slice(u.from,u.to);8===r.input.lastKeyCode&&Date.now()-100<r.input.lastKeyCodeTime?(A=r.state.selection.to,L="end"):(A=r.state.selection.from,L="start"),r.input.lastKeyCode=null;let N=function(r,o,s,d,e){let t=r.findDiffStart(o,s);if(null==t)return null;let{a:n,b:i}=r.findDiffEnd(o,s+r.size,s+o.size);return"end"==e&&(d-=n+Math.max(0,t-Math.min(n,i))-t),n<t&&r.size<o.size?(t-=d<=t&&d>=n?t-d:0,i=t+(i-n),n=t):i<t&&(t-=d<=t&&d>=i?t-d:0,n=t+(n-i),i=t),{start:t,endA:n,endB:i}}(T.content,u.doc.content,u.from,A,L);if((kt&&r.input.lastIOSEnter>Date.now()-225||rt)&&e.some(ae=>1==ae.nodeType&&!Io.test(ae.nodeName))&&(!N||N.endA>=N.endB)&&r.someProp("handleKeyDown",ae=>ae(r,bt(13,"Enter"))))return void(r.input.lastIOSEnter=0);if(!N){if(!(d&&i instanceof C.Bs&&!i.empty&&i.$head.sameParent(i.$anchor))||r.composing||u.sel&&u.sel.anchor!=u.sel.head){if(u.sel){let ae=uo(r,r.state.doc,u.sel);ae&&!ae.eq(r.state.selection)&&r.dispatch(r.state.tr.setSelection(ae))}return}N={start:i.from,endA:i.to,endB:i.to}}if(St&&r.cursorWrapper&&u.sel&&u.sel.anchor==r.cursorWrapper.deco.from&&u.sel.head==u.sel.anchor){let ae=N.endB-N.start;u.sel={anchor:u.sel.anchor+ae,head:u.sel.anchor+ae}}r.input.domChangeCount++,r.state.selection.from<r.state.selection.to&&N.start==N.endB&&r.state.selection instanceof C.Bs&&(N.start>r.state.selection.from&&N.start<=r.state.selection.from+2&&r.state.selection.from>=u.from?N.start=r.state.selection.from:N.endA<r.state.selection.to&&N.endA>=r.state.selection.to-2&&r.state.selection.to<=u.to&&(N.endB+=r.state.selection.to-N.endA,N.endA=r.state.selection.to)),Y&&xt<=11&&N.endB==N.start+1&&N.endA==N.start&&N.start>u.from&&" \xa0"==u.doc.textBetween(N.start-u.from-1,N.start-u.from+1)&&(N.start--,N.endA--,N.endB--);let $t,j=u.doc.resolveNoCache(N.start-u.from),q=u.doc.resolveNoCache(N.endB-u.from),ht=h.resolve(N.start),Rt=j.sameParent(q)&&j.parent.inlineContent&&ht.end()>=N.endA;if((kt&&r.input.lastIOSEnter>Date.now()-225&&(!Rt||e.some(ae=>"DIV"==ae.nodeName||"P"==ae.nodeName))||!Rt&&j.pos<u.doc.content.size&&($t=C.Y1.findFrom(u.doc.resolve(j.pos+1),1,!0))&&$t.head==q.pos)&&r.someProp("handleKeyDown",ae=>ae(r,bt(13,"Enter"))))return void(r.input.lastIOSEnter=0);if(r.state.selection.anchor>N.start&&function(r,o,s,d,e){if(!d.parent.isTextblock||s-o<=e.pos-d.pos||eo(d,!0,!1)<e.pos)return!1;let t=r.resolve(o);if(t.parentOffset<t.parent.content.size||!t.parent.isTextblock)return!1;let n=r.resolve(eo(t,!0,!0));return!(!n.parent.isTextblock||n.pos>s||eo(n,!0,!1)<s)&&d.parent.content.cut(d.parentOffset).eq(n.parent.content)}(h,N.start,N.endA,j,q)&&r.someProp("handleKeyDown",ae=>ae(r,bt(8,"Backspace"))))return void(rt&&St&&r.domObserver.suppressSelectionUpdates());St&&rt&&N.endB==N.start&&(r.input.lastAndroidDelete=Date.now()),rt&&!Rt&&j.start()!=q.start()&&0==q.parentOffset&&j.depth==q.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==N.endA&&(N.endB-=2,q=u.doc.resolveNoCache(N.endB-u.from),setTimeout(()=>{r.someProp("handleKeyDown",function(ae){return ae(r,bt(13,"Enter"))})},20));let qt,Se,Fe,Vt=N.start,Xt=N.endA;if(Rt)if(j.pos==q.pos)Y&&xt<=11&&0==j.parentOffset&&(r.domObserver.suppressSelectionUpdates(),setTimeout(()=>le(r),20)),qt=r.state.tr.delete(Vt,Xt),Se=h.resolve(N.start).marksAcross(h.resolve(N.endA));else if(N.endA==N.endB&&(Fe=function(r,o){let n,i,u,s=r.firstChild.marks,d=o.firstChild.marks,e=s,t=d;for(let T=0;T<d.length;T++)e=d[T].removeFromSet(e);for(let T=0;T<s.length;T++)t=s[T].removeFromSet(t);if(1==e.length&&0==t.length)i=e[0],n="add",u=T=>T.mark(i.addToSet(T.marks));else{if(0!=e.length||1!=t.length)return null;i=t[0],n="remove",u=T=>T.mark(i.removeFromSet(T.marks))}let h=[];for(let T=0;T<o.childCount;T++)h.push(u(o.child(T)));if(l.HY.from(h).eq(r))return{mark:i,type:n}}(j.parent.content.cut(j.parentOffset,q.parentOffset),ht.parent.content.cut(ht.parentOffset,N.endA-ht.start()))))qt=r.state.tr,"add"==Fe.type?qt.addMark(Vt,Xt,Fe.mark):qt.removeMark(Vt,Xt,Fe.mark);else if(j.parent.child(j.index()).isText&&j.index()==q.index()-(q.textOffset?0:1)){let ae=j.parent.textBetween(j.parentOffset,q.parentOffset);if(r.someProp("handleTextInput",Ve=>Ve(r,Vt,Xt,ae)))return;qt=r.state.tr.insertText(ae,Vt,Xt)}if(qt||(qt=r.state.tr.replace(Vt,Xt,u.doc.slice(N.start-u.from,N.endB-u.from))),u.sel){let ae=uo(r,qt.doc,u.sel);ae&&!(St&&rt&&r.composing&&ae.empty&&(N.start!=N.endB||r.input.lastAndroidDelete<Date.now()-100)&&(ae.head==Vt||ae.head==qt.mapping.map(Xt)-1)||Y&&ae.empty&&ae.head==Vt)&&qt.setSelection(ae)}Se&&qt.ensureMarks(Se),r.dispatch(qt.scrollIntoView())}(this,d,e,t,n)),this.domObserver.start(),function(r){for(let o in Ie){let s=Ie[o];r.dom.addEventListener(o,r.input.eventHandlers[o]=d=>{En(r,d)&&!Mn(r,d)&&(r.editable||!(d.type in $e))&&s(r,d)},Qn[o]?{passive:!0}:void 0)}wt&&r.dom.addEventListener("input",()=>null),Cn(r)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let o=this._props;this._props={};for(let s in o)this._props[s]=o[s];this._props.state=this.state}return this._props}update(o){o.handleDOMEvents!=this._props.handleDOMEvents&&Cn(this);let s=this._props;this._props=o,o.plugins&&(o.plugins.forEach(_o),this.directPlugins=o.plugins),this.updateStateInner(o.state,s)}setProps(o){let s={};for(let d in this._props)s[d]=this._props[d];s.state=this.state;for(let d in o)s[d]=o[d];this.update(s)}updateState(o){this.updateStateInner(o,this._props)}updateStateInner(o,s){let d=this.state,e=!1,t=!1;o.storedMarks&&this.composing&&(ro(this),t=!0),this.state=o;let n=d.plugins!=o.plugins||this._props.plugins!=s.plugins;if(n||this._props.plugins!=s.plugins||this._props.nodeViews!=s.nodeViews){let L=go(this);(function(r,o){let s=0,d=0;for(let e in r){if(r[e]!=o[e])return!0;s++}for(let e in o)d++;return s!=d})(L,this.nodeViews)&&(this.nodeViews=L,e=!0)}(n||s.handleDOMEvents!=this._props.handleDOMEvents)&&Cn(this),this.editable=Hn(this),mo(this);let i=co(this),u=fo(this),h=d.plugins==o.plugins||d.doc.eq(o.doc)?o.scrollToSelection>d.scrollToSelection?"to selection":"preserve":"reset",T=e||!this.docView.matchesNode(o.doc,u,i);(T||!o.selection.eq(d.selection))&&(t=!0);let A="preserve"==h&&t&&null==this.dom.style.overflowAnchor&&function(r){let d,e,o=r.dom.getBoundingClientRect(),s=Math.max(0,o.top);for(let t=(o.left+o.right)/2,n=s+1;n<Math.min(innerHeight,o.bottom);n+=5){let i=r.root.elementFromPoint(t,n);if(!i||i==r.dom||!r.dom.contains(i))continue;let u=i.getBoundingClientRect();if(u.top>=s-20){d=i,e=u.top;break}}return{refDOM:d,refTop:e,stack:Zt(r.dom)}}(this);if(t){this.domObserver.stop();let L=T&&(Y||St)&&!this.composing&&!d.selection.empty&&!o.selection.empty&&function(r,o){let s=Math.min(r.$anchor.sharedDepth(r.head),o.$anchor.sharedDepth(o.head));return r.$anchor.start(s)!=o.$anchor.start(s)}(d.selection,o.selection);if(T){let N=St?this.trackWrites=this.domSelectionRange().focusNode:null;(e||!this.docView.update(o.doc,u,i,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=a(o.doc,u,i,this.dom,this)),N&&!this.trackWrites&&(L=!0)}L||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(r){let o=r.docView.domFromPos(r.state.selection.anchor,0),s=r.domSelectionRange();return X(o.node,o.offset,s.anchorNode,s.anchorOffset)}(this))?le(this,L):(Un(this,o.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(d),"reset"==h?this.dom.scrollTop=0:"to selection"==h?this.scrollToSelection():A&&function({refDOM:r,refTop:o,stack:s}){let d=r?r.getBoundingClientRect().top:0;Wt(s,0==d?0:d-o)}(A)}scrollToSelection(){let o=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",s=>s(this)))if(this.state.selection instanceof C.qv){let s=this.docView.domAfterPos(this.state.selection.from);1==s.nodeType&&Lt(this,s.getBoundingClientRect(),o)}else Lt(this,this.coordsAtPos(this.state.selection.head,1),o)}destroyPluginViews(){let o;for(;o=this.pluginViews.pop();)o.destroy&&o.destroy()}updatePluginViews(o){if(o&&o.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let s=0;s<this.pluginViews.length;s++){let d=this.pluginViews[s];d.update&&d.update(this,o)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let s=0;s<this.directPlugins.length;s++){let d=this.directPlugins[s];d.spec.view&&this.pluginViews.push(d.spec.view(this))}for(let s=0;s<this.state.plugins.length;s++){let d=this.state.plugins[s];d.spec.view&&this.pluginViews.push(d.spec.view(this))}}}someProp(o,s){let e,d=this._props&&this._props[o];if(null!=d&&(e=s?s(d):d))return e;for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n].props[o];if(null!=i&&(e=s?s(i):i))return e}let t=this.state.plugins;if(t)for(let n=0;n<t.length;n++){let i=t[n].props[o];if(null!=i&&(e=s?s(i):i))return e}}hasFocus(){if(Y){let o=this.root.activeElement;if(o==this.dom)return!0;if(!o||!this.dom.contains(o))return!1;for(;o&&this.dom!=o&&this.dom.contains(o);){if("false"==o.contentEditable)return!1;o=o.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(r){if(r.setActive)return r.setActive();if(pe)return r.focus(pe);let o=Zt(r);r.focus(null==pe?{get preventScroll(){return pe={preventScroll:!0},!0}}:void 0),pe||(pe=!1,Wt(o,0))}(this.dom),le(this),this.domObserver.start()}get root(){let o=this._root;if(null==o)for(let s=this.dom.parentNode;s;s=s.parentNode)if(9==s.nodeType||11==s.nodeType&&s.host)return s.getSelection||(Object.getPrototypeOf(s).getSelection=()=>s.ownerDocument.getSelection()),this._root=s;return o||document}posAtCoords(o){return Ce(this,o)}coordsAtPos(o,s=1){return Me(this,o,s)}domAtPos(o,s=0){return this.docView.domFromPos(o,s)}nodeDOM(o){let s=this.docView.descAt(o);return s?s.nodeDOM:null}posAtDOM(o,s,d=-1){let e=this.docView.posFromDOM(o,s,d);if(null==e)throw new RangeError("DOM position not inside the editor");return e}endOfTextblock(o,s){return function(r,o,s){return _e==o&&he==s?Ee:(_e=o,he=s,Ee="up"==s||"down"==s?function(r,o,s){let d=o.selection,e="up"==s?d.$from:d.$to;return He(r,o,()=>{let{node:t}=r.docView.domFromPos(e.pos,"up"==s?-1:1);for(;;){let i=r.docView.nearestDesc(t,!0);if(!i)break;if(i.node.isBlock){t=i.contentDOM||i.dom;break}t=i.dom.parentNode}let n=Me(r,e.pos,1);for(let i=t.firstChild;i;i=i.nextSibling){let u;if(1==i.nodeType)u=i.getClientRects();else{if(3!=i.nodeType)continue;u=B(i,0,i.nodeValue.length).getClientRects()}for(let h=0;h<u.length;h++){let T=u[h];if(T.bottom>T.top+1&&("up"==s?n.top-T.top>2*(T.bottom-n.top):T.bottom-n.bottom>2*(n.bottom-T.top)))return!1}}return!0})}(r,o,s):function(r,o,s){let{$head:d}=o.selection;if(!d.parent.isTextblock)return!1;let e=d.parentOffset,t=!e,n=e==d.parent.content.size,i=r.domSelection();return Le.test(d.parent.textContent)&&i.modify?He(r,o,()=>{let{focusNode:u,focusOffset:h,anchorNode:T,anchorOffset:A}=r.domSelectionRange(),L=i.caretBidiLevel;i.modify("move",s,"character");let N=d.depth?r.docView.domAfterPos(d.before()):r.dom,{focusNode:j,focusOffset:q}=r.domSelectionRange(),ht=j&&!N.contains(1==j.nodeType?j:j.parentNode)||u==j&&h==q;try{i.collapse(T,A),u&&(u!=T||h!=A)&&i.extend&&i.extend(u,h)}catch(Rt){}return null!=L&&(i.caretBidiLevel=L),ht}):"left"==s||"backward"==s?t:n}(r,o,s))}(this,s||this.state,o)}pasteHTML(o,s){return Ln(this,"",o,!1,s||new ClipboardEvent("paste"))}pasteText(o,s){return Ln(this,o,null,!0,s||new ClipboardEvent("paste"))}destroy(){!this.docView||(function(r){r.domObserver.stop();for(let o in r.input.eventHandlers)r.dom.removeEventListener(o,r.input.eventHandlers[o]);clearTimeout(r.input.composingTimeout),clearTimeout(r.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],co(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(o){return function(r,o){!Mn(r,o)&&Ie[o.type]&&(r.editable||!(o.type in $e))&&Ie[o.type](r,o)}(this,o)}dispatch(o){let s=this._props.dispatchTransaction;s?s.call(this,o):this.updateState(this.state.apply(o))}domSelectionRange(){return wt&&11===this.root.nodeType&&function(r){let o=r.activeElement;for(;o&&o.shadowRoot;)o=o.shadowRoot.activeElement;return o}(this.dom.ownerDocument)==this.dom?function(r){let o;function s(u){u.preventDefault(),u.stopImmediatePropagation(),o=u.getTargetRanges()[0]}r.dom.addEventListener("beforeinput",s,!0),document.execCommand("indent"),r.dom.removeEventListener("beforeinput",s,!0);let d=o.startContainer,e=o.startOffset,t=o.endContainer,n=o.endOffset,i=r.domAtPos(r.state.selection.anchor);return X(i.node,i.offset,t,n)&&([d,e,t,n]=[t,n,d,e]),{anchorNode:d,anchorOffset:e,focusNode:t,focusOffset:n}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function fo(r){let o=Object.create(null);return o.class="ProseMirror",o.contenteditable=String(r.editable),o.translate="no",r.someProp("attributes",s=>{if("function"==typeof s&&(s=s(r.state)),s)for(let d in s)"class"==d&&(o.class+=" "+s[d]),"style"==d?o.style=(o.style?o.style+";":"")+s[d]:!o[d]&&"contenteditable"!=d&&"nodeName"!=d&&(o[d]=String(s[d]))}),[on.node(0,r.state.doc.content.size,o)]}function mo(r){if(r.markCursor){let o=document.createElement("img");o.className="ProseMirror-separator",o.setAttribute("mark-placeholder","true"),o.setAttribute("alt",""),r.cursorWrapper={dom:o,deco:on.widget(r.state.selection.head,o,{raw:!0,marks:r.markCursor})}}else r.cursorWrapper=null}function Hn(r){return!r.someProp("editable",o=>!1===o(r.state))}function go(r){let o=Object.create(null);function s(d){for(let e in d)Object.prototype.hasOwnProperty.call(o,e)||(o[e]=d[e])}return r.someProp("nodeViews",s),r.someProp("markViews",s),o}function _o(r){if(r.spec.state||r.spec.filterTransaction||r.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}}}]);