!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/core")):"function"==typeof define&&define.amd?define("@tinkoff/ng-polymorpheus",["exports","@angular/common","@angular/core"],e):e((t.tinkoff=t.tinkoff||{},t.tinkoff["ng-polymorpheus"]={}),t.ng.common,t.ng.core)}(this,function(t,e,r){"use strict";var n=new r.InjectionToken("Context from polymorpheus-outlet"),o=(i.prototype.createInjector=function(t,e){return r.Injector.create({parent:this.injector||t,providers:[{provide:n,useValue:e}]})},i);function i(t,e){void 0===e&&(e=null),this.component=t,this.injector=e}var c=(p.prototype.check=function(){this.changeDetectorRef.markForCheck()},p.decorators=[{type:r.Directive,args:[{selector:"ng-template[polymorpheus]",exportAs:"polymorpheus"}]}],p.ctorParameters=function(){return[{type:r.TemplateRef,decorators:[{type:r.Inject,args:[r.TemplateRef]},{type:r.Self}]},{type:r.ChangeDetectorRef,decorators:[{type:r.Inject,args:[r.ChangeDetectorRef]}]}]},p);function p(t,e){this.template=t,this.changeDetectorRef=e}var a=(Object.defineProperty(s.prototype,"primitive",{get:function(){return!this.content||this.isComponent(this.content)||this.isTemplate(this.content)?"":"function"==typeof this.content?this.content(this.context):this.content},enumerable:!0,configurable:!0}),s.prototype.isDirective=function(t){return t instanceof c},s.prototype.isTemplate=function(t){return this.isDirective(t)||t instanceof r.TemplateRef},s.prototype.isComponent=function(t){return t instanceof o},s.prototype.getTemplate=function(t,e){return this.isComponent(t)?e:this.isDirective(t)?t.template:t},s.prototype.ngOnChanges=function(t){var e=t.content,n=t.context,o=!e&&n&&this.outlet&&this.outlet._componentRef;o&&o.injector.get(r.ChangeDetectorRef).markForCheck()},s.prototype.ngDoCheck=function(){this.isDirective(this.content)&&this.content.check()},s.decorators=[{type:r.Component,args:[{selector:"polymorpheus-outlet, [polymorpheus-outlet]",template:'<ng-container\r\n    *ngIf="isTemplate(content) || isComponent(content)"\r\n    #mutableContext="context"\r\n    context\r\n    [ngTemplateOutlet]="getTemplate(content, component)"\r\n    [ngTemplateOutletContext]="context"\r\n>\r\n    <ng-template #component>\r\n        <ng-container\r\n            *ngIf="isComponent(content)"\r\n            [ngComponentOutlet]="content.component"\r\n            [ngComponentOutletInjector]="content | injector : mutableContext.context : injector"\r\n        ></ng-container>\r\n    </ng-template>\r\n</ng-container>\r\n<ng-container *ngIf="primitive">\r\n    <ng-container *ngIf="!template; else child">{{primitive}}</ng-container>\r\n    <ng-template #child>\r\n        <ng-container\r\n            [ngTemplateOutlet]="template"\r\n            [ngTemplateOutletContext]="{$implicit: primitive}"\r\n        ></ng-container>\r\n    </ng-template>\r\n</ng-container>\r\n',changeDetection:r.ChangeDetectionStrategy.OnPush,styles:[":host { display: block; }"]}]}],s.ctorParameters=function(){return[{type:r.Injector,decorators:[{type:r.Inject,args:[r.Injector]}]}]},s.propDecorators={content:[{type:r.Input}],context:[{type:r.Input}],template:[{type:r.ContentChild,args:[r.TemplateRef]}],outlet:[{type:r.ViewChild,args:[e.NgComponentOutlet]}]},s);function s(t){this.injector=t,this.content=null,this.template=null}var l=(Object.defineProperty(u.prototype,"context",{get:function(){var t=this.viewContainerRef.get(0);return t&&t.context},enumerable:!0,configurable:!0}),u.decorators=[{type:r.Directive,args:[{selector:"[context]",exportAs:"context"}]}],u.ctorParameters=function(){return[{type:r.ViewContainerRef,decorators:[{type:r.Inject,args:[r.ViewContainerRef]}]}]},u);function u(t){this.viewContainerRef=t}var m=(f.prototype.transform=function(t,e,n){return t.createInjector(n,e)},f.decorators=[{type:r.Pipe,args:[{name:"injector"}]}],f);function f(){}var g=(h.decorators=[{type:r.NgModule,args:[{imports:[e.CommonModule],declarations:[a,c,l,m],exports:[a,c]}]}],h);function h(){}t.PolymorpheusComponent=o,t.PolymorpheusTemplate=c,t.PolymorpheusOutletComponent=a,t.POLYMORPHEUS_CONTEXT=n,t.PolymorpheusModule=g,t.ɵa=l,t.ɵb=m,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=tinkoff-ng-polymorpheus.umd.min.js.map