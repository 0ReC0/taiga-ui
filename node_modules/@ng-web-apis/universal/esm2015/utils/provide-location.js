/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { SSR_LOCATION } from '../tokens/ssr-location';
import { empty } from './functions';
/**
 * @param {?} req
 * @return {?}
 */
export function provideLocation(req) {
    /** @type {?} */
    const protocol = 'encrypted' in req.socket ? 'https' : 'http';
    /** @type {?} */
    const url = new URL(`${protocol}://${req.headers['host']}${req.url}`);
    url.assign = empty;
    url.reload = empty;
    url.replace = empty;
    url.ancestorOrigins = new (class extends Array {
        /**
         * @return {?}
         */
        contains() {
            return false;
        }
        /**
         * @return {?}
         */
        item() {
            return null;
        }
    })();
    return {
        provide: SSR_LOCATION,
        useValue: url,
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvdmlkZS1sb2NhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BuZy13ZWItYXBpcy91bml2ZXJzYWwvIiwic291cmNlcyI6WyJ1dGlscy9wcm92aWRlLWxvY2F0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFFQSxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFDcEQsT0FBTyxFQUFDLEtBQUssRUFBQyxNQUFNLGFBQWEsQ0FBQzs7Ozs7QUFFbEMsTUFBTSxVQUFVLGVBQWUsQ0FBQyxHQUFvQjs7VUFDMUMsUUFBUSxHQUFHLFdBQVcsSUFBSSxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU07O1VBQ3ZELEdBQUcsR0FBUSxJQUFJLEdBQUcsQ0FBQyxHQUFHLFFBQVEsTUFBTSxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUUxRSxHQUFHLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztJQUNuQixHQUFHLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztJQUNuQixHQUFHLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztJQUNwQixHQUFHLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxLQUFNLFNBQVEsS0FBYTs7OztRQUNsRCxRQUFRO1lBQ0osT0FBTyxLQUFLLENBQUM7UUFDakIsQ0FBQzs7OztRQUVELElBQUk7WUFDQSxPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO0tBQ0osQ0FBQyxFQUFFLENBQUM7SUFFTCxPQUFPO1FBQ0gsT0FBTyxFQUFFLFlBQVk7UUFDckIsUUFBUSxFQUFFLEdBQUc7S0FDaEIsQ0FBQztBQUNOLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1ZhbHVlUHJvdmlkZXJ9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge0luY29taW5nTWVzc2FnZX0gZnJvbSAnaHR0cCc7XHJcbmltcG9ydCB7U1NSX0xPQ0FUSU9OfSBmcm9tICcuLi90b2tlbnMvc3NyLWxvY2F0aW9uJztcclxuaW1wb3J0IHtlbXB0eX0gZnJvbSAnLi9mdW5jdGlvbnMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHByb3ZpZGVMb2NhdGlvbihyZXE6IEluY29taW5nTWVzc2FnZSk6IFZhbHVlUHJvdmlkZXIge1xyXG4gICAgY29uc3QgcHJvdG9jb2wgPSAnZW5jcnlwdGVkJyBpbiByZXEuc29ja2V0ID8gJ2h0dHBzJyA6ICdodHRwJztcclxuICAgIGNvbnN0IHVybDogYW55ID0gbmV3IFVSTChgJHtwcm90b2NvbH06Ly8ke3JlcS5oZWFkZXJzWydob3N0J119JHtyZXEudXJsfWApO1xyXG5cclxuICAgIHVybC5hc3NpZ24gPSBlbXB0eTtcclxuICAgIHVybC5yZWxvYWQgPSBlbXB0eTtcclxuICAgIHVybC5yZXBsYWNlID0gZW1wdHk7XHJcbiAgICB1cmwuYW5jZXN0b3JPcmlnaW5zID0gbmV3IChjbGFzcyBleHRlbmRzIEFycmF5PHN0cmluZz4gaW1wbGVtZW50cyBET01TdHJpbmdMaXN0IHtcclxuICAgICAgICBjb250YWlucygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaXRlbSgpOiBudWxsIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfSkoKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHByb3ZpZGU6IFNTUl9MT0NBVElPTixcclxuICAgICAgICB1c2VWYWx1ZTogdXJsLFxyXG4gICAgfTtcclxufVxyXG4iXX0=