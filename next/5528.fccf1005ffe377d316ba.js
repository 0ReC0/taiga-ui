(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[5528],{5528:(e,t,o)=>{o.r(t),o.d(t,{ExampleTuiEditorUploadFilesModule:()=>U});var i=o(12057),n=o(24751),r=o(33982),u=o(73961),d=o(48014),l=o(58196),s=o(74950),a=o(74788),c=o(43560),p=o(66596),h=o(33772),f=o(35758),T=o(68939);function m(e){return t=>(e.loading$.next(!0),(0,f.D)(t.map((t=>e.upload(t)))).pipe((0,T.x)((()=>e.loading$.next(!1)))))}var v=o(64762),g=o(26215),_=o(94402),E=o(88002);let Z=(()=>{class e{constructor(){this.loading$=new g.X(!1)}upload(e){const t=new FormData;return t.append("file",e,e.name),t.append("expires","1d"),t.append("autoDelete","true"),(0,_.D)(fetch("https://file.io/",{method:"POST",body:t}).then((e=>(0,v.mG)(this,void 0,void 0,(function*(){return e.json()}))))).pipe((0,E.U)((e=>({name:e.name,link:e.link}))))}}return e.ɵfac=function(t){return new(t||e)},e.ɵprov=a.Yz7({token:e,factory:e.ɵfac,providedIn:"root"}),e})();var w=o(23184),A=o(69303),k=o(20179);let y=(()=>{class e{constructor(e){this.fileIoService=e,this.builtInTools=[d.TuiEditorTool.Undo,d.TuiEditorTool.Link,d.TuiEditorTool.Attach],this.control=new n.NI("")}attach(e){e.forEach((e=>{var t,o;return null===(o=null===(t=this.wysiwyg)||void 0===t?void 0:t.editor)||void 0===o?void 0:o.setFileLink(e)}))}}return e.ɵfac=function(t){return new(t||e)(a.Y36(Z))},e.ɵcmp=a.Xpm({type:e,selectors:[["tui-editor-upload-files-example-1"]],viewQuery:function(e,t){if(1&e&&a.Gf(d.TuiEditorComponent,5),2&e){let e;a.iGM(e=a.CRH())&&(t.wysiwyg=e.first)}},features:[a._Bn([{provide:d.TUI_EDITOR_EXTENSIONS,useValue:[Promise.resolve().then(o.bind(o,45222)).then((({StarterKit:e})=>e)),Promise.resolve().then(o.bind(o,84402)).then((({TextStyle:e})=>e)),Promise.resolve().then(o.bind(o,82091)).then((({TuiLink:e})=>e)),o.e(54058).then(o.bind(o,54058)).then((({TuiJumpAnchor:e})=>e)),Promise.resolve().then(o.bind(o,93763)).then((({TuiFileLink:e})=>e))]},{provide:d.TUI_ATTACH_FILES_LOADER,deps:[Z],useFactory:m}])],decls:10,vars:7,consts:[[3,"showLoader"],[1,"editor",3,"formControl","tools","fileAttached"],[3,"content"]],template:function(e,t){1&e&&(a.TgZ(0,"tui-loader",0),a.ALo(1,"async"),a.TgZ(2,"tui-editor",1),a.NdJ("fileAttached",(function(e){return t.attach(e)})),a.qZA(),a.qZA(),a.TgZ(3,"h4"),a._uU(4,"HTML:"),a.qZA(),a._UZ(5,"tui-editor-socket",2),a.TgZ(6,"h4"),a._uU(7,"Text:"),a.qZA(),a.TgZ(8,"p"),a._uU(9),a.qZA()),2&e&&(a.Q6J("showLoader",!!a.lcZ(1,5,t.fileIoService.loading$)),a.xp6(2),a.Q6J("formControl",t.control)("tools",t.builtInTools),a.xp6(3),a.Q6J("content",t.control.value||""),a.xp6(4),a.Oqu(t.control.value))},directives:[w.k,A.a,n.JJ,n.oH,k.D],pipes:[i.Ov],styles:[".editor[_ngcontent-%COMP%]     .tui-editor-socket .ProseMirror{min-height:10rem}"],changeDetection:0}),e})(),x=(()=>{class e{constructor(){this.example1={TypeScript:o.e(18692).then(o.t.bind(o,18692,17)),HTML:o.e(70672).then(o.t.bind(o,70672,17)),LESS:o.e(22540).then(o.t.bind(o,22540,17)),"./filesio.service.ts":o.e(14614).then(o.t.bind(o,14614,17)),"./file-loader.ts":o.e(30954).then(o.t.bind(o,30954,17))}}}return e.ɵfac=function(t){return new(t||e)},e.ɵcmp=a.Xpm({type:e,selectors:[["editor-upload-files"]],features:[a._Bn([{provide:d.TUI_EDITOR_EXTENSIONS,useValue:d.defaultEditorExtensions}])],decls:11,vars:1,consts:[["header","Editor","package","ADDON-EDITOR","type","components"],["tuiLink","","href","https://www.tiptap.dev/"],["tuiLink","","routerLink","/icons/bundled","fragment","sanitizer"],["id","upload-file","heading","Upload files","description","100 uploads per day, 2GB file size limit, files auto-deleted after 1 download",3,"content"]],template:function(e,t){1&e&&(a.TgZ(0,"tui-doc-page",0),a.TgZ(1,"p"),a._uU(2," Rich Text Editor based on "),a.TgZ(3,"a",1),a._uU(4," TipTap Editor "),a.qZA(),a._uU(5," for using with Angular forms. For safety reasons use a "),a.TgZ(6,"a",2),a._uU(7," sanitizer "),a.qZA(),a._uU(8," with this component. "),a.qZA(),a.TgZ(9,"tui-doc-example",3),a._UZ(10,"tui-editor-upload-files-example-1"),a.qZA(),a.qZA()),2&e&&(a.xp6(9),a.Q6J("content",t.example1))},directives:[c.q,p.V,r.yS,h.f,y],encapsulation:2,changeDetection:0}),e})(),U=(()=>{class e{}return e.ɵfac=function(t){return new(t||e)},e.ɵmod=a.oAB({type:e}),e.ɵinj=a.cJS({imports:[[i.ez,l.TuiActiveZoneModule,s.TuiSvgModule,s.TuiLinkModule,s.TuiHostedDropdownModule,s.TuiButtonModule,u.fV,n.u5,n.UX,d.TuiEditorModule,s.TuiLoaderModule,d.TuiEditorSocketModule,r.Bz.forChild((0,u.Ve)(x))]]}),e})()}}]);