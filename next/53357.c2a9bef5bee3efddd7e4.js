"use strict";(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[53357],{53357:(j,r,t)=>{t.r(r),t.d(r,{ExampleTuiEditorUploadImagesModule:()=>R});var m=t(12057),d=t(24751),T=t(33982),g=t(29851),s=t(48014),E=t(68339),l=t(76040),o=t(74788),c=t(88331),D=t(66596),M=t(57068),F=t(22759),I=t(88002),L=t(43190),S=t(68939);function f(n){return i=>{const e=new FileReader;return n.loading$.next(!0),e.readAsDataURL(i),(0,F.R)(e,"load").pipe((0,I.U)(()=>String(e.result)),(0,L.w)(a=>n.save(a)),(0,S.x)(()=>n.loading$.next(!1)))}}var O=t(64762),v=t(53585),N=t(26215),h=t(94402);let p=(()=>{class n{constructor(){this.loading$=new N.X(!1)}static createBody(e){const a=new FormData;return a.append("image",e.split(",").pop()||""),new URLSearchParams(a)}save(e){const{host:a,apiKey:Z,expiration:P}=v.N.imgbb;return(0,h.D)(fetch(`${a}/1/upload?key=${Z}&expiration=${P}`,{method:"POST",body:n.createBody(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(u=>(0,O.mG)(this,void 0,void 0,function*(){return u.json()}))).pipe((0,I.U)(u=>u.data.url))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var A=t(23184),U=t(69303),y=t(20179);let x=(()=>{class n{constructor(e){this.imgbbService=e,this.builtInTools=[s.TuiEditorTool.Undo,s.TuiEditorTool.Img],this.control=new d.NI(""),this.control.patchValue('<img data-type="image-editor" src="/assets/images/lumberjack.png" width="300"><p>Try to drag right border of image!</p><p>To change min/max size of image use token <code>TUI_IMAGE_EDITOR_OPTIONS</code>.</p><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDUwIDUwIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiPjxzdHlsZT4uYXtmaWxsOiNkZDAwMzF9LmJ7ZmlsbDojYzMwMDJmfS5je2ZpbGw6I2ZmZn08L3N0eWxlPjxwYXRoIGNsYXNzPSJhIiBkPSJtNDMuNiAxMi42bC0yLjggMjQuNy0xNS44IDguNy0xNS44LTguNy0yLjgtMjQuNyAxOC42LTYuNnoiLz48cGF0aCBjbGFzcz0iYiIgZD0ibTI1IDZsMTguNiA2LjYtMi44IDI0LjctMTUuOCA4Ljd2LTE1LjMtMjAuMy00LjR6Ii8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGFzcz0iYyIgZD0ibTM2LjYgMzYuNWgtNC4zbC0yLjQtNS44aC05LjlsLTIuMyA1LjhoLTQuM2wxMS42LTI2LjF6bS0xMS42LTE3LjZsLTMuNCA4LjJoNi44eiIvPjwvc3ZnPg==" />')}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(p))},n.\u0275cmp=o.Xpm({type:n,selectors:[["tui-editor-upload-images-example-1"]],features:[o._Bn([E.TuiDestroyService,{provide:s.TUI_EDITOR_EXTENSIONS,deps:[o.zs3],useFactory:i=>[Promise.resolve().then(t.bind(t,2823)).then(({StarterKit:e})=>e),Promise.resolve().then(t.bind(t,53380)).then(({createImageEditorExtension:e})=>e(i)),t.e(44632).then(t.bind(t,44632)).then(({default:e})=>e.configure({inline:!0,allowBase64:!0}))]},{provide:s.TUI_EDITOR_MIN_IMAGE_WIDTH,useValue:150},{provide:s.TUI_EDITOR_MAX_IMAGE_WIDTH,useValue:400},{provide:s.TUI_IMAGE_LOADER,useFactory:f,deps:[p]}])],decls:10,vars:7,consts:[[3,"showLoader"],[1,"editor",3,"formControl","tools"],[3,"content"]],template:function(e,a){1&e&&(o.TgZ(0,"tui-loader",0),o.ALo(1,"async"),o._UZ(2,"tui-editor",1),o.qZA(),o.TgZ(3,"h4"),o._uU(4,"HTML:"),o.qZA(),o._UZ(5,"tui-editor-socket",2),o.TgZ(6,"h4"),o._uU(7,"Text:"),o.qZA(),o.TgZ(8,"p"),o._uU(9),o.qZA()),2&e&&(o.Q6J("showLoader",!!o.lcZ(1,5,a.imgbbService.loading$)),o.xp6(2),o.Q6J("formControl",a.control)("tools",a.builtInTools),o.xp6(3),o.Q6J("content",a.control.value||""),o.xp6(4),o.Oqu(a.control.value))},directives:[A.k,U.a,d.JJ,d.oH,y.D],pipes:[m.Ov],encapsulation:2,changeDetection:0}),n})(),C=(()=>{class n{constructor(){this.example1={TypeScript:t.e(47614).then(t.t.bind(t,47614,17)),HTML:t.e(53474).then(t.t.bind(t,53474,17)),"./image-loader.ts":t.e(73693).then(t.t.bind(t,73693,17)),"./imgbb.service.ts":t.e(33932).then(t.t.bind(t,33932,17))}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["editor-upload-images"]],features:[o._Bn([{provide:s.TUI_EDITOR_EXTENSIONS,useValue:s.defaultEditorExtensions}])],decls:7,vars:1,consts:function(){let i,e;return i=$localize`:␟c1a95de6ffd08f110496afe73d9e3e9631407ea9␟2361436632859407436: Rich Text Editor based on ${"\ufffd#3\ufffd"}:START_LINK: TipTap Editor ${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_LINK: for using with Angular forms. For safety reasons use a ${"\ufffd#4\ufffd"}:START_LINK_1: sanitizer ${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_LINK: with this component. `,i=o.Zx4(i),e=$localize`:␟dedc10d8595aa5ae5fb996e8fc7aef0d191563fd␟9197882377392661723:Upload images to a web server`,[["header","Editor","package","ADDON-EDITOR","type","components"],i,["tuiLink","","href","https://www.tiptap.dev/"],["tuiLink","","routerLink","/icon-set","fragment","sanitizer"],["id","upload-images","heading",e,3,"content"]]},template:function(e,a){1&e&&(o.TgZ(0,"tui-doc-page",0),o.TgZ(1,"p"),o.tHW(2,1),o._UZ(3,"a",2),o._UZ(4,"a",3),o.N_p(),o.qZA(),o.TgZ(5,"tui-doc-example",4),o._UZ(6,"tui-editor-upload-images-example-1"),o.qZA(),o.qZA()),2&e&&(o.xp6(5),o.Q6J("content",a.example1))},directives:[c.q,D.V,T.yS,M.f,x],encapsulation:2,changeDetection:0}),n})(),R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[m.ez,E.TuiActiveZoneModule,l.TuiSvgModule,l.TuiLinkModule,l.TuiHostedDropdownModule,l.TuiButtonModule,g.fV,d.u5,d.UX,s.TuiEditorModule,l.TuiLoaderModule,s.TuiEditorSocketModule,T.Bz.forChild((0,g.Ve)(C))]]}),n})()}}]);