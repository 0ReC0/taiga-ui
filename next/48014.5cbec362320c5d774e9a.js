"use strict";var Xo=Object.defineProperty,qo=Object.defineProperties,ti=Object.getOwnPropertyDescriptors,_o=Object.getOwnPropertySymbols,Yo=Object.prototype.hasOwnProperty,jo=Object.prototype.propertyIsEnumerable,Vo=(ne,Mt,a)=>Mt in ne?Xo(ne,Mt,{enumerable:!0,configurable:!0,writable:!0,value:a}):ne[Mt]=a,ie=(ne,Mt)=>{for(var a in Mt||(Mt={}))Yo.call(Mt,a)&&Vo(ne,a,Mt[a]);if(_o)for(var a of _o(Mt))jo.call(Mt,a)&&Vo(ne,a,Mt[a]);return ne},ye=(ne,Mt)=>qo(ne,ti(Mt)),Qo=(ne,Mt)=>{var a={};for(var E in ne)Yo.call(ne,E)&&Mt.indexOf(E)<0&&(a[E]=ne[E]);if(null!=ne&&_o)for(var E of _o(ne))Mt.indexOf(E)<0&&jo.call(ne,E)&&(a[E]=ne[E]);return a};(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[48014],{77361:(ne,Mt,a)=>{a.d(Mt,{_:()=>T});var E=a(79765),r=a(74788);let T=(()=>{class y{constructor(){this.stateChange$=new E.xQ,this.valueChange$=new E.xQ}}return y.\u0275fac=function(it){return new(it||y)},y.\u0275dir=r.lG2({type:y}),y})()},97019:(ne,Mt,a)=>{a.d(Mt,{h:()=>Nt});var E=a(64762),r=a(74788),T=a(68339),y=a(50170),p=a(1414),it=a(10200),F=a(33250),Y=a(68874),q=a(24751),ft=a(52219),ut=a(12057),X=a(65009),Ct=a(10383),mt=a(20933),Dt=a(35065),zt=a(63060),At=a(62733),_t=a(48214),at=a(11189),ht=a(91030);function $(Ot,Ut){if(1&Ot&&(r.TgZ(0,"button",7),r._uU(1),r.qZA()),2&Ot){const jt=Ut.$implicit;r.Q6J("value",jt),r.xp6(1),r.hij(" ",jt," ")}}function xt(Ot,Ut){if(1&Ot&&(r.TgZ(0,"tui-data-list",5),r.YNc(1,$,2,2,"button",6),r.qZA()),2&Ot){const jt=r.oxw();r.xp6(1),r.Q6J("ngForOf",jt.modes)}}function yt(Ot,Ut){if(1&Ot){const jt=r.EpF();r.TgZ(0,"tui-primitive-textfield",8),r.NdJ("valueChange",function(gt){return r.CHM(jt),r.oxw().onHexChange(gt)}),r._UZ(1,"input",9),r.qZA()}if(2&Ot){const jt=r.oxw();r.Q6J("textMask",jt.hexMask)("tuiTextfieldLabelOutside",!0)("value",jt.hex)}}function Bt(Ot,Ut){if(1&Ot){const jt=r.EpF();r.TgZ(0,"tui-input-count",10),r.NdJ("ngModelChange",function(gt){r.CHM(jt);const O=r.oxw();return O.onRgbChange(gt,O.color[1],O.color[2],O.color[3])}),r.qZA(),r.TgZ(1,"tui-input-count",10),r.NdJ("ngModelChange",function(gt){r.CHM(jt);const O=r.oxw();return O.onRgbChange(O.color[0],gt,O.color[2],O.color[3])}),r.qZA(),r.TgZ(2,"tui-input-count",10),r.NdJ("ngModelChange",function(gt){r.CHM(jt);const O=r.oxw();return O.onRgbChange(O.color[0],O.color[1],gt,O.color[3])}),r.qZA()}if(2&Ot){const jt=r.oxw();r.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",jt.color[0]),r.xp6(1),r.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",jt.color[1]),r.xp6(1),r.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",jt.color[2])}}class Nt{constructor(){this.color=[0,0,0,1],this.colorChange=new r.vpe,this.hexMask={mask:({length:Ut})=>Array.from({length:Ut},()=>/\d|[a-f]|[A-F]/),guide:!1},this.modes=["HEX","RGB"],this.mode=this.modes[0]}get isHex(){return this.mode===this.modes[0]}get hex(){return(0,T.tuiRgbToHex)(this.color[0],this.color[1],this.color[2]).replace("#","")}get opacity(){return Math.round(100*this.color[3])}onHexChange(Ut){if(6!==Ut.length)return;const jt=(0,T.tuiHexToRgb)(Ut);this.updateColor([jt[0],jt[1],jt[2],this.color[3]])}onRgbChange(...Ut){this.updateColor(Ut)}updateColor(Ut){this.color=Ut,this.colorChange.emit(Ut)}}Nt.\u0275fac=function(Ut){return new(Ut||Nt)},Nt.\u0275cmp=r.Xpm({type:Nt,selectors:[["tui-color-edit"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:6,vars:8,consts:[["tuiTextfieldSize","m","tuiDropdownAlign","left","tuiDropdownLimitWidth","min",1,"t-select","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","ngModel","ngModelChange"],["size","s",4,"tuiDataList"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange",4,"ngIf","ngIfElse"],["rgb",""],["postfix","%","tuiTextfieldSize","m",1,"t-opacity","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"],["size","s"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange"],["tuiTextfield","","maxlength","6"],["tuiTextfieldSize","m",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"]],template:function(Ut,jt){if(1&Ut&&(r.TgZ(0,"tui-select",0),r.NdJ("ngModelChange",function(gt){return jt.mode=gt}),r.YNc(1,xt,2,1,"tui-data-list",1),r.qZA(),r.YNc(2,yt,2,3,"tui-primitive-textfield",2),r.YNc(3,Bt,3,12,"ng-template",null,3,r.W1O),r.TgZ(5,"tui-input-count",4),r.NdJ("ngModelChange",function(gt){return jt.onRgbChange(jt.color[0],jt.color[1],jt.color[2],gt/100)}),r.qZA()),2&Ut){const qt=r.MAs(4);r.Q6J("tuiTextfieldLabelOutside",!0)("ngModel",jt.mode),r.xp6(2),r.Q6J("ngIf",jt.isHex)("ngIfElse",qt),r.xp6(3),r.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",100)("ngModel",jt.opacity)}},directives:[y.u,p.O,it.s,F.Ek,Y.x,q.JJ,q.On,ft.g,ut.O5,X.E,Ct.a,mt.q,ut.sg,Dt.v,zt.y,At.B,_t.n,at.h,ht.M],styles:["[_nghost-%COMP%]{display:flex}.t-select[_ngcontent-%COMP%]{width:4.875rem}.t-opacity[_ngcontent-%COMP%]{width:4.275rem}"],changeDetection:0}),(0,E.gn)([(0,T.tuiDefaultProp)()],Nt.prototype,"color",void 0)},49289:(ne,Mt,a)=>{a.d(Mt,{$:()=>F});var E=a(64762),r=a(74788),T=a(91211),y=a(68339),p=a(71424),it=a(65720);class F{constructor(q){this.sanitizer=q,this.colorChange=new r.vpe,this.point=[0,1],this.hue=0,this.opacity=1}set color(q){if(this.currentColor.every((Ct,mt)=>Ct===q[mt])&&q[3]===this.opacity)return;const[ft,ut,X]=(0,y.tuiRgbToHsv)(q[0],q[1],q[2]);this.opacity=q[3],this.hue=ft/360,this.point=[ut,1-X/255]}get currentColor(){return this.getCurrentColor(this.hue,this.point)}get base(){return`rgb(${(0,y.tuiHsvToRgb)(360*this.hue,1,255)})`}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(`linear-gradient(to right, rgba(${this.currentColor.join(",")}, 0), rgb(${this.currentColor.join(",")}))`)}onPointChange(q){this.point=q,this.updateColor()}onHueChange(q){this.hue=q,this.updateColor()}onOpacityChange(q){this.opacity=(0,y.tuiRound)(q,2),this.updateColor()}getCurrentColor(q,ft){return(0,y.tuiHsvToRgb)(360*q,ft[0],255*(1-ft[1]))}updateColor(){this.colorChange.emit([...this.currentColor,this.opacity])}}F.\u0275fac=function(q){return new(q||F)(r.Y36(T.H7))},F.\u0275cmp=r.Xpm({type:F,selectors:[["tui-color-picker"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:5,vars:7,consts:[[1,"t-flat",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_hue"],[1,"t-hue",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_opacity"],[1,"t-opacity",3,"value","valueChange"]],template:function(q,ft){1&q&&(r.TgZ(0,"tui-flat-picker",0),r.NdJ("valueChange",function(X){return ft.onPointChange(X)}),r.qZA(),r.TgZ(1,"div",1),r.TgZ(2,"tui-linear-picker",2),r.NdJ("valueChange",function(X){return ft.onHueChange(X)}),r.qZA(),r.qZA(),r.TgZ(3,"div",3),r.TgZ(4,"tui-linear-picker",4),r.NdJ("valueChange",function(X){return ft.onOpacityChange(X)}),r.qZA(),r.qZA()),2&q&&(r.Udp("background-color",ft.base),r.Q6J("value",ft.point),r.xp6(2),r.Q6J("value",ft.hue),r.xp6(1),r.Udp("background",ft.gradient),r.xp6(1),r.Q6J("value",ft.opacity))},directives:[p.J,it.P],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block}.t-flat[_ngcontent-%COMP%]{height:14rem;background:linear-gradient(rgba(0,0,0,0),#000000),linear-gradient(to right,#ffffff,rgba(255,255,255,0));margin-bottom:.25rem;overflow:hidden}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1rem 1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper_hue[_ngcontent-%COMP%]{background:#ff0000}.t-wrapper_opacity[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hue[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff0000,#ffff00,#00ff00,#00ffff,#0000ff,#ff00ff,#ff0000);border-radius:inherit;margin:0 .5rem}.t-opacity[_ngcontent-%COMP%]{border-radius:inherit;margin:0 .5rem}'],changeDetection:0}),(0,E.gn)([(0,y.tuiDefaultProp)()],F.prototype,"color",null),(0,E.gn)([y.tuiPure],F.prototype,"getCurrentColor",null)},23999:(ne,Mt,a)=>{a.d(Mt,{s:()=>bt});var E=a(64762),r=a(74788),T=a(91211),y=a(14309),p=a(83372),it=a(68339),F=a(62939),Y=a(76189),q=a(12057),ft=a(49289),ut=a(34880),X=a(20933),Ct=a(35065),mt=a(49472),Dt=a(67446),zt=a(29070),At=a(54255),_t=a(15491),at=a(219),ht=a(97019),$=a(39607),xt=a(5451);function yt(Q,ot){if(1&Q&&r._UZ(0,"tui-svg",9),2&Q){r.oxw();const pt=r.MAs(1);r.ekj("t-arrow_rotated",pt.open)}}function Bt(Q,ot){1&Q&&r._UZ(0,"tui-svg",14)}function Nt(Q,ot){if(1&Q){const pt=r.EpF();r.TgZ(0,"button",12),r.NdJ("keydown.enter.prevent",function(){const le=r.CHM(pt).$implicit,Gt=r.oxw(2),De=r.MAs(1);return Gt.onModeSelect(le,De)})("keydown.space.prevent",function(){const le=r.CHM(pt).$implicit,Gt=r.oxw(2),De=r.MAs(1);return Gt.onModeSelect(le,De)})("click",function(){const le=r.CHM(pt).$implicit,Gt=r.oxw(2),De=r.MAs(1);return Gt.onModeSelect(le,De)}),r._uU(1),r.YNc(2,Bt,1,0,"tui-svg",13),r.qZA()}if(2&Q){const pt=ot.$implicit,Kt=r.oxw(2);r.uIk("aria-checked",Kt.isModeActive(pt)),r.xp6(1),r.hij(" ",pt," "),r.xp6(1),r.Q6J("ngIf",Kt.isModeActive(pt))}}function Ot(Q,ot){if(1&Q&&(r.TgZ(0,"tui-data-list",10),r.YNc(1,Nt,3,3,"button",11),r.qZA()),2&Q){const pt=r.oxw();r.xp6(1),r.Q6J("ngForOf",pt.modes)}}function Ut(Q,ot){if(1&Q){const pt=r.EpF();r.TgZ(0,"button",20),r.NdJ("click",function(){const le=r.CHM(pt).$implicit;return r.oxw(2).onDirectionChange(le)}),r.qZA()}if(2&Q){const pt=ot.$implicit,Kt=r.oxw(2);r.ekj("t-direction_active",Kt.isDirectionActive(pt)),r.Q6J("icon",Kt.getIcon(pt))("tuiHint",pt)("tuiHintDescribe","")}}function jt(Q,ot){if(1&Q){const pt=r.EpF();r.ynx(0),r._UZ(1,"hr",15),r.TgZ(2,"div",16),r.TgZ(3,"tui-linear-multi-picker",17),r.NdJ("valueChange",function(Zt){return r.CHM(pt),r.oxw().onStopsChange(Zt)})("indexChange",function(Zt){return r.CHM(pt),r.oxw().onIndexChange(Zt)}),r.qZA(),r.qZA(),r.TgZ(4,"div",18),r.YNc(5,Ut,1,5,"button",19),r.qZA(),r.BQk()}if(2&Q){const pt=r.oxw();r.xp6(2),r.Udp("background",pt.gradient),r.xp6(1),r.Q6J("value",pt.stopsKeys),r.xp6(2),r.Q6J("ngForOf",pt.buttons)}}function qt(Q,ot){if(1&Q){const pt=r.EpF();r.TgZ(0,"tui-color-edit",21),r.NdJ("colorChange",function(Zt){return r.CHM(pt),r.oxw().onColorChange(Zt)}),r.qZA()}if(2&Q){const pt=r.oxw();r.Q6J("color",pt.color)}}function gt(Q,ot){if(1&Q){const pt=r.EpF();r.TgZ(0,"tui-palette",22),r.NdJ("selectedColor",function(Zt){return r.CHM(pt),r.oxw().onPalettePick(Zt)}),r.qZA()}if(2&Q){const pt=r.oxw();r.Q6J("colors",pt.palette)}}const O=[0,0,0,0],Z=[[0,[0,0,0,1]],[1,[255,255,255,1]]],j={"to top right":"tuiIconArrowUpRight","to right":"tuiIconArrowRight","to bottom right":"tuiIconArrowDownRight","to bottom":"tuiIconArrowDown","to bottom left":"tuiIconArrowDownLeft","to left":"tuiIconArrowLeft","to top left":"tuiIconArrowUpLeft","to top":"tuiIconArrowUp"};class bt{constructor(ot,pt){this.sanitizer=ot,this.modes=pt,this.stops=new Map(Z),this.currentStop=0,this.direction="to bottom",this.colors=new Map,this.colorChange=new r.vpe,this.color=[0,0,0,1],this.currentMode=this.modes[0],this.buttons=["to top right","to right","to bottom right","to bottom","to bottom left","to left","to top left","to top"]}set colorSetter(ot){this.parse(ot)}get palette(){return this.filterPalette(this.colors,this.isGradient)}get stopsKeys(){return this.getStopsKeys(this.stops)}get currentColor(){return this.isGradient?this.getStop(this.currentStop):this.color}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(this.getGradient("to right"))}get isGradient(){return this.currentMode===this.modes[1]}getIcon(ot){return j[ot]}isModeActive(ot){return this.currentMode===ot}isDirectionActive(ot){return this.direction===ot}onPalettePick(ot){this.updateColor(ot)}onDirectionChange(ot){this.direction=ot,this.updateColor(this.getGradient(ot))}onModeSelect(ot,pt){this.currentMode=ot,pt.open=!1,this.updateColor(ot===this.modes[0]?`rgba(${this.color.join(", ")})`:this.getGradient(this.direction))}onIndexChange(ot){this.currentStop=this.stopsKeys[ot]}onColorChange(ot){this.isGradient?(this.stops.set(this.currentStop,ot),this.updateColor(this.getGradient(this.direction))):this.updateColor(`rgba(${ot.join(", ")})`)}onStopsChange(ot){const pt=this.stopsKeys.find(Zt=>!ot.includes(Zt)),Kt=ot.find(Zt=>!this.stopsKeys.includes(Zt));void 0===pt&&void 0!==Kt&&this.addStop(Kt),void 0!==pt&&void 0===Kt&&this.removeStop(pt),void 0!==pt&&void 0!==Kt&&this.replaceStop(pt,Kt),this.updateColor(this.getGradient(this.direction))}getStopsKeys(ot){return Array.from(ot.keys())}filterPalette(ot,pt){const Kt=new Map(ot);return Kt.forEach((Zt,le)=>{(Zt.startsWith("linear-gradient")&&!pt||!Zt.startsWith("linear-gradient")&&pt)&&Kt.delete(le)}),Kt}updateColor(ot){this.colorChange.emit(ot)}getGradient(ot){return`linear-gradient(${ot}, ${[...this.stopsKeys].sort().map(pt=>`rgba(${this.getStop(pt).join(", ")}) ${100*pt}%`).join(", ")})`}getStop(ot){return this.stops.get(ot)||O}addStop(ot){const pt=this.stopsKeys.reduce((Kt,Zt)=>Math.abs(Zt-ot)<Math.abs(Kt-ot)?Zt:Kt,this.stopsKeys[0]);this.stops.set(ot,this.getStop(pt)),this.stops=new Map(this.stops),this.currentStop=ot}removeStop(ot){this.stops.delete(ot),this.stops=new Map(this.stops),this.currentStop=this.stopsKeys[0]}replaceStop(ot,pt){const Kt=this.getStop(ot);this.currentStop=pt,this.stops=new Map(this.stopsKeys.map(Zt=>Zt===ot?[pt,Kt]:[Zt,this.getStop(Zt)]))}parse(ot){ot.startsWith("linear-gradient")?this.parseGradient(ot):this.parseColor(ot)}parseGradient(ot){if(ot===this.getGradient(this.direction))return;const pt=(0,p._N)((0,p.U5)(ot));this.currentMode=this.modes[1],this.direction=pt.side,this.currentStop=0,this.stops=new Map(pt.stops.length?pt.stops.map(({color:Kt,position:Zt})=>[parseFloat(Zt)/100,(0,it.tuiParseColor)(Kt)]):Z)}parseColor(ot){this.currentMode=this.modes[0],this.currentStop=0,this.color=(0,it.tuiParseColor)(ot)}}bt.\u0275fac=function(ot){return new(ot||bt)(r.Y36(T.H7),r.Y36(y.dj))},bt.\u0275cmp=r.Xpm({type:bt,selectors:[["tui-color-selector"]],inputs:{colors:"colors",colorSetter:["color","colorSetter"]},outputs:{colorChange:"colorChange"},decls:12,vars:7,consts:[[1,"t-select",3,"content"],["dropdown",""],["tuiButton","","appearance","","size","s","type","button",3,"iconRight"],["arrow",""],["menu",""],[4,"ngIf"],[3,"color","colorChange"],["tuiGroup","","class","t-edit",3,"color","colorChange",4,"ngIf"],["class","t-palette",3,"colors","selectedColor",4,"ngIf"],["src","tuiIconChevronDown",1,"t-arrow"],["role","menu","size","s",1,"t-menu"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click"],["src","tuiIconCheck","class","t-checkmark",4,"ngIf"],["src","tuiIconCheck",1,"t-checkmark"],[1,"t-hr"],[1,"t-wrapper"],[1,"t-gradient",3,"value","valueChange","indexChange"],[1,"t-buttons"],["tuiIconButton","","type","button","size","xs","appearance","","class","t-direction",3,"t-direction_active","icon","tuiHint","tuiHintDescribe","click",4,"ngFor","ngForOf"],["tuiIconButton","","type","button","size","xs","appearance","",1,"t-direction",3,"icon","tuiHint","tuiHintDescribe","click"],["tuiGroup","",1,"t-edit",3,"color","colorChange"],[1,"t-palette",3,"colors","selectedColor"]],template:function(ot,pt){if(1&ot&&(r.TgZ(0,"tui-hosted-dropdown",0,1),r.TgZ(2,"button",2),r._uU(3),r.qZA(),r.YNc(4,yt,1,2,"ng-template",null,3,r.W1O),r.YNc(6,Ot,2,1,"ng-template",null,4,r.W1O),r.qZA(),r.YNc(8,jt,6,4,"ng-container",5),r.TgZ(9,"tui-color-picker",6),r.NdJ("colorChange",function(Zt){return pt.onColorChange(Zt)}),r.qZA(),r.YNc(10,qt,1,1,"tui-color-edit",7),r.YNc(11,gt,1,1,"tui-palette",8)),2&ot){const Kt=r.MAs(5),Zt=r.MAs(7);r.Q6J("content",Zt),r.xp6(2),r.Q6J("iconRight",Kt),r.xp6(1),r.hij(" ",pt.currentMode," "),r.xp6(5),r.Q6J("ngIf",pt.isGradient),r.xp6(1),r.Q6J("color",pt.currentColor),r.xp6(1),r.Q6J("ngIf",!pt.isGradient),r.xp6(1),r.Q6J("ngIf",pt.palette.size)}},directives:[F.o,Y.v,q.O5,ft.$,ut.P,X.q,q.sg,Ct.v,mt.e,Dt.D,zt.x,At.t,_t.D,at.$,ht.h,$.g,xt.R],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block;width:22.6rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hr[_ngcontent-%COMP%]{height:1px;margin:0 0 0 -1px;border:none;background:var(--tui-base-03)}.t-gradient[_ngcontent-%COMP%]{margin:0 .5rem;border-radius:inherit}.t-select[_ngcontent-%COMP%]{margin:.75rem .5rem}.t-arrow[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-arrow_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.t-menu[_ngcontent-%COMP%]{width:11.25rem}.t-checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}.t-buttons[_ngcontent-%COMP%]{display:flex;padding:0 .75rem 1.25rem}.t-direction[_ngcontent-%COMP%]{color:var(--tui-text-02);margin:0 .375rem}.t-direction[_ngcontent-%COMP%]:hover, .t-direction_active[_ngcontent-%COMP%]{color:var(--tui-text-01);background:var(--tui-secondary-hover)}.t-edit[_ngcontent-%COMP%]{margin:1.25rem}.t-palette[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:inset 0 1px var(--tui-base-03)}'],changeDetection:0}),(0,E.gn)([(0,it.tuiDefaultProp)()],bt.prototype,"colors",void 0),(0,E.gn)([(0,it.tuiRequiredSetter)()],bt.prototype,"colorSetter",null),(0,E.gn)([it.tuiPure],bt.prototype,"getStopsKeys",null),(0,E.gn)([it.tuiPure],bt.prototype,"filterPalette",null)},71424:(ne,Mt,a)=>{a.d(Mt,{J:()=>p});var E=a(64762),r=a(74788),T=a(62141),y=a(68339);class p{constructor(F){this.value=[0,0],this.valueChange=new r.vpe,F.subscribe(Y=>{this.value=Y,this.valueChange.emit([Y[0],Y[1]])})}get left(){return 100*this.value[0]}get top(){return 100*this.value[1]}}p.\u0275fac=function(F){return new(F||p)(r.Y36(T.i))},p.\u0275cmp=r.Xpm({type:p,selectors:[["tui-flat-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[r._Bn([y.TuiDestroyService,T.i])],decls:1,vars:4,consts:[[1,"t-circle"]],template:function(F,Y){1&F&&r._UZ(0,"div",0),2&F&&r.Udp("left",Y.left,"%")("top",Y.top,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:-.5rem 0 0 -.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,E.gn)([(0,y.tuiDefaultProp)()],p.prototype,"value",void 0)},27050:(ne,Mt,a)=>{a.d(Mt,{hR:()=>E.h,TD:()=>F,$v:()=>Y.$,H9:()=>ut,sV:()=>X.s,wl:()=>zt,Jd:()=>At.J,ui:()=>q,es:()=>_t.e,GU:()=>mt,P:()=>at.P,g7:()=>ft,Rh:()=>ht.R,VM:()=>Dt});var E=a(97019),r=a(12057),T=a(24751),y=a(76040),p=a(48611),it=a(74788);let F=(()=>{class ${}return $.\u0275fac=function(yt){return new(yt||$)},$.\u0275mod=it.oAB({type:$}),$.\u0275inj=it.cJS({imports:[[r.ez,T.u5,p.TextMaskModule,p.TuiValueAccessorModule,p.TuiSelectModule,y.TuiPrimitiveTextfieldModule,y.TuiTextfieldControllerModule,y.TuiDropdownModule,p.TuiInputCountModule,y.TuiDataListModule]]}),$})();var Y=a(49289);let q=(()=>{class ${}return $.\u0275fac=function(yt){return new(yt||$)},$.\u0275mod=it.oAB({type:$}),$.\u0275inj=it.cJS({imports:[[r.ez]]}),$})(),ft=(()=>{class ${}return $.\u0275fac=function(yt){return new(yt||$)},$.\u0275mod=it.oAB({type:$}),$.\u0275inj=it.cJS({imports:[[r.ez]]}),$})(),ut=(()=>{class ${}return $.\u0275fac=function(yt){return new(yt||$)},$.\u0275mod=it.oAB({type:$}),$.\u0275inj=it.cJS({imports:[[r.ez,q,ft]]}),$})();var X=a(23999),Ct=a(68339);let mt=(()=>{class ${}return $.\u0275fac=function(yt){return new(yt||$)},$.\u0275mod=it.oAB({type:$}),$.\u0275inj=it.cJS({imports:[[r.ez]]}),$})(),Dt=(()=>{class ${}return $.\u0275fac=function(yt){return new(yt||$)},$.\u0275mod=it.oAB({type:$}),$.\u0275inj=it.cJS({imports:[[r.ez,y.TuiHintModule]]}),$})(),zt=(()=>{class ${}return $.\u0275fac=function(yt){return new(yt||$)},$.\u0275mod=it.oAB({type:$}),$.\u0275inj=it.cJS({imports:[[r.ez,y.TuiButtonModule,y.TuiHostedDropdownModule,ut,mt,y.TuiHintModule,y.TuiSvgModule,y.TuiDataListModule,Ct.TuiActiveZoneModule,F,y.TuiGroupModule,Dt]]}),$})();var At=a(71424),_t=a(49472),at=a(65720),ht=a(5451)},49472:(ne,Mt,a)=>{a.d(Mt,{e:()=>F});var E=a(64762),r=a(74788),T=a(62141),y=a(68339),p=a(12057);function it(Y,q){if(1&Y){const ft=r.EpF();r.TgZ(0,"div",1),r.NdJ("mousedown",function(){const Ct=r.CHM(ft).index;return r.oxw().onMouseDown(Ct)})("dblclick",function(){const Ct=r.CHM(ft).index;return r.oxw().onClick(Ct)}),r.qZA()}2&Y&&r.Udp("left",100*q.$implicit,"%")}class F{constructor(q){this.value=[0,1],this.valueChange=new r.vpe,this.indexChange=new r.vpe,this.index=NaN,q.subscribe(([ft])=>{this.onPicker(ft)})}onMouseUp(){this.index=NaN}onMouseDown(q){this.updateIndex(q)}onClick(q){this.value.length>2&&this.updateValue(this.value.filter((ft,ut)=>ut!==q))}onPicker(q){Number.isNaN(this.index)&&(this.updateIndex(this.value.length),this.value=[...this.value,0]),!this.value.some((ft,ut)=>ft===q&&ut!==this.index)&&this.updateValue(this.value.map((ft,ut)=>ut===this.index?q:ft))}updateIndex(q){this.index=q,this.indexChange.emit(q)}updateValue(q){this.value=q,this.valueChange.emit(q)}}F.\u0275fac=function(q){return new(q||F)(r.Y36(T.i))},F.\u0275cmp=r.Xpm({type:F,selectors:[["tui-linear-multi-picker"]],hostBindings:function(q,ft){1&q&&r.NdJ("mouseup",function(){return ft.onMouseUp()},!1,r.evT)},inputs:{value:"value"},outputs:{valueChange:"valueChange",indexChange:"indexChange"},features:[r._Bn([y.TuiDestroyService,T.i])],decls:1,vars:1,consts:[["class","t-circle",3,"left","mousedown","dblclick",4,"ngFor","ngForOf"],[1,"t-circle",3,"mousedown","dblclick"]],template:function(q,ft){1&q&&r.YNc(0,it,1,2,"div",0),2&q&&r.Q6J("ngForOf",ft.value)},directives:[p.sg],styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,E.gn)([(0,y.tuiDefaultProp)()],F.prototype,"value",void 0)},65720:(ne,Mt,a)=>{a.d(Mt,{P:()=>p});var E=a(64762),r=a(74788),T=a(62141),y=a(68339);class p{constructor(F){this.value=0,this.valueChange=new r.vpe,F.subscribe(([Y])=>{this.value=Y,this.valueChange.emit(Y)})}get left(){return 100*this.value}}p.\u0275fac=function(F){return new(F||p)(r.Y36(T.i))},p.\u0275cmp=r.Xpm({type:p,selectors:[["tui-linear-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[r._Bn([y.TuiDestroyService,T.i])],decls:1,vars:2,consts:[[1,"t-circle"]],template:function(F,Y){1&F&&r._UZ(0,"div",0),2&F&&r.Udp("left",Y.left,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,E.gn)([(0,y.tuiDefaultProp)()],p.prototype,"value",void 0)},5451:(ne,Mt,a)=>{a.d(Mt,{R:()=>ut});var E=a(64762),r=a(74788),T=a(68339),y=a(12057),p=a(67446),it=a(29070),F=a(54255),Y=a(15491),q=a(219);function ft(X,Ct){if(1&X){const mt=r.EpF();r.TgZ(0,"button",1),r.NdJ("click",function(){const At=r.CHM(mt).$implicit;return r.oxw().selectedColor.emit(At.value)}),r.qZA()}if(2&X){const mt=Ct.$implicit;r.Udp("background",mt.value),r.Q6J("tuiHint",mt.key)("tuiHintDescribe",mt.key)("id",mt.key)}}class ut{constructor(){this.colors=new Map,this.selectedColor=new r.vpe,this.originalOrder=(Ct,mt)=>0}}ut.\u0275fac=function(Ct){return new(Ct||ut)},ut.\u0275cmp=r.Xpm({type:ut,selectors:[["tui-palette"]],inputs:{colors:"colors"},outputs:{selectedColor:"selectedColor"},decls:2,vars:4,consts:[["type","button","class","t-button",3,"background","tuiHint","tuiHintDescribe","id","click",4,"ngFor","ngForOf"],["type","button",1,"t-button",3,"tuiHint","tuiHintDescribe","id","click"]],template:function(Ct,mt){1&Ct&&(r.YNc(0,ft,1,5,"button",0),r.ALo(1,"keyvalue")),2&Ct&&r.Q6J("ngForOf",r.xi3(1,1,mt.colors,mt.originalOrder))},directives:[y.sg,p.D,it.x,F.t,Y.D,q.$],pipes:[y.Nd],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;padding:.875rem}.t-button[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;width:1.5625rem;height:1.5625rem;box-sizing:border-box;margin:.375rem;border-radius:var(--tui-radius-m);border:1px solid rgba(0,0,0,.08)}"],changeDetection:0}),(0,E.gn)([(0,T.tuiDefaultProp)()],ut.prototype,"colors",void 0)},45050:(ne,Mt,a)=>{a.d(Mt,{l:()=>jt});var E=a(64762),r=a(12057),T=a(74788),y=a(84614),p=a(14309),it=a(68339),F=a(87623),Y=a(20986),q=a(24751),ft=a(34880),ut=a(76189),X=a(66596),Ct=a(3881),mt=a(22613),Dt=a(98266);function zt(qt,gt){1&qt&&(T.ynx(0),T._uU(1,"Edit anchor"),T.BQk())}function At(qt,gt){1&qt&&(T.TgZ(0,"span"),T._uU(1,"Link to anchor"),T.qZA())}function _t(qt,gt){1&qt&&(T.TgZ(0,"span"),T._uU(1,"URL"),T.qZA())}function at(qt,gt){if(1&qt&&(T.YNc(0,At,2,0,"span",1),T.YNc(1,_t,2,0,"ng-template",null,12,T.W1O)),2&qt){const O=T.MAs(2),Z=T.oxw(2);T.Q6J("ngIf",Z.prefixIsHashMode)("ngIfElse",O)}}function ht(qt,gt){if(1&qt&&(T.ynx(0),T._uU(1),T.BQk()),2&qt){const O=gt.ngIf,Z=T.oxw(2);T.xp6(1),T.hij(" ",Z.prefixIsHashMode?O.anchorExample:O.urlExample," ")}}function $(qt,gt){if(1&qt){const O=T.EpF();T.ynx(0),T.TgZ(1,"label",4),T.TgZ(2,"div",5),T.YNc(3,zt,2,0,"ng-container",1),T.YNc(4,at,3,2,"ng-template",null,6,T.W1O),T.qZA(),T.TgZ(6,"div",7),T.TgZ(7,"div",8),T._uU(8),T.qZA(),T.TgZ(9,"tui-input-inline",9),T.NdJ("ngModelChange",function(j){return T.CHM(O),T.oxw().url=j})("input",function(j){let Q;return T.CHM(O),T.oxw().onChange(null==(Q=j.target)?null:Q.value)})("keydown.prevent.enter",function(){return T.CHM(O),T.oxw().onSave()})("keydown.backspace",function(){return T.CHM(O),T.oxw().onBackspace()}),T.YNc(10,ht,2,1,"ng-container",3),T.ALo(11,"async"),T.qZA(),T.qZA(),T.qZA(),T.TgZ(12,"tui-svg",10),T.NdJ("click",function(){return T.CHM(O),T.oxw().onClear()}),T.qZA(),T.TgZ(13,"button",11),T.NdJ("click",function(){return T.CHM(O),T.oxw().onSave()}),T.qZA(),T.BQk()}if(2&qt){const O=T.MAs(5),Z=T.oxw();T.xp6(3),T.Q6J("ngIf",Z.anchorMode)("ngIfElse",O),T.xp6(5),T.Oqu(Z.prefix),T.xp6(1),T.ekj("t-input_filled",Z.hasUrl),T.Q6J("ngModel",Z.url),T.xp6(1),T.Q6J("ngIf",T.lcZ(11,9,Z.texts$)),T.xp6(2),T.ekj("t-cleaner_hidden",!Z.hasUrl)}}function xt(qt,gt){if(1&qt){const O=T.EpF();T.TgZ(0,"a",13),T._uU(1),T.ALo(2,"tuiShortUrl"),T.qZA(),T.TgZ(3,"button",14),T.NdJ("click",function(){return T.CHM(O),T.oxw().onEdit()}),T.qZA(),T.TgZ(4,"button",15),T.NdJ("click",function(){return T.CHM(O),T.oxw().onRemove()}),T.qZA()}if(2&qt){const O=T.oxw();T.Q6J("href",O.href,T.LSH),T.xp6(1),T.AsE(" ",O.anchorMode?"#":"","",T.lcZ(2,3,O.url)," ")}}function yt(qt,gt){if(1&qt){const O=T.EpF();T.TgZ(0,"button",19),T.NdJ("click",function(){const bt=T.CHM(O).$implicit;return T.oxw(2).setAnchor(bt)}),T._uU(1),T.qZA()}if(2&qt){const O=gt.$implicit;T.xp6(1),T.hij(" #",O," ")}}function Bt(qt,gt){if(1&qt&&(T.ynx(0),T._UZ(1,"hr",16),T.TgZ(2,"tui-scrollbar"),T.TgZ(3,"div",17),T.YNc(4,yt,2,1,"button",18),T.ALo(5,"tuiFilterAnchors"),T.qZA(),T.qZA(),T.BQk()),2&qt){const O=T.oxw();T.xp6(4),T.Q6J("ngForOf",T.Dn7(5,1,O.anchorIds,O.prefix,O.url))}}const Nt="#",Ot="http://",Ut="https://";class jt{constructor(gt,O,Z){this.documentRef=gt,this.texts$=O,this.editor=Z,this.isOnlyAnchorMode=this.detectAnchorMode(),this.addLink=new T.vpe,this.removeLink=new T.vpe,this.url=this.getHrefOrAnchorId(),this.edit=!this.url,this.prefix=this.makeDefaultPrefix(),this.anchorIds=this.getAllAnchorsIds()}set anchorMode(gt){this.isOnlyAnchorMode=gt,this.prefix=gt?Nt:this.makeDefaultPrefix()}get anchorMode(){return this.isOnlyAnchorMode}get prefixIsHashMode(){return this.prefix===Nt}get hasUrl(){return!!this.url}get href(){return`${this.prefix}${this.url}`}get showAnchorsList(){return!this.anchorMode&&this.edit&&this.anchorIds.length>0}get isViewMode(){return!this.edit}onSelectionChange(){this.isViewMode&&(this.url=this.getHrefOrAnchorId(),this.anchorMode=this.detectAnchorMode())}onMouseDown(gt){(0,it.tuiIsElement)(gt.target)&&!gt.target.matches("a, button, input")&&gt.preventDefault()}setAnchor(gt){this.url=gt,this.changePrefix(!0)}changePrefix(gt){this.prefix=gt?Nt:Ot}onSave(){this.url?this.addLink.emit(this.href):this.removeLink.emit()}onBackspace(){this.url||(this.prefix=this.isOnlyAnchorMode?Nt:Ot)}onEdit(){this.edit=!0}onRemove(){this.removeLink.emit()}onChange(gt){this.url=this.removePrefix(gt)}onClear(){this.url=""}makeDefaultPrefix(){var gt;const O=this.getAnchorElement();return O&&(!O.getAttribute("href")&&O.getAttribute("id")||(null===(gt=O.getAttribute("href"))||void 0===gt?void 0:gt.startsWith(Nt)))?Nt:Ot}detectAnchorMode(){const gt=this.getAnchorElement();return!(null==gt?void 0:gt.href)&&!!(null==gt?void 0:gt.getAttribute("id"))}getFocusedParentElement(){var gt,O;return(null===(O=null===(gt=this.documentRef.getSelection())||void 0===gt?void 0:gt.focusNode)||void 0===O?void 0:O.parentElement)||null}getAnchorElement(){var gt;return(null===(gt=this.getFocusedParentElement())||void 0===gt?void 0:gt.closest("a"))||null}getHrefOrAnchorId(){const gt=this.getAnchorElement();return gt?this.removePrefix(gt.getAttribute("href")||gt.getAttribute("id")||""):this.url}removePrefix(gt){return gt.startsWith(Ot)?(this.prefix=this.isOnlyAnchorMode?Nt:Ot,gt.replace(Ot,"")):gt.startsWith(Ut)?(this.prefix=this.isOnlyAnchorMode?Nt:Ut,gt.replace(Ut,"")):gt.startsWith(Nt)?(this.prefix=Nt,gt.replace(Nt,"")):gt}getAllAnchorsIds(){var gt;const O=Array.from(null!==(gt=this.editor.getOriginTiptapEditor().view.dom.querySelectorAll('[data-type="jump-anchor"]'))&&void 0!==gt?gt:[]);return Array.from(O).map(Z=>Z.getAttribute("id")||"").filter(Boolean)}}jt.\u0275fac=function(gt){return new(gt||jt)(T.Y36(r.K0),T.Y36(p.b$),T.Y36(y.$3))},jt.\u0275cmp=T.Xpm({type:jt,selectors:[["tui-edit-link"]],hostBindings:function(gt,O){1&gt&&T.NdJ("selectionchange",function(){return O.onSelectionChange()},!1,T.evT)("mousedown",function(j){return O.onMouseDown(j)})},inputs:{anchorMode:"anchorMode"},outputs:{addLink:"addLink",removeLink:"removeLink"},decls:5,vars:3,consts:[[1,"t-edit-link"],[4,"ngIf","ngIfElse"],["view",""],[4,"ngIf"],[1,"t-label"],[1,"t-label-properties"],["fullOptions",""],[1,"t-url"],[1,"t-prefix"],["tuiAutoFocus","",1,"t-input",3,"ngModel","ngModelChange","input","keydown.prevent.enter","keydown.backspace"],["src","tuiIconCloseLarge",1,"t-cleaner",3,"click"],["tuiIconButton","","type","button","size","s","title","Insert link","icon","tuiIconCheckCircleLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],["urlTitle",""],["tuiLink","","target","_blank",1,"t-link",3,"href"],["tuiIconButton","","type","button","size","s","title","Change link","icon","tuiIconEditLarge","shape","rounded","appearance","icon",1,"t-button","t-edit-button",3,"click"],["tuiIconButton","","type","button","size","s","title","Remove link","icon","tuiIconUnlinkLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],[1,"t-hr"],[1,"t-anchor-list"],["type","button","class","t-anchor",3,"click",4,"ngFor","ngForOf"],["type","button",1,"t-anchor",3,"click"]],template:function(gt,O){if(1&gt&&(T.TgZ(0,"div",0),T.YNc(1,$,14,11,"ng-container",1),T.YNc(2,xt,5,5,"ng-template",null,2,T.W1O),T.qZA(),T.YNc(4,Bt,6,5,"ng-container",3)),2&gt){const Z=T.MAs(3);T.xp6(1),T.Q6J("ngIf",O.edit)("ngIfElse",Z),T.xp6(3),T.Q6J("ngIf",O.showAnchorsList)}},directives:[r.O5,F.l,Y.k,q.JJ,q.On,ft.P,ut.v,X.V,Ct.I,r.sg],pipes:[r.Ov,mt.X,Dt.b],styles:["[_nghost-%COMP%]{display:block;min-width:18.75rem}.t-edit-link[_ngcontent-%COMP%]{display:flex;min-height:4rem;align-items:center;padding-right:.75rem}.t-label[_ngcontent-%COMP%]{font:var(--tui-font-text-s);height:var(--tui-height-l);box-sizing:border-box;padding:.4375rem 1rem;min-width:12.5rem;max-width:25rem;width:100%}.t-label-properties[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:8.375rem;justify-content:space-between}.t-property_inactive[_ngcontent-%COMP%]{opacity:.5}.t-url[_ngcontent-%COMP%]{display:flex;font:var(--tui-font-text-m);color:var(--tui-text-02)}.t-input[_ngcontent-%COMP%]{flex:1}.t-input_filled[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-button[_ngcontent-%COMP%]{width:2rem;height:2rem;margin:0 .25rem;transition:background .2s}.t-edit-button[_ngcontent-%COMP%]{margin-left:auto}.t-link[_ngcontent-%COMP%]{margin:0 1rem}.t-cleaner[_ngcontent-%COMP%]{transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;color:var(--tui-base-06);cursor:pointer;margin-left:auto}.t-cleaner[_ngcontent-%COMP%]:hover{color:var(--tui-base-07)}.t-cleaner_hidden[_ngcontent-%COMP%]{visibility:hidden}.t-anchor-list[_ngcontent-%COMP%]{display:flex;max-height:12.5rem;flex-direction:column}.t-anchor[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;background:none;font-size:inherit;line-height:inherit;min-height:2.75rem;padding:.375rem .5rem;margin:.125rem .5rem;border-radius:var(--tui-radius-m);text-align:left}.t-anchor[_ngcontent-%COMP%]:hover{background:var(--tui-base-02);cursor:pointer}"],changeDetection:0}),(0,E.gn)([(0,it.tuiDefaultProp)()],jt.prototype,"anchorMode",null)},71115:(ne,Mt,a)=>{a.d(Mt,{lV:()=>E.l,Fu:()=>Y,bL:()=>q.b,X:()=>ft.X});var E=a(45050),r=a(12057),T=a(24751),y=a(68339),p=a(76040),it=a(48611),F=a(74788);let Y=(()=>{class ut{}return ut.\u0275fac=function(Ct){return new(Ct||ut)},ut.\u0275mod=F.oAB({type:ut}),ut.\u0275inj=F.cJS({imports:[[r.ez,T.u5,y.TuiAutoFocusModule,p.TuiButtonModule,p.TuiSvgModule,p.TuiLinkModule,it.TuiInputInlineModule,it.TuiToggleModule,p.TuiScrollbarModule]]}),ut})();var q=a(98266),ft=a(22613)},98266:(ne,Mt,a)=>{a.d(Mt,{b:()=>r});var E=a(74788);let r=(()=>{class T{transform(p,it,F){return"#"===it?p.filter(Y=>Y!==F):p}}return T.\u0275fac=function(p){return new(p||T)},T.\u0275pipe=E.Yjl({name:"tuiFilterAnchors",type:T,pure:!0}),T})()},22613:(ne,Mt,a)=>{a.d(Mt,{X:()=>p});var E=a(74788);let p=(()=>{class it{transform(Y){return Y.length<60?Y:`${Y.slice(0,Math.max(0,40))}...${Y.slice(Y.length-10)}`}}return it.\u0275fac=function(Y){return new(Y||it)},it.\u0275pipe=E.Yjl({name:"tuiShortUrl",type:it,pure:!0}),it})()},96570:(ne,Mt,a)=>{a.d(Mt,{V:()=>ut});var E=a(74788),r=a(68339),T=a(25126),y=a(39953),p=a(12057);const it=function(){return[0,1]};function F(X,Ct){if(1&X){const mt=E.EpF();E.TgZ(0,"div",4),E.NdJ("tuiSizeChange",function(zt){return E.CHM(mt),E.oxw().sizeChange.emit(zt)}),E.qZA()}2&X&&E.Q6J("tuiResizer",E.DdM(1,it))}const Y=function(X){return[X,0]},q=function(){return[1,0]},ft=["*"];let ut=(()=>{class X{constructor(){this.autoHeight=!1,this.width=null,this.height=null,this.sizeChange=new E.vpe}get hostWidth(){return(0,r.tuiIsNumber)(this.width)?(0,r.tuiPx)(this.width):this.width}get hostHeight(){return this.autoHeight?null:(0,r.tuiIsNumber)(this.height)?(0,r.tuiPx)(this.height):this.height}}return X.\u0275fac=function(mt){return new(mt||X)},X.\u0275cmp=E.Xpm({type:X,selectors:[["tui-editor-resizable"]],hostVars:4,hostBindings:function(mt,Dt){2&mt&&E.Udp("width",Dt.hostWidth)("height",Dt.hostHeight)},inputs:{autoHeight:"autoHeight",width:"width",height:"height"},outputs:{sizeChange:"sizeChange"},ngContentSelectors:ft,decls:5,vars:8,consts:[["tuiResizeable","",1,"t-resizable"],[1,"t-handle","t-handle-left-side",3,"tuiResizer","tuiSizeChange"],["class","t-handle t-handle-bottom-side",3,"tuiResizer","tuiSizeChange",4,"ngIf"],[1,"t-handle","t-handle-right-side",3,"tuiResizer","tuiSizeChange"],[1,"t-handle","t-handle-bottom-side",3,"tuiResizer","tuiSizeChange"]],template:function(mt,Dt){1&mt&&(E.F$t(),E.TgZ(0,"div",0),E.Hsn(1),E.TgZ(2,"div",1),E.NdJ("tuiSizeChange",function(At){return Dt.sizeChange.emit(At)}),E.qZA(),E.YNc(3,F,1,2,"div",2),E.TgZ(4,"div",3),E.NdJ("tuiSizeChange",function(At){return Dt.sizeChange.emit(At)}),E.qZA(),E.qZA()),2&mt&&(E.ekj("t-resizable-auto-height",Dt.autoHeight),E.xp6(2),E.Q6J("tuiResizer",E.VKq(5,Y,-1)),E.xp6(1),E.Q6J("ngIf",!Dt.autoHeight),E.xp6(1),E.Q6J("tuiResizer",E.DdM(7,q)))},directives:[T.U,y.L,p.O5],styles:['[_nghost-%COMP%]{position:relative;display:inline-block;box-sizing:border-box}[_nghost-%COMP%]   .t-resizable[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]   .t-resizable-auto-height[_ngcontent-%COMP%]{height:auto!important}[_nghost-%COMP%]   iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}[_nghost-%COMP%]:hover   .t-handle[_ngcontent-%COMP%]:after{opacity:1}.t-handle[_ngcontent-%COMP%]{position:absolute;top:0;display:flex;width:.75rem;cursor:col-resize;justify-content:center;align-items:center;height:100%}.t-handle[_ngcontent-%COMP%]:after{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";width:50%;height:33%;box-sizing:border-box;border-radius:var(--tui-radius-m);background:var(--tui-base-08);border:1px solid var(--tui-base-03);opacity:0}.t-handle-left-side[_ngcontent-%COMP%]{left:0}.t-handle-bottom-side[_ngcontent-%COMP%]{top:unset;bottom:.3125rem;height:.95rem;width:100%}.t-handle-right-side[_ngcontent-%COMP%]{right:0}'],changeDetection:0}),X})()},95110:(ne,Mt,a)=>{a.d(Mt,{_3:()=>it,V_:()=>F.V,Sl:()=>q});var E=a(40400),r=a(68339),T=a(66682),y=a(46782),p=a(74788);let it=(()=>{class ft extends E.d{constructor(X,Ct){super(),this._height=0,this._width=0,(0,T.T)((0,r.tuiTypedFromEvent)(X,"touchend"),(0,r.tuiTypedFromEvent)(X,"mouseup")).pipe((0,y.R)(Ct)).subscribe(()=>this.updateAttributes({width:this.width,height:this.height}))}get attrs(){var X;return(null===(X=this.node)||void 0===X?void 0:X.attrs)||{src:""}}get width(){return this._width||this.attrs.width||null}get height(){return this._height||this.attrs.height||null}}return ft.\u0275fac=function(X){return new(X||ft)(p.Y36(Document),p.Y36(r.TuiDestroyService))},ft.\u0275dir=p.lG2({type:ft,features:[p.qOj]}),ft})();var F=a(96570),Y=a(12057);let q=(()=>{class ft{}return ft.\u0275fac=function(X){return new(X||ft)},ft.\u0275mod=p.oAB({type:ft}),ft.\u0275inj=p.cJS({imports:[[Y.ez,r.TuiResizeModule,r.TuiResizerModule]]}),ft})()},20179:(ne,Mt,a)=>{a.d(Mt,{D:()=>it});var E=a(12057),r=a(74788),T=a(82113),y=a(68339),p=a(76040);let it=(()=>{class F{constructor(q,ft,ut,X,Ct,mt){this.elementRef=q,this.renderer=ft,this.sanitizer=ut,this.tuiSanitizer=X,this.document=Ct,this.editor=mt}set content(q){this.renderer.setProperty(this.elementRef.nativeElement,"innerHTML",this.tuiSanitizer?this.tuiSanitizer.sanitize(r.q3G.HTML,q.replace(/colwidth/g,"width")):this.sanitizer.sanitize(r.q3G.HTML,q))}click(q){var ft,ut;if(this.editor||!(0,y.tuiIsElement)(q.target))return;const X=(null===(ut=null===(ft=q.target)||void 0===ft?void 0:ft.closest("a"))||void 0===ut?void 0:ut.getAttribute("href"))||"";!X.startsWith("#")||(this.document.location.hash=X.replace("#",""),q.preventDefault())}}return F.\u0275fac=function(q){return new(q||F)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(r.Tiy),r.Y36(p.TUI_SANITIZER,8),r.Y36(E.K0),r.Y36(T.JU,8))},F.\u0275cmp=r.Xpm({type:F,selectors:[["tui-editor-socket"]],hostAttrs:[1,"tui-editor-socket"],hostBindings:function(q,ft){1&q&&r.NdJ("click",function(X){return ft.click(X)})},inputs:{content:"content"},decls:0,vars:0,template:function(q,ft){},styles:['.tui-editor-socket{display:block;margin:0;overflow:hidden;color:var(--tui-text-01);font:var(--tui-font-text-m)}.tui-editor-socket._preview-image img{cursor:pointer}.tui-editor-socket h1,.tui-editor-socket h2,.tui-editor-socket h3,.tui-editor-socket h4,.tui-editor-socket h5,.tui-editor-socket h6{word-break:break-word;line-height:normal}.tui-editor-socket a:not([data-type="jump-anchor"]){color:var(--tui-link);text-decoration:none;outline:none}.tui-editor-socket a:not([data-type="jump-anchor"]):hover{color:var(--tui-link-hover);text-decoration:underline}.tui-editor-socket a:not([data-type="jump-anchor"]):active{color:var(--tui-primary-active)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]{text-decoration:underline;-webkit-text-decoration-color:var(--tui-link);text-decoration-color:var(--tui-link)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:before{content:"#"}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:hover{color:var(--tui-link)}.tui-editor-socket .tableWrapper,.tui-editor-socket .tui-table-wrapper{overflow-x:auto}.tui-editor-socket .ProseMirror{min-height:5.375rem;padding:0 1rem;outline:none;white-space:pre-wrap}.tui-editor-socket p:empty:after{content:" ";white-space:pre}.tui-editor-socket p:first-child{margin-top:0}.tui-editor-socket ul,.tui-editor-socket ol{list-style-type:none;margin:1rem 1rem 1rem 1.5rem;padding:0}.tui-editor-socket li{margin:1rem 0}.tui-editor-socket li p{display:inline;margin:0 auto;word-break:break-word}.tui-editor-socket ul li p{display:inline-block}.tui-editor-socket ul>li:before{content:"";display:inline-block;width:.5rem;height:.5rem;border-radius:100%;margin:.5rem .875rem .0625rem -1.375rem;background-color:var(--tui-primary);vertical-align:top;box-sizing:border-box}.tui-editor-socket li ul>li:before{background:none;border:.125rem solid var(--tui-primary)}.tui-editor-socket li ul>li>ul>li:before{background:var(--tui-primary);border-radius:0;width:.375rem;height:.375rem}.tui-editor-socket ol{counter-reset:item}.tui-editor-socket ol>li:before{content:counters(item,".") ".";width:1.5rem;margin:0 .75rem 0 -1.5rem;counter-increment:item;color:var(--tui-base-05);vertical-align:top}.tui-editor-socket pre{white-space:pre-wrap;word-break:break-word;border-radius:.25rem;margin:1rem 0;padding:.75rem 1rem;font-family:Courier,monospace;color:var(--tui-text-02);background:var(--tui-base-02)}.tui-editor-socket code{box-shadow:none}.tui-editor-socket pre+pre{margin-top:-1.8125rem;padding-top:0}.tui-editor-socket blockquote{margin:1.25rem 0 1.25rem 1.5rem;padding-left:1.0625rem;border-left:1px solid var(--tui-base-04)}.tui-editor-socket p{margin:1rem 0}.tui-editor-socket hr{border:none;border-top:1px solid var(--tui-base-03);margin:1rem 0}.tui-editor-socket table{border-collapse:collapse;table-layout:fixed;width:100%;margin:0;overflow:hidden}.tui-editor-socket table td{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word}.tui-editor-socket table th{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word;font-weight:bold;text-align:left;background-color:var(--tui-base-02);min-height:2rem}.tui-editor-socket table .column-resize-handle{position:absolute;right:-2px;top:0;bottom:-2px;width:4px;background-color:#adf;pointer-events:none}.tui-editor-socket table td>*{margin-top:0;margin-bottom:0}.tui-editor-socket table th>*{margin-top:0;margin-bottom:0}.tui-editor-socket .resize-cursor{cursor:ew-resize;cursor:col-resize}.tui-editor-socket table .tableWrapper{overflow-x:auto}.tui-editor-socket .selectedCell:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:var(--tui-selection);pointer-events:none}.tui-editor-socket font[face="Courier New"]{display:inline-block;padding:.25rem .5rem;border-radius:.25rem;background-color:#ecf1f7;word-break:break-word}.tui-editor-socket details{width:100%;border:1px solid var(--tui-base-04);border-radius:var(--tui-radius-l)}.tui-editor-socket summary{display:flex;align-items:center;min-height:3.5rem;width:100%;padding:0 1.25rem;box-sizing:border-box;border-radius:var(--tui-radius-l);pointer-events:none}.tui-editor-socket summary p{min-width:1px;margin:0}.tui-editor-socket summary::-webkit-details-marker{display:none}.tui-editor-socket details[open] summary{border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-editor-socket div[data-type=details-content]{padding:1.25rem;min-height:3rem;border:1px solid var(--tui-base-04);border-width:1px 0 0}.tui-editor-socket .details-wrapper{position:relative;display:flex}.tui-editor-socket .details-arrow{position:absolute;top:1.5rem;right:1.25rem;height:.575rem;width:.575rem;border:1px solid var(--tui-base-06);border-width:0 2px 2px 0;transform:rotate(45deg);transition:var(--tui-duration, .3s);-webkit-appearance:none;-moz-appearance:none;appearance:none;box-sizing:border-box;padding:0;background:none;cursor:pointer}.tui-editor-socket .details-wrapper_rendered .details-arrow{pointer-events:none}.tui-editor-socket .details-wrapper_rendered summary{transition:transform var(--tui-duration, .3s);cursor:pointer;pointer-events:auto}.tui-editor-socket .details-wrapper_rendered summary:hover{background:var(--tui-base-02)}.tui-editor-socket details[open]+.details-arrow{top:1.75rem;transform:rotate(225deg)}.t-editor-placeholder:before{content:attr(data-placeholder);float:left;color:var(--tui-base-05);pointer-events:none;height:0}.tui-group-node{display:flex;flex-direction:row}.tui-group-node:hover>.tui-group-pointer{pointer-events:auto;opacity:1}.tui-group-pointer{opacity:0;min-height:.8125rem;max-height:.8125rem;min-width:.8125rem;max-width:.8125rem;margin:.3125rem .3125rem 0 0;cursor:-webkit-grab;cursor:grab;background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="black" /></svg>\');background-repeat:no-repeat;background-size:contain;background-position:center}[data-mode=onDark] .tui-group-pointer{background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="white" /></svg>\')}\n'],encapsulation:2,changeDetection:0}),F})()},69303:(ne,Mt,a)=>{a.d(Mt,{a:()=>bt});var E=a(64762),r=a(12057),T=a(74788),y=a(24751),p=a(17406),it=a(19074),F=a(84614),Y=a(14309),q=a(83372),ft=a(68339),ut=a(79089),X=a(40939),Ct=a(2697),mt=a(17163),Dt=a(3881),zt=a(1433),At=a(9872),_t=a(4997),at=a(33250),ht=a(26072),$=a(9829),xt=a(82886),yt=a(39088),Bt=a(20179),Nt=a(74982),Ot=a(45050);function Ut(Q,ot){if(1&Q){const pt=T.EpF();T.TgZ(0,"tui-toolbar",9),T.NdJ("fileAttached",function(Zt){return T.CHM(pt),T.oxw(2).fileAttached.emit(Zt)}),T.Hsn(1,1),T.qZA()}if(2&Q){const pt=T.oxw(2);T.Q6J("tools",pt.tools)("disabled",!pt.interactive)}}function jt(Q,ot){if(1&Q&&(T.TgZ(0,"div",10),T._uU(1),T.qZA()),2&Q){const pt=T.oxw(2);T.xp6(1),T.hij(" ",pt.exampleText," ")}}function qt(Q,ot){if(1&Q){const pt=T.EpF();T.TgZ(0,"div",11),T.TgZ(1,"tui-editor-socket",12),T.NdJ("valueChange",function(Zt){return T.CHM(pt),T.oxw(2).onModelChange(Zt)})("stateChange",function(){return 0}),T.qZA(),T.qZA()}if(2&Q){T.oxw();const pt=T.MAs(9),Kt=T.oxw();T.Q6J("tuiDropdownSelection",Kt.dropdownSelectionHandler)("tuiDropdown",pt),T.xp6(1),T.Q6J("value",Kt.value)("editable",Kt.interactive)}}function gt(Q,ot){if(1&Q){const pt=T.EpF();T.TgZ(0,"tui-edit-link",13,14),T.NdJ("addLink",function(Zt){T.CHM(pt);const le=T.MAs(1),Gt=T.oxw(2);return le.anchorMode?Gt.addAnchor(Zt):Gt.addLink(Zt)})("removeLink",function(){T.CHM(pt);const Zt=T.MAs(1),le=T.oxw(2);return Zt.anchorMode?le.removeAnchor():le.removeLink()}),T.qZA()}}function O(Q,ot){if(1&Q){const pt=T.EpF();T.TgZ(0,"div",1),T.NdJ("tuiActiveZoneChange",function(Zt){return T.CHM(pt),T.oxw().onActiveZone(Zt)}),T.TgZ(1,"div",2),T.YNc(2,Ut,2,2,"tui-toolbar",3),T.TgZ(3,"div",4),T.Hsn(4),T.qZA(),T.YNc(5,jt,2,1,"div",5),T.qZA(),T.TgZ(6,"tui-scrollbar",6),T.YNc(7,qt,2,4,"div",7),T.YNc(8,gt,2,0,"ng-template",null,8,T.W1O),T._UZ(10,"tui-editor-portal-host"),T.qZA(),T.qZA()}if(2&Q){const pt=ot.tuiLet,Kt=T.oxw();T.Q6J("readOnly",Kt.readOnly)("disabled",Kt.disabled)("focus",Kt.computedFocused)("hover",Kt.pseudoHover)("invalid",Kt.computedInvalid),T.xp6(2),T.Q6J("ngIf",pt),T.xp6(1),T.ekj("t-placeholder_raised",Kt.placeholderRaised),T.xp6(2),T.Q6J("ngIf",Kt.hasExampleText),T.xp6(2),T.Q6J("ngIf",pt)}}const Z=["*",[["tools"]]];class bt extends ft.AbstractTuiControl{constructor(ot,pt,Kt,Zt,le,Gt){super(ot,pt),this.editorLoaded$=Kt,this.editorService=Zt,this.contentProcessor=le,this.documentRef=Gt,this.exampleText="",this.tools=it.Db,this.fileAttached=new T.vpe,this.focused=!1,this.isSelectionLink=De=>this.currentFocusedNodeIsAnchor(De)&&(0,q.nC)(De)}get nativeFocusableElement(){var ot;return this.computedDisabled?null:(null===(ot=this.element)||void 0===ot?void 0:ot.nativeElement)||null}get dropdownSelectionHandler(){return this.focused?this.isSelectionLink:ft.ALWAYS_FALSE_HANDLER}get editor(){return this.editorService.getOriginTiptapEditor()?this.editorService:null}get placeholderRaised(){return this.computedFocused&&!this.readOnly||this.hasValue}get hasExampleText(){return!!this.exampleText&&this.computedFocused&&!this.hasValue&&!this.readOnly}writeValue(ot){var pt;if(ot===this.value)return;const Kt=this.contentProcessor(ot||"");super.writeValue(Kt),Kt!==ot&&(null===(pt=this.control)||void 0===pt||pt.setValue(Kt,{onlySelf:!1,emitEvent:!1,emitModelToViewChange:!1,emitViewToModelChange:!1}))}onActiveZone(ot){this.focused=ot,this.updateFocused(ot)}onModelChange(ot){this.updateValue(ot)}addAnchor(ot){var pt;null===(pt=this.editor)||void 0===pt||pt.setAnchor(ot)}removeAnchor(){var ot;null===(ot=this.editor)||void 0===ot||ot.removeAnchor()}addLink(ot){var pt,Kt;null===(pt=this.editor)||void 0===pt||pt.selectClosest(),null===(Kt=this.editor)||void 0===Kt||Kt.setLink(ot)}removeLink(){var ot;null===(ot=this.editor)||void 0===ot||ot.unsetLink()}ngOnDestroy(){var ot;null===(ot=this.editor)||void 0===ot||ot.destroy()}getFallbackValue(){return""}currentFocusedNodeIsAnchor(ot){var pt,Kt,Zt;return!!(null===(Kt=null===(pt=ot.startContainer.parentElement)||void 0===pt?void 0:pt.closest("a"))||void 0===Kt?void 0:Kt.contains((null===(Zt=this.documentRef.getSelection())||void 0===Zt?void 0:Zt.focusNode)||null))}get hasValue(){return!!this.value}}bt.\u0275fac=function(ot){return new(ot||bt)(T.Y36(y.a5,10),T.Y36(T.sBO),T.Y36(Y.ZW),T.Y36(F.$3),T.Y36(Y.F1),T.Y36(r.K0))},bt.\u0275cmp=T.Xpm({type:bt,selectors:[["tui-editor"]],viewQuery:function(ot,pt){if(1&ot&&(T.Gf(F.JU,5,T.SBq),T.Gf(p.M6,5)),2&ot){let Kt;T.iGM(Kt=T.CRH())&&(pt.element=Kt.first),T.iGM(Kt=T.CRH())&&(pt.toolbar=Kt.first)}},inputs:{exampleText:"exampleText",tools:"tools"},outputs:{fileAttached:"fileAttached"},features:[T._Bn([(0,ft.tuiAsFocusableItemAccessor)(bt),ut.m]),T.qOj],ngContentSelectors:["*","tools"],decls:2,vars:3,consts:[["tuiWrapper","","appearance","textfield","class","t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange",4,"tuiLet"],["tuiWrapper","","appearance","textfield",1,"t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange"],[1,"t-toolbar-wrapper"],[3,"tools","disabled","fileAttached",4,"ngIf"],[1,"t-placeholder"],["class","t-example-text",4,"ngIf"],["tuiEditorPortal","",1,"t-scrollbar"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown",4,"ngIf"],["dropdown",""],[3,"tools","disabled","fileAttached"],[1,"t-example-text"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown"],["tuiTiptapEditor","","spellcheck","false",1,"tui-editor-socket",3,"value","editable","valueChange","stateChange"],[3,"addLink","removeLink"],["link",""]],template:function(ot,pt){1&ot&&(T.F$t(Z),T.YNc(0,O,11,10,"div",0),T.ALo(1,"async")),2&ot&&T.Q6J("tuiLet",T.lcZ(1,1,pt.editorLoaded$))},directives:[X.L,Ct.o,mt.e,r.O5,Dt.I,zt.A,At.d,_t.M,at.Ek,ht.t,$.V,xt.A,yt.y,Bt.D,Nt.J,Ot.l],pipes:[r.Ov],styles:["[_nghost-%COMP%]{position:relative;z-index:0;display:block;font:var(--tui-font-text-m);border-radius:var(--tui-radius-m)}.t-wrapper[_ngcontent-%COMP%]{display:flex;max-height:inherit;min-height:10rem;cursor:text;overflow:hidden;flex-direction:column;border-radius:inherit}.t-placeholder[_ngcontent-%COMP%]{transition-property:transform,font-size,color,letter-spacing;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;font:var(--tui-font-text-s);color:var(--tui-text-01);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:var(--tui-text-02);pointer-events:none;will-change:transform;transform:translateY(0);position:absolute;left:1rem;margin-top:1rem;width:95%;font-size:.9375rem}.t-placeholder_raised[_ngcontent-%COMP%]{transform:translateY(-.625rem)}[data-size=m][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font:var(--tui-font-text-xs);transform:translateY(-.5rem);letter-spacing:.025rem}._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], ._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill)}[data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], [data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill-night)}._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-03)}[data-size=l][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{font-size:.9375rem}[data-size=l][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font-size:.8156rem}[data-size=m]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01)}[data-mode=onDark][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}[data-size=m][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}@supports (-webkit-hyphens: none){.t-placeholder[_ngcontent-%COMP%]{will-change:unset;transition-property:transform,color,letter-spacing}}.t-placeholder_raised[_ngcontent-%COMP%]{width:110%}.t-example-text[_ngcontent-%COMP%]{position:absolute;left:1rem;margin-top:1.6rem;color:var(--tui-base-06);letter-spacing:normal;text-transform:none}.t-example-text_light[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}.t-example-text_dark[_ngcontent-%COMP%]{color:var(--tui-text-03)}.t-scrollbar[_ngcontent-%COMP%]{display:flex;max-height:inherit;border-top:1.625rem solid transparent;border-bottom:1px solid transparent;box-sizing:border-box}"],changeDetection:0}),(0,E.gn)([(0,ft.tuiDefaultProp)()],bt.prototype,"exampleText",void 0),(0,E.gn)([(0,ft.tuiDefaultProp)()],bt.prototype,"tools",void 0)},79089:(ne,Mt,a)=>{a.d(Mt,{m:()=>ft});var E=a(74788),r=a(84614),T=a(14309),y=a(82298),p=a(9112),it=a(15257),F=a(88002),Y=a(47349),q=a(73825);const ft=[{provide:T.F4,deps:[T.Wf],useFactory:ut=>{const X=new y.t(1);return Promise.all(ut).then(Ct=>X.next(Ct)),X}},{provide:T.Y1,deps:[E.Qsj],useFactory:ut=>ut.createElement("div")},{provide:T.ZW,deps:[T.Y1,T.F4,T.bG],useFactory:(ut,X,Ct)=>(0,p.aj)([Ct,X]).pipe((0,it.q)(1),(0,F.U)(([mt,Dt])=>new mt({element:ut,extensions:Dt})),(0,Y.d)({bufferSize:1,refCount:!0}))},r.$3,q.Y]},9872:(ne,Mt,a)=>{a.d(Mt,{d:()=>T});var E=a(68339),r=a(74788);let T=(()=>{class y extends E.AbstractTuiPortalHostComponent{}return y.\u0275fac=function(){let p;return function(F){return(p||(p=r.n5z(y)))(F||y)}}(),y.\u0275cmp=r.Xpm({type:y,selectors:[["tui-editor-portal-host"]],features:[r._Bn([{provide:E.AbstractTuiPortalService,useExisting:E.TuiDropdownPortalService},{provide:E.AbstractTuiPortalHostComponent,useExisting:y}]),r.qOj],decls:2,vars:0,consts:[["viewContainer",""]],template:function(it,F){1&it&&r.GkF(0,null,0)},styles:["[_nghost-%COMP%]{position:relative;z-index:1;display:block;height:100%}"],changeDetection:0}),y})()},1433:(ne,Mt,a)=>{a.d(Mt,{A:()=>y});var E=a(68339),r=a(73825),T=a(74788);let y=(()=>{class p{}return p.\u0275fac=function(F){return new(F||p)},p.\u0275dir=T.lG2({type:p,selectors:[["","tuiEditorPortal",""]],features:[T._Bn([{provide:E.TuiDropdownPortalService,useExisting:r.Y}])]}),p})()},73825:(ne,Mt,a)=>{a.d(Mt,{Y:()=>T});var E=a(68339),r=a(74788);let T=(()=>{class y extends E.AbstractTuiPortalService{}return y.\u0275fac=function(){let p;return function(F){return(p||(p=r.n5z(y)))(F||y)}}(),y.\u0275prov=r.Yz7({token:y,factory:y.\u0275fac}),y})()},19769:(ne,Mt,a)=>{a.d(Mt,{j:()=>At});var E=a(64762),r=a(74788),T=a(24751),y=a(91211),p=a(83372),it=a(68339),F=a(76040),Y=a(62939),q=a(63060),ft=a(62733),ut=a(3729),X=a(23999),Ct=a(17163);function mt(_t,at){if(1&_t&&r._UZ(0,"div",4),2&_t){const ht=r.oxw();r.Udp("background",ht.background)}}function Dt(_t,at){if(1&_t){const ht=r.EpF();r.TgZ(0,"tui-color-selector",5),r.NdJ("colorChange",function(xt){return r.CHM(ht),r.oxw().onValueChange(xt)}),r.qZA()}if(2&_t){const ht=at.$implicit,$=r.oxw();r.Q6J("tuiActiveZoneParent",ht)("colors",$.colors)("color",$.value)}}class At extends it.AbstractTuiControl{constructor(at,ht,$){super(at,ht),this.domSanitizer=$,this.colors=new Map,this.open=!1}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return!!this.dropdown&&this.dropdown.focused}get background(){return this.sanitize(this.value,this.domSanitizer)}onClick(){this.open=!this.open}onValueChange(at){this.updateValue(at)}onFocused(at){this.updateFocused(at)}getFallbackValue(){return"#000000"}sanitize(at,ht){return at.startsWith("linear-gradient(")?ht.bypassSecurityTrustStyle((0,p.CH)((0,p._N)((0,p.U5)(at)))):at}}At.\u0275fac=function(at){return new(at||At)(r.Y36(T.a5,10),r.Y36(r.sBO),r.Y36(y.H7))},At.\u0275cmp=r.Xpm({type:At,selectors:[["tui-input-color"]],viewQuery:function(at,ht){if(1&at&&(r.Gf(F.TuiPrimitiveTextfieldComponent,5),r.Gf(F.TuiHostedDropdownComponent,5)),2&at){let $;r.iGM($=r.CRH())&&(ht.textfield=$.first),r.iGM($=r.CRH())&&(ht.dropdown=$.first)}},hostBindings:function(at,ht){1&at&&r.NdJ("click",function(){return ht.onClick()})},inputs:{colors:"colors"},features:[r._Bn([],[(0,F.tuiDropdownOptionsProvider)({maxHeight:600})]),r.qOj],ngContentSelectors:["*"],decls:7,vars:12,consts:[[1,"t-wrapper",3,"content","open","openChange"],[1,"t-textfield",3,"tuiTextfieldIconLeft","pseudoFocus","pseudoHover","pseudoActive","invalid","focusable","nativeId","disabled","readOnly","value","valueChange","focusedChange"],["color",""],["picker",""],[1,"t-color"],[3,"tuiActiveZoneParent","colors","color","colorChange"]],template:function(at,ht){if(1&at&&(r.F$t(),r.TgZ(0,"tui-hosted-dropdown",0),r.NdJ("openChange",function(xt){return ht.open=xt}),r.TgZ(1,"tui-primitive-textfield",1),r.NdJ("valueChange",function(xt){return ht.onValueChange(xt)})("focusedChange",function(xt){return ht.onFocused(xt)}),r.Hsn(2),r.qZA(),r.qZA(),r.YNc(3,mt,1,2,"ng-template",null,2,r.W1O),r.YNc(5,Dt,1,3,"ng-template",null,3,r.W1O)),2&at){const $=r.MAs(4),xt=r.MAs(6);r.Q6J("content",xt)("open",ht.open),r.xp6(1),r.Q6J("tuiTextfieldIconLeft",$)("pseudoFocus",ht.computedFocused)("pseudoHover",ht.pseudoHover)("pseudoActive",ht.pseudoActive)("invalid",ht.computedInvalid)("focusable",ht.focusable)("nativeId",ht.nativeId)("disabled",ht.disabled)("readOnly",ht.readOnly)("value",ht.value)}},directives:[Y.o,q.y,ft.B,ut.aR,X.s,Ct.e],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-wrapper[_ngcontent-%COMP%]{display:flex;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-color[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-03-dark);border-radius:.125rem}"],changeDetection:0}),(0,E.gn)([(0,it.tuiDefaultProp)()],At.prototype,"colors",void 0),(0,E.gn)([it.tuiPure],At.prototype,"sanitize",null)},37924:(ne,Mt,a)=>{a.d(Mt,{X:()=>_t});var E=a(84614),r=a(14309),T=a(9112),y=a(88002),p=a(74788),it=a(12057),F=a(40939),Y=a(62939),q=a(76189),ft=a(67446),ut=a(29070),X=a(54255),Ct=a(15491),mt=a(219);function Dt(at,ht){if(1&at){const $=p.EpF();p.TgZ(0,"div",6),p.TgZ(1,"button",7),p.NdJ("click",function(){return p.CHM($),p.oxw(3).editor.onAlign("left")}),p.qZA(),p.TgZ(2,"button",8),p.NdJ("click",function(){return p.CHM($),p.oxw(3).editor.onAlign("center")}),p.qZA(),p.TgZ(3,"button",9),p.NdJ("click",function(){return p.CHM($),p.oxw(3).editor.onAlign("right")}),p.qZA(),p.TgZ(4,"button",10),p.NdJ("click",function(){return p.CHM($),p.oxw(3).editor.onAlign("justify")}),p.qZA(),p.qZA()}if(2&at){const $=p.oxw().tuiLet,xt=p.oxw().ngIf;p.xp6(1),p.Q6J("pseudoActive",!(null==$||!$.left))("tuiHint",xt.justifyLeft),p.xp6(1),p.Q6J("pseudoActive",!(null==$||!$.center))("tuiHint",xt.justifyCenter),p.xp6(1),p.Q6J("pseudoActive",!(null==$||!$.right))("tuiHint",xt.justifyRight),p.xp6(1),p.Q6J("pseudoActive",!(null==$||!$.justify))("tuiHint",xt.justifyFull)}}function zt(at,ht){if(1&at&&(p.TgZ(0,"tui-hosted-dropdown",2,3),p._UZ(2,"button",4),p.YNc(3,Dt,5,8,"ng-template",null,5,p.W1O),p.qZA()),2&at){const $=p.MAs(1),xt=p.MAs(4),yt=p.oxw().ngIf;p.Q6J("content",xt),p.xp6(2),p.Q6J("tuiHint",yt.justify)("tuiHintDescribe","")("pseudoActive",$.open)("focusable",$.open)}}function At(at,ht){if(1&at&&(p.ynx(0),p.YNc(1,zt,5,5,"tui-hosted-dropdown",1),p.ALo(2,"async"),p.BQk()),2&at){const $=p.oxw();p.xp6(1),p.Q6J("tuiLet",p.lcZ(2,1,$.alignState$))}}let _t=(()=>{class at{constructor($,xt){this.editor=$,this.texts$=xt,this.alignState$=(0,T.aj)([this.editor.isActive$({textAlign:"left"}),this.editor.isActive$({textAlign:"right"}),this.editor.isActive$({textAlign:"center"}),this.editor.isActive$({textAlign:"justify"})]).pipe((0,y.U)(([yt,Bt,Nt,Ot])=>({left:yt,right:Bt,center:Nt,justify:Ot})))}}return at.\u0275fac=function($){return new($||at)(p.Y36(E.$3),p.Y36(r.rf))},at.\u0275cmp=p.Xpm({type:at,selectors:[["tui-align-content"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["align",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["alignDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignCenterLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignRightLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignJustifyLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"]],template:function($,xt){1&$&&(p.YNc(0,At,3,3,"ng-container",0),p.ALo(1,"async")),2&$&&p.Q6J("ngIf",p.lcZ(1,1,xt.texts$))},directives:[it.O5,F.L,Y.o,q.v,ft.D,ut.x,X.t,Ct.D,mt.$],pipes:[it.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),at})()},15587:(ne,Mt,a)=>{a.d(Mt,{T:()=>_t});var E=a(84614),r=a(14309),T=a(88002),y=a(87519),p=a(74788),it=a(62939),F=a(76189),Y=a(67446),q=a(29070),ft=a(54255),ut=a(15491),X=a(219),Ct=a(20933),mt=a(12057),Dt=a(35065);function zt(at,ht){if(1&at){const $=p.EpF();p.TgZ(0,"button",5),p.NdJ("click",function(){const Bt=p.CHM($).index;return p.oxw(2).onCode(!!Bt)}),p._uU(1),p.qZA()}if(2&at){const $=ht.$implicit;p.xp6(1),p.hij(" ",$," ")}}function At(at,ht){if(1&at&&(p.TgZ(0,"tui-data-list"),p.YNc(1,zt,2,1,"button",4),p.ALo(2,"async"),p.qZA()),2&at){const $=p.oxw();p.xp6(1),p.Q6J("ngForOf",p.lcZ(2,1,$.codeOptionsTexts$))}}let _t=(()=>{class at{constructor($,xt,yt){this.editor=$,this.texts$=xt,this.codeOptionsTexts$=yt,this.hintText$=this.texts$.pipe((0,T.U)(Bt=>Bt.code)),this.insideCode$=this.editor.stateChange$.pipe((0,T.U)(()=>this.editor.isActive("code")||this.editor.isActive("codeBlock")),(0,y.x)())}onCode($){$?this.editor.toggleCodeBlock():this.editor.toggleCode()}}return at.\u0275fac=function($){return new($||at)(p.Y36(E.$3),p.Y36(r.rf),p.Y36(r.Mr))},at.\u0275cmp=p.Xpm({type:at,selectors:[["tui-code"]],decls:7,vars:9,consts:[[3,"content"],["codes",""],["tuiIconButton","","type","button","size","s","icon","tuiIconCodeLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["codesDropdown",""],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function($,xt){if(1&$&&(p.TgZ(0,"tui-hosted-dropdown",0,1),p._UZ(2,"button",2),p.ALo(3,"async"),p.ALo(4,"async"),p.YNc(5,At,3,3,"ng-template",null,3,p.W1O),p.qZA()),2&$){const yt=p.MAs(1),Bt=p.MAs(6);p.Q6J("content",Bt),p.xp6(2),p.Q6J("tuiHint",p.lcZ(3,5,xt.hintText$))("tuiHintDescribe","")("pseudoActive",yt.open||p.lcZ(4,7,xt.insideCode$))("focusable",yt.open)}},directives:[it.o,F.v,Y.D,q.x,ft.t,ut.D,X.$,Ct.q,mt.sg,Dt.v],pipes:[mt.Ov],encapsulation:2,changeDetection:0}),at})()},18832:(ne,Mt,a)=>{a.d(Mt,{U:()=>mt});var E=a(84614),r=a(14309),T=a(88002),y=a(87519),p=a(74788),it=a(12057),F=a(76189),Y=a(67446),q=a(29070),ft=a(54255),ut=a(15491),X=a(219);function Ct(Dt,zt){if(1&Dt){const At=p.EpF();p.TgZ(0,"button",1),p.NdJ("click",function(){return p.CHM(At),p.oxw().removeDetails()}),p.ALo(1,"async"),p.qZA()}if(2&Dt){const At=zt.ngIf,_t=p.oxw();p.Q6J("tuiHint",At.removeDetails)("tuiHintDescribe","")("focusable",!1)("disabled",!!p.lcZ(1,4,_t.disabled$))}}let mt=(()=>{class Dt{constructor(At,_t){this.editor=At,this.texts$=_t,this.disabled$=this.editor.stateChange$.pipe((0,T.U)(()=>!this.editor.isActive("details")),(0,y.x)())}removeDetails(){this.editor.removeDetails()}}return Dt.\u0275fac=function(At){return new(At||Dt)(p.Y36(E.$3),p.Y36(r.rf))},Dt.\u0275cmp=p.Xpm({type:Dt,selectors:[["tui-details-remove"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","disabled","click"]],template:function(At,_t){1&At&&(p.YNc(0,Ct,2,6,"button",0),p.ALo(1,"async")),2&At&&p.Q6J("ngIf",p.lcZ(1,1,_t.texts$))},directives:[it.O5,F.v,Y.D,q.x,ft.t,ut.D,X.$],pipes:[it.Ov],encapsulation:2,changeDetection:0}),Dt})()},50237:(ne,Mt,a)=>{a.d(Mt,{y:()=>X});var E=a(84614),r=a(14309),T=a(74788),y=a(12057),p=a(76189),it=a(67446),F=a(29070),Y=a(54255),q=a(15491),ft=a(219);function ut(Ct,mt){if(1&Ct){const Dt=T.EpF();T.TgZ(0,"button",1),T.NdJ("click",function(){return T.CHM(Dt),T.oxw().setDetails()}),T.qZA()}2&Ct&&T.Q6J("tuiHint",mt.ngIf.setDetails)("tuiHintDescribe","")("focusable",!1)}let X=(()=>{class Ct{constructor(Dt,zt){this.editor=Dt,this.texts$=zt}setDetails(){this.editor.setDetails()}}return Ct.\u0275fac=function(Dt){return new(Dt||Ct)(T.Y36(E.$3),T.Y36(r.rf))},Ct.\u0275cmp=T.Xpm({type:Ct,selectors:[["tui-details"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","click"]],template:function(Dt,zt){1&Dt&&(T.YNc(0,ut,1,3,"button",0),T.ALo(1,"async")),2&Dt&&T.Q6J("ngIf",T.lcZ(1,1,zt.texts$))},directives:[y.O5,p.v,it.D,F.x,Y.t,q.D,ft.$],pipes:[y.Ov],encapsulation:2,changeDetection:0}),Ct})()},84985:(ne,Mt,a)=>{a.d(Mt,{m:()=>_t});var E=a(84614),r=a(14309),T=a(68339),y=a(88002),p=a(74788),it=a(62939),F=a(76189),Y=a(67446),q=a(29070),ft=a(54255),ut=a(15491),X=a(219),Ct=a(20933),mt=a(12057),Dt=a(35065);function zt(at,ht){if(1&at){const $=p.EpF();p.TgZ(0,"button",5),p.NdJ("click",function(){const Bt=p.CHM($).$implicit;return p.oxw(2).onClick(Bt)}),p.ALo(1,"lowercase"),p._uU(2),p.qZA()}if(2&at){const $=ht.$implicit;p.Udp("font-family",$.family)("font-size",$.px,"px")("font-weight",$.weight),p.uIk("automation-id","tui_font__"+p.lcZ(1,8,$.name||"")),p.xp6(2),p.hij(" ",$.name," ")}}function At(at,ht){if(1&at&&(p.TgZ(0,"tui-data-list"),p.YNc(1,zt,3,10,"button",4),p.ALo(2,"async"),p.qZA()),2&at){const $=p.oxw();p.xp6(1),p.Q6J("ngForOf",p.lcZ(2,1,$.fontsOptions$))}}let _t=(()=>{class at{constructor($,xt,yt,Bt){this.options=$,this.editor=xt,this.texts$=yt,this.fontOptionsTexts$=Bt,this.fontsOptions$=this.fontOptionsTexts$.pipe((0,y.U)(Nt=>this.options.fontOptions(Nt))),this.fontText$=this.texts$.pipe((0,y.U)(Nt=>Nt.font))}onClick({headingLevel:$,px:xt}){$?this.editor.setHeading($):this.editor.setParagraph({fontSize:(0,T.tuiPx)(xt||0)})}}return at.\u0275fac=function($){return new($||at)(p.Y36(r.mJ),p.Y36(E.$3),p.Y36(r.rf),p.Y36(r.UN))},at.\u0275cmp=p.Xpm({type:at,selectors:[["tui-font-size"]],decls:6,vars:7,consts:[[3,"content"],["fonts",""],["tuiIconButton","","type","button","size","s","appearance","icon","icon","tuiIconFontLarge","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["fontsDropdown",""],["tuiOption","",3,"fontFamily","fontSize","fontWeight","click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function($,xt){if(1&$&&(p.TgZ(0,"tui-hosted-dropdown",0,1),p._UZ(2,"button",2),p.ALo(3,"async"),p.YNc(4,At,3,3,"ng-template",null,3,p.W1O),p.qZA()),2&$){const yt=p.MAs(1),Bt=p.MAs(5);p.Q6J("content",Bt),p.xp6(2),p.Q6J("tuiHint",p.lcZ(3,5,xt.fontText$))("tuiHintDescribe","")("pseudoActive",yt.open)("focusable",yt.open)}},directives:[it.o,F.v,Y.D,q.x,ft.t,ut.D,X.$,Ct.q,mt.sg,Dt.v],pipes:[mt.Ov,mt.i8],encapsulation:2,changeDetection:0}),at})()},62976:(ne,Mt,a)=>{a.d(Mt,{h:()=>yt});var E=a(19074),r=a(84614),T=a(48699),y=a(14309),p=a(9112),it=a(88002),F=a(74788),Y=a(12057),q=a(62939),ft=a(76189),ut=a(67446),X=a(29070),Ct=a(54255),mt=a(15491),Dt=a(219);function zt(Bt,Nt){if(1&Bt){const Ot=F.EpF();F.TgZ(0,"button",11),F.NdJ("click",function(){return F.CHM(Ot),F.oxw(4).editor.toggleBold()}),F.qZA()}if(2&Bt){const Ot=F.oxw(2).ngIf,Ut=F.oxw().ngIf;F.Q6J("tuiHint",Ut.bold)("pseudoActive",Ot.bold)}}function At(Bt,Nt){if(1&Bt){const Ot=F.EpF();F.TgZ(0,"button",12),F.NdJ("click",function(){return F.CHM(Ot),F.oxw(4).editor.toggleItalic()}),F.qZA()}if(2&Bt){const Ot=F.oxw(2).ngIf,Ut=F.oxw().ngIf;F.Q6J("tuiHint",Ut.italic)("pseudoActive",Ot.italic)}}function _t(Bt,Nt){if(1&Bt){const Ot=F.EpF();F.TgZ(0,"button",13),F.NdJ("click",function(){return F.CHM(Ot),F.oxw(4).editor.toggleUnderline()}),F.qZA()}if(2&Bt){const Ot=F.oxw(2).ngIf,Ut=F.oxw().ngIf;F.Q6J("tuiHint",Ut.underline)("pseudoActive",Ot.underline)}}function at(Bt,Nt){if(1&Bt){const Ot=F.EpF();F.TgZ(0,"button",14),F.NdJ("click",function(){return F.CHM(Ot),F.oxw(4).editor.toggleStrike()}),F.qZA()}if(2&Bt){const Ot=F.oxw(2).ngIf,Ut=F.oxw().ngIf;F.Q6J("tuiHint",Ut.strikeThrough)("pseudoActive",Ot.strike)}}function ht(Bt,Nt){if(1&Bt&&(F.TgZ(0,"div",6),F.YNc(1,zt,1,2,"button",7),F.YNc(2,At,1,2,"button",8),F.YNc(3,_t,1,2,"button",9),F.YNc(4,at,1,2,"button",10),F.qZA()),2&Bt){const Ot=F.oxw(3);F.xp6(1),F.Q6J("ngIf",Ot.isEnabled(Ot.TuiEditorTool.Bold)),F.xp6(1),F.Q6J("ngIf",Ot.isEnabled(Ot.TuiEditorTool.Italic)),F.xp6(1),F.Q6J("ngIf",Ot.isEnabled(Ot.TuiEditorTool.Underline)),F.xp6(1),F.Q6J("ngIf",Ot.isEnabled(Ot.TuiEditorTool.Strikethrough))}}function $(Bt,Nt){if(1&Bt&&(F.TgZ(0,"tui-hosted-dropdown",2,3),F._UZ(2,"button",4),F.YNc(3,ht,5,4,"ng-template",null,5,F.W1O),F.qZA()),2&Bt){const Ot=Nt.ngIf,Ut=F.MAs(1),jt=F.MAs(4),qt=F.oxw().ngIf;F.Q6J("content",jt),F.xp6(2),F.Q6J("tuiHint",qt.fontStyle)("tuiHintDescribe","")("pseudoActive",Ut.open||Ot.bold||Ot.italic||Ot.underline||Ot.strike)("focusable",Ut.open)}}function xt(Bt,Nt){if(1&Bt&&(F.ynx(0),F.YNc(1,$,5,5,"tui-hosted-dropdown",1),F.ALo(2,"async"),F.BQk()),2&Bt){const Ot=F.oxw();F.xp6(1),F.Q6J("ngIf",F.lcZ(2,1,Ot.fontStyleState$))}}let yt=(()=>{class Bt{constructor(Ot,Ut){this.editor=Ot,this.texts$=Ut,this.toolsSet=new Set(E.Db),this.TuiEditorTool=T._,this.fontStyleState$=(0,p.aj)([this.editor.isActive$("bold"),this.editor.isActive$("italic"),this.editor.isActive$("underline"),this.editor.isActive$("strike")]).pipe((0,it.U)(([jt,qt,gt,O])=>({bold:jt,italic:qt,underline:gt,strike:O})))}set enabledTools(Ot){this.toolsSet=new Set(Ot)}isEnabled(Ot){return this.toolsSet.has(Ot)}}return Bt.\u0275fac=function(Ot){return new(Ot||Bt)(F.Y36(r.$3),F.Y36(y.rf))},Bt.\u0275cmp=F.Xpm({type:Bt,selectors:[["tui-font-style"]],inputs:{enabledTools:"enabledTools"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"ngIf"],[3,"content"],["format",""],["tuiIconButton","","type","button","size","s","icon","tuiIconFormatLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__font-style-button",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["formatDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"]],template:function(Ot,Ut){1&Ot&&(F.YNc(0,xt,3,3,"ng-container",0),F.ALo(1,"async")),2&Ot&&F.Q6J("ngIf",F.lcZ(1,1,Ut.texts$))},directives:[Y.O5,q.o,ft.v,ut.D,X.x,Ct.t,mt.D,Dt.$],pipes:[Y.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),Bt})()},19762:(ne,Mt,a)=>{a.d(Mt,{d:()=>Ct});var E=a(84614),r=a(14309),T=a(88002),y=a(87519),p=a(74788),it=a(76189),F=a(67446),Y=a(29070),q=a(54255),ft=a(15491),ut=a(219),X=a(12057);let Ct=(()=>{class mt{constructor(zt,At){this.editor=zt,this.texts$=At,this.insertGroupText$=this.texts$.pipe((0,T.U)(_t=>_t.insertGroup)),this.removeGroupText$=this.texts$.pipe((0,T.U)(_t=>_t.removeGroup)),this.disabled$=this.editor.stateChange$.pipe((0,T.U)(()=>!this.editor.isActive("group")),(0,y.x)())}addGroup(){this.editor.setGroup()}removeGroup(){this.editor.removeGroup()}}return mt.\u0275fac=function(zt){return new(zt||mt)(p.Y36(E.$3),p.Y36(r.rf))},mt.\u0275cmp=p.Xpm({type:mt,selectors:[["tui-editor-group-tool"]],decls:5,vars:13,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconPlusLarge","appearance","icon",3,"focusable","tuiHint","tuiHintDescribe","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconRemoveLarge","appearance","icon",3,"focusable","disabled","tuiHint","tuiHintDescribe","click"]],template:function(zt,At){1&zt&&(p.TgZ(0,"button",0),p.NdJ("click",function(){return At.addGroup()}),p.ALo(1,"async"),p.qZA(),p.TgZ(2,"button",1),p.NdJ("click",function(){return At.removeGroup()}),p.ALo(3,"async"),p.ALo(4,"async"),p.qZA()),2&zt&&(p.Q6J("focusable",!1)("tuiHint",p.lcZ(1,7,At.insertGroupText$))("tuiHintDescribe",""),p.xp6(2),p.Q6J("focusable",!1)("disabled",!!p.lcZ(3,9,At.disabled$))("tuiHint",p.lcZ(4,11,At.removeGroupText$))("tuiHintDescribe",""))},directives:[it.v,F.D,Y.x,q.t,ft.D,ut.$],pipes:[X.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),mt})()},7416:(ne,Mt,a)=>{a.d(Mt,{U:()=>yt});var E=a(64762),r=a(84614),T=a(14309),y=a(68339),p=a(88002),it=a(87519),F=a(74788),Y=a(40939),q=a(62939),ft=a(33250),ut=a(76189),X=a(67446),Ct=a(29070),mt=a(54255),Dt=a(15491),zt=a(219),At=a(12057),_t=a(5451),at=a(17163);function ht(Bt,Nt){if(1&Bt&&F._UZ(0,"div",6),2&Bt){const Ot=F.oxw().tuiLet;F.Udp("background",Ot)}}function $(Bt,Nt){if(1&Bt){const Ot=F.EpF();F.TgZ(0,"tui-palette",7),F.NdJ("selectedColor",function(jt){return F.CHM(Ot),F.oxw(2).editor.setBackgroundColor(jt)}),F.qZA()}if(2&Bt){const Ot=Nt.$implicit,Ut=F.oxw(2);F.Q6J("tuiActiveZoneParent",Ot)("colors",Ut.colors)}}function xt(Bt,Nt){if(1&Bt&&(F.TgZ(0,"tui-hosted-dropdown",1,2),F._UZ(2,"button",3),F.ALo(3,"async"),F.YNc(4,ht,1,2,"div",4),F.YNc(5,$,1,2,"ng-template",null,5,F.W1O),F.qZA()),2&Bt){const Ot=Nt.tuiLet,Ut=F.MAs(1),jt=F.MAs(6),qt=F.oxw();F.Q6J("content",jt)("tuiDropdownMaxHeight",999),F.xp6(2),F.Q6J("tuiHint",F.lcZ(3,7,qt.backColorText$))("tuiHintDescribe","")("pseudoActive",Ut.open)("focusable",Ut.open),F.xp6(2),F.Q6J("ngIf",!qt.isBlankColor(Ot||""))}}class yt{constructor(Nt,Ot,Ut){this.editor=Nt,this.texts$=Ot,this.defaultOptions=Ut,this.colors=this.defaultOptions.colors,this.backgroundColor$=this.editor.stateChange$.pipe((0,p.U)(()=>this.editor.getBackgroundColor()||this.defaultOptions.blankColor),(0,it.x)()),this.backColorText$=this.texts$.pipe((0,p.U)(jt=>jt.backColor))}isBlankColor(Nt){return Nt===this.defaultOptions.blankColor}}yt.\u0275fac=function(Nt){return new(Nt||yt)(F.Y36(r.$3),F.Y36(T.rf),F.Y36(T.mJ))},yt.\u0275cmp=F.Xpm({type:yt,selectors:[["tui-highlight-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["hilite",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconHiliteLarge","automation-id","toolbar__hilite-button",1,"t-tool",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["class","t-plate",3,"background",4,"ngIf"],["hiliteDropdown",""],[1,"t-plate"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(Nt,Ot){1&Nt&&(F.YNc(0,xt,7,9,"tui-hosted-dropdown",0),F.ALo(1,"async")),2&Nt&&F.Q6J("tuiLet",F.lcZ(1,1,Ot.backgroundColor$))},directives:[Y.L,q.o,ft.Ek,ut.v,X.D,Ct.x,mt.t,Dt.D,zt.$,At.O5,_t.R,at.e],pipes:[At.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,E.gn)([(0,y.tuiDefaultProp)()],yt.prototype,"colors",void 0)},93252:(ne,Mt,a)=>{a.d(Mt,{Xp:()=>E.X,pu:()=>it,Tf:()=>F.T,P_:()=>Y,yj:()=>q.y,y9:()=>ft,Un:()=>ut.U,dN:()=>zt.d,jP:()=>At,mK:()=>X.m,p7:()=>Ct,hr:()=>mt.h,Zv:()=>Dt,UT:()=>_t.U,XC:()=>ht,w2:()=>$.w,Ur:()=>xt,pH:()=>yt.p,mp:()=>Bt,iN:()=>O.i,lT:()=>Nt.l,iA:()=>jt,YH:()=>qt.Y,er:()=>gt,_I:()=>O._,__:()=>Z,M8:()=>Ot.M,kU:()=>Ut,G0:()=>j.G,_t:()=>bt});var E=a(37924),r=a(12057),T=a(68339),y=a(76040),p=a(74788);let it=(()=>{class Q{}return Q.\u0275fac=function(pt){return new(pt||Q)},Q.\u0275mod=p.oAB({type:Q}),Q.\u0275inj=p.cJS({imports:[[r.ez,y.TuiHostedDropdownModule,y.TuiButtonModule,y.TuiHintModule,T.TuiLetModule]]}),Q})();var F=a(15587);let Y=(()=>{class Q{}return Q.\u0275fac=function(pt){return new(pt||Q)},Q.\u0275mod=p.oAB({type:Q}),Q.\u0275inj=p.cJS({imports:[[r.ez,y.TuiHostedDropdownModule,y.TuiButtonModule,y.TuiHintModule,y.TuiDataListModule]]}),Q})();var q=a(50237);let ft=(()=>{class Q{}return Q.\u0275fac=function(pt){return new(pt||Q)},Q.\u0275mod=p.oAB({type:Q}),Q.\u0275inj=p.cJS({imports:[[r.ez,y.TuiButtonModule,y.TuiHintModule]]}),Q})();var ut=a(18832),X=a(84985);let Ct=(()=>{class Q{}return Q.\u0275fac=function(pt){return new(pt||Q)},Q.\u0275mod=p.oAB({type:Q}),Q.\u0275inj=p.cJS({imports:[[r.ez,y.TuiHostedDropdownModule,y.TuiButtonModule,y.TuiHintModule,y.TuiDataListModule]]}),Q})();var mt=a(62976);let Dt=(()=>{class Q{}return Q.\u0275fac=function(pt){return new(pt||Q)},Q.\u0275mod=p.oAB({type:Q}),Q.\u0275inj=p.cJS({imports:[[r.ez,y.TuiHostedDropdownModule,y.TuiButtonModule,y.TuiHintModule]]}),Q})();var zt=a(19762);let At=(()=>{class Q{}return Q.\u0275fac=function(pt){return new(pt||Q)},Q.\u0275mod=p.oAB({type:Q}),Q.\u0275inj=p.cJS({imports:[[r.ez,y.TuiButtonModule,y.TuiHintModule]]}),Q})();var _t=a(7416),at=a(27050);let ht=(()=>{class Q{}return Q.\u0275fac=function(pt){return new(pt||Q)},Q.\u0275mod=p.oAB({type:Q}),Q.\u0275inj=p.cJS({imports:[[r.ez,y.TuiHostedDropdownModule,y.TuiButtonModule,at.VM,y.TuiHintModule,y.TuiDropdownModule,T.TuiActiveZoneModule,T.TuiLetModule]]}),Q})();var $=a(13441);let xt=(()=>{class Q{}return Q.\u0275fac=function(pt){return new(pt||Q)},Q.\u0275mod=p.oAB({type:Q}),Q.\u0275inj=p.cJS({imports:[[r.ez,y.TuiHostedDropdownModule,y.TuiButtonModule,y.TuiHintModule,T.TuiLetModule]]}),Q})();var yt=a(95558);let Bt=(()=>{class Q{}return Q.\u0275fac=function(pt){return new(pt||Q)},Q.\u0275mod=p.oAB({type:Q}),Q.\u0275inj=p.cJS({imports:[[r.ez,y.TuiHostedDropdownModule,at.VM,y.TuiButtonModule,y.TuiHintModule,T.TuiActiveZoneModule,y.TuiDropdownModule,T.TuiLetModule]]}),Q})();var Nt=a(28962),Ot=a(74549);let Ut=(()=>{class Q{}return Q.\u0275fac=function(pt){return new(pt||Q)},Q.\u0275mod=p.oAB({type:Q}),Q.\u0275inj=p.cJS({imports:[[r.ez,T.TuiRepeatTimesModule]]}),Q})(),jt=(()=>{class Q{}return Q.\u0275fac=function(pt){return new(pt||Q)},Q.\u0275mod=p.oAB({type:Q}),Q.\u0275inj=p.cJS({imports:[[r.ez,y.TuiHostedDropdownModule,y.TuiDropdownModule,y.TuiButtonModule,y.TuiHintModule,Ut]]}),Q})();var qt=a(76965);let gt=(()=>{class Q{}return Q.\u0275fac=function(pt){return new(pt||Q)},Q.\u0275mod=p.oAB({type:Q}),Q.\u0275inj=p.cJS({imports:[[r.ez,y.TuiButtonModule,y.TuiHintModule,T.TuiLetModule]]}),Q})();var O=a(22063);let Z=(()=>{class Q{}return Q.\u0275fac=function(pt){return new(pt||Q)},Q.\u0275mod=p.oAB({type:Q}),Q.\u0275inj=p.cJS({imports:[[r.ez,y.TuiHostedDropdownModule,y.TuiHintModule,y.TuiButtonModule,y.TuiDataListModule,T.TuiLetModule]]}),Q})();var j=a(10528);let bt=(()=>{class Q{}return Q.\u0275fac=function(pt){return new(pt||Q)},Q.\u0275mod=p.oAB({type:Q}),Q.\u0275inj=p.cJS({imports:[[r.ez,y.TuiButtonModule,y.TuiHostedDropdownModule,y.TuiDropdownModule,y.TuiHintModule,at.VM,T.TuiActiveZoneModule,T.TuiLetModule]]}),Q})()},13441:(ne,Mt,a)=>{a.d(Mt,{w:()=>_t});var E=a(84614),r=a(14309),T=a(9112),y=a(88002),p=a(74788),it=a(12057),F=a(40939),Y=a(62939),q=a(76189),ft=a(67446),ut=a(29070),X=a(54255),Ct=a(15491),mt=a(219);function Dt(at,ht){if(1&at){const $=p.EpF();p.TgZ(0,"div",6),p.TgZ(1,"button",7),p.NdJ("click",function(){return p.CHM($),p.oxw(3).editor.toggleUnorderedList()}),p.qZA(),p.TgZ(2,"button",8),p.NdJ("click",function(){return p.CHM($),p.oxw(3).editor.toggleOrderedList()}),p.qZA(),p.TgZ(3,"button",9),p.NdJ("click",function(){return p.CHM($),p.oxw(3).sinkListItem()}),p.qZA(),p.TgZ(4,"button",10),p.NdJ("click",function(){return p.CHM($),p.oxw(3).liftListItem()}),p.qZA(),p.qZA()}if(2&at){const $=p.oxw().tuiLet,xt=p.oxw().ngIf;p.xp6(1),p.Q6J("tuiHint",xt.unorderedList)("pseudoActive",!(null==$||!$.unordered)),p.xp6(1),p.Q6J("tuiHint",xt.orderedList)("pseudoActive",!(null==$||!$.ordered)),p.xp6(1),p.Q6J("tuiHint",xt.indent)("disabled",!(null!=$&&$.ordered||null!=$&&$.unordered)),p.xp6(1),p.Q6J("tuiHint",xt.outdent)("disabled",!(null!=$&&$.ordered||null!=$&&$.unordered))}}function zt(at,ht){if(1&at&&(p.TgZ(0,"tui-hosted-dropdown",2,3),p._UZ(2,"button",4),p.YNc(3,Dt,5,8,"ng-template",null,5,p.W1O),p.qZA()),2&at){const $=ht.tuiLet,xt=p.MAs(1),yt=p.MAs(4),Bt=p.oxw().ngIf;p.Q6J("content",yt),p.xp6(2),p.Q6J("tuiHint",Bt.list)("tuiHintDescribe","")("pseudoActive",(null==xt?null:xt.open)||(null==$?null:$.unordered)||(null==$?null:$.ordered)||!1)("focusable",xt.open)}}function At(at,ht){if(1&at&&(p.ynx(0),p.YNc(1,zt,5,5,"tui-hosted-dropdown",1),p.ALo(2,"async"),p.BQk()),2&at){const $=p.oxw();p.xp6(1),p.Q6J("tuiLet",p.lcZ(2,1,$.listState$))}}let _t=(()=>{class at{constructor($,xt){this.editor=$,this.texts$=xt,this.listState$=(0,T.aj)([this.editor.isActive$("orderedList"),this.editor.isActive$("bulletList")]).pipe((0,y.U)(([yt,Bt])=>({ordered:yt,unordered:Bt})))}sinkListItem(){this.editor.sinkListItem()}liftListItem(){this.editor.liftListItem()}}return at.\u0275fac=function($){return new($||at)(p.Y36(E.$3),p.Y36(r.rf))},at.\u0275cmp=p.Xpm({type:at,selectors:[["tui-list-configs"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["list",""],["tuiIconButton","","type","button","size","s","icon","tuiIconViewListLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__ordering-list-button",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["listDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconViewListLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOLLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconIndentLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","disabled","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOutdentLarge","appearance","icon",1,"t-option",3,"tuiHint","disabled","click"]],template:function($,xt){1&$&&(p.YNc(0,At,3,3,"ng-container",0),p.ALo(1,"async")),2&$&&p.Q6J("ngIf",p.lcZ(1,1,xt.texts$))},directives:[it.O5,F.L,Y.o,q.v,ft.D,ut.x,X.t,Ct.D,mt.$],pipes:[it.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),at})()},95558:(ne,Mt,a)=>{a.d(Mt,{p:()=>Nt});var E=a(64762),r=a(84614),T=a(14309),y=a(68339),p=a(9112),it=a(88002),F=a(87519),Y=a(74788),q=a(40939),ft=a(62939),ut=a(33250),X=a(76189),Ct=a(67446),mt=a(29070),Dt=a(54255),zt=a(15491),At=a(219),_t=a(12057),at=a(5451),ht=a(17163);function $(Ot,Ut){if(1&Ot&&Y._UZ(0,"div",7),2&Ot){const jt=Y.oxw(2).tuiLet;Y.Udp("background",jt)}}function xt(Ot,Ut){if(1&Ot){const jt=Y.EpF();Y.TgZ(0,"tui-palette",8),Y.NdJ("selectedColor",function(gt){Y.CHM(jt),Y.oxw();const O=Y.MAs(1);return Y.oxw(2).setCellColor(gt),O.close()}),Y.qZA()}if(2&Ot){const jt=Ut.$implicit,qt=Y.oxw(3);Y.Q6J("tuiActiveZoneParent",jt)("colors",qt.colors)}}function yt(Ot,Ut){if(1&Ot&&(Y.TgZ(0,"tui-hosted-dropdown",2,3),Y._UZ(2,"button",4),Y.ALo(3,"async"),Y.YNc(4,$,1,2,"div",5),Y.YNc(5,xt,1,2,"ng-template",null,6,Y.W1O),Y.qZA()),2&Ot){const jt=Ut.tuiLet,qt=Y.MAs(1),gt=Y.MAs(6),O=Y.oxw().tuiLet,Z=Y.oxw();Y.Q6J("content",gt)("tuiDropdownMaxHeight",999)("canOpen",!!jt),Y.xp6(2),Y.Q6J("tuiHint",Y.lcZ(3,9,Z.colorText$))("tuiHintDescribe","")("pseudoActive",qt.open)("focusable",qt.open)("disabled",!jt),Y.xp6(2),Y.Q6J("ngIf",!Z.isBlankColor(O||""))}}function Bt(Ot,Ut){if(1&Ot&&(Y.ynx(0),Y.YNc(1,yt,7,11,"tui-hosted-dropdown",1),Y.ALo(2,"async"),Y.BQk()),2&Ot){const jt=Y.oxw();Y.xp6(1),Y.Q6J("tuiLet",Y.lcZ(2,1,jt.isActive$))}}class Nt{constructor(Ut,jt,qt){this.defaultOptions=Ut,this.editor=jt,this.texts$=qt,this.colors=this.defaultOptions.colors,this.colorText$=this.texts$.pipe((0,it.U)(gt=>this.editor.isActive("group")&&gt.hiliteGroup||this.editor.isActive("table")&&gt.cellColor||"")),this.isActive$=(0,p.aj)([this.editor.isActive$("table"),this.editor.isActive$("group")]).pipe((0,it.U)(([gt,O])=>gt||O)),this.color$=this.editor.stateChange$.pipe((0,it.U)(()=>this.editor.getCellColor()||this.editor.getGroupColor()||this.defaultOptions.blankColor),(0,F.x)())}isBlankColor(Ut){return Ut===this.defaultOptions.blankColor}setCellColor(Ut){this.editor.isActive("group")?this.editor.setGroupHilite(Ut):this.editor.isActive("table")&&this.editor.setCellColor(Ut)}}Nt.\u0275fac=function(Ut){return new(Ut||Nt)(Y.Y36(T.mJ),Y.Y36(r.$3),Y.Y36(T.rf))},Nt.\u0275cmp=Y.Xpm({type:Nt,selectors:[["tui-table-cell-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen"],["colorSelect",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconPaintLarge",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","disabled"],["class","t-plate t-plate_paint",3,"background",4,"ngIf"],["cellColorDropdown",""],[1,"t-plate","t-plate_paint"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(Ut,jt){1&Ut&&(Y.YNc(0,Bt,3,3,"ng-container",0),Y.ALo(1,"async")),2&Ut&&Y.Q6J("tuiLet",Y.lcZ(1,1,jt.color$))},directives:[q.L,ft.o,ut.Ek,X.v,Ct.D,mt.x,Dt.t,zt.D,At.$,_t.O5,at.R,ht.e],pipes:[_t.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,E.gn)([(0,y.tuiDefaultProp)()],Nt.prototype,"colors",void 0)},28962:(ne,Mt,a)=>{a.d(Mt,{l:()=>zt});var E=a(84614),r=a(14309),T=a(88002),y=a(74788),p=a(62939),it=a(33250),F=a(76189),Y=a(67446),q=a(29070),ft=a(54255),ut=a(15491),X=a(219),Ct=a(74549),mt=a(12057);function Dt(At,_t){if(1&At){const at=y.EpF();y.TgZ(0,"tui-table-size-selector",4),y.NdJ("onSelectSize",function($){return y.CHM(at),y.oxw().addTable($)}),y.qZA()}}let zt=(()=>{class At{constructor(at,ht){this.editor=at,this.texts$=ht,this.insertTableText$=this.texts$.pipe((0,T.U)($=>$.insertTable))}addTable({rows:at,cols:ht}){this.editor.enter();const $=this.editor.state.selection.anchor;this.editor.enter(),this.editor.enter(),this.editor.setTextSelection($),this.editor.insertTable(at,ht)}}return At.\u0275fac=function(at){return new(at||At)(y.Y36(E.$3),y.Y36(r.rf))},At.\u0275cmp=y.Xpm({type:At,selectors:[["tui-table-create"]],decls:6,vars:6,consts:[["tuiDropdownAlign","left","tuiDropdownDirection","bottom",3,"content"],["table",""],["tuiIconButton","","type","button","size","s","icon","tuiIconTableLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable"],["tableDropdown",""],[3,"onSelectSize"]],template:function(at,ht){if(1&at&&(y.TgZ(0,"tui-hosted-dropdown",0,1),y._UZ(2,"button",2),y.ALo(3,"async"),y.qZA(),y.YNc(4,Dt,1,0,"ng-template",null,3,y.W1O)),2&at){const $=y.MAs(1),xt=y.MAs(5);y.Q6J("content",xt),y.xp6(2),y.Q6J("tuiHint",y.lcZ(3,4,ht.insertTableText$))("tuiHintDescribe","")("focusable",$.open)}},directives:[p.o,it.Ek,F.v,Y.D,q.x,ft.t,ut.D,X.$,Ct.M],pipes:[mt.Ov],encapsulation:2,changeDetection:0}),At})()},76965:(ne,Mt,a)=>{a.d(Mt,{Y:()=>At});var E=a(84614),r=a(14309),T=a(88002),y=a(87519),p=a(74788),it=a(40939),F=a(12057),Y=a(76189),q=a(67446),ft=a(29070),ut=a(54255),X=a(15491),Ct=a(219);function mt(_t,at){if(1&_t){const ht=p.EpF();p.TgZ(0,"button",2),p.NdJ("click",function(){p.CHM(ht);const xt=p.oxw().tuiLet,yt=p.oxw();return xt.mergeCells?yt.mergeCells():yt.splitCell()}),p.qZA()}if(2&_t){const ht=at.ngIf,$=p.oxw().tuiLet;p.Q6J("icon",$.mergeCells?"tuiIconTableMergeLarge":"tuiIconTableSplitLarge")("tuiHint",$.mergeCells?ht.mergeCells:ht.splitCells)("tuiHintDescribe","")("focusable",!1)("disabled",!$.mergeCells&&!$.splitCells)}}function Dt(_t,at){if(1&_t&&(p.ynx(0),p.YNc(1,mt,1,5,"button",1),p.ALo(2,"async"),p.BQk()),2&_t){const ht=p.oxw();p.xp6(1),p.Q6J("ngIf",p.lcZ(2,1,ht.texts$))}}const zt=function(_t,at){return{mergeCells:_t,splitCells:at}};let At=(()=>{class _t{constructor(ht,$){this.editor=ht,this.texts$=$,this.canMergeCells$=this.editor.stateChange$.pipe((0,T.U)(()=>this.editor.canMergeCells()),(0,y.x)()),this.canSplitCells$=this.editor.stateChange$.pipe((0,T.U)(()=>this.editor.canSplitCells()),(0,y.x)())}mergeCells(){this.editor.mergeCells()}splitCell(){this.editor.splitCell()}}return _t.\u0275fac=function(ht){return new(ht||_t)(p.Y36(E.$3),p.Y36(r.rf))},_t.\u0275cmp=p.Xpm({type:_t,selectors:[["tui-table-merge-cells"]],decls:3,vars:8,consts:[[4,"tuiLet"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left",3,"icon","tuiHint","tuiHintDescribe","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left",3,"icon","tuiHint","tuiHintDescribe","focusable","disabled","click"]],template:function(ht,$){1&ht&&(p.YNc(0,Dt,3,3,"ng-container",0),p.ALo(1,"async"),p.ALo(2,"async")),2&ht&&p.Q6J("tuiLet",p.WLB(5,zt,p.lcZ(1,1,$.canMergeCells$),p.lcZ(2,3,$.canSplitCells$)))},directives:[it.L,F.O5,Y.v,q.D,ft.x,ut.t,X.D,Ct.$],pipes:[F.Ov],encapsulation:2,changeDetection:0}),_t})()},22063:(ne,Mt,a)=>{a.d(Mt,{_:()=>xt,i:()=>$});var E=a(84614),r=a(14309),T=a(88002),y=a(74788),p=a(40939),it=a(62939),F=a(76189),Y=a(67446),q=a(29070),ft=a(54255),ut=a(15491),X=a(219),Ct=a(20933),mt=a(12057),Dt=a(89786),zt=a(35065);function At(yt,Bt){if(1&yt&&(y.TgZ(0,"tui-hosted-dropdown",2,3),y._UZ(2,"button",4),y.ALo(3,"async"),y.qZA()),2&yt){const Nt=Bt.tuiLet,Ot=y.MAs(1),Ut=y.oxw(),jt=y.MAs(3);y.Q6J("content",jt)("canOpen",!!Nt),y.xp6(2),y.Q6J("tuiHint",y.lcZ(3,6,Ut.rowsColumnsManagingText$))("tuiHintDescribe","")("focusable",Ot.open)("disabled",!Nt)}}function _t(yt,Bt){if(1&yt){const Nt=y.EpF();y.TgZ(0,"button",7),y.NdJ("click",function(){const jt=y.CHM(Nt).index,qt=y.oxw().index;return y.oxw(2).onTableOption(2*qt+jt)}),y._uU(1),y.qZA()}if(2&yt){const Nt=Bt.$implicit;y.xp6(1),y.hij(" ",Nt," ")}}function at(yt,Bt){if(1&yt&&(y.TgZ(0,"tui-opt-group"),y.YNc(1,_t,2,1,"button",6),y.qZA()),2&yt){const Nt=Bt.$implicit;y.xp6(1),y.Q6J("ngForOf",Nt)}}function ht(yt,Bt){if(1&yt&&(y.TgZ(0,"tui-data-list"),y.YNc(1,at,2,1,"tui-opt-group",5),y.ALo(2,"async"),y.qZA()),2&yt){const Nt=y.oxw();y.xp6(1),y.Q6J("ngForOf",y.lcZ(2,1,Nt.tableCommandTexts$))}}var $=(()=>{return(yt=$||($={}))[yt.InsertColumnBefore=0]="InsertColumnBefore",yt[yt.InsertColumnAfter=1]="InsertColumnAfter",yt[yt.InsertRowBefore=2]="InsertRowBefore",yt[yt.InsertRowAfter=3]="InsertRowAfter",yt[yt.DeleteColumn=4]="DeleteColumn",yt[yt.DeleteRow=5]="DeleteRow",$;var yt})();let xt=(()=>{class yt{constructor(Nt,Ot,Ut){this.editor=Nt,this.texts$=Ot,this.tableCommandTexts$=Ut,this.commandsRegistry={[$.InsertColumnAfter]:()=>this.editor.addColumnAfter(),[$.InsertColumnBefore]:()=>this.editor.addColumnBefore(),[$.InsertRowAfter]:()=>this.editor.addRowAfter(),[$.InsertRowBefore]:()=>this.editor.addRowBefore(),[$.DeleteColumn]:()=>this.editor.deleteColumn(),[$.DeleteRow]:()=>this.editor.deleteRow()},this.isActive$=this.editor.isActive$("table"),this.rowsColumnsManagingText$=this.texts$.pipe((0,T.U)(jt=>jt.rowsColumnsManaging))}onTableOption(Nt){this.commandsRegistry[Nt]()}}return yt.\u0275fac=function(Nt){return new(Nt||yt)(y.Y36(E.$3),y.Y36(r.rf),y.Y36(r.$i))},yt.\u0275cmp=y.Xpm({type:yt,selectors:[["tui-table-row-column-manager"]],decls:4,vars:3,consts:[[3,"content","canOpen",4,"tuiLet"],["tableOptionsDropdown",""],[3,"content","canOpen"],["tableCommand",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAddRowLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","disabled"],[4,"ngFor","ngForOf"],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(Nt,Ot){1&Nt&&(y.YNc(0,At,4,8,"tui-hosted-dropdown",0),y.ALo(1,"async"),y.YNc(2,ht,3,3,"ng-template",null,1,y.W1O)),2&Nt&&y.Q6J("tuiLet",y.lcZ(1,1,Ot.isActive$))},directives:[p.L,it.o,F.v,Y.D,q.x,ft.t,ut.D,X.$,Ct.q,mt.sg,Dt.R,zt.v],pipes:[mt.Ov],encapsulation:2,changeDetection:0}),yt})()},74549:(ne,Mt,a)=>{a.d(Mt,{M:()=>ft});var E=a(74788),r=a(62579),T=a(76040),y=a(36097);function p(ut,X){if(1&ut){const Ct=E.EpF();E.TgZ(0,"div",4),E.NdJ("mouseenter",function(Dt){const At=E.CHM(Ct).$implicit,_t=E.oxw().$implicit;return E.oxw().updateCurrentSize(At+1,_t+1,Dt)})("click",function(){return E.CHM(Ct),E.oxw(2).onClick()}),E.qZA()}if(2&ut){const Ct=X.$implicit,mt=E.oxw().$implicit,Dt=E.oxw();E.ekj("t-cell_hovered",Dt.tableSelectHovered(Ct,mt))}}function it(ut,X){if(1&ut&&(E.TgZ(0,"div",2),E.YNc(1,p,1,2,"div",3),E.qZA()),2&ut){const Ct=E.oxw();E.xp6(1),E.Q6J("tuiRepeatTimesOf",Ct.rowsNumber)}}let ft=(()=>{class ut{constructor(Ct){this.windowRef=Ct,this.onSelectSize=new E.vpe,this.tableSize={rows:1,cols:1}}get columnsNumber(){return Math.min(Math.max(3,this.tableSize.cols+1),15)}get rowsNumber(){return Math.min(Math.max(3,this.tableSize.rows+1),15)}tableSelectHovered(Ct,mt){return Ct<this.tableSize.rows&&mt<this.tableSize.cols}updateCurrentSize(Ct,mt,Dt){(0,T.tuiGetViewportWidth)(this.windowRef)-Dt.clientX>70&&(this.tableSize={rows:Ct,cols:mt})}onClick(){this.onSelectSize.emit(this.tableSize)}}return ut.\u0275fac=function(Ct){return new(Ct||ut)(E.Y36(r.m9))},ut.\u0275cmp=E.Xpm({type:ut,selectors:[["tui-table-size-selector"]],outputs:{onSelectSize:"onSelectSize"},decls:3,vars:3,consts:[["class","t-column",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-description"],[1,"t-column"],["class","t-cell",3,"t-cell_hovered","mouseenter","click",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-cell",3,"mouseenter","click"]],template:function(Ct,mt){1&Ct&&(E.YNc(0,it,2,1,"div",0),E.TgZ(1,"div",1),E._uU(2),E.qZA()),2&Ct&&(E.Q6J("tuiRepeatTimesOf",mt.columnsNumber),E.xp6(2),E.AsE("",mt.tableSize.cols,"\xd7",mt.tableSize.rows,""))},directives:[y.X],styles:["[_nghost-%COMP%]{display:block;padding:.75rem}.t-cell[_ngcontent-%COMP%]{display:inline-block;background-color:var(--tui-base-01);width:1.25rem;height:1.25rem;border-radius:.25rem;margin:.125rem;border:1px solid var(--tui-base-04);cursor:pointer}.t-cell_hovered[_ngcontent-%COMP%]{background-color:var(--tui-base-02)}.t-column[_ngcontent-%COMP%]{white-space:nowrap}.t-description[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),ut})()},10528:(ne,Mt,a)=>{a.d(Mt,{G:()=>xt});var E=a(64762),r=a(84614),T=a(14309),y=a(68339),p=a(88002),it=a(87519),F=a(74788),Y=a(40939),q=a(62939),ft=a(33250),ut=a(76189),X=a(67446),Ct=a(29070),mt=a(54255),Dt=a(15491),zt=a(219),At=a(5451),_t=a(17163),at=a(12057);function ht(yt,Bt){if(1&yt){const Nt=F.EpF();F.TgZ(0,"tui-palette",6),F.NdJ("selectedColor",function(Ut){return F.CHM(Nt),F.oxw(2).editor.setFontColor(Ut)}),F.qZA()}if(2&yt){const Nt=Bt.$implicit,Ot=F.oxw(2);F.Q6J("tuiActiveZoneParent",Nt)("colors",Ot.colors)}}function $(yt,Bt){if(1&yt&&(F.TgZ(0,"tui-hosted-dropdown",1,2),F._UZ(2,"button",3),F.ALo(3,"async"),F._UZ(4,"div",4),F.YNc(5,ht,1,2,"ng-template",null,5,F.W1O),F.qZA()),2&yt){const Nt=Bt.tuiLet,Ot=F.MAs(1),Ut=F.MAs(6),jt=F.oxw();F.Q6J("content",Ut)("tuiDropdownMaxHeight",999),F.xp6(2),F.Q6J("tuiHint",F.lcZ(3,8,jt.foreColorText$))("tuiHintDescribe","")("pseudoActive",Ot.open)("focusable",Ot.open),F.xp6(2),F.Udp("background",Nt)}}class xt{constructor(Bt,Nt,Ot){this.defaultOptions=Bt,this.editor=Nt,this.texts$=Ot,this.colors=this.defaultOptions.colors,this.fontColor$=this.editor.stateChange$.pipe((0,p.U)(()=>this.editor.getFontColor()||this.defaultOptions.blankColor),(0,it.x)()),this.foreColorText$=this.texts$.pipe((0,p.U)(Ut=>Ut.foreColor))}}xt.\u0275fac=function(Bt){return new(Bt||xt)(F.Y36(T.mJ),F.Y36(r.$3),F.Y36(T.rf))},xt.\u0275cmp=F.Xpm({type:xt,selectors:[["tui-text-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["color",""],["tuiIconButton","","type","button","size","s","icon","tuiIconColorLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__color-button",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],[1,"t-plate"],["colorDropdown",""],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(Bt,Nt){1&Bt&&(F.YNc(0,$,7,10,"tui-hosted-dropdown",0),F.ALo(1,"async")),2&Bt&&F.Q6J("tuiLet",F.lcZ(1,1,Nt.fontColor$))},directives:[Y.L,q.o,ft.Ek,ut.v,X.D,Ct.x,mt.t,Dt.D,zt.$,At.R,_t.e],pipes:[at.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,E.gn)([(0,y.tuiDefaultProp)()],xt.prototype,"colors",void 0)},17406:(ne,Mt,a)=>{a.d(Mt,{M6:()=>E.M,yB:()=>Y,Bp:()=>q.B});var E=a(4997),r=a(12057),T=a(71115),y=a(93252),p=a(68339),it=a(76040),F=a(74788);let Y=(()=>{class ft{}return ft.\u0275fac=function(X){return new(X||ft)},ft.\u0275mod=F.oAB({type:ft}),ft.\u0275inj=F.cJS({imports:[[r.ez,it.TuiHintModule,p.TuiFocusableModule,it.TuiButtonModule,it.TuiHostedDropdownModule,T.Fu,y.er,y.mp,y.__,y.iA,y.p7,y.Zv,y.pu,y.Ur,y._t,y.XC,y.P_,y.y9,p.TuiItemModule,y.jP]]}),ft})();var q=a(13044)},13044:(ne,Mt,a)=>{a.d(Mt,{B:()=>T});var E=a(74788),r=a(68339);let T=(()=>{class y{constructor(it){this.elementRef=it}get toolsContainers(){return Array.from(this.elementRef.nativeElement.querySelectorAll("[tuiItem]"))}onHorizontalNavigation(it){const{toolsContainers:F}=this,Y=F.findIndex(r.tuiIsNativeFocusedIn),ft=F[(0,r.tuiClamp)(Y+(it?-1:1),0,F.length-1)],ut=it?this.findPreviousTool(ft):this.findNextTool(ft);ut&&ut.focus()}findFirstFocusableTool(it=!1){const F=it?this.toolsContainers.slice().reverse():this.toolsContainers;for(const Y of F){const q=(0,r.tuiIsNativeMouseFocusable)(Y)?Y:(0,r.tuiGetClosestFocusable)({initial:Y,root:Y,keyboard:!1});if(q)return q}return null}findPreviousTool(it){return(0,r.tuiIsNativeMouseFocusable)(it)?it:(0,r.tuiGetClosestFocusable)({initial:it,root:it,keyboard:!1})||(0,r.tuiGetClosestFocusable)({initial:it,root:this.elementRef.nativeElement,previous:!0,keyboard:!1})}findNextTool(it){return(0,r.tuiIsNativeMouseFocusable)(it)?it:(0,r.tuiGetClosestFocusable)({initial:it,root:this.elementRef.nativeElement,keyboard:!1})}}return y.\u0275fac=function(it){return new(it||y)(E.Y36(E.SBq))},y.\u0275dir=E.lG2({type:y,selectors:[["","tuiToolbarNavigationManager",""]],hostBindings:function(it,F){1&it&&E.NdJ("keydown.arrowRight.prevent",function(){return F.onHorizontalNavigation(!1)})("keydown.arrowLeft.prevent",function(){return F.onHorizontalNavigation(!0)})}}),y})()},4997:(ne,Mt,a)=>{a.d(Mt,{M:()=>b});var E=a(64762),r=a(74788),T=a(19074),y=a(84614),p=a(48699),it=a(14309),F=a(68339),Y=a(15257),q=a(13044),ft=a(12057),ut=a(48893),X=a(76189),Ct=a(82707),mt=a(67446),Dt=a(29070),zt=a(54255),At=a(15491),_t=a(219),at=a(84985),ht=a(62976),$=a(37924),xt=a(13441),yt=a(62939),Bt=a(45050),Nt=a(10528),Ot=a(7416),Ut=a(15587),jt=a(50237),qt=a(18832),gt=a(19762),O=a(95558),Z=a(28962),j=a(22063),bt=a(76965);const Q=["dropdown"];function ot(w,H){1&w&&r.GkF(0)}function pt(w,H){if(1&w){const U=r.EpF();r.TgZ(0,"div",6),r.TgZ(1,"button",7),r.NdJ("click",function(){return r.CHM(U),r.oxw(2).undo()}),r.qZA(),r.TgZ(2,"button",8),r.NdJ("click",function(){return r.CHM(U),r.oxw(2).redo()}),r.qZA(),r.qZA()}if(2&w){const U=r.oxw().ngIf,Tt=r.oxw();r.xp6(1),r.Q6J("tuiHint",U.undo)("tuiHintDescribe","")("disabled",Tt.undoDisabled)("focusable",!1),r.xp6(1),r.Q6J("tuiHint",U.redo)("tuiHintDescribe","")("disabled",Tt.redoDisabled)("focusable",!1)}}function Kt(w,H){1&w&&(r.TgZ(0,"div",6),r._UZ(1,"tui-font-size",9),r.qZA())}function Zt(w,H){if(1&w&&r._UZ(0,"tui-font-style",15),2&w){const U=r.oxw(3);r.Q6J("enabledTools",U.toolsSet)}}function le(w,H){1&w&&r._UZ(0,"tui-align-content",9)}function Gt(w,H){1&w&&r._UZ(0,"tui-list-configs",9)}function De(w,H){if(1&w){const U=r.EpF();r.TgZ(0,"button",16,17),r.NdJ("click",function(){return r.CHM(U),r.oxw(3).toggleQuote()}),r.qZA()}if(2&w){const U=r.oxw(2).ngIf,Tt=r.oxw();r.Q6J("tuiHint",U.quote)("tuiHintDescribe","")("pseudoActive",Tt.blockquote)("disabled",Tt.unorderedList||Tt.orderedList)("focusable",!1)}}function Te(w,H){if(1&w){const U=r.EpF();r.TgZ(0,"tui-edit-link",22,23),r.NdJ("addLink",function(St){r.CHM(U),r.oxw();const B=r.MAs(1);return r.oxw(3).onLink(B,St)})("removeLink",function(){r.CHM(U),r.oxw();const St=r.MAs(1);return r.oxw(3).onLink(St)}),r.qZA()}}function je(w,H){if(1&w&&(r.TgZ(0,"tui-hosted-dropdown",18,19),r._UZ(2,"button",20,17),r.YNc(4,Te,2,0,"ng-template",null,21,r.W1O),r.qZA()),2&w){const U=r.MAs(1),Tt=r.MAs(5),St=r.oxw(2).ngIf,B=r.oxw();r.Q6J("canOpen",B.canOpenAnchor)("content",Tt),r.xp6(2),r.Q6J("tuiHint",St.link)("tuiHintDescribe","")("pseudoActive",U.open||B.a)("focusable",U.open)}}function Ue(w,H){if(1&w){const U=r.EpF();r.TgZ(0,"tui-edit-link",28),r.NdJ("addLink",function(St){r.CHM(U),r.oxw();const B=r.MAs(1);return r.oxw(3).setAnchor(B,St)})("removeLink",function(){return r.CHM(U),r.oxw(4).removeAnchor()}),r.qZA()}2&w&&r.Q6J("anchorMode",!0)}function Ne(w,H){if(1&w&&(r.TgZ(0,"tui-hosted-dropdown",24,25),r._UZ(2,"button",26),r.YNc(3,Ue,1,1,"ng-template",null,27,r.W1O),r.qZA()),2&w){const U=r.MAs(1),Tt=r.MAs(4),St=r.oxw(2).ngIf,B=r.oxw();r.Q6J("canOpen",B.canOpenAnchor)("content",Tt),r.xp6(2),r.Q6J("focusable",!1)("pseudoActive",U.open||B.jumpAnchor)("tuiHint",St.insertAnchor)("tuiHintDescribe","")}}function Je(w,H){if(1&w){const U=r.EpF();r.ynx(0),r.TgZ(1,"button",29,17),r.NdJ("click",function(){return r.CHM(U),r.MAs(4).click()}),r.qZA(),r.TgZ(3,"input",30,31),r.NdJ("change",function(){r.CHM(U);const St=r.MAs(4);return r.oxw(3).onAttach(St)}),r.qZA(),r.BQk()}if(2&w){const U=r.oxw(2).ngIf,Tt=r.oxw();r.xp6(1),r.Q6J("tuiHint",U.attach)("tuiHintDescribe","")("focusable",!1),r.xp6(2),r.Q6J("accept",Tt.attachOptions.accept)("multiple",Tt.attachOptions.multiple)("tuiFocusable",!1)}}function Re(w,H){if(1&w&&(r.TgZ(0,"div",6),r.YNc(1,Zt,1,1,"tui-font-style",10),r.YNc(2,le,1,0,"tui-align-content",11),r.YNc(3,Gt,1,0,"tui-list-configs",11),r.YNc(4,De,2,5,"button",12),r.YNc(5,je,6,6,"tui-hosted-dropdown",13),r.YNc(6,Ne,5,6,"tui-hosted-dropdown",14),r.YNc(7,Je,5,6,"ng-container",1),r.qZA()),2&w){const U=r.oxw(2);r.xp6(1),r.Q6J("ngIf",U.formatEnabled),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Align)),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.List)),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Quote)),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Link)),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Anchor)),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Attach))}}function We(w,H){if(1&w){const U=r.EpF();r.TgZ(0,"button",34,17),r.NdJ("click",function(){return r.CHM(U),r.oxw(3).toggleSubscript()}),r.qZA()}if(2&w){const U=r.oxw(2).ngIf,Tt=r.oxw();r.Q6J("tuiHint",U.subscript)("tuiHintDescribe","")("pseudoActive",Tt.subscript)("focusable",!1)}}function Ee(w,H){if(1&w){const U=r.EpF();r.TgZ(0,"button",35,17),r.NdJ("click",function(){return r.CHM(U),r.oxw(3).toggleSuperscript()}),r.qZA()}if(2&w){const U=r.oxw(2).ngIf,Tt=r.oxw();r.Q6J("tuiHint",U.superscript)("tuiHintDescribe","")("pseudoActive",Tt.superscript)("focusable",!1)}}function Be(w,H){if(1&w&&(r.TgZ(0,"div",6),r.YNc(1,We,2,4,"button",32),r.YNc(2,Ee,2,4,"button",33),r.qZA()),2&w){const U=r.oxw(2);r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Sub)),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Sup))}}function Fe(w,H){if(1&w&&r._UZ(0,"tui-text-color",37),2&w){const U=r.oxw(3);r.Q6J("colors",U.colors)}}function Pe(w,H){if(1&w&&r._UZ(0,"tui-highlight-color",37),2&w){const U=r.oxw(3);r.Q6J("colors",U.colors)}}function Se(w,H){if(1&w&&(r.TgZ(0,"div",6),r.YNc(1,Fe,1,1,"tui-text-color",36),r.YNc(2,Pe,1,1,"tui-highlight-color",36),r.qZA()),2&w){const U=r.oxw(2);r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Color)),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Hilite))}}function Ie(w,H){1&w&&r._UZ(0,"tui-code",9)}function Me(w,H){if(1&w){const U=r.EpF();r.TgZ(0,"button",41,17),r.NdJ("click",function(){return r.CHM(U),r.oxw(3).onTeX()}),r.qZA()}if(2&w){const U=r.oxw(2).ngIf;r.Q6J("tuiHint",U.tex)("tuiHintDescribe","")("focusable",!1)}}function Ve(w,H){if(1&w){const U=r.EpF();r.TgZ(0,"div",42),r.TgZ(1,"button",43,17),r.NdJ("click",function(){return r.CHM(U),r.MAs(4).click()}),r.qZA(),r.TgZ(3,"input",44,45),r.NdJ("change",function(){r.CHM(U);const St=r.MAs(4);return r.oxw(3).onImage(St)}),r.qZA(),r.qZA()}if(2&w){const U=r.oxw(2).ngIf;r.xp6(1),r.Q6J("tuiHint",U.image)("tuiHintDescribe","")("focusable",!1),r.xp6(2),r.Q6J("tuiFocusable",!1)}}function xe(w,H){if(1&w){const U=r.EpF();r.TgZ(0,"button",46,17),r.NdJ("click",function(){return r.CHM(U),r.oxw(3).insertHorizontalRule()}),r.qZA()}if(2&w){const U=r.oxw(2).ngIf;r.Q6J("tuiHint",U.insertHorizontalRule)("tuiHintDescribe","")("focusable",!1)}}function ke(w,H){if(1&w&&(r.TgZ(0,"div",6),r.YNc(1,Ie,1,0,"tui-code",11),r.YNc(2,Me,2,3,"button",38),r.YNc(3,Ve,5,4,"div",39),r.YNc(4,xe,2,3,"button",40),r.qZA()),2&w){const U=r.oxw(2);r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Code)),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Tex)),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Img)),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.HR))}}function Ge(w,H){if(1&w){const U=r.EpF();r.TgZ(0,"div",6),r.TgZ(1,"button",47,17),r.NdJ("click",function(){return r.CHM(U),r.oxw(2).removeFormat()}),r.qZA(),r.qZA()}if(2&w){const U=r.oxw().ngIf;r.xp6(1),r.Q6J("tuiHint",U.clear)("tuiHintDescribe","")("focusable",!1)}}function Ke(w,H){1&w&&(r.TgZ(0,"div",6),r._UZ(1,"tui-details",48),r._UZ(2,"tui-details-remove",48),r.qZA())}function we(w,H){if(1&w&&r._UZ(0,"tui-table-cell-color",37),2&w){const U=r.oxw(3);r.Q6J("colors",U.colors)}}function Ce(w,H){if(1&w&&(r.TgZ(0,"div",6),r._UZ(1,"tui-editor-group-tool",48),r.YNc(2,we,1,1,"tui-table-cell-color",36),r.qZA()),2&w){const U=r.oxw(2);r.xp6(2),r.Q6J("ngIf",!U.enabled(U.TuiEditorTool.Table))}}function Oe(w,H){if(1&w&&(r.TgZ(0,"div",6),r._UZ(1,"tui-table-create",48),r._UZ(2,"tui-table-row-column-manager",48),r._UZ(3,"tui-table-merge-cells",48),r._UZ(4,"tui-table-cell-color",37),r.qZA()),2&w){const U=r.oxw(2);r.xp6(4),r.Q6J("colors",U.colors)}}function Et(w,H){if(1&w&&(r.TgZ(0,"section",4),r.YNc(1,pt,3,8,"div",5),r.YNc(2,Kt,2,0,"div",5),r.YNc(3,Re,8,7,"div",5),r.YNc(4,Be,3,2,"div",5),r.YNc(5,Se,3,2,"div",5),r.YNc(6,ke,5,4,"div",5),r.YNc(7,Ge,3,3,"div",5),r.YNc(8,Ke,3,0,"div",5),r.YNc(9,Ce,3,1,"div",5),r.YNc(10,Oe,5,1,"div",5),r.TgZ(11,"div",6),r.Hsn(12),r.qZA(),r.qZA()),2&w){const U=r.oxw();r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Undo)),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Size)),r.xp6(1),r.Q6J("ngIf",U.firstBigBlockEnabled),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Sub)||U.enabled(U.TuiEditorTool.Sup)),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Color)||U.enabled(U.TuiEditorTool.Hilite)),r.xp6(1),r.Q6J("ngIf",U.secondBigBlockEnabled),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Clear)),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Details)),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Group)),r.xp6(1),r.Q6J("ngIf",U.enabled(U.TuiEditorTool.Table))}}class b{constructor(H,U,Tt,St,B,s,d){this.elementRef=H,this.editor=U,this.imageLoader=Tt,this.attachOptions=St,this.filesLoader=B,this.texts$=s,this.defaultOptions=d,this.dropdowns=F.EMPTY_QUERY,this.colors=this.defaultOptions.colors,this.disabled=!1,this.linkAdded=new r.vpe,this.texClicked=new r.vpe,this.fileAttached=new r.vpe,this.TuiEditorTool=p._,this.toolsSet=new Set(T.Db)}set tools(H){this.toolsSet=new Set(H)}get focused(){return(0,F.tuiIsNativeFocusedIn)(this.elementRef.nativeElement)||!!this.dropdowns.find(({nativeElement:H})=>(0,F.tuiIsNativeFocusedIn)(H))}get focusable(){return!this.focused&&!this.disabled}get unorderedList(){return this.editor.isActive("bulletList")}get orderedList(){return this.editor.isActive("orderedList")}get blockquote(){return this.editor.isActive("blockquote")}get a(){return this.editor.isActive("link")}get jumpAnchor(){return this.editor.isActive("jumpAnchor")}get canOpenAnchor(){return!this.a&&!this.jumpAnchor}get undoDisabled(){return this.editor.undoDisabled()}get redoDisabled(){return this.editor.redoDisabled()}get subscript(){return this.editor.isActive("subscript")}get superscript(){return this.editor.isActive("superscript")}get formatEnabled(){return this.enabled(p._.Bold)||this.enabled(p._.Italic)||this.enabled(p._.Underline)||this.enabled(p._.Strikethrough)}get firstBigBlockEnabled(){return this.formatEnabled||this.enabled(p._.Align)||this.enabled(p._.List)||this.enabled(p._.Quote)||this.enabled(p._.Link)||this.enabled(p._.Anchor)||this.enabled(p._.Attach)}get secondBigBlockEnabled(){return this.enabled(p._.Code)||this.enabled(p._.Tex)||this.enabled(p._.Img)||this.enabled(p._.HR)}onMouseDown(H,U){U.closest("button")||(H.preventDefault(),this.editor.focus())}onBottomFocus(){this.focusLast()}onTopFocus(){this.focusFirst()}onImage(H){var U;const Tt=null===(U=H.files)||void 0===U?void 0:U[0];H.value="",Tt&&this.imageLoader(Tt).pipe((0,Y.q)(1)).subscribe(St=>{this.addImage(St)})}onAttach(H){var U;const Tt=Array.from(H.files||[]);H.value="",Tt&&(F.tuiAssert.assert(!!this.filesLoader,"Please provide TUI_ATTACH_FILES_LOADER"),null===(U=this.filesLoader)||void 0===U||U.call(this,Tt).pipe((0,Y.q)(1)).subscribe(St=>this.fileAttached.emit(St)))}onTeX(){this.texClicked.emit()}onLink(H,U){H.open=!1,U&&this.editor.toggleLink(U)}setAnchor(H,U){H.open=!1,U&&(this.editor.setAnchor(U),this.editor.selectClosest())}removeAnchor(){this.editor.removeAnchor()}enabled(H){return this.toolsSet.has(H)}undo(){this.editor.undo()}redo(){this.editor.redo()}insertHorizontalRule(){this.editor.setHorizontalRule()}removeFormat(){this.editor.removeFormat()}toggleOrderedList(){this.editor.toggleOrderedList()}toggleQuote(){this.editor.toggleBlockquote()}toggleSubscript(){this.editor.toggleSubscript()}toggleSuperscript(){this.editor.toggleSuperscript()}addImage(H){this.editor.setImage(H)}focusFirst(){var H;const U=null===(H=this.navigationManager)||void 0===H?void 0:H.findFirstFocusableTool();U&&U.focus()}focusLast(){var H;const U=null===(H=this.navigationManager)||void 0===H?void 0:H.findFirstFocusableTool(!0);U&&U.focus()}}b.\u0275fac=function(H){return new(H||b)(r.Y36(r.SBq,8),r.Y36(y.$3),r.Y36(it.p7),r.Y36(it.dR),r.Y36(it.zc,8),r.Y36(it.rf),r.Y36(it.mJ))},b.\u0275cmp=r.Xpm({type:b,selectors:[["tui-toolbar"]],viewQuery:function(H,U){if(1&H&&(r.Gf(q.B,5),r.Gf(Q,5,r.SBq)),2&H){let Tt;r.iGM(Tt=r.CRH())&&(U.navigationManager=Tt.first),r.iGM(Tt=r.CRH())&&(U.dropdowns=Tt)}},hostAttrs:["role","toolbar"],hostVars:2,hostBindings:function(H,U){1&H&&r.NdJ("mousedown",function(St){return U.onMouseDown(St,St.target)}),2&H&&r.ekj("_disabled",U.disabled)},inputs:{colors:"colors",disabled:"disabled",tools:"tools"},outputs:{linkAdded:"linkAdded",texClicked:"texClicked",fileAttached:"fileAttached"},ngContentSelectors:["*"],decls:7,vars:8,consts:[["type","button",1,"t-prevent-parent-label-behavior"],[4,"ngIf"],[3,"tuiFocusable","focus"],["tuiToolbarNavigationManager","","class","t-tools-wrapper",4,"ngIf"],["tuiToolbarNavigationManager","",1,"t-tools-wrapper"],["class","t-block",4,"ngIf"],[1,"t-block"],["tuiItem","","tuiIconButton","","type","button","size","s","icon","tuiIconUndoLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","disabled","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconRedoLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","disabled","focusable","click"],["tuiItem","",1,"t-tool","t-wrapper"],["tuiItem","","class","t-tool t-wrapper",3,"enabledTools",4,"ngIf"],["tuiItem","","class","t-tool t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","disabled","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",3,"canOpen","content",4,"ngIf"],["class","t-wrapper",3,"canOpen","content",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"enabledTools"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","disabled","focusable","click"],["button",""],["tuiItem","",1,"t-wrapper",3,"canOpen","content"],["link",""],["tuiIconButton","","type","button","size","s","icon","tuiIconLinkLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["linkDropdown",""],[3,"addLink","removeLink"],["dropdown",""],[1,"t-wrapper",3,"canOpen","content"],["anchor",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAnchorLarge","tuiHintDirection","top-left","appearance","icon",3,"focusable","pseudoActive","tuiHint","tuiHintDescribe"],["anchorDropdown",""],[3,"anchorMode","addLink","removeLink"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconAttachLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click"],["type","file",1,"t-file-upload",3,"accept","multiple","tuiFocusable","change"],["fileUpload",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","click"],["tuiItem","","class","t-tool t-wrapper",3,"colors",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"colors"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool",3,"tuiHint","tuiHintDescribe","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool",3,"tuiHint","tuiHintDescribe","focusable","click"],["tuiItem","",1,"t-wrapper"],["tuiIconButton","","type","button","size","s","icon","tuiIconImgLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool",3,"tuiHint","tuiHintDescribe","focusable","click"],["type","file","accept","image/*",1,"t-image",3,"tuiFocusable","change"],["image",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconClearFormatLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click"],["tuiItem","",1,"t-tool","t-tool_margin"]],template:function(H,U){1&H&&(r.F$t(),r._UZ(0,"button",0),r.YNc(1,ot,1,0,"ng-container",1),r.ALo(2,"async"),r.TgZ(3,"div",2),r.NdJ("focus",function(){return U.onTopFocus()}),r.qZA(),r.TgZ(4,"div",2),r.NdJ("focus",function(){return U.onBottomFocus()}),r.qZA(),r.YNc(5,Et,13,10,"section",3),r.ALo(6,"async")),2&H&&(r.xp6(1),r.Q6J("ngIf",r.lcZ(2,4,U.editor.stateChange$)),r.xp6(2),r.Q6J("tuiFocusable",U.focusable),r.xp6(1),r.Q6J("tuiFocusable",U.focusable),r.xp6(1),r.Q6J("ngIf",r.lcZ(6,6,U.texts$)))},directives:[ft.O5,ut.t,q.B,X.v,Ct.w,mt.D,Dt.x,zt.t,At.D,_t.$,at.m,ht.h,$.X,xt.w,yt.o,Bt.l,Nt.G,Ot.U,Ut.T,jt.y,qt.U,gt.d,O.p,Z.l,j._,bt.Y],pipes:[ft.Ov],styles:['.t-tools-wrapper[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;padding:.25rem .75rem;overflow:auto;flex-wrap:wrap;box-shadow:0 .125rem .1875rem rgba(0,0,0,.1)}.t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar, .t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-tools-wrapper._disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:var(--tui-disabled-opacity)}.t-block[_ngcontent-%COMP%]{display:flex;padding:.25rem 0}.t-block[_ngcontent-%COMP%]:not(:last-child):after{content:"";display:block;margin:0 .25rem;width:1px;background:var(--tui-secondary-active)}.t-tool[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}button.t-tool[_ngcontent-%COMP%]:hover, .t-tool[_ngcontent-%COMP%]     button:hover{background:var(--tui-secondary-hover)}.t-tool_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-font[_ngcontent-%COMP%]{padding:.3em 0;outline:none;width:100%;pointer-events:none}.t-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;font-size:0;opacity:0;cursor:pointer}.t-image[_ngcontent-%COMP%]::-webkit-file-upload-button{display:none}.t-file-upload[_ngcontent-%COMP%]{display:none}.t-color-picker[_ngcontent-%COMP%]     tui-hosted-dropdown, .t-color-picker[_ngcontent-%COMP%]     tui-color-picker, .t-color-picker[_ngcontent-%COMP%]     tui-color-edit{display:none}.t-prevent-parent-label-behavior[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),(0,E.gn)([(0,F.tuiDefaultProp)()],b.prototype,"colors",void 0),(0,E.gn)([(0,F.tuiDefaultProp)()],b.prototype,"disabled",void 0),(0,E.gn)([(0,F.tuiDefaultProp)(function(w){return!w.includes(p._.Tex)&&!w.includes(p._.Attach)},"Attach and TeX are not yet implemented in Editor")],b.prototype,"tools",null)},19074:(ne,Mt,a)=>{a.d(Mt,{hK:()=>r,sw:()=>E,Db:()=>y,RR:()=>p});const E=new Map([["transparent","transparent"],["color-black-300","#333333"],["color-black-200","#666666"],["color-black-100","#909090"],["color-yellow-100","#FFDD2C"],["color-yellow-200","#FCC521"],["color-yellow-300","#FAB618"],["color-gray-100","#f5f5f6"],["color-gray-200","#e7e8ea"],["color-gray-300","#cbcfd3"],["color-gray-400","#959ba4"],["color-gray-500","#79818c"],["color-gray-600","#616871"],["color-light-blue-100","#ecf1f7"],["color-light-blue-200","#e4ebf3"],["color-light-blue-300","#dde4ed"],["color-blue-100","#1771e6"],["color-blue-200","#1464cc"],["color-blue-300","#0953b3"],["color-green-100","#39b54a"],["color-green-200","#2ca53a"],["color-green-300","#168a21"],["color-red-100","#e01f19"],["color-red-200","#d3120e"],["color-red-300","#c40b08"]]),r="rgb(51, 51, 51)";var T=a(48699);const y=[T._.Undo,T._.Size,T._.Bold,T._.Italic,T._.Underline,T._.Align,T._.List,T._.Quote,T._.Link,T._.Anchor,T._.Color,T._.Hilite,T._.Clear,T._.Strikethrough,T._.Code,T._.Img,T._.HR,T._.Sup,T._.Sub,T._.Table,T._.Details];function p(it){return[{px:13,name:it.small},{px:15,name:it.normal},{px:17,name:it.large},{px:24,family:"var(--tui-font-heading)",name:it.subtitle,headingLevel:2,weight:"bold"},{px:30,family:"var(--tui-font-heading)",name:it.title,headingLevel:1,weight:"bold"}]}},60153:(ne,Mt,a)=>{a.d(Mt,{Z:()=>r});var E=a(74788);let r=(()=>{class T{constructor(){this.imagePreview=new E.vpe}click(p){p instanceof HTMLImageElement&&this.imagePreview.emit(p)}}return T.\u0275fac=function(p){return new(p||T)},T.\u0275dir=E.lG2({type:T,selectors:[["tui-editor-socket","imagePreview",""]],hostAttrs:[1,"_preview-image"],hostBindings:function(p,it){1&p&&E.NdJ("click",function(Y){return it.click(Y.target)})},outputs:{imagePreview:"imagePreview"}}),T})()},84614:(ne,Mt,a)=>{a.d(Mt,{Zj:()=>E.Z,BN:()=>T,JU:()=>y.JU,mJ:()=>y.mJ,$3:()=>y.$3});var E=a(60153),r=a(74788);let T=(()=>{class p{}return p.\u0275fac=function(F){return new(F||p)},p.\u0275mod=r.oAB({type:p}),p.\u0275inj=r.cJS({}),p})();var y=a(82113)},82113:(ne,Mt,a)=>{a.d(Mt,{JU:()=>E.J,mJ:()=>T,$3:()=>y.$});var E=a(74982),r=a(74788);let T=(()=>{class p{}return p.\u0275fac=function(F){return new(F||p)},p.\u0275mod=r.oAB({type:p}),p.\u0275inj=r.cJS({}),p})();var y=a(76954)},74982:(ne,Mt,a)=>{a.d(Mt,{J:()=>it});var E=a(74788),r=a(14309),T=a(68339),y=a(46782),p=a(76954);let it=(()=>{class F{constructor(q,ft,ut,X,Ct,mt){this.elementRef=q,this.renderer=ft,this.editor=ut,this.editorContainer=X,this.editorLoaded$=Ct,this.valueChange=this.editor.valueChange$,this.stateChange=this.editor.stateChange$,this.editorLoaded$.pipe((0,y.R)(mt)).subscribe(()=>{this.renderer.appendChild(this.elementRef.nativeElement,this.editorContainer)})}set value(q){q!==this.editor.html&&this.editor.setValue(q)}set editable(q){this.editor.editable=q}}return F.\u0275fac=function(q){return new(q||F)(E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(p.$),E.Y36(r.Y1),E.Y36(r.ZW),E.Y36(T.TuiDestroyService,2))},F.\u0275dir=E.lG2({type:F,selectors:[["","tuiTiptapEditor",""]],inputs:{value:"value",editable:"editable"},outputs:{valueChange:"valueChange",stateChange:"stateChange"},features:[E._Bn([T.TuiDestroyService])]}),F})()},76954:(ne,Mt,a)=>{a.d(Mt,{$:()=>q});var E=a(77361),r=a(14309),T=a(83372),y=a(39761),p=a(88002),it=a(87519),Y=a(74788);let q=(()=>{class ft extends E._{constructor(X){super(),this.editorRef=X,this.editorRef.subscribe(Ct=>{this.editor=Ct,Ct.on("transaction",()=>{this.stateChange$.next()}),Ct.on("update",()=>{const mt=Ct.getHTML(),zt=function(ft){return Array.isArray(ft)&&1===ft.length&&!ft[0].hasOwnProperty("content")}(Ct.getJSON().content)?"":mt;this.valueChange$.next(zt)})})}get isFocused(){return this.editor.isFocused}get html(){return this.editor.getHTML()}get editable(){return this.editor.isEditable}set editable(X){this.editor.setEditable(X)}get state(){return this.editor.state}getOriginTiptapEditor(){return this.editor}undoDisabled(){return!this.editor.can().undo()}redoDisabled(){return!this.editor.can().redo()}getFontColor(){return this.editor.getAttributes("textStyle").fontColor||"rgb(51, 51, 51)"}getBackgroundColor(){var X;return(null===(X=this.editor)||void 0===X?void 0:X.getAttributes("textStyle").backgroundColor)||"rgb(51, 51, 51)"}getCellColor(){return this.editor.getAttributes("tableCell").background||this.editor.getAttributes("tableHeader").background}getGroupColor(){var X,Ct,mt,Dt;if(this.editor.isActive("group")){const zt=null!==(Ct=null===(X=this.editor.getAttributes("group"))||void 0===X?void 0:X.style)&&void 0!==Ct?Ct:"",At=(0,T.jx)(zt);return null!==(Dt=null!==(mt=At["background-color"])&&void 0!==mt?mt:At.background)&&void 0!==Dt?Dt:""}return""}onAlign(X){this.editor.chain().focus().setTextAlign(X).run()}setImage(X){this.editor.chain().focus().first(({commands:Ct})=>[()=>{var mt;return(null===(mt=Ct.setEditableImage)||void 0===mt?void 0:mt.call(Ct,{src:X}))||!1},()=>Ct.setImage({src:X})]).run()}undo(){this.editor.chain().undo().run()}redo(){this.editor.chain().redo().run()}setHorizontalRule(){this.editor.chain().focus().setHorizontalRule().run()}removeFormat(){this.editor.commands.unsetAllMarks(),this.editor.commands.clearNodes()}setFontColor(X){this.editor.chain().focus().setFontColor(X).run()}setBackgroundColor(X){this.editor.chain().focus().setBackgroundColor(X).run()}toggleUnderline(){this.editor.chain().focus().toggleUnderline().run()}toggleStrike(){this.editor.chain().focus().toggleStrike().run()}toggleOrderedList(){this.editor.chain().focus().toggleOrderedList().run()}toggleUnorderedList(){this.editor.chain().focus().toggleBulletList().run()}togglePre(){this.editor.chain().focus().toggleCodeBlock().run()}sinkListItem(){this.editor.chain().focus().sinkListItem("listItem").run()}liftListItem(){this.editor.chain().focus().liftListItem("listItem").run()}isActive(X){return this.editor.isActive(X)}isActive$(X){return this.stateChange$.pipe((0,y.O)(null),(0,p.U)(()=>this.isActive(X)),(0,it.x)())}toggleBold(){this.editor.chain().focus().toggleBold().run()}toggleCode(){this.editor.chain().focus().toggleCode().run()}toggleItalic(){this.editor.chain().focus().toggleItalic().run()}toggleBlockquote(){this.editor.chain().focus().toggleBlockquote().run()}toggleSubscript(){this.editor.chain().focus().toggleSubscript().run()}toggleSuperscript(){this.editor.chain().focus().toggleSuperscript().run()}toggleCodeBlock(){this.editor.chain().focus().toggleCodeBlock().run()}insertTable(X,Ct){this.editor.chain().focus().insertTable({cols:X,rows:Ct}).run()}addColumnAfter(){this.editor.chain().focus().addColumnAfter().run()}addColumnBefore(){this.editor.chain().focus().addColumnBefore().run()}addRowAfter(){this.editor.chain().focus().addRowAfter().run()}addRowBefore(){this.editor.chain().focus().addRowBefore().run()}deleteColumn(){this.editor.chain().focus().deleteColumn().run()}deleteRow(){this.editor.chain().focus().deleteRow().run()}mergeCells(){this.editor.chain().focus().mergeCells().run()}splitCell(){this.editor.chain().focus().splitCell().run()}canMergeCells(){return this.editor.can().mergeCells()}canSplitCells(){return this.editor.can().splitCell()}setHeading(X){this.editor.chain().focus().setHeading({level:X}).run()}setParagraph(X){this.editor.chain().focus().setParagraph().run(),X&&this.editor.chain().setMark("textStyle",X).run()}setHardBreak(){this.editor.chain().setHardBreak().run()}setTextSelection(X){this.editor.commands.setTextSelection(X)}toggleLink(X){this.editor.chain().focus().toggleLink({href:X}).run()}setLink(X){this.editor.chain().focus().setLink({href:X}).run()}unsetLink(){this.editor.chain().focus().unsetLink().run()}focus(){this.editor.chain().focus().run()}setValue(X){this.editor.commands.setContent(X)}destroy(){this.editor.destroy()}setCellColor(X){this.editor.chain().focus().setCellBackground(X).run()}selectClosest(){const X=this.editor.state.selection.anchor,{schema:Ct,doc:mt}=this.editor.state,Dt=(0,T.Yz)(mt.resolve(X),Ct.marks.link);Dt&&this.editor.chain().setTextSelection(Dt).run()}enter(){this.editor.commands.enter()}setDetails(){this.editor.commands.setDetails()}removeDetails(){this.editor.commands.removeDetails()}setGroup(){this.editor.commands.setGroup()}removeGroup(){this.editor.commands.removeGroup()}setGroupHilite(X){this.editor.commands.setGroupHilite(X)}setAnchor(X){this.editor.commands.setAnchor(X.replace("#",""))}removeAnchor(){this.editor.commands.removeAnchor()}setFileLink(X){this.editor.commands.setFileLink(X)}setYoutubeVideo(X){this.editor.commands.setYoutubeVideo(X)}setIframe(X){this.editor.commands.setIframe(X)}}return ft.\u0275fac=function(X){return new(X||ft)(Y.LFG(r.ZW))},ft.\u0275prov=Y.Yz7({token:ft,factory:ft.\u0275fac}),ft})()},48699:(ne,Mt,a)=>{a.d(Mt,{_:()=>E});var E=(()=>{return(r=E||(E={})).Undo="undo",r.Anchor="anchor",r.Size="fontSize",r.Bold="bold",r.Italic="italic",r.Underline="underline",r.Strikethrough="strikeThrough",r.Align="justify",r.List="list",r.Quote="quote",r.Color="foreColor",r.Hilite="hiliteColor",r.Clear="clear",r.Link="link",r.Attach="attach",r.Tex="tex",r.Code="code",r.Img="image",r.HR="insertHorizontalRule",r.Sup="superscript",r.Sub="subscript",r.Table="insertTable",r.MergeCells="mergeCells",r.SplitCells="splitCells",r.RowsColumnsManaging="rowsColumnsManaging",r.Details="details",r.Group="group",E;var r})()},15736:(ne,Mt,a)=>{a.r(Mt),a.d(Mt,{BackgroundColor:()=>T}),a(84402);const T=a(12867).Extension.create({name:"backgroundColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,renderHTML:({backgroundColor:y})=>y?{style:`background-color: ${y}`}:{},parseHTML:({style:y})=>y.backgroundColor.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setBackgroundColor:y=>({chain:p})=>p().setMark("textStyle",{backgroundColor:y}).run(),unsetBackgroundColor:()=>({chain:y})=>y().setMark("textStyle",{backgroundColor:null}).run()})})},93763:(ne,Mt,a)=>{a.r(Mt),a.d(Mt,{TuiFileLink:()=>r});const r=a(12867).Extension.create({name:"fileLink",addCommands:()=>({setFileLink:T=>({state:y,chain:p})=>{const{selection:it}=y,Y='<span style="font-size: 15px"> </span>';return(Math.abs(it.to-it.from)>0?p().toggleMark("link",{href:T.link},{extendEmptyMarkRange:!0}).setTextSelection(it.to).insertContent(Y):p().insertContent(`<a href="${T.link}">${T.name}</a>${Y}`)).setTextSelection(it.to).run()}})})},52658:(ne,Mt,a)=>{a.r(Mt),a.d(Mt,{FontColor:()=>T}),a(84402);const T=a(12867).Extension.create({name:"fontColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontColor:{default:null,renderHTML:({fontColor:y})=>y?{style:`color: ${y}`}:{},parseHTML:({style:y})=>y.color.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setFontColor:y=>({chain:p})=>p().setMark("textStyle",{fontColor:y}).run(),unsetFontColor:()=>({chain:y})=>y().setMark("textStyle",{fontColor:null}).run()})})},9492:(ne,Mt,a)=>{a.r(Mt),a.d(Mt,{TuiFontSize:()=>T}),a(84402);const T=a(12867).Extension.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:({style:y})=>y.fontSize,renderHTML:({fontSize:y})=>y?{style:`font-size: ${y}`}:{}}}}]},addCommands:()=>({setFontSize:y=>({chain:p})=>p().setMark("textStyle",{fontSize:y}).run(),unsetFontSize:()=>({chain:y})=>y().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()})})},54920:(ne,Mt,a)=>{a.r(Mt),a.d(Mt,{TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>T,createGroupExtension:()=>y});var E=a(83372),r=a(12867);const T={groupNodeClass:"tui-group-node",groupPointerNodeClass:"tui-group-pointer",nested:!0,draggable:!0,createOnEnter:!1},y=(p={})=>{const{draggable:it,nested:F,groupNodeClass:Y,groupPointerNodeClass:q,createOnEnter:ft}=Object.assign(Object.assign({},T),p);return r.Node.create({name:"group",draggable:it,group:"block",content:F?"block+":"block",addAttributes:()=>({style:{default:null,parseHTML:ut=>ut.getAttribute("style"),renderHTML:ut=>ut.style?{style:ut.style}:{}}}),parseHTML:()=>[{tag:'div[data-type="group"]'}],renderHTML:({HTMLAttributes:ut})=>["div",(0,r.mergeAttributes)(ut,{"data-type":"group"}),0],addNodeView:()=>({HTMLAttributes:ut,node:X})=>{const Ct=document.createElement("div"),mt=document.createElement("div");if(Ct.classList.add(Y),mt.setAttribute("data-type","group"),ut.style&&(X.attrs.style=ut.style,mt.setAttribute("style",ut.style)),it){const Dt=document.createElement("div");Dt.classList.add(q),Dt.innerHTML="",Dt.contentEditable="false",Ct.append(Dt,mt)}else Ct.append(mt);return{dom:Ct,contentDOM:mt}},addCommands(){return{setGroup:()=>({commands:ut,state:X})=>{this.editor.chain().focus().run();const Ct=(0,E.Ap)(X,""),Dt=`<div data-type="group">${Ct.trim().startsWith("<p>")?Ct:`<p>${Ct}</p>`}</div>`;return ut.insertContent(Dt)},setGroupHilite:ut=>({editor:X})=>{for(let Ct=X.state.selection.$anchor,mt=Ct.depth;mt>0;mt--){const Dt=Ct.node(mt);if(Dt.type.name===this.name){setTimeout(()=>X.commands.updateAttributes(Dt.type,{style:`background: ${ut}`}));break}}return!0},removeGroup:()=>({state:ut,dispatch:X})=>(0,E.yU)(ut,X,this.name)}},addKeyboardShortcuts(){return ft?{Enter:()=>this.editor.commands.setGroup()}:{}}})}},20854:(ne,Mt,a)=>{a.r(Mt),a.d(Mt,{TUI_IFRAME_EDITOR_OPTIONS:()=>it,TuiIframeEditorComponent:()=>Y,TuiIframeEditorModule:()=>X,createIframeEditorExtension:()=>ut});var E=a(12057),r=a(91211),T=a(95110),y=a(68339),p=a(74788);const it=new p.OlP("[TUI_IFRAME_EDITOR_OPTIONS]: Size of resizable iframe inside editor",{factory:()=>({minWidth:100,maxWidth:1/0,minHeight:100,maxHeight:1/0})});var F=a(96570);let Y=(()=>{class Ct extends T._3{constructor(Dt,zt,At,_t){super(zt,_t),this.options=Dt,this.sanitizer=At}get src(){var Dt;return this.sanitizer.bypassSecurityTrustResourceUrl(null!==(Dt=this.attrs.src)&&void 0!==Dt?Dt:"")}updateSize([Dt,zt]){this._width=Math.max(this.options.minWidth,Math.min(this.options.maxWidth,Dt)),this._height=Math.max(this.options.minHeight,Math.min(this.options.maxHeight,zt))}}return Ct.\u0275fac=function(Dt){return new(Dt||Ct)(p.Y36(it),p.Y36(E.K0),p.Y36(r.H7),p.Y36(y.TuiDestroyService,2))},Ct.\u0275cmp=p.Xpm({type:Ct,selectors:[["tui-iframe-editor"]],features:[p._Bn([y.TuiDestroyService]),p.qOj],decls:2,vars:13,consts:[[3,"width","height","sizeChange"],[3,"src","width","height"]],template:function(Dt,zt){1&Dt&&(p.TgZ(0,"tui-editor-resizable",0),p.NdJ("sizeChange",function(_t){return zt.updateSize(_t)}),p._UZ(1,"iframe",1),p.qZA()),2&Dt&&(p.Q6J("width",zt.width)("height",zt.height),p.xp6(1),p.Udp("min-width",zt.options.minWidth)("min-height",zt.options.minHeight)("max-width",zt.options.maxWidth)("max-height",zt.options.maxHeight),p.Q6J("src",zt.src,p.uOi)("width",zt.width)("height",zt.height))},directives:[F.V],styles:["iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}"],changeDetection:0}),Ct})();var q=a(40400),ft=a(12867);const ut=Ct=>ft.Node.create({name:"iframe",group:"block",atom:!0,draggable:!1,parseHTML:()=>[{tag:'iframe[data-type="iframe-editor"]'}],addAttributes(){return{src:{default:null,keepOnSplit:!1,parseHTML:mt=>mt.getAttribute("src")},frameborder:{default:0,keepOnSplit:!1,parseHTML:mt=>mt.getAttribute("frameborder")},width:{default:"100%",keepOnSplit:!1,parseHTML:mt=>mt.getAttribute("width")},height:{default:null,keepOnSplit:!1,parseHTML:mt=>mt.getAttribute("height")},allowfullscreen:{keepOnSplit:!1,default:this.options.allowFullscreen,parseHTML:mt=>mt.getAttribute("allowfullscreen")}}},renderHTML:({HTMLAttributes:mt})=>["iframe",(0,ft.mergeAttributes)(mt,{"data-type":"iframe-editor"})],addNodeView:()=>(0,q.x)(Y,{injector:Ct}),addCommands(){return{setIframe:mt=>({commands:Dt,state:zt})=>{const At=zt.selection.anchor;return Dt.enter(),Dt.setTextSelection(At),Dt.insertContent({type:this.name,attrs:mt}),Dt.setTextSelection(zt.selection.anchor),!0}}}});let X=(()=>{class Ct{}return Ct.\u0275fac=function(Dt){return new(Dt||Ct)},Ct.\u0275mod=p.oAB({type:Ct}),Ct.\u0275inj=p.cJS({imports:[[T.Sl]]}),Ct})()},53380:(ne,Mt,a)=>{a.r(Mt),a.d(Mt,{TUI_EDITOR_MAX_IMAGE_WIDTH:()=>F,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>it,TUI_IMAGE_EDITOR_OPTIONS:()=>Y,TuiImageEditorComponent:()=>ft,TuiImageEditorModule:()=>zt,createImageEditorExtension:()=>Dt});var E=a(12057),r=a(91211),T=a(95110),y=a(68339),p=a(74788);const it=new p.OlP("[TUI_EDITOR_MIN_IMAGE_WIDTH]: Min size of resizable image inside editor",{factory:()=>null}),F=new p.OlP("[TUI_EDITOR_MAX_IMAGE_WIDTH]: Max size of resizable image inside editor",{factory:()=>null}),Y=new p.OlP("[TUI_IMAGE_EDITOR_OPTIONS]: Size of resizable image inside editor",{factory:()=>({minWidth:100,maxWidth:1/0})});var q=a(96570);let ft=(()=>{class At extends T._3{constructor(at,ht,$,xt,yt,Bt){super(xt,Bt),this.minWidth=at,this.maxWidth=ht,this.options=$,this.sanitizer=yt}get height(){return null}get alt(){return this.attrs.alt||""}get title(){return this.attrs.title||""}get src(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.attrs.src)}updateSize([at]){var ht,$;const xt=null!==(ht=this.minWidth)&&void 0!==ht?ht:this.options.minWidth,yt=null!==($=this.maxWidth)&&void 0!==$?$:this.options.maxWidth;this._width=Math.max(xt,Math.min(yt,at))}}return At.\u0275fac=function(at){return new(at||At)(p.Y36(it),p.Y36(F),p.Y36(Y),p.Y36(E.K0),p.Y36(r.H7),p.Y36(y.TuiDestroyService,2))},At.\u0275cmp=p.Xpm({type:At,selectors:[["tui-image-editor"]],features:[p._Bn([y.TuiDestroyService]),p.qOj],decls:2,vars:10,consts:[[3,"width","autoHeight","sizeChange"],[3,"src","width","alt","title"]],template:function(at,ht){1&at&&(p.TgZ(0,"tui-editor-resizable",0),p.NdJ("sizeChange",function(xt){return ht.updateSize(xt)}),p._UZ(1,"img",1),p.qZA()),2&at&&(p.Q6J("width",ht.width)("autoHeight",!0),p.xp6(1),p.Udp("min-width",ht.options.minWidth,"px")("max-width",ht.options.maxWidth,"px"),p.Q6J("src",ht.src,p.LSH)("width",ht.width)("alt",ht.alt)("title",ht.title))},directives:[q.V],styles:["img[_ngcontent-%COMP%]{pointer-events:none}"],changeDetection:0}),At})();var ut=a(40400),X=a(12867);const Ct=[{tag:'img[data-type="image-editor"]'}],mt={src:{default:"",keepOnSplit:!1},width:{default:300,keepOnSplit:!1},alt:{default:"",keepOnSplit:!1},title:{default:"",keepOnSplit:!1}},Dt=At=>X.Node.create({name:"imageEditor",group:"block",atom:!0,draggable:!0,parseHTML:()=>Ct,addAttributes:()=>mt,renderHTML:({HTMLAttributes:_t})=>["img",(0,X.mergeAttributes)(_t,{"data-type":"image-editor"})],addNodeView:()=>(0,ut.x)(ft,{injector:At}),addCommands(){return{setEditableImage:_t=>({commands:at})=>at.insertContent({type:this.name,attrs:_t})}}});let zt=(()=>{class At{}return At.\u0275fac=function(at){return new(at||At)},At.\u0275mod=p.oAB({type:At}),At.\u0275inj=p.cJS({imports:[[E.ez,T.Sl]]}),At})()},12177:(ne,Mt,a)=>{function r(y){return y.isActive("bulletList")||y.isActive("orderedList")}a.r(Mt),a.d(Mt,{TuiTabExtension:()=>T,tuiIsOrderedOrBulletList:()=>r});const T=a(12867).Extension.create({name:"indent",addKeyboardShortcuts(){return{Tab:()=>r(this.editor)?null:this.editor.commands.insertContent("\t")}}})},57734:(ne,Mt,a)=>{a.r(Mt),a.d(Mt,{TuiLink:()=>hn});var E=a(12867);function r(Lt){this.j={},this.jr=[],this.jd=null,this.t=Lt}r.prototype={accepts:function(){return!!this.t},tt:function(wt,Wt){if(Wt&&Wt.j)return this.j[wt]=Wt,Wt;var Jt=Wt,Yt=this.j[wt];if(Yt)return Jt&&(Yt.t=Jt),Yt;Yt=T();var oe=F(this,wt);return oe?(Object.assign(Yt.j,oe.j),Yt.jr.append(oe.jr),Yt.jr=oe.jd,Yt.t=Jt||oe.t):Yt.t=Jt,this.j[wt]=Yt,Yt}};var T=function(){return new r},y=function(wt){return new r(wt)},p=function(wt,Wt,Jt){wt.j[Wt]||(wt.j[Wt]=Jt)},it=function(wt,Wt,Jt){wt.jr.push([Wt,Jt])},F=function(wt,Wt){var Jt=wt.j[Wt];if(Jt)return Jt;for(var Yt=0;Yt<wt.jr.length;Yt++){var J=wt.jr[Yt][1];if(wt.jr[Yt][0].test(Wt))return J}return wt.jd},Y=function(wt,Wt,Jt){for(var Yt=0;Yt<Wt.length;Yt++)p(wt,Wt[Yt],Jt)},q=function(wt,Wt){for(var Jt=0;Jt<Wt.length;Jt++)p(wt,Wt[Jt][0],Wt[Jt][1])},ft=function(wt,Wt,Jt,Yt){for(var L,oe=0,J=Wt.length;oe<J&&(L=wt.j[Wt[oe]]);)wt=L,oe++;if(oe>=J)return[];for(;oe<J-1;)L=Yt(),p(wt,Wt[oe],L),wt=L,oe++;p(wt,Wt[J-1],Jt)},ut="DOMAIN",X="LOCALHOST",Ct="TLD",mt="NUM",Dt="PROTOCOL",zt="MAILTO",at="OPENBRACE",ht="OPENBRACKET",$="OPENANGLEBRACKET",xt="OPENPAREN",yt="CLOSEBRACE",Bt="CLOSEBRACKET",Nt="CLOSEANGLEBRACKET",Ot="CLOSEPAREN",Ut="AMPERSAND",jt="APOSTROPHE",qt="ASTERISK",gt="AT",O="BACKSLASH",Z="BACKTICK",j="CARET",bt="COLON",Q="COMMA",ot="DOLLAR",pt="DOT",Kt="EQUALS",Zt="EXCLAMATION",le="HYPHEN",Gt="PERCENT",De="PIPE",Te="PLUS",je="POUND",Ue="QUERY",Ne="QUOTE",Je="SEMI",Re="SLASH",We="TILDE",Ee="UNDERSCORE",Be="SYM",Fe=Object.freeze({__proto__:null,DOMAIN:ut,LOCALHOST:X,TLD:Ct,NUM:mt,PROTOCOL:Dt,MAILTO:zt,WS:"WS",NL:"NL",OPENBRACE:at,OPENBRACKET:ht,OPENANGLEBRACKET:$,OPENPAREN:xt,CLOSEBRACE:yt,CLOSEBRACKET:Bt,CLOSEANGLEBRACKET:Nt,CLOSEPAREN:Ot,AMPERSAND:Ut,APOSTROPHE:jt,ASTERISK:qt,AT:gt,BACKSLASH:O,BACKTICK:Z,CARET:j,COLON:bt,COMMA:Q,DOLLAR:ot,DOT:pt,EQUALS:Kt,EXCLAMATION:Zt,HYPHEN:le,PERCENT:Gt,PIPE:De,PLUS:Te,POUND:je,QUERY:Ue,QUOTE:Ne,SEMI:Je,SLASH:Re,TILDE:We,UNDERSCORE:Ee,SYM:Be}),Pe="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw verm\xf6gensberater-ctb verm\xf6gensberatung-pwb \u03b5\u03bb \u03b5\u03c5 \u0431\u0433 \u0431\u0435\u043b \u0434\u0435\u0442\u0438 \u0435\u044e \u043a\u0430\u0442\u043e\u043b\u0438\u043a \u043a\u043e\u043c \u049b\u0430\u0437 \u043c\u043a\u0434 \u043c\u043e\u043d \u043c\u043e\u0441\u043a\u0432\u0430 \u043e\u043d\u043b\u0430\u0439\u043d \u043e\u0440\u0433 \u0440\u0443\u0441 \u0440\u0444 \u0441\u0430\u0439\u0442 \u0441\u0440\u0431 \u0443\u043a\u0440 \u10d2\u10d4 \u0570\u0561\u0575 \u05d9\u05e9\u05e8\u05d0\u05dc \u05e7\u05d5\u05dd \u0627\u0628\u0648\u0638\u0628\u064a \u0627\u062a\u0635\u0627\u0644\u0627\u062a \u0627\u0631\u0627\u0645\u0643\u0648 \u0627\u0644\u0627\u0631\u062f\u0646 \u0627\u0644\u0628\u062d\u0631\u064a\u0646 \u0627\u0644\u062c\u0632\u0627\u0626\u0631 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629 \u0627\u0644\u0639\u0644\u064a\u0627\u0646 \u0627\u0644\u0645\u063a\u0631\u0628 \u0627\u0645\u0627\u0631\u0627\u062a \u0627\u06cc\u0631\u0627\u0646 \u0628\u0627\u0631\u062a \u0628\u0627\u0632\u0627\u0631 \u0628\u06be\u0627\u0631\u062a \u0628\u064a\u062a\u0643 \u067e\u0627\u06a9\u0633\u062a\u0627\u0646 \u0680\u0627\u0631\u062a \u062a\u0648\u0646\u0633 \u0633\u0648\u062f\u0627\u0646 \u0633\u0648\u0631\u064a\u0629 \u0634\u0628\u0643\u0629 \u0639\u0631\u0627\u0642 \u0639\u0631\u0628 \u0639\u0645\u0627\u0646 \u0641\u0644\u0633\u0637\u064a\u0646 \u0642\u0637\u0631 \u0643\u0627\u062b\u0648\u0644\u064a\u0643 \u0643\u0648\u0645 \u0645\u0635\u0631 \u0645\u0644\u064a\u0633\u064a\u0627 \u0645\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u0627 \u0645\u0648\u0642\u0639 \u0647\u0645\u0631\u0627\u0647 \u0915\u0949\u092e \u0928\u0947\u091f \u092d\u093e\u0930\u0924 \u092d\u093e\u0930\u0924\u092e\u094d \u092d\u093e\u0930\u094b\u0924 \u0938\u0902\u0917\u0920\u0928 \u09ac\u09be\u0982\u09b2\u09be \u09ad\u09be\u09b0\u09a4 \u09ad\u09be\u09f0\u09a4 \u0a2d\u0a3e\u0a30\u0a24 \u0aad\u0abe\u0ab0\u0aa4 \u0b2d\u0b3e\u0b30\u0b24 \u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe \u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8 \u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd \u0c2d\u0c3e\u0c30\u0c24\u0c4d \u0cad\u0cbe\u0cb0\u0ca4 \u0d2d\u0d3e\u0d30\u0d24\u0d02 \u0dbd\u0d82\u0d9a\u0dcf \u0e04\u0e2d\u0e21 \u0e44\u0e17\u0e22 \u0ea5\u0eb2\u0ea7 \ub2f7\ub137 \ub2f7\ucef4 \uc0bc\uc131 \ud55c\uad6d \u30a2\u30de\u30be\u30f3 \u30b0\u30fc\u30b0\u30eb \u30af\u30e9\u30a6\u30c9 \u30b3\u30e0 \u30b9\u30c8\u30a2 \u30bb\u30fc\u30eb \u30d5\u30a1\u30c3\u30b7\u30e7\u30f3 \u30dd\u30a4\u30f3\u30c8 \u307f\u3093\u306a \u4e16\u754c \u4e2d\u4fe1 \u4e2d\u56fd \u4e2d\u570b \u4e2d\u6587\u7f51 \u4e9a\u9a6c\u900a \u4f01\u4e1a \u4f5b\u5c71 \u4fe1\u606f \u5065\u5eb7 \u516b\u5366 \u516c\u53f8 \u516c\u76ca \u53f0\u6e7e \u53f0\u7063 \u5546\u57ce \u5546\u5e97 \u5546\u6807 \u5609\u91cc \u5609\u91cc\u5927\u9152\u5e97 \u5728\u7ebf \u5927\u4f17\u6c7d\u8f66 \u5927\u62ff \u5929\u4e3b\u6559 \u5a31\u4e50 \u5bb6\u96fb \u5e7f\u4e1c \u5fae\u535a \u6148\u5584 \u6211\u7231\u4f60 \u624b\u673a \u62db\u8058 \u653f\u52a1 \u653f\u5e9c \u65b0\u52a0\u5761 \u65b0\u95fb \u65f6\u5c1a \u66f8\u7c4d \u673a\u6784 \u6de1\u9a6c\u9521 \u6e38\u620f \u6fb3\u9580 \u70b9\u770b \u79fb\u52a8 \u7ec4\u7ec7\u673a\u6784 \u7f51\u5740 \u7f51\u5e97 \u7f51\u7ad9 \u7f51\u7edc \u8054\u901a \u8bfa\u57fa\u4e9a \u8c37\u6b4c \u8d2d\u7269 \u901a\u8ca9 \u96c6\u56e2 \u96fb\u8a0a\u76c8\u79d1 \u98de\u5229\u6d66 \u98df\u54c1 \u9910\u5385 \u9999\u683c\u91cc\u62c9 \u9999\u6e2f".split(" "),Se=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,Ie=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,Me=/\uFE0F/,Ve=/\d/,xe=/\s/;function ke(){var Lt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],wt=T(),Wt=y(mt),Jt=y(ut),Yt=T(),oe=y("WS"),J=[[Ve,Jt],[Se,Jt],[Ie,Jt],[Me,Jt]],L=function(){var be=y(ut);return be.j={"-":Yt},be.jr=[].concat(J),be},nt=function(be){var Le=L();return Le.t=be,Le};q(wt,[["'",y(jt)],["{",y(at)],["[",y(ht)],["<",y($)],["(",y(xt)],["}",y(yt)],["]",y(Bt)],[">",y(Nt)],[")",y(Ot)],["&",y(Ut)],["*",y(qt)],["@",y(gt)],["`",y(Z)],["^",y(j)],[":",y(bt)],[",",y(Q)],["$",y(ot)],[".",y(pt)],["=",y(Kt)],["!",y(Zt)],["-",y(le)],["%",y(Gt)],["|",y(De)],["+",y(Te)],["#",y(je)],["?",y(Ue)],['"',y(Ne)],["/",y(Re)],[";",y(Je)],["~",y(We)],["_",y(Ee)],["\\",y(O)]]),p(wt,"\n",y("NL")),it(wt,xe,oe),p(oe,"\n",T()),it(oe,xe,oe);for(var dt=0;dt<Pe.length;dt++)ft(wt,Pe[dt],nt(Ct),L);var lt=L(),Ht=L(),kt=L(),te=L();ft(wt,"file",lt,L),ft(wt,"ftp",Ht,L),ft(wt,"http",kt,L),ft(wt,"mailto",te,L);var ce=L(),he=y(Dt),ge=y(zt);p(Ht,"s",ce),p(Ht,":",he),p(kt,"s",ce),p(kt,":",he),p(lt,":",he),p(ce,":",he),p(te,":",ge);for(var fe=L(),pe=0;pe<Lt.length;pe++)ft(wt,Lt[pe],fe,L);return p(fe,":",he),ft(wt,"localhost",nt(X),L),it(wt,Ve,Wt),it(wt,Se,Jt),it(wt,Ie,Jt),it(wt,Me,Jt),it(Wt,Ve,Wt),it(Wt,Se,Jt),it(Wt,Ie,Jt),it(Wt,Me,Jt),p(Wt,"-",Yt),p(Jt,"-",Yt),p(Yt,"-",Yt),it(Jt,Ve,Jt),it(Jt,Se,Jt),it(Jt,Ie,Jt),it(Jt,Me,Jt),it(Yt,Ve,Jt),it(Yt,Se,Jt),it(Yt,Ie,Jt),it(Yt,Me,Jt),wt.jd=y(Be),wt}var Ce={defaultProtocol:"http",events:null,format:Et,formatHref:Et,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function Et(Lt){return Lt}function N(){}function w(Lt,wt){function Wt(Jt,Yt){this.t=Lt,this.v=Jt,this.tk=Yt}return function(Lt,wt){var Wt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Jt=Object.create(Lt.prototype);for(var Yt in Wt)Jt[Yt]=Wt[Yt];Jt.constructor=wt,wt.prototype=Jt}(N,Wt,wt),Wt}N.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var wt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(wt),start:this.startIndex(),end:this.endIndex()}}};var H=w("email",{isLink:!0}),U=w("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),Tt=w("text"),St=w("nl"),B=w("url",{isLink:!0,toHref:function(){for(var wt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce.defaultProtocol,Wt=this.tk,Jt=!1,Yt=!1,oe=[],J=0;Wt[J].t===Dt;)Jt=!0,oe.push(Wt[J].v),J++;for(;Wt[J].t===Re;)Yt=!0,oe.push(Wt[J].v),J++;for(;J<Wt.length;J++)oe.push(Wt[J].v);return oe=oe.join(""),Jt||Yt||(oe="".concat(wt,"://").concat(oe)),oe},hasProtocol:function(){return this.tk[0].t===Dt}}),s=Object.freeze({__proto__:null,MultiToken:N,Base:N,createTokenClass:w,MailtoEmail:H,Email:U,Text:Tt,Nl:St,Url:B});function d(){var Lt=T(),wt=T(),Wt=T(),Jt=T(),Yt=T(),oe=T(),J=T(),L=y(B),nt=T(),dt=y(B),lt=y(B),Ht=T(),kt=T(),te=T(),ce=T(),he=T(),ge=y(B),fe=y(B),pe=y(B),ve=y(B),be=T(),Le=T(),h=T(),C=T(),S=T(),x=T(),R=y(U),z=T(),V=y(U),st=y(H),G=T(),rt=T(),It=T(),Rt=T(),Vt=y(St);p(Lt,"NL",Vt),p(Lt,Dt,wt),p(Lt,zt,Wt),p(wt,Re,Jt),p(Jt,Re,Yt),p(Lt,Ct,oe),p(Lt,ut,oe),p(Lt,X,L),p(Lt,mt,oe),p(Yt,Ct,lt),p(Yt,ut,lt),p(Yt,mt,lt),p(Yt,X,lt),p(oe,pt,J),p(S,pt,x),p(J,Ct,L),p(J,ut,oe),p(J,mt,oe),p(J,X,oe),p(x,Ct,R),p(x,ut,S),p(x,mt,S),p(x,X,S),p(L,pt,J),p(R,pt,x),p(L,bt,nt),p(L,Re,lt),p(nt,mt,dt),p(dt,Re,lt),p(R,bt,z),p(z,mt,V);var Qt=[Ut,qt,gt,O,Z,j,ot,ut,Kt,le,X,mt,Gt,De,Te,je,Dt,Re,Be,We,Ct,Ee],se=[jt,Nt,yt,Bt,Ot,bt,Q,pt,Zt,$,at,ht,xt,Ue,Ne,Je];p(lt,at,kt),p(lt,ht,te),p(lt,$,ce),p(lt,xt,he),p(Ht,at,kt),p(Ht,ht,te),p(Ht,$,ce),p(Ht,xt,he),p(kt,yt,lt),p(te,Bt,lt),p(ce,Nt,lt),p(he,Ot,lt),p(ge,yt,lt),p(fe,Bt,lt),p(pe,Nt,lt),p(ve,Ot,lt),p(be,yt,lt),p(Le,Bt,lt),p(h,Nt,lt),p(C,Ot,lt),Y(kt,Qt,ge),Y(te,Qt,fe),Y(ce,Qt,pe),Y(he,Qt,ve),Y(kt,se,be),Y(te,se,Le),Y(ce,se,h),Y(he,se,C),Y(ge,Qt,ge),Y(fe,Qt,fe),Y(pe,Qt,pe),Y(ve,Qt,ve),Y(ge,se,ge),Y(fe,se,fe),Y(pe,se,pe),Y(ve,se,ve),Y(be,Qt,ge),Y(Le,Qt,fe),Y(h,Qt,pe),Y(C,Qt,ve),Y(be,se,be),Y(Le,se,Le),Y(h,se,h),Y(C,se,C),Y(lt,Qt,lt),Y(Ht,Qt,lt),Y(lt,se,Ht),Y(Ht,se,Ht),p(Wt,Ct,st),p(Wt,ut,st),p(Wt,mt,st),p(Wt,X,st),Y(st,Qt,st),Y(st,se,G),Y(G,Qt,st),Y(G,se,G);var me=[Ut,jt,qt,O,Z,j,yt,ot,ut,Kt,le,mt,at,Gt,De,Te,je,Ue,Re,Be,We,Ct,Ee];return Y(oe,me,rt),p(oe,gt,It),Y(L,me,rt),p(L,gt,It),Y(J,me,rt),Y(rt,me,rt),p(rt,gt,It),p(rt,pt,Rt),Y(Rt,me,rt),p(It,Ct,S),p(It,ut,S),p(It,mt,S),p(It,X,R),Lt}function P(Lt,wt,Wt){var Jt=Wt[0].s;return new Lt(wt.substr(Jt,Wt[Wt.length-1].e-Jt),Wt)}var k="undefined"!=typeof console&&console&&console.warn||function(){},W={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function ae(Lt){if(W.initialized&&k('linkifyjs: already initialized - will not register custom protocol "'.concat(Lt,'" until you manually call linkify.init(). To avoid this warning, please register all custom protocols before invoking linkify the first time.')),!/^[a-z-]+$/.test(Lt))throw Error("linkifyjs: protocols containing characters other than a-z or - (hyphen) are not supported");W.customProtocols.push(Lt)}function He(Lt){return W.initialized||function(){W.scanner={start:ke(W.customProtocols),tokens:Fe},W.parser={start:d(),tokens:s};for(var Lt={createTokenClass:w},wt=0;wt<W.pluginQueue.length;wt++)W.pluginQueue[wt][1]({scanner:W.scanner,parser:W.parser,utils:Lt});W.initialized=!0}(),function(Lt,wt,Wt){for(var Jt=Wt.length,Yt=0,oe=[],J=[];Yt<Jt;){for(var L=Lt,nt=null,dt=null,lt=0,Ht=null,kt=-1;Yt<Jt&&!(nt=F(L,Wt[Yt].t));)J.push(Wt[Yt++]);for(;Yt<Jt&&(dt=nt||F(L,Wt[Yt].t));)nt=null,(L=dt).accepts()?(kt=0,Ht=L):kt>=0&&kt++,Yt++,lt++;if(kt<0)for(var te=Yt-lt;te<Yt;te++)J.push(Wt[te]);else{J.length>0&&(oe.push(P(Tt,wt,J)),J=[]);var ce=Ht.t,he=Wt.slice((Yt-=kt)-(lt-=kt),Yt);oe.push(P(ce,wt,he))}}return J.length>0&&oe.push(P(Tt,wt,J)),oe}(W.parser.start,Lt,function(Lt,wt){for(var Wt=function(Lt){for(var wt=[],Wt=Lt.length,Jt=0;Jt<Wt;){var Yt=Lt.charCodeAt(Jt),oe=void 0,J=Yt<55296||Yt>56319||Jt+1===Wt||(oe=Lt.charCodeAt(Jt+1))<56320||oe>57343?Lt[Jt]:Lt.slice(Jt,Jt+2);wt.push(J),Jt+=J.length}return wt}(wt.replace(/[A-Z]/g,function(te){return te.toLowerCase()})),Jt=Wt.length,Yt=[],oe=0,J=0;J<Jt;){for(var L=Lt,nt=null,dt=0,lt=null,Ht=-1,kt=-1;J<Jt&&(nt=F(L,Wt[J]));)(L=nt).accepts()?(Ht=0,kt=0,lt=L):Ht>=0&&(Ht+=Wt[J].length,kt++),dt+=Wt[J].length,oe+=Wt[J].length,J++;J-=kt,Yt.push({t:lt.t,v:wt.substr((oe-=Ht)-(dt-=Ht),dt),s:oe-dt,e:oe})}return Yt}(W.scanner.start,Lt))}function $e(Lt){for(var wt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,Wt=He(Lt),Jt=[],Yt=0;Yt<Wt.length;Yt++){var oe=Wt[Yt];oe.isLink&&(!wt||oe.t===wt)&&Jt.push(oe.toObject())}return Jt}function Qe(Lt){var wt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,Wt=He(Lt);return 1===Wt.length&&Wt[0].isLink&&(!wt||Wt[0].t===wt)}var on=a(62463);const hn=E.Mark.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(ae)},onDestroy(){W.scanner=null,W.parser=null,W.pluginQueue=[],W.customProtocols=[],W.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}),addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML:()=>[{tag:'a[href]:not([href *= "javascript:" i])'}],renderHTML({HTMLAttributes:Lt}){return["a",(0,E.mergeAttributes)(this.options.HTMLAttributes,Lt),0]},addCommands(){return{setLink:Lt=>({chain:wt})=>wt().setMark(this.name,Lt).setMeta("preventAutolink",!0).run(),toggleLink:Lt=>({chain:wt})=>wt().toggleMark(this.name,Lt,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:Lt})=>Lt().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[(0,E.markPasteRule)({find:Lt=>$e(Lt).filter(wt=>!this.options.validate||this.options.validate(wt.value)).filter(wt=>wt.isLink).map(wt=>({text:wt.value,index:wt.start,data:wt})),type:this.type,getAttributes:Lt=>{var wt;return{href:null==(wt=Lt.data)?void 0:wt.href}}})]},addProseMirrorPlugins(){const Lt=[];return this.options.autolink&&Lt.push(function(Lt){return new on.Sy({key:new on.H$("autolink"),appendTransaction:(wt,Wt,Jt)=>{const Yt=wt.some(lt=>lt.docChanged)&&!Wt.doc.eq(Jt.doc),oe=wt.some(lt=>lt.getMeta("preventAutolink"));if(!Yt||oe)return;const{tr:J}=Jt,L=(0,E.combineTransactionSteps)(Wt.doc,[...wt]),{mapping:nt}=L;return(0,E.getChangedRanges)(L).forEach(({oldRange:lt,newRange:Ht})=>{(0,E.getMarksBetween)(lt.from,lt.to,Wt.doc).filter(he=>he.mark.type===Lt.type).forEach(he=>{const ge=nt.map(he.from),fe=nt.map(he.to),pe=(0,E.getMarksBetween)(ge,fe,Jt.doc).filter(S=>S.mark.type===Lt.type);if(!pe.length)return;const ve=pe[0],be=Wt.doc.textBetween(he.from,he.to,void 0," "),Le=Jt.doc.textBetween(ve.from,ve.to,void 0," "),h=Qe(be),C=Qe(Le);h&&!C&&J.removeMark(ve.from,ve.to,Lt.type)});const kt=(0,E.findChildrenInRange)(Jt.doc,Ht,he=>he.isTextblock);let te,ce;if(kt.length>1?(te=kt[0],ce=Jt.doc.textBetween(te.pos,te.pos+te.node.nodeSize,void 0," ")):kt.length&&Jt.doc.textBetween(Ht.from,Ht.to," "," ").endsWith(" ")&&(te=kt[0],ce=Jt.doc.textBetween(te.pos,Ht.to,void 0," ")),te&&ce){const he=ce.split(" ").filter(pe=>""!==pe);if(he.length<=0)return!1;const ge=he[he.length-1],fe=te.pos+ce.lastIndexOf(ge);if(!ge)return!1;$e(ge).filter(pe=>pe.isLink).filter(pe=>!Lt.validate||Lt.validate(pe.value)).map(pe=>ye(ie({},pe),{from:fe+pe.start+1,to:fe+pe.end+1})).forEach(pe=>{J.addMark(pe.from,pe.to,Lt.type.create({href:pe.href}))})}}),J.steps.length?J:void 0}})}({type:this.type,validate:this.options.validate})),this.options.openOnClick&&Lt.push(function(Lt){return new on.Sy({key:new on.H$("handleClickLink"),props:{handleClick:(wt,Wt,Jt)=>{var Yt;const oe=(0,E.getAttributes)(wt.state,Lt.type.name);return!(!(null==(Yt=Jt.target)?void 0:Yt.closest("a"))||!oe.href||(window.open(oe.href,oe.target),0))}}})}({type:this.type})),this.options.linkOnPaste&&Lt.push(function(Lt){return new on.Sy({key:new on.H$("handlePasteLink"),props:{handlePaste:(wt,Wt,Jt)=>{const{state:Yt}=wt,{selection:oe}=Yt,{empty:J}=oe;if(J)return!1;let L="";Jt.content.forEach(dt=>{L+=dt.textContent});const nt=$e(L).find(dt=>dt.isLink&&dt.value===L);return!(!L||!nt||(Lt.editor.commands.setMark(Lt.type,{href:nt.href}),0))}}})}({editor:this.editor,type:this.type})),Lt}}).extend({addCommands(){var Lt;return Object.assign(Object.assign({},null===(Lt=this.parent)||void 0===Lt?void 0:Lt.call(this)),{toggleLink:wt=>({chain:Wt,state:Jt})=>{{const{selection:Yt,doc:oe}=Jt,J=oe.cut(Yt.to,Yt.to+1),nt=" "===(0,E.getHTMLFromFragment)(J.content,Jt.schema).replace(/<\/?[^>]+(>|$)/g,""),dt=Wt().toggleMark(this.name,wt,{extendEmptyMarkRange:!0});return(nt?dt.setTextSelection(Yt.to+1):dt.setTextSelection(Yt.to).insertContent('<span style="font-size: 15px"> </span>')).run()}}})}}).configure({openOnClick:!1})},2823:(ne,Mt,a)=>{a.r(Mt),a.d(Mt,{StarterKit:()=>oe});var E=a(12867),r=/^\s*>\s$/,T=E.Node.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:J}){return["blockquote",(0,E.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{setBlockquote:()=>({commands:J})=>J.wrapIn(this.name),toggleBlockquote:()=>({commands:J})=>J.toggleWrap(this.name),unsetBlockquote:()=>({commands:J})=>J.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,E.wrappingInputRule)({find:r,type:this.type})]}}),p=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,it=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,F=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,Y=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,q=E.Mark.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:J=>"normal"!==J.style.fontWeight&&null},{style:"font-weight",getAttrs:J=>/^(bold(er)?|[5-9]\d{2,})$/.test(J)&&null}],renderHTML({HTMLAttributes:J}){return["strong",(0,E.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{setBold:()=>({commands:J})=>J.setMark(this.name),toggleBold:()=>({commands:J})=>J.toggleMark(this.name),unsetBold:()=>({commands:J})=>J.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,E.markInputRule)({find:p,type:this.type}),(0,E.markInputRule)({find:F,type:this.type})]},addPasteRules(){return[(0,E.markPasteRule)({find:it,type:this.type}),(0,E.markPasteRule)({find:Y,type:this.type})]}}),ut=/^\s*([-+*])\s$/,X=E.Node.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:J}){return["ul",(0,E.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{toggleBulletList:()=>({commands:J})=>J.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[(0,E.wrappingInputRule)({find:ut,type:this.type})]}}),mt=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,Dt=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,zt=E.Mark.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:J}){return["code",(0,E.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{setCode:()=>({commands:J})=>J.setMark(this.name),toggleCode:()=>({commands:J})=>J.toggleMark(this.name),unsetCode:()=>({commands:J})=>J.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,E.markInputRule)({find:mt,type:this.type})]},addPasteRules(){return[(0,E.markPasteRule)({find:Dt,type:this.type})]}}),_t=a(62463),at=/^```([a-z]+)?[\s\n]$/,ht=/^~~~([a-z]+)?[\s\n]$/,$=E.Node.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:J=>{var L;const{languageClassPrefix:nt}=this.options;return[...(null==(L=J.firstElementChild)?void 0:L.classList)||[]].filter(kt=>kt.startsWith(nt)).map(kt=>kt.replace(nt,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:J,HTMLAttributes:L}){return["pre",(0,E.mergeAttributes)(this.options.HTMLAttributes,L),["code",{class:J.attrs.language?this.options.languageClassPrefix+J.attrs.language:null},0]]},addCommands(){return{setCodeBlock:J=>({commands:L})=>L.setNode(this.name,J),toggleCodeBlock:J=>({commands:L})=>L.toggleNode(this.name,"paragraph",J)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:J,$anchor:L}=this.editor.state.selection;return!(!J||L.parent.type.name!==this.name)&&!(1!==L.pos&&L.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:J})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:L}=J,{selection:nt}=L,{$from:dt,empty:lt}=nt;if(!lt||dt.parent.type!==this.type)return!1;const Ht=dt.parentOffset===dt.parent.nodeSize-2,kt=dt.parent.textContent.endsWith("\n\n");return!(!Ht||!kt)&&J.chain().command(({tr:te})=>(te.delete(dt.pos-2,dt.pos),!0)).exitCode().run()},ArrowDown:({editor:J})=>{if(!this.options.exitOnArrowDown)return!1;const{state:L}=J,{selection:nt,doc:dt}=L,{$from:lt,empty:Ht}=nt;if(!Ht||lt.parent.type!==this.type||lt.parentOffset!==lt.parent.nodeSize-2)return!1;const te=lt.after();return void 0!==te&&!dt.nodeAt(te)&&J.commands.exitCode()}}},addInputRules(){return[(0,E.textblockTypeInputRule)({find:at,type:this.type,getAttributes:J=>({language:J[1]})}),(0,E.textblockTypeInputRule)({find:ht,type:this.type,getAttributes:J=>({language:J[1]})})]},addProseMirrorPlugins(){return[new _t.Sy({key:new _t.H$("codeBlockVSCodeHandler"),props:{handlePaste:(J,L)=>{if(!L.clipboardData||this.editor.isActive(this.type.name))return!1;const nt=L.clipboardData.getData("text/plain"),dt=L.clipboardData.getData("vscode-editor-data"),lt=dt?JSON.parse(dt):void 0,Ht=null==lt?void 0:lt.mode;if(!nt||!Ht)return!1;const{tr:kt}=J.state;return kt.replaceSelectionWith(this.type.create({language:Ht})),kt.setSelection(_t.Bs.near(kt.doc.resolve(Math.max(0,kt.selection.from-2)))),kt.insertText(nt.replace(/\r\n?/g,"\n")),kt.setMeta("paste",!0),J.dispatch(kt),!0}}})]}}),yt=E.Node.create({name:"doc",topNode:!0,content:"block+"}),Nt=a(38480);function Ot(J={}){return new _t.Sy({view:L=>new Ut(L,J)})}class Ut{constructor(L,nt){this.editorView=L,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=nt.width||1,this.color=nt.color||"black",this.class=nt.class,this.handlers=["dragover","dragend","drop","dragleave"].map(dt=>{let lt=Ht=>{this[dt](Ht)};return L.dom.addEventListener(dt,lt),{name:dt,handler:lt}})}destroy(){this.handlers.forEach(({name:L,handler:nt})=>this.editorView.dom.removeEventListener(L,nt))}update(L,nt){null!=this.cursorPos&&nt.doc!=L.state.doc&&(this.cursorPos>L.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(L){L!=this.cursorPos&&(this.cursorPos=L,null==L?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let nt,L=this.editorView.state.doc.resolve(this.cursorPos);if(!L.parent.inlineContent){let kt=L.nodeBefore,te=L.nodeAfter;if(kt||te){let ce=this.editorView.nodeDOM(this.cursorPos-(kt?kt.nodeSize:0));if(ce){let he=ce.getBoundingClientRect(),ge=kt?he.bottom:he.top;kt&&te&&(ge=(ge+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),nt={left:he.left,right:he.right,top:ge-this.width/2,bottom:ge+this.width/2}}}}if(!nt){let kt=this.editorView.coordsAtPos(this.cursorPos);nt={left:kt.left-this.width/2,right:kt.left+this.width/2,top:kt.top,bottom:kt.bottom}}let lt,Ht,dt=this.editorView.dom.offsetParent;if(this.element||(this.element=dt.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!dt||dt==document.body&&"static"==getComputedStyle(dt).position)lt=-pageXOffset,Ht=-pageYOffset;else{let kt=dt.getBoundingClientRect();lt=kt.left-dt.scrollLeft,Ht=kt.top-dt.scrollTop}this.element.style.left=nt.left-lt+"px",this.element.style.top=nt.top-Ht+"px",this.element.style.width=nt.right-nt.left+"px",this.element.style.height=nt.bottom-nt.top+"px"}scheduleRemoval(L){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),L)}dragover(L){if(!this.editorView.editable)return;let nt=this.editorView.posAtCoords({left:L.clientX,top:L.clientY}),dt=nt&&nt.inside>=0&&this.editorView.state.doc.nodeAt(nt.inside),lt=dt&&dt.type.spec.disableDropCursor,Ht="function"==typeof lt?lt(this.editorView,nt,L):lt;if(nt&&!Ht){let kt=nt.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(kt=(0,Nt.nj)(this.editorView.state.doc,kt,this.editorView.dragging.slice),null==kt))return this.setCursor(null);this.setCursor(kt),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(L){(L.target==this.editorView.dom||!this.editorView.dom.contains(L.relatedTarget))&&this.setCursor(null)}}var jt=E.Extension.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[Ot(this.options)]}}),gt=a(70768),O=a(77346),Z=a(43594);class j extends _t.Y1{constructor(L){super(L,L)}map(L,nt){let dt=L.resolve(nt.map(this.head));return j.valid(dt)?new j(dt):_t.Y1.near(dt)}content(){return O.p2.empty}eq(L){return L instanceof j&&L.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(L,nt){if("number"!=typeof nt.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new j(L.resolve(nt.pos))}getBookmark(){return new bt(this.anchor)}static valid(L){let nt=L.parent;if(nt.isTextblock||!function(J){for(let L=J.depth;L>=0;L--){let nt=J.index(L),dt=J.node(L);if(0!=nt)for(let lt=dt.child(nt-1);;lt=lt.lastChild){if(0==lt.childCount&&!lt.inlineContent||lt.isAtom||lt.type.spec.isolating)return!0;if(lt.inlineContent)return!1}else if(dt.type.spec.isolating)return!0}return!0}(L)||!function(J){for(let L=J.depth;L>=0;L--){let nt=J.indexAfter(L),dt=J.node(L);if(nt!=dt.childCount)for(let lt=dt.child(nt);;lt=lt.firstChild){if(0==lt.childCount&&!lt.inlineContent||lt.isAtom||lt.type.spec.isolating)return!0;if(lt.inlineContent)return!1}else if(dt.type.spec.isolating)return!0}return!0}(L))return!1;let dt=nt.type.spec.allowGapCursor;if(null!=dt)return dt;let lt=nt.contentMatchAt(L.index()).defaultType;return lt&&lt.isTextblock}static findGapCursorFrom(L,nt,dt=!1){t:for(;;){if(!dt&&j.valid(L))return L;let lt=L.pos,Ht=null;for(let kt=L.depth;;kt--){let te=L.node(kt);if(nt>0?L.indexAfter(kt)<te.childCount:L.index(kt)>0){Ht=te.child(nt>0?L.indexAfter(kt):L.index(kt)-1);break}if(0==kt)return null;lt+=nt;let ce=L.doc.resolve(lt);if(j.valid(ce))return ce}for(;;){let kt=nt>0?Ht.firstChild:Ht.lastChild;if(!kt){if(Ht.isAtom&&!Ht.isText&&!_t.qv.isSelectable(Ht)){L=L.doc.resolve(lt+Ht.nodeSize*nt),dt=!1;continue t}break}Ht=kt,lt+=nt;let te=L.doc.resolve(lt);if(j.valid(te))return te}return null}}}j.prototype.visible=!1,j.findFrom=j.findGapCursorFrom,_t.Y1.jsonID("gapcursor",j);class bt{constructor(L){this.pos=L}map(L){return new bt(L.map(this.pos))}resolve(L){let nt=L.resolve(this.pos);return j.valid(nt)?new j(nt):_t.Y1.near(nt)}}const Kt=(0,gt.$)({ArrowLeft:Zt("horiz",-1),ArrowRight:Zt("horiz",1),ArrowUp:Zt("vert",-1),ArrowDown:Zt("vert",1)});function Zt(J,L){const nt="vert"==J?L>0?"down":"up":L>0?"right":"left";return function(dt,lt,Ht){let kt=dt.selection,te=L>0?kt.$to:kt.$from,ce=kt.empty;if(kt instanceof _t.Bs){if(!Ht.endOfTextblock(nt)||0==te.depth)return!1;ce=!1,te=dt.doc.resolve(L>0?te.after():te.before())}let he=j.findGapCursorFrom(te,L,ce);return!!he&&(lt&&lt(dt.tr.setSelection(new j(he))),!0)}}function le(J,L,nt){if(!J||!J.editable)return!1;let dt=J.state.doc.resolve(L);if(!j.valid(dt))return!1;let lt=J.posAtCoords({left:nt.clientX,top:nt.clientY});return!(lt&&lt.inside>-1&&_t.qv.isSelectable(J.state.doc.nodeAt(lt.inside))||(J.dispatch(J.state.tr.setSelection(new j(dt))),0))}function Gt(J,L){if("insertCompositionText"!=L.inputType||!(J.state.selection instanceof j))return!1;let{$from:nt}=J.state.selection,dt=nt.parent.contentMatchAt(nt.index()).findWrapping(J.state.schema.nodes.text);if(!dt)return!1;let lt=O.HY.empty;for(let kt=dt.length-1;kt>=0;kt--)lt=O.HY.from(dt[kt].createAndFill(null,lt));let Ht=J.state.tr.replace(nt.pos,nt.pos,new O.p2(lt,0,0));return Ht.setSelection(_t.Bs.near(Ht.doc.resolve(nt.pos+1))),J.dispatch(Ht),!1}function De(J){if(!(J.selection instanceof j))return null;let L=document.createElement("div");return L.className="ProseMirror-gapcursor",Z.EH.create(J.doc,[Z.p.widget(J.selection.head,L,{key:"gapcursor"})])}var Te=E.Extension.create({name:"gapCursor",addProseMirrorPlugins:()=>[new _t.Sy({props:{decorations:De,createSelectionBetween:(J,L,nt)=>L.pos==nt.pos&&j.valid(nt)?new j(nt):null,handleClick:le,handleKeyDown:Kt,handleDOMEvents:{beforeinput:Gt}}})],extendNodeSchema(J){var L;return{allowGapCursor:null!=(L=(0,E.callOrReturn)((0,E.getExtensionField)(J,"allowGapCursor",{name:J.name,options:J.options,storage:J.storage})))?L:null}}}),Ue=E.Node.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:J}){return["br",(0,E.mergeAttributes)(this.options.HTMLAttributes,J)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:J,chain:L,state:nt,editor:dt})=>J.first([()=>J.exitCode(),()=>J.command(()=>{const{selection:lt,storedMarks:Ht}=nt;if(lt.$from.parent.type.spec.isolating)return!1;const{keepMarks:kt}=this.options,{splittableMarks:te}=dt.extensionManager,ce=Ht||lt.$to.parentOffset&&lt.$from.marks();return L().insertContent({type:this.name}).command(({tr:he,dispatch:ge})=>{if(ge&&ce&&kt){const fe=ce.filter(pe=>te.includes(pe.type.name));he.ensureMarks(fe)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Je=E.Node.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(J=>({tag:`h${J}`,attrs:{level:J}}))},renderHTML({node:J,HTMLAttributes:L}){return[`h${this.options.levels.includes(J.attrs.level)?J.attrs.level:this.options.levels[0]}`,(0,E.mergeAttributes)(this.options.HTMLAttributes,L),0]},addCommands(){return{setHeading:J=>({commands:L})=>!!this.options.levels.includes(J.level)&&L.setNode(this.name,J),toggleHeading:J=>({commands:L})=>!!this.options.levels.includes(J.level)&&L.toggleNode(this.name,"paragraph",J)}},addKeyboardShortcuts(){return this.options.levels.reduce((J,L)=>ye(ie({},J),{[`Mod-Alt-${L}`]:()=>this.editor.commands.toggleHeading({level:L})}),{})},addInputRules(){return this.options.levels.map(J=>(0,E.textblockTypeInputRule)({find:new RegExp(`^(#{1,${J}})\\s$`),type:this.type,getAttributes:{level:J}}))}}),Ee=function(){};Ee.prototype.append=function(L){return L.length?(L=Ee.from(L),!this.length&&L||L.length<200&&this.leafAppend(L)||this.length<200&&L.leafPrepend(this)||this.appendInner(L)):this},Ee.prototype.prepend=function(L){return L.length?Ee.from(L).append(this):this},Ee.prototype.appendInner=function(L){return new Fe(this,L)},Ee.prototype.slice=function(L,nt){return void 0===L&&(L=0),void 0===nt&&(nt=this.length),L>=nt?Ee.empty:this.sliceInner(Math.max(0,L),Math.min(this.length,nt))},Ee.prototype.get=function(L){if(!(L<0||L>=this.length))return this.getInner(L)},Ee.prototype.forEach=function(L,nt,dt){void 0===nt&&(nt=0),void 0===dt&&(dt=this.length),nt<=dt?this.forEachInner(L,nt,dt,0):this.forEachInvertedInner(L,nt,dt,0)},Ee.prototype.map=function(L,nt,dt){void 0===nt&&(nt=0),void 0===dt&&(dt=this.length);var lt=[];return this.forEach(function(Ht,kt){return lt.push(L(Ht,kt))},nt,dt),lt},Ee.from=function(L){return L instanceof Ee?L:L&&L.length?new Be(L):Ee.empty};var Be=function(J){function L(dt){J.call(this),this.values=dt}J&&(L.__proto__=J),(L.prototype=Object.create(J&&J.prototype)).constructor=L;var nt={length:{configurable:!0},depth:{configurable:!0}};return L.prototype.flatten=function(){return this.values},L.prototype.sliceInner=function(lt,Ht){return 0==lt&&Ht==this.length?this:new L(this.values.slice(lt,Ht))},L.prototype.getInner=function(lt){return this.values[lt]},L.prototype.forEachInner=function(lt,Ht,kt,te){for(var ce=Ht;ce<kt;ce++)if(!1===lt(this.values[ce],te+ce))return!1},L.prototype.forEachInvertedInner=function(lt,Ht,kt,te){for(var ce=Ht-1;ce>=kt;ce--)if(!1===lt(this.values[ce],te+ce))return!1},L.prototype.leafAppend=function(lt){if(this.length+lt.length<=200)return new L(this.values.concat(lt.flatten()))},L.prototype.leafPrepend=function(lt){if(this.length+lt.length<=200)return new L(lt.flatten().concat(this.values))},nt.length.get=function(){return this.values.length},nt.depth.get=function(){return 0},Object.defineProperties(L.prototype,nt),L}(Ee);Ee.empty=new Be([]);var Fe=function(J){function L(nt,dt){J.call(this),this.left=nt,this.right=dt,this.length=nt.length+dt.length,this.depth=Math.max(nt.depth,dt.depth)+1}return J&&(L.__proto__=J),(L.prototype=Object.create(J&&J.prototype)).constructor=L,L.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},L.prototype.getInner=function(dt){return dt<this.left.length?this.left.get(dt):this.right.get(dt-this.left.length)},L.prototype.forEachInner=function(dt,lt,Ht,kt){var te=this.left.length;if(lt<te&&!1===this.left.forEachInner(dt,lt,Math.min(Ht,te),kt)||Ht>te&&!1===this.right.forEachInner(dt,Math.max(lt-te,0),Math.min(this.length,Ht)-te,kt+te))return!1},L.prototype.forEachInvertedInner=function(dt,lt,Ht,kt){var te=this.left.length;if(lt>te&&!1===this.right.forEachInvertedInner(dt,lt-te,Math.max(Ht,te)-te,kt+te)||Ht<te&&!1===this.left.forEachInvertedInner(dt,Math.min(lt,te),Ht,kt))return!1},L.prototype.sliceInner=function(dt,lt){if(0==dt&&lt==this.length)return this;var Ht=this.left.length;return lt<=Ht?this.left.slice(dt,lt):dt>=Ht?this.right.slice(dt-Ht,lt-Ht):this.left.slice(dt,Ht).append(this.right.slice(0,lt-Ht))},L.prototype.leafAppend=function(dt){var lt=this.right.leafAppend(dt);if(lt)return new L(this.left,lt)},L.prototype.leafPrepend=function(dt){var lt=this.left.leafPrepend(dt);if(lt)return new L(lt,this.right)},L.prototype.appendInner=function(dt){return this.left.depth>=Math.max(this.right.depth,dt.depth)+1?new L(this.left,new L(this.right,dt)):new L(this,dt)},L}(Ee);const Se=Ee;class Me{constructor(L,nt){this.items=L,this.eventCount=nt}popEvent(L,nt){if(0==this.eventCount)return null;let lt,Ht,dt=this.items.length;for(;;dt--)if(this.items.get(dt-1).selection){--dt;break}nt&&(lt=this.remapping(dt,this.items.length),Ht=lt.maps.length);let te,ce,kt=L.tr,he=[],ge=[];return this.items.forEach((fe,pe)=>{if(!fe.step)return lt||(lt=this.remapping(dt,pe+1),Ht=lt.maps.length),Ht--,void ge.push(fe);if(lt){ge.push(new xe(fe.map));let be,ve=fe.step.map(lt.slice(Ht));ve&&kt.maybeStep(ve).doc&&(be=kt.mapping.maps[kt.mapping.maps.length-1],he.push(new xe(be,void 0,void 0,he.length+ge.length))),Ht--,be&&lt.appendMap(be,Ht)}else kt.maybeStep(fe.step);return fe.selection?(te=lt?fe.selection.map(lt.slice(Ht)):fe.selection,ce=new Me(this.items.slice(0,dt).append(ge.reverse().concat(he)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:ce,transform:kt,selection:te}}addTransform(L,nt,dt,lt){let Ht=[],kt=this.eventCount,te=this.items,ce=!lt&&te.length?te.get(te.length-1):null;for(let ge=0;ge<L.steps.length;ge++){let ve,fe=L.steps[ge].invert(L.docs[ge]),pe=new xe(L.mapping.maps[ge],fe,nt);(ve=ce&&ce.merge(pe))&&(pe=ve,ge?Ht.pop():te=te.slice(0,te.length-1)),Ht.push(pe),nt&&(kt++,nt=void 0),lt||(ce=pe)}let he=kt-dt.depth;return he>Ge&&(te=function(J,L){let nt;return J.forEach((dt,lt)=>{if(dt.selection&&0==L--)return nt=lt,!1}),J.slice(nt)}(te,he),kt-=he),new Me(te.append(Ht),kt)}remapping(L,nt){let dt=new Nt.vs;return this.items.forEach((lt,Ht)=>{dt.appendMap(lt.map,null!=lt.mirrorOffset&&Ht-lt.mirrorOffset>=L?dt.maps.length-lt.mirrorOffset:void 0)},L,nt),dt}addMaps(L){return 0==this.eventCount?this:new Me(this.items.append(L.map(nt=>new xe(nt))),this.eventCount)}rebased(L,nt){if(!this.eventCount)return this;let dt=[],lt=Math.max(0,this.items.length-nt),Ht=L.mapping,kt=L.steps.length,te=this.eventCount;this.items.forEach(pe=>{pe.selection&&te--},lt);let ce=nt;this.items.forEach(pe=>{let ve=Ht.getMirror(--ce);if(null==ve)return;kt=Math.min(kt,ve);let be=Ht.maps[ve];if(pe.step){let Le=L.steps[ve].invert(L.docs[ve]),h=pe.selection&&pe.selection.map(Ht.slice(ce+1,ve));h&&te++,dt.push(new xe(be,Le,h))}else dt.push(new xe(be))},lt);let he=[];for(let pe=nt;pe<kt;pe++)he.push(new xe(Ht.maps[pe]));let ge=this.items.slice(0,lt).append(he).append(dt),fe=new Me(ge,te);return fe.emptyItemCount()>500&&(fe=fe.compress(this.items.length-dt.length)),fe}emptyItemCount(){let L=0;return this.items.forEach(nt=>{nt.step||L++}),L}compress(L=this.items.length){let nt=this.remapping(0,L),dt=nt.maps.length,lt=[],Ht=0;return this.items.forEach((kt,te)=>{if(te>=L)lt.push(kt),kt.selection&&Ht++;else if(kt.step){let ce=kt.step.map(nt.slice(dt)),he=ce&&ce.getMap();if(dt--,he&&nt.appendMap(he,dt),ce){let ge=kt.selection&&kt.selection.map(nt.slice(dt));ge&&Ht++;let pe,fe=new xe(he.invert(),ce,ge),ve=lt.length-1;(pe=lt.length&&lt[ve].merge(fe))?lt[ve]=pe:lt.push(fe)}}else kt.map&&dt--},this.items.length,0),new Me(Se.from(lt.reverse()),Ht)}}Me.empty=new Me(Se.empty,0);class xe{constructor(L,nt,dt,lt){this.map=L,this.step=nt,this.selection=dt,this.mirrorOffset=lt}merge(L){if(this.step&&L.step&&!L.selection){let nt=L.step.merge(this.step);if(nt)return new xe(nt.getMap().invert(),nt,this.selection)}}}class ke{constructor(L,nt,dt,lt){this.done=L,this.undone=nt,this.prevRanges=dt,this.prevTime=lt}}const Ge=20;function Ce(J){let L=[];return J.forEach((nt,dt,lt,Ht)=>L.push(lt,Ht)),L}function Oe(J,L){if(!J)return null;let nt=[];for(let dt=0;dt<J.length;dt+=2){let lt=L.map(J[dt],1),Ht=L.map(J[dt+1],-1);lt<=Ht&&nt.push(lt,Ht)}return nt}function Et(J,L,nt,dt){let lt=N(L),Ht=H.get(L).spec.config,kt=(dt?J.undone:J.done).popEvent(L,lt);if(!kt)return;let te=kt.selection.resolve(kt.transform.doc),ce=(dt?J.done:J.undone).addTransform(kt.transform,L.selection.getBookmark(),Ht,lt),he=new ke(dt?ce:kt.remaining,dt?kt.remaining:ce,null,0);nt(kt.transform.setSelection(te).setMeta(H,{redo:dt,historyState:he}).scrollIntoView())}let D=!1,b=null;function N(J){let L=J.plugins;if(b!=L){D=!1,b=L;for(let nt=0;nt<L.length;nt++)if(L[nt].spec.historyPreserveItems){D=!0;break}}return D}const H=new _t.H$("history"),U=new _t.H$("closeHistory");function Tt(J={}){return new _t.Sy({key:H,state:{init:()=>new ke(Me.empty,Me.empty,null,0),apply:(L,nt,dt)=>function(J,L,nt,dt){let Ht,lt=nt.getMeta(H);if(lt)return lt.historyState;nt.getMeta(U)&&(J=new ke(J.done,J.undone,null,0));let kt=nt.getMeta("appendedTransaction");if(0==nt.steps.length)return J;if(kt&&kt.getMeta(H))return kt.getMeta(H).redo?new ke(J.done.addTransform(nt,void 0,dt,N(L)),J.undone,Ce(nt.mapping.maps[nt.steps.length-1]),J.prevTime):new ke(J.done,J.undone.addTransform(nt,void 0,dt,N(L)),null,J.prevTime);if(!1===nt.getMeta("addToHistory")||kt&&!1===kt.getMeta("addToHistory"))return(Ht=nt.getMeta("rebased"))?new ke(J.done.rebased(nt,Ht),J.undone.rebased(nt,Ht),Oe(J.prevRanges,nt.mapping),J.prevTime):new ke(J.done.addMaps(nt.mapping.maps),J.undone.addMaps(nt.mapping.maps),Oe(J.prevRanges,nt.mapping),J.prevTime);{let te=0==J.prevTime||!kt&&(J.prevTime<(nt.time||0)-dt.newGroupDelay||!function(J,L){if(!L)return!1;if(!J.docChanged)return!0;let nt=!1;return J.mapping.maps[0].forEach((dt,lt)=>{for(let Ht=0;Ht<L.length;Ht+=2)dt<=L[Ht+1]&&lt>=L[Ht]&&(nt=!0)}),nt}(nt,J.prevRanges)),ce=kt?Oe(J.prevRanges,nt.mapping):Ce(nt.mapping.maps[nt.steps.length-1]);return new ke(J.done.addTransform(nt,te?L.selection.getBookmark():void 0,dt,N(L)),Me.empty,ce,nt.time)}}(nt,dt,L,J)},config:J={depth:J.depth||100,newGroupDelay:J.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(L,nt){let dt=nt.inputType,lt="historyUndo"==dt?St:"historyRedo"==dt?B:null;return!!lt&&(nt.preventDefault(),lt(L.state,L.dispatch))}}}})}const St=(J,L)=>{let nt=H.getState(J);return!(!nt||0==nt.done.eventCount||(L&&Et(nt,J,L,!1),0))},B=(J,L)=>{let nt=H.getState(J);return!(!nt||0==nt.undone.eventCount||(L&&Et(nt,J,L,!0),0))};var g=E.Extension.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:J,dispatch:L})=>St(J,L),redo:()=>({state:J,dispatch:L})=>B(J,L)}),addProseMirrorPlugins(){return[Tt(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),k=E.Node.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:J}){return["hr",(0,E.mergeAttributes)(this.options.HTMLAttributes,J)]},addCommands(){return{setHorizontalRule:()=>({chain:J})=>J().insertContent({type:this.name}).command(({tr:L,dispatch:nt})=>{var dt;if(nt){const{$to:lt}=L.selection,Ht=lt.end();if(lt.nodeAfter)L.setSelection(_t.Bs.create(L.doc,lt.pos));else{const kt=null==(dt=lt.parent.type.contentMatch.defaultType)?void 0:dt.create();kt&&(L.insert(Ht,kt),L.setSelection(_t.Bs.create(L.doc,Ht)))}L.scrollIntoView()}return!0}).run()}},addInputRules(){return[(0,E.nodeInputRule)({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),ct=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,Ft=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,ae=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,de=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,He=E.Mark.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:J=>"normal"!==J.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:J}){return["em",(0,E.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{setItalic:()=>({commands:J})=>J.setMark(this.name),toggleItalic:()=>({commands:J})=>J.toggleMark(this.name),unsetItalic:()=>({commands:J})=>J.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,E.markInputRule)({find:ct,type:this.type}),(0,E.markInputRule)({find:ae,type:this.type})]},addPasteRules(){return[(0,E.markPasteRule)({find:Ft,type:this.type}),(0,E.markPasteRule)({find:de,type:this.type})]}}),Qe=E.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:J}){return["li",(0,E.mergeAttributes)(this.options.HTMLAttributes,J),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),an=/^(\d+)\.\s$/,dn=E.Node.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:J=>J.hasAttribute("start")?parseInt(J.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:J}){const dt=J,{start:L}=dt,nt=Qo(dt,["start"]);return 1===L?["ol",(0,E.mergeAttributes)(this.options.HTMLAttributes,nt),0]:["ol",(0,E.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{toggleOrderedList:()=>({commands:J})=>J.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[(0,E.wrappingInputRule)({find:an,type:this.type,getAttributes:J=>({start:+J[1]}),joinPredicate:(J,L)=>L.childCount+L.attrs.start===+J[1]})]}}),rn=E.Node.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:J}){return["p",(0,E.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{setParagraph:()=>({commands:J})=>J.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),hn=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,Lt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,wt=E.Mark.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:J=>!!J.includes("line-through")&&{}}],renderHTML({HTMLAttributes:J}){return["s",(0,E.mergeAttributes)(this.options.HTMLAttributes,J),0]},addCommands(){return{setStrike:()=>({commands:J})=>J.setMark(this.name),toggleStrike:()=>({commands:J})=>J.toggleMark(this.name),unsetStrike:()=>({commands:J})=>J.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,E.markInputRule)({find:hn,type:this.type})]},addPasteRules(){return[(0,E.markPasteRule)({find:Lt,type:this.type})]}}),Jt=E.Node.create({name:"text",group:"inline"});const oe=E.Extension.create({name:"starterKit",addExtensions(){var J,L,nt,dt,lt,Ht,kt,te,ce,he,ge,fe,pe,ve,be,Le,h,C,S,x,R,z,V,st,G,rt,It,Rt,Vt,Qt,se,me,_e,Xe,cn,nn;const Ae=[];return!1!==(null===(J=this.options)||void 0===J?void 0:J.blockquote)&&Ae.push(T.configure(null===(L=this.options)||void 0===L?void 0:L.blockquote)),!1!==(null===(nt=this.options)||void 0===nt?void 0:nt.bold)&&Ae.push(q.configure(null===(dt=this.options)||void 0===dt?void 0:dt.bold)),!1!==(null===(lt=this.options)||void 0===lt?void 0:lt.bulletList)&&Ae.push(X.configure(null===(Ht=this.options)||void 0===Ht?void 0:Ht.bulletList)),!1!==(null===(kt=this.options)||void 0===kt?void 0:kt.code)&&Ae.push(zt.configure(null===(te=this.options)||void 0===te?void 0:te.code)),!1!==(null===(ce=this.options)||void 0===ce?void 0:ce.codeBlock)&&Ae.push($.configure(null===(he=this.options)||void 0===he?void 0:he.codeBlock)),!1!==(null===(ge=this.options)||void 0===ge?void 0:ge.document)&&Ae.push(yt.configure(null===(fe=this.options)||void 0===fe?void 0:fe.document)),!1!==(null===(pe=this.options)||void 0===pe?void 0:pe.dropcursor)&&Ae.push(jt.configure(null===(ve=this.options)||void 0===ve?void 0:ve.dropcursor)),!1!==(null===(be=this.options)||void 0===be?void 0:be.gapcursor)&&Ae.push(Te.configure(null===(Le=this.options)||void 0===Le?void 0:Le.gapcursor)),!1!==(null===(h=this.options)||void 0===h?void 0:h.hardBreak)&&Ae.push(Ue.configure(null===(C=this.options)||void 0===C?void 0:C.hardBreak)),!1!==(null===(S=this.options)||void 0===S?void 0:S.heading)&&Ae.push(Je.configure(null===(x=this.options)||void 0===x?void 0:x.heading)),!1!==(null===(R=this.options)||void 0===R?void 0:R.history)&&Ae.push(g.configure(null===(z=this.options)||void 0===z?void 0:z.history)),!1!==(null===(V=this.options)||void 0===V?void 0:V.horizontalRule)&&Ae.push(k.configure(null===(st=this.options)||void 0===st?void 0:st.horizontalRule)),!1!==(null===(G=this.options)||void 0===G?void 0:G.italic)&&Ae.push(He.configure(null===(rt=this.options)||void 0===rt?void 0:rt.italic)),!1!==(null===(It=this.options)||void 0===It?void 0:It.listItem)&&Ae.push(Qe.configure(null===(Rt=this.options)||void 0===Rt?void 0:Rt.listItem)),!1!==(null===(Vt=this.options)||void 0===Vt?void 0:Vt.orderedList)&&Ae.push(dn.configure(null===(Qt=this.options)||void 0===Qt?void 0:Qt.orderedList)),!1!==(null===(se=this.options)||void 0===se?void 0:se.paragraph)&&Ae.push(rn.configure(null===(me=this.options)||void 0===me?void 0:me.paragraph)),!1!==(null===(_e=this.options)||void 0===_e?void 0:_e.strike)&&Ae.push(wt.configure(null===(Xe=this.options)||void 0===Xe?void 0:Xe.strike)),!1!==(null===(cn=this.options)||void 0===cn?void 0:cn.text)&&Ae.push(Jt.configure(null===(nn=this.options)||void 0===nn?void 0:nn.text)),Ae}})},51919:(ne,Mt,a)=>{a.r(Mt),a.d(Mt,{TableCellBackground:()=>r});const r=a(12867).Extension.create({addGlobalAttributes:()=>[{types:["tableCell","tableHeader"],attributes:{background:{default:null,renderHTML:({background:T})=>T?{style:`background: ${T}`}:null,parseHTML:({style:T})=>T.background,keepOnSplit:!1}}}],addCommands:()=>({setCellBackground:T=>({chain:y})=>y().updateAttributes("tableCell",{background:T}).updateAttributes("tableHeader",{background:T}).run(),unsetCellBackground:()=>({chain:T})=>T().updateAttributes("tableCell",{background:null}).updateAttributes("tableHeader",{background:null}).run()})})},86624:(ne,Mt,a)=>{a.r(Mt),a.d(Mt,{TuiTable:()=>Le});var F,Y,E=a(12867),r=a(62463),T=a(77346),y=a(43594),p=a(70768),it=a(38480);if("undefined"!=typeof WeakMap){let h=new WeakMap;F=C=>h.get(C),Y=(C,S)=>(h.set(C,S),S)}else{const h=[],C=10;let S=0;F=x=>{for(let R=0;R<h.length;R+=2)if(h[R]==x)return h[R+1]},Y=(x,R)=>(S==C&&(S=0),h[S++]=x,h[S++]=R)}var q=class{constructor(h,C,S,x){this.width=h,this.height=C,this.map=S,this.problems=x}findCell(h){for(let C=0;C<this.map.length;C++){const S=this.map[C];if(S!=h)continue;const x=C%this.width,R=C/this.width|0;let z=x+1,V=R+1;for(let st=1;z<this.width&&this.map[C+st]==S;st++)z++;for(let st=1;V<this.height&&this.map[C+this.width*st]==S;st++)V++;return{left:x,top:R,right:z,bottom:V}}throw new RangeError(`No cell with offset ${h} found`)}colCount(h){for(let C=0;C<this.map.length;C++)if(this.map[C]==h)return C%this.width;throw new RangeError(`No cell with offset ${h} found`)}nextCell(h,C,S){const{left:x,right:R,top:z,bottom:V}=this.findCell(h);return"horiz"==C?(S<0?0==x:R==this.width)?null:this.map[z*this.width+(S<0?x-1:R)]:(S<0?0==z:V==this.height)?null:this.map[x+this.width*(S<0?z-1:V)]}rectBetween(h,C){const{left:S,right:x,top:R,bottom:z}=this.findCell(h),{left:V,right:st,top:G,bottom:rt}=this.findCell(C);return{left:Math.min(S,V),top:Math.min(R,G),right:Math.max(x,st),bottom:Math.max(z,rt)}}cellsInRect(h){const C=[],S={};for(let x=h.top;x<h.bottom;x++)for(let R=h.left;R<h.right;R++){const z=x*this.width+R,V=this.map[z];S[V]||(S[V]=!0,!(R==h.left&&R&&this.map[z-1]==V||x==h.top&&x&&this.map[z-this.width]==V)&&C.push(V))}return C}positionAt(h,C,S){for(let x=0,R=0;;x++){const z=R+S.child(x).nodeSize;if(x==h){let V=C+h*this.width;const st=(h+1)*this.width;for(;V<st&&this.map[V]<R;)V++;return V==st?z-1:this.map[V]}R=z}}static get(h){return F(h)||Y(h,function(h){if("table"!=h.type.spec.tableRole)throw new RangeError("Not a table node: "+h.type.name);const C=function(h){let C=-1,S=!1;for(let x=0;x<h.childCount;x++){const R=h.child(x);let z=0;if(S)for(let V=0;V<x;V++){const st=h.child(V);for(let G=0;G<st.childCount;G++){const rt=st.child(G);V+rt.attrs.rowspan>x&&(z+=rt.attrs.colspan)}}for(let V=0;V<R.childCount;V++){const st=R.child(V);z+=st.attrs.colspan,st.attrs.rowspan>1&&(S=!0)}-1==C?C=z:C!=z&&(C=Math.max(C,z))}return C}(h),S=h.childCount,x=[];let R=0,z=null;const V=[];for(let rt=0,It=C*S;rt<It;rt++)x[rt]=0;for(let rt=0,It=0;rt<S;rt++){const Rt=h.child(rt);It++;for(let se=0;;se++){for(;R<x.length&&0!=x[R];)R++;if(se==Rt.childCount)break;const me=Rt.child(se),{colspan:_e,rowspan:Xe,colwidth:cn}=me.attrs;for(let nn=0;nn<Xe;nn++){if(nn+rt>=S){(z||(z=[])).push({type:"overlong_rowspan",pos:It,n:Xe-nn});break}const Ae=R+nn*C;for(let un=0;un<_e;un++){0==x[Ae+un]?x[Ae+un]=It:(z||(z=[])).push({type:"collision",row:rt,pos:It,n:_e-un});const Tn=cn&&cn[un];if(Tn){const vn=(Ae+un)%C*2,ze=V[vn];null==ze||ze!=Tn&&1==V[vn+1]?(V[vn]=Tn,V[vn+1]=1):ze==Tn&&V[vn+1]++}}}R+=_e,It+=me.nodeSize}const Vt=(rt+1)*C;let Qt=0;for(;R<Vt;)0==x[R++]&&Qt++;Qt&&(z||(z=[])).push({type:"missing",row:rt,n:Qt}),It++}const st=new q(C,S,x,z);let G=!1;for(let rt=0;!G&&rt<V.length;rt+=2)null!=V[rt]&&V[rt+1]<S&&(G=!0);return G&&function(h,C,S){h.problems||(h.problems=[]);const x={};for(let R=0;R<h.map.length;R++){const z=h.map[R];if(x[z])continue;x[z]=!0;const V=S.nodeAt(z);if(!V)throw new RangeError(`No cell with offset ${z} found`);let st=null;const G=V.attrs;for(let rt=0;rt<G.colspan;rt++){const Rt=C[(R+rt)%h.width*2];null!=Rt&&(!G.colwidth||G.colwidth[rt]!=Rt)&&((st||(st=Ct(G)))[rt]=Rt)}st&&h.problems.unshift({type:"colwidth mismatch",pos:z,colwidth:st})}}(st,V,h),st}(h))}};function Ct(h){if(h.colwidth)return h.colwidth.slice();const C=[];for(let S=0;S<h.colspan;S++)C.push(0);return C}function At(h){let C=h.cached.tableNodeTypes;if(!C){C=h.cached.tableNodeTypes={};for(const S in h.nodes){const x=h.nodes[S],R=x.spec.tableRole;R&&(C[R]=x)}}return C}var _t=new r.H$("selectingCells");function at(h){for(let C=h.depth-1;C>0;C--)if("row"==h.node(C).type.spec.tableRole)return h.node(0).resolve(h.before(C+1));return null}function $(h){const C=h.selection.$head;for(let S=C.depth;S>0;S--)if("row"==C.node(S).type.spec.tableRole)return!0;return!1}function xt(h){const C=h.selection;if("$anchorCell"in C&&C.$anchorCell)return C.$anchorCell.pos>C.$headCell.pos?C.$anchorCell:C.$headCell;if("node"in C&&C.node&&"cell"==C.node.type.spec.tableRole)return C.$anchor;const S=at(C.$head)||function(h){for(let C=h.nodeAfter,S=h.pos;C;C=C.firstChild,S++){const x=C.type.spec.tableRole;if("cell"==x||"header_cell"==x)return h.doc.resolve(S)}for(let C=h.nodeBefore,S=h.pos;C;C=C.lastChild,S--){const x=C.type.spec.tableRole;if("cell"==x||"header_cell"==x)return h.doc.resolve(S-C.nodeSize)}}(C.$head);if(S)return S;throw new RangeError(`No cell found around position ${C.head}`)}function Bt(h){return"row"==h.parent.type.spec.tableRole&&!!h.nodeAfter}function Ot(h,C){return h.depth==C.depth&&h.pos>=C.start(-1)&&h.pos<=C.end(-1)}function qt(h,C,S){const x=h.node(-1),R=q.get(x),z=h.start(-1),V=R.nextCell(h.pos-z,C,S);return null==V?null:h.node(0).resolve(z+V)}function gt(h,C,S=1){const x=ye(ie({},h),{colspan:h.colspan-S});return x.colwidth&&(x.colwidth=x.colwidth.slice(),x.colwidth.splice(C,S),x.colwidth.some(R=>R>0)||(x.colwidth=null)),x}function O(h,C,S=1){const x=ye(ie({},h),{colspan:h.colspan+S});if(x.colwidth){x.colwidth=x.colwidth.slice();for(let R=0;R<S;R++)x.colwidth.splice(C,0,0)}return x}var j=class extends r.Y1{constructor(h,C=h){const S=h.node(-1),x=q.get(S),R=h.start(-1),z=x.rectBetween(h.pos-R,C.pos-R),V=h.node(0),st=x.cellsInRect(z).filter(rt=>rt!=C.pos-R);st.unshift(C.pos-R);const G=st.map(rt=>{const It=S.nodeAt(rt);if(!It)throw RangeError(`No cell with offset ${rt} found`);const Rt=R+rt+1;return new r.xm(V.resolve(Rt),V.resolve(Rt+It.content.size))});super(G[0].$from,G[0].$to,G),this.$anchorCell=h,this.$headCell=C}map(h,C){const S=h.resolve(C.map(this.$anchorCell.pos)),x=h.resolve(C.map(this.$headCell.pos));if(Bt(S)&&Bt(x)&&Ot(S,x)){const R=this.$anchorCell.node(-1)!=S.node(-1);return R&&this.isRowSelection()?j.rowSelection(S,x):R&&this.isColSelection()?j.colSelection(S,x):new j(S,x)}return r.Bs.between(S,x)}content(){const h=this.$anchorCell.node(-1),C=q.get(h),S=this.$anchorCell.start(-1),x=C.rectBetween(this.$anchorCell.pos-S,this.$headCell.pos-S),R={},z=[];for(let st=x.top;st<x.bottom;st++){const G=[];for(let rt=st*C.width+x.left,It=x.left;It<x.right;It++,rt++){const Rt=C.map[rt];if(R[Rt])continue;R[Rt]=!0;const Vt=C.findCell(Rt);let Qt=h.nodeAt(Rt);if(!Qt)throw RangeError(`No cell with offset ${Rt} found`);const se=x.left-Vt.left,me=Vt.right-x.right;if(se>0||me>0){let _e=Qt.attrs;if(se>0&&(_e=gt(_e,0,se)),me>0&&(_e=gt(_e,_e.colspan-me,me)),Vt.left<x.left){if(Qt=Qt.type.createAndFill(_e),!Qt)throw RangeError(`Could not create cell with attrs ${JSON.stringify(_e)}`)}else Qt=Qt.type.create(_e,Qt.content)}if(Vt.top<x.top||Vt.bottom>x.bottom){const _e=ye(ie({},Qt.attrs),{rowspan:Math.min(Vt.bottom,x.bottom)-Math.max(Vt.top,x.top)});Qt=Vt.top<x.top?Qt.type.createAndFill(_e):Qt.type.create(_e,Qt.content)}G.push(Qt)}z.push(h.child(st).copy(T.HY.from(G)))}const V=this.isColSelection()&&this.isRowSelection()?h:z;return new T.p2(T.HY.from(V),1,1)}replace(h,C=T.p2.empty){const S=h.steps.length,x=this.ranges;for(let z=0;z<x.length;z++){const{$from:V,$to:st}=x[z],G=h.mapping.slice(S);h.replace(G.map(V.pos),G.map(st.pos),z?T.p2.empty:C)}const R=r.Y1.findFrom(h.doc.resolve(h.mapping.slice(S).map(this.to)),-1);R&&h.setSelection(R)}replaceWith(h,C){this.replace(h,new T.p2(T.HY.from(C),0,0))}forEachCell(h){const C=this.$anchorCell.node(-1),S=q.get(C),x=this.$anchorCell.start(-1),R=S.cellsInRect(S.rectBetween(this.$anchorCell.pos-x,this.$headCell.pos-x));for(let z=0;z<R.length;z++)h(C.nodeAt(R[z]),x+R[z])}isColSelection(){const h=this.$anchorCell.index(-1),C=this.$headCell.index(-1);return!(Math.min(h,C)>0)&&Math.max(h+this.$anchorCell.nodeAfter.attrs.rowspan,C+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(h,C=h){const S=h.node(-1),x=q.get(S),R=h.start(-1),z=x.findCell(h.pos-R),V=x.findCell(C.pos-R),st=h.node(0);return z.top<=V.top?(z.top>0&&(h=st.resolve(R+x.map[z.left])),V.bottom<x.height&&(C=st.resolve(R+x.map[x.width*(x.height-1)+V.right-1]))):(V.top>0&&(C=st.resolve(R+x.map[V.left])),z.bottom<x.height&&(h=st.resolve(R+x.map[x.width*(x.height-1)+z.right-1]))),new j(h,C)}isRowSelection(){const h=this.$anchorCell.node(-1),C=q.get(h),S=this.$anchorCell.start(-1),x=C.colCount(this.$anchorCell.pos-S),R=C.colCount(this.$headCell.pos-S);return!(Math.min(x,R)>0)&&Math.max(x+this.$anchorCell.nodeAfter.attrs.colspan,R+this.$headCell.nodeAfter.attrs.colspan)==C.width}eq(h){return h instanceof j&&h.$anchorCell.pos==this.$anchorCell.pos&&h.$headCell.pos==this.$headCell.pos}static rowSelection(h,C=h){const S=h.node(-1),x=q.get(S),R=h.start(-1),z=x.findCell(h.pos-R),V=x.findCell(C.pos-R),st=h.node(0);return z.left<=V.left?(z.left>0&&(h=st.resolve(R+x.map[z.top*x.width])),V.right<x.width&&(C=st.resolve(R+x.map[x.width*(V.top+1)-1]))):(V.left>0&&(C=st.resolve(R+x.map[V.top*x.width])),z.right<x.width&&(h=st.resolve(R+x.map[x.width*(z.top+1)-1]))),new j(h,C)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(h,C){return new j(h.resolve(C.anchor),h.resolve(C.head))}static create(h,C,S=C){return new j(h.resolve(C),h.resolve(S))}getBookmark(){return new bt(this.$anchorCell.pos,this.$headCell.pos)}};j.prototype.visible=!1,r.Y1.jsonID("cell",j);var bt=class{constructor(h,C){this.anchor=h,this.head=C}map(h){return new bt(h.map(this.anchor),h.map(this.head))}resolve(h){const C=h.resolve(this.anchor),S=h.resolve(this.head);return"row"==C.parent.type.spec.tableRole&&"row"==S.parent.type.spec.tableRole&&C.index()<C.parent.childCount&&S.index()<S.parent.childCount&&Ot(C,S)?new j(C,S):r.Y1.near(S,1)}};function Q(h){if(!(h.selection instanceof j))return null;const C=[];return h.selection.forEachCell((S,x)=>{C.push(y.p.node(x,x+S.nodeSize,{class:"selectedCell"}))}),y.EH.create(h.doc,C)}var Zt=new r.H$("fix-tables");function le(h,C,S,x){const R=h.childCount,z=C.childCount;t:for(let V=0,st=0;V<z;V++){const G=C.child(V);for(let rt=st,It=Math.min(R,V+3);rt<It;rt++)if(h.child(rt)==G){st=rt+1,S+=G.nodeSize;continue t}x(G,S),st<R&&h.child(st).sameMarkup(G)?le(h.child(st),G,S+1,x):G.nodesBetween(0,G.content.size,x,S+1),S+=G.nodeSize}}function Gt(h,C){let S;const x=(R,z)=>{"table"==R.type.spec.tableRole&&(S=function(h,C,S,x){const R=q.get(C);if(!R.problems)return x;x||(x=h.tr);const z=[];for(let G=0;G<R.height;G++)z.push(0);for(let G=0;G<R.problems.length;G++){const rt=R.problems[G];if("collision"==rt.type){const It=C.nodeAt(rt.pos);if(!It)continue;const Rt=It.attrs;for(let Vt=0;Vt<Rt.rowspan;Vt++)z[rt.row+Vt]+=rt.n;x.setNodeMarkup(x.mapping.map(S+1+rt.pos),null,gt(Rt,Rt.colspan-rt.n,rt.n))}else if("missing"==rt.type)z[rt.row]+=rt.n;else if("overlong_rowspan"==rt.type){const It=C.nodeAt(rt.pos);if(!It)continue;x.setNodeMarkup(x.mapping.map(S+1+rt.pos),null,ye(ie({},It.attrs),{rowspan:It.attrs.rowspan-rt.n}))}else if("colwidth mismatch"==rt.type){const It=C.nodeAt(rt.pos);if(!It)continue;x.setNodeMarkup(x.mapping.map(S+1+rt.pos),null,ye(ie({},It.attrs),{colwidth:rt.colwidth}))}}let V,st;for(let G=0;G<z.length;G++)z[G]&&(null==V&&(V=G),st=G);for(let G=0,rt=S+1;G<R.height;G++){const It=C.child(G),Rt=rt+It.nodeSize,Vt=z[G];if(Vt>0){let Qt="cell";It.firstChild&&(Qt=It.firstChild.type.spec.tableRole);const se=[];for(let _e=0;_e<Vt;_e++){const Xe=At(h.schema)[Qt].createAndFill();Xe&&se.push(Xe)}x.insert(x.mapping.map(0!=G&&V!=G-1||st!=G?Rt-1:rt+1),se)}rt=Rt}return x.setMeta(Zt,{fixTables:!0})}(h,R,z,S))};return C?C.doc!=h.doc&&le(C.doc,h.doc,0,x):h.doc.descendants(x),S}function Ue(h,C){const S=h.createAndFill();return new it.wx(S).replace(0,S.content.size,C).doc}function Re(h,C,S,x,R,z,V,st){if(0==V||V==C.height)return!1;let G=!1;for(let rt=R;rt<z;rt++){const It=V*C.width+rt,Rt=C.map[It];if(C.map[It-C.width]==Rt){G=!0;const Vt=S.nodeAt(Rt),{top:Qt,left:se}=C.findCell(Rt);h.setNodeMarkup(h.mapping.slice(st).map(Rt+x),null,ye(ie({},Vt.attrs),{rowspan:V-Qt})),h.insert(h.mapping.slice(st).map(C.positionAt(V,se,S)),Vt.type.createAndFill(ye(ie({},Vt.attrs),{rowspan:Qt+Vt.attrs.rowspan-V}))),rt+=Vt.attrs.colspan-1}}return G}function We(h,C,S,x,R,z,V,st){if(0==V||V==C.width)return!1;let G=!1;for(let rt=R;rt<z;rt++){const It=rt*C.width+V,Rt=C.map[It];if(C.map[It-1]==Rt){G=!0;const Vt=S.nodeAt(Rt),Qt=C.colCount(Rt),se=h.mapping.slice(st).map(Rt+x);h.setNodeMarkup(se,null,gt(Vt.attrs,V-Qt,Vt.attrs.colspan-(V-Qt))),h.insert(se+Vt.nodeSize,Vt.type.createAndFill(gt(Vt.attrs,0,V-Qt))),rt+=Vt.attrs.rowspan-1}}return G}function Ee(h,C,S,x,R){let z=S?h.doc.nodeAt(S-1):h.doc;if(!z)throw new Error("No table found");let V=q.get(z);const{top:st,left:G}=x,rt=G+R.width,It=st+R.height,Rt=h.tr;let Vt=0;function Qt(){if(z=S?Rt.doc.nodeAt(S-1):Rt.doc,!z)throw new Error("No table found");V=q.get(z),Vt=Rt.mapping.maps.length}(function(h,C,S,x,R,z,V){const G=At(h.doc.type.schema);let rt,It;if(R>C.width)for(let Rt=0,Vt=0;Rt<C.height;Rt++){const Qt=S.child(Rt);Vt+=Qt.nodeSize;const se=[];let me;me=null==Qt.lastChild||Qt.lastChild.type==G.cell?rt||(rt=G.cell.createAndFill()):It||(It=G.header_cell.createAndFill());for(let _e=C.width;_e<R;_e++)se.push(me);h.insert(h.mapping.slice(V).map(Vt-1+x),se)}if(z>C.height){const Rt=[];for(let se=0,me=(C.height-1)*C.width;se<Math.max(C.width,R);se++){const _e=!(se>=C.width)&&S.nodeAt(C.map[me+se]).type==G.header_cell;Rt.push(_e?It||(It=G.header_cell.createAndFill()):rt||(rt=G.cell.createAndFill()))}const Vt=G.row.create(null,T.HY.from(Rt)),Qt=[];for(let se=C.height;se<z;se++)Qt.push(Vt);h.insert(h.mapping.slice(V).map(x+S.nodeSize-2),Qt)}return!(!rt&&!It)})(Rt,V,z,S,rt,It,Vt)&&Qt(),Re(Rt,V,z,S,G,rt,st,Vt)&&Qt(),Re(Rt,V,z,S,G,rt,It,Vt)&&Qt(),We(Rt,V,z,S,st,It,G,Vt)&&Qt(),We(Rt,V,z,S,st,It,rt,Vt)&&Qt();for(let se=st;se<It;se++){const me=V.positionAt(se,G,z),_e=V.positionAt(se,rt,z);Rt.replace(Rt.mapping.slice(Vt).map(me+S),Rt.mapping.slice(Vt).map(_e+S),new T.p2(R.rows[se-st],0,0))}Qt(),Rt.setSelection(new j(Rt.doc.resolve(S+V.positionAt(st,G,z)),Rt.doc.resolve(S+V.positionAt(It-1,rt-1,z)))),C(Rt)}var Be=(0,p.$)({ArrowLeft:Pe("horiz",-1),ArrowRight:Pe("horiz",1),ArrowUp:Pe("vert",-1),ArrowDown:Pe("vert",1),"Shift-ArrowLeft":Se("horiz",-1),"Shift-ArrowRight":Se("horiz",1),"Shift-ArrowUp":Se("vert",-1),"Shift-ArrowDown":Se("vert",1),Backspace:Ie,"Mod-Backspace":Ie,Delete:Ie,"Mod-Delete":Ie});function Fe(h,C,S){return!S.eq(h.selection)&&(C&&C(h.tr.setSelection(S).scrollIntoView()),!0)}function Pe(h,C){return(S,x,R)=>{if(!R)return!1;const z=S.selection;if(z instanceof j)return Fe(S,x,r.Y1.near(z.$headCell,C));if("horiz"!=h&&!z.empty)return!1;const V=ke(R,h,C);if(null==V)return!1;if("horiz"==h)return Fe(S,x,r.Y1.near(S.doc.resolve(z.head+C),C));{const st=S.doc.resolve(V),G=qt(st,h,C);let rt;return rt=G?r.Y1.near(G,1):C<0?r.Y1.near(S.doc.resolve(st.before(-1)),-1):r.Y1.near(S.doc.resolve(st.after(-1)),1),Fe(S,x,rt)}}}function Se(h,C){return(S,x,R)=>{if(!R)return!1;const z=S.selection;let V;if(z instanceof j)V=z;else{const G=ke(R,h,C);if(null==G)return!1;V=new j(S.doc.resolve(G))}const st=qt(V.$headCell,h,C);return!!st&&Fe(S,x,new j(V.$anchorCell,st))}}function Ie(h,C){const S=h.selection;if(!(S instanceof j))return!1;if(C){const x=h.tr,R=At(h.schema).cell.createAndFill().content;S.forEachCell((z,V)=>{z.content.eq(R)||x.replace(x.mapping.map(V+1),x.mapping.map(V+z.nodeSize-1),new T.p2(R,0,0))}),x.docChanged&&C(x)}return!0}function Me(h,C){const x=at(h.state.doc.resolve(C));return!!x&&(h.dispatch(h.state.tr.setSelection(new j(x))),!0)}function Ve(h,C,S){if(!$(h.state))return!1;let x=function(h){if(!h.size)return null;let{content:C,openStart:S,openEnd:x}=h;for(;1==C.childCount&&(S>0&&x>0||"table"==C.child(0).type.spec.tableRole);)S--,x--,C=C.child(0).content;const R=C.child(0),z=R.type.spec.tableRole,V=R.type.schema,st=[];if("row"==z)for(let G=0;G<C.childCount;G++){let rt=C.child(G).content;const It=G?0:Math.max(0,S-1),Rt=G<C.childCount-1?0:Math.max(0,x-1);(It||Rt)&&(rt=Ue(At(V).row,new T.p2(rt,It,Rt)).content),st.push(rt)}else{if("cell"!=z&&"header_cell"!=z)return null;st.push(S||x?Ue(At(V).row,new T.p2(C,S,x)).content:C)}return function(h,C){const S=[];for(let R=0;R<C.length;R++){const z=C[R];for(let V=z.childCount-1;V>=0;V--){const{rowspan:st,colspan:G}=z.child(V).attrs;for(let rt=R;rt<R+st;rt++)S[rt]=(S[rt]||0)+G}}let x=0;for(let R=0;R<S.length;R++)x=Math.max(x,S[R]);for(let R=0;R<S.length;R++)if(R>=C.length&&C.push(T.HY.empty),S[R]<x){const z=At(h).cell.createAndFill(),V=[];for(let st=S[R];st<x;st++)V.push(z);C[R]=C[R].append(T.HY.from(V))}return{height:C.length,width:x,rows:C}}(V,st)}(S);const R=h.state.selection;if(R instanceof j){x||(x={width:1,height:1,rows:[T.HY.from(Ue(At(h.state.schema).cell,S))]});const z=R.$anchorCell.node(-1),V=R.$anchorCell.start(-1),st=q.get(z).rectBetween(R.$anchorCell.pos-V,R.$headCell.pos-V);return x=function({width:h,height:C,rows:S},x,R){if(h!=x){const z=[],V=[];for(let st=0;st<S.length;st++){const G=S[st],rt=[];for(let It=z[st]||0,Rt=0;It<x;Rt++){let Vt=G.child(Rt%G.childCount);It+Vt.attrs.colspan>x&&(Vt=Vt.type.createChecked(gt(Vt.attrs,Vt.attrs.colspan,It+Vt.attrs.colspan-x),Vt.content)),rt.push(Vt),It+=Vt.attrs.colspan;for(let Qt=1;Qt<Vt.attrs.rowspan;Qt++)z[st+Qt]=(z[st+Qt]||0)+Vt.attrs.colspan}V.push(T.HY.from(rt))}S=V,h=x}if(C!=R){const z=[];for(let V=0,st=0;V<R;V++,st++){const G=[],rt=S[st%C];for(let It=0;It<rt.childCount;It++){let Rt=rt.child(It);V+Rt.attrs.rowspan>R&&(Rt=Rt.type.create(ye(ie({},Rt.attrs),{rowspan:Math.max(1,R-Rt.attrs.rowspan)}),Rt.content)),G.push(Rt)}z.push(T.HY.from(G))}S=z,C=R}return{width:h,height:C,rows:S}}(x,st.right-st.left,st.bottom-st.top),Ee(h.state,h.dispatch,V,st,x),!0}if(x){const z=xt(h.state),V=z.start(-1);return Ee(h.state,h.dispatch,V,q.get(z.node(-1)).findCell(z.pos-V),x),!0}return!1}function xe(h,C){var S;if(C.ctrlKey||C.metaKey)return;const x=Ge(h,C.target);let R;if(C.shiftKey&&h.state.selection instanceof j)z(h.state.selection.$anchorCell,C),C.preventDefault();else if(C.shiftKey&&x&&null!=(R=at(h.state.selection.$anchor))&&(null==(S=Ke(h,C))?void 0:S.pos)!=R.pos)z(R,C),C.preventDefault();else if(!x)return;function z(G,rt){let It=Ke(h,rt);const Rt=null==_t.getState(h.state);if(!It||!Ot(G,It)){if(!Rt)return;It=G}const Vt=new j(G,It);if(Rt||!h.state.selection.eq(Vt)){const Qt=h.state.tr.setSelection(Vt);Rt&&Qt.setMeta(_t,G.pos),h.dispatch(Qt)}}function V(){h.root.removeEventListener("mouseup",V),h.root.removeEventListener("dragstart",V),h.root.removeEventListener("mousemove",st),null!=_t.getState(h.state)&&h.dispatch(h.state.tr.setMeta(_t,-1))}function st(G){const rt=G,It=_t.getState(h.state);let Rt;if(null!=It)Rt=h.state.doc.resolve(It);else if(Ge(h,rt.target)!=x&&(Rt=Ke(h,C),!Rt))return V();Rt&&z(Rt,rt)}h.root.addEventListener("mouseup",V),h.root.addEventListener("dragstart",V),h.root.addEventListener("mousemove",st)}function ke(h,C,S){if(!(h.state.selection instanceof r.Bs))return null;const{$head:x}=h.state.selection;for(let R=x.depth-1;R>=0;R--){const z=x.node(R);if((S<0?x.index(R):x.indexAfter(R))!=(S<0?0:z.childCount))return null;if("cell"==z.type.spec.tableRole||"header_cell"==z.type.spec.tableRole){const st=x.before(R);return h.endOfTextblock("vert"==C?S>0?"down":"up":S>0?"right":"left")?st:null}}return null}function Ge(h,C){for(;C&&C!=h.dom;C=C.parentNode)if("TD"==C.nodeName||"TH"==C.nodeName)return C;return null}function Ke(h,C){const S=h.posAtCoords({left:C.clientX,top:C.clientY});return S&&S?at(h.state.doc.resolve(S.pos)):null}var we=class{constructor(h,C){this.node=h,this.cellMinWidth=C,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Ce(h,this.colgroup,this.table,C),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(h){return h.type==this.node.type&&(this.node=h,Ce(h,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(h){return"attributes"==h.type&&(h.target==this.table||this.colgroup.contains(h.target))}};function Ce(h,C,S,x,R,z){var V;let st=0,G=!0,rt=C.firstChild;const It=h.firstChild;if(It){for(let Rt=0,Vt=0;Rt<It.childCount;Rt++){const{colspan:Qt,colwidth:se}=It.child(Rt).attrs;for(let me=0;me<Qt;me++,Vt++){const _e=R==Vt?z:se&&se[me],Xe=_e?_e+"px":"";st+=_e||x,_e||(G=!1),rt?(rt.style.width!=Xe&&(rt.style.width=Xe),rt=rt.nextSibling):C.appendChild(document.createElement("col")).style.width=Xe}}for(;rt;){const Rt=rt.nextSibling;null==(V=rt.parentNode)||V.removeChild(rt),rt=Rt}G?(S.style.width=st+"px",S.style.minWidth=""):(S.style.width="",S.style.minWidth=st+"px")}}var Oe=new r.H$("tableColumnResizing");function Et({handleWidth:h=5,cellMinWidth:C=25,View:S=we,lastColumnResizable:x=!0}={}){const R=new r.Sy({key:Oe,state:{init:(z,V)=>(R.spec.props.nodeViews[At(V.schema).table.name]=(st,G)=>new S(st,C,G),new D(-1,!1)),apply:(z,V)=>V.apply(z)},props:{attributes:z=>{const V=Oe.getState(z);return V&&V.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(z,V)=>{!function(h,C,S,x,R){const z=Oe.getState(h.state);if(z&&!z.dragging){const V=function(h){for(;h&&"TD"!=h.nodeName&&"TH"!=h.nodeName;)h=h.classList&&h.classList.contains("ProseMirror")?null:h.parentNode;return h}(C.target);let st=-1;if(V){const{left:G,right:rt}=V.getBoundingClientRect();C.clientX-G<=S?st=Tt(h,C,"left"):rt-C.clientX<=S&&(st=Tt(h,C,"right"))}if(st!=z.activeHandle){if(!R&&-1!==st){const G=h.state.doc.resolve(st),rt=G.node(-1),It=q.get(rt),Rt=G.start(-1);if(It.colCount(G.pos-Rt)+G.nodeAfter.attrs.colspan-1==It.width-1)return}B(h,st)}}}(z,V,h,0,x)},mouseleave:z=>{!function(h){const C=Oe.getState(h.state);C&&C.activeHandle>-1&&!C.dragging&&B(h,-1)}(z)},mousedown:(z,V)=>{!function(h,C,S){const x=Oe.getState(h.state);if(!x||-1==x.activeHandle||x.dragging)return!1;const R=h.state.doc.nodeAt(x.activeHandle),z=function(h,C,{colspan:S,colwidth:x}){const R=x&&x[x.length-1];if(R)return R;const z=h.domAtPos(C);let st=z.node.childNodes[z.offset].offsetWidth,G=S;if(x)for(let rt=0;rt<S;rt++)x[rt]&&(st-=x[rt],G--);return st/G}(h,x.activeHandle,R.attrs);function V(G){window.removeEventListener("mouseup",V),window.removeEventListener("mousemove",st);const rt=Oe.getState(h.state);(null==rt?void 0:rt.dragging)&&(function(h,C,S){const x=h.state.doc.resolve(C),R=x.node(-1),z=q.get(R),V=x.start(-1),st=z.colCount(x.pos-V)+x.nodeAfter.attrs.colspan-1,G=h.state.tr;for(let rt=0;rt<z.height;rt++){const It=rt*z.width+st;if(rt&&z.map[It]==z.map[It-z.width])continue;const Rt=z.map[It],Vt=R.nodeAt(Rt).attrs,Qt=1==Vt.colspan?0:st-z.colCount(Rt);if(Vt.colwidth&&Vt.colwidth[Qt]==S)continue;const se=Vt.colwidth?Vt.colwidth.slice():g(Vt.colspan);se[Qt]=S,G.setNodeMarkup(V+Rt,null,ye(ie({},Vt),{colwidth:se}))}G.docChanged&&h.dispatch(G)}(h,rt.activeHandle,St(rt.dragging,G,S)),h.dispatch(h.state.tr.setMeta(Oe,{setDragging:null})))}function st(G){if(!G.which)return V(G);const rt=Oe.getState(h.state);if(rt&&rt.dragging){const It=St(rt.dragging,G,S);!function(h,C,S,x){const R=h.state.doc.resolve(C),z=R.node(-1),V=R.start(-1),st=q.get(z).colCount(R.pos-V)+R.nodeAfter.attrs.colspan-1;let G=h.domAtPos(R.start(-1)).node;for(;G&&"TABLE"!=G.nodeName;)G=G.parentNode;!G||Ce(z,G.firstChild,G,x,st,S)}(h,rt.activeHandle,It,S)}}h.dispatch(h.state.tr.setMeta(Oe,{setDragging:{startX:C.clientX,startWidth:z}})),window.addEventListener("mouseup",V),window.addEventListener("mousemove",st),C.preventDefault()}(z,V,C)}},decorations:z=>{const V=Oe.getState(z);if(V&&V.activeHandle>-1)return function(h,C){const S=[],x=h.doc.resolve(C),R=x.node(-1);if(!R)return y.EH.empty;const z=q.get(R),V=x.start(-1),st=z.colCount(x.pos-V)+x.nodeAfter.attrs.colspan;for(let G=0;G<z.height;G++){const rt=st+G*z.width-1;if(!(st!=z.width&&z.map[rt]==z.map[rt+1]||0!=G&&z.map[rt-1]==z.map[rt-1-z.width])){const It=z.map[rt],Rt=V+It+R.nodeAt(It).nodeSize-1,Vt=document.createElement("div");Vt.className="column-resize-handle",S.push(y.p.widget(Rt,Vt))}}return y.EH.create(h.doc,S)}(z,V.activeHandle)},nodeViews:{}}});return R}var D=class{constructor(h,C){this.activeHandle=h,this.dragging=C}apply(h){const C=this,S=h.getMeta(Oe);if(S&&null!=S.setHandle)return new D(S.setHandle,!1);if(S&&void 0!==S.setDragging)return new D(C.activeHandle,S.setDragging);if(C.activeHandle>-1&&h.docChanged){let x=h.mapping.map(C.activeHandle,-1);return Bt(h.doc.resolve(x))||(x=-1),new D(x,C.dragging)}return C}};function Tt(h,C,S){const x=h.posAtCoords({left:C.clientX,top:C.clientY});if(!x)return-1;const{pos:R}=x,z=at(h.state.doc.resolve(R));if(!z)return-1;if("right"==S)return z.pos;const V=q.get(z.node(-1)),st=z.start(-1),G=V.map.indexOf(z.pos-st);return G%V.width==0?-1:st+V.map[G-1]}function St(h,C,S){return Math.max(S,h.startWidth+(C.clientX-h.startX))}function B(h,C){h.dispatch(h.state.tr.setMeta(Oe,{setHandle:C}))}function g(h){return Array(h).fill(0)}function k(h){const C=h.selection,S=xt(h),x=S.node(-1),R=S.start(-1),z=q.get(x),V=C instanceof j?z.rectBetween(C.$anchorCell.pos-R,C.$headCell.pos-R):z.findCell(S.pos-R);return ye(ie({},V),{tableStart:R,map:z,table:x})}function W(h,{map:C,tableStart:S,table:x},R){let z=R>0?-1:0;(function(h,C,S){const x=At(C.type.schema).header_cell;for(let R=0;R<h.height;R++)if(C.nodeAt(h.map[S+R*h.width]).type!=x)return!1;return!0})(C,x,R+z)&&(z=0==R||R==C.width?null:0);for(let V=0;V<C.height;V++){const st=V*C.width+R;if(R>0&&R<C.width&&C.map[st-1]==C.map[st]){const G=C.map[st],rt=x.nodeAt(G);h.setNodeMarkup(h.mapping.map(S+G),null,O(rt.attrs,R-C.colCount(G))),V+=rt.attrs.rowspan-1}else{const G=null==z?At(x.type.schema).cell:x.nodeAt(C.map[st+z]).type,rt=C.positionAt(V,R,x);h.insert(h.mapping.map(S+rt),G.createAndFill())}}return h}function ae(h,{map:C,table:S,tableStart:x},R){const z=h.mapping.maps.length;for(let V=0;V<C.height;){const st=V*C.width+R,G=C.map[st],rt=S.nodeAt(G),It=rt.attrs;if(R>0&&C.map[st-1]==G||R<C.width-1&&C.map[st+1]==G)h.setNodeMarkup(h.mapping.slice(z).map(x+G),null,gt(It,R-C.colCount(G)));else{const Rt=h.mapping.slice(z).map(x+G);h.delete(Rt,Rt+rt.nodeSize)}V+=It.rowspan}}function $e(h,{map:C,tableStart:S,table:x},R){var z;let V=S;for(let rt=0;rt<R;rt++)V+=x.child(rt).nodeSize;const st=[];let G=R>0?-1:0;(function(h,C,S){var x;const R=At(C.type.schema).header_cell;for(let z=0;z<h.width;z++)if((null==(x=C.nodeAt(h.map[z+S*h.width]))?void 0:x.type)!=R)return!1;return!0})(C,x,R+G)&&(G=0==R||R==C.height?null:0);for(let rt=0,It=C.width*R;rt<C.width;rt++,It++)if(R>0&&R<C.height&&C.map[It]==C.map[It-C.width]){const Rt=C.map[It],Vt=x.nodeAt(Rt).attrs;h.setNodeMarkup(S+Rt,null,ye(ie({},Vt),{rowspan:Vt.rowspan+1})),rt+=Vt.colspan-1}else{const Rt=null==G?At(x.type.schema).cell:null==(z=x.nodeAt(C.map[It+G*C.width]))?void 0:z.type,Vt=null==Rt?void 0:Rt.createAndFill();Vt&&st.push(Vt)}return h.insert(V,At(x.type.schema).row.create(null,st)),h}function an(h,{map:C,table:S,tableStart:x},R){let z=0;for(let G=0;G<R;G++)z+=S.child(G).nodeSize;const V=z+S.child(R).nodeSize,st=h.mapping.maps.length;h.delete(z+x,V+x);for(let G=0,rt=R*C.width;G<C.width;G++,rt++){const It=C.map[rt];if(R>0&&It==C.map[rt-C.width]){const Rt=S.nodeAt(It).attrs;h.setNodeMarkup(h.mapping.slice(st).map(It+x),null,ye(ie({},Rt),{rowspan:Rt.rowspan-1})),G+=Rt.colspan-1}else if(R<C.width&&It==C.map[rt+C.width]){const Rt=S.nodeAt(It),Vt=Rt.attrs,Qt=Rt.type.create(ye(ie({},Vt),{rowspan:Rt.attrs.rowspan-1}),Rt.content),se=C.positionAt(R+1,G,S);h.insert(h.mapping.slice(st).map(x+se),Qt),G+=Vt.colspan-1}}}function pn(h){const C=h.content;return 1==C.childCount&&C.child(0).isTextblock&&0==C.child(0).childCount}function En(h,C){const S=h.selection;if(!(S instanceof j)||S.$anchorCell.pos==S.$headCell.pos)return!1;const x=k(h),{map:R}=x;if(function({width:h,height:C,map:S},x){let R=x.top*h+x.left,z=R,V=(x.bottom-1)*h+x.left,st=R+(x.right-x.left-1);for(let G=x.top;G<x.bottom;G++){if(x.left>0&&S[z]==S[z-1]||x.right<h&&S[st]==S[st+1])return!0;z+=h,st+=h}for(let G=x.left;G<x.right;G++){if(x.top>0&&S[R]==S[R-h]||x.bottom<C&&S[V]==S[V+h])return!0;R++,V++}return!1}(R,x))return!1;if(C){const z=h.tr,V={};let G,rt,st=T.HY.empty;for(let It=x.top;It<x.bottom;It++)for(let Rt=x.left;Rt<x.right;Rt++){const Vt=R.map[It*R.width+Rt],Qt=x.table.nodeAt(Vt);if(!V[Vt]&&Qt)if(V[Vt]=!0,null==G)G=Vt,rt=Qt;else{pn(Qt)||(st=st.append(Qt.content));const se=z.mapping.map(Vt+x.tableStart);z.delete(se,se+Qt.nodeSize)}}if(null==G||null==rt)return!0;if(z.setNodeMarkup(G+x.tableStart,null,ye(ie({},O(rt.attrs,rt.attrs.colspan,x.right-x.left-rt.attrs.colspan)),{rowspan:x.bottom-x.top})),st.size){const It=G+1+rt.content.size,Rt=pn(rt)?G+1:It;z.replaceWith(Rt+x.tableStart,It+x.tableStart,st)}z.setSelection(new j(z.doc.resolve(G+x.tableStart))),C(z)}return!0}function hn(h,C){const S=At(h.schema);return function(h){return(C,S)=>{var x;const R=C.selection;let z,V;if(R instanceof j){if(R.$anchorCell.pos!=R.$headCell.pos)return!1;z=R.$anchorCell.nodeAfter,V=R.$anchorCell.pos}else{if(z=function(h){for(let C=h.depth;C>0;C--){const S=h.node(C).type.spec.tableRole;if("cell"===S||"header_cell"===S)return h.node(C)}return null}(R.$from),!z)return!1;V=null==(x=at(R.$from))?void 0:x.pos}if(null==z||null==V||1==z.attrs.colspan&&1==z.attrs.rowspan)return!1;if(S){let st=z.attrs;const G=[],rt=st.colwidth;st.rowspan>1&&(st=ye(ie({},st),{rowspan:1})),st.colspan>1&&(st=ye(ie({},st),{colspan:1}));const It=k(C),Rt=C.tr;for(let Qt=0;Qt<It.right-It.left;Qt++)G.push(rt?ye(ie({},st),{colwidth:rt&&rt[Qt]?[rt[Qt]]:null}):st);let Vt;for(let Qt=It.top;Qt<It.bottom;Qt++){let se=It.map.positionAt(Qt,It.left,It.table);Qt==It.top&&(se+=z.nodeSize);for(let me=It.left,_e=0;me<It.right;me++,_e++)me==It.left&&Qt==It.top||Rt.insert(Vt=Rt.mapping.map(se+It.tableStart,1),h({node:z,row:Qt,col:me}).createAndFill(G[_e]))}Rt.setNodeMarkup(V,h({node:z,row:It.top,col:It.left}),G[0]),R instanceof j&&Rt.setSelection(new j(Rt.doc.resolve(R.$anchorCell.pos),Vt?Rt.doc.resolve(Vt):void 0)),S(Rt)}return!0}}(({node:x})=>S[x.type.spec.tableRole])(h,C)}function Jt(h,C,S){const x=C.map.cellsInRect({left:0,top:0,right:"row"==h?C.map.width:1,bottom:"column"==h?C.map.height:1});for(let R=0;R<x.length;R++){const z=C.table.nodeAt(x[R]);if(z&&z.type!==S.header_cell)return!1}return!0}function Yt(h,C){return(C=C||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(h){return function(C,S){if(!$(C))return!1;if(S){const x=At(C.schema),R=k(C),z=C.tr,V=R.map.cellsInRect("column"==h?{left:R.left,top:0,right:R.right,bottom:R.map.height}:"row"==h?{left:0,top:R.top,right:R.map.width,bottom:R.bottom}:R),st=V.map(G=>R.table.nodeAt(G));for(let G=0;G<V.length;G++)st[G].type==x.header_cell&&z.setNodeMarkup(R.tableStart+V[G],x.cell,st[G].attrs);if(0==z.steps.length)for(let G=0;G<V.length;G++)z.setNodeMarkup(R.tableStart+V[G],x.header_cell,st[G].attrs);S(z)}return!0}}(h):function(S,x){if(!$(S))return!1;if(x){const R=At(S.schema),z=k(S),V=S.tr,st=Jt("row",z,R),G=Jt("column",z,R),It=("column"===h?st:"row"===h&&G)?1:0,Vt="column"==h?G?R.cell:R.header_cell:"row"==h?st?R.cell:R.header_cell:R.cell;z.map.cellsInRect("column"==h?{left:0,top:It,right:1,bottom:z.map.height}:"row"==h?{left:It,top:0,right:z.map.width,bottom:1}:z).forEach(Qt=>{const se=Qt+z.tableStart,me=V.doc.nodeAt(se);me&&V.setNodeMarkup(se,Vt,me.attrs)}),x(V)}return!0}}Yt("row",{useDeprecatedLogic:!0}),Yt("column",{useDeprecatedLogic:!0});var L=Yt("cell",{useDeprecatedLogic:!0});function dt(h){return function(C,S){if(!$(C))return!1;const x=function(h,C){if(C<0){const S=h.nodeBefore;if(S)return h.pos-S.nodeSize;for(let x=h.index(-1)-1,R=h.before();x>=0;x--){const z=h.node(-1).child(x),V=z.lastChild;if(V)return R-1-V.nodeSize;R-=z.nodeSize}}else{if(h.index()<h.parent.childCount-1)return h.pos+h.nodeAfter.nodeSize;const S=h.node(-1);for(let x=h.indexAfter(-1),R=h.after();x<S.childCount;x++){const z=S.child(x);if(z.childCount)return R+1;R+=z.nodeSize}}return null}(xt(C),h);if(null==x)return!1;if(S){const R=C.doc.resolve(x);S(C.tr.setSelection(r.Bs.between(R,function(h){return h.node(0).resolve(h.pos+h.nodeAfter.nodeSize)}(R))).scrollIntoView())}return!0}}function Ht({allowTableNodeSelection:h=!1}={}){return new r.Sy({key:_t,state:{init:()=>null,apply(C,S){const x=C.getMeta(_t);if(null!=x)return-1==x?null:x;if(null==S||!C.docChanged)return S;const{deleted:R,pos:z}=C.mapping.mapResult(S);return R?null:z}},props:{decorations:Q,handleDOMEvents:{mousedown:xe},createSelectionBetween:C=>null!=_t.getState(C.state)?C.state.selection:null,handleTripleClick:Me,handleKeyDown:Be,handlePaste:Ve},appendTransaction:(C,S,x)=>function(h,C,S){const x=(C||h).selection,R=(C||h).doc;let z,V;if(x instanceof r.qv&&(V=x.node.type.spec.tableRole)){if("cell"==V||"header_cell"==V)z=j.create(R,x.from);else if("row"==V){const st=R.resolve(x.from+1);z=j.rowSelection(st,st)}else if(!S){const st=q.get(x.node),G=x.from+1;z=j.create(R,G+1,G+st.map[st.width*st.height-1])}}else x instanceof r.Bs&&function({$from:h,$to:C}){if(h.pos==C.pos||h.pos<h.pos-6)return!1;let S=h.pos,x=C.pos,R=h.depth;for(;R>=0&&!(h.after(R+1)<h.end(R));R--,S++);for(let z=C.depth;z>=0&&!(C.before(z+1)>C.start(z));z--,x--);return S==x&&/row|table/.test(h.node(R).type.spec.tableRole)}(x)?z=r.Bs.create(R,x.from):x instanceof r.Bs&&function({$from:h,$to:C}){let S,x;for(let R=h.depth;R>0;R--){const z=h.node(R);if("cell"===z.type.spec.tableRole||"header_cell"===z.type.spec.tableRole){S=z;break}}for(let R=C.depth;R>0;R--){const z=C.node(R);if("cell"===z.type.spec.tableRole||"header_cell"===z.type.spec.tableRole){x=z;break}}return S!==x&&0===C.parentOffset}(x)&&(z=r.Bs.create(R,x.$from.start(),x.$from.end()));return z&&(C||(C=h.tr)).setSelection(z),C}(x,Gt(x,S),h)})}function kt(h,C,S,x,R,z){let V=0,st=!0,G=C.firstChild;const rt=h.firstChild;for(let It=0,Rt=0;It<rt.childCount;It+=1){const{colspan:Vt,colwidth:Qt}=rt.child(It).attrs;for(let se=0;se<Vt;se+=1,Rt+=1){const me=R===Rt?z:Qt&&Qt[se],_e=me?`${me}px`:"";V+=me||x,me||(st=!1),G?(G.style.width!==_e&&(G.style.width=_e),G=G.nextSibling):C.appendChild(document.createElement("col")).style.width=_e}}for(;G;){const It=G.nextSibling;G.parentNode.removeChild(G),G=It}st?(S.style.width=`${V}px`,S.style.minWidth=""):(S.style.width="",S.style.minWidth=`${V}px`)}var te=class{constructor(h,C){this.node=h,this.cellMinWidth=C,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),kt(h,this.colgroup,this.table,C),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(h){return h.type===this.node.type&&(this.node=h,kt(h,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(h){return"attributes"===h.type&&(h.target===this.table||this.colgroup.contains(h.target))}};function ce(h,C){return C?h.createChecked(null,C):h.createAndFill()}var pe=({editor:h})=>{const{selection:C}=h.state;if(!function(h){return h instanceof j}(C))return!1;let S=0;const x=(0,E.findParentNodeClosestToPos)(C.ranges[0].$from,z=>"table"===z.type.name);return null==x||x.node.descendants(z=>{if("table"===z.type.name)return!1;["tableCell","tableHeader"].includes(z.type.name)&&(S+=1)}),S===C.ranges.length&&(h.commands.deleteTable(),!0)};const Le=E.Node.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:te,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML({HTMLAttributes:h}){return["table",(0,E.mergeAttributes)(this.options.HTMLAttributes,h),["tbody",0]]},addCommands:()=>({insertTable:({rows:h=3,cols:C=3,withHeaderRow:S=!0}={})=>({tr:x,dispatch:R,editor:z})=>{const V=function(h,C,S,x,R){const z=function(h){if(h.cached.tableNodeTypes)return h.cached.tableNodeTypes;const C={};return Object.keys(h.nodes).forEach(S=>{const x=h.nodes[S];x.spec.tableRole&&(C[x.spec.tableRole]=x)}),h.cached.tableNodeTypes=C,C}(h),V=[],st=[];for(let rt=0;rt<S;rt+=1){const It=ce(z.cell,R);if(It&&st.push(It),x){const Rt=ce(z.header_cell,R);Rt&&V.push(Rt)}}const G=[];for(let rt=0;rt<C;rt+=1)G.push(z.row.createChecked(null,x&&0===rt?V:st));return z.table.createChecked(null,G)}(z.schema,h,C,S);if(R){const st=x.selection.anchor+1;x.replaceSelectionWith(V).scrollIntoView().setSelection(r.Bs.near(x.doc.resolve(st)))}return!0},addColumnBefore:()=>({state:h,dispatch:C})=>function(h,C){if(!$(h))return!1;if(C){const S=k(h);C(W(h.tr,S,S.left))}return!0}(h,C),addColumnAfter:()=>({state:h,dispatch:C})=>function(h,C){if(!$(h))return!1;if(C){const S=k(h);C(W(h.tr,S,S.right))}return!0}(h,C),deleteColumn:()=>({state:h,dispatch:C})=>function(h,C){if(!$(h))return!1;if(C){const S=k(h),x=h.tr;if(0==S.left&&S.right==S.map.width)return!1;for(let R=S.right-1;ae(x,S,R),R!=S.left;R--){const z=S.tableStart?x.doc.nodeAt(S.tableStart-1):x.doc;if(!z)throw RangeError("No table found");S.table=z,S.map=q.get(z)}C(x)}return!0}(h,C),addRowBefore:()=>({state:h,dispatch:C})=>function(h,C){if(!$(h))return!1;if(C){const S=k(h);C($e(h.tr,S,S.top))}return!0}(h,C),addRowAfter:()=>({state:h,dispatch:C})=>function(h,C){if(!$(h))return!1;if(C){const S=k(h);C($e(h.tr,S,S.bottom))}return!0}(h,C),deleteRow:()=>({state:h,dispatch:C})=>function(h,C){if(!$(h))return!1;if(C){const S=k(h),x=h.tr;if(0==S.top&&S.bottom==S.map.height)return!1;for(let R=S.bottom-1;an(x,S,R),R!=S.top;R--){const z=S.tableStart?x.doc.nodeAt(S.tableStart-1):x.doc;if(!z)throw RangeError("No table found");S.table=z,S.map=q.get(S.table)}C(x)}return!0}(h,C),deleteTable:()=>({state:h,dispatch:C})=>function(h,C){const S=h.selection.$anchor;for(let x=S.depth;x>0;x--)if("table"==S.node(x).type.spec.tableRole)return C&&C(h.tr.delete(S.before(x),S.after(x)).scrollIntoView()),!0;return!1}(h,C),mergeCells:()=>({state:h,dispatch:C})=>En(h,C),splitCell:()=>({state:h,dispatch:C})=>hn(h,C),toggleHeaderColumn:()=>({state:h,dispatch:C})=>Yt("column")(h,C),toggleHeaderRow:()=>({state:h,dispatch:C})=>Yt("row")(h,C),toggleHeaderCell:()=>({state:h,dispatch:C})=>L(h,C),mergeOrSplit:()=>({state:h,dispatch:C})=>!!En(h,C)||hn(h,C),setCellAttribute:(h,C)=>({state:S,dispatch:x})=>function(h,C){return function(S,x){if(!$(S))return!1;const R=xt(S);if(R.nodeAfter.attrs[h]===C)return!1;if(x){const z=S.tr;S.selection instanceof j?S.selection.forEachCell((V,st)=>{V.attrs[h]!==C&&z.setNodeMarkup(st,null,ye(ie({},V.attrs),{[h]:C}))}):z.setNodeMarkup(R.pos,null,ye(ie({},R.nodeAfter.attrs),{[h]:C})),x(z)}return!0}}(h,C)(S,x),goToNextCell:()=>({state:h,dispatch:C})=>dt(1)(h,C),goToPreviousCell:()=>({state:h,dispatch:C})=>dt(-1)(h,C),fixTables:()=>({state:h,dispatch:C})=>(C&&Gt(h),!0),setCellSelection:h=>({tr:C,dispatch:S})=>{if(S){const x=j.create(C.doc,h.anchorCell,h.headCell);C.setSelection(x)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:pe,"Mod-Backspace":pe,Delete:pe,"Mod-Delete":pe}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[Et({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],Ht({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema:h=>({tableRole:(0,E.callOrReturn)((0,E.getExtensionField)(h,"tableRole",{name:h.name,options:h.options,storage:h.storage}))})}).extend({renderHTML({node:h,HTMLAttributes:C}){var S,x;let R=0,z=!0;try{const V=(null===(S=h.content)||void 0===S?void 0:S.content)[0];null===(x=null==V?void 0:V.content)||void 0===x||x.content.forEach(st=>{st.attrs.colwidth?st.attrs.colwidth.forEach(G=>{G?R+=G:(z=!1,R+=this.options.cellMinWidth)}):(z=!1,R+=this.options.cellMinWidth*(st.attrs.colspan?st.attrs.colspan:1))})}catch(V){z=!1}return C.style=z&&R>0?`width: ${R}px;`:R&&R>0?`min-width: ${R}px`:null,["div",{class:"tui-table-wrapper"},["table",(0,E.mergeAttributes)(this.options.HTMLAttributes,C),["tbody",0]]]}})},88806:(ne,Mt,a)=>{a.d(Mt,{v:()=>r});var E=a(74788);class r{constructor(y,p,it){const F=p.get(E.z2F),q=p.get(E._Vd).resolveComponentFactory(y);this.componentRef=q.create(p,[]),this.updateProps(it),F.attachView(this.componentRef.hostView)}get instance(){return this.componentRef.instance}get elementRef(){return this.componentRef.injector.get(E.SBq)}get dom(){return this.elementRef.nativeElement}updateProps(y){Object.entries(y).forEach(([p,it])=>{this.instance[p]=it})}detectChanges(){this.componentRef.changeDetectorRef.detectChanges()}destroy(){this.componentRef.destroy()}}},40400:(ne,Mt,a)=>{a.d(Mt,{d:()=>y,x:()=>it});var E=a(12057),r=a(12867),T=a(88806);class y{}class p extends r.NodeView{constructor(){super(...arguments),this.contentDOMElement=null}mount(){const Y=this.options.injector,q=Y.get(E.K0);this.renderer=new T.v(this.component,Y,{editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(ut={})=>this.updateAttributes(ut),deleteNode:()=>this.deleteNode()}),this.extension.config.draggable&&(this.renderer.elementRef.nativeElement.ondragstart=ut=>{this.onDragStart(ut)}),this.contentDOMElement=this.node.isLeaf?null:q.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit",this.renderer.detectChanges())}get dom(){return this.renderer.dom}get contentDOM(){return this.node.isLeaf?null:(this.maybeMoveContentDOM(),this.contentDOMElement)}update(Y,q){return this.options.update?this.options.update(Y,q):Y.type===this.node.type&&(Y===this.node&&this.decorations===q||(this.node=Y,this.decorations=q,this.renderer.updateProps({node:Y,decorations:q}),this.maybeMoveContentDOM()),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy()}maybeMoveContentDOM(){const Y=this.dom.querySelector("[data-node-view-content]");this.contentDOMElement&&Y&&!Y.contains(this.contentDOMElement)&&Y.appendChild(this.contentDOMElement)}}const it=(F,Y)=>q=>new p(F,q,Y)},48014:(ne,Mt,a)=>{a.r(Mt),a.d(Mt,{AbstractTuiEditor:()=>E._,AbstractTuiEditorResizable:()=>_t._3,BackgroundColor:()=>Bt.BackgroundColor,EDITOR_BLANK_COLOR:()=>xt.hK,FontColor:()=>Ut.FontColor,INITIALIZATION_TIPTAP_CONTAINER:()=>Zt.Y1,LAZY_EDITOR_EXTENSIONS:()=>Zt.F4,LAZY_TIPTAP_EDITOR:()=>Zt.bG,StarterKit:()=>bt.StarterKit,TIPTAP_EDITOR:()=>Zt.ZW,TUI_ATTACH_FILES_LOADER:()=>Zt.zc,TUI_ATTACH_FILES_OPTIONS:()=>Zt.dR,TUI_EDITOR_CODE_OPTIONS:()=>Zt.Mr,TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES:()=>Zt.dj,TUI_EDITOR_CONTENT_PROCESSOR:()=>Zt.F1,TUI_EDITOR_DEFAULT_OPTIONS:()=>Zt.HG,TUI_EDITOR_EXTENSIONS:()=>Zt.Wf,TUI_EDITOR_FONT_OPTIONS:()=>Zt.UN,TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>qt.TUI_EDITOR_GROUP_DEFAULT_OPTIONS,TUI_EDITOR_LINK_TEXTS:()=>Zt.b$,TUI_EDITOR_MAX_IMAGE_WIDTH:()=>O.TUI_EDITOR_MAX_IMAGE_WIDTH,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>O.TUI_EDITOR_MIN_IMAGE_WIDTH,TUI_EDITOR_OPTIONS:()=>Zt.mJ,TUI_EDITOR_PROVIDERS:()=>mt.m,TUI_EDITOR_TABLE_COMMANDS:()=>Zt.$i,TUI_EDITOR_TOOLBAR_TEXTS:()=>Zt.rf,TUI_IFRAME_EDITOR_OPTIONS:()=>gt.TUI_IFRAME_EDITOR_OPTIONS,TUI_IMAGE_EDITOR_OPTIONS:()=>O.TUI_IMAGE_EDITOR_OPTIONS,TUI_IMAGE_LOADER:()=>Zt.p7,TableCellBackground:()=>ot.TableCellBackground,TuiAlignContentComponent:()=>$.Xp,TuiAlignContentModule:()=>$.pu,TuiCodeComponent:()=>$.Tf,TuiCodeModule:()=>$.P_,TuiColorEditComponent:()=>r.hR,TuiColorEditModule:()=>r.TD,TuiColorPickerComponent:()=>r.$v,TuiColorPickerModule:()=>r.H9,TuiColorSelectorComponent:()=>r.sV,TuiColorSelectorModule:()=>r.wl,TuiComponentRenderer:()=>pt.v,TuiDetailsComponent:()=>$.yj,TuiDetailsModule:()=>$.y9,TuiDetailsRemoveComponent:()=>$.Un,TuiEditLinkComponent:()=>T.lV,TuiEditLinkModule:()=>T.Fu,TuiEditorComponent:()=>y.a,TuiEditorGroupToolComponent:()=>$.dN,TuiEditorImagePreviewDirective:()=>ft.Zj,TuiEditorImagePreviewModule:()=>ft.BN,TuiEditorModule:()=>Ct,TuiEditorPortalDirective:()=>Dt.A,TuiEditorPortalHostComponent:()=>At.d,TuiEditorPortalService:()=>zt.Y,TuiEditorResizableComponent:()=>_t.V_,TuiEditorResizableModule:()=>_t.Sl,TuiEditorSocketComponent:()=>it.D,TuiEditorSocketModule:()=>Y,TuiEditorTool:()=>yt._,TuiEditorToolGroup:()=>$.jP,TuiFileLink:()=>Ot.TuiFileLink,TuiFilterAnchorsPipe:()=>T.bL,TuiFlatPickerComponent:()=>r.Jd,TuiFlatPickerModule:()=>r.ui,TuiFontSize:()=>jt.TuiFontSize,TuiFontSizeComponent:()=>$.mK,TuiFontSizeModule:()=>$.p7,TuiFontStyleComponent:()=>$.hr,TuiFontStyleModule:()=>$.Zv,TuiHighlightColorComponent:()=>$.UT,TuiHighlightColorModule:()=>$.XC,TuiIframeEditorComponent:()=>gt.TuiIframeEditorComponent,TuiIframeEditorModule:()=>gt.TuiIframeEditorModule,TuiImageEditorComponent:()=>O.TuiImageEditorComponent,TuiImageEditorModule:()=>O.TuiImageEditorModule,TuiInputColorComponent:()=>at.j,TuiInputColorModule:()=>ht,TuiLinearMultiPickerComponent:()=>r.es,TuiLinearMultiPickerModule:()=>r.GU,TuiLinearPickerComponent:()=>r.P,TuiLinearPickerModule:()=>r.g7,TuiLink:()=>j.TuiLink,TuiListConfigsComponent:()=>$.w2,TuiListConfigsModule:()=>$.Ur,TuiNodeViewNgComponent:()=>Kt.d,TuiNodeViewRenderer:()=>Kt.x,TuiPaletteComponent:()=>r.Rh,TuiPaletteModule:()=>r.VM,TuiShortUrlPipe:()=>T.X,TuiTabExtension:()=>Z.TuiTabExtension,TuiTable:()=>Q.TuiTable,TuiTableCellColorComponent:()=>$.pH,TuiTableCellColorModule:()=>$.mp,TuiTableCommands:()=>$.iN,TuiTableCreateComponent:()=>$.lT,TuiTableCreateModule:()=>$.iA,TuiTableMergeCellsComponent:()=>$.YH,TuiTableMergeCellsModule:()=>$.er,TuiTableRowColumnManagerComponent:()=>$._I,TuiTableRowColumnManagerModule:()=>$.__,TuiTableSizeSelectorComponent:()=>$.M8,TuiTableSizeSelectorModule:()=>$.kU,TuiTextColorComponent:()=>$.G0,TuiTextColorModule:()=>$._t,TuiTiptapEditorDirective:()=>ft.JU,TuiTiptapEditorModule:()=>ft.mJ,TuiTiptapEditorService:()=>ft.$3,TuiToolbarComponent:()=>q.M6,TuiToolbarModule:()=>q.yB,TuiToolbarNavigationManagerDirective:()=>q.Bp,createGroupExtension:()=>qt.createGroupExtension,createIframeEditorExtension:()=>gt.createIframeEditorExtension,createImageEditorExtension:()=>O.createImageEditorExtension,defaultEditorColors:()=>xt.sw,defaultEditorExtensions:()=>Nt,defaultEditorTools:()=>xt.Db,tuiDefaultFontOptionsHandler:()=>xt.RR,tuiDeleteNode:()=>le.yU,tuiEditorOptionsProvider:()=>Zt.Uv,tuiGetElementPoint:()=>le.Ws,tuiGetGradientData:()=>le.U5,tuiGetMarkRange:()=>le.Yz,tuiGetSelectedContent:()=>le.Ap,tuiInsertHtml:()=>le.Xd,tuiInsertText:()=>le.Oi,tuiIsOrderedOrBulletList:()=>Z.tuiIsOrderedOrBulletList,tuiIsSafeLinkRange:()=>le.nC,tuiIsSelectionIn:()=>le.i0,tuiLegacyEditorConverter:()=>le.Er,tuiParseGradient:()=>le._N,tuiParseStyle:()=>le.jx,tuiToGradient:()=>le.CH});var E=a(77361),r=a(27050),T=a(71115),y=a(69303),p=a(12057),it=a(20179),F=a(74788);let Y=(()=>{class Gt{}return Gt.\u0275fac=function(Te){return new(Te||Gt)},Gt.\u0275mod=F.oAB({type:Gt}),Gt.\u0275inj=F.cJS({}),Gt})();var q=a(17406),ft=a(84614),ut=a(68339),X=a(76040);let Ct=(()=>{class Gt{}return Gt.\u0275fac=function(Te){return new(Te||Gt)},Gt.\u0275mod=F.oAB({type:Gt}),Gt.\u0275inj=F.cJS({imports:[[p.ez,q.yB,X.TuiWrapperModule,X.TuiScrollbarModule,T.Fu,ut.TuiActiveZoneModule,X.TuiDropdownModule,ft.mJ,Y,ut.TuiLetModule]]}),Gt})();var mt=a(79089),Dt=a(1433),zt=a(73825),At=a(9872),_t=a(95110),at=a(19769);let ht=(()=>{class Gt{}return Gt.\u0275fac=function(Te){return new(Te||Gt)},Gt.\u0275mod=F.oAB({type:Gt}),Gt.\u0275inj=F.cJS({imports:[[p.ez,X.TuiPrimitiveTextfieldModule,X.TuiTextfieldControllerModule,X.TuiHostedDropdownModule,r.wl,ut.TuiActiveZoneModule]]}),Gt})();var $=a(93252),xt=a(19074),yt=a(48699),Bt=a(15736);const Nt=[Promise.resolve().then(a.bind(a,2823)).then(({StarterKit:Gt})=>Gt).then(Gt=>Gt.configure({heading:{levels:[1,2]}})),a.e(73336).then(a.bind(a,73336)).then(({default:Gt})=>Gt.configure({types:["heading","paragraph"]})),Promise.resolve().then(a.bind(a,84402)).then(({default:Gt})=>Gt),a.e(17991).then(a.bind(a,17991)).then(({default:Gt})=>Gt),a.e(77147).then(a.bind(a,77147)).then(({default:Gt})=>Gt),a.e(25034).then(a.bind(a,25034)).then(({default:Gt})=>Gt),Promise.resolve().then(a.bind(a,52658)).then(({FontColor:Gt})=>Gt),a.e(44632).then(a.bind(a,44632)).then(({default:Gt})=>Gt.configure({inline:!0,allowBase64:!0})),Promise.resolve().then(a.bind(a,57734)).then(({TuiLink:Gt})=>Gt),a.e(54058).then(a.bind(a,54058)).then(({TuiJumpAnchor:Gt})=>Gt),Promise.resolve().then(a.bind(a,93763)).then(({TuiFileLink:Gt})=>Gt),Promise.resolve().then(a.bind(a,15736)).then(({BackgroundColor:Gt})=>Gt),Promise.resolve().then(a.bind(a,86624)).then(({TuiTable:Gt})=>Gt.configure({resizable:!0})),a.e(45213).then(a.bind(a,45213)).then(({default:Gt})=>Gt),a.e(71397).then(a.bind(a,71397)).then(({default:Gt})=>Gt),a.e(38840).then(a.bind(a,38840)).then(({TableHeader:Gt})=>Gt),Promise.resolve().then(a.bind(a,12177)).then(({TuiTabExtension:Gt})=>Gt),Promise.resolve().then(a.bind(a,51919)).then(({TableCellBackground:Gt})=>Gt),a.e(44312).then(a.bind(a,44312)).then(({TuiDetailsContent:Gt})=>Gt),a.e(44312).then(a.bind(a,44312)).then(({TuiDetails:Gt})=>Gt),a.e(44312).then(a.bind(a,44312)).then(({TuiSummary:Gt})=>Gt),Promise.resolve().then(a.bind(a,9492)).then(({TuiFontSize:Gt})=>Gt)];var Ot=a(93763),Ut=a(52658),jt=a(9492),qt=a(54920),gt=a(20854),O=a(53380),Z=a(12177),j=a(57734),bt=a(2823),Q=a(86624),ot=a(51919),pt=a(88806),Kt=a(40400),Zt=a(14309),le=a(83372)},62141:(ne,Mt,a)=>{a.d(Mt,{i:()=>ft});var E=a(12057),r=a(74788),T=a(83372),y=a(68339),p=a(18891),it=a(43190),F=a(88002),Y=a(46782),q=a(39761);let ft=(()=>{class ut extends p.y{constructor(Ct,{nativeElement:mt},Dt){const zt=(0,y.tuiTypedFromEvent)(mt,"mousedown").pipe((0,y.tuiPreventDefault)(),(0,it.w)(At=>{const _t=(0,y.tuiTypedFromEvent)(Dt,"mousemove").pipe((0,F.U)(({clientX:at,clientY:ht})=>(0,T.Ws)(at,ht,mt)),(0,Y.R)((0,y.tuiTypedFromEvent)(Dt,"mouseup")));return At.target===mt?_t.pipe((0,q.O)((0,T.Ws)(At.clientX,At.clientY,mt))):_t}),(0,Y.R)(Ct));super(At=>zt.subscribe(At))}}return ut.\u0275fac=function(Ct){return new(Ct||ut)(r.LFG(y.TuiDestroyService,2),r.LFG(r.SBq),r.LFG(E.K0))},ut.\u0275prov=r.Yz7({token:ut,factory:ut.\u0275fac}),ut})()},14309:(ne,Mt,a)=>{a.d(Mt,{Y1:()=>Nt,F4:()=>T,bG:()=>Bt,ZW:()=>yt,zc:()=>ut,dR:()=>ft,Mr:()=>At,dj:()=>Ct,F1:()=>q,HG:()=>p,Wf:()=>r,UN:()=>_t,b$:()=>zt,mJ:()=>it,$i:()=>Dt,rf:()=>mt,p7:()=>$,Uv:()=>F});var E=a(74788);const r=new E.OlP("[TUI_EDITOR_EXTENSIONS]: Extensions for editor"),T=new E.OlP("[LAZY_EDITOR_EXTENSIONS]: lazy extensions");var y=a(19074);const p={colors:y.sw,blankColor:y.hK,fontOptions:y.RR},it=new E.OlP("[TUI_EDITOR_OPTIONS]: Default Editor colors",{factory:()=>p});function F(Ot){return{provide:it,useValue:Object.assign(Object.assign({},p),Ot)}}var Y=a(54487);const q=new E.OlP("[TUI_EDITOR_CONTENT_PROCESSOR]: Content value processor for tui-editor",{factory:()=>Y.y}),ft=new E.OlP("[TUI_ATTACH_FILES_OPTIONS]: files loader options",{factory:()=>({accept:"*/*",multiple:!0})}),ut=new E.OlP("[TUI_ATTACH_FILES_LOADER]: files loader handler");var X=a(72773);const Ct=new E.OlP("[TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES]: tui-color-selector i18n",{factory:()=>["Solid color","Gradient"]}),mt=new E.OlP("[TUI_EDITOR_TOOLBAR_TEXTS]: tui-editor-toolbar i18n",{factory:(0,X.vv)("toolbarTools")}),Dt=new E.OlP("[TUI_EDITOR_TABLE_COMMANDS]: tui-editor-toolbar table i18n",{factory:(0,X.vv)("editorTableCommands")}),zt=new E.OlP("[TUI_EDITOR_LINK_TEXTS]: tui-editor-toolbar edit-link i18n",{factory:(0,X.vv)("editorEditLink")}),At=new E.OlP("[TUI_EDITOR_CODE_OPTIONS]: tui-editor-toolbar codes options",{factory:(0,X.vv)("editorCodeOptions")}),_t=new E.OlP("[TUI_EDITOR_FONT_OPTIONS]: tui-editor-toolbar font options",{factory:(0,X.vv)("editorFontOptions")});var at=a(68339),ht=a(88002);const $=new E.OlP("[TUI_IMAGE_LOADER]: Image loader handler",{factory:()=>Ot=>{const Ut=new FileReader;return Ut.readAsDataURL(Ot),(0,at.tuiTypedFromEvent)(Ut,"load").pipe((0,ht.U)(()=>String(Ut.result)))}});var xt=a(82298);const yt=new E.OlP("[TIPTAP_EDITOR]: Token for Tiptap Editor"),Bt=new E.OlP("[LAZY_TIPTAP_EDITOR]: Lazy loaded Editor",{factory:()=>{const Ot=new xt.t(1);return Promise.resolve().then(a.bind(a,12867)).then(Ut=>Ot.next(Ut.Editor)),Ot}}),Nt=new E.OlP("[INITIALIZATION_TIPTAP_CONTAINER]: The container in which the tip-tap editor is initialized")},83372:(ne,Mt,a)=>{function E(O,Z,j){const bt=O.selection.$anchor;for(let Q=bt.depth;Q>0;Q--)if(bt.node(Q).type.name===j)return Z&&Z(O.tr.delete(bt.before(Q),bt.after(Q)).scrollIntoView()),!0;return!1}a.d(Mt,{yU:()=>E,Ws:()=>T,U5:()=>y,Yz:()=>F,Ap:()=>q,Xd:()=>ft,Oi:()=>ut,nC:()=>qt,i0:()=>X,Er:()=>Ct,_N:()=>Ot,jx:()=>jt,CH:()=>gt});var r=a(68339);function T(O,Z,j){const{left:bt,top:Q,width:ot,height:pt}=j.getBoundingClientRect();return[(0,r.tuiClamp)(O-bt,0,ot)/ot,(0,r.tuiClamp)(Z-Q,0,pt)/pt]}function y(O){return O.slice(0,Math.max(0,O.length-1)).replace("linear-gradient(","")}function it(O,Z,j={}){return O.find(({attrs:bt,type:Q})=>Q===Z&&function(O,Z){const j=Object.keys(Z);return!j.length||!!j.filter(bt=>Z[bt]===O[bt]).length}(bt,j))||null}function F(O,Z,j={}){if(!O||!Z)return null;const{node:bt,offset:Q}=O.parent.childAfter(O.parentOffset);if(!bt)return null;const ot=it(bt.marks,Z,j);if(!ot)return null;let pt=O.index(),Kt=O.start()+Q,Zt=pt+1,le=Kt+bt.nodeSize;for(it(bt.marks,Z,j);pt>0&&ot.isInSet(O.parent.child(pt-1).marks);)pt-=1,Kt-=O.parent.child(pt).nodeSize;for(;Zt<O.parent.childCount&&it(O.parent.child(Zt).marks,Z,j);)le+=O.parent.child(Zt).nodeSize,Zt+=1;return{from:Kt,to:le}}var Y=a(12867);function q(O,Z){const j=null!=Z?Z:O.selection.$head.parent.textContent,bt=O.doc.cut(O.selection.from,O.selection.to);return bt.content.size?(0,Y.getHTMLFromFragment)(bt.content,O.schema):j}function ft(O,Z){if(O.queryCommandSupported("insertHTML"))return void O.execCommand("insertHTML",!1,Z);const j=O.getSelection();if(!j)throw new r.TuiDocumentSelectionException;O.execCommand("ms-beginUndoUnit");const bt=j.getRangeAt(0),Q=bt.createContextualFragment(Z);bt.deleteContents(),bt.insertNode(Q),O.execCommand("ms-endUndoUnit")}function ut(O,Z){if(O.queryCommandSupported("insertText"))return void O.execCommand("insertText",!1,Z);const j=O.getSelection();if(!j)throw new r.TuiDocumentSelectionException;O.execCommand("ms-beginUndoUnit");const bt=j.getRangeAt(0);bt.deleteContents(),bt.insertNode(O.createTextNode(Z)),O.execCommand("ms-endUndoUnit")}function X({anchorNode:O,focusNode:Z},j){return!!O&&!!Z&&(0,r.tuiIsNodeIn)(O,j)&&(0,r.tuiIsNodeIn)(Z,j)}function Ct(O){const Z=(new DOMParser).parseFromString(O,"text/html");return mt(Z.body),Z.body.innerHTML}function mt(O){for(const Z of Array.from(O.children))if(Z.children.length&&mt(Z),"FONT"===Z.tagName)if(Z.hasAttribute("size"))switch(Z.getAttribute("size")){case"6":Dt("h1",Z);break;case"5":Dt("h2",Z);break;case"4":zt("17px",Z);break;case"3":zt("15px",Z);break;case"2":zt("13px",Z)}else Z.hasAttribute("color")&&At(Z)}function Dt(O,Z){var j,bt,Q,ot,pt,Kt,Zt,le,Gt;const De=document.createElement(O);if(De.innerHTML=Z.innerHTML,"P"===(null===(j=Z.parentElement)||void 0===j?void 0:j.tagName)){const Te=null===(Q=null===(bt=Z.parentElement)||void 0===bt?void 0:bt.parentElement)||void 0===Q?void 0:Q.insertBefore(De,Z.parentElement);null===(ot=Z.parentElement)||void 0===ot||ot.removeChild(Z),(null==Te?void 0:Te.nextSibling)&&!(null===(Kt=null===(pt=null==Te?void 0:Te.nextSibling)||void 0===pt?void 0:pt.textContent)||void 0===Kt?void 0:Kt.trim())&&(null===(le=null===(Zt=Te.nextSibling)||void 0===Zt?void 0:Zt.parentElement)||void 0===le||le.removeChild(Te.nextSibling))}else null===(Gt=Z.parentElement)||void 0===Gt||Gt.replaceChild(De,Z)}function zt(O,Z){var j;const bt=document.createElement("p"),Q=document.createElement("span");Q.setAttribute("style",`font-size: ${O}`),Q.innerHTML=Z.innerHTML,bt.append(Q),null===(j=Z.parentElement)||void 0===j||j.replaceChild("P"===Z.parentElement.tagName?Q:bt,Z)}function At(O){var Z;const j=document.createElement("span");j.setAttribute("style",`color: ${O.getAttribute("color")}`),j.innerHTML=O.innerHTML,null===(Z=O.parentElement)||void 0===Z||Z.replaceChild(j,O)}const Nt=["\\s*(","(?:","#(?:[a-f0-9]{6}|[a-f0-9]{3})","|","(?:rgb|hsl)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*\\)","|","(?:rgba|hsla)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*,\\s*\\d*\\.?\\d+\\)","|","[_a-z-][_a-z0-9-]*",")",")","(?:\\s+","(","(?:[+-]?\\d*\\.?\\d+)(?:%|[a-z]+)?","))?","(?:","\\s*,\\s*","\\s*)?"];function Ot(O){const Z=new RegExp(Nt.join(""),"gi"),j=O.startsWith("to")||O.match(/^\d/)?O.slice(Math.max(0,O.indexOf(",")+1)).trim():O,bt=O.startsWith("to")?O.split(",")[0]:"to bottom";let Q=[],ot=Z.exec(j);for(;null!==ot;)Q=Q.concat({color:ot[1],position:Ut(ot[2],Q.length)}),ot=Z.exec(j);return Q=Q.filter(({color:pt})=>pt.startsWith("#")||pt.startsWith("rgb")),{stops:Q,side:bt}}function Ut(O,Z){const j=1===Z?"100%":`${Z}%`;return(null==O?void 0:O.includes("%"))?O:j}function jt(O){return O.split(";").reduce((Z,j)=>{var bt;const[Q,ot]=null!==(bt=j.split(":"))&&void 0!==bt?bt:[];return Q&&ot&&(Z[Q.trim()]=ot.trim()),Z},{})}function qt(O){var Z;return O.endOffset-O.startOffset>0||0!==O.startOffset&&O.endOffset!==((null===(Z=O.endContainer.nodeValue)||void 0===Z?void 0:Z.length)||0)}function gt({stops:O,side:Z}){return`linear-gradient(${Z}, ${O.map(({color:j,position:bt})=>`rgba(${(0,r.tuiParseColor)(j).join(", ")}) ${bt}`).join(", ")})`}},12867:(ne,Mt,a)=>{a.r(Mt),a.d(Mt,{CommandManager:()=>N,Editor:()=>Ko,Extension:()=>L,InputRule:()=>Qe,Mark:()=>Hn,Node:()=>zn,NodeView:()=>o,PasteRule:()=>rn,Tracker:()=>A,callOrReturn:()=>g,combineTransactionSteps:()=>xo,createStyleTag:()=>Wo,defaultBlockAt:()=>kn,deleteProps:()=>Kn,elementFromString:()=>me,escapeForRegEx:()=>i,extensions:()=>Jt,findChildren:()=>Gn,findChildrenInRange:()=>Ao,findDuplicates:()=>wt,findParentNode:()=>wn,findParentNodeClosestToPos:()=>$n,fromString:()=>k,generateHTML:()=>Po,generateJSON:()=>Bn,generateText:()=>bn,getAttributes:()=>On,getChangedRanges:()=>Sn,getDebugJSON:()=>Ln,getExtensionField:()=>H,getHTMLFromFragment:()=>Rn,getMarkAttributes:()=>Yn,getMarkRange:()=>R,getMarkType:()=>z,getMarksBetween:()=>sn,getNodeAttributes:()=>Xn,getNodeType:()=>St,getSchema:()=>Pn,getText:()=>Zn,getTextBetween:()=>nt,getTextContentFromNodes:()=>He,getTextSerializersFromSchema:()=>dt,inputRulesPlugin:()=>dn,isActive:()=>en,isEmptyObject:()=>P,isFunction:()=>d,isList:()=>mn,isMacOS:()=>ze,isMarkActive:()=>xn,isNodeActive:()=>Dn,isNodeEmpty:()=>gn,isNodeSelection:()=>Ze,isNumber:()=>pn,isPlainObject:()=>oe,isRegExp:()=>$e,isString:()=>c,isTextSelection:()=>G,isiOS:()=>Rt,markInputRule:()=>uo,markPasteRule:()=>e,mergeAttributes:()=>B,mergeDeep:()=>J,minMax:()=>rt,nodeInputRule:()=>po,nodePasteRule:()=>f,objectIncludes:()=>C,pasteRulesPlugin:()=>Lt,posToDOMRect:()=>qe,removeDuplicates:()=>qn,textInputRule:()=>Jo,textPasteRule:()=>m,textblockTypeInputRule:()=>ho,wrappingInputRule:()=>fo});var E=a(62463),r=a(43594),T=a(70768),y=a(77346),p=a(38480);const it=(t,n)=>!t.selection.empty&&(n&&n(t.tr.deleteSelection().scrollIntoView()),!0);const Y=(t,n,l)=>{let u=function(t,n){let{$cursor:l}=t.selection;return!l||(n?!n.endOfTextblock("backward",t):l.parentOffset>0)?null:l}(t,l);if(!u)return!1;let _=mt(u);if(!_){let M=u.blockRange(),I=M&&(0,p.k9)(M);return null!=I&&(n&&n(t.tr.lift(M,I).scrollIntoView()),!0)}let v=_.nodeBefore;if(!v.type.spec.isolating&&j(t,_,n))return!0;if(0==u.parent.content.size&&(X(v,"end")||E.qv.isSelectable(v))){let M=(0,p.dR)(t.doc,u.before(),u.after(),y.p2.empty);if(M&&M.slice.size<M.to-M.from){if(n){let I=t.tr.step(M);I.setSelection(X(v,"end")?E.Y1.findFrom(I.doc.resolve(I.mapping.map(_.pos,-1)),-1):E.qv.create(I.doc,_.pos-v.nodeSize)),n(I.scrollIntoView())}return!0}}return!(!v.isAtom||_.depth!=u.depth-1||(n&&n(t.tr.delete(_.pos-v.nodeSize,_.pos).scrollIntoView()),0))};function X(t,n,l=!1){for(let u=t;u;u="start"==n?u.firstChild:u.lastChild){if(u.isTextblock)return!0;if(l&&1!=u.childCount)return!1}return!1}const Ct=(t,n,l)=>{let{$head:u,empty:_}=t.selection,v=u;if(!_)return!1;if(u.parent.isTextblock){if(l?!l.endOfTextblock("backward",t):u.parentOffset>0)return!1;v=mt(u)}let M=v&&v.nodeBefore;return!(!M||!E.qv.isSelectable(M)||(n&&n(t.tr.setSelection(E.qv.create(t.doc,v.pos-M.nodeSize)).scrollIntoView()),0))};function mt(t){if(!t.parent.type.spec.isolating)for(let n=t.depth-1;n>=0;n--){if(t.index(n)>0)return t.doc.resolve(t.before(n+1));if(t.node(n).type.spec.isolating)break}return null}const zt=(t,n,l)=>{let u=function(t,n){let{$cursor:l}=t.selection;return!l||(n?!n.endOfTextblock("forward",t):l.parentOffset<l.parent.content.size)?null:l}(t,l);if(!u)return!1;let _=_t(u);if(!_)return!1;let v=_.nodeAfter;if(j(t,_,n))return!0;if(0==u.parent.content.size&&(X(v,"start")||E.qv.isSelectable(v))){let M=(0,p.dR)(t.doc,u.before(),u.after(),y.p2.empty);if(M&&M.slice.size<M.to-M.from){if(n){let I=t.tr.step(M);I.setSelection(X(v,"start")?E.Y1.findFrom(I.doc.resolve(I.mapping.map(_.pos)),1):E.qv.create(I.doc,I.mapping.map(_.pos))),n(I.scrollIntoView())}return!0}}return!(!v.isAtom||_.depth!=u.depth-1||(n&&n(t.tr.delete(_.pos,_.pos+v.nodeSize).scrollIntoView()),0))},At=(t,n,l)=>{let{$head:u,empty:_}=t.selection,v=u;if(!_)return!1;if(u.parent.isTextblock){if(l?!l.endOfTextblock("forward",t):u.parentOffset<u.parent.content.size)return!1;v=_t(u)}let M=v&&v.nodeAfter;return!(!M||!E.qv.isSelectable(M)||(n&&n(t.tr.setSelection(E.qv.create(t.doc,v.pos)).scrollIntoView()),0))};function _t(t){if(!t.parent.type.spec.isolating)for(let n=t.depth-1;n>=0;n--){let l=t.node(n);if(t.index(n)+1<l.childCount)return t.doc.resolve(t.after(n+1));if(l.type.spec.isolating)break}return null}const xt=(t,n)=>{let{$head:l,$anchor:u}=t.selection;return!(!l.parent.type.spec.code||!l.sameParent(u)||(n&&n(t.tr.insertText("\n").scrollIntoView()),0))};function yt(t){for(let n=0;n<t.edgeCount;n++){let{type:l}=t.edge(n);if(l.isTextblock&&!l.hasRequiredAttrs())return l}return null}const Bt=(t,n)=>{let{$head:l,$anchor:u}=t.selection;if(!l.parent.type.spec.code||!l.sameParent(u))return!1;let _=l.node(-1),v=l.indexAfter(-1),M=yt(_.contentMatchAt(v));if(!M||!_.canReplaceWith(v,v,M))return!1;if(n){let I=l.after(),K=t.tr.replaceWith(I,I,M.createAndFill());K.setSelection(E.Y1.near(K.doc.resolve(I),1)),n(K.scrollIntoView())}return!0},Nt=(t,n)=>{let l=t.selection,{$from:u,$to:_}=l;if(l instanceof E.C1||u.parent.inlineContent||_.parent.inlineContent)return!1;let v=yt(_.parent.contentMatchAt(_.indexAfter()));if(!v||!v.isTextblock)return!1;if(n){let M=(!u.parentOffset&&_.index()<_.parent.childCount?u:_).pos,I=t.tr.insert(M,v.createAndFill());I.setSelection(E.Bs.create(I.doc,M+1)),n(I.scrollIntoView())}return!0},Ot=(t,n)=>{let{$cursor:l}=t.selection;if(!l||l.parent.content.size)return!1;if(l.depth>1&&l.after()!=l.end(-1)){let v=l.before();if((0,p.Ax)(t.doc,v))return n&&n(t.tr.split(v).scrollIntoView()),!0}let u=l.blockRange(),_=u&&(0,p.k9)(u);return null!=_&&(n&&n(t.tr.lift(u,_).scrollIntoView()),!0)};var t;function j(t,n,l){let v,M,u=n.nodeBefore,_=n.nodeAfter;if(u.type.spec.isolating||_.type.spec.isolating)return!1;if(function(t,n,l){let u=n.nodeBefore,_=n.nodeAfter,v=n.index();return!(!(u&&_&&u.type.compatibleContent(_.type))||(!u.content.size&&n.parent.canReplace(v-1,v)?(l&&l(t.tr.delete(n.pos-u.nodeSize,n.pos).scrollIntoView()),0):!n.parent.canReplace(v,v+1)||!_.isTextblock&&!(0,p.Mn)(t.doc,n.pos)||(l&&l(t.tr.clearIncompatible(n.pos,u.type,u.contentMatchAt(u.childCount)).join(n.pos).scrollIntoView()),0)))}(t,n,l))return!0;let I=n.parent.canReplace(n.index(),n.index()+1);if(I&&(v=(M=u.contentMatchAt(u.childCount)).findWrapping(_.type))&&M.matchType(v[0]||_.type).validEnd){if(l){let vt=n.pos+_.nodeSize,Pt=y.HY.empty;for(let ee=v.length-1;ee>=0;ee--)Pt=y.HY.from(v[ee].create(null,Pt));Pt=y.HY.from(u.copy(Pt));let $t=t.tr.step(new p.FC(n.pos-1,vt,n.pos,vt,new y.p2(Pt,1,0),v.length,!0)),Xt=vt+2*v.length;(0,p.Mn)($t.doc,Xt)&&$t.join(Xt),l($t.scrollIntoView())}return!0}let K=E.Y1.findFrom(n,1),tt=K&&K.$from.blockRange(K.$to),et=tt&&(0,p.k9)(tt);if(null!=et&&et>=n.depth)return l&&l(t.tr.lift(tt,et).scrollIntoView()),!0;if(I&&X(_,"start",!0)&&X(u,"end")){let vt=u,Pt=[];for(;Pt.push(vt),!vt.isTextblock;)vt=vt.lastChild;let $t=_,Xt=1;for(;!$t.isTextblock;$t=$t.firstChild)Xt++;if(vt.canReplace(vt.childCount,vt.childCount,$t.content)){if(l){let ee=y.HY.empty;for(let re=Pt.length-1;re>=0;re--)ee=y.HY.from(Pt[re].copy(ee));l(t.tr.step(new p.FC(n.pos-Pt.length,n.pos+_.nodeSize,n.pos+Xt,n.pos+_.nodeSize-Xt,new y.p2(ee,Pt.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function bt(t){return function(n,l){let u=n.selection,_=t<0?u.$from:u.$to,v=_.depth;for(;_.node(v).isInline;){if(!v)return!1;v--}return!!_.node(v).isTextblock&&(l&&l(n.tr.setSelection(E.Bs.create(n.doc,t<0?_.start(v):_.end(v)))),!0)}}const Q=bt(-1),ot=bt(1);function Kt(t,n=null){return function(l,u){let _=!1;for(let v=0;v<l.selection.ranges.length&&!_;v++){let{$from:{pos:M},$to:{pos:I}}=l.selection.ranges[v];l.doc.nodesBetween(M,I,(K,tt)=>{if(_)return!1;if(K.isTextblock&&!K.hasMarkup(t,n))if(K.type==t)_=!0;else{let et=l.doc.resolve(tt),vt=et.index();_=et.parent.canReplaceWith(vt,vt+1,t)}})}if(!_)return!1;if(u){let v=l.tr;for(let M=0;M<l.selection.ranges.length;M++){let{$from:{pos:I},$to:{pos:K}}=l.selection.ranges[M];v.setBlockType(I,K,t,n)}u(v.scrollIntoView())}return!0}}function Te(...t){return function(n,l,u){for(let _=0;_<t.length;_++)if(t[_](n,l,u))return!0;return!1}}let je=Te(it,Y,Ct),Ue=Te(it,zt,At);const Ne={Enter:Te(xt,Nt,Ot,(n,l)=>{let{$from:u,$to:_}=n.selection;if(n.selection instanceof E.qv&&n.selection.node.isBlock)return!(!u.parentOffset||!(0,p.Ax)(n.doc,u.pos)||(l&&l(n.tr.split(u.pos).scrollIntoView()),0));if(!u.parent.isBlock)return!1;if(l){let v=_.parentOffset==_.parent.content.size,M=n.tr;(n.selection instanceof E.Bs||n.selection instanceof E.C1)&&M.deleteSelection();let I=0==u.depth?null:yt(u.node(-1).contentMatchAt(u.indexAfter(-1))),K=t,tt=K?[K]:v&&I?[{type:I}]:void 0,et=(0,p.Ax)(M.doc,M.mapping.map(u.pos),1,tt);if(!tt&&!et&&(0,p.Ax)(M.doc,M.mapping.map(u.pos),1,I?[{type:I}]:void 0)&&(I&&(tt=[{type:I}]),et=!0),et&&(M.split(M.mapping.map(u.pos),1,tt),!v&&!u.parentOffset&&u.parent.type!=I)){let vt=M.mapping.map(u.before()),Pt=M.doc.resolve(vt);I&&u.node(-1).canReplaceWith(Pt.index(),Pt.index()+1,I)&&M.setNodeMarkup(M.mapping.map(u.before()),I)}l(M.scrollIntoView())}return!0}),"Mod-Enter":Bt,Backspace:je,"Mod-Backspace":je,"Shift-Backspace":je,Delete:Ue,"Mod-Delete":Ue,"Mod-a":(t,n)=>(n&&n(t.tr.setSelection(new E.C1(t.doc))),!0)},Je={"Ctrl-h":Ne.Backspace,"Alt-Backspace":Ne["Mod-Backspace"],"Ctrl-d":Ne.Delete,"Ctrl-Alt-Backspace":Ne["Mod-Delete"],"Alt-Delete":Ne["Mod-Delete"],"Alt-d":Ne["Mod-Delete"],"Ctrl-a":Q,"Ctrl-e":ot};for(let t in Ne)Je[t]=Ne[t];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();var Et=Object.defineProperty,D=(t,n)=>{for(var l in n)Et(t,l,{get:n[l],enumerable:!0})};function b(t){const{state:n,transaction:l}=t;let{selection:u}=l,{doc:_}=l,{storedMarks:v}=l;return ye(ie({},n),{apply:n.apply.bind(n),applyTransaction:n.applyTransaction.bind(n),filterTransaction:n.filterTransaction,plugins:n.plugins,schema:n.schema,reconfigure:n.reconfigure.bind(n),toJSON:n.toJSON.bind(n),get storedMarks(){return v},get selection(){return u},get doc(){return _},get tr(){return u=l.selection,_=l.doc,v=l.storedMarks,l}})}var N=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:l}=this,{view:u}=n,{tr:_}=l,v=this.buildProps(_);return Object.fromEntries(Object.entries(t).map(([M,I])=>[M,(...tt)=>{const et=I(...tt)(v);return!_.getMeta("preventDispatch")&&!this.hasCustomState&&u.dispatch(_),et}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:l,editor:u,state:_}=this,{view:v}=u,M=[],I=!!t,K=t||_.tr,et=ye(ie({},Object.fromEntries(Object.entries(l).map(([vt,Pt])=>[vt,(...Xt)=>{const ee=this.buildProps(K,n),ue=Pt(...Xt)(ee);return M.push(ue),et}]))),{run:()=>(!I&&n&&!K.getMeta("preventDispatch")&&!this.hasCustomState&&v.dispatch(K),M.every(vt=>!0===vt))});return et}createCan(t){const{rawCommands:n,state:l}=this,_=t||l.tr,v=this.buildProps(_,!1),M=Object.fromEntries(Object.entries(n).map(([I,K])=>[I,(...tt)=>K(...tt)(ye(ie({},v),{dispatch:void 0}))]));return ye(ie({},M),{chain:()=>this.createChain(_,!1)})}buildProps(t,n=!0){const{rawCommands:l,editor:u,state:_}=this,{view:v}=u;_.storedMarks&&t.setStoredMarks(_.storedMarks);const M={tr:t,editor:u,view:v,state:b({state:_,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(l).map(([I,K])=>[I,(...tt)=>K(...tt)(M)]))}};return M}};function H(t,n,l){return void 0===t.config[n]&&t.parent?H(t.parent,n,l):"function"==typeof t.config[n]?t.config[n].bind(ye(ie({},l),{parent:t.parent?H(t.parent,n,l):null})):t.config[n]}function U(t){return{baseExtensions:t.filter(_=>"extension"===_.type),nodeExtensions:t.filter(_=>"node"===_.type),markExtensions:t.filter(_=>"mark"===_.type)}}function Tt(t){const n=[],{nodeExtensions:l,markExtensions:u}=U(t),_=[...l,...u],v={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(M=>{const K=H(M,"addGlobalAttributes",{name:M.name,options:M.options,storage:M.storage});K&&K().forEach(et=>{et.types.forEach(vt=>{Object.entries(et.attributes).forEach(([Pt,$t])=>{n.push({type:vt,name:Pt,attribute:ie(ie({},v),$t)})})})})}),_.forEach(M=>{const K=H(M,"addAttributes",{name:M.name,options:M.options,storage:M.storage});if(!K)return;const tt=K();Object.entries(tt).forEach(([et,vt])=>{const Pt=ie(ie({},v),vt);(null==vt?void 0:vt.isRequired)&&void 0===(null==vt?void 0:vt.default)&&delete Pt.default,n.push({type:M.name,name:et,attribute:Pt})})}),n}function St(t,n){if("string"==typeof t){if(!n.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return n.nodes[t]}return t}function B(...t){return t.filter(n=>!!n).reduce((n,l)=>{const u=ie({},n);return Object.entries(l).forEach(([_,v])=>{u[_]=u[_]?"class"===_?[u[_],v].join(" "):"style"===_?[u[_],v].join("; "):v:v}),u},{})}function s(t,n){return n.filter(l=>l.attribute.rendered).map(l=>l.attribute.renderHTML?l.attribute.renderHTML(t.attrs)||{}:{[l.name]:t.attrs[l.name]}).reduce((l,u)=>B(l,u),{})}function d(t){return"function"==typeof t}function g(t,n,...l){return d(t)?n?t.bind(n)(...l):t(...l):t}function P(t={}){return 0===Object.keys(t).length&&t.constructor===Object}function k(t){return"string"!=typeof t?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):"true"===t||"false"!==t&&t}function W(t,n){return t.style?t:ye(ie({},t),{getAttrs:l=>{const u=t.getAttrs?t.getAttrs(l):t.attrs;if(!1===u)return!1;const _=n.reduce((v,M)=>{const I=M.attribute.parseHTML?M.attribute.parseHTML(l):k(l.getAttribute(M.name));return null==I?v:ye(ie({},v),{[M.name]:I})},{});return ie(ie({},u),_)}})}function ct(t){return Object.fromEntries(Object.entries(t).filter(([n,l])=>("attrs"!==n||!P(l))&&null!=l))}function Ft(t){var n;const l=Tt(t),{nodeExtensions:u,markExtensions:_}=U(t),v=null==(n=u.find(K=>H(K,"topNode")))?void 0:n.name,M=Object.fromEntries(u.map(K=>{const tt=l.filter(ue=>ue.type===K.name),et={name:K.name,options:K.options,storage:K.storage},vt=t.reduce((ue,re)=>{const Ye=H(re,"extendNodeSchema",et);return ie(ie({},ue),Ye?Ye(K):{})},{}),Pt=ct(ye(ie({},vt),{content:g(H(K,"content",et)),marks:g(H(K,"marks",et)),group:g(H(K,"group",et)),inline:g(H(K,"inline",et)),atom:g(H(K,"atom",et)),selectable:g(H(K,"selectable",et)),draggable:g(H(K,"draggable",et)),code:g(H(K,"code",et)),defining:g(H(K,"defining",et)),isolating:g(H(K,"isolating",et)),attrs:Object.fromEntries(tt.map(ue=>{var re;return[ue.name,{default:null==(re=null==ue?void 0:ue.attribute)?void 0:re.default}]}))})),$t=g(H(K,"parseHTML",et));$t&&(Pt.parseDOM=$t.map(ue=>W(ue,tt)));const Xt=H(K,"renderHTML",et);Xt&&(Pt.toDOM=ue=>Xt({node:ue,HTMLAttributes:s(ue,tt)}));const ee=H(K,"renderText",et);return ee&&(Pt.toText=ee),[K.name,Pt]})),I=Object.fromEntries(_.map(K=>{const tt=l.filter(ee=>ee.type===K.name),et={name:K.name,options:K.options,storage:K.storage},vt=t.reduce((ee,ue)=>{const re=H(ue,"extendMarkSchema",et);return ie(ie({},ee),re?re(K):{})},{}),Pt=ct(ye(ie({},vt),{inclusive:g(H(K,"inclusive",et)),excludes:g(H(K,"excludes",et)),group:g(H(K,"group",et)),spanning:g(H(K,"spanning",et)),code:g(H(K,"code",et)),attrs:Object.fromEntries(tt.map(ee=>{var ue;return[ee.name,{default:null==(ue=null==ee?void 0:ee.attribute)?void 0:ue.default}]}))})),$t=g(H(K,"parseHTML",et));$t&&(Pt.parseDOM=$t.map(ee=>W(ee,tt)));const Xt=H(K,"renderHTML",et);return Xt&&(Pt.toDOM=ee=>Xt({mark:ee,HTMLAttributes:s(ee,tt)})),[K.name,Pt]}));return new y.V_({topNode:v,nodes:M,marks:I})}function ae(t,n){return n.nodes[t]||n.marks[t]||null}function de(t,n){return Array.isArray(n)?n.some(l=>("string"==typeof l?l:l.name)===t.name):n}var He=(t,n=500)=>{let l="";const u=t.parentOffset;return t.parent.nodesBetween(Math.max(0,u-n),u,(_,v,M,I)=>{var K,tt;l+=((null==(tt=(K=_.type.spec).toText)?void 0:tt.call(K,{node:_,pos:v,parent:M,index:I}))||_.textContent||"%leaf%").slice(0,Math.max(0,u-v))}),l};function $e(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var Qe=class{constructor(t){this.find=t.find,this.handler=t.handler}};function an(t){var n;const{editor:l,from:u,to:_,text:v,rules:M,plugin:I}=t,{view:K}=l;if(K.composing)return!1;const tt=K.state.doc.resolve(u);if(tt.parent.type.spec.code||(null==(n=tt.nodeBefore||tt.nodeAfter)?void 0:n.marks.find(Pt=>Pt.type.spec.code)))return!1;let et=!1;const vt=He(tt)+v;return M.forEach(Pt=>{if(et)return;const $t=((t,n)=>{if($e(n))return n.exec(t);const l=n(t);if(!l)return null;const u=[l.text];return u.index=l.index,u.input=t,u.data=l.data,l.replaceWith&&(l.text.includes(l.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),u.push(l.replaceWith)),u})(vt,Pt.find);if(!$t)return;const Xt=K.state.tr,ee=b({state:K.state,transaction:Xt}),ue={from:u-($t[0].length-v.length),to:_},{commands:re,chain:Ye,can:Cn}=new N({editor:l,state:ee});null===Pt.handler({state:ee,range:ue,match:$t,commands:re,chain:Ye,can:Cn})||!Xt.steps.length||(Xt.setMeta(I,{transform:Xt,from:u,to:_,text:v}),K.dispatch(Xt),et=!0)}),et}function dn(t){const{editor:n,rules:l}=t,u=new E.Sy({state:{init:()=>null,apply:(_,v)=>_.getMeta(u)||(_.selectionSet||_.docChanged?null:v)},props:{handleTextInput:(_,v,M,I)=>an({editor:n,from:v,to:M,text:I,rules:l,plugin:u}),handleDOMEvents:{compositionend:_=>(setTimeout(()=>{const{$cursor:v}=_.state.selection;v&&an({editor:n,from:v.pos,to:v.pos,text:"",rules:l,plugin:u})}),!1)},handleKeyDown(_,v){if("Enter"!==v.key)return!1;const{$cursor:M}=_.state.selection;return!!M&&an({editor:n,from:M.pos,to:M.pos,text:"\n",rules:l,plugin:u})}},isInputRules:!0});return u}function pn(t){return"number"==typeof t}var rn=class{constructor(t){this.find=t.find,this.handler=t.handler}};function Lt(t){const{editor:n,rules:l}=t;let u=null,_=!1,v=!1;return l.map(I=>new E.Sy({view(K){const tt=et=>{var vt;u=(null==(vt=K.dom.parentElement)?void 0:vt.contains(et.target))?K.dom.parentElement:null};return window.addEventListener("dragstart",tt),{destroy(){window.removeEventListener("dragstart",tt)}}},props:{handleDOMEvents:{drop:K=>(v=u===K.dom.parentElement,!1),paste:(K,tt)=>{var et;const vt=null==(et=tt.clipboardData)?void 0:et.getData("text/html");return _=!!(null==vt?void 0:vt.includes("data-pm-slice")),!1}}},appendTransaction:(K,tt,et)=>{const vt=K[0],Pt="paste"===vt.getMeta("uiEvent")&&!_,$t="drop"===vt.getMeta("uiEvent")&&!v;if(!Pt&&!$t)return;const Xt=tt.doc.content.findDiffStart(et.doc.content),ee=tt.doc.content.findDiffEnd(et.doc.content);if(!pn(Xt)||!ee||Xt===ee.b)return;const ue=et.tr,re=b({state:et,transaction:ue});return function(t){const{editor:n,state:l,from:u,to:_,rule:v}=t,{commands:M,chain:I,can:K}=new N({editor:n,state:l}),tt=[];return l.doc.nodesBetween(u,_,(vt,Pt)=>{if(!vt.isTextblock||vt.type.spec.code)return;const $t=Math.max(u,Pt),Xt=Math.min(_,Pt+vt.content.size);((t,n)=>{if($e(n))return[...t.matchAll(n)];const l=n(t);return l?l.map(u=>{const _=[u.text];return _.index=u.index,_.input=t,_.data=u.data,u.replaceWith&&(u.text.includes(u.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),_.push(u.replaceWith)),_}):[]})(vt.textBetween($t-Pt,Xt-Pt,void 0,"\ufffc"),v.find).forEach(re=>{if(void 0===re.index)return;const Ye=$t+re.index+1,Cn=Ye+re[0].length,An={from:l.tr.mapping.map(Ye),to:l.tr.mapping.map(Cn)},mo=v.handler({state:l,range:An,match:re,commands:M,chain:I,can:K});tt.push(mo)})}),tt.every(vt=>null!==vt)}({editor:n,state:re,from:Math.max(Xt-1,0),to:ee.b-1,rule:I})&&ue.steps.length?ue:void 0}}))}function wt(t){const n=t.filter((l,u)=>t.indexOf(l)!==u);return[...new Set(n)]}var Wt=class{constructor(t,n){this.splittableMarks=[],this.editor=n,this.extensions=Wt.resolve(t),this.schema=Ft(this.extensions),this.extensions.forEach(l=>{var u;this.editor.extensionStorage[l.name]=l.storage;const _={name:l.name,options:l.options,storage:l.storage,editor:this.editor,type:ae(l.name,this.schema)};"mark"===l.type&&(null==(u=g(H(l,"keepOnSplit",_)))||u)&&this.splittableMarks.push(l.name);const v=H(l,"onBeforeCreate",_);v&&this.editor.on("beforeCreate",v);const M=H(l,"onCreate",_);M&&this.editor.on("create",M);const I=H(l,"onUpdate",_);I&&this.editor.on("update",I);const K=H(l,"onSelectionUpdate",_);K&&this.editor.on("selectionUpdate",K);const tt=H(l,"onTransaction",_);tt&&this.editor.on("transaction",tt);const et=H(l,"onFocus",_);et&&this.editor.on("focus",et);const vt=H(l,"onBlur",_);vt&&this.editor.on("blur",vt);const Pt=H(l,"onDestroy",_);Pt&&this.editor.on("destroy",Pt)})}static resolve(t){const n=Wt.sort(Wt.flatten(t)),l=wt(n.map(u=>u.name));return l.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${l.map(u=>`'${u}'`).join(", ")}]. This can lead to issues.`),n}static flatten(t){return t.map(n=>{const u=H(n,"addExtensions",{name:n.name,options:n.options,storage:n.storage});return u?[n,...this.flatten(u())]:n}).flat(10)}static sort(t){return t.sort((l,u)=>{const _=H(l,"priority")||100,v=H(u,"priority")||100;return _>v?-1:_<v?1:0})}get commands(){return this.extensions.reduce((t,n)=>{const u=H(n,"addCommands",{name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:ae(n.name,this.schema)});return u?ie(ie({},t),u()):t},{})}get plugins(){const{editor:t}=this,n=Wt.sort([...this.extensions].reverse()),l=[],u=[],_=n.map(v=>{const M={name:v.name,options:v.options,storage:v.storage,editor:t,type:ae(v.name,this.schema)},I=[],K=H(v,"addKeyboardShortcuts",M);let tt={};if("mark"===v.type&&v.config.exitable&&(tt.ArrowRight=()=>Hn.handleExit({editor:t,mark:v})),K){const Xt=Object.fromEntries(Object.entries(K()).map(([ee,ue])=>[ee,()=>ue({editor:t})]));tt=ie(ie({},tt),Xt)}const et=(0,T.h)(tt);I.push(et);const vt=H(v,"addInputRules",M);de(v,t.options.enableInputRules)&&vt&&l.push(...vt());const Pt=H(v,"addPasteRules",M);de(v,t.options.enablePasteRules)&&Pt&&u.push(...Pt());const $t=H(v,"addProseMirrorPlugins",M);if($t){const Xt=$t();I.push(...Xt)}return I}).flat();return[dn({editor:t,rules:l}),...Lt({editor:t,rules:u}),..._]}get attributes(){return Tt(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:n}=U(this.extensions);return Object.fromEntries(n.filter(l=>!!H(l,"addNodeView")).map(l=>{const u=this.attributes.filter(I=>I.type===l.name),_={name:l.name,options:l.options,storage:l.storage,editor:t,type:St(l.name,this.schema)},v=H(l,"addNodeView",_);return v?[l.name,(I,K,tt,et)=>{const vt=s(I,u);return v()({editor:t,node:I,getPos:tt,decorations:et,HTMLAttributes:vt,extension:l})}]:[]}))}},Jt={};function oe(t){return"Object"===function(t){return Object.prototype.toString.call(t).slice(8,-1)}(t)&&t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function J(t,n){const l=ie({},t);return oe(t)&&oe(n)&&Object.keys(n).forEach(u=>{oe(n[u])?u in t?l[u]=J(t[u],n[u]):Object.assign(l,{[u]:n[u]}):Object.assign(l,{[u]:n[u]})}),l}D(Jt,{ClipboardTextSerializer:()=>lt,Commands:()=>Ho,Editable:()=>zo,FocusEvents:()=>Vn,Keymap:()=>Uo,Tabindex:()=>$o});var L=class{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ie(ie({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=g(H(this,"addOptions",{name:this.name}))),this.storage=g(H(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new L(t)}configure(t={}){const n=this.extend();return n.options=J(this.options,t),n.storage=g(H(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new L(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=g(H(n,"addOptions",{name:n.name})),n.storage=g(H(n,"addStorage",{name:n.name,options:n.options})),n}};function nt(t,n,l){const{from:u,to:_}=n,{blockSeparator:v="\n\n",textSerializers:M={}}=l||{};let I="",K=!0;return t.nodesBetween(u,_,(tt,et,vt,Pt)=>{var $t;const Xt=null==M?void 0:M[tt.type.name];Xt?(tt.isBlock&&!K&&(I+=v,K=!0),vt&&(I+=Xt({node:tt,pos:et,parent:vt,index:Pt,range:n}))):tt.isText?(I+=null==($t=null==tt?void 0:tt.text)?void 0:$t.slice(Math.max(u,et)-et,_-et),K=!1):tt.isBlock&&!K&&(I+=v,K=!0)}),I}function dt(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,n])=>n.spec.toText).map(([n,l])=>[n,l.spec.toText]))}var lt=L.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new E.Sy({key:new E.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:n,schema:l}=t,{doc:u,selection:_}=n,{ranges:v}=_;return nt(u,{from:Math.min(...v.map(et=>et.$from.pos)),to:Math.max(...v.map(et=>et.$to.pos))},{textSerializers:dt(l)})}}})]}}),Ht={};D(Ht,{blur:()=>kt,clearContent:()=>te,clearNodes:()=>ce,command:()=>he,createParagraphNear:()=>ge,deleteCurrentNode:()=>fe,deleteNode:()=>pe,deleteRange:()=>ve,deleteSelection:()=>be,enter:()=>Le,exitCode:()=>h,extendMarkRange:()=>V,first:()=>st,focus:()=>Vt,forEach:()=>Qt,insertContent:()=>se,insertContentAt:()=>nn,joinBackward:()=>Tn,joinDown:()=>un,joinForward:()=>vn,joinUp:()=>Ae,keyboardShortcut:()=>Co,lift:()=>vo,liftEmptyBlock:()=>fn,liftListItem:()=>Eo,newlineInCode:()=>Wn,resetAttributes:()=>To,scrollIntoView:()=>In,selectAll:()=>Do,selectNodeBackward:()=>Jn,selectNodeForward:()=>yn,selectParentNode:()=>Mo,selectTextblockEnd:()=>yo,selectTextblockStart:()=>bo,setContent:()=>Oo,setMark:()=>So,setMeta:()=>eo,setNode:()=>Io,setNodeSelection:()=>no,setTextSelection:()=>oo,sinkListItem:()=>Nn,splitBlock:()=>io,splitListItem:()=>jn,toggleList:()=>ko,toggleMark:()=>wo,toggleNode:()=>lo,toggleWrap:()=>ao,undoInputRule:()=>Ro,unsetAllMarks:()=>Bo,unsetMark:()=>Lo,updateAttributes:()=>No,wrapIn:()=>Fo,wrapInList:()=>co});var kt=()=>({editor:t,view:n})=>(requestAnimationFrame(()=>{var l;t.isDestroyed||(n.dom.blur(),null==(l=null==window?void 0:window.getSelection())||l.removeAllRanges())}),!0),te=(t=!1)=>({commands:n})=>n.setContent("",t),ce=()=>({state:t,tr:n,dispatch:l})=>{const{selection:u}=n,{ranges:_}=u;return l&&_.forEach(({$from:v,$to:M})=>{t.doc.nodesBetween(v.pos,M.pos,(I,K)=>{if(I.type.isText)return;const{doc:tt,mapping:et}=n,vt=tt.resolve(et.map(K)),Pt=tt.resolve(et.map(K+I.nodeSize)),$t=vt.blockRange(Pt);if(!$t)return;const Xt=(0,p.k9)($t);if(I.type.isTextblock){const{defaultType:ee}=vt.parent.contentMatchAt(vt.index());n.setNodeMarkup($t.start,ee)}(Xt||0===Xt)&&n.lift($t,Xt)})}),!0},he=t=>n=>t(n),ge=()=>({state:t,dispatch:n})=>Nt(t,n),fe=()=>({tr:t,dispatch:n})=>{const{selection:l}=t,u=l.$anchor.node();if(u.content.size>0)return!1;const _=t.selection.$anchor;for(let v=_.depth;v>0;v-=1)if(_.node(v).type===u.type){if(n){const I=_.before(v),K=_.after(v);t.delete(I,K).scrollIntoView()}return!0}return!1},pe=t=>({tr:n,state:l,dispatch:u})=>{const _=St(t,l.schema),v=n.selection.$anchor;for(let M=v.depth;M>0;M-=1)if(v.node(M).type===_){if(u){const K=v.before(M),tt=v.after(M);n.delete(K,tt).scrollIntoView()}return!0}return!1},ve=t=>({tr:n,dispatch:l})=>{const{from:u,to:_}=t;return l&&n.delete(u,_),!0},be=()=>({state:t,dispatch:n})=>it(t,n),Le=()=>({commands:t})=>t.keyboardShortcut("Enter"),h=()=>({state:t,dispatch:n})=>Bt(t,n);function C(t,n,l={strict:!0}){const u=Object.keys(n);return!u.length||u.every(_=>l.strict?n[_]===t[_]:$e(n[_])?n[_].test(t[_]):n[_]===t[_])}function S(t,n,l={}){return t.find(u=>u.type===n&&C(u.attrs,l))}function x(t,n,l={}){return!!S(t,n,l)}function R(t,n,l={}){if(!t||!n)return;let u=t.parent.childAfter(t.parentOffset);if(t.parentOffset===u.offset&&0!==u.offset&&(u=t.parent.childBefore(t.parentOffset)),!u.node)return;const _=S([...u.node.marks],n,l);if(!_)return;let v=u.index,M=t.start()+u.offset,I=v+1,K=M+u.node.nodeSize;for(S([...u.node.marks],n,l);v>0&&_.isInSet(t.parent.child(v-1).marks);)v-=1,M-=t.parent.child(v).nodeSize;for(;I<t.parent.childCount&&x([...t.parent.child(I).marks],n,l);)K+=t.parent.child(I).nodeSize,I+=1;return{from:M,to:K}}function z(t,n){if("string"==typeof t){if(!n.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return n.marks[t]}return t}var V=(t,n={})=>({tr:l,state:u,dispatch:_})=>{const v=z(t,u.schema),{doc:M,selection:I}=l,{$from:K,from:tt,to:et}=I;if(_){const vt=R(K,v,n);if(vt&&vt.from<=tt&&vt.to>=et){const Pt=E.Bs.create(M,vt.from,vt.to);l.setSelection(Pt)}}return!0},st=t=>n=>{const l="function"==typeof t?t(n):t;for(let u=0;u<l.length;u+=1)if(l[u](n))return!0;return!1};function G(t){return t instanceof E.Bs}function rt(t=0,n=0,l=0){return Math.min(Math.max(t,n),l)}function It(t,n=null){if(!n)return null;const l=E.Y1.atStart(t),u=E.Y1.atEnd(t);if("start"===n||!0===n)return l;if("end"===n)return u;const _=l.from,v=u.to;return"all"===n?E.Bs.create(t,rt(0,_,v),rt(t.content.size,_,v)):E.Bs.create(t,rt(n,_,v),rt(n,_,v))}function Rt(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Vt=(t=null,n={})=>({editor:l,view:u,tr:_,dispatch:v})=>{n=ie({scrollIntoView:!0},n);const M=()=>{Rt()&&u.dom.focus(),requestAnimationFrame(()=>{l.isDestroyed||(u.focus(),(null==n?void 0:n.scrollIntoView)&&l.commands.scrollIntoView())})};if(u.hasFocus()&&null===t||!1===t)return!0;if(v&&null===t&&!G(l.state.selection))return M(),!0;const I=It(_.doc,t)||l.state.selection,K=l.state.selection.eq(I);return v&&(K||_.setSelection(I),K&&_.storedMarks&&_.setStoredMarks(_.storedMarks),M()),!0},Qt=(t,n)=>l=>t.every((u,_)=>n(u,ye(ie({},l),{index:_}))),se=(t,n)=>({tr:l,commands:u})=>u.insertContentAt({from:l.selection.from,to:l.selection.to},t,n);function me(t){const n=`<body>${t}</body>`;return(new window.DOMParser).parseFromString(n,"text/html").body}function _e(t,n,l){if(l=ie({slice:!0,parseOptions:{}},l),"object"==typeof t&&null!==t)try{return Array.isArray(t)?y.HY.fromArray(t.map(u=>n.nodeFromJSON(u))):n.nodeFromJSON(t)}catch(u){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",u),_e("",n,l)}if("string"==typeof t){const u=y.aw.fromSchema(n);return l.slice?u.parseSlice(me(t),l.parseOptions).content:u.parse(me(t),l.parseOptions)}return _e("",n,l)}var nn=(t,n,l)=>({tr:u,dispatch:_,editor:v})=>{if(_){l=ie({parseOptions:{},updateSelection:!0},l);const M=_e(n,v.schema,{parseOptions:ie({preserveWhitespace:"full"},l.parseOptions)});if("<>"===M.toString())return!0;let{from:I,to:K}="number"==typeof t?{from:t,to:t}:t,tt=!0,et=!0;if(((t=>t.toString().startsWith("<"))(M)?M:[M]).forEach(Pt=>{Pt.check(),tt=!!tt&&Pt.isText&&0===Pt.marks.length,et=!!et&&Pt.isBlock}),I===K&&et){const{parent:Pt}=u.doc.resolve(I);Pt.isTextblock&&!Pt.type.spec.code&&!Pt.childCount&&(I-=1,K+=1)}tt?u.insertText(n,I,K):u.replaceWith(I,K,M),l.updateSelection&&function(t,n,l){const u=t.steps.length-1;if(u<n)return;const _=t.steps[u];if(!(_ instanceof p.Pu||_ instanceof p.FC))return;let M=0;t.mapping.maps[u].forEach((I,K,tt,et)=>{0===M&&(M=et)}),t.setSelection(E.Y1.near(t.doc.resolve(M),-1))}(u,u.steps.length-1)}return!0},Ae=()=>({state:t,dispatch:n})=>((t,n)=>{let _,l=t.selection,u=l instanceof E.qv;if(u){if(l.node.isTextblock||!(0,p.Mn)(t.doc,l.from))return!1;_=l.from}else if(_=(0,p.GJ)(t.doc,l.from,-1),null==_)return!1;if(n){let v=t.tr.join(_);u&&v.setSelection(E.qv.create(v.doc,_-t.doc.resolve(_).nodeBefore.nodeSize)),n(v.scrollIntoView())}return!0})(t,n),un=()=>({state:t,dispatch:n})=>((t,n)=>{let u,l=t.selection;if(l instanceof E.qv){if(l.node.isTextblock||!(0,p.Mn)(t.doc,l.to))return!1;u=l.to}else if(u=(0,p.GJ)(t.doc,l.to,1),null==u)return!1;return n&&n(t.tr.join(u).scrollIntoView()),!0})(t,n),Tn=()=>({state:t,dispatch:n})=>Y(t,n),vn=()=>({state:t,dispatch:n})=>zt(t,n);function ze(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}var Co=t=>({editor:n,view:l,tr:u,dispatch:_})=>{const v=function(t){const n=t.split(/-(?!$)/);let u,_,v,M,l=n[n.length-1];"Space"===l&&(l=" ");for(let I=0;I<n.length-1;I+=1){const K=n[I];if(/^(cmd|meta|m)$/i.test(K))M=!0;else if(/^a(lt)?$/i.test(K))u=!0;else if(/^(c|ctrl|control)$/i.test(K))_=!0;else if(/^s(hift)?$/i.test(K))v=!0;else{if(!/^mod$/i.test(K))throw new Error(`Unrecognized modifier name: ${K}`);Rt()||ze()?M=!0:_=!0}}return u&&(l=`Alt-${l}`),_&&(l=`Ctrl-${l}`),M&&(l=`Meta-${l}`),v&&(l=`Shift-${l}`),l}(t).split(/-(?!$)/),M=v.find(tt=>!["Alt","Ctrl","Meta","Shift"].includes(tt)),I=new KeyboardEvent("keydown",{key:"Space"===M?" ":M,altKey:v.includes("Alt"),ctrlKey:v.includes("Ctrl"),metaKey:v.includes("Meta"),shiftKey:v.includes("Shift"),bubbles:!0,cancelable:!0}),K=n.captureTransaction(()=>{l.someProp("handleKeyDown",tt=>tt(l,I))});return null==K||K.steps.forEach(tt=>{const et=tt.map(u.mapping);et&&_&&u.maybeStep(et)}),!0};function Dn(t,n,l={}){const{from:u,to:_,empty:v}=t.selection,M=n?St(n,t.schema):null,I=[];t.doc.nodesBetween(u,_,(vt,Pt)=>{if(vt.isText)return;const $t=Math.max(u,Pt),Xt=Math.min(_,Pt+vt.nodeSize);I.push({node:vt,from:$t,to:Xt})});const K=_-u,tt=I.filter(vt=>!M||M.name===vt.node.type.name).filter(vt=>C(vt.node.attrs,l,{strict:!1}));return v?!!tt.length:tt.reduce((vt,Pt)=>vt+Pt.to-Pt.from,0)>=K}var vo=(t,n={})=>({state:l,dispatch:u})=>!!Dn(l,St(t,l.schema),n)&&((t,n)=>{let{$from:l,$to:u}=t.selection,_=l.blockRange(u),v=_&&(0,p.k9)(_);return null!=v&&(n&&n(t.tr.lift(_,v).scrollIntoView()),!0)})(l,u),fn=()=>({state:t,dispatch:n})=>Ot(t,n),Eo=t=>({state:n,dispatch:l})=>function(t){return function(n,l){let{$from:u,$to:_}=n.selection,v=u.blockRange(_,M=>M.childCount>0&&M.firstChild.type==t);return!!v&&(!l||(u.node(v.depth-1).type==t?function(t,n,l,u){let _=t.tr,v=u.end,M=u.$to.end(u.depth);v<M&&(_.step(new p.FC(v-1,M,v,M,new y.p2(y.HY.from(l.create(null,u.parent.copy())),1,0),1,!0)),u=new y.Ts(_.doc.resolve(u.$from.pos),_.doc.resolve(M),u.depth));const I=(0,p.k9)(u);if(null==I)return!1;_.lift(u,I);let K=_.mapping.map(v,-1)-1;return(0,p.Mn)(_.doc,K)&&_.join(K),n(_.scrollIntoView()),!0}(n,l,t,v):function(t,n,l){let u=t.tr,_=l.parent;for(let $t=l.end,Xt=l.endIndex-1,ee=l.startIndex;Xt>ee;Xt--)$t-=_.child(Xt).nodeSize,u.delete($t-1,$t+1);let v=u.doc.resolve(l.start),M=v.nodeAfter;if(u.mapping.map(l.end)!=l.start+v.nodeAfter.nodeSize)return!1;let I=0==l.startIndex,K=l.endIndex==_.childCount,tt=v.node(-1),et=v.index(-1);if(!tt.canReplace(et+(I?0:1),et+1,M.content.append(K?y.HY.empty:y.HY.from(_))))return!1;let vt=v.pos,Pt=vt+M.nodeSize;return u.step(new p.FC(vt-(I?1:0),Pt+(K?1:0),vt+1,Pt-1,new y.p2((I?y.HY.empty:y.HY.from(_.copy(y.HY.empty))).append(K?y.HY.empty:y.HY.from(_.copy(y.HY.empty))),I?0:1,K?0:1),I?0:1)),n(u.scrollIntoView()),!0}(n,l,v)))}}(St(t,n.schema))(n,l),Wn=()=>({state:t,dispatch:n})=>xt(t,n);function Mn(t,n){return n.nodes[t]?"node":n.marks[t]?"mark":null}function Kn(t,n){const l="string"==typeof n?[n]:n;return Object.keys(t).reduce((u,_)=>(l.includes(_)||(u[_]=t[_]),u),{})}var To=(t,n)=>({tr:l,state:u,dispatch:_})=>{let v=null,M=null;const I=Mn("string"==typeof t?t:t.name,u.schema);return!!I&&("node"===I&&(v=St(t,u.schema)),"mark"===I&&(M=z(t,u.schema)),_&&l.selection.ranges.forEach(K=>{u.doc.nodesBetween(K.$from.pos,K.$to.pos,(tt,et)=>{v&&v===tt.type&&l.setNodeMarkup(et,void 0,Kn(tt.attrs,n)),M&&tt.marks.length&&tt.marks.forEach(vt=>{M===vt.type&&l.addMark(et,et+tt.nodeSize,M.create(Kn(vt.attrs,n)))})})}),!0)},In=()=>({tr:t,dispatch:n})=>(n&&t.scrollIntoView(),!0),Do=()=>({tr:t,commands:n})=>n.setTextSelection({from:0,to:t.doc.content.size}),Jn=()=>({state:t,dispatch:n})=>Ct(t,n),yn=()=>({state:t,dispatch:n})=>At(t,n),Mo=()=>({state:t,dispatch:n})=>((t,n)=>{let _,{$from:l,to:u}=t.selection,v=l.sharedDepth(u);return 0!=v&&(_=l.before(v),n&&n(t.tr.setSelection(E.qv.create(t.doc,_))),!0)})(t,n),yo=()=>({state:t,dispatch:n})=>ot(t,n),bo=()=>({state:t,dispatch:n})=>Q(t,n);function Qn(t,n,l={}){return _e(t,n,{slice:!1,parseOptions:l})}var Oo=(t,n=!1,l={})=>({tr:u,editor:_,dispatch:v})=>{const{doc:M}=u,I=Qn(t,_.schema,l);return v&&u.replaceWith(0,M.content.size,I).setMeta("preventUpdate",!n),!0};function xo(t,n){const l=new p.wx(t);return n.forEach(u=>{u.steps.forEach(_=>{l.step(_)})}),l}function kn(t){for(let n=0;n<t.edgeCount;n+=1){const{type:l}=t.edge(n);if(l.isTextblock&&!l.hasRequiredAttrs())return l}return null}function Gn(t,n){const l=[];return t.descendants((u,_)=>{n(u)&&l.push({node:u,pos:_})}),l}function Ao(t,n,l){const u=[];return t.nodesBetween(n.from,n.to,(_,v)=>{l(_)&&u.push({node:_,pos:v})}),u}function $n(t,n){for(let l=t.depth;l>0;l-=1){const u=t.node(l);if(n(u))return{pos:l>0?t.before(l):0,start:t.start(l),depth:l,node:u}}}function wn(t){return n=>$n(n.$from,t)}function Rn(t,n){const l=y.PW.fromSchema(n).serializeFragment(t),_=document.implementation.createHTMLDocument().createElement("div");return _.appendChild(l),_.innerHTML}function Pn(t){return Ft(Wt.resolve(t))}function Po(t,n){const l=Pn(n);return Rn(y.NB.fromJSON(l,t).content,l)}function Bn(t,n){const l=Pn(n),u=me(t);return y.aw.fromSchema(l).parse(u).toJSON()}function Zn(t,n){return nt(t,{from:0,to:t.content.size},n)}function bn(t,n,l){const{blockSeparator:u="\n\n",textSerializers:_={}}=l||{},v=Pn(n);return Zn(y.NB.fromJSON(v,t),{blockSeparator:u,textSerializers:ie(ie({},dt(v)),_)})}function Yn(t,n){const l=z(n,t.schema),{from:u,to:_,empty:v}=t.selection,M=[];v?(t.storedMarks&&M.push(...t.storedMarks),M.push(...t.selection.$head.marks())):t.doc.nodesBetween(u,_,K=>{M.push(...K.marks)});const I=M.find(K=>K.type.name===l.name);return I?ie({},I.attrs):{}}function Xn(t,n){const l=St(n,t.schema),{from:u,to:_}=t.selection,v=[];t.doc.nodesBetween(u,_,I=>{v.push(I)});const M=v.reverse().find(I=>I.type.name===l.name);return M?ie({},M.attrs):{}}function On(t,n){const l=Mn("string"==typeof n?n:n.name,t.schema);return"node"===l?Xn(t,n):"mark"===l?Yn(t,n):{}}function qn(t,n=JSON.stringify){const l={};return t.filter(u=>{const _=n(u);return!Object.prototype.hasOwnProperty.call(l,_)&&(l[_]=!0)})}function Sn(t){const{mapping:n,steps:l}=t,u=[];return n.maps.forEach((_,v)=>{const M=[];if(_.ranges.length)_.forEach((I,K)=>{M.push({from:I,to:K})});else{const{from:I,to:K}=l[v];if(void 0===I||void 0===K)return;M.push({from:I,to:K})}M.forEach(({from:I,to:K})=>{const tt=n.slice(v).map(I,-1),et=n.slice(v).map(K),vt=n.invert().map(tt,-1),Pt=n.invert().map(et);u.push({oldRange:{from:vt,to:Pt},newRange:{from:tt,to:et}})})}),function(t){const n=qn(t);return 1===n.length?n:n.filter((l,u)=>!n.filter((v,M)=>M!==u).some(v=>l.oldRange.from>=v.oldRange.from&&l.oldRange.to<=v.oldRange.to&&l.newRange.from>=v.newRange.from&&l.newRange.to<=v.newRange.to))}(u)}function Ln(t,n=0){const u=t.type===t.type.schema.topNodeType?0:1,_=n,v=_+t.nodeSize,M=t.marks.map(tt=>{const et={type:tt.type.name};return Object.keys(tt.attrs).length&&(et.attrs=ie({},tt.attrs)),et}),I=ie({},t.attrs),K={type:t.type.name,from:_,to:v};return Object.keys(I).length&&(K.attrs=I),M.length&&(K.marks=M),t.content.childCount&&(K.content=[],t.forEach((tt,et)=>{var vt;null==(vt=K.content)||vt.push(Ln(tt,n+et+u))})),t.text&&(K.text=t.text),K}function sn(t,n,l){const u=[];return t===n?l.resolve(t).marks().forEach(_=>{const M=R(l.resolve(t-1),_.type);!M||u.push(ie({mark:_},M))}):l.nodesBetween(t,n,(_,v)=>{u.push(..._.marks.map(M=>({from:v,to:v+_.nodeSize,mark:M})))}),u}function xn(t,n,l={}){const{empty:u,ranges:_}=t.selection,v=n?z(n,t.schema):null;if(u)return!!(t.storedMarks||t.selection.$from.marks()).filter(vt=>!v||v.name===vt.type.name).find(vt=>C(vt.attrs,l,{strict:!1}));let M=0;const I=[];if(_.forEach(({$from:vt,$to:Pt})=>{const $t=vt.pos,Xt=Pt.pos;t.doc.nodesBetween($t,Xt,(ee,ue)=>{if(!ee.isText&&!ee.marks.length)return;const re=Math.max($t,ue),Ye=Math.min(Xt,ue+ee.nodeSize);M+=Ye-re,I.push(...ee.marks.map(An=>({mark:An,from:re,to:Ye})))})}),0===M)return!1;const K=I.filter(vt=>!v||v.name===vt.mark.type.name).filter(vt=>C(vt.mark.attrs,l,{strict:!1})).reduce((vt,Pt)=>vt+Pt.to-Pt.from,0),tt=I.filter(vt=>!v||vt.mark.type!==v&&vt.mark.type.excludes(v)).reduce((vt,Pt)=>vt+Pt.to-Pt.from,0);return(K>0?K+tt:K)>=M}function en(t,n,l={}){if(!n)return Dn(t,null,l)||xn(t,null,l);const u=Mn(n,t.schema);return"node"===u?Dn(t,n,l):"mark"===u&&xn(t,n,l)}function mn(t,n){const{nodeExtensions:l}=U(n),u=l.find(M=>M.name===t);if(!u)return!1;const v=g(H(u,"group",{name:u.name,options:u.options,storage:u.storage}));return"string"==typeof v&&v.split(" ").includes("list")}function gn(t){var n;const l=null==(n=t.type.createAndFill())?void 0:n.toJSON(),u=t.toJSON();return JSON.stringify(l)===JSON.stringify(u)}function Ze(t){return t instanceof E.qv}function qe(t,n,l){const _=t.state.doc.content.size,v=rt(n,0,_),M=rt(l,0,_),I=t.coordsAtPos(v),K=t.coordsAtPos(M,-1),tt=Math.min(I.top,K.top),et=Math.max(I.bottom,K.bottom),vt=Math.min(I.left,K.left),Pt=Math.max(I.right,K.right),re={top:tt,bottom:et,left:vt,right:Pt,width:Pt-vt,height:et-tt,x:vt,y:tt};return ye(ie({},re),{toJSON:()=>re})}var So=(t,n={})=>({tr:l,state:u,dispatch:_})=>{const{selection:v}=l,{empty:M,ranges:I}=v,K=z(t,u.schema);if(_)if(M){const tt=Yn(u,K);l.addStoredMark(K.create(ie(ie({},tt),n)))}else I.forEach(tt=>{const et=tt.$from.pos,vt=tt.$to.pos;u.doc.nodesBetween(et,vt,(Pt,$t)=>{const Xt=Math.max($t,et),ee=Math.min($t+Pt.nodeSize,vt);Pt.marks.find(re=>re.type===K)?Pt.marks.forEach(re=>{K===re.type&&l.addMark(Xt,ee,K.create(ie(ie({},re.attrs),n)))}):l.addMark(Xt,ee,K.create(n))})});return function(t,n,l){var u;const{selection:_}=n;let v=null;if(G(_)&&(v=_.$cursor),v){const I=null!=(u=t.storedMarks)?u:v.marks();return!!l.isInSet(I)||!I.some(K=>K.type.excludes(l))}const{ranges:M}=_;return M.some(({$from:I,$to:K})=>{let tt=0===I.depth&&t.doc.inlineContent&&t.doc.type.allowsMarkType(l);return t.doc.nodesBetween(I.pos,K.pos,(et,vt,Pt)=>{if(tt)return!1;if(et.isInline){const $t=!Pt||Pt.type.allowsMarkType(l),Xt=!!l.isInSet(et.marks)||!et.marks.some(ee=>ee.type.excludes(l));tt=$t&&Xt}return!tt}),tt})}(u,l,K)},eo=(t,n)=>({tr:l})=>(l.setMeta(t,n),!0),Io=(t,n={})=>({state:l,dispatch:u,chain:_})=>{const v=St(t,l.schema);return v.isTextblock?_().command(({commands:M})=>!!Kt(v,n)(l)||M.clearNodes()).command(({state:M})=>Kt(v,n)(M,u)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},no=t=>({tr:n,dispatch:l})=>{if(l){const{doc:u}=n,_=rt(t,0,u.content.size),v=E.qv.create(u,_);n.setSelection(v)}return!0},oo=t=>({tr:n,dispatch:l})=>{if(l){const{doc:u}=n,{from:_,to:v}="number"==typeof t?{from:t,to:t}:t,M=E.Bs.atStart(u).from,I=E.Bs.atEnd(u).to,K=rt(_,M,I),tt=rt(v,M,I),et=E.Bs.create(u,K,tt);n.setSelection(et)}return!0},Nn=t=>({state:n,dispatch:l})=>function(t){return function(n,l){let{$from:u,$to:_}=n.selection,v=u.blockRange(_,tt=>tt.childCount>0&&tt.firstChild.type==t);if(!v)return!1;let M=v.startIndex;if(0==M)return!1;let I=v.parent,K=I.child(M-1);if(K.type!=t)return!1;if(l){let tt=K.lastChild&&K.lastChild.type==I.type,et=y.HY.from(tt?t.create():null),vt=new y.p2(y.HY.from(t.create(null,y.HY.from(I.type.create(null,et)))),tt?3:1,0),Pt=v.start,$t=v.end;l(n.tr.step(new p.FC(Pt-(tt?3:1),$t,Pt,$t,vt,1,!0)).scrollIntoView())}return!0}}(St(t,n.schema))(n,l);function ln(t,n,l){return Object.fromEntries(Object.entries(l).filter(([u])=>{const _=t.find(v=>v.type===n&&v.name===u);return!!_&&_.attribute.keepOnSplit}))}function Fn(t,n){const l=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(l){const u=l.filter(_=>null==n?void 0:n.includes(_.type.name));t.tr.ensureMarks(u)}}var io=({keepMarks:t=!0}={})=>({tr:n,state:l,dispatch:u,editor:_})=>{const{selection:v,doc:M}=n,{$from:I,$to:K}=v,et=ln(_.extensionManager.attributes,I.node().type.name,I.node().attrs);if(v instanceof E.qv&&v.node.isBlock)return!(!I.parentOffset||!(0,p.Ax)(M,I.pos)||(u&&(t&&Fn(l,_.extensionManager.splittableMarks),n.split(I.pos).scrollIntoView()),0));if(!I.parent.isBlock)return!1;if(u){const vt=K.parentOffset===K.parent.content.size;v instanceof E.Bs&&n.deleteSelection();const Pt=0===I.depth?void 0:kn(I.node(-1).contentMatchAt(I.indexAfter(-1)));let $t=vt&&Pt?[{type:Pt,attrs:et}]:void 0,Xt=(0,p.Ax)(n.doc,n.mapping.map(I.pos),1,$t);if(!$t&&!Xt&&(0,p.Ax)(n.doc,n.mapping.map(I.pos),1,Pt?[{type:Pt}]:void 0)&&(Xt=!0,$t=Pt?[{type:Pt,attrs:et}]:void 0),Xt&&(n.split(n.mapping.map(I.pos),1,$t),Pt&&!vt&&!I.parentOffset&&I.parent.type!==Pt)){const ee=n.mapping.map(I.before()),ue=n.doc.resolve(ee);I.node(-1).canReplaceWith(ue.index(),ue.index()+1,Pt)&&n.setNodeMarkup(n.mapping.map(I.before()),Pt)}t&&Fn(l,_.extensionManager.splittableMarks),n.scrollIntoView()}return!0},jn=t=>({tr:n,state:l,dispatch:u,editor:_})=>{var v;const M=St(t,l.schema),{$from:I,$to:K}=l.selection,tt=l.selection.node;if(tt&&tt.isBlock||I.depth<2||!I.sameParent(K))return!1;const et=I.node(-1);if(et.type!==M)return!1;const vt=_.extensionManager.attributes;if(0===I.parent.content.size&&I.node(-1).childCount===I.indexAfter(-1)){if(2===I.depth||I.node(-3).type!==M||I.index(-2)!==I.node(-2).childCount-1)return!1;if(u){let ue=y.HY.empty;const re=I.index(-1)?1:I.index(-2)?2:3;for(let Un=I.depth-re;Un>=I.depth-3;Un-=1)ue=y.HY.from(I.node(Un).copy(ue));const Ye=I.indexAfter(-1)<I.node(-2).childCount?1:I.indexAfter(-2)<I.node(-3).childCount?2:3,Cn=ln(vt,I.node().type.name,I.node().attrs),An=(null==(v=M.contentMatch.defaultType)?void 0:v.createAndFill(Cn))||void 0;ue=ue.append(y.HY.from(M.createAndFill(null,An)||void 0));const mo=I.before(I.depth-(re-1));n.replace(mo,I.after(-Ye),new y.p2(ue,4-re,0));let go=-1;n.doc.nodesBetween(mo,n.doc.content.size,(Un,Go)=>{if(go>-1)return!1;Un.isTextblock&&0===Un.content.size&&(go=Go+1)}),go>-1&&n.setSelection(E.Bs.near(n.doc.resolve(go))),n.scrollIntoView()}return!0}const Pt=K.pos===I.end()?et.contentMatchAt(0).defaultType:null,$t=ln(vt,et.type.name,et.attrs),Xt=ln(vt,I.node().type.name,I.node().attrs);n.delete(I.pos,K.pos);const ee=Pt?[{type:M,attrs:$t},{type:Pt,attrs:Xt}]:[{type:M,attrs:$t}];return!!(0,p.Ax)(n.doc,I.pos,2)&&(u&&n.split(I.pos,2,ee).scrollIntoView(),!0)},ro=(t,n)=>{const l=wn(M=>M.type===n)(t.selection);if(!l)return!0;const u=t.doc.resolve(Math.max(0,l.pos-1)).before(l.depth);if(void 0===u)return!0;const _=t.doc.nodeAt(u);return l.node.type===(null==_?void 0:_.type)&&(0,p.Mn)(t.doc,l.pos)&&t.join(l.pos),!0},so=(t,n)=>{const l=wn(M=>M.type===n)(t.selection);if(!l)return!0;const u=t.doc.resolve(l.start).after(l.depth);if(void 0===u)return!0;const _=t.doc.nodeAt(u);return l.node.type===(null==_?void 0:_.type)&&(0,p.Mn)(t.doc,u)&&t.join(u),!0},ko=(t,n)=>({editor:l,tr:u,state:_,dispatch:v,chain:M,commands:I,can:K})=>{const{extensions:tt}=l.extensionManager,et=St(t,_.schema),vt=St(n,_.schema),{selection:Pt}=_,{$from:$t,$to:Xt}=Pt,ee=$t.blockRange(Xt);if(!ee)return!1;const ue=wn(re=>mn(re.type.name,tt))(Pt);if(ee.depth>=1&&ue&&ee.depth-ue.depth<=1){if(ue.node.type===et)return I.liftListItem(vt);if(mn(ue.node.type.name,tt)&&et.validContent(ue.node.content)&&v)return M().command(()=>(u.setNodeMarkup(ue.pos,et),!0)).command(()=>ro(u,et)).command(()=>so(u,et)).run()}return M().command(()=>!!K().wrapInList(et)||I.clearNodes()).wrapInList(et).command(()=>ro(u,et)).command(()=>so(u,et)).run()},wo=(t,n={},l={})=>({state:u,commands:_})=>{const{extendEmptyMarkRange:v=!1}=l,M=z(t,u.schema);return xn(u,M,n)?_.unsetMark(M,{extendEmptyMarkRange:v}):_.setMark(M,n)},lo=(t,n,l={})=>({state:u,commands:_})=>{const v=St(t,u.schema),M=St(n,u.schema);return Dn(u,v,l)?_.setNode(M):_.setNode(v,l)},ao=(t,n={})=>({state:l,commands:u})=>{const _=St(t,l.schema);return Dn(l,_,n)?u.lift(_):u.wrapIn(_,n)},Ro=()=>({state:t,dispatch:n})=>{const l=t.plugins;for(let u=0;u<l.length;u+=1){const _=l[u];let v;if(_.spec.isInputRules&&(v=_.getState(t))){if(n){const M=t.tr,I=v.transform;for(let K=I.steps.length-1;K>=0;K-=1)M.step(I.steps[K].invert(I.docs[K]));if(v.text){const K=M.doc.resolve(v.from).marks();M.replaceWith(v.from,v.to,t.schema.text(v.text,K))}else M.delete(v.from,v.to)}return!0}}return!1},Bo=()=>({tr:t,dispatch:n})=>{const{selection:l}=t,{empty:u,ranges:_}=l;return u||n&&_.forEach(v=>{t.removeMark(v.$from.pos,v.$to.pos)}),!0},Lo=(t,n={})=>({tr:l,state:u,dispatch:_})=>{var v;const{extendEmptyMarkRange:M=!1}=n,{selection:I}=l,K=z(t,u.schema),{$from:tt,empty:et,ranges:vt}=I;if(!_)return!0;if(et&&M){let{from:Pt,to:$t}=I;const Xt=null==(v=tt.marks().find(ue=>ue.type===K))?void 0:v.attrs,ee=R(tt,K,Xt);ee&&(Pt=ee.from,$t=ee.to),l.removeMark(Pt,$t,K)}else vt.forEach(Pt=>{l.removeMark(Pt.$from.pos,Pt.$to.pos,K)});return l.removeStoredMark(K),!0},No=(t,n={})=>({tr:l,state:u,dispatch:_})=>{let v=null,M=null;const I=Mn("string"==typeof t?t:t.name,u.schema);return!!I&&("node"===I&&(v=St(t,u.schema)),"mark"===I&&(M=z(t,u.schema)),_&&l.selection.ranges.forEach(K=>{const tt=K.$from.pos,et=K.$to.pos;u.doc.nodesBetween(tt,et,(vt,Pt)=>{v&&v===vt.type&&l.setNodeMarkup(Pt,void 0,ie(ie({},vt.attrs),n)),M&&vt.marks.length&&vt.marks.forEach($t=>{if(M===$t.type){const Xt=Math.max(Pt,tt),ee=Math.min(Pt+vt.nodeSize,et);l.addMark(Xt,ee,M.create(ie(ie({},$t.attrs),n)))}})})}),!0)},Fo=(t,n={})=>({state:l,dispatch:u})=>function(t,n=null){return function(l,u){let{$from:_,$to:v}=l.selection,M=_.blockRange(v),I=M&&(0,p.nd)(M,t,n);return!!I&&(u&&u(l.tr.wrap(M,I).scrollIntoView()),!0)}}(St(t,l.schema),n)(l,u),co=(t,n={})=>({state:l,dispatch:u})=>function(t,n=null){return function(l,u){let{$from:_,$to:v}=l.selection,M=_.blockRange(v),I=!1,K=M;if(!M)return!1;if(M.depth>=2&&_.node(M.depth-1).type.compatibleContent(t)&&0==M.startIndex){if(0==_.index(M.depth-1))return!1;let et=l.doc.resolve(M.start-2);K=new y.Ts(et,et,M.depth),M.endIndex<M.parent.childCount&&(M=new y.Ts(_,l.doc.resolve(v.end(M.depth)),M.depth)),I=!0}let tt=(0,p.nd)(K,t,n,M);return!!tt&&(u&&u(function(t,n,l,u,_){let v=y.HY.empty;for(let et=l.length-1;et>=0;et--)v=y.HY.from(l[et].type.create(l[et].attrs,v));t.step(new p.FC(n.start-(u?2:0),n.end,n.start,n.end,new y.p2(v,0,0),l.length,!0));let M=0;for(let et=0;et<l.length;et++)l[et].type==_&&(M=et+1);let I=l.length-M,K=n.start+l.length-(u?2:0),tt=n.parent;for(let et=n.startIndex,vt=n.endIndex,Pt=!0;et<vt;et++,Pt=!1)!Pt&&(0,p.Ax)(t.doc,K,I)&&(t.split(K,I),K+=2*I),K+=tt.child(et).nodeSize;return t}(l.tr,M,tt,I,t).scrollIntoView()),!0)}}(St(t,l.schema),n)(l,u),Ho=L.create({name:"commands",addCommands:()=>ie({},Ht)}),zo=L.create({name:"editable",addProseMirrorPlugins(){return[new E.Sy({key:new E.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Vn=L.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new E.Sy({key:new E.H$("focusEvents"),props:{handleDOMEvents:{focus:(n,l)=>{t.isFocused=!0;const u=t.state.tr.setMeta("focus",{event:l}).setMeta("addToHistory",!1);return n.dispatch(u),!1},blur:(n,l)=>{t.isFocused=!1;const u=t.state.tr.setMeta("blur",{event:l}).setMeta("addToHistory",!1);return n.dispatch(u),!1}}}})]}}),Uo=L.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:M})=>[()=>M.undoInputRule(),()=>M.command(({tr:I})=>{const{selection:K,doc:tt}=I,{empty:et,$anchor:vt}=K,{pos:Pt,parent:$t}=vt,Xt=E.Y1.atStart(tt).from===Pt;return!(!(et&&Xt&&$t.type.isTextblock)||$t.textContent.length)&&M.clearNodes()}),()=>M.deleteSelection(),()=>M.joinBackward(),()=>M.selectNodeBackward()]),n=()=>this.editor.commands.first(({commands:M})=>[()=>M.deleteSelection(),()=>M.deleteCurrentNode(),()=>M.joinForward(),()=>M.selectNodeForward()]),u={Enter:()=>this.editor.commands.first(({commands:M})=>[()=>M.newlineInCode(),()=>M.createParagraphNear(),()=>M.liftEmptyBlock(),()=>M.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:n,"Mod-Delete":n,"Mod-a":()=>this.editor.commands.selectAll()},_=ie({},u),v=ye(ie({},u),{"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return Rt()||ze()?v:_},addProseMirrorPlugins(){return[new E.Sy({key:new E.H$("clearDocument"),appendTransaction:(t,n,l)=>{if(!t.some(Xt=>Xt.docChanged)||n.doc.eq(l.doc))return;const{empty:_,from:v,to:M}=n.selection,I=E.Y1.atStart(n.doc).from,K=E.Y1.atEnd(n.doc).to,tt=v===I&&M===K,et=0===l.doc.textBetween(0,l.doc.content.size," "," ").length;if(_||!tt||!et)return;const vt=l.tr,Pt=b({state:l,transaction:vt}),{commands:$t}=new N({editor:this.editor,state:Pt});return $t.clearNodes(),vt.steps.length?vt:void 0}})]}}),$o=L.create({name:"tabindex",addProseMirrorPlugins(){return[new E.Sy({key:new E.H$("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function Wo(t,n){const l=document.querySelector("style[data-tiptap-style]");if(null!==l)return l;const u=document.createElement("style");return n&&u.setAttribute("nonce",n),u.setAttribute("data-tiptap-style",""),u.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(u),u}var Ko=class extends class{constructor(){this.callbacks={}}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),this}emit(t,...n){const l=this.callbacks[t];return l&&l.forEach(u=>u.apply(this,n)),this}off(t,n){const l=this.callbacks[t];return l&&(n?this.callbacks[t]=l.filter(u=>u!==n):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Wo('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(t={}){this.options=ie(ie({},this.options),t),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,n=!0){this.setOptions({editable:t}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,n){const l=d(n)?n(t,[...this.state.plugins]):[...this.state.plugins,t],u=this.state.reconfigure({plugins:l});this.view.updateState(u)}unregisterPlugin(t){if(this.isDestroyed)return;const n="string"==typeof t?`${t}$`:t.key,l=this.state.reconfigure({plugins:this.state.plugins.filter(u=>!u.key.startsWith(n))});this.view.updateState(l)}createExtensionManager(){const n=[...this.options.enableCoreExtensions?Object.values(Jt):[],...this.options.extensions].filter(l=>["extension","node","mark"].includes(null==l?void 0:l.type));this.extensionManager=new Wt(n,this)}createCommandManager(){this.commandManager=new N({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=Qn(this.options.content,this.schema,this.options.parseOptions),n=It(t,this.options.autofocus);this.view=new r.tk(this.options.element,ye(ie({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:E.yy.create({doc:t,selection:n||void 0})}));const l=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(l),this.createNodeViews(),this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(t){if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach(v=>{var M;return null==(M=this.capturedTransaction)?void 0:M.step(v)}):void(this.capturedTransaction=t);const n=this.state.apply(t),l=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),l&&this.emit("selectionUpdate",{editor:this,transaction:t});const u=t.getMeta("focus"),_=t.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:t}),_&&this.emit("blur",{editor:this,event:_.event,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return On(this.state,t)}isActive(t,n){return en(this.state,"string"==typeof t?t:null,"string"==typeof t?n:t)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Rn(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:n="\n\n",textSerializers:l={}}=t||{};return Zn(this.state.doc,{blockSeparator:n,textSerializers:ie(ie({},l),dt(this.schema))})}get isEmpty(){return gn(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(null==(t=this.view)?void 0:t.docView)}};function uo(t){return new Qe({find:t.find,handler:({state:n,range:l,match:u})=>{const _=g(t.getAttributes,void 0,u);if(!1===_||null===_)return null;const{tr:v}=n,M=u[u.length-1],I=u[0];let K=l.to;if(M){const tt=I.search(/\S/),et=l.from+I.indexOf(M),vt=et+M.length;if(sn(l.from,l.to,n.doc).filter($t=>$t.mark.type.excluded.find(ee=>ee===t.type&&ee!==$t.mark.type)).filter($t=>$t.to>et).length)return null;vt<l.to&&v.delete(vt,l.to),et>l.from&&v.delete(l.from+tt,et),K=l.from+tt+M.length,v.addMark(l.from+tt,K,t.type.create(_||{})),v.removeStoredMark(t.type)}}})}function po(t){return new Qe({find:t.find,handler:({state:n,range:l,match:u})=>{const _=g(t.getAttributes,void 0,u)||{},{tr:v}=n,M=l.from;let I=l.to;if(u[1]){let tt=M+u[0].lastIndexOf(u[1]);tt>I?tt=I:I=tt+u[1].length,v.insertText(u[0][u[0].length-1],M+u[0].length-1),v.replaceWith(tt,I,t.type.create(_))}else u[0]&&v.replaceWith(M,I,t.type.create(_))}})}function ho(t){return new Qe({find:t.find,handler:({state:n,range:l,match:u})=>{const _=n.doc.resolve(l.from),v=g(t.getAttributes,void 0,u)||{};if(!_.node(-1).canReplaceWith(_.index(-1),_.indexAfter(-1),t.type))return null;n.tr.delete(l.from,l.to).setBlockType(l.from,l.from,t.type,v)}})}function Jo(t){return new Qe({find:t.find,handler:({state:n,range:l,match:u})=>{let _=t.replace,v=l.from;const M=l.to;if(u[1]){const I=u[0].lastIndexOf(u[1]);_+=u[0].slice(I+u[1].length),v+=I;const K=v-M;K>0&&(_=u[0].slice(I-K,I)+_,v=M)}n.tr.insertText(_,v,M)}})}function fo(t){return new Qe({find:t.find,handler:({state:n,range:l,match:u})=>{const _=g(t.getAttributes,void 0,u)||{},v=n.tr.delete(l.from,l.to),I=v.doc.resolve(l.from).blockRange(),K=I&&(0,p.nd)(I,t.type,_);if(!K)return null;v.wrap(I,K);const tt=v.doc.resolve(l.from-1).nodeBefore;tt&&tt.type===t.type&&(0,p.Mn)(v.doc,l.from-1)&&(!t.joinPredicate||t.joinPredicate(u,tt))&&v.join(l.from-1)}})}var Hn=class{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ie(ie({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=g(H(this,"addOptions",{name:this.name}))),this.storage=g(H(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Hn(t)}configure(t={}){const n=this.extend();return n.options=J(this.options,t),n.storage=g(H(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new Hn(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=g(H(n,"addOptions",{name:n.name})),n.storage=g(H(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:t,mark:n}){const{tr:l}=t.state,u=t.state.selection.$from;if(u.pos===u.end()){const v=u.marks();if(!v.find(K=>(null==K?void 0:K.type.name)===n.name))return!1;const I=v.find(K=>(null==K?void 0:K.type.name)===n.name);return I&&l.removeStoredMark(I),l.insertText(" ",u.pos),t.view.dispatch(l),!0}return!1}},zn=class{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ie(ie({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=g(H(this,"addOptions",{name:this.name}))),this.storage=g(H(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new zn(t)}configure(t={}){const n=this.extend();return n.options=J(this.options,t),n.storage=g(H(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new zn(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=g(H(n,"addOptions",{name:n.name})),n.storage=g(H(n,"addStorage",{name:n.name,options:n.options})),n}},o=class{constructor(t,n,l){this.isDragging=!1,this.component=t,this.editor=n.editor,this.options=ie({stopEvent:null,ignoreMutation:null},l),this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var n,l,u,_,v,M,I;const{view:K}=this.editor,tt=t.target,et=3===tt.nodeType?null==(n=tt.parentElement)?void 0:n.closest("[data-drag-handle]"):tt.closest("[data-drag-handle]");if(!this.dom||(null==(l=this.contentDOM)?void 0:l.contains(tt))||!et)return;let vt=0,Pt=0;if(this.dom!==et){const ee=this.dom.getBoundingClientRect(),ue=et.getBoundingClientRect(),re=null!=(_=t.offsetX)?_:null==(u=t.nativeEvent)?void 0:u.offsetX,Ye=null!=(M=t.offsetY)?M:null==(v=t.nativeEvent)?void 0:v.offsetY;vt=ue.x-ee.x+re,Pt=ue.y-ee.y+Ye}null==(I=t.dataTransfer)||I.setDragImage(this.dom,vt,Pt);const $t=E.qv.create(K.state.doc,this.getPos()),Xt=K.state.tr.setSelection($t);K.dispatch(Xt)}stopEvent(t){var n;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:t});const l=t.target;if(!this.dom.contains(l)||(null==(n=this.contentDOM)?void 0:n.contains(l)))return!1;const _="drop"===t.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(l.tagName)||l.isContentEditable)&&!_)return!0;const{isEditable:M}=this.editor,{isDragging:I}=this,K=!!this.node.type.spec.draggable,tt=E.qv.isSelectable(this.node),et="copy"===t.type,vt="paste"===t.type,Pt="cut"===t.type,$t="mousedown"===t.type,Xt=t.type.startsWith("drag");if(!K&&tt&&Xt&&t.preventDefault(),K&&Xt&&!I)return t.preventDefault(),!1;if(K&&M&&!I&&$t){const ee=l.closest("[data-drag-handle]");ee&&(this.dom===ee||this.dom.contains(ee))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(I||_||et||vt||Pt||$t&&tt)}ignoreMutation(t){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:t}):!(!this.node.isLeaf&&!this.node.isAtom&&("selection"===t.type||this.dom.contains(t.target)&&"childList"===t.type&&Rt()&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(l=>l.isContentEditable)||(this.contentDOM!==t.target||"attributes"!==t.type)&&this.contentDOM.contains(t.target))))}updateAttributes(t){this.editor.commands.command(({tr:n})=>{const l=this.getPos();return n.setNodeMarkup(l,void 0,ie(ie({},this.node.attrs),t)),!0})}deleteNode(){const t=this.getPos();this.editor.commands.deleteRange({from:t,to:t+this.node.nodeSize})}};function e(t){return new rn({find:t.find,handler:({state:n,range:l,match:u})=>{const _=g(t.getAttributes,void 0,u);if(!1===_||null===_)return null;const{tr:v}=n,M=u[u.length-1],I=u[0];let K=l.to;if(M){const tt=I.search(/\S/),et=l.from+I.indexOf(M),vt=et+M.length;if(sn(l.from,l.to,n.doc).filter($t=>$t.mark.type.excluded.find(ee=>ee===t.type&&ee!==$t.mark.type)).filter($t=>$t.to>et).length)return null;vt<l.to&&v.delete(vt,l.to),et>l.from&&v.delete(l.from+tt,et),K=l.from+tt+M.length,v.addMark(l.from+tt,K,t.type.create(_||{})),v.removeStoredMark(t.type)}}})}function i(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function c(t){return"string"==typeof t}function f(t){return new rn({find:t.find,handler({match:n,chain:l,range:u}){const _=g(t.getAttributes,void 0,n);if(!1===_||null===_)return null;n.input&&l().deleteRange(u).insertContentAt(u.from,{type:t.type.name,attrs:_})}})}function m(t){return new rn({find:t.find,handler:({state:n,range:l,match:u})=>{let _=t.replace,v=l.from;const M=l.to;if(u[1]){const I=u[0].lastIndexOf(u[1]);_+=u[0].slice(I+u[1].length),v+=I;const K=v-M;K>0&&(_=u[0].slice(I-K,I)+_,v=M)}n.tr.insertText(_,v,M)}})}var A=class{constructor(t){this.transaction=t,this.currentStep=this.transaction.steps.length}map(t){let n=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((u,_)=>{const v=_.getMap().mapResult(u);return v.deleted&&(n=!0),v.pos},t),deleted:n}}}},84402:(ne,Mt,a)=>{a.r(Mt),a.d(Mt,{TextStyle:()=>r,default:()=>T});var E=a(12867),r=E.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:y=>!!y.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:y}){return["span",(0,E.mergeAttributes)(this.options.HTMLAttributes,y),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:y,commands:p})=>{const it=(0,E.getMarkAttributes)(y,this.type);return!!Object.entries(it).some(([,Y])=>!!Y)||p.unsetMark(this.name)}}}}),T=r},70768:(ne,Mt,a)=>{a.d(Mt,{$:()=>At,h:()=>zt});for(var E={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},T="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),p=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),it="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),F=p||T&&+T[1]<57,Y=0;Y<10;Y++)E[48+Y]=E[96+Y]=String(Y);for(Y=1;Y<=24;Y++)E[Y+111]="F"+Y;for(Y=65;Y<=90;Y++)E[Y]=String.fromCharCode(Y+32),r[Y]=String.fromCharCode(Y);for(var q in E)r.hasOwnProperty(q)||(r[q]=E[q]);var ut=a(62463);const X="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function Ct(_t){let $,xt,yt,Bt,at=_t.split(/-(?!$)/),ht=at[at.length-1];"Space"==ht&&(ht=" ");for(let Nt=0;Nt<at.length-1;Nt++){let Ot=at[Nt];if(/^(cmd|meta|m)$/i.test(Ot))Bt=!0;else if(/^a(lt)?$/i.test(Ot))$=!0;else if(/^(c|ctrl|control)$/i.test(Ot))xt=!0;else if(/^s(hift)?$/i.test(Ot))yt=!0;else{if(!/^mod$/i.test(Ot))throw new Error("Unrecognized modifier name: "+Ot);X?Bt=!0:xt=!0}}return $&&(ht="Alt-"+ht),xt&&(ht="Ctrl-"+ht),Bt&&(ht="Meta-"+ht),yt&&(ht="Shift-"+ht),ht}function Dt(_t,at,ht){return at.altKey&&(_t="Alt-"+_t),at.ctrlKey&&(_t="Ctrl-"+_t),at.metaKey&&(_t="Meta-"+_t),!1!==ht&&at.shiftKey&&(_t="Shift-"+_t),_t}function zt(_t){return new ut.Sy({props:{handleKeyDown:At(_t)}})}function At(_t){let at=function(_t){let at=Object.create(null);for(let ht in _t)at[Ct(ht)]=_t[ht];return at}(_t);return function(ht,$){let Bt,xt=function(_t){var ht=!(F&&(_t.ctrlKey||_t.altKey||_t.metaKey)||it&&_t.shiftKey&&_t.key&&1==_t.key.length||"Unidentified"==_t.key)&&_t.key||(_t.shiftKey?r:E)[_t.keyCode]||_t.key||"Unidentified";return"Esc"==ht&&(ht="Escape"),"Del"==ht&&(ht="Delete"),"Left"==ht&&(ht="ArrowLeft"),"Up"==ht&&(ht="ArrowUp"),"Right"==ht&&(ht="ArrowRight"),"Down"==ht&&(ht="ArrowDown"),ht}($),yt=1==xt.length&&" "!=xt,Nt=at[Dt(xt,$,!yt)];if(Nt&&Nt(ht.state,ht.dispatch,ht))return!0;if(yt&&($.shiftKey||$.altKey||$.metaKey||xt.charCodeAt(0)>127)&&(Bt=E[$.keyCode])&&Bt!=xt){let Ot=at[Dt(Bt,$,!0)];if(Ot&&Ot(ht.state,ht.dispatch,ht))return!0}else if(yt&&$.shiftKey){let Ot=at[Dt(xt,$,!0)];if(Ot&&Ot(ht.state,ht.dispatch,ht))return!0}return!1}}},77346:(ne,Mt,a)=>{function E(B){this.content=B}a.d(Mt,{aw:()=>Ie,PW:()=>U,HY:()=>p,vc:()=>q,ZU:()=>Fe,NB:()=>gt,Ts:()=>jt,e4:()=>ft,V_:()=>Pe,p2:()=>ut}),E.prototype={constructor:E,find:function(B){for(var s=0;s<this.content.length;s+=2)if(this.content[s]===B)return s;return-1},get:function(B){var s=this.find(B);return-1==s?void 0:this.content[s+1]},update:function(B,s,d){var g=d&&d!=B?this.remove(d):this,P=g.find(B),k=g.content.slice();return-1==P?k.push(d||B,s):(k[P+1]=s,d&&(k[P]=d)),new E(k)},remove:function(B){var s=this.find(B);if(-1==s)return this;var d=this.content.slice();return d.splice(s,2),new E(d)},addToStart:function(B,s){return new E([B,s].concat(this.remove(B).content))},addToEnd:function(B,s){var d=this.remove(B).content.slice();return d.push(B,s),new E(d)},addBefore:function(B,s,d){var g=this.remove(s),P=g.content.slice(),k=g.find(B);return P.splice(-1==k?P.length:k,0,s,d),new E(P)},forEach:function(B){for(var s=0;s<this.content.length;s+=2)B(this.content[s],this.content[s+1])},prepend:function(B){return(B=E.from(B)).size?new E(B.content.concat(this.subtract(B).content)):this},append:function(B){return(B=E.from(B)).size?new E(this.subtract(B).content.concat(B.content)):this},subtract:function(B){var s=this;B=E.from(B);for(var d=0;d<B.content.length;d+=2)s=s.remove(B.content[d]);return s},toObject:function(){var B={};return this.forEach(function(s,d){B[s]=d}),B},get size(){return this.content.length>>1}},E.from=function(B){if(B instanceof E)return B;var s=[];if(B)for(var d in B)s.push(d,B[d]);return new E(s)};const r=E;function T(B,s,d){for(let g=0;;g++){if(g==B.childCount||g==s.childCount)return B.childCount==s.childCount?null:d;let P=B.child(g),k=s.child(g);if(P!=k){if(!P.sameMarkup(k))return d;if(P.isText&&P.text!=k.text){for(let W=0;P.text[W]==k.text[W];W++)d++;return d}if(P.content.size||k.content.size){let W=T(P.content,k.content,d+1);if(null!=W)return W}d+=P.nodeSize}else d+=P.nodeSize}}function y(B,s,d,g){for(let P=B.childCount,k=s.childCount;;){if(0==P||0==k)return P==k?null:{a:d,b:g};let W=B.child(--P),ct=s.child(--k),Ft=W.nodeSize;if(W!=ct){if(!W.sameMarkup(ct))return{a:d,b:g};if(W.isText&&W.text!=ct.text){let ae=0,de=Math.min(W.text.length,ct.text.length);for(;ae<de&&W.text[W.text.length-ae-1]==ct.text[ct.text.length-ae-1];)ae++,d--,g--;return{a:d,b:g}}if(W.content.size||ct.content.size){let ae=y(W.content,ct.content,d-1,g-1);if(ae)return ae}d-=Ft,g-=Ft}else d-=Ft,g-=Ft}}class p{constructor(s,d){if(this.content=s,this.size=d||0,null==d)for(let g=0;g<s.length;g++)this.size+=s[g].nodeSize}nodesBetween(s,d,g,P=0,k){for(let W=0,ct=0;ct<d;W++){let Ft=this.content[W],ae=ct+Ft.nodeSize;if(ae>s&&!1!==g(Ft,P+ct,k||null,W)&&Ft.content.size){let de=ct+1;Ft.nodesBetween(Math.max(0,s-de),Math.min(Ft.content.size,d-de),g,P+de)}ct=ae}}descendants(s){this.nodesBetween(0,this.size,s)}textBetween(s,d,g,P){let k="",W=!0;return this.nodesBetween(s,d,(ct,Ft)=>{ct.isText?(k+=ct.text.slice(Math.max(s,Ft)-Ft,d-Ft),W=!g):ct.isLeaf?(P?k+="function"==typeof P?P(ct):P:ct.type.spec.leafText&&(k+=ct.type.spec.leafText(ct)),W=!g):!W&&ct.isBlock&&(k+=g,W=!0)},0),k}append(s){if(!s.size)return this;if(!this.size)return s;let d=this.lastChild,g=s.firstChild,P=this.content.slice(),k=0;for(d.isText&&d.sameMarkup(g)&&(P[P.length-1]=d.withText(d.text+g.text),k=1);k<s.content.length;k++)P.push(s.content[k]);return new p(P,this.size+s.size)}cut(s,d=this.size){if(0==s&&d==this.size)return this;let g=[],P=0;if(d>s)for(let k=0,W=0;W<d;k++){let ct=this.content[k],Ft=W+ct.nodeSize;Ft>s&&((W<s||Ft>d)&&(ct=ct.isText?ct.cut(Math.max(0,s-W),Math.min(ct.text.length,d-W)):ct.cut(Math.max(0,s-W-1),Math.min(ct.content.size,d-W-1))),g.push(ct),P+=ct.nodeSize),W=Ft}return new p(g,P)}cutByIndex(s,d){return s==d?p.empty:0==s&&d==this.content.length?this:new p(this.content.slice(s,d))}replaceChild(s,d){let g=this.content[s];if(g==d)return this;let P=this.content.slice(),k=this.size+d.nodeSize-g.nodeSize;return P[s]=d,new p(P,k)}addToStart(s){return new p([s].concat(this.content),this.size+s.nodeSize)}addToEnd(s){return new p(this.content.concat(s),this.size+s.nodeSize)}eq(s){if(this.content.length!=s.content.length)return!1;for(let d=0;d<this.content.length;d++)if(!this.content[d].eq(s.content[d]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(s){let d=this.content[s];if(!d)throw new RangeError("Index "+s+" out of range for "+this);return d}maybeChild(s){return this.content[s]||null}forEach(s){for(let d=0,g=0;d<this.content.length;d++){let P=this.content[d];s(P,g,d),g+=P.nodeSize}}findDiffStart(s,d=0){return T(this,s,d)}findDiffEnd(s,d=this.size,g=s.size){return y(this,s,d,g)}findIndex(s,d=-1){if(0==s)return F(0,s);if(s==this.size)return F(this.content.length,s);if(s>this.size||s<0)throw new RangeError(`Position ${s} outside of fragment (${this})`);for(let g=0,P=0;;g++){let W=P+this.child(g).nodeSize;if(W>=s)return W==s||d>0?F(g+1,W):F(g,P);P=W}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(s=>s.toJSON()):null}static fromJSON(s,d){if(!d)return p.empty;if(!Array.isArray(d))throw new RangeError("Invalid input for Fragment.fromJSON");return new p(d.map(s.nodeFromJSON))}static fromArray(s){if(!s.length)return p.empty;let d,g=0;for(let P=0;P<s.length;P++){let k=s[P];g+=k.nodeSize,P&&k.isText&&s[P-1].sameMarkup(k)?(d||(d=s.slice(0,P)),d[d.length-1]=k.withText(d[d.length-1].text+k.text)):d&&d.push(k)}return new p(d||s,g)}static from(s){if(!s)return p.empty;if(s instanceof p)return s;if(Array.isArray(s))return this.fromArray(s);if(s.attrs)return new p([s],s.nodeSize);throw new RangeError("Can not convert "+s+" to a Fragment"+(s.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}p.empty=new p([],0);const it={index:0,offset:0};function F(B,s){return it.index=B,it.offset=s,it}function Y(B,s){if(B===s)return!0;if(!B||"object"!=typeof B||!s||"object"!=typeof s)return!1;let d=Array.isArray(B);if(Array.isArray(s)!=d)return!1;if(d){if(B.length!=s.length)return!1;for(let g=0;g<B.length;g++)if(!Y(B[g],s[g]))return!1}else{for(let g in B)if(!(g in s)||!Y(B[g],s[g]))return!1;for(let g in s)if(!(g in B))return!1}return!0}let q=(()=>{class B{constructor(d,g){this.type=d,this.attrs=g}addToSet(d){let g,P=!1;for(let k=0;k<d.length;k++){let W=d[k];if(this.eq(W))return d;if(this.type.excludes(W.type))g||(g=d.slice(0,k));else{if(W.type.excludes(this.type))return d;!P&&W.type.rank>this.type.rank&&(g||(g=d.slice(0,k)),g.push(this),P=!0),g&&g.push(W)}}return g||(g=d.slice()),P||g.push(this),g}removeFromSet(d){for(let g=0;g<d.length;g++)if(this.eq(d[g]))return d.slice(0,g).concat(d.slice(g+1));return d}isInSet(d){for(let g=0;g<d.length;g++)if(this.eq(d[g]))return!0;return!1}eq(d){return this==d||this.type==d.type&&Y(this.attrs,d.attrs)}toJSON(){let d={type:this.type.name};for(let g in this.attrs){d.attrs=this.attrs;break}return d}static fromJSON(d,g){if(!g)throw new RangeError("Invalid input for Mark.fromJSON");let P=d.marks[g.type];if(!P)throw new RangeError(`There is no mark type ${g.type} in this schema`);return P.create(g.attrs)}static sameSet(d,g){if(d==g)return!0;if(d.length!=g.length)return!1;for(let P=0;P<d.length;P++)if(!d[P].eq(g[P]))return!1;return!0}static setFrom(d){if(!d||Array.isArray(d)&&0==d.length)return B.none;if(d instanceof B)return[d];let g=d.slice();return g.sort((P,k)=>P.type.rank-k.type.rank),g}}return B.none=[],B})();class ft extends Error{}class ut{constructor(s,d,g){this.content=s,this.openStart=d,this.openEnd=g}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(s,d){let g=Ct(this.content,s+this.openStart,d);return g&&new ut(g,this.openStart,this.openEnd)}removeBetween(s,d){return new ut(X(this.content,s+this.openStart,d+this.openStart),this.openStart,this.openEnd)}eq(s){return this.content.eq(s.content)&&this.openStart==s.openStart&&this.openEnd==s.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let s={content:this.content.toJSON()};return this.openStart>0&&(s.openStart=this.openStart),this.openEnd>0&&(s.openEnd=this.openEnd),s}static fromJSON(s,d){if(!d)return ut.empty;let g=d.openStart||0,P=d.openEnd||0;if("number"!=typeof g||"number"!=typeof P)throw new RangeError("Invalid input for Slice.fromJSON");return new ut(p.fromJSON(s,d.content),g,P)}static maxOpen(s,d=!0){let g=0,P=0;for(let k=s.firstChild;k&&!k.isLeaf&&(d||!k.type.spec.isolating);k=k.firstChild)g++;for(let k=s.lastChild;k&&!k.isLeaf&&(d||!k.type.spec.isolating);k=k.lastChild)P++;return new ut(s,g,P)}}function X(B,s,d){let{index:g,offset:P}=B.findIndex(s),k=B.maybeChild(g),{index:W,offset:ct}=B.findIndex(d);if(P==s||k.isText){if(ct!=d&&!B.child(W).isText)throw new RangeError("Removing non-flat range");return B.cut(0,s).append(B.cut(d))}if(g!=W)throw new RangeError("Removing non-flat range");return B.replaceChild(g,k.copy(X(k.content,s-P-1,d-P-1)))}function Ct(B,s,d,g){let{index:P,offset:k}=B.findIndex(s),W=B.maybeChild(P);if(k==s||W.isText)return g&&!g.canReplace(P,P,d)?null:B.cut(0,s).append(d).append(B.cut(s));let ct=Ct(W.content,s-k-1,d);return ct&&B.replaceChild(P,W.copy(ct))}function mt(B,s,d){if(d.openStart>B.depth)throw new ft("Inserted content deeper than insertion position");if(B.depth-d.openStart!=s.depth-d.openEnd)throw new ft("Inconsistent open depths");return Dt(B,s,d,0)}function Dt(B,s,d,g){let P=B.index(g),k=B.node(g);if(P==s.index(g)&&g<B.depth-d.openStart){let W=Dt(B,s,d,g+1);return k.copy(k.content.replaceChild(P,W))}if(d.content.size){if(d.openStart||d.openEnd||B.depth!=g||s.depth!=g){let{start:W,end:ct}=function(B,s){let d=s.depth-B.openStart,P=s.node(d).copy(B.content);for(let k=d-1;k>=0;k--)P=s.node(k).copy(p.from(P));return{start:P.resolveNoCache(B.openStart+d),end:P.resolveNoCache(P.content.size-B.openEnd-d)}}(d,B);return ht(k,$(B,W,ct,s,g))}{let W=B.parent,ct=W.content;return ht(W,ct.cut(0,B.parentOffset).append(d.content).append(ct.cut(s.parentOffset)))}}return ht(k,xt(B,s,g))}function zt(B,s){if(!s.type.compatibleContent(B.type))throw new ft("Cannot join "+s.type.name+" onto "+B.type.name)}function At(B,s,d){let g=B.node(d);return zt(g,s.node(d)),g}function _t(B,s){let d=s.length-1;d>=0&&B.isText&&B.sameMarkup(s[d])?s[d]=B.withText(s[d].text+B.text):s.push(B)}function at(B,s,d,g){let P=(s||B).node(d),k=0,W=s?s.index(d):P.childCount;B&&(k=B.index(d),B.depth>d?k++:B.textOffset&&(_t(B.nodeAfter,g),k++));for(let ct=k;ct<W;ct++)_t(P.child(ct),g);s&&s.depth==d&&s.textOffset&&_t(s.nodeBefore,g)}function ht(B,s){return B.type.checkContent(s),B.copy(s)}function $(B,s,d,g,P){let k=B.depth>P&&At(B,s,P+1),W=g.depth>P&&At(d,g,P+1),ct=[];return at(null,B,P,ct),k&&W&&s.index(P)==d.index(P)?(zt(k,W),_t(ht(k,$(B,s,d,g,P+1)),ct)):(k&&_t(ht(k,xt(B,s,P+1)),ct),at(s,d,P,ct),W&&_t(ht(W,xt(d,g,P+1)),ct)),at(g,null,P,ct),new p(ct)}function xt(B,s,d){let g=[];return at(null,B,d,g),B.depth>d&&_t(ht(At(B,s,d+1),xt(B,s,d+1)),g),at(s,null,d,g),new p(g)}ut.empty=new ut(p.empty,0,0);class Bt{constructor(s,d,g){this.pos=s,this.path=d,this.parentOffset=g,this.depth=d.length/3-1}resolveDepth(s){return null==s?this.depth:s<0?this.depth+s:s}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(s){return this.path[3*this.resolveDepth(s)]}index(s){return this.path[3*this.resolveDepth(s)+1]}indexAfter(s){return s=this.resolveDepth(s),this.index(s)+(s!=this.depth||this.textOffset?1:0)}start(s){return 0==(s=this.resolveDepth(s))?0:this.path[3*s-1]+1}end(s){return s=this.resolveDepth(s),this.start(s)+this.node(s).content.size}before(s){if(!(s=this.resolveDepth(s)))throw new RangeError("There is no position before the top-level node");return s==this.depth+1?this.pos:this.path[3*s-1]}after(s){if(!(s=this.resolveDepth(s)))throw new RangeError("There is no position after the top-level node");return s==this.depth+1?this.pos:this.path[3*s-1]+this.path[3*s].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let s=this.parent,d=this.index(this.depth);if(d==s.childCount)return null;let g=this.pos-this.path[this.path.length-1],P=s.child(d);return g?s.child(d).cut(g):P}get nodeBefore(){let s=this.index(this.depth),d=this.pos-this.path[this.path.length-1];return d?this.parent.child(s).cut(0,d):0==s?null:this.parent.child(s-1)}posAtIndex(s,d){d=this.resolveDepth(d);let g=this.path[3*d],P=0==d?0:this.path[3*d-1]+1;for(let k=0;k<s;k++)P+=g.child(k).nodeSize;return P}marks(){let s=this.parent,d=this.index();if(0==s.content.size)return q.none;if(this.textOffset)return s.child(d).marks;let g=s.maybeChild(d-1),P=s.maybeChild(d);if(!g){let ct=g;g=P,P=ct}let k=g.marks;for(var W=0;W<k.length;W++)!1===k[W].type.spec.inclusive&&(!P||!k[W].isInSet(P.marks))&&(k=k[W--].removeFromSet(k));return k}marksAcross(s){let d=this.parent.maybeChild(this.index());if(!d||!d.isInline)return null;let g=d.marks,P=s.parent.maybeChild(s.index());for(var k=0;k<g.length;k++)!1===g[k].type.spec.inclusive&&(!P||!g[k].isInSet(P.marks))&&(g=g[k--].removeFromSet(g));return g}sharedDepth(s){for(let d=this.depth;d>0;d--)if(this.start(d)<=s&&this.end(d)>=s)return d;return 0}blockRange(s=this,d){if(s.pos<this.pos)return s.blockRange(this);for(let g=this.depth-(this.parent.inlineContent||this.pos==s.pos?1:0);g>=0;g--)if(s.pos<=this.end(g)&&(!d||d(this.node(g))))return new jt(this,s,g);return null}sameParent(s){return this.pos-this.parentOffset==s.pos-s.parentOffset}max(s){return s.pos>this.pos?s:this}min(s){return s.pos<this.pos?s:this}toString(){let s="";for(let d=1;d<=this.depth;d++)s+=(s?"/":"")+this.node(d).type.name+"_"+this.index(d-1);return s+":"+this.parentOffset}static resolve(s,d){if(!(d>=0&&d<=s.content.size))throw new RangeError("Position "+d+" out of range");let g=[],P=0,k=d;for(let W=s;;){let{index:ct,offset:Ft}=W.content.findIndex(k),ae=k-Ft;if(g.push(W,ct,P+Ft),!ae||(W=W.child(ct),W.isText))break;k=ae-1,P+=Ft+1}return new Bt(d,g,k)}static resolveCached(s,d){for(let P=0;P<Nt.length;P++){let k=Nt[P];if(k.pos==d&&k.doc==s)return k}let g=Nt[Ot]=Bt.resolve(s,d);return Ot=(Ot+1)%Ut,g}}let Nt=[],Ot=0,Ut=12;class jt{constructor(s,d,g){this.$from=s,this.$to=d,this.depth=g}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const qt=Object.create(null);class gt{constructor(s,d,g,P=q.none){this.type=s,this.attrs=d,this.marks=P,this.content=g||p.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(s){return this.content.child(s)}maybeChild(s){return this.content.maybeChild(s)}forEach(s){this.content.forEach(s)}nodesBetween(s,d,g,P=0){this.content.nodesBetween(s,d,g,P,this)}descendants(s){this.nodesBetween(0,this.content.size,s)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(s,d,g,P){return this.content.textBetween(s,d,g,P)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(s){return this==s||this.sameMarkup(s)&&this.content.eq(s.content)}sameMarkup(s){return this.hasMarkup(s.type,s.attrs,s.marks)}hasMarkup(s,d,g){return this.type==s&&Y(this.attrs,d||s.defaultAttrs||qt)&&q.sameSet(this.marks,g||q.none)}copy(s=null){return s==this.content?this:new gt(this.type,this.attrs,s,this.marks)}mark(s){return s==this.marks?this:new gt(this.type,this.attrs,this.content,s)}cut(s,d=this.content.size){return 0==s&&d==this.content.size?this:this.copy(this.content.cut(s,d))}slice(s,d=this.content.size,g=!1){if(s==d)return ut.empty;let P=this.resolve(s),k=this.resolve(d),W=g?0:P.sharedDepth(d),ct=P.start(W),ae=P.node(W).content.cut(P.pos-ct,k.pos-ct);return new ut(ae,P.depth-W,k.depth-W)}replace(s,d,g){return mt(this.resolve(s),this.resolve(d),g)}nodeAt(s){for(let d=this;;){let{index:g,offset:P}=d.content.findIndex(s);if(d=d.maybeChild(g),!d)return null;if(P==s||d.isText)return d;s-=P+1}}childAfter(s){let{index:d,offset:g}=this.content.findIndex(s);return{node:this.content.maybeChild(d),index:d,offset:g}}childBefore(s){if(0==s)return{node:null,index:0,offset:0};let{index:d,offset:g}=this.content.findIndex(s);if(g<s)return{node:this.content.child(d),index:d,offset:g};let P=this.content.child(d-1);return{node:P,index:d-1,offset:g-P.nodeSize}}resolve(s){return Bt.resolveCached(this,s)}resolveNoCache(s){return Bt.resolve(this,s)}rangeHasMark(s,d,g){let P=!1;return d>s&&this.nodesBetween(s,d,k=>(g.isInSet(k.marks)&&(P=!0),!P)),P}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let s=this.type.name;return this.content.size&&(s+="("+this.content.toStringInner()+")"),Z(this.marks,s)}contentMatchAt(s){let d=this.type.contentMatch.matchFragment(this.content,0,s);if(!d)throw new Error("Called contentMatchAt on a node with invalid content");return d}canReplace(s,d,g=p.empty,P=0,k=g.childCount){let W=this.contentMatchAt(s).matchFragment(g,P,k),ct=W&&W.matchFragment(this.content,d);if(!ct||!ct.validEnd)return!1;for(let Ft=P;Ft<k;Ft++)if(!this.type.allowsMarks(g.child(Ft).marks))return!1;return!0}canReplaceWith(s,d,g,P){if(P&&!this.type.allowsMarks(P))return!1;let k=this.contentMatchAt(s).matchType(g),W=k&&k.matchFragment(this.content,d);return!!W&&W.validEnd}canAppend(s){return s.content.size?this.canReplace(this.childCount,this.childCount,s.content):this.type.compatibleContent(s.type)}check(){this.type.checkContent(this.content);let s=q.none;for(let d=0;d<this.marks.length;d++)s=this.marks[d].addToSet(s);if(!q.sameSet(s,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(d=>d.type.name)}`);this.content.forEach(d=>d.check())}toJSON(){let s={type:this.type.name};for(let d in this.attrs){s.attrs=this.attrs;break}return this.content.size&&(s.content=this.content.toJSON()),this.marks.length&&(s.marks=this.marks.map(d=>d.toJSON())),s}static fromJSON(s,d){if(!d)throw new RangeError("Invalid input for Node.fromJSON");let g=null;if(d.marks){if(!Array.isArray(d.marks))throw new RangeError("Invalid mark data for Node.fromJSON");g=d.marks.map(s.markFromJSON)}if("text"==d.type){if("string"!=typeof d.text)throw new RangeError("Invalid text node in JSON");return s.text(d.text,g)}let P=p.fromJSON(s,d.content);return s.nodeType(d.type).create(d.attrs,P,g)}}gt.prototype.text=void 0;class O extends gt{constructor(s,d,g,P){if(super(s,d,null,P),!g)throw new RangeError("Empty text nodes are not allowed");this.text=g}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Z(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(s,d){return this.text.slice(s,d)}get nodeSize(){return this.text.length}mark(s){return s==this.marks?this:new O(this.type,this.attrs,this.text,s)}withText(s){return s==this.text?this:new O(this.type,this.attrs,s,this.marks)}cut(s=0,d=this.text.length){return 0==s&&d==this.text.length?this:this.withText(this.text.slice(s,d))}eq(s){return this.sameMarkup(s)&&this.text==s.text}toJSON(){let s=super.toJSON();return s.text=this.text,s}}function Z(B,s){for(let d=B.length-1;d>=0;d--)s=B[d].type.name+"("+s+")";return s}class j{constructor(s){this.validEnd=s,this.next=[],this.wrapCache=[]}static parse(s,d){let g=new bt(s,d);if(null==g.next)return j.empty;let P=Q(g);g.next&&g.err("Unexpected trailing text");let k=function(B){let s=Object.create(null);return function d(g){let P=[];g.forEach(W=>{B[W].forEach(({term:ct,to:Ft})=>{if(!ct)return;let ae;for(let de=0;de<P.length;de++)P[de][0]==ct&&(ae=P[de][1]);je(B,Ft).forEach(de=>{ae||P.push([ct,ae=[]]),-1==ae.indexOf(de)&&ae.push(de)})})});let k=s[g.join(",")]=new j(g.indexOf(B.length-1)>-1);for(let W=0;W<P.length;W++){let ct=P[W][1].sort(Te);k.next.push({type:P[W][0],next:s[ct.join(",")]||d(ct)})}return k}(je(B,0))}(function(B){let s=[[]];return P(function k(W,ct){if("choice"==W.type)return W.exprs.reduce((Ft,ae)=>Ft.concat(k(ae,ct)),[]);if("seq"!=W.type){if("star"==W.type){let Ft=d();return g(ct,Ft),P(k(W.expr,Ft),Ft),[g(Ft)]}if("plus"==W.type){let Ft=d();return P(k(W.expr,ct),Ft),P(k(W.expr,Ft),Ft),[g(Ft)]}if("opt"==W.type)return[g(ct)].concat(k(W.expr,ct));if("range"==W.type){let Ft=ct;for(let ae=0;ae<W.min;ae++){let de=d();P(k(W.expr,Ft),de),Ft=de}if(-1==W.max)P(k(W.expr,Ft),Ft);else for(let ae=W.min;ae<W.max;ae++){let de=d();g(Ft,de),P(k(W.expr,Ft),de),Ft=de}return[g(Ft)]}if("name"==W.type)return[g(ct,void 0,W.value)];throw new Error("Unknown expr type")}for(let Ft=0;;Ft++){let ae=k(W.exprs[Ft],ct);if(Ft==W.exprs.length-1)return ae;P(ae,ct=d())}}(B,0),d()),s;function d(){return s.push([])-1}function g(W,ct,Ft){let ae={term:Ft,to:ct};return s[W].push(ae),ae}function P(W,ct){W.forEach(Ft=>Ft.to=ct)}}(P));return function(B,s){for(let d=0,g=[B];d<g.length;d++){let P=g[d],k=!P.validEnd,W=[];for(let ct=0;ct<P.next.length;ct++){let{type:Ft,next:ae}=P.next[ct];W.push(Ft.name),k&&!(Ft.isText||Ft.hasRequiredAttrs())&&(k=!1),-1==g.indexOf(ae)&&g.push(ae)}k&&s.err("Only non-generatable nodes ("+W.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(k,g),k}matchType(s){for(let d=0;d<this.next.length;d++)if(this.next[d].type==s)return this.next[d].next;return null}matchFragment(s,d=0,g=s.childCount){let P=this;for(let k=d;P&&k<g;k++)P=P.matchType(s.child(k).type);return P}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let s=0;s<this.next.length;s++){let{type:d}=this.next[s];if(!d.isText&&!d.hasRequiredAttrs())return d}return null}compatible(s){for(let d=0;d<this.next.length;d++)for(let g=0;g<s.next.length;g++)if(this.next[d].type==s.next[g].type)return!0;return!1}fillBefore(s,d=!1,g=0){let P=[this];return function k(W,ct){let Ft=W.matchFragment(s,g);if(Ft&&(!d||Ft.validEnd))return p.from(ct.map(ae=>ae.createAndFill()));for(let ae=0;ae<W.next.length;ae++){let{type:de,next:He}=W.next[ae];if(!de.isText&&!de.hasRequiredAttrs()&&-1==P.indexOf(He)){P.push(He);let $e=k(He,ct.concat(de));if($e)return $e}}return null}(this,[])}findWrapping(s){for(let g=0;g<this.wrapCache.length;g+=2)if(this.wrapCache[g]==s)return this.wrapCache[g+1];let d=this.computeWrapping(s);return this.wrapCache.push(s,d),d}computeWrapping(s){let d=Object.create(null),g=[{match:this,type:null,via:null}];for(;g.length;){let P=g.shift(),k=P.match;if(k.matchType(s)){let W=[];for(let ct=P;ct.type;ct=ct.via)W.push(ct.type);return W.reverse()}for(let W=0;W<k.next.length;W++){let{type:ct,next:Ft}=k.next[W];!ct.isLeaf&&!ct.hasRequiredAttrs()&&!(ct.name in d)&&(!P.type||Ft.validEnd)&&(g.push({match:ct.contentMatch,type:ct,via:P}),d[ct.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(s){if(s>=this.next.length)throw new RangeError(`There's no ${s}th edge in this content match`);return this.next[s]}toString(){let s=[];return function d(g){s.push(g);for(let P=0;P<g.next.length;P++)-1==s.indexOf(g.next[P].next)&&d(g.next[P].next)}(this),s.map((g,P)=>{let k=P+(g.validEnd?"*":" ")+" ";for(let W=0;W<g.next.length;W++)k+=(W?", ":"")+g.next[W].type.name+"->"+s.indexOf(g.next[W].next);return k}).join("\n")}}j.empty=new j(!0);class bt{constructor(s,d){this.string=s,this.nodeTypes=d,this.inline=null,this.pos=0,this.tokens=s.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(s){return this.next==s&&(this.pos++||!0)}err(s){throw new SyntaxError(s+" (in content expression '"+this.string+"')")}}function Q(B){let s=[];do{s.push(ot(B))}while(B.eat("|"));return 1==s.length?s[0]:{type:"choice",exprs:s}}function ot(B){let s=[];do{s.push(pt(B))}while(B.next&&")"!=B.next&&"|"!=B.next);return 1==s.length?s[0]:{type:"seq",exprs:s}}function pt(B){let s=function(B){if(B.eat("(")){let s=Q(B);return B.eat(")")||B.err("Missing closing paren"),s}if(!/\W/.test(B.next)){let s=function(B,s){let d=B.nodeTypes,g=d[s];if(g)return[g];let P=[];for(let k in d){let W=d[k];W.groups.indexOf(s)>-1&&P.push(W)}return 0==P.length&&B.err("No node type or group '"+s+"' found"),P}(B,B.next).map(d=>(null==B.inline?B.inline=d.isInline:B.inline!=d.isInline&&B.err("Mixing inline and block content"),{type:"name",value:d}));return B.pos++,1==s.length?s[0]:{type:"choice",exprs:s}}B.err("Unexpected token '"+B.next+"'")}(B);for(;;)if(B.eat("+"))s={type:"plus",expr:s};else if(B.eat("*"))s={type:"star",expr:s};else if(B.eat("?"))s={type:"opt",expr:s};else{if(!B.eat("{"))break;s=Zt(B,s)}return s}function Kt(B){/\D/.test(B.next)&&B.err("Expected number, got '"+B.next+"'");let s=Number(B.next);return B.pos++,s}function Zt(B,s){let d=Kt(B),g=d;return B.eat(",")&&(g="}"!=B.next?Kt(B):-1),B.eat("}")||B.err("Unclosed braced range"),{type:"range",min:d,max:g,expr:s}}function Te(B,s){return s-B}function je(B,s){let d=[];return function g(P){let k=B[P];if(1==k.length&&!k[0].term)return g(k[0].to);d.push(P);for(let W=0;W<k.length;W++){let{term:ct,to:Ft}=k[W];!ct&&-1==d.indexOf(Ft)&&g(Ft)}}(s),d.sort(Te)}function Je(B){let s=Object.create(null);for(let d in B){let g=B[d];if(!g.hasDefault)return null;s[d]=g.default}return s}function Re(B,s){let d=Object.create(null);for(let g in B){let P=s&&s[g];if(void 0===P){let k=B[g];if(!k.hasDefault)throw new RangeError("No value supplied for attribute "+g);P=k.default}d[g]=P}return d}function We(B){let s=Object.create(null);if(B)for(let d in B)s[d]=new Be(B[d]);return s}class Ee{constructor(s,d,g){this.name=s,this.schema=d,this.spec=g,this.markSet=null,this.groups=g.group?g.group.split(" "):[],this.attrs=We(g.attrs),this.defaultAttrs=Je(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(g.inline||"text"==s),this.isText="text"==s}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==j.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let s in this.attrs)if(this.attrs[s].isRequired)return!0;return!1}compatibleContent(s){return this==s||this.contentMatch.compatible(s.contentMatch)}computeAttrs(s){return!s&&this.defaultAttrs?this.defaultAttrs:Re(this.attrs,s)}create(s=null,d,g){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new gt(this,this.computeAttrs(s),p.from(d),q.setFrom(g))}createChecked(s=null,d,g){return d=p.from(d),this.checkContent(d),new gt(this,this.computeAttrs(s),d,q.setFrom(g))}createAndFill(s=null,d,g){if(s=this.computeAttrs(s),(d=p.from(d)).size){let W=this.contentMatch.fillBefore(d);if(!W)return null;d=W.append(d)}let P=this.contentMatch.matchFragment(d),k=P&&P.fillBefore(p.empty,!0);return k?new gt(this,s,d.append(k),q.setFrom(g)):null}validContent(s){let d=this.contentMatch.matchFragment(s);if(!d||!d.validEnd)return!1;for(let g=0;g<s.childCount;g++)if(!this.allowsMarks(s.child(g).marks))return!1;return!0}checkContent(s){if(!this.validContent(s))throw new RangeError(`Invalid content for node ${this.name}: ${s.toString().slice(0,50)}`)}allowsMarkType(s){return null==this.markSet||this.markSet.indexOf(s)>-1}allowsMarks(s){if(null==this.markSet)return!0;for(let d=0;d<s.length;d++)if(!this.allowsMarkType(s[d].type))return!1;return!0}allowedMarks(s){if(null==this.markSet)return s;let d;for(let g=0;g<s.length;g++)this.allowsMarkType(s[g].type)?d&&d.push(s[g]):d||(d=s.slice(0,g));return d?d.length?d:q.none:s}static compile(s,d){let g=Object.create(null);s.forEach((k,W)=>g[k]=new Ee(k,d,W));let P=d.spec.topNode||"doc";if(!g[P])throw new RangeError("Schema is missing its top node type ('"+P+"')");if(!g.text)throw new RangeError("Every schema needs a 'text' type");for(let k in g.text.attrs)throw new RangeError("The text node type should not have attributes");return g}}class Be{constructor(s){this.hasDefault=Object.prototype.hasOwnProperty.call(s,"default"),this.default=s.default}get isRequired(){return!this.hasDefault}}class Fe{constructor(s,d,g,P){this.name=s,this.rank=d,this.schema=g,this.spec=P,this.attrs=We(P.attrs),this.excluded=null;let k=Je(this.attrs);this.instance=k?new q(this,k):null}create(s=null){return!s&&this.instance?this.instance:new q(this,Re(this.attrs,s))}static compile(s,d){let g=Object.create(null),P=0;return s.forEach((k,W)=>g[k]=new Fe(k,P++,d,W)),g}removeFromSet(s){for(var d=0;d<s.length;d++)s[d].type==this&&(s=s.slice(0,d).concat(s.slice(d+1)),d--);return s}isInSet(s){for(let d=0;d<s.length;d++)if(s[d].type==this)return s[d]}excludes(s){return this.excluded.indexOf(s)>-1}}class Pe{constructor(s){this.cached=Object.create(null);let d=this.spec={};for(let P in s)d[P]=s[P];d.nodes=r.from(s.nodes),d.marks=r.from(s.marks||{}),this.nodes=Ee.compile(this.spec.nodes,this),this.marks=Fe.compile(this.spec.marks,this);let g=Object.create(null);for(let P in this.nodes){if(P in this.marks)throw new RangeError(P+" can not be both a node and a mark");let k=this.nodes[P],W=k.spec.content||"",ct=k.spec.marks;k.contentMatch=g[W]||(g[W]=j.parse(W,this.nodes)),k.inlineContent=k.contentMatch.inlineContent,k.markSet="_"==ct?null:ct?Se(this,ct.split(" ")):""!=ct&&k.inlineContent?null:[]}for(let P in this.marks){let k=this.marks[P],W=k.spec.excludes;k.excluded=null==W?[k]:""==W?[]:Se(this,W.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(s,d=null,g,P){if("string"==typeof s)s=this.nodeType(s);else{if(!(s instanceof Ee))throw new RangeError("Invalid node type: "+s);if(s.schema!=this)throw new RangeError("Node type from different schema used ("+s.name+")")}return s.createChecked(d,g,P)}text(s,d){let g=this.nodes.text;return new O(g,g.defaultAttrs,s,q.setFrom(d))}mark(s,d){return"string"==typeof s&&(s=this.marks[s]),s.create(d)}nodeFromJSON(s){return gt.fromJSON(this,s)}markFromJSON(s){return q.fromJSON(this,s)}nodeType(s){let d=this.nodes[s];if(!d)throw new RangeError("Unknown node type: "+s);return d}}function Se(B,s){let d=[];for(let g=0;g<s.length;g++){let P=s[g],k=B.marks[P],W=k;if(k)d.push(k);else for(let ct in B.marks){let Ft=B.marks[ct];("_"==P||Ft.spec.group&&Ft.spec.group.split(" ").indexOf(P)>-1)&&d.push(W=Ft)}if(!W)throw new SyntaxError("Unknown mark type: '"+s[g]+"'")}return d}class Ie{constructor(s,d){this.schema=s,this.rules=d,this.tags=[],this.styles=[],d.forEach(g=>{g.tag?this.tags.push(g):g.style&&this.styles.push(g)}),this.normalizeLists=!this.tags.some(g=>{if(!/^(ul|ol)\b/.test(g.tag)||!g.node)return!1;let P=s.nodes[g.node];return P.contentMatch.matchType(P)})}parse(s,d={}){let g=new Oe(this,d,!1);return g.addAll(s,d.from,d.to),g.finish()}parseSlice(s,d={}){let g=new Oe(this,d,!0);return g.addAll(s,d.from,d.to),ut.maxOpen(g.finish())}matchTag(s,d,g){for(let P=g?this.tags.indexOf(g)+1:0;P<this.tags.length;P++){let k=this.tags[P];if(D(s,k.tag)&&(void 0===k.namespace||s.namespaceURI==k.namespace)&&(!k.context||d.matchesContext(k.context))){if(k.getAttrs){let W=k.getAttrs(s);if(!1===W)continue;k.attrs=W||void 0}return k}}}matchStyle(s,d,g,P){for(let k=P?this.styles.indexOf(P)+1:0;k<this.styles.length;k++){let W=this.styles[k],ct=W.style;if(!(0!=ct.indexOf(s)||W.context&&!g.matchesContext(W.context)||ct.length>s.length&&(61!=ct.charCodeAt(s.length)||ct.slice(s.length+1)!=d))){if(W.getAttrs){let Ft=W.getAttrs(d);if(!1===Ft)continue;W.attrs=Ft||void 0}return W}}}static schemaRules(s){let d=[];function g(P){let k=null==P.priority?50:P.priority,W=0;for(;W<d.length;W++){let ct=d[W];if((null==ct.priority?50:ct.priority)<k)break}d.splice(W,0,P)}for(let P in s.marks){let k=s.marks[P].spec.parseDOM;k&&k.forEach(W=>{g(W=N(W)),W.mark||W.ignore||W.clearMark||(W.mark=P)})}for(let P in s.nodes){let k=s.nodes[P].spec.parseDOM;k&&k.forEach(W=>{g(W=N(W)),W.node||W.ignore||W.mark||(W.node=P)})}return d}static fromSchema(s){return s.cached.domParser||(s.cached.domParser=new Ie(s,Ie.schemaRules(s)))}}const Me={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ve={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},xe={ol:!0,ul:!0};function we(B,s,d){return null!=s?(s?1:0)|("full"===s?2:0):B&&"pre"==B.whitespace?3:-5&d}class Ce{constructor(s,d,g,P,k,W,ct){this.type=s,this.attrs=d,this.marks=g,this.pendingMarks=P,this.solid=k,this.options=ct,this.content=[],this.activeMarks=q.none,this.stashMarks=[],this.match=W||(4&ct?null:s.contentMatch)}findWrapping(s){if(!this.match){if(!this.type)return[];let d=this.type.contentMatch.fillBefore(p.from(s));if(!d){let P,g=this.type.contentMatch;return(P=g.findWrapping(s.type))?(this.match=g,P):null}this.match=this.type.contentMatch.matchFragment(d)}return this.match.findWrapping(s.type)}finish(s){if(!(1&this.options)){let P,g=this.content[this.content.length-1];if(g&&g.isText&&(P=/[ \t\r\n\u000c]+$/.exec(g.text))){let k=g;g.text.length==P[0].length?this.content.pop():this.content[this.content.length-1]=k.withText(k.text.slice(0,k.text.length-P[0].length))}}let d=p.from(this.content);return!s&&this.match&&(d=d.append(this.match.fillBefore(p.empty,!0))),this.type?this.type.create(this.attrs,d,this.marks):d}popFromStashMark(s){for(let d=this.stashMarks.length-1;d>=0;d--)if(s.eq(this.stashMarks[d]))return this.stashMarks.splice(d,1)[0]}applyPending(s){for(let d=0,g=this.pendingMarks;d<g.length;d++){let P=g[d];(this.type?this.type.allowsMarkType(P.type):w(P.type,s))&&!P.isInSet(this.activeMarks)&&(this.activeMarks=P.addToSet(this.activeMarks),this.pendingMarks=P.removeFromSet(this.pendingMarks))}}inlineContext(s){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:s.parentNode&&!Me.hasOwnProperty(s.parentNode.nodeName.toLowerCase())}}class Oe{constructor(s,d,g){this.parser=s,this.options=d,this.isOpen=g,this.open=0;let k,P=d.topNode,W=we(null,d.preserveWhitespace,0)|(g?4:0);k=P?new Ce(P.type,P.attrs,q.none,q.none,!0,d.topMatch||P.type.contentMatch,W):new Ce(g?null:s.schema.topNodeType,null,q.none,q.none,!0,null,W),this.nodes=[k],this.find=d.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(s){if(3==s.nodeType)this.addTextNode(s);else if(1==s.nodeType){let d=s.getAttribute("style");if(d){let g=this.readStyles(function(B){let d,s=/\s*([\w-]+)\s*:\s*([^;]+)/g,g=[];for(;d=s.exec(B);)g.push(d[1],d[2].trim());return g}(d));if(!g)return;let[P,k]=g,W=this.top;for(let ct=0;ct<k.length;ct++)this.removePendingMark(k[ct],W);for(let ct=0;ct<P.length;ct++)this.addPendingMark(P[ct]);this.addElement(s);for(let ct=0;ct<P.length;ct++)this.removePendingMark(P[ct],W);for(let ct=0;ct<k.length;ct++)this.addPendingMark(k[ct])}else this.addElement(s)}}addTextNode(s){let d=s.nodeValue,g=this.top;if(2&g.options||g.inlineContext(s)||/[^ \t\r\n\u000c]/.test(d)){if(1&g.options)d=2&g.options?d.replace(/\r\n?/g,"\n"):d.replace(/\r?\n|\r/g," ");else if(d=d.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(d)&&this.open==this.nodes.length-1){let P=g.content[g.content.length-1],k=s.previousSibling;(!P||k&&"BR"==k.nodeName||P.isText&&/[ \t\r\n\u000c]$/.test(P.text))&&(d=d.slice(1))}d&&this.insertNode(this.parser.schema.text(d)),this.findInText(s)}else this.findInside(s)}addElement(s,d){let P,g=s.nodeName.toLowerCase();xe.hasOwnProperty(g)&&this.parser.normalizeLists&&function(B){for(let s=B.firstChild,d=null;s;s=s.nextSibling){let g=1==s.nodeType?s.nodeName.toLowerCase():null;g&&xe.hasOwnProperty(g)&&d?(d.appendChild(s),s=d):"li"==g?d=s:g&&(d=null)}}(s);let k=this.options.ruleFromNode&&this.options.ruleFromNode(s)||(P=this.parser.matchTag(s,this,d));if(k?k.ignore:Ve.hasOwnProperty(g))this.findInside(s),this.ignoreFallback(s);else if(!k||k.skip||k.closeParent){k&&k.closeParent?this.open=Math.max(0,this.open-1):k&&k.skip.nodeType&&(s=k.skip);let W,ct=this.top,Ft=this.needsBlock;if(Me.hasOwnProperty(g))ct.content.length&&ct.content[0].isInline&&this.open&&(this.open--,ct=this.top),W=!0,ct.type||(this.needsBlock=!0);else if(!s.firstChild)return void this.leafFallback(s);this.addAll(s),W&&this.sync(ct),this.needsBlock=Ft}else this.addElementByRule(s,k,!1===k.consuming?P:void 0)}leafFallback(s){"BR"==s.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(s.ownerDocument.createTextNode("\n"))}ignoreFallback(s){"BR"==s.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(s){let d=q.none,g=q.none;t:for(let P=0;P<s.length;P+=2)for(let k;;){let W=this.parser.matchStyle(s[P],s[P+1],this,k);if(!W)continue t;if(W.ignore)return null;if(W.clearMark?this.top.pendingMarks.forEach(ct=>{W.clearMark(ct)&&(g=ct.addToSet(g))}):d=this.parser.schema.marks[W.mark].create(W.attrs).addToSet(d),!1!==W.consuming)break;k=W}return[d,g]}addElementByRule(s,d,g){let P,k,W;d.node?(k=this.parser.schema.nodes[d.node],k.isLeaf?this.insertNode(k.create(d.attrs))||this.leafFallback(s):P=this.enter(k,d.attrs||null,d.preserveWhitespace)):(W=this.parser.schema.marks[d.mark].create(d.attrs),this.addPendingMark(W));let ct=this.top;if(k&&k.isLeaf)this.findInside(s);else if(g)this.addElement(s,g);else if(d.getContent)this.findInside(s),d.getContent(s,this.parser.schema).forEach(Ft=>this.insertNode(Ft));else{let Ft=s;"string"==typeof d.contentElement?Ft=s.querySelector(d.contentElement):"function"==typeof d.contentElement?Ft=d.contentElement(s):d.contentElement&&(Ft=d.contentElement),this.findAround(s,Ft,!0),this.addAll(Ft)}P&&this.sync(ct)&&this.open--,W&&this.removePendingMark(W,ct)}addAll(s,d,g){let P=d||0;for(let k=d?s.childNodes[d]:s.firstChild,W=null==g?null:s.childNodes[g];k!=W;k=k.nextSibling,++P)this.findAtPoint(s,P),this.addDOM(k);this.findAtPoint(s,P)}findPlace(s){let d,g;for(let P=this.open;P>=0;P--){let k=this.nodes[P],W=k.findWrapping(s);if(W&&(!d||d.length>W.length)&&(d=W,g=k,!W.length)||k.solid)break}if(!d)return!1;this.sync(g);for(let P=0;P<d.length;P++)this.enterInner(d[P],null,!1);return!0}insertNode(s){if(s.isInline&&this.needsBlock&&!this.top.type){let d=this.textblockFromContext();d&&this.enterInner(d)}if(this.findPlace(s)){this.closeExtra();let d=this.top;d.applyPending(s.type),d.match&&(d.match=d.match.matchType(s.type));let g=d.activeMarks;for(let P=0;P<s.marks.length;P++)(!d.type||d.type.allowsMarkType(s.marks[P].type))&&(g=s.marks[P].addToSet(g));return d.content.push(s.mark(g)),!0}return!1}enter(s,d,g){let P=this.findPlace(s.create(d));return P&&this.enterInner(s,d,!0,g),P}enterInner(s,d=null,g=!1,P){this.closeExtra();let k=this.top;k.applyPending(s),k.match=k.match&&k.match.matchType(s);let W=we(s,P,k.options);4&k.options&&0==k.content.length&&(W|=4),this.nodes.push(new Ce(s,d,k.activeMarks,k.pendingMarks,g,null,W)),this.open++}closeExtra(s=!1){let d=this.nodes.length-1;if(d>this.open){for(;d>this.open;d--)this.nodes[d-1].content.push(this.nodes[d].finish(s));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(s){for(let d=this.open;d>=0;d--)if(this.nodes[d]==s)return this.open=d,!0;return!1}get currentPos(){this.closeExtra();let s=0;for(let d=this.open;d>=0;d--){let g=this.nodes[d].content;for(let P=g.length-1;P>=0;P--)s+=g[P].nodeSize;d&&s++}return s}findAtPoint(s,d){if(this.find)for(let g=0;g<this.find.length;g++)this.find[g].node==s&&this.find[g].offset==d&&(this.find[g].pos=this.currentPos)}findInside(s){if(this.find)for(let d=0;d<this.find.length;d++)null==this.find[d].pos&&1==s.nodeType&&s.contains(this.find[d].node)&&(this.find[d].pos=this.currentPos)}findAround(s,d,g){if(s!=d&&this.find)for(let P=0;P<this.find.length;P++)null==this.find[P].pos&&1==s.nodeType&&s.contains(this.find[P].node)&&d.compareDocumentPosition(this.find[P].node)&(g?2:4)&&(this.find[P].pos=this.currentPos)}findInText(s){if(this.find)for(let d=0;d<this.find.length;d++)this.find[d].node==s&&(this.find[d].pos=this.currentPos-(s.nodeValue.length-this.find[d].offset))}matchesContext(s){if(s.indexOf("|")>-1)return s.split(/\s*\|\s*/).some(this.matchesContext,this);let d=s.split("/"),g=this.options.context,P=!(this.isOpen||g&&g.parent.type!=this.nodes[0].type),k=(P?0:1)-(g?g.depth+1:0),W=(ct,Ft)=>{for(;ct>=0;ct--){let ae=d[ct];if(""==ae){if(ct==d.length-1||0==ct)continue;for(;Ft>=k;Ft--)if(W(ct-1,Ft))return!0;return!1}{let de=Ft>0||0==Ft&&P?this.nodes[Ft].type:g&&Ft>=k?g.node(Ft-k).type:null;if(!de||de.name!=ae&&-1==de.groups.indexOf(ae))return!1;Ft--}}return!0};return W(d.length-1,this.open)}textblockFromContext(){let s=this.options.context;if(s)for(let d=s.depth;d>=0;d--){let g=s.node(d).contentMatchAt(s.indexAfter(d)).defaultType;if(g&&g.isTextblock&&g.defaultAttrs)return g}for(let d in this.parser.schema.nodes){let g=this.parser.schema.nodes[d];if(g.isTextblock&&g.defaultAttrs)return g}}addPendingMark(s){let d=function(B,s){for(let d=0;d<s.length;d++)if(B.eq(s[d]))return s[d]}(s,this.top.pendingMarks);d&&this.top.stashMarks.push(d),this.top.pendingMarks=s.addToSet(this.top.pendingMarks)}removePendingMark(s,d){for(let g=this.open;g>=0;g--){let P=this.nodes[g];if(P.pendingMarks.lastIndexOf(s)>-1)P.pendingMarks=s.removeFromSet(P.pendingMarks);else{P.activeMarks=s.removeFromSet(P.activeMarks);let W=P.popFromStashMark(s);W&&P.type&&P.type.allowsMarkType(W.type)&&(P.activeMarks=W.addToSet(P.activeMarks))}if(P==d)break}}}function D(B,s){return(B.matches||B.msMatchesSelector||B.webkitMatchesSelector||B.mozMatchesSelector).call(B,s)}function N(B){let s={};for(let d in B)s[d]=B[d];return s}function w(B,s){let d=s.schema.nodes;for(let g in d){let P=d[g];if(!P.allowsMarkType(B))continue;let k=[],W=ct=>{k.push(ct);for(let Ft=0;Ft<ct.edgeCount;Ft++){let{type:ae,next:de}=ct.edge(Ft);if(ae==s||k.indexOf(de)<0&&W(de))return!0}};if(W(P.contentMatch))return!0}}class U{constructor(s,d){this.nodes=s,this.marks=d}serializeFragment(s,d={},g){g||(g=St(d).createDocumentFragment());let P=g,k=[];return s.forEach(W=>{if(k.length||W.marks.length){let ct=0,Ft=0;for(;ct<k.length&&Ft<W.marks.length;){let ae=W.marks[Ft];if(this.marks[ae.type.name]){if(!ae.eq(k[ct][0])||!1===ae.type.spec.spanning)break;ct++,Ft++}else Ft++}for(;ct<k.length;)P=k.pop()[1];for(;Ft<W.marks.length;){let ae=W.marks[Ft++],de=this.serializeMark(ae,W.isInline,d);de&&(k.push([ae,P]),P.appendChild(de.dom),P=de.contentDOM||de.dom)}}P.appendChild(this.serializeNodeInner(W,d))}),g}serializeNodeInner(s,d){let{dom:g,contentDOM:P}=U.renderSpec(St(d),this.nodes[s.type.name](s));if(P){if(s.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(s.content,d,P)}return g}serializeNode(s,d={}){let g=this.serializeNodeInner(s,d);for(let P=s.marks.length-1;P>=0;P--){let k=this.serializeMark(s.marks[P],s.isInline,d);k&&((k.contentDOM||k.dom).appendChild(g),g=k.dom)}return g}serializeMark(s,d,g={}){let P=this.marks[s.type.name];return P&&U.renderSpec(St(g),P(s,d))}static renderSpec(s,d,g=null){if("string"==typeof d)return{dom:s.createTextNode(d)};if(null!=d.nodeType)return{dom:d};if(d.dom&&null!=d.dom.nodeType)return d;let P=d[0],k=P.indexOf(" ");k>0&&(g=P.slice(0,k),P=P.slice(k+1));let W,ct=g?s.createElementNS(g,P):s.createElement(P),Ft=d[1],ae=1;if(Ft&&"object"==typeof Ft&&null==Ft.nodeType&&!Array.isArray(Ft)){ae=2;for(let de in Ft)if(null!=Ft[de]){let He=de.indexOf(" ");He>0?ct.setAttributeNS(de.slice(0,He),de.slice(He+1),Ft[de]):ct.setAttribute(de,Ft[de])}}for(let de=ae;de<d.length;de++){let He=d[de];if(0===He){if(de<d.length-1||de>ae)throw new RangeError("Content hole must be the only child of its parent node");return{dom:ct,contentDOM:ct}}{let{dom:$e,contentDOM:Qe}=U.renderSpec(s,He,g);if(ct.appendChild($e),Qe){if(W)throw new RangeError("Multiple content holes");W=Qe}}}return{dom:ct,contentDOM:W}}static fromSchema(s){return s.cached.domSerializer||(s.cached.domSerializer=new U(this.nodesFromSchema(s),this.marksFromSchema(s)))}static nodesFromSchema(s){let d=Tt(s.nodes);return d.text||(d.text=g=>g.text),d}static marksFromSchema(s){return Tt(s.marks)}}function Tt(B){let s={};for(let d in B){let g=B[d].spec.toDOM;g&&(s[d]=g)}return s}function St(B){return B.document||window.document}},62463:(ne,Mt,a)=>{a.d(Mt,{Bs:()=>Y,C1:()=>X,H$:()=>qt,Sy:()=>Ot,Y1:()=>y,qv:()=>ft,xm:()=>p,yy:()=>Bt});var E=a(77346),r=a(38480);const T=Object.create(null);class y{constructor(O,Z,j){this.$anchor=O,this.$head=Z,this.ranges=j||[new p(O.min(Z),O.max(Z))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let O=this.ranges;for(let Z=0;Z<O.length;Z++)if(O[Z].$from.pos!=O[Z].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(O,Z=E.p2.empty){let j=Z.content.lastChild,bt=null;for(let pt=0;pt<Z.openEnd;pt++)bt=j,j=j.lastChild;let Q=O.steps.length,ot=this.ranges;for(let pt=0;pt<ot.length;pt++){let{$from:Kt,$to:Zt}=ot[pt],le=O.mapping.slice(Q);O.replaceRange(le.map(Kt.pos),le.map(Zt.pos),pt?E.p2.empty:Z),0==pt&&Dt(O,Q,(j?j.isInline:bt&&bt.isTextblock)?-1:1)}}replaceWith(O,Z){let j=O.steps.length,bt=this.ranges;for(let Q=0;Q<bt.length;Q++){let{$from:ot,$to:pt}=bt[Q],Kt=O.mapping.slice(j),Zt=Kt.map(ot.pos),le=Kt.map(pt.pos);Q?O.deleteRange(Zt,le):(O.replaceRangeWith(Zt,le,Z),Dt(O,j,Z.isInline?-1:1))}}static findFrom(O,Z,j=!1){let bt=O.parent.inlineContent?new Y(O):mt(O.node(0),O.parent,O.pos,O.index(),Z,j);if(bt)return bt;for(let Q=O.depth-1;Q>=0;Q--){let ot=Z<0?mt(O.node(0),O.node(Q),O.before(Q+1),O.index(Q),Z,j):mt(O.node(0),O.node(Q),O.after(Q+1),O.index(Q)+1,Z,j);if(ot)return ot}return null}static near(O,Z=1){return this.findFrom(O,Z)||this.findFrom(O,-Z)||new X(O.node(0))}static atStart(O){return mt(O,O,0,0,1)||new X(O)}static atEnd(O){return mt(O,O,O.content.size,O.childCount,-1)||new X(O)}static fromJSON(O,Z){if(!Z||!Z.type)throw new RangeError("Invalid input for Selection.fromJSON");let j=T[Z.type];if(!j)throw new RangeError(`No selection type ${Z.type} defined`);return j.fromJSON(O,Z)}static jsonID(O,Z){if(O in T)throw new RangeError("Duplicate use of selection JSON ID "+O);return T[O]=Z,Z.prototype.jsonID=O,Z}getBookmark(){return Y.between(this.$anchor,this.$head).getBookmark()}}y.prototype.visible=!0;class p{constructor(O,Z){this.$from=O,this.$to=Z}}let it=!1;function F(gt){!it&&!gt.parent.inlineContent&&(it=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+gt.parent.type.name+")"))}class Y extends y{constructor(O,Z=O){F(O),F(Z),super(O,Z)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(O,Z){let j=O.resolve(Z.map(this.head));if(!j.parent.inlineContent)return y.near(j);let bt=O.resolve(Z.map(this.anchor));return new Y(bt.parent.inlineContent?bt:j,j)}replace(O,Z=E.p2.empty){if(super.replace(O,Z),Z==E.p2.empty){let j=this.$from.marksAcross(this.$to);j&&O.ensureMarks(j)}}eq(O){return O instanceof Y&&O.anchor==this.anchor&&O.head==this.head}getBookmark(){return new q(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(O,Z){if("number"!=typeof Z.anchor||"number"!=typeof Z.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new Y(O.resolve(Z.anchor),O.resolve(Z.head))}static create(O,Z,j=Z){let bt=O.resolve(Z);return new this(bt,j==Z?bt:O.resolve(j))}static between(O,Z,j){let bt=O.pos-Z.pos;if((!j||bt)&&(j=bt>=0?1:-1),!Z.parent.inlineContent){let Q=y.findFrom(Z,j,!0)||y.findFrom(Z,-j,!0);if(!Q)return y.near(Z,j);Z=Q.$head}return O.parent.inlineContent||(0==bt||(O=(y.findFrom(O,-j,!0)||y.findFrom(O,j,!0)).$anchor).pos<Z.pos!=bt<0)&&(O=Z),new Y(O,Z)}}y.jsonID("text",Y);class q{constructor(O,Z){this.anchor=O,this.head=Z}map(O){return new q(O.map(this.anchor),O.map(this.head))}resolve(O){return Y.between(O.resolve(this.anchor),O.resolve(this.head))}}class ft extends y{constructor(O){let Z=O.nodeAfter,j=O.node(0).resolve(O.pos+Z.nodeSize);super(O,j),this.node=Z}map(O,Z){let{deleted:j,pos:bt}=Z.mapResult(this.anchor),Q=O.resolve(bt);return j?y.near(Q):new ft(Q)}content(){return new E.p2(E.HY.from(this.node),0,0)}eq(O){return O instanceof ft&&O.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new ut(this.anchor)}static fromJSON(O,Z){if("number"!=typeof Z.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ft(O.resolve(Z.anchor))}static create(O,Z){return new ft(O.resolve(Z))}static isSelectable(O){return!O.isText&&!1!==O.type.spec.selectable}}ft.prototype.visible=!1,y.jsonID("node",ft);class ut{constructor(O){this.anchor=O}map(O){let{deleted:Z,pos:j}=O.mapResult(this.anchor);return Z?new q(j,j):new ut(j)}resolve(O){let Z=O.resolve(this.anchor),j=Z.nodeAfter;return j&&ft.isSelectable(j)?new ft(Z):y.near(Z)}}class X extends y{constructor(O){super(O.resolve(0),O.resolve(O.content.size))}replace(O,Z=E.p2.empty){if(Z==E.p2.empty){O.delete(0,O.doc.content.size);let j=y.atStart(O.doc);j.eq(O.selection)||O.setSelection(j)}else super.replace(O,Z)}toJSON(){return{type:"all"}}static fromJSON(O){return new X(O)}map(O){return new X(O)}eq(O){return O instanceof X}getBookmark(){return Ct}}y.jsonID("all",X);const Ct={map(){return this},resolve:gt=>new X(gt)};function mt(gt,O,Z,j,bt,Q=!1){if(O.inlineContent)return Y.create(gt,Z);for(let ot=j-(bt>0?0:1);bt>0?ot<O.childCount:ot>=0;ot+=bt){let pt=O.child(ot);if(pt.isAtom){if(!Q&&ft.isSelectable(pt))return ft.create(gt,Z-(bt<0?pt.nodeSize:0))}else{let Kt=mt(gt,pt,Z+bt,bt<0?pt.childCount:0,bt,Q);if(Kt)return Kt}Z+=pt.nodeSize*bt}return null}function Dt(gt,O,Z){let j=gt.steps.length-1;if(j<O)return;let ot,bt=gt.steps[j];(bt instanceof r.Pu||bt instanceof r.FC)&&(gt.mapping.maps[j].forEach((pt,Kt,Zt,le)=>{null==ot&&(ot=le)}),gt.setSelection(y.near(gt.doc.resolve(ot),Z)))}class at extends r.wx{constructor(O){super(O.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=O.selection,this.storedMarks=O.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(O){if(O.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=O,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(O){return this.storedMarks=O,this.updated|=2,this}ensureMarks(O){return E.vc.sameSet(this.storedMarks||this.selection.$from.marks(),O)||this.setStoredMarks(O),this}addStoredMark(O){return this.ensureMarks(O.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(O){return this.ensureMarks(O.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(O,Z){super.addStep(O,Z),this.updated=-3&this.updated,this.storedMarks=null}setTime(O){return this.time=O,this}replaceSelection(O){return this.selection.replace(this,O),this}replaceSelectionWith(O,Z=!0){let j=this.selection;return Z&&(O=O.mark(this.storedMarks||(j.empty?j.$from.marks():j.$from.marksAcross(j.$to)||E.vc.none))),j.replaceWith(this,O),this}deleteSelection(){return this.selection.replace(this),this}insertText(O,Z,j){let bt=this.doc.type.schema;if(null==Z)return O?this.replaceSelectionWith(bt.text(O),!0):this.deleteSelection();{if(null==j&&(j=Z),j=null==j?Z:j,!O)return this.deleteRange(Z,j);let Q=this.storedMarks;if(!Q){let ot=this.doc.resolve(Z);Q=j==Z?ot.marks():ot.marksAcross(this.doc.resolve(j))}return this.replaceRangeWith(Z,j,bt.text(O,Q)),this.selection.empty||this.setSelection(y.near(this.selection.$to)),this}}setMeta(O,Z){return this.meta["string"==typeof O?O:O.key]=Z,this}getMeta(O){return this.meta["string"==typeof O?O:O.key]}get isGeneric(){for(let O in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function ht(gt,O){return O&&gt?gt.bind(O):gt}class ${constructor(O,Z,j){this.name=O,this.init=ht(Z.init,j),this.apply=ht(Z.apply,j)}}const xt=[new $("doc",{init:gt=>gt.doc||gt.schema.topNodeType.createAndFill(),apply:gt=>gt.doc}),new $("selection",{init:(gt,O)=>gt.selection||y.atStart(O.doc),apply:gt=>gt.selection}),new $("storedMarks",{init:gt=>gt.storedMarks||null,apply:(gt,O,Z,j)=>j.selection.$cursor?gt.storedMarks:null}),new $("scrollToSelection",{init:()=>0,apply:(gt,O)=>gt.scrolledIntoView?O+1:O})];class yt{constructor(O,Z){this.schema=O,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=xt.slice(),Z&&Z.forEach(j=>{if(this.pluginsByKey[j.key])throw new RangeError("Adding different instances of a keyed plugin ("+j.key+")");this.plugins.push(j),this.pluginsByKey[j.key]=j,j.spec.state&&this.fields.push(new $(j.key,j.spec.state,j))})}}class Bt{constructor(O){this.config=O}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(O){return this.applyTransaction(O).state}filterTransaction(O,Z=-1){for(let j=0;j<this.config.plugins.length;j++)if(j!=Z){let bt=this.config.plugins[j];if(bt.spec.filterTransaction&&!bt.spec.filterTransaction.call(bt,O,this))return!1}return!0}applyTransaction(O){if(!this.filterTransaction(O))return{state:this,transactions:[]};let Z=[O],j=this.applyInner(O),bt=null;for(;;){let Q=!1;for(let ot=0;ot<this.config.plugins.length;ot++){let pt=this.config.plugins[ot];if(pt.spec.appendTransaction){let Kt=bt?bt[ot].n:0,Zt=bt?bt[ot].state:this,le=Kt<Z.length&&pt.spec.appendTransaction.call(pt,Kt?Z.slice(Kt):Z,Zt,j);if(le&&j.filterTransaction(le,ot)){if(le.setMeta("appendedTransaction",O),!bt){bt=[];for(let Gt=0;Gt<this.config.plugins.length;Gt++)bt.push(Gt<ot?{state:j,n:Z.length}:{state:this,n:0})}Z.push(le),j=j.applyInner(le),Q=!0}bt&&(bt[ot]={state:j,n:Z.length})}}if(!Q)return{state:j,transactions:Z}}}applyInner(O){if(!O.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let Z=new Bt(this.config),j=this.config.fields;for(let bt=0;bt<j.length;bt++){let Q=j[bt];Z[Q.name]=Q.apply(O,this[Q.name],this,Z)}return Z}get tr(){return new at(this)}static create(O){let Z=new yt(O.doc?O.doc.type.schema:O.schema,O.plugins),j=new Bt(Z);for(let bt=0;bt<Z.fields.length;bt++)j[Z.fields[bt].name]=Z.fields[bt].init(O,j);return j}reconfigure(O){let Z=new yt(this.schema,O.plugins),j=Z.fields,bt=new Bt(Z);for(let Q=0;Q<j.length;Q++){let ot=j[Q].name;bt[ot]=this.hasOwnProperty(ot)?this[ot]:j[Q].init(O,bt)}return bt}toJSON(O){let Z={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(Z.storedMarks=this.storedMarks.map(j=>j.toJSON())),O&&"object"==typeof O)for(let j in O){if("doc"==j||"selection"==j)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let bt=O[j],Q=bt.spec.state;Q&&Q.toJSON&&(Z[j]=Q.toJSON.call(bt,this[bt.key]))}return Z}static fromJSON(O,Z,j){if(!Z)throw new RangeError("Invalid input for EditorState.fromJSON");if(!O.schema)throw new RangeError("Required config field 'schema' missing");let bt=new yt(O.schema,O.plugins),Q=new Bt(bt);return bt.fields.forEach(ot=>{if("doc"==ot.name)Q.doc=E.NB.fromJSON(O.schema,Z.doc);else if("selection"==ot.name)Q.selection=y.fromJSON(Q.doc,Z.selection);else if("storedMarks"==ot.name)Z.storedMarks&&(Q.storedMarks=Z.storedMarks.map(O.schema.markFromJSON));else{if(j)for(let pt in j){let Kt=j[pt],Zt=Kt.spec.state;if(Kt.key==ot.name&&Zt&&Zt.fromJSON&&Object.prototype.hasOwnProperty.call(Z,pt))return void(Q[ot.name]=Zt.fromJSON.call(Kt,O,Z[pt],Q))}Q[ot.name]=ot.init(O,Q)}}),Q}}function Nt(gt,O,Z){for(let j in gt){let bt=gt[j];bt instanceof Function?bt=bt.bind(O):"handleDOMEvents"==j&&(bt=Nt(bt,O,{})),Z[j]=bt}return Z}class Ot{constructor(O){this.spec=O,this.props={},O.props&&Nt(O.props,this,this.props),this.key=O.key?O.key.key:jt("plugin")}getState(O){return O[this.key]}}const Ut=Object.create(null);function jt(gt){return gt in Ut?gt+"$"+ ++Ut[gt]:(Ut[gt]=0,gt+"$")}class qt{constructor(O="key"){this.key=jt(O)}get(O){return O.config.pluginsByKey[this.key]}getState(O){return O[this.key]}}},38480:(ne,Mt,a)=>{a.d(Mt,{Ax:()=>Zt,FC:()=>yt,GJ:()=>Te,Mn:()=>Gt,Pu:()=>xt,dR:()=>Je,k9:()=>qt,nd:()=>O,nj:()=>Ne,vs:()=>Ct,wx:()=>Oe});var E=a(77346);const T=Math.pow(2,16);function y(Et,D){return Et+D*T}function p(Et){return 65535&Et}class ut{constructor(D,b,N){this.pos=D,this.delInfo=b,this.recover=N}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class X{constructor(D,b=!1){if(this.ranges=D,this.inverted=b,!D.length&&X.empty)return X.empty}recover(D){let b=0,N=p(D);if(!this.inverted)for(let w=0;w<N;w++)b+=this.ranges[3*w+2]-this.ranges[3*w+1];return this.ranges[3*N]+b+((Et=D)-(65535&Et))/T;var Et}mapResult(D,b=1){return this._map(D,b,!1)}map(D,b=1){return this._map(D,b,!0)}_map(D,b,N){let w=0,H=this.inverted?2:1,U=this.inverted?1:2;for(let Tt=0;Tt<this.ranges.length;Tt+=3){let St=this.ranges[Tt]-(this.inverted?w:0);if(St>D)break;let B=this.ranges[Tt+H],s=this.ranges[Tt+U],d=St+B;if(D<=d){let P=St+w+((B?D==St?-1:D==d?1:b:b)<0?0:s);if(N)return P;let k=D==(b<0?St:d)?null:y(Tt/3,D-St),W=D==St?2:D==d?1:4;return(b<0?D!=St:D!=d)&&(W|=8),new ut(P,W,k)}w+=s-B}return N?D+w:new ut(D+w,0,null)}touches(D,b){let N=0,w=p(b),H=this.inverted?2:1,U=this.inverted?1:2;for(let Tt=0;Tt<this.ranges.length;Tt+=3){let St=this.ranges[Tt]-(this.inverted?N:0);if(St>D)break;let B=this.ranges[Tt+H];if(D<=St+B&&Tt==3*w)return!0;N+=this.ranges[Tt+U]-B}return!1}forEach(D){let b=this.inverted?2:1,N=this.inverted?1:2;for(let w=0,H=0;w<this.ranges.length;w+=3){let U=this.ranges[w],Tt=U-(this.inverted?H:0),St=U+(this.inverted?0:H),B=this.ranges[w+b],s=this.ranges[w+N];D(Tt,Tt+B,St,St+s),H+=s-B}}invert(){return new X(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(D){return 0==D?X.empty:new X(D<0?[0,-D,0]:[0,0,D])}}X.empty=new X([]);class Ct{constructor(D=[],b,N=0,w=D.length){this.maps=D,this.mirror=b,this.from=N,this.to=w}slice(D=0,b=this.maps.length){return new Ct(this.maps,this.mirror,D,b)}copy(){return new Ct(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(D,b){this.to=this.maps.push(D),null!=b&&this.setMirror(this.maps.length-1,b)}appendMapping(D){for(let b=0,N=this.maps.length;b<D.maps.length;b++){let w=D.getMirror(b);this.appendMap(D.maps[b],null!=w&&w<b?N+w:void 0)}}getMirror(D){if(this.mirror)for(let b=0;b<this.mirror.length;b++)if(this.mirror[b]==D)return this.mirror[b+(b%2?-1:1)]}setMirror(D,b){this.mirror||(this.mirror=[]),this.mirror.push(D,b)}appendMappingInverted(D){for(let b=D.maps.length-1,N=this.maps.length+D.maps.length;b>=0;b--){let w=D.getMirror(b);this.appendMap(D.maps[b].invert(),null!=w&&w>b?N-w-1:void 0)}}invert(){let D=new Ct;return D.appendMappingInverted(this),D}map(D,b=1){if(this.mirror)return this._map(D,b,!0);for(let N=this.from;N<this.to;N++)D=this.maps[N].map(D,b);return D}mapResult(D,b=1){return this._map(D,b,!1)}_map(D,b,N){let w=0;for(let H=this.from;H<this.to;H++){let Tt=this.maps[H].mapResult(D,b);if(null!=Tt.recover){let St=this.getMirror(H);if(null!=St&&St>H&&St<this.to){H=St,D=this.maps[St].recover(Tt.recover);continue}}w|=Tt.delInfo,D=Tt.pos}return N?D:new ut(D,w,null)}}const mt=Object.create(null);class Dt{getMap(){return X.empty}merge(D){return null}static fromJSON(D,b){if(!b||!b.stepType)throw new RangeError("Invalid input for Step.fromJSON");let N=mt[b.stepType];if(!N)throw new RangeError(`No step type ${b.stepType} defined`);return N.fromJSON(D,b)}static jsonID(D,b){if(D in mt)throw new RangeError("Duplicate use of step JSON ID "+D);return mt[D]=b,b.prototype.jsonID=D,b}}class zt{constructor(D,b){this.doc=D,this.failed=b}static ok(D){return new zt(D,null)}static fail(D){return new zt(null,D)}static fromReplace(D,b,N,w){try{return zt.ok(D.replace(b,N,w))}catch(H){if(H instanceof E.e4)return zt.fail(H.message);throw H}}}function At(Et,D,b){let N=[];for(let w=0;w<Et.childCount;w++){let H=Et.child(w);H.content.size&&(H=H.copy(At(H.content,D,H))),H.isInline&&(H=D(H,b,w)),N.push(H)}return E.HY.fromArray(N)}class _t extends Dt{constructor(D,b,N){super(),this.from=D,this.to=b,this.mark=N}apply(D){let b=D.slice(this.from,this.to),N=D.resolve(this.from),w=N.node(N.sharedDepth(this.to)),H=new E.p2(At(b.content,(U,Tt)=>U.isAtom&&Tt.type.allowsMarkType(this.mark.type)?U.mark(this.mark.addToSet(U.marks)):U,w),b.openStart,b.openEnd);return zt.fromReplace(D,this.from,this.to,H)}invert(){return new at(this.from,this.to,this.mark)}map(D){let b=D.mapResult(this.from,1),N=D.mapResult(this.to,-1);return b.deleted&&N.deleted||b.pos>=N.pos?null:new _t(b.pos,N.pos,this.mark)}merge(D){return D instanceof _t&&D.mark.eq(this.mark)&&this.from<=D.to&&this.to>=D.from?new _t(Math.min(this.from,D.from),Math.max(this.to,D.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(D,b){if("number"!=typeof b.from||"number"!=typeof b.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new _t(b.from,b.to,D.markFromJSON(b.mark))}}Dt.jsonID("addMark",_t);class at extends Dt{constructor(D,b,N){super(),this.from=D,this.to=b,this.mark=N}apply(D){let b=D.slice(this.from,this.to),N=new E.p2(At(b.content,w=>w.mark(this.mark.removeFromSet(w.marks)),D),b.openStart,b.openEnd);return zt.fromReplace(D,this.from,this.to,N)}invert(){return new _t(this.from,this.to,this.mark)}map(D){let b=D.mapResult(this.from,1),N=D.mapResult(this.to,-1);return b.deleted&&N.deleted||b.pos>=N.pos?null:new at(b.pos,N.pos,this.mark)}merge(D){return D instanceof at&&D.mark.eq(this.mark)&&this.from<=D.to&&this.to>=D.from?new at(Math.min(this.from,D.from),Math.max(this.to,D.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(D,b){if("number"!=typeof b.from||"number"!=typeof b.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new at(b.from,b.to,D.markFromJSON(b.mark))}}Dt.jsonID("removeMark",at);class ht extends Dt{constructor(D,b){super(),this.pos=D,this.mark=b}apply(D){let b=D.nodeAt(this.pos);if(!b)return zt.fail("No node at mark step's position");let N=b.type.create(b.attrs,null,this.mark.addToSet(b.marks));return zt.fromReplace(D,this.pos,this.pos+1,new E.p2(E.HY.from(N),0,b.isLeaf?0:1))}invert(D){let b=D.nodeAt(this.pos);if(b){let N=this.mark.addToSet(b.marks);if(N.length==b.marks.length){for(let w=0;w<b.marks.length;w++)if(!b.marks[w].isInSet(N))return new ht(this.pos,b.marks[w]);return new ht(this.pos,this.mark)}}return new $(this.pos,this.mark)}map(D){let b=D.mapResult(this.pos,1);return b.deletedAfter?null:new ht(b.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(D,b){if("number"!=typeof b.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ht(b.pos,D.markFromJSON(b.mark))}}Dt.jsonID("addNodeMark",ht);class $ extends Dt{constructor(D,b){super(),this.pos=D,this.mark=b}apply(D){let b=D.nodeAt(this.pos);if(!b)return zt.fail("No node at mark step's position");let N=b.type.create(b.attrs,null,this.mark.removeFromSet(b.marks));return zt.fromReplace(D,this.pos,this.pos+1,new E.p2(E.HY.from(N),0,b.isLeaf?0:1))}invert(D){let b=D.nodeAt(this.pos);return b&&this.mark.isInSet(b.marks)?new ht(this.pos,this.mark):this}map(D){let b=D.mapResult(this.pos,1);return b.deletedAfter?null:new $(b.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(D,b){if("number"!=typeof b.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new $(b.pos,D.markFromJSON(b.mark))}}Dt.jsonID("removeNodeMark",$);class xt extends Dt{constructor(D,b,N,w=!1){super(),this.from=D,this.to=b,this.slice=N,this.structure=w}apply(D){return this.structure&&Bt(D,this.from,this.to)?zt.fail("Structure replace would overwrite content"):zt.fromReplace(D,this.from,this.to,this.slice)}getMap(){return new X([this.from,this.to-this.from,this.slice.size])}invert(D){return new xt(this.from,this.from+this.slice.size,D.slice(this.from,this.to))}map(D){let b=D.mapResult(this.from,1),N=D.mapResult(this.to,-1);return b.deletedAcross&&N.deletedAcross?null:new xt(b.pos,Math.max(b.pos,N.pos),this.slice)}merge(D){if(!(D instanceof xt)||D.structure||this.structure)return null;if(this.from+this.slice.size!=D.from||this.slice.openEnd||D.slice.openStart){if(D.to!=this.from||this.slice.openStart||D.slice.openEnd)return null;{let b=this.slice.size+D.slice.size==0?E.p2.empty:new E.p2(D.slice.content.append(this.slice.content),D.slice.openStart,this.slice.openEnd);return new xt(D.from,this.to,b,this.structure)}}{let b=this.slice.size+D.slice.size==0?E.p2.empty:new E.p2(this.slice.content.append(D.slice.content),this.slice.openStart,D.slice.openEnd);return new xt(this.from,this.to+(D.to-D.from),b,this.structure)}}toJSON(){let D={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(D.slice=this.slice.toJSON()),this.structure&&(D.structure=!0),D}static fromJSON(D,b){if("number"!=typeof b.from||"number"!=typeof b.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new xt(b.from,b.to,E.p2.fromJSON(D,b.slice),!!b.structure)}}Dt.jsonID("replace",xt);class yt extends Dt{constructor(D,b,N,w,H,U,Tt=!1){super(),this.from=D,this.to=b,this.gapFrom=N,this.gapTo=w,this.slice=H,this.insert=U,this.structure=Tt}apply(D){if(this.structure&&(Bt(D,this.from,this.gapFrom)||Bt(D,this.gapTo,this.to)))return zt.fail("Structure gap-replace would overwrite content");let b=D.slice(this.gapFrom,this.gapTo);if(b.openStart||b.openEnd)return zt.fail("Gap is not a flat range");let N=this.slice.insertAt(this.insert,b.content);return N?zt.fromReplace(D,this.from,this.to,N):zt.fail("Content does not fit in gap")}getMap(){return new X([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(D){let b=this.gapTo-this.gapFrom;return new yt(this.from,this.from+this.slice.size+b,this.from+this.insert,this.from+this.insert+b,D.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(D){let b=D.mapResult(this.from,1),N=D.mapResult(this.to,-1),w=D.map(this.gapFrom,-1),H=D.map(this.gapTo,1);return b.deletedAcross&&N.deletedAcross||w<b.pos||H>N.pos?null:new yt(b.pos,N.pos,w,H,this.slice,this.insert,this.structure)}toJSON(){let D={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(D.slice=this.slice.toJSON()),this.structure&&(D.structure=!0),D}static fromJSON(D,b){if("number"!=typeof b.from||"number"!=typeof b.to||"number"!=typeof b.gapFrom||"number"!=typeof b.gapTo||"number"!=typeof b.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new yt(b.from,b.to,b.gapFrom,b.gapTo,E.p2.fromJSON(D,b.slice),b.insert,!!b.structure)}}function Bt(Et,D,b){let N=Et.resolve(D),w=b-D,H=N.depth;for(;w>0&&H>0&&N.indexAfter(H)==N.node(H).childCount;)H--,w--;if(w>0){let U=N.node(H).maybeChild(N.indexAfter(H));for(;w>0;){if(!U||U.isLeaf)return!0;U=U.firstChild,w--}}return!1}function jt(Et,D,b){return(0==D||Et.canReplace(D,Et.childCount))&&(b==Et.childCount||Et.canReplace(0,b))}function qt(Et){let b=Et.parent.content.cutByIndex(Et.startIndex,Et.endIndex);for(let N=Et.depth;;--N){let w=Et.$from.node(N),H=Et.$from.index(N),U=Et.$to.indexAfter(N);if(N<Et.depth&&w.canReplace(H,U,b))return N;if(0==N||w.type.spec.isolating||!jt(w,H,U))break}return null}function O(Et,D,b=null,N=Et){let w=function(Et,D){let{parent:b,startIndex:N,endIndex:w}=Et,H=b.contentMatchAt(N).findWrapping(D);return H&&b.canReplaceWith(N,w,H.length?H[0]:D)?H:null}(Et,D),H=w&&function(Et,D){let{parent:b,startIndex:N,endIndex:w}=Et,H=b.child(N),U=D.contentMatch.findWrapping(H.type);if(!U)return null;let St=(U.length?U[U.length-1]:D).contentMatch;for(let B=N;St&&B<w;B++)St=St.matchType(b.child(B).type);return St&&St.validEnd?U:null}(N,D);return H?w.map(Z).concat({type:D,attrs:b}).concat(H.map(Z)):null}function Z(Et){return{type:Et,attrs:null}}function Zt(Et,D,b=1,N){let w=Et.resolve(D),H=w.depth-b,U=N&&N[N.length-1]||w.parent;if(H<0||w.parent.type.spec.isolating||!w.parent.canReplace(w.index(),w.parent.childCount)||!U.type.validContent(w.parent.content.cutByIndex(w.index(),w.parent.childCount)))return!1;for(let B=w.depth-1,s=b-2;B>H;B--,s--){let d=w.node(B),g=w.index(B);if(d.type.spec.isolating)return!1;let P=d.content.cutByIndex(g,d.childCount),k=N&&N[s]||d;if(k!=d&&(P=P.replaceChild(0,k.type.create(k.attrs))),!d.canReplace(g+1,d.childCount)||!k.type.validContent(P))return!1}let Tt=w.indexAfter(H),St=N&&N[0];return w.node(H).canReplaceWith(Tt,Tt,St?St.type:w.node(H+1).type)}function Gt(Et,D){let b=Et.resolve(D),N=b.index();return De(b.nodeBefore,b.nodeAfter)&&b.parent.canReplace(N,N+1)}function De(Et,D){return!(!Et||!D||Et.isLeaf||!Et.canAppend(D))}function Te(Et,D,b=-1){let N=Et.resolve(D);for(let w=N.depth;;w--){let H,U,Tt=N.index(w);if(w==N.depth?(H=N.nodeBefore,U=N.nodeAfter):b>0?(H=N.node(w+1),Tt++,U=N.node(w).maybeChild(Tt)):(H=N.node(w).maybeChild(Tt-1),U=N.node(w+1)),H&&!H.isTextblock&&De(H,U)&&N.node(w).canReplace(Tt,Tt+1))return D;if(0==w)break;D=b<0?N.before(w):N.after(w)}}function Ne(Et,D,b){let N=Et.resolve(D);if(!b.content.size)return D;let w=b.content;for(let H=0;H<b.openStart;H++)w=w.firstChild.content;for(let H=1;H<=(0==b.openStart&&b.size?2:1);H++)for(let U=N.depth;U>=0;U--){let Tt=U==N.depth?0:N.pos<=(N.start(U+1)+N.end(U+1))/2?-1:1,St=N.index(U)+(Tt>0?1:0),B=N.node(U),s=!1;if(1==H)s=B.canReplace(St,St,w);else{let d=B.contentMatchAt(St).findWrapping(w.firstChild.type);s=d&&B.canReplaceWith(St,St,d[0])}if(s)return 0==Tt?N.pos:Tt<0?N.before(U+1):N.after(U+1)}return null}function Je(Et,D,b=D,N=E.p2.empty){if(D==b&&!N.size)return null;let w=Et.resolve(D),H=Et.resolve(b);return Re(w,H,N)?new xt(D,b,N):new We(w,H,N).fit()}function Re(Et,D,b){return!b.openStart&&!b.openEnd&&Et.start()==D.start()&&Et.parent.canReplace(Et.index(),D.index(),b.content)}Dt.jsonID("replaceAround",yt);class We{constructor(D,b,N){this.$from=D,this.$to=b,this.unplaced=N,this.frontier=[],this.placed=E.HY.empty;for(let w=0;w<=D.depth;w++){let H=D.node(w);this.frontier.push({type:H.type,match:H.contentMatchAt(D.indexAfter(w))})}for(let w=D.depth;w>0;w--)this.placed=E.HY.from(D.node(w).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let B=this.findFittable();B?this.placeNodes(B):this.openMore()||this.dropNode()}let D=this.mustMoveInline(),b=this.placed.size-this.depth-this.$from.depth,N=this.$from,w=this.close(D<0?this.$to:N.doc.resolve(D));if(!w)return null;let H=this.placed,U=N.depth,Tt=w.depth;for(;U&&Tt&&1==H.childCount;)H=H.firstChild.content,U--,Tt--;let St=new E.p2(H,U,Tt);return D>-1?new yt(N.pos,D,this.$to.pos,this.$to.end(),St,b):St.size||N.pos!=this.$to.pos?new xt(N.pos,w.pos,St):null}findFittable(){let D=this.unplaced.openStart;for(let b=this.unplaced.content,N=0,w=this.unplaced.openEnd;N<D;N++){let H=b.firstChild;if(b.childCount>1&&(w=0),H.type.spec.isolating&&w<=N){D=N;break}b=H.content}for(let b=1;b<=2;b++)for(let N=1==b?D:this.unplaced.openStart;N>=0;N--){let w,H=null;N?(H=Fe(this.unplaced.content,N-1).firstChild,w=H.content):w=this.unplaced.content;let U=w.firstChild;for(let Tt=this.depth;Tt>=0;Tt--){let s,{type:St,match:B}=this.frontier[Tt],d=null;if(1==b&&(U?B.matchType(U.type)||(d=B.fillBefore(E.HY.from(U),!1)):H&&St.compatibleContent(H.type)))return{sliceDepth:N,frontierDepth:Tt,parent:H,inject:d};if(2==b&&U&&(s=B.findWrapping(U.type)))return{sliceDepth:N,frontierDepth:Tt,parent:H,wrap:s};if(H&&B.matchType(H.type))break}}}openMore(){let{content:D,openStart:b,openEnd:N}=this.unplaced,w=Fe(D,b);return!(!w.childCount||w.firstChild.isLeaf||(this.unplaced=new E.p2(D,b+1,Math.max(N,w.size+b>=D.size-N?b+1:0)),0))}dropNode(){let{content:D,openStart:b,openEnd:N}=this.unplaced,w=Fe(D,b);if(w.childCount<=1&&b>0){let H=D.size-b<=b+w.size;this.unplaced=new E.p2(Ee(D,b-1,1),b-1,H?b-1:N)}else this.unplaced=new E.p2(Ee(D,b,1),b,N)}placeNodes({sliceDepth:D,frontierDepth:b,parent:N,inject:w,wrap:H}){for(;this.depth>b;)this.closeFrontierNode();if(H)for(let W=0;W<H.length;W++)this.openFrontierNode(H[W]);let U=this.unplaced,Tt=N?N.content:U.content,St=U.openStart-D,B=0,s=[],{match:d,type:g}=this.frontier[b];if(w){for(let W=0;W<w.childCount;W++)s.push(w.child(W));d=d.matchFragment(w)}let P=Tt.size+D-(U.content.size-U.openEnd);for(;B<Tt.childCount;){let W=Tt.child(B),ct=d.matchType(W.type);if(!ct)break;B++,(B>1||0==St||W.content.size)&&(d=ct,s.push(Pe(W.mark(g.allowedMarks(W.marks)),1==B?St:0,B==Tt.childCount?P:-1)))}let k=B==Tt.childCount;k||(P=-1),this.placed=Be(this.placed,b,E.HY.from(s)),this.frontier[b].match=d,k&&P<0&&N&&N.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let W=0,ct=Tt;W<P;W++){let Ft=ct.lastChild;this.frontier.push({type:Ft.type,match:Ft.contentMatchAt(Ft.childCount)}),ct=Ft.content}this.unplaced=k?0==D?E.p2.empty:new E.p2(Ee(U.content,D-1,1),D-1,P<0?U.openEnd:D-1):new E.p2(Ee(U.content,D,B),U.openStart,U.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let b,D=this.frontier[this.depth];if(!D.type.isTextblock||!Se(this.$to,this.$to.depth,D.type,D.match,!1)||this.$to.depth==this.depth&&(b=this.findCloseLevel(this.$to))&&b.depth==this.depth)return-1;let{depth:N}=this.$to,w=this.$to.after(N);for(;N>1&&w==this.$to.end(--N);)++w;return w}findCloseLevel(D){t:for(let b=Math.min(this.depth,D.depth);b>=0;b--){let{match:N,type:w}=this.frontier[b],H=b<D.depth&&D.end(b+1)==D.pos+(D.depth-(b+1)),U=Se(D,b,w,N,H);if(U){for(let Tt=b-1;Tt>=0;Tt--){let{match:St,type:B}=this.frontier[Tt],s=Se(D,Tt,B,St,!0);if(!s||s.childCount)continue t}return{depth:b,fit:U,move:H?D.doc.resolve(D.after(b+1)):D}}}}close(D){let b=this.findCloseLevel(D);if(!b)return null;for(;this.depth>b.depth;)this.closeFrontierNode();b.fit.childCount&&(this.placed=Be(this.placed,b.depth,b.fit)),D=b.move;for(let N=b.depth+1;N<=D.depth;N++){let w=D.node(N),H=w.type.contentMatch.fillBefore(w.content,!0,D.index(N));this.openFrontierNode(w.type,w.attrs,H)}return D}openFrontierNode(D,b=null,N){let w=this.frontier[this.depth];w.match=w.match.matchType(D),this.placed=Be(this.placed,this.depth,E.HY.from(D.create(b,N))),this.frontier.push({type:D,match:D.contentMatch})}closeFrontierNode(){let b=this.frontier.pop().match.fillBefore(E.HY.empty,!0);b.childCount&&(this.placed=Be(this.placed,this.frontier.length,b))}}function Ee(Et,D,b){return 0==D?Et.cutByIndex(b,Et.childCount):Et.replaceChild(0,Et.firstChild.copy(Ee(Et.firstChild.content,D-1,b)))}function Be(Et,D,b){return 0==D?Et.append(b):Et.replaceChild(Et.childCount-1,Et.lastChild.copy(Be(Et.lastChild.content,D-1,b)))}function Fe(Et,D){for(let b=0;b<D;b++)Et=Et.firstChild.content;return Et}function Pe(Et,D,b){if(D<=0)return Et;let N=Et.content;return D>1&&(N=N.replaceChild(0,Pe(N.firstChild,D-1,1==N.childCount?b-1:0))),D>0&&(N=Et.type.contentMatch.fillBefore(N).append(N),b<=0&&(N=N.append(Et.type.contentMatch.matchFragment(N).fillBefore(E.HY.empty,!0)))),Et.copy(N)}function Se(Et,D,b,N,w){let H=Et.node(D),U=w?Et.indexAfter(D):Et.index(D);if(U==H.childCount&&!b.compatibleContent(H.type))return null;let Tt=N.fillBefore(H.content,!0,U);return Tt&&!function(Et,D,b){for(let N=b;N<D.childCount;N++)if(!Et.allowsMarks(D.child(N).marks))return!0;return!1}(b,H.content,U)?Tt:null}function Me(Et){return Et.spec.defining||Et.spec.definingForContent}function xe(Et,D,b,N,w){if(D<b){let H=Et.firstChild;Et=Et.replaceChild(0,H.copy(xe(H.content,D+1,b,N,H)))}if(D>N){let H=w.contentMatchAt(0),U=H.fillBefore(Et).append(Et);Et=U.append(H.matchFragment(U).fillBefore(E.HY.empty,!0))}return Et}function Ke(Et,D){let b=[];for(let w=Math.min(Et.depth,D.depth);w>=0;w--){let H=Et.start(w);if(H<Et.pos-(Et.depth-w)||D.end(w)>D.pos+(D.depth-w)||Et.node(w).type.spec.isolating||D.node(w).type.spec.isolating)break;(H==D.start(w)||w==Et.depth&&w==D.depth&&Et.parent.inlineContent&&D.parent.inlineContent&&w&&D.start(w-1)==H-1)&&b.push(w)}return b}class we extends Dt{constructor(D,b,N){super(),this.pos=D,this.attr=b,this.value=N}apply(D){let b=D.nodeAt(this.pos);if(!b)return zt.fail("No node at attribute step's position");let N=Object.create(null);for(let H in b.attrs)N[H]=b.attrs[H];N[this.attr]=this.value;let w=b.type.create(N,null,b.marks);return zt.fromReplace(D,this.pos,this.pos+1,new E.p2(E.HY.from(w),0,b.isLeaf?0:1))}getMap(){return X.empty}invert(D){return new we(this.pos,this.attr,D.nodeAt(this.pos).attrs[this.attr])}map(D){let b=D.mapResult(this.pos,1);return b.deletedAfter?null:new we(b.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(D,b){if("number"!=typeof b.pos||"string"!=typeof b.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new we(b.pos,b.attr,b.value)}}Dt.jsonID("attr",we);let Ce=class extends Error{};Ce=function Et(D){let b=Error.call(this,D);return b.__proto__=Et.prototype,b},(Ce.prototype=Object.create(Error.prototype)).constructor=Ce,Ce.prototype.name="TransformError";class Oe{constructor(D){this.doc=D,this.steps=[],this.docs=[],this.mapping=new Ct}get before(){return this.docs.length?this.docs[0]:this.doc}step(D){let b=this.maybeStep(D);if(b.failed)throw new Ce(b.failed);return this}maybeStep(D){let b=D.apply(this.doc);return b.failed||this.addStep(D,b.doc),b}get docChanged(){return this.steps.length>0}addStep(D,b){this.docs.push(this.doc),this.steps.push(D),this.mapping.appendMap(D.getMap()),this.doc=b}replace(D,b=D,N=E.p2.empty){let w=Je(this.doc,D,b,N);return w&&this.step(w),this}replaceWith(D,b,N){return this.replace(D,b,new E.p2(E.HY.from(N),0,0))}delete(D,b){return this.replace(D,b,E.p2.empty)}insert(D,b){return this.replaceWith(D,D,b)}replaceRange(D,b,N){return function(Et,D,b,N){if(!N.size)return Et.deleteRange(D,b);let w=Et.doc.resolve(D),H=Et.doc.resolve(b);if(Re(w,H,N))return Et.step(new xt(D,b,N));let U=Ke(w,Et.doc.resolve(b));0==U[U.length-1]&&U.pop();let Tt=-(w.depth+1);U.unshift(Tt);for(let g=w.depth,P=w.pos-1;g>0;g--,P--){let k=w.node(g).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;U.indexOf(g)>-1?Tt=g:w.before(g)==P&&U.splice(1,0,-g)}let St=U.indexOf(Tt),B=[],s=N.openStart;for(let g=N.content,P=0;;P++){let k=g.firstChild;if(B.push(k),P==N.openStart)break;g=k.content}for(let g=s-1;g>=0;g--){let P=B[g].type,k=Me(P);if(k&&w.node(St).type!=P)s=g;else if(k||!P.isTextblock)break}for(let g=N.openStart;g>=0;g--){let P=(g+s+1)%(N.openStart+1),k=B[P];if(k)for(let W=0;W<U.length;W++){let ct=U[(W+St)%U.length],Ft=!0;ct<0&&(Ft=!1,ct=-ct);let ae=w.node(ct-1),de=w.index(ct-1);if(ae.canReplaceWith(de,de,k.type,k.marks))return Et.replace(w.before(ct),Ft?H.after(ct):b,new E.p2(xe(N.content,0,N.openStart,P),P,N.openEnd))}}let d=Et.steps.length;for(let g=U.length-1;g>=0&&(Et.replace(D,b,N),!(Et.steps.length>d));g--){let P=U[g];P<0||(D=w.before(P),b=H.after(P))}}(this,D,b,N),this}replaceRangeWith(D,b,N){return function(Et,D,b,N){if(!N.isInline&&D==b&&Et.doc.resolve(D).parent.content.size){let w=function(Et,D,b){let N=Et.resolve(D);if(N.parent.canReplaceWith(N.index(),N.index(),b))return D;if(0==N.parentOffset)for(let w=N.depth-1;w>=0;w--){let H=N.index(w);if(N.node(w).canReplaceWith(H,H,b))return N.before(w+1);if(H>0)return null}if(N.parentOffset==N.parent.content.size)for(let w=N.depth-1;w>=0;w--){let H=N.indexAfter(w);if(N.node(w).canReplaceWith(H,H,b))return N.after(w+1);if(H<N.node(w).childCount)return null}return null}(Et.doc,D,N.type);null!=w&&(D=b=w)}Et.replaceRange(D,b,new E.p2(E.HY.from(N),0,0))}(this,D,b,N),this}deleteRange(D,b){return function(Et,D,b){let N=Et.doc.resolve(D),w=Et.doc.resolve(b),H=Ke(N,w);for(let U=0;U<H.length;U++){let Tt=H[U],St=U==H.length-1;if(St&&0==Tt||N.node(Tt).type.contentMatch.validEnd)return Et.delete(N.start(Tt),w.end(Tt));if(Tt>0&&(St||N.node(Tt-1).canReplace(N.index(Tt-1),w.indexAfter(Tt-1))))return Et.delete(N.before(Tt),w.after(Tt))}for(let U=1;U<=N.depth&&U<=w.depth;U++)if(D-N.start(U)==N.depth-U&&b>N.end(U)&&w.end(U)-b!=w.depth-U)return Et.delete(N.before(U),b);Et.delete(D,b)}(this,D,b),this}lift(D,b){return function(Et,D,b){let{$from:N,$to:w,depth:H}=D,U=N.before(H+1),Tt=w.after(H+1),St=U,B=Tt,s=E.HY.empty,d=0;for(let k=H,W=!1;k>b;k--)W||N.index(k)>0?(W=!0,s=E.HY.from(N.node(k).copy(s)),d++):St--;let g=E.HY.empty,P=0;for(let k=H,W=!1;k>b;k--)W||w.after(k+1)<w.end(k)?(W=!0,g=E.HY.from(w.node(k).copy(g)),P++):B++;Et.step(new yt(St,B,U,Tt,new E.p2(s.append(g),d,P),s.size-d,!0))}(this,D,b),this}join(D,b=1){return function(Et,D,b){let N=new xt(D-b,D+b,E.p2.empty,!0);Et.step(N)}(this,D,b),this}wrap(D,b){return function(Et,D,b){let N=E.HY.empty;for(let U=b.length-1;U>=0;U--){if(N.size){let Tt=b[U].type.contentMatch.matchFragment(N);if(!Tt||!Tt.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}N=E.HY.from(b[U].type.create(b[U].attrs,N))}let w=D.start,H=D.end;Et.step(new yt(w,H,w,H,new E.p2(N,0,0),b.length,!0))}(this,D,b),this}setBlockType(D,b=D,N,w=null){return function(Et,D,b,N,w){if(!N.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let H=Et.steps.length;Et.doc.nodesBetween(D,b,(U,Tt)=>{if(U.isTextblock&&!U.hasMarkup(N,w)&&function(Et,D,b){let N=Et.resolve(D),w=N.index();return N.parent.canReplaceWith(w,w+1,b)}(Et.doc,Et.mapping.slice(H).map(Tt),N)){Et.clearIncompatible(Et.mapping.slice(H).map(Tt,1),N);let St=Et.mapping.slice(H),B=St.map(Tt,1),s=St.map(Tt+U.nodeSize,1);return Et.step(new yt(B,s,B+1,s-1,new E.p2(E.HY.from(N.create(w,null,U.marks)),0,0),1,!0)),!1}})}(this,D,b,N,w),this}setNodeMarkup(D,b,N=null,w){return function(Et,D,b,N,w){let H=Et.doc.nodeAt(D);if(!H)throw new RangeError("No node at given position");b||(b=H.type);let U=b.create(N,null,w||H.marks);if(H.isLeaf)return Et.replaceWith(D,D+H.nodeSize,U);if(!b.validContent(H.content))throw new RangeError("Invalid content for node type "+b.name);Et.step(new yt(D,D+H.nodeSize,D+1,D+H.nodeSize-1,new E.p2(E.HY.from(U),0,0),1,!0))}(this,D,b,N,w),this}setNodeAttribute(D,b,N){return this.step(new we(D,b,N)),this}addNodeMark(D,b){return this.step(new ht(D,b)),this}removeNodeMark(D,b){if(!(b instanceof E.vc)){let N=this.doc.nodeAt(D);if(!N)throw new RangeError("No node at position "+D);if(!(b=b.isInSet(N.marks)))return this}return this.step(new $(D,b)),this}split(D,b=1,N){return function(Et,D,b=1,N){let w=Et.doc.resolve(D),H=E.HY.empty,U=E.HY.empty;for(let Tt=w.depth,St=w.depth-b,B=b-1;Tt>St;Tt--,B--){H=E.HY.from(w.node(Tt).copy(H));let s=N&&N[B];U=E.HY.from(s?s.type.create(s.attrs,U):w.node(Tt).copy(U))}Et.step(new xt(D,D,new E.p2(H.append(U),b,b),!0))}(this,D,b,N),this}addMark(D,b,N){return function(Et,D,b,N){let U,Tt,w=[],H=[];Et.doc.nodesBetween(D,b,(St,B,s)=>{if(!St.isInline)return;let d=St.marks;if(!N.isInSet(d)&&s.type.allowsMarkType(N.type)){let g=Math.max(B,D),P=Math.min(B+St.nodeSize,b),k=N.addToSet(d);for(let W=0;W<d.length;W++)d[W].isInSet(k)||(U&&U.to==g&&U.mark.eq(d[W])?U.to=P:w.push(U=new at(g,P,d[W])));Tt&&Tt.to==g?Tt.to=P:H.push(Tt=new _t(g,P,N))}}),w.forEach(St=>Et.step(St)),H.forEach(St=>Et.step(St))}(this,D,b,N),this}removeMark(D,b,N){return function(Et,D,b,N){let w=[],H=0;Et.doc.nodesBetween(D,b,(U,Tt)=>{if(!U.isInline)return;H++;let St=null;if(N instanceof E.ZU){let s,B=U.marks;for(;s=N.isInSet(B);)(St||(St=[])).push(s),B=s.removeFromSet(B)}else N?N.isInSet(U.marks)&&(St=[N]):St=U.marks;if(St&&St.length){let B=Math.min(Tt+U.nodeSize,b);for(let s=0;s<St.length;s++){let g,d=St[s];for(let P=0;P<w.length;P++){let k=w[P];k.step==H-1&&d.eq(w[P].style)&&(g=k)}g?(g.to=B,g.step=H):w.push({style:d,from:Math.max(Tt,D),to:B,step:H})}}}),w.forEach(U=>Et.step(new at(U.from,U.to,U.style)))}(this,D,b,N),this}clearIncompatible(D,b,N){return function(Et,D,b,N=b.contentMatch){let w=Et.doc.nodeAt(D),H=[],U=D+1;for(let Tt=0;Tt<w.childCount;Tt++){let St=w.child(Tt),B=U+St.nodeSize,s=N.matchType(St.type);if(s){N=s;for(let d=0;d<St.marks.length;d++)b.allowsMarkType(St.marks[d].type)||Et.step(new at(U,B,St.marks[d]))}else H.push(new xt(U,B,E.p2.empty));U=B}if(!N.validEnd){let Tt=N.fillBefore(E.HY.empty,!0);Et.replace(U,U,new E.p2(Tt,0,0))}for(let Tt=H.length-1;Tt>=0;Tt--)Et.step(H[Tt])}(this,D,b,N),this}}},43594:(ne,Mt,a)=>{a.d(Mt,{EH:()=>Ze,p:()=>en,tk:()=>Ko});var E=a(62463),r=a(77346),T=a(38480);const y=function(o){for(var e=0;;e++)if(!(o=o.previousSibling))return e},p=function(o){let e=o.assignedSlot||o.parentNode;return e&&11==e.nodeType?e.host:e};let it=null;const F=function(o,e,i){let c=it||(it=document.createRange());return c.setEnd(o,null==i?o.nodeValue.length:i),c.setStart(o,e||0),c},Y=function(o,e,i,c){return i&&(ft(o,e,i,c,-1)||ft(o,e,i,c,1))},q=/^(img|br|input|textarea|hr)$/i;function ft(o,e,i,c,f){for(;;){if(o==i&&e==c)return!0;if(e==(f<0?0:ut(o))){let m=o.parentNode;if(!m||1!=m.nodeType||Ct(o)||q.test(o.nodeName)||"false"==o.contentEditable)return!1;e=y(o)+(f<0?0:1),o=m}else{if(1!=o.nodeType)return!1;if("false"==(o=o.childNodes[e+(f<0?-1:0)]).contentEditable)return!1;e=f<0?ut(o):0}}}function ut(o){return 3==o.nodeType?o.nodeValue.length:o.childNodes.length}function Ct(o){let e;for(let i=o;i&&!(e=i.pmViewDesc);i=i.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==o||e.contentDOM==o)}const mt=function(o){return o.focusNode&&Y(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)};function Dt(o,e){let i=document.createEvent("Event");return i.initEvent("keydown",!0,!0),i.keyCode=o,i.key=i.code=e,i}const At="undefined"!=typeof navigator?navigator:null,_t="undefined"!=typeof document?document:null,at=At&&At.userAgent||"",ht=/Edge\/(\d+)/.exec(at),$=/MSIE \d/.exec(at),xt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(at),yt=!!($||xt||ht),Bt=$?document.documentMode:xt?+xt[1]:ht?+ht[1]:0,Nt=!yt&&/gecko\/(\d+)/i.test(at);Nt&&/Firefox\/(\d+)/.exec(at);const Ot=!yt&&/Chrome\/(\d+)/.exec(at),Ut=!!Ot,jt=Ot?+Ot[1]:0,qt=!yt&&!!At&&/Apple Computer/.test(At.vendor),gt=qt&&(/Mobile\/\w+/.test(at)||!!At&&At.maxTouchPoints>2),O=gt||!!At&&/Mac/.test(At.platform),Z=/Android \d/.test(at),j=!!_t&&"webkitFontSmoothing"in _t.documentElement.style,bt=j?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Q(o){return{left:0,right:o.documentElement.clientWidth,top:0,bottom:o.documentElement.clientHeight}}function ot(o,e){return"number"==typeof o?o:o[e]}function pt(o){let e=o.getBoundingClientRect();return{left:e.left,right:e.left+o.clientWidth*(e.width/o.offsetWidth||1),top:e.top,bottom:e.top+o.clientHeight*(e.height/o.offsetHeight||1)}}function Kt(o,e,i){let c=o.someProp("scrollThreshold")||0,f=o.someProp("scrollMargin")||5,m=o.dom.ownerDocument;for(let A=i||o.dom;A;A=p(A)){if(1!=A.nodeType)continue;let t=A,n=t==m.body,l=n?Q(m):pt(t),u=0,_=0;if(e.top<l.top+ot(c,"top")?_=-(l.top-e.top+ot(f,"top")):e.bottom>l.bottom-ot(c,"bottom")&&(_=e.bottom-l.bottom+ot(f,"bottom")),e.left<l.left+ot(c,"left")?u=-(l.left-e.left+ot(f,"left")):e.right>l.right-ot(c,"right")&&(u=e.right-l.right+ot(f,"right")),u||_)if(n)m.defaultView.scrollBy(u,_);else{let v=t.scrollLeft,M=t.scrollTop;_&&(t.scrollTop+=_),u&&(t.scrollLeft+=u);let I=t.scrollLeft-v,K=t.scrollTop-M;e={left:e.left-I,top:e.top-K,right:e.right-I,bottom:e.bottom-K}}if(n)break}}function le(o){let e=[],i=o.ownerDocument;for(let c=o;c&&(e.push({dom:c,top:c.scrollTop,left:c.scrollLeft}),o!=i);c=p(c));return e}function De(o,e){for(let i=0;i<o.length;i++){let{dom:c,top:f,left:m}=o[i];c.scrollTop!=f+e&&(c.scrollTop=f+e),c.scrollLeft!=m&&(c.scrollLeft=m)}}let Te=null;function Ue(o,e){let i,f,c=2e8,m=0,A=e.top,t=e.top;for(let n=o.firstChild,l=0;n;n=n.nextSibling,l++){let u;if(1==n.nodeType)u=n.getClientRects();else{if(3!=n.nodeType)continue;u=F(n).getClientRects()}for(let _=0;_<u.length;_++){let v=u[_];if(v.top<=A&&v.bottom>=t){A=Math.max(v.bottom,A),t=Math.min(v.top,t);let M=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(M<c){i=n,c=M,f=M&&3==i.nodeType?{left:v.right<e.left?v.right:v.left,top:e.top}:e,1==n.nodeType&&M&&(m=l+(e.left>=(v.left+v.right)/2?1:0));continue}}!i&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(m=l+1)}}return i&&3==i.nodeType?function(o,e){let i=o.nodeValue.length,c=document.createRange();for(let f=0;f<i;f++){c.setEnd(o,f+1),c.setStart(o,f);let m=Pe(c,1);if(m.top!=m.bottom&&Je(e,m))return{node:o,offset:f+(e.left>=(m.left+m.right)/2?1:0)}}return{node:o,offset:0}}(i,f):!i||c&&1==i.nodeType?{node:o,offset:m}:Ue(i,f)}function Je(o,e){return o.left>=e.left-1&&o.left<=e.right+1&&o.top>=e.top-1&&o.top<=e.bottom+1}function Be(o,e,i){let c=o.childNodes.length;if(c&&i.top<i.bottom)for(let f=Math.max(0,Math.min(c-1,Math.floor(c*(e.top-i.top)/(i.bottom-i.top))-2)),m=f;;){let A=o.childNodes[m];if(1==A.nodeType){let t=A.getClientRects();for(let n=0;n<t.length;n++){let l=t[n];if(Je(e,l))return Be(A,e,l)}}if((m=(m+1)%c)==f)break}return o}function Fe(o,e){let c,i=o.dom.ownerDocument,f=0;if(i.caretPositionFromPoint)try{let n=i.caretPositionFromPoint(e.left,e.top);n&&({offsetNode:c,offset:f}=n)}catch(n){}if(!c&&i.caretRangeFromPoint){let n=i.caretRangeFromPoint(e.left,e.top);n&&({startContainer:c,startOffset:f}=n)}let A,m=(o.root.elementFromPoint?o.root:i).elementFromPoint(e.left,e.top);if(!m||!o.dom.contains(1!=m.nodeType?m.parentNode:m)){let n=o.dom.getBoundingClientRect();if(!Je(e,n)||(m=Be(o.dom,e,n),!m))return null}if(qt)for(let n=m;c&&n;n=p(n))n.draggable&&(c=void 0);if(m=function(o,e){let i=o.parentNode;return i&&/^li$/i.test(i.nodeName)&&e.left<o.getBoundingClientRect().left?i:o}(m,e),c){if(Nt&&1==c.nodeType&&(f=Math.min(f,c.childNodes.length),f<c.childNodes.length)){let l,n=c.childNodes[f];"IMG"==n.nodeName&&(l=n.getBoundingClientRect()).right<=e.left&&l.bottom>e.top&&f++}c==o.dom&&f==c.childNodes.length-1&&1==c.lastChild.nodeType&&e.top>c.lastChild.getBoundingClientRect().bottom?A=o.state.doc.content.size:(0==f||1!=c.nodeType||"BR"!=c.childNodes[f-1].nodeName)&&(A=function(o,e,i,c){let f=-1;for(let m=e;m!=o.dom;){let A=o.docView.nearestDesc(m,!0);if(!A)return null;if(A.node.isBlock&&A.parent){let t=A.dom.getBoundingClientRect();if(t.left>c.left||t.top>c.top)f=A.posBefore;else{if(!(t.right<c.left||t.bottom<c.top))break;f=A.posAfter}}m=A.dom.parentNode}return f>-1?f:o.docView.posFromDOM(e,i,1)}(o,c,f,e))}null==A&&(A=function(o,e,i){let{node:c,offset:f}=Ue(e,i),m=-1;if(1==c.nodeType&&!c.firstChild){let A=c.getBoundingClientRect();m=A.left!=A.right&&i.left>(A.left+A.right)/2?1:-1}return o.docView.posFromDOM(c,f,m)}(o,m,e));let t=o.docView.nearestDesc(m,!0);return{pos:A,inside:t?t.posAtStart-t.border:-1}}function Pe(o,e){let i=o.getClientRects();return i.length?i[e<0?0:i.length-1]:o.getBoundingClientRect()}const Se=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Ie(o,e,i){let{node:c,offset:f,atom:m}=o.docView.domFromPos(e,i<0?-1:1),A=j||Nt;if(3==c.nodeType){if(!A||!Se.test(c.nodeValue)&&(i<0?f:f!=c.nodeValue.length)){let n=f,l=f,u=i<0?1:-1;return i<0&&!f?(l++,u=-1):i>=0&&f==c.nodeValue.length?(n--,u=1):i<0?n--:l++,Me(Pe(F(c,n,l),1),u<0)}{let n=Pe(F(c,f,f),i);if(Nt&&f&&/\s/.test(c.nodeValue[f-1])&&f<c.nodeValue.length){let l=Pe(F(c,f-1,f-1),-1);if(l.top==n.top){let u=Pe(F(c,f,f+1),-1);if(u.top!=n.top)return Me(u,u.left<l.left)}}return n}}if(!o.state.doc.resolve(e-(m||0)).parent.inlineContent){if(null==m&&f&&(i<0||f==ut(c))){let n=c.childNodes[f-1];if(1==n.nodeType)return Ve(n.getBoundingClientRect(),!1)}if(null==m&&f<ut(c)){let n=c.childNodes[f];if(1==n.nodeType)return Ve(n.getBoundingClientRect(),!0)}return Ve(c.getBoundingClientRect(),i>=0)}if(null==m&&f&&(i<0||f==ut(c))){let n=c.childNodes[f-1],l=3==n.nodeType?F(n,ut(n)-(A?0:1)):1!=n.nodeType||"BR"==n.nodeName&&n.nextSibling?null:n;if(l)return Me(Pe(l,1),!1)}if(null==m&&f<ut(c)){let n=c.childNodes[f];for(;n.pmViewDesc&&n.pmViewDesc.ignoreForCoords;)n=n.nextSibling;let l=n?3==n.nodeType?F(n,0,A?0:1):1==n.nodeType?n:null:null;if(l)return Me(Pe(l,-1),!0)}return Me(Pe(3==c.nodeType?F(c):c,-i),i>=0)}function Me(o,e){if(0==o.width)return o;let i=e?o.left:o.right;return{top:o.top,bottom:o.bottom,left:i,right:i}}function Ve(o,e){if(0==o.height)return o;let i=e?o.top:o.bottom;return{top:i,bottom:i,left:o.left,right:o.right}}function xe(o,e,i){let c=o.state,f=o.root.activeElement;c!=e&&o.updateState(e),f!=o.dom&&o.focus();try{return i()}finally{c!=e&&o.updateState(c),f!=o.dom&&f&&f.focus()}}const Ge=/[\u0590-\u08ac]/;let we=null,Ce=null,Oe=!1;class H{constructor(e,i,c,f){this.parent=e,this.children=i,this.dom=c,this.contentDOM=f,this.dirty=0,c.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,i,c){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let i=0;i<this.children.length;i++)e+=this.children[i].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let i=0,c=this.posAtStart;;i++){let f=this.children[i];if(f==e)return c;c+=f.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,i,c){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(c<0){let m,A;if(e==this.contentDOM)m=e.childNodes[i-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;m=e.previousSibling}for(;m&&(!(A=m.pmViewDesc)||A.parent!=this);)m=m.previousSibling;return m?this.posBeforeChild(A)+A.size:this.posAtStart}{let m,A;if(e==this.contentDOM)m=e.childNodes[i];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;m=e.nextSibling}for(;m&&(!(A=m.pmViewDesc)||A.parent!=this);)m=m.nextSibling;return m?this.posBeforeChild(A):this.posAtEnd}}let f;if(e==this.dom&&this.contentDOM)f=i>y(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))f=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==i)for(let m=e;;m=m.parentNode){if(m==this.dom){f=!1;break}if(m.previousSibling)break}if(null==f&&i==e.childNodes.length)for(let m=e;;m=m.parentNode){if(m==this.dom){f=!0;break}if(m.nextSibling)break}}return(null==f?c>0:f)?this.posAtEnd:this.posAtStart}nearestDesc(e,i=!1){for(let c=!0,f=e;f;f=f.parentNode){let A,m=this.getDesc(f);if(m&&(!i||m.node)){if(!c||!(A=m.nodeDOM)||(1==A.nodeType?A.contains(1==e.nodeType?e:e.parentNode):A==e))return m;c=!1}}}getDesc(e){let i=e.pmViewDesc;for(let c=i;c;c=c.parent)if(c==this)return i}posFromDOM(e,i,c){for(let f=e;f;f=f.parentNode){let m=this.getDesc(f);if(m)return m.localPosFromDOM(e,i,c)}return-1}descAt(e){for(let i=0,c=0;i<this.children.length;i++){let f=this.children[i],m=c+f.size;if(c==e&&m!=c){for(;!f.border&&f.children.length;)f=f.children[0];return f}if(e<m)return f.descAt(e-c-f.border);c=m}}domFromPos(e,i){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let m,c=0,f=0;for(let m=0;c<this.children.length;c++){let A=this.children[c],t=m+A.size;if(t>e||A instanceof g){f=e-m;break}m=t}if(f)return this.children[c].domFromPos(f-this.children[c].border,i);for(;c&&!(m=this.children[c-1]).size&&m instanceof U&&m.side>=0;c--);if(i<=0){let m,A=!0;for(;m=c?this.children[c-1]:null,m&&m.dom.parentNode!=this.contentDOM;c--,A=!1);return m&&i&&A&&!m.border&&!m.domAtom?m.domFromPos(m.size,i):{node:this.contentDOM,offset:m?y(m.dom)+1:0}}{let m,A=!0;for(;m=c<this.children.length?this.children[c]:null,m&&m.dom.parentNode!=this.contentDOM;c++,A=!1);return m&&A&&!m.border&&!m.domAtom?m.domFromPos(0,i):{node:this.contentDOM,offset:m?y(m.dom):this.contentDOM.childNodes.length}}}parseRange(e,i,c=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:i,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let f=-1,m=-1;for(let A=c,t=0;;t++){let n=this.children[t],l=A+n.size;if(-1==f&&e<=l){let u=A+n.border;if(e>=u&&i<=l-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,i,u);e=A;for(let _=t;_>0;_--){let v=this.children[_-1];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(1)){f=y(v.dom)+1;break}e-=v.size}-1==f&&(f=0)}if(f>-1&&(l>i||t==this.children.length-1)){i=l;for(let u=t+1;u<this.children.length;u++){let _=this.children[u];if(_.size&&_.dom.parentNode==this.contentDOM&&!_.emptyChildAt(-1)){m=y(_.dom);break}i+=_.size}-1==m&&(m=this.contentDOM.childNodes.length);break}A=l}return{node:this.contentDOM,from:e,to:i,fromOffset:f,toOffset:m}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let i=this.children[e<0?0:this.children.length-1];return 0==i.size||i.emptyChildAt(e)}domAfterPos(e){let{node:i,offset:c}=this.domFromPos(e,0);if(1!=i.nodeType||c==i.childNodes.length)throw new RangeError("No node after pos "+e);return i.childNodes[c]}setSelection(e,i,c,f=!1){let m=Math.min(e,i),A=Math.max(e,i);for(let v=0,M=0;v<this.children.length;v++){let I=this.children[v],K=M+I.size;if(m>M&&A<K)return I.setSelection(e-M-I.border,i-M-I.border,c,f);M=K}let t=this.domFromPos(e,e?-1:1),n=i==e?t:this.domFromPos(i,i?-1:1),l=c.getSelection(),u=!1;if((Nt||qt)&&e==i){let{node:v,offset:M}=t;if(3==v.nodeType){if(u=!(!M||"\n"!=v.nodeValue[M-1]),u&&M==v.nodeValue.length)for(let K,I=v;I;I=I.parentNode){if(K=I.nextSibling){"BR"==K.nodeName&&(t=n={node:K.parentNode,offset:y(K)+1});break}let tt=I.pmViewDesc;if(tt&&tt.node&&tt.node.isBlock)break}}else{let I=v.childNodes[M-1];u=I&&("BR"==I.nodeName||"false"==I.contentEditable)}}if(Nt&&l.focusNode&&l.focusNode!=n.node&&1==l.focusNode.nodeType){let v=l.focusNode.childNodes[l.focusOffset];v&&"false"==v.contentEditable&&(f=!0)}if(!(f||u&&qt)&&Y(t.node,t.offset,l.anchorNode,l.anchorOffset)&&Y(n.node,n.offset,l.focusNode,l.focusOffset))return;let _=!1;if((l.extend||e==i)&&!u){l.collapse(t.node,t.offset);try{e!=i&&l.extend(n.node,n.offset),_=!0}catch(v){}}if(!_){if(e>i){let M=t;t=n,n=M}let v=document.createRange();v.setEnd(n.node,n.offset),v.setStart(t.node,t.offset),l.removeAllRanges(),l.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,i){for(let c=0,f=0;f<this.children.length;f++){let m=this.children[f],A=c+m.size;if(c==A?e<=A&&i>=c:e<A&&i>c){let t=c+m.border,n=A-m.border;if(e>=t&&i<=n)return this.dirty=e==c||i==A?2:1,void(e!=t||i!=n||!m.contentLost&&m.dom.parentNode==this.contentDOM?m.markDirty(e-t,i-t):m.dirty=3);m.dirty=m.dom!=m.contentDOM||m.dom.parentNode!=this.contentDOM||m.children.length?3:2}c=A}this.dirty=2}markParentsDirty(){let e=1;for(let i=this.parent;i;i=i.parent,e++){let c=1==e?2:1;i.dirty<c&&(i.dirty=c)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class U extends H{constructor(e,i,c,f){let m,A=i.type.toDOM;if("function"==typeof A&&(A=A(c,()=>m?m.parent?m.parent.posBeforeChild(m):void 0:f)),!i.type.spec.raw){if(1!=A.nodeType){let t=document.createElement("span");t.appendChild(A),A=t}A.contentEditable="false",A.classList.add("ProseMirror-widget")}super(e,[],A,null),this.widget=i,this.widget=i,m=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let i=this.widget.spec.stopEvent;return!!i&&i(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Tt extends H{constructor(e,i,c,f){super(e,[],i,null),this.textDOM=c,this.text=f}get size(){return this.text.length}localPosFromDOM(e,i){return e!=this.textDOM?this.posAtStart+(i?this.size:0):this.posAtStart+i}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class St extends H{constructor(e,i,c,f){super(e,[],c,f),this.mark=i}static create(e,i,c,f){let m=f.nodeViews[i.type.name],A=m&&m(i,f,c);return(!A||!A.dom)&&(A=r.PW.renderSpec(document,i.type.spec.toDOM(i,c))),new St(e,i,A.dom,A.contentDOM||A.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,i){if(super.markDirty(e,i),0!=this.dirty){let c=this.parent;for(;!c.node;)c=c.parent;c.dirty<this.dirty&&(c.dirty=this.dirty),this.dirty=0}}slice(e,i,c){let f=St.create(this.parent,this.mark,!0,c),m=this.children,A=this.size;i<A&&(m=Lt(m,i,A,c)),e>0&&(m=Lt(m,0,e,c));for(let t=0;t<m.length;t++)m[t].parent=f;return f.children=m,f}}class B extends H{constructor(e,i,c,f,m,A,t,n,l){super(e,[],m,A),this.node=i,this.outerDeco=c,this.innerDeco=f,this.nodeDOM=t,A&&this.updateChildren(n,l)}static create(e,i,c,f,m,A){let n,t=m.nodeViews[i.type.name],l=t&&t(i,m,()=>n?n.parent?n.parent.posBeforeChild(n):void 0:A,c,f),u=l&&l.dom,_=l&&l.contentDOM;if(i.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(i.text);else u||({dom:u,contentDOM:_}=r.PW.renderSpec(document,i.type.spec.toDOM(i)));!_&&!i.isText&&"BR"!=u.nodeName&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),i.type.spec.draggable&&(u.draggable=!0));let v=u;return u=He(u,c,i),l?n=new P(e,i,c,f,u,_||null,v,l,m,A+1):i.isText?new d(e,i,c,f,u,v,m):new B(e,i,c,f,u,_||null,v,m,A+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let i=this.children.length-1;i>=0;i--){let c=this.children[i];if(this.dom.contains(c.dom.parentNode)){e.contentElement=c.dom.parentNode;break}}e.contentElement||(e.getContent=()=>r.HY.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,i,c){return 0==this.dirty&&e.eq(this.node)&&$e(i,this.outerDeco)&&c.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,i){let c=this.node.inlineContent,f=i,m=e.composing?this.localCompositionInfo(e,i):null,A=m&&m.pos>-1?m:null,t=m&&m.pos<0,n=new on(this,A&&A.node,e);(function(o,e,i,c){let f=e.locals(o),m=0;if(0==f.length){for(let l=0;l<o.childCount;l++){let u=o.child(l);c(u,f,e.forChild(m,u),l),m+=u.nodeSize}return}let A=0,t=[],n=null;for(let l=0;;){if(A<f.length&&f[A].to==m){let K,I=f[A++];for(;A<f.length&&f[A].to==m;)(K||(K=[I])).push(f[A++]);if(K){K.sort(dn);for(let tt=0;tt<K.length;tt++)i(K[tt],l,!!n)}else i(I,l,!!n)}let u,_;if(n)_=-1,u=n,n=null;else{if(!(l<o.childCount))break;_=l,u=o.child(l++)}for(let I=0;I<t.length;I++)t[I].to<=m&&t.splice(I--,1);for(;A<f.length&&f[A].from<=m&&f[A].to>m;)t.push(f[A++]);let v=m+u.nodeSize;if(u.isText){let I=v;A<f.length&&f[A].from<I&&(I=f[A].from);for(let K=0;K<t.length;K++)t[K].to<I&&(I=t[K].to);I<v&&(n=u.cut(I-m),u=u.cut(0,I-m),v=I,_=-1)}c(u,u.isInline&&!u.isLeaf?t.filter(I=>!I.inline):t.slice(),e.forChild(m,u),_),m=v}})(this.node,this.innerDeco,(l,u,_)=>{l.spec.marks?n.syncToMarks(l.spec.marks,c,e):l.type.side>=0&&!_&&n.syncToMarks(u==this.node.childCount?r.vc.none:this.node.child(u).marks,c,e),n.placeWidget(l,e,f)},(l,u,_,v)=>{let M;n.syncToMarks(l.marks,c,e),n.findNodeMatch(l,u,_,v)||t&&e.state.selection.from>f&&e.state.selection.to<f+l.nodeSize&&(M=n.findIndexWithChild(m.node))>-1&&n.updateNodeAt(l,u,_,M,e)||n.updateNextNode(l,u,_,e,v)||n.addNode(l,u,_,e,f),f+=l.nodeSize}),n.syncToMarks([],c,e),this.node.isTextblock&&n.addTextblockHacks(),n.destroyRest(),(n.changed||2==this.dirty)&&(A&&this.protectLocalComposition(e,A),k(this.contentDOM,this.children,e),gt&&function(o){if("UL"==o.nodeName||"OL"==o.nodeName){let e=o.style.cssText;o.style.cssText=e+"; list-style: square !important",window.getComputedStyle(o),o.style.cssText=e}}(this.dom))}localCompositionInfo(e,i){let{from:c,to:f}=e.state.selection;if(!(e.state.selection instanceof E.Bs)||c<i||f>i+this.node.content.size)return null;let m=e.domSelectionRange(),A=function(o,e){for(;;){if(3==o.nodeType)return o;if(1==o.nodeType&&e>0){if(o.childNodes.length>e&&3==o.childNodes[e].nodeType)return o.childNodes[e];e=ut(o=o.childNodes[e-1])}else{if(!(1==o.nodeType&&e<o.childNodes.length))return null;o=o.childNodes[e],e=0}}}(m.focusNode,m.focusOffset);if(!A||!this.dom.contains(A.parentNode))return null;if(this.node.inlineContent){let t=A.nodeValue,n=function(o,e,i,c){for(let f=0,m=0;f<o.childCount&&m<=c;){let A=o.child(f++),t=m;if(m+=A.nodeSize,!A.isText)continue;let n=A.text;for(;f<o.childCount;){let l=o.child(f++);if(m+=l.nodeSize,!l.isText)break;n+=l.text}if(m>=i){let l=t<c?n.lastIndexOf(e,c-t-1):-1;if(l>=0&&l+e.length+t>=i)return t+l;if(i==c&&n.length>=c+e.length-t&&n.slice(c-t,c-t+e.length)==e)return c}}return-1}(this.node.content,t,c-i,f-i);return n<0?null:{node:A,pos:n,text:t}}return{node:A,pos:-1,text:""}}protectLocalComposition(e,{node:i,pos:c,text:f}){if(this.getDesc(i))return;let m=i;for(;m.parentNode!=this.contentDOM;m=m.parentNode){for(;m.previousSibling;)m.parentNode.removeChild(m.previousSibling);for(;m.nextSibling;)m.parentNode.removeChild(m.nextSibling);m.pmViewDesc&&(m.pmViewDesc=void 0)}let A=new Tt(this,m,i,f);e.input.compositionNodes.push(A),this.children=Lt(this.children,c,c+f.length,e,A)}update(e,i,c,f){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,i,c,f),0))}updateInner(e,i,c,f){this.updateOuterDeco(i),this.node=e,this.innerDeco=c,this.contentDOM&&this.updateChildren(f,this.posAtStart),this.dirty=0}updateOuterDeco(e){if($e(e,this.outerDeco))return;let i=1!=this.nodeDOM.nodeType,c=this.dom;this.dom=ae(this.dom,this.nodeDOM,Ft(this.outerDeco,this.node,i),Ft(e,this.node,i)),this.dom!=c&&(c.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function s(o,e,i,c,f){return He(c,e,o),new B(void 0,o,e,i,c,c,c,f,0)}class d extends B{constructor(e,i,c,f,m,A,t){super(e,i,c,f,m,null,A,t,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,i,c,f){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(i),(0!=this.dirty||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,f.trackWrites==this.nodeDOM&&(f.trackWrites=null)),this.node=e,this.dirty=0,0))}inParent(){let e=this.parent.contentDOM;for(let i=this.nodeDOM;i;i=i.parentNode)if(i==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,i,c){return e==this.nodeDOM?this.posAtStart+Math.min(i,this.node.text.length):super.localPosFromDOM(e,i,c)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,i,c){let f=this.node.cut(e,i),m=document.createTextNode(f.text);return new d(this.parent,f,this.outerDeco,this.innerDeco,m,m,c)}markDirty(e,i){super.markDirty(e,i),this.dom!=this.nodeDOM&&(0==e||i==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}}class g extends H{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class P extends B{constructor(e,i,c,f,m,A,t,n,l,u){super(e,i,c,f,m,A,t,l,u),this.spec=n}update(e,i,c,f){if(3==this.dirty)return!1;if(this.spec.update){let m=this.spec.update(e,i,c);return m&&this.updateInner(e,i,c,f),m}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,i,c,f)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,i,c,f){this.spec.setSelection?this.spec.setSelection(e,i,c):super.setSelection(e,i,c,f)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function k(o,e,i){let c=o.firstChild,f=!1;for(let m=0;m<e.length;m++){let A=e[m],t=A.dom;if(t.parentNode==o){for(;t!=c;)c=Qe(c),f=!0;c=c.nextSibling}else f=!0,o.insertBefore(t,c);if(A instanceof St){let n=c?c.previousSibling:o.lastChild;k(A.contentDOM,A.children,i),c=n?n.nextSibling:o.firstChild}}for(;c;)c=Qe(c),f=!0;f&&i.trackWrites==o&&(i.trackWrites=null)}const W=function(o){o&&(this.nodeName=o)};W.prototype=Object.create(null);const ct=[new W];function Ft(o,e,i){if(0==o.length)return ct;let c=i?ct[0]:new W,f=[c];for(let m=0;m<o.length;m++){let A=o[m].type.attrs;if(A){A.nodeName&&f.push(c=new W(A.nodeName));for(let t in A){let n=A[t];null!=n&&(i&&1==f.length&&f.push(c=new W(e.isInline?"span":"div")),"class"==t?c.class=(c.class?c.class+" ":"")+n:"style"==t?c.style=(c.style?c.style+";":"")+n:"nodeName"!=t&&(c[t]=n))}}}return f}function ae(o,e,i,c){if(i==ct&&c==ct)return e;let f=e;for(let m=0;m<c.length;m++){let A=c[m],t=i[m];if(m){let n;t&&t.nodeName==A.nodeName&&f!=o&&(n=f.parentNode)&&n.nodeName.toLowerCase()==A.nodeName||(n=document.createElement(A.nodeName),n.pmIsDeco=!0,n.appendChild(f),t=ct[0]),f=n}de(f,t||ct[0],A)}return f}function de(o,e,i){for(let c in e)"class"!=c&&"style"!=c&&"nodeName"!=c&&!(c in i)&&o.removeAttribute(c);for(let c in i)"class"!=c&&"style"!=c&&"nodeName"!=c&&i[c]!=e[c]&&o.setAttribute(c,i[c]);if(e.class!=i.class){let c=e.class?e.class.split(" ").filter(Boolean):[],f=i.class?i.class.split(" ").filter(Boolean):[];for(let m=0;m<c.length;m++)-1==f.indexOf(c[m])&&o.classList.remove(c[m]);for(let m=0;m<f.length;m++)-1==c.indexOf(f[m])&&o.classList.add(f[m]);0==o.classList.length&&o.removeAttribute("class")}if(e.style!=i.style){if(e.style){let f,c=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;f=c.exec(e.style);)o.style.removeProperty(f[1])}i.style&&(o.style.cssText+=i.style)}}function He(o,e,i){return ae(o,o,ct,Ft(e,i,1!=o.nodeType))}function $e(o,e){if(o.length!=e.length)return!1;for(let i=0;i<o.length;i++)if(!o[i].type.eq(e[i].type))return!1;return!0}function Qe(o){let e=o.nextSibling;return o.parentNode.removeChild(o),e}class on{constructor(e,i,c){this.lock=i,this.view=c,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(o,e){let i=e,c=i.children.length,f=o.childCount,m=new Map,A=[];t:for(;f>0;){let t;for(;;)if(c){let l=i.children[c-1];if(!(l instanceof St)){t=l,c--;break}i=l,c=l.children.length}else{if(i==e)break t;c=i.parent.children.indexOf(i),i=i.parent}let n=t.node;if(n){if(n!=o.child(f-1))break;--f,m.set(t,f),A.push(t)}}return{index:f,matched:m,matches:A.reverse()}}(e.node.content,e)}destroyBetween(e,i){if(e!=i){for(let c=e;c<i;c++)this.top.children[c].destroy();this.top.children.splice(e,i-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,i,c){let f=0,m=this.stack.length>>1,A=Math.min(m,e.length);for(;f<A&&(f==m-1?this.top:this.stack[f+1<<1]).matchesMark(e[f])&&!1!==e[f].type.spec.spanning;)f++;for(;f<m;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),m--;for(;m<e.length;){this.stack.push(this.top,this.index+1);let t=-1;for(let n=this.index;n<Math.min(this.index+3,this.top.children.length);n++){let l=this.top.children[n];if(l.matchesMark(e[m])&&!this.isLocked(l.dom)){t=n;break}}if(t>-1)t>this.index&&(this.changed=!0,this.destroyBetween(this.index,t)),this.top=this.top.children[this.index];else{let n=St.create(this.top,e[m],i,c);this.top.children.splice(this.index,0,n),this.top=n,this.changed=!0}this.index=0,m++}}findNodeMatch(e,i,c,f){let A,m=-1;if(f>=this.preMatch.index&&(A=this.preMatch.matches[f-this.preMatch.index]).parent==this.top&&A.matchesNode(e,i,c))m=this.top.children.indexOf(A,this.index);else for(let t=this.index,n=Math.min(this.top.children.length,t+5);t<n;t++){let l=this.top.children[t];if(l.matchesNode(e,i,c)&&!this.preMatch.matched.has(l)){m=t;break}}return!(m<0||(this.destroyBetween(this.index,m),this.index++,0))}updateNodeAt(e,i,c,f,m){let A=this.top.children[f];return 3==A.dirty&&A.dom==A.contentDOM&&(A.dirty=2),!!A.update(e,i,c,m)&&(this.destroyBetween(this.index,f),this.index++,!0)}findIndexWithChild(e){for(;;){let i=e.parentNode;if(!i)return-1;if(i==this.top.contentDOM){let c=e.pmViewDesc;if(c)for(let f=this.index;f<this.top.children.length;f++)if(this.top.children[f]==c)return f;return-1}e=i}}updateNextNode(e,i,c,f,m){for(let A=this.index;A<this.top.children.length;A++){let t=this.top.children[A];if(t instanceof B){let n=this.preMatch.matched.get(t);if(null!=n&&n!=m)return!1;let l=t.dom;if((!this.isLocked(l)||e.isText&&t.node&&t.node.isText&&t.nodeDOM.nodeValue==e.text&&3!=t.dirty&&$e(i,t.outerDeco))&&t.update(e,i,c,f))return this.destroyBetween(this.index,A),t.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,i,c,f,m){this.top.children.splice(this.index++,0,B.create(this.top,e,i,c,f,m)),this.changed=!0}placeWidget(e,i,c){let f=this.index<this.top.children.length?this.top.children[this.index]:null;if(!f||!f.matchesWidget(e)||e!=f.widget&&f.widget.type.toDOM.parentNode){let m=new U(this.top,e,i,c);this.top.children.splice(this.index++,0,m),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],i=this.top;for(;e instanceof St;)i=e,e=i.children[i.children.length-1];(!e||!(e instanceof d)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((qt||Ut)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",i),this.addHackNode("BR",this.top))}addHackNode(e,i){if(i==this.top&&this.index<i.children.length&&i.children[this.index].matchesHack(e))this.index++;else{let c=document.createElement(e);"IMG"==e&&(c.className="ProseMirror-separator",c.alt=""),"BR"==e&&(c.className="ProseMirror-trailingBreak");let f=new g(this.top,[],c,null);i!=this.top?i.children.push(f):i.children.splice(this.index++,0,f),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function dn(o,e){return o.type.side-e.type.side}function Lt(o,e,i,c,f){let m=[];for(let A=0,t=0;A<o.length;A++){let n=o[A],l=t,u=t+=n.size;l>=i||u<=e?m.push(n):(l<e&&m.push(n.slice(0,e-l,c)),f&&(m.push(f),f=void 0),u>i&&m.push(n.slice(i-l,n.size,c)))}return m}function wt(o,e=null){let i=o.domSelectionRange(),c=o.state.doc;if(!i.focusNode)return null;let f=o.docView.nearestDesc(i.focusNode),m=f&&0==f.size,A=o.docView.posFromDOM(i.focusNode,i.focusOffset,1);if(A<0)return null;let n,l,t=c.resolve(A);if(mt(i)){for(n=t;f&&!f.node;)f=f.parent;let u=f.node;if(f&&u.isAtom&&E.qv.isSelectable(u)&&f.parent&&(!u.isInline||!function(o,e,i){for(let c=0==e,f=e==ut(o);c||f;){if(o==i)return!0;let m=y(o);if(!(o=o.parentNode))return!1;c=c&&0==m,f=f&&m==ut(o)}}(i.focusNode,i.focusOffset,f.dom))){let _=f.posBefore;l=new E.qv(A==_?t:c.resolve(_))}}else{let u=o.docView.posFromDOM(i.anchorNode,i.anchorOffset,1);if(u<0)return null;n=c.resolve(u)}return l||(l=kt(o,n,t,"pointer"==e||o.state.selection.head<t.pos&&!m?1:-1)),l}function Wt(o){return o.editable?o.hasFocus():ce(o)&&document.activeElement&&document.activeElement.contains(o.dom)}function Jt(o,e=!1){let i=o.state.selection;if(lt(o,i),Wt(o)){if(!e&&o.input.mouseDown&&o.input.mouseDown.allowDefault&&Ut){let c=o.domSelectionRange(),f=o.domObserver.currentSelection;if(c.anchorNode&&f.anchorNode&&Y(c.anchorNode,c.anchorOffset,f.anchorNode,f.anchorOffset))return o.input.mouseDown.delayedSelectionSync=!0,void o.domObserver.setCurSelection()}if(o.domObserver.disconnectSelection(),o.cursorWrapper)!function(o){let e=o.domSelection(),i=document.createRange(),c=o.cursorWrapper.dom,f="IMG"==c.nodeName;f?i.setEnd(c.parentNode,y(c)+1):i.setEnd(c,0),i.collapse(!1),e.removeAllRanges(),e.addRange(i),!f&&!o.state.selection.visible&&yt&&Bt<=11&&(c.disabled=!0,c.disabled=!1)}(o);else{let m,A,{anchor:c,head:f}=i;Yt&&!(i instanceof E.Bs)&&(i.$from.parent.inlineContent||(m=oe(o,i.from)),!i.empty&&!i.$from.parent.inlineContent&&(A=oe(o,i.to))),o.docView.setSelection(c,f,o.root,e),Yt&&(m&&L(m),A&&L(A)),i.visible?o.dom.classList.remove("ProseMirror-hideselection"):(o.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(o){let e=o.dom.ownerDocument;e.removeEventListener("selectionchange",o.input.hideSelectionGuard);let i=o.domSelectionRange(),c=i.anchorNode,f=i.anchorOffset;e.addEventListener("selectionchange",o.input.hideSelectionGuard=()=>{(i.anchorNode!=c||i.anchorOffset!=f)&&(e.removeEventListener("selectionchange",o.input.hideSelectionGuard),setTimeout(()=>{(!Wt(o)||o.state.selection.visible)&&o.dom.classList.remove("ProseMirror-hideselection")},20))})}(o))}o.domObserver.setCurSelection(),o.domObserver.connectSelection()}}const Yt=qt||Ut&&jt<63;function oe(o,e){let{node:i,offset:c}=o.docView.domFromPos(e,0),f=c<i.childNodes.length?i.childNodes[c]:null,m=c?i.childNodes[c-1]:null;if(qt&&f&&"false"==f.contentEditable)return J(f);if(!(f&&"false"!=f.contentEditable||m&&"false"!=m.contentEditable)){if(f)return J(f);if(m)return J(m)}}function J(o){return o.contentEditable="true",qt&&o.draggable&&(o.draggable=!1,o.wasDraggable=!0),o}function L(o){o.contentEditable="false",o.wasDraggable&&(o.draggable=!0,o.wasDraggable=null)}function lt(o,e){if(e instanceof E.qv){let i=o.docView.descAt(e.from);i!=o.lastSelectedViewDesc&&(Ht(o),i&&i.selectNode(),o.lastSelectedViewDesc=i)}else Ht(o)}function Ht(o){o.lastSelectedViewDesc&&(o.lastSelectedViewDesc.parent&&o.lastSelectedViewDesc.deselectNode(),o.lastSelectedViewDesc=void 0)}function kt(o,e,i,c){return o.someProp("createSelectionBetween",f=>f(o,e,i))||E.Bs.between(e,i,c)}function te(o){return!(o.editable&&!o.hasFocus())&&ce(o)}function ce(o){let e=o.domSelectionRange();if(!e.anchorNode)return!1;try{return o.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(o.editable||o.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(i){return!1}}function ge(o,e){let{$anchor:i,$head:c}=o.selection,f=e>0?i.max(c):i.min(c),m=f.parent.inlineContent?f.depth?o.doc.resolve(e>0?f.after():f.before()):null:f;return m&&E.Y1.findFrom(m,e)}function fe(o,e){return o.dispatch(o.state.tr.setSelection(e).scrollIntoView()),!0}function pe(o,e,i){let c=o.state.selection;if(!(c instanceof E.Bs)){if(c instanceof E.qv&&c.node.isInline)return fe(o,new E.Bs(e>0?c.$to:c.$from));{let f=ge(o.state,e);return!!f&&fe(o,f)}}if(!c.empty||i.indexOf("s")>-1)return!1;if(o.endOfTextblock(e>0?"right":"left")){let f=ge(o.state,e);return!!(f&&f instanceof E.qv)&&fe(o,f)}if(!(O&&i.indexOf("m")>-1)){let A,f=c.$head,m=f.textOffset?null:e<0?f.nodeBefore:f.nodeAfter;if(!m||m.isText)return!1;let t=e<0?f.pos-m.nodeSize:f.pos;return!!(m.isAtom||(A=o.docView.descAt(t))&&!A.contentDOM)&&(E.qv.isSelectable(m)?fe(o,new E.qv(e<0?o.state.doc.resolve(f.pos-m.nodeSize):f)):!!j&&fe(o,new E.Bs(o.state.doc.resolve(e<0?t:t+m.nodeSize))))}}function ve(o){return 3==o.nodeType?o.nodeValue.length:o.childNodes.length}function be(o){let e=o.pmViewDesc;return e&&0==e.size&&(o.nextSibling||"BR"!=o.nodeName)}function Le(o){let e=o.domSelectionRange(),i=e.focusNode,c=e.focusOffset;if(!i)return;let f,m,A=!1;for(Nt&&1==i.nodeType&&c<ve(i)&&be(i.childNodes[c])&&(A=!0);;)if(c>0){if(1!=i.nodeType)break;{let t=i.childNodes[c-1];if(be(t))f=i,m=--c;else{if(3!=t.nodeType)break;i=t,c=i.nodeValue.length}}}else{if(C(i))break;{let t=i.previousSibling;for(;t&&be(t);)f=i.parentNode,m=y(t),t=t.previousSibling;if(t)i=t,c=ve(i);else{if(i=i.parentNode,i==o.dom)break;c=0}}}A?S(o,i,c):f&&S(o,f,m)}function h(o){let e=o.domSelectionRange(),i=e.focusNode,c=e.focusOffset;if(!i)return;let m,A,f=ve(i);for(;;)if(c<f){if(1!=i.nodeType)break;if(!be(i.childNodes[c]))break;m=i,A=++c}else{if(C(i))break;{let t=i.nextSibling;for(;t&&be(t);)m=t.parentNode,A=y(t)+1,t=t.nextSibling;if(t)i=t,c=0,f=ve(i);else{if(i=i.parentNode,i==o.dom)break;c=f=0}}}m&&S(o,m,A)}function C(o){let e=o.pmViewDesc;return e&&e.node&&e.node.isBlock}function S(o,e,i){let c=o.domSelection();if(mt(c)){let m=document.createRange();m.setEnd(e,i),m.setStart(e,i),c.removeAllRanges(),c.addRange(m)}else c.extend&&c.extend(e,i);o.domObserver.setCurSelection();let{state:f}=o;setTimeout(()=>{o.state==f&&Jt(o)},50)}function x(o,e,i){let c=o.state.selection;if(c instanceof E.Bs&&!c.empty||i.indexOf("s")>-1||O&&i.indexOf("m")>-1)return!1;let{$from:f,$to:m}=c;if(!f.parent.inlineContent||o.endOfTextblock(e<0?"up":"down")){let A=ge(o.state,e);if(A&&A instanceof E.qv)return fe(o,A)}if(!f.parent.inlineContent){let A=e<0?f:m,t=c instanceof E.C1?E.Y1.near(A,e):E.Y1.findFrom(A,e);return!!t&&fe(o,t)}return!1}function R(o,e){if(!(o.state.selection instanceof E.Bs))return!0;let{$head:i,$anchor:c,empty:f}=o.state.selection;if(!i.sameParent(c))return!0;if(!f)return!1;if(o.endOfTextblock(e>0?"forward":"backward"))return!0;let m=!i.textOffset&&(e<0?i.nodeBefore:i.nodeAfter);if(m&&!m.isText){let A=o.state.tr;return e<0?A.delete(i.pos-m.nodeSize,i.pos):A.delete(i.pos,i.pos+m.nodeSize),o.dispatch(A),!0}return!1}function z(o,e,i){o.domObserver.stop(),e.contentEditable=i,o.domObserver.start()}function rt(o,e){o.someProp("transformCopied",M=>{e=M(e,o)});let i=[],{content:c,openStart:f,openEnd:m}=e;for(;f>1&&m>1&&1==c.childCount&&1==c.firstChild.childCount;){f--,m--;let M=c.firstChild;i.push(M.type.name,M.attrs!=M.type.defaultAttrs?M.attrs:null),c=M.content}let A=o.someProp("clipboardSerializer")||r.PW.fromSchema(o.state.schema),t=Ae(),n=t.createElement("div");n.appendChild(A.serializeFragment(c,{document:t}));let u,l=n.firstChild,_=0;for(;l&&1==l.nodeType&&(u=cn[l.nodeName.toLowerCase()]);){for(let M=u.length-1;M>=0;M--){let I=t.createElement(u[M]);for(;n.firstChild;)I.appendChild(n.firstChild);n.appendChild(I),_++}l=n.firstChild}return l&&1==l.nodeType&&l.setAttribute("data-pm-slice",`${f} ${m}${_?` -${_}`:""} ${JSON.stringify(i)}`),{dom:n,text:o.someProp("clipboardTextSerializer",M=>M(e,o))||e.content.textBetween(0,e.content.size,"\n\n")}}function It(o,e,i,c,f){let A,t,m=f.parent.type.spec.code;if(!i&&!e)return null;let n=e&&(c||m||!i);if(n){if(o.someProp("transformPastedText",v=>{e=v(e,m||c,o)}),m)return e?new r.p2(r.HY.from(o.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):r.p2.empty;let _=o.someProp("clipboardTextParser",v=>v(e,f,c,o));if(_)t=_;else{let v=f.marks(),{schema:M}=o.state,I=r.PW.fromSchema(M);A=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(K=>{let tt=A.appendChild(document.createElement("p"));K&&tt.appendChild(I.serializeNode(M.text(K,v)))})}}else o.someProp("transformPastedHTML",_=>{i=_(i,o)}),A=function(o){let e=/^(\s*<meta [^>]*>)*/.exec(o);e&&(o=o.slice(e[0].length));let f,i=Ae().createElement("div"),c=/<([a-z][^>\s]+)/i.exec(o);if((f=c&&cn[c[1].toLowerCase()])&&(o=f.map(m=>"<"+m+">").join("")+o+f.map(m=>"</"+m+">").reverse().join("")),i.innerHTML=o,f)for(let m=0;m<f.length;m++)i=i.querySelector(f[m])||i;return i}(i),j&&function(o){let e=o.querySelectorAll(Ut?"span:not([class]):not([style])":"span.Apple-converted-space");for(let i=0;i<e.length;i++){let c=e[i];1==c.childNodes.length&&"\xa0"==c.textContent&&c.parentNode&&c.parentNode.replaceChild(o.ownerDocument.createTextNode(" "),c)}}(A);let l=A&&A.querySelector("[data-pm-slice]"),u=l&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(l.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let _=+u[3];_>0;_--){let v=A.firstChild;for(;v&&1!=v.nodeType;)v=v.nextSibling;if(!v)break;A=v}if(t||(t=(o.someProp("clipboardParser")||o.someProp("domParser")||r.aw.fromSchema(o.state.schema)).parseSlice(A,{preserveWhitespace:!(!n&&!u),context:f,ruleFromNode:v=>"BR"!=v.nodeName||v.nextSibling||!v.parentNode||Rt.test(v.parentNode.nodeName)?null:{ignore:!0}})),u)t=function(o,e){if(!o.size)return o;let c,i=o.content.firstChild.type.schema;try{c=JSON.parse(e)}catch(t){return o}let{content:f,openStart:m,openEnd:A}=o;for(let t=c.length-2;t>=0;t-=2){let n=i.nodes[c[t]];if(!n||n.hasRequiredAttrs())break;f=r.HY.from(n.create(c[t+1],f)),m++,A++}return new r.p2(f,m,A)}(Xe(t,+u[1],+u[2]),u[4]);else if(t=r.p2.maxOpen(function(o,e){if(o.childCount<2)return o;for(let i=e.depth;i>=0;i--){let m,f=e.node(i).contentMatchAt(e.index(i)),A=[];if(o.forEach(t=>{if(!A)return;let l,n=f.findWrapping(t.type);if(!n)return A=null;if(l=A.length&&m.length&&se(n,m,t,A[A.length-1],0))A[A.length-1]=l;else{A.length&&(A[A.length-1]=me(A[A.length-1],m.length));let u=Qt(t,n);A.push(u),f=f.matchType(u.type),m=n}}),A)return r.HY.from(A)}return o}(t.content,f),!0),t.openStart||t.openEnd){let _=0,v=0;for(let M=t.content.firstChild;_<t.openStart&&!M.type.spec.isolating;_++,M=M.firstChild);for(let M=t.content.lastChild;v<t.openEnd&&!M.type.spec.isolating;v++,M=M.lastChild);t=Xe(t,_,v)}return o.someProp("transformPasted",_=>{t=_(t,o)}),t}const Rt=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Qt(o,e,i=0){for(let c=e.length-1;c>=i;c--)o=e[c].create(null,r.HY.from(o));return o}function se(o,e,i,c,f){if(f<o.length&&f<e.length&&o[f]==e[f]){let m=se(o,e,i,c.lastChild,f+1);if(m)return c.copy(c.content.replaceChild(c.childCount-1,m));if(c.contentMatchAt(c.childCount).matchType(f==o.length-1?i.type:o[f+1]))return c.copy(c.content.append(r.HY.from(Qt(i,o,f+1))))}}function me(o,e){if(0==e)return o;let i=o.content.replaceChild(o.childCount-1,me(o.lastChild,e-1)),c=o.contentMatchAt(o.childCount).fillBefore(r.HY.empty,!0);return o.copy(i.append(c))}function _e(o,e,i,c,f,m){let A=e<0?o.firstChild:o.lastChild,t=A.content;return f<c-1&&(t=_e(t,e,i,c,f+1,m)),f>=i&&(t=e<0?A.contentMatchAt(0).fillBefore(t,o.childCount>1||m<=f).append(t):t.append(A.contentMatchAt(A.childCount).fillBefore(r.HY.empty,!0))),o.replaceChild(e<0?0:o.childCount-1,A.copy(t))}function Xe(o,e,i){return e<o.openStart&&(o=new r.p2(_e(o.content,-1,e,o.openStart,0,o.openEnd),e,o.openEnd)),i<o.openEnd&&(o=new r.p2(_e(o.content,1,i,o.openEnd,0,0),o.openStart,i)),o}const cn={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let nn=null;function Ae(){return nn||(nn=document.implementation.createHTMLDocument("title"))}const ze={},tn={},Co={touchstart:!0,touchmove:!0};class Dn{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function fn(o,e){o.input.lastSelectionOrigin=e,o.input.lastSelectionTime=Date.now()}function Wn(o){o.someProp("handleDOMEvents",e=>{for(let i in e)o.input.eventHandlers[i]||o.dom.addEventListener(i,o.input.eventHandlers[i]=c=>Mn(o,c))})}function Mn(o,e){return o.someProp("handleDOMEvents",i=>{let c=i[e.type];return!!c&&(c(o,e)||e.defaultPrevented)})}function Kn(o,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let i=e.target;i!=o.dom;i=i.parentNode)if(!i||11==i.nodeType||i.pmViewDesc&&i.pmViewDesc.stopEvent(e))return!1;return!0}function In(o){return{left:o.clientX,top:o.clientY}}function Jn(o,e,i,c,f){if(-1==c)return!1;let m=o.state.doc.resolve(c);for(let A=m.depth+1;A>0;A--)if(o.someProp(e,t=>A>m.depth?t(o,i,m.nodeAfter,m.before(A),f,!0):t(o,i,m.node(A),m.before(A),f,!1)))return!0;return!1}function yn(o,e,i){o.focused||o.focus();let c=o.state.tr.setSelection(e);"pointer"==i&&c.setMeta("pointer",!0),o.dispatch(c)}function Qn(o,e,i,c){return Jn(o,"handleDoubleClickOn",e,i,c)||o.someProp("handleDoubleClick",f=>f(o,e,c))}function Oo(o,e,i,c){return Jn(o,"handleTripleClickOn",e,i,c)||o.someProp("handleTripleClick",f=>f(o,e,c))||function(o,e,i){if(0!=i.button)return!1;let c=o.state.doc;if(-1==e)return!!c.inlineContent&&(yn(o,E.Bs.create(c,0,c.content.size),"pointer"),!0);let f=c.resolve(e);for(let m=f.depth+1;m>0;m--){let A=m>f.depth?f.nodeAfter:f.node(m),t=f.before(m);if(A.inlineContent)yn(o,E.Bs.create(c,t+1,t+1+A.content.size),"pointer");else{if(!E.qv.isSelectable(A))continue;yn(o,E.qv.create(c,t),"pointer")}return!0}}(o,i,c)}function kn(o){return Bn(o)}tn.keydown=(o,e)=>{let i=e;if(o.input.shiftKey=16==i.keyCode||i.shiftKey,!$n(o,i)&&(o.input.lastKeyCode=i.keyCode,o.input.lastKeyCodeTime=Date.now(),!Z||!Ut||13!=i.keyCode))if(229!=i.keyCode&&o.domObserver.forceFlush(),!gt||13!=i.keyCode||i.ctrlKey||i.altKey||i.metaKey)o.someProp("handleKeyDown",c=>c(o,i))||function(o,e){let i=e.keyCode,c=function(o){let e="";return o.ctrlKey&&(e+="c"),o.metaKey&&(e+="m"),o.altKey&&(e+="a"),o.shiftKey&&(e+="s"),e}(e);return 8==i||O&&72==i&&"c"==c?R(o,-1)||Le(o):46==i||O&&68==i&&"c"==c?R(o,1)||h(o):13==i||27==i||(37==i||O&&66==i&&"c"==c?pe(o,-1,c)||Le(o):39==i||O&&70==i&&"c"==c?pe(o,1,c)||h(o):38==i||O&&80==i&&"c"==c?x(o,-1,c)||Le(o):40==i||O&&78==i&&"c"==c?function(o){if(!qt||o.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:i}=o.domSelectionRange();if(e&&1==e.nodeType&&0==i&&e.firstChild&&"false"==e.firstChild.contentEditable){let c=e.firstChild;z(o,c,"true"),setTimeout(()=>z(o,c,"false"),20)}return!1}(o)||x(o,1,c)||h(o):c==(O?"m":"c")&&(66==i||73==i||89==i||90==i))}(o,i)?i.preventDefault():fn(o,"key");else{let c=Date.now();o.input.lastIOSEnter=c,o.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{o.input.lastIOSEnter==c&&(o.someProp("handleKeyDown",f=>f(o,Dt(13,"Enter"))),o.input.lastIOSEnter=0)},200)}},tn.keyup=(o,e)=>{16==e.keyCode&&(o.input.shiftKey=!1)},tn.keypress=(o,e)=>{let i=e;if($n(o,i)||!i.charCode||i.ctrlKey&&!i.altKey||O&&i.metaKey)return;if(o.someProp("handleKeyPress",f=>f(o,i)))return void i.preventDefault();let c=o.state.selection;if(!(c instanceof E.Bs&&c.$from.sameParent(c.$to))){let f=String.fromCharCode(i.charCode);!/[\r\n]/.test(f)&&!o.someProp("handleTextInput",m=>m(o,c.$from.pos,c.$to.pos,f))&&o.dispatch(o.state.tr.insertText(f).scrollIntoView()),i.preventDefault()}};const Gn=O?"metaKey":"ctrlKey";ze.mousedown=(o,e)=>{let i=e;o.input.shiftKey=i.shiftKey;let c=kn(o),f=Date.now(),m="singleClick";f-o.input.lastClick.time<500&&function(o,e){let i=e.x-o.clientX,c=e.y-o.clientY;return i*i+c*c<100}(i,o.input.lastClick)&&!i[Gn]&&("singleClick"==o.input.lastClick.type?m="doubleClick":"doubleClick"==o.input.lastClick.type&&(m="tripleClick")),o.input.lastClick={time:f,x:i.clientX,y:i.clientY,type:m};let A=o.posAtCoords(In(i));!A||("singleClick"==m?(o.input.mouseDown&&o.input.mouseDown.done(),o.input.mouseDown=new Ao(o,A,i,!!c)):("doubleClick"==m?Qn:Oo)(o,A.pos,A.inside,i)?i.preventDefault():fn(o,"pointer"))};class Ao{constructor(e,i,c,f){let m,A;if(this.view=e,this.pos=i,this.event=c,this.flushed=f,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!c[Gn],this.allowDefault=c.shiftKey,i.inside>-1)m=e.state.doc.nodeAt(i.inside),A=i.inside;else{let u=e.state.doc.resolve(i.pos);m=u.parent,A=u.depth?u.before():0}const t=f?null:c.target,n=t?e.docView.nearestDesc(t,!0):null;this.target=n?n.dom:null;let{selection:l}=e.state;(0==c.button&&m.type.spec.draggable&&!1!==m.type.spec.selectable||l instanceof E.qv&&l.from<=A&&l.to>A)&&(this.mightDrag={node:m,pos:A,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!Nt||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),fn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Jt(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let i=this.pos;this.view.state.doc!=this.startDoc&&(i=this.view.posAtCoords(In(e))),this.updateAllowDefault(e),this.allowDefault||!i?fn(this.view,"pointer"):function(o,e,i,c,f){return Jn(o,"handleClickOn",e,i,c)||o.someProp("handleClick",m=>m(o,e,c))||(f?function(o,e){if(-1==e)return!1;let c,f,i=o.state.selection;i instanceof E.qv&&(c=i.node);let m=o.state.doc.resolve(e);for(let A=m.depth+1;A>0;A--){let t=A>m.depth?m.nodeAfter:m.node(A);if(E.qv.isSelectable(t)){f=c&&i.$from.depth>0&&A>=i.$from.depth&&m.before(i.$from.depth+1)==i.$from.pos?m.before(i.$from.depth):m.before(A);break}}return null!=f&&(yn(o,E.qv.create(o.state.doc,f),"pointer"),!0)}(o,i):function(o,e){if(-1==e)return!1;let i=o.state.doc.resolve(e),c=i.nodeAfter;return!!(c&&c.isAtom&&E.qv.isSelectable(c))&&(yn(o,new E.qv(i),"pointer"),!0)}(o,i))}(this.view,i.pos,i.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||qt&&this.mightDrag&&!this.mightDrag.node.isAtom||Ut&&!this.view.state.selection.visible&&Math.min(Math.abs(i.pos-this.view.state.selection.from),Math.abs(i.pos-this.view.state.selection.to))<=2)?(yn(this.view,E.Y1.near(this.view.state.doc.resolve(i.pos)),"pointer"),e.preventDefault()):fn(this.view,"pointer")}move(e){this.updateAllowDefault(e),fn(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function $n(o,e){return!!o.composing||!!(qt&&Math.abs(e.timeStamp-o.input.compositionEndedAt)<500)&&(o.input.compositionEndedAt=-2e8,!0)}ze.touchstart=o=>{o.input.lastTouch=Date.now(),kn(o),fn(o,"pointer")},ze.touchmove=o=>{o.input.lastTouch=Date.now(),fn(o,"pointer")},ze.contextmenu=o=>kn(o);const wn=Z?5e3:-1;function Rn(o,e){clearTimeout(o.input.composingTimeout),e>-1&&(o.input.composingTimeout=setTimeout(()=>Bn(o),e))}function Pn(o){for(o.composing&&(o.input.composing=!1,o.input.compositionEndedAt=function(){let o=document.createEvent("Event");return o.initEvent("event",!0,!0),o.timeStamp}());o.input.compositionNodes.length>0;)o.input.compositionNodes.pop().markParentsDirty()}function Bn(o,e=!1){if(!(Z&&o.domObserver.flushingSoon>=0)){if(o.domObserver.forceFlush(),Pn(o),e||o.docView&&o.docView.dirty){let i=wt(o);return i&&!i.eq(o.state.selection)?o.dispatch(o.state.tr.setSelection(i)):o.updateState(o.state),!0}return!1}}tn.compositionstart=tn.compositionupdate=o=>{if(!o.composing){o.domObserver.flush();let{state:e}=o,i=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!i.textOffset&&i.parentOffset&&i.nodeBefore.marks.some(c=>!1===c.type.spec.inclusive)))o.markCursor=o.state.storedMarks||i.marks(),Bn(o,!0),o.markCursor=null;else if(Bn(o),Nt&&e.selection.empty&&i.parentOffset&&!i.textOffset&&i.nodeBefore.marks.length){let c=o.domSelectionRange();for(let f=c.focusNode,m=c.focusOffset;f&&1==f.nodeType&&0!=m;){let A=m<0?f.lastChild:f.childNodes[m-1];if(!A)break;if(3==A.nodeType){o.domSelection().collapse(A,A.nodeValue.length);break}f=A,m=-1}}o.input.composing=!0}Rn(o,wn)},tn.compositionend=(o,e)=>{o.composing&&(o.input.composing=!1,o.input.compositionEndedAt=e.timeStamp,Rn(o,20))};const bn=yt&&Bt<15||gt&&bt<604;function On(o,e,i,c,f){let m=It(o,e,i,c,o.state.selection.$from);if(o.someProp("handlePaste",n=>n(o,f,m||r.p2.empty)))return!0;if(!m)return!1;let A=function(o){return 0==o.openStart&&0==o.openEnd&&1==o.content.childCount?o.content.firstChild:null}(m),t=A?o.state.tr.replaceSelectionWith(A,o.input.shiftKey):o.state.tr.replaceSelection(m);return o.dispatch(t.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}ze.copy=tn.cut=(o,e)=>{let i=e,c=o.state.selection,f="cut"==i.type;if(c.empty)return;let m=bn?null:i.clipboardData,A=c.content(),{dom:t,text:n}=rt(o,A);m?(i.preventDefault(),m.clearData(),m.setData("text/html",t.innerHTML),m.setData("text/plain",n)):function(o,e){if(!o.dom.parentNode)return;let i=o.dom.parentNode.appendChild(document.createElement("div"));i.appendChild(e),i.style.cssText="position: fixed; left: -10000px; top: 10px";let c=getSelection(),f=document.createRange();f.selectNodeContents(e),o.dom.blur(),c.removeAllRanges(),c.addRange(f),setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i),o.focus()},50)}(o,t),f&&o.dispatch(o.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},tn.paste=(o,e)=>{let i=e;if(o.composing&&!Z)return;let c=bn?null:i.clipboardData;c&&On(o,c.getData("text/plain"),c.getData("text/html"),o.input.shiftKey,i)?i.preventDefault():function(o,e){if(!o.dom.parentNode)return;let i=o.input.shiftKey||o.state.selection.$from.parent.type.spec.code,c=o.dom.parentNode.appendChild(document.createElement(i?"textarea":"div"));i||(c.contentEditable="true"),c.style.cssText="position: fixed; left: -10000px; top: 10px",c.focus(),setTimeout(()=>{o.focus(),c.parentNode&&c.parentNode.removeChild(c),i?On(o,c.value,null,o.input.shiftKey,e):On(o,c.textContent,c.innerHTML,o.input.shiftKey,e)},50)}(o,i)};class qn{constructor(e,i){this.slice=e,this.move=i}}const to=O?"altKey":"ctrlKey";ze.dragstart=(o,e)=>{let i=e,c=o.input.mouseDown;if(c&&c.done(),!i.dataTransfer)return;let f=o.state.selection,m=f.empty?null:o.posAtCoords(In(i));if(!(m&&m.pos>=f.from&&m.pos<=(f instanceof E.qv?f.to-1:f.to)))if(c&&c.mightDrag)o.dispatch(o.state.tr.setSelection(E.qv.create(o.state.doc,c.mightDrag.pos)));else if(i.target&&1==i.target.nodeType){let l=o.docView.nearestDesc(i.target,!0);l&&l.node.type.spec.draggable&&l!=o.docView&&o.dispatch(o.state.tr.setSelection(E.qv.create(o.state.doc,l.posBefore)))}let A=o.state.selection.content(),{dom:t,text:n}=rt(o,A);i.dataTransfer.clearData(),i.dataTransfer.setData(bn?"Text":"text/html",t.innerHTML),i.dataTransfer.effectAllowed="copyMove",bn||i.dataTransfer.setData("text/plain",n),o.dragging=new qn(A,!i[to])},ze.dragend=o=>{let e=o.dragging;window.setTimeout(()=>{o.dragging==e&&(o.dragging=null)},50)},tn.dragover=tn.dragenter=(o,e)=>e.preventDefault(),tn.drop=(o,e)=>{let i=e,c=o.dragging;if(o.dragging=null,!i.dataTransfer)return;let f=o.posAtCoords(In(i));if(!f)return;let m=o.state.doc.resolve(f.pos),A=c&&c.slice;A?o.someProp("transformPasted",I=>{A=I(A,o)}):A=It(o,i.dataTransfer.getData(bn?"Text":"text/plain"),bn?null:i.dataTransfer.getData("text/html"),!1,m);let t=!(!c||i[to]);if(o.someProp("handleDrop",I=>I(o,i,A||r.p2.empty,t)))return void i.preventDefault();if(!A)return;i.preventDefault();let n=A?(0,T.nj)(o.state.doc,m.pos,A):m.pos;null==n&&(n=m.pos);let l=o.state.tr;t&&l.deleteSelection();let u=l.mapping.map(n),_=0==A.openStart&&0==A.openEnd&&1==A.content.childCount,v=l.doc;if(_?l.replaceRangeWith(u,u,A.content.firstChild):l.replaceRange(u,u,A),l.doc.eq(v))return;let M=l.doc.resolve(u);if(_&&E.qv.isSelectable(A.content.firstChild)&&M.nodeAfter&&M.nodeAfter.sameMarkup(A.content.firstChild))l.setSelection(new E.qv(M));else{let I=l.mapping.map(n);l.mapping.maps[l.mapping.maps.length-1].forEach((K,tt,et,vt)=>I=vt),l.setSelection(kt(o,M,l.doc.resolve(I)))}o.focus(),o.dispatch(l.setMeta("uiEvent","drop"))},ze.focus=o=>{o.input.lastFocus=Date.now(),o.focused||(o.domObserver.stop(),o.dom.classList.add("ProseMirror-focused"),o.domObserver.start(),o.focused=!0,setTimeout(()=>{o.docView&&o.hasFocus()&&!o.domObserver.currentSelection.eq(o.domSelectionRange())&&Jt(o)},20))},ze.blur=(o,e)=>{let i=e;o.focused&&(o.domObserver.stop(),o.dom.classList.remove("ProseMirror-focused"),o.domObserver.start(),i.relatedTarget&&o.dom.contains(i.relatedTarget)&&o.domObserver.currentSelection.clear(),o.focused=!1)},ze.beforeinput=(o,e)=>{if(Ut&&Z&&"deleteContentBackward"==e.inputType){o.domObserver.flushSoon();let{domChangeCount:c}=o.input;setTimeout(()=>{if(o.input.domChangeCount!=c||(o.dom.blur(),o.focus(),o.someProp("handleKeyDown",m=>m(o,Dt(8,"Backspace")))))return;let{$cursor:f}=o.state.selection;f&&f.pos>0&&o.dispatch(o.state.tr.delete(f.pos-1,f.pos).scrollIntoView())},50)}};for(let o in tn)ze[o]=tn[o];function Sn(o,e){if(o==e)return!0;for(let i in o)if(o[i]!==e[i])return!1;for(let i in e)if(!(i in o))return!1;return!0}class Ln{constructor(e,i){this.toDOM=e,this.spec=i||gn,this.side=this.spec.side||0}map(e,i,c,f){let{pos:m,deleted:A}=e.mapResult(i.from+f,this.side<0?-1:1);return A?null:new en(m-c,m-c,this)}valid(){return!0}eq(e){return this==e||e instanceof Ln&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Sn(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class sn{constructor(e,i){this.attrs=e,this.spec=i||gn}map(e,i,c,f){let m=e.map(i.from+f,this.spec.inclusiveStart?-1:1)-c,A=e.map(i.to+f,this.spec.inclusiveEnd?1:-1)-c;return m>=A?null:new en(m,A,this)}valid(e,i){return i.from<i.to}eq(e){return this==e||e instanceof sn&&Sn(this.attrs,e.attrs)&&Sn(this.spec,e.spec)}static is(e){return e.type instanceof sn}destroy(){}}class xn{constructor(e,i){this.attrs=e,this.spec=i||gn}map(e,i,c,f){let m=e.mapResult(i.from+f,1);if(m.deleted)return null;let A=e.mapResult(i.to+f,-1);return A.deleted||A.pos<=m.pos?null:new en(m.pos-c,A.pos-c,this)}valid(e,i){let m,{index:c,offset:f}=e.content.findIndex(i.from);return f==i.from&&!(m=e.child(c)).isText&&f+m.nodeSize==i.to}eq(e){return this==e||e instanceof xn&&Sn(this.attrs,e.attrs)&&Sn(this.spec,e.spec)}destroy(){}}class en{constructor(e,i,c){this.from=e,this.to=i,this.type=c}copy(e,i){return new en(e,i,this.type)}eq(e,i=0){return this.type.eq(e.type)&&this.from+i==e.from&&this.to+i==e.to}map(e,i,c){return this.type.map(e,this,i,c)}static widget(e,i,c){return new en(e,e,new Ln(i,c))}static inline(e,i,c,f){return new en(e,i,new sn(c,f))}static node(e,i,c,f){return new en(e,i,new xn(c,f))}get spec(){return this.type.spec}get inline(){return this.type instanceof sn}}const mn=[],gn={};class Ze{constructor(e,i){this.local=e.length?e:mn,this.children=i.length?i:mn}static create(e,i){return i.length?Nn(i,e,0,gn):qe}find(e,i,c){let f=[];return this.findInner(null==e?0:e,null==i?1e9:i,f,0,c),f}findInner(e,i,c,f,m){for(let A=0;A<this.local.length;A++){let t=this.local[A];t.from<=i&&t.to>=e&&(!m||m(t.spec))&&c.push(t.copy(t.from+f,t.to+f))}for(let A=0;A<this.children.length;A+=3)if(this.children[A]<i&&this.children[A+1]>e){let t=this.children[A]+1;this.children[A+2].findInner(e-t,i-t,c,f+t,m)}}map(e,i,c){return this==qe||0==e.maps.length?this:this.mapInner(e,i,0,0,c||gn)}mapInner(e,i,c,f,m){let A;for(let t=0;t<this.local.length;t++){let n=this.local[t].map(e,c,f);n&&n.type.valid(i,n)?(A||(A=[])).push(n):m.onRemove&&m.onRemove(this.local[t].spec)}return this.children.length?function(o,e,i,c,f,m,A){let t=o.slice();for(let l=0,u=m;l<i.maps.length;l++){let _=0;i.maps[l].forEach((v,M,I,K)=>{let tt=K-I-(M-v);for(let et=0;et<t.length;et+=3){let vt=t[et+1];if(vt<0||v>vt+u-_)continue;let Pt=t[et]+u-_;M>=Pt?t[et+1]=v<=Pt?-2:-1:I>=f&&tt&&(t[et]+=tt,t[et+1]+=tt)}_+=tt}),u=i.maps[l].map(u,-1)}let n=!1;for(let l=0;l<t.length;l+=3)if(t[l+1]<0){if(-2==t[l+1]){n=!0,t[l+1]=-1;continue}let u=i.map(o[l]+m),_=u-f;if(_<0||_>=c.content.size){n=!0;continue}let M=i.map(o[l+1]+m,-1)-f,{index:I,offset:K}=c.content.findIndex(_),tt=c.maybeChild(I);if(tt&&K==_&&K+tt.nodeSize==M){let et=t[l+2].mapInner(i,tt,u+1,o[l]+m+1,A);et!=qe?(t[l]=_,t[l+1]=M,t[l+2]=et):(t[l+1]=-2,n=!0)}else n=!0}if(n){let l=function(o,e,i,c,f,m,A){function t(n,l){for(let u=0;u<n.local.length;u++){let _=n.local[u].map(c,f,l);_?i.push(_):A.onRemove&&A.onRemove(n.local[u].spec)}for(let u=0;u<n.children.length;u+=3)t(n.children[u+2],n.children[u]+l+1)}for(let n=0;n<o.length;n+=3)-1==o[n+1]&&t(o[n+2],e[n]+m+1);return i}(t,o,e,i,f,m,A),u=Nn(l,c,0,A);e=u.local;for(let _=0;_<t.length;_+=3)t[_+1]<0&&(t.splice(_,3),_-=3);for(let _=0,v=0;_<u.children.length;_+=3){let M=u.children[_];for(;v<t.length&&t[v]<M;)v+=3;t.splice(v,0,u.children[_],u.children[_+1],u.children[_+2])}}return new Ze(e.sort(ln),t)}(this.children,A||[],e,i,c,f,m):A?new Ze(A.sort(ln),mn):qe}add(e,i){return i.length?this==qe?Ze.create(e,i):this.addInner(e,i,0):this}addInner(e,i,c){let f,m=0;e.forEach((t,n)=>{let u,l=n+c;if(u=no(i,t,l)){for(f||(f=this.children.slice());m<f.length&&f[m]<n;)m+=3;f[m]==n?f[m+2]=f[m+2].addInner(t,u,l+1):f.splice(m,0,n,n+t.nodeSize,Nn(u,t,l+1,gn)),m+=3}});let A=eo(m?oo(i):i,-c);for(let t=0;t<A.length;t++)A[t].type.valid(e,A[t])||A.splice(t--,1);return new Ze(A.length?this.local.concat(A).sort(ln):this.local,f||this.children)}remove(e){return 0==e.length||this==qe?this:this.removeInner(e,0)}removeInner(e,i){let c=this.children,f=this.local;for(let m=0;m<c.length;m+=3){let A,t=c[m]+i,n=c[m+1]+i;for(let _,u=0;u<e.length;u++)(_=e[u])&&_.from>t&&_.to<n&&(e[u]=null,(A||(A=[])).push(_));if(!A)continue;c==this.children&&(c=this.children.slice());let l=c[m+2].removeInner(A,t+1);l!=qe?c[m+2]=l:(c.splice(m,3),m-=3)}if(f.length)for(let A,m=0;m<e.length;m++)if(A=e[m])for(let t=0;t<f.length;t++)f[t].eq(A,i)&&(f==this.local&&(f=this.local.slice()),f.splice(t--,1));return c==this.children&&f==this.local?this:f.length||c.length?new Ze(f,c):qe}forChild(e,i){if(this==qe)return this;if(i.isLeaf)return Ze.empty;let c,f;for(let t=0;t<this.children.length;t+=3)if(this.children[t]>=e){this.children[t]==e&&(c=this.children[t+2]);break}let m=e+1,A=m+i.content.size;for(let t=0;t<this.local.length;t++){let n=this.local[t];if(n.from<A&&n.to>m&&n.type instanceof sn){let l=Math.max(m,n.from)-m,u=Math.min(A,n.to)-m;l<u&&(f||(f=[])).push(n.copy(l,u))}}if(f){let t=new Ze(f.sort(ln),mn);return c?new _n([t,c]):t}return c||qe}eq(e){if(this==e)return!0;if(!(e instanceof Ze)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let i=0;i<this.local.length;i++)if(!this.local[i].eq(e.local[i]))return!1;for(let i=0;i<this.children.length;i+=3)if(this.children[i]!=e.children[i]||this.children[i+1]!=e.children[i+1]||!this.children[i+2].eq(e.children[i+2]))return!1;return!0}locals(e){return Fn(this.localsInner(e))}localsInner(e){if(this==qe)return mn;if(e.inlineContent||!this.local.some(sn.is))return this.local;let i=[];for(let c=0;c<this.local.length;c++)this.local[c].type instanceof sn||i.push(this.local[c]);return i}}Ze.empty=new Ze([],[]),Ze.removeOverlap=Fn;const qe=Ze.empty;class _n{constructor(e){this.members=e}map(e,i){const c=this.members.map(f=>f.map(e,i,gn));return _n.from(c)}forChild(e,i){if(i.isLeaf)return Ze.empty;let c=[];for(let f=0;f<this.members.length;f++){let m=this.members[f].forChild(e,i);m!=qe&&(m instanceof _n?c=c.concat(m.members):c.push(m))}return _n.from(c)}eq(e){if(!(e instanceof _n)||e.members.length!=this.members.length)return!1;for(let i=0;i<this.members.length;i++)if(!this.members[i].eq(e.members[i]))return!1;return!0}locals(e){let i,c=!0;for(let f=0;f<this.members.length;f++){let m=this.members[f].localsInner(e);if(m.length)if(i){c&&(i=i.slice(),c=!1);for(let A=0;A<m.length;A++)i.push(m[A])}else i=m}return i?Fn(c?i:i.sort(ln)):mn}static from(e){switch(e.length){case 0:return qe;case 1:return e[0];default:return new _n(e.every(i=>i instanceof Ze)?e:e.reduce((i,c)=>i.concat(c instanceof Ze?c:c.members),[]))}}}function eo(o,e){if(!e||!o.length)return o;let i=[];for(let c=0;c<o.length;c++){let f=o[c];i.push(new en(f.from+e,f.to+e,f.type))}return i}function no(o,e,i){if(e.isLeaf)return null;let c=i+e.nodeSize,f=null;for(let A,m=0;m<o.length;m++)(A=o[m])&&A.from>i&&A.to<c&&((f||(f=[])).push(A),o[m]=null);return f}function oo(o){let e=[];for(let i=0;i<o.length;i++)null!=o[i]&&e.push(o[i]);return e}function Nn(o,e,i,c){let f=[],m=!1;e.forEach((t,n)=>{let l=no(o,t,n+i);if(l){m=!0;let u=Nn(l,t,i+n+1,c);u!=qe&&f.push(n,n+t.nodeSize,u)}});let A=eo(m?oo(o):o,-i).sort(ln);for(let t=0;t<A.length;t++)A[t].type.valid(e,A[t])||(c.onRemove&&c.onRemove(A[t].spec),A.splice(t--,1));return A.length||f.length?new Ze(A,f):qe}function ln(o,e){return o.from-e.from||o.to-e.to}function Fn(o){let e=o;for(let i=0;i<e.length-1;i++){let c=e[i];if(c.from!=c.to)for(let f=i+1;f<e.length;f++){let m=e[f];if(m.from!=c.from){m.from<c.to&&(e==o&&(e=o.slice()),e[i]=c.copy(c.from,m.from),io(e,f,c.copy(m.from,c.to)));break}m.to!=c.to&&(e==o&&(e=o.slice()),e[f]=m.copy(m.from,c.to),io(e,f+1,m.copy(c.to,m.to)))}}return e}function io(o,e,i){for(;e<o.length&&ln(i,o[e])>0;)e++;o.splice(e,0,i)}function jn(o){let e=[];return o.someProp("decorations",i=>{let c=i(o.state);c&&c!=qe&&e.push(c)}),o.cursorWrapper&&e.push(Ze.create(o.state.doc,[o.cursorWrapper.deco])),_n.from(e)}const ro={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},so=yt&&Bt<=11;class ko{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class wo{constructor(e,i){this.view=e,this.handleDOMChange=i,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ko,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(c=>{for(let f=0;f<c.length;f++)this.queue.push(c[f]);yt&&Bt<=11&&c.some(f=>"childList"==f.type&&f.removedNodes.length||"characterData"==f.type&&f.oldValue.length>f.target.nodeValue.length)?this.flushSoon():this.flush()}),so&&(this.onCharData=c=>{this.queue.push({target:c.target,type:"characterData",oldValue:c.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,ro)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let i=0;i<e.length;i++)this.queue.push(e[i]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(te(this.view)){if(this.suppressingSelectionUpdates)return Jt(this.view);if(yt&&Bt<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Y(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let c,i=new Set;for(let m=e.focusNode;m;m=p(m))i.add(m);for(let m=e.anchorNode;m;m=p(m))if(i.has(m)){c=m;break}let f=c&&this.view.docView.nearestDesc(c);return f&&f.ignoreMutation({type:"selection",target:3==c.nodeType?c.parentNode:c})?(this.setCurSelection(),!0):void 0}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let i=this.observer?this.observer.takeRecords():[];this.queue.length&&(i=this.queue.concat(i),this.queue.length=0);let c=e.domSelectionRange(),f=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(c)&&te(e)&&!this.ignoreSelectionChange(c),m=-1,A=-1,t=!1,n=[];if(e.editable)for(let u=0;u<i.length;u++){let _=this.registerMutation(i[u],n);_&&(m=m<0?_.from:Math.min(_.from,m),A=A<0?_.to:Math.max(_.to,A),_.typeOver&&(t=!0))}if(Nt&&n.length>1){let u=n.filter(_=>"BR"==_.nodeName);if(2==u.length){let _=u[0],v=u[1];_.parentNode&&_.parentNode.parentNode==v.parentNode?v.remove():_.remove()}}let l=null;m<0&&f&&e.input.lastFocus>Date.now()-200&&e.input.lastTouch<Date.now()-300&&mt(c)&&(l=wt(e))&&l.eq(E.Y1.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Jt(e),this.currentSelection.set(c),e.scrollToSelection()):(m>-1||f)&&(m>-1&&(e.docView.markDirty(m,A),function(o){if(!lo.has(o)&&(lo.set(o,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(o.dom).whiteSpace))){if(o.requiresGeckoHackNode=Nt,ao)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ao=!0}}(e)),this.handleDOMChange(m,A,t,n),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(c)||Jt(e),this.currentSelection.set(c))}registerMutation(e,i){if(i.indexOf(e.target)>-1)return null;let c=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(c==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style"))||!c||c.ignoreMutation(e))return null;if("childList"==e.type){for(let u=0;u<e.addedNodes.length;u++)i.push(e.addedNodes[u]);if(c.contentDOM&&c.contentDOM!=c.dom&&!c.contentDOM.contains(e.target))return{from:c.posBefore,to:c.posAfter};let f=e.previousSibling,m=e.nextSibling;if(yt&&Bt<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:_,nextSibling:v}=e.addedNodes[u];(!_||Array.prototype.indexOf.call(e.addedNodes,_)<0)&&(f=_),(!v||Array.prototype.indexOf.call(e.addedNodes,v)<0)&&(m=v)}let A=f&&f.parentNode==e.target?y(f)+1:0,t=c.localPosFromDOM(e.target,A,-1),n=m&&m.parentNode==e.target?y(m):e.target.childNodes.length;return{from:t,to:c.localPosFromDOM(e.target,n,1)}}return"attributes"==e.type?{from:c.posAtStart-c.border,to:c.posAtEnd+c.border}:{from:c.posAtStart,to:c.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let lo=new WeakMap,ao=!1;function No(o){let e=o.pmViewDesc;if(e)return e.parseRule();if("BR"==o.nodeName&&o.parentNode){if(qt&&/^(ul|ol)$/i.test(o.parentNode.nodeName)){let i=document.createElement("div");return i.appendChild(document.createElement("li")),{skip:i}}if(o.parentNode.lastChild==o||qt&&/^(tr|table)$/i.test(o.parentNode.nodeName))return{ignore:!0}}else if("IMG"==o.nodeName&&o.getAttribute("mark-placeholder"))return{ignore:!0};return null}function co(o,e,i){return Math.max(i.anchor,i.head)>e.content.size?null:kt(o,e.resolve(i.anchor),e.resolve(i.head))}function Vn(o,e,i){let c=o.depth,f=e?o.end():o.pos;for(;c>0&&(e||o.indexAfter(c)==o.node(c).childCount);)c--,f++,e=!1;if(i){let m=o.node(c).maybeChild(o.indexAfter(c));for(;m&&!m.isLeaf;)m=m.firstChild,f++}return f}class Ko{constructor(e,i){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Dn,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=i,this.state=i.state,this.directPlugins=i.plugins||[],this.directPlugins.forEach(zn),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=ho(this),po(this),this.nodeViews=fo(this),this.docView=s(this.state.doc,uo(this),jn(this),this.dom,this),this.domObserver=new wo(this,(c,f,m,A)=>function(o,e,i,c,f){if(e<0){let re=o.input.lastSelectionTime>Date.now()-50?o.input.lastSelectionOrigin:null,Ye=wt(o,re);if(Ye&&!o.state.selection.eq(Ye)){if(Ut&&Z&&13===o.input.lastKeyCode&&Date.now()-100<o.input.lastKeyCodeTime&&o.someProp("handleKeyDown",An=>An(o,Dt(13,"Enter"))))return;let Cn=o.state.tr.setSelection(Ye);"pointer"==re?Cn.setMeta("pointer",!0):"key"==re&&Cn.scrollIntoView(),o.dispatch(Cn)}return}let m=o.state.doc.resolve(e),A=m.sharedDepth(i);e=m.before(A+1),i=o.state.doc.resolve(i).after(A+1);let _,v,t=o.state.selection,n=function(o,e,i){let l,{node:c,fromOffset:f,toOffset:m,from:A,to:t}=o.docView.parseRange(e,i),n=o.domSelectionRange(),u=n.anchorNode;if(u&&o.dom.contains(1==u.nodeType?u:u.parentNode)&&(l=[{node:u,offset:n.anchorOffset}],mt(n)||l.push({node:n.focusNode,offset:n.focusOffset})),Ut&&8===o.input.lastKeyCode)for(let tt=m;tt>f;tt--){let et=c.childNodes[tt-1],vt=et.pmViewDesc;if("BR"==et.nodeName&&!vt){m=tt;break}if(!vt||vt.size)break}let _=o.state.doc,v=o.someProp("domParser")||r.aw.fromSchema(o.state.schema),M=_.resolve(A),I=null,K=v.parse(c,{topNode:M.parent,topMatch:M.parent.contentMatchAt(M.index()),topOpen:!0,from:f,to:m,preserveWhitespace:"pre"!=M.parent.type.whitespace||"full",findPositions:l,ruleFromNode:No,context:M});if(l&&null!=l[0].pos){let tt=l[0].pos,et=l[1]&&l[1].pos;null==et&&(et=tt),I={anchor:tt+A,head:et+A}}return{doc:K,sel:I,from:A,to:t}}(o,e,i),l=o.state.doc,u=l.slice(n.from,n.to);8===o.input.lastKeyCode&&Date.now()-100<o.input.lastKeyCodeTime?(_=o.state.selection.to,v="end"):(_=o.state.selection.from,v="start"),o.input.lastKeyCode=null;let M=function(o,e,i,c,f){let m=o.findDiffStart(e,i);if(null==m)return null;let{a:A,b:t}=o.findDiffEnd(e,i+o.size,i+e.size);return"end"==f&&(c-=A+Math.max(0,m-Math.min(A,t))-m),A<m&&o.size<e.size?(m-=c<=m&&c>=A?m-c:0,t=m+(t-A),A=m):t<m&&(m-=c<=m&&c>=t?m-c:0,A=m+(A-t),t=m),{start:m,endA:A,endB:t}}(u.content,n.doc.content,n.from,_,v);if((gt&&o.input.lastIOSEnter>Date.now()-225||Z)&&f.some(re=>"DIV"==re.nodeName||"P"==re.nodeName||"LI"==re.nodeName)&&(!M||M.endA>=M.endB)&&o.someProp("handleKeyDown",re=>re(o,Dt(13,"Enter"))))return void(o.input.lastIOSEnter=0);if(!M){if(!(c&&t instanceof E.Bs&&!t.empty&&t.$head.sameParent(t.$anchor))||o.composing||n.sel&&n.sel.anchor!=n.sel.head){if(n.sel){let re=co(o,o.state.doc,n.sel);re&&!re.eq(o.state.selection)&&o.dispatch(o.state.tr.setSelection(re))}return}M={start:t.from,endA:t.to,endB:t.to}}if(Ut&&o.cursorWrapper&&n.sel&&n.sel.anchor==o.cursorWrapper.deco.from&&n.sel.head==n.sel.anchor){let re=M.endB-M.start;n.sel={anchor:n.sel.anchor+re,head:n.sel.anchor+re}}o.input.domChangeCount++,o.state.selection.from<o.state.selection.to&&M.start==M.endB&&o.state.selection instanceof E.Bs&&(M.start>o.state.selection.from&&M.start<=o.state.selection.from+2&&o.state.selection.from>=n.from?M.start=o.state.selection.from:M.endA<o.state.selection.to&&M.endA>=o.state.selection.to-2&&o.state.selection.to<=n.to&&(M.endB+=o.state.selection.to-M.endA,M.endA=o.state.selection.to)),yt&&Bt<=11&&M.endB==M.start+1&&M.endA==M.start&&M.start>n.from&&" \xa0"==n.doc.textBetween(M.start-n.from-1,M.start-n.from+1)&&(M.start--,M.endA--,M.endB--);let vt,I=n.doc.resolveNoCache(M.start-n.from),K=n.doc.resolveNoCache(M.endB-n.from),tt=l.resolve(M.start),et=I.sameParent(K)&&I.parent.inlineContent&&tt.end()>=M.endA;if((gt&&o.input.lastIOSEnter>Date.now()-225&&(!et||f.some(re=>"DIV"==re.nodeName||"P"==re.nodeName))||!et&&I.pos<n.doc.content.size&&(vt=E.Y1.findFrom(n.doc.resolve(I.pos+1),1,!0))&&vt.head==K.pos)&&o.someProp("handleKeyDown",re=>re(o,Dt(13,"Enter"))))return void(o.input.lastIOSEnter=0);if(o.state.selection.anchor>M.start&&function(o,e,i,c,f){if(!c.parent.isTextblock||i-e<=f.pos-c.pos||Vn(c,!0,!1)<f.pos)return!1;let m=o.resolve(e);if(m.parentOffset<m.parent.content.size||!m.parent.isTextblock)return!1;let A=o.resolve(Vn(m,!0,!0));return!(!A.parent.isTextblock||A.pos>i||Vn(A,!0,!1)<i)&&c.parent.content.cut(c.parentOffset).eq(A.parent.content)}(l,M.start,M.endA,I,K)&&o.someProp("handleKeyDown",re=>re(o,Dt(8,"Backspace"))))return void(Z&&Ut&&o.domObserver.suppressSelectionUpdates());Ut&&Z&&M.endB==M.start&&(o.input.lastAndroidDelete=Date.now()),Z&&!et&&I.start()!=K.start()&&0==K.parentOffset&&I.depth==K.depth&&n.sel&&n.sel.anchor==n.sel.head&&n.sel.head==M.endA&&(M.endB-=2,K=n.doc.resolveNoCache(M.endB-n.from),setTimeout(()=>{o.someProp("handleKeyDown",function(re){return re(o,Dt(13,"Enter"))})},20));let Xt,ee,ue,Pt=M.start,$t=M.endA;if(et)if(I.pos==K.pos)yt&&Bt<=11&&0==I.parentOffset&&(o.domObserver.suppressSelectionUpdates(),setTimeout(()=>Jt(o),20)),Xt=o.state.tr.delete(Pt,$t),ee=l.resolve(M.start).marksAcross(l.resolve(M.endA));else if(M.endA==M.endB&&(ue=function(o,e){let A,t,n,i=o.firstChild.marks,c=e.firstChild.marks,f=i,m=c;for(let u=0;u<c.length;u++)f=c[u].removeFromSet(f);for(let u=0;u<i.length;u++)m=i[u].removeFromSet(m);if(1==f.length&&0==m.length)t=f[0],A="add",n=u=>u.mark(t.addToSet(u.marks));else{if(0!=f.length||1!=m.length)return null;t=m[0],A="remove",n=u=>u.mark(t.removeFromSet(u.marks))}let l=[];for(let u=0;u<e.childCount;u++)l.push(n(e.child(u)));if(r.HY.from(l).eq(o))return{mark:t,type:A}}(I.parent.content.cut(I.parentOffset,K.parentOffset),tt.parent.content.cut(tt.parentOffset,M.endA-tt.start()))))Xt=o.state.tr,"add"==ue.type?Xt.addMark(Pt,$t,ue.mark):Xt.removeMark(Pt,$t,ue.mark);else if(I.parent.child(I.index()).isText&&I.index()==K.index()-(K.textOffset?0:1)){let re=I.parent.textBetween(I.parentOffset,K.parentOffset);if(o.someProp("handleTextInput",Ye=>Ye(o,Pt,$t,re)))return;Xt=o.state.tr.insertText(re,Pt,$t)}if(Xt||(Xt=o.state.tr.replace(Pt,$t,n.doc.slice(M.start-n.from,M.endB-n.from))),n.sel){let re=co(o,Xt.doc,n.sel);re&&!(Ut&&Z&&o.composing&&re.empty&&(M.start!=M.endB||o.input.lastAndroidDelete<Date.now()-100)&&(re.head==Pt||re.head==Xt.mapping.map($t)-1)||yt&&re.empty&&re.head==Pt)&&Xt.setSelection(re)}ee&&Xt.ensureMarks(ee),o.dispatch(Xt.scrollIntoView())}(this,c,f,m,A)),this.domObserver.start(),function(o){for(let e in ze){let i=ze[e];o.dom.addEventListener(e,o.input.eventHandlers[e]=c=>{Kn(o,c)&&!Mn(o,c)&&(o.editable||!(c.type in tn))&&i(o,c)},Co[e]?{passive:!0}:void 0)}qt&&o.dom.addEventListener("input",()=>null),Wn(o)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let i in e)this._props[i]=e[i];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Wn(this);let i=this._props;this._props=e,e.plugins&&(e.plugins.forEach(zn),this.directPlugins=e.plugins),this.updateStateInner(e.state,i)}setProps(e){let i={};for(let c in this._props)i[c]=this._props[c];i.state=this.state;for(let c in e)i[c]=e[c];this.update(i)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,i){let c=this.state,f=!1,m=!1;e.storedMarks&&this.composing&&(Pn(this),m=!0),this.state=e;let A=c.plugins!=e.plugins||this._props.plugins!=i.plugins;if(A||this._props.plugins!=i.plugins||this._props.nodeViews!=i.nodeViews){let v=fo(this);(function(o,e){let i=0,c=0;for(let f in o){if(o[f]!=e[f])return!0;i++}for(let f in e)c++;return i!=c})(v,this.nodeViews)&&(this.nodeViews=v,f=!0)}(A||i.handleDOMEvents!=this._props.handleDOMEvents)&&Wn(this),this.editable=ho(this),po(this);let t=jn(this),n=uo(this),l=c.plugins==e.plugins||c.doc.eq(e.doc)?e.scrollToSelection>c.scrollToSelection?"to selection":"preserve":"reset",u=f||!this.docView.matchesNode(e.doc,n,t);(u||!e.selection.eq(c.selection))&&(m=!0);let _="preserve"==l&&m&&null==this.dom.style.overflowAnchor&&function(o){let c,f,e=o.dom.getBoundingClientRect(),i=Math.max(0,e.top);for(let m=(e.left+e.right)/2,A=i+1;A<Math.min(innerHeight,e.bottom);A+=5){let t=o.root.elementFromPoint(m,A);if(!t||t==o.dom||!o.dom.contains(t))continue;let n=t.getBoundingClientRect();if(n.top>=i-20){c=t,f=n.top;break}}return{refDOM:c,refTop:f,stack:le(o.dom)}}(this);if(m){this.domObserver.stop();let v=u&&(yt||Ut)&&!this.composing&&!c.selection.empty&&!e.selection.empty&&function(o,e){let i=Math.min(o.$anchor.sharedDepth(o.head),e.$anchor.sharedDepth(e.head));return o.$anchor.start(i)!=e.$anchor.start(i)}(c.selection,e.selection);if(u){let M=Ut?this.trackWrites=this.domSelectionRange().focusNode:null;(f||!this.docView.update(e.doc,n,t,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=s(e.doc,n,t,this.dom,this)),M&&!this.trackWrites&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(o){let e=o.docView.domFromPos(o.state.selection.anchor,0),i=o.domSelectionRange();return Y(e.node,e.offset,i.anchorNode,i.anchorOffset)}(this))?Jt(this,v):(lt(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(c),"reset"==l?this.dom.scrollTop=0:"to selection"==l?this.scrollToSelection():_&&function({refDOM:o,refTop:e,stack:i}){let c=o?o.getBoundingClientRect().top:0;De(i,0==c?0:c-e)}(_)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",i=>i(this)))if(this.state.selection instanceof E.qv){let i=this.docView.domAfterPos(this.state.selection.from);1==i.nodeType&&Kt(this,i.getBoundingClientRect(),e)}else Kt(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let i=0;i<this.pluginViews.length;i++){let c=this.pluginViews[i];c.update&&c.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let i=0;i<this.directPlugins.length;i++){let c=this.directPlugins[i];c.spec.view&&this.pluginViews.push(c.spec.view(this))}for(let i=0;i<this.state.plugins.length;i++){let c=this.state.plugins[i];c.spec.view&&this.pluginViews.push(c.spec.view(this))}}}someProp(e,i){let f,c=this._props&&this._props[e];if(null!=c&&(f=i?i(c):c))return f;for(let A=0;A<this.directPlugins.length;A++){let t=this.directPlugins[A].props[e];if(null!=t&&(f=i?i(t):t))return f}let m=this.state.plugins;if(m)for(let A=0;A<m.length;A++){let t=m[A].props[e];if(null!=t&&(f=i?i(t):t))return f}}hasFocus(){if(yt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(o){if(o.setActive)return o.setActive();if(Te)return o.focus(Te);let e=le(o);o.focus(null==Te?{get preventScroll(){return Te={preventScroll:!0},!0}}:void 0),Te||(Te=!1,De(e,0))}(this.dom),Jt(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let i=this.dom.parentNode;i;i=i.parentNode)if(9==i.nodeType||11==i.nodeType&&i.host)return i.getSelection||(Object.getPrototypeOf(i).getSelection=()=>i.ownerDocument.getSelection()),this._root=i;return e||document}posAtCoords(e){return Fe(this,e)}coordsAtPos(e,i=1){return Ie(this,e,i)}domAtPos(e,i=0){return this.docView.domFromPos(e,i)}nodeDOM(e){let i=this.docView.descAt(e);return i?i.nodeDOM:null}posAtDOM(e,i,c=-1){let f=this.docView.posFromDOM(e,i,c);if(null==f)throw new RangeError("DOM position not inside the editor");return f}endOfTextblock(e,i){return function(o,e,i){return we==e&&Ce==i?Oe:(we=e,Ce=i,Oe="up"==i||"down"==i?function(o,e,i){let c=e.selection,f="up"==i?c.$from:c.$to;return xe(o,e,()=>{let{node:m}=o.docView.domFromPos(f.pos,"up"==i?-1:1);for(;;){let t=o.docView.nearestDesc(m,!0);if(!t)break;if(t.node.isBlock){m=t.contentDOM||t.dom;break}m=t.dom.parentNode}let A=Ie(o,f.pos,1);for(let t=m.firstChild;t;t=t.nextSibling){let n;if(1==t.nodeType)n=t.getClientRects();else{if(3!=t.nodeType)continue;n=F(t,0,t.nodeValue.length).getClientRects()}for(let l=0;l<n.length;l++){let u=n[l];if(u.bottom>u.top+1&&("up"==i?A.top-u.top>2*(u.bottom-A.top):u.bottom-A.bottom>2*(A.bottom-u.top)))return!1}}return!0})}(o,e,i):function(o,e,i){let{$head:c}=e.selection;if(!c.parent.isTextblock)return!1;let f=c.parentOffset,m=!f,A=f==c.parent.content.size,t=o.domSelection();return Ge.test(c.parent.textContent)&&t.modify?xe(o,e,()=>{let{focusNode:n,focusOffset:l,anchorNode:u,anchorOffset:_}=o.domSelectionRange(),v=t.caretBidiLevel;t.modify("move",i,"character");let M=c.depth?o.docView.domAfterPos(c.before()):o.dom,{focusNode:I,focusOffset:K}=o.domSelectionRange(),tt=I&&!M.contains(1==I.nodeType?I:I.parentNode)||n==I&&l==K;try{t.collapse(u,_),n&&(n!=u||l!=_)&&t.extend&&t.extend(n,l)}catch(et){}return null!=v&&(t.caretBidiLevel=v),tt}):"left"==i||"backward"==i?m:A}(o,e,i))}(this,i||this.state,e)}pasteHTML(e,i){return On(this,"",e,!1,i||new ClipboardEvent("paste"))}pasteText(e,i){return On(this,e,null,!0,i||new ClipboardEvent("paste"))}destroy(){!this.docView||(function(o){o.domObserver.stop();for(let e in o.input.eventHandlers)o.dom.removeEventListener(e,o.input.eventHandlers[e]);clearTimeout(o.input.composingTimeout),clearTimeout(o.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],jn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(o,e){!Mn(o,e)&&ze[e.type]&&(o.editable||!(e.type in tn))&&ze[e.type](o,e)}(this,e)}dispatch(e){let i=this._props.dispatchTransaction;i?i.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return qt&&11===this.root.nodeType&&function(o){let e=o.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom?function(o){let e;function i(n){n.preventDefault(),n.stopImmediatePropagation(),e=n.getTargetRanges()[0]}o.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),o.dom.removeEventListener("beforeinput",i,!0);let c=e.startContainer,f=e.startOffset,m=e.endContainer,A=e.endOffset,t=o.domAtPos(o.state.selection.anchor);return Y(t.node,t.offset,m,A)&&([c,f,m,A]=[m,A,c,f]),{anchorNode:c,anchorOffset:f,focusNode:m,focusOffset:A}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function uo(o){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(o.editable),e.translate="no",o.someProp("attributes",i=>{if("function"==typeof i&&(i=i(o.state)),i)for(let c in i)"class"==c&&(e.class+=" "+i[c]),"style"==c?e.style=(e.style?e.style+";":"")+i[c]:!e[c]&&"contenteditable"!=c&&"nodeName"!=c&&(e[c]=String(i[c]))}),[en.node(0,o.state.doc.content.size,e)]}function po(o){if(o.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),o.cursorWrapper={dom:e,deco:en.widget(o.state.selection.head,e,{raw:!0,marks:o.markCursor})}}else o.cursorWrapper=null}function ho(o){return!o.someProp("editable",e=>!1===e(o.state))}function fo(o){let e=Object.create(null);function i(c){for(let f in c)Object.prototype.hasOwnProperty.call(e,f)||(e[f]=c[f])}return o.someProp("nodeViews",i),o.someProp("markViews",i),e}function zn(o){if(o.spec.state||o.spec.filterTransaction||o.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}}}]);