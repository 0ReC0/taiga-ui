(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[5528],{5528:(e,t,o)=>{o.r(t),o.d(t,{ExampleTuiEditorUploadFilesModule:()=>L});var i=o(12057),n=o(24751),r=o(33982),u=o(96292),l=o(48014),s=o(68807),a=o(3497),d=o(74788),c=o(43560),p=o(66596),h=o(33772),f=o(35758),T=o(68939);function m(e){return t=>(e.loading$.next(!0),(0,f.D)(t.map((t=>e.upload(t)))).pipe((0,T.x)((()=>e.loading$.next(!1)))))}var v=o(64762),g=o(26215),_=o(94402),E=o(88002),Z=o(53585);let w=(()=>{class e{constructor(){this.loading$=new g.X(!1)}upload(e){const{host:t,expires:o,autoDelete:i}=Z.environment.fileIO,n=new FormData;return n.append("file",e,e.name),n.append("expires",o),n.append("autoDelete",i),(0,_.D)(fetch(t,{method:"POST",body:n}).then((e=>(0,v.mG)(this,void 0,void 0,(function*(){return e.json()}))))).pipe((0,E.U)((e=>({name:e.name,link:e.link}))))}}return e.ɵfac=function(t){return new(t||e)},e.ɵprov=d.Yz7({token:e,factory:e.ɵfac,providedIn:"root"}),e})();var A=o(23184),k=o(69303),x=o(20179);let y=(()=>{class e{constructor(e){this.fileIoService=e,this.builtInTools=[l.TuiEditorTool.Undo,l.TuiEditorTool.Link,l.TuiEditorTool.Attach],this.control=new n.NI("")}attach(e){e.forEach((e=>{var t,o;return null===(o=null===(t=this.wysiwyg)||void 0===t?void 0:t.editor)||void 0===o?void 0:o.setFileLink(e)}))}}return e.ɵfac=function(t){return new(t||e)(d.Y36(w))},e.ɵcmp=d.Xpm({type:e,selectors:[["tui-editor-upload-files-example-1"]],viewQuery:function(e,t){if(1&e&&d.Gf(l.TuiEditorComponent,5),2&e){let e;d.iGM(e=d.CRH())&&(t.wysiwyg=e.first)}},features:[d._Bn([{provide:l.TUI_EDITOR_EXTENSIONS,useValue:[Promise.resolve().then(o.bind(o,2823)).then((({StarterKit:e})=>e)),Promise.resolve().then(o.bind(o,84402)).then((({TextStyle:e})=>e)),Promise.resolve().then(o.bind(o,82091)).then((({TuiLink:e})=>e)),o.e(54058).then(o.bind(o,54058)).then((({TuiJumpAnchor:e})=>e)),Promise.resolve().then(o.bind(o,93763)).then((({TuiFileLink:e})=>e))]},{provide:l.TUI_ATTACH_FILES_LOADER,deps:[w],useFactory:m}])],decls:10,vars:7,consts:[[3,"showLoader"],[1,"editor",3,"formControl","tools","fileAttached"],[3,"content"]],template:function(e,t){1&e&&(d.TgZ(0,"tui-loader",0),d.ALo(1,"async"),d.TgZ(2,"tui-editor",1),d.NdJ("fileAttached",(function(e){return t.attach(e)})),d.qZA(),d.qZA(),d.TgZ(3,"h4"),d._uU(4,"HTML:"),d.qZA(),d._UZ(5,"tui-editor-socket",2),d.TgZ(6,"h4"),d._uU(7,"Text:"),d.qZA(),d.TgZ(8,"p"),d._uU(9),d.qZA()),2&e&&(d.Q6J("showLoader",!!d.lcZ(1,5,t.fileIoService.loading$)),d.xp6(2),d.Q6J("formControl",t.control)("tools",t.builtInTools),d.xp6(3),d.Q6J("content",t.control.value||""),d.xp6(4),d.Oqu(t.control.value))},directives:[A.k,k.a,n.JJ,n.oH,x.D],pipes:[i.Ov],styles:[".editor[_ngcontent-%COMP%]     .tui-editor-socket .ProseMirror{min-height:10rem}"],changeDetection:0}),e})(),U=(()=>{class e{constructor(){this.example1={TypeScript:o.e(18692).then(o.t.bind(o,18692,17)),HTML:o.e(70672).then(o.t.bind(o,70672,17)),LESS:o.e(22540).then(o.t.bind(o,22540,17)),"./filesio.service.ts":o.e(14614).then(o.t.bind(o,14614,17)),"./file-loader.ts":o.e(30954).then(o.t.bind(o,30954,17))}}}return e.ɵfac=function(t){return new(t||e)},e.ɵcmp=d.Xpm({type:e,selectors:[["editor-upload-files"]],features:[d._Bn([{provide:l.TUI_EDITOR_EXTENSIONS,useValue:l.defaultEditorExtensions}])],decls:11,vars:1,consts:[["header","Editor","package","ADDON-EDITOR","type","components"],["tuiLink","","href","https://www.tiptap.dev/"],["tuiLink","","routerLink","/icon-set","fragment","sanitizer"],["id","upload-file","heading","Upload files","description","100 uploads per day, 2GB file size limit, files auto-deleted after 1 download",3,"content"]],template:function(e,t){1&e&&(d.TgZ(0,"tui-doc-page",0),d.TgZ(1,"p"),d._uU(2," Rich Text Editor based on "),d.TgZ(3,"a",1),d._uU(4," TipTap Editor "),d.qZA(),d._uU(5," for using with Angular forms. For safety reasons use a "),d.TgZ(6,"a",2),d._uU(7," sanitizer "),d.qZA(),d._uU(8," with this component. "),d.qZA(),d.TgZ(9,"tui-doc-example",3),d._UZ(10,"tui-editor-upload-files-example-1"),d.qZA(),d.qZA()),2&e&&(d.xp6(9),d.Q6J("content",t.example1))},directives:[c.q,p.V,r.yS,h.f,y],encapsulation:2,changeDetection:0}),e})(),L=(()=>{class e{}return e.ɵfac=function(t){return new(t||e)},e.ɵmod=d.oAB({type:e}),e.ɵinj=d.cJS({imports:[[i.ez,s.TuiActiveZoneModule,a.TuiSvgModule,a.TuiLinkModule,a.TuiHostedDropdownModule,a.TuiButtonModule,u.fV,n.u5,n.UX,l.TuiEditorModule,a.TuiLoaderModule,l.TuiEditorSocketModule,r.Bz.forChild((0,u.Ve)(U))]]}),e})()}}]);