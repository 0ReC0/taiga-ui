"use strict";var Xo=Object.defineProperty,qo=Object.defineProperties,ti=Object.getOwnPropertyDescriptors,_o=Object.getOwnPropertySymbols,Yo=Object.prototype.hasOwnProperty,jo=Object.prototype.propertyIsEnumerable,Vo=(ee,yt,a)=>yt in ee?Xo(ee,yt,{enumerable:!0,configurable:!0,writable:!0,value:a}):ee[yt]=a,ie=(ee,yt)=>{for(var a in yt||(yt={}))Yo.call(yt,a)&&Vo(ee,a,yt[a]);if(_o)for(var a of _o(yt))jo.call(yt,a)&&Vo(ee,a,yt[a]);return ee},ye=(ee,yt)=>qo(ee,ti(yt)),Qo=(ee,yt)=>{var a={};for(var T in ee)Yo.call(ee,T)&&yt.indexOf(T)<0&&(a[T]=ee[T]);if(null!=ee&&_o)for(var T of _o(ee))yt.indexOf(T)<0&&jo.call(ee,T)&&(a[T]=ee[T]);return a};(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[48014],{77361:(ee,yt,a)=>{a.d(yt,{_:()=>E});var T=a(79765),r=a(74788);let E=(()=>{class b{constructor(){this.stateChange$=new T.xQ,this.valueChange$=new T.xQ}}return b.\u0275fac=function(Y){return new(Y||b)},b.\u0275dir=r.lG2({type:b}),b})()},97019:(ee,yt,a)=>{a.d(yt,{h:()=>Ht});var T=a(64762),r=a(74788),E=a(68339),b=a(50170),p=a(1414),Y=a(10200),R=a(33250),X=a(68874),j=a(24751),Ct=a(52219),dt=a(12057),tt=a(65009),vt=a(10383),gt=a(20933),Tt=a(35065),Ut=a(63060),At=a(62733),_t=a(48214),ut=a(11189),ht=a(91030);function Z(xt,Wt){if(1&xt&&(r.TgZ(0,"button",7),r._uU(1),r.qZA()),2&xt){const Yt=Wt.$implicit;r.Q6J("value",Yt),r.xp6(1),r.hij(" ",Yt," ")}}function Ot(xt,Wt){if(1&xt&&(r.TgZ(0,"tui-data-list",5),r.YNc(1,Z,2,2,"button",6),r.qZA()),2&xt){const Yt=r.oxw();r.xp6(1),r.Q6J("ngForOf",Yt.modes)}}function bt(xt,Wt){if(1&xt){const Yt=r.EpF();r.TgZ(0,"tui-primitive-textfield",8),r.NdJ("valueChange",function(ft){return r.CHM(Yt),r.oxw().onHexChange(ft)}),r._UZ(1,"input",9),r.qZA()}if(2&xt){const Yt=r.oxw();r.Q6J("textMask",Yt.hexMask)("tuiTextfieldLabelOutside",!0)("value",Yt.hex)}}function Nt(xt,Wt){if(1&xt){const Yt=r.EpF();r.TgZ(0,"tui-input-count",10),r.NdJ("ngModelChange",function(ft){r.CHM(Yt);const k=r.oxw();return k.onRgbChange(ft,k.color[1],k.color[2],k.color[3])}),r.qZA(),r.TgZ(1,"tui-input-count",10),r.NdJ("ngModelChange",function(ft){r.CHM(Yt);const k=r.oxw();return k.onRgbChange(k.color[0],ft,k.color[2],k.color[3])}),r.qZA(),r.TgZ(2,"tui-input-count",10),r.NdJ("ngModelChange",function(ft){r.CHM(Yt);const k=r.oxw();return k.onRgbChange(k.color[0],k.color[1],ft,k.color[3])}),r.qZA()}if(2&xt){const Yt=r.oxw();r.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Yt.color[0]),r.xp6(1),r.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Yt.color[1]),r.xp6(1),r.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Yt.color[2])}}class Ht{constructor(){this.color=[0,0,0,1],this.colorChange=new r.vpe,this.hexMask={mask:({length:Wt})=>Array.from({length:Wt},()=>/\d|[a-f]|[A-F]/),guide:!1},this.modes=["HEX","RGB"],this.mode=this.modes[0]}get isHex(){return this.mode===this.modes[0]}get hex(){return(0,E.tuiRgbToHex)(this.color[0],this.color[1],this.color[2]).replace("#","")}get opacity(){return Math.round(100*this.color[3])}onHexChange(Wt){if(6!==Wt.length)return;const Yt=(0,E.tuiHexToRgb)(Wt);this.updateColor([Yt[0],Yt[1],Yt[2],this.color[3]])}onRgbChange(...Wt){this.updateColor(Wt)}updateColor(Wt){this.color=Wt,this.colorChange.emit(Wt)}}Ht.\u0275fac=function(Wt){return new(Wt||Ht)},Ht.\u0275cmp=r.Xpm({type:Ht,selectors:[["tui-color-edit"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:6,vars:8,consts:[["tuiTextfieldSize","m","tuiDropdownAlign","left","tuiDropdownLimitWidth","min",1,"t-select","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","ngModel","ngModelChange"],["size","s",4,"tuiDataList"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange",4,"ngIf","ngIfElse"],["rgb",""],["postfix","%","tuiTextfieldSize","m",1,"t-opacity","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"],["size","s"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange"],["tuiTextfield","","maxlength","6"],["tuiTextfieldSize","m",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"]],template:function(Wt,Yt){if(1&Wt&&(r.TgZ(0,"tui-select",0),r.NdJ("ngModelChange",function(ft){return Yt.mode=ft}),r.YNc(1,Ot,2,1,"tui-data-list",1),r.qZA(),r.YNc(2,bt,2,3,"tui-primitive-textfield",2),r.YNc(3,Nt,3,12,"ng-template",null,3,r.W1O),r.TgZ(5,"tui-input-count",4),r.NdJ("ngModelChange",function(ft){return Yt.onRgbChange(Yt.color[0],Yt.color[1],Yt.color[2],ft/100)}),r.qZA()),2&Wt){const qt=r.MAs(4);r.Q6J("tuiTextfieldLabelOutside",!0)("ngModel",Yt.mode),r.xp6(2),r.Q6J("ngIf",Yt.isHex)("ngIfElse",qt),r.xp6(3),r.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",100)("ngModel",Yt.opacity)}},directives:[b.u,p.O,Y.s,R.Ek,X.x,j.JJ,j.On,Ct.g,dt.O5,tt.E,vt.a,gt.q,dt.sg,Tt.v,Ut.y,At.B,_t.n,ut.h,ht.M],styles:["[_nghost-%COMP%]{display:flex}.t-select[_ngcontent-%COMP%]{width:4.875rem}.t-opacity[_ngcontent-%COMP%]{width:4.275rem}"],changeDetection:0}),(0,T.gn)([(0,E.tuiDefaultProp)()],Ht.prototype,"color",void 0)},49289:(ee,yt,a)=>{a.d(yt,{$:()=>R});var T=a(64762),r=a(74788),E=a(91211),b=a(68339),p=a(71424),Y=a(65720);class R{constructor(j){this.sanitizer=j,this.colorChange=new r.vpe,this.point=[0,1],this.hue=0,this.opacity=1}set color(j){if(this.currentColor.every((vt,gt)=>vt===j[gt])&&j[3]===this.opacity)return;const[Ct,dt,tt]=(0,b.tuiRgbToHsv)(j[0],j[1],j[2]);this.opacity=j[3],this.hue=Ct/360,this.point=[dt,1-tt/255]}get currentColor(){return this.getCurrentColor(this.hue,this.point)}get base(){return`rgb(${(0,b.tuiHsvToRgb)(360*this.hue,1,255)})`}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(`linear-gradient(to right, rgba(${this.currentColor.join(",")}, 0), rgb(${this.currentColor.join(",")}))`)}onPointChange(j){this.point=j,this.updateColor()}onHueChange(j){this.hue=j,this.updateColor()}onOpacityChange(j){this.opacity=(0,b.tuiRound)(j,2),this.updateColor()}getCurrentColor(j,Ct){return(0,b.tuiHsvToRgb)(360*j,Ct[0],255*(1-Ct[1]))}updateColor(){this.colorChange.emit([...this.currentColor,this.opacity])}}R.\u0275fac=function(j){return new(j||R)(r.Y36(E.H7))},R.\u0275cmp=r.Xpm({type:R,selectors:[["tui-color-picker"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:5,vars:7,consts:[[1,"t-flat",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_hue"],[1,"t-hue",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_opacity"],[1,"t-opacity",3,"value","valueChange"]],template:function(j,Ct){1&j&&(r.TgZ(0,"tui-flat-picker",0),r.NdJ("valueChange",function(tt){return Ct.onPointChange(tt)}),r.qZA(),r.TgZ(1,"div",1),r.TgZ(2,"tui-linear-picker",2),r.NdJ("valueChange",function(tt){return Ct.onHueChange(tt)}),r.qZA(),r.qZA(),r.TgZ(3,"div",3),r.TgZ(4,"tui-linear-picker",4),r.NdJ("valueChange",function(tt){return Ct.onOpacityChange(tt)}),r.qZA(),r.qZA()),2&j&&(r.Udp("background-color",Ct.base),r.Q6J("value",Ct.point),r.xp6(2),r.Q6J("value",Ct.hue),r.xp6(1),r.Udp("background",Ct.gradient),r.xp6(1),r.Q6J("value",Ct.opacity))},directives:[p.J,Y.P],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block}.t-flat[_ngcontent-%COMP%]{height:14rem;background:linear-gradient(rgba(0,0,0,0),#000000),linear-gradient(to right,#ffffff,rgba(255,255,255,0));margin-bottom:.25rem;overflow:hidden}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1rem 1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper_hue[_ngcontent-%COMP%]{background:#ff0000}.t-wrapper_opacity[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hue[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff0000,#ffff00,#00ff00,#00ffff,#0000ff,#ff00ff,#ff0000);border-radius:inherit;margin:0 .5rem}.t-opacity[_ngcontent-%COMP%]{border-radius:inherit;margin:0 .5rem}'],changeDetection:0}),(0,T.gn)([(0,b.tuiDefaultProp)()],R.prototype,"color",null),(0,T.gn)([b.tuiPure],R.prototype,"getCurrentColor",null)},23999:(ee,yt,a)=>{a.d(yt,{s:()=>at});var T=a(64762),r=a(74788),E=a(91211),b=a(14309),p=a(27863),Y=a(68339),R=a(62939),X=a(76189),j=a(12057),Ct=a(49289),dt=a(34880),tt=a(20933),vt=a(35065),gt=a(49472),Tt=a(67446),Ut=a(29070),At=a(54255),_t=a(15491),ut=a(219),ht=a(97019),Z=a(39607),Ot=a(5451);function bt(J,V){if(1&J&&r._UZ(0,"tui-svg",9),2&J){r.oxw();const rt=r.MAs(1);r.ekj("t-arrow_rotated",rt.open)}}function Nt(J,V){1&J&&r._UZ(0,"tui-svg",14)}function Ht(J,V){if(1&J){const rt=r.EpF();r.TgZ(0,"button",12),r.NdJ("keydown.enter.prevent",function(){const ne=r.CHM(rt).$implicit,he=r.oxw(2),Qt=r.MAs(1);return he.onModeSelect(ne,Qt)})("keydown.space.prevent",function(){const ne=r.CHM(rt).$implicit,he=r.oxw(2),Qt=r.MAs(1);return he.onModeSelect(ne,Qt)})("click",function(){const ne=r.CHM(rt).$implicit,he=r.oxw(2),Qt=r.MAs(1);return he.onModeSelect(ne,Qt)}),r._uU(1),r.YNc(2,Nt,1,0,"tui-svg",13),r.qZA()}if(2&J){const rt=V.$implicit,Ft=r.oxw(2);r.uIk("aria-checked",Ft.isModeActive(rt)),r.xp6(1),r.hij(" ",rt," "),r.xp6(1),r.Q6J("ngIf",Ft.isModeActive(rt))}}function xt(J,V){if(1&J&&(r.TgZ(0,"tui-data-list",10),r.YNc(1,Ht,3,3,"button",11),r.qZA()),2&J){const rt=r.oxw();r.xp6(1),r.Q6J("ngForOf",rt.modes)}}function Wt(J,V){if(1&J){const rt=r.EpF();r.TgZ(0,"button",20),r.NdJ("click",function(){const ne=r.CHM(rt).$implicit;return r.oxw(2).onDirectionChange(ne)}),r.qZA()}if(2&J){const rt=V.$implicit,Ft=r.oxw(2);r.ekj("t-direction_active",Ft.isDirectionActive(rt)),r.Q6J("icon",Ft.getIcon(rt))("tuiHint",rt)("tuiHintDescribe","")}}function Yt(J,V){if(1&J){const rt=r.EpF();r.ynx(0),r._UZ(1,"hr",15),r.TgZ(2,"div",16),r.TgZ(3,"tui-linear-multi-picker",17),r.NdJ("valueChange",function(Vt){return r.CHM(rt),r.oxw().onStopsChange(Vt)})("indexChange",function(Vt){return r.CHM(rt),r.oxw().onIndexChange(Vt)}),r.qZA(),r.qZA(),r.TgZ(4,"div",18),r.YNc(5,Wt,1,5,"button",19),r.qZA(),r.BQk()}if(2&J){const rt=r.oxw();r.xp6(2),r.Udp("background",rt.gradient),r.xp6(1),r.Q6J("value",rt.stopsKeys),r.xp6(2),r.Q6J("ngForOf",rt.buttons)}}function qt(J,V){if(1&J){const rt=r.EpF();r.TgZ(0,"tui-color-edit",21),r.NdJ("colorChange",function(Vt){return r.CHM(rt),r.oxw().onColorChange(Vt)}),r.qZA()}if(2&J){const rt=r.oxw();r.Q6J("color",rt.color)}}function ft(J,V){if(1&J){const rt=r.EpF();r.TgZ(0,"tui-palette",22),r.NdJ("selectedColor",function(Vt){return r.CHM(rt),r.oxw().onPalettePick(Vt)}),r.qZA()}if(2&J){const rt=r.oxw();r.Q6J("colors",rt.palette)}}const k=[0,0,0,0],st=[[0,[0,0,0,1]],[1,[255,255,255,1]]],ot={"to top right":"tuiIconArrowUpRight","to right":"tuiIconArrowRight","to bottom right":"tuiIconArrowDownRight","to bottom":"tuiIconArrowDown","to bottom left":"tuiIconArrowDownLeft","to left":"tuiIconArrowLeft","to top left":"tuiIconArrowUpLeft","to top":"tuiIconArrowUp"};class at{constructor(V,rt){this.sanitizer=V,this.modes=rt,this.stops=new Map(st),this.currentStop=0,this.direction="to bottom",this.colors=new Map,this.colorChange=new r.vpe,this.color=[0,0,0,1],this.currentMode=this.modes[0],this.buttons=["to top right","to right","to bottom right","to bottom","to bottom left","to left","to top left","to top"]}set colorSetter(V){this.parse(V)}get palette(){return this.filterPalette(this.colors,this.isGradient)}get stopsKeys(){return this.getStopsKeys(this.stops)}get currentColor(){return this.isGradient?this.getStop(this.currentStop):this.color}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(this.getGradient("to right"))}get isGradient(){return this.currentMode===this.modes[1]}getIcon(V){return ot[V]}isModeActive(V){return this.currentMode===V}isDirectionActive(V){return this.direction===V}onPalettePick(V){this.updateColor(V)}onDirectionChange(V){this.direction=V,this.updateColor(this.getGradient(V))}onModeSelect(V,rt){this.currentMode=V,rt.open=!1,this.updateColor(V===this.modes[0]?`rgba(${this.color.join(", ")})`:this.getGradient(this.direction))}onIndexChange(V){this.currentStop=this.stopsKeys[V]}onColorChange(V){this.isGradient?(this.stops.set(this.currentStop,V),this.updateColor(this.getGradient(this.direction))):this.updateColor(`rgba(${V.join(", ")})`)}onStopsChange(V){const rt=this.stopsKeys.find(Vt=>!V.includes(Vt)),Ft=V.find(Vt=>!this.stopsKeys.includes(Vt));void 0===rt&&void 0!==Ft&&this.addStop(Ft),void 0!==rt&&void 0===Ft&&this.removeStop(rt),void 0!==rt&&void 0!==Ft&&this.replaceStop(rt,Ft),this.updateColor(this.getGradient(this.direction))}getStopsKeys(V){return Array.from(V.keys())}filterPalette(V,rt){const Ft=new Map(V);return Ft.forEach((Vt,ne)=>{(Vt.startsWith("linear-gradient")&&!rt||!Vt.startsWith("linear-gradient")&&rt)&&Ft.delete(ne)}),Ft}updateColor(V){this.colorChange.emit(V)}getGradient(V){return`linear-gradient(${V}, ${[...this.stopsKeys].sort().map(rt=>`rgba(${this.getStop(rt).join(", ")}) ${100*rt}%`).join(", ")})`}getStop(V){return this.stops.get(V)||k}addStop(V){const rt=this.stopsKeys.reduce((Ft,Vt)=>Math.abs(Vt-V)<Math.abs(Ft-V)?Vt:Ft,this.stopsKeys[0]);this.stops.set(V,this.getStop(rt)),this.stops=new Map(this.stops),this.currentStop=V}removeStop(V){this.stops.delete(V),this.stops=new Map(this.stops),this.currentStop=this.stopsKeys[0]}replaceStop(V,rt){const Ft=this.getStop(V);this.currentStop=rt,this.stops=new Map(this.stopsKeys.map(Vt=>Vt===V?[rt,Ft]:[Vt,this.getStop(Vt)]))}parse(V){V.startsWith("linear-gradient")?this.parseGradient(V):this.parseColor(V)}parseGradient(V){if(V===this.getGradient(this.direction))return;const rt=(0,p._N)((0,p.U5)(V));this.currentMode=this.modes[1],this.direction=rt.side,this.currentStop=0,this.stops=new Map(rt.stops.length?rt.stops.map(({color:Ft,position:Vt})=>[parseFloat(Vt)/100,(0,Y.tuiParseColor)(Ft)]):st)}parseColor(V){this.currentMode=this.modes[0],this.currentStop=0,this.color=(0,Y.tuiParseColor)(V)}}at.\u0275fac=function(V){return new(V||at)(r.Y36(E.H7),r.Y36(b.dj))},at.\u0275cmp=r.Xpm({type:at,selectors:[["tui-color-selector"]],inputs:{colors:"colors",colorSetter:["color","colorSetter"]},outputs:{colorChange:"colorChange"},decls:12,vars:7,consts:[[1,"t-select",3,"content"],["dropdown",""],["tuiButton","","appearance","","size","s","type","button",3,"iconRight"],["arrow",""],["menu",""],[4,"ngIf"],[3,"color","colorChange"],["tuiGroup","","class","t-edit",3,"color","colorChange",4,"ngIf"],["class","t-palette",3,"colors","selectedColor",4,"ngIf"],["src","tuiIconChevronDown",1,"t-arrow"],["role","menu","size","s",1,"t-menu"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click"],["src","tuiIconCheck","class","t-checkmark",4,"ngIf"],["src","tuiIconCheck",1,"t-checkmark"],[1,"t-hr"],[1,"t-wrapper"],[1,"t-gradient",3,"value","valueChange","indexChange"],[1,"t-buttons"],["tuiIconButton","","type","button","size","xs","appearance","","class","t-direction",3,"t-direction_active","icon","tuiHint","tuiHintDescribe","click",4,"ngFor","ngForOf"],["tuiIconButton","","type","button","size","xs","appearance","",1,"t-direction",3,"icon","tuiHint","tuiHintDescribe","click"],["tuiGroup","",1,"t-edit",3,"color","colorChange"],[1,"t-palette",3,"colors","selectedColor"]],template:function(V,rt){if(1&V&&(r.TgZ(0,"tui-hosted-dropdown",0,1),r.TgZ(2,"button",2),r._uU(3),r.qZA(),r.YNc(4,bt,1,2,"ng-template",null,3,r.W1O),r.YNc(6,xt,2,1,"ng-template",null,4,r.W1O),r.qZA(),r.YNc(8,Yt,6,4,"ng-container",5),r.TgZ(9,"tui-color-picker",6),r.NdJ("colorChange",function(Vt){return rt.onColorChange(Vt)}),r.qZA(),r.YNc(10,qt,1,1,"tui-color-edit",7),r.YNc(11,ft,1,1,"tui-palette",8)),2&V){const Ft=r.MAs(5),Vt=r.MAs(7);r.Q6J("content",Vt),r.xp6(2),r.Q6J("iconRight",Ft),r.xp6(1),r.hij(" ",rt.currentMode," "),r.xp6(5),r.Q6J("ngIf",rt.isGradient),r.xp6(1),r.Q6J("color",rt.currentColor),r.xp6(1),r.Q6J("ngIf",!rt.isGradient),r.xp6(1),r.Q6J("ngIf",rt.palette.size)}},directives:[R.o,X.v,j.O5,Ct.$,dt.P,tt.q,j.sg,vt.v,gt.e,Tt.D,Ut.x,At.t,_t.D,ut.$,ht.h,Z.g,Ot.R],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block;width:22.6rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hr[_ngcontent-%COMP%]{height:1px;margin:0 0 0 -1px;border:none;background:var(--tui-base-03)}.t-gradient[_ngcontent-%COMP%]{margin:0 .5rem;border-radius:inherit}.t-select[_ngcontent-%COMP%]{margin:.75rem .5rem}.t-arrow[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-arrow_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.t-menu[_ngcontent-%COMP%]{width:11.25rem}.t-checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}.t-buttons[_ngcontent-%COMP%]{display:flex;padding:0 .75rem 1.25rem}.t-direction[_ngcontent-%COMP%]{color:var(--tui-text-02);margin:0 .375rem}.t-direction[_ngcontent-%COMP%]:hover, .t-direction_active[_ngcontent-%COMP%]{color:var(--tui-text-01);background:var(--tui-secondary-hover)}.t-edit[_ngcontent-%COMP%]{margin:1.25rem}.t-palette[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:inset 0 1px var(--tui-base-03)}'],changeDetection:0}),(0,T.gn)([(0,Y.tuiDefaultProp)()],at.prototype,"colors",void 0),(0,T.gn)([(0,Y.tuiRequiredSetter)()],at.prototype,"colorSetter",null),(0,T.gn)([Y.tuiPure],at.prototype,"getStopsKeys",null),(0,T.gn)([Y.tuiPure],at.prototype,"filterPalette",null)},71424:(ee,yt,a)=>{a.d(yt,{J:()=>p});var T=a(64762),r=a(74788),E=a(62141),b=a(68339);class p{constructor(R){this.value=[0,0],this.valueChange=new r.vpe,R.subscribe(X=>{this.value=X,this.valueChange.emit([X[0],X[1]])})}get left(){return 100*this.value[0]}get top(){return 100*this.value[1]}}p.\u0275fac=function(R){return new(R||p)(r.Y36(E.i))},p.\u0275cmp=r.Xpm({type:p,selectors:[["tui-flat-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[r._Bn([b.TuiDestroyService,E.i])],decls:1,vars:4,consts:[[1,"t-circle"]],template:function(R,X){1&R&&r._UZ(0,"div",0),2&R&&r.Udp("left",X.left,"%")("top",X.top,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:-.5rem 0 0 -.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,T.gn)([(0,b.tuiDefaultProp)()],p.prototype,"value",void 0)},27050:(ee,yt,a)=>{a.d(yt,{hR:()=>T.h,TD:()=>R,$v:()=>X.$,H9:()=>dt,sV:()=>tt.s,wl:()=>Ut,Jd:()=>At.J,ui:()=>j,es:()=>_t.e,GU:()=>gt,P:()=>ut.P,g7:()=>Ct,Rh:()=>ht.R,VM:()=>Tt});var T=a(97019),r=a(12057),E=a(24751),b=a(76040),p=a(48611),Y=a(74788);let R=(()=>{class Z{}return Z.\u0275fac=function(bt){return new(bt||Z)},Z.\u0275mod=Y.oAB({type:Z}),Z.\u0275inj=Y.cJS({imports:[[r.ez,E.u5,p.TextMaskModule,p.TuiValueAccessorModule,p.TuiSelectModule,b.TuiPrimitiveTextfieldModule,b.TuiTextfieldControllerModule,b.TuiDropdownModule,p.TuiInputCountModule,b.TuiDataListModule]]}),Z})();var X=a(49289);let j=(()=>{class Z{}return Z.\u0275fac=function(bt){return new(bt||Z)},Z.\u0275mod=Y.oAB({type:Z}),Z.\u0275inj=Y.cJS({imports:[[r.ez]]}),Z})(),Ct=(()=>{class Z{}return Z.\u0275fac=function(bt){return new(bt||Z)},Z.\u0275mod=Y.oAB({type:Z}),Z.\u0275inj=Y.cJS({imports:[[r.ez]]}),Z})(),dt=(()=>{class Z{}return Z.\u0275fac=function(bt){return new(bt||Z)},Z.\u0275mod=Y.oAB({type:Z}),Z.\u0275inj=Y.cJS({imports:[[r.ez,j,Ct]]}),Z})();var tt=a(23999),vt=a(68339);let gt=(()=>{class Z{}return Z.\u0275fac=function(bt){return new(bt||Z)},Z.\u0275mod=Y.oAB({type:Z}),Z.\u0275inj=Y.cJS({imports:[[r.ez]]}),Z})(),Tt=(()=>{class Z{}return Z.\u0275fac=function(bt){return new(bt||Z)},Z.\u0275mod=Y.oAB({type:Z}),Z.\u0275inj=Y.cJS({imports:[[r.ez,b.TuiHintModule]]}),Z})(),Ut=(()=>{class Z{}return Z.\u0275fac=function(bt){return new(bt||Z)},Z.\u0275mod=Y.oAB({type:Z}),Z.\u0275inj=Y.cJS({imports:[[r.ez,b.TuiButtonModule,b.TuiHostedDropdownModule,dt,gt,b.TuiHintModule,b.TuiSvgModule,b.TuiDataListModule,vt.TuiActiveZoneModule,R,b.TuiGroupModule,Tt]]}),Z})();var At=a(71424),_t=a(49472),ut=a(65720),ht=a(5451)},49472:(ee,yt,a)=>{a.d(yt,{e:()=>R});var T=a(64762),r=a(74788),E=a(62141),b=a(68339),p=a(12057);function Y(X,j){if(1&X){const Ct=r.EpF();r.TgZ(0,"div",1),r.NdJ("mousedown",function(){const vt=r.CHM(Ct).index;return r.oxw().onMouseDown(vt)})("dblclick",function(){const vt=r.CHM(Ct).index;return r.oxw().onClick(vt)}),r.qZA()}2&X&&r.Udp("left",100*j.$implicit,"%")}class R{constructor(j){this.value=[0,1],this.valueChange=new r.vpe,this.indexChange=new r.vpe,this.index=NaN,j.subscribe(([Ct])=>{this.onPicker(Ct)})}onMouseUp(){this.index=NaN}onMouseDown(j){this.updateIndex(j)}onClick(j){this.value.length>2&&this.updateValue(this.value.filter((Ct,dt)=>dt!==j))}onPicker(j){Number.isNaN(this.index)&&(this.updateIndex(this.value.length),this.value=[...this.value,0]),!this.value.some((Ct,dt)=>Ct===j&&dt!==this.index)&&this.updateValue(this.value.map((Ct,dt)=>dt===this.index?j:Ct))}updateIndex(j){this.index=j,this.indexChange.emit(j)}updateValue(j){this.value=j,this.valueChange.emit(j)}}R.\u0275fac=function(j){return new(j||R)(r.Y36(E.i))},R.\u0275cmp=r.Xpm({type:R,selectors:[["tui-linear-multi-picker"]],hostBindings:function(j,Ct){1&j&&r.NdJ("mouseup",function(){return Ct.onMouseUp()},!1,r.evT)},inputs:{value:"value"},outputs:{valueChange:"valueChange",indexChange:"indexChange"},features:[r._Bn([b.TuiDestroyService,E.i])],decls:1,vars:1,consts:[["class","t-circle",3,"left","mousedown","dblclick",4,"ngFor","ngForOf"],[1,"t-circle",3,"mousedown","dblclick"]],template:function(j,Ct){1&j&&r.YNc(0,Y,1,2,"div",0),2&j&&r.Q6J("ngForOf",Ct.value)},directives:[p.sg],styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,T.gn)([(0,b.tuiDefaultProp)()],R.prototype,"value",void 0)},65720:(ee,yt,a)=>{a.d(yt,{P:()=>p});var T=a(64762),r=a(74788),E=a(62141),b=a(68339);class p{constructor(R){this.value=0,this.valueChange=new r.vpe,R.subscribe(([X])=>{this.value=X,this.valueChange.emit(X)})}get left(){return 100*this.value}}p.\u0275fac=function(R){return new(R||p)(r.Y36(E.i))},p.\u0275cmp=r.Xpm({type:p,selectors:[["tui-linear-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[r._Bn([b.TuiDestroyService,E.i])],decls:1,vars:2,consts:[[1,"t-circle"]],template:function(R,X){1&R&&r._UZ(0,"div",0),2&R&&r.Udp("left",X.left,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,T.gn)([(0,b.tuiDefaultProp)()],p.prototype,"value",void 0)},5451:(ee,yt,a)=>{a.d(yt,{R:()=>dt});var T=a(64762),r=a(74788),E=a(68339),b=a(12057),p=a(67446),Y=a(29070),R=a(54255),X=a(15491),j=a(219);function Ct(tt,vt){if(1&tt){const gt=r.EpF();r.TgZ(0,"button",1),r.NdJ("click",function(){const At=r.CHM(gt).$implicit;return r.oxw().selectedColor.emit(At.value)}),r.qZA()}if(2&tt){const gt=vt.$implicit;r.Udp("background",gt.value),r.Q6J("tuiHint",gt.key)("tuiHintDescribe",gt.key)("id",gt.key)}}class dt{constructor(){this.colors=new Map,this.selectedColor=new r.vpe,this.originalOrder=(vt,gt)=>0}}dt.\u0275fac=function(vt){return new(vt||dt)},dt.\u0275cmp=r.Xpm({type:dt,selectors:[["tui-palette"]],inputs:{colors:"colors"},outputs:{selectedColor:"selectedColor"},decls:2,vars:4,consts:[["type","button","class","t-button",3,"background","tuiHint","tuiHintDescribe","id","click",4,"ngFor","ngForOf"],["type","button",1,"t-button",3,"tuiHint","tuiHintDescribe","id","click"]],template:function(vt,gt){1&vt&&(r.YNc(0,Ct,1,5,"button",0),r.ALo(1,"keyvalue")),2&vt&&r.Q6J("ngForOf",r.xi3(1,1,gt.colors,gt.originalOrder))},directives:[b.sg,p.D,Y.x,R.t,X.D,j.$],pipes:[b.Nd],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;padding:.875rem}.t-button[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;width:1.5625rem;height:1.5625rem;box-sizing:border-box;margin:.375rem;border-radius:var(--tui-radius-m);border:1px solid rgba(0,0,0,.08)}"],changeDetection:0}),(0,T.gn)([(0,E.tuiDefaultProp)()],dt.prototype,"colors",void 0)},45050:(ee,yt,a)=>{a.d(yt,{l:()=>Yt});var T=a(64762),r=a(12057),E=a(74788),b=a(84614),p=a(14309),Y=a(68339),R=a(87623),X=a(20986),j=a(24751),Ct=a(34880),dt=a(76189),tt=a(66596),vt=a(3881),gt=a(22613),Tt=a(98266);function Ut(qt,ft){1&qt&&(E.ynx(0),E._uU(1,"Edit anchor"),E.BQk())}function At(qt,ft){1&qt&&(E.TgZ(0,"span"),E._uU(1,"Link to anchor"),E.qZA())}function _t(qt,ft){1&qt&&(E.TgZ(0,"span"),E._uU(1,"URL"),E.qZA())}function ut(qt,ft){if(1&qt&&(E.YNc(0,At,2,0,"span",1),E.YNc(1,_t,2,0,"ng-template",null,12,E.W1O)),2&qt){const k=E.MAs(2),st=E.oxw(2);E.Q6J("ngIf",st.prefixIsHashMode)("ngIfElse",k)}}function ht(qt,ft){if(1&qt&&(E.ynx(0),E._uU(1),E.BQk()),2&qt){const k=ft.ngIf,st=E.oxw(2);E.xp6(1),E.hij(" ",st.prefixIsHashMode?k.anchorExample:k.urlExample," ")}}function Z(qt,ft){if(1&qt){const k=E.EpF();E.ynx(0),E.TgZ(1,"label",4),E.TgZ(2,"div",5),E.YNc(3,Ut,2,0,"ng-container",1),E.YNc(4,ut,3,2,"ng-template",null,6,E.W1O),E.qZA(),E.TgZ(6,"div",7),E.TgZ(7,"div",8),E._uU(8),E.qZA(),E.TgZ(9,"tui-input-inline",9),E.NdJ("ngModelChange",function(ot){return E.CHM(k),E.oxw().url=ot})("input",function(ot){let J;return E.CHM(k),E.oxw().onChange(null==(J=ot.target)?null:J.value)})("keydown.prevent.enter",function(){return E.CHM(k),E.oxw().onSave()})("keydown.backspace",function(){return E.CHM(k),E.oxw().onBackspace()}),E.YNc(10,ht,2,1,"ng-container",3),E.ALo(11,"async"),E.qZA(),E.qZA(),E.qZA(),E.TgZ(12,"tui-svg",10),E.NdJ("click",function(){return E.CHM(k),E.oxw().onClear()}),E.qZA(),E.TgZ(13,"button",11),E.NdJ("click",function(){return E.CHM(k),E.oxw().onSave()}),E.qZA(),E.BQk()}if(2&qt){const k=E.MAs(5),st=E.oxw();E.xp6(3),E.Q6J("ngIf",st.anchorMode)("ngIfElse",k),E.xp6(5),E.Oqu(st.prefix),E.xp6(1),E.ekj("t-input_filled",st.hasUrl),E.Q6J("ngModel",st.url),E.xp6(1),E.Q6J("ngIf",E.lcZ(11,9,st.texts$)),E.xp6(2),E.ekj("t-cleaner_hidden",!st.hasUrl)}}function Ot(qt,ft){if(1&qt){const k=E.EpF();E.TgZ(0,"a",13),E._uU(1),E.ALo(2,"tuiShortUrl"),E.qZA(),E.TgZ(3,"button",14),E.NdJ("click",function(){return E.CHM(k),E.oxw().onEdit()}),E.qZA(),E.TgZ(4,"button",15),E.NdJ("click",function(){return E.CHM(k),E.oxw().onRemove()}),E.qZA()}if(2&qt){const k=E.oxw();E.Q6J("href",k.href,E.LSH),E.xp6(1),E.AsE(" ",k.anchorMode?"#":"","",E.lcZ(2,3,k.url)," ")}}function bt(qt,ft){if(1&qt){const k=E.EpF();E.TgZ(0,"button",19),E.NdJ("click",function(){const at=E.CHM(k).$implicit;return E.oxw(2).setAnchor(at)}),E._uU(1),E.qZA()}if(2&qt){const k=ft.$implicit;E.xp6(1),E.hij(" #",k," ")}}function Nt(qt,ft){if(1&qt&&(E.ynx(0),E._UZ(1,"hr",16),E.TgZ(2,"tui-scrollbar"),E.TgZ(3,"div",17),E.YNc(4,bt,2,1,"button",18),E.ALo(5,"tuiFilterAnchors"),E.qZA(),E.qZA(),E.BQk()),2&qt){const k=E.oxw();E.xp6(4),E.Q6J("ngForOf",E.Dn7(5,1,k.anchorIds,k.prefix,k.url))}}const Ht="#",xt="http://",Wt="https://";class Yt{constructor(ft,k,st){this.documentRef=ft,this.texts$=k,this.editor=st,this.isOnlyAnchorMode=this.detectAnchorMode(),this.addLink=new E.vpe,this.removeLink=new E.vpe,this.url=this.getHrefOrAnchorId(),this.edit=!this.url,this.prefix=this.makeDefaultPrefix(),this.anchorIds=this.getAllAnchorsIds()}set anchorMode(ft){this.isOnlyAnchorMode=ft,this.prefix=ft?Ht:this.makeDefaultPrefix()}get anchorMode(){return this.isOnlyAnchorMode}get prefixIsHashMode(){return this.prefix===Ht}get hasUrl(){return!!this.url}get href(){return`${this.prefix}${this.url}`}get showAnchorsList(){return!this.anchorMode&&this.edit&&this.anchorIds.length>0}get isViewMode(){return!this.edit}onSelectionChange(){this.isViewMode&&(this.url=this.getHrefOrAnchorId(),this.anchorMode=this.detectAnchorMode())}onMouseDown(ft){(0,Y.tuiIsElement)(ft.target)&&!ft.target.matches("a, button, input")&&ft.preventDefault()}setAnchor(ft){this.url=ft,this.changePrefix(!0)}changePrefix(ft){this.prefix=ft?Ht:xt}onSave(){this.url?this.addLink.emit(this.href):this.removeLink.emit()}onBackspace(){this.url||(this.prefix=this.isOnlyAnchorMode?Ht:xt)}onEdit(){this.edit=!0}onRemove(){this.removeLink.emit()}onChange(ft){this.url=this.removePrefix(ft)}onClear(){this.url=""}makeDefaultPrefix(){var ft;const k=this.getAnchorElement();return k&&(!k.getAttribute("href")&&k.getAttribute("id")||(null===(ft=k.getAttribute("href"))||void 0===ft?void 0:ft.startsWith(Ht)))?Ht:xt}detectAnchorMode(){const ft=this.getAnchorElement();return!(null==ft?void 0:ft.href)&&!!(null==ft?void 0:ft.getAttribute("id"))}getFocusedParentElement(){var ft,k;return(null===(k=null===(ft=this.documentRef.getSelection())||void 0===ft?void 0:ft.focusNode)||void 0===k?void 0:k.parentElement)||null}getAnchorElement(){var ft;return(null===(ft=this.getFocusedParentElement())||void 0===ft?void 0:ft.closest("a"))||null}getHrefOrAnchorId(){const ft=this.getAnchorElement();return ft?this.removePrefix(ft.getAttribute("href")||ft.getAttribute("id")||""):this.url}removePrefix(ft){return ft.startsWith(xt)?(this.prefix=this.isOnlyAnchorMode?Ht:xt,ft.replace(xt,"")):ft.startsWith(Wt)?(this.prefix=this.isOnlyAnchorMode?Ht:Wt,ft.replace(Wt,"")):ft.startsWith(Ht)?(this.prefix=Ht,ft.replace(Ht,"")):ft}getAllAnchorsIds(){var ft;const k=Array.from(null!==(ft=this.editor.getOriginTiptapEditor().view.dom.querySelectorAll('[data-type="jump-anchor"]'))&&void 0!==ft?ft:[]);return Array.from(k).map(st=>st.getAttribute("id")||"").filter(Boolean)}}Yt.\u0275fac=function(ft){return new(ft||Yt)(E.Y36(r.K0),E.Y36(p.b$),E.Y36(b.$3))},Yt.\u0275cmp=E.Xpm({type:Yt,selectors:[["tui-edit-link"]],hostBindings:function(ft,k){1&ft&&E.NdJ("selectionchange",function(){return k.onSelectionChange()},!1,E.evT)("mousedown",function(ot){return k.onMouseDown(ot)})},inputs:{anchorMode:"anchorMode"},outputs:{addLink:"addLink",removeLink:"removeLink"},decls:5,vars:3,consts:[[1,"t-edit-link"],[4,"ngIf","ngIfElse"],["view",""],[4,"ngIf"],[1,"t-label"],[1,"t-label-properties"],["fullOptions",""],[1,"t-url"],[1,"t-prefix"],["tuiAutoFocus","",1,"t-input",3,"ngModel","ngModelChange","input","keydown.prevent.enter","keydown.backspace"],["src","tuiIconCloseLarge",1,"t-cleaner",3,"click"],["tuiIconButton","","type","button","size","s","title","Insert link","icon","tuiIconCheckCircleLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],["urlTitle",""],["tuiLink","","target","_blank",1,"t-link",3,"href"],["tuiIconButton","","type","button","size","s","title","Change link","icon","tuiIconEditLarge","shape","rounded","appearance","icon",1,"t-button","t-edit-button",3,"click"],["tuiIconButton","","type","button","size","s","title","Remove link","icon","tuiIconUnlinkLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],[1,"t-hr"],[1,"t-anchor-list"],["type","button","class","t-anchor",3,"click",4,"ngFor","ngForOf"],["type","button",1,"t-anchor",3,"click"]],template:function(ft,k){if(1&ft&&(E.TgZ(0,"div",0),E.YNc(1,Z,14,11,"ng-container",1),E.YNc(2,Ot,5,5,"ng-template",null,2,E.W1O),E.qZA(),E.YNc(4,Nt,6,5,"ng-container",3)),2&ft){const st=E.MAs(3);E.xp6(1),E.Q6J("ngIf",k.edit)("ngIfElse",st),E.xp6(3),E.Q6J("ngIf",k.showAnchorsList)}},directives:[r.O5,R.l,X.k,j.JJ,j.On,Ct.P,dt.v,tt.V,vt.I,r.sg],pipes:[r.Ov,gt.X,Tt.b],styles:["[_nghost-%COMP%]{display:block;min-width:18.75rem}.t-edit-link[_ngcontent-%COMP%]{display:flex;min-height:4rem;align-items:center;padding-right:.75rem}.t-label[_ngcontent-%COMP%]{font:var(--tui-font-text-s);height:var(--tui-height-l);box-sizing:border-box;padding:.4375rem 1rem;min-width:12.5rem;max-width:25rem;width:100%}.t-label-properties[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:8.375rem;justify-content:space-between}.t-property_inactive[_ngcontent-%COMP%]{opacity:.5}.t-url[_ngcontent-%COMP%]{display:flex;font:var(--tui-font-text-m);color:var(--tui-text-02)}.t-input[_ngcontent-%COMP%]{flex:1}.t-input_filled[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-button[_ngcontent-%COMP%]{width:2rem;height:2rem;margin:0 .25rem;transition:background .2s}.t-edit-button[_ngcontent-%COMP%]{margin-left:auto}.t-link[_ngcontent-%COMP%]{margin:0 1rem}.t-cleaner[_ngcontent-%COMP%]{transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;color:var(--tui-base-06);cursor:pointer;margin-left:auto}.t-cleaner[_ngcontent-%COMP%]:hover{color:var(--tui-base-07)}.t-cleaner_hidden[_ngcontent-%COMP%]{visibility:hidden}.t-anchor-list[_ngcontent-%COMP%]{display:flex;max-height:12.5rem;flex-direction:column}.t-anchor[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;background:none;font-size:inherit;line-height:inherit;min-height:2.75rem;padding:.375rem .5rem;margin:.125rem .5rem;border-radius:var(--tui-radius-m);text-align:left}.t-anchor[_ngcontent-%COMP%]:hover{background:var(--tui-base-02);cursor:pointer}"],changeDetection:0}),(0,T.gn)([(0,Y.tuiDefaultProp)()],Yt.prototype,"anchorMode",null)},71115:(ee,yt,a)=>{a.d(yt,{lV:()=>T.l,Fu:()=>X,bL:()=>j.b,X:()=>Ct.X});var T=a(45050),r=a(12057),E=a(24751),b=a(68339),p=a(76040),Y=a(48611),R=a(74788);let X=(()=>{class dt{}return dt.\u0275fac=function(vt){return new(vt||dt)},dt.\u0275mod=R.oAB({type:dt}),dt.\u0275inj=R.cJS({imports:[[r.ez,E.u5,b.TuiAutoFocusModule,p.TuiButtonModule,p.TuiSvgModule,p.TuiLinkModule,Y.TuiInputInlineModule,Y.TuiToggleModule,p.TuiScrollbarModule]]}),dt})();var j=a(98266),Ct=a(22613)},98266:(ee,yt,a)=>{a.d(yt,{b:()=>r});var T=a(74788);let r=(()=>{class E{transform(p,Y,R){return"#"===Y?p.filter(X=>X!==R):p}}return E.\u0275fac=function(p){return new(p||E)},E.\u0275pipe=T.Yjl({name:"tuiFilterAnchors",type:E,pure:!0}),E})()},22613:(ee,yt,a)=>{a.d(yt,{X:()=>p});var T=a(74788);let p=(()=>{class Y{transform(X){return X.length<60?X:`${X.slice(0,Math.max(0,40))}...${X.slice(X.length-10)}`}}return Y.\u0275fac=function(X){return new(X||Y)},Y.\u0275pipe=T.Yjl({name:"tuiShortUrl",type:Y,pure:!0}),Y})()},96570:(ee,yt,a)=>{a.d(yt,{V:()=>dt});var T=a(74788),r=a(68339),E=a(25126),b=a(39953),p=a(12057);const Y=function(){return[0,1]};function R(tt,vt){if(1&tt){const gt=T.EpF();T.TgZ(0,"div",4),T.NdJ("tuiSizeChange",function(Ut){return T.CHM(gt),T.oxw().sizeChange.emit(Ut)}),T.qZA()}2&tt&&T.Q6J("tuiResizer",T.DdM(1,Y))}const X=function(tt){return[tt,0]},j=function(){return[1,0]},Ct=["*"];let dt=(()=>{class tt{constructor(){this.autoHeight=!1,this.width=null,this.height=null,this.sizeChange=new T.vpe}get hostWidth(){return(0,r.tuiIsNumber)(this.width)?(0,r.tuiPx)(this.width):this.width}get hostHeight(){return this.autoHeight?null:(0,r.tuiIsNumber)(this.height)?(0,r.tuiPx)(this.height):this.height}}return tt.\u0275fac=function(gt){return new(gt||tt)},tt.\u0275cmp=T.Xpm({type:tt,selectors:[["tui-editor-resizable"]],hostVars:4,hostBindings:function(gt,Tt){2&gt&&T.Udp("width",Tt.hostWidth)("height",Tt.hostHeight)},inputs:{autoHeight:"autoHeight",width:"width",height:"height"},outputs:{sizeChange:"sizeChange"},ngContentSelectors:Ct,decls:5,vars:8,consts:[["tuiResizeable","",1,"t-resizable"],[1,"t-handle","t-handle-left-side",3,"tuiResizer","tuiSizeChange"],["class","t-handle t-handle-bottom-side",3,"tuiResizer","tuiSizeChange",4,"ngIf"],[1,"t-handle","t-handle-right-side",3,"tuiResizer","tuiSizeChange"],[1,"t-handle","t-handle-bottom-side",3,"tuiResizer","tuiSizeChange"]],template:function(gt,Tt){1&gt&&(T.F$t(),T.TgZ(0,"div",0),T.Hsn(1),T.TgZ(2,"div",1),T.NdJ("tuiSizeChange",function(At){return Tt.sizeChange.emit(At)}),T.qZA(),T.YNc(3,R,1,2,"div",2),T.TgZ(4,"div",3),T.NdJ("tuiSizeChange",function(At){return Tt.sizeChange.emit(At)}),T.qZA(),T.qZA()),2&gt&&(T.ekj("t-resizable-auto-height",Tt.autoHeight),T.xp6(2),T.Q6J("tuiResizer",T.VKq(5,X,-1)),T.xp6(1),T.Q6J("ngIf",!Tt.autoHeight),T.xp6(1),T.Q6J("tuiResizer",T.DdM(7,j)))},directives:[E.U,b.L,p.O5],styles:['[_nghost-%COMP%]{position:relative;display:inline-block;box-sizing:border-box}[_nghost-%COMP%]   .t-resizable[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]   .t-resizable-auto-height[_ngcontent-%COMP%]{height:auto!important}[_nghost-%COMP%]   iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}[_nghost-%COMP%]:hover   .t-handle[_ngcontent-%COMP%]:after{opacity:1}.t-handle[_ngcontent-%COMP%]{position:absolute;top:0;display:flex;width:.75rem;cursor:col-resize;justify-content:center;align-items:center;height:100%}.t-handle[_ngcontent-%COMP%]:after{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";width:50%;height:33%;box-sizing:border-box;border-radius:var(--tui-radius-m);background:var(--tui-base-08);border:1px solid var(--tui-base-03);opacity:0}.t-handle-left-side[_ngcontent-%COMP%]{left:0}.t-handle-bottom-side[_ngcontent-%COMP%]{top:unset;bottom:.3125rem;height:.95rem;width:100%}.t-handle-right-side[_ngcontent-%COMP%]{right:0}'],changeDetection:0}),tt})()},95110:(ee,yt,a)=>{a.d(yt,{_3:()=>Y,V_:()=>R.V,Sl:()=>j});var T=a(40400),r=a(68339),E=a(66682),b=a(46782),p=a(74788);let Y=(()=>{class Ct extends T.d{constructor(tt,vt){super(),this._height=0,this._width=0,(0,E.T)((0,r.tuiTypedFromEvent)(tt,"touchend"),(0,r.tuiTypedFromEvent)(tt,"mouseup")).pipe((0,b.R)(vt)).subscribe(()=>this.updateAttributes({width:this.width,height:this.height}))}get attrs(){var tt;return(null===(tt=this.node)||void 0===tt?void 0:tt.attrs)||{src:""}}get width(){return this._width||this.attrs.width||null}get height(){return this._height||this.attrs.height||null}}return Ct.\u0275fac=function(tt){return new(tt||Ct)(p.Y36(Document),p.Y36(r.TuiDestroyService))},Ct.\u0275dir=p.lG2({type:Ct,features:[p.qOj]}),Ct})();var R=a(96570),X=a(12057);let j=(()=>{class Ct{}return Ct.\u0275fac=function(tt){return new(tt||Ct)},Ct.\u0275mod=p.oAB({type:Ct}),Ct.\u0275inj=p.cJS({imports:[[X.ez,r.TuiResizeModule,r.TuiResizerModule]]}),Ct})()},20179:(ee,yt,a)=>{a.d(yt,{D:()=>Y});var T=a(12057),r=a(74788),E=a(82113),b=a(68339),p=a(76040);let Y=(()=>{class R{constructor(j,Ct,dt,tt,vt,gt){this.elementRef=j,this.renderer=Ct,this.sanitizer=dt,this.tuiSanitizer=tt,this.document=vt,this.editor=gt}set content(j){this.renderer.setProperty(this.elementRef.nativeElement,"innerHTML",this.tuiSanitizer?this.tuiSanitizer.sanitize(r.q3G.HTML,j.replace(/colwidth/g,"width")):this.sanitizer.sanitize(r.q3G.HTML,j))}click(j){var Ct,dt;if(this.editor||!(0,b.tuiIsElement)(j.target))return;const tt=(null===(dt=null===(Ct=j.target)||void 0===Ct?void 0:Ct.closest("a"))||void 0===dt?void 0:dt.getAttribute("href"))||"";!tt.startsWith("#")||(this.document.location.hash=tt.replace("#",""),j.preventDefault())}}return R.\u0275fac=function(j){return new(j||R)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(r.Tiy),r.Y36(p.TUI_SANITIZER,8),r.Y36(T.K0),r.Y36(E.JU,8))},R.\u0275cmp=r.Xpm({type:R,selectors:[["tui-editor-socket"]],hostAttrs:[1,"tui-editor-socket"],hostBindings:function(j,Ct){1&j&&r.NdJ("click",function(tt){return Ct.click(tt)})},inputs:{content:"content"},decls:0,vars:0,template:function(j,Ct){},styles:['.tui-editor-socket{display:block;margin:0;overflow:hidden;color:var(--tui-text-01);font:var(--tui-font-text-m)}.tui-editor-socket._preview-image img{cursor:pointer}.tui-editor-socket h1,.tui-editor-socket h2,.tui-editor-socket h3,.tui-editor-socket h4,.tui-editor-socket h5,.tui-editor-socket h6{word-break:break-word;line-height:normal}.tui-editor-socket a:not([data-type="jump-anchor"]){color:var(--tui-link);text-decoration:none;outline:none}.tui-editor-socket a:not([data-type="jump-anchor"]):hover{color:var(--tui-link-hover);text-decoration:underline}.tui-editor-socket a:not([data-type="jump-anchor"]):active{color:var(--tui-primary-active)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]{text-decoration:underline;-webkit-text-decoration-color:var(--tui-link);text-decoration-color:var(--tui-link)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:before{content:"#"}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:hover{color:var(--tui-link)}.tui-editor-socket .ProseMirror video,.tui-editor-socket .ProseMirror audio{pointer-events:none}.tui-editor-socket .tableWrapper,.tui-editor-socket .tui-table-wrapper{overflow-x:auto}.tui-editor-socket .ProseMirror{min-height:5.375rem;padding:0 1rem;outline:none;white-space:pre-wrap}.tui-editor-socket p:empty:after{content:" ";white-space:pre}.tui-editor-socket p:first-child{margin-top:0}.tui-editor-socket ul,.tui-editor-socket ol{list-style-type:none;margin:1rem 1rem 1rem 1.5rem;padding:0}.tui-editor-socket li{margin:1rem 0}.tui-editor-socket li p{display:inline;margin:0 auto;word-break:break-word}.tui-editor-socket ul li p{display:inline-block}.tui-editor-socket ul>li:before{content:"";display:inline-block;width:.5rem;height:.5rem;border-radius:100%;margin:.5rem .875rem .0625rem -1.375rem;background-color:var(--tui-primary);vertical-align:top;box-sizing:border-box}.tui-editor-socket li ul>li:before{background:none;border:.125rem solid var(--tui-primary)}.tui-editor-socket li ul>li>ul>li:before{background:var(--tui-primary);border-radius:0;width:.375rem;height:.375rem}.tui-editor-socket ol{counter-reset:item}.tui-editor-socket ol>li:before{content:counters(item,".") ".";width:1.5rem;margin:0 .75rem 0 -1.5rem;counter-increment:item;color:var(--tui-base-05);vertical-align:top}.tui-editor-socket pre{white-space:pre-wrap;word-break:break-word;border-radius:.25rem;margin:1rem 0;padding:.75rem 1rem;font-family:Courier,monospace;color:var(--tui-text-02);background:var(--tui-base-02)}.tui-editor-socket code{box-shadow:none}.tui-editor-socket pre+pre{margin-top:-1.8125rem;padding-top:0}.tui-editor-socket blockquote{margin:1.25rem 0 1.25rem 1.5rem;padding-left:1.0625rem;border-left:1px solid var(--tui-base-04)}.tui-editor-socket p{margin:1rem 0}.tui-editor-socket hr{border:none;border-top:1px solid var(--tui-base-03);margin:1rem 0}.tui-editor-socket table{border-collapse:collapse;table-layout:fixed;width:100%;margin:0;overflow:hidden}.tui-editor-socket table td{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word}.tui-editor-socket table th{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word;font-weight:bold;text-align:left;background-color:var(--tui-base-02);min-height:2rem}.tui-editor-socket table .column-resize-handle{position:absolute;right:-2px;top:0;bottom:-2px;width:4px;background-color:#adf;pointer-events:none}.tui-editor-socket table td>*{margin-top:0;margin-bottom:0}.tui-editor-socket table th>*{margin-top:0;margin-bottom:0}.tui-editor-socket .resize-cursor{cursor:ew-resize;cursor:col-resize}.tui-editor-socket table .tableWrapper{overflow-x:auto}.tui-editor-socket .selectedCell:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:var(--tui-selection);pointer-events:none}.tui-editor-socket font[face="Courier New"]{display:inline-block;padding:.25rem .5rem;border-radius:.25rem;background-color:#ecf1f7;word-break:break-word}.tui-editor-socket details{width:100%;border:1px solid var(--tui-base-04);border-radius:var(--tui-radius-l)}.tui-editor-socket summary{display:flex;align-items:center;min-height:3.5rem;width:100%;padding:0 1.25rem;box-sizing:border-box;border-radius:var(--tui-radius-l);pointer-events:none}.tui-editor-socket summary p{min-width:1px;margin:0}.tui-editor-socket summary::-webkit-details-marker{display:none}.tui-editor-socket details[open] summary{border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-editor-socket div[data-type=details-content]{padding:1.25rem;min-height:3rem;border:1px solid var(--tui-base-04);border-width:1px 0 0}.tui-editor-socket .details-wrapper{position:relative;display:flex}.tui-editor-socket .details-arrow{position:absolute;top:1.5rem;right:1.25rem;height:.575rem;width:.575rem;border:1px solid var(--tui-base-06);border-width:0 2px 2px 0;transform:rotate(45deg);transition:var(--tui-duration, .3s);-webkit-appearance:none;-moz-appearance:none;appearance:none;box-sizing:border-box;padding:0;background:none;cursor:pointer}.tui-editor-socket .details-wrapper_rendered .details-arrow{pointer-events:none}.tui-editor-socket .details-wrapper_rendered summary{transition:transform var(--tui-duration, .3s);cursor:pointer;pointer-events:auto}.tui-editor-socket .details-wrapper_rendered summary:hover{background:var(--tui-base-02)}.tui-editor-socket details[open]+.details-arrow{top:1.75rem;transform:rotate(225deg)}.t-editor-placeholder:before{content:attr(data-placeholder);float:left;color:var(--tui-base-05);pointer-events:none;height:0}.tui-group-node{display:flex;flex-direction:row}.tui-group-node:hover>.tui-group-pointer{pointer-events:auto;opacity:1}.tui-group-pointer{opacity:0;min-height:.8125rem;max-height:.8125rem;min-width:.8125rem;max-width:.8125rem;margin:.3125rem .3125rem 0 0;cursor:-webkit-grab;cursor:grab;background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="black" /></svg>\');background-repeat:no-repeat;background-size:contain;background-position:center}[data-mode=onDark] .tui-group-pointer{background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="white" /></svg>\')}\n'],encapsulation:2,changeDetection:0}),R})()},69303:(ee,yt,a)=>{a.d(yt,{a:()=>at});var T=a(64762),r=a(12057),E=a(74788),b=a(24751),p=a(17406),Y=a(19074),R=a(84614),X=a(14309),j=a(27863),Ct=a(68339),dt=a(79089),tt=a(40939),vt=a(2697),gt=a(17163),Tt=a(3881),Ut=a(1433),At=a(9872),_t=a(4997),ut=a(33250),ht=a(26072),Z=a(9829),Ot=a(82886),bt=a(39088),Nt=a(20179),Ht=a(74982),xt=a(45050);function Wt(J,V){if(1&J){const rt=E.EpF();E.TgZ(0,"tui-toolbar",9),E.NdJ("fileAttached",function(Vt){return E.CHM(rt),E.oxw(2).fileAttached.emit(Vt)}),E.Hsn(1,1),E.qZA()}if(2&J){const rt=E.oxw(2);E.Q6J("tools",rt.tools)("disabled",!rt.interactive)}}function Yt(J,V){if(1&J&&(E.TgZ(0,"div",10),E._uU(1),E.qZA()),2&J){const rt=E.oxw(2);E.xp6(1),E.hij(" ",rt.exampleText," ")}}function qt(J,V){if(1&J){const rt=E.EpF();E.TgZ(0,"div",11),E.TgZ(1,"tui-editor-socket",12),E.NdJ("valueChange",function(Vt){return E.CHM(rt),E.oxw(2).onModelChange(Vt)})("stateChange",function(){return 0}),E.qZA(),E.qZA()}if(2&J){E.oxw();const rt=E.MAs(9),Ft=E.oxw();E.Q6J("tuiDropdownSelection",Ft.dropdownSelectionHandler)("tuiDropdown",rt),E.xp6(1),E.Q6J("value",Ft.value)("editable",Ft.interactive)}}function ft(J,V){if(1&J){const rt=E.EpF();E.TgZ(0,"tui-edit-link",13,14),E.NdJ("addLink",function(Vt){E.CHM(rt);const ne=E.MAs(1),he=E.oxw(2);return ne.anchorMode?he.addAnchor(Vt):he.addLink(Vt)})("removeLink",function(){E.CHM(rt);const Vt=E.MAs(1),ne=E.oxw(2);return Vt.anchorMode?ne.removeAnchor():ne.removeLink()}),E.qZA()}}function k(J,V){if(1&J){const rt=E.EpF();E.TgZ(0,"div",1),E.NdJ("tuiActiveZoneChange",function(Vt){return E.CHM(rt),E.oxw().onActiveZone(Vt)}),E.TgZ(1,"div",2),E.YNc(2,Wt,2,2,"tui-toolbar",3),E.TgZ(3,"div",4),E.Hsn(4),E.qZA(),E.YNc(5,Yt,2,1,"div",5),E.qZA(),E.TgZ(6,"tui-scrollbar",6),E.YNc(7,qt,2,4,"div",7),E.YNc(8,ft,2,0,"ng-template",null,8,E.W1O),E._UZ(10,"tui-editor-portal-host"),E.qZA(),E.qZA()}if(2&J){const rt=V.tuiLet,Ft=E.oxw();E.Q6J("readOnly",Ft.readOnly)("disabled",Ft.disabled)("focus",Ft.computedFocused)("hover",Ft.pseudoHover)("invalid",Ft.computedInvalid),E.xp6(2),E.Q6J("ngIf",rt),E.xp6(1),E.ekj("t-placeholder_raised",Ft.placeholderRaised),E.xp6(2),E.Q6J("ngIf",Ft.hasExampleText),E.xp6(2),E.Q6J("ngIf",rt)}}const st=["*",[["tools"]]];class at extends Ct.AbstractTuiControl{constructor(V,rt,Ft,Vt,ne,he){super(V,rt),this.editorLoaded$=Ft,this.editorService=Vt,this.contentProcessor=ne,this.documentRef=he,this.exampleText="",this.tools=Y.Db,this.fileAttached=new E.vpe,this.focused=!1,this.isSelectionLink=Qt=>this.currentFocusedNodeIsAnchor(Qt)&&(0,j.nC)(Qt)}get nativeFocusableElement(){var V;return this.computedDisabled?null:(null===(V=this.element)||void 0===V?void 0:V.nativeElement)||null}get dropdownSelectionHandler(){return this.focused?this.isSelectionLink:Ct.ALWAYS_FALSE_HANDLER}get editor(){return this.editorService.getOriginTiptapEditor()?this.editorService:null}get placeholderRaised(){return this.computedFocused&&!this.readOnly||this.hasValue}get hasExampleText(){return!!this.exampleText&&this.computedFocused&&!this.hasValue&&!this.readOnly}writeValue(V){var rt;if(V===this.value)return;const Ft=this.contentProcessor(V||"");super.writeValue(Ft),Ft!==V&&(null===(rt=this.control)||void 0===rt||rt.setValue(Ft,{onlySelf:!1,emitEvent:!1,emitModelToViewChange:!1,emitViewToModelChange:!1}))}onActiveZone(V){this.focused=V,this.updateFocused(V)}onModelChange(V){this.updateValue(V)}addAnchor(V){var rt;null===(rt=this.editor)||void 0===rt||rt.setAnchor(V)}removeAnchor(){var V;null===(V=this.editor)||void 0===V||V.removeAnchor()}addLink(V){var rt,Ft;null===(rt=this.editor)||void 0===rt||rt.selectClosest(),null===(Ft=this.editor)||void 0===Ft||Ft.setLink(V)}removeLink(){var V;null===(V=this.editor)||void 0===V||V.unsetLink()}ngOnDestroy(){var V;null===(V=this.editor)||void 0===V||V.destroy()}getFallbackValue(){return""}currentFocusedNodeIsAnchor(V){var rt,Ft,Vt;return!!(null===(Ft=null===(rt=V.startContainer.parentElement)||void 0===rt?void 0:rt.closest("a"))||void 0===Ft?void 0:Ft.contains((null===(Vt=this.documentRef.getSelection())||void 0===Vt?void 0:Vt.focusNode)||null))}get hasValue(){return!!this.value}}at.\u0275fac=function(V){return new(V||at)(E.Y36(b.a5,10),E.Y36(E.sBO),E.Y36(X.ZW),E.Y36(R.$3),E.Y36(X.F1),E.Y36(r.K0))},at.\u0275cmp=E.Xpm({type:at,selectors:[["tui-editor"]],viewQuery:function(V,rt){if(1&V&&(E.Gf(R.JU,5,E.SBq),E.Gf(p.M6,5)),2&V){let Ft;E.iGM(Ft=E.CRH())&&(rt.element=Ft.first),E.iGM(Ft=E.CRH())&&(rt.toolbar=Ft.first)}},inputs:{exampleText:"exampleText",tools:"tools"},outputs:{fileAttached:"fileAttached"},features:[E._Bn([(0,Ct.tuiAsFocusableItemAccessor)(at),dt.m]),E.qOj],ngContentSelectors:["*","tools"],decls:2,vars:3,consts:[["tuiWrapper","","appearance","textfield","class","t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange",4,"tuiLet"],["tuiWrapper","","appearance","textfield",1,"t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange"],[1,"t-toolbar-wrapper"],[3,"tools","disabled","fileAttached",4,"ngIf"],[1,"t-placeholder"],["class","t-example-text",4,"ngIf"],["tuiEditorPortal","",1,"t-scrollbar"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown",4,"ngIf"],["dropdown",""],[3,"tools","disabled","fileAttached"],[1,"t-example-text"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown"],["tuiTiptapEditor","","spellcheck","false",1,"tui-editor-socket",3,"value","editable","valueChange","stateChange"],[3,"addLink","removeLink"],["link",""]],template:function(V,rt){1&V&&(E.F$t(st),E.YNc(0,k,11,10,"div",0),E.ALo(1,"async")),2&V&&E.Q6J("tuiLet",E.lcZ(1,1,rt.editorLoaded$))},directives:[tt.L,vt.o,gt.e,r.O5,Tt.I,Ut.A,At.d,_t.M,ut.Ek,ht.t,Z.V,Ot.A,bt.y,Nt.D,Ht.J,xt.l],pipes:[r.Ov],styles:["[_nghost-%COMP%]{position:relative;z-index:0;display:block;font:var(--tui-font-text-m);border-radius:var(--tui-radius-m)}.t-wrapper[_ngcontent-%COMP%]{display:flex;max-height:inherit;min-height:10rem;cursor:text;overflow:hidden;flex-direction:column;border-radius:inherit}.t-placeholder[_ngcontent-%COMP%]{transition-property:transform,font-size,color,letter-spacing;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;font:var(--tui-font-text-s);color:var(--tui-text-01);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:var(--tui-text-02);pointer-events:none;will-change:transform;transform:translateY(0);position:absolute;left:1rem;margin-top:1rem;width:95%;font-size:.9375rem}.t-placeholder_raised[_ngcontent-%COMP%]{transform:translateY(-.625rem)}[data-size=m][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font:var(--tui-font-text-xs);transform:translateY(-.5rem);letter-spacing:.025rem}._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], ._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill)}[data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], [data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill-night)}._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-03)}[data-size=l][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{font-size:.9375rem}[data-size=l][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font-size:.8156rem}[data-size=m]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01)}[data-mode=onDark][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}[data-size=m][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}@supports (-webkit-hyphens: none){.t-placeholder[_ngcontent-%COMP%]{will-change:unset;transition-property:transform,color,letter-spacing}}.t-placeholder_raised[_ngcontent-%COMP%]{width:110%}.t-example-text[_ngcontent-%COMP%]{position:absolute;left:1rem;margin-top:1.6rem;color:var(--tui-base-06);letter-spacing:normal;text-transform:none}.t-example-text_light[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}.t-example-text_dark[_ngcontent-%COMP%]{color:var(--tui-text-03)}.t-scrollbar[_ngcontent-%COMP%]{display:flex;max-height:inherit;border-top:1.625rem solid transparent;border-bottom:1px solid transparent;box-sizing:border-box}"],changeDetection:0}),(0,T.gn)([(0,Ct.tuiDefaultProp)()],at.prototype,"exampleText",void 0),(0,T.gn)([(0,Ct.tuiDefaultProp)()],at.prototype,"tools",void 0)},79089:(ee,yt,a)=>{a.d(yt,{m:()=>Ct});var T=a(74788),r=a(84614),E=a(14309),b=a(82298),p=a(9112),Y=a(15257),R=a(88002),X=a(47349),j=a(73825);const Ct=[{provide:E.F4,deps:[E.Wf],useFactory:dt=>{const tt=new b.t(1);return Promise.all(dt).then(vt=>tt.next(vt)),tt}},{provide:E.Y1,deps:[T.Qsj],useFactory:dt=>dt.createElement("div")},{provide:E.ZW,deps:[E.Y1,E.F4,E.bG],useFactory:(dt,tt,vt)=>(0,p.aj)([vt,tt]).pipe((0,Y.q)(1),(0,R.U)(([gt,Tt])=>new gt({element:dt,extensions:Tt})),(0,X.d)({bufferSize:1,refCount:!0}))},r.$3,j.Y]},9872:(ee,yt,a)=>{a.d(yt,{d:()=>E});var T=a(68339),r=a(74788);let E=(()=>{class b extends T.AbstractTuiPortalHostComponent{}return b.\u0275fac=function(){let p;return function(R){return(p||(p=r.n5z(b)))(R||b)}}(),b.\u0275cmp=r.Xpm({type:b,selectors:[["tui-editor-portal-host"]],features:[r._Bn([{provide:T.AbstractTuiPortalService,useExisting:T.TuiDropdownPortalService},{provide:T.AbstractTuiPortalHostComponent,useExisting:b}]),r.qOj],decls:2,vars:0,consts:[["viewContainer",""]],template:function(Y,R){1&Y&&r.GkF(0,null,0)},styles:["[_nghost-%COMP%]{position:relative;z-index:1;display:block;height:100%}"],changeDetection:0}),b})()},1433:(ee,yt,a)=>{a.d(yt,{A:()=>b});var T=a(68339),r=a(73825),E=a(74788);let b=(()=>{class p{}return p.\u0275fac=function(R){return new(R||p)},p.\u0275dir=E.lG2({type:p,selectors:[["","tuiEditorPortal",""]],features:[E._Bn([{provide:T.TuiDropdownPortalService,useExisting:r.Y}])]}),p})()},73825:(ee,yt,a)=>{a.d(yt,{Y:()=>E});var T=a(68339),r=a(74788);let E=(()=>{class b extends T.AbstractTuiPortalService{}return b.\u0275fac=function(){let p;return function(R){return(p||(p=r.n5z(b)))(R||b)}}(),b.\u0275prov=r.Yz7({token:b,factory:b.\u0275fac}),b})()},19769:(ee,yt,a)=>{a.d(yt,{j:()=>At});var T=a(64762),r=a(74788),E=a(24751),b=a(91211),p=a(27863),Y=a(68339),R=a(76040),X=a(62939),j=a(63060),Ct=a(62733),dt=a(3729),tt=a(23999),vt=a(17163);function gt(_t,ut){if(1&_t&&r._UZ(0,"div",4),2&_t){const ht=r.oxw();r.Udp("background",ht.background)}}function Tt(_t,ut){if(1&_t){const ht=r.EpF();r.TgZ(0,"tui-color-selector",5),r.NdJ("colorChange",function(Ot){return r.CHM(ht),r.oxw().onValueChange(Ot)}),r.qZA()}if(2&_t){const ht=ut.$implicit,Z=r.oxw();r.Q6J("tuiActiveZoneParent",ht)("colors",Z.colors)("color",Z.value)}}class At extends Y.AbstractTuiControl{constructor(ut,ht,Z){super(ut,ht),this.domSanitizer=Z,this.colors=new Map,this.open=!1}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return!!this.dropdown&&this.dropdown.focused}get background(){return this.sanitize(this.value,this.domSanitizer)}onClick(){this.open=!this.open}onValueChange(ut){this.updateValue(ut)}onFocused(ut){this.updateFocused(ut)}getFallbackValue(){return"#000000"}sanitize(ut,ht){return ut.startsWith("linear-gradient(")?ht.bypassSecurityTrustStyle((0,p.CH)((0,p._N)((0,p.U5)(ut)))):ut}}At.\u0275fac=function(ut){return new(ut||At)(r.Y36(E.a5,10),r.Y36(r.sBO),r.Y36(b.H7))},At.\u0275cmp=r.Xpm({type:At,selectors:[["tui-input-color"]],viewQuery:function(ut,ht){if(1&ut&&(r.Gf(R.TuiPrimitiveTextfieldComponent,5),r.Gf(R.TuiHostedDropdownComponent,5)),2&ut){let Z;r.iGM(Z=r.CRH())&&(ht.textfield=Z.first),r.iGM(Z=r.CRH())&&(ht.dropdown=Z.first)}},hostBindings:function(ut,ht){1&ut&&r.NdJ("click",function(){return ht.onClick()})},inputs:{colors:"colors"},features:[r._Bn([],[(0,R.tuiDropdownOptionsProvider)({maxHeight:600})]),r.qOj],ngContentSelectors:["*"],decls:7,vars:12,consts:[[1,"t-wrapper",3,"content","open","openChange"],[1,"t-textfield",3,"tuiTextfieldIconLeft","pseudoFocus","pseudoHover","pseudoActive","invalid","focusable","nativeId","disabled","readOnly","value","valueChange","focusedChange"],["color",""],["picker",""],[1,"t-color"],[3,"tuiActiveZoneParent","colors","color","colorChange"]],template:function(ut,ht){if(1&ut&&(r.F$t(),r.TgZ(0,"tui-hosted-dropdown",0),r.NdJ("openChange",function(Ot){return ht.open=Ot}),r.TgZ(1,"tui-primitive-textfield",1),r.NdJ("valueChange",function(Ot){return ht.onValueChange(Ot)})("focusedChange",function(Ot){return ht.onFocused(Ot)}),r.Hsn(2),r.qZA(),r.qZA(),r.YNc(3,gt,1,2,"ng-template",null,2,r.W1O),r.YNc(5,Tt,1,3,"ng-template",null,3,r.W1O)),2&ut){const Z=r.MAs(4),Ot=r.MAs(6);r.Q6J("content",Ot)("open",ht.open),r.xp6(1),r.Q6J("tuiTextfieldIconLeft",Z)("pseudoFocus",ht.computedFocused)("pseudoHover",ht.pseudoHover)("pseudoActive",ht.pseudoActive)("invalid",ht.computedInvalid)("focusable",ht.focusable)("nativeId",ht.nativeId)("disabled",ht.disabled)("readOnly",ht.readOnly)("value",ht.value)}},directives:[X.o,j.y,Ct.B,dt.aR,tt.s,vt.e],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-wrapper[_ngcontent-%COMP%]{display:flex;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-color[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-03-dark);border-radius:.125rem}"],changeDetection:0}),(0,T.gn)([(0,Y.tuiDefaultProp)()],At.prototype,"colors",void 0),(0,T.gn)([Y.tuiPure],At.prototype,"sanitize",null)},37924:(ee,yt,a)=>{a.d(yt,{X:()=>_t});var T=a(84614),r=a(14309),E=a(9112),b=a(88002),p=a(74788),Y=a(12057),R=a(40939),X=a(62939),j=a(76189),Ct=a(67446),dt=a(29070),tt=a(54255),vt=a(15491),gt=a(219);function Tt(ut,ht){if(1&ut){const Z=p.EpF();p.TgZ(0,"div",6),p.TgZ(1,"button",7),p.NdJ("click",function(){return p.CHM(Z),p.oxw(3).editor.onAlign("left")}),p.qZA(),p.TgZ(2,"button",8),p.NdJ("click",function(){return p.CHM(Z),p.oxw(3).editor.onAlign("center")}),p.qZA(),p.TgZ(3,"button",9),p.NdJ("click",function(){return p.CHM(Z),p.oxw(3).editor.onAlign("right")}),p.qZA(),p.TgZ(4,"button",10),p.NdJ("click",function(){return p.CHM(Z),p.oxw(3).editor.onAlign("justify")}),p.qZA(),p.qZA()}if(2&ut){const Z=p.oxw().tuiLet,Ot=p.oxw().ngIf;p.xp6(1),p.Q6J("pseudoActive",!(null==Z||!Z.left))("tuiHint",Ot.justifyLeft),p.xp6(1),p.Q6J("pseudoActive",!(null==Z||!Z.center))("tuiHint",Ot.justifyCenter),p.xp6(1),p.Q6J("pseudoActive",!(null==Z||!Z.right))("tuiHint",Ot.justifyRight),p.xp6(1),p.Q6J("pseudoActive",!(null==Z||!Z.justify))("tuiHint",Ot.justifyFull)}}function Ut(ut,ht){if(1&ut&&(p.TgZ(0,"tui-hosted-dropdown",2,3),p._UZ(2,"button",4),p.YNc(3,Tt,5,8,"ng-template",null,5,p.W1O),p.qZA()),2&ut){const Z=p.MAs(1),Ot=p.MAs(4),bt=p.oxw().ngIf;p.Q6J("content",Ot),p.xp6(2),p.Q6J("tuiHint",bt.justify)("tuiHintDescribe","")("pseudoActive",Z.open)("focusable",Z.open)}}function At(ut,ht){if(1&ut&&(p.ynx(0),p.YNc(1,Ut,5,5,"tui-hosted-dropdown",1),p.ALo(2,"async"),p.BQk()),2&ut){const Z=p.oxw();p.xp6(1),p.Q6J("tuiLet",p.lcZ(2,1,Z.alignState$))}}let _t=(()=>{class ut{constructor(Z,Ot){this.editor=Z,this.texts$=Ot,this.alignState$=(0,E.aj)([this.editor.isActive$({textAlign:"left"}),this.editor.isActive$({textAlign:"right"}),this.editor.isActive$({textAlign:"center"}),this.editor.isActive$({textAlign:"justify"})]).pipe((0,b.U)(([bt,Nt,Ht,xt])=>({left:bt,right:Nt,center:Ht,justify:xt})))}}return ut.\u0275fac=function(Z){return new(Z||ut)(p.Y36(T.$3),p.Y36(r.rf))},ut.\u0275cmp=p.Xpm({type:ut,selectors:[["tui-align-content"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["align",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["alignDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignCenterLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignRightLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignJustifyLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"]],template:function(Z,Ot){1&Z&&(p.YNc(0,At,3,3,"ng-container",0),p.ALo(1,"async")),2&Z&&p.Q6J("ngIf",p.lcZ(1,1,Ot.texts$))},directives:[Y.O5,R.L,X.o,j.v,Ct.D,dt.x,tt.t,vt.D,gt.$],pipes:[Y.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),ut})()},15587:(ee,yt,a)=>{a.d(yt,{T:()=>_t});var T=a(84614),r=a(14309),E=a(88002),b=a(87519),p=a(74788),Y=a(62939),R=a(76189),X=a(67446),j=a(29070),Ct=a(54255),dt=a(15491),tt=a(219),vt=a(20933),gt=a(12057),Tt=a(35065);function Ut(ut,ht){if(1&ut){const Z=p.EpF();p.TgZ(0,"button",5),p.NdJ("click",function(){const Nt=p.CHM(Z).index;return p.oxw(2).onCode(!!Nt)}),p._uU(1),p.qZA()}if(2&ut){const Z=ht.$implicit;p.xp6(1),p.hij(" ",Z," ")}}function At(ut,ht){if(1&ut&&(p.TgZ(0,"tui-data-list"),p.YNc(1,Ut,2,1,"button",4),p.ALo(2,"async"),p.qZA()),2&ut){const Z=p.oxw();p.xp6(1),p.Q6J("ngForOf",p.lcZ(2,1,Z.codeOptionsTexts$))}}let _t=(()=>{class ut{constructor(Z,Ot,bt){this.editor=Z,this.texts$=Ot,this.codeOptionsTexts$=bt,this.hintText$=this.texts$.pipe((0,E.U)(Nt=>Nt.code)),this.insideCode$=this.editor.stateChange$.pipe((0,E.U)(()=>this.editor.isActive("code")||this.editor.isActive("codeBlock")),(0,b.x)())}onCode(Z){Z?this.editor.toggleCodeBlock():this.editor.toggleCode()}}return ut.\u0275fac=function(Z){return new(Z||ut)(p.Y36(T.$3),p.Y36(r.rf),p.Y36(r.Mr))},ut.\u0275cmp=p.Xpm({type:ut,selectors:[["tui-code"]],decls:7,vars:9,consts:[[3,"content"],["codes",""],["tuiIconButton","","type","button","size","s","icon","tuiIconCodeLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["codesDropdown",""],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(Z,Ot){if(1&Z&&(p.TgZ(0,"tui-hosted-dropdown",0,1),p._UZ(2,"button",2),p.ALo(3,"async"),p.ALo(4,"async"),p.YNc(5,At,3,3,"ng-template",null,3,p.W1O),p.qZA()),2&Z){const bt=p.MAs(1),Nt=p.MAs(6);p.Q6J("content",Nt),p.xp6(2),p.Q6J("tuiHint",p.lcZ(3,5,Ot.hintText$))("tuiHintDescribe","")("pseudoActive",bt.open||p.lcZ(4,7,Ot.insideCode$))("focusable",bt.open)}},directives:[Y.o,R.v,X.D,j.x,Ct.t,dt.D,tt.$,vt.q,gt.sg,Tt.v],pipes:[gt.Ov],encapsulation:2,changeDetection:0}),ut})()},18832:(ee,yt,a)=>{a.d(yt,{U:()=>gt});var T=a(84614),r=a(14309),E=a(88002),b=a(87519),p=a(74788),Y=a(12057),R=a(76189),X=a(67446),j=a(29070),Ct=a(54255),dt=a(15491),tt=a(219);function vt(Tt,Ut){if(1&Tt){const At=p.EpF();p.TgZ(0,"button",1),p.NdJ("click",function(){return p.CHM(At),p.oxw().removeDetails()}),p.ALo(1,"async"),p.qZA()}if(2&Tt){const At=Ut.ngIf,_t=p.oxw();p.Q6J("tuiHint",At.removeDetails)("tuiHintDescribe","")("focusable",!1)("disabled",!!p.lcZ(1,4,_t.disabled$))}}let gt=(()=>{class Tt{constructor(At,_t){this.editor=At,this.texts$=_t,this.disabled$=this.editor.stateChange$.pipe((0,E.U)(()=>!this.editor.isActive("details")),(0,b.x)())}removeDetails(){this.editor.removeDetails()}}return Tt.\u0275fac=function(At){return new(At||Tt)(p.Y36(T.$3),p.Y36(r.rf))},Tt.\u0275cmp=p.Xpm({type:Tt,selectors:[["tui-details-remove"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","disabled","click"]],template:function(At,_t){1&At&&(p.YNc(0,vt,2,6,"button",0),p.ALo(1,"async")),2&At&&p.Q6J("ngIf",p.lcZ(1,1,_t.texts$))},directives:[Y.O5,R.v,X.D,j.x,Ct.t,dt.D,tt.$],pipes:[Y.Ov],encapsulation:2,changeDetection:0}),Tt})()},50237:(ee,yt,a)=>{a.d(yt,{y:()=>tt});var T=a(84614),r=a(14309),E=a(74788),b=a(12057),p=a(76189),Y=a(67446),R=a(29070),X=a(54255),j=a(15491),Ct=a(219);function dt(vt,gt){if(1&vt){const Tt=E.EpF();E.TgZ(0,"button",1),E.NdJ("click",function(){return E.CHM(Tt),E.oxw().setDetails()}),E.qZA()}2&vt&&E.Q6J("tuiHint",gt.ngIf.setDetails)("tuiHintDescribe","")("focusable",!1)}let tt=(()=>{class vt{constructor(Tt,Ut){this.editor=Tt,this.texts$=Ut}setDetails(){this.editor.setDetails()}}return vt.\u0275fac=function(Tt){return new(Tt||vt)(E.Y36(T.$3),E.Y36(r.rf))},vt.\u0275cmp=E.Xpm({type:vt,selectors:[["tui-details"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","click"]],template:function(Tt,Ut){1&Tt&&(E.YNc(0,dt,1,3,"button",0),E.ALo(1,"async")),2&Tt&&E.Q6J("ngIf",E.lcZ(1,1,Ut.texts$))},directives:[b.O5,p.v,Y.D,R.x,X.t,j.D,Ct.$],pipes:[b.Ov],encapsulation:2,changeDetection:0}),vt})()},84985:(ee,yt,a)=>{a.d(yt,{m:()=>_t});var T=a(84614),r=a(14309),E=a(68339),b=a(88002),p=a(74788),Y=a(62939),R=a(76189),X=a(67446),j=a(29070),Ct=a(54255),dt=a(15491),tt=a(219),vt=a(20933),gt=a(12057),Tt=a(35065);function Ut(ut,ht){if(1&ut){const Z=p.EpF();p.TgZ(0,"button",5),p.NdJ("click",function(){const Nt=p.CHM(Z).$implicit;return p.oxw(2).onClick(Nt)}),p.ALo(1,"lowercase"),p._uU(2),p.qZA()}if(2&ut){const Z=ht.$implicit;p.Udp("font-family",Z.family)("font-size",Z.px,"px")("font-weight",Z.weight),p.uIk("automation-id","tui_font__"+p.lcZ(1,8,Z.name||"")),p.xp6(2),p.hij(" ",Z.name," ")}}function At(ut,ht){if(1&ut&&(p.TgZ(0,"tui-data-list"),p.YNc(1,Ut,3,10,"button",4),p.ALo(2,"async"),p.qZA()),2&ut){const Z=p.oxw();p.xp6(1),p.Q6J("ngForOf",p.lcZ(2,1,Z.fontsOptions$))}}let _t=(()=>{class ut{constructor(Z,Ot,bt,Nt){this.options=Z,this.editor=Ot,this.texts$=bt,this.fontOptionsTexts$=Nt,this.fontsOptions$=this.fontOptionsTexts$.pipe((0,b.U)(Ht=>this.options.fontOptions(Ht))),this.fontText$=this.texts$.pipe((0,b.U)(Ht=>Ht.font))}onClick({headingLevel:Z,px:Ot}){Z?this.editor.setHeading(Z):this.editor.setParagraph({fontSize:(0,E.tuiPx)(Ot||0)})}}return ut.\u0275fac=function(Z){return new(Z||ut)(p.Y36(r.mJ),p.Y36(T.$3),p.Y36(r.rf),p.Y36(r.UN))},ut.\u0275cmp=p.Xpm({type:ut,selectors:[["tui-font-size"]],decls:6,vars:7,consts:[[3,"content"],["fonts",""],["tuiIconButton","","type","button","size","s","appearance","icon","icon","tuiIconFontLarge","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["fontsDropdown",""],["tuiOption","",3,"fontFamily","fontSize","fontWeight","click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(Z,Ot){if(1&Z&&(p.TgZ(0,"tui-hosted-dropdown",0,1),p._UZ(2,"button",2),p.ALo(3,"async"),p.YNc(4,At,3,3,"ng-template",null,3,p.W1O),p.qZA()),2&Z){const bt=p.MAs(1),Nt=p.MAs(5);p.Q6J("content",Nt),p.xp6(2),p.Q6J("tuiHint",p.lcZ(3,5,Ot.fontText$))("tuiHintDescribe","")("pseudoActive",bt.open)("focusable",bt.open)}},directives:[Y.o,R.v,X.D,j.x,Ct.t,dt.D,tt.$,vt.q,gt.sg,Tt.v],pipes:[gt.Ov,gt.i8],encapsulation:2,changeDetection:0}),ut})()},62976:(ee,yt,a)=>{a.d(yt,{h:()=>bt});var T=a(19074),r=a(84614),E=a(48699),b=a(14309),p=a(9112),Y=a(88002),R=a(74788),X=a(12057),j=a(62939),Ct=a(76189),dt=a(67446),tt=a(29070),vt=a(54255),gt=a(15491),Tt=a(219);function Ut(Nt,Ht){if(1&Nt){const xt=R.EpF();R.TgZ(0,"button",11),R.NdJ("click",function(){return R.CHM(xt),R.oxw(4).editor.toggleBold()}),R.qZA()}if(2&Nt){const xt=R.oxw(2).ngIf,Wt=R.oxw().ngIf;R.Q6J("tuiHint",Wt.bold)("pseudoActive",xt.bold)}}function At(Nt,Ht){if(1&Nt){const xt=R.EpF();R.TgZ(0,"button",12),R.NdJ("click",function(){return R.CHM(xt),R.oxw(4).editor.toggleItalic()}),R.qZA()}if(2&Nt){const xt=R.oxw(2).ngIf,Wt=R.oxw().ngIf;R.Q6J("tuiHint",Wt.italic)("pseudoActive",xt.italic)}}function _t(Nt,Ht){if(1&Nt){const xt=R.EpF();R.TgZ(0,"button",13),R.NdJ("click",function(){return R.CHM(xt),R.oxw(4).editor.toggleUnderline()}),R.qZA()}if(2&Nt){const xt=R.oxw(2).ngIf,Wt=R.oxw().ngIf;R.Q6J("tuiHint",Wt.underline)("pseudoActive",xt.underline)}}function ut(Nt,Ht){if(1&Nt){const xt=R.EpF();R.TgZ(0,"button",14),R.NdJ("click",function(){return R.CHM(xt),R.oxw(4).editor.toggleStrike()}),R.qZA()}if(2&Nt){const xt=R.oxw(2).ngIf,Wt=R.oxw().ngIf;R.Q6J("tuiHint",Wt.strikeThrough)("pseudoActive",xt.strike)}}function ht(Nt,Ht){if(1&Nt&&(R.TgZ(0,"div",6),R.YNc(1,Ut,1,2,"button",7),R.YNc(2,At,1,2,"button",8),R.YNc(3,_t,1,2,"button",9),R.YNc(4,ut,1,2,"button",10),R.qZA()),2&Nt){const xt=R.oxw(3);R.xp6(1),R.Q6J("ngIf",xt.isEnabled(xt.TuiEditorTool.Bold)),R.xp6(1),R.Q6J("ngIf",xt.isEnabled(xt.TuiEditorTool.Italic)),R.xp6(1),R.Q6J("ngIf",xt.isEnabled(xt.TuiEditorTool.Underline)),R.xp6(1),R.Q6J("ngIf",xt.isEnabled(xt.TuiEditorTool.Strikethrough))}}function Z(Nt,Ht){if(1&Nt&&(R.TgZ(0,"tui-hosted-dropdown",2,3),R._UZ(2,"button",4),R.YNc(3,ht,5,4,"ng-template",null,5,R.W1O),R.qZA()),2&Nt){const xt=Ht.ngIf,Wt=R.MAs(1),Yt=R.MAs(4),qt=R.oxw().ngIf;R.Q6J("content",Yt),R.xp6(2),R.Q6J("tuiHint",qt.fontStyle)("tuiHintDescribe","")("pseudoActive",Wt.open||xt.bold||xt.italic||xt.underline||xt.strike)("focusable",Wt.open)}}function Ot(Nt,Ht){if(1&Nt&&(R.ynx(0),R.YNc(1,Z,5,5,"tui-hosted-dropdown",1),R.ALo(2,"async"),R.BQk()),2&Nt){const xt=R.oxw();R.xp6(1),R.Q6J("ngIf",R.lcZ(2,1,xt.fontStyleState$))}}let bt=(()=>{class Nt{constructor(xt,Wt){this.editor=xt,this.texts$=Wt,this.toolsSet=new Set(T.Db),this.TuiEditorTool=E._,this.fontStyleState$=(0,p.aj)([this.editor.isActive$("bold"),this.editor.isActive$("italic"),this.editor.isActive$("underline"),this.editor.isActive$("strike")]).pipe((0,Y.U)(([Yt,qt,ft,k])=>({bold:Yt,italic:qt,underline:ft,strike:k})))}set enabledTools(xt){this.toolsSet=new Set(xt)}isEnabled(xt){return this.toolsSet.has(xt)}}return Nt.\u0275fac=function(xt){return new(xt||Nt)(R.Y36(r.$3),R.Y36(b.rf))},Nt.\u0275cmp=R.Xpm({type:Nt,selectors:[["tui-font-style"]],inputs:{enabledTools:"enabledTools"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"ngIf"],[3,"content"],["format",""],["tuiIconButton","","type","button","size","s","icon","tuiIconFormatLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__font-style-button",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["formatDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"]],template:function(xt,Wt){1&xt&&(R.YNc(0,Ot,3,3,"ng-container",0),R.ALo(1,"async")),2&xt&&R.Q6J("ngIf",R.lcZ(1,1,Wt.texts$))},directives:[X.O5,j.o,Ct.v,dt.D,tt.x,vt.t,gt.D,Tt.$],pipes:[X.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),Nt})()},19762:(ee,yt,a)=>{a.d(yt,{d:()=>vt});var T=a(84614),r=a(14309),E=a(88002),b=a(87519),p=a(74788),Y=a(76189),R=a(67446),X=a(29070),j=a(54255),Ct=a(15491),dt=a(219),tt=a(12057);let vt=(()=>{class gt{constructor(Ut,At){this.editor=Ut,this.texts$=At,this.insertGroupText$=this.texts$.pipe((0,E.U)(_t=>_t.insertGroup)),this.removeGroupText$=this.texts$.pipe((0,E.U)(_t=>_t.removeGroup)),this.disabled$=this.editor.stateChange$.pipe((0,E.U)(()=>!this.editor.isActive("group")),(0,b.x)())}addGroup(){this.editor.setGroup()}removeGroup(){this.editor.removeGroup()}}return gt.\u0275fac=function(Ut){return new(Ut||gt)(p.Y36(T.$3),p.Y36(r.rf))},gt.\u0275cmp=p.Xpm({type:gt,selectors:[["tui-editor-group-tool"]],decls:5,vars:13,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconPlusLarge","appearance","icon",3,"focusable","tuiHint","tuiHintDescribe","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconRemoveLarge","appearance","icon",3,"focusable","disabled","tuiHint","tuiHintDescribe","click"]],template:function(Ut,At){1&Ut&&(p.TgZ(0,"button",0),p.NdJ("click",function(){return At.addGroup()}),p.ALo(1,"async"),p.qZA(),p.TgZ(2,"button",1),p.NdJ("click",function(){return At.removeGroup()}),p.ALo(3,"async"),p.ALo(4,"async"),p.qZA()),2&Ut&&(p.Q6J("focusable",!1)("tuiHint",p.lcZ(1,7,At.insertGroupText$))("tuiHintDescribe",""),p.xp6(2),p.Q6J("focusable",!1)("disabled",!!p.lcZ(3,9,At.disabled$))("tuiHint",p.lcZ(4,11,At.removeGroupText$))("tuiHintDescribe",""))},directives:[Y.v,R.D,X.x,j.t,Ct.D,dt.$],pipes:[tt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),gt})()},7416:(ee,yt,a)=>{a.d(yt,{U:()=>bt});var T=a(64762),r=a(84614),E=a(14309),b=a(68339),p=a(88002),Y=a(87519),R=a(74788),X=a(40939),j=a(62939),Ct=a(33250),dt=a(76189),tt=a(67446),vt=a(29070),gt=a(54255),Tt=a(15491),Ut=a(219),At=a(12057),_t=a(5451),ut=a(17163);function ht(Nt,Ht){if(1&Nt&&R._UZ(0,"div",6),2&Nt){const xt=R.oxw().tuiLet;R.Udp("background",xt)}}function Z(Nt,Ht){if(1&Nt){const xt=R.EpF();R.TgZ(0,"tui-palette",7),R.NdJ("selectedColor",function(Yt){return R.CHM(xt),R.oxw(2).editor.setBackgroundColor(Yt)}),R.qZA()}if(2&Nt){const xt=Ht.$implicit,Wt=R.oxw(2);R.Q6J("tuiActiveZoneParent",xt)("colors",Wt.colors)}}function Ot(Nt,Ht){if(1&Nt&&(R.TgZ(0,"tui-hosted-dropdown",1,2),R._UZ(2,"button",3),R.ALo(3,"async"),R.YNc(4,ht,1,2,"div",4),R.YNc(5,Z,1,2,"ng-template",null,5,R.W1O),R.qZA()),2&Nt){const xt=Ht.tuiLet,Wt=R.MAs(1),Yt=R.MAs(6),qt=R.oxw();R.Q6J("content",Yt)("tuiDropdownMaxHeight",999),R.xp6(2),R.Q6J("tuiHint",R.lcZ(3,7,qt.backColorText$))("tuiHintDescribe","")("pseudoActive",Wt.open)("focusable",Wt.open),R.xp6(2),R.Q6J("ngIf",!qt.isBlankColor(xt||""))}}class bt{constructor(Ht,xt,Wt){this.editor=Ht,this.texts$=xt,this.defaultOptions=Wt,this.colors=this.defaultOptions.colors,this.backgroundColor$=this.editor.stateChange$.pipe((0,p.U)(()=>this.editor.getBackgroundColor()||this.defaultOptions.blankColor),(0,Y.x)()),this.backColorText$=this.texts$.pipe((0,p.U)(Yt=>Yt.backColor))}isBlankColor(Ht){return Ht===this.defaultOptions.blankColor}}bt.\u0275fac=function(Ht){return new(Ht||bt)(R.Y36(r.$3),R.Y36(E.rf),R.Y36(E.mJ))},bt.\u0275cmp=R.Xpm({type:bt,selectors:[["tui-highlight-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["hilite",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconHiliteLarge","automation-id","toolbar__hilite-button",1,"t-tool",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["class","t-plate",3,"background",4,"ngIf"],["hiliteDropdown",""],[1,"t-plate"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(Ht,xt){1&Ht&&(R.YNc(0,Ot,7,9,"tui-hosted-dropdown",0),R.ALo(1,"async")),2&Ht&&R.Q6J("tuiLet",R.lcZ(1,1,xt.backgroundColor$))},directives:[X.L,j.o,Ct.Ek,dt.v,tt.D,vt.x,gt.t,Tt.D,Ut.$,At.O5,_t.R,ut.e],pipes:[At.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,T.gn)([(0,b.tuiDefaultProp)()],bt.prototype,"colors",void 0)},93252:(ee,yt,a)=>{a.d(yt,{Xp:()=>T.X,pu:()=>Y,Tf:()=>R.T,P_:()=>X,yj:()=>j.y,y9:()=>Ct,Un:()=>dt.U,dN:()=>Ut.d,jP:()=>At,mK:()=>tt.m,p7:()=>vt,hr:()=>gt.h,Zv:()=>Tt,UT:()=>_t.U,XC:()=>ht,w2:()=>Z.w,Ur:()=>Ot,pH:()=>bt.p,mp:()=>Nt,iN:()=>k.i,lT:()=>Ht.l,iA:()=>Yt,YH:()=>qt.Y,er:()=>ft,_I:()=>k._,__:()=>st,M8:()=>xt.M,kU:()=>Wt,G0:()=>ot.G,_t:()=>at});var T=a(37924),r=a(12057),E=a(68339),b=a(76040),p=a(74788);let Y=(()=>{class J{}return J.\u0275fac=function(rt){return new(rt||J)},J.\u0275mod=p.oAB({type:J}),J.\u0275inj=p.cJS({imports:[[r.ez,b.TuiHostedDropdownModule,b.TuiButtonModule,b.TuiHintModule,E.TuiLetModule]]}),J})();var R=a(15587);let X=(()=>{class J{}return J.\u0275fac=function(rt){return new(rt||J)},J.\u0275mod=p.oAB({type:J}),J.\u0275inj=p.cJS({imports:[[r.ez,b.TuiHostedDropdownModule,b.TuiButtonModule,b.TuiHintModule,b.TuiDataListModule]]}),J})();var j=a(50237);let Ct=(()=>{class J{}return J.\u0275fac=function(rt){return new(rt||J)},J.\u0275mod=p.oAB({type:J}),J.\u0275inj=p.cJS({imports:[[r.ez,b.TuiButtonModule,b.TuiHintModule]]}),J})();var dt=a(18832),tt=a(84985);let vt=(()=>{class J{}return J.\u0275fac=function(rt){return new(rt||J)},J.\u0275mod=p.oAB({type:J}),J.\u0275inj=p.cJS({imports:[[r.ez,b.TuiHostedDropdownModule,b.TuiButtonModule,b.TuiHintModule,b.TuiDataListModule]]}),J})();var gt=a(62976);let Tt=(()=>{class J{}return J.\u0275fac=function(rt){return new(rt||J)},J.\u0275mod=p.oAB({type:J}),J.\u0275inj=p.cJS({imports:[[r.ez,b.TuiHostedDropdownModule,b.TuiButtonModule,b.TuiHintModule]]}),J})();var Ut=a(19762);let At=(()=>{class J{}return J.\u0275fac=function(rt){return new(rt||J)},J.\u0275mod=p.oAB({type:J}),J.\u0275inj=p.cJS({imports:[[r.ez,b.TuiButtonModule,b.TuiHintModule]]}),J})();var _t=a(7416),ut=a(27050);let ht=(()=>{class J{}return J.\u0275fac=function(rt){return new(rt||J)},J.\u0275mod=p.oAB({type:J}),J.\u0275inj=p.cJS({imports:[[r.ez,b.TuiHostedDropdownModule,b.TuiButtonModule,ut.VM,b.TuiHintModule,b.TuiDropdownModule,E.TuiActiveZoneModule,E.TuiLetModule]]}),J})();var Z=a(13441);let Ot=(()=>{class J{}return J.\u0275fac=function(rt){return new(rt||J)},J.\u0275mod=p.oAB({type:J}),J.\u0275inj=p.cJS({imports:[[r.ez,b.TuiHostedDropdownModule,b.TuiButtonModule,b.TuiHintModule,E.TuiLetModule]]}),J})();var bt=a(95558);let Nt=(()=>{class J{}return J.\u0275fac=function(rt){return new(rt||J)},J.\u0275mod=p.oAB({type:J}),J.\u0275inj=p.cJS({imports:[[r.ez,b.TuiHostedDropdownModule,ut.VM,b.TuiButtonModule,b.TuiHintModule,E.TuiActiveZoneModule,b.TuiDropdownModule,E.TuiLetModule]]}),J})();var Ht=a(28962),xt=a(74549);let Wt=(()=>{class J{}return J.\u0275fac=function(rt){return new(rt||J)},J.\u0275mod=p.oAB({type:J}),J.\u0275inj=p.cJS({imports:[[r.ez,E.TuiRepeatTimesModule]]}),J})(),Yt=(()=>{class J{}return J.\u0275fac=function(rt){return new(rt||J)},J.\u0275mod=p.oAB({type:J}),J.\u0275inj=p.cJS({imports:[[r.ez,b.TuiHostedDropdownModule,b.TuiDropdownModule,b.TuiButtonModule,b.TuiHintModule,Wt]]}),J})();var qt=a(76965);let ft=(()=>{class J{}return J.\u0275fac=function(rt){return new(rt||J)},J.\u0275mod=p.oAB({type:J}),J.\u0275inj=p.cJS({imports:[[r.ez,b.TuiButtonModule,b.TuiHintModule,E.TuiLetModule]]}),J})();var k=a(22063);let st=(()=>{class J{}return J.\u0275fac=function(rt){return new(rt||J)},J.\u0275mod=p.oAB({type:J}),J.\u0275inj=p.cJS({imports:[[r.ez,b.TuiHostedDropdownModule,b.TuiHintModule,b.TuiButtonModule,b.TuiDataListModule,E.TuiLetModule]]}),J})();var ot=a(10528);let at=(()=>{class J{}return J.\u0275fac=function(rt){return new(rt||J)},J.\u0275mod=p.oAB({type:J}),J.\u0275inj=p.cJS({imports:[[r.ez,b.TuiButtonModule,b.TuiHostedDropdownModule,b.TuiDropdownModule,b.TuiHintModule,ut.VM,E.TuiActiveZoneModule,E.TuiLetModule]]}),J})()},13441:(ee,yt,a)=>{a.d(yt,{w:()=>_t});var T=a(84614),r=a(14309),E=a(9112),b=a(88002),p=a(74788),Y=a(12057),R=a(40939),X=a(62939),j=a(76189),Ct=a(67446),dt=a(29070),tt=a(54255),vt=a(15491),gt=a(219);function Tt(ut,ht){if(1&ut){const Z=p.EpF();p.TgZ(0,"div",6),p.TgZ(1,"button",7),p.NdJ("click",function(){return p.CHM(Z),p.oxw(3).editor.toggleUnorderedList()}),p.qZA(),p.TgZ(2,"button",8),p.NdJ("click",function(){return p.CHM(Z),p.oxw(3).editor.toggleOrderedList()}),p.qZA(),p.TgZ(3,"button",9),p.NdJ("click",function(){return p.CHM(Z),p.oxw(3).sinkListItem()}),p.qZA(),p.TgZ(4,"button",10),p.NdJ("click",function(){return p.CHM(Z),p.oxw(3).liftListItem()}),p.qZA(),p.qZA()}if(2&ut){const Z=p.oxw().tuiLet,Ot=p.oxw().ngIf;p.xp6(1),p.Q6J("tuiHint",Ot.unorderedList)("pseudoActive",!(null==Z||!Z.unordered)),p.xp6(1),p.Q6J("tuiHint",Ot.orderedList)("pseudoActive",!(null==Z||!Z.ordered)),p.xp6(1),p.Q6J("tuiHint",Ot.indent)("disabled",!(null!=Z&&Z.ordered||null!=Z&&Z.unordered)),p.xp6(1),p.Q6J("tuiHint",Ot.outdent)("disabled",!(null!=Z&&Z.ordered||null!=Z&&Z.unordered))}}function Ut(ut,ht){if(1&ut&&(p.TgZ(0,"tui-hosted-dropdown",2,3),p._UZ(2,"button",4),p.YNc(3,Tt,5,8,"ng-template",null,5,p.W1O),p.qZA()),2&ut){const Z=ht.tuiLet,Ot=p.MAs(1),bt=p.MAs(4),Nt=p.oxw().ngIf;p.Q6J("content",bt),p.xp6(2),p.Q6J("tuiHint",Nt.list)("tuiHintDescribe","")("pseudoActive",(null==Ot?null:Ot.open)||(null==Z?null:Z.unordered)||(null==Z?null:Z.ordered)||!1)("focusable",Ot.open)}}function At(ut,ht){if(1&ut&&(p.ynx(0),p.YNc(1,Ut,5,5,"tui-hosted-dropdown",1),p.ALo(2,"async"),p.BQk()),2&ut){const Z=p.oxw();p.xp6(1),p.Q6J("tuiLet",p.lcZ(2,1,Z.listState$))}}let _t=(()=>{class ut{constructor(Z,Ot){this.editor=Z,this.texts$=Ot,this.listState$=(0,E.aj)([this.editor.isActive$("orderedList"),this.editor.isActive$("bulletList")]).pipe((0,b.U)(([bt,Nt])=>({ordered:bt,unordered:Nt})))}sinkListItem(){this.editor.sinkListItem()}liftListItem(){this.editor.liftListItem()}}return ut.\u0275fac=function(Z){return new(Z||ut)(p.Y36(T.$3),p.Y36(r.rf))},ut.\u0275cmp=p.Xpm({type:ut,selectors:[["tui-list-configs"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["list",""],["tuiIconButton","","type","button","size","s","icon","tuiIconViewListLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__ordering-list-button",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["listDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconViewListLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOLLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconIndentLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","disabled","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOutdentLarge","appearance","icon",1,"t-option",3,"tuiHint","disabled","click"]],template:function(Z,Ot){1&Z&&(p.YNc(0,At,3,3,"ng-container",0),p.ALo(1,"async")),2&Z&&p.Q6J("ngIf",p.lcZ(1,1,Ot.texts$))},directives:[Y.O5,R.L,X.o,j.v,Ct.D,dt.x,tt.t,vt.D,gt.$],pipes:[Y.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),ut})()},95558:(ee,yt,a)=>{a.d(yt,{p:()=>Ht});var T=a(64762),r=a(84614),E=a(14309),b=a(68339),p=a(9112),Y=a(88002),R=a(87519),X=a(74788),j=a(40939),Ct=a(62939),dt=a(33250),tt=a(76189),vt=a(67446),gt=a(29070),Tt=a(54255),Ut=a(15491),At=a(219),_t=a(12057),ut=a(5451),ht=a(17163);function Z(xt,Wt){if(1&xt&&X._UZ(0,"div",7),2&xt){const Yt=X.oxw(2).tuiLet;X.Udp("background",Yt)}}function Ot(xt,Wt){if(1&xt){const Yt=X.EpF();X.TgZ(0,"tui-palette",8),X.NdJ("selectedColor",function(ft){X.CHM(Yt),X.oxw();const k=X.MAs(1);return X.oxw(2).setCellColor(ft),k.close()}),X.qZA()}if(2&xt){const Yt=Wt.$implicit,qt=X.oxw(3);X.Q6J("tuiActiveZoneParent",Yt)("colors",qt.colors)}}function bt(xt,Wt){if(1&xt&&(X.TgZ(0,"tui-hosted-dropdown",2,3),X._UZ(2,"button",4),X.ALo(3,"async"),X.YNc(4,Z,1,2,"div",5),X.YNc(5,Ot,1,2,"ng-template",null,6,X.W1O),X.qZA()),2&xt){const Yt=Wt.tuiLet,qt=X.MAs(1),ft=X.MAs(6),k=X.oxw().tuiLet,st=X.oxw();X.Q6J("content",ft)("tuiDropdownMaxHeight",999)("canOpen",!!Yt),X.xp6(2),X.Q6J("tuiHint",X.lcZ(3,9,st.colorText$))("tuiHintDescribe","")("pseudoActive",qt.open)("focusable",qt.open)("disabled",!Yt),X.xp6(2),X.Q6J("ngIf",!st.isBlankColor(k||""))}}function Nt(xt,Wt){if(1&xt&&(X.ynx(0),X.YNc(1,bt,7,11,"tui-hosted-dropdown",1),X.ALo(2,"async"),X.BQk()),2&xt){const Yt=X.oxw();X.xp6(1),X.Q6J("tuiLet",X.lcZ(2,1,Yt.isActive$))}}class Ht{constructor(Wt,Yt,qt){this.defaultOptions=Wt,this.editor=Yt,this.texts$=qt,this.colors=this.defaultOptions.colors,this.colorText$=this.texts$.pipe((0,Y.U)(ft=>this.editor.isActive("group")&&ft.hiliteGroup||this.editor.isActive("table")&&ft.cellColor||"")),this.isActive$=(0,p.aj)([this.editor.isActive$("table"),this.editor.isActive$("group")]).pipe((0,Y.U)(([ft,k])=>ft||k)),this.color$=this.editor.stateChange$.pipe((0,Y.U)(()=>this.editor.getCellColor()||this.editor.getGroupColor()||this.defaultOptions.blankColor),(0,R.x)())}isBlankColor(Wt){return Wt===this.defaultOptions.blankColor}setCellColor(Wt){this.editor.isActive("group")?this.editor.setGroupHilite(Wt):this.editor.isActive("table")&&this.editor.setCellColor(Wt)}}Ht.\u0275fac=function(Wt){return new(Wt||Ht)(X.Y36(E.mJ),X.Y36(r.$3),X.Y36(E.rf))},Ht.\u0275cmp=X.Xpm({type:Ht,selectors:[["tui-table-cell-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen"],["colorSelect",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconPaintLarge",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","disabled"],["class","t-plate t-plate_paint",3,"background",4,"ngIf"],["cellColorDropdown",""],[1,"t-plate","t-plate_paint"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(Wt,Yt){1&Wt&&(X.YNc(0,Nt,3,3,"ng-container",0),X.ALo(1,"async")),2&Wt&&X.Q6J("tuiLet",X.lcZ(1,1,Yt.color$))},directives:[j.L,Ct.o,dt.Ek,tt.v,vt.D,gt.x,Tt.t,Ut.D,At.$,_t.O5,ut.R,ht.e],pipes:[_t.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,T.gn)([(0,b.tuiDefaultProp)()],Ht.prototype,"colors",void 0)},28962:(ee,yt,a)=>{a.d(yt,{l:()=>Ut});var T=a(84614),r=a(14309),E=a(88002),b=a(74788),p=a(62939),Y=a(33250),R=a(76189),X=a(67446),j=a(29070),Ct=a(54255),dt=a(15491),tt=a(219),vt=a(74549),gt=a(12057);function Tt(At,_t){if(1&At){const ut=b.EpF();b.TgZ(0,"tui-table-size-selector",4),b.NdJ("onSelectSize",function(Z){return b.CHM(ut),b.oxw().addTable(Z)}),b.qZA()}}let Ut=(()=>{class At{constructor(ut,ht){this.editor=ut,this.texts$=ht,this.insertTableText$=this.texts$.pipe((0,E.U)(Z=>Z.insertTable))}addTable({rows:ut,cols:ht}){this.editor.enter();const Z=this.editor.state.selection.anchor;this.editor.enter(),this.editor.enter(),this.editor.setTextSelection(Z),this.editor.insertTable(ut,ht)}}return At.\u0275fac=function(ut){return new(ut||At)(b.Y36(T.$3),b.Y36(r.rf))},At.\u0275cmp=b.Xpm({type:At,selectors:[["tui-table-create"]],decls:6,vars:6,consts:[["tuiDropdownAlign","left","tuiDropdownDirection","bottom",3,"content"],["table",""],["tuiIconButton","","type","button","size","s","icon","tuiIconTableLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable"],["tableDropdown",""],[3,"onSelectSize"]],template:function(ut,ht){if(1&ut&&(b.TgZ(0,"tui-hosted-dropdown",0,1),b._UZ(2,"button",2),b.ALo(3,"async"),b.qZA(),b.YNc(4,Tt,1,0,"ng-template",null,3,b.W1O)),2&ut){const Z=b.MAs(1),Ot=b.MAs(5);b.Q6J("content",Ot),b.xp6(2),b.Q6J("tuiHint",b.lcZ(3,4,ht.insertTableText$))("tuiHintDescribe","")("focusable",Z.open)}},directives:[p.o,Y.Ek,R.v,X.D,j.x,Ct.t,dt.D,tt.$,vt.M],pipes:[gt.Ov],encapsulation:2,changeDetection:0}),At})()},76965:(ee,yt,a)=>{a.d(yt,{Y:()=>At});var T=a(84614),r=a(14309),E=a(88002),b=a(87519),p=a(74788),Y=a(40939),R=a(12057),X=a(76189),j=a(67446),Ct=a(29070),dt=a(54255),tt=a(15491),vt=a(219);function gt(_t,ut){if(1&_t){const ht=p.EpF();p.TgZ(0,"button",2),p.NdJ("click",function(){p.CHM(ht);const Ot=p.oxw().tuiLet,bt=p.oxw();return Ot.mergeCells?bt.mergeCells():bt.splitCell()}),p.qZA()}if(2&_t){const ht=ut.ngIf,Z=p.oxw().tuiLet;p.Q6J("icon",Z.mergeCells?"tuiIconTableMergeLarge":"tuiIconTableSplitLarge")("tuiHint",Z.mergeCells?ht.mergeCells:ht.splitCells)("tuiHintDescribe","")("focusable",!1)("disabled",!Z.mergeCells&&!Z.splitCells)}}function Tt(_t,ut){if(1&_t&&(p.ynx(0),p.YNc(1,gt,1,5,"button",1),p.ALo(2,"async"),p.BQk()),2&_t){const ht=p.oxw();p.xp6(1),p.Q6J("ngIf",p.lcZ(2,1,ht.texts$))}}const Ut=function(_t,ut){return{mergeCells:_t,splitCells:ut}};let At=(()=>{class _t{constructor(ht,Z){this.editor=ht,this.texts$=Z,this.canMergeCells$=this.editor.stateChange$.pipe((0,E.U)(()=>this.editor.canMergeCells()),(0,b.x)()),this.canSplitCells$=this.editor.stateChange$.pipe((0,E.U)(()=>this.editor.canSplitCells()),(0,b.x)())}mergeCells(){this.editor.mergeCells()}splitCell(){this.editor.splitCell()}}return _t.\u0275fac=function(ht){return new(ht||_t)(p.Y36(T.$3),p.Y36(r.rf))},_t.\u0275cmp=p.Xpm({type:_t,selectors:[["tui-table-merge-cells"]],decls:3,vars:8,consts:[[4,"tuiLet"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left",3,"icon","tuiHint","tuiHintDescribe","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left",3,"icon","tuiHint","tuiHintDescribe","focusable","disabled","click"]],template:function(ht,Z){1&ht&&(p.YNc(0,Tt,3,3,"ng-container",0),p.ALo(1,"async"),p.ALo(2,"async")),2&ht&&p.Q6J("tuiLet",p.WLB(5,Ut,p.lcZ(1,1,Z.canMergeCells$),p.lcZ(2,3,Z.canSplitCells$)))},directives:[Y.L,R.O5,X.v,j.D,Ct.x,dt.t,tt.D,vt.$],pipes:[R.Ov],encapsulation:2,changeDetection:0}),_t})()},22063:(ee,yt,a)=>{a.d(yt,{_:()=>Ot,i:()=>Z});var T=a(84614),r=a(14309),E=a(88002),b=a(74788),p=a(40939),Y=a(62939),R=a(76189),X=a(67446),j=a(29070),Ct=a(54255),dt=a(15491),tt=a(219),vt=a(20933),gt=a(12057),Tt=a(89786),Ut=a(35065);function At(bt,Nt){if(1&bt&&(b.TgZ(0,"tui-hosted-dropdown",2,3),b._UZ(2,"button",4),b.ALo(3,"async"),b.qZA()),2&bt){const Ht=Nt.tuiLet,xt=b.MAs(1),Wt=b.oxw(),Yt=b.MAs(3);b.Q6J("content",Yt)("canOpen",!!Ht),b.xp6(2),b.Q6J("tuiHint",b.lcZ(3,6,Wt.rowsColumnsManagingText$))("tuiHintDescribe","")("focusable",xt.open)("disabled",!Ht)}}function _t(bt,Nt){if(1&bt){const Ht=b.EpF();b.TgZ(0,"button",7),b.NdJ("click",function(){const Yt=b.CHM(Ht).index,qt=b.oxw().index;return b.oxw(2).onTableOption(2*qt+Yt)}),b._uU(1),b.qZA()}if(2&bt){const Ht=Nt.$implicit;b.xp6(1),b.hij(" ",Ht," ")}}function ut(bt,Nt){if(1&bt&&(b.TgZ(0,"tui-opt-group"),b.YNc(1,_t,2,1,"button",6),b.qZA()),2&bt){const Ht=Nt.$implicit;b.xp6(1),b.Q6J("ngForOf",Ht)}}function ht(bt,Nt){if(1&bt&&(b.TgZ(0,"tui-data-list"),b.YNc(1,ut,2,1,"tui-opt-group",5),b.ALo(2,"async"),b.qZA()),2&bt){const Ht=b.oxw();b.xp6(1),b.Q6J("ngForOf",b.lcZ(2,1,Ht.tableCommandTexts$))}}var Z=(()=>{return(bt=Z||(Z={}))[bt.InsertColumnBefore=0]="InsertColumnBefore",bt[bt.InsertColumnAfter=1]="InsertColumnAfter",bt[bt.InsertRowBefore=2]="InsertRowBefore",bt[bt.InsertRowAfter=3]="InsertRowAfter",bt[bt.DeleteColumn=4]="DeleteColumn",bt[bt.DeleteRow=5]="DeleteRow",Z;var bt})();let Ot=(()=>{class bt{constructor(Ht,xt,Wt){this.editor=Ht,this.texts$=xt,this.tableCommandTexts$=Wt,this.commandsRegistry={[Z.InsertColumnAfter]:()=>this.editor.addColumnAfter(),[Z.InsertColumnBefore]:()=>this.editor.addColumnBefore(),[Z.InsertRowAfter]:()=>this.editor.addRowAfter(),[Z.InsertRowBefore]:()=>this.editor.addRowBefore(),[Z.DeleteColumn]:()=>this.editor.deleteColumn(),[Z.DeleteRow]:()=>this.editor.deleteRow()},this.isActive$=this.editor.isActive$("table"),this.rowsColumnsManagingText$=this.texts$.pipe((0,E.U)(Yt=>Yt.rowsColumnsManaging))}onTableOption(Ht){this.commandsRegistry[Ht]()}}return bt.\u0275fac=function(Ht){return new(Ht||bt)(b.Y36(T.$3),b.Y36(r.rf),b.Y36(r.$i))},bt.\u0275cmp=b.Xpm({type:bt,selectors:[["tui-table-row-column-manager"]],decls:4,vars:3,consts:[[3,"content","canOpen",4,"tuiLet"],["tableOptionsDropdown",""],[3,"content","canOpen"],["tableCommand",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAddRowLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","disabled"],[4,"ngFor","ngForOf"],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(Ht,xt){1&Ht&&(b.YNc(0,At,4,8,"tui-hosted-dropdown",0),b.ALo(1,"async"),b.YNc(2,ht,3,3,"ng-template",null,1,b.W1O)),2&Ht&&b.Q6J("tuiLet",b.lcZ(1,1,xt.isActive$))},directives:[p.L,Y.o,R.v,X.D,j.x,Ct.t,dt.D,tt.$,vt.q,gt.sg,Tt.R,Ut.v],pipes:[gt.Ov],encapsulation:2,changeDetection:0}),bt})()},74549:(ee,yt,a)=>{a.d(yt,{M:()=>Ct});var T=a(74788),r=a(62579),E=a(76040),b=a(36097);function p(dt,tt){if(1&dt){const vt=T.EpF();T.TgZ(0,"div",4),T.NdJ("mouseenter",function(Tt){const At=T.CHM(vt).$implicit,_t=T.oxw().$implicit;return T.oxw().updateCurrentSize(At+1,_t+1,Tt)})("click",function(){return T.CHM(vt),T.oxw(2).onClick()}),T.qZA()}if(2&dt){const vt=tt.$implicit,gt=T.oxw().$implicit,Tt=T.oxw();T.ekj("t-cell_hovered",Tt.tableSelectHovered(vt,gt))}}function Y(dt,tt){if(1&dt&&(T.TgZ(0,"div",2),T.YNc(1,p,1,2,"div",3),T.qZA()),2&dt){const vt=T.oxw();T.xp6(1),T.Q6J("tuiRepeatTimesOf",vt.rowsNumber)}}let Ct=(()=>{class dt{constructor(vt){this.windowRef=vt,this.onSelectSize=new T.vpe,this.tableSize={rows:1,cols:1}}get columnsNumber(){return Math.min(Math.max(3,this.tableSize.cols+1),15)}get rowsNumber(){return Math.min(Math.max(3,this.tableSize.rows+1),15)}tableSelectHovered(vt,gt){return vt<this.tableSize.rows&&gt<this.tableSize.cols}updateCurrentSize(vt,gt,Tt){(0,E.tuiGetViewportWidth)(this.windowRef)-Tt.clientX>70&&(this.tableSize={rows:vt,cols:gt})}onClick(){this.onSelectSize.emit(this.tableSize)}}return dt.\u0275fac=function(vt){return new(vt||dt)(T.Y36(r.m9))},dt.\u0275cmp=T.Xpm({type:dt,selectors:[["tui-table-size-selector"]],outputs:{onSelectSize:"onSelectSize"},decls:3,vars:3,consts:[["class","t-column",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-description"],[1,"t-column"],["class","t-cell",3,"t-cell_hovered","mouseenter","click",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-cell",3,"mouseenter","click"]],template:function(vt,gt){1&vt&&(T.YNc(0,Y,2,1,"div",0),T.TgZ(1,"div",1),T._uU(2),T.qZA()),2&vt&&(T.Q6J("tuiRepeatTimesOf",gt.columnsNumber),T.xp6(2),T.AsE("",gt.tableSize.cols,"\xd7",gt.tableSize.rows,""))},directives:[b.X],styles:["[_nghost-%COMP%]{display:block;padding:.75rem}.t-cell[_ngcontent-%COMP%]{display:inline-block;background-color:var(--tui-base-01);width:1.25rem;height:1.25rem;border-radius:.25rem;margin:.125rem;border:1px solid var(--tui-base-04);cursor:pointer}.t-cell_hovered[_ngcontent-%COMP%]{background-color:var(--tui-base-02)}.t-column[_ngcontent-%COMP%]{white-space:nowrap}.t-description[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),dt})()},10528:(ee,yt,a)=>{a.d(yt,{G:()=>Ot});var T=a(64762),r=a(84614),E=a(14309),b=a(68339),p=a(88002),Y=a(87519),R=a(74788),X=a(40939),j=a(62939),Ct=a(33250),dt=a(76189),tt=a(67446),vt=a(29070),gt=a(54255),Tt=a(15491),Ut=a(219),At=a(5451),_t=a(17163),ut=a(12057);function ht(bt,Nt){if(1&bt){const Ht=R.EpF();R.TgZ(0,"tui-palette",6),R.NdJ("selectedColor",function(Wt){return R.CHM(Ht),R.oxw(2).editor.setFontColor(Wt)}),R.qZA()}if(2&bt){const Ht=Nt.$implicit,xt=R.oxw(2);R.Q6J("tuiActiveZoneParent",Ht)("colors",xt.colors)}}function Z(bt,Nt){if(1&bt&&(R.TgZ(0,"tui-hosted-dropdown",1,2),R._UZ(2,"button",3),R.ALo(3,"async"),R._UZ(4,"div",4),R.YNc(5,ht,1,2,"ng-template",null,5,R.W1O),R.qZA()),2&bt){const Ht=Nt.tuiLet,xt=R.MAs(1),Wt=R.MAs(6),Yt=R.oxw();R.Q6J("content",Wt)("tuiDropdownMaxHeight",999),R.xp6(2),R.Q6J("tuiHint",R.lcZ(3,8,Yt.foreColorText$))("tuiHintDescribe","")("pseudoActive",xt.open)("focusable",xt.open),R.xp6(2),R.Udp("background",Ht)}}class Ot{constructor(Nt,Ht,xt){this.defaultOptions=Nt,this.editor=Ht,this.texts$=xt,this.colors=this.defaultOptions.colors,this.fontColor$=this.editor.stateChange$.pipe((0,p.U)(()=>this.editor.getFontColor()||this.defaultOptions.blankColor),(0,Y.x)()),this.foreColorText$=this.texts$.pipe((0,p.U)(Wt=>Wt.foreColor))}}Ot.\u0275fac=function(Nt){return new(Nt||Ot)(R.Y36(E.mJ),R.Y36(r.$3),R.Y36(E.rf))},Ot.\u0275cmp=R.Xpm({type:Ot,selectors:[["tui-text-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["color",""],["tuiIconButton","","type","button","size","s","icon","tuiIconColorLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__color-button",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],[1,"t-plate"],["colorDropdown",""],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(Nt,Ht){1&Nt&&(R.YNc(0,Z,7,10,"tui-hosted-dropdown",0),R.ALo(1,"async")),2&Nt&&R.Q6J("tuiLet",R.lcZ(1,1,Ht.fontColor$))},directives:[X.L,j.o,Ct.Ek,dt.v,tt.D,vt.x,gt.t,Tt.D,Ut.$,At.R,_t.e],pipes:[ut.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,T.gn)([(0,b.tuiDefaultProp)()],Ot.prototype,"colors",void 0)},17406:(ee,yt,a)=>{a.d(yt,{M6:()=>T.M,yB:()=>X,Bp:()=>j.B});var T=a(4997),r=a(12057),E=a(71115),b=a(93252),p=a(68339),Y=a(76040),R=a(74788);let X=(()=>{class Ct{}return Ct.\u0275fac=function(tt){return new(tt||Ct)},Ct.\u0275mod=R.oAB({type:Ct}),Ct.\u0275inj=R.cJS({imports:[[r.ez,Y.TuiHintModule,p.TuiFocusableModule,Y.TuiButtonModule,Y.TuiHostedDropdownModule,E.Fu,b.er,b.mp,b.__,b.iA,b.p7,b.Zv,b.pu,b.Ur,b._t,b.XC,b.P_,b.y9,p.TuiItemModule,b.jP]]}),Ct})();var j=a(13044)},13044:(ee,yt,a)=>{a.d(yt,{B:()=>E});var T=a(74788),r=a(68339);let E=(()=>{class b{constructor(Y){this.elementRef=Y}get toolsContainers(){return Array.from(this.elementRef.nativeElement.querySelectorAll("[tuiItem]"))}onHorizontalNavigation(Y){const{toolsContainers:R}=this,X=R.findIndex(r.tuiIsNativeFocusedIn),Ct=R[(0,r.tuiClamp)(X+(Y?-1:1),0,R.length-1)],dt=Y?this.findPreviousTool(Ct):this.findNextTool(Ct);dt&&dt.focus()}findFirstFocusableTool(Y=!1){const R=Y?this.toolsContainers.slice().reverse():this.toolsContainers;for(const X of R){const j=(0,r.tuiIsNativeMouseFocusable)(X)?X:(0,r.tuiGetClosestFocusable)({initial:X,root:X,keyboard:!1});if(j)return j}return null}findPreviousTool(Y){return(0,r.tuiIsNativeMouseFocusable)(Y)?Y:(0,r.tuiGetClosestFocusable)({initial:Y,root:Y,keyboard:!1})||(0,r.tuiGetClosestFocusable)({initial:Y,root:this.elementRef.nativeElement,previous:!0,keyboard:!1})}findNextTool(Y){return(0,r.tuiIsNativeMouseFocusable)(Y)?Y:(0,r.tuiGetClosestFocusable)({initial:Y,root:this.elementRef.nativeElement,keyboard:!1})}}return b.\u0275fac=function(Y){return new(Y||b)(T.Y36(T.SBq))},b.\u0275dir=T.lG2({type:b,selectors:[["","tuiToolbarNavigationManager",""]],hostBindings:function(Y,R){1&Y&&T.NdJ("keydown.arrowRight.prevent",function(){return R.onHorizontalNavigation(!1)})("keydown.arrowLeft.prevent",function(){return R.onHorizontalNavigation(!0)})}}),b})()},4997:(ee,yt,a)=>{a.d(yt,{M:()=>y});var T=a(64762),r=a(74788),E=a(19074),b=a(84614),p=a(48699),Y=a(14309),R=a(68339),X=a(15257),j=a(13044),Ct=a(12057),dt=a(48893),tt=a(76189),vt=a(82707),gt=a(67446),Tt=a(29070),Ut=a(54255),At=a(15491),_t=a(219),ut=a(84985),ht=a(62976),Z=a(37924),Ot=a(13441),bt=a(62939),Nt=a(45050),Ht=a(10528),xt=a(7416),Wt=a(15587),Yt=a(50237),qt=a(18832),ft=a(19762),k=a(95558),st=a(28962),ot=a(22063),at=a(76965);const J=["dropdown"];function V(w,F){1&w&&r.GkF(0)}function rt(w,F){if(1&w){const W=r.EpF();r.TgZ(0,"div",6),r.TgZ(1,"button",7),r.NdJ("click",function(){return r.CHM(W),r.oxw(2).undo()}),r.qZA(),r.TgZ(2,"button",8),r.NdJ("click",function(){return r.CHM(W),r.oxw(2).redo()}),r.qZA(),r.qZA()}if(2&w){const W=r.oxw().ngIf,Mt=r.oxw();r.xp6(1),r.Q6J("tuiHint",W.undo)("tuiHintDescribe","")("disabled",Mt.undoDisabled)("focusable",!1),r.xp6(1),r.Q6J("tuiHint",W.redo)("tuiHintDescribe","")("disabled",Mt.redoDisabled)("focusable",!1)}}function Ft(w,F){1&w&&(r.TgZ(0,"div",6),r._UZ(1,"tui-font-size",9),r.qZA())}function Vt(w,F){if(1&w&&r._UZ(0,"tui-font-style",15),2&w){const W=r.oxw(3);r.Q6J("enabledTools",W.toolsSet)}}function ne(w,F){1&w&&r._UZ(0,"tui-align-content",9)}function he(w,F){1&w&&r._UZ(0,"tui-list-configs",9)}function Qt(w,F){if(1&w){const W=r.EpF();r.TgZ(0,"button",16,17),r.NdJ("click",function(){return r.CHM(W),r.oxw(3).toggleQuote()}),r.qZA()}if(2&w){const W=r.oxw(2).ngIf,Mt=r.oxw();r.Q6J("tuiHint",W.quote)("tuiHintDescribe","")("pseudoActive",Mt.blockquote)("disabled",Mt.unorderedList||Mt.orderedList)("focusable",!1)}}function Ee(w,F){if(1&w){const W=r.EpF();r.TgZ(0,"tui-edit-link",22,23),r.NdJ("addLink",function(Pt){r.CHM(W),r.oxw();const N=r.MAs(1);return r.oxw(3).onLink(N,Pt)})("removeLink",function(){r.CHM(W),r.oxw();const Pt=r.MAs(1);return r.oxw(3).onLink(Pt)}),r.qZA()}}function xe(w,F){if(1&w&&(r.TgZ(0,"tui-hosted-dropdown",18,19),r._UZ(2,"button",20,17),r.YNc(4,Ee,2,0,"ng-template",null,21,r.W1O),r.qZA()),2&w){const W=r.MAs(1),Mt=r.MAs(5),Pt=r.oxw(2).ngIf,N=r.oxw();r.Q6J("canOpen",N.canOpenAnchor)("content",Mt),r.xp6(2),r.Q6J("tuiHint",Pt.link)("tuiHintDescribe","")("pseudoActive",W.open||N.a)("focusable",W.open)}}function we(w,F){if(1&w){const W=r.EpF();r.TgZ(0,"tui-edit-link",28),r.NdJ("addLink",function(Pt){r.CHM(W),r.oxw();const N=r.MAs(1);return r.oxw(3).setAnchor(N,Pt)})("removeLink",function(){return r.CHM(W),r.oxw(4).removeAnchor()}),r.qZA()}2&w&&r.Q6J("anchorMode",!0)}function be(w,F){if(1&w&&(r.TgZ(0,"tui-hosted-dropdown",24,25),r._UZ(2,"button",26),r.YNc(3,we,1,1,"ng-template",null,27,r.W1O),r.qZA()),2&w){const W=r.MAs(1),Mt=r.MAs(4),Pt=r.oxw(2).ngIf,N=r.oxw();r.Q6J("canOpen",N.canOpenAnchor)("content",Mt),r.xp6(2),r.Q6J("focusable",!1)("pseudoActive",W.open||N.jumpAnchor)("tuiHint",Pt.insertAnchor)("tuiHintDescribe","")}}function Ke(w,F){if(1&w){const W=r.EpF();r.ynx(0),r.TgZ(1,"button",29,17),r.NdJ("click",function(){return r.CHM(W),r.MAs(4).click()}),r.qZA(),r.TgZ(3,"input",30,31),r.NdJ("change",function(){r.CHM(W);const Pt=r.MAs(4);return r.oxw(3).onAttach(Pt)}),r.qZA(),r.BQk()}if(2&w){const W=r.oxw(2).ngIf,Mt=r.oxw();r.xp6(1),r.Q6J("tuiHint",W.attach)("tuiHintDescribe","")("focusable",!1),r.xp6(2),r.Q6J("accept",Mt.attachOptions.accept)("multiple",Mt.attachOptions.multiple)("tuiFocusable",!1)}}function Ve(w,F){if(1&w&&(r.TgZ(0,"div",6),r.YNc(1,Vt,1,1,"tui-font-style",10),r.YNc(2,ne,1,0,"tui-align-content",11),r.YNc(3,he,1,0,"tui-list-configs",11),r.YNc(4,Qt,2,5,"button",12),r.YNc(5,xe,6,6,"tui-hosted-dropdown",13),r.YNc(6,be,5,6,"tui-hosted-dropdown",14),r.YNc(7,Ke,5,6,"ng-container",1),r.qZA()),2&w){const W=r.oxw(2);r.xp6(1),r.Q6J("ngIf",W.formatEnabled),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Align)),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.List)),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Quote)),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Link)),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Anchor)),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Attach))}}function Se(w,F){if(1&w){const W=r.EpF();r.TgZ(0,"button",34,17),r.NdJ("click",function(){return r.CHM(W),r.oxw(3).toggleSubscript()}),r.qZA()}if(2&w){const W=r.oxw(2).ngIf,Mt=r.oxw();r.Q6J("tuiHint",W.subscript)("tuiHintDescribe","")("pseudoActive",Mt.subscript)("focusable",!1)}}function Te(w,F){if(1&w){const W=r.EpF();r.TgZ(0,"button",35,17),r.NdJ("click",function(){return r.CHM(W),r.oxw(3).toggleSuperscript()}),r.qZA()}if(2&w){const W=r.oxw(2).ngIf,Mt=r.oxw();r.Q6J("tuiHint",W.superscript)("tuiHintDescribe","")("pseudoActive",Mt.superscript)("focusable",!1)}}function Ne(w,F){if(1&w&&(r.TgZ(0,"div",6),r.YNc(1,Se,2,4,"button",32),r.YNc(2,Te,2,4,"button",33),r.qZA()),2&w){const W=r.oxw(2);r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Sub)),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Sup))}}function Re(w,F){if(1&w&&r._UZ(0,"tui-text-color",37),2&w){const W=r.oxw(3);r.Q6J("colors",W.colors)}}function Be(w,F){if(1&w&&r._UZ(0,"tui-highlight-color",37),2&w){const W=r.oxw(3);r.Q6J("colors",W.colors)}}function Fe(w,F){if(1&w&&(r.TgZ(0,"div",6),r.YNc(1,Re,1,1,"tui-text-color",36),r.YNc(2,Be,1,1,"tui-highlight-color",36),r.qZA()),2&w){const W=r.oxw(2);r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Color)),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Hilite))}}function Le(w,F){1&w&&r._UZ(0,"tui-code",9)}function De(w,F){if(1&w){const W=r.EpF();r.TgZ(0,"button",41,17),r.NdJ("click",function(){return r.CHM(W),r.oxw(3).onTeX()}),r.qZA()}if(2&w){const W=r.oxw(2).ngIf;r.Q6J("tuiHint",W.tex)("tuiHintDescribe","")("focusable",!1)}}function Ze(w,F){if(1&w){const W=r.EpF();r.TgZ(0,"div",42),r.TgZ(1,"button",43,17),r.NdJ("click",function(){return r.CHM(W),r.MAs(4).click()}),r.qZA(),r.TgZ(3,"input",44,45),r.NdJ("change",function(){r.CHM(W);const Pt=r.MAs(4);return r.oxw(3).onImage(Pt)}),r.qZA(),r.qZA()}if(2&w){const W=r.oxw(2).ngIf;r.xp6(1),r.Q6J("tuiHint",W.image)("tuiHintDescribe","")("focusable",!1),r.xp6(2),r.Q6J("tuiFocusable",!1)}}function Oe(w,F){if(1&w){const W=r.EpF();r.TgZ(0,"button",46,17),r.NdJ("click",function(){return r.CHM(W),r.oxw(3).insertHorizontalRule()}),r.qZA()}if(2&w){const W=r.oxw(2).ngIf;r.Q6J("tuiHint",W.insertHorizontalRule)("tuiHintDescribe","")("focusable",!1)}}function Ie(w,F){if(1&w&&(r.TgZ(0,"div",6),r.YNc(1,Le,1,0,"tui-code",11),r.YNc(2,De,2,3,"button",38),r.YNc(3,Ze,5,4,"div",39),r.YNc(4,Oe,2,3,"button",40),r.qZA()),2&w){const W=r.oxw(2);r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Code)),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Tex)),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Img)),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.HR))}}function Qe(w,F){if(1&w){const W=r.EpF();r.TgZ(0,"div",6),r.TgZ(1,"button",47,17),r.NdJ("click",function(){return r.CHM(W),r.oxw(2).removeFormat()}),r.qZA(),r.qZA()}if(2&w){const W=r.oxw().ngIf;r.xp6(1),r.Q6J("tuiHint",W.clear)("tuiHintDescribe","")("focusable",!1)}}function ze(w,F){1&w&&(r.TgZ(0,"div",6),r._UZ(1,"tui-details",48),r._UZ(2,"tui-details-remove",48),r.qZA())}function Ue(w,F){if(1&w&&r._UZ(0,"tui-table-cell-color",37),2&w){const W=r.oxw(3);r.Q6J("colors",W.colors)}}function Ae(w,F){if(1&w&&(r.TgZ(0,"div",6),r._UZ(1,"tui-editor-group-tool",48),r.YNc(2,Ue,1,1,"tui-table-cell-color",36),r.qZA()),2&w){const W=r.oxw(2);r.xp6(2),r.Q6J("ngIf",!W.enabled(W.TuiEditorTool.Table))}}function ve(w,F){if(1&w&&(r.TgZ(0,"div",6),r._UZ(1,"tui-table-create",48),r._UZ(2,"tui-table-row-column-manager",48),r._UZ(3,"tui-table-merge-cells",48),r._UZ(4,"tui-table-cell-color",37),r.qZA()),2&w){const W=r.oxw(2);r.xp6(4),r.Q6J("colors",W.colors)}}function Dt(w,F){if(1&w&&(r.TgZ(0,"section",4),r.YNc(1,rt,3,8,"div",5),r.YNc(2,Ft,2,0,"div",5),r.YNc(3,Ve,8,7,"div",5),r.YNc(4,Ne,3,2,"div",5),r.YNc(5,Fe,3,2,"div",5),r.YNc(6,Ie,5,4,"div",5),r.YNc(7,Qe,3,3,"div",5),r.YNc(8,ze,3,0,"div",5),r.YNc(9,Ae,3,1,"div",5),r.YNc(10,ve,5,1,"div",5),r.TgZ(11,"div",6),r.Hsn(12),r.qZA(),r.qZA()),2&w){const W=r.oxw();r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Undo)),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Size)),r.xp6(1),r.Q6J("ngIf",W.firstBigBlockEnabled),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Sub)||W.enabled(W.TuiEditorTool.Sup)),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Color)||W.enabled(W.TuiEditorTool.Hilite)),r.xp6(1),r.Q6J("ngIf",W.secondBigBlockEnabled),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Clear)),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Details)),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Group)),r.xp6(1),r.Q6J("ngIf",W.enabled(W.TuiEditorTool.Table))}}class y{constructor(F,W,Mt,Pt,N,s,d){this.elementRef=F,this.editor=W,this.imageLoader=Mt,this.attachOptions=Pt,this.filesLoader=N,this.texts$=s,this.defaultOptions=d,this.dropdowns=R.EMPTY_QUERY,this.colors=this.defaultOptions.colors,this.disabled=!1,this.linkAdded=new r.vpe,this.texClicked=new r.vpe,this.fileAttached=new r.vpe,this.TuiEditorTool=p._,this.toolsSet=new Set(E.Db)}set tools(F){this.toolsSet=new Set(F)}get focused(){return(0,R.tuiIsNativeFocusedIn)(this.elementRef.nativeElement)||!!this.dropdowns.find(({nativeElement:F})=>(0,R.tuiIsNativeFocusedIn)(F))}get focusable(){return!this.focused&&!this.disabled}get unorderedList(){return this.editor.isActive("bulletList")}get orderedList(){return this.editor.isActive("orderedList")}get blockquote(){return this.editor.isActive("blockquote")}get a(){return this.editor.isActive("link")}get jumpAnchor(){return this.editor.isActive("jumpAnchor")}get canOpenAnchor(){return!this.a&&!this.jumpAnchor}get undoDisabled(){return this.editor.undoDisabled()}get redoDisabled(){return this.editor.redoDisabled()}get subscript(){return this.editor.isActive("subscript")}get superscript(){return this.editor.isActive("superscript")}get formatEnabled(){return this.enabled(p._.Bold)||this.enabled(p._.Italic)||this.enabled(p._.Underline)||this.enabled(p._.Strikethrough)}get firstBigBlockEnabled(){return this.formatEnabled||this.enabled(p._.Align)||this.enabled(p._.List)||this.enabled(p._.Quote)||this.enabled(p._.Link)||this.enabled(p._.Anchor)||this.enabled(p._.Attach)}get secondBigBlockEnabled(){return this.enabled(p._.Code)||this.enabled(p._.Tex)||this.enabled(p._.Img)||this.enabled(p._.HR)}onMouseDown(F,W){W.closest("button")||(F.preventDefault(),this.editor.focus())}onBottomFocus(){this.focusLast()}onTopFocus(){this.focusFirst()}onImage(F){var W;const Mt=null===(W=F.files)||void 0===W?void 0:W[0];F.value="",Mt&&this.imageLoader(Mt).pipe((0,X.q)(1)).subscribe(Pt=>{this.addImage(Pt)})}onAttach(F){var W;const Mt=Array.from(F.files||[]);F.value="",Mt&&(R.tuiAssert.assert(!!this.filesLoader,"Please provide TUI_ATTACH_FILES_LOADER"),null===(W=this.filesLoader)||void 0===W||W.call(this,Mt).pipe((0,X.q)(1)).subscribe(Pt=>this.fileAttached.emit(Pt)))}onTeX(){this.texClicked.emit()}onLink(F,W){F.open=!1,W&&this.editor.toggleLink(W)}setAnchor(F,W){F.open=!1,W&&(this.editor.setAnchor(W),this.editor.selectClosest())}removeAnchor(){this.editor.removeAnchor()}enabled(F){return this.toolsSet.has(F)}undo(){this.editor.undo()}redo(){this.editor.redo()}insertHorizontalRule(){this.editor.setHorizontalRule()}removeFormat(){this.editor.removeFormat()}toggleOrderedList(){this.editor.toggleOrderedList()}toggleQuote(){this.editor.toggleBlockquote()}toggleSubscript(){this.editor.toggleSubscript()}toggleSuperscript(){this.editor.toggleSuperscript()}addImage(F){this.editor.setImage(F)}focusFirst(){var F;const W=null===(F=this.navigationManager)||void 0===F?void 0:F.findFirstFocusableTool();W&&W.focus()}focusLast(){var F;const W=null===(F=this.navigationManager)||void 0===F?void 0:F.findFirstFocusableTool(!0);W&&W.focus()}}y.\u0275fac=function(F){return new(F||y)(r.Y36(r.SBq,8),r.Y36(b.$3),r.Y36(Y.p7),r.Y36(Y.dR),r.Y36(Y.zc,8),r.Y36(Y.rf),r.Y36(Y.mJ))},y.\u0275cmp=r.Xpm({type:y,selectors:[["tui-toolbar"]],viewQuery:function(F,W){if(1&F&&(r.Gf(j.B,5),r.Gf(J,5,r.SBq)),2&F){let Mt;r.iGM(Mt=r.CRH())&&(W.navigationManager=Mt.first),r.iGM(Mt=r.CRH())&&(W.dropdowns=Mt)}},hostAttrs:["role","toolbar"],hostVars:2,hostBindings:function(F,W){1&F&&r.NdJ("mousedown",function(Pt){return W.onMouseDown(Pt,Pt.target)}),2&F&&r.ekj("_disabled",W.disabled)},inputs:{colors:"colors",disabled:"disabled",tools:"tools"},outputs:{linkAdded:"linkAdded",texClicked:"texClicked",fileAttached:"fileAttached"},ngContentSelectors:["*"],decls:7,vars:8,consts:[["type","button",1,"t-prevent-parent-label-behavior"],[4,"ngIf"],[3,"tuiFocusable","focus"],["tuiToolbarNavigationManager","","class","t-tools-wrapper",4,"ngIf"],["tuiToolbarNavigationManager","",1,"t-tools-wrapper"],["class","t-block",4,"ngIf"],[1,"t-block"],["tuiItem","","tuiIconButton","","type","button","size","s","icon","tuiIconUndoLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","disabled","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconRedoLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","disabled","focusable","click"],["tuiItem","",1,"t-tool","t-wrapper"],["tuiItem","","class","t-tool t-wrapper",3,"enabledTools",4,"ngIf"],["tuiItem","","class","t-tool t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","disabled","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",3,"canOpen","content",4,"ngIf"],["class","t-wrapper",3,"canOpen","content",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"enabledTools"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","disabled","focusable","click"],["button",""],["tuiItem","",1,"t-wrapper",3,"canOpen","content"],["link",""],["tuiIconButton","","type","button","size","s","icon","tuiIconLinkLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["linkDropdown",""],[3,"addLink","removeLink"],["dropdown",""],[1,"t-wrapper",3,"canOpen","content"],["anchor",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAnchorLarge","tuiHintDirection","top-left","appearance","icon",3,"focusable","pseudoActive","tuiHint","tuiHintDescribe"],["anchorDropdown",""],[3,"anchorMode","addLink","removeLink"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconAttachLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click"],["type","file",1,"t-file-upload",3,"accept","multiple","tuiFocusable","change"],["fileUpload",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","click"],["tuiItem","","class","t-tool t-wrapper",3,"colors",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"colors"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool",3,"tuiHint","tuiHintDescribe","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool",3,"tuiHint","tuiHintDescribe","focusable","click"],["tuiItem","",1,"t-wrapper"],["tuiIconButton","","type","button","size","s","icon","tuiIconImgLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool",3,"tuiHint","tuiHintDescribe","focusable","click"],["type","file","accept","image/*",1,"t-image",3,"tuiFocusable","change"],["image",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconClearFormatLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click"],["tuiItem","",1,"t-tool","t-tool_margin"]],template:function(F,W){1&F&&(r.F$t(),r._UZ(0,"button",0),r.YNc(1,V,1,0,"ng-container",1),r.ALo(2,"async"),r.TgZ(3,"div",2),r.NdJ("focus",function(){return W.onTopFocus()}),r.qZA(),r.TgZ(4,"div",2),r.NdJ("focus",function(){return W.onBottomFocus()}),r.qZA(),r.YNc(5,Dt,13,10,"section",3),r.ALo(6,"async")),2&F&&(r.xp6(1),r.Q6J("ngIf",r.lcZ(2,4,W.editor.stateChange$)),r.xp6(2),r.Q6J("tuiFocusable",W.focusable),r.xp6(1),r.Q6J("tuiFocusable",W.focusable),r.xp6(1),r.Q6J("ngIf",r.lcZ(6,6,W.texts$)))},directives:[Ct.O5,dt.t,j.B,tt.v,vt.w,gt.D,Tt.x,Ut.t,At.D,_t.$,ut.m,ht.h,Z.X,Ot.w,bt.o,Nt.l,Ht.G,xt.U,Wt.T,Yt.y,qt.U,ft.d,k.p,st.l,ot._,at.Y],pipes:[Ct.Ov],styles:['.t-tools-wrapper[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;padding:.25rem .75rem;overflow:auto;flex-wrap:wrap;box-shadow:0 .125rem .1875rem rgba(0,0,0,.1)}.t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar, .t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-tools-wrapper._disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:var(--tui-disabled-opacity)}.t-block[_ngcontent-%COMP%]{display:flex;padding:.25rem 0}.t-block[_ngcontent-%COMP%]:not(:last-child):after{content:"";display:block;margin:0 .25rem;width:1px;background:var(--tui-secondary-active)}.t-tool[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}button.t-tool[_ngcontent-%COMP%]:hover, .t-tool[_ngcontent-%COMP%]     button:hover{background:var(--tui-secondary-hover)}.t-tool_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-font[_ngcontent-%COMP%]{padding:.3em 0;outline:none;width:100%;pointer-events:none}.t-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;font-size:0;opacity:0;cursor:pointer}.t-image[_ngcontent-%COMP%]::-webkit-file-upload-button{display:none}.t-file-upload[_ngcontent-%COMP%]{display:none}.t-color-picker[_ngcontent-%COMP%]     tui-hosted-dropdown, .t-color-picker[_ngcontent-%COMP%]     tui-color-picker, .t-color-picker[_ngcontent-%COMP%]     tui-color-edit{display:none}.t-prevent-parent-label-behavior[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),(0,T.gn)([(0,R.tuiDefaultProp)()],y.prototype,"colors",void 0),(0,T.gn)([(0,R.tuiDefaultProp)()],y.prototype,"disabled",void 0),(0,T.gn)([(0,R.tuiDefaultProp)(function(w){return!w.includes(p._.Tex)&&!w.includes(p._.Attach)},"Attach and TeX are not yet implemented in Editor")],y.prototype,"tools",null)},19074:(ee,yt,a)=>{a.d(yt,{hK:()=>r,sw:()=>T,Db:()=>b,RR:()=>p});const T=new Map([["transparent","transparent"],["color-black-300","#333333"],["color-black-200","#666666"],["color-black-100","#909090"],["color-yellow-100","#FFDD2C"],["color-yellow-200","#FCC521"],["color-yellow-300","#FAB618"],["color-gray-100","#f5f5f6"],["color-gray-200","#e7e8ea"],["color-gray-300","#cbcfd3"],["color-gray-400","#959ba4"],["color-gray-500","#79818c"],["color-gray-600","#616871"],["color-light-blue-100","#ecf1f7"],["color-light-blue-200","#e4ebf3"],["color-light-blue-300","#dde4ed"],["color-blue-100","#1771e6"],["color-blue-200","#1464cc"],["color-blue-300","#0953b3"],["color-green-100","#39b54a"],["color-green-200","#2ca53a"],["color-green-300","#168a21"],["color-red-100","#e01f19"],["color-red-200","#d3120e"],["color-red-300","#c40b08"]]),r="rgb(51, 51, 51)";var E=a(48699);const b=[E._.Undo,E._.Size,E._.Bold,E._.Italic,E._.Underline,E._.Align,E._.List,E._.Quote,E._.Link,E._.Anchor,E._.Color,E._.Hilite,E._.Clear,E._.Strikethrough,E._.Code,E._.Img,E._.HR,E._.Sup,E._.Sub,E._.Table,E._.Details];function p(Y){return[{px:13,name:Y.small},{px:15,name:Y.normal},{px:17,name:Y.large},{px:24,family:"var(--tui-font-heading)",name:Y.subtitle,headingLevel:2,weight:"bold"},{px:30,family:"var(--tui-font-heading)",name:Y.title,headingLevel:1,weight:"bold"}]}},60153:(ee,yt,a)=>{a.d(yt,{Z:()=>r});var T=a(74788);let r=(()=>{class E{constructor(){this.imagePreview=new T.vpe}click(p){p instanceof HTMLImageElement&&this.imagePreview.emit(p)}}return E.\u0275fac=function(p){return new(p||E)},E.\u0275dir=T.lG2({type:E,selectors:[["tui-editor-socket","imagePreview",""]],hostAttrs:[1,"_preview-image"],hostBindings:function(p,Y){1&p&&T.NdJ("click",function(X){return Y.click(X.target)})},outputs:{imagePreview:"imagePreview"}}),E})()},84614:(ee,yt,a)=>{a.d(yt,{Zj:()=>T.Z,BN:()=>E,JU:()=>b.JU,mJ:()=>b.mJ,$3:()=>b.$3});var T=a(60153),r=a(74788);let E=(()=>{class p{}return p.\u0275fac=function(R){return new(R||p)},p.\u0275mod=r.oAB({type:p}),p.\u0275inj=r.cJS({}),p})();var b=a(82113)},82113:(ee,yt,a)=>{a.d(yt,{JU:()=>T.J,mJ:()=>E,$3:()=>b.$});var T=a(74982),r=a(74788);let E=(()=>{class p{}return p.\u0275fac=function(R){return new(R||p)},p.\u0275mod=r.oAB({type:p}),p.\u0275inj=r.cJS({}),p})();var b=a(76954)},74982:(ee,yt,a)=>{a.d(yt,{J:()=>Y});var T=a(74788),r=a(14309),E=a(68339),b=a(46782),p=a(76954);let Y=(()=>{class R{constructor(j,Ct,dt,tt,vt,gt){this.elementRef=j,this.renderer=Ct,this.editor=dt,this.editorContainer=tt,this.editorLoaded$=vt,this.valueChange=this.editor.valueChange$,this.stateChange=this.editor.stateChange$,this.editorLoaded$.pipe((0,b.R)(gt)).subscribe(()=>{this.renderer.appendChild(this.elementRef.nativeElement,this.editorContainer)})}set value(j){j!==this.editor.html&&this.editor.setValue(j)}set editable(j){this.editor.editable=j}}return R.\u0275fac=function(j){return new(j||R)(T.Y36(T.SBq),T.Y36(T.Qsj),T.Y36(p.$),T.Y36(r.Y1),T.Y36(r.ZW),T.Y36(E.TuiDestroyService,2))},R.\u0275dir=T.lG2({type:R,selectors:[["","tuiTiptapEditor",""]],inputs:{value:"value",editable:"editable"},outputs:{valueChange:"valueChange",stateChange:"stateChange"},features:[T._Bn([E.TuiDestroyService])]}),R})()},76954:(ee,yt,a)=>{a.d(yt,{$:()=>j});var T=a(77361),r=a(14309),E=a(27863),b=a(39761),p=a(88002),Y=a(87519),X=a(74788);let j=(()=>{class Ct extends T._{constructor(tt){super(),this.editorRef=tt,this.editorRef.subscribe(vt=>{this.editor=vt,vt.on("transaction",()=>{this.stateChange$.next()}),vt.on("update",()=>{const gt=vt.getHTML(),Ut=function(Ct){return Array.isArray(Ct)&&1===Ct.length&&!Ct[0].hasOwnProperty("content")}(vt.getJSON().content)?"":gt;this.valueChange$.next(Ut)})})}get isFocused(){return this.editor.isFocused}get html(){return this.editor.getHTML()}get editable(){return this.editor.isEditable}set editable(tt){this.editor.setEditable(tt)}get state(){return this.editor.state}getOriginTiptapEditor(){return this.editor}undoDisabled(){return!this.editor.can().undo()}redoDisabled(){return!this.editor.can().redo()}getFontColor(){return this.editor.getAttributes("textStyle").fontColor||"rgb(51, 51, 51)"}getBackgroundColor(){var tt;return(null===(tt=this.editor)||void 0===tt?void 0:tt.getAttributes("textStyle").backgroundColor)||"rgb(51, 51, 51)"}getCellColor(){return this.editor.getAttributes("tableCell").background||this.editor.getAttributes("tableHeader").background}getGroupColor(){var tt,vt,gt,Tt;if(this.editor.isActive("group")){const Ut=null!==(vt=null===(tt=this.editor.getAttributes("group"))||void 0===tt?void 0:tt.style)&&void 0!==vt?vt:"",At=(0,E.jx)(Ut);return null!==(Tt=null!==(gt=At["background-color"])&&void 0!==gt?gt:At.background)&&void 0!==Tt?Tt:""}return""}onAlign(tt){this.editor.chain().focus().setTextAlign(tt).run()}setImage(tt){this.editor.chain().focus().first(({commands:vt})=>[()=>{var gt;return(null===(gt=vt.setEditableImage)||void 0===gt?void 0:gt.call(vt,{src:tt}))||!1},()=>vt.setImage({src:tt})]).run()}undo(){this.editor.chain().undo().run()}redo(){this.editor.chain().redo().run()}setHorizontalRule(){this.editor.chain().focus().setHorizontalRule().run()}removeFormat(){this.editor.commands.unsetAllMarks(),this.editor.commands.clearNodes()}setFontColor(tt){this.editor.chain().focus().setFontColor(tt).run()}setBackgroundColor(tt){this.editor.chain().focus().setBackgroundColor(tt).run()}toggleUnderline(){this.editor.chain().focus().toggleUnderline().run()}toggleStrike(){this.editor.chain().focus().toggleStrike().run()}toggleOrderedList(){this.editor.chain().focus().toggleOrderedList().run()}toggleUnorderedList(){this.editor.chain().focus().toggleBulletList().run()}togglePre(){this.editor.chain().focus().toggleCodeBlock().run()}sinkListItem(){this.editor.chain().focus().sinkListItem("listItem").run()}liftListItem(){this.editor.chain().focus().liftListItem("listItem").run()}isActive(tt){return this.editor.isActive(tt)}isActive$(tt){return this.stateChange$.pipe((0,b.O)(null),(0,p.U)(()=>this.isActive(tt)),(0,Y.x)())}toggleBold(){this.editor.chain().focus().toggleBold().run()}toggleCode(){this.editor.chain().focus().toggleCode().run()}toggleItalic(){this.editor.chain().focus().toggleItalic().run()}toggleBlockquote(){this.editor.chain().focus().toggleBlockquote().run()}toggleSubscript(){this.editor.chain().focus().toggleSubscript().run()}toggleSuperscript(){this.editor.chain().focus().toggleSuperscript().run()}toggleCodeBlock(){this.editor.chain().focus().toggleCodeBlock().run()}insertTable(tt,vt){this.editor.chain().focus().insertTable({cols:tt,rows:vt}).run()}addColumnAfter(){this.editor.chain().focus().addColumnAfter().run()}addColumnBefore(){this.editor.chain().focus().addColumnBefore().run()}addRowAfter(){this.editor.chain().focus().addRowAfter().run()}addRowBefore(){this.editor.chain().focus().addRowBefore().run()}deleteColumn(){this.editor.chain().focus().deleteColumn().run()}deleteRow(){this.editor.chain().focus().deleteRow().run()}mergeCells(){this.editor.chain().focus().mergeCells().run()}splitCell(){this.editor.chain().focus().splitCell().run()}canMergeCells(){return this.editor.can().mergeCells()}canSplitCells(){return this.editor.can().splitCell()}setHeading(tt){this.editor.chain().focus().setHeading({level:tt}).run()}setParagraph(tt){this.editor.chain().focus().setParagraph().run(),tt&&this.editor.chain().setMark("textStyle",tt).run()}setHardBreak(){this.editor.chain().setHardBreak().run()}setTextSelection(tt){this.editor.commands.setTextSelection(tt)}toggleLink(tt){this.editor.chain().focus().toggleLink({href:tt}).run()}setLink(tt){this.editor.chain().focus().setLink({href:tt}).run()}unsetLink(){this.editor.chain().focus().unsetLink().run()}focus(){this.editor.chain().focus().run()}setValue(tt){this.editor.commands.setContent(tt)}destroy(){this.editor.destroy()}setCellColor(tt){this.editor.chain().focus().setCellBackground(tt).run()}selectClosest(){const tt=this.editor.state.selection.anchor,{schema:vt,doc:gt}=this.editor.state,Tt=(0,E.Yz)(gt.resolve(tt),vt.marks.link);Tt&&this.editor.chain().setTextSelection(Tt).run()}enter(){this.editor.commands.enter()}setDetails(){this.editor.commands.setDetails()}removeDetails(){this.editor.commands.removeDetails()}setGroup(){this.editor.commands.setGroup()}removeGroup(){this.editor.commands.removeGroup()}setGroupHilite(tt){this.editor.commands.setGroupHilite(tt)}setAnchor(tt){this.editor.commands.setAnchor(tt.replace("#",""))}removeAnchor(){this.editor.commands.removeAnchor()}setFileLink(tt){this.editor.commands.setFileLink(tt)}setYoutubeVideo(tt){this.editor.commands.setYoutubeVideo(tt)}setIframe(tt){this.editor.commands.setIframe(tt)}}return Ct.\u0275fac=function(tt){return new(tt||Ct)(X.LFG(r.ZW))},Ct.\u0275prov=X.Yz7({token:Ct,factory:Ct.\u0275fac}),Ct})()},48699:(ee,yt,a)=>{a.d(yt,{_:()=>T});var T=(()=>{return(r=T||(T={})).Undo="undo",r.Anchor="anchor",r.Size="fontSize",r.Bold="bold",r.Italic="italic",r.Underline="underline",r.Strikethrough="strikeThrough",r.Align="justify",r.List="list",r.Quote="quote",r.Color="foreColor",r.Hilite="hiliteColor",r.Clear="clear",r.Link="link",r.Attach="attach",r.Tex="tex",r.Code="code",r.Img="image",r.HR="insertHorizontalRule",r.Sup="superscript",r.Sub="subscript",r.Table="insertTable",r.MergeCells="mergeCells",r.SplitCells="splitCells",r.RowsColumnsManaging="rowsColumnsManaging",r.Details="details",r.Group="group",T;var r})()},15736:(ee,yt,a)=>{a.r(yt),a.d(yt,{BackgroundColor:()=>E}),a(84402);const E=a(12867).Extension.create({name:"backgroundColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,renderHTML:({backgroundColor:b})=>b?{style:`background-color: ${b}`}:{},parseHTML:({style:b})=>b.backgroundColor.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setBackgroundColor:b=>({chain:p})=>p().setMark("textStyle",{backgroundColor:b}).run(),unsetBackgroundColor:()=>({chain:b})=>b().setMark("textStyle",{backgroundColor:null}).run()})})},93763:(ee,yt,a)=>{a.r(yt),a.d(yt,{TuiFileLink:()=>r});const r=a(12867).Extension.create({name:"fileLink",addCommands:()=>({setFileLink:E=>({state:b,chain:p})=>{const{selection:Y}=b,X='<span style="font-size: 15px"> </span>';return(Math.abs(Y.to-Y.from)>0?p().toggleMark("link",{href:E.link},{extendEmptyMarkRange:!0}).setTextSelection(Y.to).insertContent(X):p().insertContent(`<a href="${E.link}">${E.name}</a>${X}`)).setTextSelection(Y.to).run()}})})},52658:(ee,yt,a)=>{a.r(yt),a.d(yt,{FontColor:()=>E}),a(84402);const E=a(12867).Extension.create({name:"fontColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontColor:{default:null,renderHTML:({fontColor:b})=>b?{style:`color: ${b}`}:{},parseHTML:({style:b})=>b.color.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setFontColor:b=>({chain:p})=>p().setMark("textStyle",{fontColor:b}).run(),unsetFontColor:()=>({chain:b})=>b().setMark("textStyle",{fontColor:null}).run()})})},9492:(ee,yt,a)=>{a.r(yt),a.d(yt,{TuiFontSize:()=>E}),a(84402);const E=a(12867).Extension.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:({style:b})=>b.fontSize,renderHTML:({fontSize:b})=>b?{style:`font-size: ${b}`}:{}}}}]},addCommands:()=>({setFontSize:b=>({chain:p})=>p().setMark("textStyle",{fontSize:b}).run(),unsetFontSize:()=>({chain:b})=>b().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()})})},54920:(ee,yt,a)=>{a.r(yt),a.d(yt,{TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>E,createGroupExtension:()=>b});var T=a(27863),r=a(12867);const E={groupNodeClass:"tui-group-node",groupPointerNodeClass:"tui-group-pointer",nested:!0,draggable:!0,createOnEnter:!1},b=(p={})=>{const{draggable:Y,nested:R,groupNodeClass:X,groupPointerNodeClass:j,createOnEnter:Ct}=Object.assign(Object.assign({},E),p);return r.Node.create({name:"group",draggable:Y,group:"block",content:R?"block+":"block",addAttributes:()=>({style:{default:null,parseHTML:dt=>dt.getAttribute("style"),renderHTML:dt=>dt.style?{style:dt.style}:{}}}),parseHTML:()=>[{tag:'div[data-type="group"]'}],renderHTML:({HTMLAttributes:dt})=>["div",(0,r.mergeAttributes)(dt,{"data-type":"group"}),0],addNodeView:()=>({HTMLAttributes:dt,node:tt})=>{const vt=document.createElement("div"),gt=document.createElement("div");if(vt.classList.add(X),gt.setAttribute("data-type","group"),dt.style&&(tt.attrs.style=dt.style,gt.setAttribute("style",dt.style)),Y){const Tt=document.createElement("div");Tt.classList.add(j),Tt.innerHTML="",Tt.contentEditable="false",vt.append(Tt,gt)}else vt.append(gt);return{dom:vt,contentDOM:gt}},addCommands(){return{setGroup:()=>({commands:dt,state:tt})=>{this.editor.chain().focus().run();const vt=(0,T.Ap)(tt,""),Tt=`<div data-type="group">${vt.trim().startsWith("<p>")?vt:`<p>${vt}</p>`}</div>`;return dt.insertContent(Tt)},setGroupHilite:dt=>({editor:tt})=>{for(let vt=tt.state.selection.$anchor,gt=vt.depth;gt>0;gt--){const Tt=vt.node(gt);if(Tt.type.name===this.name){setTimeout(()=>tt.commands.updateAttributes(Tt.type,{style:`background: ${dt}`}));break}}return!0},removeGroup:()=>({state:dt,dispatch:tt})=>(0,T.yU)(dt,tt,this.name)}},addKeyboardShortcuts(){return Ct?{Enter:()=>this.editor.commands.setGroup()}:{}}})}},20854:(ee,yt,a)=>{a.r(yt),a.d(yt,{TUI_IFRAME_EDITOR_OPTIONS:()=>Y,TuiIframeEditorComponent:()=>X,TuiIframeEditorModule:()=>tt,createIframeEditorExtension:()=>dt});var T=a(12057),r=a(91211),E=a(95110),b=a(68339),p=a(74788);const Y=new p.OlP("[TUI_IFRAME_EDITOR_OPTIONS]: Size of resizable iframe inside editor",{factory:()=>({minWidth:100,maxWidth:1/0,minHeight:100,maxHeight:1/0})});var R=a(96570);let X=(()=>{class vt extends E._3{constructor(Tt,Ut,At,_t){super(Ut,_t),this.options=Tt,this.sanitizer=At}get src(){var Tt;return this.sanitizer.bypassSecurityTrustResourceUrl(null!==(Tt=this.attrs.src)&&void 0!==Tt?Tt:"")}updateSize([Tt,Ut]){this._width=Math.max(this.options.minWidth,Math.min(this.options.maxWidth,Tt)),this._height=Math.max(this.options.minHeight,Math.min(this.options.maxHeight,Ut))}}return vt.\u0275fac=function(Tt){return new(Tt||vt)(p.Y36(Y),p.Y36(T.K0),p.Y36(r.H7),p.Y36(b.TuiDestroyService,2))},vt.\u0275cmp=p.Xpm({type:vt,selectors:[["tui-iframe-editor"]],features:[p._Bn([b.TuiDestroyService]),p.qOj],decls:2,vars:13,consts:[[3,"width","height","sizeChange"],[3,"src","width","height"]],template:function(Tt,Ut){1&Tt&&(p.TgZ(0,"tui-editor-resizable",0),p.NdJ("sizeChange",function(_t){return Ut.updateSize(_t)}),p._UZ(1,"iframe",1),p.qZA()),2&Tt&&(p.Q6J("width",Ut.width)("height",Ut.height),p.xp6(1),p.Udp("min-width",Ut.options.minWidth)("min-height",Ut.options.minHeight)("max-width",Ut.options.maxWidth)("max-height",Ut.options.maxHeight),p.Q6J("src",Ut.src,p.uOi)("width",Ut.width)("height",Ut.height))},directives:[R.V],styles:["iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}"],changeDetection:0}),vt})();var j=a(40400),Ct=a(12867);const dt=vt=>Ct.Node.create({name:"iframe",group:"block",atom:!0,draggable:!1,parseHTML:()=>[{tag:'iframe[data-type="iframe-editor"]'}],addAttributes(){return{src:{default:null,keepOnSplit:!1,parseHTML:gt=>gt.getAttribute("src")},frameborder:{default:0,keepOnSplit:!1,parseHTML:gt=>gt.getAttribute("frameborder")},width:{default:"100%",keepOnSplit:!1,parseHTML:gt=>gt.getAttribute("width")},height:{default:null,keepOnSplit:!1,parseHTML:gt=>gt.getAttribute("height")},allowfullscreen:{keepOnSplit:!1,default:this.options.allowFullscreen,parseHTML:gt=>gt.getAttribute("allowfullscreen")}}},renderHTML:({HTMLAttributes:gt})=>["iframe",(0,Ct.mergeAttributes)(gt,{"data-type":"iframe-editor"})],addNodeView:()=>(0,j.x)(X,{injector:vt}),addCommands(){return{setIframe:gt=>({commands:Tt,state:Ut})=>{const At=Ut.selection.anchor;return Tt.enter(),Tt.setTextSelection(At),Tt.insertContent({type:this.name,attrs:gt}),Tt.setTextSelection(Ut.selection.anchor),!0}}}});let tt=(()=>{class vt{}return vt.\u0275fac=function(Tt){return new(Tt||vt)},vt.\u0275mod=p.oAB({type:vt}),vt.\u0275inj=p.cJS({imports:[[E.Sl]]}),vt})()},53380:(ee,yt,a)=>{a.r(yt),a.d(yt,{TUI_EDITOR_MAX_IMAGE_WIDTH:()=>R,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>Y,TUI_IMAGE_EDITOR_OPTIONS:()=>X,TuiImageEditorComponent:()=>Ct,TuiImageEditorModule:()=>Ut,createImageEditorExtension:()=>Tt});var T=a(12057),r=a(91211),E=a(95110),b=a(68339),p=a(74788);const Y=new p.OlP("[TUI_EDITOR_MIN_IMAGE_WIDTH]: Min size of resizable image inside editor",{factory:()=>null}),R=new p.OlP("[TUI_EDITOR_MAX_IMAGE_WIDTH]: Max size of resizable image inside editor",{factory:()=>null}),X=new p.OlP("[TUI_IMAGE_EDITOR_OPTIONS]: Size of resizable image inside editor",{factory:()=>({minWidth:100,maxWidth:1/0})});var j=a(96570);let Ct=(()=>{class At extends E._3{constructor(ut,ht,Z,Ot,bt,Nt){super(Ot,Nt),this.minWidth=ut,this.maxWidth=ht,this.options=Z,this.sanitizer=bt}get height(){return null}get alt(){return this.attrs.alt||""}get title(){return this.attrs.title||""}get src(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.attrs.src)}updateSize([ut]){var ht,Z;const Ot=null!==(ht=this.minWidth)&&void 0!==ht?ht:this.options.minWidth,bt=null!==(Z=this.maxWidth)&&void 0!==Z?Z:this.options.maxWidth;this._width=Math.max(Ot,Math.min(bt,ut))}}return At.\u0275fac=function(ut){return new(ut||At)(p.Y36(Y),p.Y36(R),p.Y36(X),p.Y36(T.K0),p.Y36(r.H7),p.Y36(b.TuiDestroyService,2))},At.\u0275cmp=p.Xpm({type:At,selectors:[["tui-image-editor"]],features:[p._Bn([b.TuiDestroyService]),p.qOj],decls:2,vars:10,consts:[[3,"width","autoHeight","sizeChange"],[3,"src","width","alt","title"]],template:function(ut,ht){1&ut&&(p.TgZ(0,"tui-editor-resizable",0),p.NdJ("sizeChange",function(Ot){return ht.updateSize(Ot)}),p._UZ(1,"img",1),p.qZA()),2&ut&&(p.Q6J("width",ht.width)("autoHeight",!0),p.xp6(1),p.Udp("min-width",ht.options.minWidth,"px")("max-width",ht.options.maxWidth,"px"),p.Q6J("src",ht.src,p.LSH)("width",ht.width)("alt",ht.alt)("title",ht.title))},directives:[j.V],styles:["img[_ngcontent-%COMP%]{pointer-events:none}"],changeDetection:0}),At})();var dt=a(40400),tt=a(12867);const vt=[{tag:'img[data-type="image-editor"]'}],gt={src:{default:"",keepOnSplit:!1},width:{default:300,keepOnSplit:!1},alt:{default:"",keepOnSplit:!1},title:{default:"",keepOnSplit:!1}},Tt=At=>tt.Node.create({name:"imageEditor",group:"block",atom:!0,draggable:!0,parseHTML:()=>vt,addAttributes:()=>gt,renderHTML:({HTMLAttributes:_t})=>["img",(0,tt.mergeAttributes)(_t,{"data-type":"image-editor"})],addNodeView:()=>(0,dt.x)(Ct,{injector:At}),addCommands(){return{setEditableImage:_t=>({commands:ut})=>ut.insertContent({type:this.name,attrs:_t})}}});let Ut=(()=>{class At{}return At.\u0275fac=function(ut){return new(ut||At)},At.\u0275mod=p.oAB({type:At}),At.\u0275inj=p.cJS({imports:[[T.ez,E.Sl]]}),At})()},12177:(ee,yt,a)=>{function r(b){return b.isActive("bulletList")||b.isActive("orderedList")}a.r(yt),a.d(yt,{TuiTabExtension:()=>E,tuiIsOrderedOrBulletList:()=>r});const E=a(12867).Extension.create({name:"indent",addKeyboardShortcuts(){return{Tab:()=>r(this.editor)?null:this.editor.commands.insertContent("\t")}}})},57734:(ee,yt,a)=>{a.r(yt),a.d(yt,{TuiLink:()=>rn});var T=a(27863),r=a(12867);function E(Bt){this.j={},this.jr=[],this.jd=null,this.t=Bt}E.prototype={accepts:function(){return!!this.t},tt:function(Lt,Kt){if(Kt&&Kt.j)return this.j[Lt]=Kt,Kt;var $t=Kt,jt=this.j[Lt];if(jt)return $t&&(jt.t=$t),jt;jt=b();var U=X(this,Lt);return U?(Object.assign(jt.j,U.j),jt.jr.append(U.jr),jt.jr=U.jd,jt.t=$t||U.t):jt.t=$t,this.j[Lt]=jt,jt}};var b=function(){return new E},p=function(Lt){return new E(Lt)},Y=function(Lt,Kt,$t){Lt.j[Kt]||(Lt.j[Kt]=$t)},R=function(Lt,Kt,$t){Lt.jr.push([Kt,$t])},X=function(Lt,Kt){var $t=Lt.j[Kt];if($t)return $t;for(var jt=0;jt<Lt.jr.length;jt++){var B=Lt.jr[jt][1];if(Lt.jr[jt][0].test(Kt))return B}return Lt.jd},j=function(Lt,Kt,$t){for(var jt=0;jt<Kt.length;jt++)Y(Lt,Kt[jt],$t)},Ct=function(Lt,Kt){for(var $t=0;$t<Kt.length;$t++)Y(Lt,Kt[$t][0],Kt[$t][1])},dt=function(Lt,Kt,$t,jt){for(var G,U=0,B=Kt.length;U<B&&(G=Lt.j[Kt[U]]);)Lt=G,U++;if(U>=B)return[];for(;U<B-1;)G=jt(),Y(Lt,Kt[U],G),Lt=G,U++;Y(Lt,Kt[B-1],$t)},tt="DOMAIN",vt="LOCALHOST",gt="TLD",Tt="NUM",Ut="PROTOCOL",At="MAILTO",ht="OPENBRACE",Z="OPENBRACKET",Ot="OPENANGLEBRACKET",bt="OPENPAREN",Nt="CLOSEBRACE",Ht="CLOSEBRACKET",xt="CLOSEANGLEBRACKET",Wt="CLOSEPAREN",Yt="AMPERSAND",qt="APOSTROPHE",ft="ASTERISK",k="AT",st="BACKSLASH",ot="BACKTICK",at="CARET",J="COLON",V="COMMA",rt="DOLLAR",Ft="DOT",Vt="EQUALS",ne="EXCLAMATION",he="HYPHEN",Qt="PERCENT",Ee="PIPE",xe="PLUS",we="POUND",be="QUERY",Ke="QUOTE",Ve="SEMI",Se="SLASH",Te="TILDE",Ne="UNDERSCORE",Re="SYM",Be=Object.freeze({__proto__:null,DOMAIN:tt,LOCALHOST:vt,TLD:gt,NUM:Tt,PROTOCOL:Ut,MAILTO:At,WS:"WS",NL:"NL",OPENBRACE:ht,OPENBRACKET:Z,OPENANGLEBRACKET:Ot,OPENPAREN:bt,CLOSEBRACE:Nt,CLOSEBRACKET:Ht,CLOSEANGLEBRACKET:xt,CLOSEPAREN:Wt,AMPERSAND:Yt,APOSTROPHE:qt,ASTERISK:ft,AT:k,BACKSLASH:st,BACKTICK:ot,CARET:at,COLON:J,COMMA:V,DOLLAR:rt,DOT:Ft,EQUALS:Vt,EXCLAMATION:ne,HYPHEN:he,PERCENT:Qt,PIPE:Ee,PLUS:xe,POUND:we,QUERY:be,QUOTE:Ke,SEMI:Ve,SLASH:Se,TILDE:Te,UNDERSCORE:Ne,SYM:Re}),Fe="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw verm\xf6gensberater-ctb verm\xf6gensberatung-pwb \u03b5\u03bb \u03b5\u03c5 \u0431\u0433 \u0431\u0435\u043b \u0434\u0435\u0442\u0438 \u0435\u044e \u043a\u0430\u0442\u043e\u043b\u0438\u043a \u043a\u043e\u043c \u049b\u0430\u0437 \u043c\u043a\u0434 \u043c\u043e\u043d \u043c\u043e\u0441\u043a\u0432\u0430 \u043e\u043d\u043b\u0430\u0439\u043d \u043e\u0440\u0433 \u0440\u0443\u0441 \u0440\u0444 \u0441\u0430\u0439\u0442 \u0441\u0440\u0431 \u0443\u043a\u0440 \u10d2\u10d4 \u0570\u0561\u0575 \u05d9\u05e9\u05e8\u05d0\u05dc \u05e7\u05d5\u05dd \u0627\u0628\u0648\u0638\u0628\u064a \u0627\u062a\u0635\u0627\u0644\u0627\u062a \u0627\u0631\u0627\u0645\u0643\u0648 \u0627\u0644\u0627\u0631\u062f\u0646 \u0627\u0644\u0628\u062d\u0631\u064a\u0646 \u0627\u0644\u062c\u0632\u0627\u0626\u0631 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629 \u0627\u0644\u0639\u0644\u064a\u0627\u0646 \u0627\u0644\u0645\u063a\u0631\u0628 \u0627\u0645\u0627\u0631\u0627\u062a \u0627\u06cc\u0631\u0627\u0646 \u0628\u0627\u0631\u062a \u0628\u0627\u0632\u0627\u0631 \u0628\u06be\u0627\u0631\u062a \u0628\u064a\u062a\u0643 \u067e\u0627\u06a9\u0633\u062a\u0627\u0646 \u0680\u0627\u0631\u062a \u062a\u0648\u0646\u0633 \u0633\u0648\u062f\u0627\u0646 \u0633\u0648\u0631\u064a\u0629 \u0634\u0628\u0643\u0629 \u0639\u0631\u0627\u0642 \u0639\u0631\u0628 \u0639\u0645\u0627\u0646 \u0641\u0644\u0633\u0637\u064a\u0646 \u0642\u0637\u0631 \u0643\u0627\u062b\u0648\u0644\u064a\u0643 \u0643\u0648\u0645 \u0645\u0635\u0631 \u0645\u0644\u064a\u0633\u064a\u0627 \u0645\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u0627 \u0645\u0648\u0642\u0639 \u0647\u0645\u0631\u0627\u0647 \u0915\u0949\u092e \u0928\u0947\u091f \u092d\u093e\u0930\u0924 \u092d\u093e\u0930\u0924\u092e\u094d \u092d\u093e\u0930\u094b\u0924 \u0938\u0902\u0917\u0920\u0928 \u09ac\u09be\u0982\u09b2\u09be \u09ad\u09be\u09b0\u09a4 \u09ad\u09be\u09f0\u09a4 \u0a2d\u0a3e\u0a30\u0a24 \u0aad\u0abe\u0ab0\u0aa4 \u0b2d\u0b3e\u0b30\u0b24 \u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe \u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8 \u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd \u0c2d\u0c3e\u0c30\u0c24\u0c4d \u0cad\u0cbe\u0cb0\u0ca4 \u0d2d\u0d3e\u0d30\u0d24\u0d02 \u0dbd\u0d82\u0d9a\u0dcf \u0e04\u0e2d\u0e21 \u0e44\u0e17\u0e22 \u0ea5\u0eb2\u0ea7 \ub2f7\ub137 \ub2f7\ucef4 \uc0bc\uc131 \ud55c\uad6d \u30a2\u30de\u30be\u30f3 \u30b0\u30fc\u30b0\u30eb \u30af\u30e9\u30a6\u30c9 \u30b3\u30e0 \u30b9\u30c8\u30a2 \u30bb\u30fc\u30eb \u30d5\u30a1\u30c3\u30b7\u30e7\u30f3 \u30dd\u30a4\u30f3\u30c8 \u307f\u3093\u306a \u4e16\u754c \u4e2d\u4fe1 \u4e2d\u56fd \u4e2d\u570b \u4e2d\u6587\u7f51 \u4e9a\u9a6c\u900a \u4f01\u4e1a \u4f5b\u5c71 \u4fe1\u606f \u5065\u5eb7 \u516b\u5366 \u516c\u53f8 \u516c\u76ca \u53f0\u6e7e \u53f0\u7063 \u5546\u57ce \u5546\u5e97 \u5546\u6807 \u5609\u91cc \u5609\u91cc\u5927\u9152\u5e97 \u5728\u7ebf \u5927\u4f17\u6c7d\u8f66 \u5927\u62ff \u5929\u4e3b\u6559 \u5a31\u4e50 \u5bb6\u96fb \u5e7f\u4e1c \u5fae\u535a \u6148\u5584 \u6211\u7231\u4f60 \u624b\u673a \u62db\u8058 \u653f\u52a1 \u653f\u5e9c \u65b0\u52a0\u5761 \u65b0\u95fb \u65f6\u5c1a \u66f8\u7c4d \u673a\u6784 \u6de1\u9a6c\u9521 \u6e38\u620f \u6fb3\u9580 \u70b9\u770b \u79fb\u52a8 \u7ec4\u7ec7\u673a\u6784 \u7f51\u5740 \u7f51\u5e97 \u7f51\u7ad9 \u7f51\u7edc \u8054\u901a \u8bfa\u57fa\u4e9a \u8c37\u6b4c \u8d2d\u7269 \u901a\u8ca9 \u96c6\u56e2 \u96fb\u8a0a\u76c8\u79d1 \u98de\u5229\u6d66 \u98df\u54c1 \u9910\u5385 \u9999\u683c\u91cc\u62c9 \u9999\u6e2f".split(" "),Le=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,De=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,Ze=/\uFE0F/,Oe=/\d/,Ie=/\s/;function Qe(){var Bt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],Lt=b(),Kt=p(Tt),$t=p(tt),jt=b(),U=p("WS"),B=[[Oe,$t],[Le,$t],[De,$t],[Ze,$t]],G=function(){var ke=p(tt);return ke.j={"-":jt},ke.jr=[].concat(B),ke},pt=function(ke){var h=G();return h.t=ke,h};Ct(Lt,[["'",p(qt)],["{",p(ht)],["[",p(Z)],["<",p(Ot)],["(",p(bt)],["}",p(Nt)],["]",p(Ht)],[">",p(xt)],[")",p(Wt)],["&",p(Yt)],["*",p(ft)],["@",p(k)],["`",p(ot)],["^",p(at)],[":",p(J)],[",",p(V)],["$",p(rt)],[".",p(Ft)],["=",p(Vt)],["!",p(ne)],["-",p(he)],["%",p(Qt)],["|",p(Ee)],["+",p(xe)],["#",p(we)],["?",p(be)],['"',p(Ke)],["/",p(Se)],[";",p(Ve)],["~",p(Te)],["_",p(Ne)],["\\",p(st)]]),Y(Lt,"\n",p("NL")),R(Lt,Ie,U),Y(U,"\n",b()),R(U,Ie,U);for(var mt=0;mt<Fe.length;mt++)dt(Lt,Fe[mt],pt(gt),G);var It=G(),Rt=G(),Xt=G(),le=G();dt(Lt,"file",It,G),dt(Lt,"ftp",Rt,G),dt(Lt,"http",Xt,G),dt(Lt,"mailto",le,G);var ge=G(),pe=p(Ut),_e=p(At);Y(Rt,"s",ge),Y(Rt,":",pe),Y(Xt,"s",ge),Y(Xt,":",pe),Y(It,":",pe),Y(ge,":",pe),Y(le,":",_e);for(var Ce=G(),fe=0;fe<Bt.length;fe++)dt(Lt,Bt[fe],Ce,G);return Y(Ce,":",pe),dt(Lt,"localhost",pt(vt),G),R(Lt,Oe,Kt),R(Lt,Le,$t),R(Lt,De,$t),R(Lt,Ze,$t),R(Kt,Oe,Kt),R(Kt,Le,$t),R(Kt,De,$t),R(Kt,Ze,$t),Y(Kt,"-",jt),Y($t,"-",jt),Y(jt,"-",jt),R($t,Oe,$t),R($t,Le,$t),R($t,De,$t),R($t,Ze,$t),R(jt,Oe,$t),R(jt,Le,$t),R(jt,De,$t),R(jt,Ze,$t),Lt.jd=p(Re),Lt}var ve={defaultProtocol:"http",events:null,format:D,formatHref:D,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function D(Bt){return Bt}function w(){}function F(Bt,Lt){function Kt($t,jt){this.t=Bt,this.v=$t,this.tk=jt}return function(Bt,Lt){var Kt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},$t=Object.create(Bt.prototype);for(var jt in Kt)$t[jt]=Kt[jt];$t.constructor=Lt,Lt.prototype=$t}(w,Kt,Lt),Kt}w.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var Lt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(Lt),start:this.startIndex(),end:this.endIndex()}}};var W=F("email",{isLink:!0}),Mt=F("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),Pt=F("text"),N=F("nl"),s=F("url",{isLink:!0,toHref:function(){for(var Lt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve.defaultProtocol,Kt=this.tk,$t=!1,jt=!1,U=[],B=0;Kt[B].t===Ut;)$t=!0,U.push(Kt[B].v),B++;for(;Kt[B].t===Se;)jt=!0,U.push(Kt[B].v),B++;for(;B<Kt.length;B++)U.push(Kt[B].v);return U=U.join(""),$t||jt||(U="".concat(Lt,"://").concat(U)),U},hasProtocol:function(){return this.tk[0].t===Ut}}),d=Object.freeze({__proto__:null,MultiToken:w,Base:w,createTokenClass:F,MailtoEmail:W,Email:Mt,Text:Pt,Nl:N,Url:s});function g(){var Bt=b(),Lt=b(),Kt=b(),$t=b(),jt=b(),U=b(),B=b(),G=p(s),pt=b(),mt=p(s),It=p(s),Rt=b(),Xt=b(),le=b(),ge=b(),pe=b(),_e=p(s),Ce=p(s),fe=p(s),Me=p(s),ke=b(),h=b(),C=b(),P=b(),O=b(),L=b(),z=p(Mt),Q=b(),ct=p(Mt),q=p(W),lt=b(),kt=b(),wt=b(),Zt=b(),te=p(N);Y(Bt,"NL",te),Y(Bt,Ut,Lt),Y(Bt,At,Kt),Y(Lt,Se,$t),Y($t,Se,jt),Y(Bt,gt,U),Y(Bt,tt,U),Y(Bt,vt,G),Y(Bt,Tt,U),Y(jt,gt,It),Y(jt,tt,It),Y(jt,Tt,It),Y(jt,vt,It),Y(U,Ft,B),Y(O,Ft,L),Y(B,gt,G),Y(B,tt,U),Y(B,Tt,U),Y(B,vt,U),Y(L,gt,z),Y(L,tt,O),Y(L,Tt,O),Y(L,vt,O),Y(G,Ft,B),Y(z,Ft,L),Y(G,J,pt),Y(G,Se,It),Y(pt,Tt,mt),Y(mt,Se,It),Y(z,J,Q),Y(Q,Tt,ct);var se=[Yt,ft,k,st,ot,at,rt,tt,Vt,he,vt,Tt,Qt,Ee,xe,we,Ut,Se,Re,Te,gt,Ne],de=[qt,xt,Nt,Ht,Wt,J,V,Ft,ne,Ot,ht,Z,bt,be,Ke,Ve];Y(It,ht,Xt),Y(It,Z,le),Y(It,Ot,ge),Y(It,bt,pe),Y(Rt,ht,Xt),Y(Rt,Z,le),Y(Rt,Ot,ge),Y(Rt,bt,pe),Y(Xt,Nt,It),Y(le,Ht,It),Y(ge,xt,It),Y(pe,Wt,It),Y(_e,Nt,It),Y(Ce,Ht,It),Y(fe,xt,It),Y(Me,Wt,It),Y(ke,Nt,It),Y(h,Ht,It),Y(C,xt,It),Y(P,Wt,It),j(Xt,se,_e),j(le,se,Ce),j(ge,se,fe),j(pe,se,Me),j(Xt,de,ke),j(le,de,h),j(ge,de,C),j(pe,de,P),j(_e,se,_e),j(Ce,se,Ce),j(fe,se,fe),j(Me,se,Me),j(_e,de,_e),j(Ce,de,Ce),j(fe,de,fe),j(Me,de,Me),j(ke,se,_e),j(h,se,Ce),j(C,se,fe),j(P,se,Me),j(ke,de,ke),j(h,de,h),j(C,de,C),j(P,de,P),j(It,se,It),j(Rt,se,It),j(It,de,Rt),j(Rt,de,Rt),Y(Kt,gt,q),Y(Kt,tt,q),Y(Kt,Tt,q),Y(Kt,vt,q),j(q,se,q),j(q,de,lt),j(lt,se,q),j(lt,de,lt);var me=[Yt,qt,ft,st,ot,at,Nt,rt,tt,Vt,he,Tt,ht,Qt,Ee,xe,we,be,Se,Re,Te,gt,Ne];return j(U,me,kt),Y(U,k,wt),j(G,me,kt),Y(G,k,wt),j(B,me,kt),j(kt,me,kt),Y(kt,k,wt),Y(kt,Ft,Zt),j(Zt,me,kt),Y(wt,gt,O),Y(wt,tt,O),Y(wt,Tt,O),Y(wt,vt,z),Bt}function I(Bt,Lt,Kt){var $t=Kt[0].s;return new Bt(Lt.substr($t,Kt[Kt.length-1].e-$t),Kt)}var $="undefined"!=typeof console&&console&&console.warn||function(){},it={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function ue(Bt){if(it.initialized&&$('linkifyjs: already initialized - will not register custom protocol "'.concat(Bt,'" until you manually call linkify.init(). To avoid this warning, please register all custom protocols before invoking linkify the first time.')),!/^[a-z-]+$/.test(Bt))throw Error("linkifyjs: protocols containing characters other than a-z or - (hyphen) are not supported");it.customProtocols.push(Bt)}function Ye(Bt){return it.initialized||function(){it.scanner={start:Qe(it.customProtocols),tokens:Be},it.parser={start:g(),tokens:d};for(var Bt={createTokenClass:F},Lt=0;Lt<it.pluginQueue.length;Lt++)it.pluginQueue[Lt][1]({scanner:it.scanner,parser:it.parser,utils:Bt});it.initialized=!0}(),function(Bt,Lt,Kt){for(var $t=Kt.length,jt=0,U=[],B=[];jt<$t;){for(var G=Bt,pt=null,mt=null,It=0,Rt=null,Xt=-1;jt<$t&&!(pt=X(G,Kt[jt].t));)B.push(Kt[jt++]);for(;jt<$t&&(mt=pt||X(G,Kt[jt].t));)pt=null,(G=mt).accepts()?(Xt=0,Rt=G):Xt>=0&&Xt++,jt++,It++;if(Xt<0)for(var le=jt-It;le<jt;le++)B.push(Kt[le]);else{B.length>0&&(U.push(I(Pt,Lt,B)),B=[]);var ge=Rt.t,pe=Kt.slice((jt-=Xt)-(It-=Xt),jt);U.push(I(ge,Lt,pe))}}return B.length>0&&U.push(I(Pt,Lt,B)),U}(it.parser.start,Bt,function(Bt,Lt){for(var Kt=function(Bt){for(var Lt=[],Kt=Bt.length,$t=0;$t<Kt;){var jt=Bt.charCodeAt($t),U=void 0,B=jt<55296||jt>56319||$t+1===Kt||(U=Bt.charCodeAt($t+1))<56320||U>57343?Bt[$t]:Bt.slice($t,$t+2);Lt.push(B),$t+=B.length}return Lt}(Lt.replace(/[A-Z]/g,function(le){return le.toLowerCase()})),$t=Kt.length,jt=[],U=0,B=0;B<$t;){for(var G=Bt,pt=null,mt=0,It=null,Rt=-1,Xt=-1;B<$t&&(pt=X(G,Kt[B]));)(G=pt).accepts()?(Rt=0,Xt=0,It=G):Rt>=0&&(Rt+=Kt[B].length,Xt++),mt+=Kt[B].length,U+=Kt[B].length,B++;B-=Xt,jt.push({t:It.t,v:Lt.substr((U-=Rt)-(mt-=Rt),mt),s:U-mt,e:U})}return jt}(it.scanner.start,Bt))}function je(Bt){for(var Lt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,Kt=Ye(Bt),$t=[],jt=0;jt<Kt.length;jt++){var U=Kt[jt];U.isLink&&(!Lt||U.t===Lt)&&$t.push(U.toObject())}return $t}function _n(Bt){var Lt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,Kt=Ye(Bt);return 1===Kt.length&&Kt[0].isLink&&(!Lt||Kt[0].t===Lt)}var tn=a(62463);const rn=r.Mark.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(ue)},onDestroy(){it.scanner=null,it.parser=null,it.pluginQueue=[],it.customProtocols=[],it.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}),addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML:()=>[{tag:'a[href]:not([href *= "javascript:" i])'}],renderHTML({HTMLAttributes:Bt}){return["a",(0,r.mergeAttributes)(this.options.HTMLAttributes,Bt),0]},addCommands(){return{setLink:Bt=>({chain:Lt})=>Lt().setMark(this.name,Bt).setMeta("preventAutolink",!0).run(),toggleLink:Bt=>({chain:Lt})=>Lt().toggleMark(this.name,Bt,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:Bt})=>Bt().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[(0,r.markPasteRule)({find:Bt=>je(Bt).filter(Lt=>!this.options.validate||this.options.validate(Lt.value)).filter(Lt=>Lt.isLink).map(Lt=>({text:Lt.value,index:Lt.start,data:Lt})),type:this.type,getAttributes:Bt=>{var Lt;return{href:null==(Lt=Bt.data)?void 0:Lt.href}}})]},addProseMirrorPlugins(){const Bt=[];return this.options.autolink&&Bt.push(function(Bt){return new tn.Sy({key:new tn.H$("autolink"),appendTransaction:(Lt,Kt,$t)=>{const jt=Lt.some(It=>It.docChanged)&&!Kt.doc.eq($t.doc),U=Lt.some(It=>It.getMeta("preventAutolink"));if(!jt||U)return;const{tr:B}=$t,G=(0,r.combineTransactionSteps)(Kt.doc,[...Lt]),{mapping:pt}=G;return(0,r.getChangedRanges)(G).forEach(({oldRange:It,newRange:Rt})=>{(0,r.getMarksBetween)(It.from,It.to,Kt.doc).filter(pe=>pe.mark.type===Bt.type).forEach(pe=>{const _e=pt.map(pe.from),Ce=pt.map(pe.to),fe=(0,r.getMarksBetween)(_e,Ce,$t.doc).filter(O=>O.mark.type===Bt.type);if(!fe.length)return;const Me=fe[0],ke=Kt.doc.textBetween(pe.from,pe.to,void 0," "),h=$t.doc.textBetween(Me.from,Me.to,void 0," "),C=_n(ke),P=_n(h);C&&!P&&B.removeMark(Me.from,Me.to,Bt.type)});const Xt=(0,r.findChildrenInRange)($t.doc,Rt,pe=>pe.isTextblock);let le,ge;if(Xt.length>1?(le=Xt[0],ge=$t.doc.textBetween(le.pos,le.pos+le.node.nodeSize,void 0," ")):Xt.length&&$t.doc.textBetween(Rt.from,Rt.to," "," ").endsWith(" ")&&(le=Xt[0],ge=$t.doc.textBetween(le.pos,Rt.to,void 0," ")),le&&ge){const pe=ge.split(" ").filter(fe=>""!==fe);if(pe.length<=0)return!1;const _e=pe[pe.length-1],Ce=le.pos+ge.lastIndexOf(_e);if(!_e)return!1;je(_e).filter(fe=>fe.isLink).filter(fe=>!Bt.validate||Bt.validate(fe.value)).map(fe=>ye(ie({},fe),{from:Ce+fe.start+1,to:Ce+fe.end+1})).forEach(fe=>{B.addMark(fe.from,fe.to,Bt.type.create({href:fe.href}))})}}),B.steps.length?B:void 0}})}({type:this.type,validate:this.options.validate})),this.options.openOnClick&&Bt.push(function(Bt){return new tn.Sy({key:new tn.H$("handleClickLink"),props:{handleClick:(Lt,Kt,$t)=>{var jt;const U=(0,r.getAttributes)(Lt.state,Bt.type.name);return!(!(null==(jt=$t.target)?void 0:jt.closest("a"))||!U.href||(window.open(U.href,U.target),0))}}})}({type:this.type})),this.options.linkOnPaste&&Bt.push(function(Bt){return new tn.Sy({key:new tn.H$("handlePasteLink"),props:{handlePaste:(Lt,Kt,$t)=>{const{state:jt}=Lt,{selection:U}=jt,{empty:B}=U;if(B)return!1;let G="";$t.content.forEach(mt=>{G+=mt.textContent});const pt=je(G).find(mt=>mt.isLink&&mt.value===G);return!(!G||!pt||(Bt.editor.commands.setMark(Bt.type,{href:pt.href}),0))}}})}({editor:this.editor,type:this.type})),Bt}}).extend({addAttributes(){var Bt;return Object.assign(Object.assign({},null===(Bt=this.parent)||void 0===Bt?void 0:Bt.call(this)),(0,T.x6)(["download"]))},addCommands(){var Bt;return Object.assign(Object.assign({},null===(Bt=this.parent)||void 0===Bt?void 0:Bt.call(this)),{toggleLink:Lt=>({chain:Kt,state:$t})=>{{const{selection:jt,doc:U}=$t,B=U.cut(jt.to,jt.to+1),pt=" "===(0,r.getHTMLFromFragment)(B.content,$t.schema).replace(/<\/?[^>]+(>|$)/g,""),mt=Kt().toggleMark(this.name,Lt,{extendEmptyMarkRange:!0});return(pt?mt.setTextSelection(jt.to+1):mt.setTextSelection(jt.to).insertContent('<span style="font-size: 15px"> </span>')).run()}}})}}).configure({openOnClick:!1})},41512:(ee,yt,a)=>{a.r(yt),a.d(yt,{TuiAudio:()=>E,TuiSource:()=>b,TuiVideo:()=>p});var T=a(27863),r=a(12867);const E=r.Node.create({name:"audio",group:"block",content:"source+",addAttributes:()=>(0,T.x6)(["id","class","src","style","controls","loop","muted","preload","autoplay","width","height"]),parseHTML:()=>[{tag:"audio"}],renderHTML:({node:Y,HTMLAttributes:R})=>["audio",R,...(0,T.YX)(Y)]}),b=r.Node.create({name:"source",addAttributes:()=>(0,T.x6)(["src","type","width","height","media","sizes","srcset"]),parseHTML:()=>[{tag:"source"}],renderHTML:({HTMLAttributes:Y})=>["source",(0,r.mergeAttributes)(Y)]}),p=r.Node.create({name:"video",group:"block",content:"source+",addAttributes:()=>(0,T.x6)(["id","class","src","style","controls","loop","muted","preload","autoplay","width","height"]),parseHTML:()=>[{tag:"video"}],renderHTML:({node:Y,HTMLAttributes:R})=>["video",R,...(0,T.YX)(Y)]})},2823:(ee,yt,a)=>{a.r(yt),a.d(yt,{StarterKit:()=>jt});var T=a(12867),r=/^\s*>\s$/,E=T.Node.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:U}){return["blockquote",(0,T.mergeAttributes)(this.options.HTMLAttributes,U),0]},addCommands(){return{setBlockquote:()=>({commands:U})=>U.wrapIn(this.name),toggleBlockquote:()=>({commands:U})=>U.toggleWrap(this.name),unsetBlockquote:()=>({commands:U})=>U.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,T.wrappingInputRule)({find:r,type:this.type})]}}),p=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,Y=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,R=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,X=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,j=T.Mark.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:U=>"normal"!==U.style.fontWeight&&null},{style:"font-weight",getAttrs:U=>/^(bold(er)?|[5-9]\d{2,})$/.test(U)&&null}],renderHTML({HTMLAttributes:U}){return["strong",(0,T.mergeAttributes)(this.options.HTMLAttributes,U),0]},addCommands(){return{setBold:()=>({commands:U})=>U.setMark(this.name),toggleBold:()=>({commands:U})=>U.toggleMark(this.name),unsetBold:()=>({commands:U})=>U.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,T.markInputRule)({find:p,type:this.type}),(0,T.markInputRule)({find:R,type:this.type})]},addPasteRules(){return[(0,T.markPasteRule)({find:Y,type:this.type}),(0,T.markPasteRule)({find:X,type:this.type})]}}),dt=/^\s*([-+*])\s$/,tt=T.Node.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:U}){return["ul",(0,T.mergeAttributes)(this.options.HTMLAttributes,U),0]},addCommands(){return{toggleBulletList:()=>({commands:U})=>U.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[(0,T.wrappingInputRule)({find:dt,type:this.type})]}}),gt=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,Tt=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,Ut=T.Mark.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:U}){return["code",(0,T.mergeAttributes)(this.options.HTMLAttributes,U),0]},addCommands(){return{setCode:()=>({commands:U})=>U.setMark(this.name),toggleCode:()=>({commands:U})=>U.toggleMark(this.name),unsetCode:()=>({commands:U})=>U.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,T.markInputRule)({find:gt,type:this.type})]},addPasteRules(){return[(0,T.markPasteRule)({find:Tt,type:this.type})]}}),_t=a(62463),ut=/^```([a-z]+)?[\s\n]$/,ht=/^~~~([a-z]+)?[\s\n]$/,Z=T.Node.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:U=>{var B;const{languageClassPrefix:G}=this.options;return[...(null==(B=U.firstElementChild)?void 0:B.classList)||[]].filter(Rt=>Rt.startsWith(G)).map(Rt=>Rt.replace(G,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:U,HTMLAttributes:B}){return["pre",(0,T.mergeAttributes)(this.options.HTMLAttributes,B),["code",{class:U.attrs.language?this.options.languageClassPrefix+U.attrs.language:null},0]]},addCommands(){return{setCodeBlock:U=>({commands:B})=>B.setNode(this.name,U),toggleCodeBlock:U=>({commands:B})=>B.toggleNode(this.name,"paragraph",U)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:U,$anchor:B}=this.editor.state.selection;return!(!U||B.parent.type.name!==this.name)&&!(1!==B.pos&&B.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:U})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:B}=U,{selection:G}=B,{$from:pt,empty:mt}=G;if(!mt||pt.parent.type!==this.type)return!1;const It=pt.parentOffset===pt.parent.nodeSize-2,Rt=pt.parent.textContent.endsWith("\n\n");return!(!It||!Rt)&&U.chain().command(({tr:Xt})=>(Xt.delete(pt.pos-2,pt.pos),!0)).exitCode().run()},ArrowDown:({editor:U})=>{if(!this.options.exitOnArrowDown)return!1;const{state:B}=U,{selection:G,doc:pt}=B,{$from:mt,empty:It}=G;if(!It||mt.parent.type!==this.type||mt.parentOffset!==mt.parent.nodeSize-2)return!1;const Xt=mt.after();return void 0!==Xt&&!pt.nodeAt(Xt)&&U.commands.exitCode()}}},addInputRules(){return[(0,T.textblockTypeInputRule)({find:ut,type:this.type,getAttributes:U=>({language:U[1]})}),(0,T.textblockTypeInputRule)({find:ht,type:this.type,getAttributes:U=>({language:U[1]})})]},addProseMirrorPlugins(){return[new _t.Sy({key:new _t.H$("codeBlockVSCodeHandler"),props:{handlePaste:(U,B)=>{if(!B.clipboardData||this.editor.isActive(this.type.name))return!1;const G=B.clipboardData.getData("text/plain"),pt=B.clipboardData.getData("vscode-editor-data"),mt=pt?JSON.parse(pt):void 0,It=null==mt?void 0:mt.mode;if(!G||!It)return!1;const{tr:Rt}=U.state;return Rt.replaceSelectionWith(this.type.create({language:It})),Rt.setSelection(_t.Bs.near(Rt.doc.resolve(Math.max(0,Rt.selection.from-2)))),Rt.insertText(G.replace(/\r\n?/g,"\n")),Rt.setMeta("paste",!0),U.dispatch(Rt),!0}}})]}}),bt=T.Node.create({name:"doc",topNode:!0,content:"block+"}),Ht=a(38480);function xt(U={}){return new _t.Sy({view:B=>new Wt(B,U)})}class Wt{constructor(B,G){this.editorView=B,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=G.width||1,this.color=G.color||"black",this.class=G.class,this.handlers=["dragover","dragend","drop","dragleave"].map(pt=>{let mt=It=>{this[pt](It)};return B.dom.addEventListener(pt,mt),{name:pt,handler:mt}})}destroy(){this.handlers.forEach(({name:B,handler:G})=>this.editorView.dom.removeEventListener(B,G))}update(B,G){null!=this.cursorPos&&G.doc!=B.state.doc&&(this.cursorPos>B.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(B){B!=this.cursorPos&&(this.cursorPos=B,null==B?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let G,B=this.editorView.state.doc.resolve(this.cursorPos);if(!B.parent.inlineContent){let Rt=B.nodeBefore,Xt=B.nodeAfter;if(Rt||Xt){let le=this.editorView.nodeDOM(this.cursorPos-(Rt?Rt.nodeSize:0));if(le){let ge=le.getBoundingClientRect(),pe=Rt?ge.bottom:ge.top;Rt&&Xt&&(pe=(pe+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),G={left:ge.left,right:ge.right,top:pe-this.width/2,bottom:pe+this.width/2}}}}if(!G){let Rt=this.editorView.coordsAtPos(this.cursorPos);G={left:Rt.left-this.width/2,right:Rt.left+this.width/2,top:Rt.top,bottom:Rt.bottom}}let mt,It,pt=this.editorView.dom.offsetParent;if(this.element||(this.element=pt.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!pt||pt==document.body&&"static"==getComputedStyle(pt).position)mt=-pageXOffset,It=-pageYOffset;else{let Rt=pt.getBoundingClientRect();mt=Rt.left-pt.scrollLeft,It=Rt.top-pt.scrollTop}this.element.style.left=G.left-mt+"px",this.element.style.top=G.top-It+"px",this.element.style.width=G.right-G.left+"px",this.element.style.height=G.bottom-G.top+"px"}scheduleRemoval(B){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),B)}dragover(B){if(!this.editorView.editable)return;let G=this.editorView.posAtCoords({left:B.clientX,top:B.clientY}),pt=G&&G.inside>=0&&this.editorView.state.doc.nodeAt(G.inside),mt=pt&&pt.type.spec.disableDropCursor,It="function"==typeof mt?mt(this.editorView,G,B):mt;if(G&&!It){let Rt=G.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(Rt=(0,Ht.nj)(this.editorView.state.doc,Rt,this.editorView.dragging.slice),null==Rt))return this.setCursor(null);this.setCursor(Rt),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(B){(B.target==this.editorView.dom||!this.editorView.dom.contains(B.relatedTarget))&&this.setCursor(null)}}var Yt=T.Extension.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[xt(this.options)]}}),ft=a(70768),k=a(77346),st=a(43594);class ot extends _t.Y1{constructor(B){super(B,B)}map(B,G){let pt=B.resolve(G.map(this.head));return ot.valid(pt)?new ot(pt):_t.Y1.near(pt)}content(){return k.p2.empty}eq(B){return B instanceof ot&&B.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(B,G){if("number"!=typeof G.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new ot(B.resolve(G.pos))}getBookmark(){return new at(this.anchor)}static valid(B){let G=B.parent;if(G.isTextblock||!function(U){for(let B=U.depth;B>=0;B--){let G=U.index(B),pt=U.node(B);if(0!=G)for(let mt=pt.child(G-1);;mt=mt.lastChild){if(0==mt.childCount&&!mt.inlineContent||mt.isAtom||mt.type.spec.isolating)return!0;if(mt.inlineContent)return!1}else if(pt.type.spec.isolating)return!0}return!0}(B)||!function(U){for(let B=U.depth;B>=0;B--){let G=U.indexAfter(B),pt=U.node(B);if(G!=pt.childCount)for(let mt=pt.child(G);;mt=mt.firstChild){if(0==mt.childCount&&!mt.inlineContent||mt.isAtom||mt.type.spec.isolating)return!0;if(mt.inlineContent)return!1}else if(pt.type.spec.isolating)return!0}return!0}(B))return!1;let pt=G.type.spec.allowGapCursor;if(null!=pt)return pt;let mt=G.contentMatchAt(B.index()).defaultType;return mt&&mt.isTextblock}static findGapCursorFrom(B,G,pt=!1){t:for(;;){if(!pt&&ot.valid(B))return B;let mt=B.pos,It=null;for(let Rt=B.depth;;Rt--){let Xt=B.node(Rt);if(G>0?B.indexAfter(Rt)<Xt.childCount:B.index(Rt)>0){It=Xt.child(G>0?B.indexAfter(Rt):B.index(Rt)-1);break}if(0==Rt)return null;mt+=G;let le=B.doc.resolve(mt);if(ot.valid(le))return le}for(;;){let Rt=G>0?It.firstChild:It.lastChild;if(!Rt){if(It.isAtom&&!It.isText&&!_t.qv.isSelectable(It)){B=B.doc.resolve(mt+It.nodeSize*G),pt=!1;continue t}break}It=Rt,mt+=G;let Xt=B.doc.resolve(mt);if(ot.valid(Xt))return Xt}return null}}}ot.prototype.visible=!1,ot.findFrom=ot.findGapCursorFrom,_t.Y1.jsonID("gapcursor",ot);class at{constructor(B){this.pos=B}map(B){return new at(B.map(this.pos))}resolve(B){let G=B.resolve(this.pos);return ot.valid(G)?new ot(G):_t.Y1.near(G)}}const Ft=(0,ft.$)({ArrowLeft:Vt("horiz",-1),ArrowRight:Vt("horiz",1),ArrowUp:Vt("vert",-1),ArrowDown:Vt("vert",1)});function Vt(U,B){const G="vert"==U?B>0?"down":"up":B>0?"right":"left";return function(pt,mt,It){let Rt=pt.selection,Xt=B>0?Rt.$to:Rt.$from,le=Rt.empty;if(Rt instanceof _t.Bs){if(!It.endOfTextblock(G)||0==Xt.depth)return!1;le=!1,Xt=pt.doc.resolve(B>0?Xt.after():Xt.before())}let ge=ot.findGapCursorFrom(Xt,B,le);return!!ge&&(mt&&mt(pt.tr.setSelection(new ot(ge))),!0)}}function ne(U,B,G){if(!U||!U.editable)return!1;let pt=U.state.doc.resolve(B);if(!ot.valid(pt))return!1;let mt=U.posAtCoords({left:G.clientX,top:G.clientY});return!(mt&&mt.inside>-1&&_t.qv.isSelectable(U.state.doc.nodeAt(mt.inside))||(U.dispatch(U.state.tr.setSelection(new ot(pt))),0))}function he(U,B){if("insertCompositionText"!=B.inputType||!(U.state.selection instanceof ot))return!1;let{$from:G}=U.state.selection,pt=G.parent.contentMatchAt(G.index()).findWrapping(U.state.schema.nodes.text);if(!pt)return!1;let mt=k.HY.empty;for(let Rt=pt.length-1;Rt>=0;Rt--)mt=k.HY.from(pt[Rt].createAndFill(null,mt));let It=U.state.tr.replace(G.pos,G.pos,new k.p2(mt,0,0));return It.setSelection(_t.Bs.near(It.doc.resolve(G.pos+1))),U.dispatch(It),!1}function Qt(U){if(!(U.selection instanceof ot))return null;let B=document.createElement("div");return B.className="ProseMirror-gapcursor",st.EH.create(U.doc,[st.p.widget(U.selection.head,B,{key:"gapcursor"})])}var Ee=T.Extension.create({name:"gapCursor",addProseMirrorPlugins:()=>[new _t.Sy({props:{decorations:Qt,createSelectionBetween:(U,B,G)=>B.pos==G.pos&&ot.valid(G)?new ot(G):null,handleClick:ne,handleKeyDown:Ft,handleDOMEvents:{beforeinput:he}}})],extendNodeSchema(U){var B;return{allowGapCursor:null!=(B=(0,T.callOrReturn)((0,T.getExtensionField)(U,"allowGapCursor",{name:U.name,options:U.options,storage:U.storage})))?B:null}}}),we=T.Node.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:U}){return["br",(0,T.mergeAttributes)(this.options.HTMLAttributes,U)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:U,chain:B,state:G,editor:pt})=>U.first([()=>U.exitCode(),()=>U.command(()=>{const{selection:mt,storedMarks:It}=G;if(mt.$from.parent.type.spec.isolating)return!1;const{keepMarks:Rt}=this.options,{splittableMarks:Xt}=pt.extensionManager,le=It||mt.$to.parentOffset&&mt.$from.marks();return B().insertContent({type:this.name}).command(({tr:ge,dispatch:pe})=>{if(pe&&le&&Rt){const _e=le.filter(Ce=>Xt.includes(Ce.type.name));ge.ensureMarks(_e)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Ke=T.Node.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(U=>({tag:`h${U}`,attrs:{level:U}}))},renderHTML({node:U,HTMLAttributes:B}){return[`h${this.options.levels.includes(U.attrs.level)?U.attrs.level:this.options.levels[0]}`,(0,T.mergeAttributes)(this.options.HTMLAttributes,B),0]},addCommands(){return{setHeading:U=>({commands:B})=>!!this.options.levels.includes(U.level)&&B.setNode(this.name,U),toggleHeading:U=>({commands:B})=>!!this.options.levels.includes(U.level)&&B.toggleNode(this.name,"paragraph",U)}},addKeyboardShortcuts(){return this.options.levels.reduce((U,B)=>ye(ie({},U),{[`Mod-Alt-${B}`]:()=>this.editor.commands.toggleHeading({level:B})}),{})},addInputRules(){return this.options.levels.map(U=>(0,T.textblockTypeInputRule)({find:new RegExp(`^(#{1,${U}})\\s$`),type:this.type,getAttributes:{level:U}}))}}),Te=function(){};Te.prototype.append=function(B){return B.length?(B=Te.from(B),!this.length&&B||B.length<200&&this.leafAppend(B)||this.length<200&&B.leafPrepend(this)||this.appendInner(B)):this},Te.prototype.prepend=function(B){return B.length?Te.from(B).append(this):this},Te.prototype.appendInner=function(B){return new Re(this,B)},Te.prototype.slice=function(B,G){return void 0===B&&(B=0),void 0===G&&(G=this.length),B>=G?Te.empty:this.sliceInner(Math.max(0,B),Math.min(this.length,G))},Te.prototype.get=function(B){if(!(B<0||B>=this.length))return this.getInner(B)},Te.prototype.forEach=function(B,G,pt){void 0===G&&(G=0),void 0===pt&&(pt=this.length),G<=pt?this.forEachInner(B,G,pt,0):this.forEachInvertedInner(B,G,pt,0)},Te.prototype.map=function(B,G,pt){void 0===G&&(G=0),void 0===pt&&(pt=this.length);var mt=[];return this.forEach(function(It,Rt){return mt.push(B(It,Rt))},G,pt),mt},Te.from=function(B){return B instanceof Te?B:B&&B.length?new Ne(B):Te.empty};var Ne=function(U){function B(pt){U.call(this),this.values=pt}U&&(B.__proto__=U),(B.prototype=Object.create(U&&U.prototype)).constructor=B;var G={length:{configurable:!0},depth:{configurable:!0}};return B.prototype.flatten=function(){return this.values},B.prototype.sliceInner=function(mt,It){return 0==mt&&It==this.length?this:new B(this.values.slice(mt,It))},B.prototype.getInner=function(mt){return this.values[mt]},B.prototype.forEachInner=function(mt,It,Rt,Xt){for(var le=It;le<Rt;le++)if(!1===mt(this.values[le],Xt+le))return!1},B.prototype.forEachInvertedInner=function(mt,It,Rt,Xt){for(var le=It-1;le>=Rt;le--)if(!1===mt(this.values[le],Xt+le))return!1},B.prototype.leafAppend=function(mt){if(this.length+mt.length<=200)return new B(this.values.concat(mt.flatten()))},B.prototype.leafPrepend=function(mt){if(this.length+mt.length<=200)return new B(mt.flatten().concat(this.values))},G.length.get=function(){return this.values.length},G.depth.get=function(){return 0},Object.defineProperties(B.prototype,G),B}(Te);Te.empty=new Ne([]);var Re=function(U){function B(G,pt){U.call(this),this.left=G,this.right=pt,this.length=G.length+pt.length,this.depth=Math.max(G.depth,pt.depth)+1}return U&&(B.__proto__=U),(B.prototype=Object.create(U&&U.prototype)).constructor=B,B.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},B.prototype.getInner=function(pt){return pt<this.left.length?this.left.get(pt):this.right.get(pt-this.left.length)},B.prototype.forEachInner=function(pt,mt,It,Rt){var Xt=this.left.length;if(mt<Xt&&!1===this.left.forEachInner(pt,mt,Math.min(It,Xt),Rt)||It>Xt&&!1===this.right.forEachInner(pt,Math.max(mt-Xt,0),Math.min(this.length,It)-Xt,Rt+Xt))return!1},B.prototype.forEachInvertedInner=function(pt,mt,It,Rt){var Xt=this.left.length;if(mt>Xt&&!1===this.right.forEachInvertedInner(pt,mt-Xt,Math.max(It,Xt)-Xt,Rt+Xt)||It<Xt&&!1===this.left.forEachInvertedInner(pt,Math.min(mt,Xt),It,Rt))return!1},B.prototype.sliceInner=function(pt,mt){if(0==pt&&mt==this.length)return this;var It=this.left.length;return mt<=It?this.left.slice(pt,mt):pt>=It?this.right.slice(pt-It,mt-It):this.left.slice(pt,It).append(this.right.slice(0,mt-It))},B.prototype.leafAppend=function(pt){var mt=this.right.leafAppend(pt);if(mt)return new B(this.left,mt)},B.prototype.leafPrepend=function(pt){var mt=this.left.leafPrepend(pt);if(mt)return new B(mt,this.right)},B.prototype.appendInner=function(pt){return this.left.depth>=Math.max(this.right.depth,pt.depth)+1?new B(this.left,new B(this.right,pt)):new B(this,pt)},B}(Te);const Fe=Te;class De{constructor(B,G){this.items=B,this.eventCount=G}popEvent(B,G){if(0==this.eventCount)return null;let mt,It,pt=this.items.length;for(;;pt--)if(this.items.get(pt-1).selection){--pt;break}G&&(mt=this.remapping(pt,this.items.length),It=mt.maps.length);let Xt,le,Rt=B.tr,ge=[],pe=[];return this.items.forEach((_e,Ce)=>{if(!_e.step)return mt||(mt=this.remapping(pt,Ce+1),It=mt.maps.length),It--,void pe.push(_e);if(mt){pe.push(new Oe(_e.map));let Me,fe=_e.step.map(mt.slice(It));fe&&Rt.maybeStep(fe).doc&&(Me=Rt.mapping.maps[Rt.mapping.maps.length-1],ge.push(new Oe(Me,void 0,void 0,ge.length+pe.length))),It--,Me&&mt.appendMap(Me,It)}else Rt.maybeStep(_e.step);return _e.selection?(Xt=mt?_e.selection.map(mt.slice(It)):_e.selection,le=new De(this.items.slice(0,pt).append(pe.reverse().concat(ge)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:le,transform:Rt,selection:Xt}}addTransform(B,G,pt,mt){let It=[],Rt=this.eventCount,Xt=this.items,le=!mt&&Xt.length?Xt.get(Xt.length-1):null;for(let pe=0;pe<B.steps.length;pe++){let fe,_e=B.steps[pe].invert(B.docs[pe]),Ce=new Oe(B.mapping.maps[pe],_e,G);(fe=le&&le.merge(Ce))&&(Ce=fe,pe?It.pop():Xt=Xt.slice(0,Xt.length-1)),It.push(Ce),G&&(Rt++,G=void 0),mt||(le=Ce)}let ge=Rt-pt.depth;return ge>Qe&&(Xt=function(U,B){let G;return U.forEach((pt,mt)=>{if(pt.selection&&0==B--)return G=mt,!1}),U.slice(G)}(Xt,ge),Rt-=ge),new De(Xt.append(It),Rt)}remapping(B,G){let pt=new Ht.vs;return this.items.forEach((mt,It)=>{pt.appendMap(mt.map,null!=mt.mirrorOffset&&It-mt.mirrorOffset>=B?pt.maps.length-mt.mirrorOffset:void 0)},B,G),pt}addMaps(B){return 0==this.eventCount?this:new De(this.items.append(B.map(G=>new Oe(G))),this.eventCount)}rebased(B,G){if(!this.eventCount)return this;let pt=[],mt=Math.max(0,this.items.length-G),It=B.mapping,Rt=B.steps.length,Xt=this.eventCount;this.items.forEach(Ce=>{Ce.selection&&Xt--},mt);let le=G;this.items.forEach(Ce=>{let fe=It.getMirror(--le);if(null==fe)return;Rt=Math.min(Rt,fe);let Me=It.maps[fe];if(Ce.step){let ke=B.steps[fe].invert(B.docs[fe]),h=Ce.selection&&Ce.selection.map(It.slice(le+1,fe));h&&Xt++,pt.push(new Oe(Me,ke,h))}else pt.push(new Oe(Me))},mt);let ge=[];for(let Ce=G;Ce<Rt;Ce++)ge.push(new Oe(It.maps[Ce]));let pe=this.items.slice(0,mt).append(ge).append(pt),_e=new De(pe,Xt);return _e.emptyItemCount()>500&&(_e=_e.compress(this.items.length-pt.length)),_e}emptyItemCount(){let B=0;return this.items.forEach(G=>{G.step||B++}),B}compress(B=this.items.length){let G=this.remapping(0,B),pt=G.maps.length,mt=[],It=0;return this.items.forEach((Rt,Xt)=>{if(Xt>=B)mt.push(Rt),Rt.selection&&It++;else if(Rt.step){let le=Rt.step.map(G.slice(pt)),ge=le&&le.getMap();if(pt--,ge&&G.appendMap(ge,pt),le){let pe=Rt.selection&&Rt.selection.map(G.slice(pt));pe&&It++;let Ce,_e=new Oe(ge.invert(),le,pe),fe=mt.length-1;(Ce=mt.length&&mt[fe].merge(_e))?mt[fe]=Ce:mt.push(_e)}}else Rt.map&&pt--},this.items.length,0),new De(Fe.from(mt.reverse()),It)}}De.empty=new De(Fe.empty,0);class Oe{constructor(B,G,pt,mt){this.map=B,this.step=G,this.selection=pt,this.mirrorOffset=mt}merge(B){if(this.step&&B.step&&!B.selection){let G=B.step.merge(this.step);if(G)return new Oe(G.getMap().invert(),G,this.selection)}}}class Ie{constructor(B,G,pt,mt){this.done=B,this.undone=G,this.prevRanges=pt,this.prevTime=mt}}const Qe=20;function Ae(U){let B=[];return U.forEach((G,pt,mt,It)=>B.push(mt,It)),B}function ve(U,B){if(!U)return null;let G=[];for(let pt=0;pt<U.length;pt+=2){let mt=B.map(U[pt],1),It=B.map(U[pt+1],-1);mt<=It&&G.push(mt,It)}return G}function Dt(U,B,G,pt){let mt=H(B),It=F.get(B).spec.config,Rt=(pt?U.undone:U.done).popEvent(B,mt);if(!Rt)return;let Xt=Rt.selection.resolve(Rt.transform.doc),le=(pt?U.done:U.undone).addTransform(Rt.transform,B.selection.getBookmark(),It,mt),ge=new Ie(pt?le:Rt.remaining,pt?Rt.remaining:le,null,0);G(Rt.transform.setSelection(Xt).setMeta(F,{redo:pt,historyState:ge}).scrollIntoView())}let D=!1,y=null;function H(U){let B=U.plugins;if(y!=B){D=!1,y=B;for(let G=0;G<B.length;G++)if(B[G].spec.historyPreserveItems){D=!0;break}}return D}const F=new _t.H$("history"),W=new _t.H$("closeHistory");function Mt(U={}){return new _t.Sy({key:F,state:{init:()=>new Ie(De.empty,De.empty,null,0),apply:(B,G,pt)=>function(U,B,G,pt){let It,mt=G.getMeta(F);if(mt)return mt.historyState;G.getMeta(W)&&(U=new Ie(U.done,U.undone,null,0));let Rt=G.getMeta("appendedTransaction");if(0==G.steps.length)return U;if(Rt&&Rt.getMeta(F))return Rt.getMeta(F).redo?new Ie(U.done.addTransform(G,void 0,pt,H(B)),U.undone,Ae(G.mapping.maps[G.steps.length-1]),U.prevTime):new Ie(U.done,U.undone.addTransform(G,void 0,pt,H(B)),null,U.prevTime);if(!1===G.getMeta("addToHistory")||Rt&&!1===Rt.getMeta("addToHistory"))return(It=G.getMeta("rebased"))?new Ie(U.done.rebased(G,It),U.undone.rebased(G,It),ve(U.prevRanges,G.mapping),U.prevTime):new Ie(U.done.addMaps(G.mapping.maps),U.undone.addMaps(G.mapping.maps),ve(U.prevRanges,G.mapping),U.prevTime);{let Xt=0==U.prevTime||!Rt&&(U.prevTime<(G.time||0)-pt.newGroupDelay||!function(U,B){if(!B)return!1;if(!U.docChanged)return!0;let G=!1;return U.mapping.maps[0].forEach((pt,mt)=>{for(let It=0;It<B.length;It+=2)pt<=B[It+1]&&mt>=B[It]&&(G=!0)}),G}(G,U.prevRanges)),le=Rt?ve(U.prevRanges,G.mapping):Ae(G.mapping.maps[G.steps.length-1]);return new Ie(U.done.addTransform(G,Xt?B.selection.getBookmark():void 0,pt,H(B)),De.empty,le,G.time)}}(G,pt,B,U)},config:U={depth:U.depth||100,newGroupDelay:U.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(B,G){let pt=G.inputType,mt="historyUndo"==pt?Pt:"historyRedo"==pt?N:null;return!!mt&&(G.preventDefault(),mt(B.state,B.dispatch))}}}})}const Pt=(U,B)=>{let G=F.getState(U);return!(!G||0==G.done.eventCount||(B&&Dt(G,U,B,!1),0))},N=(U,B)=>{let G=F.getState(U);return!(!G||0==G.undone.eventCount||(B&&Dt(G,U,B,!0),0))};var g=T.Extension.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:U,dispatch:B})=>Pt(U,B),redo:()=>({state:U,dispatch:B})=>N(U,B)}),addProseMirrorPlugins(){return[Mt(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),I=T.Node.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:U}){return["hr",(0,T.mergeAttributes)(this.options.HTMLAttributes,U)]},addCommands(){return{setHorizontalRule:()=>({chain:U})=>U().insertContent({type:this.name}).command(({tr:B,dispatch:G})=>{var pt;if(G){const{$to:mt}=B.selection,It=mt.end();if(mt.nodeAfter)B.setSelection(_t.Bs.create(B.doc,mt.pos));else{const Rt=null==(pt=mt.parent.type.contentMatch.defaultType)?void 0:pt.create();Rt&&(B.insert(It,Rt),B.setSelection(_t.Bs.create(B.doc,It)))}B.scrollIntoView()}return!0}).run()}},addInputRules(){return[(0,T.nodeInputRule)({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),it=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,zt=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,ae=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,ue=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,We=T.Mark.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:U=>"normal"!==U.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:U}){return["em",(0,T.mergeAttributes)(this.options.HTMLAttributes,U),0]},addCommands(){return{setItalic:()=>({commands:U})=>U.setMark(this.name),toggleItalic:()=>({commands:U})=>U.toggleMark(this.name),unsetItalic:()=>({commands:U})=>U.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,T.markInputRule)({find:it,type:this.type}),(0,T.markInputRule)({find:ae,type:this.type})]},addPasteRules(){return[(0,T.markPasteRule)({find:zt,type:this.type}),(0,T.markPasteRule)({find:ue,type:this.type})]}}),je=T.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:U}){return["li",(0,T.mergeAttributes)(this.options.HTMLAttributes,U),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),tn=/^(\d+)\.\s$/,un=T.Node.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:U=>U.hasAttribute("start")?parseInt(U.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:U}){const pt=U,{start:B}=pt,G=Qo(pt,["start"]);return 1===B?["ol",(0,T.mergeAttributes)(this.options.HTMLAttributes,G),0]:["ol",(0,T.mergeAttributes)(this.options.HTMLAttributes,U),0]},addCommands(){return{toggleOrderedList:()=>({commands:U})=>U.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[(0,T.wrappingInputRule)({find:tn,type:this.type,getAttributes:U=>({start:+U[1]}),joinPredicate:(U,B)=>B.childCount+B.attrs.start===+U[1]})]}}),on=T.Node.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:U}){return["p",(0,T.mergeAttributes)(this.options.HTMLAttributes,U),0]},addCommands(){return{setParagraph:()=>({commands:U})=>U.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),vn=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,rn=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,Bt=T.Mark.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:U=>!!U.includes("line-through")&&{}}],renderHTML({HTMLAttributes:U}){return["s",(0,T.mergeAttributes)(this.options.HTMLAttributes,U),0]},addCommands(){return{setStrike:()=>({commands:U})=>U.setMark(this.name),toggleStrike:()=>({commands:U})=>U.toggleMark(this.name),unsetStrike:()=>({commands:U})=>U.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,T.markInputRule)({find:vn,type:this.type})]},addPasteRules(){return[(0,T.markPasteRule)({find:rn,type:this.type})]}}),Kt=T.Node.create({name:"text",group:"inline"});const jt=T.Extension.create({name:"starterKit",addExtensions(){var U,B,G,pt,mt,It,Rt,Xt,le,ge,pe,_e,Ce,fe,Me,ke,h,C,P,O,L,z,Q,ct,q,lt,kt,wt,Zt,te,se,de,me,Ge,an,nn;const Pe=[];return!1!==(null===(U=this.options)||void 0===U?void 0:U.blockquote)&&Pe.push(E.configure(null===(B=this.options)||void 0===B?void 0:B.blockquote)),!1!==(null===(G=this.options)||void 0===G?void 0:G.bold)&&Pe.push(j.configure(null===(pt=this.options)||void 0===pt?void 0:pt.bold)),!1!==(null===(mt=this.options)||void 0===mt?void 0:mt.bulletList)&&Pe.push(tt.configure(null===(It=this.options)||void 0===It?void 0:It.bulletList)),!1!==(null===(Rt=this.options)||void 0===Rt?void 0:Rt.code)&&Pe.push(Ut.configure(null===(Xt=this.options)||void 0===Xt?void 0:Xt.code)),!1!==(null===(le=this.options)||void 0===le?void 0:le.codeBlock)&&Pe.push(Z.configure(null===(ge=this.options)||void 0===ge?void 0:ge.codeBlock)),!1!==(null===(pe=this.options)||void 0===pe?void 0:pe.document)&&Pe.push(bt.configure(null===(_e=this.options)||void 0===_e?void 0:_e.document)),!1!==(null===(Ce=this.options)||void 0===Ce?void 0:Ce.dropcursor)&&Pe.push(Yt.configure(null===(fe=this.options)||void 0===fe?void 0:fe.dropcursor)),!1!==(null===(Me=this.options)||void 0===Me?void 0:Me.gapcursor)&&Pe.push(Ee.configure(null===(ke=this.options)||void 0===ke?void 0:ke.gapcursor)),!1!==(null===(h=this.options)||void 0===h?void 0:h.hardBreak)&&Pe.push(we.configure(null===(C=this.options)||void 0===C?void 0:C.hardBreak)),!1!==(null===(P=this.options)||void 0===P?void 0:P.heading)&&Pe.push(Ke.configure(null===(O=this.options)||void 0===O?void 0:O.heading)),!1!==(null===(L=this.options)||void 0===L?void 0:L.history)&&Pe.push(g.configure(null===(z=this.options)||void 0===z?void 0:z.history)),!1!==(null===(Q=this.options)||void 0===Q?void 0:Q.horizontalRule)&&Pe.push(I.configure(null===(ct=this.options)||void 0===ct?void 0:ct.horizontalRule)),!1!==(null===(q=this.options)||void 0===q?void 0:q.italic)&&Pe.push(We.configure(null===(lt=this.options)||void 0===lt?void 0:lt.italic)),!1!==(null===(kt=this.options)||void 0===kt?void 0:kt.listItem)&&Pe.push(je.configure(null===(wt=this.options)||void 0===wt?void 0:wt.listItem)),!1!==(null===(Zt=this.options)||void 0===Zt?void 0:Zt.orderedList)&&Pe.push(un.configure(null===(te=this.options)||void 0===te?void 0:te.orderedList)),!1!==(null===(se=this.options)||void 0===se?void 0:se.paragraph)&&Pe.push(on.configure(null===(de=this.options)||void 0===de?void 0:de.paragraph)),!1!==(null===(me=this.options)||void 0===me?void 0:me.strike)&&Pe.push(Bt.configure(null===(Ge=this.options)||void 0===Ge?void 0:Ge.strike)),!1!==(null===(an=this.options)||void 0===an?void 0:an.text)&&Pe.push(Kt.configure(null===(nn=this.options)||void 0===nn?void 0:nn.text)),Pe}})},51919:(ee,yt,a)=>{a.r(yt),a.d(yt,{TableCellBackground:()=>r});const r=a(12867).Extension.create({addGlobalAttributes:()=>[{types:["tableCell","tableHeader"],attributes:{background:{default:null,renderHTML:({background:E})=>E?{style:`background: ${E}`}:null,parseHTML:({style:E})=>E.background,keepOnSplit:!1}}}],addCommands:()=>({setCellBackground:E=>({chain:b})=>b().updateAttributes("tableCell",{background:E}).updateAttributes("tableHeader",{background:E}).run(),unsetCellBackground:()=>({chain:E})=>E().updateAttributes("tableCell",{background:null}).updateAttributes("tableHeader",{background:null}).run()})})},86624:(ee,yt,a)=>{a.r(yt),a.d(yt,{TuiTable:()=>ke});var R,X,T=a(12867),r=a(62463),E=a(77346),b=a(43594),p=a(70768),Y=a(38480);if("undefined"!=typeof WeakMap){let h=new WeakMap;R=C=>h.get(C),X=(C,P)=>(h.set(C,P),P)}else{const h=[],C=10;let P=0;R=O=>{for(let L=0;L<h.length;L+=2)if(h[L]==O)return h[L+1]},X=(O,L)=>(P==C&&(P=0),h[P++]=O,h[P++]=L)}var j=class{constructor(h,C,P,O){this.width=h,this.height=C,this.map=P,this.problems=O}findCell(h){for(let C=0;C<this.map.length;C++){const P=this.map[C];if(P!=h)continue;const O=C%this.width,L=C/this.width|0;let z=O+1,Q=L+1;for(let ct=1;z<this.width&&this.map[C+ct]==P;ct++)z++;for(let ct=1;Q<this.height&&this.map[C+this.width*ct]==P;ct++)Q++;return{left:O,top:L,right:z,bottom:Q}}throw new RangeError(`No cell with offset ${h} found`)}colCount(h){for(let C=0;C<this.map.length;C++)if(this.map[C]==h)return C%this.width;throw new RangeError(`No cell with offset ${h} found`)}nextCell(h,C,P){const{left:O,right:L,top:z,bottom:Q}=this.findCell(h);return"horiz"==C?(P<0?0==O:L==this.width)?null:this.map[z*this.width+(P<0?O-1:L)]:(P<0?0==z:Q==this.height)?null:this.map[O+this.width*(P<0?z-1:Q)]}rectBetween(h,C){const{left:P,right:O,top:L,bottom:z}=this.findCell(h),{left:Q,right:ct,top:q,bottom:lt}=this.findCell(C);return{left:Math.min(P,Q),top:Math.min(L,q),right:Math.max(O,ct),bottom:Math.max(z,lt)}}cellsInRect(h){const C=[],P={};for(let O=h.top;O<h.bottom;O++)for(let L=h.left;L<h.right;L++){const z=O*this.width+L,Q=this.map[z];P[Q]||(P[Q]=!0,!(L==h.left&&L&&this.map[z-1]==Q||O==h.top&&O&&this.map[z-this.width]==Q)&&C.push(Q))}return C}positionAt(h,C,P){for(let O=0,L=0;;O++){const z=L+P.child(O).nodeSize;if(O==h){let Q=C+h*this.width;const ct=(h+1)*this.width;for(;Q<ct&&this.map[Q]<L;)Q++;return Q==ct?z-1:this.map[Q]}L=z}}static get(h){return R(h)||X(h,function(h){if("table"!=h.type.spec.tableRole)throw new RangeError("Not a table node: "+h.type.name);const C=function(h){let C=-1,P=!1;for(let O=0;O<h.childCount;O++){const L=h.child(O);let z=0;if(P)for(let Q=0;Q<O;Q++){const ct=h.child(Q);for(let q=0;q<ct.childCount;q++){const lt=ct.child(q);Q+lt.attrs.rowspan>O&&(z+=lt.attrs.colspan)}}for(let Q=0;Q<L.childCount;Q++){const ct=L.child(Q);z+=ct.attrs.colspan,ct.attrs.rowspan>1&&(P=!0)}-1==C?C=z:C!=z&&(C=Math.max(C,z))}return C}(h),P=h.childCount,O=[];let L=0,z=null;const Q=[];for(let lt=0,kt=C*P;lt<kt;lt++)O[lt]=0;for(let lt=0,kt=0;lt<P;lt++){const wt=h.child(lt);kt++;for(let se=0;;se++){for(;L<O.length&&0!=O[L];)L++;if(se==wt.childCount)break;const de=wt.child(se),{colspan:me,rowspan:Ge,colwidth:an}=de.attrs;for(let nn=0;nn<Ge;nn++){if(nn+lt>=P){(z||(z=[])).push({type:"overlong_rowspan",pos:kt,n:Ge-nn});break}const Pe=L+nn*C;for(let cn=0;cn<me;cn++){0==O[Pe+cn]?O[Pe+cn]=kt:(z||(z=[])).push({type:"collision",row:lt,pos:kt,n:me-cn});const En=an&&an[cn];if(En){const Tn=(Pe+cn)%C*2,He=Q[Tn];null==He||He!=En&&1==Q[Tn+1]?(Q[Tn]=En,Q[Tn+1]=1):He==En&&Q[Tn+1]++}}}L+=me,kt+=de.nodeSize}const Zt=(lt+1)*C;let te=0;for(;L<Zt;)0==O[L++]&&te++;te&&(z||(z=[])).push({type:"missing",row:lt,n:te}),kt++}const ct=new j(C,P,O,z);let q=!1;for(let lt=0;!q&&lt<Q.length;lt+=2)null!=Q[lt]&&Q[lt+1]<P&&(q=!0);return q&&function(h,C,P){h.problems||(h.problems=[]);const O={};for(let L=0;L<h.map.length;L++){const z=h.map[L];if(O[z])continue;O[z]=!0;const Q=P.nodeAt(z);if(!Q)throw new RangeError(`No cell with offset ${z} found`);let ct=null;const q=Q.attrs;for(let lt=0;lt<q.colspan;lt++){const wt=C[(L+lt)%h.width*2];null!=wt&&(!q.colwidth||q.colwidth[lt]!=wt)&&((ct||(ct=vt(q)))[lt]=wt)}ct&&h.problems.unshift({type:"colwidth mismatch",pos:z,colwidth:ct})}}(ct,Q,h),ct}(h))}};function vt(h){if(h.colwidth)return h.colwidth.slice();const C=[];for(let P=0;P<h.colspan;P++)C.push(0);return C}function At(h){let C=h.cached.tableNodeTypes;if(!C){C=h.cached.tableNodeTypes={};for(const P in h.nodes){const O=h.nodes[P],L=O.spec.tableRole;L&&(C[L]=O)}}return C}var _t=new r.H$("selectingCells");function ut(h){for(let C=h.depth-1;C>0;C--)if("row"==h.node(C).type.spec.tableRole)return h.node(0).resolve(h.before(C+1));return null}function Z(h){const C=h.selection.$head;for(let P=C.depth;P>0;P--)if("row"==C.node(P).type.spec.tableRole)return!0;return!1}function Ot(h){const C=h.selection;if("$anchorCell"in C&&C.$anchorCell)return C.$anchorCell.pos>C.$headCell.pos?C.$anchorCell:C.$headCell;if("node"in C&&C.node&&"cell"==C.node.type.spec.tableRole)return C.$anchor;const P=ut(C.$head)||function(h){for(let C=h.nodeAfter,P=h.pos;C;C=C.firstChild,P++){const O=C.type.spec.tableRole;if("cell"==O||"header_cell"==O)return h.doc.resolve(P)}for(let C=h.nodeBefore,P=h.pos;C;C=C.lastChild,P--){const O=C.type.spec.tableRole;if("cell"==O||"header_cell"==O)return h.doc.resolve(P-C.nodeSize)}}(C.$head);if(P)return P;throw new RangeError(`No cell found around position ${C.head}`)}function Nt(h){return"row"==h.parent.type.spec.tableRole&&!!h.nodeAfter}function xt(h,C){return h.depth==C.depth&&h.pos>=C.start(-1)&&h.pos<=C.end(-1)}function qt(h,C,P){const O=h.node(-1),L=j.get(O),z=h.start(-1),Q=L.nextCell(h.pos-z,C,P);return null==Q?null:h.node(0).resolve(z+Q)}function ft(h,C,P=1){const O=ye(ie({},h),{colspan:h.colspan-P});return O.colwidth&&(O.colwidth=O.colwidth.slice(),O.colwidth.splice(C,P),O.colwidth.some(L=>L>0)||(O.colwidth=null)),O}function k(h,C,P=1){const O=ye(ie({},h),{colspan:h.colspan+P});if(O.colwidth){O.colwidth=O.colwidth.slice();for(let L=0;L<P;L++)O.colwidth.splice(C,0,0)}return O}var ot=class extends r.Y1{constructor(h,C=h){const P=h.node(-1),O=j.get(P),L=h.start(-1),z=O.rectBetween(h.pos-L,C.pos-L),Q=h.node(0),ct=O.cellsInRect(z).filter(lt=>lt!=C.pos-L);ct.unshift(C.pos-L);const q=ct.map(lt=>{const kt=P.nodeAt(lt);if(!kt)throw RangeError(`No cell with offset ${lt} found`);const wt=L+lt+1;return new r.xm(Q.resolve(wt),Q.resolve(wt+kt.content.size))});super(q[0].$from,q[0].$to,q),this.$anchorCell=h,this.$headCell=C}map(h,C){const P=h.resolve(C.map(this.$anchorCell.pos)),O=h.resolve(C.map(this.$headCell.pos));if(Nt(P)&&Nt(O)&&xt(P,O)){const L=this.$anchorCell.node(-1)!=P.node(-1);return L&&this.isRowSelection()?ot.rowSelection(P,O):L&&this.isColSelection()?ot.colSelection(P,O):new ot(P,O)}return r.Bs.between(P,O)}content(){const h=this.$anchorCell.node(-1),C=j.get(h),P=this.$anchorCell.start(-1),O=C.rectBetween(this.$anchorCell.pos-P,this.$headCell.pos-P),L={},z=[];for(let ct=O.top;ct<O.bottom;ct++){const q=[];for(let lt=ct*C.width+O.left,kt=O.left;kt<O.right;kt++,lt++){const wt=C.map[lt];if(L[wt])continue;L[wt]=!0;const Zt=C.findCell(wt);let te=h.nodeAt(wt);if(!te)throw RangeError(`No cell with offset ${wt} found`);const se=O.left-Zt.left,de=Zt.right-O.right;if(se>0||de>0){let me=te.attrs;if(se>0&&(me=ft(me,0,se)),de>0&&(me=ft(me,me.colspan-de,de)),Zt.left<O.left){if(te=te.type.createAndFill(me),!te)throw RangeError(`Could not create cell with attrs ${JSON.stringify(me)}`)}else te=te.type.create(me,te.content)}if(Zt.top<O.top||Zt.bottom>O.bottom){const me=ye(ie({},te.attrs),{rowspan:Math.min(Zt.bottom,O.bottom)-Math.max(Zt.top,O.top)});te=Zt.top<O.top?te.type.createAndFill(me):te.type.create(me,te.content)}q.push(te)}z.push(h.child(ct).copy(E.HY.from(q)))}const Q=this.isColSelection()&&this.isRowSelection()?h:z;return new E.p2(E.HY.from(Q),1,1)}replace(h,C=E.p2.empty){const P=h.steps.length,O=this.ranges;for(let z=0;z<O.length;z++){const{$from:Q,$to:ct}=O[z],q=h.mapping.slice(P);h.replace(q.map(Q.pos),q.map(ct.pos),z?E.p2.empty:C)}const L=r.Y1.findFrom(h.doc.resolve(h.mapping.slice(P).map(this.to)),-1);L&&h.setSelection(L)}replaceWith(h,C){this.replace(h,new E.p2(E.HY.from(C),0,0))}forEachCell(h){const C=this.$anchorCell.node(-1),P=j.get(C),O=this.$anchorCell.start(-1),L=P.cellsInRect(P.rectBetween(this.$anchorCell.pos-O,this.$headCell.pos-O));for(let z=0;z<L.length;z++)h(C.nodeAt(L[z]),O+L[z])}isColSelection(){const h=this.$anchorCell.index(-1),C=this.$headCell.index(-1);return!(Math.min(h,C)>0)&&Math.max(h+this.$anchorCell.nodeAfter.attrs.rowspan,C+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(h,C=h){const P=h.node(-1),O=j.get(P),L=h.start(-1),z=O.findCell(h.pos-L),Q=O.findCell(C.pos-L),ct=h.node(0);return z.top<=Q.top?(z.top>0&&(h=ct.resolve(L+O.map[z.left])),Q.bottom<O.height&&(C=ct.resolve(L+O.map[O.width*(O.height-1)+Q.right-1]))):(Q.top>0&&(C=ct.resolve(L+O.map[Q.left])),z.bottom<O.height&&(h=ct.resolve(L+O.map[O.width*(O.height-1)+z.right-1]))),new ot(h,C)}isRowSelection(){const h=this.$anchorCell.node(-1),C=j.get(h),P=this.$anchorCell.start(-1),O=C.colCount(this.$anchorCell.pos-P),L=C.colCount(this.$headCell.pos-P);return!(Math.min(O,L)>0)&&Math.max(O+this.$anchorCell.nodeAfter.attrs.colspan,L+this.$headCell.nodeAfter.attrs.colspan)==C.width}eq(h){return h instanceof ot&&h.$anchorCell.pos==this.$anchorCell.pos&&h.$headCell.pos==this.$headCell.pos}static rowSelection(h,C=h){const P=h.node(-1),O=j.get(P),L=h.start(-1),z=O.findCell(h.pos-L),Q=O.findCell(C.pos-L),ct=h.node(0);return z.left<=Q.left?(z.left>0&&(h=ct.resolve(L+O.map[z.top*O.width])),Q.right<O.width&&(C=ct.resolve(L+O.map[O.width*(Q.top+1)-1]))):(Q.left>0&&(C=ct.resolve(L+O.map[Q.top*O.width])),z.right<O.width&&(h=ct.resolve(L+O.map[O.width*(z.top+1)-1]))),new ot(h,C)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(h,C){return new ot(h.resolve(C.anchor),h.resolve(C.head))}static create(h,C,P=C){return new ot(h.resolve(C),h.resolve(P))}getBookmark(){return new at(this.$anchorCell.pos,this.$headCell.pos)}};ot.prototype.visible=!1,r.Y1.jsonID("cell",ot);var at=class{constructor(h,C){this.anchor=h,this.head=C}map(h){return new at(h.map(this.anchor),h.map(this.head))}resolve(h){const C=h.resolve(this.anchor),P=h.resolve(this.head);return"row"==C.parent.type.spec.tableRole&&"row"==P.parent.type.spec.tableRole&&C.index()<C.parent.childCount&&P.index()<P.parent.childCount&&xt(C,P)?new ot(C,P):r.Y1.near(P,1)}};function J(h){if(!(h.selection instanceof ot))return null;const C=[];return h.selection.forEachCell((P,O)=>{C.push(b.p.node(O,O+P.nodeSize,{class:"selectedCell"}))}),b.EH.create(h.doc,C)}var Vt=new r.H$("fix-tables");function ne(h,C,P,O){const L=h.childCount,z=C.childCount;t:for(let Q=0,ct=0;Q<z;Q++){const q=C.child(Q);for(let lt=ct,kt=Math.min(L,Q+3);lt<kt;lt++)if(h.child(lt)==q){ct=lt+1,P+=q.nodeSize;continue t}O(q,P),ct<L&&h.child(ct).sameMarkup(q)?ne(h.child(ct),q,P+1,O):q.nodesBetween(0,q.content.size,O,P+1),P+=q.nodeSize}}function he(h,C){let P;const O=(L,z)=>{"table"==L.type.spec.tableRole&&(P=function(h,C,P,O){const L=j.get(C);if(!L.problems)return O;O||(O=h.tr);const z=[];for(let q=0;q<L.height;q++)z.push(0);for(let q=0;q<L.problems.length;q++){const lt=L.problems[q];if("collision"==lt.type){const kt=C.nodeAt(lt.pos);if(!kt)continue;const wt=kt.attrs;for(let Zt=0;Zt<wt.rowspan;Zt++)z[lt.row+Zt]+=lt.n;O.setNodeMarkup(O.mapping.map(P+1+lt.pos),null,ft(wt,wt.colspan-lt.n,lt.n))}else if("missing"==lt.type)z[lt.row]+=lt.n;else if("overlong_rowspan"==lt.type){const kt=C.nodeAt(lt.pos);if(!kt)continue;O.setNodeMarkup(O.mapping.map(P+1+lt.pos),null,ye(ie({},kt.attrs),{rowspan:kt.attrs.rowspan-lt.n}))}else if("colwidth mismatch"==lt.type){const kt=C.nodeAt(lt.pos);if(!kt)continue;O.setNodeMarkup(O.mapping.map(P+1+lt.pos),null,ye(ie({},kt.attrs),{colwidth:lt.colwidth}))}}let Q,ct;for(let q=0;q<z.length;q++)z[q]&&(null==Q&&(Q=q),ct=q);for(let q=0,lt=P+1;q<L.height;q++){const kt=C.child(q),wt=lt+kt.nodeSize,Zt=z[q];if(Zt>0){let te="cell";kt.firstChild&&(te=kt.firstChild.type.spec.tableRole);const se=[];for(let me=0;me<Zt;me++){const Ge=At(h.schema)[te].createAndFill();Ge&&se.push(Ge)}O.insert(O.mapping.map(0!=q&&Q!=q-1||ct!=q?wt-1:lt+1),se)}lt=wt}return O.setMeta(Vt,{fixTables:!0})}(h,L,z,P))};return C?C.doc!=h.doc&&ne(C.doc,h.doc,0,O):h.doc.descendants(O),P}function we(h,C){const P=h.createAndFill();return new Y.wx(P).replace(0,P.content.size,C).doc}function Ve(h,C,P,O,L,z,Q,ct){if(0==Q||Q==C.height)return!1;let q=!1;for(let lt=L;lt<z;lt++){const kt=Q*C.width+lt,wt=C.map[kt];if(C.map[kt-C.width]==wt){q=!0;const Zt=P.nodeAt(wt),{top:te,left:se}=C.findCell(wt);h.setNodeMarkup(h.mapping.slice(ct).map(wt+O),null,ye(ie({},Zt.attrs),{rowspan:Q-te})),h.insert(h.mapping.slice(ct).map(C.positionAt(Q,se,P)),Zt.type.createAndFill(ye(ie({},Zt.attrs),{rowspan:te+Zt.attrs.rowspan-Q}))),lt+=Zt.attrs.colspan-1}}return q}function Se(h,C,P,O,L,z,Q,ct){if(0==Q||Q==C.width)return!1;let q=!1;for(let lt=L;lt<z;lt++){const kt=lt*C.width+Q,wt=C.map[kt];if(C.map[kt-1]==wt){q=!0;const Zt=P.nodeAt(wt),te=C.colCount(wt),se=h.mapping.slice(ct).map(wt+O);h.setNodeMarkup(se,null,ft(Zt.attrs,Q-te,Zt.attrs.colspan-(Q-te))),h.insert(se+Zt.nodeSize,Zt.type.createAndFill(ft(Zt.attrs,0,Q-te))),lt+=Zt.attrs.rowspan-1}}return q}function Te(h,C,P,O,L){let z=P?h.doc.nodeAt(P-1):h.doc;if(!z)throw new Error("No table found");let Q=j.get(z);const{top:ct,left:q}=O,lt=q+L.width,kt=ct+L.height,wt=h.tr;let Zt=0;function te(){if(z=P?wt.doc.nodeAt(P-1):wt.doc,!z)throw new Error("No table found");Q=j.get(z),Zt=wt.mapping.maps.length}(function(h,C,P,O,L,z,Q){const q=At(h.doc.type.schema);let lt,kt;if(L>C.width)for(let wt=0,Zt=0;wt<C.height;wt++){const te=P.child(wt);Zt+=te.nodeSize;const se=[];let de;de=null==te.lastChild||te.lastChild.type==q.cell?lt||(lt=q.cell.createAndFill()):kt||(kt=q.header_cell.createAndFill());for(let me=C.width;me<L;me++)se.push(de);h.insert(h.mapping.slice(Q).map(Zt-1+O),se)}if(z>C.height){const wt=[];for(let se=0,de=(C.height-1)*C.width;se<Math.max(C.width,L);se++){const me=!(se>=C.width)&&P.nodeAt(C.map[de+se]).type==q.header_cell;wt.push(me?kt||(kt=q.header_cell.createAndFill()):lt||(lt=q.cell.createAndFill()))}const Zt=q.row.create(null,E.HY.from(wt)),te=[];for(let se=C.height;se<z;se++)te.push(Zt);h.insert(h.mapping.slice(Q).map(O+P.nodeSize-2),te)}return!(!lt&&!kt)})(wt,Q,z,P,lt,kt,Zt)&&te(),Ve(wt,Q,z,P,q,lt,ct,Zt)&&te(),Ve(wt,Q,z,P,q,lt,kt,Zt)&&te(),Se(wt,Q,z,P,ct,kt,q,Zt)&&te(),Se(wt,Q,z,P,ct,kt,lt,Zt)&&te();for(let se=ct;se<kt;se++){const de=Q.positionAt(se,q,z),me=Q.positionAt(se,lt,z);wt.replace(wt.mapping.slice(Zt).map(de+P),wt.mapping.slice(Zt).map(me+P),new E.p2(L.rows[se-ct],0,0))}te(),wt.setSelection(new ot(wt.doc.resolve(P+Q.positionAt(ct,q,z)),wt.doc.resolve(P+Q.positionAt(kt-1,lt-1,z)))),C(wt)}var Ne=(0,p.$)({ArrowLeft:Be("horiz",-1),ArrowRight:Be("horiz",1),ArrowUp:Be("vert",-1),ArrowDown:Be("vert",1),"Shift-ArrowLeft":Fe("horiz",-1),"Shift-ArrowRight":Fe("horiz",1),"Shift-ArrowUp":Fe("vert",-1),"Shift-ArrowDown":Fe("vert",1),Backspace:Le,"Mod-Backspace":Le,Delete:Le,"Mod-Delete":Le});function Re(h,C,P){return!P.eq(h.selection)&&(C&&C(h.tr.setSelection(P).scrollIntoView()),!0)}function Be(h,C){return(P,O,L)=>{if(!L)return!1;const z=P.selection;if(z instanceof ot)return Re(P,O,r.Y1.near(z.$headCell,C));if("horiz"!=h&&!z.empty)return!1;const Q=Ie(L,h,C);if(null==Q)return!1;if("horiz"==h)return Re(P,O,r.Y1.near(P.doc.resolve(z.head+C),C));{const ct=P.doc.resolve(Q),q=qt(ct,h,C);let lt;return lt=q?r.Y1.near(q,1):C<0?r.Y1.near(P.doc.resolve(ct.before(-1)),-1):r.Y1.near(P.doc.resolve(ct.after(-1)),1),Re(P,O,lt)}}}function Fe(h,C){return(P,O,L)=>{if(!L)return!1;const z=P.selection;let Q;if(z instanceof ot)Q=z;else{const q=Ie(L,h,C);if(null==q)return!1;Q=new ot(P.doc.resolve(q))}const ct=qt(Q.$headCell,h,C);return!!ct&&Re(P,O,new ot(Q.$anchorCell,ct))}}function Le(h,C){const P=h.selection;if(!(P instanceof ot))return!1;if(C){const O=h.tr,L=At(h.schema).cell.createAndFill().content;P.forEachCell((z,Q)=>{z.content.eq(L)||O.replace(O.mapping.map(Q+1),O.mapping.map(Q+z.nodeSize-1),new E.p2(L,0,0))}),O.docChanged&&C(O)}return!0}function De(h,C){const O=ut(h.state.doc.resolve(C));return!!O&&(h.dispatch(h.state.tr.setSelection(new ot(O))),!0)}function Ze(h,C,P){if(!Z(h.state))return!1;let O=function(h){if(!h.size)return null;let{content:C,openStart:P,openEnd:O}=h;for(;1==C.childCount&&(P>0&&O>0||"table"==C.child(0).type.spec.tableRole);)P--,O--,C=C.child(0).content;const L=C.child(0),z=L.type.spec.tableRole,Q=L.type.schema,ct=[];if("row"==z)for(let q=0;q<C.childCount;q++){let lt=C.child(q).content;const kt=q?0:Math.max(0,P-1),wt=q<C.childCount-1?0:Math.max(0,O-1);(kt||wt)&&(lt=we(At(Q).row,new E.p2(lt,kt,wt)).content),ct.push(lt)}else{if("cell"!=z&&"header_cell"!=z)return null;ct.push(P||O?we(At(Q).row,new E.p2(C,P,O)).content:C)}return function(h,C){const P=[];for(let L=0;L<C.length;L++){const z=C[L];for(let Q=z.childCount-1;Q>=0;Q--){const{rowspan:ct,colspan:q}=z.child(Q).attrs;for(let lt=L;lt<L+ct;lt++)P[lt]=(P[lt]||0)+q}}let O=0;for(let L=0;L<P.length;L++)O=Math.max(O,P[L]);for(let L=0;L<P.length;L++)if(L>=C.length&&C.push(E.HY.empty),P[L]<O){const z=At(h).cell.createAndFill(),Q=[];for(let ct=P[L];ct<O;ct++)Q.push(z);C[L]=C[L].append(E.HY.from(Q))}return{height:C.length,width:O,rows:C}}(Q,ct)}(P);const L=h.state.selection;if(L instanceof ot){O||(O={width:1,height:1,rows:[E.HY.from(we(At(h.state.schema).cell,P))]});const z=L.$anchorCell.node(-1),Q=L.$anchorCell.start(-1),ct=j.get(z).rectBetween(L.$anchorCell.pos-Q,L.$headCell.pos-Q);return O=function({width:h,height:C,rows:P},O,L){if(h!=O){const z=[],Q=[];for(let ct=0;ct<P.length;ct++){const q=P[ct],lt=[];for(let kt=z[ct]||0,wt=0;kt<O;wt++){let Zt=q.child(wt%q.childCount);kt+Zt.attrs.colspan>O&&(Zt=Zt.type.createChecked(ft(Zt.attrs,Zt.attrs.colspan,kt+Zt.attrs.colspan-O),Zt.content)),lt.push(Zt),kt+=Zt.attrs.colspan;for(let te=1;te<Zt.attrs.rowspan;te++)z[ct+te]=(z[ct+te]||0)+Zt.attrs.colspan}Q.push(E.HY.from(lt))}P=Q,h=O}if(C!=L){const z=[];for(let Q=0,ct=0;Q<L;Q++,ct++){const q=[],lt=P[ct%C];for(let kt=0;kt<lt.childCount;kt++){let wt=lt.child(kt);Q+wt.attrs.rowspan>L&&(wt=wt.type.create(ye(ie({},wt.attrs),{rowspan:Math.max(1,L-wt.attrs.rowspan)}),wt.content)),q.push(wt)}z.push(E.HY.from(q))}P=z,C=L}return{width:h,height:C,rows:P}}(O,ct.right-ct.left,ct.bottom-ct.top),Te(h.state,h.dispatch,Q,ct,O),!0}if(O){const z=Ot(h.state),Q=z.start(-1);return Te(h.state,h.dispatch,Q,j.get(z.node(-1)).findCell(z.pos-Q),O),!0}return!1}function Oe(h,C){var P;if(C.ctrlKey||C.metaKey)return;const O=Qe(h,C.target);let L;if(C.shiftKey&&h.state.selection instanceof ot)z(h.state.selection.$anchorCell,C),C.preventDefault();else if(C.shiftKey&&O&&null!=(L=ut(h.state.selection.$anchor))&&(null==(P=ze(h,C))?void 0:P.pos)!=L.pos)z(L,C),C.preventDefault();else if(!O)return;function z(q,lt){let kt=ze(h,lt);const wt=null==_t.getState(h.state);if(!kt||!xt(q,kt)){if(!wt)return;kt=q}const Zt=new ot(q,kt);if(wt||!h.state.selection.eq(Zt)){const te=h.state.tr.setSelection(Zt);wt&&te.setMeta(_t,q.pos),h.dispatch(te)}}function Q(){h.root.removeEventListener("mouseup",Q),h.root.removeEventListener("dragstart",Q),h.root.removeEventListener("mousemove",ct),null!=_t.getState(h.state)&&h.dispatch(h.state.tr.setMeta(_t,-1))}function ct(q){const lt=q,kt=_t.getState(h.state);let wt;if(null!=kt)wt=h.state.doc.resolve(kt);else if(Qe(h,lt.target)!=O&&(wt=ze(h,C),!wt))return Q();wt&&z(wt,lt)}h.root.addEventListener("mouseup",Q),h.root.addEventListener("dragstart",Q),h.root.addEventListener("mousemove",ct)}function Ie(h,C,P){if(!(h.state.selection instanceof r.Bs))return null;const{$head:O}=h.state.selection;for(let L=O.depth-1;L>=0;L--){const z=O.node(L);if((P<0?O.index(L):O.indexAfter(L))!=(P<0?0:z.childCount))return null;if("cell"==z.type.spec.tableRole||"header_cell"==z.type.spec.tableRole){const ct=O.before(L);return h.endOfTextblock("vert"==C?P>0?"down":"up":P>0?"right":"left")?ct:null}}return null}function Qe(h,C){for(;C&&C!=h.dom;C=C.parentNode)if("TD"==C.nodeName||"TH"==C.nodeName)return C;return null}function ze(h,C){const P=h.posAtCoords({left:C.clientX,top:C.clientY});return P&&P?ut(h.state.doc.resolve(P.pos)):null}var Ue=class{constructor(h,C){this.node=h,this.cellMinWidth=C,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Ae(h,this.colgroup,this.table,C),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(h){return h.type==this.node.type&&(this.node=h,Ae(h,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(h){return"attributes"==h.type&&(h.target==this.table||this.colgroup.contains(h.target))}};function Ae(h,C,P,O,L,z){var Q;let ct=0,q=!0,lt=C.firstChild;const kt=h.firstChild;if(kt){for(let wt=0,Zt=0;wt<kt.childCount;wt++){const{colspan:te,colwidth:se}=kt.child(wt).attrs;for(let de=0;de<te;de++,Zt++){const me=L==Zt?z:se&&se[de],Ge=me?me+"px":"";ct+=me||O,me||(q=!1),lt?(lt.style.width!=Ge&&(lt.style.width=Ge),lt=lt.nextSibling):C.appendChild(document.createElement("col")).style.width=Ge}}for(;lt;){const wt=lt.nextSibling;null==(Q=lt.parentNode)||Q.removeChild(lt),lt=wt}q?(P.style.width=ct+"px",P.style.minWidth=""):(P.style.width="",P.style.minWidth=ct+"px")}}var ve=new r.H$("tableColumnResizing");function Dt({handleWidth:h=5,cellMinWidth:C=25,View:P=Ue,lastColumnResizable:O=!0}={}){const L=new r.Sy({key:ve,state:{init:(z,Q)=>(L.spec.props.nodeViews[At(Q.schema).table.name]=(ct,q)=>new P(ct,C,q),new D(-1,!1)),apply:(z,Q)=>Q.apply(z)},props:{attributes:z=>{const Q=ve.getState(z);return Q&&Q.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(z,Q)=>{!function(h,C,P,O,L){const z=ve.getState(h.state);if(z&&!z.dragging){const Q=function(h){for(;h&&"TD"!=h.nodeName&&"TH"!=h.nodeName;)h=h.classList&&h.classList.contains("ProseMirror")?null:h.parentNode;return h}(C.target);let ct=-1;if(Q){const{left:q,right:lt}=Q.getBoundingClientRect();C.clientX-q<=P?ct=Mt(h,C,"left"):lt-C.clientX<=P&&(ct=Mt(h,C,"right"))}if(ct!=z.activeHandle){if(!L&&-1!==ct){const q=h.state.doc.resolve(ct),lt=q.node(-1),kt=j.get(lt),wt=q.start(-1);if(kt.colCount(q.pos-wt)+q.nodeAfter.attrs.colspan-1==kt.width-1)return}N(h,ct)}}}(z,Q,h,0,O)},mouseleave:z=>{!function(h){const C=ve.getState(h.state);C&&C.activeHandle>-1&&!C.dragging&&N(h,-1)}(z)},mousedown:(z,Q)=>{!function(h,C,P){const O=ve.getState(h.state);if(!O||-1==O.activeHandle||O.dragging)return!1;const L=h.state.doc.nodeAt(O.activeHandle),z=function(h,C,{colspan:P,colwidth:O}){const L=O&&O[O.length-1];if(L)return L;const z=h.domAtPos(C);let ct=z.node.childNodes[z.offset].offsetWidth,q=P;if(O)for(let lt=0;lt<P;lt++)O[lt]&&(ct-=O[lt],q--);return ct/q}(h,O.activeHandle,L.attrs);function Q(q){window.removeEventListener("mouseup",Q),window.removeEventListener("mousemove",ct);const lt=ve.getState(h.state);(null==lt?void 0:lt.dragging)&&(function(h,C,P){const O=h.state.doc.resolve(C),L=O.node(-1),z=j.get(L),Q=O.start(-1),ct=z.colCount(O.pos-Q)+O.nodeAfter.attrs.colspan-1,q=h.state.tr;for(let lt=0;lt<z.height;lt++){const kt=lt*z.width+ct;if(lt&&z.map[kt]==z.map[kt-z.width])continue;const wt=z.map[kt],Zt=L.nodeAt(wt).attrs,te=1==Zt.colspan?0:ct-z.colCount(wt);if(Zt.colwidth&&Zt.colwidth[te]==P)continue;const se=Zt.colwidth?Zt.colwidth.slice():g(Zt.colspan);se[te]=P,q.setNodeMarkup(Q+wt,null,ye(ie({},Zt),{colwidth:se}))}q.docChanged&&h.dispatch(q)}(h,lt.activeHandle,Pt(lt.dragging,q,P)),h.dispatch(h.state.tr.setMeta(ve,{setDragging:null})))}function ct(q){if(!q.which)return Q(q);const lt=ve.getState(h.state);if(lt&&lt.dragging){const kt=Pt(lt.dragging,q,P);!function(h,C,P,O){const L=h.state.doc.resolve(C),z=L.node(-1),Q=L.start(-1),ct=j.get(z).colCount(L.pos-Q)+L.nodeAfter.attrs.colspan-1;let q=h.domAtPos(L.start(-1)).node;for(;q&&"TABLE"!=q.nodeName;)q=q.parentNode;!q||Ae(z,q.firstChild,q,O,ct,P)}(h,lt.activeHandle,kt,P)}}h.dispatch(h.state.tr.setMeta(ve,{setDragging:{startX:C.clientX,startWidth:z}})),window.addEventListener("mouseup",Q),window.addEventListener("mousemove",ct),C.preventDefault()}(z,Q,C)}},decorations:z=>{const Q=ve.getState(z);if(Q&&Q.activeHandle>-1)return function(h,C){const P=[],O=h.doc.resolve(C),L=O.node(-1);if(!L)return b.EH.empty;const z=j.get(L),Q=O.start(-1),ct=z.colCount(O.pos-Q)+O.nodeAfter.attrs.colspan;for(let q=0;q<z.height;q++){const lt=ct+q*z.width-1;if(!(ct!=z.width&&z.map[lt]==z.map[lt+1]||0!=q&&z.map[lt-1]==z.map[lt-1-z.width])){const kt=z.map[lt],wt=Q+kt+L.nodeAt(kt).nodeSize-1,Zt=document.createElement("div");Zt.className="column-resize-handle",P.push(b.p.widget(wt,Zt))}}return b.EH.create(h.doc,P)}(z,Q.activeHandle)},nodeViews:{}}});return L}var D=class{constructor(h,C){this.activeHandle=h,this.dragging=C}apply(h){const C=this,P=h.getMeta(ve);if(P&&null!=P.setHandle)return new D(P.setHandle,!1);if(P&&void 0!==P.setDragging)return new D(C.activeHandle,P.setDragging);if(C.activeHandle>-1&&h.docChanged){let O=h.mapping.map(C.activeHandle,-1);return Nt(h.doc.resolve(O))||(O=-1),new D(O,C.dragging)}return C}};function Mt(h,C,P){const O=h.posAtCoords({left:C.clientX,top:C.clientY});if(!O)return-1;const{pos:L}=O,z=ut(h.state.doc.resolve(L));if(!z)return-1;if("right"==P)return z.pos;const Q=j.get(z.node(-1)),ct=z.start(-1),q=Q.map.indexOf(z.pos-ct);return q%Q.width==0?-1:ct+Q.map[q-1]}function Pt(h,C,P){return Math.max(P,h.startWidth+(C.clientX-h.startX))}function N(h,C){h.dispatch(h.state.tr.setMeta(ve,{setHandle:C}))}function g(h){return Array(h).fill(0)}function I(h){const C=h.selection,P=Ot(h),O=P.node(-1),L=P.start(-1),z=j.get(O),Q=C instanceof ot?z.rectBetween(C.$anchorCell.pos-L,C.$headCell.pos-L):z.findCell(P.pos-L);return ye(ie({},Q),{tableStart:L,map:z,table:O})}function $(h,{map:C,tableStart:P,table:O},L){let z=L>0?-1:0;(function(h,C,P){const O=At(C.type.schema).header_cell;for(let L=0;L<h.height;L++)if(C.nodeAt(h.map[P+L*h.width]).type!=O)return!1;return!0})(C,O,L+z)&&(z=0==L||L==C.width?null:0);for(let Q=0;Q<C.height;Q++){const ct=Q*C.width+L;if(L>0&&L<C.width&&C.map[ct-1]==C.map[ct]){const q=C.map[ct],lt=O.nodeAt(q);h.setNodeMarkup(h.mapping.map(P+q),null,k(lt.attrs,L-C.colCount(q))),Q+=lt.attrs.rowspan-1}else{const q=null==z?At(O.type.schema).cell:O.nodeAt(C.map[ct+z]).type,lt=C.positionAt(Q,L,O);h.insert(h.mapping.map(P+lt),q.createAndFill())}}return h}function ae(h,{map:C,table:P,tableStart:O},L){const z=h.mapping.maps.length;for(let Q=0;Q<C.height;){const ct=Q*C.width+L,q=C.map[ct],lt=P.nodeAt(q),kt=lt.attrs;if(L>0&&C.map[ct-1]==q||L<C.width-1&&C.map[ct+1]==q)h.setNodeMarkup(h.mapping.slice(z).map(O+q),null,ft(kt,L-C.colCount(q)));else{const wt=h.mapping.slice(z).map(O+q);h.delete(wt,wt+lt.nodeSize)}Q+=kt.rowspan}}function Ye(h,{map:C,tableStart:P,table:O},L){var z;let Q=P;for(let lt=0;lt<L;lt++)Q+=O.child(lt).nodeSize;const ct=[];let q=L>0?-1:0;(function(h,C,P){var O;const L=At(C.type.schema).header_cell;for(let z=0;z<h.width;z++)if((null==(O=C.nodeAt(h.map[z+P*h.width]))?void 0:O.type)!=L)return!1;return!0})(C,O,L+q)&&(q=0==L||L==C.height?null:0);for(let lt=0,kt=C.width*L;lt<C.width;lt++,kt++)if(L>0&&L<C.height&&C.map[kt]==C.map[kt-C.width]){const wt=C.map[kt],Zt=O.nodeAt(wt).attrs;h.setNodeMarkup(P+wt,null,ye(ie({},Zt),{rowspan:Zt.rowspan+1})),lt+=Zt.colspan-1}else{const wt=null==q?At(O.type.schema).cell:null==(z=O.nodeAt(C.map[kt+q*C.width]))?void 0:z.type,Zt=null==wt?void 0:wt.createAndFill();Zt&&ct.push(Zt)}return h.insert(Q,At(O.type.schema).row.create(null,ct)),h}function tn(h,{map:C,table:P,tableStart:O},L){let z=0;for(let q=0;q<L;q++)z+=P.child(q).nodeSize;const Q=z+P.child(L).nodeSize,ct=h.mapping.maps.length;h.delete(z+O,Q+O);for(let q=0,lt=L*C.width;q<C.width;q++,lt++){const kt=C.map[lt];if(L>0&&kt==C.map[lt-C.width]){const wt=P.nodeAt(kt).attrs;h.setNodeMarkup(h.mapping.slice(ct).map(kt+O),null,ye(ie({},wt),{rowspan:wt.rowspan-1})),q+=wt.colspan-1}else if(L<C.width&&kt==C.map[lt+C.width]){const wt=P.nodeAt(kt),Zt=wt.attrs,te=wt.type.create(ye(ie({},Zt),{rowspan:wt.attrs.rowspan-1}),wt.content),se=C.positionAt(L+1,q,P);h.insert(h.mapping.slice(ct).map(O+se),te),q+=Zt.colspan-1}}}function dn(h){const C=h.content;return 1==C.childCount&&C.child(0).isTextblock&&0==C.child(0).childCount}function Cn(h,C){const P=h.selection;if(!(P instanceof ot)||P.$anchorCell.pos==P.$headCell.pos)return!1;const O=I(h),{map:L}=O;if(function({width:h,height:C,map:P},O){let L=O.top*h+O.left,z=L,Q=(O.bottom-1)*h+O.left,ct=L+(O.right-O.left-1);for(let q=O.top;q<O.bottom;q++){if(O.left>0&&P[z]==P[z-1]||O.right<h&&P[ct]==P[ct+1])return!0;z+=h,ct+=h}for(let q=O.left;q<O.right;q++){if(O.top>0&&P[L]==P[L-h]||O.bottom<C&&P[Q]==P[Q+h])return!0;L++,Q++}return!1}(L,O))return!1;if(C){const z=h.tr,Q={};let q,lt,ct=E.HY.empty;for(let kt=O.top;kt<O.bottom;kt++)for(let wt=O.left;wt<O.right;wt++){const Zt=L.map[kt*L.width+wt],te=O.table.nodeAt(Zt);if(!Q[Zt]&&te)if(Q[Zt]=!0,null==q)q=Zt,lt=te;else{dn(te)||(ct=ct.append(te.content));const se=z.mapping.map(Zt+O.tableStart);z.delete(se,se+te.nodeSize)}}if(null==q||null==lt)return!0;if(z.setNodeMarkup(q+O.tableStart,null,ye(ie({},k(lt.attrs,lt.attrs.colspan,O.right-O.left-lt.attrs.colspan)),{rowspan:O.bottom-O.top})),ct.size){const kt=q+1+lt.content.size,wt=dn(lt)?q+1:kt;z.replaceWith(wt+O.tableStart,kt+O.tableStart,ct)}z.setSelection(new ot(z.doc.resolve(q+O.tableStart))),C(z)}return!0}function vn(h,C){const P=At(h.schema);return function(h){return(C,P)=>{var O;const L=C.selection;let z,Q;if(L instanceof ot){if(L.$anchorCell.pos!=L.$headCell.pos)return!1;z=L.$anchorCell.nodeAfter,Q=L.$anchorCell.pos}else{if(z=function(h){for(let C=h.depth;C>0;C--){const P=h.node(C).type.spec.tableRole;if("cell"===P||"header_cell"===P)return h.node(C)}return null}(L.$from),!z)return!1;Q=null==(O=ut(L.$from))?void 0:O.pos}if(null==z||null==Q||1==z.attrs.colspan&&1==z.attrs.rowspan)return!1;if(P){let ct=z.attrs;const q=[],lt=ct.colwidth;ct.rowspan>1&&(ct=ye(ie({},ct),{rowspan:1})),ct.colspan>1&&(ct=ye(ie({},ct),{colspan:1}));const kt=I(C),wt=C.tr;for(let te=0;te<kt.right-kt.left;te++)q.push(lt?ye(ie({},ct),{colwidth:lt&&lt[te]?[lt[te]]:null}):ct);let Zt;for(let te=kt.top;te<kt.bottom;te++){let se=kt.map.positionAt(te,kt.left,kt.table);te==kt.top&&(se+=z.nodeSize);for(let de=kt.left,me=0;de<kt.right;de++,me++)de==kt.left&&te==kt.top||wt.insert(Zt=wt.mapping.map(se+kt.tableStart,1),h({node:z,row:te,col:de}).createAndFill(q[me]))}wt.setNodeMarkup(Q,h({node:z,row:kt.top,col:kt.left}),q[0]),L instanceof ot&&wt.setSelection(new ot(wt.doc.resolve(L.$anchorCell.pos),Zt?wt.doc.resolve(Zt):void 0)),P(wt)}return!0}}(({node:O})=>P[O.type.spec.tableRole])(h,C)}function Kt(h,C,P){const O=C.map.cellsInRect({left:0,top:0,right:"row"==h?C.map.width:1,bottom:"column"==h?C.map.height:1});for(let L=0;L<O.length;L++){const z=C.table.nodeAt(O[L]);if(z&&z.type!==P.header_cell)return!1}return!0}function $t(h,C){return(C=C||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(h){return function(C,P){if(!Z(C))return!1;if(P){const O=At(C.schema),L=I(C),z=C.tr,Q=L.map.cellsInRect("column"==h?{left:L.left,top:0,right:L.right,bottom:L.map.height}:"row"==h?{left:0,top:L.top,right:L.map.width,bottom:L.bottom}:L),ct=Q.map(q=>L.table.nodeAt(q));for(let q=0;q<Q.length;q++)ct[q].type==O.header_cell&&z.setNodeMarkup(L.tableStart+Q[q],O.cell,ct[q].attrs);if(0==z.steps.length)for(let q=0;q<Q.length;q++)z.setNodeMarkup(L.tableStart+Q[q],O.header_cell,ct[q].attrs);P(z)}return!0}}(h):function(P,O){if(!Z(P))return!1;if(O){const L=At(P.schema),z=I(P),Q=P.tr,ct=Kt("row",z,L),q=Kt("column",z,L),kt=("column"===h?ct:"row"===h&&q)?1:0,Zt="column"==h?q?L.cell:L.header_cell:"row"==h?ct?L.cell:L.header_cell:L.cell;z.map.cellsInRect("column"==h?{left:0,top:kt,right:1,bottom:z.map.height}:"row"==h?{left:kt,top:0,right:z.map.width,bottom:1}:z).forEach(te=>{const se=te+z.tableStart,de=Q.doc.nodeAt(se);de&&Q.setNodeMarkup(se,Zt,de.attrs)}),O(Q)}return!0}}$t("row",{useDeprecatedLogic:!0}),$t("column",{useDeprecatedLogic:!0});var B=$t("cell",{useDeprecatedLogic:!0});function pt(h){return function(C,P){if(!Z(C))return!1;const O=function(h,C){if(C<0){const P=h.nodeBefore;if(P)return h.pos-P.nodeSize;for(let O=h.index(-1)-1,L=h.before();O>=0;O--){const z=h.node(-1).child(O),Q=z.lastChild;if(Q)return L-1-Q.nodeSize;L-=z.nodeSize}}else{if(h.index()<h.parent.childCount-1)return h.pos+h.nodeAfter.nodeSize;const P=h.node(-1);for(let O=h.indexAfter(-1),L=h.after();O<P.childCount;O++){const z=P.child(O);if(z.childCount)return L+1;L+=z.nodeSize}}return null}(Ot(C),h);if(null==O)return!1;if(P){const L=C.doc.resolve(O);P(C.tr.setSelection(r.Bs.between(L,function(h){return h.node(0).resolve(h.pos+h.nodeAfter.nodeSize)}(L))).scrollIntoView())}return!0}}function It({allowTableNodeSelection:h=!1}={}){return new r.Sy({key:_t,state:{init:()=>null,apply(C,P){const O=C.getMeta(_t);if(null!=O)return-1==O?null:O;if(null==P||!C.docChanged)return P;const{deleted:L,pos:z}=C.mapping.mapResult(P);return L?null:z}},props:{decorations:J,handleDOMEvents:{mousedown:Oe},createSelectionBetween:C=>null!=_t.getState(C.state)?C.state.selection:null,handleTripleClick:De,handleKeyDown:Ne,handlePaste:Ze},appendTransaction:(C,P,O)=>function(h,C,P){const O=(C||h).selection,L=(C||h).doc;let z,Q;if(O instanceof r.qv&&(Q=O.node.type.spec.tableRole)){if("cell"==Q||"header_cell"==Q)z=ot.create(L,O.from);else if("row"==Q){const ct=L.resolve(O.from+1);z=ot.rowSelection(ct,ct)}else if(!P){const ct=j.get(O.node),q=O.from+1;z=ot.create(L,q+1,q+ct.map[ct.width*ct.height-1])}}else O instanceof r.Bs&&function({$from:h,$to:C}){if(h.pos==C.pos||h.pos<h.pos-6)return!1;let P=h.pos,O=C.pos,L=h.depth;for(;L>=0&&!(h.after(L+1)<h.end(L));L--,P++);for(let z=C.depth;z>=0&&!(C.before(z+1)>C.start(z));z--,O--);return P==O&&/row|table/.test(h.node(L).type.spec.tableRole)}(O)?z=r.Bs.create(L,O.from):O instanceof r.Bs&&function({$from:h,$to:C}){let P,O;for(let L=h.depth;L>0;L--){const z=h.node(L);if("cell"===z.type.spec.tableRole||"header_cell"===z.type.spec.tableRole){P=z;break}}for(let L=C.depth;L>0;L--){const z=C.node(L);if("cell"===z.type.spec.tableRole||"header_cell"===z.type.spec.tableRole){O=z;break}}return P!==O&&0===C.parentOffset}(O)&&(z=r.Bs.create(L,O.$from.start(),O.$from.end()));return z&&(C||(C=h.tr)).setSelection(z),C}(O,he(O,P),h)})}function Rt(h,C,P,O,L,z){let Q=0,ct=!0,q=C.firstChild;const lt=h.firstChild;for(let kt=0,wt=0;kt<lt.childCount;kt+=1){const{colspan:Zt,colwidth:te}=lt.child(kt).attrs;for(let se=0;se<Zt;se+=1,wt+=1){const de=L===wt?z:te&&te[se],me=de?`${de}px`:"";Q+=de||O,de||(ct=!1),q?(q.style.width!==me&&(q.style.width=me),q=q.nextSibling):C.appendChild(document.createElement("col")).style.width=me}}for(;q;){const kt=q.nextSibling;q.parentNode.removeChild(q),q=kt}ct?(P.style.width=`${Q}px`,P.style.minWidth=""):(P.style.width="",P.style.minWidth=`${Q}px`)}var Xt=class{constructor(h,C){this.node=h,this.cellMinWidth=C,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Rt(h,this.colgroup,this.table,C),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(h){return h.type===this.node.type&&(this.node=h,Rt(h,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(h){return"attributes"===h.type&&(h.target===this.table||this.colgroup.contains(h.target))}};function le(h,C){return C?h.createChecked(null,C):h.createAndFill()}var Ce=({editor:h})=>{const{selection:C}=h.state;if(!function(h){return h instanceof ot}(C))return!1;let P=0;const O=(0,T.findParentNodeClosestToPos)(C.ranges[0].$from,z=>"table"===z.type.name);return null==O||O.node.descendants(z=>{if("table"===z.type.name)return!1;["tableCell","tableHeader"].includes(z.type.name)&&(P+=1)}),P===C.ranges.length&&(h.commands.deleteTable(),!0)};const ke=T.Node.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Xt,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML({HTMLAttributes:h}){return["table",(0,T.mergeAttributes)(this.options.HTMLAttributes,h),["tbody",0]]},addCommands:()=>({insertTable:({rows:h=3,cols:C=3,withHeaderRow:P=!0}={})=>({tr:O,dispatch:L,editor:z})=>{const Q=function(h,C,P,O,L){const z=function(h){if(h.cached.tableNodeTypes)return h.cached.tableNodeTypes;const C={};return Object.keys(h.nodes).forEach(P=>{const O=h.nodes[P];O.spec.tableRole&&(C[O.spec.tableRole]=O)}),h.cached.tableNodeTypes=C,C}(h),Q=[],ct=[];for(let lt=0;lt<P;lt+=1){const kt=le(z.cell,L);if(kt&&ct.push(kt),O){const wt=le(z.header_cell,L);wt&&Q.push(wt)}}const q=[];for(let lt=0;lt<C;lt+=1)q.push(z.row.createChecked(null,O&&0===lt?Q:ct));return z.table.createChecked(null,q)}(z.schema,h,C,P);if(L){const ct=O.selection.anchor+1;O.replaceSelectionWith(Q).scrollIntoView().setSelection(r.Bs.near(O.doc.resolve(ct)))}return!0},addColumnBefore:()=>({state:h,dispatch:C})=>function(h,C){if(!Z(h))return!1;if(C){const P=I(h);C($(h.tr,P,P.left))}return!0}(h,C),addColumnAfter:()=>({state:h,dispatch:C})=>function(h,C){if(!Z(h))return!1;if(C){const P=I(h);C($(h.tr,P,P.right))}return!0}(h,C),deleteColumn:()=>({state:h,dispatch:C})=>function(h,C){if(!Z(h))return!1;if(C){const P=I(h),O=h.tr;if(0==P.left&&P.right==P.map.width)return!1;for(let L=P.right-1;ae(O,P,L),L!=P.left;L--){const z=P.tableStart?O.doc.nodeAt(P.tableStart-1):O.doc;if(!z)throw RangeError("No table found");P.table=z,P.map=j.get(z)}C(O)}return!0}(h,C),addRowBefore:()=>({state:h,dispatch:C})=>function(h,C){if(!Z(h))return!1;if(C){const P=I(h);C(Ye(h.tr,P,P.top))}return!0}(h,C),addRowAfter:()=>({state:h,dispatch:C})=>function(h,C){if(!Z(h))return!1;if(C){const P=I(h);C(Ye(h.tr,P,P.bottom))}return!0}(h,C),deleteRow:()=>({state:h,dispatch:C})=>function(h,C){if(!Z(h))return!1;if(C){const P=I(h),O=h.tr;if(0==P.top&&P.bottom==P.map.height)return!1;for(let L=P.bottom-1;tn(O,P,L),L!=P.top;L--){const z=P.tableStart?O.doc.nodeAt(P.tableStart-1):O.doc;if(!z)throw RangeError("No table found");P.table=z,P.map=j.get(P.table)}C(O)}return!0}(h,C),deleteTable:()=>({state:h,dispatch:C})=>function(h,C){const P=h.selection.$anchor;for(let O=P.depth;O>0;O--)if("table"==P.node(O).type.spec.tableRole)return C&&C(h.tr.delete(P.before(O),P.after(O)).scrollIntoView()),!0;return!1}(h,C),mergeCells:()=>({state:h,dispatch:C})=>Cn(h,C),splitCell:()=>({state:h,dispatch:C})=>vn(h,C),toggleHeaderColumn:()=>({state:h,dispatch:C})=>$t("column")(h,C),toggleHeaderRow:()=>({state:h,dispatch:C})=>$t("row")(h,C),toggleHeaderCell:()=>({state:h,dispatch:C})=>B(h,C),mergeOrSplit:()=>({state:h,dispatch:C})=>!!Cn(h,C)||vn(h,C),setCellAttribute:(h,C)=>({state:P,dispatch:O})=>function(h,C){return function(P,O){if(!Z(P))return!1;const L=Ot(P);if(L.nodeAfter.attrs[h]===C)return!1;if(O){const z=P.tr;P.selection instanceof ot?P.selection.forEachCell((Q,ct)=>{Q.attrs[h]!==C&&z.setNodeMarkup(ct,null,ye(ie({},Q.attrs),{[h]:C}))}):z.setNodeMarkup(L.pos,null,ye(ie({},L.nodeAfter.attrs),{[h]:C})),O(z)}return!0}}(h,C)(P,O),goToNextCell:()=>({state:h,dispatch:C})=>pt(1)(h,C),goToPreviousCell:()=>({state:h,dispatch:C})=>pt(-1)(h,C),fixTables:()=>({state:h,dispatch:C})=>(C&&he(h),!0),setCellSelection:h=>({tr:C,dispatch:P})=>{if(P){const O=ot.create(C.doc,h.anchorCell,h.headCell);C.setSelection(O)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Ce,"Mod-Backspace":Ce,Delete:Ce,"Mod-Delete":Ce}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[Dt({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],It({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema:h=>({tableRole:(0,T.callOrReturn)((0,T.getExtensionField)(h,"tableRole",{name:h.name,options:h.options,storage:h.storage}))})}).extend({renderHTML({node:h,HTMLAttributes:C}){var P,O;let L=0,z=!0;try{const Q=(null===(P=h.content)||void 0===P?void 0:P.content)[0];null===(O=null==Q?void 0:Q.content)||void 0===O||O.content.forEach(ct=>{ct.attrs.colwidth?ct.attrs.colwidth.forEach(q=>{q?L+=q:(z=!1,L+=this.options.cellMinWidth)}):(z=!1,L+=this.options.cellMinWidth*(ct.attrs.colspan?ct.attrs.colspan:1))})}catch(Q){z=!1}return C.style=z&&L>0?`width: ${L}px;`:L&&L>0?`min-width: ${L}px`:null,["div",{class:"tui-table-wrapper"},["table",(0,T.mergeAttributes)(this.options.HTMLAttributes,C),["tbody",0]]]}})},88806:(ee,yt,a)=>{a.d(yt,{v:()=>r});var T=a(74788);class r{constructor(b,p,Y){const R=p.get(T.z2F),j=p.get(T._Vd).resolveComponentFactory(b);this.componentRef=j.create(p,[]),this.updateProps(Y),R.attachView(this.componentRef.hostView)}get instance(){return this.componentRef.instance}get elementRef(){return this.componentRef.injector.get(T.SBq)}get dom(){return this.elementRef.nativeElement}updateProps(b){Object.entries(b).forEach(([p,Y])=>{this.instance[p]=Y})}detectChanges(){this.componentRef.changeDetectorRef.detectChanges()}destroy(){this.componentRef.destroy()}}},40400:(ee,yt,a)=>{a.d(yt,{d:()=>b,x:()=>Y});var T=a(12057),r=a(12867),E=a(88806);class b{}class p extends r.NodeView{constructor(){super(...arguments),this.contentDOMElement=null}mount(){const X=this.options.injector,j=X.get(T.K0);this.renderer=new E.v(this.component,X,{editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(dt={})=>this.updateAttributes(dt),deleteNode:()=>this.deleteNode()}),this.extension.config.draggable&&(this.renderer.elementRef.nativeElement.ondragstart=dt=>{this.onDragStart(dt)}),this.contentDOMElement=this.node.isLeaf?null:j.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit",this.renderer.detectChanges())}get dom(){return this.renderer.dom}get contentDOM(){return this.node.isLeaf?null:(this.maybeMoveContentDOM(),this.contentDOMElement)}update(X,j){return this.options.update?this.options.update(X,j):X.type===this.node.type&&(X===this.node&&this.decorations===j||(this.node=X,this.decorations=j,this.renderer.updateProps({node:X,decorations:j}),this.maybeMoveContentDOM()),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy()}maybeMoveContentDOM(){const X=this.dom.querySelector("[data-node-view-content]");this.contentDOMElement&&X&&!X.contains(this.contentDOMElement)&&X.appendChild(this.contentDOMElement)}}const Y=(R,X)=>j=>new p(R,j,X)},48014:(ee,yt,a)=>{a.r(yt),a.d(yt,{AbstractTuiEditor:()=>T._,AbstractTuiEditorResizable:()=>_t._3,BackgroundColor:()=>Nt.BackgroundColor,EDITOR_BLANK_COLOR:()=>Ot.hK,FontColor:()=>Wt.FontColor,INITIALIZATION_TIPTAP_CONTAINER:()=>ne.Y1,LAZY_EDITOR_EXTENSIONS:()=>ne.F4,LAZY_TIPTAP_EDITOR:()=>ne.bG,StarterKit:()=>J.StarterKit,TIPTAP_EDITOR:()=>ne.ZW,TUI_ATTACH_FILES_LOADER:()=>ne.zc,TUI_ATTACH_FILES_OPTIONS:()=>ne.dR,TUI_EDITOR_CODE_OPTIONS:()=>ne.Mr,TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES:()=>ne.dj,TUI_EDITOR_CONTENT_PROCESSOR:()=>ne.F1,TUI_EDITOR_DEFAULT_OPTIONS:()=>ne.HG,TUI_EDITOR_EXTENSIONS:()=>ne.Wf,TUI_EDITOR_FONT_OPTIONS:()=>ne.UN,TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>qt.TUI_EDITOR_GROUP_DEFAULT_OPTIONS,TUI_EDITOR_LINK_TEXTS:()=>ne.b$,TUI_EDITOR_MAX_IMAGE_WIDTH:()=>k.TUI_EDITOR_MAX_IMAGE_WIDTH,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>k.TUI_EDITOR_MIN_IMAGE_WIDTH,TUI_EDITOR_OPTIONS:()=>ne.mJ,TUI_EDITOR_PROVIDERS:()=>gt.m,TUI_EDITOR_TABLE_COMMANDS:()=>ne.$i,TUI_EDITOR_TOOLBAR_TEXTS:()=>ne.rf,TUI_IFRAME_EDITOR_OPTIONS:()=>ft.TUI_IFRAME_EDITOR_OPTIONS,TUI_IMAGE_EDITOR_OPTIONS:()=>k.TUI_IMAGE_EDITOR_OPTIONS,TUI_IMAGE_LOADER:()=>ne.p7,TableCellBackground:()=>rt.TableCellBackground,TuiAlignContentComponent:()=>Z.Xp,TuiAlignContentModule:()=>Z.pu,TuiAudio:()=>at.TuiAudio,TuiCodeComponent:()=>Z.Tf,TuiCodeModule:()=>Z.P_,TuiColorEditComponent:()=>r.hR,TuiColorEditModule:()=>r.TD,TuiColorPickerComponent:()=>r.$v,TuiColorPickerModule:()=>r.H9,TuiColorSelectorComponent:()=>r.sV,TuiColorSelectorModule:()=>r.wl,TuiComponentRenderer:()=>Ft.v,TuiDetailsComponent:()=>Z.yj,TuiDetailsModule:()=>Z.y9,TuiDetailsRemoveComponent:()=>Z.Un,TuiEditLinkComponent:()=>E.lV,TuiEditLinkModule:()=>E.Fu,TuiEditorComponent:()=>b.a,TuiEditorGroupToolComponent:()=>Z.dN,TuiEditorImagePreviewDirective:()=>Ct.Zj,TuiEditorImagePreviewModule:()=>Ct.BN,TuiEditorModule:()=>vt,TuiEditorPortalDirective:()=>Tt.A,TuiEditorPortalHostComponent:()=>At.d,TuiEditorPortalService:()=>Ut.Y,TuiEditorResizableComponent:()=>_t.V_,TuiEditorResizableModule:()=>_t.Sl,TuiEditorSocketComponent:()=>Y.D,TuiEditorSocketModule:()=>X,TuiEditorTool:()=>bt._,TuiEditorToolGroup:()=>Z.jP,TuiFileLink:()=>xt.TuiFileLink,TuiFilterAnchorsPipe:()=>E.bL,TuiFlatPickerComponent:()=>r.Jd,TuiFlatPickerModule:()=>r.ui,TuiFontSize:()=>Yt.TuiFontSize,TuiFontSizeComponent:()=>Z.mK,TuiFontSizeModule:()=>Z.p7,TuiFontStyleComponent:()=>Z.hr,TuiFontStyleModule:()=>Z.Zv,TuiHighlightColorComponent:()=>Z.UT,TuiHighlightColorModule:()=>Z.XC,TuiIframeEditorComponent:()=>ft.TuiIframeEditorComponent,TuiIframeEditorModule:()=>ft.TuiIframeEditorModule,TuiImageEditorComponent:()=>k.TuiImageEditorComponent,TuiImageEditorModule:()=>k.TuiImageEditorModule,TuiInputColorComponent:()=>ut.j,TuiInputColorModule:()=>ht,TuiLinearMultiPickerComponent:()=>r.es,TuiLinearMultiPickerModule:()=>r.GU,TuiLinearPickerComponent:()=>r.P,TuiLinearPickerModule:()=>r.g7,TuiLink:()=>ot.TuiLink,TuiListConfigsComponent:()=>Z.w2,TuiListConfigsModule:()=>Z.Ur,TuiNodeViewNgComponent:()=>Vt.d,TuiNodeViewRenderer:()=>Vt.x,TuiPaletteComponent:()=>r.Rh,TuiPaletteModule:()=>r.VM,TuiShortUrlPipe:()=>E.X,TuiSource:()=>at.TuiSource,TuiTabExtension:()=>st.TuiTabExtension,TuiTable:()=>V.TuiTable,TuiTableCellColorComponent:()=>Z.pH,TuiTableCellColorModule:()=>Z.mp,TuiTableCommands:()=>Z.iN,TuiTableCreateComponent:()=>Z.lT,TuiTableCreateModule:()=>Z.iA,TuiTableMergeCellsComponent:()=>Z.YH,TuiTableMergeCellsModule:()=>Z.er,TuiTableRowColumnManagerComponent:()=>Z._I,TuiTableRowColumnManagerModule:()=>Z.__,TuiTableSizeSelectorComponent:()=>Z.M8,TuiTableSizeSelectorModule:()=>Z.kU,TuiTextColorComponent:()=>Z.G0,TuiTextColorModule:()=>Z._t,TuiTiptapEditorDirective:()=>Ct.JU,TuiTiptapEditorModule:()=>Ct.mJ,TuiTiptapEditorService:()=>Ct.$3,TuiToolbarComponent:()=>j.M6,TuiToolbarModule:()=>j.yB,TuiToolbarNavigationManagerDirective:()=>j.Bp,TuiVideo:()=>at.TuiVideo,createGroupExtension:()=>qt.createGroupExtension,createIframeEditorExtension:()=>ft.createIframeEditorExtension,createImageEditorExtension:()=>k.createImageEditorExtension,defaultEditorColors:()=>Ot.sw,defaultEditorExtensions:()=>Ht,defaultEditorTools:()=>Ot.Db,tuiDefaultFontOptionsHandler:()=>Ot.RR,tuiDeleteNode:()=>he.yU,tuiEditorOptionsProvider:()=>ne.Uv,tuiGetElementPoint:()=>he.Ws,tuiGetGradientData:()=>he.U5,tuiGetMarkRange:()=>he.Yz,tuiGetNestedNodes:()=>he.YX,tuiGetSelectedContent:()=>he.Ap,tuiInsertHtml:()=>he.Xd,tuiInsertText:()=>he.Oi,tuiIsOrderedOrBulletList:()=>st.tuiIsOrderedOrBulletList,tuiIsSafeLinkRange:()=>he.nC,tuiIsSelectionIn:()=>he.i0,tuiLegacyEditorConverter:()=>he.Er,tuiParseGradient:()=>he._N,tuiParseNodeAttributes:()=>he.x6,tuiParseStyle:()=>he.jx,tuiToGradient:()=>he.CH});var T=a(77361),r=a(27050),E=a(71115),b=a(69303),p=a(12057),Y=a(20179),R=a(74788);let X=(()=>{class Qt{}return Qt.\u0275fac=function(xe){return new(xe||Qt)},Qt.\u0275mod=R.oAB({type:Qt}),Qt.\u0275inj=R.cJS({}),Qt})();var j=a(17406),Ct=a(84614),dt=a(68339),tt=a(76040);let vt=(()=>{class Qt{}return Qt.\u0275fac=function(xe){return new(xe||Qt)},Qt.\u0275mod=R.oAB({type:Qt}),Qt.\u0275inj=R.cJS({imports:[[p.ez,j.yB,tt.TuiWrapperModule,tt.TuiScrollbarModule,E.Fu,dt.TuiActiveZoneModule,tt.TuiDropdownModule,Ct.mJ,X,dt.TuiLetModule]]}),Qt})();var gt=a(79089),Tt=a(1433),Ut=a(73825),At=a(9872),_t=a(95110),ut=a(19769);let ht=(()=>{class Qt{}return Qt.\u0275fac=function(xe){return new(xe||Qt)},Qt.\u0275mod=R.oAB({type:Qt}),Qt.\u0275inj=R.cJS({imports:[[p.ez,tt.TuiPrimitiveTextfieldModule,tt.TuiTextfieldControllerModule,tt.TuiHostedDropdownModule,r.wl,dt.TuiActiveZoneModule]]}),Qt})();var Z=a(93252),Ot=a(19074),bt=a(48699),Nt=a(15736);const Ht=[Promise.resolve().then(a.bind(a,2823)).then(({StarterKit:Qt})=>Qt).then(Qt=>Qt.configure({heading:{levels:[1,2]}})),a.e(73336).then(a.bind(a,73336)).then(({default:Qt})=>Qt.configure({types:["heading","paragraph"]})),Promise.resolve().then(a.bind(a,84402)).then(({default:Qt})=>Qt),a.e(17991).then(a.bind(a,17991)).then(({default:Qt})=>Qt),a.e(77147).then(a.bind(a,77147)).then(({default:Qt})=>Qt),a.e(25034).then(a.bind(a,25034)).then(({default:Qt})=>Qt),Promise.resolve().then(a.bind(a,52658)).then(({FontColor:Qt})=>Qt),a.e(44632).then(a.bind(a,44632)).then(({default:Qt})=>Qt.configure({inline:!0,allowBase64:!0})),Promise.resolve().then(a.bind(a,57734)).then(({TuiLink:Qt})=>Qt),a.e(54058).then(a.bind(a,54058)).then(({TuiJumpAnchor:Qt})=>Qt),Promise.resolve().then(a.bind(a,93763)).then(({TuiFileLink:Qt})=>Qt),Promise.resolve().then(a.bind(a,15736)).then(({BackgroundColor:Qt})=>Qt),Promise.resolve().then(a.bind(a,86624)).then(({TuiTable:Qt})=>Qt.configure({resizable:!0})),a.e(45213).then(a.bind(a,45213)).then(({default:Qt})=>Qt),a.e(71397).then(a.bind(a,71397)).then(({default:Qt})=>Qt),a.e(38840).then(a.bind(a,38840)).then(({TableHeader:Qt})=>Qt),Promise.resolve().then(a.bind(a,12177)).then(({TuiTabExtension:Qt})=>Qt),Promise.resolve().then(a.bind(a,51919)).then(({TableCellBackground:Qt})=>Qt),a.e(44312).then(a.bind(a,44312)).then(({TuiDetailsContent:Qt})=>Qt),a.e(44312).then(a.bind(a,44312)).then(({TuiDetails:Qt})=>Qt),a.e(44312).then(a.bind(a,44312)).then(({TuiSummary:Qt})=>Qt),Promise.resolve().then(a.bind(a,9492)).then(({TuiFontSize:Qt})=>Qt)];var xt=a(93763),Wt=a(52658),Yt=a(9492),qt=a(54920),ft=a(20854),k=a(53380),st=a(12177),ot=a(57734),at=a(41512),J=a(2823),V=a(86624),rt=a(51919),Ft=a(88806),Vt=a(40400),ne=a(14309),he=a(27863)},62141:(ee,yt,a)=>{a.d(yt,{i:()=>Ct});var T=a(12057),r=a(74788),E=a(27863),b=a(68339),p=a(18891),Y=a(43190),R=a(88002),X=a(46782),j=a(39761);let Ct=(()=>{class dt extends p.y{constructor(vt,{nativeElement:gt},Tt){const Ut=(0,b.tuiTypedFromEvent)(gt,"mousedown").pipe((0,b.tuiPreventDefault)(),(0,Y.w)(At=>{const _t=(0,b.tuiTypedFromEvent)(Tt,"mousemove").pipe((0,R.U)(({clientX:ut,clientY:ht})=>(0,E.Ws)(ut,ht,gt)),(0,X.R)((0,b.tuiTypedFromEvent)(Tt,"mouseup")));return At.target===gt?_t.pipe((0,j.O)((0,E.Ws)(At.clientX,At.clientY,gt))):_t}),(0,X.R)(vt));super(At=>Ut.subscribe(At))}}return dt.\u0275fac=function(vt){return new(vt||dt)(r.LFG(b.TuiDestroyService,2),r.LFG(r.SBq),r.LFG(T.K0))},dt.\u0275prov=r.Yz7({token:dt,factory:dt.\u0275fac}),dt})()},14309:(ee,yt,a)=>{a.d(yt,{Y1:()=>Ht,F4:()=>E,bG:()=>Nt,ZW:()=>bt,zc:()=>dt,dR:()=>Ct,Mr:()=>At,dj:()=>vt,F1:()=>j,HG:()=>p,Wf:()=>r,UN:()=>_t,b$:()=>Ut,mJ:()=>Y,$i:()=>Tt,rf:()=>gt,p7:()=>Z,Uv:()=>R});var T=a(74788);const r=new T.OlP("[TUI_EDITOR_EXTENSIONS]: Extensions for editor"),E=new T.OlP("[LAZY_EDITOR_EXTENSIONS]: lazy extensions");var b=a(19074);const p={colors:b.sw,blankColor:b.hK,fontOptions:b.RR},Y=new T.OlP("[TUI_EDITOR_OPTIONS]: Default Editor colors",{factory:()=>p});function R(xt){return{provide:Y,useValue:Object.assign(Object.assign({},p),xt)}}var X=a(54487);const j=new T.OlP("[TUI_EDITOR_CONTENT_PROCESSOR]: Content value processor for tui-editor",{factory:()=>X.y}),Ct=new T.OlP("[TUI_ATTACH_FILES_OPTIONS]: files loader options",{factory:()=>({accept:"*/*",multiple:!0})}),dt=new T.OlP("[TUI_ATTACH_FILES_LOADER]: files loader handler");var tt=a(72773);const vt=new T.OlP("[TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES]: tui-color-selector i18n",{factory:()=>["Solid color","Gradient"]}),gt=new T.OlP("[TUI_EDITOR_TOOLBAR_TEXTS]: tui-editor-toolbar i18n",{factory:(0,tt.vv)("toolbarTools")}),Tt=new T.OlP("[TUI_EDITOR_TABLE_COMMANDS]: tui-editor-toolbar table i18n",{factory:(0,tt.vv)("editorTableCommands")}),Ut=new T.OlP("[TUI_EDITOR_LINK_TEXTS]: tui-editor-toolbar edit-link i18n",{factory:(0,tt.vv)("editorEditLink")}),At=new T.OlP("[TUI_EDITOR_CODE_OPTIONS]: tui-editor-toolbar codes options",{factory:(0,tt.vv)("editorCodeOptions")}),_t=new T.OlP("[TUI_EDITOR_FONT_OPTIONS]: tui-editor-toolbar font options",{factory:(0,tt.vv)("editorFontOptions")});var ut=a(68339),ht=a(88002);const Z=new T.OlP("[TUI_IMAGE_LOADER]: Image loader handler",{factory:()=>xt=>{const Wt=new FileReader;return Wt.readAsDataURL(xt),(0,ut.tuiTypedFromEvent)(Wt,"load").pipe((0,ht.U)(()=>String(Wt.result)))}});var Ot=a(82298);const bt=new T.OlP("[TIPTAP_EDITOR]: Token for Tiptap Editor"),Nt=new T.OlP("[LAZY_TIPTAP_EDITOR]: Lazy loaded Editor",{factory:()=>{const xt=new Ot.t(1);return Promise.resolve().then(a.bind(a,12867)).then(Wt=>xt.next(Wt.Editor)),xt}}),Ht=new T.OlP("[INITIALIZATION_TIPTAP_CONTAINER]: The container in which the tip-tap editor is initialized")},27863:(ee,yt,a)=>{function T(at,J,V){const rt=at.selection.$anchor;for(let Ft=rt.depth;Ft>0;Ft--)if(rt.node(Ft).type.name===V)return J&&J(at.tr.delete(rt.before(Ft),rt.after(Ft)).scrollIntoView()),!0;return!1}a.d(yt,{yU:()=>T,Ws:()=>E,U5:()=>b,Yz:()=>R,YX:()=>j,Ap:()=>dt,Xd:()=>tt,Oi:()=>vt,nC:()=>st,i0:()=>gt,Er:()=>Tt,_N:()=>Yt,x6:()=>ft,jx:()=>k,CH:()=>ot});var r=a(68339);function E(at,J,V){const{left:rt,top:Ft,width:Vt,height:ne}=V.getBoundingClientRect();return[(0,r.tuiClamp)(at-rt,0,Vt)/Vt,(0,r.tuiClamp)(J-Ft,0,ne)/ne]}function b(at){return at.slice(0,Math.max(0,at.length-1)).replace("linear-gradient(","")}function Y(at,J,V={}){return at.find(({attrs:rt,type:Ft})=>Ft===J&&function(at,J){const V=Object.keys(J);return!V.length||!!V.filter(rt=>J[rt]===at[rt]).length}(rt,V))||null}function R(at,J,V={}){if(!at||!J)return null;const{node:rt,offset:Ft}=at.parent.childAfter(at.parentOffset);if(!rt)return null;const Vt=Y(rt.marks,J,V);if(!Vt)return null;let ne=at.index(),he=at.start()+Ft,Qt=ne+1,Ee=he+rt.nodeSize;for(Y(rt.marks,J,V);ne>0&&Vt.isInSet(at.parent.child(ne-1).marks);)ne-=1,he-=at.parent.child(ne).nodeSize;for(;Qt<at.parent.childCount&&Y(at.parent.child(Qt).marks,J,V);)Ee+=at.parent.child(Qt).nodeSize,Qt+=1;return{from:he,to:Ee}}var X=a(77346);function j(at){const J=[];return at.content.forEach(V=>{V instanceof X.NB&&J.push([V.type.name,V.attrs])}),J}var Ct=a(12867);function dt(at,J){const V=null!=J?J:at.selection.$head.parent.textContent,rt=at.doc.cut(at.selection.from,at.selection.to);return rt.content.size?(0,Ct.getHTMLFromFragment)(rt.content,at.schema):V}function tt(at,J){if(at.queryCommandSupported("insertHTML"))return void at.execCommand("insertHTML",!1,J);const V=at.getSelection();if(!V)throw new r.TuiDocumentSelectionException;at.execCommand("ms-beginUndoUnit");const rt=V.getRangeAt(0),Ft=rt.createContextualFragment(J);rt.deleteContents(),rt.insertNode(Ft),at.execCommand("ms-endUndoUnit")}function vt(at,J){if(at.queryCommandSupported("insertText"))return void at.execCommand("insertText",!1,J);const V=at.getSelection();if(!V)throw new r.TuiDocumentSelectionException;at.execCommand("ms-beginUndoUnit");const rt=V.getRangeAt(0);rt.deleteContents(),rt.insertNode(at.createTextNode(J)),at.execCommand("ms-endUndoUnit")}function gt({anchorNode:at,focusNode:J},V){return!!at&&!!J&&(0,r.tuiIsNodeIn)(at,V)&&(0,r.tuiIsNodeIn)(J,V)}function Tt(at){const J=(new DOMParser).parseFromString(at,"text/html");return Ut(J.body),J.body.innerHTML}function Ut(at){for(const J of Array.from(at.children))if(J.children.length&&Ut(J),"FONT"===J.tagName)if(J.hasAttribute("size"))switch(J.getAttribute("size")){case"6":At("h1",J);break;case"5":At("h2",J);break;case"4":_t("17px",J);break;case"3":_t("15px",J);break;case"2":_t("13px",J)}else J.hasAttribute("color")&&ut(J)}function At(at,J){var V,rt,Ft,Vt,ne,he,Qt,Ee,xe;const we=document.createElement(at);if(we.innerHTML=J.innerHTML,"P"===(null===(V=J.parentElement)||void 0===V?void 0:V.tagName)){const be=null===(Ft=null===(rt=J.parentElement)||void 0===rt?void 0:rt.parentElement)||void 0===Ft?void 0:Ft.insertBefore(we,J.parentElement);null===(Vt=J.parentElement)||void 0===Vt||Vt.removeChild(J),(null==be?void 0:be.nextSibling)&&!(null===(he=null===(ne=null==be?void 0:be.nextSibling)||void 0===ne?void 0:ne.textContent)||void 0===he?void 0:he.trim())&&(null===(Ee=null===(Qt=be.nextSibling)||void 0===Qt?void 0:Qt.parentElement)||void 0===Ee||Ee.removeChild(be.nextSibling))}else null===(xe=J.parentElement)||void 0===xe||xe.replaceChild(we,J)}function _t(at,J){var V;const rt=document.createElement("p"),Ft=document.createElement("span");Ft.setAttribute("style",`font-size: ${at}`),Ft.innerHTML=J.innerHTML,rt.append(Ft),null===(V=J.parentElement)||void 0===V||V.replaceChild("P"===J.parentElement.tagName?Ft:rt,J)}function ut(at){var J;const V=document.createElement("span");V.setAttribute("style",`color: ${at.getAttribute("color")}`),V.innerHTML=at.innerHTML,null===(J=at.parentElement)||void 0===J||J.replaceChild(V,at)}const Wt=["\\s*(","(?:","#(?:[a-f0-9]{6}|[a-f0-9]{3})","|","(?:rgb|hsl)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*\\)","|","(?:rgba|hsla)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*,\\s*\\d*\\.?\\d+\\)","|","[_a-z-][_a-z0-9-]*",")",")","(?:\\s+","(","(?:[+-]?\\d*\\.?\\d+)(?:%|[a-z]+)?","))?","(?:","\\s*,\\s*","\\s*)?"];function Yt(at){const J=new RegExp(Wt.join(""),"gi"),V=at.startsWith("to")||at.match(/^\d/)?at.slice(Math.max(0,at.indexOf(",")+1)).trim():at,rt=at.startsWith("to")?at.split(",")[0]:"to bottom";let Ft=[],Vt=J.exec(V);for(;null!==Vt;)Ft=Ft.concat({color:Vt[1],position:qt(Vt[2],Ft.length)}),Vt=J.exec(V);return Ft=Ft.filter(({color:ne})=>ne.startsWith("#")||ne.startsWith("rgb")),{stops:Ft,side:rt}}function qt(at,J){const V=1===J?"100%":`${J}%`;return(null==at?void 0:at.includes("%"))?at:V}function ft(at){return at.reduce((J,V)=>(J[V]={parseHTML:rt=>null==rt?void 0:rt.getAttribute(`${V}`)},J),{})}function k(at){return at.split(";").reduce((J,V)=>{var rt;const[Ft,Vt]=null!==(rt=V.split(":"))&&void 0!==rt?rt:[];return Ft&&Vt&&(J[Ft.trim()]=Vt.trim()),J},{})}function st(at){var J;return at.endOffset-at.startOffset>0||0!==at.startOffset&&at.endOffset!==((null===(J=at.endContainer.nodeValue)||void 0===J?void 0:J.length)||0)}function ot({stops:at,side:J}){return`linear-gradient(${J}, ${at.map(({color:V,position:rt})=>`rgba(${(0,r.tuiParseColor)(V).join(", ")}) ${rt}`).join(", ")})`}},12867:(ee,yt,a)=>{a.r(yt),a.d(yt,{CommandManager:()=>H,Editor:()=>Ko,Extension:()=>B,InputRule:()=>je,Mark:()=>Hn,Node:()=>zn,NodeView:()=>o,PasteRule:()=>on,Tracker:()=>x,callOrReturn:()=>g,combineTransactionSteps:()=>xo,createStyleTag:()=>Wo,defaultBlockAt:()=>kn,deleteProps:()=>Kn,elementFromString:()=>de,escapeForRegEx:()=>i,extensions:()=>Kt,findChildren:()=>Gn,findChildrenInRange:()=>Ao,findDuplicates:()=>Bt,findParentNode:()=>wn,findParentNodeClosestToPos:()=>$n,fromString:()=>I,generateHTML:()=>Po,generateJSON:()=>Bn,generateText:()=>bn,getAttributes:()=>On,getChangedRanges:()=>Sn,getDebugJSON:()=>Ln,getExtensionField:()=>F,getHTMLFromFragment:()=>Rn,getMarkAttributes:()=>Yn,getMarkRange:()=>L,getMarkType:()=>z,getMarksBetween:()=>sn,getNodeAttributes:()=>Xn,getNodeType:()=>Pt,getSchema:()=>Pn,getText:()=>Zn,getTextBetween:()=>G,getTextContentFromNodes:()=>We,getTextSerializersFromSchema:()=>pt,inputRulesPlugin:()=>un,isActive:()=>en,isEmptyObject:()=>A,isFunction:()=>d,isList:()=>hn,isMacOS:()=>He,isMarkActive:()=>xn,isNodeActive:()=>Dn,isNodeEmpty:()=>fn,isNodeSelection:()=>Je,isNumber:()=>dn,isPlainObject:()=>jt,isRegExp:()=>Ye,isString:()=>c,isTextSelection:()=>q,isiOS:()=>wt,markInputRule:()=>uo,markPasteRule:()=>e,mergeAttributes:()=>N,mergeDeep:()=>U,minMax:()=>lt,nodeInputRule:()=>po,nodePasteRule:()=>f,objectIncludes:()=>C,pasteRulesPlugin:()=>rn,posToDOMRect:()=>Xe,removeDuplicates:()=>qn,textInputRule:()=>Jo,textPasteRule:()=>m,textblockTypeInputRule:()=>ho,wrappingInputRule:()=>fo});var T=a(62463),r=a(43594),E=a(70768),b=a(77346),p=a(38480);const Y=(t,n)=>!t.selection.empty&&(n&&n(t.tr.deleteSelection().scrollIntoView()),!0);const X=(t,n,l)=>{let u=function(t,n){let{$cursor:l}=t.selection;return!l||(n?!n.endOfTextblock("backward",t):l.parentOffset>0)?null:l}(t,l);if(!u)return!1;let _=gt(u);if(!_){let M=u.blockRange(),S=M&&(0,p.k9)(M);return null!=S&&(n&&n(t.tr.lift(M,S).scrollIntoView()),!0)}let v=_.nodeBefore;if(!v.type.spec.isolating&&ot(t,_,n))return!0;if(0==u.parent.content.size&&(tt(v,"end")||T.qv.isSelectable(v))){let M=(0,p.dR)(t.doc,u.before(),u.after(),b.p2.empty);if(M&&M.slice.size<M.to-M.from){if(n){let S=t.tr.step(M);S.setSelection(tt(v,"end")?T.Y1.findFrom(S.doc.resolve(S.mapping.map(_.pos,-1)),-1):T.qv.create(S.doc,_.pos-v.nodeSize)),n(S.scrollIntoView())}return!0}}return!(!v.isAtom||_.depth!=u.depth-1||(n&&n(t.tr.delete(_.pos-v.nodeSize,_.pos).scrollIntoView()),0))};function tt(t,n,l=!1){for(let u=t;u;u="start"==n?u.firstChild:u.lastChild){if(u.isTextblock)return!0;if(l&&1!=u.childCount)return!1}return!1}const vt=(t,n,l)=>{let{$head:u,empty:_}=t.selection,v=u;if(!_)return!1;if(u.parent.isTextblock){if(l?!l.endOfTextblock("backward",t):u.parentOffset>0)return!1;v=gt(u)}let M=v&&v.nodeBefore;return!(!M||!T.qv.isSelectable(M)||(n&&n(t.tr.setSelection(T.qv.create(t.doc,v.pos-M.nodeSize)).scrollIntoView()),0))};function gt(t){if(!t.parent.type.spec.isolating)for(let n=t.depth-1;n>=0;n--){if(t.index(n)>0)return t.doc.resolve(t.before(n+1));if(t.node(n).type.spec.isolating)break}return null}const Ut=(t,n,l)=>{let u=function(t,n){let{$cursor:l}=t.selection;return!l||(n?!n.endOfTextblock("forward",t):l.parentOffset<l.parent.content.size)?null:l}(t,l);if(!u)return!1;let _=_t(u);if(!_)return!1;let v=_.nodeAfter;if(ot(t,_,n))return!0;if(0==u.parent.content.size&&(tt(v,"start")||T.qv.isSelectable(v))){let M=(0,p.dR)(t.doc,u.before(),u.after(),b.p2.empty);if(M&&M.slice.size<M.to-M.from){if(n){let S=t.tr.step(M);S.setSelection(tt(v,"start")?T.Y1.findFrom(S.doc.resolve(S.mapping.map(_.pos)),1):T.qv.create(S.doc,S.mapping.map(_.pos))),n(S.scrollIntoView())}return!0}}return!(!v.isAtom||_.depth!=u.depth-1||(n&&n(t.tr.delete(_.pos,_.pos+v.nodeSize).scrollIntoView()),0))},At=(t,n,l)=>{let{$head:u,empty:_}=t.selection,v=u;if(!_)return!1;if(u.parent.isTextblock){if(l?!l.endOfTextblock("forward",t):u.parentOffset<u.parent.content.size)return!1;v=_t(u)}let M=v&&v.nodeAfter;return!(!M||!T.qv.isSelectable(M)||(n&&n(t.tr.setSelection(T.qv.create(t.doc,v.pos)).scrollIntoView()),0))};function _t(t){if(!t.parent.type.spec.isolating)for(let n=t.depth-1;n>=0;n--){let l=t.node(n);if(t.index(n)+1<l.childCount)return t.doc.resolve(t.after(n+1));if(l.type.spec.isolating)break}return null}const Ot=(t,n)=>{let{$head:l,$anchor:u}=t.selection;return!(!l.parent.type.spec.code||!l.sameParent(u)||(n&&n(t.tr.insertText("\n").scrollIntoView()),0))};function bt(t){for(let n=0;n<t.edgeCount;n++){let{type:l}=t.edge(n);if(l.isTextblock&&!l.hasRequiredAttrs())return l}return null}const Nt=(t,n)=>{let{$head:l,$anchor:u}=t.selection;if(!l.parent.type.spec.code||!l.sameParent(u))return!1;let _=l.node(-1),v=l.indexAfter(-1),M=bt(_.contentMatchAt(v));if(!M||!_.canReplaceWith(v,v,M))return!1;if(n){let S=l.after(),K=t.tr.replaceWith(S,S,M.createAndFill());K.setSelection(T.Y1.near(K.doc.resolve(S),1)),n(K.scrollIntoView())}return!0},Ht=(t,n)=>{let l=t.selection,{$from:u,$to:_}=l;if(l instanceof T.C1||u.parent.inlineContent||_.parent.inlineContent)return!1;let v=bt(_.parent.contentMatchAt(_.indexAfter()));if(!v||!v.isTextblock)return!1;if(n){let M=(!u.parentOffset&&_.index()<_.parent.childCount?u:_).pos,S=t.tr.insert(M,v.createAndFill());S.setSelection(T.Bs.create(S.doc,M+1)),n(S.scrollIntoView())}return!0},xt=(t,n)=>{let{$cursor:l}=t.selection;if(!l||l.parent.content.size)return!1;if(l.depth>1&&l.after()!=l.end(-1)){let v=l.before();if((0,p.Ax)(t.doc,v))return n&&n(t.tr.split(v).scrollIntoView()),!0}let u=l.blockRange(),_=u&&(0,p.k9)(u);return null!=_&&(n&&n(t.tr.lift(u,_).scrollIntoView()),!0)};var t;function ot(t,n,l){let v,M,u=n.nodeBefore,_=n.nodeAfter;if(u.type.spec.isolating||_.type.spec.isolating)return!1;if(function(t,n,l){let u=n.nodeBefore,_=n.nodeAfter,v=n.index();return!(!(u&&_&&u.type.compatibleContent(_.type))||(!u.content.size&&n.parent.canReplace(v-1,v)?(l&&l(t.tr.delete(n.pos-u.nodeSize,n.pos).scrollIntoView()),0):!n.parent.canReplace(v,v+1)||!_.isTextblock&&!(0,p.Mn)(t.doc,n.pos)||(l&&l(t.tr.clearIncompatible(n.pos,u.type,u.contentMatchAt(u.childCount)).join(n.pos).scrollIntoView()),0)))}(t,n,l))return!0;let S=n.parent.canReplace(n.index(),n.index()+1);if(S&&(v=(M=u.contentMatchAt(u.childCount)).findWrapping(_.type))&&M.matchType(v[0]||_.type).validEnd){if(l){let Et=n.pos+_.nodeSize,St=b.HY.empty;for(let oe=v.length-1;oe>=0;oe--)St=b.HY.from(v[oe].create(null,St));St=b.HY.from(u.copy(St));let Jt=t.tr.step(new p.FC(n.pos-1,Et,n.pos,Et,new b.p2(St,1,0),v.length,!0)),Gt=Et+2*v.length;(0,p.Mn)(Jt.doc,Gt)&&Jt.join(Gt),l(Jt.scrollIntoView())}return!0}let K=T.Y1.findFrom(n,1),et=K&&K.$from.blockRange(K.$to),nt=et&&(0,p.k9)(et);if(null!=nt&&nt>=n.depth)return l&&l(t.tr.lift(et,nt).scrollIntoView()),!0;if(S&&tt(_,"start",!0)&&tt(u,"end")){let Et=u,St=[];for(;St.push(Et),!Et.isTextblock;)Et=Et.lastChild;let Jt=_,Gt=1;for(;!Jt.isTextblock;Jt=Jt.firstChild)Gt++;if(Et.canReplace(Et.childCount,Et.childCount,Jt.content)){if(l){let oe=b.HY.empty;for(let re=St.length-1;re>=0;re--)oe=b.HY.from(St[re].copy(oe));l(t.tr.step(new p.FC(n.pos-St.length,n.pos+_.nodeSize,n.pos+Gt,n.pos+_.nodeSize-Gt,new b.p2(oe,St.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function at(t){return function(n,l){let u=n.selection,_=t<0?u.$from:u.$to,v=_.depth;for(;_.node(v).isInline;){if(!v)return!1;v--}return!!_.node(v).isTextblock&&(l&&l(n.tr.setSelection(T.Bs.create(n.doc,t<0?_.start(v):_.end(v)))),!0)}}const J=at(-1),V=at(1);function Ft(t,n=null){return function(l,u){let _=!1;for(let v=0;v<l.selection.ranges.length&&!_;v++){let{$from:{pos:M},$to:{pos:S}}=l.selection.ranges[v];l.doc.nodesBetween(M,S,(K,et)=>{if(_)return!1;if(K.isTextblock&&!K.hasMarkup(t,n))if(K.type==t)_=!0;else{let nt=l.doc.resolve(et),Et=nt.index();_=nt.parent.canReplaceWith(Et,Et+1,t)}})}if(!_)return!1;if(u){let v=l.tr;for(let M=0;M<l.selection.ranges.length;M++){let{$from:{pos:S},$to:{pos:K}}=l.selection.ranges[M];v.setBlockType(S,K,t,n)}u(v.scrollIntoView())}return!0}}function Ee(...t){return function(n,l,u){for(let _=0;_<t.length;_++)if(t[_](n,l,u))return!0;return!1}}let xe=Ee(Y,X,vt),we=Ee(Y,Ut,At);const be={Enter:Ee(Ot,Ht,xt,(n,l)=>{let{$from:u,$to:_}=n.selection;if(n.selection instanceof T.qv&&n.selection.node.isBlock)return!(!u.parentOffset||!(0,p.Ax)(n.doc,u.pos)||(l&&l(n.tr.split(u.pos).scrollIntoView()),0));if(!u.parent.isBlock)return!1;if(l){let v=_.parentOffset==_.parent.content.size,M=n.tr;(n.selection instanceof T.Bs||n.selection instanceof T.C1)&&M.deleteSelection();let S=0==u.depth?null:bt(u.node(-1).contentMatchAt(u.indexAfter(-1))),K=t,et=K?[K]:v&&S?[{type:S}]:void 0,nt=(0,p.Ax)(M.doc,M.mapping.map(u.pos),1,et);if(!et&&!nt&&(0,p.Ax)(M.doc,M.mapping.map(u.pos),1,S?[{type:S}]:void 0)&&(S&&(et=[{type:S}]),nt=!0),nt&&(M.split(M.mapping.map(u.pos),1,et),!v&&!u.parentOffset&&u.parent.type!=S)){let Et=M.mapping.map(u.before()),St=M.doc.resolve(Et);S&&u.node(-1).canReplaceWith(St.index(),St.index()+1,S)&&M.setNodeMarkup(M.mapping.map(u.before()),S)}l(M.scrollIntoView())}return!0}),"Mod-Enter":Nt,Backspace:xe,"Mod-Backspace":xe,"Shift-Backspace":xe,Delete:we,"Mod-Delete":we,"Mod-a":(t,n)=>(n&&n(t.tr.setSelection(new T.C1(t.doc))),!0)},Ke={"Ctrl-h":be.Backspace,"Alt-Backspace":be["Mod-Backspace"],"Ctrl-d":be.Delete,"Ctrl-Alt-Backspace":be["Mod-Delete"],"Alt-Delete":be["Mod-Delete"],"Alt-d":be["Mod-Delete"],"Ctrl-a":J,"Ctrl-e":V};for(let t in be)Ke[t]=be[t];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();var Dt=Object.defineProperty,D=(t,n)=>{for(var l in n)Dt(t,l,{get:n[l],enumerable:!0})};function y(t){const{state:n,transaction:l}=t;let{selection:u}=l,{doc:_}=l,{storedMarks:v}=l;return ye(ie({},n),{apply:n.apply.bind(n),applyTransaction:n.applyTransaction.bind(n),filterTransaction:n.filterTransaction,plugins:n.plugins,schema:n.schema,reconfigure:n.reconfigure.bind(n),toJSON:n.toJSON.bind(n),get storedMarks(){return v},get selection(){return u},get doc(){return _},get tr(){return u=l.selection,_=l.doc,v=l.storedMarks,l}})}var H=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:l}=this,{view:u}=n,{tr:_}=l,v=this.buildProps(_);return Object.fromEntries(Object.entries(t).map(([M,S])=>[M,(...et)=>{const nt=S(...et)(v);return!_.getMeta("preventDispatch")&&!this.hasCustomState&&u.dispatch(_),nt}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:l,editor:u,state:_}=this,{view:v}=u,M=[],S=!!t,K=t||_.tr,nt=ye(ie({},Object.fromEntries(Object.entries(l).map(([Et,St])=>[Et,(...Gt)=>{const oe=this.buildProps(K,n),ce=St(...Gt)(oe);return M.push(ce),nt}]))),{run:()=>(!S&&n&&!K.getMeta("preventDispatch")&&!this.hasCustomState&&v.dispatch(K),M.every(Et=>!0===Et))});return nt}createCan(t){const{rawCommands:n,state:l}=this,_=t||l.tr,v=this.buildProps(_,!1),M=Object.fromEntries(Object.entries(n).map(([S,K])=>[S,(...et)=>K(...et)(ye(ie({},v),{dispatch:void 0}))]));return ye(ie({},M),{chain:()=>this.createChain(_,!1)})}buildProps(t,n=!0){const{rawCommands:l,editor:u,state:_}=this,{view:v}=u;_.storedMarks&&t.setStoredMarks(_.storedMarks);const M={tr:t,editor:u,view:v,state:y({state:_,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(l).map(([S,K])=>[S,(...et)=>K(...et)(M)]))}};return M}};function F(t,n,l){return void 0===t.config[n]&&t.parent?F(t.parent,n,l):"function"==typeof t.config[n]?t.config[n].bind(ye(ie({},l),{parent:t.parent?F(t.parent,n,l):null})):t.config[n]}function W(t){return{baseExtensions:t.filter(_=>"extension"===_.type),nodeExtensions:t.filter(_=>"node"===_.type),markExtensions:t.filter(_=>"mark"===_.type)}}function Mt(t){const n=[],{nodeExtensions:l,markExtensions:u}=W(t),_=[...l,...u],v={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(M=>{const K=F(M,"addGlobalAttributes",{name:M.name,options:M.options,storage:M.storage});K&&K().forEach(nt=>{nt.types.forEach(Et=>{Object.entries(nt.attributes).forEach(([St,Jt])=>{n.push({type:Et,name:St,attribute:ie(ie({},v),Jt)})})})})}),_.forEach(M=>{const K=F(M,"addAttributes",{name:M.name,options:M.options,storage:M.storage});if(!K)return;const et=K();Object.entries(et).forEach(([nt,Et])=>{const St=ie(ie({},v),Et);(null==Et?void 0:Et.isRequired)&&void 0===(null==Et?void 0:Et.default)&&delete St.default,n.push({type:M.name,name:nt,attribute:St})})}),n}function Pt(t,n){if("string"==typeof t){if(!n.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return n.nodes[t]}return t}function N(...t){return t.filter(n=>!!n).reduce((n,l)=>{const u=ie({},n);return Object.entries(l).forEach(([_,v])=>{u[_]=u[_]?"class"===_?[u[_],v].join(" "):"style"===_?[u[_],v].join("; "):v:v}),u},{})}function s(t,n){return n.filter(l=>l.attribute.rendered).map(l=>l.attribute.renderHTML?l.attribute.renderHTML(t.attrs)||{}:{[l.name]:t.attrs[l.name]}).reduce((l,u)=>N(l,u),{})}function d(t){return"function"==typeof t}function g(t,n,...l){return d(t)?n?t.bind(n)(...l):t(...l):t}function A(t={}){return 0===Object.keys(t).length&&t.constructor===Object}function I(t){return"string"!=typeof t?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):"true"===t||"false"!==t&&t}function $(t,n){return t.style?t:ye(ie({},t),{getAttrs:l=>{const u=t.getAttrs?t.getAttrs(l):t.attrs;if(!1===u)return!1;const _=n.reduce((v,M)=>{const S=M.attribute.parseHTML?M.attribute.parseHTML(l):I(l.getAttribute(M.name));return null==S?v:ye(ie({},v),{[M.name]:S})},{});return ie(ie({},u),_)}})}function it(t){return Object.fromEntries(Object.entries(t).filter(([n,l])=>("attrs"!==n||!A(l))&&null!=l))}function zt(t){var n;const l=Mt(t),{nodeExtensions:u,markExtensions:_}=W(t),v=null==(n=u.find(K=>F(K,"topNode")))?void 0:n.name,M=Object.fromEntries(u.map(K=>{const et=l.filter(ce=>ce.type===K.name),nt={name:K.name,options:K.options,storage:K.storage},Et=t.reduce((ce,re)=>{const $e=F(re,"extendNodeSchema",nt);return ie(ie({},ce),$e?$e(K):{})},{}),St=it(ye(ie({},Et),{content:g(F(K,"content",nt)),marks:g(F(K,"marks",nt)),group:g(F(K,"group",nt)),inline:g(F(K,"inline",nt)),atom:g(F(K,"atom",nt)),selectable:g(F(K,"selectable",nt)),draggable:g(F(K,"draggable",nt)),code:g(F(K,"code",nt)),defining:g(F(K,"defining",nt)),isolating:g(F(K,"isolating",nt)),attrs:Object.fromEntries(et.map(ce=>{var re;return[ce.name,{default:null==(re=null==ce?void 0:ce.attribute)?void 0:re.default}]}))})),Jt=g(F(K,"parseHTML",nt));Jt&&(St.parseDOM=Jt.map(ce=>$(ce,et)));const Gt=F(K,"renderHTML",nt);Gt&&(St.toDOM=ce=>Gt({node:ce,HTMLAttributes:s(ce,et)}));const oe=F(K,"renderText",nt);return oe&&(St.toText=oe),[K.name,St]})),S=Object.fromEntries(_.map(K=>{const et=l.filter(oe=>oe.type===K.name),nt={name:K.name,options:K.options,storage:K.storage},Et=t.reduce((oe,ce)=>{const re=F(ce,"extendMarkSchema",nt);return ie(ie({},oe),re?re(K):{})},{}),St=it(ye(ie({},Et),{inclusive:g(F(K,"inclusive",nt)),excludes:g(F(K,"excludes",nt)),group:g(F(K,"group",nt)),spanning:g(F(K,"spanning",nt)),code:g(F(K,"code",nt)),attrs:Object.fromEntries(et.map(oe=>{var ce;return[oe.name,{default:null==(ce=null==oe?void 0:oe.attribute)?void 0:ce.default}]}))})),Jt=g(F(K,"parseHTML",nt));Jt&&(St.parseDOM=Jt.map(oe=>$(oe,et)));const Gt=F(K,"renderHTML",nt);return Gt&&(St.toDOM=oe=>Gt({mark:oe,HTMLAttributes:s(oe,et)})),[K.name,St]}));return new b.V_({topNode:v,nodes:M,marks:S})}function ae(t,n){return n.nodes[t]||n.marks[t]||null}function ue(t,n){return Array.isArray(n)?n.some(l=>("string"==typeof l?l:l.name)===t.name):n}var We=(t,n=500)=>{let l="";const u=t.parentOffset;return t.parent.nodesBetween(Math.max(0,u-n),u,(_,v,M,S)=>{var K,et;l+=((null==(et=(K=_.type.spec).toText)?void 0:et.call(K,{node:_,pos:v,parent:M,index:S}))||_.textContent||"%leaf%").slice(0,Math.max(0,u-v))}),l};function Ye(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var je=class{constructor(t){this.find=t.find,this.handler=t.handler}};function tn(t){var n;const{editor:l,from:u,to:_,text:v,rules:M,plugin:S}=t,{view:K}=l;if(K.composing)return!1;const et=K.state.doc.resolve(u);if(et.parent.type.spec.code||(null==(n=et.nodeBefore||et.nodeAfter)?void 0:n.marks.find(St=>St.type.spec.code)))return!1;let nt=!1;const Et=We(et)+v;return M.forEach(St=>{if(nt)return;const Jt=((t,n)=>{if(Ye(n))return n.exec(t);const l=n(t);if(!l)return null;const u=[l.text];return u.index=l.index,u.input=t,u.data=l.data,l.replaceWith&&(l.text.includes(l.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),u.push(l.replaceWith)),u})(Et,St.find);if(!Jt)return;const Gt=K.state.tr,oe=y({state:K.state,transaction:Gt}),ce={from:u-(Jt[0].length-v.length),to:_},{commands:re,chain:$e,can:gn}=new H({editor:l,state:oe});null===St.handler({state:oe,range:ce,match:Jt,commands:re,chain:$e,can:gn})||!Gt.steps.length||(Gt.setMeta(S,{transform:Gt,from:u,to:_,text:v}),K.dispatch(Gt),nt=!0)}),nt}function un(t){const{editor:n,rules:l}=t,u=new T.Sy({state:{init:()=>null,apply:(_,v)=>_.getMeta(u)||(_.selectionSet||_.docChanged?null:v)},props:{handleTextInput:(_,v,M,S)=>tn({editor:n,from:v,to:M,text:S,rules:l,plugin:u}),handleDOMEvents:{compositionend:_=>(setTimeout(()=>{const{$cursor:v}=_.state.selection;v&&tn({editor:n,from:v.pos,to:v.pos,text:"",rules:l,plugin:u})}),!1)},handleKeyDown(_,v){if("Enter"!==v.key)return!1;const{$cursor:M}=_.state.selection;return!!M&&tn({editor:n,from:M.pos,to:M.pos,text:"\n",rules:l,plugin:u})}},isInputRules:!0});return u}function dn(t){return"number"==typeof t}var on=class{constructor(t){this.find=t.find,this.handler=t.handler}};function rn(t){const{editor:n,rules:l}=t;let u=null,_=!1,v=!1;return l.map(S=>new T.Sy({view(K){const et=nt=>{var Et;u=(null==(Et=K.dom.parentElement)?void 0:Et.contains(nt.target))?K.dom.parentElement:null};return window.addEventListener("dragstart",et),{destroy(){window.removeEventListener("dragstart",et)}}},props:{handleDOMEvents:{drop:K=>(v=u===K.dom.parentElement,!1),paste:(K,et)=>{var nt;const Et=null==(nt=et.clipboardData)?void 0:nt.getData("text/html");return _=!!(null==Et?void 0:Et.includes("data-pm-slice")),!1}}},appendTransaction:(K,et,nt)=>{const Et=K[0],St="paste"===Et.getMeta("uiEvent")&&!_,Jt="drop"===Et.getMeta("uiEvent")&&!v;if(!St&&!Jt)return;const Gt=et.doc.content.findDiffStart(nt.doc.content),oe=et.doc.content.findDiffEnd(nt.doc.content);if(!dn(Gt)||!oe||Gt===oe.b)return;const ce=nt.tr,re=y({state:nt,transaction:ce});return function(t){const{editor:n,state:l,from:u,to:_,rule:v}=t,{commands:M,chain:S,can:K}=new H({editor:n,state:l}),et=[];return l.doc.nodesBetween(u,_,(Et,St)=>{if(!Et.isTextblock||Et.type.spec.code)return;const Jt=Math.max(u,St),Gt=Math.min(_,St+Et.content.size);((t,n)=>{if(Ye(n))return[...t.matchAll(n)];const l=n(t);return l?l.map(u=>{const _=[u.text];return _.index=u.index,_.input=t,_.data=u.data,u.replaceWith&&(u.text.includes(u.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),_.push(u.replaceWith)),_}):[]})(Et.textBetween(Jt-St,Gt-St,void 0,"\ufffc"),v.find).forEach(re=>{if(void 0===re.index)return;const $e=Jt+re.index+1,gn=$e+re[0].length,An={from:l.tr.mapping.map($e),to:l.tr.mapping.map(gn)},mo=v.handler({state:l,range:An,match:re,commands:M,chain:S,can:K});et.push(mo)})}),et.every(Et=>null!==Et)}({editor:n,state:re,from:Math.max(Gt-1,0),to:oe.b-1,rule:S})&&ce.steps.length?ce:void 0}}))}function Bt(t){const n=t.filter((l,u)=>t.indexOf(l)!==u);return[...new Set(n)]}var Lt=class{constructor(t,n){this.splittableMarks=[],this.editor=n,this.extensions=Lt.resolve(t),this.schema=zt(this.extensions),this.extensions.forEach(l=>{var u;this.editor.extensionStorage[l.name]=l.storage;const _={name:l.name,options:l.options,storage:l.storage,editor:this.editor,type:ae(l.name,this.schema)};"mark"===l.type&&(null==(u=g(F(l,"keepOnSplit",_)))||u)&&this.splittableMarks.push(l.name);const v=F(l,"onBeforeCreate",_);v&&this.editor.on("beforeCreate",v);const M=F(l,"onCreate",_);M&&this.editor.on("create",M);const S=F(l,"onUpdate",_);S&&this.editor.on("update",S);const K=F(l,"onSelectionUpdate",_);K&&this.editor.on("selectionUpdate",K);const et=F(l,"onTransaction",_);et&&this.editor.on("transaction",et);const nt=F(l,"onFocus",_);nt&&this.editor.on("focus",nt);const Et=F(l,"onBlur",_);Et&&this.editor.on("blur",Et);const St=F(l,"onDestroy",_);St&&this.editor.on("destroy",St)})}static resolve(t){const n=Lt.sort(Lt.flatten(t)),l=Bt(n.map(u=>u.name));return l.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${l.map(u=>`'${u}'`).join(", ")}]. This can lead to issues.`),n}static flatten(t){return t.map(n=>{const u=F(n,"addExtensions",{name:n.name,options:n.options,storage:n.storage});return u?[n,...this.flatten(u())]:n}).flat(10)}static sort(t){return t.sort((l,u)=>{const _=F(l,"priority")||100,v=F(u,"priority")||100;return _>v?-1:_<v?1:0})}get commands(){return this.extensions.reduce((t,n)=>{const u=F(n,"addCommands",{name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:ae(n.name,this.schema)});return u?ie(ie({},t),u()):t},{})}get plugins(){const{editor:t}=this,n=Lt.sort([...this.extensions].reverse()),l=[],u=[],_=n.map(v=>{const M={name:v.name,options:v.options,storage:v.storage,editor:t,type:ae(v.name,this.schema)},S=[],K=F(v,"addKeyboardShortcuts",M);let et={};if("mark"===v.type&&v.config.exitable&&(et.ArrowRight=()=>Hn.handleExit({editor:t,mark:v})),K){const Gt=Object.fromEntries(Object.entries(K()).map(([oe,ce])=>[oe,()=>ce({editor:t})]));et=ie(ie({},et),Gt)}const nt=(0,E.h)(et);S.push(nt);const Et=F(v,"addInputRules",M);ue(v,t.options.enableInputRules)&&Et&&l.push(...Et());const St=F(v,"addPasteRules",M);ue(v,t.options.enablePasteRules)&&St&&u.push(...St());const Jt=F(v,"addProseMirrorPlugins",M);if(Jt){const Gt=Jt();S.push(...Gt)}return S}).flat();return[un({editor:t,rules:l}),...rn({editor:t,rules:u}),..._]}get attributes(){return Mt(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:n}=W(this.extensions);return Object.fromEntries(n.filter(l=>!!F(l,"addNodeView")).map(l=>{const u=this.attributes.filter(S=>S.type===l.name),_={name:l.name,options:l.options,storage:l.storage,editor:t,type:Pt(l.name,this.schema)},v=F(l,"addNodeView",_);return v?[l.name,(S,K,et,nt)=>{const Et=s(S,u);return v()({editor:t,node:S,getPos:et,decorations:nt,HTMLAttributes:Et,extension:l})}]:[]}))}},Kt={};function jt(t){return"Object"===function(t){return Object.prototype.toString.call(t).slice(8,-1)}(t)&&t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function U(t,n){const l=ie({},t);return jt(t)&&jt(n)&&Object.keys(n).forEach(u=>{jt(n[u])?u in t?l[u]=U(t[u],n[u]):Object.assign(l,{[u]:n[u]}):Object.assign(l,{[u]:n[u]})}),l}D(Kt,{ClipboardTextSerializer:()=>mt,Commands:()=>Ho,Editable:()=>zo,FocusEvents:()=>Vn,Keymap:()=>Uo,Tabindex:()=>$o});var B=class{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ie(ie({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=g(F(this,"addOptions",{name:this.name}))),this.storage=g(F(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new B(t)}configure(t={}){const n=this.extend();return n.options=U(this.options,t),n.storage=g(F(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new B(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=g(F(n,"addOptions",{name:n.name})),n.storage=g(F(n,"addStorage",{name:n.name,options:n.options})),n}};function G(t,n,l){const{from:u,to:_}=n,{blockSeparator:v="\n\n",textSerializers:M={}}=l||{};let S="",K=!0;return t.nodesBetween(u,_,(et,nt,Et,St)=>{var Jt;const Gt=null==M?void 0:M[et.type.name];Gt?(et.isBlock&&!K&&(S+=v,K=!0),Et&&(S+=Gt({node:et,pos:nt,parent:Et,index:St,range:n}))):et.isText?(S+=null==(Jt=null==et?void 0:et.text)?void 0:Jt.slice(Math.max(u,nt)-nt,_-nt),K=!1):et.isBlock&&!K&&(S+=v,K=!0)}),S}function pt(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,n])=>n.spec.toText).map(([n,l])=>[n,l.spec.toText]))}var mt=B.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new T.Sy({key:new T.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:n,schema:l}=t,{doc:u,selection:_}=n,{ranges:v}=_;return G(u,{from:Math.min(...v.map(nt=>nt.$from.pos)),to:Math.max(...v.map(nt=>nt.$to.pos))},{textSerializers:pt(l)})}}})]}}),It={};D(It,{blur:()=>Rt,clearContent:()=>Xt,clearNodes:()=>le,command:()=>ge,createParagraphNear:()=>pe,deleteCurrentNode:()=>_e,deleteNode:()=>Ce,deleteRange:()=>fe,deleteSelection:()=>Me,enter:()=>ke,exitCode:()=>h,extendMarkRange:()=>Q,first:()=>ct,focus:()=>Zt,forEach:()=>te,insertContent:()=>se,insertContentAt:()=>nn,joinBackward:()=>En,joinDown:()=>cn,joinForward:()=>Tn,joinUp:()=>Pe,keyboardShortcut:()=>Co,lift:()=>vo,liftEmptyBlock:()=>pn,liftListItem:()=>To,newlineInCode:()=>Wn,resetAttributes:()=>Eo,scrollIntoView:()=>In,selectAll:()=>Do,selectNodeBackward:()=>Jn,selectNodeForward:()=>yn,selectParentNode:()=>Mo,selectTextblockEnd:()=>yo,selectTextblockStart:()=>bo,setContent:()=>Oo,setMark:()=>So,setMeta:()=>eo,setNode:()=>Io,setNodeSelection:()=>no,setTextSelection:()=>oo,sinkListItem:()=>Nn,splitBlock:()=>io,splitListItem:()=>jn,toggleList:()=>ko,toggleMark:()=>wo,toggleNode:()=>lo,toggleWrap:()=>ao,undoInputRule:()=>Ro,unsetAllMarks:()=>Bo,unsetMark:()=>Lo,updateAttributes:()=>No,wrapIn:()=>Fo,wrapInList:()=>co});var Rt=()=>({editor:t,view:n})=>(requestAnimationFrame(()=>{var l;t.isDestroyed||(n.dom.blur(),null==(l=null==window?void 0:window.getSelection())||l.removeAllRanges())}),!0),Xt=(t=!1)=>({commands:n})=>n.setContent("",t),le=()=>({state:t,tr:n,dispatch:l})=>{const{selection:u}=n,{ranges:_}=u;return l&&_.forEach(({$from:v,$to:M})=>{t.doc.nodesBetween(v.pos,M.pos,(S,K)=>{if(S.type.isText)return;const{doc:et,mapping:nt}=n,Et=et.resolve(nt.map(K)),St=et.resolve(nt.map(K+S.nodeSize)),Jt=Et.blockRange(St);if(!Jt)return;const Gt=(0,p.k9)(Jt);if(S.type.isTextblock){const{defaultType:oe}=Et.parent.contentMatchAt(Et.index());n.setNodeMarkup(Jt.start,oe)}(Gt||0===Gt)&&n.lift(Jt,Gt)})}),!0},ge=t=>n=>t(n),pe=()=>({state:t,dispatch:n})=>Ht(t,n),_e=()=>({tr:t,dispatch:n})=>{const{selection:l}=t,u=l.$anchor.node();if(u.content.size>0)return!1;const _=t.selection.$anchor;for(let v=_.depth;v>0;v-=1)if(_.node(v).type===u.type){if(n){const S=_.before(v),K=_.after(v);t.delete(S,K).scrollIntoView()}return!0}return!1},Ce=t=>({tr:n,state:l,dispatch:u})=>{const _=Pt(t,l.schema),v=n.selection.$anchor;for(let M=v.depth;M>0;M-=1)if(v.node(M).type===_){if(u){const K=v.before(M),et=v.after(M);n.delete(K,et).scrollIntoView()}return!0}return!1},fe=t=>({tr:n,dispatch:l})=>{const{from:u,to:_}=t;return l&&n.delete(u,_),!0},Me=()=>({state:t,dispatch:n})=>Y(t,n),ke=()=>({commands:t})=>t.keyboardShortcut("Enter"),h=()=>({state:t,dispatch:n})=>Nt(t,n);function C(t,n,l={strict:!0}){const u=Object.keys(n);return!u.length||u.every(_=>l.strict?n[_]===t[_]:Ye(n[_])?n[_].test(t[_]):n[_]===t[_])}function P(t,n,l={}){return t.find(u=>u.type===n&&C(u.attrs,l))}function O(t,n,l={}){return!!P(t,n,l)}function L(t,n,l={}){if(!t||!n)return;let u=t.parent.childAfter(t.parentOffset);if(t.parentOffset===u.offset&&0!==u.offset&&(u=t.parent.childBefore(t.parentOffset)),!u.node)return;const _=P([...u.node.marks],n,l);if(!_)return;let v=u.index,M=t.start()+u.offset,S=v+1,K=M+u.node.nodeSize;for(P([...u.node.marks],n,l);v>0&&_.isInSet(t.parent.child(v-1).marks);)v-=1,M-=t.parent.child(v).nodeSize;for(;S<t.parent.childCount&&O([...t.parent.child(S).marks],n,l);)K+=t.parent.child(S).nodeSize,S+=1;return{from:M,to:K}}function z(t,n){if("string"==typeof t){if(!n.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return n.marks[t]}return t}var Q=(t,n={})=>({tr:l,state:u,dispatch:_})=>{const v=z(t,u.schema),{doc:M,selection:S}=l,{$from:K,from:et,to:nt}=S;if(_){const Et=L(K,v,n);if(Et&&Et.from<=et&&Et.to>=nt){const St=T.Bs.create(M,Et.from,Et.to);l.setSelection(St)}}return!0},ct=t=>n=>{const l="function"==typeof t?t(n):t;for(let u=0;u<l.length;u+=1)if(l[u](n))return!0;return!1};function q(t){return t instanceof T.Bs}function lt(t=0,n=0,l=0){return Math.min(Math.max(t,n),l)}function kt(t,n=null){if(!n)return null;const l=T.Y1.atStart(t),u=T.Y1.atEnd(t);if("start"===n||!0===n)return l;if("end"===n)return u;const _=l.from,v=u.to;return"all"===n?T.Bs.create(t,lt(0,_,v),lt(t.content.size,_,v)):T.Bs.create(t,lt(n,_,v),lt(n,_,v))}function wt(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Zt=(t=null,n={})=>({editor:l,view:u,tr:_,dispatch:v})=>{n=ie({scrollIntoView:!0},n);const M=()=>{wt()&&u.dom.focus(),requestAnimationFrame(()=>{l.isDestroyed||(u.focus(),(null==n?void 0:n.scrollIntoView)&&l.commands.scrollIntoView())})};if(u.hasFocus()&&null===t||!1===t)return!0;if(v&&null===t&&!q(l.state.selection))return M(),!0;const S=kt(_.doc,t)||l.state.selection,K=l.state.selection.eq(S);return v&&(K||_.setSelection(S),K&&_.storedMarks&&_.setStoredMarks(_.storedMarks),M()),!0},te=(t,n)=>l=>t.every((u,_)=>n(u,ye(ie({},l),{index:_}))),se=(t,n)=>({tr:l,commands:u})=>u.insertContentAt({from:l.selection.from,to:l.selection.to},t,n);function de(t){const n=`<body>${t}</body>`;return(new window.DOMParser).parseFromString(n,"text/html").body}function me(t,n,l){if(l=ie({slice:!0,parseOptions:{}},l),"object"==typeof t&&null!==t)try{return Array.isArray(t)?b.HY.fromArray(t.map(u=>n.nodeFromJSON(u))):n.nodeFromJSON(t)}catch(u){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",u),me("",n,l)}if("string"==typeof t){const u=b.aw.fromSchema(n);return l.slice?u.parseSlice(de(t),l.parseOptions).content:u.parse(de(t),l.parseOptions)}return me("",n,l)}var nn=(t,n,l)=>({tr:u,dispatch:_,editor:v})=>{if(_){l=ie({parseOptions:{},updateSelection:!0},l);const M=me(n,v.schema,{parseOptions:ie({preserveWhitespace:"full"},l.parseOptions)});if("<>"===M.toString())return!0;let{from:S,to:K}="number"==typeof t?{from:t,to:t}:t,et=!0,nt=!0;if(((t=>t.toString().startsWith("<"))(M)?M:[M]).forEach(St=>{St.check(),et=!!et&&St.isText&&0===St.marks.length,nt=!!nt&&St.isBlock}),S===K&&nt){const{parent:St}=u.doc.resolve(S);St.isTextblock&&!St.type.spec.code&&!St.childCount&&(S-=1,K+=1)}et?u.insertText(n,S,K):u.replaceWith(S,K,M),l.updateSelection&&function(t,n,l){const u=t.steps.length-1;if(u<n)return;const _=t.steps[u];if(!(_ instanceof p.Pu||_ instanceof p.FC))return;let M=0;t.mapping.maps[u].forEach((S,K,et,nt)=>{0===M&&(M=nt)}),t.setSelection(T.Y1.near(t.doc.resolve(M),-1))}(u,u.steps.length-1)}return!0},Pe=()=>({state:t,dispatch:n})=>((t,n)=>{let _,l=t.selection,u=l instanceof T.qv;if(u){if(l.node.isTextblock||!(0,p.Mn)(t.doc,l.from))return!1;_=l.from}else if(_=(0,p.GJ)(t.doc,l.from,-1),null==_)return!1;if(n){let v=t.tr.join(_);u&&v.setSelection(T.qv.create(v.doc,_-t.doc.resolve(_).nodeBefore.nodeSize)),n(v.scrollIntoView())}return!0})(t,n),cn=()=>({state:t,dispatch:n})=>((t,n)=>{let u,l=t.selection;if(l instanceof T.qv){if(l.node.isTextblock||!(0,p.Mn)(t.doc,l.to))return!1;u=l.to}else if(u=(0,p.GJ)(t.doc,l.to,1),null==u)return!1;return n&&n(t.tr.join(u).scrollIntoView()),!0})(t,n),En=()=>({state:t,dispatch:n})=>X(t,n),Tn=()=>({state:t,dispatch:n})=>Ut(t,n);function He(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}var Co=t=>({editor:n,view:l,tr:u,dispatch:_})=>{const v=function(t){const n=t.split(/-(?!$)/);let u,_,v,M,l=n[n.length-1];"Space"===l&&(l=" ");for(let S=0;S<n.length-1;S+=1){const K=n[S];if(/^(cmd|meta|m)$/i.test(K))M=!0;else if(/^a(lt)?$/i.test(K))u=!0;else if(/^(c|ctrl|control)$/i.test(K))_=!0;else if(/^s(hift)?$/i.test(K))v=!0;else{if(!/^mod$/i.test(K))throw new Error(`Unrecognized modifier name: ${K}`);wt()||He()?M=!0:_=!0}}return u&&(l=`Alt-${l}`),_&&(l=`Ctrl-${l}`),M&&(l=`Meta-${l}`),v&&(l=`Shift-${l}`),l}(t).split(/-(?!$)/),M=v.find(et=>!["Alt","Ctrl","Meta","Shift"].includes(et)),S=new KeyboardEvent("keydown",{key:"Space"===M?" ":M,altKey:v.includes("Alt"),ctrlKey:v.includes("Ctrl"),metaKey:v.includes("Meta"),shiftKey:v.includes("Shift"),bubbles:!0,cancelable:!0}),K=n.captureTransaction(()=>{l.someProp("handleKeyDown",et=>et(l,S))});return null==K||K.steps.forEach(et=>{const nt=et.map(u.mapping);nt&&_&&u.maybeStep(nt)}),!0};function Dn(t,n,l={}){const{from:u,to:_,empty:v}=t.selection,M=n?Pt(n,t.schema):null,S=[];t.doc.nodesBetween(u,_,(Et,St)=>{if(Et.isText)return;const Jt=Math.max(u,St),Gt=Math.min(_,St+Et.nodeSize);S.push({node:Et,from:Jt,to:Gt})});const K=_-u,et=S.filter(Et=>!M||M.name===Et.node.type.name).filter(Et=>C(Et.node.attrs,l,{strict:!1}));return v?!!et.length:et.reduce((Et,St)=>Et+St.to-St.from,0)>=K}var vo=(t,n={})=>({state:l,dispatch:u})=>!!Dn(l,Pt(t,l.schema),n)&&((t,n)=>{let{$from:l,$to:u}=t.selection,_=l.blockRange(u),v=_&&(0,p.k9)(_);return null!=v&&(n&&n(t.tr.lift(_,v).scrollIntoView()),!0)})(l,u),pn=()=>({state:t,dispatch:n})=>xt(t,n),To=t=>({state:n,dispatch:l})=>function(t){return function(n,l){let{$from:u,$to:_}=n.selection,v=u.blockRange(_,M=>M.childCount>0&&M.firstChild.type==t);return!!v&&(!l||(u.node(v.depth-1).type==t?function(t,n,l,u){let _=t.tr,v=u.end,M=u.$to.end(u.depth);v<M&&(_.step(new p.FC(v-1,M,v,M,new b.p2(b.HY.from(l.create(null,u.parent.copy())),1,0),1,!0)),u=new b.Ts(_.doc.resolve(u.$from.pos),_.doc.resolve(M),u.depth));const S=(0,p.k9)(u);if(null==S)return!1;_.lift(u,S);let K=_.mapping.map(v,-1)-1;return(0,p.Mn)(_.doc,K)&&_.join(K),n(_.scrollIntoView()),!0}(n,l,t,v):function(t,n,l){let u=t.tr,_=l.parent;for(let Jt=l.end,Gt=l.endIndex-1,oe=l.startIndex;Gt>oe;Gt--)Jt-=_.child(Gt).nodeSize,u.delete(Jt-1,Jt+1);let v=u.doc.resolve(l.start),M=v.nodeAfter;if(u.mapping.map(l.end)!=l.start+v.nodeAfter.nodeSize)return!1;let S=0==l.startIndex,K=l.endIndex==_.childCount,et=v.node(-1),nt=v.index(-1);if(!et.canReplace(nt+(S?0:1),nt+1,M.content.append(K?b.HY.empty:b.HY.from(_))))return!1;let Et=v.pos,St=Et+M.nodeSize;return u.step(new p.FC(Et-(S?1:0),St+(K?1:0),Et+1,St-1,new b.p2((S?b.HY.empty:b.HY.from(_.copy(b.HY.empty))).append(K?b.HY.empty:b.HY.from(_.copy(b.HY.empty))),S?0:1,K?0:1),S?0:1)),n(u.scrollIntoView()),!0}(n,l,v)))}}(Pt(t,n.schema))(n,l),Wn=()=>({state:t,dispatch:n})=>Ot(t,n);function Mn(t,n){return n.nodes[t]?"node":n.marks[t]?"mark":null}function Kn(t,n){const l="string"==typeof n?[n]:n;return Object.keys(t).reduce((u,_)=>(l.includes(_)||(u[_]=t[_]),u),{})}var Eo=(t,n)=>({tr:l,state:u,dispatch:_})=>{let v=null,M=null;const S=Mn("string"==typeof t?t:t.name,u.schema);return!!S&&("node"===S&&(v=Pt(t,u.schema)),"mark"===S&&(M=z(t,u.schema)),_&&l.selection.ranges.forEach(K=>{u.doc.nodesBetween(K.$from.pos,K.$to.pos,(et,nt)=>{v&&v===et.type&&l.setNodeMarkup(nt,void 0,Kn(et.attrs,n)),M&&et.marks.length&&et.marks.forEach(Et=>{M===Et.type&&l.addMark(nt,nt+et.nodeSize,M.create(Kn(Et.attrs,n)))})})}),!0)},In=()=>({tr:t,dispatch:n})=>(n&&t.scrollIntoView(),!0),Do=()=>({tr:t,commands:n})=>n.setTextSelection({from:0,to:t.doc.content.size}),Jn=()=>({state:t,dispatch:n})=>vt(t,n),yn=()=>({state:t,dispatch:n})=>At(t,n),Mo=()=>({state:t,dispatch:n})=>((t,n)=>{let _,{$from:l,to:u}=t.selection,v=l.sharedDepth(u);return 0!=v&&(_=l.before(v),n&&n(t.tr.setSelection(T.qv.create(t.doc,_))),!0)})(t,n),yo=()=>({state:t,dispatch:n})=>V(t,n),bo=()=>({state:t,dispatch:n})=>J(t,n);function Qn(t,n,l={}){return me(t,n,{slice:!1,parseOptions:l})}var Oo=(t,n=!1,l={})=>({tr:u,editor:_,dispatch:v})=>{const{doc:M}=u,S=Qn(t,_.schema,l);return v&&u.replaceWith(0,M.content.size,S).setMeta("preventUpdate",!n),!0};function xo(t,n){const l=new p.wx(t);return n.forEach(u=>{u.steps.forEach(_=>{l.step(_)})}),l}function kn(t){for(let n=0;n<t.edgeCount;n+=1){const{type:l}=t.edge(n);if(l.isTextblock&&!l.hasRequiredAttrs())return l}return null}function Gn(t,n){const l=[];return t.descendants((u,_)=>{n(u)&&l.push({node:u,pos:_})}),l}function Ao(t,n,l){const u=[];return t.nodesBetween(n.from,n.to,(_,v)=>{l(_)&&u.push({node:_,pos:v})}),u}function $n(t,n){for(let l=t.depth;l>0;l-=1){const u=t.node(l);if(n(u))return{pos:l>0?t.before(l):0,start:t.start(l),depth:l,node:u}}}function wn(t){return n=>$n(n.$from,t)}function Rn(t,n){const l=b.PW.fromSchema(n).serializeFragment(t),_=document.implementation.createHTMLDocument().createElement("div");return _.appendChild(l),_.innerHTML}function Pn(t){return zt(Lt.resolve(t))}function Po(t,n){const l=Pn(n);return Rn(b.NB.fromJSON(l,t).content,l)}function Bn(t,n){const l=Pn(n),u=de(t);return b.aw.fromSchema(l).parse(u).toJSON()}function Zn(t,n){return G(t,{from:0,to:t.content.size},n)}function bn(t,n,l){const{blockSeparator:u="\n\n",textSerializers:_={}}=l||{},v=Pn(n);return Zn(b.NB.fromJSON(v,t),{blockSeparator:u,textSerializers:ie(ie({},pt(v)),_)})}function Yn(t,n){const l=z(n,t.schema),{from:u,to:_,empty:v}=t.selection,M=[];v?(t.storedMarks&&M.push(...t.storedMarks),M.push(...t.selection.$head.marks())):t.doc.nodesBetween(u,_,K=>{M.push(...K.marks)});const S=M.find(K=>K.type.name===l.name);return S?ie({},S.attrs):{}}function Xn(t,n){const l=Pt(n,t.schema),{from:u,to:_}=t.selection,v=[];t.doc.nodesBetween(u,_,S=>{v.push(S)});const M=v.reverse().find(S=>S.type.name===l.name);return M?ie({},M.attrs):{}}function On(t,n){const l=Mn("string"==typeof n?n:n.name,t.schema);return"node"===l?Xn(t,n):"mark"===l?Yn(t,n):{}}function qn(t,n=JSON.stringify){const l={};return t.filter(u=>{const _=n(u);return!Object.prototype.hasOwnProperty.call(l,_)&&(l[_]=!0)})}function Sn(t){const{mapping:n,steps:l}=t,u=[];return n.maps.forEach((_,v)=>{const M=[];if(_.ranges.length)_.forEach((S,K)=>{M.push({from:S,to:K})});else{const{from:S,to:K}=l[v];if(void 0===S||void 0===K)return;M.push({from:S,to:K})}M.forEach(({from:S,to:K})=>{const et=n.slice(v).map(S,-1),nt=n.slice(v).map(K),Et=n.invert().map(et,-1),St=n.invert().map(nt);u.push({oldRange:{from:Et,to:St},newRange:{from:et,to:nt}})})}),function(t){const n=qn(t);return 1===n.length?n:n.filter((l,u)=>!n.filter((v,M)=>M!==u).some(v=>l.oldRange.from>=v.oldRange.from&&l.oldRange.to<=v.oldRange.to&&l.newRange.from>=v.newRange.from&&l.newRange.to<=v.newRange.to))}(u)}function Ln(t,n=0){const u=t.type===t.type.schema.topNodeType?0:1,_=n,v=_+t.nodeSize,M=t.marks.map(et=>{const nt={type:et.type.name};return Object.keys(et.attrs).length&&(nt.attrs=ie({},et.attrs)),nt}),S=ie({},t.attrs),K={type:t.type.name,from:_,to:v};return Object.keys(S).length&&(K.attrs=S),M.length&&(K.marks=M),t.content.childCount&&(K.content=[],t.forEach((et,nt)=>{var Et;null==(Et=K.content)||Et.push(Ln(et,n+nt+u))})),t.text&&(K.text=t.text),K}function sn(t,n,l){const u=[];return t===n?l.resolve(t).marks().forEach(_=>{const M=L(l.resolve(t-1),_.type);!M||u.push(ie({mark:_},M))}):l.nodesBetween(t,n,(_,v)=>{u.push(..._.marks.map(M=>({from:v,to:v+_.nodeSize,mark:M})))}),u}function xn(t,n,l={}){const{empty:u,ranges:_}=t.selection,v=n?z(n,t.schema):null;if(u)return!!(t.storedMarks||t.selection.$from.marks()).filter(Et=>!v||v.name===Et.type.name).find(Et=>C(Et.attrs,l,{strict:!1}));let M=0;const S=[];if(_.forEach(({$from:Et,$to:St})=>{const Jt=Et.pos,Gt=St.pos;t.doc.nodesBetween(Jt,Gt,(oe,ce)=>{if(!oe.isText&&!oe.marks.length)return;const re=Math.max(Jt,ce),$e=Math.min(Gt,ce+oe.nodeSize);M+=$e-re,S.push(...oe.marks.map(An=>({mark:An,from:re,to:$e})))})}),0===M)return!1;const K=S.filter(Et=>!v||v.name===Et.mark.type.name).filter(Et=>C(Et.mark.attrs,l,{strict:!1})).reduce((Et,St)=>Et+St.to-St.from,0),et=S.filter(Et=>!v||Et.mark.type!==v&&Et.mark.type.excludes(v)).reduce((Et,St)=>Et+St.to-St.from,0);return(K>0?K+et:K)>=M}function en(t,n,l={}){if(!n)return Dn(t,null,l)||xn(t,null,l);const u=Mn(n,t.schema);return"node"===u?Dn(t,n,l):"mark"===u&&xn(t,n,l)}function hn(t,n){const{nodeExtensions:l}=W(n),u=l.find(M=>M.name===t);if(!u)return!1;const v=g(F(u,"group",{name:u.name,options:u.options,storage:u.storage}));return"string"==typeof v&&v.split(" ").includes("list")}function fn(t){var n;const l=null==(n=t.type.createAndFill())?void 0:n.toJSON(),u=t.toJSON();return JSON.stringify(l)===JSON.stringify(u)}function Je(t){return t instanceof T.qv}function Xe(t,n,l){const _=t.state.doc.content.size,v=lt(n,0,_),M=lt(l,0,_),S=t.coordsAtPos(v),K=t.coordsAtPos(M,-1),et=Math.min(S.top,K.top),nt=Math.max(S.bottom,K.bottom),Et=Math.min(S.left,K.left),St=Math.max(S.right,K.right),re={top:et,bottom:nt,left:Et,right:St,width:St-Et,height:nt-et,x:Et,y:et};return ye(ie({},re),{toJSON:()=>re})}var So=(t,n={})=>({tr:l,state:u,dispatch:_})=>{const{selection:v}=l,{empty:M,ranges:S}=v,K=z(t,u.schema);if(_)if(M){const et=Yn(u,K);l.addStoredMark(K.create(ie(ie({},et),n)))}else S.forEach(et=>{const nt=et.$from.pos,Et=et.$to.pos;u.doc.nodesBetween(nt,Et,(St,Jt)=>{const Gt=Math.max(Jt,nt),oe=Math.min(Jt+St.nodeSize,Et);St.marks.find(re=>re.type===K)?St.marks.forEach(re=>{K===re.type&&l.addMark(Gt,oe,K.create(ie(ie({},re.attrs),n)))}):l.addMark(Gt,oe,K.create(n))})});return function(t,n,l){var u;const{selection:_}=n;let v=null;if(q(_)&&(v=_.$cursor),v){const S=null!=(u=t.storedMarks)?u:v.marks();return!!l.isInSet(S)||!S.some(K=>K.type.excludes(l))}const{ranges:M}=_;return M.some(({$from:S,$to:K})=>{let et=0===S.depth&&t.doc.inlineContent&&t.doc.type.allowsMarkType(l);return t.doc.nodesBetween(S.pos,K.pos,(nt,Et,St)=>{if(et)return!1;if(nt.isInline){const Jt=!St||St.type.allowsMarkType(l),Gt=!!l.isInSet(nt.marks)||!nt.marks.some(oe=>oe.type.excludes(l));et=Jt&&Gt}return!et}),et})}(u,l,K)},eo=(t,n)=>({tr:l})=>(l.setMeta(t,n),!0),Io=(t,n={})=>({state:l,dispatch:u,chain:_})=>{const v=Pt(t,l.schema);return v.isTextblock?_().command(({commands:M})=>!!Ft(v,n)(l)||M.clearNodes()).command(({state:M})=>Ft(v,n)(M,u)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},no=t=>({tr:n,dispatch:l})=>{if(l){const{doc:u}=n,_=lt(t,0,u.content.size),v=T.qv.create(u,_);n.setSelection(v)}return!0},oo=t=>({tr:n,dispatch:l})=>{if(l){const{doc:u}=n,{from:_,to:v}="number"==typeof t?{from:t,to:t}:t,M=T.Bs.atStart(u).from,S=T.Bs.atEnd(u).to,K=lt(_,M,S),et=lt(v,M,S),nt=T.Bs.create(u,K,et);n.setSelection(nt)}return!0},Nn=t=>({state:n,dispatch:l})=>function(t){return function(n,l){let{$from:u,$to:_}=n.selection,v=u.blockRange(_,et=>et.childCount>0&&et.firstChild.type==t);if(!v)return!1;let M=v.startIndex;if(0==M)return!1;let S=v.parent,K=S.child(M-1);if(K.type!=t)return!1;if(l){let et=K.lastChild&&K.lastChild.type==S.type,nt=b.HY.from(et?t.create():null),Et=new b.p2(b.HY.from(t.create(null,b.HY.from(S.type.create(null,nt)))),et?3:1,0),St=v.start,Jt=v.end;l(n.tr.step(new p.FC(St-(et?3:1),Jt,St,Jt,Et,1,!0)).scrollIntoView())}return!0}}(Pt(t,n.schema))(n,l);function ln(t,n,l){return Object.fromEntries(Object.entries(l).filter(([u])=>{const _=t.find(v=>v.type===n&&v.name===u);return!!_&&_.attribute.keepOnSplit}))}function Fn(t,n){const l=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(l){const u=l.filter(_=>null==n?void 0:n.includes(_.type.name));t.tr.ensureMarks(u)}}var io=({keepMarks:t=!0}={})=>({tr:n,state:l,dispatch:u,editor:_})=>{const{selection:v,doc:M}=n,{$from:S,$to:K}=v,nt=ln(_.extensionManager.attributes,S.node().type.name,S.node().attrs);if(v instanceof T.qv&&v.node.isBlock)return!(!S.parentOffset||!(0,p.Ax)(M,S.pos)||(u&&(t&&Fn(l,_.extensionManager.splittableMarks),n.split(S.pos).scrollIntoView()),0));if(!S.parent.isBlock)return!1;if(u){const Et=K.parentOffset===K.parent.content.size;v instanceof T.Bs&&n.deleteSelection();const St=0===S.depth?void 0:kn(S.node(-1).contentMatchAt(S.indexAfter(-1)));let Jt=Et&&St?[{type:St,attrs:nt}]:void 0,Gt=(0,p.Ax)(n.doc,n.mapping.map(S.pos),1,Jt);if(!Jt&&!Gt&&(0,p.Ax)(n.doc,n.mapping.map(S.pos),1,St?[{type:St}]:void 0)&&(Gt=!0,Jt=St?[{type:St,attrs:nt}]:void 0),Gt&&(n.split(n.mapping.map(S.pos),1,Jt),St&&!Et&&!S.parentOffset&&S.parent.type!==St)){const oe=n.mapping.map(S.before()),ce=n.doc.resolve(oe);S.node(-1).canReplaceWith(ce.index(),ce.index()+1,St)&&n.setNodeMarkup(n.mapping.map(S.before()),St)}t&&Fn(l,_.extensionManager.splittableMarks),n.scrollIntoView()}return!0},jn=t=>({tr:n,state:l,dispatch:u,editor:_})=>{var v;const M=Pt(t,l.schema),{$from:S,$to:K}=l.selection,et=l.selection.node;if(et&&et.isBlock||S.depth<2||!S.sameParent(K))return!1;const nt=S.node(-1);if(nt.type!==M)return!1;const Et=_.extensionManager.attributes;if(0===S.parent.content.size&&S.node(-1).childCount===S.indexAfter(-1)){if(2===S.depth||S.node(-3).type!==M||S.index(-2)!==S.node(-2).childCount-1)return!1;if(u){let ce=b.HY.empty;const re=S.index(-1)?1:S.index(-2)?2:3;for(let Un=S.depth-re;Un>=S.depth-3;Un-=1)ce=b.HY.from(S.node(Un).copy(ce));const $e=S.indexAfter(-1)<S.node(-2).childCount?1:S.indexAfter(-2)<S.node(-3).childCount?2:3,gn=ln(Et,S.node().type.name,S.node().attrs),An=(null==(v=M.contentMatch.defaultType)?void 0:v.createAndFill(gn))||void 0;ce=ce.append(b.HY.from(M.createAndFill(null,An)||void 0));const mo=S.before(S.depth-(re-1));n.replace(mo,S.after(-$e),new b.p2(ce,4-re,0));let go=-1;n.doc.nodesBetween(mo,n.doc.content.size,(Un,Go)=>{if(go>-1)return!1;Un.isTextblock&&0===Un.content.size&&(go=Go+1)}),go>-1&&n.setSelection(T.Bs.near(n.doc.resolve(go))),n.scrollIntoView()}return!0}const St=K.pos===S.end()?nt.contentMatchAt(0).defaultType:null,Jt=ln(Et,nt.type.name,nt.attrs),Gt=ln(Et,S.node().type.name,S.node().attrs);n.delete(S.pos,K.pos);const oe=St?[{type:M,attrs:Jt},{type:St,attrs:Gt}]:[{type:M,attrs:Jt}];return!!(0,p.Ax)(n.doc,S.pos,2)&&(u&&n.split(S.pos,2,oe).scrollIntoView(),!0)},ro=(t,n)=>{const l=wn(M=>M.type===n)(t.selection);if(!l)return!0;const u=t.doc.resolve(Math.max(0,l.pos-1)).before(l.depth);if(void 0===u)return!0;const _=t.doc.nodeAt(u);return l.node.type===(null==_?void 0:_.type)&&(0,p.Mn)(t.doc,l.pos)&&t.join(l.pos),!0},so=(t,n)=>{const l=wn(M=>M.type===n)(t.selection);if(!l)return!0;const u=t.doc.resolve(l.start).after(l.depth);if(void 0===u)return!0;const _=t.doc.nodeAt(u);return l.node.type===(null==_?void 0:_.type)&&(0,p.Mn)(t.doc,u)&&t.join(u),!0},ko=(t,n)=>({editor:l,tr:u,state:_,dispatch:v,chain:M,commands:S,can:K})=>{const{extensions:et}=l.extensionManager,nt=Pt(t,_.schema),Et=Pt(n,_.schema),{selection:St}=_,{$from:Jt,$to:Gt}=St,oe=Jt.blockRange(Gt);if(!oe)return!1;const ce=wn(re=>hn(re.type.name,et))(St);if(oe.depth>=1&&ce&&oe.depth-ce.depth<=1){if(ce.node.type===nt)return S.liftListItem(Et);if(hn(ce.node.type.name,et)&&nt.validContent(ce.node.content)&&v)return M().command(()=>(u.setNodeMarkup(ce.pos,nt),!0)).command(()=>ro(u,nt)).command(()=>so(u,nt)).run()}return M().command(()=>!!K().wrapInList(nt)||S.clearNodes()).wrapInList(nt).command(()=>ro(u,nt)).command(()=>so(u,nt)).run()},wo=(t,n={},l={})=>({state:u,commands:_})=>{const{extendEmptyMarkRange:v=!1}=l,M=z(t,u.schema);return xn(u,M,n)?_.unsetMark(M,{extendEmptyMarkRange:v}):_.setMark(M,n)},lo=(t,n,l={})=>({state:u,commands:_})=>{const v=Pt(t,u.schema),M=Pt(n,u.schema);return Dn(u,v,l)?_.setNode(M):_.setNode(v,l)},ao=(t,n={})=>({state:l,commands:u})=>{const _=Pt(t,l.schema);return Dn(l,_,n)?u.lift(_):u.wrapIn(_,n)},Ro=()=>({state:t,dispatch:n})=>{const l=t.plugins;for(let u=0;u<l.length;u+=1){const _=l[u];let v;if(_.spec.isInputRules&&(v=_.getState(t))){if(n){const M=t.tr,S=v.transform;for(let K=S.steps.length-1;K>=0;K-=1)M.step(S.steps[K].invert(S.docs[K]));if(v.text){const K=M.doc.resolve(v.from).marks();M.replaceWith(v.from,v.to,t.schema.text(v.text,K))}else M.delete(v.from,v.to)}return!0}}return!1},Bo=()=>({tr:t,dispatch:n})=>{const{selection:l}=t,{empty:u,ranges:_}=l;return u||n&&_.forEach(v=>{t.removeMark(v.$from.pos,v.$to.pos)}),!0},Lo=(t,n={})=>({tr:l,state:u,dispatch:_})=>{var v;const{extendEmptyMarkRange:M=!1}=n,{selection:S}=l,K=z(t,u.schema),{$from:et,empty:nt,ranges:Et}=S;if(!_)return!0;if(nt&&M){let{from:St,to:Jt}=S;const Gt=null==(v=et.marks().find(ce=>ce.type===K))?void 0:v.attrs,oe=L(et,K,Gt);oe&&(St=oe.from,Jt=oe.to),l.removeMark(St,Jt,K)}else Et.forEach(St=>{l.removeMark(St.$from.pos,St.$to.pos,K)});return l.removeStoredMark(K),!0},No=(t,n={})=>({tr:l,state:u,dispatch:_})=>{let v=null,M=null;const S=Mn("string"==typeof t?t:t.name,u.schema);return!!S&&("node"===S&&(v=Pt(t,u.schema)),"mark"===S&&(M=z(t,u.schema)),_&&l.selection.ranges.forEach(K=>{const et=K.$from.pos,nt=K.$to.pos;u.doc.nodesBetween(et,nt,(Et,St)=>{v&&v===Et.type&&l.setNodeMarkup(St,void 0,ie(ie({},Et.attrs),n)),M&&Et.marks.length&&Et.marks.forEach(Jt=>{if(M===Jt.type){const Gt=Math.max(St,et),oe=Math.min(St+Et.nodeSize,nt);l.addMark(Gt,oe,M.create(ie(ie({},Jt.attrs),n)))}})})}),!0)},Fo=(t,n={})=>({state:l,dispatch:u})=>function(t,n=null){return function(l,u){let{$from:_,$to:v}=l.selection,M=_.blockRange(v),S=M&&(0,p.nd)(M,t,n);return!!S&&(u&&u(l.tr.wrap(M,S).scrollIntoView()),!0)}}(Pt(t,l.schema),n)(l,u),co=(t,n={})=>({state:l,dispatch:u})=>function(t,n=null){return function(l,u){let{$from:_,$to:v}=l.selection,M=_.blockRange(v),S=!1,K=M;if(!M)return!1;if(M.depth>=2&&_.node(M.depth-1).type.compatibleContent(t)&&0==M.startIndex){if(0==_.index(M.depth-1))return!1;let nt=l.doc.resolve(M.start-2);K=new b.Ts(nt,nt,M.depth),M.endIndex<M.parent.childCount&&(M=new b.Ts(_,l.doc.resolve(v.end(M.depth)),M.depth)),S=!0}let et=(0,p.nd)(K,t,n,M);return!!et&&(u&&u(function(t,n,l,u,_){let v=b.HY.empty;for(let nt=l.length-1;nt>=0;nt--)v=b.HY.from(l[nt].type.create(l[nt].attrs,v));t.step(new p.FC(n.start-(u?2:0),n.end,n.start,n.end,new b.p2(v,0,0),l.length,!0));let M=0;for(let nt=0;nt<l.length;nt++)l[nt].type==_&&(M=nt+1);let S=l.length-M,K=n.start+l.length-(u?2:0),et=n.parent;for(let nt=n.startIndex,Et=n.endIndex,St=!0;nt<Et;nt++,St=!1)!St&&(0,p.Ax)(t.doc,K,S)&&(t.split(K,S),K+=2*S),K+=et.child(nt).nodeSize;return t}(l.tr,M,et,S,t).scrollIntoView()),!0)}}(Pt(t,l.schema),n)(l,u),Ho=B.create({name:"commands",addCommands:()=>ie({},It)}),zo=B.create({name:"editable",addProseMirrorPlugins(){return[new T.Sy({key:new T.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Vn=B.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new T.Sy({key:new T.H$("focusEvents"),props:{handleDOMEvents:{focus:(n,l)=>{t.isFocused=!0;const u=t.state.tr.setMeta("focus",{event:l}).setMeta("addToHistory",!1);return n.dispatch(u),!1},blur:(n,l)=>{t.isFocused=!1;const u=t.state.tr.setMeta("blur",{event:l}).setMeta("addToHistory",!1);return n.dispatch(u),!1}}}})]}}),Uo=B.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:M})=>[()=>M.undoInputRule(),()=>M.command(({tr:S})=>{const{selection:K,doc:et}=S,{empty:nt,$anchor:Et}=K,{pos:St,parent:Jt}=Et,Gt=T.Y1.atStart(et).from===St;return!(!(nt&&Gt&&Jt.type.isTextblock)||Jt.textContent.length)&&M.clearNodes()}),()=>M.deleteSelection(),()=>M.joinBackward(),()=>M.selectNodeBackward()]),n=()=>this.editor.commands.first(({commands:M})=>[()=>M.deleteSelection(),()=>M.deleteCurrentNode(),()=>M.joinForward(),()=>M.selectNodeForward()]),u={Enter:()=>this.editor.commands.first(({commands:M})=>[()=>M.newlineInCode(),()=>M.createParagraphNear(),()=>M.liftEmptyBlock(),()=>M.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:n,"Mod-Delete":n,"Mod-a":()=>this.editor.commands.selectAll()},_=ie({},u),v=ye(ie({},u),{"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return wt()||He()?v:_},addProseMirrorPlugins(){return[new T.Sy({key:new T.H$("clearDocument"),appendTransaction:(t,n,l)=>{if(!t.some(Gt=>Gt.docChanged)||n.doc.eq(l.doc))return;const{empty:_,from:v,to:M}=n.selection,S=T.Y1.atStart(n.doc).from,K=T.Y1.atEnd(n.doc).to,et=v===S&&M===K,nt=0===l.doc.textBetween(0,l.doc.content.size," "," ").length;if(_||!et||!nt)return;const Et=l.tr,St=y({state:l,transaction:Et}),{commands:Jt}=new H({editor:this.editor,state:St});return Jt.clearNodes(),Et.steps.length?Et:void 0}})]}}),$o=B.create({name:"tabindex",addProseMirrorPlugins(){return[new T.Sy({key:new T.H$("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function Wo(t,n){const l=document.querySelector("style[data-tiptap-style]");if(null!==l)return l;const u=document.createElement("style");return n&&u.setAttribute("nonce",n),u.setAttribute("data-tiptap-style",""),u.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(u),u}var Ko=class extends class{constructor(){this.callbacks={}}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),this}emit(t,...n){const l=this.callbacks[t];return l&&l.forEach(u=>u.apply(this,n)),this}off(t,n){const l=this.callbacks[t];return l&&(n?this.callbacks[t]=l.filter(u=>u!==n):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Wo('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(t={}){this.options=ie(ie({},this.options),t),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,n=!0){this.setOptions({editable:t}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,n){const l=d(n)?n(t,[...this.state.plugins]):[...this.state.plugins,t],u=this.state.reconfigure({plugins:l});this.view.updateState(u)}unregisterPlugin(t){if(this.isDestroyed)return;const n="string"==typeof t?`${t}$`:t.key,l=this.state.reconfigure({plugins:this.state.plugins.filter(u=>!u.key.startsWith(n))});this.view.updateState(l)}createExtensionManager(){const n=[...this.options.enableCoreExtensions?Object.values(Kt):[],...this.options.extensions].filter(l=>["extension","node","mark"].includes(null==l?void 0:l.type));this.extensionManager=new Lt(n,this)}createCommandManager(){this.commandManager=new H({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=Qn(this.options.content,this.schema,this.options.parseOptions),n=kt(t,this.options.autofocus);this.view=new r.tk(this.options.element,ye(ie({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:T.yy.create({doc:t,selection:n||void 0})}));const l=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(l),this.createNodeViews(),this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(t){if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach(v=>{var M;return null==(M=this.capturedTransaction)?void 0:M.step(v)}):void(this.capturedTransaction=t);const n=this.state.apply(t),l=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),l&&this.emit("selectionUpdate",{editor:this,transaction:t});const u=t.getMeta("focus"),_=t.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:t}),_&&this.emit("blur",{editor:this,event:_.event,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return On(this.state,t)}isActive(t,n){return en(this.state,"string"==typeof t?t:null,"string"==typeof t?n:t)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Rn(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:n="\n\n",textSerializers:l={}}=t||{};return Zn(this.state.doc,{blockSeparator:n,textSerializers:ie(ie({},l),pt(this.schema))})}get isEmpty(){return fn(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(null==(t=this.view)?void 0:t.docView)}};function uo(t){return new je({find:t.find,handler:({state:n,range:l,match:u})=>{const _=g(t.getAttributes,void 0,u);if(!1===_||null===_)return null;const{tr:v}=n,M=u[u.length-1],S=u[0];let K=l.to;if(M){const et=S.search(/\S/),nt=l.from+S.indexOf(M),Et=nt+M.length;if(sn(l.from,l.to,n.doc).filter(Jt=>Jt.mark.type.excluded.find(oe=>oe===t.type&&oe!==Jt.mark.type)).filter(Jt=>Jt.to>nt).length)return null;Et<l.to&&v.delete(Et,l.to),nt>l.from&&v.delete(l.from+et,nt),K=l.from+et+M.length,v.addMark(l.from+et,K,t.type.create(_||{})),v.removeStoredMark(t.type)}}})}function po(t){return new je({find:t.find,handler:({state:n,range:l,match:u})=>{const _=g(t.getAttributes,void 0,u)||{},{tr:v}=n,M=l.from;let S=l.to;if(u[1]){let et=M+u[0].lastIndexOf(u[1]);et>S?et=S:S=et+u[1].length,v.insertText(u[0][u[0].length-1],M+u[0].length-1),v.replaceWith(et,S,t.type.create(_))}else u[0]&&v.replaceWith(M,S,t.type.create(_))}})}function ho(t){return new je({find:t.find,handler:({state:n,range:l,match:u})=>{const _=n.doc.resolve(l.from),v=g(t.getAttributes,void 0,u)||{};if(!_.node(-1).canReplaceWith(_.index(-1),_.indexAfter(-1),t.type))return null;n.tr.delete(l.from,l.to).setBlockType(l.from,l.from,t.type,v)}})}function Jo(t){return new je({find:t.find,handler:({state:n,range:l,match:u})=>{let _=t.replace,v=l.from;const M=l.to;if(u[1]){const S=u[0].lastIndexOf(u[1]);_+=u[0].slice(S+u[1].length),v+=S;const K=v-M;K>0&&(_=u[0].slice(S-K,S)+_,v=M)}n.tr.insertText(_,v,M)}})}function fo(t){return new je({find:t.find,handler:({state:n,range:l,match:u})=>{const _=g(t.getAttributes,void 0,u)||{},v=n.tr.delete(l.from,l.to),S=v.doc.resolve(l.from).blockRange(),K=S&&(0,p.nd)(S,t.type,_);if(!K)return null;v.wrap(S,K);const et=v.doc.resolve(l.from-1).nodeBefore;et&&et.type===t.type&&(0,p.Mn)(v.doc,l.from-1)&&(!t.joinPredicate||t.joinPredicate(u,et))&&v.join(l.from-1)}})}var Hn=class{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ie(ie({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=g(F(this,"addOptions",{name:this.name}))),this.storage=g(F(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Hn(t)}configure(t={}){const n=this.extend();return n.options=U(this.options,t),n.storage=g(F(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new Hn(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=g(F(n,"addOptions",{name:n.name})),n.storage=g(F(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:t,mark:n}){const{tr:l}=t.state,u=t.state.selection.$from;if(u.pos===u.end()){const v=u.marks();if(!v.find(K=>(null==K?void 0:K.type.name)===n.name))return!1;const S=v.find(K=>(null==K?void 0:K.type.name)===n.name);return S&&l.removeStoredMark(S),l.insertText(" ",u.pos),t.view.dispatch(l),!0}return!1}},zn=class{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ie(ie({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=g(F(this,"addOptions",{name:this.name}))),this.storage=g(F(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new zn(t)}configure(t={}){const n=this.extend();return n.options=U(this.options,t),n.storage=g(F(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new zn(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=g(F(n,"addOptions",{name:n.name})),n.storage=g(F(n,"addStorage",{name:n.name,options:n.options})),n}},o=class{constructor(t,n,l){this.isDragging=!1,this.component=t,this.editor=n.editor,this.options=ie({stopEvent:null,ignoreMutation:null},l),this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var n,l,u,_,v,M,S;const{view:K}=this.editor,et=t.target,nt=3===et.nodeType?null==(n=et.parentElement)?void 0:n.closest("[data-drag-handle]"):et.closest("[data-drag-handle]");if(!this.dom||(null==(l=this.contentDOM)?void 0:l.contains(et))||!nt)return;let Et=0,St=0;if(this.dom!==nt){const oe=this.dom.getBoundingClientRect(),ce=nt.getBoundingClientRect(),re=null!=(_=t.offsetX)?_:null==(u=t.nativeEvent)?void 0:u.offsetX,$e=null!=(M=t.offsetY)?M:null==(v=t.nativeEvent)?void 0:v.offsetY;Et=ce.x-oe.x+re,St=ce.y-oe.y+$e}null==(S=t.dataTransfer)||S.setDragImage(this.dom,Et,St);const Jt=T.qv.create(K.state.doc,this.getPos()),Gt=K.state.tr.setSelection(Jt);K.dispatch(Gt)}stopEvent(t){var n;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:t});const l=t.target;if(!this.dom.contains(l)||(null==(n=this.contentDOM)?void 0:n.contains(l)))return!1;const _="drop"===t.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(l.tagName)||l.isContentEditable)&&!_)return!0;const{isEditable:M}=this.editor,{isDragging:S}=this,K=!!this.node.type.spec.draggable,et=T.qv.isSelectable(this.node),nt="copy"===t.type,Et="paste"===t.type,St="cut"===t.type,Jt="mousedown"===t.type,Gt=t.type.startsWith("drag");if(!K&&et&&Gt&&t.preventDefault(),K&&Gt&&!S)return t.preventDefault(),!1;if(K&&M&&!S&&Jt){const oe=l.closest("[data-drag-handle]");oe&&(this.dom===oe||this.dom.contains(oe))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(S||_||nt||Et||St||Jt&&et)}ignoreMutation(t){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:t}):!(!this.node.isLeaf&&!this.node.isAtom&&("selection"===t.type||this.dom.contains(t.target)&&"childList"===t.type&&wt()&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(l=>l.isContentEditable)||(this.contentDOM!==t.target||"attributes"!==t.type)&&this.contentDOM.contains(t.target))))}updateAttributes(t){this.editor.commands.command(({tr:n})=>{const l=this.getPos();return n.setNodeMarkup(l,void 0,ie(ie({},this.node.attrs),t)),!0})}deleteNode(){const t=this.getPos();this.editor.commands.deleteRange({from:t,to:t+this.node.nodeSize})}};function e(t){return new on({find:t.find,handler:({state:n,range:l,match:u})=>{const _=g(t.getAttributes,void 0,u);if(!1===_||null===_)return null;const{tr:v}=n,M=u[u.length-1],S=u[0];let K=l.to;if(M){const et=S.search(/\S/),nt=l.from+S.indexOf(M),Et=nt+M.length;if(sn(l.from,l.to,n.doc).filter(Jt=>Jt.mark.type.excluded.find(oe=>oe===t.type&&oe!==Jt.mark.type)).filter(Jt=>Jt.to>nt).length)return null;Et<l.to&&v.delete(Et,l.to),nt>l.from&&v.delete(l.from+et,nt),K=l.from+et+M.length,v.addMark(l.from+et,K,t.type.create(_||{})),v.removeStoredMark(t.type)}}})}function i(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function c(t){return"string"==typeof t}function f(t){return new on({find:t.find,handler({match:n,chain:l,range:u}){const _=g(t.getAttributes,void 0,n);if(!1===_||null===_)return null;n.input&&l().deleteRange(u).insertContentAt(u.from,{type:t.type.name,attrs:_})}})}function m(t){return new on({find:t.find,handler:({state:n,range:l,match:u})=>{let _=t.replace,v=l.from;const M=l.to;if(u[1]){const S=u[0].lastIndexOf(u[1]);_+=u[0].slice(S+u[1].length),v+=S;const K=v-M;K>0&&(_=u[0].slice(S-K,S)+_,v=M)}n.tr.insertText(_,v,M)}})}var x=class{constructor(t){this.transaction=t,this.currentStep=this.transaction.steps.length}map(t){let n=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((u,_)=>{const v=_.getMap().mapResult(u);return v.deleted&&(n=!0),v.pos},t),deleted:n}}}},84402:(ee,yt,a)=>{a.r(yt),a.d(yt,{TextStyle:()=>r,default:()=>E});var T=a(12867),r=T.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:b=>!!b.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:b}){return["span",(0,T.mergeAttributes)(this.options.HTMLAttributes,b),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:b,commands:p})=>{const Y=(0,T.getMarkAttributes)(b,this.type);return!!Object.entries(Y).some(([,X])=>!!X)||p.unsetMark(this.name)}}}}),E=r},70768:(ee,yt,a)=>{a.d(yt,{$:()=>At,h:()=>Ut});for(var T={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},E="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),p=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),Y="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),R=p||E&&+E[1]<57,X=0;X<10;X++)T[48+X]=T[96+X]=String(X);for(X=1;X<=24;X++)T[X+111]="F"+X;for(X=65;X<=90;X++)T[X]=String.fromCharCode(X+32),r[X]=String.fromCharCode(X);for(var j in T)r.hasOwnProperty(j)||(r[j]=T[j]);var dt=a(62463);const tt="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function vt(_t){let Z,Ot,bt,Nt,ut=_t.split(/-(?!$)/),ht=ut[ut.length-1];"Space"==ht&&(ht=" ");for(let Ht=0;Ht<ut.length-1;Ht++){let xt=ut[Ht];if(/^(cmd|meta|m)$/i.test(xt))Nt=!0;else if(/^a(lt)?$/i.test(xt))Z=!0;else if(/^(c|ctrl|control)$/i.test(xt))Ot=!0;else if(/^s(hift)?$/i.test(xt))bt=!0;else{if(!/^mod$/i.test(xt))throw new Error("Unrecognized modifier name: "+xt);tt?Nt=!0:Ot=!0}}return Z&&(ht="Alt-"+ht),Ot&&(ht="Ctrl-"+ht),Nt&&(ht="Meta-"+ht),bt&&(ht="Shift-"+ht),ht}function Tt(_t,ut,ht){return ut.altKey&&(_t="Alt-"+_t),ut.ctrlKey&&(_t="Ctrl-"+_t),ut.metaKey&&(_t="Meta-"+_t),!1!==ht&&ut.shiftKey&&(_t="Shift-"+_t),_t}function Ut(_t){return new dt.Sy({props:{handleKeyDown:At(_t)}})}function At(_t){let ut=function(_t){let ut=Object.create(null);for(let ht in _t)ut[vt(ht)]=_t[ht];return ut}(_t);return function(ht,Z){let Nt,Ot=function(_t){var ht=!(R&&(_t.ctrlKey||_t.altKey||_t.metaKey)||Y&&_t.shiftKey&&_t.key&&1==_t.key.length||"Unidentified"==_t.key)&&_t.key||(_t.shiftKey?r:T)[_t.keyCode]||_t.key||"Unidentified";return"Esc"==ht&&(ht="Escape"),"Del"==ht&&(ht="Delete"),"Left"==ht&&(ht="ArrowLeft"),"Up"==ht&&(ht="ArrowUp"),"Right"==ht&&(ht="ArrowRight"),"Down"==ht&&(ht="ArrowDown"),ht}(Z),bt=1==Ot.length&&" "!=Ot,Ht=ut[Tt(Ot,Z,!bt)];if(Ht&&Ht(ht.state,ht.dispatch,ht))return!0;if(bt&&(Z.shiftKey||Z.altKey||Z.metaKey||Ot.charCodeAt(0)>127)&&(Nt=T[Z.keyCode])&&Nt!=Ot){let xt=ut[Tt(Nt,Z,!0)];if(xt&&xt(ht.state,ht.dispatch,ht))return!0}else if(bt&&Z.shiftKey){let xt=ut[Tt(Ot,Z,!0)];if(xt&&xt(ht.state,ht.dispatch,ht))return!0}return!1}}},77346:(ee,yt,a)=>{function T(N){this.content=N}a.d(yt,{aw:()=>Le,PW:()=>W,HY:()=>p,vc:()=>j,ZU:()=>Re,NB:()=>ft,Ts:()=>Yt,e4:()=>Ct,V_:()=>Be,p2:()=>dt}),T.prototype={constructor:T,find:function(N){for(var s=0;s<this.content.length;s+=2)if(this.content[s]===N)return s;return-1},get:function(N){var s=this.find(N);return-1==s?void 0:this.content[s+1]},update:function(N,s,d){var g=d&&d!=N?this.remove(d):this,A=g.find(N),I=g.content.slice();return-1==A?I.push(d||N,s):(I[A+1]=s,d&&(I[A]=d)),new T(I)},remove:function(N){var s=this.find(N);if(-1==s)return this;var d=this.content.slice();return d.splice(s,2),new T(d)},addToStart:function(N,s){return new T([N,s].concat(this.remove(N).content))},addToEnd:function(N,s){var d=this.remove(N).content.slice();return d.push(N,s),new T(d)},addBefore:function(N,s,d){var g=this.remove(s),A=g.content.slice(),I=g.find(N);return A.splice(-1==I?A.length:I,0,s,d),new T(A)},forEach:function(N){for(var s=0;s<this.content.length;s+=2)N(this.content[s],this.content[s+1])},prepend:function(N){return(N=T.from(N)).size?new T(N.content.concat(this.subtract(N).content)):this},append:function(N){return(N=T.from(N)).size?new T(this.subtract(N).content.concat(N.content)):this},subtract:function(N){var s=this;N=T.from(N);for(var d=0;d<N.content.length;d+=2)s=s.remove(N.content[d]);return s},toObject:function(){var N={};return this.forEach(function(s,d){N[s]=d}),N},get size(){return this.content.length>>1}},T.from=function(N){if(N instanceof T)return N;var s=[];if(N)for(var d in N)s.push(d,N[d]);return new T(s)};const r=T;function E(N,s,d){for(let g=0;;g++){if(g==N.childCount||g==s.childCount)return N.childCount==s.childCount?null:d;let A=N.child(g),I=s.child(g);if(A!=I){if(!A.sameMarkup(I))return d;if(A.isText&&A.text!=I.text){for(let $=0;A.text[$]==I.text[$];$++)d++;return d}if(A.content.size||I.content.size){let $=E(A.content,I.content,d+1);if(null!=$)return $}d+=A.nodeSize}else d+=A.nodeSize}}function b(N,s,d,g){for(let A=N.childCount,I=s.childCount;;){if(0==A||0==I)return A==I?null:{a:d,b:g};let $=N.child(--A),it=s.child(--I),zt=$.nodeSize;if($!=it){if(!$.sameMarkup(it))return{a:d,b:g};if($.isText&&$.text!=it.text){let ae=0,ue=Math.min($.text.length,it.text.length);for(;ae<ue&&$.text[$.text.length-ae-1]==it.text[it.text.length-ae-1];)ae++,d--,g--;return{a:d,b:g}}if($.content.size||it.content.size){let ae=b($.content,it.content,d-1,g-1);if(ae)return ae}d-=zt,g-=zt}else d-=zt,g-=zt}}class p{constructor(s,d){if(this.content=s,this.size=d||0,null==d)for(let g=0;g<s.length;g++)this.size+=s[g].nodeSize}nodesBetween(s,d,g,A=0,I){for(let $=0,it=0;it<d;$++){let zt=this.content[$],ae=it+zt.nodeSize;if(ae>s&&!1!==g(zt,A+it,I||null,$)&&zt.content.size){let ue=it+1;zt.nodesBetween(Math.max(0,s-ue),Math.min(zt.content.size,d-ue),g,A+ue)}it=ae}}descendants(s){this.nodesBetween(0,this.size,s)}textBetween(s,d,g,A){let I="",$=!0;return this.nodesBetween(s,d,(it,zt)=>{it.isText?(I+=it.text.slice(Math.max(s,zt)-zt,d-zt),$=!g):it.isLeaf?(A?I+="function"==typeof A?A(it):A:it.type.spec.leafText&&(I+=it.type.spec.leafText(it)),$=!g):!$&&it.isBlock&&(I+=g,$=!0)},0),I}append(s){if(!s.size)return this;if(!this.size)return s;let d=this.lastChild,g=s.firstChild,A=this.content.slice(),I=0;for(d.isText&&d.sameMarkup(g)&&(A[A.length-1]=d.withText(d.text+g.text),I=1);I<s.content.length;I++)A.push(s.content[I]);return new p(A,this.size+s.size)}cut(s,d=this.size){if(0==s&&d==this.size)return this;let g=[],A=0;if(d>s)for(let I=0,$=0;$<d;I++){let it=this.content[I],zt=$+it.nodeSize;zt>s&&(($<s||zt>d)&&(it=it.isText?it.cut(Math.max(0,s-$),Math.min(it.text.length,d-$)):it.cut(Math.max(0,s-$-1),Math.min(it.content.size,d-$-1))),g.push(it),A+=it.nodeSize),$=zt}return new p(g,A)}cutByIndex(s,d){return s==d?p.empty:0==s&&d==this.content.length?this:new p(this.content.slice(s,d))}replaceChild(s,d){let g=this.content[s];if(g==d)return this;let A=this.content.slice(),I=this.size+d.nodeSize-g.nodeSize;return A[s]=d,new p(A,I)}addToStart(s){return new p([s].concat(this.content),this.size+s.nodeSize)}addToEnd(s){return new p(this.content.concat(s),this.size+s.nodeSize)}eq(s){if(this.content.length!=s.content.length)return!1;for(let d=0;d<this.content.length;d++)if(!this.content[d].eq(s.content[d]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(s){let d=this.content[s];if(!d)throw new RangeError("Index "+s+" out of range for "+this);return d}maybeChild(s){return this.content[s]||null}forEach(s){for(let d=0,g=0;d<this.content.length;d++){let A=this.content[d];s(A,g,d),g+=A.nodeSize}}findDiffStart(s,d=0){return E(this,s,d)}findDiffEnd(s,d=this.size,g=s.size){return b(this,s,d,g)}findIndex(s,d=-1){if(0==s)return R(0,s);if(s==this.size)return R(this.content.length,s);if(s>this.size||s<0)throw new RangeError(`Position ${s} outside of fragment (${this})`);for(let g=0,A=0;;g++){let $=A+this.child(g).nodeSize;if($>=s)return $==s||d>0?R(g+1,$):R(g,A);A=$}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(s=>s.toJSON()):null}static fromJSON(s,d){if(!d)return p.empty;if(!Array.isArray(d))throw new RangeError("Invalid input for Fragment.fromJSON");return new p(d.map(s.nodeFromJSON))}static fromArray(s){if(!s.length)return p.empty;let d,g=0;for(let A=0;A<s.length;A++){let I=s[A];g+=I.nodeSize,A&&I.isText&&s[A-1].sameMarkup(I)?(d||(d=s.slice(0,A)),d[d.length-1]=I.withText(d[d.length-1].text+I.text)):d&&d.push(I)}return new p(d||s,g)}static from(s){if(!s)return p.empty;if(s instanceof p)return s;if(Array.isArray(s))return this.fromArray(s);if(s.attrs)return new p([s],s.nodeSize);throw new RangeError("Can not convert "+s+" to a Fragment"+(s.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}p.empty=new p([],0);const Y={index:0,offset:0};function R(N,s){return Y.index=N,Y.offset=s,Y}function X(N,s){if(N===s)return!0;if(!N||"object"!=typeof N||!s||"object"!=typeof s)return!1;let d=Array.isArray(N);if(Array.isArray(s)!=d)return!1;if(d){if(N.length!=s.length)return!1;for(let g=0;g<N.length;g++)if(!X(N[g],s[g]))return!1}else{for(let g in N)if(!(g in s)||!X(N[g],s[g]))return!1;for(let g in s)if(!(g in N))return!1}return!0}let j=(()=>{class N{constructor(d,g){this.type=d,this.attrs=g}addToSet(d){let g,A=!1;for(let I=0;I<d.length;I++){let $=d[I];if(this.eq($))return d;if(this.type.excludes($.type))g||(g=d.slice(0,I));else{if($.type.excludes(this.type))return d;!A&&$.type.rank>this.type.rank&&(g||(g=d.slice(0,I)),g.push(this),A=!0),g&&g.push($)}}return g||(g=d.slice()),A||g.push(this),g}removeFromSet(d){for(let g=0;g<d.length;g++)if(this.eq(d[g]))return d.slice(0,g).concat(d.slice(g+1));return d}isInSet(d){for(let g=0;g<d.length;g++)if(this.eq(d[g]))return!0;return!1}eq(d){return this==d||this.type==d.type&&X(this.attrs,d.attrs)}toJSON(){let d={type:this.type.name};for(let g in this.attrs){d.attrs=this.attrs;break}return d}static fromJSON(d,g){if(!g)throw new RangeError("Invalid input for Mark.fromJSON");let A=d.marks[g.type];if(!A)throw new RangeError(`There is no mark type ${g.type} in this schema`);return A.create(g.attrs)}static sameSet(d,g){if(d==g)return!0;if(d.length!=g.length)return!1;for(let A=0;A<d.length;A++)if(!d[A].eq(g[A]))return!1;return!0}static setFrom(d){if(!d||Array.isArray(d)&&0==d.length)return N.none;if(d instanceof N)return[d];let g=d.slice();return g.sort((A,I)=>A.type.rank-I.type.rank),g}}return N.none=[],N})();class Ct extends Error{}class dt{constructor(s,d,g){this.content=s,this.openStart=d,this.openEnd=g}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(s,d){let g=vt(this.content,s+this.openStart,d);return g&&new dt(g,this.openStart,this.openEnd)}removeBetween(s,d){return new dt(tt(this.content,s+this.openStart,d+this.openStart),this.openStart,this.openEnd)}eq(s){return this.content.eq(s.content)&&this.openStart==s.openStart&&this.openEnd==s.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let s={content:this.content.toJSON()};return this.openStart>0&&(s.openStart=this.openStart),this.openEnd>0&&(s.openEnd=this.openEnd),s}static fromJSON(s,d){if(!d)return dt.empty;let g=d.openStart||0,A=d.openEnd||0;if("number"!=typeof g||"number"!=typeof A)throw new RangeError("Invalid input for Slice.fromJSON");return new dt(p.fromJSON(s,d.content),g,A)}static maxOpen(s,d=!0){let g=0,A=0;for(let I=s.firstChild;I&&!I.isLeaf&&(d||!I.type.spec.isolating);I=I.firstChild)g++;for(let I=s.lastChild;I&&!I.isLeaf&&(d||!I.type.spec.isolating);I=I.lastChild)A++;return new dt(s,g,A)}}function tt(N,s,d){let{index:g,offset:A}=N.findIndex(s),I=N.maybeChild(g),{index:$,offset:it}=N.findIndex(d);if(A==s||I.isText){if(it!=d&&!N.child($).isText)throw new RangeError("Removing non-flat range");return N.cut(0,s).append(N.cut(d))}if(g!=$)throw new RangeError("Removing non-flat range");return N.replaceChild(g,I.copy(tt(I.content,s-A-1,d-A-1)))}function vt(N,s,d,g){let{index:A,offset:I}=N.findIndex(s),$=N.maybeChild(A);if(I==s||$.isText)return g&&!g.canReplace(A,A,d)?null:N.cut(0,s).append(d).append(N.cut(s));let it=vt($.content,s-I-1,d);return it&&N.replaceChild(A,$.copy(it))}function gt(N,s,d){if(d.openStart>N.depth)throw new Ct("Inserted content deeper than insertion position");if(N.depth-d.openStart!=s.depth-d.openEnd)throw new Ct("Inconsistent open depths");return Tt(N,s,d,0)}function Tt(N,s,d,g){let A=N.index(g),I=N.node(g);if(A==s.index(g)&&g<N.depth-d.openStart){let $=Tt(N,s,d,g+1);return I.copy(I.content.replaceChild(A,$))}if(d.content.size){if(d.openStart||d.openEnd||N.depth!=g||s.depth!=g){let{start:$,end:it}=function(N,s){let d=s.depth-N.openStart,A=s.node(d).copy(N.content);for(let I=d-1;I>=0;I--)A=s.node(I).copy(p.from(A));return{start:A.resolveNoCache(N.openStart+d),end:A.resolveNoCache(A.content.size-N.openEnd-d)}}(d,N);return ht(I,Z(N,$,it,s,g))}{let $=N.parent,it=$.content;return ht($,it.cut(0,N.parentOffset).append(d.content).append(it.cut(s.parentOffset)))}}return ht(I,Ot(N,s,g))}function Ut(N,s){if(!s.type.compatibleContent(N.type))throw new Ct("Cannot join "+s.type.name+" onto "+N.type.name)}function At(N,s,d){let g=N.node(d);return Ut(g,s.node(d)),g}function _t(N,s){let d=s.length-1;d>=0&&N.isText&&N.sameMarkup(s[d])?s[d]=N.withText(s[d].text+N.text):s.push(N)}function ut(N,s,d,g){let A=(s||N).node(d),I=0,$=s?s.index(d):A.childCount;N&&(I=N.index(d),N.depth>d?I++:N.textOffset&&(_t(N.nodeAfter,g),I++));for(let it=I;it<$;it++)_t(A.child(it),g);s&&s.depth==d&&s.textOffset&&_t(s.nodeBefore,g)}function ht(N,s){return N.type.checkContent(s),N.copy(s)}function Z(N,s,d,g,A){let I=N.depth>A&&At(N,s,A+1),$=g.depth>A&&At(d,g,A+1),it=[];return ut(null,N,A,it),I&&$&&s.index(A)==d.index(A)?(Ut(I,$),_t(ht(I,Z(N,s,d,g,A+1)),it)):(I&&_t(ht(I,Ot(N,s,A+1)),it),ut(s,d,A,it),$&&_t(ht($,Ot(d,g,A+1)),it)),ut(g,null,A,it),new p(it)}function Ot(N,s,d){let g=[];return ut(null,N,d,g),N.depth>d&&_t(ht(At(N,s,d+1),Ot(N,s,d+1)),g),ut(s,null,d,g),new p(g)}dt.empty=new dt(p.empty,0,0);class Nt{constructor(s,d,g){this.pos=s,this.path=d,this.parentOffset=g,this.depth=d.length/3-1}resolveDepth(s){return null==s?this.depth:s<0?this.depth+s:s}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(s){return this.path[3*this.resolveDepth(s)]}index(s){return this.path[3*this.resolveDepth(s)+1]}indexAfter(s){return s=this.resolveDepth(s),this.index(s)+(s!=this.depth||this.textOffset?1:0)}start(s){return 0==(s=this.resolveDepth(s))?0:this.path[3*s-1]+1}end(s){return s=this.resolveDepth(s),this.start(s)+this.node(s).content.size}before(s){if(!(s=this.resolveDepth(s)))throw new RangeError("There is no position before the top-level node");return s==this.depth+1?this.pos:this.path[3*s-1]}after(s){if(!(s=this.resolveDepth(s)))throw new RangeError("There is no position after the top-level node");return s==this.depth+1?this.pos:this.path[3*s-1]+this.path[3*s].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let s=this.parent,d=this.index(this.depth);if(d==s.childCount)return null;let g=this.pos-this.path[this.path.length-1],A=s.child(d);return g?s.child(d).cut(g):A}get nodeBefore(){let s=this.index(this.depth),d=this.pos-this.path[this.path.length-1];return d?this.parent.child(s).cut(0,d):0==s?null:this.parent.child(s-1)}posAtIndex(s,d){d=this.resolveDepth(d);let g=this.path[3*d],A=0==d?0:this.path[3*d-1]+1;for(let I=0;I<s;I++)A+=g.child(I).nodeSize;return A}marks(){let s=this.parent,d=this.index();if(0==s.content.size)return j.none;if(this.textOffset)return s.child(d).marks;let g=s.maybeChild(d-1),A=s.maybeChild(d);if(!g){let it=g;g=A,A=it}let I=g.marks;for(var $=0;$<I.length;$++)!1===I[$].type.spec.inclusive&&(!A||!I[$].isInSet(A.marks))&&(I=I[$--].removeFromSet(I));return I}marksAcross(s){let d=this.parent.maybeChild(this.index());if(!d||!d.isInline)return null;let g=d.marks,A=s.parent.maybeChild(s.index());for(var I=0;I<g.length;I++)!1===g[I].type.spec.inclusive&&(!A||!g[I].isInSet(A.marks))&&(g=g[I--].removeFromSet(g));return g}sharedDepth(s){for(let d=this.depth;d>0;d--)if(this.start(d)<=s&&this.end(d)>=s)return d;return 0}blockRange(s=this,d){if(s.pos<this.pos)return s.blockRange(this);for(let g=this.depth-(this.parent.inlineContent||this.pos==s.pos?1:0);g>=0;g--)if(s.pos<=this.end(g)&&(!d||d(this.node(g))))return new Yt(this,s,g);return null}sameParent(s){return this.pos-this.parentOffset==s.pos-s.parentOffset}max(s){return s.pos>this.pos?s:this}min(s){return s.pos<this.pos?s:this}toString(){let s="";for(let d=1;d<=this.depth;d++)s+=(s?"/":"")+this.node(d).type.name+"_"+this.index(d-1);return s+":"+this.parentOffset}static resolve(s,d){if(!(d>=0&&d<=s.content.size))throw new RangeError("Position "+d+" out of range");let g=[],A=0,I=d;for(let $=s;;){let{index:it,offset:zt}=$.content.findIndex(I),ae=I-zt;if(g.push($,it,A+zt),!ae||($=$.child(it),$.isText))break;I=ae-1,A+=zt+1}return new Nt(d,g,I)}static resolveCached(s,d){for(let A=0;A<Ht.length;A++){let I=Ht[A];if(I.pos==d&&I.doc==s)return I}let g=Ht[xt]=Nt.resolve(s,d);return xt=(xt+1)%Wt,g}}let Ht=[],xt=0,Wt=12;class Yt{constructor(s,d,g){this.$from=s,this.$to=d,this.depth=g}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const qt=Object.create(null);class ft{constructor(s,d,g,A=j.none){this.type=s,this.attrs=d,this.marks=A,this.content=g||p.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(s){return this.content.child(s)}maybeChild(s){return this.content.maybeChild(s)}forEach(s){this.content.forEach(s)}nodesBetween(s,d,g,A=0){this.content.nodesBetween(s,d,g,A,this)}descendants(s){this.nodesBetween(0,this.content.size,s)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(s,d,g,A){return this.content.textBetween(s,d,g,A)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(s){return this==s||this.sameMarkup(s)&&this.content.eq(s.content)}sameMarkup(s){return this.hasMarkup(s.type,s.attrs,s.marks)}hasMarkup(s,d,g){return this.type==s&&X(this.attrs,d||s.defaultAttrs||qt)&&j.sameSet(this.marks,g||j.none)}copy(s=null){return s==this.content?this:new ft(this.type,this.attrs,s,this.marks)}mark(s){return s==this.marks?this:new ft(this.type,this.attrs,this.content,s)}cut(s,d=this.content.size){return 0==s&&d==this.content.size?this:this.copy(this.content.cut(s,d))}slice(s,d=this.content.size,g=!1){if(s==d)return dt.empty;let A=this.resolve(s),I=this.resolve(d),$=g?0:A.sharedDepth(d),it=A.start($),ae=A.node($).content.cut(A.pos-it,I.pos-it);return new dt(ae,A.depth-$,I.depth-$)}replace(s,d,g){return gt(this.resolve(s),this.resolve(d),g)}nodeAt(s){for(let d=this;;){let{index:g,offset:A}=d.content.findIndex(s);if(d=d.maybeChild(g),!d)return null;if(A==s||d.isText)return d;s-=A+1}}childAfter(s){let{index:d,offset:g}=this.content.findIndex(s);return{node:this.content.maybeChild(d),index:d,offset:g}}childBefore(s){if(0==s)return{node:null,index:0,offset:0};let{index:d,offset:g}=this.content.findIndex(s);if(g<s)return{node:this.content.child(d),index:d,offset:g};let A=this.content.child(d-1);return{node:A,index:d-1,offset:g-A.nodeSize}}resolve(s){return Nt.resolveCached(this,s)}resolveNoCache(s){return Nt.resolve(this,s)}rangeHasMark(s,d,g){let A=!1;return d>s&&this.nodesBetween(s,d,I=>(g.isInSet(I.marks)&&(A=!0),!A)),A}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let s=this.type.name;return this.content.size&&(s+="("+this.content.toStringInner()+")"),st(this.marks,s)}contentMatchAt(s){let d=this.type.contentMatch.matchFragment(this.content,0,s);if(!d)throw new Error("Called contentMatchAt on a node with invalid content");return d}canReplace(s,d,g=p.empty,A=0,I=g.childCount){let $=this.contentMatchAt(s).matchFragment(g,A,I),it=$&&$.matchFragment(this.content,d);if(!it||!it.validEnd)return!1;for(let zt=A;zt<I;zt++)if(!this.type.allowsMarks(g.child(zt).marks))return!1;return!0}canReplaceWith(s,d,g,A){if(A&&!this.type.allowsMarks(A))return!1;let I=this.contentMatchAt(s).matchType(g),$=I&&I.matchFragment(this.content,d);return!!$&&$.validEnd}canAppend(s){return s.content.size?this.canReplace(this.childCount,this.childCount,s.content):this.type.compatibleContent(s.type)}check(){this.type.checkContent(this.content);let s=j.none;for(let d=0;d<this.marks.length;d++)s=this.marks[d].addToSet(s);if(!j.sameSet(s,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(d=>d.type.name)}`);this.content.forEach(d=>d.check())}toJSON(){let s={type:this.type.name};for(let d in this.attrs){s.attrs=this.attrs;break}return this.content.size&&(s.content=this.content.toJSON()),this.marks.length&&(s.marks=this.marks.map(d=>d.toJSON())),s}static fromJSON(s,d){if(!d)throw new RangeError("Invalid input for Node.fromJSON");let g=null;if(d.marks){if(!Array.isArray(d.marks))throw new RangeError("Invalid mark data for Node.fromJSON");g=d.marks.map(s.markFromJSON)}if("text"==d.type){if("string"!=typeof d.text)throw new RangeError("Invalid text node in JSON");return s.text(d.text,g)}let A=p.fromJSON(s,d.content);return s.nodeType(d.type).create(d.attrs,A,g)}}ft.prototype.text=void 0;class k extends ft{constructor(s,d,g,A){if(super(s,d,null,A),!g)throw new RangeError("Empty text nodes are not allowed");this.text=g}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):st(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(s,d){return this.text.slice(s,d)}get nodeSize(){return this.text.length}mark(s){return s==this.marks?this:new k(this.type,this.attrs,this.text,s)}withText(s){return s==this.text?this:new k(this.type,this.attrs,s,this.marks)}cut(s=0,d=this.text.length){return 0==s&&d==this.text.length?this:this.withText(this.text.slice(s,d))}eq(s){return this.sameMarkup(s)&&this.text==s.text}toJSON(){let s=super.toJSON();return s.text=this.text,s}}function st(N,s){for(let d=N.length-1;d>=0;d--)s=N[d].type.name+"("+s+")";return s}class ot{constructor(s){this.validEnd=s,this.next=[],this.wrapCache=[]}static parse(s,d){let g=new at(s,d);if(null==g.next)return ot.empty;let A=J(g);g.next&&g.err("Unexpected trailing text");let I=function(N){let s=Object.create(null);return function d(g){let A=[];g.forEach($=>{N[$].forEach(({term:it,to:zt})=>{if(!it)return;let ae;for(let ue=0;ue<A.length;ue++)A[ue][0]==it&&(ae=A[ue][1]);xe(N,zt).forEach(ue=>{ae||A.push([it,ae=[]]),-1==ae.indexOf(ue)&&ae.push(ue)})})});let I=s[g.join(",")]=new ot(g.indexOf(N.length-1)>-1);for(let $=0;$<A.length;$++){let it=A[$][1].sort(Ee);I.next.push({type:A[$][0],next:s[it.join(",")]||d(it)})}return I}(xe(N,0))}(function(N){let s=[[]];return A(function I($,it){if("choice"==$.type)return $.exprs.reduce((zt,ae)=>zt.concat(I(ae,it)),[]);if("seq"!=$.type){if("star"==$.type){let zt=d();return g(it,zt),A(I($.expr,zt),zt),[g(zt)]}if("plus"==$.type){let zt=d();return A(I($.expr,it),zt),A(I($.expr,zt),zt),[g(zt)]}if("opt"==$.type)return[g(it)].concat(I($.expr,it));if("range"==$.type){let zt=it;for(let ae=0;ae<$.min;ae++){let ue=d();A(I($.expr,zt),ue),zt=ue}if(-1==$.max)A(I($.expr,zt),zt);else for(let ae=$.min;ae<$.max;ae++){let ue=d();g(zt,ue),A(I($.expr,zt),ue),zt=ue}return[g(zt)]}if("name"==$.type)return[g(it,void 0,$.value)];throw new Error("Unknown expr type")}for(let zt=0;;zt++){let ae=I($.exprs[zt],it);if(zt==$.exprs.length-1)return ae;A(ae,it=d())}}(N,0),d()),s;function d(){return s.push([])-1}function g($,it,zt){let ae={term:zt,to:it};return s[$].push(ae),ae}function A($,it){$.forEach(zt=>zt.to=it)}}(A));return function(N,s){for(let d=0,g=[N];d<g.length;d++){let A=g[d],I=!A.validEnd,$=[];for(let it=0;it<A.next.length;it++){let{type:zt,next:ae}=A.next[it];$.push(zt.name),I&&!(zt.isText||zt.hasRequiredAttrs())&&(I=!1),-1==g.indexOf(ae)&&g.push(ae)}I&&s.err("Only non-generatable nodes ("+$.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(I,g),I}matchType(s){for(let d=0;d<this.next.length;d++)if(this.next[d].type==s)return this.next[d].next;return null}matchFragment(s,d=0,g=s.childCount){let A=this;for(let I=d;A&&I<g;I++)A=A.matchType(s.child(I).type);return A}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let s=0;s<this.next.length;s++){let{type:d}=this.next[s];if(!d.isText&&!d.hasRequiredAttrs())return d}return null}compatible(s){for(let d=0;d<this.next.length;d++)for(let g=0;g<s.next.length;g++)if(this.next[d].type==s.next[g].type)return!0;return!1}fillBefore(s,d=!1,g=0){let A=[this];return function I($,it){let zt=$.matchFragment(s,g);if(zt&&(!d||zt.validEnd))return p.from(it.map(ae=>ae.createAndFill()));for(let ae=0;ae<$.next.length;ae++){let{type:ue,next:We}=$.next[ae];if(!ue.isText&&!ue.hasRequiredAttrs()&&-1==A.indexOf(We)){A.push(We);let Ye=I(We,it.concat(ue));if(Ye)return Ye}}return null}(this,[])}findWrapping(s){for(let g=0;g<this.wrapCache.length;g+=2)if(this.wrapCache[g]==s)return this.wrapCache[g+1];let d=this.computeWrapping(s);return this.wrapCache.push(s,d),d}computeWrapping(s){let d=Object.create(null),g=[{match:this,type:null,via:null}];for(;g.length;){let A=g.shift(),I=A.match;if(I.matchType(s)){let $=[];for(let it=A;it.type;it=it.via)$.push(it.type);return $.reverse()}for(let $=0;$<I.next.length;$++){let{type:it,next:zt}=I.next[$];!it.isLeaf&&!it.hasRequiredAttrs()&&!(it.name in d)&&(!A.type||zt.validEnd)&&(g.push({match:it.contentMatch,type:it,via:A}),d[it.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(s){if(s>=this.next.length)throw new RangeError(`There's no ${s}th edge in this content match`);return this.next[s]}toString(){let s=[];return function d(g){s.push(g);for(let A=0;A<g.next.length;A++)-1==s.indexOf(g.next[A].next)&&d(g.next[A].next)}(this),s.map((g,A)=>{let I=A+(g.validEnd?"*":" ")+" ";for(let $=0;$<g.next.length;$++)I+=($?", ":"")+g.next[$].type.name+"->"+s.indexOf(g.next[$].next);return I}).join("\n")}}ot.empty=new ot(!0);class at{constructor(s,d){this.string=s,this.nodeTypes=d,this.inline=null,this.pos=0,this.tokens=s.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(s){return this.next==s&&(this.pos++||!0)}err(s){throw new SyntaxError(s+" (in content expression '"+this.string+"')")}}function J(N){let s=[];do{s.push(V(N))}while(N.eat("|"));return 1==s.length?s[0]:{type:"choice",exprs:s}}function V(N){let s=[];do{s.push(rt(N))}while(N.next&&")"!=N.next&&"|"!=N.next);return 1==s.length?s[0]:{type:"seq",exprs:s}}function rt(N){let s=function(N){if(N.eat("(")){let s=J(N);return N.eat(")")||N.err("Missing closing paren"),s}if(!/\W/.test(N.next)){let s=function(N,s){let d=N.nodeTypes,g=d[s];if(g)return[g];let A=[];for(let I in d){let $=d[I];$.groups.indexOf(s)>-1&&A.push($)}return 0==A.length&&N.err("No node type or group '"+s+"' found"),A}(N,N.next).map(d=>(null==N.inline?N.inline=d.isInline:N.inline!=d.isInline&&N.err("Mixing inline and block content"),{type:"name",value:d}));return N.pos++,1==s.length?s[0]:{type:"choice",exprs:s}}N.err("Unexpected token '"+N.next+"'")}(N);for(;;)if(N.eat("+"))s={type:"plus",expr:s};else if(N.eat("*"))s={type:"star",expr:s};else if(N.eat("?"))s={type:"opt",expr:s};else{if(!N.eat("{"))break;s=Vt(N,s)}return s}function Ft(N){/\D/.test(N.next)&&N.err("Expected number, got '"+N.next+"'");let s=Number(N.next);return N.pos++,s}function Vt(N,s){let d=Ft(N),g=d;return N.eat(",")&&(g="}"!=N.next?Ft(N):-1),N.eat("}")||N.err("Unclosed braced range"),{type:"range",min:d,max:g,expr:s}}function Ee(N,s){return s-N}function xe(N,s){let d=[];return function g(A){let I=N[A];if(1==I.length&&!I[0].term)return g(I[0].to);d.push(A);for(let $=0;$<I.length;$++){let{term:it,to:zt}=I[$];!it&&-1==d.indexOf(zt)&&g(zt)}}(s),d.sort(Ee)}function Ke(N){let s=Object.create(null);for(let d in N){let g=N[d];if(!g.hasDefault)return null;s[d]=g.default}return s}function Ve(N,s){let d=Object.create(null);for(let g in N){let A=s&&s[g];if(void 0===A){let I=N[g];if(!I.hasDefault)throw new RangeError("No value supplied for attribute "+g);A=I.default}d[g]=A}return d}function Se(N){let s=Object.create(null);if(N)for(let d in N)s[d]=new Ne(N[d]);return s}class Te{constructor(s,d,g){this.name=s,this.schema=d,this.spec=g,this.markSet=null,this.groups=g.group?g.group.split(" "):[],this.attrs=Se(g.attrs),this.defaultAttrs=Ke(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(g.inline||"text"==s),this.isText="text"==s}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ot.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let s in this.attrs)if(this.attrs[s].isRequired)return!0;return!1}compatibleContent(s){return this==s||this.contentMatch.compatible(s.contentMatch)}computeAttrs(s){return!s&&this.defaultAttrs?this.defaultAttrs:Ve(this.attrs,s)}create(s=null,d,g){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ft(this,this.computeAttrs(s),p.from(d),j.setFrom(g))}createChecked(s=null,d,g){return d=p.from(d),this.checkContent(d),new ft(this,this.computeAttrs(s),d,j.setFrom(g))}createAndFill(s=null,d,g){if(s=this.computeAttrs(s),(d=p.from(d)).size){let $=this.contentMatch.fillBefore(d);if(!$)return null;d=$.append(d)}let A=this.contentMatch.matchFragment(d),I=A&&A.fillBefore(p.empty,!0);return I?new ft(this,s,d.append(I),j.setFrom(g)):null}validContent(s){let d=this.contentMatch.matchFragment(s);if(!d||!d.validEnd)return!1;for(let g=0;g<s.childCount;g++)if(!this.allowsMarks(s.child(g).marks))return!1;return!0}checkContent(s){if(!this.validContent(s))throw new RangeError(`Invalid content for node ${this.name}: ${s.toString().slice(0,50)}`)}allowsMarkType(s){return null==this.markSet||this.markSet.indexOf(s)>-1}allowsMarks(s){if(null==this.markSet)return!0;for(let d=0;d<s.length;d++)if(!this.allowsMarkType(s[d].type))return!1;return!0}allowedMarks(s){if(null==this.markSet)return s;let d;for(let g=0;g<s.length;g++)this.allowsMarkType(s[g].type)?d&&d.push(s[g]):d||(d=s.slice(0,g));return d?d.length?d:j.none:s}static compile(s,d){let g=Object.create(null);s.forEach((I,$)=>g[I]=new Te(I,d,$));let A=d.spec.topNode||"doc";if(!g[A])throw new RangeError("Schema is missing its top node type ('"+A+"')");if(!g.text)throw new RangeError("Every schema needs a 'text' type");for(let I in g.text.attrs)throw new RangeError("The text node type should not have attributes");return g}}class Ne{constructor(s){this.hasDefault=Object.prototype.hasOwnProperty.call(s,"default"),this.default=s.default}get isRequired(){return!this.hasDefault}}class Re{constructor(s,d,g,A){this.name=s,this.rank=d,this.schema=g,this.spec=A,this.attrs=Se(A.attrs),this.excluded=null;let I=Ke(this.attrs);this.instance=I?new j(this,I):null}create(s=null){return!s&&this.instance?this.instance:new j(this,Ve(this.attrs,s))}static compile(s,d){let g=Object.create(null),A=0;return s.forEach((I,$)=>g[I]=new Re(I,A++,d,$)),g}removeFromSet(s){for(var d=0;d<s.length;d++)s[d].type==this&&(s=s.slice(0,d).concat(s.slice(d+1)),d--);return s}isInSet(s){for(let d=0;d<s.length;d++)if(s[d].type==this)return s[d]}excludes(s){return this.excluded.indexOf(s)>-1}}class Be{constructor(s){this.cached=Object.create(null);let d=this.spec={};for(let A in s)d[A]=s[A];d.nodes=r.from(s.nodes),d.marks=r.from(s.marks||{}),this.nodes=Te.compile(this.spec.nodes,this),this.marks=Re.compile(this.spec.marks,this);let g=Object.create(null);for(let A in this.nodes){if(A in this.marks)throw new RangeError(A+" can not be both a node and a mark");let I=this.nodes[A],$=I.spec.content||"",it=I.spec.marks;I.contentMatch=g[$]||(g[$]=ot.parse($,this.nodes)),I.inlineContent=I.contentMatch.inlineContent,I.markSet="_"==it?null:it?Fe(this,it.split(" ")):""!=it&&I.inlineContent?null:[]}for(let A in this.marks){let I=this.marks[A],$=I.spec.excludes;I.excluded=null==$?[I]:""==$?[]:Fe(this,$.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(s,d=null,g,A){if("string"==typeof s)s=this.nodeType(s);else{if(!(s instanceof Te))throw new RangeError("Invalid node type: "+s);if(s.schema!=this)throw new RangeError("Node type from different schema used ("+s.name+")")}return s.createChecked(d,g,A)}text(s,d){let g=this.nodes.text;return new k(g,g.defaultAttrs,s,j.setFrom(d))}mark(s,d){return"string"==typeof s&&(s=this.marks[s]),s.create(d)}nodeFromJSON(s){return ft.fromJSON(this,s)}markFromJSON(s){return j.fromJSON(this,s)}nodeType(s){let d=this.nodes[s];if(!d)throw new RangeError("Unknown node type: "+s);return d}}function Fe(N,s){let d=[];for(let g=0;g<s.length;g++){let A=s[g],I=N.marks[A],$=I;if(I)d.push(I);else for(let it in N.marks){let zt=N.marks[it];("_"==A||zt.spec.group&&zt.spec.group.split(" ").indexOf(A)>-1)&&d.push($=zt)}if(!$)throw new SyntaxError("Unknown mark type: '"+s[g]+"'")}return d}class Le{constructor(s,d){this.schema=s,this.rules=d,this.tags=[],this.styles=[],d.forEach(g=>{g.tag?this.tags.push(g):g.style&&this.styles.push(g)}),this.normalizeLists=!this.tags.some(g=>{if(!/^(ul|ol)\b/.test(g.tag)||!g.node)return!1;let A=s.nodes[g.node];return A.contentMatch.matchType(A)})}parse(s,d={}){let g=new ve(this,d,!1);return g.addAll(s,d.from,d.to),g.finish()}parseSlice(s,d={}){let g=new ve(this,d,!0);return g.addAll(s,d.from,d.to),dt.maxOpen(g.finish())}matchTag(s,d,g){for(let A=g?this.tags.indexOf(g)+1:0;A<this.tags.length;A++){let I=this.tags[A];if(D(s,I.tag)&&(void 0===I.namespace||s.namespaceURI==I.namespace)&&(!I.context||d.matchesContext(I.context))){if(I.getAttrs){let $=I.getAttrs(s);if(!1===$)continue;I.attrs=$||void 0}return I}}}matchStyle(s,d,g,A){for(let I=A?this.styles.indexOf(A)+1:0;I<this.styles.length;I++){let $=this.styles[I],it=$.style;if(!(0!=it.indexOf(s)||$.context&&!g.matchesContext($.context)||it.length>s.length&&(61!=it.charCodeAt(s.length)||it.slice(s.length+1)!=d))){if($.getAttrs){let zt=$.getAttrs(d);if(!1===zt)continue;$.attrs=zt||void 0}return $}}}static schemaRules(s){let d=[];function g(A){let I=null==A.priority?50:A.priority,$=0;for(;$<d.length;$++){let it=d[$];if((null==it.priority?50:it.priority)<I)break}d.splice($,0,A)}for(let A in s.marks){let I=s.marks[A].spec.parseDOM;I&&I.forEach($=>{g($=H($)),$.mark||$.ignore||$.clearMark||($.mark=A)})}for(let A in s.nodes){let I=s.nodes[A].spec.parseDOM;I&&I.forEach($=>{g($=H($)),$.node||$.ignore||$.mark||($.node=A)})}return d}static fromSchema(s){return s.cached.domParser||(s.cached.domParser=new Le(s,Le.schemaRules(s)))}}const De={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ze={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Oe={ol:!0,ul:!0};function Ue(N,s,d){return null!=s?(s?1:0)|("full"===s?2:0):N&&"pre"==N.whitespace?3:-5&d}class Ae{constructor(s,d,g,A,I,$,it){this.type=s,this.attrs=d,this.marks=g,this.pendingMarks=A,this.solid=I,this.options=it,this.content=[],this.activeMarks=j.none,this.stashMarks=[],this.match=$||(4&it?null:s.contentMatch)}findWrapping(s){if(!this.match){if(!this.type)return[];let d=this.type.contentMatch.fillBefore(p.from(s));if(!d){let A,g=this.type.contentMatch;return(A=g.findWrapping(s.type))?(this.match=g,A):null}this.match=this.type.contentMatch.matchFragment(d)}return this.match.findWrapping(s.type)}finish(s){if(!(1&this.options)){let A,g=this.content[this.content.length-1];if(g&&g.isText&&(A=/[ \t\r\n\u000c]+$/.exec(g.text))){let I=g;g.text.length==A[0].length?this.content.pop():this.content[this.content.length-1]=I.withText(I.text.slice(0,I.text.length-A[0].length))}}let d=p.from(this.content);return!s&&this.match&&(d=d.append(this.match.fillBefore(p.empty,!0))),this.type?this.type.create(this.attrs,d,this.marks):d}popFromStashMark(s){for(let d=this.stashMarks.length-1;d>=0;d--)if(s.eq(this.stashMarks[d]))return this.stashMarks.splice(d,1)[0]}applyPending(s){for(let d=0,g=this.pendingMarks;d<g.length;d++){let A=g[d];(this.type?this.type.allowsMarkType(A.type):w(A.type,s))&&!A.isInSet(this.activeMarks)&&(this.activeMarks=A.addToSet(this.activeMarks),this.pendingMarks=A.removeFromSet(this.pendingMarks))}}inlineContext(s){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:s.parentNode&&!De.hasOwnProperty(s.parentNode.nodeName.toLowerCase())}}class ve{constructor(s,d,g){this.parser=s,this.options=d,this.isOpen=g,this.open=0;let I,A=d.topNode,$=Ue(null,d.preserveWhitespace,0)|(g?4:0);I=A?new Ae(A.type,A.attrs,j.none,j.none,!0,d.topMatch||A.type.contentMatch,$):new Ae(g?null:s.schema.topNodeType,null,j.none,j.none,!0,null,$),this.nodes=[I],this.find=d.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(s){if(3==s.nodeType)this.addTextNode(s);else if(1==s.nodeType){let d=s.getAttribute("style");if(d){let g=this.readStyles(function(N){let d,s=/\s*([\w-]+)\s*:\s*([^;]+)/g,g=[];for(;d=s.exec(N);)g.push(d[1],d[2].trim());return g}(d));if(!g)return;let[A,I]=g,$=this.top;for(let it=0;it<I.length;it++)this.removePendingMark(I[it],$);for(let it=0;it<A.length;it++)this.addPendingMark(A[it]);this.addElement(s);for(let it=0;it<A.length;it++)this.removePendingMark(A[it],$);for(let it=0;it<I.length;it++)this.addPendingMark(I[it])}else this.addElement(s)}}addTextNode(s){let d=s.nodeValue,g=this.top;if(2&g.options||g.inlineContext(s)||/[^ \t\r\n\u000c]/.test(d)){if(1&g.options)d=2&g.options?d.replace(/\r\n?/g,"\n"):d.replace(/\r?\n|\r/g," ");else if(d=d.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(d)&&this.open==this.nodes.length-1){let A=g.content[g.content.length-1],I=s.previousSibling;(!A||I&&"BR"==I.nodeName||A.isText&&/[ \t\r\n\u000c]$/.test(A.text))&&(d=d.slice(1))}d&&this.insertNode(this.parser.schema.text(d)),this.findInText(s)}else this.findInside(s)}addElement(s,d){let A,g=s.nodeName.toLowerCase();Oe.hasOwnProperty(g)&&this.parser.normalizeLists&&function(N){for(let s=N.firstChild,d=null;s;s=s.nextSibling){let g=1==s.nodeType?s.nodeName.toLowerCase():null;g&&Oe.hasOwnProperty(g)&&d?(d.appendChild(s),s=d):"li"==g?d=s:g&&(d=null)}}(s);let I=this.options.ruleFromNode&&this.options.ruleFromNode(s)||(A=this.parser.matchTag(s,this,d));if(I?I.ignore:Ze.hasOwnProperty(g))this.findInside(s),this.ignoreFallback(s);else if(!I||I.skip||I.closeParent){I&&I.closeParent?this.open=Math.max(0,this.open-1):I&&I.skip.nodeType&&(s=I.skip);let $,it=this.top,zt=this.needsBlock;if(De.hasOwnProperty(g))it.content.length&&it.content[0].isInline&&this.open&&(this.open--,it=this.top),$=!0,it.type||(this.needsBlock=!0);else if(!s.firstChild)return void this.leafFallback(s);this.addAll(s),$&&this.sync(it),this.needsBlock=zt}else this.addElementByRule(s,I,!1===I.consuming?A:void 0)}leafFallback(s){"BR"==s.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(s.ownerDocument.createTextNode("\n"))}ignoreFallback(s){"BR"==s.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(s){let d=j.none,g=j.none;t:for(let A=0;A<s.length;A+=2)for(let I;;){let $=this.parser.matchStyle(s[A],s[A+1],this,I);if(!$)continue t;if($.ignore)return null;if($.clearMark?this.top.pendingMarks.forEach(it=>{$.clearMark(it)&&(g=it.addToSet(g))}):d=this.parser.schema.marks[$.mark].create($.attrs).addToSet(d),!1!==$.consuming)break;I=$}return[d,g]}addElementByRule(s,d,g){let A,I,$;d.node?(I=this.parser.schema.nodes[d.node],I.isLeaf?this.insertNode(I.create(d.attrs))||this.leafFallback(s):A=this.enter(I,d.attrs||null,d.preserveWhitespace)):($=this.parser.schema.marks[d.mark].create(d.attrs),this.addPendingMark($));let it=this.top;if(I&&I.isLeaf)this.findInside(s);else if(g)this.addElement(s,g);else if(d.getContent)this.findInside(s),d.getContent(s,this.parser.schema).forEach(zt=>this.insertNode(zt));else{let zt=s;"string"==typeof d.contentElement?zt=s.querySelector(d.contentElement):"function"==typeof d.contentElement?zt=d.contentElement(s):d.contentElement&&(zt=d.contentElement),this.findAround(s,zt,!0),this.addAll(zt)}A&&this.sync(it)&&this.open--,$&&this.removePendingMark($,it)}addAll(s,d,g){let A=d||0;for(let I=d?s.childNodes[d]:s.firstChild,$=null==g?null:s.childNodes[g];I!=$;I=I.nextSibling,++A)this.findAtPoint(s,A),this.addDOM(I);this.findAtPoint(s,A)}findPlace(s){let d,g;for(let A=this.open;A>=0;A--){let I=this.nodes[A],$=I.findWrapping(s);if($&&(!d||d.length>$.length)&&(d=$,g=I,!$.length)||I.solid)break}if(!d)return!1;this.sync(g);for(let A=0;A<d.length;A++)this.enterInner(d[A],null,!1);return!0}insertNode(s){if(s.isInline&&this.needsBlock&&!this.top.type){let d=this.textblockFromContext();d&&this.enterInner(d)}if(this.findPlace(s)){this.closeExtra();let d=this.top;d.applyPending(s.type),d.match&&(d.match=d.match.matchType(s.type));let g=d.activeMarks;for(let A=0;A<s.marks.length;A++)(!d.type||d.type.allowsMarkType(s.marks[A].type))&&(g=s.marks[A].addToSet(g));return d.content.push(s.mark(g)),!0}return!1}enter(s,d,g){let A=this.findPlace(s.create(d));return A&&this.enterInner(s,d,!0,g),A}enterInner(s,d=null,g=!1,A){this.closeExtra();let I=this.top;I.applyPending(s),I.match=I.match&&I.match.matchType(s);let $=Ue(s,A,I.options);4&I.options&&0==I.content.length&&($|=4),this.nodes.push(new Ae(s,d,I.activeMarks,I.pendingMarks,g,null,$)),this.open++}closeExtra(s=!1){let d=this.nodes.length-1;if(d>this.open){for(;d>this.open;d--)this.nodes[d-1].content.push(this.nodes[d].finish(s));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(s){for(let d=this.open;d>=0;d--)if(this.nodes[d]==s)return this.open=d,!0;return!1}get currentPos(){this.closeExtra();let s=0;for(let d=this.open;d>=0;d--){let g=this.nodes[d].content;for(let A=g.length-1;A>=0;A--)s+=g[A].nodeSize;d&&s++}return s}findAtPoint(s,d){if(this.find)for(let g=0;g<this.find.length;g++)this.find[g].node==s&&this.find[g].offset==d&&(this.find[g].pos=this.currentPos)}findInside(s){if(this.find)for(let d=0;d<this.find.length;d++)null==this.find[d].pos&&1==s.nodeType&&s.contains(this.find[d].node)&&(this.find[d].pos=this.currentPos)}findAround(s,d,g){if(s!=d&&this.find)for(let A=0;A<this.find.length;A++)null==this.find[A].pos&&1==s.nodeType&&s.contains(this.find[A].node)&&d.compareDocumentPosition(this.find[A].node)&(g?2:4)&&(this.find[A].pos=this.currentPos)}findInText(s){if(this.find)for(let d=0;d<this.find.length;d++)this.find[d].node==s&&(this.find[d].pos=this.currentPos-(s.nodeValue.length-this.find[d].offset))}matchesContext(s){if(s.indexOf("|")>-1)return s.split(/\s*\|\s*/).some(this.matchesContext,this);let d=s.split("/"),g=this.options.context,A=!(this.isOpen||g&&g.parent.type!=this.nodes[0].type),I=(A?0:1)-(g?g.depth+1:0),$=(it,zt)=>{for(;it>=0;it--){let ae=d[it];if(""==ae){if(it==d.length-1||0==it)continue;for(;zt>=I;zt--)if($(it-1,zt))return!0;return!1}{let ue=zt>0||0==zt&&A?this.nodes[zt].type:g&&zt>=I?g.node(zt-I).type:null;if(!ue||ue.name!=ae&&-1==ue.groups.indexOf(ae))return!1;zt--}}return!0};return $(d.length-1,this.open)}textblockFromContext(){let s=this.options.context;if(s)for(let d=s.depth;d>=0;d--){let g=s.node(d).contentMatchAt(s.indexAfter(d)).defaultType;if(g&&g.isTextblock&&g.defaultAttrs)return g}for(let d in this.parser.schema.nodes){let g=this.parser.schema.nodes[d];if(g.isTextblock&&g.defaultAttrs)return g}}addPendingMark(s){let d=function(N,s){for(let d=0;d<s.length;d++)if(N.eq(s[d]))return s[d]}(s,this.top.pendingMarks);d&&this.top.stashMarks.push(d),this.top.pendingMarks=s.addToSet(this.top.pendingMarks)}removePendingMark(s,d){for(let g=this.open;g>=0;g--){let A=this.nodes[g];if(A.pendingMarks.lastIndexOf(s)>-1)A.pendingMarks=s.removeFromSet(A.pendingMarks);else{A.activeMarks=s.removeFromSet(A.activeMarks);let $=A.popFromStashMark(s);$&&A.type&&A.type.allowsMarkType($.type)&&(A.activeMarks=$.addToSet(A.activeMarks))}if(A==d)break}}}function D(N,s){return(N.matches||N.msMatchesSelector||N.webkitMatchesSelector||N.mozMatchesSelector).call(N,s)}function H(N){let s={};for(let d in N)s[d]=N[d];return s}function w(N,s){let d=s.schema.nodes;for(let g in d){let A=d[g];if(!A.allowsMarkType(N))continue;let I=[],$=it=>{I.push(it);for(let zt=0;zt<it.edgeCount;zt++){let{type:ae,next:ue}=it.edge(zt);if(ae==s||I.indexOf(ue)<0&&$(ue))return!0}};if($(A.contentMatch))return!0}}class W{constructor(s,d){this.nodes=s,this.marks=d}serializeFragment(s,d={},g){g||(g=Pt(d).createDocumentFragment());let A=g,I=[];return s.forEach($=>{if(I.length||$.marks.length){let it=0,zt=0;for(;it<I.length&&zt<$.marks.length;){let ae=$.marks[zt];if(this.marks[ae.type.name]){if(!ae.eq(I[it][0])||!1===ae.type.spec.spanning)break;it++,zt++}else zt++}for(;it<I.length;)A=I.pop()[1];for(;zt<$.marks.length;){let ae=$.marks[zt++],ue=this.serializeMark(ae,$.isInline,d);ue&&(I.push([ae,A]),A.appendChild(ue.dom),A=ue.contentDOM||ue.dom)}}A.appendChild(this.serializeNodeInner($,d))}),g}serializeNodeInner(s,d){let{dom:g,contentDOM:A}=W.renderSpec(Pt(d),this.nodes[s.type.name](s));if(A){if(s.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(s.content,d,A)}return g}serializeNode(s,d={}){let g=this.serializeNodeInner(s,d);for(let A=s.marks.length-1;A>=0;A--){let I=this.serializeMark(s.marks[A],s.isInline,d);I&&((I.contentDOM||I.dom).appendChild(g),g=I.dom)}return g}serializeMark(s,d,g={}){let A=this.marks[s.type.name];return A&&W.renderSpec(Pt(g),A(s,d))}static renderSpec(s,d,g=null){if("string"==typeof d)return{dom:s.createTextNode(d)};if(null!=d.nodeType)return{dom:d};if(d.dom&&null!=d.dom.nodeType)return d;let A=d[0],I=A.indexOf(" ");I>0&&(g=A.slice(0,I),A=A.slice(I+1));let $,it=g?s.createElementNS(g,A):s.createElement(A),zt=d[1],ae=1;if(zt&&"object"==typeof zt&&null==zt.nodeType&&!Array.isArray(zt)){ae=2;for(let ue in zt)if(null!=zt[ue]){let We=ue.indexOf(" ");We>0?it.setAttributeNS(ue.slice(0,We),ue.slice(We+1),zt[ue]):it.setAttribute(ue,zt[ue])}}for(let ue=ae;ue<d.length;ue++){let We=d[ue];if(0===We){if(ue<d.length-1||ue>ae)throw new RangeError("Content hole must be the only child of its parent node");return{dom:it,contentDOM:it}}{let{dom:Ye,contentDOM:je}=W.renderSpec(s,We,g);if(it.appendChild(Ye),je){if($)throw new RangeError("Multiple content holes");$=je}}}return{dom:it,contentDOM:$}}static fromSchema(s){return s.cached.domSerializer||(s.cached.domSerializer=new W(this.nodesFromSchema(s),this.marksFromSchema(s)))}static nodesFromSchema(s){let d=Mt(s.nodes);return d.text||(d.text=g=>g.text),d}static marksFromSchema(s){return Mt(s.marks)}}function Mt(N){let s={};for(let d in N){let g=N[d].spec.toDOM;g&&(s[d]=g)}return s}function Pt(N){return N.document||window.document}},62463:(ee,yt,a)=>{a.d(yt,{Bs:()=>X,C1:()=>tt,H$:()=>qt,Sy:()=>xt,Y1:()=>b,qv:()=>Ct,xm:()=>p,yy:()=>Nt});var T=a(77346),r=a(38480);const E=Object.create(null);class b{constructor(k,st,ot){this.$anchor=k,this.$head=st,this.ranges=ot||[new p(k.min(st),k.max(st))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let k=this.ranges;for(let st=0;st<k.length;st++)if(k[st].$from.pos!=k[st].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(k,st=T.p2.empty){let ot=st.content.lastChild,at=null;for(let rt=0;rt<st.openEnd;rt++)at=ot,ot=ot.lastChild;let J=k.steps.length,V=this.ranges;for(let rt=0;rt<V.length;rt++){let{$from:Ft,$to:Vt}=V[rt],ne=k.mapping.slice(J);k.replaceRange(ne.map(Ft.pos),ne.map(Vt.pos),rt?T.p2.empty:st),0==rt&&Tt(k,J,(ot?ot.isInline:at&&at.isTextblock)?-1:1)}}replaceWith(k,st){let ot=k.steps.length,at=this.ranges;for(let J=0;J<at.length;J++){let{$from:V,$to:rt}=at[J],Ft=k.mapping.slice(ot),Vt=Ft.map(V.pos),ne=Ft.map(rt.pos);J?k.deleteRange(Vt,ne):(k.replaceRangeWith(Vt,ne,st),Tt(k,ot,st.isInline?-1:1))}}static findFrom(k,st,ot=!1){let at=k.parent.inlineContent?new X(k):gt(k.node(0),k.parent,k.pos,k.index(),st,ot);if(at)return at;for(let J=k.depth-1;J>=0;J--){let V=st<0?gt(k.node(0),k.node(J),k.before(J+1),k.index(J),st,ot):gt(k.node(0),k.node(J),k.after(J+1),k.index(J)+1,st,ot);if(V)return V}return null}static near(k,st=1){return this.findFrom(k,st)||this.findFrom(k,-st)||new tt(k.node(0))}static atStart(k){return gt(k,k,0,0,1)||new tt(k)}static atEnd(k){return gt(k,k,k.content.size,k.childCount,-1)||new tt(k)}static fromJSON(k,st){if(!st||!st.type)throw new RangeError("Invalid input for Selection.fromJSON");let ot=E[st.type];if(!ot)throw new RangeError(`No selection type ${st.type} defined`);return ot.fromJSON(k,st)}static jsonID(k,st){if(k in E)throw new RangeError("Duplicate use of selection JSON ID "+k);return E[k]=st,st.prototype.jsonID=k,st}getBookmark(){return X.between(this.$anchor,this.$head).getBookmark()}}b.prototype.visible=!0;class p{constructor(k,st){this.$from=k,this.$to=st}}let Y=!1;function R(ft){!Y&&!ft.parent.inlineContent&&(Y=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+ft.parent.type.name+")"))}class X extends b{constructor(k,st=k){R(k),R(st),super(k,st)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(k,st){let ot=k.resolve(st.map(this.head));if(!ot.parent.inlineContent)return b.near(ot);let at=k.resolve(st.map(this.anchor));return new X(at.parent.inlineContent?at:ot,ot)}replace(k,st=T.p2.empty){if(super.replace(k,st),st==T.p2.empty){let ot=this.$from.marksAcross(this.$to);ot&&k.ensureMarks(ot)}}eq(k){return k instanceof X&&k.anchor==this.anchor&&k.head==this.head}getBookmark(){return new j(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(k,st){if("number"!=typeof st.anchor||"number"!=typeof st.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new X(k.resolve(st.anchor),k.resolve(st.head))}static create(k,st,ot=st){let at=k.resolve(st);return new this(at,ot==st?at:k.resolve(ot))}static between(k,st,ot){let at=k.pos-st.pos;if((!ot||at)&&(ot=at>=0?1:-1),!st.parent.inlineContent){let J=b.findFrom(st,ot,!0)||b.findFrom(st,-ot,!0);if(!J)return b.near(st,ot);st=J.$head}return k.parent.inlineContent||(0==at||(k=(b.findFrom(k,-ot,!0)||b.findFrom(k,ot,!0)).$anchor).pos<st.pos!=at<0)&&(k=st),new X(k,st)}}b.jsonID("text",X);class j{constructor(k,st){this.anchor=k,this.head=st}map(k){return new j(k.map(this.anchor),k.map(this.head))}resolve(k){return X.between(k.resolve(this.anchor),k.resolve(this.head))}}class Ct extends b{constructor(k){let st=k.nodeAfter,ot=k.node(0).resolve(k.pos+st.nodeSize);super(k,ot),this.node=st}map(k,st){let{deleted:ot,pos:at}=st.mapResult(this.anchor),J=k.resolve(at);return ot?b.near(J):new Ct(J)}content(){return new T.p2(T.HY.from(this.node),0,0)}eq(k){return k instanceof Ct&&k.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new dt(this.anchor)}static fromJSON(k,st){if("number"!=typeof st.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ct(k.resolve(st.anchor))}static create(k,st){return new Ct(k.resolve(st))}static isSelectable(k){return!k.isText&&!1!==k.type.spec.selectable}}Ct.prototype.visible=!1,b.jsonID("node",Ct);class dt{constructor(k){this.anchor=k}map(k){let{deleted:st,pos:ot}=k.mapResult(this.anchor);return st?new j(ot,ot):new dt(ot)}resolve(k){let st=k.resolve(this.anchor),ot=st.nodeAfter;return ot&&Ct.isSelectable(ot)?new Ct(st):b.near(st)}}class tt extends b{constructor(k){super(k.resolve(0),k.resolve(k.content.size))}replace(k,st=T.p2.empty){if(st==T.p2.empty){k.delete(0,k.doc.content.size);let ot=b.atStart(k.doc);ot.eq(k.selection)||k.setSelection(ot)}else super.replace(k,st)}toJSON(){return{type:"all"}}static fromJSON(k){return new tt(k)}map(k){return new tt(k)}eq(k){return k instanceof tt}getBookmark(){return vt}}b.jsonID("all",tt);const vt={map(){return this},resolve:ft=>new tt(ft)};function gt(ft,k,st,ot,at,J=!1){if(k.inlineContent)return X.create(ft,st);for(let V=ot-(at>0?0:1);at>0?V<k.childCount:V>=0;V+=at){let rt=k.child(V);if(rt.isAtom){if(!J&&Ct.isSelectable(rt))return Ct.create(ft,st-(at<0?rt.nodeSize:0))}else{let Ft=gt(ft,rt,st+at,at<0?rt.childCount:0,at,J);if(Ft)return Ft}st+=rt.nodeSize*at}return null}function Tt(ft,k,st){let ot=ft.steps.length-1;if(ot<k)return;let V,at=ft.steps[ot];(at instanceof r.Pu||at instanceof r.FC)&&(ft.mapping.maps[ot].forEach((rt,Ft,Vt,ne)=>{null==V&&(V=ne)}),ft.setSelection(b.near(ft.doc.resolve(V),st)))}class ut extends r.wx{constructor(k){super(k.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=k.selection,this.storedMarks=k.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(k){if(k.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=k,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(k){return this.storedMarks=k,this.updated|=2,this}ensureMarks(k){return T.vc.sameSet(this.storedMarks||this.selection.$from.marks(),k)||this.setStoredMarks(k),this}addStoredMark(k){return this.ensureMarks(k.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(k){return this.ensureMarks(k.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(k,st){super.addStep(k,st),this.updated=-3&this.updated,this.storedMarks=null}setTime(k){return this.time=k,this}replaceSelection(k){return this.selection.replace(this,k),this}replaceSelectionWith(k,st=!0){let ot=this.selection;return st&&(k=k.mark(this.storedMarks||(ot.empty?ot.$from.marks():ot.$from.marksAcross(ot.$to)||T.vc.none))),ot.replaceWith(this,k),this}deleteSelection(){return this.selection.replace(this),this}insertText(k,st,ot){let at=this.doc.type.schema;if(null==st)return k?this.replaceSelectionWith(at.text(k),!0):this.deleteSelection();{if(null==ot&&(ot=st),ot=null==ot?st:ot,!k)return this.deleteRange(st,ot);let J=this.storedMarks;if(!J){let V=this.doc.resolve(st);J=ot==st?V.marks():V.marksAcross(this.doc.resolve(ot))}return this.replaceRangeWith(st,ot,at.text(k,J)),this.selection.empty||this.setSelection(b.near(this.selection.$to)),this}}setMeta(k,st){return this.meta["string"==typeof k?k:k.key]=st,this}getMeta(k){return this.meta["string"==typeof k?k:k.key]}get isGeneric(){for(let k in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function ht(ft,k){return k&&ft?ft.bind(k):ft}class Z{constructor(k,st,ot){this.name=k,this.init=ht(st.init,ot),this.apply=ht(st.apply,ot)}}const Ot=[new Z("doc",{init:ft=>ft.doc||ft.schema.topNodeType.createAndFill(),apply:ft=>ft.doc}),new Z("selection",{init:(ft,k)=>ft.selection||b.atStart(k.doc),apply:ft=>ft.selection}),new Z("storedMarks",{init:ft=>ft.storedMarks||null,apply:(ft,k,st,ot)=>ot.selection.$cursor?ft.storedMarks:null}),new Z("scrollToSelection",{init:()=>0,apply:(ft,k)=>ft.scrolledIntoView?k+1:k})];class bt{constructor(k,st){this.schema=k,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Ot.slice(),st&&st.forEach(ot=>{if(this.pluginsByKey[ot.key])throw new RangeError("Adding different instances of a keyed plugin ("+ot.key+")");this.plugins.push(ot),this.pluginsByKey[ot.key]=ot,ot.spec.state&&this.fields.push(new Z(ot.key,ot.spec.state,ot))})}}class Nt{constructor(k){this.config=k}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(k){return this.applyTransaction(k).state}filterTransaction(k,st=-1){for(let ot=0;ot<this.config.plugins.length;ot++)if(ot!=st){let at=this.config.plugins[ot];if(at.spec.filterTransaction&&!at.spec.filterTransaction.call(at,k,this))return!1}return!0}applyTransaction(k){if(!this.filterTransaction(k))return{state:this,transactions:[]};let st=[k],ot=this.applyInner(k),at=null;for(;;){let J=!1;for(let V=0;V<this.config.plugins.length;V++){let rt=this.config.plugins[V];if(rt.spec.appendTransaction){let Ft=at?at[V].n:0,Vt=at?at[V].state:this,ne=Ft<st.length&&rt.spec.appendTransaction.call(rt,Ft?st.slice(Ft):st,Vt,ot);if(ne&&ot.filterTransaction(ne,V)){if(ne.setMeta("appendedTransaction",k),!at){at=[];for(let he=0;he<this.config.plugins.length;he++)at.push(he<V?{state:ot,n:st.length}:{state:this,n:0})}st.push(ne),ot=ot.applyInner(ne),J=!0}at&&(at[V]={state:ot,n:st.length})}}if(!J)return{state:ot,transactions:st}}}applyInner(k){if(!k.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let st=new Nt(this.config),ot=this.config.fields;for(let at=0;at<ot.length;at++){let J=ot[at];st[J.name]=J.apply(k,this[J.name],this,st)}return st}get tr(){return new ut(this)}static create(k){let st=new bt(k.doc?k.doc.type.schema:k.schema,k.plugins),ot=new Nt(st);for(let at=0;at<st.fields.length;at++)ot[st.fields[at].name]=st.fields[at].init(k,ot);return ot}reconfigure(k){let st=new bt(this.schema,k.plugins),ot=st.fields,at=new Nt(st);for(let J=0;J<ot.length;J++){let V=ot[J].name;at[V]=this.hasOwnProperty(V)?this[V]:ot[J].init(k,at)}return at}toJSON(k){let st={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(st.storedMarks=this.storedMarks.map(ot=>ot.toJSON())),k&&"object"==typeof k)for(let ot in k){if("doc"==ot||"selection"==ot)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let at=k[ot],J=at.spec.state;J&&J.toJSON&&(st[ot]=J.toJSON.call(at,this[at.key]))}return st}static fromJSON(k,st,ot){if(!st)throw new RangeError("Invalid input for EditorState.fromJSON");if(!k.schema)throw new RangeError("Required config field 'schema' missing");let at=new bt(k.schema,k.plugins),J=new Nt(at);return at.fields.forEach(V=>{if("doc"==V.name)J.doc=T.NB.fromJSON(k.schema,st.doc);else if("selection"==V.name)J.selection=b.fromJSON(J.doc,st.selection);else if("storedMarks"==V.name)st.storedMarks&&(J.storedMarks=st.storedMarks.map(k.schema.markFromJSON));else{if(ot)for(let rt in ot){let Ft=ot[rt],Vt=Ft.spec.state;if(Ft.key==V.name&&Vt&&Vt.fromJSON&&Object.prototype.hasOwnProperty.call(st,rt))return void(J[V.name]=Vt.fromJSON.call(Ft,k,st[rt],J))}J[V.name]=V.init(k,J)}}),J}}function Ht(ft,k,st){for(let ot in ft){let at=ft[ot];at instanceof Function?at=at.bind(k):"handleDOMEvents"==ot&&(at=Ht(at,k,{})),st[ot]=at}return st}class xt{constructor(k){this.spec=k,this.props={},k.props&&Ht(k.props,this,this.props),this.key=k.key?k.key.key:Yt("plugin")}getState(k){return k[this.key]}}const Wt=Object.create(null);function Yt(ft){return ft in Wt?ft+"$"+ ++Wt[ft]:(Wt[ft]=0,ft+"$")}class qt{constructor(k="key"){this.key=Yt(k)}get(k){return k.config.pluginsByKey[this.key]}getState(k){return k[this.key]}}},38480:(ee,yt,a)=>{a.d(yt,{Ax:()=>Vt,FC:()=>bt,GJ:()=>Ee,Mn:()=>he,Pu:()=>Ot,dR:()=>Ke,k9:()=>qt,nd:()=>k,nj:()=>be,vs:()=>vt,wx:()=>ve});var T=a(77346);const E=Math.pow(2,16);function b(Dt,D){return Dt+D*E}function p(Dt){return 65535&Dt}class dt{constructor(D,y,H){this.pos=D,this.delInfo=y,this.recover=H}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class tt{constructor(D,y=!1){if(this.ranges=D,this.inverted=y,!D.length&&tt.empty)return tt.empty}recover(D){let y=0,H=p(D);if(!this.inverted)for(let w=0;w<H;w++)y+=this.ranges[3*w+2]-this.ranges[3*w+1];return this.ranges[3*H]+y+((Dt=D)-(65535&Dt))/E;var Dt}mapResult(D,y=1){return this._map(D,y,!1)}map(D,y=1){return this._map(D,y,!0)}_map(D,y,H){let w=0,F=this.inverted?2:1,W=this.inverted?1:2;for(let Mt=0;Mt<this.ranges.length;Mt+=3){let Pt=this.ranges[Mt]-(this.inverted?w:0);if(Pt>D)break;let N=this.ranges[Mt+F],s=this.ranges[Mt+W],d=Pt+N;if(D<=d){let A=Pt+w+((N?D==Pt?-1:D==d?1:y:y)<0?0:s);if(H)return A;let I=D==(y<0?Pt:d)?null:b(Mt/3,D-Pt),$=D==Pt?2:D==d?1:4;return(y<0?D!=Pt:D!=d)&&($|=8),new dt(A,$,I)}w+=s-N}return H?D+w:new dt(D+w,0,null)}touches(D,y){let H=0,w=p(y),F=this.inverted?2:1,W=this.inverted?1:2;for(let Mt=0;Mt<this.ranges.length;Mt+=3){let Pt=this.ranges[Mt]-(this.inverted?H:0);if(Pt>D)break;let N=this.ranges[Mt+F];if(D<=Pt+N&&Mt==3*w)return!0;H+=this.ranges[Mt+W]-N}return!1}forEach(D){let y=this.inverted?2:1,H=this.inverted?1:2;for(let w=0,F=0;w<this.ranges.length;w+=3){let W=this.ranges[w],Mt=W-(this.inverted?F:0),Pt=W+(this.inverted?0:F),N=this.ranges[w+y],s=this.ranges[w+H];D(Mt,Mt+N,Pt,Pt+s),F+=s-N}}invert(){return new tt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(D){return 0==D?tt.empty:new tt(D<0?[0,-D,0]:[0,0,D])}}tt.empty=new tt([]);class vt{constructor(D=[],y,H=0,w=D.length){this.maps=D,this.mirror=y,this.from=H,this.to=w}slice(D=0,y=this.maps.length){return new vt(this.maps,this.mirror,D,y)}copy(){return new vt(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(D,y){this.to=this.maps.push(D),null!=y&&this.setMirror(this.maps.length-1,y)}appendMapping(D){for(let y=0,H=this.maps.length;y<D.maps.length;y++){let w=D.getMirror(y);this.appendMap(D.maps[y],null!=w&&w<y?H+w:void 0)}}getMirror(D){if(this.mirror)for(let y=0;y<this.mirror.length;y++)if(this.mirror[y]==D)return this.mirror[y+(y%2?-1:1)]}setMirror(D,y){this.mirror||(this.mirror=[]),this.mirror.push(D,y)}appendMappingInverted(D){for(let y=D.maps.length-1,H=this.maps.length+D.maps.length;y>=0;y--){let w=D.getMirror(y);this.appendMap(D.maps[y].invert(),null!=w&&w>y?H-w-1:void 0)}}invert(){let D=new vt;return D.appendMappingInverted(this),D}map(D,y=1){if(this.mirror)return this._map(D,y,!0);for(let H=this.from;H<this.to;H++)D=this.maps[H].map(D,y);return D}mapResult(D,y=1){return this._map(D,y,!1)}_map(D,y,H){let w=0;for(let F=this.from;F<this.to;F++){let Mt=this.maps[F].mapResult(D,y);if(null!=Mt.recover){let Pt=this.getMirror(F);if(null!=Pt&&Pt>F&&Pt<this.to){F=Pt,D=this.maps[Pt].recover(Mt.recover);continue}}w|=Mt.delInfo,D=Mt.pos}return H?D:new dt(D,w,null)}}const gt=Object.create(null);class Tt{getMap(){return tt.empty}merge(D){return null}static fromJSON(D,y){if(!y||!y.stepType)throw new RangeError("Invalid input for Step.fromJSON");let H=gt[y.stepType];if(!H)throw new RangeError(`No step type ${y.stepType} defined`);return H.fromJSON(D,y)}static jsonID(D,y){if(D in gt)throw new RangeError("Duplicate use of step JSON ID "+D);return gt[D]=y,y.prototype.jsonID=D,y}}class Ut{constructor(D,y){this.doc=D,this.failed=y}static ok(D){return new Ut(D,null)}static fail(D){return new Ut(null,D)}static fromReplace(D,y,H,w){try{return Ut.ok(D.replace(y,H,w))}catch(F){if(F instanceof T.e4)return Ut.fail(F.message);throw F}}}function At(Dt,D,y){let H=[];for(let w=0;w<Dt.childCount;w++){let F=Dt.child(w);F.content.size&&(F=F.copy(At(F.content,D,F))),F.isInline&&(F=D(F,y,w)),H.push(F)}return T.HY.fromArray(H)}class _t extends Tt{constructor(D,y,H){super(),this.from=D,this.to=y,this.mark=H}apply(D){let y=D.slice(this.from,this.to),H=D.resolve(this.from),w=H.node(H.sharedDepth(this.to)),F=new T.p2(At(y.content,(W,Mt)=>W.isAtom&&Mt.type.allowsMarkType(this.mark.type)?W.mark(this.mark.addToSet(W.marks)):W,w),y.openStart,y.openEnd);return Ut.fromReplace(D,this.from,this.to,F)}invert(){return new ut(this.from,this.to,this.mark)}map(D){let y=D.mapResult(this.from,1),H=D.mapResult(this.to,-1);return y.deleted&&H.deleted||y.pos>=H.pos?null:new _t(y.pos,H.pos,this.mark)}merge(D){return D instanceof _t&&D.mark.eq(this.mark)&&this.from<=D.to&&this.to>=D.from?new _t(Math.min(this.from,D.from),Math.max(this.to,D.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(D,y){if("number"!=typeof y.from||"number"!=typeof y.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new _t(y.from,y.to,D.markFromJSON(y.mark))}}Tt.jsonID("addMark",_t);class ut extends Tt{constructor(D,y,H){super(),this.from=D,this.to=y,this.mark=H}apply(D){let y=D.slice(this.from,this.to),H=new T.p2(At(y.content,w=>w.mark(this.mark.removeFromSet(w.marks)),D),y.openStart,y.openEnd);return Ut.fromReplace(D,this.from,this.to,H)}invert(){return new _t(this.from,this.to,this.mark)}map(D){let y=D.mapResult(this.from,1),H=D.mapResult(this.to,-1);return y.deleted&&H.deleted||y.pos>=H.pos?null:new ut(y.pos,H.pos,this.mark)}merge(D){return D instanceof ut&&D.mark.eq(this.mark)&&this.from<=D.to&&this.to>=D.from?new ut(Math.min(this.from,D.from),Math.max(this.to,D.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(D,y){if("number"!=typeof y.from||"number"!=typeof y.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ut(y.from,y.to,D.markFromJSON(y.mark))}}Tt.jsonID("removeMark",ut);class ht extends Tt{constructor(D,y){super(),this.pos=D,this.mark=y}apply(D){let y=D.nodeAt(this.pos);if(!y)return Ut.fail("No node at mark step's position");let H=y.type.create(y.attrs,null,this.mark.addToSet(y.marks));return Ut.fromReplace(D,this.pos,this.pos+1,new T.p2(T.HY.from(H),0,y.isLeaf?0:1))}invert(D){let y=D.nodeAt(this.pos);if(y){let H=this.mark.addToSet(y.marks);if(H.length==y.marks.length){for(let w=0;w<y.marks.length;w++)if(!y.marks[w].isInSet(H))return new ht(this.pos,y.marks[w]);return new ht(this.pos,this.mark)}}return new Z(this.pos,this.mark)}map(D){let y=D.mapResult(this.pos,1);return y.deletedAfter?null:new ht(y.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(D,y){if("number"!=typeof y.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ht(y.pos,D.markFromJSON(y.mark))}}Tt.jsonID("addNodeMark",ht);class Z extends Tt{constructor(D,y){super(),this.pos=D,this.mark=y}apply(D){let y=D.nodeAt(this.pos);if(!y)return Ut.fail("No node at mark step's position");let H=y.type.create(y.attrs,null,this.mark.removeFromSet(y.marks));return Ut.fromReplace(D,this.pos,this.pos+1,new T.p2(T.HY.from(H),0,y.isLeaf?0:1))}invert(D){let y=D.nodeAt(this.pos);return y&&this.mark.isInSet(y.marks)?new ht(this.pos,this.mark):this}map(D){let y=D.mapResult(this.pos,1);return y.deletedAfter?null:new Z(y.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(D,y){if("number"!=typeof y.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Z(y.pos,D.markFromJSON(y.mark))}}Tt.jsonID("removeNodeMark",Z);class Ot extends Tt{constructor(D,y,H,w=!1){super(),this.from=D,this.to=y,this.slice=H,this.structure=w}apply(D){return this.structure&&Nt(D,this.from,this.to)?Ut.fail("Structure replace would overwrite content"):Ut.fromReplace(D,this.from,this.to,this.slice)}getMap(){return new tt([this.from,this.to-this.from,this.slice.size])}invert(D){return new Ot(this.from,this.from+this.slice.size,D.slice(this.from,this.to))}map(D){let y=D.mapResult(this.from,1),H=D.mapResult(this.to,-1);return y.deletedAcross&&H.deletedAcross?null:new Ot(y.pos,Math.max(y.pos,H.pos),this.slice)}merge(D){if(!(D instanceof Ot)||D.structure||this.structure)return null;if(this.from+this.slice.size!=D.from||this.slice.openEnd||D.slice.openStart){if(D.to!=this.from||this.slice.openStart||D.slice.openEnd)return null;{let y=this.slice.size+D.slice.size==0?T.p2.empty:new T.p2(D.slice.content.append(this.slice.content),D.slice.openStart,this.slice.openEnd);return new Ot(D.from,this.to,y,this.structure)}}{let y=this.slice.size+D.slice.size==0?T.p2.empty:new T.p2(this.slice.content.append(D.slice.content),this.slice.openStart,D.slice.openEnd);return new Ot(this.from,this.to+(D.to-D.from),y,this.structure)}}toJSON(){let D={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(D.slice=this.slice.toJSON()),this.structure&&(D.structure=!0),D}static fromJSON(D,y){if("number"!=typeof y.from||"number"!=typeof y.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ot(y.from,y.to,T.p2.fromJSON(D,y.slice),!!y.structure)}}Tt.jsonID("replace",Ot);class bt extends Tt{constructor(D,y,H,w,F,W,Mt=!1){super(),this.from=D,this.to=y,this.gapFrom=H,this.gapTo=w,this.slice=F,this.insert=W,this.structure=Mt}apply(D){if(this.structure&&(Nt(D,this.from,this.gapFrom)||Nt(D,this.gapTo,this.to)))return Ut.fail("Structure gap-replace would overwrite content");let y=D.slice(this.gapFrom,this.gapTo);if(y.openStart||y.openEnd)return Ut.fail("Gap is not a flat range");let H=this.slice.insertAt(this.insert,y.content);return H?Ut.fromReplace(D,this.from,this.to,H):Ut.fail("Content does not fit in gap")}getMap(){return new tt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(D){let y=this.gapTo-this.gapFrom;return new bt(this.from,this.from+this.slice.size+y,this.from+this.insert,this.from+this.insert+y,D.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(D){let y=D.mapResult(this.from,1),H=D.mapResult(this.to,-1),w=D.map(this.gapFrom,-1),F=D.map(this.gapTo,1);return y.deletedAcross&&H.deletedAcross||w<y.pos||F>H.pos?null:new bt(y.pos,H.pos,w,F,this.slice,this.insert,this.structure)}toJSON(){let D={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(D.slice=this.slice.toJSON()),this.structure&&(D.structure=!0),D}static fromJSON(D,y){if("number"!=typeof y.from||"number"!=typeof y.to||"number"!=typeof y.gapFrom||"number"!=typeof y.gapTo||"number"!=typeof y.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new bt(y.from,y.to,y.gapFrom,y.gapTo,T.p2.fromJSON(D,y.slice),y.insert,!!y.structure)}}function Nt(Dt,D,y){let H=Dt.resolve(D),w=y-D,F=H.depth;for(;w>0&&F>0&&H.indexAfter(F)==H.node(F).childCount;)F--,w--;if(w>0){let W=H.node(F).maybeChild(H.indexAfter(F));for(;w>0;){if(!W||W.isLeaf)return!0;W=W.firstChild,w--}}return!1}function Yt(Dt,D,y){return(0==D||Dt.canReplace(D,Dt.childCount))&&(y==Dt.childCount||Dt.canReplace(0,y))}function qt(Dt){let y=Dt.parent.content.cutByIndex(Dt.startIndex,Dt.endIndex);for(let H=Dt.depth;;--H){let w=Dt.$from.node(H),F=Dt.$from.index(H),W=Dt.$to.indexAfter(H);if(H<Dt.depth&&w.canReplace(F,W,y))return H;if(0==H||w.type.spec.isolating||!Yt(w,F,W))break}return null}function k(Dt,D,y=null,H=Dt){let w=function(Dt,D){let{parent:y,startIndex:H,endIndex:w}=Dt,F=y.contentMatchAt(H).findWrapping(D);return F&&y.canReplaceWith(H,w,F.length?F[0]:D)?F:null}(Dt,D),F=w&&function(Dt,D){let{parent:y,startIndex:H,endIndex:w}=Dt,F=y.child(H),W=D.contentMatch.findWrapping(F.type);if(!W)return null;let Pt=(W.length?W[W.length-1]:D).contentMatch;for(let N=H;Pt&&N<w;N++)Pt=Pt.matchType(y.child(N).type);return Pt&&Pt.validEnd?W:null}(H,D);return F?w.map(st).concat({type:D,attrs:y}).concat(F.map(st)):null}function st(Dt){return{type:Dt,attrs:null}}function Vt(Dt,D,y=1,H){let w=Dt.resolve(D),F=w.depth-y,W=H&&H[H.length-1]||w.parent;if(F<0||w.parent.type.spec.isolating||!w.parent.canReplace(w.index(),w.parent.childCount)||!W.type.validContent(w.parent.content.cutByIndex(w.index(),w.parent.childCount)))return!1;for(let N=w.depth-1,s=y-2;N>F;N--,s--){let d=w.node(N),g=w.index(N);if(d.type.spec.isolating)return!1;let A=d.content.cutByIndex(g,d.childCount),I=H&&H[s]||d;if(I!=d&&(A=A.replaceChild(0,I.type.create(I.attrs))),!d.canReplace(g+1,d.childCount)||!I.type.validContent(A))return!1}let Mt=w.indexAfter(F),Pt=H&&H[0];return w.node(F).canReplaceWith(Mt,Mt,Pt?Pt.type:w.node(F+1).type)}function he(Dt,D){let y=Dt.resolve(D),H=y.index();return Qt(y.nodeBefore,y.nodeAfter)&&y.parent.canReplace(H,H+1)}function Qt(Dt,D){return!(!Dt||!D||Dt.isLeaf||!Dt.canAppend(D))}function Ee(Dt,D,y=-1){let H=Dt.resolve(D);for(let w=H.depth;;w--){let F,W,Mt=H.index(w);if(w==H.depth?(F=H.nodeBefore,W=H.nodeAfter):y>0?(F=H.node(w+1),Mt++,W=H.node(w).maybeChild(Mt)):(F=H.node(w).maybeChild(Mt-1),W=H.node(w+1)),F&&!F.isTextblock&&Qt(F,W)&&H.node(w).canReplace(Mt,Mt+1))return D;if(0==w)break;D=y<0?H.before(w):H.after(w)}}function be(Dt,D,y){let H=Dt.resolve(D);if(!y.content.size)return D;let w=y.content;for(let F=0;F<y.openStart;F++)w=w.firstChild.content;for(let F=1;F<=(0==y.openStart&&y.size?2:1);F++)for(let W=H.depth;W>=0;W--){let Mt=W==H.depth?0:H.pos<=(H.start(W+1)+H.end(W+1))/2?-1:1,Pt=H.index(W)+(Mt>0?1:0),N=H.node(W),s=!1;if(1==F)s=N.canReplace(Pt,Pt,w);else{let d=N.contentMatchAt(Pt).findWrapping(w.firstChild.type);s=d&&N.canReplaceWith(Pt,Pt,d[0])}if(s)return 0==Mt?H.pos:Mt<0?H.before(W+1):H.after(W+1)}return null}function Ke(Dt,D,y=D,H=T.p2.empty){if(D==y&&!H.size)return null;let w=Dt.resolve(D),F=Dt.resolve(y);return Ve(w,F,H)?new Ot(D,y,H):new Se(w,F,H).fit()}function Ve(Dt,D,y){return!y.openStart&&!y.openEnd&&Dt.start()==D.start()&&Dt.parent.canReplace(Dt.index(),D.index(),y.content)}Tt.jsonID("replaceAround",bt);class Se{constructor(D,y,H){this.$from=D,this.$to=y,this.unplaced=H,this.frontier=[],this.placed=T.HY.empty;for(let w=0;w<=D.depth;w++){let F=D.node(w);this.frontier.push({type:F.type,match:F.contentMatchAt(D.indexAfter(w))})}for(let w=D.depth;w>0;w--)this.placed=T.HY.from(D.node(w).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let N=this.findFittable();N?this.placeNodes(N):this.openMore()||this.dropNode()}let D=this.mustMoveInline(),y=this.placed.size-this.depth-this.$from.depth,H=this.$from,w=this.close(D<0?this.$to:H.doc.resolve(D));if(!w)return null;let F=this.placed,W=H.depth,Mt=w.depth;for(;W&&Mt&&1==F.childCount;)F=F.firstChild.content,W--,Mt--;let Pt=new T.p2(F,W,Mt);return D>-1?new bt(H.pos,D,this.$to.pos,this.$to.end(),Pt,y):Pt.size||H.pos!=this.$to.pos?new Ot(H.pos,w.pos,Pt):null}findFittable(){let D=this.unplaced.openStart;for(let y=this.unplaced.content,H=0,w=this.unplaced.openEnd;H<D;H++){let F=y.firstChild;if(y.childCount>1&&(w=0),F.type.spec.isolating&&w<=H){D=H;break}y=F.content}for(let y=1;y<=2;y++)for(let H=1==y?D:this.unplaced.openStart;H>=0;H--){let w,F=null;H?(F=Re(this.unplaced.content,H-1).firstChild,w=F.content):w=this.unplaced.content;let W=w.firstChild;for(let Mt=this.depth;Mt>=0;Mt--){let s,{type:Pt,match:N}=this.frontier[Mt],d=null;if(1==y&&(W?N.matchType(W.type)||(d=N.fillBefore(T.HY.from(W),!1)):F&&Pt.compatibleContent(F.type)))return{sliceDepth:H,frontierDepth:Mt,parent:F,inject:d};if(2==y&&W&&(s=N.findWrapping(W.type)))return{sliceDepth:H,frontierDepth:Mt,parent:F,wrap:s};if(F&&N.matchType(F.type))break}}}openMore(){let{content:D,openStart:y,openEnd:H}=this.unplaced,w=Re(D,y);return!(!w.childCount||w.firstChild.isLeaf||(this.unplaced=new T.p2(D,y+1,Math.max(H,w.size+y>=D.size-H?y+1:0)),0))}dropNode(){let{content:D,openStart:y,openEnd:H}=this.unplaced,w=Re(D,y);if(w.childCount<=1&&y>0){let F=D.size-y<=y+w.size;this.unplaced=new T.p2(Te(D,y-1,1),y-1,F?y-1:H)}else this.unplaced=new T.p2(Te(D,y,1),y,H)}placeNodes({sliceDepth:D,frontierDepth:y,parent:H,inject:w,wrap:F}){for(;this.depth>y;)this.closeFrontierNode();if(F)for(let $=0;$<F.length;$++)this.openFrontierNode(F[$]);let W=this.unplaced,Mt=H?H.content:W.content,Pt=W.openStart-D,N=0,s=[],{match:d,type:g}=this.frontier[y];if(w){for(let $=0;$<w.childCount;$++)s.push(w.child($));d=d.matchFragment(w)}let A=Mt.size+D-(W.content.size-W.openEnd);for(;N<Mt.childCount;){let $=Mt.child(N),it=d.matchType($.type);if(!it)break;N++,(N>1||0==Pt||$.content.size)&&(d=it,s.push(Be($.mark(g.allowedMarks($.marks)),1==N?Pt:0,N==Mt.childCount?A:-1)))}let I=N==Mt.childCount;I||(A=-1),this.placed=Ne(this.placed,y,T.HY.from(s)),this.frontier[y].match=d,I&&A<0&&H&&H.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let $=0,it=Mt;$<A;$++){let zt=it.lastChild;this.frontier.push({type:zt.type,match:zt.contentMatchAt(zt.childCount)}),it=zt.content}this.unplaced=I?0==D?T.p2.empty:new T.p2(Te(W.content,D-1,1),D-1,A<0?W.openEnd:D-1):new T.p2(Te(W.content,D,N),W.openStart,W.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let y,D=this.frontier[this.depth];if(!D.type.isTextblock||!Fe(this.$to,this.$to.depth,D.type,D.match,!1)||this.$to.depth==this.depth&&(y=this.findCloseLevel(this.$to))&&y.depth==this.depth)return-1;let{depth:H}=this.$to,w=this.$to.after(H);for(;H>1&&w==this.$to.end(--H);)++w;return w}findCloseLevel(D){t:for(let y=Math.min(this.depth,D.depth);y>=0;y--){let{match:H,type:w}=this.frontier[y],F=y<D.depth&&D.end(y+1)==D.pos+(D.depth-(y+1)),W=Fe(D,y,w,H,F);if(W){for(let Mt=y-1;Mt>=0;Mt--){let{match:Pt,type:N}=this.frontier[Mt],s=Fe(D,Mt,N,Pt,!0);if(!s||s.childCount)continue t}return{depth:y,fit:W,move:F?D.doc.resolve(D.after(y+1)):D}}}}close(D){let y=this.findCloseLevel(D);if(!y)return null;for(;this.depth>y.depth;)this.closeFrontierNode();y.fit.childCount&&(this.placed=Ne(this.placed,y.depth,y.fit)),D=y.move;for(let H=y.depth+1;H<=D.depth;H++){let w=D.node(H),F=w.type.contentMatch.fillBefore(w.content,!0,D.index(H));this.openFrontierNode(w.type,w.attrs,F)}return D}openFrontierNode(D,y=null,H){let w=this.frontier[this.depth];w.match=w.match.matchType(D),this.placed=Ne(this.placed,this.depth,T.HY.from(D.create(y,H))),this.frontier.push({type:D,match:D.contentMatch})}closeFrontierNode(){let y=this.frontier.pop().match.fillBefore(T.HY.empty,!0);y.childCount&&(this.placed=Ne(this.placed,this.frontier.length,y))}}function Te(Dt,D,y){return 0==D?Dt.cutByIndex(y,Dt.childCount):Dt.replaceChild(0,Dt.firstChild.copy(Te(Dt.firstChild.content,D-1,y)))}function Ne(Dt,D,y){return 0==D?Dt.append(y):Dt.replaceChild(Dt.childCount-1,Dt.lastChild.copy(Ne(Dt.lastChild.content,D-1,y)))}function Re(Dt,D){for(let y=0;y<D;y++)Dt=Dt.firstChild.content;return Dt}function Be(Dt,D,y){if(D<=0)return Dt;let H=Dt.content;return D>1&&(H=H.replaceChild(0,Be(H.firstChild,D-1,1==H.childCount?y-1:0))),D>0&&(H=Dt.type.contentMatch.fillBefore(H).append(H),y<=0&&(H=H.append(Dt.type.contentMatch.matchFragment(H).fillBefore(T.HY.empty,!0)))),Dt.copy(H)}function Fe(Dt,D,y,H,w){let F=Dt.node(D),W=w?Dt.indexAfter(D):Dt.index(D);if(W==F.childCount&&!y.compatibleContent(F.type))return null;let Mt=H.fillBefore(F.content,!0,W);return Mt&&!function(Dt,D,y){for(let H=y;H<D.childCount;H++)if(!Dt.allowsMarks(D.child(H).marks))return!0;return!1}(y,F.content,W)?Mt:null}function De(Dt){return Dt.spec.defining||Dt.spec.definingForContent}function Oe(Dt,D,y,H,w){if(D<y){let F=Dt.firstChild;Dt=Dt.replaceChild(0,F.copy(Oe(F.content,D+1,y,H,F)))}if(D>H){let F=w.contentMatchAt(0),W=F.fillBefore(Dt).append(Dt);Dt=W.append(F.matchFragment(W).fillBefore(T.HY.empty,!0))}return Dt}function ze(Dt,D){let y=[];for(let w=Math.min(Dt.depth,D.depth);w>=0;w--){let F=Dt.start(w);if(F<Dt.pos-(Dt.depth-w)||D.end(w)>D.pos+(D.depth-w)||Dt.node(w).type.spec.isolating||D.node(w).type.spec.isolating)break;(F==D.start(w)||w==Dt.depth&&w==D.depth&&Dt.parent.inlineContent&&D.parent.inlineContent&&w&&D.start(w-1)==F-1)&&y.push(w)}return y}class Ue extends Tt{constructor(D,y,H){super(),this.pos=D,this.attr=y,this.value=H}apply(D){let y=D.nodeAt(this.pos);if(!y)return Ut.fail("No node at attribute step's position");let H=Object.create(null);for(let F in y.attrs)H[F]=y.attrs[F];H[this.attr]=this.value;let w=y.type.create(H,null,y.marks);return Ut.fromReplace(D,this.pos,this.pos+1,new T.p2(T.HY.from(w),0,y.isLeaf?0:1))}getMap(){return tt.empty}invert(D){return new Ue(this.pos,this.attr,D.nodeAt(this.pos).attrs[this.attr])}map(D){let y=D.mapResult(this.pos,1);return y.deletedAfter?null:new Ue(y.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(D,y){if("number"!=typeof y.pos||"string"!=typeof y.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ue(y.pos,y.attr,y.value)}}Tt.jsonID("attr",Ue);let Ae=class extends Error{};Ae=function Dt(D){let y=Error.call(this,D);return y.__proto__=Dt.prototype,y},(Ae.prototype=Object.create(Error.prototype)).constructor=Ae,Ae.prototype.name="TransformError";class ve{constructor(D){this.doc=D,this.steps=[],this.docs=[],this.mapping=new vt}get before(){return this.docs.length?this.docs[0]:this.doc}step(D){let y=this.maybeStep(D);if(y.failed)throw new Ae(y.failed);return this}maybeStep(D){let y=D.apply(this.doc);return y.failed||this.addStep(D,y.doc),y}get docChanged(){return this.steps.length>0}addStep(D,y){this.docs.push(this.doc),this.steps.push(D),this.mapping.appendMap(D.getMap()),this.doc=y}replace(D,y=D,H=T.p2.empty){let w=Ke(this.doc,D,y,H);return w&&this.step(w),this}replaceWith(D,y,H){return this.replace(D,y,new T.p2(T.HY.from(H),0,0))}delete(D,y){return this.replace(D,y,T.p2.empty)}insert(D,y){return this.replaceWith(D,D,y)}replaceRange(D,y,H){return function(Dt,D,y,H){if(!H.size)return Dt.deleteRange(D,y);let w=Dt.doc.resolve(D),F=Dt.doc.resolve(y);if(Ve(w,F,H))return Dt.step(new Ot(D,y,H));let W=ze(w,Dt.doc.resolve(y));0==W[W.length-1]&&W.pop();let Mt=-(w.depth+1);W.unshift(Mt);for(let g=w.depth,A=w.pos-1;g>0;g--,A--){let I=w.node(g).type.spec;if(I.defining||I.definingAsContext||I.isolating)break;W.indexOf(g)>-1?Mt=g:w.before(g)==A&&W.splice(1,0,-g)}let Pt=W.indexOf(Mt),N=[],s=H.openStart;for(let g=H.content,A=0;;A++){let I=g.firstChild;if(N.push(I),A==H.openStart)break;g=I.content}for(let g=s-1;g>=0;g--){let A=N[g].type,I=De(A);if(I&&w.node(Pt).type!=A)s=g;else if(I||!A.isTextblock)break}for(let g=H.openStart;g>=0;g--){let A=(g+s+1)%(H.openStart+1),I=N[A];if(I)for(let $=0;$<W.length;$++){let it=W[($+Pt)%W.length],zt=!0;it<0&&(zt=!1,it=-it);let ae=w.node(it-1),ue=w.index(it-1);if(ae.canReplaceWith(ue,ue,I.type,I.marks))return Dt.replace(w.before(it),zt?F.after(it):y,new T.p2(Oe(H.content,0,H.openStart,A),A,H.openEnd))}}let d=Dt.steps.length;for(let g=W.length-1;g>=0&&(Dt.replace(D,y,H),!(Dt.steps.length>d));g--){let A=W[g];A<0||(D=w.before(A),y=F.after(A))}}(this,D,y,H),this}replaceRangeWith(D,y,H){return function(Dt,D,y,H){if(!H.isInline&&D==y&&Dt.doc.resolve(D).parent.content.size){let w=function(Dt,D,y){let H=Dt.resolve(D);if(H.parent.canReplaceWith(H.index(),H.index(),y))return D;if(0==H.parentOffset)for(let w=H.depth-1;w>=0;w--){let F=H.index(w);if(H.node(w).canReplaceWith(F,F,y))return H.before(w+1);if(F>0)return null}if(H.parentOffset==H.parent.content.size)for(let w=H.depth-1;w>=0;w--){let F=H.indexAfter(w);if(H.node(w).canReplaceWith(F,F,y))return H.after(w+1);if(F<H.node(w).childCount)return null}return null}(Dt.doc,D,H.type);null!=w&&(D=y=w)}Dt.replaceRange(D,y,new T.p2(T.HY.from(H),0,0))}(this,D,y,H),this}deleteRange(D,y){return function(Dt,D,y){let H=Dt.doc.resolve(D),w=Dt.doc.resolve(y),F=ze(H,w);for(let W=0;W<F.length;W++){let Mt=F[W],Pt=W==F.length-1;if(Pt&&0==Mt||H.node(Mt).type.contentMatch.validEnd)return Dt.delete(H.start(Mt),w.end(Mt));if(Mt>0&&(Pt||H.node(Mt-1).canReplace(H.index(Mt-1),w.indexAfter(Mt-1))))return Dt.delete(H.before(Mt),w.after(Mt))}for(let W=1;W<=H.depth&&W<=w.depth;W++)if(D-H.start(W)==H.depth-W&&y>H.end(W)&&w.end(W)-y!=w.depth-W)return Dt.delete(H.before(W),y);Dt.delete(D,y)}(this,D,y),this}lift(D,y){return function(Dt,D,y){let{$from:H,$to:w,depth:F}=D,W=H.before(F+1),Mt=w.after(F+1),Pt=W,N=Mt,s=T.HY.empty,d=0;for(let I=F,$=!1;I>y;I--)$||H.index(I)>0?($=!0,s=T.HY.from(H.node(I).copy(s)),d++):Pt--;let g=T.HY.empty,A=0;for(let I=F,$=!1;I>y;I--)$||w.after(I+1)<w.end(I)?($=!0,g=T.HY.from(w.node(I).copy(g)),A++):N++;Dt.step(new bt(Pt,N,W,Mt,new T.p2(s.append(g),d,A),s.size-d,!0))}(this,D,y),this}join(D,y=1){return function(Dt,D,y){let H=new Ot(D-y,D+y,T.p2.empty,!0);Dt.step(H)}(this,D,y),this}wrap(D,y){return function(Dt,D,y){let H=T.HY.empty;for(let W=y.length-1;W>=0;W--){if(H.size){let Mt=y[W].type.contentMatch.matchFragment(H);if(!Mt||!Mt.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}H=T.HY.from(y[W].type.create(y[W].attrs,H))}let w=D.start,F=D.end;Dt.step(new bt(w,F,w,F,new T.p2(H,0,0),y.length,!0))}(this,D,y),this}setBlockType(D,y=D,H,w=null){return function(Dt,D,y,H,w){if(!H.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let F=Dt.steps.length;Dt.doc.nodesBetween(D,y,(W,Mt)=>{if(W.isTextblock&&!W.hasMarkup(H,w)&&function(Dt,D,y){let H=Dt.resolve(D),w=H.index();return H.parent.canReplaceWith(w,w+1,y)}(Dt.doc,Dt.mapping.slice(F).map(Mt),H)){Dt.clearIncompatible(Dt.mapping.slice(F).map(Mt,1),H);let Pt=Dt.mapping.slice(F),N=Pt.map(Mt,1),s=Pt.map(Mt+W.nodeSize,1);return Dt.step(new bt(N,s,N+1,s-1,new T.p2(T.HY.from(H.create(w,null,W.marks)),0,0),1,!0)),!1}})}(this,D,y,H,w),this}setNodeMarkup(D,y,H=null,w){return function(Dt,D,y,H,w){let F=Dt.doc.nodeAt(D);if(!F)throw new RangeError("No node at given position");y||(y=F.type);let W=y.create(H,null,w||F.marks);if(F.isLeaf)return Dt.replaceWith(D,D+F.nodeSize,W);if(!y.validContent(F.content))throw new RangeError("Invalid content for node type "+y.name);Dt.step(new bt(D,D+F.nodeSize,D+1,D+F.nodeSize-1,new T.p2(T.HY.from(W),0,0),1,!0))}(this,D,y,H,w),this}setNodeAttribute(D,y,H){return this.step(new Ue(D,y,H)),this}addNodeMark(D,y){return this.step(new ht(D,y)),this}removeNodeMark(D,y){if(!(y instanceof T.vc)){let H=this.doc.nodeAt(D);if(!H)throw new RangeError("No node at position "+D);if(!(y=y.isInSet(H.marks)))return this}return this.step(new Z(D,y)),this}split(D,y=1,H){return function(Dt,D,y=1,H){let w=Dt.doc.resolve(D),F=T.HY.empty,W=T.HY.empty;for(let Mt=w.depth,Pt=w.depth-y,N=y-1;Mt>Pt;Mt--,N--){F=T.HY.from(w.node(Mt).copy(F));let s=H&&H[N];W=T.HY.from(s?s.type.create(s.attrs,W):w.node(Mt).copy(W))}Dt.step(new Ot(D,D,new T.p2(F.append(W),y,y),!0))}(this,D,y,H),this}addMark(D,y,H){return function(Dt,D,y,H){let W,Mt,w=[],F=[];Dt.doc.nodesBetween(D,y,(Pt,N,s)=>{if(!Pt.isInline)return;let d=Pt.marks;if(!H.isInSet(d)&&s.type.allowsMarkType(H.type)){let g=Math.max(N,D),A=Math.min(N+Pt.nodeSize,y),I=H.addToSet(d);for(let $=0;$<d.length;$++)d[$].isInSet(I)||(W&&W.to==g&&W.mark.eq(d[$])?W.to=A:w.push(W=new ut(g,A,d[$])));Mt&&Mt.to==g?Mt.to=A:F.push(Mt=new _t(g,A,H))}}),w.forEach(Pt=>Dt.step(Pt)),F.forEach(Pt=>Dt.step(Pt))}(this,D,y,H),this}removeMark(D,y,H){return function(Dt,D,y,H){let w=[],F=0;Dt.doc.nodesBetween(D,y,(W,Mt)=>{if(!W.isInline)return;F++;let Pt=null;if(H instanceof T.ZU){let s,N=W.marks;for(;s=H.isInSet(N);)(Pt||(Pt=[])).push(s),N=s.removeFromSet(N)}else H?H.isInSet(W.marks)&&(Pt=[H]):Pt=W.marks;if(Pt&&Pt.length){let N=Math.min(Mt+W.nodeSize,y);for(let s=0;s<Pt.length;s++){let g,d=Pt[s];for(let A=0;A<w.length;A++){let I=w[A];I.step==F-1&&d.eq(w[A].style)&&(g=I)}g?(g.to=N,g.step=F):w.push({style:d,from:Math.max(Mt,D),to:N,step:F})}}}),w.forEach(W=>Dt.step(new ut(W.from,W.to,W.style)))}(this,D,y,H),this}clearIncompatible(D,y,H){return function(Dt,D,y,H=y.contentMatch){let w=Dt.doc.nodeAt(D),F=[],W=D+1;for(let Mt=0;Mt<w.childCount;Mt++){let Pt=w.child(Mt),N=W+Pt.nodeSize,s=H.matchType(Pt.type);if(s){H=s;for(let d=0;d<Pt.marks.length;d++)y.allowsMarkType(Pt.marks[d].type)||Dt.step(new ut(W,N,Pt.marks[d]))}else F.push(new Ot(W,N,T.p2.empty));W=N}if(!H.validEnd){let Mt=H.fillBefore(T.HY.empty,!0);Dt.replace(W,W,new T.p2(Mt,0,0))}for(let Mt=F.length-1;Mt>=0;Mt--)Dt.step(F[Mt])}(this,D,y,H),this}}},43594:(ee,yt,a)=>{a.d(yt,{EH:()=>Je,p:()=>en,tk:()=>Ko});var T=a(62463),r=a(77346),E=a(38480);const b=function(o){for(var e=0;;e++)if(!(o=o.previousSibling))return e},p=function(o){let e=o.assignedSlot||o.parentNode;return e&&11==e.nodeType?e.host:e};let Y=null;const R=function(o,e,i){let c=Y||(Y=document.createRange());return c.setEnd(o,null==i?o.nodeValue.length:i),c.setStart(o,e||0),c},X=function(o,e,i,c){return i&&(Ct(o,e,i,c,-1)||Ct(o,e,i,c,1))},j=/^(img|br|input|textarea|hr)$/i;function Ct(o,e,i,c,f){for(;;){if(o==i&&e==c)return!0;if(e==(f<0?0:dt(o))){let m=o.parentNode;if(!m||1!=m.nodeType||vt(o)||j.test(o.nodeName)||"false"==o.contentEditable)return!1;e=b(o)+(f<0?0:1),o=m}else{if(1!=o.nodeType)return!1;if("false"==(o=o.childNodes[e+(f<0?-1:0)]).contentEditable)return!1;e=f<0?dt(o):0}}}function dt(o){return 3==o.nodeType?o.nodeValue.length:o.childNodes.length}function vt(o){let e;for(let i=o;i&&!(e=i.pmViewDesc);i=i.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==o||e.contentDOM==o)}const gt=function(o){return o.focusNode&&X(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)};function Tt(o,e){let i=document.createEvent("Event");return i.initEvent("keydown",!0,!0),i.keyCode=o,i.key=i.code=e,i}const At="undefined"!=typeof navigator?navigator:null,_t="undefined"!=typeof document?document:null,ut=At&&At.userAgent||"",ht=/Edge\/(\d+)/.exec(ut),Z=/MSIE \d/.exec(ut),Ot=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ut),bt=!!(Z||Ot||ht),Nt=Z?document.documentMode:Ot?+Ot[1]:ht?+ht[1]:0,Ht=!bt&&/gecko\/(\d+)/i.test(ut);Ht&&/Firefox\/(\d+)/.exec(ut);const xt=!bt&&/Chrome\/(\d+)/.exec(ut),Wt=!!xt,Yt=xt?+xt[1]:0,qt=!bt&&!!At&&/Apple Computer/.test(At.vendor),ft=qt&&(/Mobile\/\w+/.test(ut)||!!At&&At.maxTouchPoints>2),k=ft||!!At&&/Mac/.test(At.platform),st=/Android \d/.test(ut),ot=!!_t&&"webkitFontSmoothing"in _t.documentElement.style,at=ot?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function J(o){return{left:0,right:o.documentElement.clientWidth,top:0,bottom:o.documentElement.clientHeight}}function V(o,e){return"number"==typeof o?o:o[e]}function rt(o){let e=o.getBoundingClientRect();return{left:e.left,right:e.left+o.clientWidth*(e.width/o.offsetWidth||1),top:e.top,bottom:e.top+o.clientHeight*(e.height/o.offsetHeight||1)}}function Ft(o,e,i){let c=o.someProp("scrollThreshold")||0,f=o.someProp("scrollMargin")||5,m=o.dom.ownerDocument;for(let x=i||o.dom;x;x=p(x)){if(1!=x.nodeType)continue;let t=x,n=t==m.body,l=n?J(m):rt(t),u=0,_=0;if(e.top<l.top+V(c,"top")?_=-(l.top-e.top+V(f,"top")):e.bottom>l.bottom-V(c,"bottom")&&(_=e.bottom-l.bottom+V(f,"bottom")),e.left<l.left+V(c,"left")?u=-(l.left-e.left+V(f,"left")):e.right>l.right-V(c,"right")&&(u=e.right-l.right+V(f,"right")),u||_)if(n)m.defaultView.scrollBy(u,_);else{let v=t.scrollLeft,M=t.scrollTop;_&&(t.scrollTop+=_),u&&(t.scrollLeft+=u);let S=t.scrollLeft-v,K=t.scrollTop-M;e={left:e.left-S,top:e.top-K,right:e.right-S,bottom:e.bottom-K}}if(n)break}}function ne(o){let e=[],i=o.ownerDocument;for(let c=o;c&&(e.push({dom:c,top:c.scrollTop,left:c.scrollLeft}),o!=i);c=p(c));return e}function Qt(o,e){for(let i=0;i<o.length;i++){let{dom:c,top:f,left:m}=o[i];c.scrollTop!=f+e&&(c.scrollTop=f+e),c.scrollLeft!=m&&(c.scrollLeft=m)}}let Ee=null;function we(o,e){let i,f,c=2e8,m=0,x=e.top,t=e.top;for(let n=o.firstChild,l=0;n;n=n.nextSibling,l++){let u;if(1==n.nodeType)u=n.getClientRects();else{if(3!=n.nodeType)continue;u=R(n).getClientRects()}for(let _=0;_<u.length;_++){let v=u[_];if(v.top<=x&&v.bottom>=t){x=Math.max(v.bottom,x),t=Math.min(v.top,t);let M=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(M<c){i=n,c=M,f=M&&3==i.nodeType?{left:v.right<e.left?v.right:v.left,top:e.top}:e,1==n.nodeType&&M&&(m=l+(e.left>=(v.left+v.right)/2?1:0));continue}}!i&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(m=l+1)}}return i&&3==i.nodeType?function(o,e){let i=o.nodeValue.length,c=document.createRange();for(let f=0;f<i;f++){c.setEnd(o,f+1),c.setStart(o,f);let m=Be(c,1);if(m.top!=m.bottom&&Ke(e,m))return{node:o,offset:f+(e.left>=(m.left+m.right)/2?1:0)}}return{node:o,offset:0}}(i,f):!i||c&&1==i.nodeType?{node:o,offset:m}:we(i,f)}function Ke(o,e){return o.left>=e.left-1&&o.left<=e.right+1&&o.top>=e.top-1&&o.top<=e.bottom+1}function Ne(o,e,i){let c=o.childNodes.length;if(c&&i.top<i.bottom)for(let f=Math.max(0,Math.min(c-1,Math.floor(c*(e.top-i.top)/(i.bottom-i.top))-2)),m=f;;){let x=o.childNodes[m];if(1==x.nodeType){let t=x.getClientRects();for(let n=0;n<t.length;n++){let l=t[n];if(Ke(e,l))return Ne(x,e,l)}}if((m=(m+1)%c)==f)break}return o}function Re(o,e){let c,i=o.dom.ownerDocument,f=0;if(i.caretPositionFromPoint)try{let n=i.caretPositionFromPoint(e.left,e.top);n&&({offsetNode:c,offset:f}=n)}catch(n){}if(!c&&i.caretRangeFromPoint){let n=i.caretRangeFromPoint(e.left,e.top);n&&({startContainer:c,startOffset:f}=n)}let x,m=(o.root.elementFromPoint?o.root:i).elementFromPoint(e.left,e.top);if(!m||!o.dom.contains(1!=m.nodeType?m.parentNode:m)){let n=o.dom.getBoundingClientRect();if(!Ke(e,n)||(m=Ne(o.dom,e,n),!m))return null}if(qt)for(let n=m;c&&n;n=p(n))n.draggable&&(c=void 0);if(m=function(o,e){let i=o.parentNode;return i&&/^li$/i.test(i.nodeName)&&e.left<o.getBoundingClientRect().left?i:o}(m,e),c){if(Ht&&1==c.nodeType&&(f=Math.min(f,c.childNodes.length),f<c.childNodes.length)){let l,n=c.childNodes[f];"IMG"==n.nodeName&&(l=n.getBoundingClientRect()).right<=e.left&&l.bottom>e.top&&f++}c==o.dom&&f==c.childNodes.length-1&&1==c.lastChild.nodeType&&e.top>c.lastChild.getBoundingClientRect().bottom?x=o.state.doc.content.size:(0==f||1!=c.nodeType||"BR"!=c.childNodes[f-1].nodeName)&&(x=function(o,e,i,c){let f=-1;for(let m=e;m!=o.dom;){let x=o.docView.nearestDesc(m,!0);if(!x)return null;if(x.node.isBlock&&x.parent){let t=x.dom.getBoundingClientRect();if(t.left>c.left||t.top>c.top)f=x.posBefore;else{if(!(t.right<c.left||t.bottom<c.top))break;f=x.posAfter}}m=x.dom.parentNode}return f>-1?f:o.docView.posFromDOM(e,i,1)}(o,c,f,e))}null==x&&(x=function(o,e,i){let{node:c,offset:f}=we(e,i),m=-1;if(1==c.nodeType&&!c.firstChild){let x=c.getBoundingClientRect();m=x.left!=x.right&&i.left>(x.left+x.right)/2?1:-1}return o.docView.posFromDOM(c,f,m)}(o,m,e));let t=o.docView.nearestDesc(m,!0);return{pos:x,inside:t?t.posAtStart-t.border:-1}}function Be(o,e){let i=o.getClientRects();return i.length?i[e<0?0:i.length-1]:o.getBoundingClientRect()}const Fe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Le(o,e,i){let{node:c,offset:f,atom:m}=o.docView.domFromPos(e,i<0?-1:1),x=ot||Ht;if(3==c.nodeType){if(!x||!Fe.test(c.nodeValue)&&(i<0?f:f!=c.nodeValue.length)){let n=f,l=f,u=i<0?1:-1;return i<0&&!f?(l++,u=-1):i>=0&&f==c.nodeValue.length?(n--,u=1):i<0?n--:l++,De(Be(R(c,n,l),1),u<0)}{let n=Be(R(c,f,f),i);if(Ht&&f&&/\s/.test(c.nodeValue[f-1])&&f<c.nodeValue.length){let l=Be(R(c,f-1,f-1),-1);if(l.top==n.top){let u=Be(R(c,f,f+1),-1);if(u.top!=n.top)return De(u,u.left<l.left)}}return n}}if(!o.state.doc.resolve(e-(m||0)).parent.inlineContent){if(null==m&&f&&(i<0||f==dt(c))){let n=c.childNodes[f-1];if(1==n.nodeType)return Ze(n.getBoundingClientRect(),!1)}if(null==m&&f<dt(c)){let n=c.childNodes[f];if(1==n.nodeType)return Ze(n.getBoundingClientRect(),!0)}return Ze(c.getBoundingClientRect(),i>=0)}if(null==m&&f&&(i<0||f==dt(c))){let n=c.childNodes[f-1],l=3==n.nodeType?R(n,dt(n)-(x?0:1)):1!=n.nodeType||"BR"==n.nodeName&&n.nextSibling?null:n;if(l)return De(Be(l,1),!1)}if(null==m&&f<dt(c)){let n=c.childNodes[f];for(;n.pmViewDesc&&n.pmViewDesc.ignoreForCoords;)n=n.nextSibling;let l=n?3==n.nodeType?R(n,0,x?0:1):1==n.nodeType?n:null:null;if(l)return De(Be(l,-1),!0)}return De(Be(3==c.nodeType?R(c):c,-i),i>=0)}function De(o,e){if(0==o.width)return o;let i=e?o.left:o.right;return{top:o.top,bottom:o.bottom,left:i,right:i}}function Ze(o,e){if(0==o.height)return o;let i=e?o.top:o.bottom;return{top:i,bottom:i,left:o.left,right:o.right}}function Oe(o,e,i){let c=o.state,f=o.root.activeElement;c!=e&&o.updateState(e),f!=o.dom&&o.focus();try{return i()}finally{c!=e&&o.updateState(c),f!=o.dom&&f&&f.focus()}}const Qe=/[\u0590-\u08ac]/;let Ue=null,Ae=null,ve=!1;class F{constructor(e,i,c,f){this.parent=e,this.children=i,this.dom=c,this.contentDOM=f,this.dirty=0,c.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,i,c){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let i=0;i<this.children.length;i++)e+=this.children[i].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let i=0,c=this.posAtStart;;i++){let f=this.children[i];if(f==e)return c;c+=f.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,i,c){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(c<0){let m,x;if(e==this.contentDOM)m=e.childNodes[i-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;m=e.previousSibling}for(;m&&(!(x=m.pmViewDesc)||x.parent!=this);)m=m.previousSibling;return m?this.posBeforeChild(x)+x.size:this.posAtStart}{let m,x;if(e==this.contentDOM)m=e.childNodes[i];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;m=e.nextSibling}for(;m&&(!(x=m.pmViewDesc)||x.parent!=this);)m=m.nextSibling;return m?this.posBeforeChild(x):this.posAtEnd}}let f;if(e==this.dom&&this.contentDOM)f=i>b(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))f=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==i)for(let m=e;;m=m.parentNode){if(m==this.dom){f=!1;break}if(m.previousSibling)break}if(null==f&&i==e.childNodes.length)for(let m=e;;m=m.parentNode){if(m==this.dom){f=!0;break}if(m.nextSibling)break}}return(null==f?c>0:f)?this.posAtEnd:this.posAtStart}nearestDesc(e,i=!1){for(let c=!0,f=e;f;f=f.parentNode){let x,m=this.getDesc(f);if(m&&(!i||m.node)){if(!c||!(x=m.nodeDOM)||(1==x.nodeType?x.contains(1==e.nodeType?e:e.parentNode):x==e))return m;c=!1}}}getDesc(e){let i=e.pmViewDesc;for(let c=i;c;c=c.parent)if(c==this)return i}posFromDOM(e,i,c){for(let f=e;f;f=f.parentNode){let m=this.getDesc(f);if(m)return m.localPosFromDOM(e,i,c)}return-1}descAt(e){for(let i=0,c=0;i<this.children.length;i++){let f=this.children[i],m=c+f.size;if(c==e&&m!=c){for(;!f.border&&f.children.length;)f=f.children[0];return f}if(e<m)return f.descAt(e-c-f.border);c=m}}domFromPos(e,i){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let m,c=0,f=0;for(let m=0;c<this.children.length;c++){let x=this.children[c],t=m+x.size;if(t>e||x instanceof g){f=e-m;break}m=t}if(f)return this.children[c].domFromPos(f-this.children[c].border,i);for(;c&&!(m=this.children[c-1]).size&&m instanceof W&&m.side>=0;c--);if(i<=0){let m,x=!0;for(;m=c?this.children[c-1]:null,m&&m.dom.parentNode!=this.contentDOM;c--,x=!1);return m&&i&&x&&!m.border&&!m.domAtom?m.domFromPos(m.size,i):{node:this.contentDOM,offset:m?b(m.dom)+1:0}}{let m,x=!0;for(;m=c<this.children.length?this.children[c]:null,m&&m.dom.parentNode!=this.contentDOM;c++,x=!1);return m&&x&&!m.border&&!m.domAtom?m.domFromPos(0,i):{node:this.contentDOM,offset:m?b(m.dom):this.contentDOM.childNodes.length}}}parseRange(e,i,c=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:i,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let f=-1,m=-1;for(let x=c,t=0;;t++){let n=this.children[t],l=x+n.size;if(-1==f&&e<=l){let u=x+n.border;if(e>=u&&i<=l-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,i,u);e=x;for(let _=t;_>0;_--){let v=this.children[_-1];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(1)){f=b(v.dom)+1;break}e-=v.size}-1==f&&(f=0)}if(f>-1&&(l>i||t==this.children.length-1)){i=l;for(let u=t+1;u<this.children.length;u++){let _=this.children[u];if(_.size&&_.dom.parentNode==this.contentDOM&&!_.emptyChildAt(-1)){m=b(_.dom);break}i+=_.size}-1==m&&(m=this.contentDOM.childNodes.length);break}x=l}return{node:this.contentDOM,from:e,to:i,fromOffset:f,toOffset:m}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let i=this.children[e<0?0:this.children.length-1];return 0==i.size||i.emptyChildAt(e)}domAfterPos(e){let{node:i,offset:c}=this.domFromPos(e,0);if(1!=i.nodeType||c==i.childNodes.length)throw new RangeError("No node after pos "+e);return i.childNodes[c]}setSelection(e,i,c,f=!1){let m=Math.min(e,i),x=Math.max(e,i);for(let v=0,M=0;v<this.children.length;v++){let S=this.children[v],K=M+S.size;if(m>M&&x<K)return S.setSelection(e-M-S.border,i-M-S.border,c,f);M=K}let t=this.domFromPos(e,e?-1:1),n=i==e?t:this.domFromPos(i,i?-1:1),l=c.getSelection(),u=!1;if((Ht||qt)&&e==i){let{node:v,offset:M}=t;if(3==v.nodeType){if(u=!(!M||"\n"!=v.nodeValue[M-1]),u&&M==v.nodeValue.length)for(let K,S=v;S;S=S.parentNode){if(K=S.nextSibling){"BR"==K.nodeName&&(t=n={node:K.parentNode,offset:b(K)+1});break}let et=S.pmViewDesc;if(et&&et.node&&et.node.isBlock)break}}else{let S=v.childNodes[M-1];u=S&&("BR"==S.nodeName||"false"==S.contentEditable)}}if(Ht&&l.focusNode&&l.focusNode!=n.node&&1==l.focusNode.nodeType){let v=l.focusNode.childNodes[l.focusOffset];v&&"false"==v.contentEditable&&(f=!0)}if(!(f||u&&qt)&&X(t.node,t.offset,l.anchorNode,l.anchorOffset)&&X(n.node,n.offset,l.focusNode,l.focusOffset))return;let _=!1;if((l.extend||e==i)&&!u){l.collapse(t.node,t.offset);try{e!=i&&l.extend(n.node,n.offset),_=!0}catch(v){}}if(!_){if(e>i){let M=t;t=n,n=M}let v=document.createRange();v.setEnd(n.node,n.offset),v.setStart(t.node,t.offset),l.removeAllRanges(),l.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,i){for(let c=0,f=0;f<this.children.length;f++){let m=this.children[f],x=c+m.size;if(c==x?e<=x&&i>=c:e<x&&i>c){let t=c+m.border,n=x-m.border;if(e>=t&&i<=n)return this.dirty=e==c||i==x?2:1,void(e!=t||i!=n||!m.contentLost&&m.dom.parentNode==this.contentDOM?m.markDirty(e-t,i-t):m.dirty=3);m.dirty=m.dom!=m.contentDOM||m.dom.parentNode!=this.contentDOM||m.children.length?3:2}c=x}this.dirty=2}markParentsDirty(){let e=1;for(let i=this.parent;i;i=i.parent,e++){let c=1==e?2:1;i.dirty<c&&(i.dirty=c)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class W extends F{constructor(e,i,c,f){let m,x=i.type.toDOM;if("function"==typeof x&&(x=x(c,()=>m?m.parent?m.parent.posBeforeChild(m):void 0:f)),!i.type.spec.raw){if(1!=x.nodeType){let t=document.createElement("span");t.appendChild(x),x=t}x.contentEditable="false",x.classList.add("ProseMirror-widget")}super(e,[],x,null),this.widget=i,this.widget=i,m=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let i=this.widget.spec.stopEvent;return!!i&&i(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Mt extends F{constructor(e,i,c,f){super(e,[],i,null),this.textDOM=c,this.text=f}get size(){return this.text.length}localPosFromDOM(e,i){return e!=this.textDOM?this.posAtStart+(i?this.size:0):this.posAtStart+i}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class Pt extends F{constructor(e,i,c,f){super(e,[],c,f),this.mark=i}static create(e,i,c,f){let m=f.nodeViews[i.type.name],x=m&&m(i,f,c);return(!x||!x.dom)&&(x=r.PW.renderSpec(document,i.type.spec.toDOM(i,c))),new Pt(e,i,x.dom,x.contentDOM||x.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,i){if(super.markDirty(e,i),0!=this.dirty){let c=this.parent;for(;!c.node;)c=c.parent;c.dirty<this.dirty&&(c.dirty=this.dirty),this.dirty=0}}slice(e,i,c){let f=Pt.create(this.parent,this.mark,!0,c),m=this.children,x=this.size;i<x&&(m=rn(m,i,x,c)),e>0&&(m=rn(m,0,e,c));for(let t=0;t<m.length;t++)m[t].parent=f;return f.children=m,f}}class N extends F{constructor(e,i,c,f,m,x,t,n,l){super(e,[],m,x),this.node=i,this.outerDeco=c,this.innerDeco=f,this.nodeDOM=t,x&&this.updateChildren(n,l)}static create(e,i,c,f,m,x){let n,t=m.nodeViews[i.type.name],l=t&&t(i,m,()=>n?n.parent?n.parent.posBeforeChild(n):void 0:x,c,f),u=l&&l.dom,_=l&&l.contentDOM;if(i.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(i.text);else u||({dom:u,contentDOM:_}=r.PW.renderSpec(document,i.type.spec.toDOM(i)));!_&&!i.isText&&"BR"!=u.nodeName&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),i.type.spec.draggable&&(u.draggable=!0));let v=u;return u=We(u,c,i),l?n=new A(e,i,c,f,u,_||null,v,l,m,x+1):i.isText?new d(e,i,c,f,u,v,m):new N(e,i,c,f,u,_||null,v,m,x+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let i=this.children.length-1;i>=0;i--){let c=this.children[i];if(this.dom.contains(c.dom.parentNode)){e.contentElement=c.dom.parentNode;break}}e.contentElement||(e.getContent=()=>r.HY.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,i,c){return 0==this.dirty&&e.eq(this.node)&&Ye(i,this.outerDeco)&&c.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,i){let c=this.node.inlineContent,f=i,m=e.composing?this.localCompositionInfo(e,i):null,x=m&&m.pos>-1?m:null,t=m&&m.pos<0,n=new _n(this,x&&x.node,e);(function(o,e,i,c){let f=e.locals(o),m=0;if(0==f.length){for(let l=0;l<o.childCount;l++){let u=o.child(l);c(u,f,e.forChild(m,u),l),m+=u.nodeSize}return}let x=0,t=[],n=null;for(let l=0;;){if(x<f.length&&f[x].to==m){let K,S=f[x++];for(;x<f.length&&f[x].to==m;)(K||(K=[S])).push(f[x++]);if(K){K.sort(un);for(let et=0;et<K.length;et++)i(K[et],l,!!n)}else i(S,l,!!n)}let u,_;if(n)_=-1,u=n,n=null;else{if(!(l<o.childCount))break;_=l,u=o.child(l++)}for(let S=0;S<t.length;S++)t[S].to<=m&&t.splice(S--,1);for(;x<f.length&&f[x].from<=m&&f[x].to>m;)t.push(f[x++]);let v=m+u.nodeSize;if(u.isText){let S=v;x<f.length&&f[x].from<S&&(S=f[x].from);for(let K=0;K<t.length;K++)t[K].to<S&&(S=t[K].to);S<v&&(n=u.cut(S-m),u=u.cut(0,S-m),v=S,_=-1)}c(u,u.isInline&&!u.isLeaf?t.filter(S=>!S.inline):t.slice(),e.forChild(m,u),_),m=v}})(this.node,this.innerDeco,(l,u,_)=>{l.spec.marks?n.syncToMarks(l.spec.marks,c,e):l.type.side>=0&&!_&&n.syncToMarks(u==this.node.childCount?r.vc.none:this.node.child(u).marks,c,e),n.placeWidget(l,e,f)},(l,u,_,v)=>{let M;n.syncToMarks(l.marks,c,e),n.findNodeMatch(l,u,_,v)||t&&e.state.selection.from>f&&e.state.selection.to<f+l.nodeSize&&(M=n.findIndexWithChild(m.node))>-1&&n.updateNodeAt(l,u,_,M,e)||n.updateNextNode(l,u,_,e,v)||n.addNode(l,u,_,e,f),f+=l.nodeSize}),n.syncToMarks([],c,e),this.node.isTextblock&&n.addTextblockHacks(),n.destroyRest(),(n.changed||2==this.dirty)&&(x&&this.protectLocalComposition(e,x),I(this.contentDOM,this.children,e),ft&&function(o){if("UL"==o.nodeName||"OL"==o.nodeName){let e=o.style.cssText;o.style.cssText=e+"; list-style: square !important",window.getComputedStyle(o),o.style.cssText=e}}(this.dom))}localCompositionInfo(e,i){let{from:c,to:f}=e.state.selection;if(!(e.state.selection instanceof T.Bs)||c<i||f>i+this.node.content.size)return null;let m=e.domSelectionRange(),x=function(o,e){for(;;){if(3==o.nodeType)return o;if(1==o.nodeType&&e>0){if(o.childNodes.length>e&&3==o.childNodes[e].nodeType)return o.childNodes[e];e=dt(o=o.childNodes[e-1])}else{if(!(1==o.nodeType&&e<o.childNodes.length))return null;o=o.childNodes[e],e=0}}}(m.focusNode,m.focusOffset);if(!x||!this.dom.contains(x.parentNode))return null;if(this.node.inlineContent){let t=x.nodeValue,n=function(o,e,i,c){for(let f=0,m=0;f<o.childCount&&m<=c;){let x=o.child(f++),t=m;if(m+=x.nodeSize,!x.isText)continue;let n=x.text;for(;f<o.childCount;){let l=o.child(f++);if(m+=l.nodeSize,!l.isText)break;n+=l.text}if(m>=i){let l=t<c?n.lastIndexOf(e,c-t-1):-1;if(l>=0&&l+e.length+t>=i)return t+l;if(i==c&&n.length>=c+e.length-t&&n.slice(c-t,c-t+e.length)==e)return c}}return-1}(this.node.content,t,c-i,f-i);return n<0?null:{node:x,pos:n,text:t}}return{node:x,pos:-1,text:""}}protectLocalComposition(e,{node:i,pos:c,text:f}){if(this.getDesc(i))return;let m=i;for(;m.parentNode!=this.contentDOM;m=m.parentNode){for(;m.previousSibling;)m.parentNode.removeChild(m.previousSibling);for(;m.nextSibling;)m.parentNode.removeChild(m.nextSibling);m.pmViewDesc&&(m.pmViewDesc=void 0)}let x=new Mt(this,m,i,f);e.input.compositionNodes.push(x),this.children=rn(this.children,c,c+f.length,e,x)}update(e,i,c,f){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,i,c,f),0))}updateInner(e,i,c,f){this.updateOuterDeco(i),this.node=e,this.innerDeco=c,this.contentDOM&&this.updateChildren(f,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(Ye(e,this.outerDeco))return;let i=1!=this.nodeDOM.nodeType,c=this.dom;this.dom=ae(this.dom,this.nodeDOM,zt(this.outerDeco,this.node,i),zt(e,this.node,i)),this.dom!=c&&(c.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function s(o,e,i,c,f){return We(c,e,o),new N(void 0,o,e,i,c,c,c,f,0)}class d extends N{constructor(e,i,c,f,m,x,t){super(e,i,c,f,m,null,x,t,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,i,c,f){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(i),(0!=this.dirty||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,f.trackWrites==this.nodeDOM&&(f.trackWrites=null)),this.node=e,this.dirty=0,0))}inParent(){let e=this.parent.contentDOM;for(let i=this.nodeDOM;i;i=i.parentNode)if(i==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,i,c){return e==this.nodeDOM?this.posAtStart+Math.min(i,this.node.text.length):super.localPosFromDOM(e,i,c)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,i,c){let f=this.node.cut(e,i),m=document.createTextNode(f.text);return new d(this.parent,f,this.outerDeco,this.innerDeco,m,m,c)}markDirty(e,i){super.markDirty(e,i),this.dom!=this.nodeDOM&&(0==e||i==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}}class g extends F{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class A extends N{constructor(e,i,c,f,m,x,t,n,l,u){super(e,i,c,f,m,x,t,l,u),this.spec=n}update(e,i,c,f){if(3==this.dirty)return!1;if(this.spec.update){let m=this.spec.update(e,i,c);return m&&this.updateInner(e,i,c,f),m}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,i,c,f)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,i,c,f){this.spec.setSelection?this.spec.setSelection(e,i,c):super.setSelection(e,i,c,f)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function I(o,e,i){let c=o.firstChild,f=!1;for(let m=0;m<e.length;m++){let x=e[m],t=x.dom;if(t.parentNode==o){for(;t!=c;)c=je(c),f=!0;c=c.nextSibling}else f=!0,o.insertBefore(t,c);if(x instanceof Pt){let n=c?c.previousSibling:o.lastChild;I(x.contentDOM,x.children,i),c=n?n.nextSibling:o.firstChild}}for(;c;)c=je(c),f=!0;f&&i.trackWrites==o&&(i.trackWrites=null)}const $=function(o){o&&(this.nodeName=o)};$.prototype=Object.create(null);const it=[new $];function zt(o,e,i){if(0==o.length)return it;let c=i?it[0]:new $,f=[c];for(let m=0;m<o.length;m++){let x=o[m].type.attrs;if(x){x.nodeName&&f.push(c=new $(x.nodeName));for(let t in x){let n=x[t];null!=n&&(i&&1==f.length&&f.push(c=new $(e.isInline?"span":"div")),"class"==t?c.class=(c.class?c.class+" ":"")+n:"style"==t?c.style=(c.style?c.style+";":"")+n:"nodeName"!=t&&(c[t]=n))}}}return f}function ae(o,e,i,c){if(i==it&&c==it)return e;let f=e;for(let m=0;m<c.length;m++){let x=c[m],t=i[m];if(m){let n;t&&t.nodeName==x.nodeName&&f!=o&&(n=f.parentNode)&&n.nodeName.toLowerCase()==x.nodeName||(n=document.createElement(x.nodeName),n.pmIsDeco=!0,n.appendChild(f),t=it[0]),f=n}ue(f,t||it[0],x)}return f}function ue(o,e,i){for(let c in e)"class"!=c&&"style"!=c&&"nodeName"!=c&&!(c in i)&&o.removeAttribute(c);for(let c in i)"class"!=c&&"style"!=c&&"nodeName"!=c&&i[c]!=e[c]&&o.setAttribute(c,i[c]);if(e.class!=i.class){let c=e.class?e.class.split(" ").filter(Boolean):[],f=i.class?i.class.split(" ").filter(Boolean):[];for(let m=0;m<c.length;m++)-1==f.indexOf(c[m])&&o.classList.remove(c[m]);for(let m=0;m<f.length;m++)-1==c.indexOf(f[m])&&o.classList.add(f[m]);0==o.classList.length&&o.removeAttribute("class")}if(e.style!=i.style){if(e.style){let f,c=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;f=c.exec(e.style);)o.style.removeProperty(f[1])}i.style&&(o.style.cssText+=i.style)}}function We(o,e,i){return ae(o,o,it,zt(e,i,1!=o.nodeType))}function Ye(o,e){if(o.length!=e.length)return!1;for(let i=0;i<o.length;i++)if(!o[i].type.eq(e[i].type))return!1;return!0}function je(o){let e=o.nextSibling;return o.parentNode.removeChild(o),e}class _n{constructor(e,i,c){this.lock=i,this.view=c,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(o,e){let i=e,c=i.children.length,f=o.childCount,m=new Map,x=[];t:for(;f>0;){let t;for(;;)if(c){let l=i.children[c-1];if(!(l instanceof Pt)){t=l,c--;break}i=l,c=l.children.length}else{if(i==e)break t;c=i.parent.children.indexOf(i),i=i.parent}let n=t.node;if(n){if(n!=o.child(f-1))break;--f,m.set(t,f),x.push(t)}}return{index:f,matched:m,matches:x.reverse()}}(e.node.content,e)}destroyBetween(e,i){if(e!=i){for(let c=e;c<i;c++)this.top.children[c].destroy();this.top.children.splice(e,i-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,i,c){let f=0,m=this.stack.length>>1,x=Math.min(m,e.length);for(;f<x&&(f==m-1?this.top:this.stack[f+1<<1]).matchesMark(e[f])&&!1!==e[f].type.spec.spanning;)f++;for(;f<m;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),m--;for(;m<e.length;){this.stack.push(this.top,this.index+1);let t=-1;for(let n=this.index;n<Math.min(this.index+3,this.top.children.length);n++){let l=this.top.children[n];if(l.matchesMark(e[m])&&!this.isLocked(l.dom)){t=n;break}}if(t>-1)t>this.index&&(this.changed=!0,this.destroyBetween(this.index,t)),this.top=this.top.children[this.index];else{let n=Pt.create(this.top,e[m],i,c);this.top.children.splice(this.index,0,n),this.top=n,this.changed=!0}this.index=0,m++}}findNodeMatch(e,i,c,f){let x,m=-1;if(f>=this.preMatch.index&&(x=this.preMatch.matches[f-this.preMatch.index]).parent==this.top&&x.matchesNode(e,i,c))m=this.top.children.indexOf(x,this.index);else for(let t=this.index,n=Math.min(this.top.children.length,t+5);t<n;t++){let l=this.top.children[t];if(l.matchesNode(e,i,c)&&!this.preMatch.matched.has(l)){m=t;break}}return!(m<0||(this.destroyBetween(this.index,m),this.index++,0))}updateNodeAt(e,i,c,f,m){let x=this.top.children[f];return 3==x.dirty&&x.dom==x.contentDOM&&(x.dirty=2),!!x.update(e,i,c,m)&&(this.destroyBetween(this.index,f),this.index++,!0)}findIndexWithChild(e){for(;;){let i=e.parentNode;if(!i)return-1;if(i==this.top.contentDOM){let c=e.pmViewDesc;if(c)for(let f=this.index;f<this.top.children.length;f++)if(this.top.children[f]==c)return f;return-1}e=i}}updateNextNode(e,i,c,f,m){for(let x=this.index;x<this.top.children.length;x++){let t=this.top.children[x];if(t instanceof N){let n=this.preMatch.matched.get(t);if(null!=n&&n!=m)return!1;let l=t.dom;if((!this.isLocked(l)||e.isText&&t.node&&t.node.isText&&t.nodeDOM.nodeValue==e.text&&3!=t.dirty&&Ye(i,t.outerDeco))&&t.update(e,i,c,f))return this.destroyBetween(this.index,x),t.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,i,c,f,m){this.top.children.splice(this.index++,0,N.create(this.top,e,i,c,f,m)),this.changed=!0}placeWidget(e,i,c){let f=this.index<this.top.children.length?this.top.children[this.index]:null;if(!f||!f.matchesWidget(e)||e!=f.widget&&f.widget.type.toDOM.parentNode){let m=new W(this.top,e,i,c);this.top.children.splice(this.index++,0,m),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],i=this.top;for(;e instanceof Pt;)i=e,e=i.children[i.children.length-1];(!e||!(e instanceof d)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((qt||Wt)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",i),this.addHackNode("BR",this.top))}addHackNode(e,i){if(i==this.top&&this.index<i.children.length&&i.children[this.index].matchesHack(e))this.index++;else{let c=document.createElement(e);"IMG"==e&&(c.className="ProseMirror-separator",c.alt=""),"BR"==e&&(c.className="ProseMirror-trailingBreak");let f=new g(this.top,[],c,null);i!=this.top?i.children.push(f):i.children.splice(this.index++,0,f),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function un(o,e){return o.type.side-e.type.side}function rn(o,e,i,c,f){let m=[];for(let x=0,t=0;x<o.length;x++){let n=o[x],l=t,u=t+=n.size;l>=i||u<=e?m.push(n):(l<e&&m.push(n.slice(0,e-l,c)),f&&(m.push(f),f=void 0),u>i&&m.push(n.slice(i-l,n.size,c)))}return m}function Bt(o,e=null){let i=o.domSelectionRange(),c=o.state.doc;if(!i.focusNode)return null;let f=o.docView.nearestDesc(i.focusNode),m=f&&0==f.size,x=o.docView.posFromDOM(i.focusNode,i.focusOffset,1);if(x<0)return null;let n,l,t=c.resolve(x);if(gt(i)){for(n=t;f&&!f.node;)f=f.parent;let u=f.node;if(f&&u.isAtom&&T.qv.isSelectable(u)&&f.parent&&(!u.isInline||!function(o,e,i){for(let c=0==e,f=e==dt(o);c||f;){if(o==i)return!0;let m=b(o);if(!(o=o.parentNode))return!1;c=c&&0==m,f=f&&m==dt(o)}}(i.focusNode,i.focusOffset,f.dom))){let _=f.posBefore;l=new T.qv(x==_?t:c.resolve(_))}}else{let u=o.docView.posFromDOM(i.anchorNode,i.anchorOffset,1);if(u<0)return null;n=c.resolve(u)}return l||(l=Rt(o,n,t,"pointer"==e||o.state.selection.head<t.pos&&!m?1:-1)),l}function Lt(o){return o.editable?o.hasFocus():le(o)&&document.activeElement&&document.activeElement.contains(o.dom)}function Kt(o,e=!1){let i=o.state.selection;if(mt(o,i),Lt(o)){if(!e&&o.input.mouseDown&&o.input.mouseDown.allowDefault&&Wt){let c=o.domSelectionRange(),f=o.domObserver.currentSelection;if(c.anchorNode&&f.anchorNode&&X(c.anchorNode,c.anchorOffset,f.anchorNode,f.anchorOffset))return o.input.mouseDown.delayedSelectionSync=!0,void o.domObserver.setCurSelection()}if(o.domObserver.disconnectSelection(),o.cursorWrapper)!function(o){let e=o.domSelection(),i=document.createRange(),c=o.cursorWrapper.dom,f="IMG"==c.nodeName;f?i.setEnd(c.parentNode,b(c)+1):i.setEnd(c,0),i.collapse(!1),e.removeAllRanges(),e.addRange(i),!f&&!o.state.selection.visible&&bt&&Nt<=11&&(c.disabled=!0,c.disabled=!1)}(o);else{let m,x,{anchor:c,head:f}=i;$t&&!(i instanceof T.Bs)&&(i.$from.parent.inlineContent||(m=jt(o,i.from)),!i.empty&&!i.$from.parent.inlineContent&&(x=jt(o,i.to))),o.docView.setSelection(c,f,o.root,e),$t&&(m&&B(m),x&&B(x)),i.visible?o.dom.classList.remove("ProseMirror-hideselection"):(o.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(o){let e=o.dom.ownerDocument;e.removeEventListener("selectionchange",o.input.hideSelectionGuard);let i=o.domSelectionRange(),c=i.anchorNode,f=i.anchorOffset;e.addEventListener("selectionchange",o.input.hideSelectionGuard=()=>{(i.anchorNode!=c||i.anchorOffset!=f)&&(e.removeEventListener("selectionchange",o.input.hideSelectionGuard),setTimeout(()=>{(!Lt(o)||o.state.selection.visible)&&o.dom.classList.remove("ProseMirror-hideselection")},20))})}(o))}o.domObserver.setCurSelection(),o.domObserver.connectSelection()}}const $t=qt||Wt&&Yt<63;function jt(o,e){let{node:i,offset:c}=o.docView.domFromPos(e,0),f=c<i.childNodes.length?i.childNodes[c]:null,m=c?i.childNodes[c-1]:null;if(qt&&f&&"false"==f.contentEditable)return U(f);if(!(f&&"false"!=f.contentEditable||m&&"false"!=m.contentEditable)){if(f)return U(f);if(m)return U(m)}}function U(o){return o.contentEditable="true",qt&&o.draggable&&(o.draggable=!1,o.wasDraggable=!0),o}function B(o){o.contentEditable="false",o.wasDraggable&&(o.draggable=!0,o.wasDraggable=null)}function mt(o,e){if(e instanceof T.qv){let i=o.docView.descAt(e.from);i!=o.lastSelectedViewDesc&&(It(o),i&&i.selectNode(),o.lastSelectedViewDesc=i)}else It(o)}function It(o){o.lastSelectedViewDesc&&(o.lastSelectedViewDesc.parent&&o.lastSelectedViewDesc.deselectNode(),o.lastSelectedViewDesc=void 0)}function Rt(o,e,i,c){return o.someProp("createSelectionBetween",f=>f(o,e,i))||T.Bs.between(e,i,c)}function Xt(o){return!(o.editable&&!o.hasFocus())&&le(o)}function le(o){let e=o.domSelectionRange();if(!e.anchorNode)return!1;try{return o.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(o.editable||o.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(i){return!1}}function pe(o,e){let{$anchor:i,$head:c}=o.selection,f=e>0?i.max(c):i.min(c),m=f.parent.inlineContent?f.depth?o.doc.resolve(e>0?f.after():f.before()):null:f;return m&&T.Y1.findFrom(m,e)}function _e(o,e){return o.dispatch(o.state.tr.setSelection(e).scrollIntoView()),!0}function Ce(o,e,i){let c=o.state.selection;if(!(c instanceof T.Bs)){if(c instanceof T.qv&&c.node.isInline)return _e(o,new T.Bs(e>0?c.$to:c.$from));{let f=pe(o.state,e);return!!f&&_e(o,f)}}if(!c.empty||i.indexOf("s")>-1)return!1;if(o.endOfTextblock(e>0?"right":"left")){let f=pe(o.state,e);return!!(f&&f instanceof T.qv)&&_e(o,f)}if(!(k&&i.indexOf("m")>-1)){let x,f=c.$head,m=f.textOffset?null:e<0?f.nodeBefore:f.nodeAfter;if(!m||m.isText)return!1;let t=e<0?f.pos-m.nodeSize:f.pos;return!!(m.isAtom||(x=o.docView.descAt(t))&&!x.contentDOM)&&(T.qv.isSelectable(m)?_e(o,new T.qv(e<0?o.state.doc.resolve(f.pos-m.nodeSize):f)):!!ot&&_e(o,new T.Bs(o.state.doc.resolve(e<0?t:t+m.nodeSize))))}}function fe(o){return 3==o.nodeType?o.nodeValue.length:o.childNodes.length}function Me(o){let e=o.pmViewDesc;return e&&0==e.size&&(o.nextSibling||"BR"!=o.nodeName)}function ke(o){let e=o.domSelectionRange(),i=e.focusNode,c=e.focusOffset;if(!i)return;let f,m,x=!1;for(Ht&&1==i.nodeType&&c<fe(i)&&Me(i.childNodes[c])&&(x=!0);;)if(c>0){if(1!=i.nodeType)break;{let t=i.childNodes[c-1];if(Me(t))f=i,m=--c;else{if(3!=t.nodeType)break;i=t,c=i.nodeValue.length}}}else{if(C(i))break;{let t=i.previousSibling;for(;t&&Me(t);)f=i.parentNode,m=b(t),t=t.previousSibling;if(t)i=t,c=fe(i);else{if(i=i.parentNode,i==o.dom)break;c=0}}}x?P(o,i,c):f&&P(o,f,m)}function h(o){let e=o.domSelectionRange(),i=e.focusNode,c=e.focusOffset;if(!i)return;let m,x,f=fe(i);for(;;)if(c<f){if(1!=i.nodeType)break;if(!Me(i.childNodes[c]))break;m=i,x=++c}else{if(C(i))break;{let t=i.nextSibling;for(;t&&Me(t);)m=t.parentNode,x=b(t)+1,t=t.nextSibling;if(t)i=t,c=0,f=fe(i);else{if(i=i.parentNode,i==o.dom)break;c=f=0}}}m&&P(o,m,x)}function C(o){let e=o.pmViewDesc;return e&&e.node&&e.node.isBlock}function P(o,e,i){let c=o.domSelection();if(gt(c)){let m=document.createRange();m.setEnd(e,i),m.setStart(e,i),c.removeAllRanges(),c.addRange(m)}else c.extend&&c.extend(e,i);o.domObserver.setCurSelection();let{state:f}=o;setTimeout(()=>{o.state==f&&Kt(o)},50)}function O(o,e,i){let c=o.state.selection;if(c instanceof T.Bs&&!c.empty||i.indexOf("s")>-1||k&&i.indexOf("m")>-1)return!1;let{$from:f,$to:m}=c;if(!f.parent.inlineContent||o.endOfTextblock(e<0?"up":"down")){let x=pe(o.state,e);if(x&&x instanceof T.qv)return _e(o,x)}if(!f.parent.inlineContent){let x=e<0?f:m,t=c instanceof T.C1?T.Y1.near(x,e):T.Y1.findFrom(x,e);return!!t&&_e(o,t)}return!1}function L(o,e){if(!(o.state.selection instanceof T.Bs))return!0;let{$head:i,$anchor:c,empty:f}=o.state.selection;if(!i.sameParent(c))return!0;if(!f)return!1;if(o.endOfTextblock(e>0?"forward":"backward"))return!0;let m=!i.textOffset&&(e<0?i.nodeBefore:i.nodeAfter);if(m&&!m.isText){let x=o.state.tr;return e<0?x.delete(i.pos-m.nodeSize,i.pos):x.delete(i.pos,i.pos+m.nodeSize),o.dispatch(x),!0}return!1}function z(o,e,i){o.domObserver.stop(),e.contentEditable=i,o.domObserver.start()}function lt(o,e){o.someProp("transformCopied",M=>{e=M(e,o)});let i=[],{content:c,openStart:f,openEnd:m}=e;for(;f>1&&m>1&&1==c.childCount&&1==c.firstChild.childCount;){f--,m--;let M=c.firstChild;i.push(M.type.name,M.attrs!=M.type.defaultAttrs?M.attrs:null),c=M.content}let x=o.someProp("clipboardSerializer")||r.PW.fromSchema(o.state.schema),t=Pe(),n=t.createElement("div");n.appendChild(x.serializeFragment(c,{document:t}));let u,l=n.firstChild,_=0;for(;l&&1==l.nodeType&&(u=an[l.nodeName.toLowerCase()]);){for(let M=u.length-1;M>=0;M--){let S=t.createElement(u[M]);for(;n.firstChild;)S.appendChild(n.firstChild);n.appendChild(S),_++}l=n.firstChild}return l&&1==l.nodeType&&l.setAttribute("data-pm-slice",`${f} ${m}${_?` -${_}`:""} ${JSON.stringify(i)}`),{dom:n,text:o.someProp("clipboardTextSerializer",M=>M(e,o))||e.content.textBetween(0,e.content.size,"\n\n")}}function kt(o,e,i,c,f){let x,t,m=f.parent.type.spec.code;if(!i&&!e)return null;let n=e&&(c||m||!i);if(n){if(o.someProp("transformPastedText",v=>{e=v(e,m||c,o)}),m)return e?new r.p2(r.HY.from(o.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):r.p2.empty;let _=o.someProp("clipboardTextParser",v=>v(e,f,c,o));if(_)t=_;else{let v=f.marks(),{schema:M}=o.state,S=r.PW.fromSchema(M);x=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(K=>{let et=x.appendChild(document.createElement("p"));K&&et.appendChild(S.serializeNode(M.text(K,v)))})}}else o.someProp("transformPastedHTML",_=>{i=_(i,o)}),x=function(o){let e=/^(\s*<meta [^>]*>)*/.exec(o);e&&(o=o.slice(e[0].length));let f,i=Pe().createElement("div"),c=/<([a-z][^>\s]+)/i.exec(o);if((f=c&&an[c[1].toLowerCase()])&&(o=f.map(m=>"<"+m+">").join("")+o+f.map(m=>"</"+m+">").reverse().join("")),i.innerHTML=o,f)for(let m=0;m<f.length;m++)i=i.querySelector(f[m])||i;return i}(i),ot&&function(o){let e=o.querySelectorAll(Wt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let i=0;i<e.length;i++){let c=e[i];1==c.childNodes.length&&"\xa0"==c.textContent&&c.parentNode&&c.parentNode.replaceChild(o.ownerDocument.createTextNode(" "),c)}}(x);let l=x&&x.querySelector("[data-pm-slice]"),u=l&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(l.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let _=+u[3];_>0;_--){let v=x.firstChild;for(;v&&1!=v.nodeType;)v=v.nextSibling;if(!v)break;x=v}if(t||(t=(o.someProp("clipboardParser")||o.someProp("domParser")||r.aw.fromSchema(o.state.schema)).parseSlice(x,{preserveWhitespace:!(!n&&!u),context:f,ruleFromNode:v=>"BR"!=v.nodeName||v.nextSibling||!v.parentNode||wt.test(v.parentNode.nodeName)?null:{ignore:!0}})),u)t=function(o,e){if(!o.size)return o;let c,i=o.content.firstChild.type.schema;try{c=JSON.parse(e)}catch(t){return o}let{content:f,openStart:m,openEnd:x}=o;for(let t=c.length-2;t>=0;t-=2){let n=i.nodes[c[t]];if(!n||n.hasRequiredAttrs())break;f=r.HY.from(n.create(c[t+1],f)),m++,x++}return new r.p2(f,m,x)}(Ge(t,+u[1],+u[2]),u[4]);else if(t=r.p2.maxOpen(function(o,e){if(o.childCount<2)return o;for(let i=e.depth;i>=0;i--){let m,f=e.node(i).contentMatchAt(e.index(i)),x=[];if(o.forEach(t=>{if(!x)return;let l,n=f.findWrapping(t.type);if(!n)return x=null;if(l=x.length&&m.length&&se(n,m,t,x[x.length-1],0))x[x.length-1]=l;else{x.length&&(x[x.length-1]=de(x[x.length-1],m.length));let u=te(t,n);x.push(u),f=f.matchType(u.type),m=n}}),x)return r.HY.from(x)}return o}(t.content,f),!0),t.openStart||t.openEnd){let _=0,v=0;for(let M=t.content.firstChild;_<t.openStart&&!M.type.spec.isolating;_++,M=M.firstChild);for(let M=t.content.lastChild;v<t.openEnd&&!M.type.spec.isolating;v++,M=M.lastChild);t=Ge(t,_,v)}return o.someProp("transformPasted",_=>{t=_(t,o)}),t}const wt=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function te(o,e,i=0){for(let c=e.length-1;c>=i;c--)o=e[c].create(null,r.HY.from(o));return o}function se(o,e,i,c,f){if(f<o.length&&f<e.length&&o[f]==e[f]){let m=se(o,e,i,c.lastChild,f+1);if(m)return c.copy(c.content.replaceChild(c.childCount-1,m));if(c.contentMatchAt(c.childCount).matchType(f==o.length-1?i.type:o[f+1]))return c.copy(c.content.append(r.HY.from(te(i,o,f+1))))}}function de(o,e){if(0==e)return o;let i=o.content.replaceChild(o.childCount-1,de(o.lastChild,e-1)),c=o.contentMatchAt(o.childCount).fillBefore(r.HY.empty,!0);return o.copy(i.append(c))}function me(o,e,i,c,f,m){let x=e<0?o.firstChild:o.lastChild,t=x.content;return f<c-1&&(t=me(t,e,i,c,f+1,m)),f>=i&&(t=e<0?x.contentMatchAt(0).fillBefore(t,o.childCount>1||m<=f).append(t):t.append(x.contentMatchAt(x.childCount).fillBefore(r.HY.empty,!0))),o.replaceChild(e<0?0:o.childCount-1,x.copy(t))}function Ge(o,e,i){return e<o.openStart&&(o=new r.p2(me(o.content,-1,e,o.openStart,0,o.openEnd),e,o.openEnd)),i<o.openEnd&&(o=new r.p2(me(o.content,1,i,o.openEnd,0,0),o.openStart,i)),o}const an={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let nn=null;function Pe(){return nn||(nn=document.implementation.createHTMLDocument("title"))}const He={},qe={},Co={touchstart:!0,touchmove:!0};class Dn{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function pn(o,e){o.input.lastSelectionOrigin=e,o.input.lastSelectionTime=Date.now()}function Wn(o){o.someProp("handleDOMEvents",e=>{for(let i in e)o.input.eventHandlers[i]||o.dom.addEventListener(i,o.input.eventHandlers[i]=c=>Mn(o,c))})}function Mn(o,e){return o.someProp("handleDOMEvents",i=>{let c=i[e.type];return!!c&&(c(o,e)||e.defaultPrevented)})}function Kn(o,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let i=e.target;i!=o.dom;i=i.parentNode)if(!i||11==i.nodeType||i.pmViewDesc&&i.pmViewDesc.stopEvent(e))return!1;return!0}function In(o){return{left:o.clientX,top:o.clientY}}function Jn(o,e,i,c,f){if(-1==c)return!1;let m=o.state.doc.resolve(c);for(let x=m.depth+1;x>0;x--)if(o.someProp(e,t=>x>m.depth?t(o,i,m.nodeAfter,m.before(x),f,!0):t(o,i,m.node(x),m.before(x),f,!1)))return!0;return!1}function yn(o,e,i){o.focused||o.focus();let c=o.state.tr.setSelection(e);"pointer"==i&&c.setMeta("pointer",!0),o.dispatch(c)}function Qn(o,e,i,c){return Jn(o,"handleDoubleClickOn",e,i,c)||o.someProp("handleDoubleClick",f=>f(o,e,c))}function Oo(o,e,i,c){return Jn(o,"handleTripleClickOn",e,i,c)||o.someProp("handleTripleClick",f=>f(o,e,c))||function(o,e,i){if(0!=i.button)return!1;let c=o.state.doc;if(-1==e)return!!c.inlineContent&&(yn(o,T.Bs.create(c,0,c.content.size),"pointer"),!0);let f=c.resolve(e);for(let m=f.depth+1;m>0;m--){let x=m>f.depth?f.nodeAfter:f.node(m),t=f.before(m);if(x.inlineContent)yn(o,T.Bs.create(c,t+1,t+1+x.content.size),"pointer");else{if(!T.qv.isSelectable(x))continue;yn(o,T.qv.create(c,t),"pointer")}return!0}}(o,i,c)}function kn(o){return Bn(o)}qe.keydown=(o,e)=>{let i=e;if(o.input.shiftKey=16==i.keyCode||i.shiftKey,!$n(o,i)&&(o.input.lastKeyCode=i.keyCode,o.input.lastKeyCodeTime=Date.now(),!st||!Wt||13!=i.keyCode))if(229!=i.keyCode&&o.domObserver.forceFlush(),!ft||13!=i.keyCode||i.ctrlKey||i.altKey||i.metaKey)o.someProp("handleKeyDown",c=>c(o,i))||function(o,e){let i=e.keyCode,c=function(o){let e="";return o.ctrlKey&&(e+="c"),o.metaKey&&(e+="m"),o.altKey&&(e+="a"),o.shiftKey&&(e+="s"),e}(e);return 8==i||k&&72==i&&"c"==c?L(o,-1)||ke(o):46==i||k&&68==i&&"c"==c?L(o,1)||h(o):13==i||27==i||(37==i||k&&66==i&&"c"==c?Ce(o,-1,c)||ke(o):39==i||k&&70==i&&"c"==c?Ce(o,1,c)||h(o):38==i||k&&80==i&&"c"==c?O(o,-1,c)||ke(o):40==i||k&&78==i&&"c"==c?function(o){if(!qt||o.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:i}=o.domSelectionRange();if(e&&1==e.nodeType&&0==i&&e.firstChild&&"false"==e.firstChild.contentEditable){let c=e.firstChild;z(o,c,"true"),setTimeout(()=>z(o,c,"false"),20)}return!1}(o)||O(o,1,c)||h(o):c==(k?"m":"c")&&(66==i||73==i||89==i||90==i))}(o,i)?i.preventDefault():pn(o,"key");else{let c=Date.now();o.input.lastIOSEnter=c,o.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{o.input.lastIOSEnter==c&&(o.someProp("handleKeyDown",f=>f(o,Tt(13,"Enter"))),o.input.lastIOSEnter=0)},200)}},qe.keyup=(o,e)=>{16==e.keyCode&&(o.input.shiftKey=!1)},qe.keypress=(o,e)=>{let i=e;if($n(o,i)||!i.charCode||i.ctrlKey&&!i.altKey||k&&i.metaKey)return;if(o.someProp("handleKeyPress",f=>f(o,i)))return void i.preventDefault();let c=o.state.selection;if(!(c instanceof T.Bs&&c.$from.sameParent(c.$to))){let f=String.fromCharCode(i.charCode);!/[\r\n]/.test(f)&&!o.someProp("handleTextInput",m=>m(o,c.$from.pos,c.$to.pos,f))&&o.dispatch(o.state.tr.insertText(f).scrollIntoView()),i.preventDefault()}};const Gn=k?"metaKey":"ctrlKey";He.mousedown=(o,e)=>{let i=e;o.input.shiftKey=i.shiftKey;let c=kn(o),f=Date.now(),m="singleClick";f-o.input.lastClick.time<500&&function(o,e){let i=e.x-o.clientX,c=e.y-o.clientY;return i*i+c*c<100}(i,o.input.lastClick)&&!i[Gn]&&("singleClick"==o.input.lastClick.type?m="doubleClick":"doubleClick"==o.input.lastClick.type&&(m="tripleClick")),o.input.lastClick={time:f,x:i.clientX,y:i.clientY,type:m};let x=o.posAtCoords(In(i));!x||("singleClick"==m?(o.input.mouseDown&&o.input.mouseDown.done(),o.input.mouseDown=new Ao(o,x,i,!!c)):("doubleClick"==m?Qn:Oo)(o,x.pos,x.inside,i)?i.preventDefault():pn(o,"pointer"))};class Ao{constructor(e,i,c,f){let m,x;if(this.view=e,this.pos=i,this.event=c,this.flushed=f,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!c[Gn],this.allowDefault=c.shiftKey,i.inside>-1)m=e.state.doc.nodeAt(i.inside),x=i.inside;else{let u=e.state.doc.resolve(i.pos);m=u.parent,x=u.depth?u.before():0}const t=f?null:c.target,n=t?e.docView.nearestDesc(t,!0):null;this.target=n?n.dom:null;let{selection:l}=e.state;(0==c.button&&m.type.spec.draggable&&!1!==m.type.spec.selectable||l instanceof T.qv&&l.from<=x&&l.to>x)&&(this.mightDrag={node:m,pos:x,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!Ht||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),pn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Kt(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let i=this.pos;this.view.state.doc!=this.startDoc&&(i=this.view.posAtCoords(In(e))),this.updateAllowDefault(e),this.allowDefault||!i?pn(this.view,"pointer"):function(o,e,i,c,f){return Jn(o,"handleClickOn",e,i,c)||o.someProp("handleClick",m=>m(o,e,c))||(f?function(o,e){if(-1==e)return!1;let c,f,i=o.state.selection;i instanceof T.qv&&(c=i.node);let m=o.state.doc.resolve(e);for(let x=m.depth+1;x>0;x--){let t=x>m.depth?m.nodeAfter:m.node(x);if(T.qv.isSelectable(t)){f=c&&i.$from.depth>0&&x>=i.$from.depth&&m.before(i.$from.depth+1)==i.$from.pos?m.before(i.$from.depth):m.before(x);break}}return null!=f&&(yn(o,T.qv.create(o.state.doc,f),"pointer"),!0)}(o,i):function(o,e){if(-1==e)return!1;let i=o.state.doc.resolve(e),c=i.nodeAfter;return!!(c&&c.isAtom&&T.qv.isSelectable(c))&&(yn(o,new T.qv(i),"pointer"),!0)}(o,i))}(this.view,i.pos,i.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||qt&&this.mightDrag&&!this.mightDrag.node.isAtom||Wt&&!this.view.state.selection.visible&&Math.min(Math.abs(i.pos-this.view.state.selection.from),Math.abs(i.pos-this.view.state.selection.to))<=2)?(yn(this.view,T.Y1.near(this.view.state.doc.resolve(i.pos)),"pointer"),e.preventDefault()):pn(this.view,"pointer")}move(e){this.updateAllowDefault(e),pn(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function $n(o,e){return!!o.composing||!!(qt&&Math.abs(e.timeStamp-o.input.compositionEndedAt)<500)&&(o.input.compositionEndedAt=-2e8,!0)}He.touchstart=o=>{o.input.lastTouch=Date.now(),kn(o),pn(o,"pointer")},He.touchmove=o=>{o.input.lastTouch=Date.now(),pn(o,"pointer")},He.contextmenu=o=>kn(o);const wn=st?5e3:-1;function Rn(o,e){clearTimeout(o.input.composingTimeout),e>-1&&(o.input.composingTimeout=setTimeout(()=>Bn(o),e))}function Pn(o){for(o.composing&&(o.input.composing=!1,o.input.compositionEndedAt=function(){let o=document.createEvent("Event");return o.initEvent("event",!0,!0),o.timeStamp}());o.input.compositionNodes.length>0;)o.input.compositionNodes.pop().markParentsDirty()}function Bn(o,e=!1){if(!(st&&o.domObserver.flushingSoon>=0)){if(o.domObserver.forceFlush(),Pn(o),e||o.docView&&o.docView.dirty){let i=Bt(o);return i&&!i.eq(o.state.selection)?o.dispatch(o.state.tr.setSelection(i)):o.updateState(o.state),!0}return!1}}qe.compositionstart=qe.compositionupdate=o=>{if(!o.composing){o.domObserver.flush();let{state:e}=o,i=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!i.textOffset&&i.parentOffset&&i.nodeBefore.marks.some(c=>!1===c.type.spec.inclusive)))o.markCursor=o.state.storedMarks||i.marks(),Bn(o,!0),o.markCursor=null;else if(Bn(o),Ht&&e.selection.empty&&i.parentOffset&&!i.textOffset&&i.nodeBefore.marks.length){let c=o.domSelectionRange();for(let f=c.focusNode,m=c.focusOffset;f&&1==f.nodeType&&0!=m;){let x=m<0?f.lastChild:f.childNodes[m-1];if(!x)break;if(3==x.nodeType){o.domSelection().collapse(x,x.nodeValue.length);break}f=x,m=-1}}o.input.composing=!0}Rn(o,wn)},qe.compositionend=(o,e)=>{o.composing&&(o.input.composing=!1,o.input.compositionEndedAt=e.timeStamp,Rn(o,20))};const bn=bt&&Nt<15||ft&&at<604;function On(o,e,i,c,f){let m=kt(o,e,i,c,o.state.selection.$from);if(o.someProp("handlePaste",n=>n(o,f,m||r.p2.empty)))return!0;if(!m)return!1;let x=function(o){return 0==o.openStart&&0==o.openEnd&&1==o.content.childCount?o.content.firstChild:null}(m),t=x?o.state.tr.replaceSelectionWith(x,o.input.shiftKey):o.state.tr.replaceSelection(m);return o.dispatch(t.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}He.copy=qe.cut=(o,e)=>{let i=e,c=o.state.selection,f="cut"==i.type;if(c.empty)return;let m=bn?null:i.clipboardData,x=c.content(),{dom:t,text:n}=lt(o,x);m?(i.preventDefault(),m.clearData(),m.setData("text/html",t.innerHTML),m.setData("text/plain",n)):function(o,e){if(!o.dom.parentNode)return;let i=o.dom.parentNode.appendChild(document.createElement("div"));i.appendChild(e),i.style.cssText="position: fixed; left: -10000px; top: 10px";let c=getSelection(),f=document.createRange();f.selectNodeContents(e),o.dom.blur(),c.removeAllRanges(),c.addRange(f),setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i),o.focus()},50)}(o,t),f&&o.dispatch(o.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},qe.paste=(o,e)=>{let i=e;if(o.composing&&!st)return;let c=bn?null:i.clipboardData;c&&On(o,c.getData("text/plain"),c.getData("text/html"),o.input.shiftKey,i)?i.preventDefault():function(o,e){if(!o.dom.parentNode)return;let i=o.input.shiftKey||o.state.selection.$from.parent.type.spec.code,c=o.dom.parentNode.appendChild(document.createElement(i?"textarea":"div"));i||(c.contentEditable="true"),c.style.cssText="position: fixed; left: -10000px; top: 10px",c.focus(),setTimeout(()=>{o.focus(),c.parentNode&&c.parentNode.removeChild(c),i?On(o,c.value,null,o.input.shiftKey,e):On(o,c.textContent,c.innerHTML,o.input.shiftKey,e)},50)}(o,i)};class qn{constructor(e,i){this.slice=e,this.move=i}}const to=k?"altKey":"ctrlKey";He.dragstart=(o,e)=>{let i=e,c=o.input.mouseDown;if(c&&c.done(),!i.dataTransfer)return;let f=o.state.selection,m=f.empty?null:o.posAtCoords(In(i));if(!(m&&m.pos>=f.from&&m.pos<=(f instanceof T.qv?f.to-1:f.to)))if(c&&c.mightDrag)o.dispatch(o.state.tr.setSelection(T.qv.create(o.state.doc,c.mightDrag.pos)));else if(i.target&&1==i.target.nodeType){let l=o.docView.nearestDesc(i.target,!0);l&&l.node.type.spec.draggable&&l!=o.docView&&o.dispatch(o.state.tr.setSelection(T.qv.create(o.state.doc,l.posBefore)))}let x=o.state.selection.content(),{dom:t,text:n}=lt(o,x);i.dataTransfer.clearData(),i.dataTransfer.setData(bn?"Text":"text/html",t.innerHTML),i.dataTransfer.effectAllowed="copyMove",bn||i.dataTransfer.setData("text/plain",n),o.dragging=new qn(x,!i[to])},He.dragend=o=>{let e=o.dragging;window.setTimeout(()=>{o.dragging==e&&(o.dragging=null)},50)},qe.dragover=qe.dragenter=(o,e)=>e.preventDefault(),qe.drop=(o,e)=>{let i=e,c=o.dragging;if(o.dragging=null,!i.dataTransfer)return;let f=o.posAtCoords(In(i));if(!f)return;let m=o.state.doc.resolve(f.pos),x=c&&c.slice;x?o.someProp("transformPasted",S=>{x=S(x,o)}):x=kt(o,i.dataTransfer.getData(bn?"Text":"text/plain"),bn?null:i.dataTransfer.getData("text/html"),!1,m);let t=!(!c||i[to]);if(o.someProp("handleDrop",S=>S(o,i,x||r.p2.empty,t)))return void i.preventDefault();if(!x)return;i.preventDefault();let n=x?(0,E.nj)(o.state.doc,m.pos,x):m.pos;null==n&&(n=m.pos);let l=o.state.tr;t&&l.deleteSelection();let u=l.mapping.map(n),_=0==x.openStart&&0==x.openEnd&&1==x.content.childCount,v=l.doc;if(_?l.replaceRangeWith(u,u,x.content.firstChild):l.replaceRange(u,u,x),l.doc.eq(v))return;let M=l.doc.resolve(u);if(_&&T.qv.isSelectable(x.content.firstChild)&&M.nodeAfter&&M.nodeAfter.sameMarkup(x.content.firstChild))l.setSelection(new T.qv(M));else{let S=l.mapping.map(n);l.mapping.maps[l.mapping.maps.length-1].forEach((K,et,nt,Et)=>S=Et),l.setSelection(Rt(o,M,l.doc.resolve(S)))}o.focus(),o.dispatch(l.setMeta("uiEvent","drop"))},He.focus=o=>{o.input.lastFocus=Date.now(),o.focused||(o.domObserver.stop(),o.dom.classList.add("ProseMirror-focused"),o.domObserver.start(),o.focused=!0,setTimeout(()=>{o.docView&&o.hasFocus()&&!o.domObserver.currentSelection.eq(o.domSelectionRange())&&Kt(o)},20))},He.blur=(o,e)=>{let i=e;o.focused&&(o.domObserver.stop(),o.dom.classList.remove("ProseMirror-focused"),o.domObserver.start(),i.relatedTarget&&o.dom.contains(i.relatedTarget)&&o.domObserver.currentSelection.clear(),o.focused=!1)},He.beforeinput=(o,e)=>{if(Wt&&st&&"deleteContentBackward"==e.inputType){o.domObserver.flushSoon();let{domChangeCount:c}=o.input;setTimeout(()=>{if(o.input.domChangeCount!=c||(o.dom.blur(),o.focus(),o.someProp("handleKeyDown",m=>m(o,Tt(8,"Backspace")))))return;let{$cursor:f}=o.state.selection;f&&f.pos>0&&o.dispatch(o.state.tr.delete(f.pos-1,f.pos).scrollIntoView())},50)}};for(let o in qe)He[o]=qe[o];function Sn(o,e){if(o==e)return!0;for(let i in o)if(o[i]!==e[i])return!1;for(let i in e)if(!(i in o))return!1;return!0}class Ln{constructor(e,i){this.toDOM=e,this.spec=i||fn,this.side=this.spec.side||0}map(e,i,c,f){let{pos:m,deleted:x}=e.mapResult(i.from+f,this.side<0?-1:1);return x?null:new en(m-c,m-c,this)}valid(){return!0}eq(e){return this==e||e instanceof Ln&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Sn(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class sn{constructor(e,i){this.attrs=e,this.spec=i||fn}map(e,i,c,f){let m=e.map(i.from+f,this.spec.inclusiveStart?-1:1)-c,x=e.map(i.to+f,this.spec.inclusiveEnd?1:-1)-c;return m>=x?null:new en(m,x,this)}valid(e,i){return i.from<i.to}eq(e){return this==e||e instanceof sn&&Sn(this.attrs,e.attrs)&&Sn(this.spec,e.spec)}static is(e){return e.type instanceof sn}destroy(){}}class xn{constructor(e,i){this.attrs=e,this.spec=i||fn}map(e,i,c,f){let m=e.mapResult(i.from+f,1);if(m.deleted)return null;let x=e.mapResult(i.to+f,-1);return x.deleted||x.pos<=m.pos?null:new en(m.pos-c,x.pos-c,this)}valid(e,i){let m,{index:c,offset:f}=e.content.findIndex(i.from);return f==i.from&&!(m=e.child(c)).isText&&f+m.nodeSize==i.to}eq(e){return this==e||e instanceof xn&&Sn(this.attrs,e.attrs)&&Sn(this.spec,e.spec)}destroy(){}}class en{constructor(e,i,c){this.from=e,this.to=i,this.type=c}copy(e,i){return new en(e,i,this.type)}eq(e,i=0){return this.type.eq(e.type)&&this.from+i==e.from&&this.to+i==e.to}map(e,i,c){return this.type.map(e,this,i,c)}static widget(e,i,c){return new en(e,e,new Ln(i,c))}static inline(e,i,c,f){return new en(e,i,new sn(c,f))}static node(e,i,c,f){return new en(e,i,new xn(c,f))}get spec(){return this.type.spec}get inline(){return this.type instanceof sn}}const hn=[],fn={};class Je{constructor(e,i){this.local=e.length?e:hn,this.children=i.length?i:hn}static create(e,i){return i.length?Nn(i,e,0,fn):Xe}find(e,i,c){let f=[];return this.findInner(null==e?0:e,null==i?1e9:i,f,0,c),f}findInner(e,i,c,f,m){for(let x=0;x<this.local.length;x++){let t=this.local[x];t.from<=i&&t.to>=e&&(!m||m(t.spec))&&c.push(t.copy(t.from+f,t.to+f))}for(let x=0;x<this.children.length;x+=3)if(this.children[x]<i&&this.children[x+1]>e){let t=this.children[x]+1;this.children[x+2].findInner(e-t,i-t,c,f+t,m)}}map(e,i,c){return this==Xe||0==e.maps.length?this:this.mapInner(e,i,0,0,c||fn)}mapInner(e,i,c,f,m){let x;for(let t=0;t<this.local.length;t++){let n=this.local[t].map(e,c,f);n&&n.type.valid(i,n)?(x||(x=[])).push(n):m.onRemove&&m.onRemove(this.local[t].spec)}return this.children.length?function(o,e,i,c,f,m,x){let t=o.slice();for(let l=0,u=m;l<i.maps.length;l++){let _=0;i.maps[l].forEach((v,M,S,K)=>{let et=K-S-(M-v);for(let nt=0;nt<t.length;nt+=3){let Et=t[nt+1];if(Et<0||v>Et+u-_)continue;let St=t[nt]+u-_;M>=St?t[nt+1]=v<=St?-2:-1:S>=f&&et&&(t[nt]+=et,t[nt+1]+=et)}_+=et}),u=i.maps[l].map(u,-1)}let n=!1;for(let l=0;l<t.length;l+=3)if(t[l+1]<0){if(-2==t[l+1]){n=!0,t[l+1]=-1;continue}let u=i.map(o[l]+m),_=u-f;if(_<0||_>=c.content.size){n=!0;continue}let M=i.map(o[l+1]+m,-1)-f,{index:S,offset:K}=c.content.findIndex(_),et=c.maybeChild(S);if(et&&K==_&&K+et.nodeSize==M){let nt=t[l+2].mapInner(i,et,u+1,o[l]+m+1,x);nt!=Xe?(t[l]=_,t[l+1]=M,t[l+2]=nt):(t[l+1]=-2,n=!0)}else n=!0}if(n){let l=function(o,e,i,c,f,m,x){function t(n,l){for(let u=0;u<n.local.length;u++){let _=n.local[u].map(c,f,l);_?i.push(_):x.onRemove&&x.onRemove(n.local[u].spec)}for(let u=0;u<n.children.length;u+=3)t(n.children[u+2],n.children[u]+l+1)}for(let n=0;n<o.length;n+=3)-1==o[n+1]&&t(o[n+2],e[n]+m+1);return i}(t,o,e,i,f,m,x),u=Nn(l,c,0,x);e=u.local;for(let _=0;_<t.length;_+=3)t[_+1]<0&&(t.splice(_,3),_-=3);for(let _=0,v=0;_<u.children.length;_+=3){let M=u.children[_];for(;v<t.length&&t[v]<M;)v+=3;t.splice(v,0,u.children[_],u.children[_+1],u.children[_+2])}}return new Je(e.sort(ln),t)}(this.children,x||[],e,i,c,f,m):x?new Je(x.sort(ln),hn):Xe}add(e,i){return i.length?this==Xe?Je.create(e,i):this.addInner(e,i,0):this}addInner(e,i,c){let f,m=0;e.forEach((t,n)=>{let u,l=n+c;if(u=no(i,t,l)){for(f||(f=this.children.slice());m<f.length&&f[m]<n;)m+=3;f[m]==n?f[m+2]=f[m+2].addInner(t,u,l+1):f.splice(m,0,n,n+t.nodeSize,Nn(u,t,l+1,fn)),m+=3}});let x=eo(m?oo(i):i,-c);for(let t=0;t<x.length;t++)x[t].type.valid(e,x[t])||x.splice(t--,1);return new Je(x.length?this.local.concat(x).sort(ln):this.local,f||this.children)}remove(e){return 0==e.length||this==Xe?this:this.removeInner(e,0)}removeInner(e,i){let c=this.children,f=this.local;for(let m=0;m<c.length;m+=3){let x,t=c[m]+i,n=c[m+1]+i;for(let _,u=0;u<e.length;u++)(_=e[u])&&_.from>t&&_.to<n&&(e[u]=null,(x||(x=[])).push(_));if(!x)continue;c==this.children&&(c=this.children.slice());let l=c[m+2].removeInner(x,t+1);l!=Xe?c[m+2]=l:(c.splice(m,3),m-=3)}if(f.length)for(let x,m=0;m<e.length;m++)if(x=e[m])for(let t=0;t<f.length;t++)f[t].eq(x,i)&&(f==this.local&&(f=this.local.slice()),f.splice(t--,1));return c==this.children&&f==this.local?this:f.length||c.length?new Je(f,c):Xe}forChild(e,i){if(this==Xe)return this;if(i.isLeaf)return Je.empty;let c,f;for(let t=0;t<this.children.length;t+=3)if(this.children[t]>=e){this.children[t]==e&&(c=this.children[t+2]);break}let m=e+1,x=m+i.content.size;for(let t=0;t<this.local.length;t++){let n=this.local[t];if(n.from<x&&n.to>m&&n.type instanceof sn){let l=Math.max(m,n.from)-m,u=Math.min(x,n.to)-m;l<u&&(f||(f=[])).push(n.copy(l,u))}}if(f){let t=new Je(f.sort(ln),hn);return c?new mn([t,c]):t}return c||Xe}eq(e){if(this==e)return!0;if(!(e instanceof Je)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let i=0;i<this.local.length;i++)if(!this.local[i].eq(e.local[i]))return!1;for(let i=0;i<this.children.length;i+=3)if(this.children[i]!=e.children[i]||this.children[i+1]!=e.children[i+1]||!this.children[i+2].eq(e.children[i+2]))return!1;return!0}locals(e){return Fn(this.localsInner(e))}localsInner(e){if(this==Xe)return hn;if(e.inlineContent||!this.local.some(sn.is))return this.local;let i=[];for(let c=0;c<this.local.length;c++)this.local[c].type instanceof sn||i.push(this.local[c]);return i}}Je.empty=new Je([],[]),Je.removeOverlap=Fn;const Xe=Je.empty;class mn{constructor(e){this.members=e}map(e,i){const c=this.members.map(f=>f.map(e,i,fn));return mn.from(c)}forChild(e,i){if(i.isLeaf)return Je.empty;let c=[];for(let f=0;f<this.members.length;f++){let m=this.members[f].forChild(e,i);m!=Xe&&(m instanceof mn?c=c.concat(m.members):c.push(m))}return mn.from(c)}eq(e){if(!(e instanceof mn)||e.members.length!=this.members.length)return!1;for(let i=0;i<this.members.length;i++)if(!this.members[i].eq(e.members[i]))return!1;return!0}locals(e){let i,c=!0;for(let f=0;f<this.members.length;f++){let m=this.members[f].localsInner(e);if(m.length)if(i){c&&(i=i.slice(),c=!1);for(let x=0;x<m.length;x++)i.push(m[x])}else i=m}return i?Fn(c?i:i.sort(ln)):hn}static from(e){switch(e.length){case 0:return Xe;case 1:return e[0];default:return new mn(e.every(i=>i instanceof Je)?e:e.reduce((i,c)=>i.concat(c instanceof Je?c:c.members),[]))}}}function eo(o,e){if(!e||!o.length)return o;let i=[];for(let c=0;c<o.length;c++){let f=o[c];i.push(new en(f.from+e,f.to+e,f.type))}return i}function no(o,e,i){if(e.isLeaf)return null;let c=i+e.nodeSize,f=null;for(let x,m=0;m<o.length;m++)(x=o[m])&&x.from>i&&x.to<c&&((f||(f=[])).push(x),o[m]=null);return f}function oo(o){let e=[];for(let i=0;i<o.length;i++)null!=o[i]&&e.push(o[i]);return e}function Nn(o,e,i,c){let f=[],m=!1;e.forEach((t,n)=>{let l=no(o,t,n+i);if(l){m=!0;let u=Nn(l,t,i+n+1,c);u!=Xe&&f.push(n,n+t.nodeSize,u)}});let x=eo(m?oo(o):o,-i).sort(ln);for(let t=0;t<x.length;t++)x[t].type.valid(e,x[t])||(c.onRemove&&c.onRemove(x[t].spec),x.splice(t--,1));return x.length||f.length?new Je(x,f):Xe}function ln(o,e){return o.from-e.from||o.to-e.to}function Fn(o){let e=o;for(let i=0;i<e.length-1;i++){let c=e[i];if(c.from!=c.to)for(let f=i+1;f<e.length;f++){let m=e[f];if(m.from!=c.from){m.from<c.to&&(e==o&&(e=o.slice()),e[i]=c.copy(c.from,m.from),io(e,f,c.copy(m.from,c.to)));break}m.to!=c.to&&(e==o&&(e=o.slice()),e[f]=m.copy(m.from,c.to),io(e,f+1,m.copy(c.to,m.to)))}}return e}function io(o,e,i){for(;e<o.length&&ln(i,o[e])>0;)e++;o.splice(e,0,i)}function jn(o){let e=[];return o.someProp("decorations",i=>{let c=i(o.state);c&&c!=Xe&&e.push(c)}),o.cursorWrapper&&e.push(Je.create(o.state.doc,[o.cursorWrapper.deco])),mn.from(e)}const ro={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},so=bt&&Nt<=11;class ko{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class wo{constructor(e,i){this.view=e,this.handleDOMChange=i,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ko,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(c=>{for(let f=0;f<c.length;f++)this.queue.push(c[f]);bt&&Nt<=11&&c.some(f=>"childList"==f.type&&f.removedNodes.length||"characterData"==f.type&&f.oldValue.length>f.target.nodeValue.length)?this.flushSoon():this.flush()}),so&&(this.onCharData=c=>{this.queue.push({target:c.target,type:"characterData",oldValue:c.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,ro)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let i=0;i<e.length;i++)this.queue.push(e[i]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Xt(this.view)){if(this.suppressingSelectionUpdates)return Kt(this.view);if(bt&&Nt<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&X(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let c,i=new Set;for(let m=e.focusNode;m;m=p(m))i.add(m);for(let m=e.anchorNode;m;m=p(m))if(i.has(m)){c=m;break}let f=c&&this.view.docView.nearestDesc(c);return f&&f.ignoreMutation({type:"selection",target:3==c.nodeType?c.parentNode:c})?(this.setCurSelection(),!0):void 0}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let i=this.observer?this.observer.takeRecords():[];this.queue.length&&(i=this.queue.concat(i),this.queue.length=0);let c=e.domSelectionRange(),f=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(c)&&Xt(e)&&!this.ignoreSelectionChange(c),m=-1,x=-1,t=!1,n=[];if(e.editable)for(let u=0;u<i.length;u++){let _=this.registerMutation(i[u],n);_&&(m=m<0?_.from:Math.min(_.from,m),x=x<0?_.to:Math.max(_.to,x),_.typeOver&&(t=!0))}if(Ht&&n.length>1){let u=n.filter(_=>"BR"==_.nodeName);if(2==u.length){let _=u[0],v=u[1];_.parentNode&&_.parentNode.parentNode==v.parentNode?v.remove():_.remove()}}let l=null;m<0&&f&&e.input.lastFocus>Date.now()-200&&e.input.lastTouch<Date.now()-300&&gt(c)&&(l=Bt(e))&&l.eq(T.Y1.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Kt(e),this.currentSelection.set(c),e.scrollToSelection()):(m>-1||f)&&(m>-1&&(e.docView.markDirty(m,x),function(o){if(!lo.has(o)&&(lo.set(o,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(o.dom).whiteSpace))){if(o.requiresGeckoHackNode=Ht,ao)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ao=!0}}(e)),this.handleDOMChange(m,x,t,n),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(c)||Kt(e),this.currentSelection.set(c))}registerMutation(e,i){if(i.indexOf(e.target)>-1)return null;let c=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(c==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style"))||!c||c.ignoreMutation(e))return null;if("childList"==e.type){for(let u=0;u<e.addedNodes.length;u++)i.push(e.addedNodes[u]);if(c.contentDOM&&c.contentDOM!=c.dom&&!c.contentDOM.contains(e.target))return{from:c.posBefore,to:c.posAfter};let f=e.previousSibling,m=e.nextSibling;if(bt&&Nt<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:_,nextSibling:v}=e.addedNodes[u];(!_||Array.prototype.indexOf.call(e.addedNodes,_)<0)&&(f=_),(!v||Array.prototype.indexOf.call(e.addedNodes,v)<0)&&(m=v)}let x=f&&f.parentNode==e.target?b(f)+1:0,t=c.localPosFromDOM(e.target,x,-1),n=m&&m.parentNode==e.target?b(m):e.target.childNodes.length;return{from:t,to:c.localPosFromDOM(e.target,n,1)}}return"attributes"==e.type?{from:c.posAtStart-c.border,to:c.posAtEnd+c.border}:{from:c.posAtStart,to:c.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let lo=new WeakMap,ao=!1;function No(o){let e=o.pmViewDesc;if(e)return e.parseRule();if("BR"==o.nodeName&&o.parentNode){if(qt&&/^(ul|ol)$/i.test(o.parentNode.nodeName)){let i=document.createElement("div");return i.appendChild(document.createElement("li")),{skip:i}}if(o.parentNode.lastChild==o||qt&&/^(tr|table)$/i.test(o.parentNode.nodeName))return{ignore:!0}}else if("IMG"==o.nodeName&&o.getAttribute("mark-placeholder"))return{ignore:!0};return null}function co(o,e,i){return Math.max(i.anchor,i.head)>e.content.size?null:Rt(o,e.resolve(i.anchor),e.resolve(i.head))}function Vn(o,e,i){let c=o.depth,f=e?o.end():o.pos;for(;c>0&&(e||o.indexAfter(c)==o.node(c).childCount);)c--,f++,e=!1;if(i){let m=o.node(c).maybeChild(o.indexAfter(c));for(;m&&!m.isLeaf;)m=m.firstChild,f++}return f}class Ko{constructor(e,i){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Dn,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=i,this.state=i.state,this.directPlugins=i.plugins||[],this.directPlugins.forEach(zn),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=ho(this),po(this),this.nodeViews=fo(this),this.docView=s(this.state.doc,uo(this),jn(this),this.dom,this),this.domObserver=new wo(this,(c,f,m,x)=>function(o,e,i,c,f){if(e<0){let re=o.input.lastSelectionTime>Date.now()-50?o.input.lastSelectionOrigin:null,$e=Bt(o,re);if($e&&!o.state.selection.eq($e)){if(Wt&&st&&13===o.input.lastKeyCode&&Date.now()-100<o.input.lastKeyCodeTime&&o.someProp("handleKeyDown",An=>An(o,Tt(13,"Enter"))))return;let gn=o.state.tr.setSelection($e);"pointer"==re?gn.setMeta("pointer",!0):"key"==re&&gn.scrollIntoView(),o.dispatch(gn)}return}let m=o.state.doc.resolve(e),x=m.sharedDepth(i);e=m.before(x+1),i=o.state.doc.resolve(i).after(x+1);let _,v,t=o.state.selection,n=function(o,e,i){let l,{node:c,fromOffset:f,toOffset:m,from:x,to:t}=o.docView.parseRange(e,i),n=o.domSelectionRange(),u=n.anchorNode;if(u&&o.dom.contains(1==u.nodeType?u:u.parentNode)&&(l=[{node:u,offset:n.anchorOffset}],gt(n)||l.push({node:n.focusNode,offset:n.focusOffset})),Wt&&8===o.input.lastKeyCode)for(let et=m;et>f;et--){let nt=c.childNodes[et-1],Et=nt.pmViewDesc;if("BR"==nt.nodeName&&!Et){m=et;break}if(!Et||Et.size)break}let _=o.state.doc,v=o.someProp("domParser")||r.aw.fromSchema(o.state.schema),M=_.resolve(x),S=null,K=v.parse(c,{topNode:M.parent,topMatch:M.parent.contentMatchAt(M.index()),topOpen:!0,from:f,to:m,preserveWhitespace:"pre"!=M.parent.type.whitespace||"full",findPositions:l,ruleFromNode:No,context:M});if(l&&null!=l[0].pos){let et=l[0].pos,nt=l[1]&&l[1].pos;null==nt&&(nt=et),S={anchor:et+x,head:nt+x}}return{doc:K,sel:S,from:x,to:t}}(o,e,i),l=o.state.doc,u=l.slice(n.from,n.to);8===o.input.lastKeyCode&&Date.now()-100<o.input.lastKeyCodeTime?(_=o.state.selection.to,v="end"):(_=o.state.selection.from,v="start"),o.input.lastKeyCode=null;let M=function(o,e,i,c,f){let m=o.findDiffStart(e,i);if(null==m)return null;let{a:x,b:t}=o.findDiffEnd(e,i+o.size,i+e.size);return"end"==f&&(c-=x+Math.max(0,m-Math.min(x,t))-m),x<m&&o.size<e.size?(m-=c<=m&&c>=x?m-c:0,t=m+(t-x),x=m):t<m&&(m-=c<=m&&c>=t?m-c:0,x=m+(x-t),t=m),{start:m,endA:x,endB:t}}(u.content,n.doc.content,n.from,_,v);if((ft&&o.input.lastIOSEnter>Date.now()-225||st)&&f.some(re=>"DIV"==re.nodeName||"P"==re.nodeName||"LI"==re.nodeName)&&(!M||M.endA>=M.endB)&&o.someProp("handleKeyDown",re=>re(o,Tt(13,"Enter"))))return void(o.input.lastIOSEnter=0);if(!M){if(!(c&&t instanceof T.Bs&&!t.empty&&t.$head.sameParent(t.$anchor))||o.composing||n.sel&&n.sel.anchor!=n.sel.head){if(n.sel){let re=co(o,o.state.doc,n.sel);re&&!re.eq(o.state.selection)&&o.dispatch(o.state.tr.setSelection(re))}return}M={start:t.from,endA:t.to,endB:t.to}}if(Wt&&o.cursorWrapper&&n.sel&&n.sel.anchor==o.cursorWrapper.deco.from&&n.sel.head==n.sel.anchor){let re=M.endB-M.start;n.sel={anchor:n.sel.anchor+re,head:n.sel.anchor+re}}o.input.domChangeCount++,o.state.selection.from<o.state.selection.to&&M.start==M.endB&&o.state.selection instanceof T.Bs&&(M.start>o.state.selection.from&&M.start<=o.state.selection.from+2&&o.state.selection.from>=n.from?M.start=o.state.selection.from:M.endA<o.state.selection.to&&M.endA>=o.state.selection.to-2&&o.state.selection.to<=n.to&&(M.endB+=o.state.selection.to-M.endA,M.endA=o.state.selection.to)),bt&&Nt<=11&&M.endB==M.start+1&&M.endA==M.start&&M.start>n.from&&" \xa0"==n.doc.textBetween(M.start-n.from-1,M.start-n.from+1)&&(M.start--,M.endA--,M.endB--);let Et,S=n.doc.resolveNoCache(M.start-n.from),K=n.doc.resolveNoCache(M.endB-n.from),et=l.resolve(M.start),nt=S.sameParent(K)&&S.parent.inlineContent&&et.end()>=M.endA;if((ft&&o.input.lastIOSEnter>Date.now()-225&&(!nt||f.some(re=>"DIV"==re.nodeName||"P"==re.nodeName))||!nt&&S.pos<n.doc.content.size&&(Et=T.Y1.findFrom(n.doc.resolve(S.pos+1),1,!0))&&Et.head==K.pos)&&o.someProp("handleKeyDown",re=>re(o,Tt(13,"Enter"))))return void(o.input.lastIOSEnter=0);if(o.state.selection.anchor>M.start&&function(o,e,i,c,f){if(!c.parent.isTextblock||i-e<=f.pos-c.pos||Vn(c,!0,!1)<f.pos)return!1;let m=o.resolve(e);if(m.parentOffset<m.parent.content.size||!m.parent.isTextblock)return!1;let x=o.resolve(Vn(m,!0,!0));return!(!x.parent.isTextblock||x.pos>i||Vn(x,!0,!1)<i)&&c.parent.content.cut(c.parentOffset).eq(x.parent.content)}(l,M.start,M.endA,S,K)&&o.someProp("handleKeyDown",re=>re(o,Tt(8,"Backspace"))))return void(st&&Wt&&o.domObserver.suppressSelectionUpdates());Wt&&st&&M.endB==M.start&&(o.input.lastAndroidDelete=Date.now()),st&&!nt&&S.start()!=K.start()&&0==K.parentOffset&&S.depth==K.depth&&n.sel&&n.sel.anchor==n.sel.head&&n.sel.head==M.endA&&(M.endB-=2,K=n.doc.resolveNoCache(M.endB-n.from),setTimeout(()=>{o.someProp("handleKeyDown",function(re){return re(o,Tt(13,"Enter"))})},20));let Gt,oe,ce,St=M.start,Jt=M.endA;if(nt)if(S.pos==K.pos)bt&&Nt<=11&&0==S.parentOffset&&(o.domObserver.suppressSelectionUpdates(),setTimeout(()=>Kt(o),20)),Gt=o.state.tr.delete(St,Jt),oe=l.resolve(M.start).marksAcross(l.resolve(M.endA));else if(M.endA==M.endB&&(ce=function(o,e){let x,t,n,i=o.firstChild.marks,c=e.firstChild.marks,f=i,m=c;for(let u=0;u<c.length;u++)f=c[u].removeFromSet(f);for(let u=0;u<i.length;u++)m=i[u].removeFromSet(m);if(1==f.length&&0==m.length)t=f[0],x="add",n=u=>u.mark(t.addToSet(u.marks));else{if(0!=f.length||1!=m.length)return null;t=m[0],x="remove",n=u=>u.mark(t.removeFromSet(u.marks))}let l=[];for(let u=0;u<e.childCount;u++)l.push(n(e.child(u)));if(r.HY.from(l).eq(o))return{mark:t,type:x}}(S.parent.content.cut(S.parentOffset,K.parentOffset),et.parent.content.cut(et.parentOffset,M.endA-et.start()))))Gt=o.state.tr,"add"==ce.type?Gt.addMark(St,Jt,ce.mark):Gt.removeMark(St,Jt,ce.mark);else if(S.parent.child(S.index()).isText&&S.index()==K.index()-(K.textOffset?0:1)){let re=S.parent.textBetween(S.parentOffset,K.parentOffset);if(o.someProp("handleTextInput",$e=>$e(o,St,Jt,re)))return;Gt=o.state.tr.insertText(re,St,Jt)}if(Gt||(Gt=o.state.tr.replace(St,Jt,n.doc.slice(M.start-n.from,M.endB-n.from))),n.sel){let re=co(o,Gt.doc,n.sel);re&&!(Wt&&st&&o.composing&&re.empty&&(M.start!=M.endB||o.input.lastAndroidDelete<Date.now()-100)&&(re.head==St||re.head==Gt.mapping.map(Jt)-1)||bt&&re.empty&&re.head==St)&&Gt.setSelection(re)}oe&&Gt.ensureMarks(oe),o.dispatch(Gt.scrollIntoView())}(this,c,f,m,x)),this.domObserver.start(),function(o){for(let e in He){let i=He[e];o.dom.addEventListener(e,o.input.eventHandlers[e]=c=>{Kn(o,c)&&!Mn(o,c)&&(o.editable||!(c.type in qe))&&i(o,c)},Co[e]?{passive:!0}:void 0)}qt&&o.dom.addEventListener("input",()=>null),Wn(o)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let i in e)this._props[i]=e[i];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Wn(this);let i=this._props;this._props=e,e.plugins&&(e.plugins.forEach(zn),this.directPlugins=e.plugins),this.updateStateInner(e.state,i)}setProps(e){let i={};for(let c in this._props)i[c]=this._props[c];i.state=this.state;for(let c in e)i[c]=e[c];this.update(i)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,i){let c=this.state,f=!1,m=!1;e.storedMarks&&this.composing&&(Pn(this),m=!0),this.state=e;let x=c.plugins!=e.plugins||this._props.plugins!=i.plugins;if(x||this._props.plugins!=i.plugins||this._props.nodeViews!=i.nodeViews){let v=fo(this);(function(o,e){let i=0,c=0;for(let f in o){if(o[f]!=e[f])return!0;i++}for(let f in e)c++;return i!=c})(v,this.nodeViews)&&(this.nodeViews=v,f=!0)}(x||i.handleDOMEvents!=this._props.handleDOMEvents)&&Wn(this),this.editable=ho(this),po(this);let t=jn(this),n=uo(this),l=c.plugins==e.plugins||c.doc.eq(e.doc)?e.scrollToSelection>c.scrollToSelection?"to selection":"preserve":"reset",u=f||!this.docView.matchesNode(e.doc,n,t);(u||!e.selection.eq(c.selection))&&(m=!0);let _="preserve"==l&&m&&null==this.dom.style.overflowAnchor&&function(o){let c,f,e=o.dom.getBoundingClientRect(),i=Math.max(0,e.top);for(let m=(e.left+e.right)/2,x=i+1;x<Math.min(innerHeight,e.bottom);x+=5){let t=o.root.elementFromPoint(m,x);if(!t||t==o.dom||!o.dom.contains(t))continue;let n=t.getBoundingClientRect();if(n.top>=i-20){c=t,f=n.top;break}}return{refDOM:c,refTop:f,stack:ne(o.dom)}}(this);if(m){this.domObserver.stop();let v=u&&(bt||Wt)&&!this.composing&&!c.selection.empty&&!e.selection.empty&&function(o,e){let i=Math.min(o.$anchor.sharedDepth(o.head),e.$anchor.sharedDepth(e.head));return o.$anchor.start(i)!=e.$anchor.start(i)}(c.selection,e.selection);if(u){let M=Wt?this.trackWrites=this.domSelectionRange().focusNode:null;(f||!this.docView.update(e.doc,n,t,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=s(e.doc,n,t,this.dom,this)),M&&!this.trackWrites&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(o){let e=o.docView.domFromPos(o.state.selection.anchor,0),i=o.domSelectionRange();return X(e.node,e.offset,i.anchorNode,i.anchorOffset)}(this))?Kt(this,v):(mt(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(c),"reset"==l?this.dom.scrollTop=0:"to selection"==l?this.scrollToSelection():_&&function({refDOM:o,refTop:e,stack:i}){let c=o?o.getBoundingClientRect().top:0;Qt(i,0==c?0:c-e)}(_)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",i=>i(this)))if(this.state.selection instanceof T.qv){let i=this.docView.domAfterPos(this.state.selection.from);1==i.nodeType&&Ft(this,i.getBoundingClientRect(),e)}else Ft(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let i=0;i<this.pluginViews.length;i++){let c=this.pluginViews[i];c.update&&c.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let i=0;i<this.directPlugins.length;i++){let c=this.directPlugins[i];c.spec.view&&this.pluginViews.push(c.spec.view(this))}for(let i=0;i<this.state.plugins.length;i++){let c=this.state.plugins[i];c.spec.view&&this.pluginViews.push(c.spec.view(this))}}}someProp(e,i){let f,c=this._props&&this._props[e];if(null!=c&&(f=i?i(c):c))return f;for(let x=0;x<this.directPlugins.length;x++){let t=this.directPlugins[x].props[e];if(null!=t&&(f=i?i(t):t))return f}let m=this.state.plugins;if(m)for(let x=0;x<m.length;x++){let t=m[x].props[e];if(null!=t&&(f=i?i(t):t))return f}}hasFocus(){if(bt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(o){if(o.setActive)return o.setActive();if(Ee)return o.focus(Ee);let e=ne(o);o.focus(null==Ee?{get preventScroll(){return Ee={preventScroll:!0},!0}}:void 0),Ee||(Ee=!1,Qt(e,0))}(this.dom),Kt(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let i=this.dom.parentNode;i;i=i.parentNode)if(9==i.nodeType||11==i.nodeType&&i.host)return i.getSelection||(Object.getPrototypeOf(i).getSelection=()=>i.ownerDocument.getSelection()),this._root=i;return e||document}posAtCoords(e){return Re(this,e)}coordsAtPos(e,i=1){return Le(this,e,i)}domAtPos(e,i=0){return this.docView.domFromPos(e,i)}nodeDOM(e){let i=this.docView.descAt(e);return i?i.nodeDOM:null}posAtDOM(e,i,c=-1){let f=this.docView.posFromDOM(e,i,c);if(null==f)throw new RangeError("DOM position not inside the editor");return f}endOfTextblock(e,i){return function(o,e,i){return Ue==e&&Ae==i?ve:(Ue=e,Ae=i,ve="up"==i||"down"==i?function(o,e,i){let c=e.selection,f="up"==i?c.$from:c.$to;return Oe(o,e,()=>{let{node:m}=o.docView.domFromPos(f.pos,"up"==i?-1:1);for(;;){let t=o.docView.nearestDesc(m,!0);if(!t)break;if(t.node.isBlock){m=t.contentDOM||t.dom;break}m=t.dom.parentNode}let x=Le(o,f.pos,1);for(let t=m.firstChild;t;t=t.nextSibling){let n;if(1==t.nodeType)n=t.getClientRects();else{if(3!=t.nodeType)continue;n=R(t,0,t.nodeValue.length).getClientRects()}for(let l=0;l<n.length;l++){let u=n[l];if(u.bottom>u.top+1&&("up"==i?x.top-u.top>2*(u.bottom-x.top):u.bottom-x.bottom>2*(x.bottom-u.top)))return!1}}return!0})}(o,e,i):function(o,e,i){let{$head:c}=e.selection;if(!c.parent.isTextblock)return!1;let f=c.parentOffset,m=!f,x=f==c.parent.content.size,t=o.domSelection();return Qe.test(c.parent.textContent)&&t.modify?Oe(o,e,()=>{let{focusNode:n,focusOffset:l,anchorNode:u,anchorOffset:_}=o.domSelectionRange(),v=t.caretBidiLevel;t.modify("move",i,"character");let M=c.depth?o.docView.domAfterPos(c.before()):o.dom,{focusNode:S,focusOffset:K}=o.domSelectionRange(),et=S&&!M.contains(1==S.nodeType?S:S.parentNode)||n==S&&l==K;try{t.collapse(u,_),n&&(n!=u||l!=_)&&t.extend&&t.extend(n,l)}catch(nt){}return null!=v&&(t.caretBidiLevel=v),et}):"left"==i||"backward"==i?m:x}(o,e,i))}(this,i||this.state,e)}pasteHTML(e,i){return On(this,"",e,!1,i||new ClipboardEvent("paste"))}pasteText(e,i){return On(this,e,null,!0,i||new ClipboardEvent("paste"))}destroy(){!this.docView||(function(o){o.domObserver.stop();for(let e in o.input.eventHandlers)o.dom.removeEventListener(e,o.input.eventHandlers[e]);clearTimeout(o.input.composingTimeout),clearTimeout(o.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],jn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(o,e){!Mn(o,e)&&He[e.type]&&(o.editable||!(e.type in qe))&&He[e.type](o,e)}(this,e)}dispatch(e){let i=this._props.dispatchTransaction;i?i.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return qt&&11===this.root.nodeType&&function(o){let e=o.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom?function(o){let e;function i(n){n.preventDefault(),n.stopImmediatePropagation(),e=n.getTargetRanges()[0]}o.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),o.dom.removeEventListener("beforeinput",i,!0);let c=e.startContainer,f=e.startOffset,m=e.endContainer,x=e.endOffset,t=o.domAtPos(o.state.selection.anchor);return X(t.node,t.offset,m,x)&&([c,f,m,x]=[m,x,c,f]),{anchorNode:c,anchorOffset:f,focusNode:m,focusOffset:x}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function uo(o){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(o.editable),e.translate="no",o.someProp("attributes",i=>{if("function"==typeof i&&(i=i(o.state)),i)for(let c in i)"class"==c&&(e.class+=" "+i[c]),"style"==c?e.style=(e.style?e.style+";":"")+i[c]:!e[c]&&"contenteditable"!=c&&"nodeName"!=c&&(e[c]=String(i[c]))}),[en.node(0,o.state.doc.content.size,e)]}function po(o){if(o.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),o.cursorWrapper={dom:e,deco:en.widget(o.state.selection.head,e,{raw:!0,marks:o.markCursor})}}else o.cursorWrapper=null}function ho(o){return!o.someProp("editable",e=>!1===e(o.state))}function fo(o){let e=Object.create(null);function i(c){for(let f in c)Object.prototype.hasOwnProperty.call(e,f)||(e[f]=c[f])}return o.someProp("nodeViews",i),o.someProp("markViews",i),e}function zn(o){if(o.spec.state||o.spec.filterTransaction||o.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}}}]);