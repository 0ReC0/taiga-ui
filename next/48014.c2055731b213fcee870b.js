"use strict";var Qo=Object.defineProperty,Go=Object.defineProperties,Xo=Object.getOwnPropertyDescriptors,co=Object.getOwnPropertySymbols,$o=Object.prototype.hasOwnProperty,Zo=Object.prototype.propertyIsEnumerable,Yo=(qt,Dt,c)=>Dt in qt?Qo(qt,Dt,{enumerable:!0,configurable:!0,writable:!0,value:c}):qt[Dt]=c,ie=(qt,Dt)=>{for(var c in Dt||(Dt={}))$o.call(Dt,c)&&Yo(qt,c,Dt[c]);if(co)for(var c of co(Dt))Zo.call(Dt,c)&&Yo(qt,c,Dt[c]);return qt},Oe=(qt,Dt)=>Go(qt,Xo(Dt)),jo=(qt,Dt)=>{var c={};for(var v in qt)$o.call(qt,v)&&Dt.indexOf(v)<0&&(c[v]=qt[v]);if(null!=qt&&co)for(var v of co(qt))Dt.indexOf(v)<0&&Zo.call(qt,v)&&(c[v]=qt[v]);return c};(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[48014],{77361:(qt,Dt,c)=>{c.d(Dt,{_:()=>T});var v=c(79765),l=c(74788);let T=(()=>{class b{constructor(){this.stateChange$=new v.xQ,this.valueChange$=new v.xQ}}return b.\u0275fac=function(J){return new(J||b)},b.\u0275dir=l.lG2({type:b}),b})()},97019:(qt,Dt,c)=>{c.d(Dt,{h:()=>Rt});var v=c(64762),l=c(74788),T=c(68339),b=c(50170),h=c(1414),J=c(10200),R=c(33250),G=c(68874),Y=c(24751),ft=c(52219),dt=c(12057),q=c(65009),mt=c(10383),lt=c(20933),Ct=c(35065),Nt=c(63060),xt=c(62733),bt=c(48214),ut=c(11189),pt=c(91030);function K(gt,Ft){if(1&gt&&(l.TgZ(0,"button",7),l._uU(1),l.qZA()),2&gt){const $t=Ft.$implicit;l.Q6J("value",$t),l.xp6(1),l.hij(" ",$t," ")}}function At(gt,Ft){if(1&gt&&(l.TgZ(0,"tui-data-list",5),l.YNc(1,K,2,2,"button",6),l.qZA()),2&gt){const $t=l.oxw();l.xp6(1),l.Q6J("ngForOf",$t.modes)}}function Ot(gt,Ft){if(1&gt){const $t=l.EpF();l.TgZ(0,"tui-primitive-textfield",8),l.NdJ("valueChange",function(ht){return l.CHM($t),l.oxw().onHexChange(ht)}),l._UZ(1,"input",9),l.qZA()}if(2&gt){const $t=l.oxw();l.Q6J("textMask",$t.hexMask)("tuiTextfieldLabelOutside",!0)("value",$t.hex)}}function St(gt,Ft){if(1&gt){const $t=l.EpF();l.TgZ(0,"tui-input-count",10),l.NdJ("ngModelChange",function(ht){l.CHM($t);const k=l.oxw();return k.onRgbChange(ht,k.color[1],k.color[2],k.color[3])}),l.qZA(),l.TgZ(1,"tui-input-count",10),l.NdJ("ngModelChange",function(ht){l.CHM($t);const k=l.oxw();return k.onRgbChange(k.color[0],ht,k.color[2],k.color[3])}),l.qZA(),l.TgZ(2,"tui-input-count",10),l.NdJ("ngModelChange",function(ht){l.CHM($t);const k=l.oxw();return k.onRgbChange(k.color[0],k.color[1],ht,k.color[3])}),l.qZA()}if(2&gt){const $t=l.oxw();l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",$t.color[0]),l.xp6(1),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",$t.color[1]),l.xp6(1),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",$t.color[2])}}class Rt{constructor(){this.color=[0,0,0,1],this.colorChange=new l.vpe,this.hexMask={mask:({length:Ft})=>Array.from({length:Ft},()=>/\d|[a-f]|[A-F]/),guide:!1},this.modes=["HEX","RGB"],this.mode=this.modes[0]}get isHex(){return this.mode===this.modes[0]}get hex(){return(0,T.tuiRgbToHex)(this.color[0],this.color[1],this.color[2]).replace("#","")}get opacity(){return Math.round(100*this.color[3])}onHexChange(Ft){if(6!==Ft.length)return;const $t=(0,T.tuiHexToRgb)(Ft);this.updateColor([$t[0],$t[1],$t[2],this.color[3]])}onRgbChange(...Ft){this.updateColor(Ft)}updateColor(Ft){this.color=Ft,this.colorChange.emit(Ft)}}Rt.\u0275fac=function(Ft){return new(Ft||Rt)},Rt.\u0275cmp=l.Xpm({type:Rt,selectors:[["tui-color-edit"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:6,vars:8,consts:[["tuiTextfieldSize","m","tuiDropdownAlign","left","tuiDropdownLimitWidth","min",1,"t-select","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","ngModel","ngModelChange"],["size","s",4,"tuiDataList"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange",4,"ngIf","ngIfElse"],["rgb",""],["postfix","%","tuiTextfieldSize","m",1,"t-opacity","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"],["size","s"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange"],["tuiTextfield","","maxlength","6"],["tuiTextfieldSize","m",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"]],template:function(Ft,$t){if(1&Ft&&(l.TgZ(0,"tui-select",0),l.NdJ("ngModelChange",function(ht){return $t.mode=ht}),l.YNc(1,At,2,1,"tui-data-list",1),l.qZA(),l.YNc(2,Ot,2,3,"tui-primitive-textfield",2),l.YNc(3,St,3,12,"ng-template",null,3,l.W1O),l.TgZ(5,"tui-input-count",4),l.NdJ("ngModelChange",function(ht){return $t.onRgbChange($t.color[0],$t.color[1],$t.color[2],ht/100)}),l.qZA()),2&Ft){const Gt=l.MAs(4);l.Q6J("tuiTextfieldLabelOutside",!0)("ngModel",$t.mode),l.xp6(2),l.Q6J("ngIf",$t.isHex)("ngIfElse",Gt),l.xp6(3),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",100)("ngModel",$t.opacity)}},directives:[b.u,h.O,J.s,R.Ek,G.x,Y.JJ,Y.On,ft.g,dt.O5,q.E,mt.a,lt.q,dt.sg,Ct.v,Nt.y,xt.B,bt.n,ut.h,pt.M],styles:["[_nghost-%COMP%]{display:flex}.t-select[_ngcontent-%COMP%]{width:4.875rem}.t-opacity[_ngcontent-%COMP%]{width:4.275rem}"],changeDetection:0}),(0,v.gn)([(0,T.tuiDefaultProp)()],Rt.prototype,"color",void 0)},49289:(qt,Dt,c)=>{c.d(Dt,{$:()=>R});var v=c(64762),l=c(74788),T=c(91211),b=c(68339),h=c(71424),J=c(65720);class R{constructor(Y){this.sanitizer=Y,this.colorChange=new l.vpe,this.point=[0,1],this.hue=0,this.opacity=1}set color(Y){if(this.currentColor.every((mt,lt)=>mt===Y[lt])&&Y[3]===this.opacity)return;const[ft,dt,q]=(0,b.tuiRgbToHsv)(Y[0],Y[1],Y[2]);this.opacity=Y[3],this.hue=ft/360,this.point=[dt,1-q/255]}get currentColor(){return this.getCurrentColor(this.hue,this.point)}get base(){return`rgb(${(0,b.tuiHsvToRgb)(360*this.hue,1,255)})`}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(`linear-gradient(to right, rgba(${this.currentColor.join(",")}, 0), rgb(${this.currentColor.join(",")}))`)}onPointChange(Y){this.point=Y,this.updateColor()}onHueChange(Y){this.hue=Y,this.updateColor()}onOpacityChange(Y){this.opacity=(0,b.tuiRound)(Y,2),this.updateColor()}getCurrentColor(Y,ft){return(0,b.tuiHsvToRgb)(360*Y,ft[0],255*(1-ft[1]))}updateColor(){this.colorChange.emit([...this.currentColor,this.opacity])}}R.\u0275fac=function(Y){return new(Y||R)(l.Y36(T.H7))},R.\u0275cmp=l.Xpm({type:R,selectors:[["tui-color-picker"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:5,vars:7,consts:[[1,"t-flat",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_hue"],[1,"t-hue",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_opacity"],[1,"t-opacity",3,"value","valueChange"]],template:function(Y,ft){1&Y&&(l.TgZ(0,"tui-flat-picker",0),l.NdJ("valueChange",function(q){return ft.onPointChange(q)}),l.qZA(),l.TgZ(1,"div",1),l.TgZ(2,"tui-linear-picker",2),l.NdJ("valueChange",function(q){return ft.onHueChange(q)}),l.qZA(),l.qZA(),l.TgZ(3,"div",3),l.TgZ(4,"tui-linear-picker",4),l.NdJ("valueChange",function(q){return ft.onOpacityChange(q)}),l.qZA(),l.qZA()),2&Y&&(l.Udp("background-color",ft.base),l.Q6J("value",ft.point),l.xp6(2),l.Q6J("value",ft.hue),l.xp6(1),l.Udp("background",ft.gradient),l.xp6(1),l.Q6J("value",ft.opacity))},directives:[h.J,J.P],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block}.t-flat[_ngcontent-%COMP%]{height:14rem;background:linear-gradient(rgba(0,0,0,0),#000000),linear-gradient(to right,#ffffff,rgba(255,255,255,0));margin-bottom:.25rem;overflow:hidden}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1rem 1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper_hue[_ngcontent-%COMP%]{background:#ff0000}.t-wrapper_opacity[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hue[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff0000,#ffff00,#00ff00,#00ffff,#0000ff,#ff00ff,#ff0000);border-radius:inherit;margin:0 .5rem}.t-opacity[_ngcontent-%COMP%]{border-radius:inherit;margin:0 .5rem}'],changeDetection:0}),(0,v.gn)([(0,b.tuiDefaultProp)()],R.prototype,"color",null),(0,v.gn)([b.tuiPure],R.prototype,"getCurrentColor",null)},23999:(qt,Dt,c)=>{c.d(Dt,{s:()=>it});var v=c(64762),l=c(74788),T=c(91211),b=c(14309),h=c(27863),J=c(68339),R=c(62939),G=c(76189),Y=c(12057),ft=c(49289),dt=c(34880),q=c(20933),mt=c(35065),lt=c(49472),Ct=c(67446),Nt=c(29070),xt=c(54255),bt=c(15491),ut=c(219),pt=c(97019),K=c(39607),At=c(5451);function Ot(U,Q){if(1&U&&l._UZ(0,"tui-svg",9),2&U){l.oxw();const nt=l.MAs(1);l.ekj("t-arrow_rotated",nt.open)}}function St(U,Q){1&U&&l._UZ(0,"tui-svg",14)}function Rt(U,Q){if(1&U){const nt=l.EpF();l.TgZ(0,"button",12),l.NdJ("keydown.enter.prevent",function(){const Yt=l.CHM(nt).$implicit,le=l.oxw(2),Vt=l.MAs(1);return le.onModeSelect(Yt,Vt)})("keydown.space.prevent",function(){const Yt=l.CHM(nt).$implicit,le=l.oxw(2),Vt=l.MAs(1);return le.onModeSelect(Yt,Vt)})("click",function(){const Yt=l.CHM(nt).$implicit,le=l.oxw(2),Vt=l.MAs(1);return le.onModeSelect(Yt,Vt)}),l._uU(1),l.YNc(2,St,1,0,"tui-svg",13),l.qZA()}if(2&U){const nt=Q.$implicit,kt=l.oxw(2);l.uIk("aria-checked",kt.isModeActive(nt)),l.xp6(1),l.hij(" ",nt," "),l.xp6(1),l.Q6J("ngIf",kt.isModeActive(nt))}}function gt(U,Q){if(1&U&&(l.TgZ(0,"tui-data-list",10),l.YNc(1,Rt,3,3,"button",11),l.qZA()),2&U){const nt=l.oxw();l.xp6(1),l.Q6J("ngForOf",nt.modes)}}function Ft(U,Q){if(1&U){const nt=l.EpF();l.TgZ(0,"button",20),l.NdJ("click",function(){const Yt=l.CHM(nt).$implicit;return l.oxw(2).onDirectionChange(Yt)}),l.qZA()}if(2&U){const nt=Q.$implicit,kt=l.oxw(2);l.ekj("t-direction_active",kt.isDirectionActive(nt)),l.Q6J("icon",kt.getIcon(nt))("tuiHint",nt)("tuiHintDescribe","")}}function $t(U,Q){if(1&U){const nt=l.EpF();l.ynx(0),l._UZ(1,"hr",15),l.TgZ(2,"div",16),l.TgZ(3,"tui-linear-multi-picker",17),l.NdJ("valueChange",function(jt){return l.CHM(nt),l.oxw().onStopsChange(jt)})("indexChange",function(jt){return l.CHM(nt),l.oxw().onIndexChange(jt)}),l.qZA(),l.qZA(),l.TgZ(4,"div",18),l.YNc(5,Ft,1,5,"button",19),l.qZA(),l.BQk()}if(2&U){const nt=l.oxw();l.xp6(2),l.Udp("background",nt.gradient),l.xp6(1),l.Q6J("value",nt.stopsKeys),l.xp6(2),l.Q6J("ngForOf",nt.buttons)}}function Gt(U,Q){if(1&U){const nt=l.EpF();l.TgZ(0,"tui-color-edit",21),l.NdJ("colorChange",function(jt){return l.CHM(nt),l.oxw().onColorChange(jt)}),l.qZA()}if(2&U){const nt=l.oxw();l.Q6J("color",nt.color)}}function ht(U,Q){if(1&U){const nt=l.EpF();l.TgZ(0,"tui-palette",22),l.NdJ("selectedColor",function(jt){return l.CHM(nt),l.oxw().onPalettePick(jt)}),l.qZA()}if(2&U){const nt=l.oxw();l.Q6J("colors",nt.palette)}}const k=[0,0,0,0],et=[[0,[0,0,0,1]],[1,[255,255,255,1]]],st={"to top right":"tuiIconArrowUpRight","to right":"tuiIconArrowRight","to bottom right":"tuiIconArrowDownRight","to bottom":"tuiIconArrowDown","to bottom left":"tuiIconArrowDownLeft","to left":"tuiIconArrowLeft","to top left":"tuiIconArrowUpLeft","to top":"tuiIconArrowUp"};class it{constructor(Q,nt){this.sanitizer=Q,this.modes=nt,this.stops=new Map(et),this.currentStop=0,this.direction="to bottom",this.colors=new Map,this.colorChange=new l.vpe,this.color=[0,0,0,1],this.currentMode=this.modes[0],this.buttons=["to top right","to right","to bottom right","to bottom","to bottom left","to left","to top left","to top"]}set colorSetter(Q){this.parse(Q)}get palette(){return this.filterPalette(this.colors,this.isGradient)}get stopsKeys(){return this.getStopsKeys(this.stops)}get currentColor(){return this.isGradient?this.getStop(this.currentStop):this.color}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(this.getGradient("to right"))}get isGradient(){return this.currentMode===this.modes[1]}getIcon(Q){return st[Q]}isModeActive(Q){return this.currentMode===Q}isDirectionActive(Q){return this.direction===Q}onPalettePick(Q){this.updateColor(Q)}onDirectionChange(Q){this.direction=Q,this.updateColor(this.getGradient(Q))}onModeSelect(Q,nt){this.currentMode=Q,nt.open=!1,this.updateColor(Q===this.modes[0]?`rgba(${this.color.join(", ")})`:this.getGradient(this.direction))}onIndexChange(Q){this.currentStop=this.stopsKeys[Q]}onColorChange(Q){this.isGradient?(this.stops.set(this.currentStop,Q),this.updateColor(this.getGradient(this.direction))):this.updateColor(`rgba(${Q.join(", ")})`)}onStopsChange(Q){const nt=this.stopsKeys.find(jt=>!Q.includes(jt)),kt=Q.find(jt=>!this.stopsKeys.includes(jt));void 0===nt&&void 0!==kt&&this.addStop(kt),void 0!==nt&&void 0===kt&&this.removeStop(nt),void 0!==nt&&void 0!==kt&&this.replaceStop(nt,kt),this.updateColor(this.getGradient(this.direction))}getStopsKeys(Q){return Array.from(Q.keys())}filterPalette(Q,nt){const kt=new Map(Q);return kt.forEach((jt,Yt)=>{(jt.startsWith("linear-gradient")&&!nt||!jt.startsWith("linear-gradient")&&nt)&&kt.delete(Yt)}),kt}updateColor(Q){this.colorChange.emit(Q)}getGradient(Q){return`linear-gradient(${Q}, ${[...this.stopsKeys].sort().map(nt=>`rgba(${this.getStop(nt).join(", ")}) ${100*nt}%`).join(", ")})`}getStop(Q){return this.stops.get(Q)||k}addStop(Q){const nt=this.stopsKeys.reduce((kt,jt)=>Math.abs(jt-Q)<Math.abs(kt-Q)?jt:kt,this.stopsKeys[0]);this.stops.set(Q,this.getStop(nt)),this.stops=new Map(this.stops),this.currentStop=Q}removeStop(Q){this.stops.delete(Q),this.stops=new Map(this.stops),this.currentStop=this.stopsKeys[0]}replaceStop(Q,nt){const kt=this.getStop(Q);this.currentStop=nt,this.stops=new Map(this.stopsKeys.map(jt=>jt===Q?[nt,kt]:[jt,this.getStop(jt)]))}parse(Q){Q.startsWith("linear-gradient")?this.parseGradient(Q):this.parseColor(Q)}parseGradient(Q){if(Q===this.getGradient(this.direction))return;const nt=(0,h._N)((0,h.U5)(Q));this.currentMode=this.modes[1],this.direction=nt.side,this.currentStop=0,this.stops=new Map(nt.stops.length?nt.stops.map(({color:kt,position:jt})=>[parseFloat(jt)/100,(0,J.tuiParseColor)(kt)]):et)}parseColor(Q){this.currentMode=this.modes[0],this.currentStop=0,this.color=(0,J.tuiParseColor)(Q)}}it.\u0275fac=function(Q){return new(Q||it)(l.Y36(T.H7),l.Y36(b.dj))},it.\u0275cmp=l.Xpm({type:it,selectors:[["tui-color-selector"]],inputs:{colors:"colors",colorSetter:["color","colorSetter"]},outputs:{colorChange:"colorChange"},decls:12,vars:7,consts:[[1,"t-select",3,"content"],["dropdown",""],["tuiButton","","appearance","","size","s","type","button",3,"iconRight"],["arrow",""],["menu",""],[4,"ngIf"],[3,"color","colorChange"],["tuiGroup","","class","t-edit",3,"color","colorChange",4,"ngIf"],["class","t-palette",3,"colors","selectedColor",4,"ngIf"],["src","tuiIconChevronDown",1,"t-arrow"],["role","menu","size","s",1,"t-menu"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click"],["src","tuiIconCheck","class","t-checkmark",4,"ngIf"],["src","tuiIconCheck",1,"t-checkmark"],[1,"t-hr"],[1,"t-wrapper"],[1,"t-gradient",3,"value","valueChange","indexChange"],[1,"t-buttons"],["tuiIconButton","","type","button","size","xs","appearance","","class","t-direction",3,"t-direction_active","icon","tuiHint","tuiHintDescribe","click",4,"ngFor","ngForOf"],["tuiIconButton","","type","button","size","xs","appearance","",1,"t-direction",3,"icon","tuiHint","tuiHintDescribe","click"],["tuiGroup","",1,"t-edit",3,"color","colorChange"],[1,"t-palette",3,"colors","selectedColor"]],template:function(Q,nt){if(1&Q&&(l.TgZ(0,"tui-hosted-dropdown",0,1),l.TgZ(2,"button",2),l._uU(3),l.qZA(),l.YNc(4,Ot,1,2,"ng-template",null,3,l.W1O),l.YNc(6,gt,2,1,"ng-template",null,4,l.W1O),l.qZA(),l.YNc(8,$t,6,4,"ng-container",5),l.TgZ(9,"tui-color-picker",6),l.NdJ("colorChange",function(jt){return nt.onColorChange(jt)}),l.qZA(),l.YNc(10,Gt,1,1,"tui-color-edit",7),l.YNc(11,ht,1,1,"tui-palette",8)),2&Q){const kt=l.MAs(5),jt=l.MAs(7);l.Q6J("content",jt),l.xp6(2),l.Q6J("iconRight",kt),l.xp6(1),l.hij(" ",nt.currentMode," "),l.xp6(5),l.Q6J("ngIf",nt.isGradient),l.xp6(1),l.Q6J("color",nt.currentColor),l.xp6(1),l.Q6J("ngIf",!nt.isGradient),l.xp6(1),l.Q6J("ngIf",nt.palette.size)}},directives:[R.o,G.v,Y.O5,ft.$,dt.P,q.q,Y.sg,mt.v,lt.e,Ct.D,Nt.x,xt.t,bt.D,ut.$,pt.h,K.g,At.R],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block;width:22.6rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hr[_ngcontent-%COMP%]{height:1px;margin:0 0 0 -1px;border:none;background:var(--tui-base-03)}.t-gradient[_ngcontent-%COMP%]{margin:0 .5rem;border-radius:inherit}.t-select[_ngcontent-%COMP%]{margin:.75rem .5rem}.t-arrow[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-arrow_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.t-menu[_ngcontent-%COMP%]{width:11.25rem}.t-checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}.t-buttons[_ngcontent-%COMP%]{display:flex;padding:0 .75rem 1.25rem}.t-direction[_ngcontent-%COMP%]{color:var(--tui-text-02);margin:0 .375rem}.t-direction[_ngcontent-%COMP%]:hover, .t-direction_active[_ngcontent-%COMP%]{color:var(--tui-text-01);background:var(--tui-secondary-hover)}.t-edit[_ngcontent-%COMP%]{margin:1.25rem}.t-palette[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:inset 0 1px var(--tui-base-03)}'],changeDetection:0}),(0,v.gn)([(0,J.tuiDefaultProp)()],it.prototype,"colors",void 0),(0,v.gn)([(0,J.tuiRequiredSetter)()],it.prototype,"colorSetter",null),(0,v.gn)([J.tuiPure],it.prototype,"getStopsKeys",null),(0,v.gn)([J.tuiPure],it.prototype,"filterPalette",null)},71424:(qt,Dt,c)=>{c.d(Dt,{J:()=>h});var v=c(64762),l=c(74788),T=c(62141),b=c(68339);class h{constructor(R){this.value=[0,0],this.valueChange=new l.vpe,R.subscribe(G=>{this.value=G,this.valueChange.emit([G[0],G[1]])})}get left(){return 100*this.value[0]}get top(){return 100*this.value[1]}}h.\u0275fac=function(R){return new(R||h)(l.Y36(T.i))},h.\u0275cmp=l.Xpm({type:h,selectors:[["tui-flat-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[l._Bn([b.TuiDestroyService,T.i])],decls:1,vars:4,consts:[[1,"t-circle"]],template:function(R,G){1&R&&l._UZ(0,"div",0),2&R&&l.Udp("left",G.left,"%")("top",G.top,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:-.5rem 0 0 -.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,v.gn)([(0,b.tuiDefaultProp)()],h.prototype,"value",void 0)},27050:(qt,Dt,c)=>{c.d(Dt,{hR:()=>v.h,TD:()=>R,$v:()=>G.$,H9:()=>dt,sV:()=>q.s,wl:()=>Nt,Jd:()=>xt.J,ui:()=>Y,es:()=>bt.e,GU:()=>lt,P:()=>ut.P,g7:()=>ft,Rh:()=>pt.R,VM:()=>Ct});var v=c(97019),l=c(12057),T=c(24751),b=c(76040),h=c(48611),J=c(74788);let R=(()=>{class K{}return K.\u0275fac=function(Ot){return new(Ot||K)},K.\u0275mod=J.oAB({type:K}),K.\u0275inj=J.cJS({imports:[[l.ez,T.u5,h.TextMaskModule,h.TuiValueAccessorModule,h.TuiSelectModule,b.TuiPrimitiveTextfieldModule,b.TuiTextfieldControllerModule,b.TuiDropdownModule,h.TuiInputCountModule,b.TuiDataListModule]]}),K})();var G=c(49289);let Y=(()=>{class K{}return K.\u0275fac=function(Ot){return new(Ot||K)},K.\u0275mod=J.oAB({type:K}),K.\u0275inj=J.cJS({imports:[[l.ez]]}),K})(),ft=(()=>{class K{}return K.\u0275fac=function(Ot){return new(Ot||K)},K.\u0275mod=J.oAB({type:K}),K.\u0275inj=J.cJS({imports:[[l.ez]]}),K})(),dt=(()=>{class K{}return K.\u0275fac=function(Ot){return new(Ot||K)},K.\u0275mod=J.oAB({type:K}),K.\u0275inj=J.cJS({imports:[[l.ez,Y,ft]]}),K})();var q=c(23999),mt=c(68339);let lt=(()=>{class K{}return K.\u0275fac=function(Ot){return new(Ot||K)},K.\u0275mod=J.oAB({type:K}),K.\u0275inj=J.cJS({imports:[[l.ez]]}),K})(),Ct=(()=>{class K{}return K.\u0275fac=function(Ot){return new(Ot||K)},K.\u0275mod=J.oAB({type:K}),K.\u0275inj=J.cJS({imports:[[l.ez,b.TuiHintModule]]}),K})(),Nt=(()=>{class K{}return K.\u0275fac=function(Ot){return new(Ot||K)},K.\u0275mod=J.oAB({type:K}),K.\u0275inj=J.cJS({imports:[[l.ez,b.TuiButtonModule,b.TuiHostedDropdownModule,dt,lt,b.TuiHintModule,b.TuiSvgModule,b.TuiDataListModule,mt.TuiActiveZoneModule,R,b.TuiGroupModule,Ct]]}),K})();var xt=c(71424),bt=c(49472),ut=c(65720),pt=c(5451)},49472:(qt,Dt,c)=>{c.d(Dt,{e:()=>R});var v=c(64762),l=c(74788),T=c(62141),b=c(68339),h=c(12057);function J(G,Y){if(1&G){const ft=l.EpF();l.TgZ(0,"div",1),l.NdJ("mousedown",function(){const mt=l.CHM(ft).index;return l.oxw().onMouseDown(mt)})("dblclick",function(){const mt=l.CHM(ft).index;return l.oxw().onClick(mt)}),l.qZA()}2&G&&l.Udp("left",100*Y.$implicit,"%")}class R{constructor(Y){this.value=[0,1],this.valueChange=new l.vpe,this.indexChange=new l.vpe,this.index=NaN,Y.subscribe(([ft])=>{this.onPicker(ft)})}onMouseUp(){this.index=NaN}onMouseDown(Y){this.updateIndex(Y)}onClick(Y){this.value.length>2&&this.updateValue(this.value.filter((ft,dt)=>dt!==Y))}onPicker(Y){Number.isNaN(this.index)&&(this.updateIndex(this.value.length),this.value=[...this.value,0]),!this.value.some((ft,dt)=>ft===Y&&dt!==this.index)&&this.updateValue(this.value.map((ft,dt)=>dt===this.index?Y:ft))}updateIndex(Y){this.index=Y,this.indexChange.emit(Y)}updateValue(Y){this.value=Y,this.valueChange.emit(Y)}}R.\u0275fac=function(Y){return new(Y||R)(l.Y36(T.i))},R.\u0275cmp=l.Xpm({type:R,selectors:[["tui-linear-multi-picker"]],hostBindings:function(Y,ft){1&Y&&l.NdJ("mouseup",function(){return ft.onMouseUp()},!1,l.evT)},inputs:{value:"value"},outputs:{valueChange:"valueChange",indexChange:"indexChange"},features:[l._Bn([b.TuiDestroyService,T.i])],decls:1,vars:1,consts:[["class","t-circle",3,"left","mousedown","dblclick",4,"ngFor","ngForOf"],[1,"t-circle",3,"mousedown","dblclick"]],template:function(Y,ft){1&Y&&l.YNc(0,J,1,2,"div",0),2&Y&&l.Q6J("ngForOf",ft.value)},directives:[h.sg],styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,v.gn)([(0,b.tuiDefaultProp)()],R.prototype,"value",void 0)},65720:(qt,Dt,c)=>{c.d(Dt,{P:()=>h});var v=c(64762),l=c(74788),T=c(62141),b=c(68339);class h{constructor(R){this.value=0,this.valueChange=new l.vpe,R.subscribe(([G])=>{this.value=G,this.valueChange.emit(G)})}get left(){return 100*this.value}}h.\u0275fac=function(R){return new(R||h)(l.Y36(T.i))},h.\u0275cmp=l.Xpm({type:h,selectors:[["tui-linear-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[l._Bn([b.TuiDestroyService,T.i])],decls:1,vars:2,consts:[[1,"t-circle"]],template:function(R,G){1&R&&l._UZ(0,"div",0),2&R&&l.Udp("left",G.left,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,v.gn)([(0,b.tuiDefaultProp)()],h.prototype,"value",void 0)},5451:(qt,Dt,c)=>{c.d(Dt,{R:()=>dt});var v=c(64762),l=c(74788),T=c(68339),b=c(12057),h=c(67446),J=c(29070),R=c(54255),G=c(15491),Y=c(219);function ft(q,mt){if(1&q){const lt=l.EpF();l.TgZ(0,"button",1),l.NdJ("click",function(){const xt=l.CHM(lt).$implicit;return l.oxw().selectedColor.emit(xt.value)}),l.qZA()}if(2&q){const lt=mt.$implicit;l.Udp("background",lt.value),l.Q6J("tuiHint",lt.key)("tuiHintDescribe",lt.key)("id",lt.key)}}class dt{constructor(){this.colors=new Map,this.selectedColor=new l.vpe,this.originalOrder=(mt,lt)=>0}}dt.\u0275fac=function(mt){return new(mt||dt)},dt.\u0275cmp=l.Xpm({type:dt,selectors:[["tui-palette"]],inputs:{colors:"colors"},outputs:{selectedColor:"selectedColor"},decls:2,vars:4,consts:[["type","button","class","t-button",3,"background","tuiHint","tuiHintDescribe","id","click",4,"ngFor","ngForOf"],["type","button",1,"t-button",3,"tuiHint","tuiHintDescribe","id","click"]],template:function(mt,lt){1&mt&&(l.YNc(0,ft,1,5,"button",0),l.ALo(1,"keyvalue")),2&mt&&l.Q6J("ngForOf",l.xi3(1,1,lt.colors,lt.originalOrder))},directives:[b.sg,h.D,J.x,R.t,G.D,Y.$],pipes:[b.Nd],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;padding:.875rem}.t-button[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;width:1.5625rem;height:1.5625rem;box-sizing:border-box;margin:.375rem;border-radius:var(--tui-radius-m);border:1px solid rgba(0,0,0,.08)}"],changeDetection:0}),(0,v.gn)([(0,T.tuiDefaultProp)()],dt.prototype,"colors",void 0)},45050:(qt,Dt,c)=>{c.d(Dt,{l:()=>$t});var v=c(64762),l=c(12057),T=c(74788),b=c(84614),h=c(14309),J=c(68339),R=c(87623),G=c(20986),Y=c(24751),ft=c(34880),dt=c(76189),q=c(66596),mt=c(3881),lt=c(22613),Ct=c(98266);function Nt(Gt,ht){1&Gt&&(T.ynx(0),T._uU(1,"Edit anchor"),T.BQk())}function xt(Gt,ht){1&Gt&&(T.TgZ(0,"span"),T._uU(1,"Link to anchor"),T.qZA())}function bt(Gt,ht){1&Gt&&(T.TgZ(0,"span"),T._uU(1,"URL"),T.qZA())}function ut(Gt,ht){if(1&Gt&&(T.YNc(0,xt,2,0,"span",1),T.YNc(1,bt,2,0,"ng-template",null,12,T.W1O)),2&Gt){const k=T.MAs(2),et=T.oxw(2);T.Q6J("ngIf",et.prefixIsHashMode)("ngIfElse",k)}}function pt(Gt,ht){if(1&Gt&&(T.ynx(0),T._uU(1),T.BQk()),2&Gt){const k=ht.ngIf,et=T.oxw(2);T.xp6(1),T.hij(" ",et.prefixIsHashMode?k.anchorExample:k.urlExample," ")}}function K(Gt,ht){if(1&Gt){const k=T.EpF();T.ynx(0),T.TgZ(1,"label",4),T.TgZ(2,"div",5),T.YNc(3,Nt,2,0,"ng-container",1),T.YNc(4,ut,3,2,"ng-template",null,6,T.W1O),T.qZA(),T.TgZ(6,"div",7),T.TgZ(7,"div",8),T._uU(8),T.qZA(),T.TgZ(9,"tui-input-inline",9),T.NdJ("ngModelChange",function(st){return T.CHM(k),T.oxw().url=st})("input",function(st){let U;return T.CHM(k),T.oxw().onChange(null==(U=st.target)?null:U.value)})("keydown.prevent.enter",function(){return T.CHM(k),T.oxw().onSave()})("keydown.backspace",function(){return T.CHM(k),T.oxw().onBackspace()}),T.YNc(10,pt,2,1,"ng-container",3),T.ALo(11,"async"),T.qZA(),T.qZA(),T.qZA(),T.TgZ(12,"tui-svg",10),T.NdJ("click",function(){return T.CHM(k),T.oxw().onClear()}),T.qZA(),T.TgZ(13,"button",11),T.NdJ("click",function(){return T.CHM(k),T.oxw().onSave()}),T.qZA(),T.BQk()}if(2&Gt){const k=T.MAs(5),et=T.oxw();T.xp6(3),T.Q6J("ngIf",et.anchorMode)("ngIfElse",k),T.xp6(5),T.Oqu(et.prefix),T.xp6(1),T.ekj("t-input_filled",et.hasUrl),T.Q6J("ngModel",et.url),T.xp6(1),T.Q6J("ngIf",T.lcZ(11,9,et.texts$)),T.xp6(2),T.ekj("t-cleaner_hidden",!et.hasUrl)}}function At(Gt,ht){if(1&Gt){const k=T.EpF();T.TgZ(0,"a",13),T._uU(1),T.ALo(2,"tuiShortUrl"),T.qZA(),T.TgZ(3,"button",14),T.NdJ("click",function(){return T.CHM(k),T.oxw().onEdit()}),T.qZA(),T.TgZ(4,"button",15),T.NdJ("click",function(){return T.CHM(k),T.oxw().onRemove()}),T.qZA()}if(2&Gt){const k=T.oxw();T.Q6J("href",k.href,T.LSH),T.xp6(1),T.AsE(" ",k.anchorMode?"#":"","",T.lcZ(2,3,k.url)," ")}}function Ot(Gt,ht){if(1&Gt){const k=T.EpF();T.TgZ(0,"button",19),T.NdJ("click",function(){const it=T.CHM(k).$implicit;return T.oxw(2).setAnchor(it)}),T._uU(1),T.qZA()}if(2&Gt){const k=ht.$implicit;T.xp6(1),T.hij(" #",k," ")}}function St(Gt,ht){if(1&Gt&&(T.ynx(0),T._UZ(1,"hr",16),T.TgZ(2,"tui-scrollbar"),T.TgZ(3,"div",17),T.YNc(4,Ot,2,1,"button",18),T.ALo(5,"tuiFilterAnchors"),T.qZA(),T.qZA(),T.BQk()),2&Gt){const k=T.oxw();T.xp6(4),T.Q6J("ngForOf",T.Dn7(5,1,k.anchorIds,k.prefix,k.url))}}const Rt="#",gt="http://",Ft="https://";class $t{constructor(ht,k,et){this.documentRef=ht,this.texts$=k,this.editor=et,this.isOnlyAnchorMode=this.detectAnchorMode(),this.addLink=new T.vpe,this.removeLink=new T.vpe,this.url=this.getHrefOrAnchorId(),this.edit=!this.url,this.prefix=this.makeDefaultPrefix(),this.anchorIds=this.getAllAnchorsIds()}set anchorMode(ht){this.isOnlyAnchorMode=ht,this.prefix=ht?Rt:this.makeDefaultPrefix()}get anchorMode(){return this.isOnlyAnchorMode}get prefixIsHashMode(){return this.prefix===Rt}get hasUrl(){return!!this.url}get href(){return`${this.prefix}${this.url}`}get showAnchorsList(){return!this.anchorMode&&this.edit&&this.anchorIds.length>0}get isViewMode(){return!this.edit}onSelectionChange(){this.isViewMode&&(this.url=this.getHrefOrAnchorId(),this.anchorMode=this.detectAnchorMode())}onMouseDown(ht){(0,J.tuiIsElement)(ht.target)&&!ht.target.matches("a, button, input")&&ht.preventDefault()}setAnchor(ht){this.url=ht,this.changePrefix(!0)}changePrefix(ht){this.prefix=ht?Rt:gt}onSave(){this.url?this.addLink.emit(this.href):this.removeLink.emit()}onBackspace(){this.url||(this.prefix=this.isOnlyAnchorMode?Rt:gt)}onEdit(){this.edit=!0}onRemove(){this.removeLink.emit()}onChange(ht){this.url=this.removePrefix(ht)}onClear(){this.url=""}makeDefaultPrefix(){var ht;const k=this.getAnchorElement();return k&&(!k.getAttribute("href")&&k.getAttribute("id")||(null===(ht=k.getAttribute("href"))||void 0===ht?void 0:ht.startsWith(Rt)))?Rt:gt}detectAnchorMode(){const ht=this.getAnchorElement();return!(null==ht?void 0:ht.href)&&!!(null==ht?void 0:ht.getAttribute("id"))}getFocusedParentElement(){var ht,k;return(null===(k=null===(ht=this.documentRef.getSelection())||void 0===ht?void 0:ht.focusNode)||void 0===k?void 0:k.parentElement)||null}getAnchorElement(){var ht;return(null===(ht=this.getFocusedParentElement())||void 0===ht?void 0:ht.closest("a"))||null}getHrefOrAnchorId(){const ht=this.getAnchorElement();return ht?this.removePrefix(ht.getAttribute("href")||ht.getAttribute("id")||""):this.url}removePrefix(ht){return ht.startsWith(gt)?(this.prefix=this.isOnlyAnchorMode?Rt:gt,ht.replace(gt,"")):ht.startsWith(Ft)?(this.prefix=this.isOnlyAnchorMode?Rt:Ft,ht.replace(Ft,"")):ht.startsWith(Rt)?(this.prefix=Rt,ht.replace(Rt,"")):ht}getAllAnchorsIds(){var ht;const k=Array.from(null!==(ht=this.editor.getOriginTiptapEditor().view.dom.querySelectorAll('[data-type="jump-anchor"]'))&&void 0!==ht?ht:[]);return Array.from(k).map(et=>et.getAttribute("id")||"").filter(Boolean)}}$t.\u0275fac=function(ht){return new(ht||$t)(T.Y36(l.K0),T.Y36(h.b$),T.Y36(b.$3))},$t.\u0275cmp=T.Xpm({type:$t,selectors:[["tui-edit-link"]],hostBindings:function(ht,k){1&ht&&T.NdJ("selectionchange",function(){return k.onSelectionChange()},!1,T.evT)("mousedown",function(st){return k.onMouseDown(st)})},inputs:{anchorMode:"anchorMode"},outputs:{addLink:"addLink",removeLink:"removeLink"},decls:5,vars:3,consts:[[1,"t-edit-link"],[4,"ngIf","ngIfElse"],["view",""],[4,"ngIf"],[1,"t-label"],[1,"t-label-properties"],["fullOptions",""],[1,"t-url"],[1,"t-prefix"],["tuiAutoFocus","",1,"t-input",3,"ngModel","ngModelChange","input","keydown.prevent.enter","keydown.backspace"],["src","tuiIconCloseLarge",1,"t-cleaner",3,"click"],["tuiIconButton","","type","button","size","s","title","Insert link","icon","tuiIconCheckCircleLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],["urlTitle",""],["tuiLink","","target","_blank",1,"t-link",3,"href"],["tuiIconButton","","type","button","size","s","title","Change link","icon","tuiIconEditLarge","shape","rounded","appearance","icon",1,"t-button","t-edit-button",3,"click"],["tuiIconButton","","type","button","size","s","title","Remove link","icon","tuiIconUnlinkLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],[1,"t-hr"],[1,"t-anchor-list"],["type","button","class","t-anchor",3,"click",4,"ngFor","ngForOf"],["type","button",1,"t-anchor",3,"click"]],template:function(ht,k){if(1&ht&&(T.TgZ(0,"div",0),T.YNc(1,K,14,11,"ng-container",1),T.YNc(2,At,5,5,"ng-template",null,2,T.W1O),T.qZA(),T.YNc(4,St,6,5,"ng-container",3)),2&ht){const et=T.MAs(3);T.xp6(1),T.Q6J("ngIf",k.edit)("ngIfElse",et),T.xp6(3),T.Q6J("ngIf",k.showAnchorsList)}},directives:[l.O5,R.l,G.k,Y.JJ,Y.On,ft.P,dt.v,q.V,mt.I,l.sg],pipes:[l.Ov,lt.X,Ct.b],styles:["[_nghost-%COMP%]{display:block;min-width:18.75rem}.t-edit-link[_ngcontent-%COMP%]{display:flex;min-height:4rem;align-items:center;padding-right:.75rem}.t-label[_ngcontent-%COMP%]{font:var(--tui-font-text-s);height:var(--tui-height-l);box-sizing:border-box;padding:.4375rem 1rem;min-width:12.5rem;max-width:25rem;width:100%}.t-label-properties[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:8.375rem;justify-content:space-between}.t-property_inactive[_ngcontent-%COMP%]{opacity:.5}.t-url[_ngcontent-%COMP%]{display:flex;font:var(--tui-font-text-m);color:var(--tui-text-02)}.t-input[_ngcontent-%COMP%]{flex:1}.t-input_filled[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-button[_ngcontent-%COMP%]{width:2rem;height:2rem;margin:0 .25rem;transition:background .2s}.t-edit-button[_ngcontent-%COMP%]{margin-left:auto}.t-link[_ngcontent-%COMP%]{margin:0 1rem}.t-cleaner[_ngcontent-%COMP%]{transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;color:var(--tui-base-06);cursor:pointer;margin-left:auto}.t-cleaner[_ngcontent-%COMP%]:hover{color:var(--tui-base-07)}.t-cleaner_hidden[_ngcontent-%COMP%]{visibility:hidden}.t-anchor-list[_ngcontent-%COMP%]{display:flex;max-height:12.5rem;flex-direction:column}.t-anchor[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;background:none;font-size:inherit;line-height:inherit;min-height:2.75rem;padding:.375rem .5rem;margin:.125rem .5rem;border-radius:var(--tui-radius-m);text-align:left}.t-anchor[_ngcontent-%COMP%]:hover{background:var(--tui-base-02);cursor:pointer}"],changeDetection:0}),(0,v.gn)([(0,J.tuiDefaultProp)()],$t.prototype,"anchorMode",null)},71115:(qt,Dt,c)=>{c.d(Dt,{lV:()=>v.l,Fu:()=>G,bL:()=>Y.b,X:()=>ft.X});var v=c(45050),l=c(12057),T=c(24751),b=c(68339),h=c(76040),J=c(48611),R=c(74788);let G=(()=>{class dt{}return dt.\u0275fac=function(mt){return new(mt||dt)},dt.\u0275mod=R.oAB({type:dt}),dt.\u0275inj=R.cJS({imports:[[l.ez,T.u5,b.TuiAutoFocusModule,h.TuiButtonModule,h.TuiSvgModule,h.TuiLinkModule,J.TuiInputInlineModule,J.TuiToggleModule,h.TuiScrollbarModule]]}),dt})();var Y=c(98266),ft=c(22613)},98266:(qt,Dt,c)=>{c.d(Dt,{b:()=>l});var v=c(74788);let l=(()=>{class T{transform(h,J,R){return"#"===J?h.filter(G=>G!==R):h}}return T.\u0275fac=function(h){return new(h||T)},T.\u0275pipe=v.Yjl({name:"tuiFilterAnchors",type:T,pure:!0}),T})()},22613:(qt,Dt,c)=>{c.d(Dt,{X:()=>h});var v=c(74788);let h=(()=>{class J{transform(G){return G.length<60?G:`${G.slice(0,Math.max(0,40))}...${G.slice(G.length-10)}`}}return J.\u0275fac=function(G){return new(G||J)},J.\u0275pipe=v.Yjl({name:"tuiShortUrl",type:J,pure:!0}),J})()},96570:(qt,Dt,c)=>{c.d(Dt,{V:()=>dt});var v=c(74788),l=c(68339),T=c(25126),b=c(39953),h=c(12057);const J=function(){return[0,1]};function R(q,mt){if(1&q){const lt=v.EpF();v.TgZ(0,"div",4),v.NdJ("tuiSizeChange",function(Nt){return v.CHM(lt),v.oxw().sizeChange.emit(Nt)}),v.qZA()}2&q&&v.Q6J("tuiResizer",v.DdM(1,J))}const G=function(q){return[q,0]},Y=function(){return[1,0]},ft=["*"];let dt=(()=>{class q{constructor(){this.autoHeight=!1,this.width=null,this.height=null,this.sizeChange=new v.vpe}get hostWidth(){return(0,l.tuiIsNumber)(this.width)?(0,l.tuiPx)(this.width):this.width}get hostHeight(){return this.autoHeight?null:(0,l.tuiIsNumber)(this.height)?(0,l.tuiPx)(this.height):this.height}}return q.\u0275fac=function(lt){return new(lt||q)},q.\u0275cmp=v.Xpm({type:q,selectors:[["tui-editor-resizable"]],hostVars:4,hostBindings:function(lt,Ct){2&lt&&v.Udp("width",Ct.hostWidth)("height",Ct.hostHeight)},inputs:{autoHeight:"autoHeight",width:"width",height:"height"},outputs:{sizeChange:"sizeChange"},ngContentSelectors:ft,decls:5,vars:8,consts:[["tuiResizeable","",1,"t-resizable"],[1,"t-handle","t-handle-left-side",3,"tuiResizer","tuiSizeChange"],["class","t-handle t-handle-bottom-side",3,"tuiResizer","tuiSizeChange",4,"ngIf"],[1,"t-handle","t-handle-right-side",3,"tuiResizer","tuiSizeChange"],[1,"t-handle","t-handle-bottom-side",3,"tuiResizer","tuiSizeChange"]],template:function(lt,Ct){1&lt&&(v.F$t(),v.TgZ(0,"div",0),v.Hsn(1),v.TgZ(2,"div",1),v.NdJ("tuiSizeChange",function(xt){return Ct.sizeChange.emit(xt)}),v.qZA(),v.YNc(3,R,1,2,"div",2),v.TgZ(4,"div",3),v.NdJ("tuiSizeChange",function(xt){return Ct.sizeChange.emit(xt)}),v.qZA(),v.qZA()),2&lt&&(v.ekj("t-resizable-auto-height",Ct.autoHeight),v.xp6(2),v.Q6J("tuiResizer",v.VKq(5,G,-1)),v.xp6(1),v.Q6J("ngIf",!Ct.autoHeight),v.xp6(1),v.Q6J("tuiResizer",v.DdM(7,Y)))},directives:[T.U,b.L,h.O5],styles:['[_nghost-%COMP%]{position:relative;display:inline-block;box-sizing:border-box}[_nghost-%COMP%]   .t-resizable[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]   .t-resizable-auto-height[_ngcontent-%COMP%]{height:auto!important}[_nghost-%COMP%]   iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}[_nghost-%COMP%]:hover   .t-handle[_ngcontent-%COMP%]:after{opacity:1}.t-handle[_ngcontent-%COMP%]{position:absolute;top:0;display:flex;width:.75rem;cursor:col-resize;justify-content:center;align-items:center;height:100%}.t-handle[_ngcontent-%COMP%]:after{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";width:50%;height:33%;box-sizing:border-box;border-radius:var(--tui-radius-m);background:var(--tui-base-08);border:1px solid var(--tui-base-03);opacity:0}.t-handle-left-side[_ngcontent-%COMP%]{left:0}.t-handle-bottom-side[_ngcontent-%COMP%]{top:unset;bottom:.3125rem;height:.95rem;width:100%}.t-handle-right-side[_ngcontent-%COMP%]{right:0}'],changeDetection:0}),q})()},95110:(qt,Dt,c)=>{c.d(Dt,{_3:()=>J,V_:()=>R.V,Sl:()=>Y});var v=c(40400),l=c(68339),T=c(66682),b=c(46782),h=c(74788);let J=(()=>{class ft extends v.d{constructor(q,mt){super(),this._height=0,this._width=0,(0,T.T)((0,l.tuiTypedFromEvent)(q,"touchend"),(0,l.tuiTypedFromEvent)(q,"mouseup")).pipe((0,b.R)(mt)).subscribe(()=>this.updateAttributes({width:this.width,height:this.height}))}get attrs(){var q;return(null===(q=this.node)||void 0===q?void 0:q.attrs)||{src:""}}get width(){return this._width||this.attrs.width||null}get height(){return this._height||this.attrs.height||null}}return ft.\u0275fac=function(q){return new(q||ft)(h.Y36(Document),h.Y36(l.TuiDestroyService))},ft.\u0275dir=h.lG2({type:ft,features:[h.qOj]}),ft})();var R=c(96570),G=c(12057);let Y=(()=>{class ft{}return ft.\u0275fac=function(q){return new(q||ft)},ft.\u0275mod=h.oAB({type:ft}),ft.\u0275inj=h.cJS({imports:[[G.ez,l.TuiResizeModule,l.TuiResizerModule]]}),ft})()},20179:(qt,Dt,c)=>{c.d(Dt,{D:()=>J});var v=c(12057),l=c(74788),T=c(82113),b=c(68339),h=c(76040);let J=(()=>{class R{constructor(Y,ft,dt,q,mt,lt){this.elementRef=Y,this.renderer=ft,this.sanitizer=dt,this.tuiSanitizer=q,this.document=mt,this.editor=lt}set content(Y){this.renderer.setProperty(this.elementRef.nativeElement,"innerHTML",this.tuiSanitizer?this.tuiSanitizer.sanitize(l.q3G.HTML,Y.replace(/colwidth/g,"width")):this.sanitizer.sanitize(l.q3G.HTML,Y))}click(Y){var ft,dt;if(this.editor||!(0,b.tuiIsElement)(Y.target))return;const q=(null===(dt=null===(ft=Y.target)||void 0===ft?void 0:ft.closest("a"))||void 0===dt?void 0:dt.getAttribute("href"))||"";!q.startsWith("#")||(this.document.location.hash=q.replace("#",""),Y.preventDefault())}}return R.\u0275fac=function(Y){return new(Y||R)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.Tiy),l.Y36(h.TUI_SANITIZER,8),l.Y36(v.K0),l.Y36(T.JU,8))},R.\u0275cmp=l.Xpm({type:R,selectors:[["tui-editor-socket"]],hostAttrs:[1,"tui-editor-socket"],hostBindings:function(Y,ft){1&Y&&l.NdJ("click",function(q){return ft.click(q)})},inputs:{content:"content"},decls:0,vars:0,template:function(Y,ft){},styles:['.tui-editor-socket{display:block;margin:0;overflow:hidden;color:var(--tui-text-01);font:var(--tui-font-text-m)}.tui-editor-socket._preview-image img{cursor:pointer}.tui-editor-socket h1,.tui-editor-socket h2,.tui-editor-socket h3,.tui-editor-socket h4,.tui-editor-socket h5,.tui-editor-socket h6{word-break:break-word;line-height:normal}.tui-editor-socket a:not([data-type="jump-anchor"]){color:var(--tui-link);text-decoration:none;outline:none}.tui-editor-socket a:not([data-type="jump-anchor"]):hover{color:var(--tui-link-hover);text-decoration:underline}.tui-editor-socket a:not([data-type="jump-anchor"]):active{color:var(--tui-primary-active)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]{text-decoration:underline;-webkit-text-decoration-color:var(--tui-link);text-decoration-color:var(--tui-link)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:before{content:"#"}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:hover{color:var(--tui-link)}.tui-editor-socket .ProseMirror video,.tui-editor-socket .ProseMirror audio{pointer-events:none}.tui-editor-socket .tableWrapper,.tui-editor-socket .tui-table-wrapper{overflow-x:auto}.tui-editor-socket .ProseMirror{min-height:5.375rem;padding:0 1rem;outline:none;white-space:pre-wrap}.tui-editor-socket p:empty:after{content:" ";white-space:pre}.tui-editor-socket p:first-child{margin-top:0}.tui-editor-socket ul,.tui-editor-socket ol{list-style-type:none;margin:1rem 1rem 1rem 1.5rem;padding:0}.tui-editor-socket li{margin:1rem 0}.tui-editor-socket li p{display:inline;margin:0 auto;word-break:break-word}.tui-editor-socket ul li p{display:inline-block}.tui-editor-socket ul>li:before{content:"";display:inline-block;width:.5rem;height:.5rem;border-radius:100%;margin:.5rem .875rem .0625rem -1.375rem;background-color:var(--tui-primary);vertical-align:top;box-sizing:border-box}.tui-editor-socket li ul>li:before{background:none;border:.125rem solid var(--tui-primary)}.tui-editor-socket li ul>li>ul>li:before{background:var(--tui-primary);border-radius:0;width:.375rem;height:.375rem}.tui-editor-socket ol{counter-reset:item}.tui-editor-socket ol>li:before{content:counters(item,".") ".";width:1.5rem;margin:0 .75rem 0 -1.5rem;counter-increment:item;color:var(--tui-base-05);vertical-align:top}.tui-editor-socket pre{white-space:pre-wrap;word-break:break-word;border-radius:.25rem;margin:1rem 0;padding:.75rem 1rem;font-family:Courier,monospace;color:var(--tui-text-02);background:var(--tui-base-02)}.tui-editor-socket code{box-shadow:none}.tui-editor-socket pre+pre{margin-top:-1.8125rem;padding-top:0}.tui-editor-socket blockquote{margin:1.25rem 0 1.25rem 1.5rem;padding-left:1.0625rem;border-left:1px solid var(--tui-base-04)}.tui-editor-socket p{margin:1rem 0}.tui-editor-socket hr{border:none;border-top:1px solid var(--tui-base-03);margin:1rem 0}.tui-editor-socket table{border-collapse:collapse;table-layout:fixed;width:100%;margin:0;overflow:hidden}.tui-editor-socket table td{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word}.tui-editor-socket table th{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word;font-weight:bold;text-align:left;background-color:var(--tui-base-02);min-height:2rem}.tui-editor-socket table .column-resize-handle{position:absolute;right:-2px;top:0;bottom:-2px;width:4px;background-color:#adf;pointer-events:none}.tui-editor-socket table td>*{margin-top:0;margin-bottom:0}.tui-editor-socket table th>*{margin-top:0;margin-bottom:0}.tui-editor-socket .resize-cursor{cursor:ew-resize;cursor:col-resize}.tui-editor-socket table .tableWrapper{overflow-x:auto}.tui-editor-socket .selectedCell:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:var(--tui-selection);pointer-events:none}.tui-editor-socket font[face="Courier New"]{display:inline-block;padding:.25rem .5rem;border-radius:.25rem;background-color:#ecf1f7;word-break:break-word}.tui-editor-socket details{width:100%;border:1px solid var(--tui-base-04);border-radius:var(--tui-radius-l)}.tui-editor-socket summary{display:flex;align-items:center;min-height:3.5rem;width:100%;padding:0 1.25rem;box-sizing:border-box;border-radius:var(--tui-radius-l);pointer-events:none}.tui-editor-socket summary p{min-width:1px;margin:0}.tui-editor-socket summary::-webkit-details-marker{display:none}.tui-editor-socket details[open] summary{border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-editor-socket div[data-type=details-content]{padding:1.25rem;min-height:3rem;border:1px solid var(--tui-base-04);border-width:1px 0 0}.tui-editor-socket .details-wrapper{position:relative;display:flex}.tui-editor-socket .details-arrow{position:absolute;top:1.5rem;right:1.25rem;height:.575rem;width:.575rem;border:1px solid var(--tui-base-06);border-width:0 2px 2px 0;transform:rotate(45deg);transition:var(--tui-duration, .3s);-webkit-appearance:none;-moz-appearance:none;appearance:none;box-sizing:border-box;padding:0;background:none;cursor:pointer}.tui-editor-socket .details-wrapper_rendered .details-arrow{pointer-events:none}.tui-editor-socket .details-wrapper_rendered summary{transition:transform var(--tui-duration, .3s);cursor:pointer;pointer-events:auto}.tui-editor-socket .details-wrapper_rendered summary:hover{background:var(--tui-base-02)}.tui-editor-socket details[open]+.details-arrow{top:1.75rem;transform:rotate(225deg)}.t-editor-placeholder:before{content:attr(data-placeholder);float:left;color:var(--tui-base-05);pointer-events:none;height:0}.tui-group-node{display:flex;flex-direction:row}.tui-group-node:hover>.tui-group-pointer{pointer-events:auto;opacity:1}.tui-group-pointer{opacity:0;min-height:.8125rem;max-height:.8125rem;min-width:.8125rem;max-width:.8125rem;margin:.3125rem .3125rem 0 0;cursor:-webkit-grab;cursor:grab;background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="black" /></svg>\');background-repeat:no-repeat;background-size:contain;background-position:center}[data-mode=onDark] .tui-group-pointer{background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="white" /></svg>\')}\n'],encapsulation:2,changeDetection:0}),R})()},69303:(qt,Dt,c)=>{c.d(Dt,{a:()=>it});var v=c(64762),l=c(12057),T=c(74788),b=c(24751),h=c(17406),J=c(19074),R=c(84614),G=c(14309),Y=c(27863),ft=c(68339),dt=c(79089),q=c(40939),mt=c(2697),lt=c(17163),Ct=c(3881),Nt=c(1433),xt=c(9872),bt=c(4997),ut=c(33250),pt=c(26072),K=c(9829),At=c(82886),Ot=c(39088),St=c(20179),Rt=c(74982),gt=c(45050);function Ft(U,Q){if(1&U){const nt=T.EpF();T.TgZ(0,"tui-toolbar",9),T.NdJ("fileAttached",function(jt){return T.CHM(nt),T.oxw(2).fileAttached.emit(jt)}),T.Hsn(1,1),T.qZA()}if(2&U){const nt=T.oxw(2);T.Q6J("tools",nt.tools)("disabled",!nt.interactive)}}function $t(U,Q){if(1&U&&(T.TgZ(0,"div",10),T._uU(1),T.qZA()),2&U){const nt=T.oxw(2);T.xp6(1),T.hij(" ",nt.exampleText," ")}}function Gt(U,Q){if(1&U){const nt=T.EpF();T.TgZ(0,"div",11),T.TgZ(1,"tui-editor-socket",12),T.NdJ("valueChange",function(jt){return T.CHM(nt),T.oxw(2).onModelChange(jt)})("stateChange",function(){return 0}),T.qZA(),T.qZA()}if(2&U){T.oxw();const nt=T.MAs(9),kt=T.oxw();T.Q6J("tuiDropdownSelection",kt.dropdownSelectionHandler)("tuiDropdown",nt),T.xp6(1),T.Q6J("value",kt.value)("editable",kt.interactive)}}function ht(U,Q){if(1&U){const nt=T.EpF();T.TgZ(0,"tui-edit-link",13,14),T.NdJ("addLink",function(jt){T.CHM(nt);const Yt=T.MAs(1),le=T.oxw(2);return Yt.anchorMode?le.addAnchor(jt):le.addLink(jt)})("removeLink",function(){T.CHM(nt);const jt=T.MAs(1),Yt=T.oxw(2);return jt.anchorMode?Yt.removeAnchor():Yt.removeLink()}),T.qZA()}}function k(U,Q){if(1&U){const nt=T.EpF();T.TgZ(0,"div",1),T.NdJ("tuiActiveZoneChange",function(jt){return T.CHM(nt),T.oxw().onActiveZone(jt)}),T.TgZ(1,"div",2),T.YNc(2,Ft,2,2,"tui-toolbar",3),T.TgZ(3,"div",4),T.Hsn(4),T.qZA(),T.YNc(5,$t,2,1,"div",5),T.qZA(),T.TgZ(6,"tui-scrollbar",6),T.YNc(7,Gt,2,4,"div",7),T.YNc(8,ht,2,0,"ng-template",null,8,T.W1O),T._UZ(10,"tui-editor-portal-host"),T.qZA(),T.qZA()}if(2&U){const nt=Q.tuiLet,kt=T.oxw();T.Q6J("readOnly",kt.readOnly)("disabled",kt.disabled)("focus",kt.computedFocused)("hover",kt.pseudoHover)("invalid",kt.computedInvalid),T.xp6(2),T.Q6J("ngIf",nt),T.xp6(1),T.ekj("t-placeholder_raised",kt.placeholderRaised),T.xp6(2),T.Q6J("ngIf",kt.hasExampleText),T.xp6(2),T.Q6J("ngIf",nt)}}const et=["*",[["tools"]]];class it extends ft.AbstractTuiControl{constructor(Q,nt,kt,jt,Yt,le){super(Q,nt),this.editorLoaded$=kt,this.editorService=jt,this.contentProcessor=Yt,this.documentRef=le,this.exampleText="",this.tools=J.Db,this.fileAttached=new T.vpe,this.focused=!1,this.isSelectionLink=Vt=>this.currentFocusedNodeIsAnchor(Vt)&&(0,Y.nC)(Vt)}get nativeFocusableElement(){var Q;return this.computedDisabled?null:(null===(Q=this.element)||void 0===Q?void 0:Q.nativeElement)||null}get dropdownSelectionHandler(){return this.focused?this.isSelectionLink:ft.ALWAYS_FALSE_HANDLER}get editor(){return this.editorService.getOriginTiptapEditor()?this.editorService:null}get placeholderRaised(){return this.computedFocused&&!this.readOnly||this.hasValue}get hasExampleText(){return!!this.exampleText&&this.computedFocused&&!this.hasValue&&!this.readOnly}writeValue(Q){var nt;if(Q===this.value)return;const kt=this.contentProcessor(Q||"");super.writeValue(kt),kt!==Q&&(null===(nt=this.control)||void 0===nt||nt.setValue(kt,{onlySelf:!1,emitEvent:!1,emitModelToViewChange:!1,emitViewToModelChange:!1}))}onActiveZone(Q){this.focused=Q,this.updateFocused(Q)}onModelChange(Q){this.updateValue(Q)}addAnchor(Q){var nt;null===(nt=this.editor)||void 0===nt||nt.setAnchor(Q)}removeAnchor(){var Q;null===(Q=this.editor)||void 0===Q||Q.removeAnchor()}addLink(Q){var nt,kt;null===(nt=this.editor)||void 0===nt||nt.selectClosest(),null===(kt=this.editor)||void 0===kt||kt.setLink(Q)}removeLink(){var Q;null===(Q=this.editor)||void 0===Q||Q.unsetLink()}ngOnDestroy(){var Q;null===(Q=this.editor)||void 0===Q||Q.destroy()}getFallbackValue(){return""}currentFocusedNodeIsAnchor(Q){var nt,kt,jt;return!!(null===(kt=null===(nt=Q.startContainer.parentElement)||void 0===nt?void 0:nt.closest("a"))||void 0===kt?void 0:kt.contains((null===(jt=this.documentRef.getSelection())||void 0===jt?void 0:jt.focusNode)||null))}get hasValue(){return!!this.value}}it.\u0275fac=function(Q){return new(Q||it)(T.Y36(b.a5,10),T.Y36(T.sBO),T.Y36(G.ZW),T.Y36(R.$3),T.Y36(G.F1),T.Y36(l.K0))},it.\u0275cmp=T.Xpm({type:it,selectors:[["tui-editor"]],viewQuery:function(Q,nt){if(1&Q&&(T.Gf(R.JU,5,T.SBq),T.Gf(h.M6,5)),2&Q){let kt;T.iGM(kt=T.CRH())&&(nt.element=kt.first),T.iGM(kt=T.CRH())&&(nt.toolbar=kt.first)}},inputs:{exampleText:"exampleText",tools:"tools"},outputs:{fileAttached:"fileAttached"},features:[T._Bn([(0,ft.tuiAsFocusableItemAccessor)(it),dt.m]),T.qOj],ngContentSelectors:["*","tools"],decls:2,vars:3,consts:[["tuiWrapper","","appearance","textfield","class","t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange",4,"tuiLet"],["tuiWrapper","","appearance","textfield",1,"t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange"],[1,"t-toolbar-wrapper"],[3,"tools","disabled","fileAttached",4,"ngIf"],[1,"t-placeholder"],["class","t-example-text",4,"ngIf"],["tuiEditorPortal","",1,"t-scrollbar"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown",4,"ngIf"],["dropdown",""],[3,"tools","disabled","fileAttached"],[1,"t-example-text"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown"],["tuiTiptapEditor","","spellcheck","false",1,"tui-editor-socket",3,"value","editable","valueChange","stateChange"],[3,"addLink","removeLink"],["link",""]],template:function(Q,nt){1&Q&&(T.F$t(et),T.YNc(0,k,11,10,"div",0),T.ALo(1,"async")),2&Q&&T.Q6J("tuiLet",T.lcZ(1,1,nt.editorLoaded$))},directives:[q.L,mt.o,lt.e,l.O5,Ct.I,Nt.A,xt.d,bt.M,ut.Ek,pt.t,K.V,At.A,Ot.y,St.D,Rt.J,gt.l],pipes:[l.Ov],styles:["[_nghost-%COMP%]{position:relative;z-index:0;display:block;font:var(--tui-font-text-m);border-radius:var(--tui-radius-m)}.t-wrapper[_ngcontent-%COMP%]{display:flex;max-height:inherit;min-height:10rem;cursor:text;overflow:hidden;flex-direction:column;border-radius:inherit}.t-placeholder[_ngcontent-%COMP%]{transition-property:transform,font-size,color,letter-spacing;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;font:var(--tui-font-text-s);color:var(--tui-text-01);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:var(--tui-text-02);pointer-events:none;will-change:transform;transform:translateY(0);position:absolute;left:1rem;margin-top:1rem;width:95%;font-size:.9375rem}.t-placeholder_raised[_ngcontent-%COMP%]{transform:translateY(-.625rem)}[data-size=m][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font:var(--tui-font-text-xs);transform:translateY(-.5rem);letter-spacing:.025rem}._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], ._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill)}[data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], [data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill-night)}._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-03)}[data-size=l][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{font-size:.9375rem}[data-size=l][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font-size:.8156rem}[data-size=m]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01)}[data-mode=onDark][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}[data-size=m][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}@supports (-webkit-hyphens: none){.t-placeholder[_ngcontent-%COMP%]{will-change:unset;transition-property:transform,color,letter-spacing}}.t-placeholder_raised[_ngcontent-%COMP%]{width:110%}.t-example-text[_ngcontent-%COMP%]{position:absolute;left:1rem;margin-top:1.6rem;color:var(--tui-base-06);letter-spacing:normal;text-transform:none}.t-example-text_light[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}.t-example-text_dark[_ngcontent-%COMP%]{color:var(--tui-text-03)}.t-scrollbar[_ngcontent-%COMP%]{display:flex;max-height:inherit;border-top:1.625rem solid transparent;border-bottom:1px solid transparent;box-sizing:border-box}"],changeDetection:0}),(0,v.gn)([(0,ft.tuiDefaultProp)()],it.prototype,"exampleText",void 0),(0,v.gn)([(0,ft.tuiDefaultProp)()],it.prototype,"tools",void 0)},79089:(qt,Dt,c)=>{c.d(Dt,{m:()=>ft});var v=c(74788),l=c(84614),T=c(14309),b=c(82298),h=c(9112),J=c(15257),R=c(88002),G=c(47349),Y=c(73825);const ft=[{provide:T.F4,deps:[T.Wf],useFactory:dt=>{const q=new b.t(1);return Promise.all(dt).then(mt=>q.next(mt)),q}},{provide:T.Y1,deps:[v.Qsj],useFactory:dt=>dt.createElement("div")},{provide:T.ZW,deps:[T.Y1,T.F4,T.bG],useFactory:(dt,q,mt)=>(0,h.aj)([mt,q]).pipe((0,J.q)(1),(0,R.U)(([lt,Ct])=>new lt({element:dt,extensions:Ct})),(0,G.d)({bufferSize:1,refCount:!0}))},l.$3,Y.Y]},9872:(qt,Dt,c)=>{c.d(Dt,{d:()=>T});var v=c(68339),l=c(74788);let T=(()=>{class b extends v.AbstractTuiPortalHostComponent{}return b.\u0275fac=function(){let h;return function(R){return(h||(h=l.n5z(b)))(R||b)}}(),b.\u0275cmp=l.Xpm({type:b,selectors:[["tui-editor-portal-host"]],features:[l._Bn([{provide:v.AbstractTuiPortalService,useExisting:v.TuiDropdownPortalService},{provide:v.AbstractTuiPortalHostComponent,useExisting:b}]),l.qOj],decls:2,vars:0,consts:[["viewContainer",""]],template:function(J,R){1&J&&l.GkF(0,null,0)},styles:["[_nghost-%COMP%]{position:relative;z-index:1;display:block;height:100%}"],changeDetection:0}),b})()},1433:(qt,Dt,c)=>{c.d(Dt,{A:()=>b});var v=c(68339),l=c(73825),T=c(74788);let b=(()=>{class h{}return h.\u0275fac=function(R){return new(R||h)},h.\u0275dir=T.lG2({type:h,selectors:[["","tuiEditorPortal",""]],features:[T._Bn([{provide:v.TuiDropdownPortalService,useExisting:l.Y}])]}),h})()},73825:(qt,Dt,c)=>{c.d(Dt,{Y:()=>T});var v=c(68339),l=c(74788);let T=(()=>{class b extends v.AbstractTuiPortalService{}return b.\u0275fac=function(){let h;return function(R){return(h||(h=l.n5z(b)))(R||b)}}(),b.\u0275prov=l.Yz7({token:b,factory:b.\u0275fac}),b})()},19769:(qt,Dt,c)=>{c.d(Dt,{j:()=>xt});var v=c(64762),l=c(74788),T=c(24751),b=c(91211),h=c(27863),J=c(68339),R=c(76040),G=c(62939),Y=c(63060),ft=c(62733),dt=c(3729),q=c(23999),mt=c(17163);function lt(bt,ut){if(1&bt&&l._UZ(0,"div",4),2&bt){const pt=l.oxw();l.Udp("background",pt.background)}}function Ct(bt,ut){if(1&bt){const pt=l.EpF();l.TgZ(0,"tui-color-selector",5),l.NdJ("colorChange",function(At){return l.CHM(pt),l.oxw().onValueChange(At)}),l.qZA()}if(2&bt){const pt=ut.$implicit,K=l.oxw();l.Q6J("tuiActiveZoneParent",pt)("colors",K.colors)("color",K.value)}}class xt extends J.AbstractTuiControl{constructor(ut,pt,K){super(ut,pt),this.domSanitizer=K,this.colors=new Map,this.open=!1}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return!!this.dropdown&&this.dropdown.focused}get background(){return this.sanitize(this.value,this.domSanitizer)}onClick(){this.open=!this.open}onValueChange(ut){this.updateValue(ut)}onFocused(ut){this.updateFocused(ut)}getFallbackValue(){return"#000000"}sanitize(ut,pt){return ut.startsWith("linear-gradient(")?pt.bypassSecurityTrustStyle((0,h.CH)((0,h._N)((0,h.U5)(ut)))):ut}}xt.\u0275fac=function(ut){return new(ut||xt)(l.Y36(T.a5,10),l.Y36(l.sBO),l.Y36(b.H7))},xt.\u0275cmp=l.Xpm({type:xt,selectors:[["tui-input-color"]],viewQuery:function(ut,pt){if(1&ut&&(l.Gf(R.TuiPrimitiveTextfieldComponent,5),l.Gf(R.TuiHostedDropdownComponent,5)),2&ut){let K;l.iGM(K=l.CRH())&&(pt.textfield=K.first),l.iGM(K=l.CRH())&&(pt.dropdown=K.first)}},hostBindings:function(ut,pt){1&ut&&l.NdJ("click",function(){return pt.onClick()})},inputs:{colors:"colors"},features:[l._Bn([],[(0,R.tuiDropdownOptionsProvider)({maxHeight:600})]),l.qOj],ngContentSelectors:["*"],decls:7,vars:12,consts:[[1,"t-wrapper",3,"content","open","openChange"],[1,"t-textfield",3,"tuiTextfieldIconLeft","pseudoFocus","pseudoHover","pseudoActive","invalid","focusable","nativeId","disabled","readOnly","value","valueChange","focusedChange"],["color",""],["picker",""],[1,"t-color"],[3,"tuiActiveZoneParent","colors","color","colorChange"]],template:function(ut,pt){if(1&ut&&(l.F$t(),l.TgZ(0,"tui-hosted-dropdown",0),l.NdJ("openChange",function(At){return pt.open=At}),l.TgZ(1,"tui-primitive-textfield",1),l.NdJ("valueChange",function(At){return pt.onValueChange(At)})("focusedChange",function(At){return pt.onFocused(At)}),l.Hsn(2),l.qZA(),l.qZA(),l.YNc(3,lt,1,2,"ng-template",null,2,l.W1O),l.YNc(5,Ct,1,3,"ng-template",null,3,l.W1O)),2&ut){const K=l.MAs(4),At=l.MAs(6);l.Q6J("content",At)("open",pt.open),l.xp6(1),l.Q6J("tuiTextfieldIconLeft",K)("pseudoFocus",pt.computedFocused)("pseudoHover",pt.pseudoHover)("pseudoActive",pt.pseudoActive)("invalid",pt.computedInvalid)("focusable",pt.focusable)("nativeId",pt.nativeId)("disabled",pt.disabled)("readOnly",pt.readOnly)("value",pt.value)}},directives:[G.o,Y.y,ft.B,dt.aR,q.s,mt.e],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-wrapper[_ngcontent-%COMP%]{display:flex;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-color[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-03-dark);border-radius:.125rem}"],changeDetection:0}),(0,v.gn)([(0,J.tuiDefaultProp)()],xt.prototype,"colors",void 0),(0,v.gn)([J.tuiPure],xt.prototype,"sanitize",null)},37924:(qt,Dt,c)=>{c.d(Dt,{X:()=>bt});var v=c(84614),l=c(14309),T=c(9112),b=c(88002),h=c(74788),J=c(12057),R=c(40939),G=c(62939),Y=c(76189),ft=c(67446),dt=c(29070),q=c(54255),mt=c(15491),lt=c(219);function Ct(ut,pt){if(1&ut){const K=h.EpF();h.TgZ(0,"div",6),h.TgZ(1,"button",7),h.NdJ("click",function(){return h.CHM(K),h.oxw(3).editor.onAlign("left")}),h.qZA(),h.TgZ(2,"button",8),h.NdJ("click",function(){return h.CHM(K),h.oxw(3).editor.onAlign("center")}),h.qZA(),h.TgZ(3,"button",9),h.NdJ("click",function(){return h.CHM(K),h.oxw(3).editor.onAlign("right")}),h.qZA(),h.TgZ(4,"button",10),h.NdJ("click",function(){return h.CHM(K),h.oxw(3).editor.onAlign("justify")}),h.qZA(),h.qZA()}if(2&ut){const K=h.oxw().tuiLet,At=h.oxw().ngIf;h.xp6(1),h.Q6J("pseudoActive",!(null==K||!K.left))("tuiHint",At.justifyLeft),h.xp6(1),h.Q6J("pseudoActive",!(null==K||!K.center))("tuiHint",At.justifyCenter),h.xp6(1),h.Q6J("pseudoActive",!(null==K||!K.right))("tuiHint",At.justifyRight),h.xp6(1),h.Q6J("pseudoActive",!(null==K||!K.justify))("tuiHint",At.justifyFull)}}function Nt(ut,pt){if(1&ut&&(h.TgZ(0,"tui-hosted-dropdown",2,3),h._UZ(2,"button",4),h.YNc(3,Ct,5,8,"ng-template",null,5,h.W1O),h.qZA()),2&ut){const K=h.MAs(1),At=h.MAs(4),Ot=h.oxw().ngIf;h.Q6J("content",At),h.xp6(2),h.Q6J("tuiHint",Ot.justify)("tuiHintDescribe","")("pseudoActive",K.open)("focusable",K.open)}}function xt(ut,pt){if(1&ut&&(h.ynx(0),h.YNc(1,Nt,5,5,"tui-hosted-dropdown",1),h.ALo(2,"async"),h.BQk()),2&ut){const K=h.oxw();h.xp6(1),h.Q6J("tuiLet",h.lcZ(2,1,K.alignState$))}}let bt=(()=>{class ut{constructor(K,At){this.editor=K,this.texts$=At,this.alignState$=(0,T.aj)([this.editor.isActive$({textAlign:"left"}),this.editor.isActive$({textAlign:"right"}),this.editor.isActive$({textAlign:"center"}),this.editor.isActive$({textAlign:"justify"})]).pipe((0,b.U)(([Ot,St,Rt,gt])=>({left:Ot,right:St,center:Rt,justify:gt})))}}return ut.\u0275fac=function(K){return new(K||ut)(h.Y36(v.$3),h.Y36(l.rf))},ut.\u0275cmp=h.Xpm({type:ut,selectors:[["tui-align-content"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["align",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["alignDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignCenterLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignRightLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignJustifyLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"]],template:function(K,At){1&K&&(h.YNc(0,xt,3,3,"ng-container",0),h.ALo(1,"async")),2&K&&h.Q6J("ngIf",h.lcZ(1,1,At.texts$))},directives:[J.O5,R.L,G.o,Y.v,ft.D,dt.x,q.t,mt.D,lt.$],pipes:[J.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),ut})()},15587:(qt,Dt,c)=>{c.d(Dt,{T:()=>bt});var v=c(84614),l=c(14309),T=c(88002),b=c(87519),h=c(74788),J=c(62939),R=c(76189),G=c(67446),Y=c(29070),ft=c(54255),dt=c(15491),q=c(219),mt=c(20933),lt=c(12057),Ct=c(35065);function Nt(ut,pt){if(1&ut){const K=h.EpF();h.TgZ(0,"button",5),h.NdJ("click",function(){const St=h.CHM(K).index;return h.oxw(2).onCode(!!St)}),h._uU(1),h.qZA()}if(2&ut){const K=pt.$implicit;h.xp6(1),h.hij(" ",K," ")}}function xt(ut,pt){if(1&ut&&(h.TgZ(0,"tui-data-list"),h.YNc(1,Nt,2,1,"button",4),h.ALo(2,"async"),h.qZA()),2&ut){const K=h.oxw();h.xp6(1),h.Q6J("ngForOf",h.lcZ(2,1,K.codeOptionsTexts$))}}let bt=(()=>{class ut{constructor(K,At,Ot){this.editor=K,this.texts$=At,this.codeOptionsTexts$=Ot,this.hintText$=this.texts$.pipe((0,T.U)(St=>St.code)),this.insideCode$=this.editor.stateChange$.pipe((0,T.U)(()=>this.editor.isActive("code")||this.editor.isActive("codeBlock")),(0,b.x)())}onCode(K){K?this.editor.toggleCodeBlock():this.editor.toggleCode()}}return ut.\u0275fac=function(K){return new(K||ut)(h.Y36(v.$3),h.Y36(l.rf),h.Y36(l.Mr))},ut.\u0275cmp=h.Xpm({type:ut,selectors:[["tui-code"]],decls:7,vars:9,consts:[[3,"content"],["codes",""],["tuiIconButton","","type","button","size","s","icon","tuiIconCodeLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["codesDropdown",""],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(K,At){if(1&K&&(h.TgZ(0,"tui-hosted-dropdown",0,1),h._UZ(2,"button",2),h.ALo(3,"async"),h.ALo(4,"async"),h.YNc(5,xt,3,3,"ng-template",null,3,h.W1O),h.qZA()),2&K){const Ot=h.MAs(1),St=h.MAs(6);h.Q6J("content",St),h.xp6(2),h.Q6J("tuiHint",h.lcZ(3,5,At.hintText$))("tuiHintDescribe","")("pseudoActive",Ot.open||h.lcZ(4,7,At.insideCode$))("focusable",Ot.open)}},directives:[J.o,R.v,G.D,Y.x,ft.t,dt.D,q.$,mt.q,lt.sg,Ct.v],pipes:[lt.Ov],encapsulation:2,changeDetection:0}),ut})()},18832:(qt,Dt,c)=>{c.d(Dt,{U:()=>lt});var v=c(84614),l=c(14309),T=c(88002),b=c(87519),h=c(74788),J=c(12057),R=c(76189),G=c(67446),Y=c(29070),ft=c(54255),dt=c(15491),q=c(219);function mt(Ct,Nt){if(1&Ct){const xt=h.EpF();h.TgZ(0,"button",1),h.NdJ("click",function(){return h.CHM(xt),h.oxw().removeDetails()}),h.ALo(1,"async"),h.qZA()}if(2&Ct){const xt=Nt.ngIf,bt=h.oxw();h.Q6J("tuiHint",xt.removeDetails)("tuiHintDescribe","")("focusable",!1)("disabled",!!h.lcZ(1,4,bt.disabled$))}}let lt=(()=>{class Ct{constructor(xt,bt){this.editor=xt,this.texts$=bt,this.disabled$=this.editor.stateChange$.pipe((0,T.U)(()=>!this.editor.isActive("details")),(0,b.x)())}removeDetails(){this.editor.removeDetails()}}return Ct.\u0275fac=function(xt){return new(xt||Ct)(h.Y36(v.$3),h.Y36(l.rf))},Ct.\u0275cmp=h.Xpm({type:Ct,selectors:[["tui-details-remove"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","disabled","click"]],template:function(xt,bt){1&xt&&(h.YNc(0,mt,2,6,"button",0),h.ALo(1,"async")),2&xt&&h.Q6J("ngIf",h.lcZ(1,1,bt.texts$))},directives:[J.O5,R.v,G.D,Y.x,ft.t,dt.D,q.$],pipes:[J.Ov],encapsulation:2,changeDetection:0}),Ct})()},50237:(qt,Dt,c)=>{c.d(Dt,{y:()=>q});var v=c(84614),l=c(14309),T=c(74788),b=c(12057),h=c(76189),J=c(67446),R=c(29070),G=c(54255),Y=c(15491),ft=c(219);function dt(mt,lt){if(1&mt){const Ct=T.EpF();T.TgZ(0,"button",1),T.NdJ("click",function(){return T.CHM(Ct),T.oxw().setDetails()}),T.qZA()}2&mt&&T.Q6J("tuiHint",lt.ngIf.setDetails)("tuiHintDescribe","")("focusable",!1)}let q=(()=>{class mt{constructor(Ct,Nt){this.editor=Ct,this.texts$=Nt}setDetails(){this.editor.setDetails()}}return mt.\u0275fac=function(Ct){return new(Ct||mt)(T.Y36(v.$3),T.Y36(l.rf))},mt.\u0275cmp=T.Xpm({type:mt,selectors:[["tui-details"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","click"]],template:function(Ct,Nt){1&Ct&&(T.YNc(0,dt,1,3,"button",0),T.ALo(1,"async")),2&Ct&&T.Q6J("ngIf",T.lcZ(1,1,Nt.texts$))},directives:[b.O5,h.v,J.D,R.x,G.t,Y.D,ft.$],pipes:[b.Ov],encapsulation:2,changeDetection:0}),mt})()},84985:(qt,Dt,c)=>{c.d(Dt,{m:()=>bt});var v=c(84614),l=c(14309),T=c(68339),b=c(88002),h=c(74788),J=c(62939),R=c(76189),G=c(67446),Y=c(29070),ft=c(54255),dt=c(15491),q=c(219),mt=c(20933),lt=c(12057),Ct=c(35065);function Nt(ut,pt){if(1&ut){const K=h.EpF();h.TgZ(0,"button",5),h.NdJ("click",function(){const St=h.CHM(K).$implicit;return h.oxw(2).onClick(St)}),h.ALo(1,"lowercase"),h._uU(2),h.qZA()}if(2&ut){const K=pt.$implicit;h.Udp("font-family",K.family)("font-size",K.px,"px")("font-weight",K.weight),h.uIk("automation-id","tui_font__"+h.lcZ(1,8,K.name||"")),h.xp6(2),h.hij(" ",K.name," ")}}function xt(ut,pt){if(1&ut&&(h.TgZ(0,"tui-data-list"),h.YNc(1,Nt,3,10,"button",4),h.ALo(2,"async"),h.qZA()),2&ut){const K=h.oxw();h.xp6(1),h.Q6J("ngForOf",h.lcZ(2,1,K.fontsOptions$))}}let bt=(()=>{class ut{constructor(K,At,Ot,St){this.options=K,this.editor=At,this.texts$=Ot,this.fontOptionsTexts$=St,this.fontsOptions$=this.fontOptionsTexts$.pipe((0,b.U)(Rt=>this.options.fontOptions(Rt))),this.fontText$=this.texts$.pipe((0,b.U)(Rt=>Rt.font))}onClick({headingLevel:K,px:At}){K?this.editor.setHeading(K):this.editor.setParagraph({fontSize:(0,T.tuiPx)(At||0)})}}return ut.\u0275fac=function(K){return new(K||ut)(h.Y36(l.mJ),h.Y36(v.$3),h.Y36(l.rf),h.Y36(l.UN))},ut.\u0275cmp=h.Xpm({type:ut,selectors:[["tui-font-size"]],decls:6,vars:7,consts:[[3,"content"],["fonts",""],["tuiIconButton","","type","button","size","s","appearance","icon","icon","tuiIconFontLarge","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["fontsDropdown",""],["tuiOption","",3,"fontFamily","fontSize","fontWeight","click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(K,At){if(1&K&&(h.TgZ(0,"tui-hosted-dropdown",0,1),h._UZ(2,"button",2),h.ALo(3,"async"),h.YNc(4,xt,3,3,"ng-template",null,3,h.W1O),h.qZA()),2&K){const Ot=h.MAs(1),St=h.MAs(5);h.Q6J("content",St),h.xp6(2),h.Q6J("tuiHint",h.lcZ(3,5,At.fontText$))("tuiHintDescribe","")("pseudoActive",Ot.open)("focusable",Ot.open)}},directives:[J.o,R.v,G.D,Y.x,ft.t,dt.D,q.$,mt.q,lt.sg,Ct.v],pipes:[lt.Ov,lt.i8],encapsulation:2,changeDetection:0}),ut})()},62976:(qt,Dt,c)=>{c.d(Dt,{h:()=>Ot});var v=c(19074),l=c(84614),T=c(48699),b=c(14309),h=c(9112),J=c(88002),R=c(74788),G=c(12057),Y=c(62939),ft=c(76189),dt=c(67446),q=c(29070),mt=c(54255),lt=c(15491),Ct=c(219);function Nt(St,Rt){if(1&St){const gt=R.EpF();R.TgZ(0,"button",11),R.NdJ("click",function(){return R.CHM(gt),R.oxw(4).editor.toggleBold()}),R.qZA()}if(2&St){const gt=R.oxw(2).ngIf,Ft=R.oxw().ngIf;R.Q6J("tuiHint",Ft.bold)("pseudoActive",gt.bold)}}function xt(St,Rt){if(1&St){const gt=R.EpF();R.TgZ(0,"button",12),R.NdJ("click",function(){return R.CHM(gt),R.oxw(4).editor.toggleItalic()}),R.qZA()}if(2&St){const gt=R.oxw(2).ngIf,Ft=R.oxw().ngIf;R.Q6J("tuiHint",Ft.italic)("pseudoActive",gt.italic)}}function bt(St,Rt){if(1&St){const gt=R.EpF();R.TgZ(0,"button",13),R.NdJ("click",function(){return R.CHM(gt),R.oxw(4).editor.toggleUnderline()}),R.qZA()}if(2&St){const gt=R.oxw(2).ngIf,Ft=R.oxw().ngIf;R.Q6J("tuiHint",Ft.underline)("pseudoActive",gt.underline)}}function ut(St,Rt){if(1&St){const gt=R.EpF();R.TgZ(0,"button",14),R.NdJ("click",function(){return R.CHM(gt),R.oxw(4).editor.toggleStrike()}),R.qZA()}if(2&St){const gt=R.oxw(2).ngIf,Ft=R.oxw().ngIf;R.Q6J("tuiHint",Ft.strikeThrough)("pseudoActive",gt.strike)}}function pt(St,Rt){if(1&St&&(R.TgZ(0,"div",6),R.YNc(1,Nt,1,2,"button",7),R.YNc(2,xt,1,2,"button",8),R.YNc(3,bt,1,2,"button",9),R.YNc(4,ut,1,2,"button",10),R.qZA()),2&St){const gt=R.oxw(3);R.xp6(1),R.Q6J("ngIf",gt.isEnabled(gt.TuiEditorTool.Bold)),R.xp6(1),R.Q6J("ngIf",gt.isEnabled(gt.TuiEditorTool.Italic)),R.xp6(1),R.Q6J("ngIf",gt.isEnabled(gt.TuiEditorTool.Underline)),R.xp6(1),R.Q6J("ngIf",gt.isEnabled(gt.TuiEditorTool.Strikethrough))}}function K(St,Rt){if(1&St&&(R.TgZ(0,"tui-hosted-dropdown",2,3),R._UZ(2,"button",4),R.YNc(3,pt,5,4,"ng-template",null,5,R.W1O),R.qZA()),2&St){const gt=Rt.ngIf,Ft=R.MAs(1),$t=R.MAs(4),Gt=R.oxw().ngIf;R.Q6J("content",$t),R.xp6(2),R.Q6J("tuiHint",Gt.fontStyle)("tuiHintDescribe","")("pseudoActive",Ft.open||gt.bold||gt.italic||gt.underline||gt.strike)("focusable",Ft.open)}}function At(St,Rt){if(1&St&&(R.ynx(0),R.YNc(1,K,5,5,"tui-hosted-dropdown",1),R.ALo(2,"async"),R.BQk()),2&St){const gt=R.oxw();R.xp6(1),R.Q6J("ngIf",R.lcZ(2,1,gt.fontStyleState$))}}let Ot=(()=>{class St{constructor(gt,Ft){this.editor=gt,this.texts$=Ft,this.toolsSet=new Set(v.Db),this.TuiEditorTool=T._,this.fontStyleState$=(0,h.aj)([this.editor.isActive$("bold"),this.editor.isActive$("italic"),this.editor.isActive$("underline"),this.editor.isActive$("strike")]).pipe((0,J.U)(([$t,Gt,ht,k])=>({bold:$t,italic:Gt,underline:ht,strike:k})))}set enabledTools(gt){this.toolsSet=new Set(gt)}isEnabled(gt){return this.toolsSet.has(gt)}}return St.\u0275fac=function(gt){return new(gt||St)(R.Y36(l.$3),R.Y36(b.rf))},St.\u0275cmp=R.Xpm({type:St,selectors:[["tui-font-style"]],inputs:{enabledTools:"enabledTools"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"ngIf"],[3,"content"],["format",""],["tuiIconButton","","type","button","size","s","icon","tuiIconFormatLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__font-style-button",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["formatDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"]],template:function(gt,Ft){1&gt&&(R.YNc(0,At,3,3,"ng-container",0),R.ALo(1,"async")),2&gt&&R.Q6J("ngIf",R.lcZ(1,1,Ft.texts$))},directives:[G.O5,Y.o,ft.v,dt.D,q.x,mt.t,lt.D,Ct.$],pipes:[G.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),St})()},19762:(qt,Dt,c)=>{c.d(Dt,{d:()=>mt});var v=c(84614),l=c(14309),T=c(88002),b=c(87519),h=c(74788),J=c(76189),R=c(67446),G=c(29070),Y=c(54255),ft=c(15491),dt=c(219),q=c(12057);let mt=(()=>{class lt{constructor(Nt,xt){this.editor=Nt,this.texts$=xt,this.insertGroupText$=this.texts$.pipe((0,T.U)(bt=>bt.insertGroup)),this.removeGroupText$=this.texts$.pipe((0,T.U)(bt=>bt.removeGroup)),this.disabled$=this.editor.stateChange$.pipe((0,T.U)(()=>!this.editor.isActive("group")),(0,b.x)())}addGroup(){this.editor.setGroup()}removeGroup(){this.editor.removeGroup()}}return lt.\u0275fac=function(Nt){return new(Nt||lt)(h.Y36(v.$3),h.Y36(l.rf))},lt.\u0275cmp=h.Xpm({type:lt,selectors:[["tui-editor-group-tool"]],decls:5,vars:13,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconPlusLarge","appearance","icon",3,"focusable","tuiHint","tuiHintDescribe","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconRemoveLarge","appearance","icon",3,"focusable","disabled","tuiHint","tuiHintDescribe","click"]],template:function(Nt,xt){1&Nt&&(h.TgZ(0,"button",0),h.NdJ("click",function(){return xt.addGroup()}),h.ALo(1,"async"),h.qZA(),h.TgZ(2,"button",1),h.NdJ("click",function(){return xt.removeGroup()}),h.ALo(3,"async"),h.ALo(4,"async"),h.qZA()),2&Nt&&(h.Q6J("focusable",!1)("tuiHint",h.lcZ(1,7,xt.insertGroupText$))("tuiHintDescribe",""),h.xp6(2),h.Q6J("focusable",!1)("disabled",!!h.lcZ(3,9,xt.disabled$))("tuiHint",h.lcZ(4,11,xt.removeGroupText$))("tuiHintDescribe",""))},directives:[J.v,R.D,G.x,Y.t,ft.D,dt.$],pipes:[q.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),lt})()},7416:(qt,Dt,c)=>{c.d(Dt,{U:()=>Ot});var v=c(64762),l=c(84614),T=c(14309),b=c(68339),h=c(88002),J=c(87519),R=c(74788),G=c(40939),Y=c(62939),ft=c(33250),dt=c(76189),q=c(67446),mt=c(29070),lt=c(54255),Ct=c(15491),Nt=c(219),xt=c(12057),bt=c(5451),ut=c(17163);function pt(St,Rt){if(1&St&&R._UZ(0,"div",6),2&St){const gt=R.oxw().tuiLet;R.Udp("background",gt)}}function K(St,Rt){if(1&St){const gt=R.EpF();R.TgZ(0,"tui-palette",7),R.NdJ("selectedColor",function($t){return R.CHM(gt),R.oxw(2).editor.setBackgroundColor($t)}),R.qZA()}if(2&St){const gt=Rt.$implicit,Ft=R.oxw(2);R.Q6J("tuiActiveZoneParent",gt)("colors",Ft.colors)}}function At(St,Rt){if(1&St&&(R.TgZ(0,"tui-hosted-dropdown",1,2),R._UZ(2,"button",3),R.ALo(3,"async"),R.YNc(4,pt,1,2,"div",4),R.YNc(5,K,1,2,"ng-template",null,5,R.W1O),R.qZA()),2&St){const gt=Rt.tuiLet,Ft=R.MAs(1),$t=R.MAs(6),Gt=R.oxw();R.Q6J("content",$t)("tuiDropdownMaxHeight",999),R.xp6(2),R.Q6J("tuiHint",R.lcZ(3,7,Gt.backColorText$))("tuiHintDescribe","")("pseudoActive",Ft.open)("focusable",Ft.open),R.xp6(2),R.Q6J("ngIf",!Gt.isBlankColor(gt||""))}}class Ot{constructor(Rt,gt,Ft){this.editor=Rt,this.texts$=gt,this.defaultOptions=Ft,this.colors=this.defaultOptions.colors,this.backgroundColor$=this.editor.stateChange$.pipe((0,h.U)(()=>this.editor.getBackgroundColor()||this.defaultOptions.blankColor),(0,J.x)()),this.backColorText$=this.texts$.pipe((0,h.U)($t=>$t.backColor))}isBlankColor(Rt){return Rt===this.defaultOptions.blankColor}}Ot.\u0275fac=function(Rt){return new(Rt||Ot)(R.Y36(l.$3),R.Y36(T.rf),R.Y36(T.mJ))},Ot.\u0275cmp=R.Xpm({type:Ot,selectors:[["tui-highlight-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["hilite",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconHiliteLarge","automation-id","toolbar__hilite-button",1,"t-tool",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["class","t-plate",3,"background",4,"ngIf"],["hiliteDropdown",""],[1,"t-plate"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(Rt,gt){1&Rt&&(R.YNc(0,At,7,9,"tui-hosted-dropdown",0),R.ALo(1,"async")),2&Rt&&R.Q6J("tuiLet",R.lcZ(1,1,gt.backgroundColor$))},directives:[G.L,Y.o,ft.Ek,dt.v,q.D,mt.x,lt.t,Ct.D,Nt.$,xt.O5,bt.R,ut.e],pipes:[xt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,v.gn)([(0,b.tuiDefaultProp)()],Ot.prototype,"colors",void 0)},93252:(qt,Dt,c)=>{c.d(Dt,{Xp:()=>v.X,pu:()=>J,Tf:()=>R.T,P_:()=>G,yj:()=>Y.y,y9:()=>ft,Un:()=>dt.U,dN:()=>Nt.d,jP:()=>xt,mK:()=>q.m,p7:()=>mt,hr:()=>lt.h,Zv:()=>Ct,UT:()=>bt.U,XC:()=>pt,w2:()=>K.w,Ur:()=>At,pH:()=>Ot.p,mp:()=>St,iN:()=>k.i,lT:()=>Rt.l,iA:()=>$t,YH:()=>Gt.Y,er:()=>ht,_I:()=>k._,__:()=>et,M8:()=>gt.M,kU:()=>Ft,G0:()=>st.G,_t:()=>it});var v=c(37924),l=c(12057),T=c(68339),b=c(76040),h=c(74788);let J=(()=>{class U{}return U.\u0275fac=function(nt){return new(nt||U)},U.\u0275mod=h.oAB({type:U}),U.\u0275inj=h.cJS({imports:[[l.ez,b.TuiHostedDropdownModule,b.TuiButtonModule,b.TuiHintModule,T.TuiLetModule]]}),U})();var R=c(15587);let G=(()=>{class U{}return U.\u0275fac=function(nt){return new(nt||U)},U.\u0275mod=h.oAB({type:U}),U.\u0275inj=h.cJS({imports:[[l.ez,b.TuiHostedDropdownModule,b.TuiButtonModule,b.TuiHintModule,b.TuiDataListModule]]}),U})();var Y=c(50237);let ft=(()=>{class U{}return U.\u0275fac=function(nt){return new(nt||U)},U.\u0275mod=h.oAB({type:U}),U.\u0275inj=h.cJS({imports:[[l.ez,b.TuiButtonModule,b.TuiHintModule]]}),U})();var dt=c(18832),q=c(84985);let mt=(()=>{class U{}return U.\u0275fac=function(nt){return new(nt||U)},U.\u0275mod=h.oAB({type:U}),U.\u0275inj=h.cJS({imports:[[l.ez,b.TuiHostedDropdownModule,b.TuiButtonModule,b.TuiHintModule,b.TuiDataListModule]]}),U})();var lt=c(62976);let Ct=(()=>{class U{}return U.\u0275fac=function(nt){return new(nt||U)},U.\u0275mod=h.oAB({type:U}),U.\u0275inj=h.cJS({imports:[[l.ez,b.TuiHostedDropdownModule,b.TuiButtonModule,b.TuiHintModule]]}),U})();var Nt=c(19762);let xt=(()=>{class U{}return U.\u0275fac=function(nt){return new(nt||U)},U.\u0275mod=h.oAB({type:U}),U.\u0275inj=h.cJS({imports:[[l.ez,b.TuiButtonModule,b.TuiHintModule]]}),U})();var bt=c(7416),ut=c(27050);let pt=(()=>{class U{}return U.\u0275fac=function(nt){return new(nt||U)},U.\u0275mod=h.oAB({type:U}),U.\u0275inj=h.cJS({imports:[[l.ez,b.TuiHostedDropdownModule,b.TuiButtonModule,ut.VM,b.TuiHintModule,b.TuiDropdownModule,T.TuiActiveZoneModule,T.TuiLetModule]]}),U})();var K=c(13441);let At=(()=>{class U{}return U.\u0275fac=function(nt){return new(nt||U)},U.\u0275mod=h.oAB({type:U}),U.\u0275inj=h.cJS({imports:[[l.ez,b.TuiHostedDropdownModule,b.TuiButtonModule,b.TuiHintModule,T.TuiLetModule]]}),U})();var Ot=c(95558);let St=(()=>{class U{}return U.\u0275fac=function(nt){return new(nt||U)},U.\u0275mod=h.oAB({type:U}),U.\u0275inj=h.cJS({imports:[[l.ez,b.TuiHostedDropdownModule,ut.VM,b.TuiButtonModule,b.TuiHintModule,T.TuiActiveZoneModule,b.TuiDropdownModule,T.TuiLetModule]]}),U})();var Rt=c(28962),gt=c(74549);let Ft=(()=>{class U{}return U.\u0275fac=function(nt){return new(nt||U)},U.\u0275mod=h.oAB({type:U}),U.\u0275inj=h.cJS({imports:[[l.ez,T.TuiRepeatTimesModule]]}),U})(),$t=(()=>{class U{}return U.\u0275fac=function(nt){return new(nt||U)},U.\u0275mod=h.oAB({type:U}),U.\u0275inj=h.cJS({imports:[[l.ez,b.TuiHostedDropdownModule,b.TuiDropdownModule,b.TuiButtonModule,b.TuiHintModule,Ft]]}),U})();var Gt=c(76965);let ht=(()=>{class U{}return U.\u0275fac=function(nt){return new(nt||U)},U.\u0275mod=h.oAB({type:U}),U.\u0275inj=h.cJS({imports:[[l.ez,b.TuiButtonModule,b.TuiHintModule,T.TuiLetModule]]}),U})();var k=c(22063);let et=(()=>{class U{}return U.\u0275fac=function(nt){return new(nt||U)},U.\u0275mod=h.oAB({type:U}),U.\u0275inj=h.cJS({imports:[[l.ez,b.TuiHostedDropdownModule,b.TuiHintModule,b.TuiButtonModule,b.TuiDataListModule,T.TuiLetModule]]}),U})();var st=c(10528);let it=(()=>{class U{}return U.\u0275fac=function(nt){return new(nt||U)},U.\u0275mod=h.oAB({type:U}),U.\u0275inj=h.cJS({imports:[[l.ez,b.TuiButtonModule,b.TuiHostedDropdownModule,b.TuiDropdownModule,b.TuiHintModule,ut.VM,T.TuiActiveZoneModule,T.TuiLetModule]]}),U})()},13441:(qt,Dt,c)=>{c.d(Dt,{w:()=>bt});var v=c(84614),l=c(14309),T=c(9112),b=c(88002),h=c(74788),J=c(12057),R=c(40939),G=c(62939),Y=c(76189),ft=c(67446),dt=c(29070),q=c(54255),mt=c(15491),lt=c(219);function Ct(ut,pt){if(1&ut){const K=h.EpF();h.TgZ(0,"div",6),h.TgZ(1,"button",7),h.NdJ("click",function(){return h.CHM(K),h.oxw(3).editor.toggleUnorderedList()}),h.qZA(),h.TgZ(2,"button",8),h.NdJ("click",function(){return h.CHM(K),h.oxw(3).editor.toggleOrderedList()}),h.qZA(),h.TgZ(3,"button",9),h.NdJ("click",function(){return h.CHM(K),h.oxw(3).sinkListItem()}),h.qZA(),h.TgZ(4,"button",10),h.NdJ("click",function(){return h.CHM(K),h.oxw(3).liftListItem()}),h.qZA(),h.qZA()}if(2&ut){const K=h.oxw().tuiLet,At=h.oxw().ngIf;h.xp6(1),h.Q6J("tuiHint",At.unorderedList)("pseudoActive",!(null==K||!K.unordered)),h.xp6(1),h.Q6J("tuiHint",At.orderedList)("pseudoActive",!(null==K||!K.ordered)),h.xp6(1),h.Q6J("tuiHint",At.indent)("disabled",!(null!=K&&K.ordered||null!=K&&K.unordered)),h.xp6(1),h.Q6J("tuiHint",At.outdent)("disabled",!(null!=K&&K.ordered||null!=K&&K.unordered))}}function Nt(ut,pt){if(1&ut&&(h.TgZ(0,"tui-hosted-dropdown",2,3),h._UZ(2,"button",4),h.YNc(3,Ct,5,8,"ng-template",null,5,h.W1O),h.qZA()),2&ut){const K=pt.tuiLet,At=h.MAs(1),Ot=h.MAs(4),St=h.oxw().ngIf;h.Q6J("content",Ot),h.xp6(2),h.Q6J("tuiHint",St.list)("tuiHintDescribe","")("pseudoActive",(null==At?null:At.open)||(null==K?null:K.unordered)||(null==K?null:K.ordered)||!1)("focusable",At.open)}}function xt(ut,pt){if(1&ut&&(h.ynx(0),h.YNc(1,Nt,5,5,"tui-hosted-dropdown",1),h.ALo(2,"async"),h.BQk()),2&ut){const K=h.oxw();h.xp6(1),h.Q6J("tuiLet",h.lcZ(2,1,K.listState$))}}let bt=(()=>{class ut{constructor(K,At){this.editor=K,this.texts$=At,this.listState$=(0,T.aj)([this.editor.isActive$("orderedList"),this.editor.isActive$("bulletList")]).pipe((0,b.U)(([Ot,St])=>({ordered:Ot,unordered:St})))}sinkListItem(){this.editor.sinkListItem()}liftListItem(){this.editor.liftListItem()}}return ut.\u0275fac=function(K){return new(K||ut)(h.Y36(v.$3),h.Y36(l.rf))},ut.\u0275cmp=h.Xpm({type:ut,selectors:[["tui-list-configs"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["list",""],["tuiIconButton","","type","button","size","s","icon","tuiIconViewListLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__ordering-list-button",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["listDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconViewListLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOLLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconIndentLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","disabled","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOutdentLarge","appearance","icon",1,"t-option",3,"tuiHint","disabled","click"]],template:function(K,At){1&K&&(h.YNc(0,xt,3,3,"ng-container",0),h.ALo(1,"async")),2&K&&h.Q6J("ngIf",h.lcZ(1,1,At.texts$))},directives:[J.O5,R.L,G.o,Y.v,ft.D,dt.x,q.t,mt.D,lt.$],pipes:[J.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),ut})()},95558:(qt,Dt,c)=>{c.d(Dt,{p:()=>Rt});var v=c(64762),l=c(84614),T=c(14309),b=c(68339),h=c(9112),J=c(88002),R=c(87519),G=c(74788),Y=c(40939),ft=c(62939),dt=c(33250),q=c(76189),mt=c(67446),lt=c(29070),Ct=c(54255),Nt=c(15491),xt=c(219),bt=c(12057),ut=c(5451),pt=c(17163);function K(gt,Ft){if(1&gt&&G._UZ(0,"div",7),2&gt){const $t=G.oxw(2).tuiLet;G.Udp("background",$t)}}function At(gt,Ft){if(1&gt){const $t=G.EpF();G.TgZ(0,"tui-palette",8),G.NdJ("selectedColor",function(ht){G.CHM($t),G.oxw();const k=G.MAs(1);return G.oxw(2).setCellColor(ht),k.close()}),G.qZA()}if(2&gt){const $t=Ft.$implicit,Gt=G.oxw(3);G.Q6J("tuiActiveZoneParent",$t)("colors",Gt.colors)}}function Ot(gt,Ft){if(1&gt&&(G.TgZ(0,"tui-hosted-dropdown",2,3),G._UZ(2,"button",4),G.ALo(3,"async"),G.YNc(4,K,1,2,"div",5),G.YNc(5,At,1,2,"ng-template",null,6,G.W1O),G.qZA()),2&gt){const $t=Ft.tuiLet,Gt=G.MAs(1),ht=G.MAs(6),k=G.oxw().tuiLet,et=G.oxw();G.Q6J("content",ht)("tuiDropdownMaxHeight",999)("canOpen",!!$t),G.xp6(2),G.Q6J("tuiHint",G.lcZ(3,9,et.colorText$))("tuiHintDescribe","")("pseudoActive",Gt.open)("focusable",Gt.open)("disabled",!$t),G.xp6(2),G.Q6J("ngIf",!et.isBlankColor(k||""))}}function St(gt,Ft){if(1&gt&&(G.ynx(0),G.YNc(1,Ot,7,11,"tui-hosted-dropdown",1),G.ALo(2,"async"),G.BQk()),2&gt){const $t=G.oxw();G.xp6(1),G.Q6J("tuiLet",G.lcZ(2,1,$t.isActive$))}}class Rt{constructor(Ft,$t,Gt){this.defaultOptions=Ft,this.editor=$t,this.texts$=Gt,this.colors=this.defaultOptions.colors,this.colorText$=this.texts$.pipe((0,J.U)(ht=>this.editor.isActive("group")&&ht.hiliteGroup||this.editor.isActive("table")&&ht.cellColor||"")),this.isActive$=(0,h.aj)([this.editor.isActive$("table"),this.editor.isActive$("group")]).pipe((0,J.U)(([ht,k])=>ht||k)),this.color$=this.editor.stateChange$.pipe((0,J.U)(()=>this.editor.getCellColor()||this.editor.getGroupColor()||this.defaultOptions.blankColor),(0,R.x)())}isBlankColor(Ft){return Ft===this.defaultOptions.blankColor}setCellColor(Ft){this.editor.isActive("group")?this.editor.setGroupHilite(Ft):this.editor.isActive("table")&&this.editor.setCellColor(Ft)}}Rt.\u0275fac=function(Ft){return new(Ft||Rt)(G.Y36(T.mJ),G.Y36(l.$3),G.Y36(T.rf))},Rt.\u0275cmp=G.Xpm({type:Rt,selectors:[["tui-table-cell-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen"],["colorSelect",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconPaintLarge",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","disabled"],["class","t-plate t-plate_paint",3,"background",4,"ngIf"],["cellColorDropdown",""],[1,"t-plate","t-plate_paint"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(Ft,$t){1&Ft&&(G.YNc(0,St,3,3,"ng-container",0),G.ALo(1,"async")),2&Ft&&G.Q6J("tuiLet",G.lcZ(1,1,$t.color$))},directives:[Y.L,ft.o,dt.Ek,q.v,mt.D,lt.x,Ct.t,Nt.D,xt.$,bt.O5,ut.R,pt.e],pipes:[bt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,v.gn)([(0,b.tuiDefaultProp)()],Rt.prototype,"colors",void 0)},28962:(qt,Dt,c)=>{c.d(Dt,{l:()=>Nt});var v=c(84614),l=c(14309),T=c(88002),b=c(74788),h=c(62939),J=c(33250),R=c(76189),G=c(67446),Y=c(29070),ft=c(54255),dt=c(15491),q=c(219),mt=c(74549),lt=c(12057);function Ct(xt,bt){if(1&xt){const ut=b.EpF();b.TgZ(0,"tui-table-size-selector",4),b.NdJ("onSelectSize",function(K){return b.CHM(ut),b.oxw().addTable(K)}),b.qZA()}}let Nt=(()=>{class xt{constructor(ut,pt){this.editor=ut,this.texts$=pt,this.insertTableText$=this.texts$.pipe((0,T.U)(K=>K.insertTable))}addTable({rows:ut,cols:pt}){this.editor.enter();const K=this.editor.state.selection.anchor;this.editor.enter(),this.editor.enter(),this.editor.setTextSelection(K),this.editor.insertTable(ut,pt)}}return xt.\u0275fac=function(ut){return new(ut||xt)(b.Y36(v.$3),b.Y36(l.rf))},xt.\u0275cmp=b.Xpm({type:xt,selectors:[["tui-table-create"]],decls:6,vars:6,consts:[["tuiDropdownAlign","left","tuiDropdownDirection","bottom",3,"content"],["table",""],["tuiIconButton","","type","button","size","s","icon","tuiIconTableLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable"],["tableDropdown",""],[3,"onSelectSize"]],template:function(ut,pt){if(1&ut&&(b.TgZ(0,"tui-hosted-dropdown",0,1),b._UZ(2,"button",2),b.ALo(3,"async"),b.qZA(),b.YNc(4,Ct,1,0,"ng-template",null,3,b.W1O)),2&ut){const K=b.MAs(1),At=b.MAs(5);b.Q6J("content",At),b.xp6(2),b.Q6J("tuiHint",b.lcZ(3,4,pt.insertTableText$))("tuiHintDescribe","")("focusable",K.open)}},directives:[h.o,J.Ek,R.v,G.D,Y.x,ft.t,dt.D,q.$,mt.M],pipes:[lt.Ov],encapsulation:2,changeDetection:0}),xt})()},76965:(qt,Dt,c)=>{c.d(Dt,{Y:()=>xt});var v=c(84614),l=c(14309),T=c(88002),b=c(87519),h=c(74788),J=c(40939),R=c(12057),G=c(76189),Y=c(67446),ft=c(29070),dt=c(54255),q=c(15491),mt=c(219);function lt(bt,ut){if(1&bt){const pt=h.EpF();h.TgZ(0,"button",2),h.NdJ("click",function(){h.CHM(pt);const At=h.oxw().tuiLet,Ot=h.oxw();return At.mergeCells?Ot.mergeCells():Ot.splitCell()}),h.qZA()}if(2&bt){const pt=ut.ngIf,K=h.oxw().tuiLet;h.Q6J("icon",K.mergeCells?"tuiIconTableMergeLarge":"tuiIconTableSplitLarge")("tuiHint",K.mergeCells?pt.mergeCells:pt.splitCells)("tuiHintDescribe","")("focusable",!1)("disabled",!K.mergeCells&&!K.splitCells)}}function Ct(bt,ut){if(1&bt&&(h.ynx(0),h.YNc(1,lt,1,5,"button",1),h.ALo(2,"async"),h.BQk()),2&bt){const pt=h.oxw();h.xp6(1),h.Q6J("ngIf",h.lcZ(2,1,pt.texts$))}}const Nt=function(bt,ut){return{mergeCells:bt,splitCells:ut}};let xt=(()=>{class bt{constructor(pt,K){this.editor=pt,this.texts$=K,this.canMergeCells$=this.editor.stateChange$.pipe((0,T.U)(()=>this.editor.canMergeCells()),(0,b.x)()),this.canSplitCells$=this.editor.stateChange$.pipe((0,T.U)(()=>this.editor.canSplitCells()),(0,b.x)())}mergeCells(){this.editor.mergeCells()}splitCell(){this.editor.splitCell()}}return bt.\u0275fac=function(pt){return new(pt||bt)(h.Y36(v.$3),h.Y36(l.rf))},bt.\u0275cmp=h.Xpm({type:bt,selectors:[["tui-table-merge-cells"]],decls:3,vars:8,consts:[[4,"tuiLet"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left",3,"icon","tuiHint","tuiHintDescribe","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left",3,"icon","tuiHint","tuiHintDescribe","focusable","disabled","click"]],template:function(pt,K){1&pt&&(h.YNc(0,Ct,3,3,"ng-container",0),h.ALo(1,"async"),h.ALo(2,"async")),2&pt&&h.Q6J("tuiLet",h.WLB(5,Nt,h.lcZ(1,1,K.canMergeCells$),h.lcZ(2,3,K.canSplitCells$)))},directives:[J.L,R.O5,G.v,Y.D,ft.x,dt.t,q.D,mt.$],pipes:[R.Ov],encapsulation:2,changeDetection:0}),bt})()},22063:(qt,Dt,c)=>{c.d(Dt,{_:()=>At,i:()=>K});var v=c(84614),l=c(14309),T=c(88002),b=c(74788),h=c(40939),J=c(62939),R=c(76189),G=c(67446),Y=c(29070),ft=c(54255),dt=c(15491),q=c(219),mt=c(20933),lt=c(12057),Ct=c(89786),Nt=c(35065);function xt(Ot,St){if(1&Ot&&(b.TgZ(0,"tui-hosted-dropdown",2,3),b._UZ(2,"button",4),b.ALo(3,"async"),b.qZA()),2&Ot){const Rt=St.tuiLet,gt=b.MAs(1),Ft=b.oxw(),$t=b.MAs(3);b.Q6J("content",$t)("canOpen",!!Rt),b.xp6(2),b.Q6J("tuiHint",b.lcZ(3,6,Ft.rowsColumnsManagingText$))("tuiHintDescribe","")("focusable",gt.open)("disabled",!Rt)}}function bt(Ot,St){if(1&Ot){const Rt=b.EpF();b.TgZ(0,"button",7),b.NdJ("click",function(){const $t=b.CHM(Rt).index,Gt=b.oxw().index;return b.oxw(2).onTableOption(2*Gt+$t)}),b._uU(1),b.qZA()}if(2&Ot){const Rt=St.$implicit;b.xp6(1),b.hij(" ",Rt," ")}}function ut(Ot,St){if(1&Ot&&(b.TgZ(0,"tui-opt-group"),b.YNc(1,bt,2,1,"button",6),b.qZA()),2&Ot){const Rt=St.$implicit;b.xp6(1),b.Q6J("ngForOf",Rt)}}function pt(Ot,St){if(1&Ot&&(b.TgZ(0,"tui-data-list"),b.YNc(1,ut,2,1,"tui-opt-group",5),b.ALo(2,"async"),b.qZA()),2&Ot){const Rt=b.oxw();b.xp6(1),b.Q6J("ngForOf",b.lcZ(2,1,Rt.tableCommandTexts$))}}var K=(()=>{return(Ot=K||(K={}))[Ot.InsertColumnBefore=0]="InsertColumnBefore",Ot[Ot.InsertColumnAfter=1]="InsertColumnAfter",Ot[Ot.InsertRowBefore=2]="InsertRowBefore",Ot[Ot.InsertRowAfter=3]="InsertRowAfter",Ot[Ot.DeleteColumn=4]="DeleteColumn",Ot[Ot.DeleteRow=5]="DeleteRow",K;var Ot})();let At=(()=>{class Ot{constructor(Rt,gt,Ft){this.editor=Rt,this.texts$=gt,this.tableCommandTexts$=Ft,this.commandsRegistry={[K.InsertColumnAfter]:()=>this.editor.addColumnAfter(),[K.InsertColumnBefore]:()=>this.editor.addColumnBefore(),[K.InsertRowAfter]:()=>this.editor.addRowAfter(),[K.InsertRowBefore]:()=>this.editor.addRowBefore(),[K.DeleteColumn]:()=>this.editor.deleteColumn(),[K.DeleteRow]:()=>this.editor.deleteRow()},this.isActive$=this.editor.isActive$("table"),this.rowsColumnsManagingText$=this.texts$.pipe((0,T.U)($t=>$t.rowsColumnsManaging))}onTableOption(Rt){this.commandsRegistry[Rt]()}}return Ot.\u0275fac=function(Rt){return new(Rt||Ot)(b.Y36(v.$3),b.Y36(l.rf),b.Y36(l.$i))},Ot.\u0275cmp=b.Xpm({type:Ot,selectors:[["tui-table-row-column-manager"]],decls:4,vars:3,consts:[[3,"content","canOpen",4,"tuiLet"],["tableOptionsDropdown",""],[3,"content","canOpen"],["tableCommand",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAddRowLarge","appearance","icon","tuiHintDirection","top-left",3,"tuiHint","tuiHintDescribe","focusable","disabled"],[4,"ngFor","ngForOf"],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(Rt,gt){1&Rt&&(b.YNc(0,xt,4,8,"tui-hosted-dropdown",0),b.ALo(1,"async"),b.YNc(2,pt,3,3,"ng-template",null,1,b.W1O)),2&Rt&&b.Q6J("tuiLet",b.lcZ(1,1,gt.isActive$))},directives:[h.L,J.o,R.v,G.D,Y.x,ft.t,dt.D,q.$,mt.q,lt.sg,Ct.R,Nt.v],pipes:[lt.Ov],encapsulation:2,changeDetection:0}),Ot})()},74549:(qt,Dt,c)=>{c.d(Dt,{M:()=>ft});var v=c(74788),l=c(62579),T=c(76040),b=c(36097);function h(dt,q){if(1&dt){const mt=v.EpF();v.TgZ(0,"div",4),v.NdJ("mouseenter",function(Ct){const xt=v.CHM(mt).$implicit,bt=v.oxw().$implicit;return v.oxw().updateCurrentSize(xt+1,bt+1,Ct)})("click",function(){return v.CHM(mt),v.oxw(2).select()}),v.qZA()}if(2&dt){const mt=q.$implicit,lt=v.oxw().$implicit,Ct=v.oxw();v.ekj("t-cell_hovered",Ct.tableSelectHovered(mt,lt))}}function J(dt,q){if(1&dt&&(v.TgZ(0,"div",2),v.YNc(1,h,1,2,"div",3),v.qZA()),2&dt){const mt=v.oxw();v.xp6(1),v.Q6J("tuiRepeatTimesOf",mt.rowsNumber)}}let ft=(()=>{class dt{constructor(mt){this.windowRef=mt,this.selectSize=new v.vpe,this.onSelectSize=this.selectSize,this.tableSize={rows:1,cols:1}}get columnsNumber(){return Math.min(Math.max(3,this.tableSize.cols+1),15)}get rowsNumber(){return Math.min(Math.max(3,this.tableSize.rows+1),15)}tableSelectHovered(mt,lt){return mt<this.tableSize.rows&&lt<this.tableSize.cols}updateCurrentSize(mt,lt,Ct){(0,T.tuiGetViewportWidth)(this.windowRef)-Ct.clientX>70&&(this.tableSize={rows:mt,cols:lt})}onClick(){this.select()}select(){this.selectSize.emit(this.tableSize)}}return dt.\u0275fac=function(mt){return new(mt||dt)(v.Y36(l.m9))},dt.\u0275cmp=v.Xpm({type:dt,selectors:[["tui-table-size-selector"]],outputs:{selectSize:"selectSize",onSelectSize:"onSelectSize"},decls:3,vars:3,consts:[["class","t-column",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-description"],[1,"t-column"],["class","t-cell",3,"t-cell_hovered","mouseenter","click",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-cell",3,"mouseenter","click"]],template:function(mt,lt){1&mt&&(v.YNc(0,J,2,1,"div",0),v.TgZ(1,"div",1),v._uU(2),v.qZA()),2&mt&&(v.Q6J("tuiRepeatTimesOf",lt.columnsNumber),v.xp6(2),v.AsE("",lt.tableSize.cols,"\xd7",lt.tableSize.rows,""))},directives:[b.X],styles:["[_nghost-%COMP%]{display:block;padding:.75rem}.t-cell[_ngcontent-%COMP%]{display:inline-block;background-color:var(--tui-base-01);width:1.25rem;height:1.25rem;border-radius:.25rem;margin:.125rem;border:1px solid var(--tui-base-04);cursor:pointer}.t-cell_hovered[_ngcontent-%COMP%]{background-color:var(--tui-base-02)}.t-column[_ngcontent-%COMP%]{white-space:nowrap}.t-description[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),dt})()},10528:(qt,Dt,c)=>{c.d(Dt,{G:()=>At});var v=c(64762),l=c(84614),T=c(14309),b=c(68339),h=c(88002),J=c(87519),R=c(74788),G=c(40939),Y=c(62939),ft=c(33250),dt=c(76189),q=c(67446),mt=c(29070),lt=c(54255),Ct=c(15491),Nt=c(219),xt=c(5451),bt=c(17163),ut=c(12057);function pt(Ot,St){if(1&Ot){const Rt=R.EpF();R.TgZ(0,"tui-palette",6),R.NdJ("selectedColor",function(Ft){return R.CHM(Rt),R.oxw(2).editor.setFontColor(Ft)}),R.qZA()}if(2&Ot){const Rt=St.$implicit,gt=R.oxw(2);R.Q6J("tuiActiveZoneParent",Rt)("colors",gt.colors)}}function K(Ot,St){if(1&Ot&&(R.TgZ(0,"tui-hosted-dropdown",1,2),R._UZ(2,"button",3),R.ALo(3,"async"),R._UZ(4,"div",4),R.YNc(5,pt,1,2,"ng-template",null,5,R.W1O),R.qZA()),2&Ot){const Rt=St.tuiLet,gt=R.MAs(1),Ft=R.MAs(6),$t=R.oxw();R.Q6J("content",Ft)("tuiDropdownMaxHeight",999),R.xp6(2),R.Q6J("tuiHint",R.lcZ(3,8,$t.foreColorText$))("tuiHintDescribe","")("pseudoActive",gt.open)("focusable",gt.open),R.xp6(2),R.Udp("background",Rt)}}class At{constructor(St,Rt,gt){this.defaultOptions=St,this.editor=Rt,this.texts$=gt,this.colors=this.defaultOptions.colors,this.fontColor$=this.editor.stateChange$.pipe((0,h.U)(()=>this.editor.getFontColor()||this.defaultOptions.blankColor),(0,J.x)()),this.foreColorText$=this.texts$.pipe((0,h.U)(Ft=>Ft.foreColor))}}At.\u0275fac=function(St){return new(St||At)(R.Y36(T.mJ),R.Y36(l.$3),R.Y36(T.rf))},At.\u0275cmp=R.Xpm({type:At,selectors:[["tui-text-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["color",""],["tuiIconButton","","type","button","size","s","icon","tuiIconColorLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__color-button",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],[1,"t-plate"],["colorDropdown",""],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(St,Rt){1&St&&(R.YNc(0,K,7,10,"tui-hosted-dropdown",0),R.ALo(1,"async")),2&St&&R.Q6J("tuiLet",R.lcZ(1,1,Rt.fontColor$))},directives:[G.L,Y.o,ft.Ek,dt.v,q.D,mt.x,lt.t,Ct.D,Nt.$,xt.R,bt.e],pipes:[ut.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,v.gn)([(0,b.tuiDefaultProp)()],At.prototype,"colors",void 0)},17406:(qt,Dt,c)=>{c.d(Dt,{M6:()=>v.M,yB:()=>G,Bp:()=>Y.B});var v=c(4997),l=c(12057),T=c(71115),b=c(93252),h=c(68339),J=c(76040),R=c(74788);let G=(()=>{class ft{}return ft.\u0275fac=function(q){return new(q||ft)},ft.\u0275mod=R.oAB({type:ft}),ft.\u0275inj=R.cJS({imports:[[l.ez,J.TuiHintModule,h.TuiFocusableModule,J.TuiButtonModule,J.TuiHostedDropdownModule,T.Fu,b.er,b.mp,b.__,b.iA,b.p7,b.Zv,b.pu,b.Ur,b._t,b.XC,b.P_,b.y9,h.TuiItemModule,b.jP]]}),ft})();var Y=c(13044)},13044:(qt,Dt,c)=>{c.d(Dt,{B:()=>T});var v=c(74788),l=c(68339);let T=(()=>{class b{constructor(J){this.elementRef=J}get toolsContainers(){return Array.from(this.elementRef.nativeElement.querySelectorAll("[tuiItem]"))}onHorizontalNavigation(J){const{toolsContainers:R}=this,G=R.findIndex(l.tuiIsNativeFocusedIn),ft=R[(0,l.tuiClamp)(G+(J?-1:1),0,R.length-1)],dt=J?this.findPreviousTool(ft):this.findNextTool(ft);dt&&dt.focus()}findFirstFocusableTool(J=!1){const R=J?this.toolsContainers.slice().reverse():this.toolsContainers;for(const G of R){const Y=(0,l.tuiIsNativeMouseFocusable)(G)?G:(0,l.tuiGetClosestFocusable)({initial:G,root:G,keyboard:!1});if(Y)return Y}return null}findPreviousTool(J){return(0,l.tuiIsNativeMouseFocusable)(J)?J:(0,l.tuiGetClosestFocusable)({initial:J,root:J,keyboard:!1})||(0,l.tuiGetClosestFocusable)({initial:J,root:this.elementRef.nativeElement,previous:!0,keyboard:!1})}findNextTool(J){return(0,l.tuiIsNativeMouseFocusable)(J)?J:(0,l.tuiGetClosestFocusable)({initial:J,root:this.elementRef.nativeElement,keyboard:!1})}}return b.\u0275fac=function(J){return new(J||b)(v.Y36(v.SBq))},b.\u0275dir=v.lG2({type:b,selectors:[["","tuiToolbarNavigationManager",""]],hostBindings:function(J,R){1&J&&v.NdJ("keydown.arrowRight.prevent",function(){return R.onHorizontalNavigation(!1)})("keydown.arrowLeft.prevent",function(){return R.onHorizontalNavigation(!0)})}}),b})()},4997:(qt,Dt,c)=>{c.d(Dt,{M:()=>y});var v=c(64762),l=c(74788),T=c(19074),b=c(84614),h=c(48699),J=c(14309),R=c(68339),G=c(15257),Y=c(13044),ft=c(12057),dt=c(48893),q=c(76189),mt=c(82707),lt=c(67446),Ct=c(29070),Nt=c(54255),xt=c(15491),bt=c(219),ut=c(84985),pt=c(62976),K=c(37924),At=c(13441),Ot=c(62939),St=c(45050),Rt=c(10528),gt=c(7416),Ft=c(15587),$t=c(50237),Gt=c(18832),ht=c(19762),k=c(95558),et=c(28962),st=c(22063),it=c(76965);const U=["dropdown"];function Q(w,Z){1&w&&l.GkF(0)}function nt(w,Z){if(1&w){const F=l.EpF();l.TgZ(0,"div",6),l.TgZ(1,"button",7),l.NdJ("click",function(){return l.CHM(F),l.oxw(2).undo()}),l.qZA(),l.TgZ(2,"button",8),l.NdJ("click",function(){return l.CHM(F),l.oxw(2).redo()}),l.qZA(),l.qZA()}if(2&w){const F=l.oxw().ngIf,Et=l.oxw();l.xp6(1),l.Q6J("tuiHint",F.undo)("tuiHintDescribe","")("disabled",Et.undoDisabled)("focusable",!1),l.xp6(1),l.Q6J("tuiHint",F.redo)("tuiHintDescribe","")("disabled",Et.redoDisabled)("focusable",!1)}}function kt(w,Z){1&w&&(l.TgZ(0,"div",6),l._UZ(1,"tui-font-size",9),l.qZA())}function jt(w,Z){if(1&w&&l._UZ(0,"tui-font-style",15),2&w){const F=l.oxw(3);l.Q6J("enabledTools",F.toolsSet)}}function Yt(w,Z){1&w&&l._UZ(0,"tui-align-content",9)}function le(w,Z){1&w&&l._UZ(0,"tui-list-configs",9)}function Vt(w,Z){if(1&w){const F=l.EpF();l.TgZ(0,"button",16,17),l.NdJ("click",function(){return l.CHM(F),l.oxw(3).toggleQuote()}),l.qZA()}if(2&w){const F=l.oxw(2).ngIf,Et=l.oxw();l.Q6J("tuiHint",F.quote)("tuiHintDescribe","")("pseudoActive",Et.blockquote)("disabled",Et.unorderedList||Et.orderedList)("focusable",!1)}}function ve(w,Z){if(1&w){const F=l.EpF();l.TgZ(0,"tui-edit-link",22,23),l.NdJ("addLink",function(Bt){l.CHM(F),l.oxw();const N=l.MAs(1);return l.oxw(3).onLink(N,Bt)})("removeLink",function(){l.CHM(F),l.oxw();const Bt=l.MAs(1);return l.oxw(3).onLink(Bt)}),l.qZA()}}function xe(w,Z){if(1&w&&(l.TgZ(0,"tui-hosted-dropdown",18,19),l._UZ(2,"button",20,17),l.YNc(4,ve,2,0,"ng-template",null,21,l.W1O),l.qZA()),2&w){const F=l.MAs(1),Et=l.MAs(5),Bt=l.oxw(2).ngIf,N=l.oxw();l.Q6J("canOpen",N.canOpenAnchor)("content",Et),l.xp6(2),l.Q6J("tuiHint",Bt.link)("tuiHintDescribe","")("pseudoActive",F.open||N.a)("focusable",F.open)}}function We(w,Z){if(1&w){const F=l.EpF();l.TgZ(0,"tui-edit-link",28),l.NdJ("addLink",function(Bt){l.CHM(F),l.oxw();const N=l.MAs(1);return l.oxw(3).setAnchor(N,Bt)})("removeLink",function(){return l.CHM(F),l.oxw(4).removeAnchor()}),l.qZA()}2&w&&l.Q6J("anchorMode",!0)}function ge(w,Z){if(1&w&&(l.TgZ(0,"tui-hosted-dropdown",24,25),l._UZ(2,"button",26),l.YNc(3,We,1,1,"ng-template",null,27,l.W1O),l.qZA()),2&w){const F=l.MAs(1),Et=l.MAs(4),Bt=l.oxw(2).ngIf,N=l.oxw();l.Q6J("canOpen",N.canOpenAnchor)("content",Et),l.xp6(2),l.Q6J("focusable",!1)("pseudoActive",F.open||N.jumpAnchor)("tuiHint",Bt.insertAnchor)("tuiHintDescribe","")}}function Qe(w,Z){if(1&w){const F=l.EpF();l.ynx(0),l.TgZ(1,"button",29,17),l.NdJ("click",function(){return l.CHM(F),l.MAs(4).click()}),l.qZA(),l.TgZ(3,"input",30,31),l.NdJ("change",function(){l.CHM(F);const Bt=l.MAs(4);return l.oxw(3).onAttach(Bt)}),l.qZA(),l.BQk()}if(2&w){const F=l.oxw(2).ngIf,Et=l.oxw();l.xp6(1),l.Q6J("tuiHint",F.attach)("tuiHintDescribe","")("focusable",!1),l.xp6(2),l.Q6J("accept",Et.attachOptions.accept)("multiple",Et.attachOptions.multiple)("tuiFocusable",!1)}}function Le(w,Z){if(1&w&&(l.TgZ(0,"div",6),l.YNc(1,jt,1,1,"tui-font-style",10),l.YNc(2,Yt,1,0,"tui-align-content",11),l.YNc(3,le,1,0,"tui-list-configs",11),l.YNc(4,Vt,2,5,"button",12),l.YNc(5,xe,6,6,"tui-hosted-dropdown",13),l.YNc(6,ge,5,6,"tui-hosted-dropdown",14),l.YNc(7,Qe,5,6,"ng-container",1),l.qZA()),2&w){const F=l.oxw(2);l.xp6(1),l.Q6J("ngIf",F.formatEnabled),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Align)),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.List)),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Quote)),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Link)),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Anchor)),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Attach))}}function Pe(w,Z){if(1&w){const F=l.EpF();l.TgZ(0,"button",34,17),l.NdJ("click",function(){return l.CHM(F),l.oxw(3).toggleSubscript()}),l.qZA()}if(2&w){const F=l.oxw(2).ngIf,Et=l.oxw();l.Q6J("tuiHint",F.subscript)("tuiHintDescribe","")("pseudoActive",Et.subscript)("focusable",!1)}}function Ke(w,Z){if(1&w){const F=l.EpF();l.TgZ(0,"button",35,17),l.NdJ("click",function(){return l.CHM(F),l.oxw(3).toggleSuperscript()}),l.qZA()}if(2&w){const F=l.oxw(2).ngIf,Et=l.oxw();l.Q6J("tuiHint",F.superscript)("tuiHintDescribe","")("pseudoActive",Et.superscript)("focusable",!1)}}function Ye(w,Z){if(1&w&&(l.TgZ(0,"div",6),l.YNc(1,Pe,2,4,"button",32),l.YNc(2,Ke,2,4,"button",33),l.qZA()),2&w){const F=l.oxw(2);l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Sub)),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Sup))}}function Je(w,Z){if(1&w&&l._UZ(0,"tui-text-color",37),2&w){const F=l.oxw(3);l.Q6J("colors",F.colors)}}function Fe(w,Z){if(1&w&&l._UZ(0,"tui-highlight-color",37),2&w){const F=l.oxw(3);l.Q6J("colors",F.colors)}}function Ze(w,Z){if(1&w&&(l.TgZ(0,"div",6),l.YNc(1,Je,1,1,"tui-text-color",36),l.YNc(2,Fe,1,1,"tui-highlight-color",36),l.qZA()),2&w){const F=l.oxw(2);l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Color)),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Hilite))}}function He(w,Z){1&w&&l._UZ(0,"tui-code",9)}function Ne(w,Z){if(1&w){const F=l.EpF();l.TgZ(0,"button",41,17),l.NdJ("click",function(){return l.CHM(F),l.oxw(3).onTeX()}),l.qZA()}if(2&w){const F=l.oxw(2).ngIf;l.Q6J("tuiHint",F.tex)("tuiHintDescribe","")("focusable",!1)}}function Ge(w,Z){if(1&w){const F=l.EpF();l.TgZ(0,"div",42),l.TgZ(1,"button",43,17),l.NdJ("click",function(){return l.CHM(F),l.MAs(4).click()}),l.qZA(),l.TgZ(3,"input",44,45),l.NdJ("change",function(){l.CHM(F);const Bt=l.MAs(4);return l.oxw(3).onImage(Bt)}),l.qZA(),l.qZA()}if(2&w){const F=l.oxw(2).ngIf;l.xp6(1),l.Q6J("tuiHint",F.image)("tuiHintDescribe","")("focusable",!1),l.xp6(2),l.Q6J("tuiFocusable",!1)}}function $e(w,Z){if(1&w){const F=l.EpF();l.TgZ(0,"button",46,17),l.NdJ("click",function(){return l.CHM(F),l.oxw(3).insertHorizontalRule()}),l.qZA()}if(2&w){const F=l.oxw(2).ngIf;l.Q6J("tuiHint",F.insertHorizontalRule)("tuiHintDescribe","")("focusable",!1)}}function tn(w,Z){if(1&w&&(l.TgZ(0,"div",6),l.YNc(1,He,1,0,"tui-code",11),l.YNc(2,Ne,2,3,"button",38),l.YNc(3,Ge,5,4,"div",39),l.YNc(4,$e,2,3,"button",40),l.qZA()),2&w){const F=l.oxw(2);l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Code)),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Tex)),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Img)),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.HR))}}function ze(w,Z){if(1&w){const F=l.EpF();l.TgZ(0,"div",6),l.TgZ(1,"button",47,17),l.NdJ("click",function(){return l.CHM(F),l.oxw(2).removeFormat()}),l.qZA(),l.qZA()}if(2&w){const F=l.oxw().ngIf;l.xp6(1),l.Q6J("tuiHint",F.clear)("tuiHintDescribe","")("focusable",!1)}}function je(w,Z){1&w&&(l.TgZ(0,"div",6),l._UZ(1,"tui-details",48),l._UZ(2,"tui-details-remove",48),l.qZA())}function Ve(w,Z){if(1&w&&l._UZ(0,"tui-table-cell-color",37),2&w){const F=l.oxw(3);l.Q6J("colors",F.colors)}}function Ie(w,Z){if(1&w&&(l.TgZ(0,"div",6),l._UZ(1,"tui-editor-group-tool",48),l.YNc(2,Ve,1,1,"tui-table-cell-color",36),l.qZA()),2&w){const F=l.oxw(2);l.xp6(2),l.Q6J("ngIf",!F.enabled(F.TuiEditorTool.Table))}}function fe(w,Z){if(1&w&&(l.TgZ(0,"div",6),l._UZ(1,"tui-table-create",48),l._UZ(2,"tui-table-row-column-manager",48),l._UZ(3,"tui-table-merge-cells",48),l._UZ(4,"tui-table-cell-color",37),l.qZA()),2&w){const F=l.oxw(2);l.xp6(4),l.Q6J("colors",F.colors)}}function vt(w,Z){if(1&w&&(l.TgZ(0,"section",4),l.YNc(1,nt,3,8,"div",5),l.YNc(2,kt,2,0,"div",5),l.YNc(3,Le,8,7,"div",5),l.YNc(4,Ye,3,2,"div",5),l.YNc(5,Ze,3,2,"div",5),l.YNc(6,tn,5,4,"div",5),l.YNc(7,ze,3,3,"div",5),l.YNc(8,je,3,0,"div",5),l.YNc(9,Ie,3,1,"div",5),l.YNc(10,fe,5,1,"div",5),l.TgZ(11,"div",6),l.Hsn(12),l.qZA(),l.qZA()),2&w){const F=l.oxw();l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Undo)),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Size)),l.xp6(1),l.Q6J("ngIf",F.firstBigBlockEnabled),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Sub)||F.enabled(F.TuiEditorTool.Sup)),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Color)||F.enabled(F.TuiEditorTool.Hilite)),l.xp6(1),l.Q6J("ngIf",F.secondBigBlockEnabled),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Clear)),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Details)),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Group)),l.xp6(1),l.Q6J("ngIf",F.enabled(F.TuiEditorTool.Table))}}class y{constructor(Z,F,Et,Bt,N,a,d){this.elementRef=Z,this.editor=F,this.imageLoader=Et,this.attachOptions=Bt,this.filesLoader=N,this.texts$=a,this.defaultOptions=d,this.dropdowns=R.EMPTY_QUERY,this.colors=this.defaultOptions.colors,this.disabled=!1,this.linkAdded=new l.vpe,this.texClicked=new l.vpe,this.fileAttached=new l.vpe,this.TuiEditorTool=h._,this.toolsSet=new Set(T.Db)}set tools(Z){this.toolsSet=new Set(Z)}get focused(){return(0,R.tuiIsNativeFocusedIn)(this.elementRef.nativeElement)||!!this.dropdowns.find(({nativeElement:Z})=>(0,R.tuiIsNativeFocusedIn)(Z))}get focusable(){return!this.focused&&!this.disabled}get unorderedList(){return this.editor.isActive("bulletList")}get orderedList(){return this.editor.isActive("orderedList")}get blockquote(){return this.editor.isActive("blockquote")}get a(){return this.editor.isActive("link")}get jumpAnchor(){return this.editor.isActive("jumpAnchor")}get canOpenAnchor(){return!this.a&&!this.jumpAnchor}get undoDisabled(){return this.editor.undoDisabled()}get redoDisabled(){return this.editor.redoDisabled()}get subscript(){return this.editor.isActive("subscript")}get superscript(){return this.editor.isActive("superscript")}get formatEnabled(){return this.enabled(h._.Bold)||this.enabled(h._.Italic)||this.enabled(h._.Underline)||this.enabled(h._.Strikethrough)}get firstBigBlockEnabled(){return this.formatEnabled||this.enabled(h._.Align)||this.enabled(h._.List)||this.enabled(h._.Quote)||this.enabled(h._.Link)||this.enabled(h._.Anchor)||this.enabled(h._.Attach)}get secondBigBlockEnabled(){return this.enabled(h._.Code)||this.enabled(h._.Tex)||this.enabled(h._.Img)||this.enabled(h._.HR)}onMouseDown(Z,F){F.closest("button")||(Z.preventDefault(),this.editor.focus())}onBottomFocus(){this.focusLast()}onTopFocus(){this.focusFirst()}onImage(Z){var F;const Et=null===(F=Z.files)||void 0===F?void 0:F[0];Z.value="",Et&&this.imageLoader(Et).pipe((0,G.q)(1)).subscribe(Bt=>{this.addImage(Bt)})}onAttach(Z){var F;const Et=Array.from(Z.files||[]);Z.value="",Et&&(R.tuiAssert.assert(!!this.filesLoader,"Please provide TUI_ATTACH_FILES_LOADER"),null===(F=this.filesLoader)||void 0===F||F.call(this,Et).pipe((0,G.q)(1)).subscribe(Bt=>this.fileAttached.emit(Bt)))}onTeX(){this.texClicked.emit()}onLink(Z,F){Z.open=!1,F&&this.editor.toggleLink(F)}setAnchor(Z,F){Z.open=!1,F&&(this.editor.setAnchor(F),this.editor.selectClosest())}removeAnchor(){this.editor.removeAnchor()}enabled(Z){return this.toolsSet.has(Z)}undo(){this.editor.undo()}redo(){this.editor.redo()}insertHorizontalRule(){this.editor.setHorizontalRule()}removeFormat(){this.editor.removeFormat()}toggleOrderedList(){this.editor.toggleOrderedList()}toggleQuote(){this.editor.toggleBlockquote()}toggleSubscript(){this.editor.toggleSubscript()}toggleSuperscript(){this.editor.toggleSuperscript()}addImage(Z){this.editor.setImage(Z)}focusFirst(){var Z;const F=null===(Z=this.navigationManager)||void 0===Z?void 0:Z.findFirstFocusableTool();F&&F.focus()}focusLast(){var Z;const F=null===(Z=this.navigationManager)||void 0===Z?void 0:Z.findFirstFocusableTool(!0);F&&F.focus()}}y.\u0275fac=function(Z){return new(Z||y)(l.Y36(l.SBq,8),l.Y36(b.$3),l.Y36(J.p7),l.Y36(J.dR),l.Y36(J.zc,8),l.Y36(J.rf),l.Y36(J.mJ))},y.\u0275cmp=l.Xpm({type:y,selectors:[["tui-toolbar"]],viewQuery:function(Z,F){if(1&Z&&(l.Gf(Y.B,5),l.Gf(U,5,l.SBq)),2&Z){let Et;l.iGM(Et=l.CRH())&&(F.navigationManager=Et.first),l.iGM(Et=l.CRH())&&(F.dropdowns=Et)}},hostAttrs:["role","toolbar"],hostVars:2,hostBindings:function(Z,F){1&Z&&l.NdJ("mousedown",function(Bt){return F.onMouseDown(Bt,Bt.target)}),2&Z&&l.ekj("_disabled",F.disabled)},inputs:{colors:"colors",disabled:"disabled",tools:"tools"},outputs:{linkAdded:"linkAdded",texClicked:"texClicked",fileAttached:"fileAttached"},ngContentSelectors:["*"],decls:7,vars:8,consts:[["type","button",1,"t-prevent-parent-label-behavior"],[4,"ngIf"],[3,"tuiFocusable","focus"],["tuiToolbarNavigationManager","","class","t-tools-wrapper",4,"ngIf"],["tuiToolbarNavigationManager","",1,"t-tools-wrapper"],["class","t-block",4,"ngIf"],[1,"t-block"],["tuiItem","","tuiIconButton","","type","button","size","s","icon","tuiIconUndoLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","disabled","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconRedoLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","disabled","focusable","click"],["tuiItem","",1,"t-tool","t-wrapper"],["tuiItem","","class","t-tool t-wrapper",3,"enabledTools",4,"ngIf"],["tuiItem","","class","t-tool t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","disabled","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",3,"canOpen","content",4,"ngIf"],["class","t-wrapper",3,"canOpen","content",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"enabledTools"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","disabled","focusable","click"],["button",""],["tuiItem","",1,"t-wrapper",3,"canOpen","content"],["link",""],["tuiIconButton","","type","button","size","s","icon","tuiIconLinkLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable"],["linkDropdown",""],[3,"addLink","removeLink"],["dropdown",""],[1,"t-wrapper",3,"canOpen","content"],["anchor",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAnchorLarge","tuiHintDirection","top-left","appearance","icon",3,"focusable","pseudoActive","tuiHint","tuiHintDescribe"],["anchorDropdown",""],[3,"anchorMode","addLink","removeLink"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconAttachLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click"],["type","file",1,"t-file-upload",3,"accept","multiple","tuiFocusable","change"],["fileUpload",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","pseudoActive","focusable","click"],["tuiItem","","class","t-tool t-wrapper",3,"colors",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"colors"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool",3,"tuiHint","tuiHintDescribe","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","class","t-tool t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool",3,"tuiHint","tuiHintDescribe","focusable","click"],["tuiItem","",1,"t-wrapper"],["tuiIconButton","","type","button","size","s","icon","tuiIconImgLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool",3,"tuiHint","tuiHintDescribe","focusable","click"],["type","file","accept","image/*",1,"t-image",3,"tuiFocusable","change"],["image",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconClearFormatLarge","appearance","icon","tuiHintDirection","top-left",1,"t-tool","t-tool_margin",3,"tuiHint","tuiHintDescribe","focusable","click"],["tuiItem","",1,"t-tool","t-tool_margin"]],template:function(Z,F){1&Z&&(l.F$t(),l._UZ(0,"button",0),l.YNc(1,Q,1,0,"ng-container",1),l.ALo(2,"async"),l.TgZ(3,"div",2),l.NdJ("focus",function(){return F.onTopFocus()}),l.qZA(),l.TgZ(4,"div",2),l.NdJ("focus",function(){return F.onBottomFocus()}),l.qZA(),l.YNc(5,vt,13,10,"section",3),l.ALo(6,"async")),2&Z&&(l.xp6(1),l.Q6J("ngIf",l.lcZ(2,4,F.editor.stateChange$)),l.xp6(2),l.Q6J("tuiFocusable",F.focusable),l.xp6(1),l.Q6J("tuiFocusable",F.focusable),l.xp6(1),l.Q6J("ngIf",l.lcZ(6,6,F.texts$)))},directives:[ft.O5,dt.t,Y.B,q.v,mt.w,lt.D,Ct.x,Nt.t,xt.D,bt.$,ut.m,pt.h,K.X,At.w,Ot.o,St.l,Rt.G,gt.U,Ft.T,$t.y,Gt.U,ht.d,k.p,et.l,st._,it.Y],pipes:[ft.Ov],styles:['.t-tools-wrapper[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;padding:.25rem .75rem;overflow:auto;flex-wrap:wrap;box-shadow:0 .125rem .1875rem rgba(0,0,0,.1)}.t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar, .t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-tools-wrapper._disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:var(--tui-disabled-opacity)}.t-block[_ngcontent-%COMP%]{display:flex;padding:.25rem 0}.t-block[_ngcontent-%COMP%]:not(:last-child):after{content:"";display:block;margin:0 .25rem;width:1px;background:var(--tui-secondary-active)}.t-tool[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}button.t-tool[_ngcontent-%COMP%]:hover, .t-tool[_ngcontent-%COMP%]     button:hover{background:var(--tui-secondary-hover)}.t-tool_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-font[_ngcontent-%COMP%]{padding:.3em 0;outline:none;width:100%;pointer-events:none}.t-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;font-size:0;opacity:0;cursor:pointer}.t-image[_ngcontent-%COMP%]::-webkit-file-upload-button{display:none}.t-file-upload[_ngcontent-%COMP%]{display:none}.t-color-picker[_ngcontent-%COMP%]     tui-hosted-dropdown, .t-color-picker[_ngcontent-%COMP%]     tui-color-picker, .t-color-picker[_ngcontent-%COMP%]     tui-color-edit{display:none}.t-prevent-parent-label-behavior[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),(0,v.gn)([(0,R.tuiDefaultProp)()],y.prototype,"colors",void 0),(0,v.gn)([(0,R.tuiDefaultProp)()],y.prototype,"disabled",void 0),(0,v.gn)([(0,R.tuiDefaultProp)(function(w){return!w.includes(h._.Tex)&&!w.includes(h._.Attach)},"Attach and TeX are not yet implemented in Editor")],y.prototype,"tools",null)},19074:(qt,Dt,c)=>{c.d(Dt,{hK:()=>l,sw:()=>v,Db:()=>b,RR:()=>h});const v=new Map([["transparent","transparent"],["color-black-300","#333333"],["color-black-200","#666666"],["color-black-100","#909090"],["color-yellow-100","#FFDD2C"],["color-yellow-200","#FCC521"],["color-yellow-300","#FAB618"],["color-gray-100","#f5f5f6"],["color-gray-200","#e7e8ea"],["color-gray-300","#cbcfd3"],["color-gray-400","#959ba4"],["color-gray-500","#79818c"],["color-gray-600","#616871"],["color-light-blue-100","#ecf1f7"],["color-light-blue-200","#e4ebf3"],["color-light-blue-300","#dde4ed"],["color-blue-100","#1771e6"],["color-blue-200","#1464cc"],["color-blue-300","#0953b3"],["color-green-100","#39b54a"],["color-green-200","#2ca53a"],["color-green-300","#168a21"],["color-red-100","#e01f19"],["color-red-200","#d3120e"],["color-red-300","#c40b08"]]),l="rgb(51, 51, 51)";var T=c(48699);const b=[T._.Undo,T._.Size,T._.Bold,T._.Italic,T._.Underline,T._.Align,T._.List,T._.Quote,T._.Link,T._.Anchor,T._.Color,T._.Hilite,T._.Clear,T._.Strikethrough,T._.Code,T._.Img,T._.HR,T._.Sup,T._.Sub,T._.Table,T._.Details];function h(J){return[{px:13,name:J.small},{px:15,name:J.normal},{px:17,name:J.large},{px:24,family:"var(--tui-font-heading)",name:J.subtitle,headingLevel:2,weight:"bold"},{px:30,family:"var(--tui-font-heading)",name:J.title,headingLevel:1,weight:"bold"}]}},60153:(qt,Dt,c)=>{c.d(Dt,{Z:()=>l});var v=c(74788);let l=(()=>{class T{constructor(){this.imagePreview=new v.vpe}click(h){h instanceof HTMLImageElement&&this.imagePreview.emit(h)}}return T.\u0275fac=function(h){return new(h||T)},T.\u0275dir=v.lG2({type:T,selectors:[["tui-editor-socket","imagePreview",""]],hostAttrs:[1,"_preview-image"],hostBindings:function(h,J){1&h&&v.NdJ("click",function(G){return J.click(G.target)})},outputs:{imagePreview:"imagePreview"}}),T})()},84614:(qt,Dt,c)=>{c.d(Dt,{Zj:()=>v.Z,BN:()=>T,JU:()=>b.JU,mJ:()=>b.mJ,$3:()=>b.$3});var v=c(60153),l=c(74788);let T=(()=>{class h{}return h.\u0275fac=function(R){return new(R||h)},h.\u0275mod=l.oAB({type:h}),h.\u0275inj=l.cJS({}),h})();var b=c(82113)},82113:(qt,Dt,c)=>{c.d(Dt,{JU:()=>v.J,mJ:()=>T,$3:()=>b.$});var v=c(74982),l=c(74788);let T=(()=>{class h{}return h.\u0275fac=function(R){return new(R||h)},h.\u0275mod=l.oAB({type:h}),h.\u0275inj=l.cJS({}),h})();var b=c(76954)},74982:(qt,Dt,c)=>{c.d(Dt,{J:()=>J});var v=c(74788),l=c(14309),T=c(68339),b=c(46782),h=c(76954);let J=(()=>{class R{constructor(Y,ft,dt,q,mt,lt){this.elementRef=Y,this.renderer=ft,this.editor=dt,this.editorContainer=q,this.editorLoaded$=mt,this.valueChange=this.editor.valueChange$,this.stateChange=this.editor.stateChange$,this.editorLoaded$.pipe((0,b.R)(lt)).subscribe(()=>{this.renderer.appendChild(this.elementRef.nativeElement,this.editorContainer)})}set value(Y){Y!==this.editor.html&&this.editor.setValue(Y)}set editable(Y){this.editor.editable=Y}}return R.\u0275fac=function(Y){return new(Y||R)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(h.$),v.Y36(l.Y1),v.Y36(l.ZW),v.Y36(T.TuiDestroyService,2))},R.\u0275dir=v.lG2({type:R,selectors:[["","tuiTiptapEditor",""]],inputs:{value:"value",editable:"editable"},outputs:{valueChange:"valueChange",stateChange:"stateChange"},features:[v._Bn([T.TuiDestroyService])]}),R})()},76954:(qt,Dt,c)=>{c.d(Dt,{$:()=>Y});var v=c(77361),l=c(14309),T=c(27863),b=c(39761),h=c(88002),J=c(87519),G=c(74788);let Y=(()=>{class ft extends v._{constructor(q){super(),this.editorRef=q,this.editorRef.subscribe(mt=>{this.editor=mt,mt.on("transaction",()=>{this.stateChange$.next()}),mt.on("update",()=>{const lt=mt.getHTML(),Nt=function(ft){return Array.isArray(ft)&&1===ft.length&&!ft[0].hasOwnProperty("content")}(mt.getJSON().content)?"":lt;this.valueChange$.next(Nt)})})}get isFocused(){return this.editor.isFocused}get html(){return this.editor.getHTML()}get editable(){return this.editor.isEditable}set editable(q){this.editor.setEditable(q)}get state(){return this.editor.state}getOriginTiptapEditor(){return this.editor}undoDisabled(){return!this.editor.can().undo()}redoDisabled(){return!this.editor.can().redo()}getFontColor(){return this.editor.getAttributes("textStyle").fontColor||"rgb(51, 51, 51)"}getBackgroundColor(){var q;return(null===(q=this.editor)||void 0===q?void 0:q.getAttributes("textStyle").backgroundColor)||"rgb(51, 51, 51)"}getCellColor(){return this.editor.getAttributes("tableCell").background||this.editor.getAttributes("tableHeader").background}getGroupColor(){var q,mt,lt,Ct;if(this.editor.isActive("group")){const Nt=null!==(mt=null===(q=this.editor.getAttributes("group"))||void 0===q?void 0:q.style)&&void 0!==mt?mt:"",xt=(0,T.jx)(Nt);return null!==(Ct=null!==(lt=xt["background-color"])&&void 0!==lt?lt:xt.background)&&void 0!==Ct?Ct:""}return""}onAlign(q){this.editor.chain().focus().setTextAlign(q).run()}setImage(q){this.editor.chain().focus().first(({commands:mt})=>[()=>{var lt;return(null===(lt=mt.setEditableImage)||void 0===lt?void 0:lt.call(mt,{src:q}))||!1},()=>mt.setImage({src:q})]).run()}undo(){this.editor.chain().undo().run()}redo(){this.editor.chain().redo().run()}setHorizontalRule(){this.editor.chain().focus().setHorizontalRule().run()}removeFormat(){this.editor.commands.unsetAllMarks(),this.editor.commands.clearNodes()}setFontColor(q){this.editor.chain().focus().setFontColor(q).run()}setBackgroundColor(q){this.editor.chain().focus().setBackgroundColor(q).run()}toggleUnderline(){this.editor.chain().focus().toggleUnderline().run()}toggleStrike(){this.editor.chain().focus().toggleStrike().run()}toggleOrderedList(){this.editor.chain().focus().toggleOrderedList().run()}toggleUnorderedList(){this.editor.chain().focus().toggleBulletList().run()}togglePre(){this.editor.chain().focus().toggleCodeBlock().run()}sinkListItem(){this.editor.chain().focus().sinkListItem("listItem").run()}liftListItem(){this.editor.chain().focus().liftListItem("listItem").run()}isActive(q){return this.editor.isActive(q)}isActive$(q){return this.stateChange$.pipe((0,b.O)(null),(0,h.U)(()=>this.isActive(q)),(0,J.x)())}toggleBold(){this.editor.chain().focus().toggleBold().run()}toggleCode(){this.editor.chain().focus().toggleCode().run()}toggleItalic(){this.editor.chain().focus().toggleItalic().run()}toggleBlockquote(){this.editor.chain().focus().toggleBlockquote().run()}toggleSubscript(){this.editor.chain().focus().toggleSubscript().run()}toggleSuperscript(){this.editor.chain().focus().toggleSuperscript().run()}toggleCodeBlock(){this.editor.chain().focus().toggleCodeBlock().run()}insertTable(q,mt){this.editor.chain().focus().insertTable({cols:q,rows:mt}).run()}addColumnAfter(){this.editor.chain().focus().addColumnAfter().run()}addColumnBefore(){this.editor.chain().focus().addColumnBefore().run()}addRowAfter(){this.editor.chain().focus().addRowAfter().run()}addRowBefore(){this.editor.chain().focus().addRowBefore().run()}deleteColumn(){this.editor.chain().focus().deleteColumn().run()}deleteRow(){this.editor.chain().focus().deleteRow().run()}mergeCells(){this.editor.chain().focus().mergeCells().run()}splitCell(){this.editor.chain().focus().splitCell().run()}canMergeCells(){return this.editor.can().mergeCells()}canSplitCells(){return this.editor.can().splitCell()}setHeading(q){this.editor.chain().focus().setHeading({level:q}).run()}setParagraph(q){this.editor.chain().focus().setParagraph().run(),q&&this.editor.chain().setMark("textStyle",q).run()}setHardBreak(){this.editor.chain().setHardBreak().run()}setTextSelection(q){this.editor.commands.setTextSelection(q)}toggleLink(q){this.editor.chain().focus().toggleLink({href:q}).run()}setLink(q){this.editor.chain().focus().setLink({href:q}).run()}unsetLink(){this.editor.chain().focus().unsetLink().run()}focus(){this.editor.chain().focus().run()}setValue(q){this.editor.commands.setContent(q)}destroy(){this.editor.destroy()}setCellColor(q){this.editor.chain().focus().setCellBackground(q).run()}selectClosest(){const q=this.editor.state.selection.anchor,{schema:mt,doc:lt}=this.editor.state,Ct=(0,T.Yz)(lt.resolve(q),mt.marks.link);Ct&&this.editor.chain().setTextSelection(Ct).run()}enter(){this.editor.commands.enter()}setDetails(){this.editor.commands.setDetails()}removeDetails(){this.editor.commands.removeDetails()}setGroup(){this.editor.commands.setGroup()}removeGroup(){this.editor.commands.removeGroup()}setGroupHilite(q){this.editor.commands.setGroupHilite(q)}setAnchor(q){this.editor.commands.setAnchor(q.replace("#",""))}removeAnchor(){this.editor.commands.removeAnchor()}setFileLink(q){this.editor.commands.setFileLink(q)}setYoutubeVideo(q){this.editor.commands.setYoutubeVideo(q)}setIframe(q){this.editor.commands.setIframe(q)}}return ft.\u0275fac=function(q){return new(q||ft)(G.LFG(l.ZW))},ft.\u0275prov=G.Yz7({token:ft,factory:ft.\u0275fac}),ft})()},48699:(qt,Dt,c)=>{c.d(Dt,{_:()=>v});var v=(()=>{return(l=v||(v={})).Undo="undo",l.Anchor="anchor",l.Size="fontSize",l.Bold="bold",l.Italic="italic",l.Underline="underline",l.Strikethrough="strikeThrough",l.Align="justify",l.List="list",l.Quote="quote",l.Color="foreColor",l.Hilite="hiliteColor",l.Clear="clear",l.Link="link",l.Attach="attach",l.Tex="tex",l.Code="code",l.Img="image",l.HR="insertHorizontalRule",l.Sup="superscript",l.Sub="subscript",l.Table="insertTable",l.MergeCells="mergeCells",l.SplitCells="splitCells",l.RowsColumnsManaging="rowsColumnsManaging",l.Details="details",l.Group="group",v;var l})()},15736:(qt,Dt,c)=>{c.r(Dt),c.d(Dt,{BackgroundColor:()=>T}),c(84402);const T=c(12867).Extension.create({name:"backgroundColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,renderHTML:({backgroundColor:b})=>b?{style:`background-color: ${b}`}:{},parseHTML:({style:b})=>b.backgroundColor.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setBackgroundColor:b=>({chain:h})=>h().setMark("textStyle",{backgroundColor:b}).run(),unsetBackgroundColor:()=>({chain:b})=>b().setMark("textStyle",{backgroundColor:null}).run()})})},93763:(qt,Dt,c)=>{c.r(Dt),c.d(Dt,{TuiFileLink:()=>l});const l=c(12867).Extension.create({name:"fileLink",addCommands:()=>({setFileLink:T=>({state:b,chain:h})=>{const{selection:J}=b,G='<span style="font-size: 15px"> </span>';return(Math.abs(J.to-J.from)>0?h().toggleMark("link",{href:T.link},{extendEmptyMarkRange:!0}).setTextSelection(J.to).insertContent(G):h().insertContent(`<a href="${T.link}">${T.name}</a>${G}`)).setTextSelection(J.to).run()}})})},52658:(qt,Dt,c)=>{c.r(Dt),c.d(Dt,{FontColor:()=>T}),c(84402);const T=c(12867).Extension.create({name:"fontColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontColor:{default:null,renderHTML:({fontColor:b})=>b?{style:`color: ${b}`}:{},parseHTML:({style:b})=>b.color.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setFontColor:b=>({chain:h})=>h().setMark("textStyle",{fontColor:b}).run(),unsetFontColor:()=>({chain:b})=>b().setMark("textStyle",{fontColor:null}).run()})})},9492:(qt,Dt,c)=>{c.r(Dt),c.d(Dt,{TuiFontSize:()=>T}),c(84402);const T=c(12867).Extension.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:({style:b})=>b.fontSize,renderHTML:({fontSize:b})=>b?{style:`font-size: ${b}`}:{}}}}]},addCommands:()=>({setFontSize:b=>({chain:h})=>h().setMark("textStyle",{fontSize:b}).run(),unsetFontSize:()=>({chain:b})=>b().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()})})},54920:(qt,Dt,c)=>{c.r(Dt),c.d(Dt,{TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>T,createGroupExtension:()=>b});var v=c(27863),l=c(12867);const T={groupNodeClass:"tui-group-node",groupPointerNodeClass:"tui-group-pointer",nested:!0,draggable:!0,createOnEnter:!1},b=(h={})=>{const{draggable:J,nested:R,groupNodeClass:G,groupPointerNodeClass:Y,createOnEnter:ft}=Object.assign(Object.assign({},T),h);return l.Node.create({name:"group",draggable:J,group:"block",content:R?"block+":"block",addAttributes:()=>({style:{default:null,parseHTML:dt=>dt.getAttribute("style"),renderHTML:dt=>dt.style?{style:dt.style}:{}}}),parseHTML:()=>[{tag:'div[data-type="group"]'}],renderHTML:({HTMLAttributes:dt})=>["div",(0,l.mergeAttributes)(dt,{"data-type":"group"}),0],addNodeView:()=>({HTMLAttributes:dt,node:q})=>{const mt=document.createElement("div"),lt=document.createElement("div");if(mt.classList.add(G),lt.setAttribute("data-type","group"),dt.style&&(q.attrs.style=dt.style,lt.setAttribute("style",dt.style)),J){const Ct=document.createElement("div");Ct.classList.add(Y),Ct.innerHTML="",Ct.contentEditable="false",mt.append(Ct,lt)}else mt.append(lt);return{dom:mt,contentDOM:lt}},addCommands(){return{setGroup:()=>({commands:dt,state:q})=>{this.editor.chain().focus().run();const mt=(0,v.Ap)(q,""),Ct=`<div data-type="group">${mt.trim().startsWith("<p>")?mt:`<p>${mt}</p>`}</div>`;return dt.insertContent(Ct)},setGroupHilite:dt=>({editor:q})=>{for(let mt=q.state.selection.$anchor,lt=mt.depth;lt>0;lt--){const Ct=mt.node(lt);if(Ct.type.name===this.name){setTimeout(()=>q.commands.updateAttributes(Ct.type,{style:`background: ${dt}`}));break}}return!0},removeGroup:()=>({state:dt,dispatch:q})=>(0,v.yU)(dt,q,this.name)}},addKeyboardShortcuts(){return ft?{Enter:()=>this.editor.commands.setGroup()}:{}}})}},20854:(qt,Dt,c)=>{c.r(Dt),c.d(Dt,{TUI_IFRAME_EDITOR_OPTIONS:()=>J,TuiIframeEditorComponent:()=>G,TuiIframeEditorModule:()=>q,createIframeEditorExtension:()=>dt});var v=c(12057),l=c(91211),T=c(95110),b=c(68339),h=c(74788);const J=new h.OlP("[TUI_IFRAME_EDITOR_OPTIONS]: Size of resizable iframe inside editor",{factory:()=>({minWidth:100,maxWidth:1/0,minHeight:100,maxHeight:1/0})});var R=c(96570);let G=(()=>{class mt extends T._3{constructor(Ct,Nt,xt,bt){super(Nt,bt),this.options=Ct,this.sanitizer=xt}get src(){var Ct;return this.sanitizer.bypassSecurityTrustResourceUrl(null!==(Ct=this.attrs.src)&&void 0!==Ct?Ct:"")}updateSize([Ct,Nt]){this._width=Math.max(this.options.minWidth,Math.min(this.options.maxWidth,Ct)),this._height=Math.max(this.options.minHeight,Math.min(this.options.maxHeight,Nt))}}return mt.\u0275fac=function(Ct){return new(Ct||mt)(h.Y36(J),h.Y36(v.K0),h.Y36(l.H7),h.Y36(b.TuiDestroyService,2))},mt.\u0275cmp=h.Xpm({type:mt,selectors:[["tui-iframe-editor"]],features:[h._Bn([b.TuiDestroyService]),h.qOj],decls:2,vars:13,consts:[[3,"width","height","sizeChange"],[3,"src","width","height"]],template:function(Ct,Nt){1&Ct&&(h.TgZ(0,"tui-editor-resizable",0),h.NdJ("sizeChange",function(bt){return Nt.updateSize(bt)}),h._UZ(1,"iframe",1),h.qZA()),2&Ct&&(h.Q6J("width",Nt.width)("height",Nt.height),h.xp6(1),h.Udp("min-width",Nt.options.minWidth)("min-height",Nt.options.minHeight)("max-width",Nt.options.maxWidth)("max-height",Nt.options.maxHeight),h.Q6J("src",Nt.src,h.uOi)("width",Nt.width)("height",Nt.height))},directives:[R.V],styles:["iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}"],changeDetection:0}),mt})();var Y=c(40400),ft=c(12867);const dt=mt=>ft.Node.create({name:"iframe",group:"block",atom:!0,draggable:!1,parseHTML:()=>[{tag:'iframe[data-type="iframe-editor"]'}],addAttributes(){return{src:{default:null,keepOnSplit:!1,parseHTML:lt=>lt.getAttribute("src")},frameborder:{default:0,keepOnSplit:!1,parseHTML:lt=>lt.getAttribute("frameborder")},width:{default:"100%",keepOnSplit:!1,parseHTML:lt=>lt.getAttribute("width")},height:{default:null,keepOnSplit:!1,parseHTML:lt=>lt.getAttribute("height")},allowfullscreen:{keepOnSplit:!1,default:this.options.allowFullscreen,parseHTML:lt=>lt.getAttribute("allowfullscreen")}}},renderHTML:({HTMLAttributes:lt})=>["iframe",(0,ft.mergeAttributes)(lt,{"data-type":"iframe-editor"})],addNodeView:()=>(0,Y.x)(G,{injector:mt}),addCommands(){return{setIframe:lt=>({commands:Ct,state:Nt})=>{const xt=Nt.selection.anchor;return Ct.enter(),Ct.setTextSelection(xt),Ct.insertContent({type:this.name,attrs:lt}),Ct.setTextSelection(Nt.selection.anchor),!0}}}});let q=(()=>{class mt{}return mt.\u0275fac=function(Ct){return new(Ct||mt)},mt.\u0275mod=h.oAB({type:mt}),mt.\u0275inj=h.cJS({imports:[[T.Sl]]}),mt})()},53380:(qt,Dt,c)=>{c.r(Dt),c.d(Dt,{TUI_EDITOR_MAX_IMAGE_WIDTH:()=>R,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>J,TUI_IMAGE_EDITOR_OPTIONS:()=>G,TuiImageEditorComponent:()=>ft,TuiImageEditorModule:()=>Nt,createImageEditorExtension:()=>Ct});var v=c(12057),l=c(91211),T=c(95110),b=c(68339),h=c(74788);const J=new h.OlP("[TUI_EDITOR_MIN_IMAGE_WIDTH]: Min size of resizable image inside editor",{factory:()=>null}),R=new h.OlP("[TUI_EDITOR_MAX_IMAGE_WIDTH]: Max size of resizable image inside editor",{factory:()=>null}),G=new h.OlP("[TUI_IMAGE_EDITOR_OPTIONS]: Size of resizable image inside editor",{factory:()=>({minWidth:100,maxWidth:1/0})});var Y=c(96570);let ft=(()=>{class xt extends T._3{constructor(ut,pt,K,At,Ot,St){super(At,St),this.minWidth=ut,this.maxWidth=pt,this.options=K,this.sanitizer=Ot}get height(){return null}get alt(){return this.attrs.alt||""}get title(){return this.attrs.title||""}get src(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.attrs.src)}updateSize([ut]){var pt,K;const At=null!==(pt=this.minWidth)&&void 0!==pt?pt:this.options.minWidth,Ot=null!==(K=this.maxWidth)&&void 0!==K?K:this.options.maxWidth;this._width=Math.max(At,Math.min(Ot,ut))}}return xt.\u0275fac=function(ut){return new(ut||xt)(h.Y36(J),h.Y36(R),h.Y36(G),h.Y36(v.K0),h.Y36(l.H7),h.Y36(b.TuiDestroyService,2))},xt.\u0275cmp=h.Xpm({type:xt,selectors:[["tui-image-editor"]],features:[h._Bn([b.TuiDestroyService]),h.qOj],decls:2,vars:10,consts:[[3,"width","autoHeight","sizeChange"],[3,"src","width","alt","title"]],template:function(ut,pt){1&ut&&(h.TgZ(0,"tui-editor-resizable",0),h.NdJ("sizeChange",function(At){return pt.updateSize(At)}),h._UZ(1,"img",1),h.qZA()),2&ut&&(h.Q6J("width",pt.width)("autoHeight",!0),h.xp6(1),h.Udp("min-width",pt.options.minWidth,"px")("max-width",pt.options.maxWidth,"px"),h.Q6J("src",pt.src,h.LSH)("width",pt.width)("alt",pt.alt)("title",pt.title))},directives:[Y.V],styles:["img[_ngcontent-%COMP%]{pointer-events:none}"],changeDetection:0}),xt})();var dt=c(40400),q=c(12867);const mt=[{tag:'img[data-type="image-editor"]'}],lt={src:{default:"",keepOnSplit:!1},width:{default:300,keepOnSplit:!1},alt:{default:"",keepOnSplit:!1},title:{default:"",keepOnSplit:!1}},Ct=xt=>q.Node.create({name:"imageEditor",group:"block",atom:!0,draggable:!0,parseHTML:()=>mt,addAttributes:()=>lt,renderHTML:({HTMLAttributes:bt})=>["img",(0,q.mergeAttributes)(bt,{"data-type":"image-editor"})],addNodeView:()=>(0,dt.x)(ft,{injector:xt}),addCommands(){return{setEditableImage:bt=>({commands:ut})=>ut.insertContent({type:this.name,attrs:bt})}}});let Nt=(()=>{class xt{}return xt.\u0275fac=function(ut){return new(ut||xt)},xt.\u0275mod=h.oAB({type:xt}),xt.\u0275inj=h.cJS({imports:[[v.ez,T.Sl]]}),xt})()},12177:(qt,Dt,c)=>{function l(b){return b.isActive("bulletList")||b.isActive("orderedList")}c.r(Dt),c.d(Dt,{TuiTabExtension:()=>T,tuiIsOrderedOrBulletList:()=>l});const T=c(12867).Extension.create({name:"indent",addKeyboardShortcuts(){return{Tab:()=>l(this.editor)?null:this.editor.commands.insertContent("\t")}}})},57734:(qt,Dt,c)=>{c.r(Dt),c.d(Dt,{TuiLink:()=>Ce});var v=c(27863),l=c(12867);function T(Mt){this.j={},this.jr=[],this.jd=null,this.t=Mt}T.prototype={accepts:function(){return!!this.t},tt:function(Pt,Ht){if(Ht&&Ht.j)return this.j[Pt]=Ht,Ht;var zt=Ht,Ut=this.j[Pt];if(Ut)return zt&&(Ut.t=zt),Ut;Ut=b();var ne=G(this,Pt);return ne?(Object.assign(Ut.j,ne.j),Ut.jr.append(ne.jr),Ut.jr=ne.jd,Ut.t=zt||ne.t):Ut.t=zt,this.j[Pt]=Ut,Ut}};var b=function(){return new T},h=function(Pt){return new T(Pt)},J=function(Pt,Ht,zt){Pt.j[Ht]||(Pt.j[Ht]=zt)},R=function(Pt,Ht,zt){Pt.jr.push([Ht,zt])},G=function(Pt,Ht){var zt=Pt.j[Ht];if(zt)return zt;for(var Ut=0;Ut<Pt.jr.length;Ut++){var se=Pt.jr[Ut][1];if(Pt.jr[Ut][0].test(Ht))return se}return Pt.jd},Y=function(Pt,Ht,zt){for(var Ut=0;Ut<Ht.length;Ut++)J(Pt,Ht[Ut],zt)},ft=function(Pt,Ht){for(var zt=0;zt<Ht.length;zt++)J(Pt,Ht[zt][0],Ht[zt][1])},dt=function(Pt,Ht,zt,Ut){for(var ae,ne=0,se=Ht.length;ne<se&&(ae=Pt.j[Ht[ne]]);)Pt=ae,ne++;if(ne>=se)return[];for(;ne<se-1;)ae=Ut(),J(Pt,Ht[ne],ae),Pt=ae,ne++;J(Pt,Ht[se-1],zt)},q="DOMAIN",mt="LOCALHOST",lt="TLD",Ct="NUM",Nt="PROTOCOL",xt="MAILTO",pt="OPENBRACE",K="OPENBRACKET",At="OPENANGLEBRACKET",Ot="OPENPAREN",St="CLOSEBRACE",Rt="CLOSEBRACKET",gt="CLOSEANGLEBRACKET",Ft="CLOSEPAREN",$t="AMPERSAND",Gt="APOSTROPHE",ht="ASTERISK",k="AT",et="BACKSLASH",st="BACKTICK",it="CARET",U="COLON",Q="COMMA",nt="DOLLAR",kt="DOT",jt="EQUALS",Yt="EXCLAMATION",le="HYPHEN",Vt="PERCENT",ve="PIPE",xe="PLUS",We="POUND",ge="QUERY",Qe="QUOTE",Le="SEMI",Pe="SLASH",Ke="TILDE",Ye="UNDERSCORE",Je="SYM",Fe=Object.freeze({__proto__:null,DOMAIN:q,LOCALHOST:mt,TLD:lt,NUM:Ct,PROTOCOL:Nt,MAILTO:xt,WS:"WS",NL:"NL",OPENBRACE:pt,OPENBRACKET:K,OPENANGLEBRACKET:At,OPENPAREN:Ot,CLOSEBRACE:St,CLOSEBRACKET:Rt,CLOSEANGLEBRACKET:gt,CLOSEPAREN:Ft,AMPERSAND:$t,APOSTROPHE:Gt,ASTERISK:ht,AT:k,BACKSLASH:et,BACKTICK:st,CARET:it,COLON:U,COMMA:Q,DOLLAR:nt,DOT:kt,EQUALS:jt,EXCLAMATION:Yt,HYPHEN:le,PERCENT:Vt,PIPE:ve,PLUS:xe,POUND:We,QUERY:ge,QUOTE:Qe,SEMI:Le,SLASH:Pe,TILDE:Ke,UNDERSCORE:Ye,SYM:Je}),Ze="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw verm\xf6gensberater-ctb verm\xf6gensberatung-pwb \u03b5\u03bb \u03b5\u03c5 \u0431\u0433 \u0431\u0435\u043b \u0434\u0435\u0442\u0438 \u0435\u044e \u043a\u0430\u0442\u043e\u043b\u0438\u043a \u043a\u043e\u043c \u049b\u0430\u0437 \u043c\u043a\u0434 \u043c\u043e\u043d \u043c\u043e\u0441\u043a\u0432\u0430 \u043e\u043d\u043b\u0430\u0439\u043d \u043e\u0440\u0433 \u0440\u0443\u0441 \u0440\u0444 \u0441\u0430\u0439\u0442 \u0441\u0440\u0431 \u0443\u043a\u0440 \u10d2\u10d4 \u0570\u0561\u0575 \u05d9\u05e9\u05e8\u05d0\u05dc \u05e7\u05d5\u05dd \u0627\u0628\u0648\u0638\u0628\u064a \u0627\u062a\u0635\u0627\u0644\u0627\u062a \u0627\u0631\u0627\u0645\u0643\u0648 \u0627\u0644\u0627\u0631\u062f\u0646 \u0627\u0644\u0628\u062d\u0631\u064a\u0646 \u0627\u0644\u062c\u0632\u0627\u0626\u0631 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629 \u0627\u0644\u0639\u0644\u064a\u0627\u0646 \u0627\u0644\u0645\u063a\u0631\u0628 \u0627\u0645\u0627\u0631\u0627\u062a \u0627\u06cc\u0631\u0627\u0646 \u0628\u0627\u0631\u062a \u0628\u0627\u0632\u0627\u0631 \u0628\u06be\u0627\u0631\u062a \u0628\u064a\u062a\u0643 \u067e\u0627\u06a9\u0633\u062a\u0627\u0646 \u0680\u0627\u0631\u062a \u062a\u0648\u0646\u0633 \u0633\u0648\u062f\u0627\u0646 \u0633\u0648\u0631\u064a\u0629 \u0634\u0628\u0643\u0629 \u0639\u0631\u0627\u0642 \u0639\u0631\u0628 \u0639\u0645\u0627\u0646 \u0641\u0644\u0633\u0637\u064a\u0646 \u0642\u0637\u0631 \u0643\u0627\u062b\u0648\u0644\u064a\u0643 \u0643\u0648\u0645 \u0645\u0635\u0631 \u0645\u0644\u064a\u0633\u064a\u0627 \u0645\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u0627 \u0645\u0648\u0642\u0639 \u0647\u0645\u0631\u0627\u0647 \u0915\u0949\u092e \u0928\u0947\u091f \u092d\u093e\u0930\u0924 \u092d\u093e\u0930\u0924\u092e\u094d \u092d\u093e\u0930\u094b\u0924 \u0938\u0902\u0917\u0920\u0928 \u09ac\u09be\u0982\u09b2\u09be \u09ad\u09be\u09b0\u09a4 \u09ad\u09be\u09f0\u09a4 \u0a2d\u0a3e\u0a30\u0a24 \u0aad\u0abe\u0ab0\u0aa4 \u0b2d\u0b3e\u0b30\u0b24 \u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe \u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8 \u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd \u0c2d\u0c3e\u0c30\u0c24\u0c4d \u0cad\u0cbe\u0cb0\u0ca4 \u0d2d\u0d3e\u0d30\u0d24\u0d02 \u0dbd\u0d82\u0d9a\u0dcf \u0e04\u0e2d\u0e21 \u0e44\u0e17\u0e22 \u0ea5\u0eb2\u0ea7 \ub2f7\ub137 \ub2f7\ucef4 \uc0bc\uc131 \ud55c\uad6d \u30a2\u30de\u30be\u30f3 \u30b0\u30fc\u30b0\u30eb \u30af\u30e9\u30a6\u30c9 \u30b3\u30e0 \u30b9\u30c8\u30a2 \u30bb\u30fc\u30eb \u30d5\u30a1\u30c3\u30b7\u30e7\u30f3 \u30dd\u30a4\u30f3\u30c8 \u307f\u3093\u306a \u4e16\u754c \u4e2d\u4fe1 \u4e2d\u56fd \u4e2d\u570b \u4e2d\u6587\u7f51 \u4e9a\u9a6c\u900a \u4f01\u4e1a \u4f5b\u5c71 \u4fe1\u606f \u5065\u5eb7 \u516b\u5366 \u516c\u53f8 \u516c\u76ca \u53f0\u6e7e \u53f0\u7063 \u5546\u57ce \u5546\u5e97 \u5546\u6807 \u5609\u91cc \u5609\u91cc\u5927\u9152\u5e97 \u5728\u7ebf \u5927\u4f17\u6c7d\u8f66 \u5927\u62ff \u5929\u4e3b\u6559 \u5a31\u4e50 \u5bb6\u96fb \u5e7f\u4e1c \u5fae\u535a \u6148\u5584 \u6211\u7231\u4f60 \u624b\u673a \u62db\u8058 \u653f\u52a1 \u653f\u5e9c \u65b0\u52a0\u5761 \u65b0\u95fb \u65f6\u5c1a \u66f8\u7c4d \u673a\u6784 \u6de1\u9a6c\u9521 \u6e38\u620f \u6fb3\u9580 \u70b9\u770b \u79fb\u52a8 \u7ec4\u7ec7\u673a\u6784 \u7f51\u5740 \u7f51\u5e97 \u7f51\u7ad9 \u7f51\u7edc \u8054\u901a \u8bfa\u57fa\u4e9a \u8c37\u6b4c \u8d2d\u7269 \u901a\u8ca9 \u96c6\u56e2 \u96fb\u8a0a\u76c8\u79d1 \u98de\u5229\u6d66 \u98df\u54c1 \u9910\u5385 \u9999\u683c\u91cc\u62c9 \u9999\u6e2f".split(" "),He=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,Ne=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,Ge=/\uFE0F/,$e=/\d/,tn=/\s/;function ze(){var Mt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],Pt=b(),Ht=h(Ct),zt=h(q),Ut=b(),ne=h("WS"),se=[[$e,zt],[He,zt],[Ne,zt],[Ge,zt]],ae=function(){var Be=h(q);return Be.j={"-":Ut},Be.jr=[].concat(se),Be},ke=function(Be){var g=ae();return g.t=Be,g};ft(Pt,[["'",h(Gt)],["{",h(pt)],["[",h(K)],["<",h(At)],["(",h(Ot)],["}",h(St)],["]",h(Rt)],[">",h(gt)],[")",h(Ft)],["&",h($t)],["*",h(ht)],["@",h(k)],["`",h(st)],["^",h(it)],[":",h(U)],[",",h(Q)],["$",h(nt)],[".",h(kt)],["=",h(jt)],["!",h(Yt)],["-",h(le)],["%",h(Vt)],["|",h(ve)],["+",h(xe)],["#",h(We)],["?",h(ge)],['"',h(Qe)],["/",h(Pe)],[";",h(Le)],["~",h(Ke)],["_",h(Ye)],["\\",h(et)]]),J(Pt,"\n",h("NL")),R(Pt,tn,ne),J(ne,"\n",b()),R(ne,tn,ne);for(var be=0;be<Ze.length;be++)dt(Pt,Ze[be],ke(lt),ae);var de=ae(),Ee=ae(),Te=ae(),Ae=ae();dt(Pt,"file",de,ae),dt(Pt,"ftp",Ee,ae),dt(Pt,"http",Te,ae),dt(Pt,"mailto",Ae,ae);var Re=ae(),ye=h(Nt),Ue=h(xt);J(Ee,"s",Re),J(Ee,":",ye),J(Te,"s",Re),J(Te,":",ye),J(de,":",ye),J(Re,":",ye),J(Ae,":",Ue);for(var Se=ae(),_e=0;_e<Mt.length;_e++)dt(Pt,Mt[_e],Se,ae);return J(Se,":",ye),dt(Pt,"localhost",ke(mt),ae),R(Pt,$e,Ht),R(Pt,He,zt),R(Pt,Ne,zt),R(Pt,Ge,zt),R(Ht,$e,Ht),R(Ht,He,zt),R(Ht,Ne,zt),R(Ht,Ge,zt),J(Ht,"-",Ut),J(zt,"-",Ut),J(Ut,"-",Ut),R(zt,$e,zt),R(zt,He,zt),R(zt,Ne,zt),R(zt,Ge,zt),R(Ut,$e,zt),R(Ut,He,zt),R(Ut,Ne,zt),R(Ut,Ge,zt),Pt.jd=h(Je),Pt}var fe={defaultProtocol:"http",events:null,format:D,formatHref:D,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function D(Mt){return Mt}function w(){}function Z(Mt,Pt){function Ht(zt,Ut){this.t=Mt,this.v=zt,this.tk=Ut}return function(Mt,Pt){var Ht=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},zt=Object.create(Mt.prototype);for(var Ut in Ht)zt[Ut]=Ht[Ut];zt.constructor=Pt,Pt.prototype=zt}(w,Ht,Pt),Ht}w.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var Pt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(Pt),start:this.startIndex(),end:this.endIndex()}}};var F=Z("email",{isLink:!0}),Et=Z("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),Bt=Z("text"),N=Z("nl"),a=Z("url",{isLink:!0,toHref:function(){for(var Pt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe.defaultProtocol,Ht=this.tk,zt=!1,Ut=!1,ne=[],se=0;Ht[se].t===Nt;)zt=!0,ne.push(Ht[se].v),se++;for(;Ht[se].t===Pe;)Ut=!0,ne.push(Ht[se].v),se++;for(;se<Ht.length;se++)ne.push(Ht[se].v);return ne=ne.join(""),zt||Ut||(ne="".concat(Pt,"://").concat(ne)),ne},hasProtocol:function(){return this.tk[0].t===Nt}}),d=Object.freeze({__proto__:null,MultiToken:w,Base:w,createTokenClass:Z,MailtoEmail:F,Email:Et,Text:Bt,Nl:N,Url:a});function C(){var Mt=b(),Pt=b(),Ht=b(),zt=b(),Ut=b(),ne=b(),se=b(),ae=h(a),ke=b(),be=h(a),de=h(a),Ee=b(),Te=b(),Ae=b(),Re=b(),ye=b(),Ue=h(a),Se=h(a),_e=h(a),we=h(a),Be=b(),g=b(),_=b(),x=b(),M=b(),L=b(),H=h(Et),j=b(),ct=h(Et),X=h(F),at=b(),It=b(),wt=b(),Zt=b(),te=h(N);J(Mt,"NL",te),J(Mt,Nt,Pt),J(Mt,xt,Ht),J(Pt,Pe,zt),J(zt,Pe,Ut),J(Mt,lt,ne),J(Mt,q,ne),J(Mt,mt,ae),J(Mt,Ct,ne),J(Ut,lt,de),J(Ut,q,de),J(Ut,Ct,de),J(Ut,mt,de),J(ne,kt,se),J(M,kt,L),J(se,lt,ae),J(se,q,ne),J(se,Ct,ne),J(se,mt,ne),J(L,lt,H),J(L,q,M),J(L,Ct,M),J(L,mt,M),J(ae,kt,se),J(H,kt,L),J(ae,U,ke),J(ae,Pe,de),J(ke,Ct,be),J(be,Pe,de),J(H,U,j),J(j,Ct,ct);var re=[$t,ht,k,et,st,it,nt,q,jt,le,mt,Ct,Vt,ve,xe,We,Nt,Pe,Je,Ke,lt,Ye],ce=[Gt,gt,St,Rt,Ft,U,Q,kt,Yt,At,pt,K,Ot,ge,Qe,Le];J(de,pt,Te),J(de,K,Ae),J(de,At,Re),J(de,Ot,ye),J(Ee,pt,Te),J(Ee,K,Ae),J(Ee,At,Re),J(Ee,Ot,ye),J(Te,St,de),J(Ae,Rt,de),J(Re,gt,de),J(ye,Ft,de),J(Ue,St,de),J(Se,Rt,de),J(_e,gt,de),J(we,Ft,de),J(Be,St,de),J(g,Rt,de),J(_,gt,de),J(x,Ft,de),Y(Te,re,Ue),Y(Ae,re,Se),Y(Re,re,_e),Y(ye,re,we),Y(Te,ce,Be),Y(Ae,ce,g),Y(Re,ce,_),Y(ye,ce,x),Y(Ue,re,Ue),Y(Se,re,Se),Y(_e,re,_e),Y(we,re,we),Y(Ue,ce,Ue),Y(Se,ce,Se),Y(_e,ce,_e),Y(we,ce,we),Y(Be,re,Ue),Y(g,re,Se),Y(_,re,_e),Y(x,re,we),Y(Be,ce,Be),Y(g,ce,g),Y(_,ce,_),Y(x,ce,x),Y(de,re,de),Y(Ee,re,de),Y(de,ce,Ee),Y(Ee,ce,Ee),J(Ht,lt,X),J(Ht,q,X),J(Ht,Ct,X),J(Ht,mt,X),Y(X,re,X),Y(X,ce,at),Y(at,re,X),Y(at,ce,at);var he=[$t,Gt,ht,et,st,it,St,nt,q,jt,le,Ct,pt,Vt,ve,xe,We,ge,Pe,Je,Ke,lt,Ye];return Y(ne,he,It),J(ne,k,wt),Y(ae,he,It),J(ae,k,wt),Y(se,he,It),Y(It,he,It),J(It,k,wt),J(It,kt,Zt),Y(Zt,he,It),J(wt,lt,M),J(wt,q,M),J(wt,Ct,M),J(wt,mt,H),Mt}function I(Mt,Pt,Ht){var zt=Ht[0].s;return new Mt(Pt.substr(zt,Ht[Ht.length-1].e-zt),Ht)}var W="undefined"!=typeof console&&console&&console.warn||function(){},tt={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function B(Mt){if(tt.initialized&&W('linkifyjs: already initialized - will not register custom protocol "'.concat(Mt,'" until you manually call linkify.init(). To avoid this warning, please register all custom protocols before invoking linkify the first time.')),!/^[a-z-]+$/.test(Mt))throw Error("linkifyjs: protocols containing characters other than a-z or - (hyphen) are not supported");tt.customProtocols.push(Mt)}function _t(Mt){return tt.initialized||function(){tt.scanner={start:ze(tt.customProtocols),tokens:Fe},tt.parser={start:C(),tokens:d};for(var Mt={createTokenClass:Z},Pt=0;Pt<tt.pluginQueue.length;Pt++)tt.pluginQueue[Pt][1]({scanner:tt.scanner,parser:tt.parser,utils:Mt});tt.initialized=!0}(),function(Mt,Pt,Ht){for(var zt=Ht.length,Ut=0,ne=[],se=[];Ut<zt;){for(var ae=Mt,ke=null,be=null,de=0,Ee=null,Te=-1;Ut<zt&&!(ke=G(ae,Ht[Ut].t));)se.push(Ht[Ut++]);for(;Ut<zt&&(be=ke||G(ae,Ht[Ut].t));)ke=null,(ae=be).accepts()?(Te=0,Ee=ae):Te>=0&&Te++,Ut++,de++;if(Te<0)for(var Ae=Ut-de;Ae<Ut;Ae++)se.push(Ht[Ae]);else{se.length>0&&(ne.push(I(Bt,Pt,se)),se=[]);var Re=Ee.t,ye=Ht.slice((Ut-=Te)-(de-=Te),Ut);ne.push(I(Re,Pt,ye))}}return se.length>0&&ne.push(I(Bt,Pt,se)),ne}(tt.parser.start,Mt,function(Mt,Pt){for(var Ht=function(Mt){for(var Pt=[],Ht=Mt.length,zt=0;zt<Ht;){var Ut=Mt.charCodeAt(zt),ne=void 0,se=Ut<55296||Ut>56319||zt+1===Ht||(ne=Mt.charCodeAt(zt+1))<56320||ne>57343?Mt[zt]:Mt.slice(zt,zt+2);Pt.push(se),zt+=se.length}return Pt}(Pt.replace(/[A-Z]/g,function(Ae){return Ae.toLowerCase()})),zt=Ht.length,Ut=[],ne=0,se=0;se<zt;){for(var ae=Mt,ke=null,be=0,de=null,Ee=-1,Te=-1;se<zt&&(ke=G(ae,Ht[se]));)(ae=ke).accepts()?(Ee=0,Te=0,de=ae):Ee>=0&&(Ee+=Ht[se].length,Te++),be+=Ht[se].length,ne+=Ht[se].length,se++;se-=Te,Ut.push({t:de.t,v:Pt.substr((ne-=Ee)-(be-=Ee),be),s:ne-be,e:ne})}return Ut}(tt.scanner.start,Mt))}function Tt(Mt){for(var Pt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,Ht=_t(Mt),zt=[],Ut=0;Ut<Ht.length;Ut++){var ne=Ht[Ut];ne.isLink&&(!Pt||ne.t===Pt)&&zt.push(ne.toObject())}return zt}function Jt(Mt){var Pt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,Ht=_t(Mt);return 1===Ht.length&&Ht[0].isLink&&(!Pt||Ht[0].t===Pt)}var Kt=c(62463);const Ce=l.Mark.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(B)},onDestroy(){tt.scanner=null,tt.parser=null,tt.pluginQueue=[],tt.customProtocols=[],tt.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}),addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML:()=>[{tag:'a[href]:not([href *= "javascript:" i])'}],renderHTML({HTMLAttributes:Mt}){return["a",(0,l.mergeAttributes)(this.options.HTMLAttributes,Mt),0]},addCommands(){return{setLink:Mt=>({chain:Pt})=>Pt().setMark(this.name,Mt).setMeta("preventAutolink",!0).run(),toggleLink:Mt=>({chain:Pt})=>Pt().toggleMark(this.name,Mt,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:Mt})=>Mt().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[(0,l.markPasteRule)({find:Mt=>Tt(Mt).filter(Pt=>!this.options.validate||this.options.validate(Pt.value)).filter(Pt=>Pt.isLink).map(Pt=>({text:Pt.value,index:Pt.start,data:Pt})),type:this.type,getAttributes:Mt=>{var Pt;return{href:null===(Pt=Mt.data)||void 0===Pt?void 0:Pt.href}}})]},addProseMirrorPlugins(){const Mt=[];return this.options.autolink&&Mt.push(function(Mt){return new Kt.Sy({key:new Kt.H$("autolink"),appendTransaction:(Pt,Ht,zt)=>{const Ut=Pt.some(de=>de.docChanged)&&!Ht.doc.eq(zt.doc),ne=Pt.some(de=>de.getMeta("preventAutolink"));if(!Ut||ne)return;const{tr:se}=zt,ae=(0,l.combineTransactionSteps)(Ht.doc,[...Pt]),{mapping:ke}=ae;return(0,l.getChangedRanges)(ae).forEach(({oldRange:de,newRange:Ee})=>{(0,l.getMarksBetween)(de.from,de.to,Ht.doc).filter(ye=>ye.mark.type===Mt.type).forEach(ye=>{const Ue=ke.map(ye.from),Se=ke.map(ye.to),_e=(0,l.getMarksBetween)(Ue,Se,zt.doc).filter(M=>M.mark.type===Mt.type);if(!_e.length)return;const we=_e[0],Be=Ht.doc.textBetween(ye.from,ye.to,void 0," "),g=zt.doc.textBetween(we.from,we.to,void 0," "),_=Jt(Be),x=Jt(g);_&&!x&&se.removeMark(we.from,we.to,Mt.type)});const Te=(0,l.findChildrenInRange)(zt.doc,Ee,ye=>ye.isTextblock);let Ae,Re;if(Te.length>1?(Ae=Te[0],Re=zt.doc.textBetween(Ae.pos,Ae.pos+Ae.node.nodeSize,void 0," ")):Te.length&&zt.doc.textBetween(Ee.from,Ee.to," "," ").endsWith(" ")&&(Ae=Te[0],Re=zt.doc.textBetween(Ae.pos,Ee.to,void 0," ")),Ae&&Re){const ye=Re.split(" ").filter(_e=>""!==_e);if(ye.length<=0)return!1;const Ue=ye[ye.length-1],Se=Ae.pos+Re.lastIndexOf(Ue);if(!Ue)return!1;Tt(Ue).filter(_e=>_e.isLink).filter(_e=>!Mt.validate||Mt.validate(_e.value)).map(_e=>Oe(ie({},_e),{from:Se+_e.start+1,to:Se+_e.end+1})).forEach(_e=>{se.addMark(_e.from,_e.to,Mt.type.create({href:_e.href}))})}}),se.steps.length?se:void 0}})}({type:this.type,validate:this.options.validate})),this.options.openOnClick&&Mt.push(function(Mt){return new Kt.Sy({key:new Kt.H$("handleClickLink"),props:{handleClick:(Pt,Ht,zt)=>{var Ut;const ne=(0,l.getAttributes)(Pt.state,Mt.type.name);return!(!(null===(Ut=zt.target)||void 0===Ut?void 0:Ut.closest("a"))||!ne.href||(window.open(ne.href,ne.target),0))}}})}({type:this.type})),this.options.linkOnPaste&&Mt.push(function(Mt){return new Kt.Sy({key:new Kt.H$("handlePasteLink"),props:{handlePaste:(Pt,Ht,zt)=>{const{state:Ut}=Pt,{selection:ne}=Ut,{empty:se}=ne;if(se)return!1;let ae="";zt.content.forEach(be=>{ae+=be.textContent});const ke=Tt(ae).find(be=>be.isLink&&be.value===ae);return!(!ae||!ke||(Mt.editor.commands.setMark(Mt.type,{href:ke.href}),0))}}})}({editor:this.editor,type:this.type})),Mt}}).extend({addAttributes(){var Mt;return Object.assign(Object.assign({},null===(Mt=this.parent)||void 0===Mt?void 0:Mt.call(this)),(0,v.x6)(["download"]))},addCommands(){var Mt;return Object.assign(Object.assign({},null===(Mt=this.parent)||void 0===Mt?void 0:Mt.call(this)),{toggleLink:Pt=>({chain:Ht,state:zt})=>{{const{selection:Ut,doc:ne}=zt,se=ne.cut(Ut.to,Ut.to+1),ke=" "===(0,l.getHTMLFromFragment)(se.content,zt.schema).replace(/<\/?[^>]+(>|$)/g,""),be=Ht().toggleMark(this.name,Pt,{extendEmptyMarkRange:!0});return(ke?be.setTextSelection(Ut.to+1):be.setTextSelection(Ut.to).insertContent('<span style="font-size: 15px"> </span>')).run()}}})}}).configure({openOnClick:!1})},41512:(qt,Dt,c)=>{c.r(Dt),c.d(Dt,{TuiAudio:()=>T,TuiSource:()=>b,TuiVideo:()=>h});var v=c(27863),l=c(12867);const T=l.Node.create({name:"audio",group:"block",content:"source+",addAttributes:()=>(0,v.x6)(["id","class","src","style","controls","loop","muted","preload","autoplay","width","height"]),parseHTML:()=>[{tag:"audio"}],renderHTML:({node:J,HTMLAttributes:R})=>["audio",R,...(0,v.YX)(J)]}),b=l.Node.create({name:"source",addAttributes:()=>(0,v.x6)(["src","type","width","height","media","sizes","srcset"]),parseHTML:()=>[{tag:"source"}],renderHTML:({HTMLAttributes:J})=>["source",(0,l.mergeAttributes)(J)]}),h=l.Node.create({name:"video",group:"block",content:"source+",addAttributes:()=>(0,v.x6)(["id","class","src","style","controls","loop","muted","preload","autoplay","width","height"]),parseHTML:()=>[{tag:"video"}],renderHTML:({node:J,HTMLAttributes:R})=>["video",R,...(0,v.YX)(J)]})},2823:(qt,Dt,c)=>{c.r(Dt),c.d(Dt,{StarterKit:()=>Lt});var v=c(12867);const l=/^\s*>\s$/,T=v.Node.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:z}){return["blockquote",(0,v.mergeAttributes)(this.options.HTMLAttributes,z),0]},addCommands(){return{setBlockquote:()=>({commands:z})=>z.wrapIn(this.name),toggleBlockquote:()=>({commands:z})=>z.toggleWrap(this.name),unsetBlockquote:()=>({commands:z})=>z.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,v.wrappingInputRule)({find:l,type:this.type})]}}),b=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,h=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,J=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,R=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,G=v.Mark.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:z=>"normal"!==z.style.fontWeight&&null},{style:"font-weight",getAttrs:z=>/^(bold(er)?|[5-9]\d{2,})$/.test(z)&&null}],renderHTML({HTMLAttributes:z}){return["strong",(0,v.mergeAttributes)(this.options.HTMLAttributes,z),0]},addCommands(){return{setBold:()=>({commands:z})=>z.setMark(this.name),toggleBold:()=>({commands:z})=>z.toggleMark(this.name),unsetBold:()=>({commands:z})=>z.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,v.markInputRule)({find:b,type:this.type}),(0,v.markInputRule)({find:J,type:this.type})]},addPasteRules(){return[(0,v.markPasteRule)({find:h,type:this.type}),(0,v.markPasteRule)({find:R,type:this.type})]}}),Y=/^\s*([-+*])\s$/,ft=v.Node.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:z}){return["ul",(0,v.mergeAttributes)(this.options.HTMLAttributes,z),0]},addCommands(){return{toggleBulletList:()=>({commands:z})=>z.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[(0,v.wrappingInputRule)({find:Y,type:this.type})]}}),dt=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,q=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,mt=v.Mark.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:z}){return["code",(0,v.mergeAttributes)(this.options.HTMLAttributes,z),0]},addCommands(){return{setCode:()=>({commands:z})=>z.setMark(this.name),toggleCode:()=>({commands:z})=>z.toggleMark(this.name),unsetCode:()=>({commands:z})=>z.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,v.markInputRule)({find:dt,type:this.type})]},addPasteRules(){return[(0,v.markPasteRule)({find:q,type:this.type})]}});var lt=c(62463);const Ct=/^```([a-z]+)?[\s\n]$/,Nt=/^~~~([a-z]+)?[\s\n]$/,xt=v.Node.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:z=>{var B;const{languageClassPrefix:ot}=this.options;return[...(null===(B=z.firstElementChild)||void 0===B?void 0:B.classList)||[]].filter(Kt=>Kt.startsWith(ot)).map(Kt=>Kt.replace(ot,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:z,HTMLAttributes:B}){return["pre",(0,v.mergeAttributes)(this.options.HTMLAttributes,B),["code",{class:z.attrs.language?this.options.languageClassPrefix+z.attrs.language:null},0]]},addCommands(){return{setCodeBlock:z=>({commands:B})=>B.setNode(this.name,z),toggleCodeBlock:z=>({commands:B})=>B.toggleNode(this.name,"paragraph",z)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:z,$anchor:B}=this.editor.state.selection;return!(!z||B.parent.type.name!==this.name)&&!(1!==B.pos&&B.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:z})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:B}=z,{selection:ot}=B,{$from:_t,empty:Tt}=ot;if(!Tt||_t.parent.type!==this.type)return!1;const Jt=_t.parentOffset===_t.parent.nodeSize-2,Kt=_t.parent.textContent.endsWith("\n\n");return!(!Jt||!Kt)&&z.chain().command(({tr:ee})=>(ee.delete(_t.pos-2,_t.pos),!0)).exitCode().run()},ArrowDown:({editor:z})=>{if(!this.options.exitOnArrowDown)return!1;const{state:B}=z,{selection:ot,doc:_t}=B,{$from:Tt,empty:Jt}=ot;if(!Jt||Tt.parent.type!==this.type||Tt.parentOffset!==Tt.parent.nodeSize-2)return!1;const ee=Tt.after();return void 0!==ee&&!_t.nodeAt(ee)&&z.commands.exitCode()}}},addInputRules(){return[(0,v.textblockTypeInputRule)({find:Ct,type:this.type,getAttributes:z=>({language:z[1]})}),(0,v.textblockTypeInputRule)({find:Nt,type:this.type,getAttributes:z=>({language:z[1]})})]},addProseMirrorPlugins(){return[new lt.Sy({key:new lt.H$("codeBlockVSCodeHandler"),props:{handlePaste:(z,B)=>{if(!B.clipboardData||this.editor.isActive(this.type.name))return!1;const ot=B.clipboardData.getData("text/plain"),_t=B.clipboardData.getData("vscode-editor-data"),Tt=_t?JSON.parse(_t):void 0,Jt=null==Tt?void 0:Tt.mode;if(!ot||!Jt)return!1;const{tr:Kt}=z.state;return Kt.replaceSelectionWith(this.type.create({language:Jt})),Kt.setSelection(lt.Bs.near(Kt.doc.resolve(Math.max(0,Kt.selection.from-2)))),Kt.insertText(ot.replace(/\r\n?/g,"\n")),Kt.setMeta("paste",!0),z.dispatch(Kt),!0}}})]}}),bt=v.Node.create({name:"doc",topNode:!0,content:"block+"});var ut=c(38480);function pt(z={}){return new lt.Sy({view:B=>new K(B,z)})}class K{constructor(B,ot){this.editorView=B,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=ot.width||1,this.color=ot.color||"black",this.class=ot.class,this.handlers=["dragover","dragend","drop","dragleave"].map(_t=>{let Tt=Jt=>{this[_t](Jt)};return B.dom.addEventListener(_t,Tt),{name:_t,handler:Tt}})}destroy(){this.handlers.forEach(({name:B,handler:ot})=>this.editorView.dom.removeEventListener(B,ot))}update(B,ot){null!=this.cursorPos&&ot.doc!=B.state.doc&&(this.cursorPos>B.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(B){B!=this.cursorPos&&(this.cursorPos=B,null==B?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let _t,B=this.editorView.state.doc.resolve(this.cursorPos),ot=!B.parent.inlineContent;if(ot){let ee=B.nodeBefore,ue=B.nodeAfter;if(ee||ue){let De=this.editorView.nodeDOM(this.cursorPos-(ee?ee.nodeSize:0));if(De){let Me=De.getBoundingClientRect(),Ce=ee?Me.bottom:Me.top;ee&&ue&&(Ce=(Ce+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),_t={left:Me.left,right:Me.right,top:Ce-this.width/2,bottom:Ce+this.width/2}}}}if(!_t){let ee=this.editorView.coordsAtPos(this.cursorPos);_t={left:ee.left-this.width/2,right:ee.left+this.width/2,top:ee.top,bottom:ee.bottom}}let Jt,Kt,Tt=this.editorView.dom.offsetParent;if(this.element||(this.element=Tt.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),this.element.classList.toggle("prosemirror-dropcursor-block",ot),this.element.classList.toggle("prosemirror-dropcursor-inline",!ot),!Tt||Tt==document.body&&"static"==getComputedStyle(Tt).position)Jt=-pageXOffset,Kt=-pageYOffset;else{let ee=Tt.getBoundingClientRect();Jt=ee.left-Tt.scrollLeft,Kt=ee.top-Tt.scrollTop}this.element.style.left=_t.left-Jt+"px",this.element.style.top=_t.top-Kt+"px",this.element.style.width=_t.right-_t.left+"px",this.element.style.height=_t.bottom-_t.top+"px"}scheduleRemoval(B){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),B)}dragover(B){if(!this.editorView.editable)return;let ot=this.editorView.posAtCoords({left:B.clientX,top:B.clientY}),_t=ot&&ot.inside>=0&&this.editorView.state.doc.nodeAt(ot.inside),Tt=_t&&_t.type.spec.disableDropCursor,Jt="function"==typeof Tt?Tt(this.editorView,ot,B):Tt;if(ot&&!Jt){let Kt=ot.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(Kt=(0,ut.nj)(this.editorView.state.doc,Kt,this.editorView.dragging.slice),null==Kt))return this.setCursor(null);this.setCursor(Kt),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(B){(B.target==this.editorView.dom||!this.editorView.dom.contains(B.relatedTarget))&&this.setCursor(null)}}const At=v.Extension.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[pt(this.options)]}});var Ot=c(70768),St=c(77346),Rt=c(43594);class gt extends lt.Y1{constructor(B){super(B,B)}map(B,ot){let _t=B.resolve(ot.map(this.head));return gt.valid(_t)?new gt(_t):lt.Y1.near(_t)}content(){return St.p2.empty}eq(B){return B instanceof gt&&B.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(B,ot){if("number"!=typeof ot.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new gt(B.resolve(ot.pos))}getBookmark(){return new Ft(this.anchor)}static valid(B){let ot=B.parent;if(ot.isTextblock||!function(z){for(let B=z.depth;B>=0;B--){let ot=z.index(B),_t=z.node(B);if(0!=ot)for(let Tt=_t.child(ot-1);;Tt=Tt.lastChild){if(0==Tt.childCount&&!Tt.inlineContent||Tt.isAtom||Tt.type.spec.isolating)return!0;if(Tt.inlineContent)return!1}else if(_t.type.spec.isolating)return!0}return!0}(B)||!function(z){for(let B=z.depth;B>=0;B--){let ot=z.indexAfter(B),_t=z.node(B);if(ot!=_t.childCount)for(let Tt=_t.child(ot);;Tt=Tt.firstChild){if(0==Tt.childCount&&!Tt.inlineContent||Tt.isAtom||Tt.type.spec.isolating)return!0;if(Tt.inlineContent)return!1}else if(_t.type.spec.isolating)return!0}return!0}(B))return!1;let _t=ot.type.spec.allowGapCursor;if(null!=_t)return _t;let Tt=ot.contentMatchAt(B.index()).defaultType;return Tt&&Tt.isTextblock}static findGapCursorFrom(B,ot,_t=!1){t:for(;;){if(!_t&&gt.valid(B))return B;let Tt=B.pos,Jt=null;for(let Kt=B.depth;;Kt--){let ee=B.node(Kt);if(ot>0?B.indexAfter(Kt)<ee.childCount:B.index(Kt)>0){Jt=ee.child(ot>0?B.indexAfter(Kt):B.index(Kt)-1);break}if(0==Kt)return null;Tt+=ot;let ue=B.doc.resolve(Tt);if(gt.valid(ue))return ue}for(;;){let Kt=ot>0?Jt.firstChild:Jt.lastChild;if(!Kt){if(Jt.isAtom&&!Jt.isText&&!lt.qv.isSelectable(Jt)){B=B.doc.resolve(Tt+Jt.nodeSize*ot),_t=!1;continue t}break}Jt=Kt,Tt+=ot;let ee=B.doc.resolve(Tt);if(gt.valid(ee))return ee}return null}}}gt.prototype.visible=!1,gt.findFrom=gt.findGapCursorFrom,lt.Y1.jsonID("gapcursor",gt);class Ft{constructor(B){this.pos=B}map(B){return new Ft(B.map(this.pos))}resolve(B){let ot=B.resolve(this.pos);return gt.valid(ot)?new gt(ot):lt.Y1.near(ot)}}const k=(0,Ot.$)({ArrowLeft:et("horiz",-1),ArrowRight:et("horiz",1),ArrowUp:et("vert",-1),ArrowDown:et("vert",1)});function et(z,B){const ot="vert"==z?B>0?"down":"up":B>0?"right":"left";return function(_t,Tt,Jt){let Kt=_t.selection,ee=B>0?Kt.$to:Kt.$from,ue=Kt.empty;if(Kt instanceof lt.Bs){if(!Jt.endOfTextblock(ot)||0==ee.depth)return!1;ue=!1,ee=_t.doc.resolve(B>0?ee.after():ee.before())}let De=gt.findGapCursorFrom(ee,B,ue);return!!De&&(Tt&&Tt(_t.tr.setSelection(new gt(De))),!0)}}function st(z,B,ot){if(!z||!z.editable)return!1;let _t=z.state.doc.resolve(B);if(!gt.valid(_t))return!1;let Tt=z.posAtCoords({left:ot.clientX,top:ot.clientY});return!(Tt&&Tt.inside>-1&&lt.qv.isSelectable(z.state.doc.nodeAt(Tt.inside))||(z.dispatch(z.state.tr.setSelection(new gt(_t))),0))}function it(z,B){if("insertCompositionText"!=B.inputType||!(z.state.selection instanceof gt))return!1;let{$from:ot}=z.state.selection,_t=ot.parent.contentMatchAt(ot.index()).findWrapping(z.state.schema.nodes.text);if(!_t)return!1;let Tt=St.HY.empty;for(let Kt=_t.length-1;Kt>=0;Kt--)Tt=St.HY.from(_t[Kt].createAndFill(null,Tt));let Jt=z.state.tr.replace(ot.pos,ot.pos,new St.p2(Tt,0,0));return Jt.setSelection(lt.Bs.near(Jt.doc.resolve(ot.pos+1))),z.dispatch(Jt),!1}function U(z){if(!(z.selection instanceof gt))return null;let B=document.createElement("div");return B.className="ProseMirror-gapcursor",Rt.EH.create(z.doc,[Rt.p.widget(z.selection.head,B,{key:"gapcursor"})])}const Q=v.Extension.create({name:"gapCursor",addProseMirrorPlugins:()=>[new lt.Sy({props:{decorations:U,createSelectionBetween:(z,B,ot)=>B.pos==ot.pos&&gt.valid(ot)?new gt(ot):null,handleClick:st,handleKeyDown:k,handleDOMEvents:{beforeinput:it}}})],extendNodeSchema(z){var B;return{allowGapCursor:null!==(B=(0,v.callOrReturn)((0,v.getExtensionField)(z,"allowGapCursor",{name:z.name,options:z.options,storage:z.storage})))&&void 0!==B?B:null}}}),nt=v.Node.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:z}){return["br",(0,v.mergeAttributes)(this.options.HTMLAttributes,z)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:z,chain:B,state:ot,editor:_t})=>z.first([()=>z.exitCode(),()=>z.command(()=>{const{selection:Tt,storedMarks:Jt}=ot;if(Tt.$from.parent.type.spec.isolating)return!1;const{keepMarks:Kt}=this.options,{splittableMarks:ee}=_t.extensionManager,ue=Jt||Tt.$to.parentOffset&&Tt.$from.marks();return B().insertContent({type:this.name}).command(({tr:De,dispatch:Me})=>{if(Me&&ue&&Kt){const Ce=ue.filter(Mt=>ee.includes(Mt.type.name));De.ensureMarks(Ce)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),kt=v.Node.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(z=>({tag:`h${z}`,attrs:{level:z}}))},renderHTML({node:z,HTMLAttributes:B}){return[`h${this.options.levels.includes(z.attrs.level)?z.attrs.level:this.options.levels[0]}`,(0,v.mergeAttributes)(this.options.HTMLAttributes,B),0]},addCommands(){return{setHeading:z=>({commands:B})=>!!this.options.levels.includes(z.level)&&B.setNode(this.name,z),toggleHeading:z=>({commands:B})=>!!this.options.levels.includes(z.level)&&B.toggleNode(this.name,"paragraph",z)}},addKeyboardShortcuts(){return this.options.levels.reduce((z,B)=>Oe(ie({},z),{[`Mod-Alt-${B}`]:()=>this.editor.commands.toggleHeading({level:B})}),{})},addInputRules(){return this.options.levels.map(z=>(0,v.textblockTypeInputRule)({find:new RegExp(`^(#{1,${z}})\\s$`),type:this.type,getAttributes:{level:z}}))}});var Yt=function(){};Yt.prototype.append=function(B){return B.length?(B=Yt.from(B),!this.length&&B||B.length<200&&this.leafAppend(B)||this.length<200&&B.leafPrepend(this)||this.appendInner(B)):this},Yt.prototype.prepend=function(B){return B.length?Yt.from(B).append(this):this},Yt.prototype.appendInner=function(B){return new Vt(this,B)},Yt.prototype.slice=function(B,ot){return void 0===B&&(B=0),void 0===ot&&(ot=this.length),B>=ot?Yt.empty:this.sliceInner(Math.max(0,B),Math.min(this.length,ot))},Yt.prototype.get=function(B){if(!(B<0||B>=this.length))return this.getInner(B)},Yt.prototype.forEach=function(B,ot,_t){void 0===ot&&(ot=0),void 0===_t&&(_t=this.length),ot<=_t?this.forEachInner(B,ot,_t,0):this.forEachInvertedInner(B,ot,_t,0)},Yt.prototype.map=function(B,ot,_t){void 0===ot&&(ot=0),void 0===_t&&(_t=this.length);var Tt=[];return this.forEach(function(Jt,Kt){return Tt.push(B(Jt,Kt))},ot,_t),Tt},Yt.from=function(B){return B instanceof Yt?B:B&&B.length?new le(B):Yt.empty};var le=function(z){function B(_t){z.call(this),this.values=_t}z&&(B.__proto__=z),(B.prototype=Object.create(z&&z.prototype)).constructor=B;var ot={length:{configurable:!0},depth:{configurable:!0}};return B.prototype.flatten=function(){return this.values},B.prototype.sliceInner=function(Tt,Jt){return 0==Tt&&Jt==this.length?this:new B(this.values.slice(Tt,Jt))},B.prototype.getInner=function(Tt){return this.values[Tt]},B.prototype.forEachInner=function(Tt,Jt,Kt,ee){for(var ue=Jt;ue<Kt;ue++)if(!1===Tt(this.values[ue],ee+ue))return!1},B.prototype.forEachInvertedInner=function(Tt,Jt,Kt,ee){for(var ue=Jt-1;ue>=Kt;ue--)if(!1===Tt(this.values[ue],ee+ue))return!1},B.prototype.leafAppend=function(Tt){if(this.length+Tt.length<=200)return new B(this.values.concat(Tt.flatten()))},B.prototype.leafPrepend=function(Tt){if(this.length+Tt.length<=200)return new B(Tt.flatten().concat(this.values))},ot.length.get=function(){return this.values.length},ot.depth.get=function(){return 0},Object.defineProperties(B.prototype,ot),B}(Yt);Yt.empty=new le([]);var Vt=function(z){function B(ot,_t){z.call(this),this.left=ot,this.right=_t,this.length=ot.length+_t.length,this.depth=Math.max(ot.depth,_t.depth)+1}return z&&(B.__proto__=z),(B.prototype=Object.create(z&&z.prototype)).constructor=B,B.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},B.prototype.getInner=function(_t){return _t<this.left.length?this.left.get(_t):this.right.get(_t-this.left.length)},B.prototype.forEachInner=function(_t,Tt,Jt,Kt){var ee=this.left.length;if(Tt<ee&&!1===this.left.forEachInner(_t,Tt,Math.min(Jt,ee),Kt)||Jt>ee&&!1===this.right.forEachInner(_t,Math.max(Tt-ee,0),Math.min(this.length,Jt)-ee,Kt+ee))return!1},B.prototype.forEachInvertedInner=function(_t,Tt,Jt,Kt){var ee=this.left.length;if(Tt>ee&&!1===this.right.forEachInvertedInner(_t,Tt-ee,Math.max(Jt,ee)-ee,Kt+ee)||Jt<ee&&!1===this.left.forEachInvertedInner(_t,Math.min(Tt,ee),Jt,Kt))return!1},B.prototype.sliceInner=function(_t,Tt){if(0==_t&&Tt==this.length)return this;var Jt=this.left.length;return Tt<=Jt?this.left.slice(_t,Tt):_t>=Jt?this.right.slice(_t-Jt,Tt-Jt):this.left.slice(_t,Jt).append(this.right.slice(0,Tt-Jt))},B.prototype.leafAppend=function(_t){var Tt=this.right.leafAppend(_t);if(Tt)return new B(this.left,Tt)},B.prototype.leafPrepend=function(_t){var Tt=this.left.leafPrepend(_t);if(Tt)return new B(Tt,this.right)},B.prototype.appendInner=function(_t){return this.left.depth>=Math.max(this.right.depth,_t.depth)+1?new B(this.left,new B(this.right,_t)):new B(this,_t)},B}(Yt);const xe=Yt;class ge{constructor(B,ot){this.items=B,this.eventCount=ot}popEvent(B,ot){if(0==this.eventCount)return null;let Tt,Jt,_t=this.items.length;for(;;_t--)if(this.items.get(_t-1).selection){--_t;break}ot&&(Tt=this.remapping(_t,this.items.length),Jt=Tt.maps.length);let ee,ue,Kt=B.tr,De=[],Me=[];return this.items.forEach((Ce,Mt)=>{if(!Ce.step)return Tt||(Tt=this.remapping(_t,Mt+1),Jt=Tt.maps.length),Jt--,void Me.push(Ce);if(Tt){Me.push(new Le(Ce.map));let Ht,Pt=Ce.step.map(Tt.slice(Jt));Pt&&Kt.maybeStep(Pt).doc&&(Ht=Kt.mapping.maps[Kt.mapping.maps.length-1],De.push(new Le(Ht,void 0,void 0,De.length+Me.length))),Jt--,Ht&&Tt.appendMap(Ht,Jt)}else Kt.maybeStep(Ce.step);return Ce.selection?(ee=Tt?Ce.selection.map(Tt.slice(Jt)):Ce.selection,ue=new ge(this.items.slice(0,_t).append(Me.reverse().concat(De)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:ue,transform:Kt,selection:ee}}addTransform(B,ot,_t,Tt){let Jt=[],Kt=this.eventCount,ee=this.items,ue=!Tt&&ee.length?ee.get(ee.length-1):null;for(let Me=0;Me<B.steps.length;Me++){let Pt,Ce=B.steps[Me].invert(B.docs[Me]),Mt=new Le(B.mapping.maps[Me],Ce,ot);(Pt=ue&&ue.merge(Mt))&&(Mt=Pt,Me?Jt.pop():ee=ee.slice(0,ee.length-1)),Jt.push(Mt),ot&&(Kt++,ot=void 0),Tt||(ue=Mt)}let De=Kt-_t.depth;return De>Ke&&(ee=function(z,B){let ot;return z.forEach((_t,Tt)=>{if(_t.selection&&0==B--)return ot=Tt,!1}),z.slice(ot)}(ee,De),Kt-=De),new ge(ee.append(Jt),Kt)}remapping(B,ot){let _t=new ut.vs;return this.items.forEach((Tt,Jt)=>{_t.appendMap(Tt.map,null!=Tt.mirrorOffset&&Jt-Tt.mirrorOffset>=B?_t.maps.length-Tt.mirrorOffset:void 0)},B,ot),_t}addMaps(B){return 0==this.eventCount?this:new ge(this.items.append(B.map(ot=>new Le(ot))),this.eventCount)}rebased(B,ot){if(!this.eventCount)return this;let _t=[],Tt=Math.max(0,this.items.length-ot),Jt=B.mapping,Kt=B.steps.length,ee=this.eventCount;this.items.forEach(Mt=>{Mt.selection&&ee--},Tt);let ue=ot;this.items.forEach(Mt=>{let Pt=Jt.getMirror(--ue);if(null==Pt)return;Kt=Math.min(Kt,Pt);let Ht=Jt.maps[Pt];if(Mt.step){let zt=B.steps[Pt].invert(B.docs[Pt]),Ut=Mt.selection&&Mt.selection.map(Jt.slice(ue+1,Pt));Ut&&ee++,_t.push(new Le(Ht,zt,Ut))}else _t.push(new Le(Ht))},Tt);let De=[];for(let Mt=ot;Mt<Kt;Mt++)De.push(new Le(Jt.maps[Mt]));let Me=this.items.slice(0,Tt).append(De).append(_t),Ce=new ge(Me,ee);return Ce.emptyItemCount()>500&&(Ce=Ce.compress(this.items.length-_t.length)),Ce}emptyItemCount(){let B=0;return this.items.forEach(ot=>{ot.step||B++}),B}compress(B=this.items.length){let ot=this.remapping(0,B),_t=ot.maps.length,Tt=[],Jt=0;return this.items.forEach((Kt,ee)=>{if(ee>=B)Tt.push(Kt),Kt.selection&&Jt++;else if(Kt.step){let ue=Kt.step.map(ot.slice(_t)),De=ue&&ue.getMap();if(_t--,De&&ot.appendMap(De,_t),ue){let Me=Kt.selection&&Kt.selection.map(ot.slice(_t));Me&&Jt++;let Mt,Ce=new Le(De.invert(),ue,Me),Pt=Tt.length-1;(Mt=Tt.length&&Tt[Pt].merge(Ce))?Tt[Pt]=Mt:Tt.push(Ce)}}else Kt.map&&_t--},this.items.length,0),new ge(xe.from(Tt.reverse()),Jt)}}ge.empty=new ge(xe.empty,0);class Le{constructor(B,ot,_t,Tt){this.map=B,this.step=ot,this.selection=_t,this.mirrorOffset=Tt}merge(B){if(this.step&&B.step&&!B.selection){let ot=B.step.merge(this.step);if(ot)return new Le(ot.getMap().invert(),ot,this.selection)}}}class Pe{constructor(B,ot,_t,Tt){this.done=B,this.undone=ot,this.prevRanges=_t,this.prevTime=Tt}}const Ke=20;function Fe(z){let B=[];return z.forEach((ot,_t,Tt,Jt)=>B.push(Tt,Jt)),B}function Ze(z,B){if(!z)return null;let ot=[];for(let _t=0;_t<z.length;_t+=2){let Tt=B.map(z[_t],1),Jt=B.map(z[_t+1],-1);Tt<=Jt&&ot.push(Tt,Jt)}return ot}function He(z,B,ot,_t){let Tt=$e(B),Jt=ze.get(B).spec.config,Kt=(_t?z.undone:z.done).popEvent(B,Tt);if(!Kt)return;let ee=Kt.selection.resolve(Kt.transform.doc),ue=(_t?z.done:z.undone).addTransform(Kt.transform,B.selection.getBookmark(),Jt,Tt),De=new Pe(_t?ue:Kt.remaining,_t?Kt.remaining:ue,null,0);ot(Kt.transform.setSelection(ee).setMeta(ze,{redo:_t,historyState:De}).scrollIntoView())}let Ne=!1,Ge=null;function $e(z){let B=z.plugins;if(Ge!=B){Ne=!1,Ge=B;for(let ot=0;ot<B.length;ot++)if(B[ot].spec.historyPreserveItems){Ne=!0;break}}return Ne}const ze=new lt.H$("history"),je=new lt.H$("closeHistory");function Ve(z={}){return new lt.Sy({key:ze,state:{init:()=>new Pe(ge.empty,ge.empty,null,0),apply:(B,ot,_t)=>function(z,B,ot,_t){let Jt,Tt=ot.getMeta(ze);if(Tt)return Tt.historyState;ot.getMeta(je)&&(z=new Pe(z.done,z.undone,null,0));let Kt=ot.getMeta("appendedTransaction");if(0==ot.steps.length)return z;if(Kt&&Kt.getMeta(ze))return Kt.getMeta(ze).redo?new Pe(z.done.addTransform(ot,void 0,_t,$e(B)),z.undone,Fe(ot.mapping.maps[ot.steps.length-1]),z.prevTime):new Pe(z.done,z.undone.addTransform(ot,void 0,_t,$e(B)),null,z.prevTime);if(!1===ot.getMeta("addToHistory")||Kt&&!1===Kt.getMeta("addToHistory"))return(Jt=ot.getMeta("rebased"))?new Pe(z.done.rebased(ot,Jt),z.undone.rebased(ot,Jt),Ze(z.prevRanges,ot.mapping),z.prevTime):new Pe(z.done.addMaps(ot.mapping.maps),z.undone.addMaps(ot.mapping.maps),Ze(z.prevRanges,ot.mapping),z.prevTime);{let ee=0==z.prevTime||!Kt&&(z.prevTime<(ot.time||0)-_t.newGroupDelay||!function(z,B){if(!B)return!1;if(!z.docChanged)return!0;let ot=!1;return z.mapping.maps[0].forEach((_t,Tt)=>{for(let Jt=0;Jt<B.length;Jt+=2)_t<=B[Jt+1]&&Tt>=B[Jt]&&(ot=!0)}),ot}(ot,z.prevRanges)),ue=Kt?Ze(z.prevRanges,ot.mapping):Fe(ot.mapping.maps[ot.steps.length-1]);return new Pe(z.done.addTransform(ot,ee?B.selection.getBookmark():void 0,_t,$e(B)),ge.empty,ue,ot.time)}}(ot,_t,B,z)},config:z={depth:z.depth||100,newGroupDelay:z.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(B,ot){let _t=ot.inputType,Tt="historyUndo"==_t?Ie:"historyRedo"==_t?fe:null;return!!Tt&&(ot.preventDefault(),Tt(B.state,B.dispatch))}}}})}const Ie=(z,B)=>{let ot=ze.getState(z);return!(!ot||0==ot.done.eventCount||(B&&He(ot,z,B,!1),0))},fe=(z,B)=>{let ot=ze.getState(z);return!(!ot||0==ot.undone.eventCount||(B&&He(ot,z,B,!0),0))},y=v.Extension.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:z,dispatch:B})=>Ie(z,B),redo:()=>({state:z,dispatch:B})=>fe(z,B)}),addProseMirrorPlugins(){return[Ve(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),S=v.Node.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:z}){return["hr",(0,v.mergeAttributes)(this.options.HTMLAttributes,z)]},addCommands(){return{setHorizontalRule:()=>({chain:z})=>z().insertContent({type:this.name}).command(({tr:B,dispatch:ot})=>{var _t;if(ot){const{$to:Tt}=B.selection,Jt=Tt.end();if(Tt.nodeAfter)B.setSelection(lt.Bs.create(B.doc,Tt.pos));else{const Kt=null===(_t=Tt.parent.type.contentMatch.defaultType)||void 0===_t?void 0:_t.create();Kt&&(B.insert(Jt,Kt),B.setSelection(lt.Bs.create(B.doc,Jt)))}B.scrollIntoView()}return!0}).run()}},addInputRules(){return[(0,v.nodeInputRule)({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),w=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,Z=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,F=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,Et=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,Bt=v.Mark.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:z=>"normal"!==z.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:z}){return["em",(0,v.mergeAttributes)(this.options.HTMLAttributes,z),0]},addCommands(){return{setItalic:()=>({commands:z})=>z.setMark(this.name),toggleItalic:()=>({commands:z})=>z.toggleMark(this.name),unsetItalic:()=>({commands:z})=>z.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,v.markInputRule)({find:w,type:this.type}),(0,v.markInputRule)({find:F,type:this.type})]},addPasteRules(){return[(0,v.markPasteRule)({find:Z,type:this.type}),(0,v.markPasteRule)({find:Et,type:this.type})]}}),N=v.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:z}){return["li",(0,v.mergeAttributes)(this.options.HTMLAttributes,z),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),a=/^(\d+)\.\s$/,d=v.Node.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:z=>z.hasAttribute("start")?parseInt(z.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:z}){const _t=z,{start:B}=_t,ot=jo(_t,["start"]);return 1===B?["ol",(0,v.mergeAttributes)(this.options.HTMLAttributes,ot),0]:["ol",(0,v.mergeAttributes)(this.options.HTMLAttributes,z),0]},addCommands(){return{toggleOrderedList:()=>({commands:z})=>z.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[(0,v.wrappingInputRule)({find:a,type:this.type,getAttributes:z=>({start:+z[1]}),joinPredicate:(z,B)=>B.childCount+B.attrs.start===+z[1]})]}}),C=v.Node.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:z}){return["p",(0,v.mergeAttributes)(this.options.HTMLAttributes,z),0]},addCommands(){return{setParagraph:()=>({commands:z})=>z.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),A=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,I=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,W=v.Mark.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:z=>!!z.includes("line-through")&&{}}],renderHTML({HTMLAttributes:z}){return["s",(0,v.mergeAttributes)(this.options.HTMLAttributes,z),0]},addCommands(){return{setStrike:()=>({commands:z})=>z.setMark(this.name),toggleStrike:()=>({commands:z})=>z.toggleMark(this.name),unsetStrike:()=>({commands:z})=>z.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,v.markInputRule)({find:A,type:this.type})]},addPasteRules(){return[(0,v.markPasteRule)({find:I,type:this.type})]}}),tt=v.Node.create({name:"text",group:"inline"}),Lt=v.Extension.create({name:"starterKit",addExtensions(){var z,B,ot,_t,Tt,Jt,Kt,ee,ue,De,Me,Ce,Mt,Pt,Ht,zt,Ut,ne,se,ae,ke,be,de,Ee,Te,Ae,Re,ye,Ue,Se,_e,we,Be,g,_,x;const M=[];return!1!==(null===(z=this.options)||void 0===z?void 0:z.blockquote)&&M.push(T.configure(null===(B=this.options)||void 0===B?void 0:B.blockquote)),!1!==(null===(ot=this.options)||void 0===ot?void 0:ot.bold)&&M.push(G.configure(null===(_t=this.options)||void 0===_t?void 0:_t.bold)),!1!==(null===(Tt=this.options)||void 0===Tt?void 0:Tt.bulletList)&&M.push(ft.configure(null===(Jt=this.options)||void 0===Jt?void 0:Jt.bulletList)),!1!==(null===(Kt=this.options)||void 0===Kt?void 0:Kt.code)&&M.push(mt.configure(null===(ee=this.options)||void 0===ee?void 0:ee.code)),!1!==(null===(ue=this.options)||void 0===ue?void 0:ue.codeBlock)&&M.push(xt.configure(null===(De=this.options)||void 0===De?void 0:De.codeBlock)),!1!==(null===(Me=this.options)||void 0===Me?void 0:Me.document)&&M.push(bt.configure(null===(Ce=this.options)||void 0===Ce?void 0:Ce.document)),!1!==(null===(Mt=this.options)||void 0===Mt?void 0:Mt.dropcursor)&&M.push(At.configure(null===(Pt=this.options)||void 0===Pt?void 0:Pt.dropcursor)),!1!==(null===(Ht=this.options)||void 0===Ht?void 0:Ht.gapcursor)&&M.push(Q.configure(null===(zt=this.options)||void 0===zt?void 0:zt.gapcursor)),!1!==(null===(Ut=this.options)||void 0===Ut?void 0:Ut.hardBreak)&&M.push(nt.configure(null===(ne=this.options)||void 0===ne?void 0:ne.hardBreak)),!1!==(null===(se=this.options)||void 0===se?void 0:se.heading)&&M.push(kt.configure(null===(ae=this.options)||void 0===ae?void 0:ae.heading)),!1!==(null===(ke=this.options)||void 0===ke?void 0:ke.history)&&M.push(y.configure(null===(be=this.options)||void 0===be?void 0:be.history)),!1!==(null===(de=this.options)||void 0===de?void 0:de.horizontalRule)&&M.push(S.configure(null===(Ee=this.options)||void 0===Ee?void 0:Ee.horizontalRule)),!1!==(null===(Te=this.options)||void 0===Te?void 0:Te.italic)&&M.push(Bt.configure(null===(Ae=this.options)||void 0===Ae?void 0:Ae.italic)),!1!==(null===(Re=this.options)||void 0===Re?void 0:Re.listItem)&&M.push(N.configure(null===(ye=this.options)||void 0===ye?void 0:ye.listItem)),!1!==(null===(Ue=this.options)||void 0===Ue?void 0:Ue.orderedList)&&M.push(d.configure(null===(Se=this.options)||void 0===Se?void 0:Se.orderedList)),!1!==(null===(_e=this.options)||void 0===_e?void 0:_e.paragraph)&&M.push(C.configure(null===(we=this.options)||void 0===we?void 0:we.paragraph)),!1!==(null===(Be=this.options)||void 0===Be?void 0:Be.strike)&&M.push(W.configure(null===(g=this.options)||void 0===g?void 0:g.strike)),!1!==(null===(_=this.options)||void 0===_?void 0:_.text)&&M.push(tt.configure(null===(x=this.options)||void 0===x?void 0:x.text)),M}})},51919:(qt,Dt,c)=>{c.r(Dt),c.d(Dt,{TableCellBackground:()=>l});const l=c(12867).Extension.create({addGlobalAttributes:()=>[{types:["tableCell","tableHeader"],attributes:{background:{default:null,renderHTML:({background:T})=>T?{style:`background: ${T}`}:null,parseHTML:({style:T})=>T.background,keepOnSplit:!1}}}],addCommands:()=>({setCellBackground:T=>({chain:b})=>b().updateAttributes("tableCell",{background:T}).updateAttributes("tableHeader",{background:T}).run(),unsetCellBackground:()=>({chain:T})=>T().updateAttributes("tableCell",{background:null}).updateAttributes("tableHeader",{background:null}).run()})})},86624:(qt,Dt,c)=>{c.r(Dt),c.d(Dt,{TuiTable:()=>Be});var R,G,v=c(12867),l=c(62463),T=c(77346),b=c(43594),h=c(70768),J=c(38480);if("undefined"!=typeof WeakMap){let g=new WeakMap;R=_=>g.get(_),G=(_,x)=>(g.set(_,x),x)}else{const g=[],_=10;let x=0;R=M=>{for(let L=0;L<g.length;L+=2)if(g[L]==M)return g[L+1]},G=(M,L)=>(x==_&&(x=0),g[x++]=M,g[x++]=L)}var Y=class{constructor(g,_,x,M){this.width=g,this.height=_,this.map=x,this.problems=M}findCell(g){for(let _=0;_<this.map.length;_++){const x=this.map[_];if(x!=g)continue;const M=_%this.width,L=_/this.width|0;let H=M+1,j=L+1;for(let ct=1;H<this.width&&this.map[_+ct]==x;ct++)H++;for(let ct=1;j<this.height&&this.map[_+this.width*ct]==x;ct++)j++;return{left:M,top:L,right:H,bottom:j}}throw new RangeError(`No cell with offset ${g} found`)}colCount(g){for(let _=0;_<this.map.length;_++)if(this.map[_]==g)return _%this.width;throw new RangeError(`No cell with offset ${g} found`)}nextCell(g,_,x){const{left:M,right:L,top:H,bottom:j}=this.findCell(g);return"horiz"==_?(x<0?0==M:L==this.width)?null:this.map[H*this.width+(x<0?M-1:L)]:(x<0?0==H:j==this.height)?null:this.map[M+this.width*(x<0?H-1:j)]}rectBetween(g,_){const{left:x,right:M,top:L,bottom:H}=this.findCell(g),{left:j,right:ct,top:X,bottom:at}=this.findCell(_);return{left:Math.min(x,j),top:Math.min(L,X),right:Math.max(M,ct),bottom:Math.max(H,at)}}cellsInRect(g){const _=[],x={};for(let M=g.top;M<g.bottom;M++)for(let L=g.left;L<g.right;L++){const H=M*this.width+L,j=this.map[H];x[j]||(x[j]=!0,!(L==g.left&&L&&this.map[H-1]==j||M==g.top&&M&&this.map[H-this.width]==j)&&_.push(j))}return _}positionAt(g,_,x){for(let M=0,L=0;;M++){const H=L+x.child(M).nodeSize;if(M==g){let j=_+g*this.width;const ct=(g+1)*this.width;for(;j<ct&&this.map[j]<L;)j++;return j==ct?H-1:this.map[j]}L=H}}static get(g){return R(g)||G(g,function(g){if("table"!=g.type.spec.tableRole)throw new RangeError("Not a table node: "+g.type.name);const _=function(g){let _=-1,x=!1;for(let M=0;M<g.childCount;M++){const L=g.child(M);let H=0;if(x)for(let j=0;j<M;j++){const ct=g.child(j);for(let X=0;X<ct.childCount;X++){const at=ct.child(X);j+at.attrs.rowspan>M&&(H+=at.attrs.colspan)}}for(let j=0;j<L.childCount;j++){const ct=L.child(j);H+=ct.attrs.colspan,ct.attrs.rowspan>1&&(x=!0)}-1==_?_=H:_!=H&&(_=Math.max(_,H))}return _}(g),x=g.childCount,M=[];let L=0,H=null;const j=[];for(let at=0,It=_*x;at<It;at++)M[at]=0;for(let at=0,It=0;at<x;at++){const wt=g.child(at);It++;for(let re=0;;re++){for(;L<M.length&&0!=M[L];)L++;if(re==wt.childCount)break;const ce=wt.child(re),{colspan:he,rowspan:rn,colwidth:On}=ce.attrs;for(let pn=0;pn<rn;pn++){if(pn+at>=x){(H||(H=[])).push({type:"overlong_rowspan",pos:It,n:rn-pn});break}const vn=L+pn*_;for(let sn=0;sn<he;sn++){0==M[vn+sn]?M[vn+sn]=It:(H||(H=[])).push({type:"collision",row:at,pos:It,n:he-sn});const Tn=On&&On[sn];if(Tn){const mn=(vn+sn)%_*2,an=j[mn];null==an||an!=Tn&&1==j[mn+1]?(j[mn]=Tn,j[mn+1]=1):an==Tn&&j[mn+1]++}}}L+=he,It+=ce.nodeSize}const Zt=(at+1)*_;let te=0;for(;L<Zt;)0==M[L++]&&te++;te&&(H||(H=[])).push({type:"missing",row:at,n:te}),It++}const ct=new Y(_,x,M,H);let X=!1;for(let at=0;!X&&at<j.length;at+=2)null!=j[at]&&j[at+1]<x&&(X=!0);return X&&function(g,_,x){g.problems||(g.problems=[]);const M={};for(let L=0;L<g.map.length;L++){const H=g.map[L];if(M[H])continue;M[H]=!0;const j=x.nodeAt(H);if(!j)throw new RangeError(`No cell with offset ${H} found`);let ct=null;const X=j.attrs;for(let at=0;at<X.colspan;at++){const wt=_[(L+at)%g.width*2];null!=wt&&(!X.colwidth||X.colwidth[at]!=wt)&&((ct||(ct=mt(X)))[at]=wt)}ct&&g.problems.unshift({type:"colwidth mismatch",pos:H,colwidth:ct})}}(ct,j,g),ct}(g))}};function mt(g){if(g.colwidth)return g.colwidth.slice();const _=[];for(let x=0;x<g.colspan;x++)_.push(0);return _}function xt(g){let _=g.cached.tableNodeTypes;if(!_){_=g.cached.tableNodeTypes={};for(const x in g.nodes){const M=g.nodes[x],L=M.spec.tableRole;L&&(_[L]=M)}}return _}var bt=new l.H$("selectingCells");function ut(g){for(let _=g.depth-1;_>0;_--)if("row"==g.node(_).type.spec.tableRole)return g.node(0).resolve(g.before(_+1));return null}function K(g){const _=g.selection.$head;for(let x=_.depth;x>0;x--)if("row"==_.node(x).type.spec.tableRole)return!0;return!1}function At(g){const _=g.selection;if("$anchorCell"in _&&_.$anchorCell)return _.$anchorCell.pos>_.$headCell.pos?_.$anchorCell:_.$headCell;if("node"in _&&_.node&&"cell"==_.node.type.spec.tableRole)return _.$anchor;const x=ut(_.$head)||function(g){for(let _=g.nodeAfter,x=g.pos;_;_=_.firstChild,x++){const M=_.type.spec.tableRole;if("cell"==M||"header_cell"==M)return g.doc.resolve(x)}for(let _=g.nodeBefore,x=g.pos;_;_=_.lastChild,x--){const M=_.type.spec.tableRole;if("cell"==M||"header_cell"==M)return g.doc.resolve(x-_.nodeSize)}}(_.$head);if(x)return x;throw new RangeError(`No cell found around position ${_.head}`)}function St(g){return"row"==g.parent.type.spec.tableRole&&!!g.nodeAfter}function gt(g,_){return g.depth==_.depth&&g.pos>=_.start(-1)&&g.pos<=_.end(-1)}function Gt(g,_,x){const M=g.node(-1),L=Y.get(M),H=g.start(-1),j=L.nextCell(g.pos-H,_,x);return null==j?null:g.node(0).resolve(H+j)}function ht(g,_,x=1){const M=Oe(ie({},g),{colspan:g.colspan-x});return M.colwidth&&(M.colwidth=M.colwidth.slice(),M.colwidth.splice(_,x),M.colwidth.some(L=>L>0)||(M.colwidth=null)),M}function k(g,_,x=1){const M=Oe(ie({},g),{colspan:g.colspan+x});if(M.colwidth){M.colwidth=M.colwidth.slice();for(let L=0;L<x;L++)M.colwidth.splice(_,0,0)}return M}var st=class extends l.Y1{constructor(g,_=g){const x=g.node(-1),M=Y.get(x),L=g.start(-1),H=M.rectBetween(g.pos-L,_.pos-L),j=g.node(0),ct=M.cellsInRect(H).filter(at=>at!=_.pos-L);ct.unshift(_.pos-L);const X=ct.map(at=>{const It=x.nodeAt(at);if(!It)throw RangeError(`No cell with offset ${at} found`);const wt=L+at+1;return new l.xm(j.resolve(wt),j.resolve(wt+It.content.size))});super(X[0].$from,X[0].$to,X),this.$anchorCell=g,this.$headCell=_}map(g,_){const x=g.resolve(_.map(this.$anchorCell.pos)),M=g.resolve(_.map(this.$headCell.pos));if(St(x)&&St(M)&&gt(x,M)){const L=this.$anchorCell.node(-1)!=x.node(-1);return L&&this.isRowSelection()?st.rowSelection(x,M):L&&this.isColSelection()?st.colSelection(x,M):new st(x,M)}return l.Bs.between(x,M)}content(){const g=this.$anchorCell.node(-1),_=Y.get(g),x=this.$anchorCell.start(-1),M=_.rectBetween(this.$anchorCell.pos-x,this.$headCell.pos-x),L={},H=[];for(let ct=M.top;ct<M.bottom;ct++){const X=[];for(let at=ct*_.width+M.left,It=M.left;It<M.right;It++,at++){const wt=_.map[at];if(L[wt])continue;L[wt]=!0;const Zt=_.findCell(wt);let te=g.nodeAt(wt);if(!te)throw RangeError(`No cell with offset ${wt} found`);const re=M.left-Zt.left,ce=Zt.right-M.right;if(re>0||ce>0){let he=te.attrs;if(re>0&&(he=ht(he,0,re)),ce>0&&(he=ht(he,he.colspan-ce,ce)),Zt.left<M.left){if(te=te.type.createAndFill(he),!te)throw RangeError(`Could not create cell with attrs ${JSON.stringify(he)}`)}else te=te.type.create(he,te.content)}if(Zt.top<M.top||Zt.bottom>M.bottom){const he=Oe(ie({},te.attrs),{rowspan:Math.min(Zt.bottom,M.bottom)-Math.max(Zt.top,M.top)});te=Zt.top<M.top?te.type.createAndFill(he):te.type.create(he,te.content)}X.push(te)}H.push(g.child(ct).copy(T.HY.from(X)))}const j=this.isColSelection()&&this.isRowSelection()?g:H;return new T.p2(T.HY.from(j),1,1)}replace(g,_=T.p2.empty){const x=g.steps.length,M=this.ranges;for(let H=0;H<M.length;H++){const{$from:j,$to:ct}=M[H],X=g.mapping.slice(x);g.replace(X.map(j.pos),X.map(ct.pos),H?T.p2.empty:_)}const L=l.Y1.findFrom(g.doc.resolve(g.mapping.slice(x).map(this.to)),-1);L&&g.setSelection(L)}replaceWith(g,_){this.replace(g,new T.p2(T.HY.from(_),0,0))}forEachCell(g){const _=this.$anchorCell.node(-1),x=Y.get(_),M=this.$anchorCell.start(-1),L=x.cellsInRect(x.rectBetween(this.$anchorCell.pos-M,this.$headCell.pos-M));for(let H=0;H<L.length;H++)g(_.nodeAt(L[H]),M+L[H])}isColSelection(){const g=this.$anchorCell.index(-1),_=this.$headCell.index(-1);return!(Math.min(g,_)>0)&&Math.max(g+this.$anchorCell.nodeAfter.attrs.rowspan,_+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(g,_=g){const x=g.node(-1),M=Y.get(x),L=g.start(-1),H=M.findCell(g.pos-L),j=M.findCell(_.pos-L),ct=g.node(0);return H.top<=j.top?(H.top>0&&(g=ct.resolve(L+M.map[H.left])),j.bottom<M.height&&(_=ct.resolve(L+M.map[M.width*(M.height-1)+j.right-1]))):(j.top>0&&(_=ct.resolve(L+M.map[j.left])),H.bottom<M.height&&(g=ct.resolve(L+M.map[M.width*(M.height-1)+H.right-1]))),new st(g,_)}isRowSelection(){const g=this.$anchorCell.node(-1),_=Y.get(g),x=this.$anchorCell.start(-1),M=_.colCount(this.$anchorCell.pos-x),L=_.colCount(this.$headCell.pos-x);return!(Math.min(M,L)>0)&&Math.max(M+this.$anchorCell.nodeAfter.attrs.colspan,L+this.$headCell.nodeAfter.attrs.colspan)==_.width}eq(g){return g instanceof st&&g.$anchorCell.pos==this.$anchorCell.pos&&g.$headCell.pos==this.$headCell.pos}static rowSelection(g,_=g){const x=g.node(-1),M=Y.get(x),L=g.start(-1),H=M.findCell(g.pos-L),j=M.findCell(_.pos-L),ct=g.node(0);return H.left<=j.left?(H.left>0&&(g=ct.resolve(L+M.map[H.top*M.width])),j.right<M.width&&(_=ct.resolve(L+M.map[M.width*(j.top+1)-1]))):(j.left>0&&(_=ct.resolve(L+M.map[j.top*M.width])),H.right<M.width&&(g=ct.resolve(L+M.map[M.width*(H.top+1)-1]))),new st(g,_)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(g,_){return new st(g.resolve(_.anchor),g.resolve(_.head))}static create(g,_,x=_){return new st(g.resolve(_),g.resolve(x))}getBookmark(){return new it(this.$anchorCell.pos,this.$headCell.pos)}};st.prototype.visible=!1,l.Y1.jsonID("cell",st);var it=class{constructor(g,_){this.anchor=g,this.head=_}map(g){return new it(g.map(this.anchor),g.map(this.head))}resolve(g){const _=g.resolve(this.anchor),x=g.resolve(this.head);return"row"==_.parent.type.spec.tableRole&&"row"==x.parent.type.spec.tableRole&&_.index()<_.parent.childCount&&x.index()<x.parent.childCount&&gt(_,x)?new st(_,x):l.Y1.near(x,1)}};function U(g){if(!(g.selection instanceof st))return null;const _=[];return g.selection.forEachCell((x,M)=>{_.push(b.p.node(M,M+x.nodeSize,{class:"selectedCell"}))}),b.EH.create(g.doc,_)}var jt=new l.H$("fix-tables");function Yt(g,_,x,M){const L=g.childCount,H=_.childCount;t:for(let j=0,ct=0;j<H;j++){const X=_.child(j);for(let at=ct,It=Math.min(L,j+3);at<It;at++)if(g.child(at)==X){ct=at+1,x+=X.nodeSize;continue t}M(X,x),ct<L&&g.child(ct).sameMarkup(X)?Yt(g.child(ct),X,x+1,M):X.nodesBetween(0,X.content.size,M,x+1),x+=X.nodeSize}}function le(g,_){let x;const M=(L,H)=>{"table"==L.type.spec.tableRole&&(x=function(g,_,x,M){const L=Y.get(_);if(!L.problems)return M;M||(M=g.tr);const H=[];for(let X=0;X<L.height;X++)H.push(0);for(let X=0;X<L.problems.length;X++){const at=L.problems[X];if("collision"==at.type){const It=_.nodeAt(at.pos);if(!It)continue;const wt=It.attrs;for(let Zt=0;Zt<wt.rowspan;Zt++)H[at.row+Zt]+=at.n;M.setNodeMarkup(M.mapping.map(x+1+at.pos),null,ht(wt,wt.colspan-at.n,at.n))}else if("missing"==at.type)H[at.row]+=at.n;else if("overlong_rowspan"==at.type){const It=_.nodeAt(at.pos);if(!It)continue;M.setNodeMarkup(M.mapping.map(x+1+at.pos),null,Oe(ie({},It.attrs),{rowspan:It.attrs.rowspan-at.n}))}else if("colwidth mismatch"==at.type){const It=_.nodeAt(at.pos);if(!It)continue;M.setNodeMarkup(M.mapping.map(x+1+at.pos),null,Oe(ie({},It.attrs),{colwidth:at.colwidth}))}}let j,ct;for(let X=0;X<H.length;X++)H[X]&&(null==j&&(j=X),ct=X);for(let X=0,at=x+1;X<L.height;X++){const It=_.child(X),wt=at+It.nodeSize,Zt=H[X];if(Zt>0){let te="cell";It.firstChild&&(te=It.firstChild.type.spec.tableRole);const re=[];for(let he=0;he<Zt;he++){const rn=xt(g.schema)[te].createAndFill();rn&&re.push(rn)}M.insert(M.mapping.map(0!=X&&j!=X-1||ct!=X?wt-1:at+1),re)}at=wt}return M.setMeta(jt,{fixTables:!0})}(g,L,H,x))};return _?_.doc!=g.doc&&Yt(_.doc,g.doc,0,M):g.doc.descendants(M),x}function We(g,_){const x=g.createAndFill();return new J.wx(x).replace(0,x.content.size,_).doc}function Le(g,_,x,M,L,H,j,ct){if(0==j||j==_.height)return!1;let X=!1;for(let at=L;at<H;at++){const It=j*_.width+at,wt=_.map[It];if(_.map[It-_.width]==wt){X=!0;const Zt=x.nodeAt(wt),{top:te,left:re}=_.findCell(wt);g.setNodeMarkup(g.mapping.slice(ct).map(wt+M),null,Oe(ie({},Zt.attrs),{rowspan:j-te})),g.insert(g.mapping.slice(ct).map(_.positionAt(j,re,x)),Zt.type.createAndFill(Oe(ie({},Zt.attrs),{rowspan:te+Zt.attrs.rowspan-j}))),at+=Zt.attrs.colspan-1}}return X}function Pe(g,_,x,M,L,H,j,ct){if(0==j||j==_.width)return!1;let X=!1;for(let at=L;at<H;at++){const It=at*_.width+j,wt=_.map[It];if(_.map[It-1]==wt){X=!0;const Zt=x.nodeAt(wt),te=_.colCount(wt),re=g.mapping.slice(ct).map(wt+M);g.setNodeMarkup(re,null,ht(Zt.attrs,j-te,Zt.attrs.colspan-(j-te))),g.insert(re+Zt.nodeSize,Zt.type.createAndFill(ht(Zt.attrs,0,j-te))),at+=Zt.attrs.rowspan-1}}return X}function Ke(g,_,x,M,L){let H=x?g.doc.nodeAt(x-1):g.doc;if(!H)throw new Error("No table found");let j=Y.get(H);const{top:ct,left:X}=M,at=X+L.width,It=ct+L.height,wt=g.tr;let Zt=0;function te(){if(H=x?wt.doc.nodeAt(x-1):wt.doc,!H)throw new Error("No table found");j=Y.get(H),Zt=wt.mapping.maps.length}(function(g,_,x,M,L,H,j){const X=xt(g.doc.type.schema);let at,It;if(L>_.width)for(let wt=0,Zt=0;wt<_.height;wt++){const te=x.child(wt);Zt+=te.nodeSize;const re=[];let ce;ce=null==te.lastChild||te.lastChild.type==X.cell?at||(at=X.cell.createAndFill()):It||(It=X.header_cell.createAndFill());for(let he=_.width;he<L;he++)re.push(ce);g.insert(g.mapping.slice(j).map(Zt-1+M),re)}if(H>_.height){const wt=[];for(let re=0,ce=(_.height-1)*_.width;re<Math.max(_.width,L);re++){const he=!(re>=_.width)&&x.nodeAt(_.map[ce+re]).type==X.header_cell;wt.push(he?It||(It=X.header_cell.createAndFill()):at||(at=X.cell.createAndFill()))}const Zt=X.row.create(null,T.HY.from(wt)),te=[];for(let re=_.height;re<H;re++)te.push(Zt);g.insert(g.mapping.slice(j).map(M+x.nodeSize-2),te)}return!(!at&&!It)})(wt,j,H,x,at,It,Zt)&&te(),Le(wt,j,H,x,X,at,ct,Zt)&&te(),Le(wt,j,H,x,X,at,It,Zt)&&te(),Pe(wt,j,H,x,ct,It,X,Zt)&&te(),Pe(wt,j,H,x,ct,It,at,Zt)&&te();for(let re=ct;re<It;re++){const ce=j.positionAt(re,X,H),he=j.positionAt(re,at,H);wt.replace(wt.mapping.slice(Zt).map(ce+x),wt.mapping.slice(Zt).map(he+x),new T.p2(L.rows[re-ct],0,0))}te(),wt.setSelection(new st(wt.doc.resolve(x+j.positionAt(ct,X,H)),wt.doc.resolve(x+j.positionAt(It-1,at-1,H)))),_(wt)}var Ye=(0,h.$)({ArrowLeft:Fe("horiz",-1),ArrowRight:Fe("horiz",1),ArrowUp:Fe("vert",-1),ArrowDown:Fe("vert",1),"Shift-ArrowLeft":Ze("horiz",-1),"Shift-ArrowRight":Ze("horiz",1),"Shift-ArrowUp":Ze("vert",-1),"Shift-ArrowDown":Ze("vert",1),Backspace:He,"Mod-Backspace":He,Delete:He,"Mod-Delete":He});function Je(g,_,x){return!x.eq(g.selection)&&(_&&_(g.tr.setSelection(x).scrollIntoView()),!0)}function Fe(g,_){return(x,M,L)=>{if(!L)return!1;const H=x.selection;if(H instanceof st)return Je(x,M,l.Y1.near(H.$headCell,_));if("horiz"!=g&&!H.empty)return!1;const j=tn(L,g,_);if(null==j)return!1;if("horiz"==g)return Je(x,M,l.Y1.near(x.doc.resolve(H.head+_),_));{const ct=x.doc.resolve(j),X=Gt(ct,g,_);let at;return at=X?l.Y1.near(X,1):_<0?l.Y1.near(x.doc.resolve(ct.before(-1)),-1):l.Y1.near(x.doc.resolve(ct.after(-1)),1),Je(x,M,at)}}}function Ze(g,_){return(x,M,L)=>{if(!L)return!1;const H=x.selection;let j;if(H instanceof st)j=H;else{const X=tn(L,g,_);if(null==X)return!1;j=new st(x.doc.resolve(X))}const ct=Gt(j.$headCell,g,_);return!!ct&&Je(x,M,new st(j.$anchorCell,ct))}}function He(g,_){const x=g.selection;if(!(x instanceof st))return!1;if(_){const M=g.tr,L=xt(g.schema).cell.createAndFill().content;x.forEachCell((H,j)=>{H.content.eq(L)||M.replace(M.mapping.map(j+1),M.mapping.map(j+H.nodeSize-1),new T.p2(L,0,0))}),M.docChanged&&_(M)}return!0}function Ne(g,_){const M=ut(g.state.doc.resolve(_));return!!M&&(g.dispatch(g.state.tr.setSelection(new st(M))),!0)}function Ge(g,_,x){if(!K(g.state))return!1;let M=function(g){if(!g.size)return null;let{content:_,openStart:x,openEnd:M}=g;for(;1==_.childCount&&(x>0&&M>0||"table"==_.child(0).type.spec.tableRole);)x--,M--,_=_.child(0).content;const L=_.child(0),H=L.type.spec.tableRole,j=L.type.schema,ct=[];if("row"==H)for(let X=0;X<_.childCount;X++){let at=_.child(X).content;const It=X?0:Math.max(0,x-1),wt=X<_.childCount-1?0:Math.max(0,M-1);(It||wt)&&(at=We(xt(j).row,new T.p2(at,It,wt)).content),ct.push(at)}else{if("cell"!=H&&"header_cell"!=H)return null;ct.push(x||M?We(xt(j).row,new T.p2(_,x,M)).content:_)}return function(g,_){const x=[];for(let L=0;L<_.length;L++){const H=_[L];for(let j=H.childCount-1;j>=0;j--){const{rowspan:ct,colspan:X}=H.child(j).attrs;for(let at=L;at<L+ct;at++)x[at]=(x[at]||0)+X}}let M=0;for(let L=0;L<x.length;L++)M=Math.max(M,x[L]);for(let L=0;L<x.length;L++)if(L>=_.length&&_.push(T.HY.empty),x[L]<M){const H=xt(g).cell.createAndFill(),j=[];for(let ct=x[L];ct<M;ct++)j.push(H);_[L]=_[L].append(T.HY.from(j))}return{height:_.length,width:M,rows:_}}(j,ct)}(x);const L=g.state.selection;if(L instanceof st){M||(M={width:1,height:1,rows:[T.HY.from(We(xt(g.state.schema).cell,x))]});const H=L.$anchorCell.node(-1),j=L.$anchorCell.start(-1),ct=Y.get(H).rectBetween(L.$anchorCell.pos-j,L.$headCell.pos-j);return M=function({width:g,height:_,rows:x},M,L){if(g!=M){const H=[],j=[];for(let ct=0;ct<x.length;ct++){const X=x[ct],at=[];for(let It=H[ct]||0,wt=0;It<M;wt++){let Zt=X.child(wt%X.childCount);It+Zt.attrs.colspan>M&&(Zt=Zt.type.createChecked(ht(Zt.attrs,Zt.attrs.colspan,It+Zt.attrs.colspan-M),Zt.content)),at.push(Zt),It+=Zt.attrs.colspan;for(let te=1;te<Zt.attrs.rowspan;te++)H[ct+te]=(H[ct+te]||0)+Zt.attrs.colspan}j.push(T.HY.from(at))}x=j,g=M}if(_!=L){const H=[];for(let j=0,ct=0;j<L;j++,ct++){const X=[],at=x[ct%_];for(let It=0;It<at.childCount;It++){let wt=at.child(It);j+wt.attrs.rowspan>L&&(wt=wt.type.create(Oe(ie({},wt.attrs),{rowspan:Math.max(1,L-wt.attrs.rowspan)}),wt.content)),X.push(wt)}H.push(T.HY.from(X))}x=H,_=L}return{width:g,height:_,rows:x}}(M,ct.right-ct.left,ct.bottom-ct.top),Ke(g.state,g.dispatch,j,ct,M),!0}if(M){const H=At(g.state),j=H.start(-1);return Ke(g.state,g.dispatch,j,Y.get(H.node(-1)).findCell(H.pos-j),M),!0}return!1}function $e(g,_){var x;if(_.ctrlKey||_.metaKey)return;const M=ze(g,_.target);let L;if(_.shiftKey&&g.state.selection instanceof st)H(g.state.selection.$anchorCell,_),_.preventDefault();else if(_.shiftKey&&M&&null!=(L=ut(g.state.selection.$anchor))&&(null==(x=je(g,_))?void 0:x.pos)!=L.pos)H(L,_),_.preventDefault();else if(!M)return;function H(X,at){let It=je(g,at);const wt=null==bt.getState(g.state);if(!It||!gt(X,It)){if(!wt)return;It=X}const Zt=new st(X,It);if(wt||!g.state.selection.eq(Zt)){const te=g.state.tr.setSelection(Zt);wt&&te.setMeta(bt,X.pos),g.dispatch(te)}}function j(){g.root.removeEventListener("mouseup",j),g.root.removeEventListener("dragstart",j),g.root.removeEventListener("mousemove",ct),null!=bt.getState(g.state)&&g.dispatch(g.state.tr.setMeta(bt,-1))}function ct(X){const at=X,It=bt.getState(g.state);let wt;if(null!=It)wt=g.state.doc.resolve(It);else if(ze(g,at.target)!=M&&(wt=je(g,_),!wt))return j();wt&&H(wt,at)}g.root.addEventListener("mouseup",j),g.root.addEventListener("dragstart",j),g.root.addEventListener("mousemove",ct)}function tn(g,_,x){if(!(g.state.selection instanceof l.Bs))return null;const{$head:M}=g.state.selection;for(let L=M.depth-1;L>=0;L--){const H=M.node(L);if((x<0?M.index(L):M.indexAfter(L))!=(x<0?0:H.childCount))return null;if("cell"==H.type.spec.tableRole||"header_cell"==H.type.spec.tableRole){const ct=M.before(L);return g.endOfTextblock("vert"==_?x>0?"down":"up":x>0?"right":"left")?ct:null}}return null}function ze(g,_){for(;_&&_!=g.dom;_=_.parentNode)if("TD"==_.nodeName||"TH"==_.nodeName)return _;return null}function je(g,_){const x=g.posAtCoords({left:_.clientX,top:_.clientY});return x&&x?ut(g.state.doc.resolve(x.pos)):null}var Ve=class{constructor(g,_){this.node=g,this.cellMinWidth=_,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Ie(g,this.colgroup,this.table,_),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(g){return g.type==this.node.type&&(this.node=g,Ie(g,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(g){return"attributes"==g.type&&(g.target==this.table||this.colgroup.contains(g.target))}};function Ie(g,_,x,M,L,H){var j;let ct=0,X=!0,at=_.firstChild;const It=g.firstChild;if(It){for(let wt=0,Zt=0;wt<It.childCount;wt++){const{colspan:te,colwidth:re}=It.child(wt).attrs;for(let ce=0;ce<te;ce++,Zt++){const he=L==Zt?H:re&&re[ce],rn=he?he+"px":"";ct+=he||M,he||(X=!1),at?(at.style.width!=rn&&(at.style.width=rn),at=at.nextSibling):_.appendChild(document.createElement("col")).style.width=rn}}for(;at;){const wt=at.nextSibling;null==(j=at.parentNode)||j.removeChild(at),at=wt}X?(x.style.width=ct+"px",x.style.minWidth=""):(x.style.width="",x.style.minWidth=ct+"px")}}var fe=new l.H$("tableColumnResizing");function vt({handleWidth:g=5,cellMinWidth:_=25,View:x=Ve,lastColumnResizable:M=!0}={}){const L=new l.Sy({key:fe,state:{init:(H,j)=>(L.spec.props.nodeViews[xt(j.schema).table.name]=(ct,X)=>new x(ct,_,X),new D(-1,!1)),apply:(H,j)=>j.apply(H)},props:{attributes:H=>{const j=fe.getState(H);return j&&j.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(H,j)=>{!function(g,_,x,M,L){const H=fe.getState(g.state);if(H&&!H.dragging){const j=function(g){for(;g&&"TD"!=g.nodeName&&"TH"!=g.nodeName;)g=g.classList&&g.classList.contains("ProseMirror")?null:g.parentNode;return g}(_.target);let ct=-1;if(j){const{left:X,right:at}=j.getBoundingClientRect();_.clientX-X<=x?ct=Et(g,_,"left"):at-_.clientX<=x&&(ct=Et(g,_,"right"))}if(ct!=H.activeHandle){if(!L&&-1!==ct){const X=g.state.doc.resolve(ct),at=X.node(-1),It=Y.get(at),wt=X.start(-1);if(It.colCount(X.pos-wt)+X.nodeAfter.attrs.colspan-1==It.width-1)return}N(g,ct)}}}(H,j,g,0,M)},mouseleave:H=>{!function(g){const _=fe.getState(g.state);_&&_.activeHandle>-1&&!_.dragging&&N(g,-1)}(H)},mousedown:(H,j)=>{!function(g,_,x){const M=fe.getState(g.state);if(!M||-1==M.activeHandle||M.dragging)return!1;const L=g.state.doc.nodeAt(M.activeHandle),H=function(g,_,{colspan:x,colwidth:M}){const L=M&&M[M.length-1];if(L)return L;const H=g.domAtPos(_);let ct=H.node.childNodes[H.offset].offsetWidth,X=x;if(M)for(let at=0;at<x;at++)M[at]&&(ct-=M[at],X--);return ct/X}(g,M.activeHandle,L.attrs);function j(X){window.removeEventListener("mouseup",j),window.removeEventListener("mousemove",ct);const at=fe.getState(g.state);(null==at?void 0:at.dragging)&&(function(g,_,x){const M=g.state.doc.resolve(_),L=M.node(-1),H=Y.get(L),j=M.start(-1),ct=H.colCount(M.pos-j)+M.nodeAfter.attrs.colspan-1,X=g.state.tr;for(let at=0;at<H.height;at++){const It=at*H.width+ct;if(at&&H.map[It]==H.map[It-H.width])continue;const wt=H.map[It],Zt=L.nodeAt(wt).attrs,te=1==Zt.colspan?0:ct-H.colCount(wt);if(Zt.colwidth&&Zt.colwidth[te]==x)continue;const re=Zt.colwidth?Zt.colwidth.slice():C(Zt.colspan);re[te]=x,X.setNodeMarkup(j+wt,null,Oe(ie({},Zt),{colwidth:re}))}X.docChanged&&g.dispatch(X)}(g,at.activeHandle,Bt(at.dragging,X,x)),g.dispatch(g.state.tr.setMeta(fe,{setDragging:null})))}function ct(X){if(!X.which)return j(X);const at=fe.getState(g.state);if(at&&at.dragging){const It=Bt(at.dragging,X,x);!function(g,_,x,M){const L=g.state.doc.resolve(_),H=L.node(-1),j=L.start(-1),ct=Y.get(H).colCount(L.pos-j)+L.nodeAfter.attrs.colspan-1;let X=g.domAtPos(L.start(-1)).node;for(;X&&"TABLE"!=X.nodeName;)X=X.parentNode;!X||Ie(H,X.firstChild,X,M,ct,x)}(g,at.activeHandle,It,x)}}g.dispatch(g.state.tr.setMeta(fe,{setDragging:{startX:_.clientX,startWidth:H}})),window.addEventListener("mouseup",j),window.addEventListener("mousemove",ct),_.preventDefault()}(H,j,_)}},decorations:H=>{const j=fe.getState(H);if(j&&j.activeHandle>-1)return function(g,_){const x=[],M=g.doc.resolve(_),L=M.node(-1);if(!L)return b.EH.empty;const H=Y.get(L),j=M.start(-1),ct=H.colCount(M.pos-j)+M.nodeAfter.attrs.colspan;for(let X=0;X<H.height;X++){const at=ct+X*H.width-1;if(!(ct!=H.width&&H.map[at]==H.map[at+1]||0!=X&&H.map[at-1]==H.map[at-1-H.width])){const It=H.map[at],wt=j+It+L.nodeAt(It).nodeSize-1,Zt=document.createElement("div");Zt.className="column-resize-handle",x.push(b.p.widget(wt,Zt))}}return b.EH.create(g.doc,x)}(H,j.activeHandle)},nodeViews:{}}});return L}var D=class{constructor(g,_){this.activeHandle=g,this.dragging=_}apply(g){const _=this,x=g.getMeta(fe);if(x&&null!=x.setHandle)return new D(x.setHandle,!1);if(x&&void 0!==x.setDragging)return new D(_.activeHandle,x.setDragging);if(_.activeHandle>-1&&g.docChanged){let M=g.mapping.map(_.activeHandle,-1);return St(g.doc.resolve(M))||(M=-1),new D(M,_.dragging)}return _}};function Et(g,_,x){const M=g.posAtCoords({left:_.clientX,top:_.clientY});if(!M)return-1;const{pos:L}=M,H=ut(g.state.doc.resolve(L));if(!H)return-1;if("right"==x)return H.pos;const j=Y.get(H.node(-1)),ct=H.start(-1),X=j.map.indexOf(H.pos-ct);return X%j.width==0?-1:ct+j.map[X-1]}function Bt(g,_,x){return Math.max(x,g.startWidth+(_.clientX-g.startX))}function N(g,_){g.dispatch(g.state.tr.setMeta(fe,{setHandle:_}))}function C(g){return Array(g).fill(0)}function I(g){const _=g.selection,x=At(g),M=x.node(-1),L=x.start(-1),H=Y.get(M),j=_ instanceof st?H.rectBetween(_.$anchorCell.pos-L,_.$headCell.pos-L):H.findCell(x.pos-L);return Oe(ie({},j),{tableStart:L,map:H,table:M})}function W(g,{map:_,tableStart:x,table:M},L){let H=L>0?-1:0;(function(g,_,x){const M=xt(_.type.schema).header_cell;for(let L=0;L<g.height;L++)if(_.nodeAt(g.map[x+L*g.width]).type!=M)return!1;return!0})(_,M,L+H)&&(H=0==L||L==_.width?null:0);for(let j=0;j<_.height;j++){const ct=j*_.width+L;if(L>0&&L<_.width&&_.map[ct-1]==_.map[ct]){const X=_.map[ct],at=M.nodeAt(X);g.setNodeMarkup(g.mapping.map(x+X),null,k(at.attrs,L-_.colCount(X))),j+=at.attrs.rowspan-1}else{const X=null==H?xt(M.type.schema).cell:M.nodeAt(_.map[ct+H]).type,at=_.positionAt(j,L,M);g.insert(g.mapping.map(x+at),X.createAndFill())}}return g}function z(g,{map:_,table:x,tableStart:M},L){const H=g.mapping.maps.length;for(let j=0;j<_.height;){const ct=j*_.width+L,X=_.map[ct],at=x.nodeAt(X),It=at.attrs;if(L>0&&_.map[ct-1]==X||L<_.width-1&&_.map[ct+1]==X)g.setNodeMarkup(g.mapping.slice(H).map(M+X),null,ht(It,L-_.colCount(X)));else{const wt=g.mapping.slice(H).map(M+X);g.delete(wt,wt+at.nodeSize)}j+=It.rowspan}}function _t(g,{map:_,tableStart:x,table:M},L){var H;let j=x;for(let at=0;at<L;at++)j+=M.child(at).nodeSize;const ct=[];let X=L>0?-1:0;(function(g,_,x){var M;const L=xt(_.type.schema).header_cell;for(let H=0;H<g.width;H++)if((null==(M=_.nodeAt(g.map[H+x*g.width]))?void 0:M.type)!=L)return!1;return!0})(_,M,L+X)&&(X=0==L||L==_.height?null:0);for(let at=0,It=_.width*L;at<_.width;at++,It++)if(L>0&&L<_.height&&_.map[It]==_.map[It-_.width]){const wt=_.map[It],Zt=M.nodeAt(wt).attrs;g.setNodeMarkup(x+wt,null,Oe(ie({},Zt),{rowspan:Zt.rowspan+1})),at+=Zt.colspan-1}else{const wt=null==X?xt(M.type.schema).cell:null==(H=M.nodeAt(_.map[It+X*_.width]))?void 0:H.type,Zt=null==wt?void 0:wt.createAndFill();Zt&&ct.push(Zt)}return g.insert(j,xt(M.type.schema).row.create(null,ct)),g}function Kt(g,{map:_,table:x,tableStart:M},L){let H=0;for(let X=0;X<L;X++)H+=x.child(X).nodeSize;const j=H+x.child(L).nodeSize,ct=g.mapping.maps.length;g.delete(H+M,j+M);for(let X=0,at=L*_.width;X<_.width;X++,at++){const It=_.map[at];if(L>0&&It==_.map[at-_.width]){const wt=x.nodeAt(It).attrs;g.setNodeMarkup(g.mapping.slice(ct).map(It+M),null,Oe(ie({},wt),{rowspan:wt.rowspan-1})),X+=wt.colspan-1}else if(L<_.width&&It==_.map[at+_.width]){const wt=x.nodeAt(It),Zt=wt.attrs,te=wt.type.create(Oe(ie({},Zt),{rowspan:wt.attrs.rowspan-1}),wt.content),re=_.positionAt(L+1,X,x);g.insert(g.mapping.slice(ct).map(M+re),te),X+=Zt.colspan-1}}}function ue(g){const _=g.content;return 1==_.childCount&&_.child(0).isTextblock&&0==_.child(0).childCount}function Me(g,_){const x=g.selection;if(!(x instanceof st)||x.$anchorCell.pos==x.$headCell.pos)return!1;const M=I(g),{map:L}=M;if(function({width:g,height:_,map:x},M){let L=M.top*g+M.left,H=L,j=(M.bottom-1)*g+M.left,ct=L+(M.right-M.left-1);for(let X=M.top;X<M.bottom;X++){if(M.left>0&&x[H]==x[H-1]||M.right<g&&x[ct]==x[ct+1])return!0;H+=g,ct+=g}for(let X=M.left;X<M.right;X++){if(M.top>0&&x[L]==x[L-g]||M.bottom<_&&x[j]==x[j+g])return!0;L++,j++}return!1}(L,M))return!1;if(_){const H=g.tr,j={};let X,at,ct=T.HY.empty;for(let It=M.top;It<M.bottom;It++)for(let wt=M.left;wt<M.right;wt++){const Zt=L.map[It*L.width+wt],te=M.table.nodeAt(Zt);if(!j[Zt]&&te)if(j[Zt]=!0,null==X)X=Zt,at=te;else{ue(te)||(ct=ct.append(te.content));const re=H.mapping.map(Zt+M.tableStart);H.delete(re,re+te.nodeSize)}}if(null==X||null==at)return!0;if(H.setNodeMarkup(X+M.tableStart,null,Oe(ie({},k(at.attrs,at.attrs.colspan,M.right-M.left-at.attrs.colspan)),{rowspan:M.bottom-M.top})),ct.size){const It=X+1+at.content.size,wt=ue(at)?X+1:It;H.replaceWith(wt+M.tableStart,It+M.tableStart,ct)}H.setSelection(new st(H.doc.resolve(X+M.tableStart))),_(H)}return!0}function Ce(g,_){const x=xt(g.schema);return function(g){return(_,x)=>{var M;const L=_.selection;let H,j;if(L instanceof st){if(L.$anchorCell.pos!=L.$headCell.pos)return!1;H=L.$anchorCell.nodeAfter,j=L.$anchorCell.pos}else{if(H=function(g){for(let _=g.depth;_>0;_--){const x=g.node(_).type.spec.tableRole;if("cell"===x||"header_cell"===x)return g.node(_)}return null}(L.$from),!H)return!1;j=null==(M=ut(L.$from))?void 0:M.pos}if(null==H||null==j||1==H.attrs.colspan&&1==H.attrs.rowspan)return!1;if(x){let ct=H.attrs;const X=[],at=ct.colwidth;ct.rowspan>1&&(ct=Oe(ie({},ct),{rowspan:1})),ct.colspan>1&&(ct=Oe(ie({},ct),{colspan:1}));const It=I(_),wt=_.tr;for(let te=0;te<It.right-It.left;te++)X.push(at?Oe(ie({},ct),{colwidth:at&&at[te]?[at[te]]:null}):ct);let Zt;for(let te=It.top;te<It.bottom;te++){let re=It.map.positionAt(te,It.left,It.table);te==It.top&&(re+=H.nodeSize);for(let ce=It.left,he=0;ce<It.right;ce++,he++)ce==It.left&&te==It.top||wt.insert(Zt=wt.mapping.map(re+It.tableStart,1),g({node:H,row:te,col:ce}).createAndFill(X[he]))}wt.setNodeMarkup(j,g({node:H,row:It.top,col:It.left}),X[0]),L instanceof st&&wt.setSelection(new st(wt.doc.resolve(L.$anchorCell.pos),Zt?wt.doc.resolve(Zt):void 0)),x(wt)}return!0}}(({node:M})=>x[M.type.spec.tableRole])(g,_)}function zt(g,_,x){const M=_.map.cellsInRect({left:0,top:0,right:"row"==g?_.map.width:1,bottom:"column"==g?_.map.height:1});for(let L=0;L<M.length;L++){const H=_.table.nodeAt(M[L]);if(H&&H.type!==x.header_cell)return!1}return!0}function Ut(g,_){return(_=_||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(g){return function(_,x){if(!K(_))return!1;if(x){const M=xt(_.schema),L=I(_),H=_.tr,j=L.map.cellsInRect("column"==g?{left:L.left,top:0,right:L.right,bottom:L.map.height}:"row"==g?{left:0,top:L.top,right:L.map.width,bottom:L.bottom}:L),ct=j.map(X=>L.table.nodeAt(X));for(let X=0;X<j.length;X++)ct[X].type==M.header_cell&&H.setNodeMarkup(L.tableStart+j[X],M.cell,ct[X].attrs);if(0==H.steps.length)for(let X=0;X<j.length;X++)H.setNodeMarkup(L.tableStart+j[X],M.header_cell,ct[X].attrs);x(H)}return!0}}(g):function(x,M){if(!K(x))return!1;if(M){const L=xt(x.schema),H=I(x),j=x.tr,ct=zt("row",H,L),X=zt("column",H,L),It=("column"===g?ct:"row"===g&&X)?1:0,Zt="column"==g?X?L.cell:L.header_cell:"row"==g?ct?L.cell:L.header_cell:L.cell;H.map.cellsInRect("column"==g?{left:0,top:It,right:1,bottom:H.map.height}:"row"==g?{left:It,top:0,right:H.map.width,bottom:1}:H).forEach(te=>{const re=te+H.tableStart,ce=j.doc.nodeAt(re);ce&&j.setNodeMarkup(re,Zt,ce.attrs)}),M(j)}return!0}}Ut("row",{useDeprecatedLogic:!0}),Ut("column",{useDeprecatedLogic:!0});var ae=Ut("cell",{useDeprecatedLogic:!0});function be(g){return function(_,x){if(!K(_))return!1;const M=function(g,_){if(_<0){const x=g.nodeBefore;if(x)return g.pos-x.nodeSize;for(let M=g.index(-1)-1,L=g.before();M>=0;M--){const H=g.node(-1).child(M),j=H.lastChild;if(j)return L-1-j.nodeSize;L-=H.nodeSize}}else{if(g.index()<g.parent.childCount-1)return g.pos+g.nodeAfter.nodeSize;const x=g.node(-1);for(let M=g.indexAfter(-1),L=g.after();M<x.childCount;M++){const H=x.child(M);if(H.childCount)return L+1;L+=H.nodeSize}}return null}(At(_),g);if(null==M)return!1;if(x){const L=_.doc.resolve(M);x(_.tr.setSelection(l.Bs.between(L,function(g){return g.node(0).resolve(g.pos+g.nodeAfter.nodeSize)}(L))).scrollIntoView())}return!0}}function Ee({allowTableNodeSelection:g=!1}={}){return new l.Sy({key:bt,state:{init:()=>null,apply(_,x){const M=_.getMeta(bt);if(null!=M)return-1==M?null:M;if(null==x||!_.docChanged)return x;const{deleted:L,pos:H}=_.mapping.mapResult(x);return L?null:H}},props:{decorations:U,handleDOMEvents:{mousedown:$e},createSelectionBetween:_=>null!=bt.getState(_.state)?_.state.selection:null,handleTripleClick:Ne,handleKeyDown:Ye,handlePaste:Ge},appendTransaction:(_,x,M)=>function(g,_,x){const M=(_||g).selection,L=(_||g).doc;let H,j;if(M instanceof l.qv&&(j=M.node.type.spec.tableRole)){if("cell"==j||"header_cell"==j)H=st.create(L,M.from);else if("row"==j){const ct=L.resolve(M.from+1);H=st.rowSelection(ct,ct)}else if(!x){const ct=Y.get(M.node),X=M.from+1;H=st.create(L,X+1,X+ct.map[ct.width*ct.height-1])}}else M instanceof l.Bs&&function({$from:g,$to:_}){if(g.pos==_.pos||g.pos<g.pos-6)return!1;let x=g.pos,M=_.pos,L=g.depth;for(;L>=0&&!(g.after(L+1)<g.end(L));L--,x++);for(let H=_.depth;H>=0&&!(_.before(H+1)>_.start(H));H--,M--);return x==M&&/row|table/.test(g.node(L).type.spec.tableRole)}(M)?H=l.Bs.create(L,M.from):M instanceof l.Bs&&function({$from:g,$to:_}){let x,M;for(let L=g.depth;L>0;L--){const H=g.node(L);if("cell"===H.type.spec.tableRole||"header_cell"===H.type.spec.tableRole){x=H;break}}for(let L=_.depth;L>0;L--){const H=_.node(L);if("cell"===H.type.spec.tableRole||"header_cell"===H.type.spec.tableRole){M=H;break}}return x!==M&&0===_.parentOffset}(M)&&(H=l.Bs.create(L,M.$from.start(),M.$from.end()));return H&&(_||(_=g.tr)).setSelection(H),_}(M,le(M,x),g)})}function Te(g,_,x,M,L,H){let j=0,ct=!0,X=_.firstChild;const at=g.firstChild;for(let It=0,wt=0;It<at.childCount;It+=1){const{colspan:Zt,colwidth:te}=at.child(It).attrs;for(let re=0;re<Zt;re+=1,wt+=1){const ce=L===wt?H:te&&te[re],he=ce?`${ce}px`:"";j+=ce||M,ce||(ct=!1),X?(X.style.width!==he&&(X.style.width=he),X=X.nextSibling):_.appendChild(document.createElement("col")).style.width=he}}for(;X;){const It=X.nextSibling;X.parentNode.removeChild(X),X=It}ct?(x.style.width=`${j}px`,x.style.minWidth=""):(x.style.width="",x.style.minWidth=`${j}px`)}class Ae{constructor(_,x){this.node=_,this.cellMinWidth=x,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Te(_,this.colgroup,this.table,x),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(_){return _.type===this.node.type&&(this.node=_,Te(_,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(_){return"attributes"===_.type&&(_.target===this.table||this.colgroup.contains(_.target))}}function Re(g,_){return _?g.createChecked(null,_):g.createAndFill()}const _e=({editor:g})=>{const{selection:_}=g.state;if(!function(g){return g instanceof st}(_))return!1;let x=0;const M=(0,v.findParentNodeClosestToPos)(_.ranges[0].$from,H=>"table"===H.type.name);return null==M||M.node.descendants(H=>{if("table"===H.type.name)return!1;["tableCell","tableHeader"].includes(H.type.name)&&(x+=1)}),x===_.ranges.length&&(g.commands.deleteTable(),!0)},Be=v.Node.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Ae,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML({HTMLAttributes:g}){return["table",(0,v.mergeAttributes)(this.options.HTMLAttributes,g),["tbody",0]]},addCommands:()=>({insertTable:({rows:g=3,cols:_=3,withHeaderRow:x=!0}={})=>({tr:M,dispatch:L,editor:H})=>{const j=function(g,_,x,M,L){const H=function(g){if(g.cached.tableNodeTypes)return g.cached.tableNodeTypes;const _={};return Object.keys(g.nodes).forEach(x=>{const M=g.nodes[x];M.spec.tableRole&&(_[M.spec.tableRole]=M)}),g.cached.tableNodeTypes=_,_}(g),j=[],ct=[];for(let at=0;at<x;at+=1){const It=Re(H.cell,L);if(It&&ct.push(It),M){const wt=Re(H.header_cell,L);wt&&j.push(wt)}}const X=[];for(let at=0;at<_;at+=1)X.push(H.row.createChecked(null,M&&0===at?j:ct));return H.table.createChecked(null,X)}(H.schema,g,_,x);if(L){const ct=M.selection.anchor+1;M.replaceSelectionWith(j).scrollIntoView().setSelection(l.Bs.near(M.doc.resolve(ct)))}return!0},addColumnBefore:()=>({state:g,dispatch:_})=>function(g,_){if(!K(g))return!1;if(_){const x=I(g);_(W(g.tr,x,x.left))}return!0}(g,_),addColumnAfter:()=>({state:g,dispatch:_})=>function(g,_){if(!K(g))return!1;if(_){const x=I(g);_(W(g.tr,x,x.right))}return!0}(g,_),deleteColumn:()=>({state:g,dispatch:_})=>function(g,_){if(!K(g))return!1;if(_){const x=I(g),M=g.tr;if(0==x.left&&x.right==x.map.width)return!1;for(let L=x.right-1;z(M,x,L),L!=x.left;L--){const H=x.tableStart?M.doc.nodeAt(x.tableStart-1):M.doc;if(!H)throw RangeError("No table found");x.table=H,x.map=Y.get(H)}_(M)}return!0}(g,_),addRowBefore:()=>({state:g,dispatch:_})=>function(g,_){if(!K(g))return!1;if(_){const x=I(g);_(_t(g.tr,x,x.top))}return!0}(g,_),addRowAfter:()=>({state:g,dispatch:_})=>function(g,_){if(!K(g))return!1;if(_){const x=I(g);_(_t(g.tr,x,x.bottom))}return!0}(g,_),deleteRow:()=>({state:g,dispatch:_})=>function(g,_){if(!K(g))return!1;if(_){const x=I(g),M=g.tr;if(0==x.top&&x.bottom==x.map.height)return!1;for(let L=x.bottom-1;Kt(M,x,L),L!=x.top;L--){const H=x.tableStart?M.doc.nodeAt(x.tableStart-1):M.doc;if(!H)throw RangeError("No table found");x.table=H,x.map=Y.get(x.table)}_(M)}return!0}(g,_),deleteTable:()=>({state:g,dispatch:_})=>function(g,_){const x=g.selection.$anchor;for(let M=x.depth;M>0;M--)if("table"==x.node(M).type.spec.tableRole)return _&&_(g.tr.delete(x.before(M),x.after(M)).scrollIntoView()),!0;return!1}(g,_),mergeCells:()=>({state:g,dispatch:_})=>Me(g,_),splitCell:()=>({state:g,dispatch:_})=>Ce(g,_),toggleHeaderColumn:()=>({state:g,dispatch:_})=>Ut("column")(g,_),toggleHeaderRow:()=>({state:g,dispatch:_})=>Ut("row")(g,_),toggleHeaderCell:()=>({state:g,dispatch:_})=>ae(g,_),mergeOrSplit:()=>({state:g,dispatch:_})=>!!Me(g,_)||Ce(g,_),setCellAttribute:(g,_)=>({state:x,dispatch:M})=>function(g,_){return function(x,M){if(!K(x))return!1;const L=At(x);if(L.nodeAfter.attrs[g]===_)return!1;if(M){const H=x.tr;x.selection instanceof st?x.selection.forEachCell((j,ct)=>{j.attrs[g]!==_&&H.setNodeMarkup(ct,null,Oe(ie({},j.attrs),{[g]:_}))}):H.setNodeMarkup(L.pos,null,Oe(ie({},L.nodeAfter.attrs),{[g]:_})),M(H)}return!0}}(g,_)(x,M),goToNextCell:()=>({state:g,dispatch:_})=>be(1)(g,_),goToPreviousCell:()=>({state:g,dispatch:_})=>be(-1)(g,_),fixTables:()=>({state:g,dispatch:_})=>(_&&le(g),!0),setCellSelection:g=>({tr:_,dispatch:x})=>{if(x){const M=st.create(_.doc,g.anchorCell,g.headCell);_.setSelection(M)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:_e,"Mod-Backspace":_e,Delete:_e,"Mod-Delete":_e}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[vt({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],Ee({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema:g=>({tableRole:(0,v.callOrReturn)((0,v.getExtensionField)(g,"tableRole",{name:g.name,options:g.options,storage:g.storage}))})}).extend({renderHTML({node:g,HTMLAttributes:_}){var x,M;let L=0,H=!0;try{const j=(null===(x=g.content)||void 0===x?void 0:x.content)[0];null===(M=null==j?void 0:j.content)||void 0===M||M.content.forEach(ct=>{ct.attrs.colwidth?ct.attrs.colwidth.forEach(X=>{X?L+=X:(H=!1,L+=this.options.cellMinWidth)}):(H=!1,L+=this.options.cellMinWidth*(ct.attrs.colspan?ct.attrs.colspan:1))})}catch(j){H=!1}return _.style=H&&L>0?`width: ${L}px;`:L&&L>0?`min-width: ${L}px`:null,["div",{class:"tui-table-wrapper"},["table",(0,v.mergeAttributes)(this.options.HTMLAttributes,_),["tbody",0]]]}})},88806:(qt,Dt,c)=>{c.d(Dt,{v:()=>l});var v=c(74788);class l{constructor(b,h,J){const R=h.get(v.z2F),Y=h.get(v._Vd).resolveComponentFactory(b);this.componentRef=Y.create(h,[]),this.updateProps(J),R.attachView(this.componentRef.hostView)}get instance(){return this.componentRef.instance}get elementRef(){return this.componentRef.injector.get(v.SBq)}get dom(){return this.elementRef.nativeElement}updateProps(b){Object.entries(b).forEach(([h,J])=>{this.instance[h]=J})}detectChanges(){this.componentRef.changeDetectorRef.detectChanges()}destroy(){this.componentRef.destroy()}}},40400:(qt,Dt,c)=>{c.d(Dt,{d:()=>b,x:()=>J});var v=c(12057),l=c(12867),T=c(88806);class b{}class h extends l.NodeView{constructor(){super(...arguments),this.contentDOMElement=null}mount(){const G=this.options.injector,Y=G.get(v.K0);this.renderer=new T.v(this.component,G,{editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(dt={})=>this.updateAttributes(dt),deleteNode:()=>this.deleteNode()}),this.extension.config.draggable&&(this.renderer.elementRef.nativeElement.ondragstart=dt=>{this.onDragStart(dt)}),this.contentDOMElement=this.node.isLeaf?null:Y.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit",this.renderer.detectChanges())}get dom(){return this.renderer.dom}get contentDOM(){return this.node.isLeaf?null:(this.maybeMoveContentDOM(),this.contentDOMElement)}update(G,Y){return this.options.update?this.options.update(G,Y):G.type===this.node.type&&(G===this.node&&this.decorations===Y||(this.node=G,this.decorations=Y,this.renderer.updateProps({node:G,decorations:Y}),this.maybeMoveContentDOM()),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy()}maybeMoveContentDOM(){const G=this.dom.querySelector("[data-node-view-content]");this.contentDOMElement&&G&&!G.contains(this.contentDOMElement)&&G.appendChild(this.contentDOMElement)}}const J=(R,G)=>Y=>new h(R,Y,G)},48014:(qt,Dt,c)=>{c.r(Dt),c.d(Dt,{AbstractTuiEditor:()=>v._,AbstractTuiEditorResizable:()=>bt._3,BackgroundColor:()=>St.BackgroundColor,EDITOR_BLANK_COLOR:()=>At.hK,FontColor:()=>Ft.FontColor,INITIALIZATION_TIPTAP_CONTAINER:()=>Yt.Y1,LAZY_EDITOR_EXTENSIONS:()=>Yt.F4,LAZY_TIPTAP_EDITOR:()=>Yt.bG,StarterKit:()=>U.StarterKit,TIPTAP_EDITOR:()=>Yt.ZW,TUI_ATTACH_FILES_LOADER:()=>Yt.zc,TUI_ATTACH_FILES_OPTIONS:()=>Yt.dR,TUI_EDITOR_CODE_OPTIONS:()=>Yt.Mr,TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES:()=>Yt.dj,TUI_EDITOR_CONTENT_PROCESSOR:()=>Yt.F1,TUI_EDITOR_DEFAULT_OPTIONS:()=>Yt.HG,TUI_EDITOR_EXTENSIONS:()=>Yt.Wf,TUI_EDITOR_FONT_OPTIONS:()=>Yt.UN,TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>Gt.TUI_EDITOR_GROUP_DEFAULT_OPTIONS,TUI_EDITOR_LINK_TEXTS:()=>Yt.b$,TUI_EDITOR_MAX_IMAGE_WIDTH:()=>k.TUI_EDITOR_MAX_IMAGE_WIDTH,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>k.TUI_EDITOR_MIN_IMAGE_WIDTH,TUI_EDITOR_OPTIONS:()=>Yt.mJ,TUI_EDITOR_PROVIDERS:()=>lt.m,TUI_EDITOR_TABLE_COMMANDS:()=>Yt.$i,TUI_EDITOR_TOOLBAR_TEXTS:()=>Yt.rf,TUI_IFRAME_EDITOR_OPTIONS:()=>ht.TUI_IFRAME_EDITOR_OPTIONS,TUI_IMAGE_EDITOR_OPTIONS:()=>k.TUI_IMAGE_EDITOR_OPTIONS,TUI_IMAGE_LOADER:()=>Yt.p7,TableCellBackground:()=>nt.TableCellBackground,TuiAlignContentComponent:()=>K.Xp,TuiAlignContentModule:()=>K.pu,TuiAudio:()=>it.TuiAudio,TuiCodeComponent:()=>K.Tf,TuiCodeModule:()=>K.P_,TuiColorEditComponent:()=>l.hR,TuiColorEditModule:()=>l.TD,TuiColorPickerComponent:()=>l.$v,TuiColorPickerModule:()=>l.H9,TuiColorSelectorComponent:()=>l.sV,TuiColorSelectorModule:()=>l.wl,TuiComponentRenderer:()=>kt.v,TuiDetailsComponent:()=>K.yj,TuiDetailsModule:()=>K.y9,TuiDetailsRemoveComponent:()=>K.Un,TuiEditLinkComponent:()=>T.lV,TuiEditLinkModule:()=>T.Fu,TuiEditorComponent:()=>b.a,TuiEditorGroupToolComponent:()=>K.dN,TuiEditorImagePreviewDirective:()=>ft.Zj,TuiEditorImagePreviewModule:()=>ft.BN,TuiEditorModule:()=>mt,TuiEditorPortalDirective:()=>Ct.A,TuiEditorPortalHostComponent:()=>xt.d,TuiEditorPortalService:()=>Nt.Y,TuiEditorResizableComponent:()=>bt.V_,TuiEditorResizableModule:()=>bt.Sl,TuiEditorSocketComponent:()=>J.D,TuiEditorSocketModule:()=>G,TuiEditorTool:()=>Ot._,TuiEditorToolGroup:()=>K.jP,TuiFileLink:()=>gt.TuiFileLink,TuiFilterAnchorsPipe:()=>T.bL,TuiFlatPickerComponent:()=>l.Jd,TuiFlatPickerModule:()=>l.ui,TuiFontSize:()=>$t.TuiFontSize,TuiFontSizeComponent:()=>K.mK,TuiFontSizeModule:()=>K.p7,TuiFontStyleComponent:()=>K.hr,TuiFontStyleModule:()=>K.Zv,TuiHighlightColorComponent:()=>K.UT,TuiHighlightColorModule:()=>K.XC,TuiIframeEditorComponent:()=>ht.TuiIframeEditorComponent,TuiIframeEditorModule:()=>ht.TuiIframeEditorModule,TuiImageEditorComponent:()=>k.TuiImageEditorComponent,TuiImageEditorModule:()=>k.TuiImageEditorModule,TuiInputColorComponent:()=>ut.j,TuiInputColorModule:()=>pt,TuiLinearMultiPickerComponent:()=>l.es,TuiLinearMultiPickerModule:()=>l.GU,TuiLinearPickerComponent:()=>l.P,TuiLinearPickerModule:()=>l.g7,TuiLink:()=>st.TuiLink,TuiListConfigsComponent:()=>K.w2,TuiListConfigsModule:()=>K.Ur,TuiNodeViewNgComponent:()=>jt.d,TuiNodeViewRenderer:()=>jt.x,TuiPaletteComponent:()=>l.Rh,TuiPaletteModule:()=>l.VM,TuiShortUrlPipe:()=>T.X,TuiSource:()=>it.TuiSource,TuiTabExtension:()=>et.TuiTabExtension,TuiTable:()=>Q.TuiTable,TuiTableCellColorComponent:()=>K.pH,TuiTableCellColorModule:()=>K.mp,TuiTableCommands:()=>K.iN,TuiTableCreateComponent:()=>K.lT,TuiTableCreateModule:()=>K.iA,TuiTableMergeCellsComponent:()=>K.YH,TuiTableMergeCellsModule:()=>K.er,TuiTableRowColumnManagerComponent:()=>K._I,TuiTableRowColumnManagerModule:()=>K.__,TuiTableSizeSelectorComponent:()=>K.M8,TuiTableSizeSelectorModule:()=>K.kU,TuiTextColorComponent:()=>K.G0,TuiTextColorModule:()=>K._t,TuiTiptapEditorDirective:()=>ft.JU,TuiTiptapEditorModule:()=>ft.mJ,TuiTiptapEditorService:()=>ft.$3,TuiToolbarComponent:()=>Y.M6,TuiToolbarModule:()=>Y.yB,TuiToolbarNavigationManagerDirective:()=>Y.Bp,TuiVideo:()=>it.TuiVideo,createGroupExtension:()=>Gt.createGroupExtension,createIframeEditorExtension:()=>ht.createIframeEditorExtension,createImageEditorExtension:()=>k.createImageEditorExtension,defaultEditorColors:()=>At.sw,defaultEditorExtensions:()=>Rt,defaultEditorTools:()=>At.Db,tuiDefaultFontOptionsHandler:()=>At.RR,tuiDeleteNode:()=>le.yU,tuiEditorOptionsProvider:()=>Yt.Uv,tuiGetElementPoint:()=>le.Ws,tuiGetGradientData:()=>le.U5,tuiGetMarkRange:()=>le.Yz,tuiGetNestedNodes:()=>le.YX,tuiGetSelectedContent:()=>le.Ap,tuiInsertHtml:()=>le.Xd,tuiInsertText:()=>le.Oi,tuiIsOrderedOrBulletList:()=>et.tuiIsOrderedOrBulletList,tuiIsSafeLinkRange:()=>le.nC,tuiIsSelectionIn:()=>le.i0,tuiLegacyEditorConverter:()=>le.Er,tuiParseGradient:()=>le._N,tuiParseNodeAttributes:()=>le.x6,tuiParseStyle:()=>le.jx,tuiToGradient:()=>le.CH});var v=c(77361),l=c(27050),T=c(71115),b=c(69303),h=c(12057),J=c(20179),R=c(74788);let G=(()=>{class Vt{}return Vt.\u0275fac=function(xe){return new(xe||Vt)},Vt.\u0275mod=R.oAB({type:Vt}),Vt.\u0275inj=R.cJS({}),Vt})();var Y=c(17406),ft=c(84614),dt=c(68339),q=c(76040);let mt=(()=>{class Vt{}return Vt.\u0275fac=function(xe){return new(xe||Vt)},Vt.\u0275mod=R.oAB({type:Vt}),Vt.\u0275inj=R.cJS({imports:[[h.ez,Y.yB,q.TuiWrapperModule,q.TuiScrollbarModule,T.Fu,dt.TuiActiveZoneModule,q.TuiDropdownModule,ft.mJ,G,dt.TuiLetModule]]}),Vt})();var lt=c(79089),Ct=c(1433),Nt=c(73825),xt=c(9872),bt=c(95110),ut=c(19769);let pt=(()=>{class Vt{}return Vt.\u0275fac=function(xe){return new(xe||Vt)},Vt.\u0275mod=R.oAB({type:Vt}),Vt.\u0275inj=R.cJS({imports:[[h.ez,q.TuiPrimitiveTextfieldModule,q.TuiTextfieldControllerModule,q.TuiHostedDropdownModule,l.wl,dt.TuiActiveZoneModule]]}),Vt})();var K=c(93252),At=c(19074),Ot=c(48699),St=c(15736);const Rt=[Promise.resolve().then(c.bind(c,2823)).then(({StarterKit:Vt})=>Vt).then(Vt=>Vt.configure({heading:{levels:[1,2]}})),c.e(73336).then(c.bind(c,73336)).then(({default:Vt})=>Vt.configure({types:["heading","paragraph"]})),Promise.resolve().then(c.bind(c,84402)).then(({default:Vt})=>Vt),c.e(17991).then(c.bind(c,17991)).then(({default:Vt})=>Vt),c.e(77147).then(c.bind(c,77147)).then(({default:Vt})=>Vt),c.e(25034).then(c.bind(c,25034)).then(({default:Vt})=>Vt),Promise.resolve().then(c.bind(c,52658)).then(({FontColor:Vt})=>Vt),c.e(44632).then(c.bind(c,44632)).then(({default:Vt})=>Vt.configure({inline:!0,allowBase64:!0})),Promise.resolve().then(c.bind(c,57734)).then(({TuiLink:Vt})=>Vt),c.e(54058).then(c.bind(c,54058)).then(({TuiJumpAnchor:Vt})=>Vt),Promise.resolve().then(c.bind(c,93763)).then(({TuiFileLink:Vt})=>Vt),Promise.resolve().then(c.bind(c,15736)).then(({BackgroundColor:Vt})=>Vt),Promise.resolve().then(c.bind(c,86624)).then(({TuiTable:Vt})=>Vt.configure({resizable:!0})),c.e(45213).then(c.bind(c,45213)).then(({default:Vt})=>Vt),c.e(71397).then(c.bind(c,71397)).then(({default:Vt})=>Vt),c.e(38840).then(c.bind(c,38840)).then(({TableHeader:Vt})=>Vt),Promise.resolve().then(c.bind(c,12177)).then(({TuiTabExtension:Vt})=>Vt),Promise.resolve().then(c.bind(c,51919)).then(({TableCellBackground:Vt})=>Vt),c.e(44312).then(c.bind(c,44312)).then(({TuiDetailsContent:Vt})=>Vt),c.e(44312).then(c.bind(c,44312)).then(({TuiDetails:Vt})=>Vt),c.e(44312).then(c.bind(c,44312)).then(({TuiSummary:Vt})=>Vt),Promise.resolve().then(c.bind(c,9492)).then(({TuiFontSize:Vt})=>Vt)];var gt=c(93763),Ft=c(52658),$t=c(9492),Gt=c(54920),ht=c(20854),k=c(53380),et=c(12177),st=c(57734),it=c(41512),U=c(2823),Q=c(86624),nt=c(51919),kt=c(88806),jt=c(40400),Yt=c(14309),le=c(27863)},62141:(qt,Dt,c)=>{c.d(Dt,{i:()=>ft});var v=c(12057),l=c(74788),T=c(27863),b=c(68339),h=c(18891),J=c(43190),R=c(88002),G=c(46782),Y=c(39761);let ft=(()=>{class dt extends h.y{constructor(mt,{nativeElement:lt},Ct){const Nt=(0,b.tuiTypedFromEvent)(lt,"mousedown").pipe((0,b.tuiPreventDefault)(),(0,J.w)(xt=>{const bt=(0,b.tuiTypedFromEvent)(Ct,"mousemove").pipe((0,R.U)(({clientX:ut,clientY:pt})=>(0,T.Ws)(ut,pt,lt)),(0,G.R)((0,b.tuiTypedFromEvent)(Ct,"mouseup")));return xt.target===lt?bt.pipe((0,Y.O)((0,T.Ws)(xt.clientX,xt.clientY,lt))):bt}),(0,G.R)(mt));super(xt=>Nt.subscribe(xt))}}return dt.\u0275fac=function(mt){return new(mt||dt)(l.LFG(b.TuiDestroyService,2),l.LFG(l.SBq),l.LFG(v.K0))},dt.\u0275prov=l.Yz7({token:dt,factory:dt.\u0275fac}),dt})()},14309:(qt,Dt,c)=>{c.d(Dt,{Y1:()=>Rt,F4:()=>T,bG:()=>St,ZW:()=>Ot,zc:()=>dt,dR:()=>ft,Mr:()=>xt,dj:()=>mt,F1:()=>Y,HG:()=>h,Wf:()=>l,UN:()=>bt,b$:()=>Nt,mJ:()=>J,$i:()=>Ct,rf:()=>lt,p7:()=>K,Uv:()=>R});var v=c(74788);const l=new v.OlP("[TUI_EDITOR_EXTENSIONS]: Extensions for editor"),T=new v.OlP("[LAZY_EDITOR_EXTENSIONS]: lazy extensions");var b=c(19074);const h={colors:b.sw,blankColor:b.hK,fontOptions:b.RR},J=new v.OlP("[TUI_EDITOR_OPTIONS]: Default Editor colors",{factory:()=>h});function R(gt){return{provide:J,useValue:Object.assign(Object.assign({},h),gt)}}var G=c(54487);const Y=new v.OlP("[TUI_EDITOR_CONTENT_PROCESSOR]: Content value processor for tui-editor",{factory:()=>G.y}),ft=new v.OlP("[TUI_ATTACH_FILES_OPTIONS]: files loader options",{factory:()=>({accept:"*/*",multiple:!0})}),dt=new v.OlP("[TUI_ATTACH_FILES_LOADER]: files loader handler");var q=c(72773);const mt=new v.OlP("[TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES]: tui-color-selector i18n",{factory:()=>["Solid color","Gradient"]}),lt=new v.OlP("[TUI_EDITOR_TOOLBAR_TEXTS]: tui-editor-toolbar i18n",{factory:(0,q.vv)("toolbarTools")}),Ct=new v.OlP("[TUI_EDITOR_TABLE_COMMANDS]: tui-editor-toolbar table i18n",{factory:(0,q.vv)("editorTableCommands")}),Nt=new v.OlP("[TUI_EDITOR_LINK_TEXTS]: tui-editor-toolbar edit-link i18n",{factory:(0,q.vv)("editorEditLink")}),xt=new v.OlP("[TUI_EDITOR_CODE_OPTIONS]: tui-editor-toolbar codes options",{factory:(0,q.vv)("editorCodeOptions")}),bt=new v.OlP("[TUI_EDITOR_FONT_OPTIONS]: tui-editor-toolbar font options",{factory:(0,q.vv)("editorFontOptions")});var ut=c(68339),pt=c(88002);const K=new v.OlP("[TUI_IMAGE_LOADER]: Image loader handler",{factory:()=>gt=>{const Ft=new FileReader;return Ft.readAsDataURL(gt),(0,ut.tuiTypedFromEvent)(Ft,"load").pipe((0,pt.U)(()=>String(Ft.result)))}});var At=c(82298);const Ot=new v.OlP("[TIPTAP_EDITOR]: Token for Tiptap Editor"),St=new v.OlP("[LAZY_TIPTAP_EDITOR]: Lazy loaded Editor",{factory:()=>{const gt=new At.t(1);return Promise.resolve().then(c.bind(c,12867)).then(Ft=>gt.next(Ft.Editor)),gt}}),Rt=new v.OlP("[INITIALIZATION_TIPTAP_CONTAINER]: The container in which the tip-tap editor is initialized")},27863:(qt,Dt,c)=>{function v(it,U,Q){const nt=it.selection.$anchor;for(let kt=nt.depth;kt>0;kt--)if(nt.node(kt).type.name===Q)return U&&U(it.tr.delete(nt.before(kt),nt.after(kt)).scrollIntoView()),!0;return!1}c.d(Dt,{yU:()=>v,Ws:()=>T,U5:()=>b,Yz:()=>R,YX:()=>Y,Ap:()=>dt,Xd:()=>q,Oi:()=>mt,nC:()=>et,i0:()=>lt,Er:()=>Ct,_N:()=>$t,x6:()=>ht,jx:()=>k,CH:()=>st});var l=c(68339);function T(it,U,Q){const{left:nt,top:kt,width:jt,height:Yt}=Q.getBoundingClientRect();return[(0,l.tuiClamp)(it-nt,0,jt)/jt,(0,l.tuiClamp)(U-kt,0,Yt)/Yt]}function b(it){return it.slice(0,Math.max(0,it.length-1)).replace("linear-gradient(","")}function J(it,U,Q={}){return it.find(({attrs:nt,type:kt})=>kt===U&&function(it,U){const Q=Object.keys(U);return!Q.length||!!Q.filter(nt=>U[nt]===it[nt]).length}(nt,Q))||null}function R(it,U,Q={}){if(!it||!U)return null;const{node:nt,offset:kt}=it.parent.childAfter(it.parentOffset);if(!nt)return null;const jt=J(nt.marks,U,Q);if(!jt)return null;let Yt=it.index(),le=it.start()+kt,Vt=Yt+1,ve=le+nt.nodeSize;for(J(nt.marks,U,Q);Yt>0&&jt.isInSet(it.parent.child(Yt-1).marks);)Yt-=1,le-=it.parent.child(Yt).nodeSize;for(;Vt<it.parent.childCount&&J(it.parent.child(Vt).marks,U,Q);)ve+=it.parent.child(Vt).nodeSize,Vt+=1;return{from:le,to:ve}}var G=c(77346);function Y(it){const U=[];return it.content.forEach(Q=>{Q instanceof G.NB&&U.push([Q.type.name,Q.attrs])}),U}var ft=c(12867);function dt(it,U){const Q=null!=U?U:it.selection.$head.parent.textContent,nt=it.doc.cut(it.selection.from,it.selection.to);return nt.content.size?(0,ft.getHTMLFromFragment)(nt.content,it.schema):Q}function q(it,U){if(it.queryCommandSupported("insertHTML"))return void it.execCommand("insertHTML",!1,U);const Q=it.getSelection();if(!Q)throw new l.TuiDocumentSelectionException;it.execCommand("ms-beginUndoUnit");const nt=Q.getRangeAt(0),kt=nt.createContextualFragment(U);nt.deleteContents(),nt.insertNode(kt),it.execCommand("ms-endUndoUnit")}function mt(it,U){if(it.queryCommandSupported("insertText"))return void it.execCommand("insertText",!1,U);const Q=it.getSelection();if(!Q)throw new l.TuiDocumentSelectionException;it.execCommand("ms-beginUndoUnit");const nt=Q.getRangeAt(0);nt.deleteContents(),nt.insertNode(it.createTextNode(U)),it.execCommand("ms-endUndoUnit")}function lt({anchorNode:it,focusNode:U},Q){return!!it&&!!U&&(0,l.tuiIsNodeIn)(it,Q)&&(0,l.tuiIsNodeIn)(U,Q)}function Ct(it){const U=(new DOMParser).parseFromString(it,"text/html");return Nt(U.body),U.body.innerHTML}function Nt(it){for(const U of Array.from(it.children))if(U.children.length&&Nt(U),"FONT"===U.tagName)if(U.hasAttribute("size"))switch(U.getAttribute("size")){case"6":xt("h1",U);break;case"5":xt("h2",U);break;case"4":bt("17px",U);break;case"3":bt("15px",U);break;case"2":bt("13px",U)}else U.hasAttribute("color")&&ut(U)}function xt(it,U){var Q,nt,kt,jt,Yt,le,Vt,ve,xe;const We=document.createElement(it);if(We.innerHTML=U.innerHTML,"P"===(null===(Q=U.parentElement)||void 0===Q?void 0:Q.tagName)){const ge=null===(kt=null===(nt=U.parentElement)||void 0===nt?void 0:nt.parentElement)||void 0===kt?void 0:kt.insertBefore(We,U.parentElement);null===(jt=U.parentElement)||void 0===jt||jt.removeChild(U),(null==ge?void 0:ge.nextSibling)&&!(null===(le=null===(Yt=null==ge?void 0:ge.nextSibling)||void 0===Yt?void 0:Yt.textContent)||void 0===le?void 0:le.trim())&&(null===(ve=null===(Vt=ge.nextSibling)||void 0===Vt?void 0:Vt.parentElement)||void 0===ve||ve.removeChild(ge.nextSibling))}else null===(xe=U.parentElement)||void 0===xe||xe.replaceChild(We,U)}function bt(it,U){var Q;const nt=document.createElement("p"),kt=document.createElement("span");kt.setAttribute("style",`font-size: ${it}`),kt.innerHTML=U.innerHTML,nt.append(kt),null===(Q=U.parentElement)||void 0===Q||Q.replaceChild("P"===U.parentElement.tagName?kt:nt,U)}function ut(it){var U;const Q=document.createElement("span");Q.setAttribute("style",`color: ${it.getAttribute("color")}`),Q.innerHTML=it.innerHTML,null===(U=it.parentElement)||void 0===U||U.replaceChild(Q,it)}const Ft=["\\s*(","(?:","#(?:[a-f0-9]{6}|[a-f0-9]{3})","|","(?:rgb|hsl)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*\\)","|","(?:rgba|hsla)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*,\\s*\\d*\\.?\\d+\\)","|","[_a-z-][_a-z0-9-]*",")",")","(?:\\s+","(","(?:[+-]?\\d*\\.?\\d+)(?:%|[a-z]+)?","))?","(?:","\\s*,\\s*","\\s*)?"];function $t(it){const U=new RegExp(Ft.join(""),"gi"),Q=it.startsWith("to")||it.match(/^\d/)?it.slice(Math.max(0,it.indexOf(",")+1)).trim():it,nt=it.startsWith("to")?it.split(",")[0]:"to bottom";let kt=[],jt=U.exec(Q);for(;null!==jt;)kt=kt.concat({color:jt[1],position:Gt(jt[2],kt.length)}),jt=U.exec(Q);return kt=kt.filter(({color:Yt})=>Yt.startsWith("#")||Yt.startsWith("rgb")),{stops:kt,side:nt}}function Gt(it,U){const Q=1===U?"100%":`${U}%`;return(null==it?void 0:it.includes("%"))?it:Q}function ht(it){return it.reduce((U,Q)=>(U[Q]={parseHTML:nt=>null==nt?void 0:nt.getAttribute(`${Q}`)},U),{})}function k(it){return it.split(";").reduce((U,Q)=>{var nt;const[kt,jt]=null!==(nt=Q.split(":"))&&void 0!==nt?nt:[];return kt&&jt&&(U[kt.trim()]=jt.trim()),U},{})}function et(it){var U;return it.endOffset-it.startOffset>0||0!==it.startOffset&&it.endOffset!==((null===(U=it.endContainer.nodeValue)||void 0===U?void 0:U.length)||0)}function st({stops:it,side:U}){return`linear-gradient(${U}, ${it.map(({color:Q,position:nt})=>`rgba(${(0,l.tuiParseColor)(Q).join(", ")}) ${nt}`).join(", ")})`}},12867:(qt,Dt,c)=>{c.r(Dt),c.d(Dt,{CommandManager:()=>D,Editor:()=>Ko,Extension:()=>Ut,InputRule:()=>ot,Mark:()=>Sn,Node:()=>In,NodeView:()=>Lo,PasteRule:()=>ee,Tracker:()=>m,callOrReturn:()=>a,combineTransactionSteps:()=>Co,createStyleTag:()=>Ro,defaultBlockAt:()=>Qn,deleteProps:()=>cn,elementFromString:()=>Zt,escapeForRegEx:()=>i,extensions:()=>zn,findChildren:()=>vo,findChildrenInRange:()=>To,findDuplicates:()=>Ce,findParentNode:()=>En,findParentNodeClosestToPos:()=>Gn,fromString:()=>C,generateHTML:()=>Xn,generateJSON:()=>Eo,generateText:()=>qn,getAttributes:()=>to,getChangedRanges:()=>Mo,getDebugJSON:()=>Dn,getExtensionField:()=>S,getHTMLFromFragment:()=>Rn,getMarkAttributes:()=>Zn,getMarkRange:()=>_,getMarkType:()=>x,getMarksBetween:()=>Yn,getNodeAttributes:()=>An,getNodeType:()=>F,getSchema:()=>Bn,getText:()=>Ln,getTextBetween:()=>ne,getTextContentFromNodes:()=>z,getTextSerializersFromSchema:()=>se,inputRulesPlugin:()=>Jt,isActive:()=>Mn,isEmptyObject:()=>d,isFunction:()=>N,isList:()=>Pn,isMacOS:()=>sn,isMarkActive:()=>xn,isNodeActive:()=>an,isNodeEmpty:()=>dn,isNodeSelection:()=>jn,isNumber:()=>Kt,isPlainObject:()=>Ht,isRegExp:()=>B,isString:()=>n,isTextSelection:()=>H,isiOS:()=>X,markInputRule:()=>Jo,markPasteRule:()=>ao,mergeAttributes:()=>Et,mergeDeep:()=>zt,minMax:()=>j,nodeInputRule:()=>Bo,nodePasteRule:()=>r,objectIncludes:()=>we,pasteRulesPlugin:()=>Me,posToDOMRect:()=>ln,removeDuplicates:()=>_n,textInputRule:()=>so,textPasteRule:()=>u,textblockTypeInputRule:()=>ro,wrappingInputRule:()=>lo});var v=c(62463),l=c(43594),T=c(70768),b=c(77346),h=c(38480);const J=(t,e)=>!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);const G=(t,e,o)=>{let s=function(t,e){let{$cursor:o}=t.selection;return!o||(e?!e.endOfTextblock("backward",t):o.parentOffset>0)?null:o}(t,o);if(!s)return!1;let p=lt(s);if(!p){let E=s.blockRange(),O=E&&(0,h.k9)(E);return null!=O&&(e&&e(t.tr.lift(E,O).scrollIntoView()),!0)}let f=p.nodeBefore;if(!f.type.spec.isolating&&st(t,p,e))return!0;if(0==s.parent.content.size&&(q(f,"end")||v.qv.isSelectable(f))){let E=(0,h.dR)(t.doc,s.before(),s.after(),b.p2.empty);if(E&&E.slice.size<E.to-E.from){if(e){let O=t.tr.step(E);O.setSelection(q(f,"end")?v.Y1.findFrom(O.doc.resolve(O.mapping.map(p.pos,-1)),-1):v.qv.create(O.doc,p.pos-f.nodeSize)),e(O.scrollIntoView())}return!0}}return!(!f.isAtom||p.depth!=s.depth-1||(e&&e(t.tr.delete(p.pos-f.nodeSize,p.pos).scrollIntoView()),0))};function q(t,e,o=!1){for(let s=t;s;s="start"==e?s.firstChild:s.lastChild){if(s.isTextblock)return!0;if(o&&1!=s.childCount)return!1}return!1}const mt=(t,e,o)=>{let{$head:s,empty:p}=t.selection,f=s;if(!p)return!1;if(s.parent.isTextblock){if(o?!o.endOfTextblock("backward",t):s.parentOffset>0)return!1;f=lt(s)}let E=f&&f.nodeBefore;return!(!E||!v.qv.isSelectable(E)||(e&&e(t.tr.setSelection(v.qv.create(t.doc,f.pos-E.nodeSize)).scrollIntoView()),0))};function lt(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}const Nt=(t,e,o)=>{let s=function(t,e){let{$cursor:o}=t.selection;return!o||(e?!e.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size)?null:o}(t,o);if(!s)return!1;let p=bt(s);if(!p)return!1;let f=p.nodeAfter;if(st(t,p,e))return!0;if(0==s.parent.content.size&&(q(f,"start")||v.qv.isSelectable(f))){let E=(0,h.dR)(t.doc,s.before(),s.after(),b.p2.empty);if(E&&E.slice.size<E.to-E.from){if(e){let O=t.tr.step(E);O.setSelection(q(f,"start")?v.Y1.findFrom(O.doc.resolve(O.mapping.map(p.pos)),1):v.qv.create(O.doc,O.mapping.map(p.pos))),e(O.scrollIntoView())}return!0}}return!(!f.isAtom||p.depth!=s.depth-1||(e&&e(t.tr.delete(p.pos,p.pos+f.nodeSize).scrollIntoView()),0))},xt=(t,e,o)=>{let{$head:s,empty:p}=t.selection,f=s;if(!p)return!1;if(s.parent.isTextblock){if(o?!o.endOfTextblock("forward",t):s.parentOffset<s.parent.content.size)return!1;f=bt(s)}let E=f&&f.nodeAfter;return!(!E||!v.qv.isSelectable(E)||(e&&e(t.tr.setSelection(v.qv.create(t.doc,f.pos)).scrollIntoView()),0))};function bt(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let o=t.node(e);if(t.index(e)+1<o.childCount)return t.doc.resolve(t.after(e+1));if(o.type.spec.isolating)break}return null}const At=(t,e)=>{let{$head:o,$anchor:s}=t.selection;return!(!o.parent.type.spec.code||!o.sameParent(s)||(e&&e(t.tr.insertText("\n").scrollIntoView()),0))};function Ot(t){for(let e=0;e<t.edgeCount;e++){let{type:o}=t.edge(e);if(o.isTextblock&&!o.hasRequiredAttrs())return o}return null}const St=(t,e)=>{let{$head:o,$anchor:s}=t.selection;if(!o.parent.type.spec.code||!o.sameParent(s))return!1;let p=o.node(-1),f=o.indexAfter(-1),E=Ot(p.contentMatchAt(f));if(!E||!p.canReplaceWith(f,f,E))return!1;if(e){let O=o.after(),P=t.tr.replaceWith(O,O,E.createAndFill());P.setSelection(v.Y1.near(P.doc.resolve(O),1)),e(P.scrollIntoView())}return!0},Rt=(t,e)=>{let o=t.selection,{$from:s,$to:p}=o;if(o instanceof v.C1||s.parent.inlineContent||p.parent.inlineContent)return!1;let f=Ot(p.parent.contentMatchAt(p.indexAfter()));if(!f||!f.isTextblock)return!1;if(e){let E=(!s.parentOffset&&p.index()<p.parent.childCount?s:p).pos,O=t.tr.insert(E,f.createAndFill());O.setSelection(v.Bs.create(O.doc,E+1)),e(O.scrollIntoView())}return!0},gt=(t,e)=>{let{$cursor:o}=t.selection;if(!o||o.parent.content.size)return!1;if(o.depth>1&&o.after()!=o.end(-1)){let f=o.before();if((0,h.Ax)(t.doc,f))return e&&e(t.tr.split(f).scrollIntoView()),!0}let s=o.blockRange(),p=s&&(0,h.k9)(s);return null!=p&&(e&&e(t.tr.lift(s,p).scrollIntoView()),!0)};var t;function st(t,e,o){let f,E,s=e.nodeBefore,p=e.nodeAfter;if(s.type.spec.isolating||p.type.spec.isolating)return!1;if(function(t,e,o){let s=e.nodeBefore,p=e.nodeAfter,f=e.index();return!(!(s&&p&&s.type.compatibleContent(p.type))||(!s.content.size&&e.parent.canReplace(f-1,f)?(o&&o(t.tr.delete(e.pos-s.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(f,f+1)||!p.isTextblock&&!(0,h.Mn)(t.doc,e.pos)||(o&&o(t.tr.clearIncompatible(e.pos,s.type,s.contentMatchAt(s.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,o))return!0;let O=e.parent.canReplace(e.index(),e.index()+1);if(O&&(f=(E=s.contentMatchAt(s.childCount)).findWrapping(p.type))&&E.matchType(f[0]||p.type).validEnd){if(o){let rt=e.pos+p.nodeSize,yt=b.HY.empty;for(let Xt=f.length-1;Xt>=0;Xt--)yt=b.HY.from(f[Xt].create(null,yt));yt=b.HY.from(s.copy(yt));let Wt=t.tr.step(new h.FC(e.pos-1,rt,e.pos,rt,new b.p2(yt,1,0),f.length,!0)),Qt=rt+2*f.length;(0,h.Mn)(Wt.doc,Qt)&&Wt.join(Qt),o(Wt.scrollIntoView())}return!0}let P=v.Y1.findFrom(e,1),$=P&&P.$from.blockRange(P.$to),V=$&&(0,h.k9)($);if(null!=V&&V>=e.depth)return o&&o(t.tr.lift($,V).scrollIntoView()),!0;if(O&&q(p,"start",!0)&&q(s,"end")){let rt=s,yt=[];for(;yt.push(rt),!rt.isTextblock;)rt=rt.lastChild;let Wt=p,Qt=1;for(;!Wt.isTextblock;Wt=Wt.firstChild)Qt++;if(rt.canReplace(rt.childCount,rt.childCount,Wt.content)){if(o){let Xt=b.HY.empty;for(let pe=yt.length-1;pe>=0;pe--)Xt=b.HY.from(yt[pe].copy(Xt));o(t.tr.step(new h.FC(e.pos-yt.length,e.pos+p.nodeSize,e.pos+Qt,e.pos+p.nodeSize-Qt,new b.p2(Xt,yt.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function it(t){return function(e,o){let s=e.selection,p=t<0?s.$from:s.$to,f=p.depth;for(;p.node(f).isInline;){if(!f)return!1;f--}return!!p.node(f).isTextblock&&(o&&o(e.tr.setSelection(v.Bs.create(e.doc,t<0?p.start(f):p.end(f)))),!0)}}const U=it(-1),Q=it(1);function kt(t,e=null){return function(o,s){let p=!1;for(let f=0;f<o.selection.ranges.length&&!p;f++){let{$from:{pos:E},$to:{pos:O}}=o.selection.ranges[f];o.doc.nodesBetween(E,O,(P,$)=>{if(p)return!1;if(P.isTextblock&&!P.hasMarkup(t,e))if(P.type==t)p=!0;else{let V=o.doc.resolve($),rt=V.index();p=V.parent.canReplaceWith(rt,rt+1,t)}})}if(!p)return!1;if(s){let f=o.tr;for(let E=0;E<o.selection.ranges.length;E++){let{$from:{pos:O},$to:{pos:P}}=o.selection.ranges[E];f.setBlockType(O,P,t,e)}s(f.scrollIntoView())}return!0}}function ve(...t){return function(e,o,s){for(let p=0;p<t.length;p++)if(t[p](e,o,s))return!0;return!1}}let xe=ve(J,G,mt),We=ve(J,Nt,xt);const ge={Enter:ve(At,Rt,gt,(e,o)=>{let{$from:s,$to:p}=e.selection;if(e.selection instanceof v.qv&&e.selection.node.isBlock)return!(!s.parentOffset||!(0,h.Ax)(e.doc,s.pos)||(o&&o(e.tr.split(s.pos).scrollIntoView()),0));if(!s.parent.isBlock)return!1;if(o){let f=p.parentOffset==p.parent.content.size,E=e.tr;(e.selection instanceof v.Bs||e.selection instanceof v.C1)&&E.deleteSelection();let O=0==s.depth?null:Ot(s.node(-1).contentMatchAt(s.indexAfter(-1))),P=t,$=P?[P]:f&&O?[{type:O}]:void 0,V=(0,h.Ax)(E.doc,E.mapping.map(s.pos),1,$);if(!$&&!V&&(0,h.Ax)(E.doc,E.mapping.map(s.pos),1,O?[{type:O}]:void 0)&&(O&&($=[{type:O}]),V=!0),V&&(E.split(E.mapping.map(s.pos),1,$),!f&&!s.parentOffset&&s.parent.type!=O)){let rt=E.mapping.map(s.before()),yt=E.doc.resolve(rt);O&&s.node(-1).canReplaceWith(yt.index(),yt.index()+1,O)&&E.setNodeMarkup(E.mapping.map(s.before()),O)}o(E.scrollIntoView())}return!0}),"Mod-Enter":St,Backspace:xe,"Mod-Backspace":xe,"Shift-Backspace":xe,Delete:We,"Mod-Delete":We,"Mod-a":(t,e)=>(e&&e(t.tr.setSelection(new v.C1(t.doc))),!0)},Qe={"Ctrl-h":ge.Backspace,"Alt-Backspace":ge["Mod-Backspace"],"Ctrl-d":ge.Delete,"Ctrl-Alt-Backspace":ge["Mod-Delete"],"Alt-Delete":ge["Mod-Delete"],"Alt-d":ge["Mod-Delete"],"Ctrl-a":U,"Ctrl-e":Q};for(let t in ge)Qe[t]=ge[t];function vt(t){const{state:e,transaction:o}=t;let{selection:s}=o,{doc:p}=o,{storedMarks:f}=o;return Oe(ie({},e),{apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return f},get selection(){return s},get doc(){return p},get tr(){return s=o.selection,p=o.doc,f=o.storedMarks,o}})}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();class D{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:o,state:s}=this,{view:p}=o,{tr:f}=s,E=this.buildProps(f);return Object.fromEntries(Object.entries(e).map(([O,P])=>[O,(...V)=>{const rt=P(...V)(E);return!f.getMeta("preventDispatch")&&!this.hasCustomState&&p.dispatch(f),rt}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,o=!0){const{rawCommands:s,editor:p,state:f}=this,{view:E}=p,O=[],P=!!e,$=e||f.tr,rt=Oe(ie({},Object.fromEntries(Object.entries(s).map(([yt,Wt])=>[yt,(...Xt)=>{const oe=this.buildProps($,o),pe=Wt(...Xt)(oe);return O.push(pe),rt}]))),{run:()=>(!P&&o&&!$.getMeta("preventDispatch")&&!this.hasCustomState&&E.dispatch($),O.every(yt=>!0===yt))});return rt}createCan(e){const{rawCommands:o,state:s}=this,f=e||s.tr,E=this.buildProps(f,!1),O=Object.fromEntries(Object.entries(o).map(([P,$])=>[P,(...V)=>$(...V)(Oe(ie({},E),{dispatch:void 0}))]));return Oe(ie({},O),{chain:()=>this.createChain(f,!1)})}buildProps(e,o=!0){const{rawCommands:s,editor:p,state:f}=this,{view:E}=p;f.storedMarks&&e.setStoredMarks(f.storedMarks);const O={tr:e,editor:p,view:E,state:vt({state:f,transaction:e}),dispatch:o?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(s).map(([P,$])=>[P,(...V)=>$(...V)(O)]))}};return O}}function S(t,e,o){return void 0===t.config[e]&&t.parent?S(t.parent,e,o):"function"==typeof t.config[e]?t.config[e].bind(Oe(ie({},o),{parent:t.parent?S(t.parent,e,o):null})):t.config[e]}function w(t){return{baseExtensions:t.filter(p=>"extension"===p.type),nodeExtensions:t.filter(p=>"node"===p.type),markExtensions:t.filter(p=>"mark"===p.type)}}function Z(t){const e=[],{nodeExtensions:o,markExtensions:s}=w(t),p=[...o,...s],f={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(E=>{const P=S(E,"addGlobalAttributes",{name:E.name,options:E.options,storage:E.storage});P&&P().forEach(V=>{V.types.forEach(rt=>{Object.entries(V.attributes).forEach(([yt,Wt])=>{e.push({type:rt,name:yt,attribute:ie(ie({},f),Wt)})})})})}),p.forEach(E=>{const P=S(E,"addAttributes",{name:E.name,options:E.options,storage:E.storage});if(!P)return;const $=P();Object.entries($).forEach(([V,rt])=>{const yt=ie(ie({},f),rt);(null==rt?void 0:rt.isRequired)&&void 0===(null==rt?void 0:rt.default)&&delete yt.default,e.push({type:E.name,name:V,attribute:yt})})}),e}function F(t,e){if("string"==typeof t){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Et(...t){return t.filter(e=>!!e).reduce((e,o)=>{const s=ie({},e);return Object.entries(o).forEach(([p,f])=>{s[p]=s[p]?"class"===p?[s[p],f].join(" "):"style"===p?[s[p],f].join("; "):f:f}),s},{})}function Bt(t,e){return e.filter(o=>o.attribute.rendered).map(o=>o.attribute.renderHTML?o.attribute.renderHTML(t.attrs)||{}:{[o.name]:t.attrs[o.name]}).reduce((o,s)=>Et(o,s),{})}function N(t){return"function"==typeof t}function a(t,e,...o){return N(t)?e?t.bind(e)(...o):t(...o):t}function d(t={}){return 0===Object.keys(t).length&&t.constructor===Object}function C(t){return"string"!=typeof t?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):"true"===t||"false"!==t&&t}function A(t,e){return t.style?t:Oe(ie({},t),{getAttrs:o=>{const s=t.getAttrs?t.getAttrs(o):t.attrs;if(!1===s)return!1;const p=e.reduce((f,E)=>{const O=E.attribute.parseHTML?E.attribute.parseHTML(o):C(o.getAttribute(E.name));return null==O?f:Oe(ie({},f),{[E.name]:O})},{});return ie(ie({},s),p)}})}function I(t){return Object.fromEntries(Object.entries(t).filter(([e,o])=>("attrs"!==e||!d(o))&&null!=o))}function W(t){var e;const o=Z(t),{nodeExtensions:s,markExtensions:p}=w(t),f=null===(e=s.find(P=>S(P,"topNode")))||void 0===e?void 0:e.name,E=Object.fromEntries(s.map(P=>{const $=o.filter(oe=>oe.type===P.name),V={name:P.name,options:P.options,storage:P.storage},rt=t.reduce((oe,pe)=>{const qe=S(pe,"extendNodeSchema",V);return ie(ie({},oe),qe?qe(P):{})},{}),yt=I(Oe(ie({},rt),{content:a(S(P,"content",V)),marks:a(S(P,"marks",V)),group:a(S(P,"group",V)),inline:a(S(P,"inline",V)),atom:a(S(P,"atom",V)),selectable:a(S(P,"selectable",V)),draggable:a(S(P,"draggable",V)),code:a(S(P,"code",V)),defining:a(S(P,"defining",V)),isolating:a(S(P,"isolating",V)),attrs:Object.fromEntries($.map(oe=>{var pe;return[oe.name,{default:null===(pe=null==oe?void 0:oe.attribute)||void 0===pe?void 0:pe.default}]}))})),Wt=a(S(P,"parseHTML",V));Wt&&(yt.parseDOM=Wt.map(oe=>A(oe,$)));const Qt=S(P,"renderHTML",V);Qt&&(yt.toDOM=oe=>Qt({node:oe,HTMLAttributes:Bt(oe,$)}));const Xt=S(P,"renderText",V);return Xt&&(yt.toText=Xt),[P.name,yt]})),O=Object.fromEntries(p.map(P=>{const $=o.filter(Xt=>Xt.type===P.name),V={name:P.name,options:P.options,storage:P.storage},rt=t.reduce((Xt,oe)=>{const pe=S(oe,"extendMarkSchema",V);return ie(ie({},Xt),pe?pe(P):{})},{}),yt=I(Oe(ie({},rt),{inclusive:a(S(P,"inclusive",V)),excludes:a(S(P,"excludes",V)),group:a(S(P,"group",V)),spanning:a(S(P,"spanning",V)),code:a(S(P,"code",V)),attrs:Object.fromEntries($.map(Xt=>{var oe;return[Xt.name,{default:null===(oe=null==Xt?void 0:Xt.attribute)||void 0===oe?void 0:oe.default}]}))})),Wt=a(S(P,"parseHTML",V));Wt&&(yt.parseDOM=Wt.map(Xt=>A(Xt,$)));const Qt=S(P,"renderHTML",V);return Qt&&(yt.toDOM=Xt=>Qt({mark:Xt,HTMLAttributes:Bt(Xt,$)})),[P.name,yt]}));return new b.V_({topNode:f,nodes:E,marks:O})}function tt(t,e){return e.nodes[t]||e.marks[t]||null}function Lt(t,e){return Array.isArray(e)?e.some(o=>("string"==typeof o?o:o.name)===t.name):e}const z=(t,e=500)=>{let o="";const s=t.parentOffset;return t.parent.nodesBetween(Math.max(0,s-e),s,(p,f,E,O)=>{var P,$;o+=((null===($=(P=p.type.spec).toText)||void 0===$?void 0:$.call(P,{node:p,pos:f,parent:E,index:O}))||p.textContent||"%leaf%").slice(0,Math.max(0,s-f))}),o};function B(t){return"[object RegExp]"===Object.prototype.toString.call(t)}class ot{constructor(e){this.find=e.find,this.handler=e.handler}}function Tt(t){var e;const{editor:o,from:s,to:p,text:f,rules:E,plugin:O}=t,{view:P}=o;if(P.composing)return!1;const $=P.state.doc.resolve(s);if($.parent.type.spec.code||(null===(e=$.nodeBefore||$.nodeAfter)||void 0===e?void 0:e.marks.find(yt=>yt.type.spec.code)))return!1;let V=!1;const rt=z($)+f;return E.forEach(yt=>{if(V)return;const Wt=((t,e)=>{if(B(e))return e.exec(t);const o=e(t);if(!o)return null;const s=[o.text];return s.index=o.index,s.input=t,s.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),s.push(o.replaceWith)),s})(rt,yt.find);if(!Wt)return;const Qt=P.state.tr,Xt=vt({state:P.state,transaction:Qt}),oe={from:s-(Wt[0].length-f.length),to:p},{commands:pe,chain:qe,can:me}=new D({editor:o,state:Xt});null===yt.handler({state:Xt,range:oe,match:Wt,commands:pe,chain:qe,can:me})||!Qt.steps.length||(Qt.setMeta(O,{transform:Qt,from:s,to:p,text:f}),P.dispatch(Qt),V=!0)}),V}function Jt(t){const{editor:e,rules:o}=t,s=new v.Sy({state:{init:()=>null,apply:(p,f)=>p.getMeta(s)||(p.selectionSet||p.docChanged?null:f)},props:{handleTextInput:(p,f,E,O)=>Tt({editor:e,from:f,to:E,text:O,rules:o,plugin:s}),handleDOMEvents:{compositionend:p=>(setTimeout(()=>{const{$cursor:f}=p.state.selection;f&&Tt({editor:e,from:f.pos,to:f.pos,text:"",rules:o,plugin:s})}),!1)},handleKeyDown(p,f){if("Enter"!==f.key)return!1;const{$cursor:E}=p.state.selection;return!!E&&Tt({editor:e,from:E.pos,to:E.pos,text:"\n",rules:o,plugin:s})}},isInputRules:!0});return s}function Kt(t){return"number"==typeof t}class ee{constructor(e){this.find=e.find,this.handler=e.handler}}function Me(t){const{editor:e,rules:o}=t;let s=null,p=!1,f=!1;return o.map(O=>new v.Sy({view(P){const $=V=>{var rt;s=(null===(rt=P.dom.parentElement)||void 0===rt?void 0:rt.contains(V.target))?P.dom.parentElement:null};return window.addEventListener("dragstart",$),{destroy(){window.removeEventListener("dragstart",$)}}},props:{handleDOMEvents:{drop:P=>(f=s===P.dom.parentElement,!1),paste:(P,$)=>{var V;const rt=null===(V=$.clipboardData)||void 0===V?void 0:V.getData("text/html");return p=!!(null==rt?void 0:rt.includes("data-pm-slice")),!1}}},appendTransaction:(P,$,V)=>{const rt=P[0],yt="paste"===rt.getMeta("uiEvent")&&!p,Wt="drop"===rt.getMeta("uiEvent")&&!f;if(!yt&&!Wt)return;const Qt=$.doc.content.findDiffStart(V.doc.content),Xt=$.doc.content.findDiffEnd(V.doc.content);if(!Kt(Qt)||!Xt||Qt===Xt.b)return;const oe=V.tr,pe=vt({state:V,transaction:oe});return function(t){const{editor:e,state:o,from:s,to:p,rule:f}=t,{commands:E,chain:O,can:P}=new D({editor:e,state:o}),$=[];return o.doc.nodesBetween(s,p,(rt,yt)=>{if(!rt.isTextblock||rt.type.spec.code)return;const Wt=Math.max(s,yt),Qt=Math.min(p,yt+rt.content.size);((t,e)=>{if(B(e))return[...t.matchAll(e)];const o=e(t);return o?o.map(s=>{const p=[s.text];return p.index=s.index,p.input=t,p.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),p.push(s.replaceWith)),p}):[]})(rt.textBetween(Wt-yt,Qt-yt,void 0,"\ufffc"),f.find).forEach(pe=>{if(void 0===pe.index)return;const qe=Wt+pe.index+1,me=qe+pe[0].length,un={from:o.tr.mapping.map(qe),to:o.tr.mapping.map(me)},bn=f.handler({state:o,range:un,match:pe,commands:E,chain:O,can:P});$.push(bn)})}),$.every(rt=>null!==rt)}({editor:e,state:pe,from:Math.max(Qt-1,0),to:Xt.b-1,rule:O})&&oe.steps.length?oe:void 0}}))}function Ce(t){const e=t.filter((o,s)=>t.indexOf(o)!==s);return[...new Set(e)]}class Mt{constructor(e,o){this.splittableMarks=[],this.editor=o,this.extensions=Mt.resolve(e),this.schema=W(this.extensions),this.extensions.forEach(s=>{var p;this.editor.extensionStorage[s.name]=s.storage;const f={name:s.name,options:s.options,storage:s.storage,editor:this.editor,type:tt(s.name,this.schema)};"mark"===s.type&&(null===(p=a(S(s,"keepOnSplit",f)))||void 0===p||p)&&this.splittableMarks.push(s.name);const E=S(s,"onBeforeCreate",f);E&&this.editor.on("beforeCreate",E);const O=S(s,"onCreate",f);O&&this.editor.on("create",O);const P=S(s,"onUpdate",f);P&&this.editor.on("update",P);const $=S(s,"onSelectionUpdate",f);$&&this.editor.on("selectionUpdate",$);const V=S(s,"onTransaction",f);V&&this.editor.on("transaction",V);const rt=S(s,"onFocus",f);rt&&this.editor.on("focus",rt);const yt=S(s,"onBlur",f);yt&&this.editor.on("blur",yt);const Wt=S(s,"onDestroy",f);Wt&&this.editor.on("destroy",Wt)})}static resolve(e){const o=Mt.sort(Mt.flatten(e)),s=Ce(o.map(p=>p.name));return s.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${s.map(p=>`'${p}'`).join(", ")}]. This can lead to issues.`),o}static flatten(e){return e.map(o=>{const p=S(o,"addExtensions",{name:o.name,options:o.options,storage:o.storage});return p?[o,...this.flatten(p())]:o}).flat(10)}static sort(e){return e.sort((s,p)=>{const f=S(s,"priority")||100,E=S(p,"priority")||100;return f>E?-1:f<E?1:0})}get commands(){return this.extensions.reduce((e,o)=>{const p=S(o,"addCommands",{name:o.name,options:o.options,storage:o.storage,editor:this.editor,type:tt(o.name,this.schema)});return p?ie(ie({},e),p()):e},{})}get plugins(){const{editor:e}=this,o=Mt.sort([...this.extensions].reverse()),s=[],p=[],f=o.map(E=>{const O={name:E.name,options:E.options,storage:E.storage,editor:e,type:tt(E.name,this.schema)},P=[],$=S(E,"addKeyboardShortcuts",O);let V={};if("mark"===E.type&&E.config.exitable&&(V.ArrowRight=()=>Sn.handleExit({editor:e,mark:E})),$){const Xt=Object.fromEntries(Object.entries($()).map(([oe,pe])=>[oe,()=>pe({editor:e})]));V=ie(ie({},V),Xt)}const rt=(0,T.h)(V);P.push(rt);const yt=S(E,"addInputRules",O);Lt(E,e.options.enableInputRules)&&yt&&s.push(...yt());const Wt=S(E,"addPasteRules",O);Lt(E,e.options.enablePasteRules)&&Wt&&p.push(...Wt());const Qt=S(E,"addProseMirrorPlugins",O);if(Qt){const Xt=Qt();P.push(...Xt)}return P}).flat();return[Jt({editor:e,rules:s}),...Me({editor:e,rules:p}),...f]}get attributes(){return Z(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:o}=w(this.extensions);return Object.fromEntries(o.filter(s=>!!S(s,"addNodeView")).map(s=>{const p=this.attributes.filter(P=>P.type===s.name),f={name:s.name,options:s.options,storage:s.storage,editor:e,type:F(s.name,this.schema)},E=S(s,"addNodeView",f);return E?[s.name,(P,$,V,rt)=>{const yt=Bt(P,p);return E()({editor:e,node:P,getPos:V,decorations:rt,HTMLAttributes:yt,extension:s})}]:[]}))}}function Ht(t){return"Object"===function(t){return Object.prototype.toString.call(t).slice(8,-1)}(t)&&t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function zt(t,e){const o=ie({},t);return Ht(t)&&Ht(e)&&Object.keys(e).forEach(s=>{Ht(e[s])?s in t?o[s]=zt(t[s],e[s]):Object.assign(o,{[s]:e[s]}):Object.assign(o,{[s]:e[s]})}),o}class Ut{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ie(ie({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(S(this,"addOptions",{name:this.name}))),this.storage=a(S(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ut(e)}configure(e={}){const o=this.extend();return o.options=zt(this.options,e),o.storage=a(S(o,"addStorage",{name:o.name,options:o.options})),o}extend(e={}){const o=new Ut(e);return o.parent=this,this.child=o,o.name=e.name?e.name:o.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${o.name}".`),o.options=a(S(o,"addOptions",{name:o.name})),o.storage=a(S(o,"addStorage",{name:o.name,options:o.options})),o}}function ne(t,e,o){const{from:s,to:p}=e,{blockSeparator:f="\n\n",textSerializers:E={}}=o||{};let O="",P=!0;return t.nodesBetween(s,p,($,V,rt,yt)=>{var Wt;const Qt=null==E?void 0:E[$.type.name];Qt?($.isBlock&&!P&&(O+=f,P=!0),rt&&(O+=Qt({node:$,pos:V,parent:rt,index:yt,range:e}))):$.isText?(O+=null===(Wt=null==$?void 0:$.text)||void 0===Wt?void 0:Wt.slice(Math.max(s,V)-V,p-V),P=!1):$.isBlock&&!P&&(O+=f,P=!0)}),O}function se(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,o])=>[e,o.spec.toText]))}const ae=Ut.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new v.Sy({key:new v.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:o}=t,{doc:s,selection:p}=e,{ranges:f}=p;return ne(s,{from:Math.min(...f.map(V=>V.$from.pos)),to:Math.max(...f.map(V=>V.$to.pos))},{textSerializers:se(o)})}}})]}});function we(t,e,o={strict:!0}){const s=Object.keys(e);return!s.length||s.every(p=>o.strict?e[p]===t[p]:B(e[p])?e[p].test(t[p]):e[p]===t[p])}function Be(t,e,o={}){return t.find(s=>s.type===e&&we(s.attrs,o))}function g(t,e,o={}){return!!Be(t,e,o)}function _(t,e,o={}){if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if(t.parentOffset===s.offset&&0!==s.offset&&(s=t.parent.childBefore(t.parentOffset)),!s.node)return;const p=Be([...s.node.marks],e,o);if(!p)return;let f=s.index,E=t.start()+s.offset,O=f+1,P=E+s.node.nodeSize;for(Be([...s.node.marks],e,o);f>0&&p.isInSet(t.parent.child(f-1).marks);)f-=1,E-=t.parent.child(f).nodeSize;for(;O<t.parent.childCount&&g([...t.parent.child(O).marks],e,o);)P+=t.parent.child(O).nodeSize,O+=1;return{from:E,to:P}}function x(t,e){if("string"==typeof t){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function H(t){return t instanceof v.Bs}function j(t=0,e=0,o=0){return Math.min(Math.max(t,e),o)}function ct(t,e=null){if(!e)return null;const o=v.Y1.atStart(t),s=v.Y1.atEnd(t);if("start"===e||!0===e)return o;if("end"===e)return s;const p=o.from,f=s.to;return"all"===e?v.Bs.create(t,j(0,p,f),j(t.content.size,p,f)):v.Bs.create(t,j(e,p,f),j(e,p,f))}function X(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Zt(t){const e=`<body>${t}</body>`;return(new window.DOMParser).parseFromString(e,"text/html").body}function te(t,e,o){if(o=ie({slice:!0,parseOptions:{}},o),"object"==typeof t&&null!==t)try{return Array.isArray(t)?b.HY.fromArray(t.map(s=>e.nodeFromJSON(s))):e.nodeFromJSON(t)}catch(s){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),te("",e,o)}if("string"==typeof t){const s=b.aw.fromSchema(e);return o.slice?s.parseSlice(Zt(t),o.parseOptions).content:s.parse(Zt(t),o.parseOptions)}return te("",e,o)}function sn(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function an(t,e,o={}){const{from:s,to:p,empty:f}=t.selection,E=e?F(e,t.schema):null,O=[];t.doc.nodesBetween(s,p,(rt,yt)=>{if(rt.isText)return;const Wt=Math.max(s,yt),Qt=Math.min(p,yt+rt.nodeSize);O.push({node:rt,from:Wt,to:Qt})});const P=p-s,$=O.filter(rt=>!E||E.name===rt.node.type.name).filter(rt=>we(rt.node.attrs,o,{strict:!1}));return f?!!$.length:$.reduce((rt,yt)=>rt+yt.to-yt.from,0)>=P}function kn(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function cn(t,e){const o="string"==typeof e?[e]:e;return Object.keys(t).reduce((s,p)=>(o.includes(p)||(s[p]=t[p]),s),{})}function gn(t,e,o={}){return te(t,e,{slice:!1,parseOptions:o})}function Co(t,e){const o=new h.wx(t);return e.forEach(s=>{s.steps.forEach(p=>{o.step(p)})}),o}function Qn(t){for(let e=0;e<t.edgeCount;e+=1){const{type:o}=t.edge(e);if(o.isTextblock&&!o.hasRequiredAttrs())return o}return null}function vo(t,e){const o=[];return t.descendants((s,p)=>{e(s)&&o.push({node:s,pos:p})}),o}function To(t,e,o){const s=[];return t.nodesBetween(e.from,e.to,(p,f)=>{o(p)&&s.push({node:p,pos:f})}),s}function Gn(t,e){for(let o=t.depth;o>0;o-=1){const s=t.node(o);if(e(s))return{pos:o>0?t.before(o):0,start:t.start(o),depth:o,node:s}}}function En(t){return e=>Gn(e.$from,t)}function Rn(t,e){const o=b.PW.fromSchema(e).serializeFragment(t),p=document.implementation.createHTMLDocument().createElement("div");return p.appendChild(o),p.innerHTML}function Bn(t){return W(Mt.resolve(t))}function Xn(t,e){const o=Bn(e);return Rn(b.NB.fromJSON(o,t).content,o)}function Eo(t,e){const o=Bn(e),s=Zt(t);return b.aw.fromSchema(o).parse(s).toJSON()}function Ln(t,e){return ne(t,{from:0,to:t.content.size},e)}function qn(t,e,o){const{blockSeparator:s="\n\n",textSerializers:p={}}=o||{},f=Bn(e);return Ln(b.NB.fromJSON(f,t),{blockSeparator:s,textSerializers:ie(ie({},se(f)),p)})}function Zn(t,e){const o=x(e,t.schema),{from:s,to:p,empty:f}=t.selection,E=[];f?(t.storedMarks&&E.push(...t.storedMarks),E.push(...t.selection.$head.marks())):t.doc.nodesBetween(s,p,P=>{E.push(...P.marks)});const O=E.find(P=>P.type.name===o.name);return O?ie({},O.attrs):{}}function An(t,e){const o=F(e,t.schema),{from:s,to:p}=t.selection,f=[];t.doc.nodesBetween(s,p,O=>{f.push(O)});const E=f.reverse().find(O=>O.type.name===o.name);return E?ie({},E.attrs):{}}function to(t,e){const o=kn("string"==typeof e?e:e.name,t.schema);return"node"===o?An(t,e):"mark"===o?Zn(t,e):{}}function _n(t,e=JSON.stringify){const o={};return t.filter(s=>{const p=e(s);return!Object.prototype.hasOwnProperty.call(o,p)&&(o[p]=!0)})}function Mo(t){const{mapping:e,steps:o}=t,s=[];return e.maps.forEach((p,f)=>{const E=[];if(p.ranges.length)p.forEach((O,P)=>{E.push({from:O,to:P})});else{const{from:O,to:P}=o[f];if(void 0===O||void 0===P)return;E.push({from:O,to:P})}E.forEach(({from:O,to:P})=>{const $=e.slice(f).map(O,-1),V=e.slice(f).map(P),rt=e.invert().map($,-1),yt=e.invert().map(V);s.push({oldRange:{from:rt,to:yt},newRange:{from:$,to:V}})})}),function(t){const e=_n(t);return 1===e.length?e:e.filter((o,s)=>!e.filter((f,E)=>E!==s).some(f=>o.oldRange.from>=f.oldRange.from&&o.oldRange.to<=f.oldRange.to&&o.newRange.from>=f.newRange.from&&o.newRange.to<=f.newRange.to))}(s)}function Dn(t,e=0){const s=t.type===t.type.schema.topNodeType?0:1,p=e,f=p+t.nodeSize,E=t.marks.map($=>{const V={type:$.type.name};return Object.keys($.attrs).length&&(V.attrs=ie({},$.attrs)),V}),O=ie({},t.attrs),P={type:t.type.name,from:p,to:f};return Object.keys(O).length&&(P.attrs=O),E.length&&(P.marks=E),t.content.childCount&&(P.content=[],t.forEach(($,V)=>{var rt;null===(rt=P.content)||void 0===rt||rt.push(Dn($,e+V+s))})),t.text&&(P.text=t.text),P}function Yn(t,e,o){const s=[];return t===e?o.resolve(t).marks().forEach(p=>{const E=_(o.resolve(t-1),p.type);!E||s.push(ie({mark:p},E))}):o.nodesBetween(t,e,(p,f)=>{s.push(...p.marks.map(E=>({from:f,to:f+p.nodeSize,mark:E})))}),s}function xn(t,e,o={}){const{empty:s,ranges:p}=t.selection,f=e?x(e,t.schema):null;if(s)return!!(t.storedMarks||t.selection.$from.marks()).filter(rt=>!f||f.name===rt.type.name).find(rt=>we(rt.attrs,o,{strict:!1}));let E=0;const O=[];if(p.forEach(({$from:rt,$to:yt})=>{const Wt=rt.pos,Qt=yt.pos;t.doc.nodesBetween(Wt,Qt,(Xt,oe)=>{if(!Xt.isText&&!Xt.marks.length)return;const pe=Math.max(Wt,oe),qe=Math.min(Qt,oe+Xt.nodeSize);E+=qe-pe,O.push(...Xt.marks.map(un=>({mark:un,from:pe,to:qe})))})}),0===E)return!1;const P=O.filter(rt=>!f||f.name===rt.mark.type.name).filter(rt=>we(rt.mark.attrs,o,{strict:!1})).reduce((rt,yt)=>rt+yt.to-yt.from,0),$=O.filter(rt=>!f||rt.mark.type!==f&&rt.mark.type.excludes(f)).reduce((rt,yt)=>rt+yt.to-yt.from,0);return(P>0?P+$:P)>=E}function Mn(t,e,o={}){if(!e)return an(t,null,o)||xn(t,null,o);const s=kn(e,t.schema);return"node"===s?an(t,e,o):"mark"===s&&xn(t,e,o)}function Pn(t,e){const{nodeExtensions:o}=w(e),s=o.find(E=>E.name===t);if(!s)return!1;const f=a(S(s,"group",{name:s.name,options:s.options,storage:s.storage}));return"string"==typeof f&&f.split(" ").includes("list")}function dn(t){var e;const o=null===(e=t.type.createAndFill())||void 0===e?void 0:e.toJSON(),s=t.toJSON();return JSON.stringify(o)===JSON.stringify(s)}function jn(t){return t instanceof v.qv}function ln(t,e,o){const p=t.state.doc.content.size,f=j(e,0,p),E=j(o,0,p),O=t.coordsAtPos(f),P=t.coordsAtPos(E,-1),$=Math.min(O.top,P.top),V=Math.max(O.bottom,P.bottom),rt=Math.min(O.left,P.left),yt=Math.max(O.right,P.right),pe={top:$,bottom:V,left:rt,right:yt,width:yt-rt,height:V-$,x:rt,y:$};return Oe(ie({},pe),{toJSON:()=>pe})}function Nn(t,e,o){return Object.fromEntries(Object.entries(o).filter(([s])=>{const p=t.find(f=>f.type===e&&f.name===s);return!!p&&p.attribute.keepOnSplit}))}function Vn(t,e){const o=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(o){const s=o.filter(p=>null==e?void 0:e.includes(p.type.name));t.tr.ensureMarks(s)}}const fn=(t,e)=>{const o=En(E=>E.type===e)(t.selection);if(!o)return!0;const s=t.doc.resolve(Math.max(0,o.pos-1)).before(o.depth);if(void 0===s)return!0;const p=t.doc.nodeAt(s);return o.node.type===(null==p?void 0:p.type)&&(0,h.Mn)(t.doc,o.pos)&&t.join(o.pos),!0},Hn=(t,e)=>{const o=En(E=>E.type===e)(t.selection);if(!o)return!0;const s=t.doc.resolve(o.start).after(o.depth);if(void 0===s)return!0;const p=t.doc.nodeAt(s);return o.node.type===(null==p?void 0:p.type)&&(0,h.Mn)(t.doc,s)&&t.join(s),!0};var xo=Object.freeze({__proto__:null,blur:()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var o;t.isDestroyed||(e.dom.blur(),null===(o=null==window?void 0:window.getSelection())||void 0===o||o.removeAllRanges())}),!0),clearContent:(t=!1)=>({commands:e})=>e.setContent("",t),clearNodes:()=>({state:t,tr:e,dispatch:o})=>{const{selection:s}=e,{ranges:p}=s;return o&&p.forEach(({$from:f,$to:E})=>{t.doc.nodesBetween(f.pos,E.pos,(O,P)=>{if(O.type.isText)return;const{doc:$,mapping:V}=e,rt=$.resolve(V.map(P)),yt=$.resolve(V.map(P+O.nodeSize)),Wt=rt.blockRange(yt);if(!Wt)return;const Qt=(0,h.k9)(Wt);if(O.type.isTextblock){const{defaultType:Xt}=rt.parent.contentMatchAt(rt.index());e.setNodeMarkup(Wt.start,Xt)}(Qt||0===Qt)&&e.lift(Wt,Qt)})}),!0},command:t=>e=>t(e),createParagraphNear:()=>({state:t,dispatch:e})=>Rt(t,e),deleteCurrentNode:()=>({tr:t,dispatch:e})=>{const{selection:o}=t,s=o.$anchor.node();if(s.content.size>0)return!1;const p=t.selection.$anchor;for(let f=p.depth;f>0;f-=1)if(p.node(f).type===s.type){if(e){const O=p.before(f),P=p.after(f);t.delete(O,P).scrollIntoView()}return!0}return!1},deleteNode:t=>({tr:e,state:o,dispatch:s})=>{const p=F(t,o.schema),f=e.selection.$anchor;for(let E=f.depth;E>0;E-=1)if(f.node(E).type===p){if(s){const P=f.before(E),$=f.after(E);e.delete(P,$).scrollIntoView()}return!0}return!1},deleteRange:t=>({tr:e,dispatch:o})=>{const{from:s,to:p}=t;return o&&e.delete(s,p),!0},deleteSelection:()=>({state:t,dispatch:e})=>J(t,e),enter:()=>({commands:t})=>t.keyboardShortcut("Enter"),exitCode:()=>({state:t,dispatch:e})=>St(t,e),extendMarkRange:(t,e={})=>({tr:o,state:s,dispatch:p})=>{const f=x(t,s.schema),{doc:E,selection:O}=o,{$from:P,from:$,to:V}=O;if(p){const rt=_(P,f,e);if(rt&&rt.from<=$&&rt.to>=V){const yt=v.Bs.create(E,rt.from,rt.to);o.setSelection(yt)}}return!0},first:t=>e=>{const o="function"==typeof t?t(e):t;for(let s=0;s<o.length;s+=1)if(o[s](e))return!0;return!1},focus:(t=null,e={})=>({editor:o,view:s,tr:p,dispatch:f})=>{e=ie({scrollIntoView:!0},e);const E=()=>{X()&&s.dom.focus(),requestAnimationFrame(()=>{o.isDestroyed||(s.focus(),(null==e?void 0:e.scrollIntoView)&&o.commands.scrollIntoView())})};if(s.hasFocus()&&null===t||!1===t)return!0;if(f&&null===t&&!H(o.state.selection))return E(),!0;const O=ct(p.doc,t)||o.state.selection,P=o.state.selection.eq(O);return f&&(P||p.setSelection(O),P&&p.storedMarks&&p.setStoredMarks(p.storedMarks),E()),!0},forEach:(t,e)=>o=>t.every((s,p)=>e(s,Oe(ie({},o),{index:p}))),insertContent:(t,e)=>({tr:o,commands:s})=>s.insertContentAt({from:o.selection.from,to:o.selection.to},t,e),insertContentAt:(t,e,o)=>({tr:s,dispatch:p,editor:f})=>{if(p){o=ie({parseOptions:{},updateSelection:!0},o);const E=te(e,f.schema,{parseOptions:ie({preserveWhitespace:"full"},o.parseOptions)});if("<>"===E.toString())return!0;let{from:O,to:P}="number"==typeof t?{from:t,to:t}:t,$=!0,V=!0;if(((t=>t.toString().startsWith("<"))(E)?E:[E]).forEach(yt=>{yt.check(),$=!!$&&yt.isText&&0===yt.marks.length,V=!!V&&yt.isBlock}),O===P&&V){const{parent:yt}=s.doc.resolve(O);yt.isTextblock&&!yt.type.spec.code&&!yt.childCount&&(O-=1,P+=1)}$?s.insertText(e,O,P):s.replaceWith(O,P,E),o.updateSelection&&function(t,e,o){const s=t.steps.length-1;if(s<e)return;const p=t.steps[s];if(!(p instanceof h.Pu||p instanceof h.FC))return;let E=0;t.mapping.maps[s].forEach((O,P,$,V)=>{0===E&&(E=V)}),t.setSelection(v.Y1.near(t.doc.resolve(E),-1))}(s,s.steps.length-1)}return!0},joinUp:()=>({state:t,dispatch:e})=>((t,e)=>{let p,o=t.selection,s=o instanceof v.qv;if(s){if(o.node.isTextblock||!(0,h.Mn)(t.doc,o.from))return!1;p=o.from}else if(p=(0,h.GJ)(t.doc,o.from,-1),null==p)return!1;if(e){let f=t.tr.join(p);s&&f.setSelection(v.qv.create(f.doc,p-t.doc.resolve(p).nodeBefore.nodeSize)),e(f.scrollIntoView())}return!0})(t,e),joinDown:()=>({state:t,dispatch:e})=>((t,e)=>{let s,o=t.selection;if(o instanceof v.qv){if(o.node.isTextblock||!(0,h.Mn)(t.doc,o.to))return!1;s=o.to}else if(s=(0,h.GJ)(t.doc,o.to,1),null==s)return!1;return e&&e(t.tr.join(s).scrollIntoView()),!0})(t,e),joinBackward:()=>({state:t,dispatch:e})=>G(t,e),joinForward:()=>({state:t,dispatch:e})=>Nt(t,e),keyboardShortcut:t=>({editor:e,view:o,tr:s,dispatch:p})=>{const f=function(t){const e=t.split(/-(?!$)/);let s,p,f,E,o=e[e.length-1];"Space"===o&&(o=" ");for(let O=0;O<e.length-1;O+=1){const P=e[O];if(/^(cmd|meta|m)$/i.test(P))E=!0;else if(/^a(lt)?$/i.test(P))s=!0;else if(/^(c|ctrl|control)$/i.test(P))p=!0;else if(/^s(hift)?$/i.test(P))f=!0;else{if(!/^mod$/i.test(P))throw new Error(`Unrecognized modifier name: ${P}`);X()||sn()?E=!0:p=!0}}return s&&(o=`Alt-${o}`),p&&(o=`Ctrl-${o}`),E&&(o=`Meta-${o}`),f&&(o=`Shift-${o}`),o}(t).split(/-(?!$)/),E=f.find($=>!["Alt","Ctrl","Meta","Shift"].includes($)),O=new KeyboardEvent("keydown",{key:"Space"===E?" ":E,altKey:f.includes("Alt"),ctrlKey:f.includes("Ctrl"),metaKey:f.includes("Meta"),shiftKey:f.includes("Shift"),bubbles:!0,cancelable:!0}),P=e.captureTransaction(()=>{o.someProp("handleKeyDown",$=>$(o,O))});return null==P||P.steps.forEach($=>{const V=$.map(s.mapping);V&&p&&s.maybeStep(V)}),!0},lift:(t,e={})=>({state:o,dispatch:s})=>!!an(o,F(t,o.schema),e)&&((t,e)=>{let{$from:o,$to:s}=t.selection,p=o.blockRange(s),f=p&&(0,h.k9)(p);return null!=f&&(e&&e(t.tr.lift(p,f).scrollIntoView()),!0)})(o,s),liftEmptyBlock:()=>({state:t,dispatch:e})=>gt(t,e),liftListItem:t=>({state:e,dispatch:o})=>function(t){return function(e,o){let{$from:s,$to:p}=e.selection,f=s.blockRange(p,E=>E.childCount>0&&E.firstChild.type==t);return!!f&&(!o||(s.node(f.depth-1).type==t?function(t,e,o,s){let p=t.tr,f=s.end,E=s.$to.end(s.depth);f<E&&(p.step(new h.FC(f-1,E,f,E,new b.p2(b.HY.from(o.create(null,s.parent.copy())),1,0),1,!0)),s=new b.Ts(p.doc.resolve(s.$from.pos),p.doc.resolve(E),s.depth));const O=(0,h.k9)(s);if(null==O)return!1;p.lift(s,O);let P=p.mapping.map(f,-1)-1;return(0,h.Mn)(p.doc,P)&&p.join(P),e(p.scrollIntoView()),!0}(e,o,t,f):function(t,e,o){let s=t.tr,p=o.parent;for(let Wt=o.end,Qt=o.endIndex-1,Xt=o.startIndex;Qt>Xt;Qt--)Wt-=p.child(Qt).nodeSize,s.delete(Wt-1,Wt+1);let f=s.doc.resolve(o.start),E=f.nodeAfter;if(s.mapping.map(o.end)!=o.start+f.nodeAfter.nodeSize)return!1;let O=0==o.startIndex,P=o.endIndex==p.childCount,$=f.node(-1),V=f.index(-1);if(!$.canReplace(V+(O?0:1),V+1,E.content.append(P?b.HY.empty:b.HY.from(p))))return!1;let rt=f.pos,yt=rt+E.nodeSize;return s.step(new h.FC(rt-(O?1:0),yt+(P?1:0),rt+1,yt-1,new b.p2((O?b.HY.empty:b.HY.from(p.copy(b.HY.empty))).append(P?b.HY.empty:b.HY.from(p.copy(b.HY.empty))),O?0:1,P?0:1),O?0:1)),e(s.scrollIntoView()),!0}(e,o,f)))}}(F(t,e.schema))(e,o),newlineInCode:()=>({state:t,dispatch:e})=>At(t,e),resetAttributes:(t,e)=>({tr:o,state:s,dispatch:p})=>{let f=null,E=null;const O=kn("string"==typeof t?t:t.name,s.schema);return!!O&&("node"===O&&(f=F(t,s.schema)),"mark"===O&&(E=x(t,s.schema)),p&&o.selection.ranges.forEach(P=>{s.doc.nodesBetween(P.$from.pos,P.$to.pos,($,V)=>{f&&f===$.type&&o.setNodeMarkup(V,void 0,cn($.attrs,e)),E&&$.marks.length&&$.marks.forEach(rt=>{E===rt.type&&o.addMark(V,V+$.nodeSize,E.create(cn(rt.attrs,e)))})})}),!0)},scrollIntoView:()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),selectAll:()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),selectNodeBackward:()=>({state:t,dispatch:e})=>mt(t,e),selectNodeForward:()=>({state:t,dispatch:e})=>xt(t,e),selectParentNode:()=>({state:t,dispatch:e})=>((t,e)=>{let p,{$from:o,to:s}=t.selection,f=o.sharedDepth(s);return 0!=f&&(p=o.before(f),e&&e(t.tr.setSelection(v.qv.create(t.doc,p))),!0)})(t,e),selectTextblockEnd:()=>({state:t,dispatch:e})=>Q(t,e),selectTextblockStart:()=>({state:t,dispatch:e})=>U(t,e),setContent:(t,e=!1,o={})=>({tr:s,editor:p,dispatch:f})=>{const{doc:E}=s,O=gn(t,p.schema,o);return f&&s.replaceWith(0,E.content.size,O).setMeta("preventUpdate",!e),!0},setMark:(t,e={})=>({tr:o,state:s,dispatch:p})=>{const{selection:f}=o,{empty:E,ranges:O}=f,P=x(t,s.schema);if(p)if(E){const $=Zn(s,P);o.addStoredMark(P.create(ie(ie({},$),e)))}else O.forEach($=>{const V=$.$from.pos,rt=$.$to.pos;s.doc.nodesBetween(V,rt,(yt,Wt)=>{const Qt=Math.max(Wt,V),Xt=Math.min(Wt+yt.nodeSize,rt);yt.marks.find(pe=>pe.type===P)?yt.marks.forEach(pe=>{P===pe.type&&o.addMark(Qt,Xt,P.create(ie(ie({},pe.attrs),e)))}):o.addMark(Qt,Xt,P.create(e))})});return function(t,e,o){var s;const{selection:p}=e;let f=null;if(H(p)&&(f=p.$cursor),f){const O=null!==(s=t.storedMarks)&&void 0!==s?s:f.marks();return!!o.isInSet(O)||!O.some(P=>P.type.excludes(o))}const{ranges:E}=p;return E.some(({$from:O,$to:P})=>{let $=0===O.depth&&t.doc.inlineContent&&t.doc.type.allowsMarkType(o);return t.doc.nodesBetween(O.pos,P.pos,(V,rt,yt)=>{if($)return!1;if(V.isInline){const Wt=!yt||yt.type.allowsMarkType(o),Qt=!!o.isInSet(V.marks)||!V.marks.some(Xt=>Xt.type.excludes(o));$=Wt&&Qt}return!$}),$})}(s,o,P)},setMeta:(t,e)=>({tr:o})=>(o.setMeta(t,e),!0),setNode:(t,e={})=>({state:o,dispatch:s,chain:p})=>{const f=F(t,o.schema);return f.isTextblock?p().command(({commands:E})=>!!kt(f,e)(o)||E.clearNodes()).command(({state:E})=>kt(f,e)(E,s)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:t=>({tr:e,dispatch:o})=>{if(o){const{doc:s}=e,p=j(t,0,s.content.size),f=v.qv.create(s,p);e.setSelection(f)}return!0},setTextSelection:t=>({tr:e,dispatch:o})=>{if(o){const{doc:s}=e,{from:p,to:f}="number"==typeof t?{from:t,to:t}:t,E=v.Bs.atStart(s).from,O=v.Bs.atEnd(s).to,P=j(p,E,O),$=j(f,E,O),V=v.Bs.create(s,P,$);e.setSelection(V)}return!0},sinkListItem:t=>({state:e,dispatch:o})=>function(t){return function(e,o){let{$from:s,$to:p}=e.selection,f=s.blockRange(p,$=>$.childCount>0&&$.firstChild.type==t);if(!f)return!1;let E=f.startIndex;if(0==E)return!1;let O=f.parent,P=O.child(E-1);if(P.type!=t)return!1;if(o){let $=P.lastChild&&P.lastChild.type==O.type,V=b.HY.from($?t.create():null),rt=new b.p2(b.HY.from(t.create(null,b.HY.from(O.type.create(null,V)))),$?3:1,0),yt=f.start,Wt=f.end;o(e.tr.step(new h.FC(yt-($?3:1),Wt,yt,Wt,rt,1,!0)).scrollIntoView())}return!0}}(F(t,e.schema))(e,o),splitBlock:({keepMarks:t=!0}={})=>({tr:e,state:o,dispatch:s,editor:p})=>{const{selection:f,doc:E}=e,{$from:O,$to:P}=f,V=Nn(p.extensionManager.attributes,O.node().type.name,O.node().attrs);if(f instanceof v.qv&&f.node.isBlock)return!(!O.parentOffset||!(0,h.Ax)(E,O.pos)||(s&&(t&&Vn(o,p.extensionManager.splittableMarks),e.split(O.pos).scrollIntoView()),0));if(!O.parent.isBlock)return!1;if(s){const rt=P.parentOffset===P.parent.content.size;f instanceof v.Bs&&e.deleteSelection();const yt=0===O.depth?void 0:Qn(O.node(-1).contentMatchAt(O.indexAfter(-1)));let Wt=rt&&yt?[{type:yt,attrs:V}]:void 0,Qt=(0,h.Ax)(e.doc,e.mapping.map(O.pos),1,Wt);if(!Wt&&!Qt&&(0,h.Ax)(e.doc,e.mapping.map(O.pos),1,yt?[{type:yt}]:void 0)&&(Qt=!0,Wt=yt?[{type:yt,attrs:V}]:void 0),Qt&&(e.split(e.mapping.map(O.pos),1,Wt),yt&&!rt&&!O.parentOffset&&O.parent.type!==yt)){const Xt=e.mapping.map(O.before()),oe=e.doc.resolve(Xt);O.node(-1).canReplaceWith(oe.index(),oe.index()+1,yt)&&e.setNodeMarkup(e.mapping.map(O.before()),yt)}t&&Vn(o,p.extensionManager.splittableMarks),e.scrollIntoView()}return!0},splitListItem:t=>({tr:e,state:o,dispatch:s,editor:p})=>{var f;const E=F(t,o.schema),{$from:O,$to:P}=o.selection,$=o.selection.node;if($&&$.isBlock||O.depth<2||!O.sameParent(P))return!1;const V=O.node(-1);if(V.type!==E)return!1;const rt=p.extensionManager.attributes;if(0===O.parent.content.size&&O.node(-1).childCount===O.indexAfter(-1)){if(2===O.depth||O.node(-3).type!==E||O.index(-2)!==O.node(-2).childCount-1)return!1;if(s){let oe=b.HY.empty;const pe=O.index(-1)?1:O.index(-2)?2:3;for(let Wn=O.depth-pe;Wn>=O.depth-3;Wn-=1)oe=b.HY.from(O.node(Wn).copy(oe));const qe=O.indexAfter(-1)<O.node(-2).childCount?1:O.indexAfter(-2)<O.node(-3).childCount?2:3,me=Nn(rt,O.node().type.name,O.node().attrs),un=(null===(f=E.contentMatch.defaultType)||void 0===f?void 0:f.createAndFill(me))||void 0;oe=oe.append(b.HY.from(E.createAndFill(null,un)||void 0));const bn=O.before(O.depth-(pe-1));e.replace(bn,O.after(-qe),new b.p2(oe,4-pe,0));let Un=-1;e.doc.nodesBetween(bn,e.doc.content.size,(Wn,Vo)=>{if(Un>-1)return!1;Wn.isTextblock&&0===Wn.content.size&&(Un=Vo+1)}),Un>-1&&e.setSelection(v.Bs.near(e.doc.resolve(Un))),e.scrollIntoView()}return!0}const yt=P.pos===O.end()?V.contentMatchAt(0).defaultType:null,Wt=Nn(rt,V.type.name,V.attrs),Qt=Nn(rt,O.node().type.name,O.node().attrs);e.delete(O.pos,P.pos);const Xt=yt?[{type:E,attrs:Wt},{type:yt,attrs:Qt}]:[{type:E,attrs:Wt}];return!!(0,h.Ax)(e.doc,O.pos,2)&&(s&&e.split(O.pos,2,Xt).scrollIntoView(),!0)},toggleList:(t,e)=>({editor:o,tr:s,state:p,dispatch:f,chain:E,commands:O,can:P})=>{const{extensions:$}=o.extensionManager,V=F(t,p.schema),rt=F(e,p.schema),{selection:yt}=p,{$from:Wt,$to:Qt}=yt,Xt=Wt.blockRange(Qt);if(!Xt)return!1;const oe=En(pe=>Pn(pe.type.name,$))(yt);if(Xt.depth>=1&&oe&&Xt.depth-oe.depth<=1){if(oe.node.type===V)return O.liftListItem(rt);if(Pn(oe.node.type.name,$)&&V.validContent(oe.node.content)&&f)return E().command(()=>(s.setNodeMarkup(oe.pos,V),!0)).command(()=>fn(s,V)).command(()=>Hn(s,V)).run()}return E().command(()=>!!P().wrapInList(V)||O.clearNodes()).wrapInList(V).command(()=>fn(s,V)).command(()=>Hn(s,V)).run()},toggleMark:(t,e={},o={})=>({state:s,commands:p})=>{const{extendEmptyMarkRange:f=!1}=o,E=x(t,s.schema);return xn(s,E,e)?p.unsetMark(E,{extendEmptyMarkRange:f}):p.setMark(E,e)},toggleNode:(t,e,o={})=>({state:s,commands:p})=>{const f=F(t,s.schema),E=F(e,s.schema);return an(s,f,o)?p.setNode(E):p.setNode(f,o)},toggleWrap:(t,e={})=>({state:o,commands:s})=>{const p=F(t,o.schema);return an(o,p,e)?s.lift(p):s.wrapIn(p,e)},undoInputRule:()=>({state:t,dispatch:e})=>{const o=t.plugins;for(let s=0;s<o.length;s+=1){const p=o[s];let f;if(p.spec.isInputRules&&(f=p.getState(t))){if(e){const E=t.tr,O=f.transform;for(let P=O.steps.length-1;P>=0;P-=1)E.step(O.steps[P].invert(O.docs[P]));if(f.text){const P=E.doc.resolve(f.from).marks();E.replaceWith(f.from,f.to,t.schema.text(f.text,P))}else E.delete(f.from,f.to)}return!0}}return!1},unsetAllMarks:()=>({tr:t,dispatch:e})=>{const{selection:o}=t,{empty:s,ranges:p}=o;return s||e&&p.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos)}),!0},unsetMark:(t,e={})=>({tr:o,state:s,dispatch:p})=>{var f;const{extendEmptyMarkRange:E=!1}=e,{selection:O}=o,P=x(t,s.schema),{$from:$,empty:V,ranges:rt}=O;if(!p)return!0;if(V&&E){let{from:yt,to:Wt}=O;const Qt=null===(f=$.marks().find(oe=>oe.type===P))||void 0===f?void 0:f.attrs,Xt=_($,P,Qt);Xt&&(yt=Xt.from,Wt=Xt.to),o.removeMark(yt,Wt,P)}else rt.forEach(yt=>{o.removeMark(yt.$from.pos,yt.$to.pos,P)});return o.removeStoredMark(P),!0},updateAttributes:(t,e={})=>({tr:o,state:s,dispatch:p})=>{let f=null,E=null;const O=kn("string"==typeof t?t:t.name,s.schema);return!!O&&("node"===O&&(f=F(t,s.schema)),"mark"===O&&(E=x(t,s.schema)),p&&o.selection.ranges.forEach(P=>{const $=P.$from.pos,V=P.$to.pos;s.doc.nodesBetween($,V,(rt,yt)=>{f&&f===rt.type&&o.setNodeMarkup(yt,void 0,ie(ie({},rt.attrs),e)),E&&rt.marks.length&&rt.marks.forEach(Wt=>{if(E===Wt.type){const Qt=Math.max(yt,$),Xt=Math.min(yt+rt.nodeSize,V);o.addMark(Qt,Xt,E.create(ie(ie({},Wt.attrs),e)))}})})}),!0)},wrapIn:(t,e={})=>({state:o,dispatch:s})=>function(t,e=null){return function(o,s){let{$from:p,$to:f}=o.selection,E=p.blockRange(f),O=E&&(0,h.nd)(E,t,e);return!!O&&(s&&s(o.tr.wrap(E,O).scrollIntoView()),!0)}}(F(t,o.schema),e)(o,s),wrapInList:(t,e={})=>({state:o,dispatch:s})=>function(t,e=null){return function(o,s){let{$from:p,$to:f}=o.selection,E=p.blockRange(f),O=!1,P=E;if(!E)return!1;if(E.depth>=2&&p.node(E.depth-1).type.compatibleContent(t)&&0==E.startIndex){if(0==p.index(E.depth-1))return!1;let V=o.doc.resolve(E.start-2);P=new b.Ts(V,V,E.depth),E.endIndex<E.parent.childCount&&(E=new b.Ts(p,o.doc.resolve(f.end(E.depth)),E.depth)),O=!0}let $=(0,h.nd)(P,t,e,E);return!!$&&(s&&s(function(t,e,o,s,p){let f=b.HY.empty;for(let V=o.length-1;V>=0;V--)f=b.HY.from(o[V].type.create(o[V].attrs,f));t.step(new h.FC(e.start-(s?2:0),e.end,e.start,e.end,new b.p2(f,0,0),o.length,!0));let E=0;for(let V=0;V<o.length;V++)o[V].type==p&&(E=V+1);let O=o.length-E,P=e.start+o.length-(s?2:0),$=e.parent;for(let V=e.startIndex,rt=e.endIndex,yt=!0;V<rt;V++,yt=!1)!yt&&(0,h.Ax)(t.doc,P,O)&&(t.split(P,O),P+=2*O),P+=$.child(V).nodeSize;return t}(o.tr,E,$,O,t).scrollIntoView()),!0)}}(F(t,o.schema),e)(o,s)});const Po=Ut.create({name:"commands",addCommands:()=>ie({},xo)}),So=Ut.create({name:"editable",addProseMirrorPlugins(){return[new v.Sy({key:new v.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),io=Ut.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new v.Sy({key:new v.H$("focusEvents"),props:{handleDOMEvents:{focus:(e,o)=>{t.isFocused=!0;const s=t.state.tr.setMeta("focus",{event:o}).setMeta("addToHistory",!1);return e.dispatch(s),!1},blur:(e,o)=>{t.isFocused=!1;const s=t.state.tr.setMeta("blur",{event:o}).setMeta("addToHistory",!1);return e.dispatch(s),!1}}}})]}}),Io=Ut.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:E})=>[()=>E.undoInputRule(),()=>E.command(({tr:O})=>{const{selection:P,doc:$}=O,{empty:V,$anchor:rt}=P,{pos:yt,parent:Wt}=rt,Qt=v.Y1.atStart($).from===yt;return!(!(V&&Qt&&Wt.type.isTextblock)||Wt.textContent.length)&&E.clearNodes()}),()=>E.deleteSelection(),()=>E.joinBackward(),()=>E.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:E})=>[()=>E.deleteSelection(),()=>E.deleteCurrentNode(),()=>E.joinForward(),()=>E.selectNodeForward()]),s={Enter:()=>this.editor.commands.first(({commands:E})=>[()=>E.newlineInCode(),()=>E.createParagraphNear(),()=>E.liftEmptyBlock(),()=>E.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},p=ie({},s),f=Oe(ie({},s),{"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return X()||sn()?f:p},addProseMirrorPlugins(){return[new v.Sy({key:new v.H$("clearDocument"),appendTransaction:(t,e,o)=>{if(!t.some(Qt=>Qt.docChanged)||e.doc.eq(o.doc))return;const{empty:p,from:f,to:E}=e.selection,O=v.Y1.atStart(e.doc).from,P=v.Y1.atEnd(e.doc).to,$=f===O&&E===P,V=0===o.doc.textBetween(0,o.doc.content.size," "," ").length;if(p||!$||!V)return;const rt=o.tr,yt=vt({state:o,transaction:rt}),{commands:Wt}=new D({editor:this.editor,state:yt});return Wt.clearNodes(),rt.steps.length?rt:void 0}})]}}),ko=Ut.create({name:"tabindex",addProseMirrorPlugins(){return[new v.Sy({key:new v.H$("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var zn=Object.freeze({__proto__:null,ClipboardTextSerializer:ae,Commands:Po,Editable:So,FocusEvents:io,Keymap:Io,Tabindex:ko});function Ro(t,e){const o=document.querySelector("style[data-tiptap-style]");if(null!==o)return o;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}class Ko extends class{constructor(){this.callbacks={}}on(e,o){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(o),this}emit(e,...o){const s=this.callbacks[e];return s&&s.forEach(p=>p.apply(this,o)),this}off(e,o){const s=this.callbacks[e];return s&&(o?this.callbacks[e]=s.filter(p=>p!==o):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Ro('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(e={}){this.options=ie(ie({},this.options),e),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,o=!0){this.setOptions({editable:e}),o&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,o){const s=N(o)?o(e,[...this.state.plugins]):[...this.state.plugins,e],p=this.state.reconfigure({plugins:s});this.view.updateState(p)}unregisterPlugin(e){if(this.isDestroyed)return;const o="string"==typeof e?`${e}$`:e.key,s=this.state.reconfigure({plugins:this.state.plugins.filter(p=>!p.key.startsWith(o))});this.view.updateState(s)}createExtensionManager(){const o=[...this.options.enableCoreExtensions?Object.values(zn):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(null==s?void 0:s.type));this.extensionManager=new Mt(o,this)}createCommandManager(){this.commandManager=new D({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=gn(this.options.content,this.schema,this.options.parseOptions),o=ct(e,this.options.autofocus);this.view=new l.tk(this.options.element,Oe(ie({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:v.yy.create({doc:e,selection:o||void 0})}));const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const o=this.capturedTransaction;return this.capturedTransaction=null,o}dispatchTransaction(e){if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach(E=>{var O;return null===(O=this.capturedTransaction)||void 0===O?void 0:O.step(E)}):void(this.capturedTransaction=e);const o=this.state.apply(e),s=!this.state.selection.eq(o.selection);this.view.updateState(o),this.emit("transaction",{editor:this,transaction:e}),s&&this.emit("selectionUpdate",{editor:this,transaction:e});const p=e.getMeta("focus"),f=e.getMeta("blur");p&&this.emit("focus",{editor:this,event:p.event,transaction:e}),f&&this.emit("blur",{editor:this,event:f.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return to(this.state,e)}isActive(e,o){return Mn(this.state,"string"==typeof e?e:null,"string"==typeof e?o:e)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Rn(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:o="\n\n",textSerializers:s={}}=e||{};return Ln(this.state.doc,{blockSeparator:o,textSerializers:ie(ie({},s),se(this.schema))})}get isEmpty(){return dn(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}}function Jo(t){return new ot({find:t.find,handler:({state:e,range:o,match:s})=>{const p=a(t.getAttributes,void 0,s);if(!1===p||null===p)return null;const{tr:f}=e,E=s[s.length-1],O=s[0];let P=o.to;if(E){const $=O.search(/\S/),V=o.from+O.indexOf(E),rt=V+E.length;if(Yn(o.from,o.to,e.doc).filter(Wt=>Wt.mark.type.excluded.find(Xt=>Xt===t.type&&Xt!==Wt.mark.type)).filter(Wt=>Wt.to>V).length)return null;rt<o.to&&f.delete(rt,o.to),V>o.from&&f.delete(o.from+$,V),P=o.from+$+E.length,f.addMark(o.from+$,P,t.type.create(p||{})),f.removeStoredMark(t.type)}}})}function Bo(t){return new ot({find:t.find,handler:({state:e,range:o,match:s})=>{const p=a(t.getAttributes,void 0,s)||{},{tr:f}=e,E=o.from;let O=o.to;if(s[1]){let $=E+s[0].lastIndexOf(s[1]);$>O?$=O:O=$+s[1].length,f.insertText(s[0][s[0].length-1],E+s[0].length-1),f.replaceWith($,O,t.type.create(p))}else s[0]&&f.replaceWith(E,O,t.type.create(p))}})}function ro(t){return new ot({find:t.find,handler:({state:e,range:o,match:s})=>{const p=e.doc.resolve(o.from),f=a(t.getAttributes,void 0,s)||{};if(!p.node(-1).canReplaceWith(p.index(-1),p.indexAfter(-1),t.type))return null;e.tr.delete(o.from,o.to).setBlockType(o.from,o.from,t.type,f)}})}function so(t){return new ot({find:t.find,handler:({state:e,range:o,match:s})=>{let p=t.replace,f=o.from;const E=o.to;if(s[1]){const O=s[0].lastIndexOf(s[1]);p+=s[0].slice(O+s[1].length),f+=O;const P=f-E;P>0&&(p=s[0].slice(O-P,O)+p,f=E)}e.tr.insertText(p,f,E)}})}function lo(t){return new ot({find:t.find,handler:({state:e,range:o,match:s})=>{const p=a(t.getAttributes,void 0,s)||{},f=e.tr.delete(o.from,o.to),O=f.doc.resolve(o.from).blockRange(),P=O&&(0,h.nd)(O,t.type,p);if(!P)return null;f.wrap(O,P);const $=f.doc.resolve(o.from-1).nodeBefore;$&&$.type===t.type&&(0,h.Mn)(f.doc,o.from-1)&&(!t.joinPredicate||t.joinPredicate(s,$))&&f.join(o.from-1)}})}class Sn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ie(ie({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(S(this,"addOptions",{name:this.name}))),this.storage=a(S(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Sn(e)}configure(e={}){const o=this.extend();return o.options=zt(this.options,e),o.storage=a(S(o,"addStorage",{name:o.name,options:o.options})),o}extend(e={}){const o=new Sn(e);return o.parent=this,this.child=o,o.name=e.name?e.name:o.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${o.name}".`),o.options=a(S(o,"addOptions",{name:o.name})),o.storage=a(S(o,"addStorage",{name:o.name,options:o.options})),o}static handleExit({editor:e,mark:o}){const{tr:s}=e.state,p=e.state.selection.$from;if(p.pos===p.end()){const E=p.marks();if(!E.find($=>(null==$?void 0:$.type.name)===o.name))return!1;const P=E.find($=>(null==$?void 0:$.type.name)===o.name);return P&&s.removeStoredMark(P),s.insertText(" ",p.pos),e.view.dispatch(s),!0}return!1}}class In{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ie(ie({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(S(this,"addOptions",{name:this.name}))),this.storage=a(S(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new In(e)}configure(e={}){const o=this.extend();return o.options=zt(this.options,e),o.storage=a(S(o,"addStorage",{name:o.name,options:o.options})),o}extend(e={}){const o=new In(e);return o.parent=this,this.child=o,o.name=e.name?e.name:o.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${o.name}".`),o.options=a(S(o,"addOptions",{name:o.name})),o.storage=a(S(o,"addStorage",{name:o.name,options:o.options})),o}}class Lo{constructor(e,o,s){this.isDragging=!1,this.component=e,this.editor=o.editor,this.options=ie({stopEvent:null,ignoreMutation:null},s),this.extension=o.extension,this.node=o.node,this.decorations=o.decorations,this.getPos=o.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var o,s,p,f,E,O,P;const{view:$}=this.editor,V=e.target,rt=3===V.nodeType?null===(o=V.parentElement)||void 0===o?void 0:o.closest("[data-drag-handle]"):V.closest("[data-drag-handle]");if(!this.dom||(null===(s=this.contentDOM)||void 0===s?void 0:s.contains(V))||!rt)return;let yt=0,Wt=0;if(this.dom!==rt){const oe=this.dom.getBoundingClientRect(),pe=rt.getBoundingClientRect(),qe=null!==(p=e.offsetX)&&void 0!==p?p:null===(f=e.nativeEvent)||void 0===f?void 0:f.offsetX,me=null!==(E=e.offsetY)&&void 0!==E?E:null===(O=e.nativeEvent)||void 0===O?void 0:O.offsetY;yt=pe.x-oe.x+qe,Wt=pe.y-oe.y+me}null===(P=e.dataTransfer)||void 0===P||P.setDragImage(this.dom,yt,Wt);const Qt=v.qv.create($.state.doc,this.getPos()),Xt=$.state.tr.setSelection(Qt);$.dispatch(Xt)}stopEvent(e){var o;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:e});const s=e.target;if(!this.dom.contains(s)||(null===(o=this.contentDOM)||void 0===o?void 0:o.contains(s)))return!1;const f="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(s.tagName)||s.isContentEditable)&&!f)return!0;const{isEditable:O}=this.editor,{isDragging:P}=this,$=!!this.node.type.spec.draggable,V=v.qv.isSelectable(this.node),rt="copy"===e.type,yt="paste"===e.type,Wt="cut"===e.type,Qt="mousedown"===e.type,Xt=e.type.startsWith("drag");if(!$&&V&&Xt&&e.preventDefault(),$&&Xt&&!P)return e.preventDefault(),!1;if($&&O&&!P&&Qt){const oe=s.closest("[data-drag-handle]");oe&&(this.dom===oe||this.dom.contains(oe))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(P||f||rt||yt||Wt||Qt&&V)}ignoreMutation(e){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:e}):!(!this.node.isLeaf&&!this.node.isAtom&&("selection"===e.type||this.dom.contains(e.target)&&"childList"===e.type&&X()&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(s=>s.isContentEditable)||(this.contentDOM!==e.target||"attributes"!==e.type)&&this.contentDOM.contains(e.target))))}updateAttributes(e){this.editor.commands.command(({tr:o})=>{const s=this.getPos();return o.setNodeMarkup(s,void 0,ie(ie({},this.node.attrs),e)),!0})}deleteNode(){const e=this.getPos();this.editor.commands.deleteRange({from:e,to:e+this.node.nodeSize})}}function ao(t){return new ee({find:t.find,handler:({state:e,range:o,match:s})=>{const p=a(t.getAttributes,void 0,s);if(!1===p||null===p)return null;const{tr:f}=e,E=s[s.length-1],O=s[0];let P=o.to;if(E){const $=O.search(/\S/),V=o.from+O.indexOf(E),rt=V+E.length;if(Yn(o.from,o.to,e.doc).filter(Wt=>Wt.mark.type.excluded.find(Xt=>Xt===t.type&&Xt!==Wt.mark.type)).filter(Wt=>Wt.to>V).length)return null;rt<o.to&&f.delete(rt,o.to),V>o.from&&f.delete(o.from+$,V),P=o.from+$+E.length,f.addMark(o.from+$,P,t.type.create(p||{})),f.removeStoredMark(t.type)}}})}function i(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function n(t){return"string"==typeof t}function r(t){return new ee({find:t.find,handler({match:e,chain:o,range:s}){const p=a(t.getAttributes,void 0,e);if(!1===p||null===p)return null;e.input&&o().deleteRange(s).insertContentAt(s.from,{type:t.type.name,attrs:p})}})}function u(t){return new ee({find:t.find,handler:({state:e,range:o,match:s})=>{let p=t.replace,f=o.from;const E=o.to;if(s[1]){const O=s[0].lastIndexOf(s[1]);p+=s[0].slice(O+s[1].length),f+=O;const P=f-E;P>0&&(p=s[0].slice(O-P,O)+p,f=E)}e.tr.insertText(p,f,E)}})}class m{constructor(e){this.transaction=e,this.currentStep=this.transaction.steps.length}map(e){let o=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((p,f)=>{const E=f.getMap().mapResult(p);return E.deleted&&(o=!0),E.pos},e),deleted:o}}}},84402:(qt,Dt,c)=>{c.r(Dt),c.d(Dt,{TextStyle:()=>l,default:()=>l});var v=c(12867);const l=v.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:T=>!!T.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:T}){return["span",(0,v.mergeAttributes)(this.options.HTMLAttributes,T),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:T,commands:b})=>{const h=(0,v.getMarkAttributes)(T,this.type);return!!Object.entries(h).some(([,R])=>!!R)||b.unsetMark(this.name)}}}})},70768:(qt,Dt,c)=>{c.d(Dt,{$:()=>xt,h:()=>Nt});for(var v={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},T="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),h=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),J="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),R=h||T&&+T[1]<57,G=0;G<10;G++)v[48+G]=v[96+G]=String(G);for(G=1;G<=24;G++)v[G+111]="F"+G;for(G=65;G<=90;G++)v[G]=String.fromCharCode(G+32),l[G]=String.fromCharCode(G);for(var Y in v)l.hasOwnProperty(Y)||(l[Y]=v[Y]);var dt=c(62463);const q="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function mt(bt){let K,At,Ot,St,ut=bt.split(/-(?!$)/),pt=ut[ut.length-1];"Space"==pt&&(pt=" ");for(let Rt=0;Rt<ut.length-1;Rt++){let gt=ut[Rt];if(/^(cmd|meta|m)$/i.test(gt))St=!0;else if(/^a(lt)?$/i.test(gt))K=!0;else if(/^(c|ctrl|control)$/i.test(gt))At=!0;else if(/^s(hift)?$/i.test(gt))Ot=!0;else{if(!/^mod$/i.test(gt))throw new Error("Unrecognized modifier name: "+gt);q?St=!0:At=!0}}return K&&(pt="Alt-"+pt),At&&(pt="Ctrl-"+pt),St&&(pt="Meta-"+pt),Ot&&(pt="Shift-"+pt),pt}function Ct(bt,ut,pt){return ut.altKey&&(bt="Alt-"+bt),ut.ctrlKey&&(bt="Ctrl-"+bt),ut.metaKey&&(bt="Meta-"+bt),!1!==pt&&ut.shiftKey&&(bt="Shift-"+bt),bt}function Nt(bt){return new dt.Sy({props:{handleKeyDown:xt(bt)}})}function xt(bt){let ut=function(bt){let ut=Object.create(null);for(let pt in bt)ut[mt(pt)]=bt[pt];return ut}(bt);return function(pt,K){let St,At=function(bt){var pt=!(R&&(bt.ctrlKey||bt.altKey||bt.metaKey)||J&&bt.shiftKey&&bt.key&&1==bt.key.length||"Unidentified"==bt.key)&&bt.key||(bt.shiftKey?l:v)[bt.keyCode]||bt.key||"Unidentified";return"Esc"==pt&&(pt="Escape"),"Del"==pt&&(pt="Delete"),"Left"==pt&&(pt="ArrowLeft"),"Up"==pt&&(pt="ArrowUp"),"Right"==pt&&(pt="ArrowRight"),"Down"==pt&&(pt="ArrowDown"),pt}(K),Ot=1==At.length&&" "!=At,Rt=ut[Ct(At,K,!Ot)];if(Rt&&Rt(pt.state,pt.dispatch,pt))return!0;if(Ot&&(K.shiftKey||K.altKey||K.metaKey||At.charCodeAt(0)>127)&&(St=v[K.keyCode])&&St!=At){let gt=ut[Ct(St,K,!0)];if(gt&&gt(pt.state,pt.dispatch,pt))return!0}else if(Ot&&K.shiftKey){let gt=ut[Ct(At,K,!0)];if(gt&&gt(pt.state,pt.dispatch,pt))return!0}return!1}}},77346:(qt,Dt,c)=>{function v(N){this.content=N}c.d(Dt,{aw:()=>He,PW:()=>F,HY:()=>h,vc:()=>Y,ZU:()=>Je,NB:()=>ht,Ts:()=>$t,e4:()=>ft,V_:()=>Fe,p2:()=>dt}),v.prototype={constructor:v,find:function(N){for(var a=0;a<this.content.length;a+=2)if(this.content[a]===N)return a;return-1},get:function(N){var a=this.find(N);return-1==a?void 0:this.content[a+1]},update:function(N,a,d){var C=d&&d!=N?this.remove(d):this,A=C.find(N),I=C.content.slice();return-1==A?I.push(d||N,a):(I[A+1]=a,d&&(I[A]=d)),new v(I)},remove:function(N){var a=this.find(N);if(-1==a)return this;var d=this.content.slice();return d.splice(a,2),new v(d)},addToStart:function(N,a){return new v([N,a].concat(this.remove(N).content))},addToEnd:function(N,a){var d=this.remove(N).content.slice();return d.push(N,a),new v(d)},addBefore:function(N,a,d){var C=this.remove(a),A=C.content.slice(),I=C.find(N);return A.splice(-1==I?A.length:I,0,a,d),new v(A)},forEach:function(N){for(var a=0;a<this.content.length;a+=2)N(this.content[a],this.content[a+1])},prepend:function(N){return(N=v.from(N)).size?new v(N.content.concat(this.subtract(N).content)):this},append:function(N){return(N=v.from(N)).size?new v(this.subtract(N).content.concat(N.content)):this},subtract:function(N){var a=this;N=v.from(N);for(var d=0;d<N.content.length;d+=2)a=a.remove(N.content[d]);return a},toObject:function(){var N={};return this.forEach(function(a,d){N[a]=d}),N},get size(){return this.content.length>>1}},v.from=function(N){if(N instanceof v)return N;var a=[];if(N)for(var d in N)a.push(d,N[d]);return new v(a)};const l=v;function T(N,a,d){for(let C=0;;C++){if(C==N.childCount||C==a.childCount)return N.childCount==a.childCount?null:d;let A=N.child(C),I=a.child(C);if(A!=I){if(!A.sameMarkup(I))return d;if(A.isText&&A.text!=I.text){for(let W=0;A.text[W]==I.text[W];W++)d++;return d}if(A.content.size||I.content.size){let W=T(A.content,I.content,d+1);if(null!=W)return W}d+=A.nodeSize}else d+=A.nodeSize}}function b(N,a,d,C){for(let A=N.childCount,I=a.childCount;;){if(0==A||0==I)return A==I?null:{a:d,b:C};let W=N.child(--A),tt=a.child(--I),Lt=W.nodeSize;if(W!=tt){if(!W.sameMarkup(tt))return{a:d,b:C};if(W.isText&&W.text!=tt.text){let z=0,B=Math.min(W.text.length,tt.text.length);for(;z<B&&W.text[W.text.length-z-1]==tt.text[tt.text.length-z-1];)z++,d--,C--;return{a:d,b:C}}if(W.content.size||tt.content.size){let z=b(W.content,tt.content,d-1,C-1);if(z)return z}d-=Lt,C-=Lt}else d-=Lt,C-=Lt}}class h{constructor(a,d){if(this.content=a,this.size=d||0,null==d)for(let C=0;C<a.length;C++)this.size+=a[C].nodeSize}nodesBetween(a,d,C,A=0,I){for(let W=0,tt=0;tt<d;W++){let Lt=this.content[W],z=tt+Lt.nodeSize;if(z>a&&!1!==C(Lt,A+tt,I||null,W)&&Lt.content.size){let B=tt+1;Lt.nodesBetween(Math.max(0,a-B),Math.min(Lt.content.size,d-B),C,A+B)}tt=z}}descendants(a){this.nodesBetween(0,this.size,a)}textBetween(a,d,C,A){let I="",W=!0;return this.nodesBetween(a,d,(tt,Lt)=>{tt.isText?(I+=tt.text.slice(Math.max(a,Lt)-Lt,d-Lt),W=!C):tt.isLeaf?(A?I+="function"==typeof A?A(tt):A:tt.type.spec.leafText&&(I+=tt.type.spec.leafText(tt)),W=!C):!W&&tt.isBlock&&(I+=C,W=!0)},0),I}append(a){if(!a.size)return this;if(!this.size)return a;let d=this.lastChild,C=a.firstChild,A=this.content.slice(),I=0;for(d.isText&&d.sameMarkup(C)&&(A[A.length-1]=d.withText(d.text+C.text),I=1);I<a.content.length;I++)A.push(a.content[I]);return new h(A,this.size+a.size)}cut(a,d=this.size){if(0==a&&d==this.size)return this;let C=[],A=0;if(d>a)for(let I=0,W=0;W<d;I++){let tt=this.content[I],Lt=W+tt.nodeSize;Lt>a&&((W<a||Lt>d)&&(tt=tt.isText?tt.cut(Math.max(0,a-W),Math.min(tt.text.length,d-W)):tt.cut(Math.max(0,a-W-1),Math.min(tt.content.size,d-W-1))),C.push(tt),A+=tt.nodeSize),W=Lt}return new h(C,A)}cutByIndex(a,d){return a==d?h.empty:0==a&&d==this.content.length?this:new h(this.content.slice(a,d))}replaceChild(a,d){let C=this.content[a];if(C==d)return this;let A=this.content.slice(),I=this.size+d.nodeSize-C.nodeSize;return A[a]=d,new h(A,I)}addToStart(a){return new h([a].concat(this.content),this.size+a.nodeSize)}addToEnd(a){return new h(this.content.concat(a),this.size+a.nodeSize)}eq(a){if(this.content.length!=a.content.length)return!1;for(let d=0;d<this.content.length;d++)if(!this.content[d].eq(a.content[d]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(a){let d=this.content[a];if(!d)throw new RangeError("Index "+a+" out of range for "+this);return d}maybeChild(a){return this.content[a]||null}forEach(a){for(let d=0,C=0;d<this.content.length;d++){let A=this.content[d];a(A,C,d),C+=A.nodeSize}}findDiffStart(a,d=0){return T(this,a,d)}findDiffEnd(a,d=this.size,C=a.size){return b(this,a,d,C)}findIndex(a,d=-1){if(0==a)return R(0,a);if(a==this.size)return R(this.content.length,a);if(a>this.size||a<0)throw new RangeError(`Position ${a} outside of fragment (${this})`);for(let C=0,A=0;;C++){let W=A+this.child(C).nodeSize;if(W>=a)return W==a||d>0?R(C+1,W):R(C,A);A=W}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(a=>a.toJSON()):null}static fromJSON(a,d){if(!d)return h.empty;if(!Array.isArray(d))throw new RangeError("Invalid input for Fragment.fromJSON");return new h(d.map(a.nodeFromJSON))}static fromArray(a){if(!a.length)return h.empty;let d,C=0;for(let A=0;A<a.length;A++){let I=a[A];C+=I.nodeSize,A&&I.isText&&a[A-1].sameMarkup(I)?(d||(d=a.slice(0,A)),d[d.length-1]=I.withText(d[d.length-1].text+I.text)):d&&d.push(I)}return new h(d||a,C)}static from(a){if(!a)return h.empty;if(a instanceof h)return a;if(Array.isArray(a))return this.fromArray(a);if(a.attrs)return new h([a],a.nodeSize);throw new RangeError("Can not convert "+a+" to a Fragment"+(a.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}h.empty=new h([],0);const J={index:0,offset:0};function R(N,a){return J.index=N,J.offset=a,J}function G(N,a){if(N===a)return!0;if(!N||"object"!=typeof N||!a||"object"!=typeof a)return!1;let d=Array.isArray(N);if(Array.isArray(a)!=d)return!1;if(d){if(N.length!=a.length)return!1;for(let C=0;C<N.length;C++)if(!G(N[C],a[C]))return!1}else{for(let C in N)if(!(C in a)||!G(N[C],a[C]))return!1;for(let C in a)if(!(C in N))return!1}return!0}let Y=(()=>{class N{constructor(d,C){this.type=d,this.attrs=C}addToSet(d){let C,A=!1;for(let I=0;I<d.length;I++){let W=d[I];if(this.eq(W))return d;if(this.type.excludes(W.type))C||(C=d.slice(0,I));else{if(W.type.excludes(this.type))return d;!A&&W.type.rank>this.type.rank&&(C||(C=d.slice(0,I)),C.push(this),A=!0),C&&C.push(W)}}return C||(C=d.slice()),A||C.push(this),C}removeFromSet(d){for(let C=0;C<d.length;C++)if(this.eq(d[C]))return d.slice(0,C).concat(d.slice(C+1));return d}isInSet(d){for(let C=0;C<d.length;C++)if(this.eq(d[C]))return!0;return!1}eq(d){return this==d||this.type==d.type&&G(this.attrs,d.attrs)}toJSON(){let d={type:this.type.name};for(let C in this.attrs){d.attrs=this.attrs;break}return d}static fromJSON(d,C){if(!C)throw new RangeError("Invalid input for Mark.fromJSON");let A=d.marks[C.type];if(!A)throw new RangeError(`There is no mark type ${C.type} in this schema`);return A.create(C.attrs)}static sameSet(d,C){if(d==C)return!0;if(d.length!=C.length)return!1;for(let A=0;A<d.length;A++)if(!d[A].eq(C[A]))return!1;return!0}static setFrom(d){if(!d||Array.isArray(d)&&0==d.length)return N.none;if(d instanceof N)return[d];let C=d.slice();return C.sort((A,I)=>A.type.rank-I.type.rank),C}}return N.none=[],N})();class ft extends Error{}class dt{constructor(a,d,C){this.content=a,this.openStart=d,this.openEnd=C}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(a,d){let C=mt(this.content,a+this.openStart,d);return C&&new dt(C,this.openStart,this.openEnd)}removeBetween(a,d){return new dt(q(this.content,a+this.openStart,d+this.openStart),this.openStart,this.openEnd)}eq(a){return this.content.eq(a.content)&&this.openStart==a.openStart&&this.openEnd==a.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let a={content:this.content.toJSON()};return this.openStart>0&&(a.openStart=this.openStart),this.openEnd>0&&(a.openEnd=this.openEnd),a}static fromJSON(a,d){if(!d)return dt.empty;let C=d.openStart||0,A=d.openEnd||0;if("number"!=typeof C||"number"!=typeof A)throw new RangeError("Invalid input for Slice.fromJSON");return new dt(h.fromJSON(a,d.content),C,A)}static maxOpen(a,d=!0){let C=0,A=0;for(let I=a.firstChild;I&&!I.isLeaf&&(d||!I.type.spec.isolating);I=I.firstChild)C++;for(let I=a.lastChild;I&&!I.isLeaf&&(d||!I.type.spec.isolating);I=I.lastChild)A++;return new dt(a,C,A)}}function q(N,a,d){let{index:C,offset:A}=N.findIndex(a),I=N.maybeChild(C),{index:W,offset:tt}=N.findIndex(d);if(A==a||I.isText){if(tt!=d&&!N.child(W).isText)throw new RangeError("Removing non-flat range");return N.cut(0,a).append(N.cut(d))}if(C!=W)throw new RangeError("Removing non-flat range");return N.replaceChild(C,I.copy(q(I.content,a-A-1,d-A-1)))}function mt(N,a,d,C){let{index:A,offset:I}=N.findIndex(a),W=N.maybeChild(A);if(I==a||W.isText)return C&&!C.canReplace(A,A,d)?null:N.cut(0,a).append(d).append(N.cut(a));let tt=mt(W.content,a-I-1,d);return tt&&N.replaceChild(A,W.copy(tt))}function lt(N,a,d){if(d.openStart>N.depth)throw new ft("Inserted content deeper than insertion position");if(N.depth-d.openStart!=a.depth-d.openEnd)throw new ft("Inconsistent open depths");return Ct(N,a,d,0)}function Ct(N,a,d,C){let A=N.index(C),I=N.node(C);if(A==a.index(C)&&C<N.depth-d.openStart){let W=Ct(N,a,d,C+1);return I.copy(I.content.replaceChild(A,W))}if(d.content.size){if(d.openStart||d.openEnd||N.depth!=C||a.depth!=C){let{start:W,end:tt}=function(N,a){let d=a.depth-N.openStart,A=a.node(d).copy(N.content);for(let I=d-1;I>=0;I--)A=a.node(I).copy(h.from(A));return{start:A.resolveNoCache(N.openStart+d),end:A.resolveNoCache(A.content.size-N.openEnd-d)}}(d,N);return pt(I,K(N,W,tt,a,C))}{let W=N.parent,tt=W.content;return pt(W,tt.cut(0,N.parentOffset).append(d.content).append(tt.cut(a.parentOffset)))}}return pt(I,At(N,a,C))}function Nt(N,a){if(!a.type.compatibleContent(N.type))throw new ft("Cannot join "+a.type.name+" onto "+N.type.name)}function xt(N,a,d){let C=N.node(d);return Nt(C,a.node(d)),C}function bt(N,a){let d=a.length-1;d>=0&&N.isText&&N.sameMarkup(a[d])?a[d]=N.withText(a[d].text+N.text):a.push(N)}function ut(N,a,d,C){let A=(a||N).node(d),I=0,W=a?a.index(d):A.childCount;N&&(I=N.index(d),N.depth>d?I++:N.textOffset&&(bt(N.nodeAfter,C),I++));for(let tt=I;tt<W;tt++)bt(A.child(tt),C);a&&a.depth==d&&a.textOffset&&bt(a.nodeBefore,C)}function pt(N,a){return N.type.checkContent(a),N.copy(a)}function K(N,a,d,C,A){let I=N.depth>A&&xt(N,a,A+1),W=C.depth>A&&xt(d,C,A+1),tt=[];return ut(null,N,A,tt),I&&W&&a.index(A)==d.index(A)?(Nt(I,W),bt(pt(I,K(N,a,d,C,A+1)),tt)):(I&&bt(pt(I,At(N,a,A+1)),tt),ut(a,d,A,tt),W&&bt(pt(W,At(d,C,A+1)),tt)),ut(C,null,A,tt),new h(tt)}function At(N,a,d){let C=[];return ut(null,N,d,C),N.depth>d&&bt(pt(xt(N,a,d+1),At(N,a,d+1)),C),ut(a,null,d,C),new h(C)}dt.empty=new dt(h.empty,0,0);class St{constructor(a,d,C){this.pos=a,this.path=d,this.parentOffset=C,this.depth=d.length/3-1}resolveDepth(a){return null==a?this.depth:a<0?this.depth+a:a}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(a){return this.path[3*this.resolveDepth(a)]}index(a){return this.path[3*this.resolveDepth(a)+1]}indexAfter(a){return a=this.resolveDepth(a),this.index(a)+(a!=this.depth||this.textOffset?1:0)}start(a){return 0==(a=this.resolveDepth(a))?0:this.path[3*a-1]+1}end(a){return a=this.resolveDepth(a),this.start(a)+this.node(a).content.size}before(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position before the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]}after(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position after the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]+this.path[3*a].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let a=this.parent,d=this.index(this.depth);if(d==a.childCount)return null;let C=this.pos-this.path[this.path.length-1],A=a.child(d);return C?a.child(d).cut(C):A}get nodeBefore(){let a=this.index(this.depth),d=this.pos-this.path[this.path.length-1];return d?this.parent.child(a).cut(0,d):0==a?null:this.parent.child(a-1)}posAtIndex(a,d){d=this.resolveDepth(d);let C=this.path[3*d],A=0==d?0:this.path[3*d-1]+1;for(let I=0;I<a;I++)A+=C.child(I).nodeSize;return A}marks(){let a=this.parent,d=this.index();if(0==a.content.size)return Y.none;if(this.textOffset)return a.child(d).marks;let C=a.maybeChild(d-1),A=a.maybeChild(d);if(!C){let tt=C;C=A,A=tt}let I=C.marks;for(var W=0;W<I.length;W++)!1===I[W].type.spec.inclusive&&(!A||!I[W].isInSet(A.marks))&&(I=I[W--].removeFromSet(I));return I}marksAcross(a){let d=this.parent.maybeChild(this.index());if(!d||!d.isInline)return null;let C=d.marks,A=a.parent.maybeChild(a.index());for(var I=0;I<C.length;I++)!1===C[I].type.spec.inclusive&&(!A||!C[I].isInSet(A.marks))&&(C=C[I--].removeFromSet(C));return C}sharedDepth(a){for(let d=this.depth;d>0;d--)if(this.start(d)<=a&&this.end(d)>=a)return d;return 0}blockRange(a=this,d){if(a.pos<this.pos)return a.blockRange(this);for(let C=this.depth-(this.parent.inlineContent||this.pos==a.pos?1:0);C>=0;C--)if(a.pos<=this.end(C)&&(!d||d(this.node(C))))return new $t(this,a,C);return null}sameParent(a){return this.pos-this.parentOffset==a.pos-a.parentOffset}max(a){return a.pos>this.pos?a:this}min(a){return a.pos<this.pos?a:this}toString(){let a="";for(let d=1;d<=this.depth;d++)a+=(a?"/":"")+this.node(d).type.name+"_"+this.index(d-1);return a+":"+this.parentOffset}static resolve(a,d){if(!(d>=0&&d<=a.content.size))throw new RangeError("Position "+d+" out of range");let C=[],A=0,I=d;for(let W=a;;){let{index:tt,offset:Lt}=W.content.findIndex(I),z=I-Lt;if(C.push(W,tt,A+Lt),!z||(W=W.child(tt),W.isText))break;I=z-1,A+=Lt+1}return new St(d,C,I)}static resolveCached(a,d){for(let A=0;A<Rt.length;A++){let I=Rt[A];if(I.pos==d&&I.doc==a)return I}let C=Rt[gt]=St.resolve(a,d);return gt=(gt+1)%Ft,C}}let Rt=[],gt=0,Ft=12;class $t{constructor(a,d,C){this.$from=a,this.$to=d,this.depth=C}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Gt=Object.create(null);class ht{constructor(a,d,C,A=Y.none){this.type=a,this.attrs=d,this.marks=A,this.content=C||h.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(a){return this.content.child(a)}maybeChild(a){return this.content.maybeChild(a)}forEach(a){this.content.forEach(a)}nodesBetween(a,d,C,A=0){this.content.nodesBetween(a,d,C,A,this)}descendants(a){this.nodesBetween(0,this.content.size,a)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(a,d,C,A){return this.content.textBetween(a,d,C,A)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(a){return this==a||this.sameMarkup(a)&&this.content.eq(a.content)}sameMarkup(a){return this.hasMarkup(a.type,a.attrs,a.marks)}hasMarkup(a,d,C){return this.type==a&&G(this.attrs,d||a.defaultAttrs||Gt)&&Y.sameSet(this.marks,C||Y.none)}copy(a=null){return a==this.content?this:new ht(this.type,this.attrs,a,this.marks)}mark(a){return a==this.marks?this:new ht(this.type,this.attrs,this.content,a)}cut(a,d=this.content.size){return 0==a&&d==this.content.size?this:this.copy(this.content.cut(a,d))}slice(a,d=this.content.size,C=!1){if(a==d)return dt.empty;let A=this.resolve(a),I=this.resolve(d),W=C?0:A.sharedDepth(d),tt=A.start(W),z=A.node(W).content.cut(A.pos-tt,I.pos-tt);return new dt(z,A.depth-W,I.depth-W)}replace(a,d,C){return lt(this.resolve(a),this.resolve(d),C)}nodeAt(a){for(let d=this;;){let{index:C,offset:A}=d.content.findIndex(a);if(d=d.maybeChild(C),!d)return null;if(A==a||d.isText)return d;a-=A+1}}childAfter(a){let{index:d,offset:C}=this.content.findIndex(a);return{node:this.content.maybeChild(d),index:d,offset:C}}childBefore(a){if(0==a)return{node:null,index:0,offset:0};let{index:d,offset:C}=this.content.findIndex(a);if(C<a)return{node:this.content.child(d),index:d,offset:C};let A=this.content.child(d-1);return{node:A,index:d-1,offset:C-A.nodeSize}}resolve(a){return St.resolveCached(this,a)}resolveNoCache(a){return St.resolve(this,a)}rangeHasMark(a,d,C){let A=!1;return d>a&&this.nodesBetween(a,d,I=>(C.isInSet(I.marks)&&(A=!0),!A)),A}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let a=this.type.name;return this.content.size&&(a+="("+this.content.toStringInner()+")"),et(this.marks,a)}contentMatchAt(a){let d=this.type.contentMatch.matchFragment(this.content,0,a);if(!d)throw new Error("Called contentMatchAt on a node with invalid content");return d}canReplace(a,d,C=h.empty,A=0,I=C.childCount){let W=this.contentMatchAt(a).matchFragment(C,A,I),tt=W&&W.matchFragment(this.content,d);if(!tt||!tt.validEnd)return!1;for(let Lt=A;Lt<I;Lt++)if(!this.type.allowsMarks(C.child(Lt).marks))return!1;return!0}canReplaceWith(a,d,C,A){if(A&&!this.type.allowsMarks(A))return!1;let I=this.contentMatchAt(a).matchType(C),W=I&&I.matchFragment(this.content,d);return!!W&&W.validEnd}canAppend(a){return a.content.size?this.canReplace(this.childCount,this.childCount,a.content):this.type.compatibleContent(a.type)}check(){this.type.checkContent(this.content);let a=Y.none;for(let d=0;d<this.marks.length;d++)a=this.marks[d].addToSet(a);if(!Y.sameSet(a,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(d=>d.type.name)}`);this.content.forEach(d=>d.check())}toJSON(){let a={type:this.type.name};for(let d in this.attrs){a.attrs=this.attrs;break}return this.content.size&&(a.content=this.content.toJSON()),this.marks.length&&(a.marks=this.marks.map(d=>d.toJSON())),a}static fromJSON(a,d){if(!d)throw new RangeError("Invalid input for Node.fromJSON");let C=null;if(d.marks){if(!Array.isArray(d.marks))throw new RangeError("Invalid mark data for Node.fromJSON");C=d.marks.map(a.markFromJSON)}if("text"==d.type){if("string"!=typeof d.text)throw new RangeError("Invalid text node in JSON");return a.text(d.text,C)}let A=h.fromJSON(a,d.content);return a.nodeType(d.type).create(d.attrs,A,C)}}ht.prototype.text=void 0;class k extends ht{constructor(a,d,C,A){if(super(a,d,null,A),!C)throw new RangeError("Empty text nodes are not allowed");this.text=C}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):et(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(a,d){return this.text.slice(a,d)}get nodeSize(){return this.text.length}mark(a){return a==this.marks?this:new k(this.type,this.attrs,this.text,a)}withText(a){return a==this.text?this:new k(this.type,this.attrs,a,this.marks)}cut(a=0,d=this.text.length){return 0==a&&d==this.text.length?this:this.withText(this.text.slice(a,d))}eq(a){return this.sameMarkup(a)&&this.text==a.text}toJSON(){let a=super.toJSON();return a.text=this.text,a}}function et(N,a){for(let d=N.length-1;d>=0;d--)a=N[d].type.name+"("+a+")";return a}class st{constructor(a){this.validEnd=a,this.next=[],this.wrapCache=[]}static parse(a,d){let C=new it(a,d);if(null==C.next)return st.empty;let A=U(C);C.next&&C.err("Unexpected trailing text");let I=function(N){let a=Object.create(null);return function d(C){let A=[];C.forEach(W=>{N[W].forEach(({term:tt,to:Lt})=>{if(!tt)return;let z;for(let B=0;B<A.length;B++)A[B][0]==tt&&(z=A[B][1]);xe(N,Lt).forEach(B=>{z||A.push([tt,z=[]]),-1==z.indexOf(B)&&z.push(B)})})});let I=a[C.join(",")]=new st(C.indexOf(N.length-1)>-1);for(let W=0;W<A.length;W++){let tt=A[W][1].sort(ve);I.next.push({type:A[W][0],next:a[tt.join(",")]||d(tt)})}return I}(xe(N,0))}(function(N){let a=[[]];return A(function I(W,tt){if("choice"==W.type)return W.exprs.reduce((Lt,z)=>Lt.concat(I(z,tt)),[]);if("seq"!=W.type){if("star"==W.type){let Lt=d();return C(tt,Lt),A(I(W.expr,Lt),Lt),[C(Lt)]}if("plus"==W.type){let Lt=d();return A(I(W.expr,tt),Lt),A(I(W.expr,Lt),Lt),[C(Lt)]}if("opt"==W.type)return[C(tt)].concat(I(W.expr,tt));if("range"==W.type){let Lt=tt;for(let z=0;z<W.min;z++){let B=d();A(I(W.expr,Lt),B),Lt=B}if(-1==W.max)A(I(W.expr,Lt),Lt);else for(let z=W.min;z<W.max;z++){let B=d();C(Lt,B),A(I(W.expr,Lt),B),Lt=B}return[C(Lt)]}if("name"==W.type)return[C(tt,void 0,W.value)];throw new Error("Unknown expr type")}for(let Lt=0;;Lt++){let z=I(W.exprs[Lt],tt);if(Lt==W.exprs.length-1)return z;A(z,tt=d())}}(N,0),d()),a;function d(){return a.push([])-1}function C(W,tt,Lt){let z={term:Lt,to:tt};return a[W].push(z),z}function A(W,tt){W.forEach(Lt=>Lt.to=tt)}}(A));return function(N,a){for(let d=0,C=[N];d<C.length;d++){let A=C[d],I=!A.validEnd,W=[];for(let tt=0;tt<A.next.length;tt++){let{type:Lt,next:z}=A.next[tt];W.push(Lt.name),I&&!(Lt.isText||Lt.hasRequiredAttrs())&&(I=!1),-1==C.indexOf(z)&&C.push(z)}I&&a.err("Only non-generatable nodes ("+W.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(I,C),I}matchType(a){for(let d=0;d<this.next.length;d++)if(this.next[d].type==a)return this.next[d].next;return null}matchFragment(a,d=0,C=a.childCount){let A=this;for(let I=d;A&&I<C;I++)A=A.matchType(a.child(I).type);return A}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let a=0;a<this.next.length;a++){let{type:d}=this.next[a];if(!d.isText&&!d.hasRequiredAttrs())return d}return null}compatible(a){for(let d=0;d<this.next.length;d++)for(let C=0;C<a.next.length;C++)if(this.next[d].type==a.next[C].type)return!0;return!1}fillBefore(a,d=!1,C=0){let A=[this];return function I(W,tt){let Lt=W.matchFragment(a,C);if(Lt&&(!d||Lt.validEnd))return h.from(tt.map(z=>z.createAndFill()));for(let z=0;z<W.next.length;z++){let{type:B,next:ot}=W.next[z];if(!B.isText&&!B.hasRequiredAttrs()&&-1==A.indexOf(ot)){A.push(ot);let _t=I(ot,tt.concat(B));if(_t)return _t}}return null}(this,[])}findWrapping(a){for(let C=0;C<this.wrapCache.length;C+=2)if(this.wrapCache[C]==a)return this.wrapCache[C+1];let d=this.computeWrapping(a);return this.wrapCache.push(a,d),d}computeWrapping(a){let d=Object.create(null),C=[{match:this,type:null,via:null}];for(;C.length;){let A=C.shift(),I=A.match;if(I.matchType(a)){let W=[];for(let tt=A;tt.type;tt=tt.via)W.push(tt.type);return W.reverse()}for(let W=0;W<I.next.length;W++){let{type:tt,next:Lt}=I.next[W];!tt.isLeaf&&!tt.hasRequiredAttrs()&&!(tt.name in d)&&(!A.type||Lt.validEnd)&&(C.push({match:tt.contentMatch,type:tt,via:A}),d[tt.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(a){if(a>=this.next.length)throw new RangeError(`There's no ${a}th edge in this content match`);return this.next[a]}toString(){let a=[];return function d(C){a.push(C);for(let A=0;A<C.next.length;A++)-1==a.indexOf(C.next[A].next)&&d(C.next[A].next)}(this),a.map((C,A)=>{let I=A+(C.validEnd?"*":" ")+" ";for(let W=0;W<C.next.length;W++)I+=(W?", ":"")+C.next[W].type.name+"->"+a.indexOf(C.next[W].next);return I}).join("\n")}}st.empty=new st(!0);class it{constructor(a,d){this.string=a,this.nodeTypes=d,this.inline=null,this.pos=0,this.tokens=a.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(a){return this.next==a&&(this.pos++||!0)}err(a){throw new SyntaxError(a+" (in content expression '"+this.string+"')")}}function U(N){let a=[];do{a.push(Q(N))}while(N.eat("|"));return 1==a.length?a[0]:{type:"choice",exprs:a}}function Q(N){let a=[];do{a.push(nt(N))}while(N.next&&")"!=N.next&&"|"!=N.next);return 1==a.length?a[0]:{type:"seq",exprs:a}}function nt(N){let a=function(N){if(N.eat("(")){let a=U(N);return N.eat(")")||N.err("Missing closing paren"),a}if(!/\W/.test(N.next)){let a=function(N,a){let d=N.nodeTypes,C=d[a];if(C)return[C];let A=[];for(let I in d){let W=d[I];W.groups.indexOf(a)>-1&&A.push(W)}return 0==A.length&&N.err("No node type or group '"+a+"' found"),A}(N,N.next).map(d=>(null==N.inline?N.inline=d.isInline:N.inline!=d.isInline&&N.err("Mixing inline and block content"),{type:"name",value:d}));return N.pos++,1==a.length?a[0]:{type:"choice",exprs:a}}N.err("Unexpected token '"+N.next+"'")}(N);for(;;)if(N.eat("+"))a={type:"plus",expr:a};else if(N.eat("*"))a={type:"star",expr:a};else if(N.eat("?"))a={type:"opt",expr:a};else{if(!N.eat("{"))break;a=jt(N,a)}return a}function kt(N){/\D/.test(N.next)&&N.err("Expected number, got '"+N.next+"'");let a=Number(N.next);return N.pos++,a}function jt(N,a){let d=kt(N),C=d;return N.eat(",")&&(C="}"!=N.next?kt(N):-1),N.eat("}")||N.err("Unclosed braced range"),{type:"range",min:d,max:C,expr:a}}function ve(N,a){return a-N}function xe(N,a){let d=[];return function C(A){let I=N[A];if(1==I.length&&!I[0].term)return C(I[0].to);d.push(A);for(let W=0;W<I.length;W++){let{term:tt,to:Lt}=I[W];!tt&&-1==d.indexOf(Lt)&&C(Lt)}}(a),d.sort(ve)}function Qe(N){let a=Object.create(null);for(let d in N){let C=N[d];if(!C.hasDefault)return null;a[d]=C.default}return a}function Le(N,a){let d=Object.create(null);for(let C in N){let A=a&&a[C];if(void 0===A){let I=N[C];if(!I.hasDefault)throw new RangeError("No value supplied for attribute "+C);A=I.default}d[C]=A}return d}function Pe(N){let a=Object.create(null);if(N)for(let d in N)a[d]=new Ye(N[d]);return a}class Ke{constructor(a,d,C){this.name=a,this.schema=d,this.spec=C,this.markSet=null,this.groups=C.group?C.group.split(" "):[],this.attrs=Pe(C.attrs),this.defaultAttrs=Qe(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(C.inline||"text"==a),this.isText="text"==a}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==st.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let a in this.attrs)if(this.attrs[a].isRequired)return!0;return!1}compatibleContent(a){return this==a||this.contentMatch.compatible(a.contentMatch)}computeAttrs(a){return!a&&this.defaultAttrs?this.defaultAttrs:Le(this.attrs,a)}create(a=null,d,C){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ht(this,this.computeAttrs(a),h.from(d),Y.setFrom(C))}createChecked(a=null,d,C){return d=h.from(d),this.checkContent(d),new ht(this,this.computeAttrs(a),d,Y.setFrom(C))}createAndFill(a=null,d,C){if(a=this.computeAttrs(a),(d=h.from(d)).size){let W=this.contentMatch.fillBefore(d);if(!W)return null;d=W.append(d)}let A=this.contentMatch.matchFragment(d),I=A&&A.fillBefore(h.empty,!0);return I?new ht(this,a,d.append(I),Y.setFrom(C)):null}validContent(a){let d=this.contentMatch.matchFragment(a);if(!d||!d.validEnd)return!1;for(let C=0;C<a.childCount;C++)if(!this.allowsMarks(a.child(C).marks))return!1;return!0}checkContent(a){if(!this.validContent(a))throw new RangeError(`Invalid content for node ${this.name}: ${a.toString().slice(0,50)}`)}allowsMarkType(a){return null==this.markSet||this.markSet.indexOf(a)>-1}allowsMarks(a){if(null==this.markSet)return!0;for(let d=0;d<a.length;d++)if(!this.allowsMarkType(a[d].type))return!1;return!0}allowedMarks(a){if(null==this.markSet)return a;let d;for(let C=0;C<a.length;C++)this.allowsMarkType(a[C].type)?d&&d.push(a[C]):d||(d=a.slice(0,C));return d?d.length?d:Y.none:a}static compile(a,d){let C=Object.create(null);a.forEach((I,W)=>C[I]=new Ke(I,d,W));let A=d.spec.topNode||"doc";if(!C[A])throw new RangeError("Schema is missing its top node type ('"+A+"')");if(!C.text)throw new RangeError("Every schema needs a 'text' type");for(let I in C.text.attrs)throw new RangeError("The text node type should not have attributes");return C}}class Ye{constructor(a){this.hasDefault=Object.prototype.hasOwnProperty.call(a,"default"),this.default=a.default}get isRequired(){return!this.hasDefault}}class Je{constructor(a,d,C,A){this.name=a,this.rank=d,this.schema=C,this.spec=A,this.attrs=Pe(A.attrs),this.excluded=null;let I=Qe(this.attrs);this.instance=I?new Y(this,I):null}create(a=null){return!a&&this.instance?this.instance:new Y(this,Le(this.attrs,a))}static compile(a,d){let C=Object.create(null),A=0;return a.forEach((I,W)=>C[I]=new Je(I,A++,d,W)),C}removeFromSet(a){for(var d=0;d<a.length;d++)a[d].type==this&&(a=a.slice(0,d).concat(a.slice(d+1)),d--);return a}isInSet(a){for(let d=0;d<a.length;d++)if(a[d].type==this)return a[d]}excludes(a){return this.excluded.indexOf(a)>-1}}class Fe{constructor(a){this.cached=Object.create(null);let d=this.spec={};for(let A in a)d[A]=a[A];d.nodes=l.from(a.nodes),d.marks=l.from(a.marks||{}),this.nodes=Ke.compile(this.spec.nodes,this),this.marks=Je.compile(this.spec.marks,this);let C=Object.create(null);for(let A in this.nodes){if(A in this.marks)throw new RangeError(A+" can not be both a node and a mark");let I=this.nodes[A],W=I.spec.content||"",tt=I.spec.marks;I.contentMatch=C[W]||(C[W]=st.parse(W,this.nodes)),I.inlineContent=I.contentMatch.inlineContent,I.markSet="_"==tt?null:tt?Ze(this,tt.split(" ")):""!=tt&&I.inlineContent?null:[]}for(let A in this.marks){let I=this.marks[A],W=I.spec.excludes;I.excluded=null==W?[I]:""==W?[]:Ze(this,W.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(a,d=null,C,A){if("string"==typeof a)a=this.nodeType(a);else{if(!(a instanceof Ke))throw new RangeError("Invalid node type: "+a);if(a.schema!=this)throw new RangeError("Node type from different schema used ("+a.name+")")}return a.createChecked(d,C,A)}text(a,d){let C=this.nodes.text;return new k(C,C.defaultAttrs,a,Y.setFrom(d))}mark(a,d){return"string"==typeof a&&(a=this.marks[a]),a.create(d)}nodeFromJSON(a){return ht.fromJSON(this,a)}markFromJSON(a){return Y.fromJSON(this,a)}nodeType(a){let d=this.nodes[a];if(!d)throw new RangeError("Unknown node type: "+a);return d}}function Ze(N,a){let d=[];for(let C=0;C<a.length;C++){let A=a[C],I=N.marks[A],W=I;if(I)d.push(I);else for(let tt in N.marks){let Lt=N.marks[tt];("_"==A||Lt.spec.group&&Lt.spec.group.split(" ").indexOf(A)>-1)&&d.push(W=Lt)}if(!W)throw new SyntaxError("Unknown mark type: '"+a[C]+"'")}return d}class He{constructor(a,d){this.schema=a,this.rules=d,this.tags=[],this.styles=[],d.forEach(C=>{C.tag?this.tags.push(C):C.style&&this.styles.push(C)}),this.normalizeLists=!this.tags.some(C=>{if(!/^(ul|ol)\b/.test(C.tag)||!C.node)return!1;let A=a.nodes[C.node];return A.contentMatch.matchType(A)})}parse(a,d={}){let C=new fe(this,d,!1);return C.addAll(a,d.from,d.to),C.finish()}parseSlice(a,d={}){let C=new fe(this,d,!0);return C.addAll(a,d.from,d.to),dt.maxOpen(C.finish())}matchTag(a,d,C){for(let A=C?this.tags.indexOf(C)+1:0;A<this.tags.length;A++){let I=this.tags[A];if(D(a,I.tag)&&(void 0===I.namespace||a.namespaceURI==I.namespace)&&(!I.context||d.matchesContext(I.context))){if(I.getAttrs){let W=I.getAttrs(a);if(!1===W)continue;I.attrs=W||void 0}return I}}}matchStyle(a,d,C,A){for(let I=A?this.styles.indexOf(A)+1:0;I<this.styles.length;I++){let W=this.styles[I],tt=W.style;if(!(0!=tt.indexOf(a)||W.context&&!C.matchesContext(W.context)||tt.length>a.length&&(61!=tt.charCodeAt(a.length)||tt.slice(a.length+1)!=d))){if(W.getAttrs){let Lt=W.getAttrs(d);if(!1===Lt)continue;W.attrs=Lt||void 0}return W}}}static schemaRules(a){let d=[];function C(A){let I=null==A.priority?50:A.priority,W=0;for(;W<d.length;W++){let tt=d[W];if((null==tt.priority?50:tt.priority)<I)break}d.splice(W,0,A)}for(let A in a.marks){let I=a.marks[A].spec.parseDOM;I&&I.forEach(W=>{C(W=S(W)),W.mark||W.ignore||W.clearMark||(W.mark=A)})}for(let A in a.nodes){let I=a.nodes[A].spec.parseDOM;I&&I.forEach(W=>{C(W=S(W)),W.node||W.ignore||W.mark||(W.node=A)})}return d}static fromSchema(a){return a.cached.domParser||(a.cached.domParser=new He(a,He.schemaRules(a)))}}const Ne={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ge={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},$e={ol:!0,ul:!0};function Ve(N,a,d){return null!=a?(a?1:0)|("full"===a?2:0):N&&"pre"==N.whitespace?3:-5&d}class Ie{constructor(a,d,C,A,I,W,tt){this.type=a,this.attrs=d,this.marks=C,this.pendingMarks=A,this.solid=I,this.options=tt,this.content=[],this.activeMarks=Y.none,this.stashMarks=[],this.match=W||(4&tt?null:a.contentMatch)}findWrapping(a){if(!this.match){if(!this.type)return[];let d=this.type.contentMatch.fillBefore(h.from(a));if(!d){let A,C=this.type.contentMatch;return(A=C.findWrapping(a.type))?(this.match=C,A):null}this.match=this.type.contentMatch.matchFragment(d)}return this.match.findWrapping(a.type)}finish(a){if(!(1&this.options)){let A,C=this.content[this.content.length-1];if(C&&C.isText&&(A=/[ \t\r\n\u000c]+$/.exec(C.text))){let I=C;C.text.length==A[0].length?this.content.pop():this.content[this.content.length-1]=I.withText(I.text.slice(0,I.text.length-A[0].length))}}let d=h.from(this.content);return!a&&this.match&&(d=d.append(this.match.fillBefore(h.empty,!0))),this.type?this.type.create(this.attrs,d,this.marks):d}popFromStashMark(a){for(let d=this.stashMarks.length-1;d>=0;d--)if(a.eq(this.stashMarks[d]))return this.stashMarks.splice(d,1)[0]}applyPending(a){for(let d=0,C=this.pendingMarks;d<C.length;d++){let A=C[d];(this.type?this.type.allowsMarkType(A.type):w(A.type,a))&&!A.isInSet(this.activeMarks)&&(this.activeMarks=A.addToSet(this.activeMarks),this.pendingMarks=A.removeFromSet(this.pendingMarks))}}inlineContext(a){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:a.parentNode&&!Ne.hasOwnProperty(a.parentNode.nodeName.toLowerCase())}}class fe{constructor(a,d,C){this.parser=a,this.options=d,this.isOpen=C,this.open=0;let I,A=d.topNode,W=Ve(null,d.preserveWhitespace,0)|(C?4:0);I=A?new Ie(A.type,A.attrs,Y.none,Y.none,!0,d.topMatch||A.type.contentMatch,W):new Ie(C?null:a.schema.topNodeType,null,Y.none,Y.none,!0,null,W),this.nodes=[I],this.find=d.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(a){if(3==a.nodeType)this.addTextNode(a);else if(1==a.nodeType){let d=a.getAttribute("style");if(d){let C=this.readStyles(function(N){let d,a=/\s*([\w-]+)\s*:\s*([^;]+)/g,C=[];for(;d=a.exec(N);)C.push(d[1],d[2].trim());return C}(d));if(!C)return;let[A,I]=C,W=this.top;for(let tt=0;tt<I.length;tt++)this.removePendingMark(I[tt],W);for(let tt=0;tt<A.length;tt++)this.addPendingMark(A[tt]);this.addElement(a);for(let tt=0;tt<A.length;tt++)this.removePendingMark(A[tt],W);for(let tt=0;tt<I.length;tt++)this.addPendingMark(I[tt])}else this.addElement(a)}}addTextNode(a){let d=a.nodeValue,C=this.top;if(2&C.options||C.inlineContext(a)||/[^ \t\r\n\u000c]/.test(d)){if(1&C.options)d=2&C.options?d.replace(/\r\n?/g,"\n"):d.replace(/\r?\n|\r/g," ");else if(d=d.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(d)&&this.open==this.nodes.length-1){let A=C.content[C.content.length-1],I=a.previousSibling;(!A||I&&"BR"==I.nodeName||A.isText&&/[ \t\r\n\u000c]$/.test(A.text))&&(d=d.slice(1))}d&&this.insertNode(this.parser.schema.text(d)),this.findInText(a)}else this.findInside(a)}addElement(a,d){let A,C=a.nodeName.toLowerCase();$e.hasOwnProperty(C)&&this.parser.normalizeLists&&function(N){for(let a=N.firstChild,d=null;a;a=a.nextSibling){let C=1==a.nodeType?a.nodeName.toLowerCase():null;C&&$e.hasOwnProperty(C)&&d?(d.appendChild(a),a=d):"li"==C?d=a:C&&(d=null)}}(a);let I=this.options.ruleFromNode&&this.options.ruleFromNode(a)||(A=this.parser.matchTag(a,this,d));if(I?I.ignore:Ge.hasOwnProperty(C))this.findInside(a),this.ignoreFallback(a);else if(!I||I.skip||I.closeParent){I&&I.closeParent?this.open=Math.max(0,this.open-1):I&&I.skip.nodeType&&(a=I.skip);let W,tt=this.top,Lt=this.needsBlock;if(Ne.hasOwnProperty(C))tt.content.length&&tt.content[0].isInline&&this.open&&(this.open--,tt=this.top),W=!0,tt.type||(this.needsBlock=!0);else if(!a.firstChild)return void this.leafFallback(a);this.addAll(a),W&&this.sync(tt),this.needsBlock=Lt}else this.addElementByRule(a,I,!1===I.consuming?A:void 0)}leafFallback(a){"BR"==a.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(a.ownerDocument.createTextNode("\n"))}ignoreFallback(a){"BR"==a.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(a){let d=Y.none,C=Y.none;t:for(let A=0;A<a.length;A+=2)for(let I;;){let W=this.parser.matchStyle(a[A],a[A+1],this,I);if(!W)continue t;if(W.ignore)return null;if(W.clearMark?this.top.pendingMarks.forEach(tt=>{W.clearMark(tt)&&(C=tt.addToSet(C))}):d=this.parser.schema.marks[W.mark].create(W.attrs).addToSet(d),!1!==W.consuming)break;I=W}return[d,C]}addElementByRule(a,d,C){let A,I,W;d.node?(I=this.parser.schema.nodes[d.node],I.isLeaf?this.insertNode(I.create(d.attrs))||this.leafFallback(a):A=this.enter(I,d.attrs||null,d.preserveWhitespace)):(W=this.parser.schema.marks[d.mark].create(d.attrs),this.addPendingMark(W));let tt=this.top;if(I&&I.isLeaf)this.findInside(a);else if(C)this.addElement(a,C);else if(d.getContent)this.findInside(a),d.getContent(a,this.parser.schema).forEach(Lt=>this.insertNode(Lt));else{let Lt=a;"string"==typeof d.contentElement?Lt=a.querySelector(d.contentElement):"function"==typeof d.contentElement?Lt=d.contentElement(a):d.contentElement&&(Lt=d.contentElement),this.findAround(a,Lt,!0),this.addAll(Lt)}A&&this.sync(tt)&&this.open--,W&&this.removePendingMark(W,tt)}addAll(a,d,C){let A=d||0;for(let I=d?a.childNodes[d]:a.firstChild,W=null==C?null:a.childNodes[C];I!=W;I=I.nextSibling,++A)this.findAtPoint(a,A),this.addDOM(I);this.findAtPoint(a,A)}findPlace(a){let d,C;for(let A=this.open;A>=0;A--){let I=this.nodes[A],W=I.findWrapping(a);if(W&&(!d||d.length>W.length)&&(d=W,C=I,!W.length)||I.solid)break}if(!d)return!1;this.sync(C);for(let A=0;A<d.length;A++)this.enterInner(d[A],null,!1);return!0}insertNode(a){if(a.isInline&&this.needsBlock&&!this.top.type){let d=this.textblockFromContext();d&&this.enterInner(d)}if(this.findPlace(a)){this.closeExtra();let d=this.top;d.applyPending(a.type),d.match&&(d.match=d.match.matchType(a.type));let C=d.activeMarks;for(let A=0;A<a.marks.length;A++)(!d.type||d.type.allowsMarkType(a.marks[A].type))&&(C=a.marks[A].addToSet(C));return d.content.push(a.mark(C)),!0}return!1}enter(a,d,C){let A=this.findPlace(a.create(d));return A&&this.enterInner(a,d,!0,C),A}enterInner(a,d=null,C=!1,A){this.closeExtra();let I=this.top;I.applyPending(a),I.match=I.match&&I.match.matchType(a);let W=Ve(a,A,I.options);4&I.options&&0==I.content.length&&(W|=4),this.nodes.push(new Ie(a,d,I.activeMarks,I.pendingMarks,C,null,W)),this.open++}closeExtra(a=!1){let d=this.nodes.length-1;if(d>this.open){for(;d>this.open;d--)this.nodes[d-1].content.push(this.nodes[d].finish(a));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(a){for(let d=this.open;d>=0;d--)if(this.nodes[d]==a)return this.open=d,!0;return!1}get currentPos(){this.closeExtra();let a=0;for(let d=this.open;d>=0;d--){let C=this.nodes[d].content;for(let A=C.length-1;A>=0;A--)a+=C[A].nodeSize;d&&a++}return a}findAtPoint(a,d){if(this.find)for(let C=0;C<this.find.length;C++)this.find[C].node==a&&this.find[C].offset==d&&(this.find[C].pos=this.currentPos)}findInside(a){if(this.find)for(let d=0;d<this.find.length;d++)null==this.find[d].pos&&1==a.nodeType&&a.contains(this.find[d].node)&&(this.find[d].pos=this.currentPos)}findAround(a,d,C){if(a!=d&&this.find)for(let A=0;A<this.find.length;A++)null==this.find[A].pos&&1==a.nodeType&&a.contains(this.find[A].node)&&d.compareDocumentPosition(this.find[A].node)&(C?2:4)&&(this.find[A].pos=this.currentPos)}findInText(a){if(this.find)for(let d=0;d<this.find.length;d++)this.find[d].node==a&&(this.find[d].pos=this.currentPos-(a.nodeValue.length-this.find[d].offset))}matchesContext(a){if(a.indexOf("|")>-1)return a.split(/\s*\|\s*/).some(this.matchesContext,this);let d=a.split("/"),C=this.options.context,A=!(this.isOpen||C&&C.parent.type!=this.nodes[0].type),I=(A?0:1)-(C?C.depth+1:0),W=(tt,Lt)=>{for(;tt>=0;tt--){let z=d[tt];if(""==z){if(tt==d.length-1||0==tt)continue;for(;Lt>=I;Lt--)if(W(tt-1,Lt))return!0;return!1}{let B=Lt>0||0==Lt&&A?this.nodes[Lt].type:C&&Lt>=I?C.node(Lt-I).type:null;if(!B||B.name!=z&&-1==B.groups.indexOf(z))return!1;Lt--}}return!0};return W(d.length-1,this.open)}textblockFromContext(){let a=this.options.context;if(a)for(let d=a.depth;d>=0;d--){let C=a.node(d).contentMatchAt(a.indexAfter(d)).defaultType;if(C&&C.isTextblock&&C.defaultAttrs)return C}for(let d in this.parser.schema.nodes){let C=this.parser.schema.nodes[d];if(C.isTextblock&&C.defaultAttrs)return C}}addPendingMark(a){let d=function(N,a){for(let d=0;d<a.length;d++)if(N.eq(a[d]))return a[d]}(a,this.top.pendingMarks);d&&this.top.stashMarks.push(d),this.top.pendingMarks=a.addToSet(this.top.pendingMarks)}removePendingMark(a,d){for(let C=this.open;C>=0;C--){let A=this.nodes[C];if(A.pendingMarks.lastIndexOf(a)>-1)A.pendingMarks=a.removeFromSet(A.pendingMarks);else{A.activeMarks=a.removeFromSet(A.activeMarks);let W=A.popFromStashMark(a);W&&A.type&&A.type.allowsMarkType(W.type)&&(A.activeMarks=W.addToSet(A.activeMarks))}if(A==d)break}}}function D(N,a){return(N.matches||N.msMatchesSelector||N.webkitMatchesSelector||N.mozMatchesSelector).call(N,a)}function S(N){let a={};for(let d in N)a[d]=N[d];return a}function w(N,a){let d=a.schema.nodes;for(let C in d){let A=d[C];if(!A.allowsMarkType(N))continue;let I=[],W=tt=>{I.push(tt);for(let Lt=0;Lt<tt.edgeCount;Lt++){let{type:z,next:B}=tt.edge(Lt);if(z==a||I.indexOf(B)<0&&W(B))return!0}};if(W(A.contentMatch))return!0}}class F{constructor(a,d){this.nodes=a,this.marks=d}serializeFragment(a,d={},C){C||(C=Bt(d).createDocumentFragment());let A=C,I=[];return a.forEach(W=>{if(I.length||W.marks.length){let tt=0,Lt=0;for(;tt<I.length&&Lt<W.marks.length;){let z=W.marks[Lt];if(this.marks[z.type.name]){if(!z.eq(I[tt][0])||!1===z.type.spec.spanning)break;tt++,Lt++}else Lt++}for(;tt<I.length;)A=I.pop()[1];for(;Lt<W.marks.length;){let z=W.marks[Lt++],B=this.serializeMark(z,W.isInline,d);B&&(I.push([z,A]),A.appendChild(B.dom),A=B.contentDOM||B.dom)}}A.appendChild(this.serializeNodeInner(W,d))}),C}serializeNodeInner(a,d){let{dom:C,contentDOM:A}=F.renderSpec(Bt(d),this.nodes[a.type.name](a));if(A){if(a.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(a.content,d,A)}return C}serializeNode(a,d={}){let C=this.serializeNodeInner(a,d);for(let A=a.marks.length-1;A>=0;A--){let I=this.serializeMark(a.marks[A],a.isInline,d);I&&((I.contentDOM||I.dom).appendChild(C),C=I.dom)}return C}serializeMark(a,d,C={}){let A=this.marks[a.type.name];return A&&F.renderSpec(Bt(C),A(a,d))}static renderSpec(a,d,C=null){if("string"==typeof d)return{dom:a.createTextNode(d)};if(null!=d.nodeType)return{dom:d};if(d.dom&&null!=d.dom.nodeType)return d;let A=d[0],I=A.indexOf(" ");I>0&&(C=A.slice(0,I),A=A.slice(I+1));let W,tt=C?a.createElementNS(C,A):a.createElement(A),Lt=d[1],z=1;if(Lt&&"object"==typeof Lt&&null==Lt.nodeType&&!Array.isArray(Lt)){z=2;for(let B in Lt)if(null!=Lt[B]){let ot=B.indexOf(" ");ot>0?tt.setAttributeNS(B.slice(0,ot),B.slice(ot+1),Lt[B]):tt.setAttribute(B,Lt[B])}}for(let B=z;B<d.length;B++){let ot=d[B];if(0===ot){if(B<d.length-1||B>z)throw new RangeError("Content hole must be the only child of its parent node");return{dom:tt,contentDOM:tt}}{let{dom:_t,contentDOM:Tt}=F.renderSpec(a,ot,C);if(tt.appendChild(_t),Tt){if(W)throw new RangeError("Multiple content holes");W=Tt}}}return{dom:tt,contentDOM:W}}static fromSchema(a){return a.cached.domSerializer||(a.cached.domSerializer=new F(this.nodesFromSchema(a),this.marksFromSchema(a)))}static nodesFromSchema(a){let d=Et(a.nodes);return d.text||(d.text=C=>C.text),d}static marksFromSchema(a){return Et(a.marks)}}function Et(N){let a={};for(let d in N){let C=N[d].spec.toDOM;C&&(a[d]=C)}return a}function Bt(N){return N.document||window.document}},62463:(qt,Dt,c)=>{c.d(Dt,{Bs:()=>G,C1:()=>q,H$:()=>Gt,Sy:()=>gt,Y1:()=>b,qv:()=>ft,xm:()=>h,yy:()=>St});var v=c(77346),l=c(38480);const T=Object.create(null);class b{constructor(k,et,st){this.$anchor=k,this.$head=et,this.ranges=st||[new h(k.min(et),k.max(et))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let k=this.ranges;for(let et=0;et<k.length;et++)if(k[et].$from.pos!=k[et].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(k,et=v.p2.empty){let st=et.content.lastChild,it=null;for(let nt=0;nt<et.openEnd;nt++)it=st,st=st.lastChild;let U=k.steps.length,Q=this.ranges;for(let nt=0;nt<Q.length;nt++){let{$from:kt,$to:jt}=Q[nt],Yt=k.mapping.slice(U);k.replaceRange(Yt.map(kt.pos),Yt.map(jt.pos),nt?v.p2.empty:et),0==nt&&Ct(k,U,(st?st.isInline:it&&it.isTextblock)?-1:1)}}replaceWith(k,et){let st=k.steps.length,it=this.ranges;for(let U=0;U<it.length;U++){let{$from:Q,$to:nt}=it[U],kt=k.mapping.slice(st),jt=kt.map(Q.pos),Yt=kt.map(nt.pos);U?k.deleteRange(jt,Yt):(k.replaceRangeWith(jt,Yt,et),Ct(k,st,et.isInline?-1:1))}}static findFrom(k,et,st=!1){let it=k.parent.inlineContent?new G(k):lt(k.node(0),k.parent,k.pos,k.index(),et,st);if(it)return it;for(let U=k.depth-1;U>=0;U--){let Q=et<0?lt(k.node(0),k.node(U),k.before(U+1),k.index(U),et,st):lt(k.node(0),k.node(U),k.after(U+1),k.index(U)+1,et,st);if(Q)return Q}return null}static near(k,et=1){return this.findFrom(k,et)||this.findFrom(k,-et)||new q(k.node(0))}static atStart(k){return lt(k,k,0,0,1)||new q(k)}static atEnd(k){return lt(k,k,k.content.size,k.childCount,-1)||new q(k)}static fromJSON(k,et){if(!et||!et.type)throw new RangeError("Invalid input for Selection.fromJSON");let st=T[et.type];if(!st)throw new RangeError(`No selection type ${et.type} defined`);return st.fromJSON(k,et)}static jsonID(k,et){if(k in T)throw new RangeError("Duplicate use of selection JSON ID "+k);return T[k]=et,et.prototype.jsonID=k,et}getBookmark(){return G.between(this.$anchor,this.$head).getBookmark()}}b.prototype.visible=!0;class h{constructor(k,et){this.$from=k,this.$to=et}}let J=!1;function R(ht){!J&&!ht.parent.inlineContent&&(J=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+ht.parent.type.name+")"))}class G extends b{constructor(k,et=k){R(k),R(et),super(k,et)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(k,et){let st=k.resolve(et.map(this.head));if(!st.parent.inlineContent)return b.near(st);let it=k.resolve(et.map(this.anchor));return new G(it.parent.inlineContent?it:st,st)}replace(k,et=v.p2.empty){if(super.replace(k,et),et==v.p2.empty){let st=this.$from.marksAcross(this.$to);st&&k.ensureMarks(st)}}eq(k){return k instanceof G&&k.anchor==this.anchor&&k.head==this.head}getBookmark(){return new Y(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(k,et){if("number"!=typeof et.anchor||"number"!=typeof et.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new G(k.resolve(et.anchor),k.resolve(et.head))}static create(k,et,st=et){let it=k.resolve(et);return new this(it,st==et?it:k.resolve(st))}static between(k,et,st){let it=k.pos-et.pos;if((!st||it)&&(st=it>=0?1:-1),!et.parent.inlineContent){let U=b.findFrom(et,st,!0)||b.findFrom(et,-st,!0);if(!U)return b.near(et,st);et=U.$head}return k.parent.inlineContent||(0==it||(k=(b.findFrom(k,-st,!0)||b.findFrom(k,st,!0)).$anchor).pos<et.pos!=it<0)&&(k=et),new G(k,et)}}b.jsonID("text",G);class Y{constructor(k,et){this.anchor=k,this.head=et}map(k){return new Y(k.map(this.anchor),k.map(this.head))}resolve(k){return G.between(k.resolve(this.anchor),k.resolve(this.head))}}class ft extends b{constructor(k){let et=k.nodeAfter,st=k.node(0).resolve(k.pos+et.nodeSize);super(k,st),this.node=et}map(k,et){let{deleted:st,pos:it}=et.mapResult(this.anchor),U=k.resolve(it);return st?b.near(U):new ft(U)}content(){return new v.p2(v.HY.from(this.node),0,0)}eq(k){return k instanceof ft&&k.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new dt(this.anchor)}static fromJSON(k,et){if("number"!=typeof et.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ft(k.resolve(et.anchor))}static create(k,et){return new ft(k.resolve(et))}static isSelectable(k){return!k.isText&&!1!==k.type.spec.selectable}}ft.prototype.visible=!1,b.jsonID("node",ft);class dt{constructor(k){this.anchor=k}map(k){let{deleted:et,pos:st}=k.mapResult(this.anchor);return et?new Y(st,st):new dt(st)}resolve(k){let et=k.resolve(this.anchor),st=et.nodeAfter;return st&&ft.isSelectable(st)?new ft(et):b.near(et)}}class q extends b{constructor(k){super(k.resolve(0),k.resolve(k.content.size))}replace(k,et=v.p2.empty){if(et==v.p2.empty){k.delete(0,k.doc.content.size);let st=b.atStart(k.doc);st.eq(k.selection)||k.setSelection(st)}else super.replace(k,et)}toJSON(){return{type:"all"}}static fromJSON(k){return new q(k)}map(k){return new q(k)}eq(k){return k instanceof q}getBookmark(){return mt}}b.jsonID("all",q);const mt={map(){return this},resolve:ht=>new q(ht)};function lt(ht,k,et,st,it,U=!1){if(k.inlineContent)return G.create(ht,et);for(let Q=st-(it>0?0:1);it>0?Q<k.childCount:Q>=0;Q+=it){let nt=k.child(Q);if(nt.isAtom){if(!U&&ft.isSelectable(nt))return ft.create(ht,et-(it<0?nt.nodeSize:0))}else{let kt=lt(ht,nt,et+it,it<0?nt.childCount:0,it,U);if(kt)return kt}et+=nt.nodeSize*it}return null}function Ct(ht,k,et){let st=ht.steps.length-1;if(st<k)return;let Q,it=ht.steps[st];(it instanceof l.Pu||it instanceof l.FC)&&(ht.mapping.maps[st].forEach((nt,kt,jt,Yt)=>{null==Q&&(Q=Yt)}),ht.setSelection(b.near(ht.doc.resolve(Q),et)))}class ut extends l.wx{constructor(k){super(k.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=k.selection,this.storedMarks=k.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(k){if(k.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=k,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(k){return this.storedMarks=k,this.updated|=2,this}ensureMarks(k){return v.vc.sameSet(this.storedMarks||this.selection.$from.marks(),k)||this.setStoredMarks(k),this}addStoredMark(k){return this.ensureMarks(k.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(k){return this.ensureMarks(k.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(k,et){super.addStep(k,et),this.updated=-3&this.updated,this.storedMarks=null}setTime(k){return this.time=k,this}replaceSelection(k){return this.selection.replace(this,k),this}replaceSelectionWith(k,et=!0){let st=this.selection;return et&&(k=k.mark(this.storedMarks||(st.empty?st.$from.marks():st.$from.marksAcross(st.$to)||v.vc.none))),st.replaceWith(this,k),this}deleteSelection(){return this.selection.replace(this),this}insertText(k,et,st){let it=this.doc.type.schema;if(null==et)return k?this.replaceSelectionWith(it.text(k),!0):this.deleteSelection();{if(null==st&&(st=et),st=null==st?et:st,!k)return this.deleteRange(et,st);let U=this.storedMarks;if(!U){let Q=this.doc.resolve(et);U=st==et?Q.marks():Q.marksAcross(this.doc.resolve(st))}return this.replaceRangeWith(et,st,it.text(k,U)),this.selection.empty||this.setSelection(b.near(this.selection.$to)),this}}setMeta(k,et){return this.meta["string"==typeof k?k:k.key]=et,this}getMeta(k){return this.meta["string"==typeof k?k:k.key]}get isGeneric(){for(let k in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function pt(ht,k){return k&&ht?ht.bind(k):ht}class K{constructor(k,et,st){this.name=k,this.init=pt(et.init,st),this.apply=pt(et.apply,st)}}const At=[new K("doc",{init:ht=>ht.doc||ht.schema.topNodeType.createAndFill(),apply:ht=>ht.doc}),new K("selection",{init:(ht,k)=>ht.selection||b.atStart(k.doc),apply:ht=>ht.selection}),new K("storedMarks",{init:ht=>ht.storedMarks||null,apply:(ht,k,et,st)=>st.selection.$cursor?ht.storedMarks:null}),new K("scrollToSelection",{init:()=>0,apply:(ht,k)=>ht.scrolledIntoView?k+1:k})];class Ot{constructor(k,et){this.schema=k,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=At.slice(),et&&et.forEach(st=>{if(this.pluginsByKey[st.key])throw new RangeError("Adding different instances of a keyed plugin ("+st.key+")");this.plugins.push(st),this.pluginsByKey[st.key]=st,st.spec.state&&this.fields.push(new K(st.key,st.spec.state,st))})}}class St{constructor(k){this.config=k}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(k){return this.applyTransaction(k).state}filterTransaction(k,et=-1){for(let st=0;st<this.config.plugins.length;st++)if(st!=et){let it=this.config.plugins[st];if(it.spec.filterTransaction&&!it.spec.filterTransaction.call(it,k,this))return!1}return!0}applyTransaction(k){if(!this.filterTransaction(k))return{state:this,transactions:[]};let et=[k],st=this.applyInner(k),it=null;for(;;){let U=!1;for(let Q=0;Q<this.config.plugins.length;Q++){let nt=this.config.plugins[Q];if(nt.spec.appendTransaction){let kt=it?it[Q].n:0,jt=it?it[Q].state:this,Yt=kt<et.length&&nt.spec.appendTransaction.call(nt,kt?et.slice(kt):et,jt,st);if(Yt&&st.filterTransaction(Yt,Q)){if(Yt.setMeta("appendedTransaction",k),!it){it=[];for(let le=0;le<this.config.plugins.length;le++)it.push(le<Q?{state:st,n:et.length}:{state:this,n:0})}et.push(Yt),st=st.applyInner(Yt),U=!0}it&&(it[Q]={state:st,n:et.length})}}if(!U)return{state:st,transactions:et}}}applyInner(k){if(!k.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let et=new St(this.config),st=this.config.fields;for(let it=0;it<st.length;it++){let U=st[it];et[U.name]=U.apply(k,this[U.name],this,et)}return et}get tr(){return new ut(this)}static create(k){let et=new Ot(k.doc?k.doc.type.schema:k.schema,k.plugins),st=new St(et);for(let it=0;it<et.fields.length;it++)st[et.fields[it].name]=et.fields[it].init(k,st);return st}reconfigure(k){let et=new Ot(this.schema,k.plugins),st=et.fields,it=new St(et);for(let U=0;U<st.length;U++){let Q=st[U].name;it[Q]=this.hasOwnProperty(Q)?this[Q]:st[U].init(k,it)}return it}toJSON(k){let et={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(et.storedMarks=this.storedMarks.map(st=>st.toJSON())),k&&"object"==typeof k)for(let st in k){if("doc"==st||"selection"==st)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let it=k[st],U=it.spec.state;U&&U.toJSON&&(et[st]=U.toJSON.call(it,this[it.key]))}return et}static fromJSON(k,et,st){if(!et)throw new RangeError("Invalid input for EditorState.fromJSON");if(!k.schema)throw new RangeError("Required config field 'schema' missing");let it=new Ot(k.schema,k.plugins),U=new St(it);return it.fields.forEach(Q=>{if("doc"==Q.name)U.doc=v.NB.fromJSON(k.schema,et.doc);else if("selection"==Q.name)U.selection=b.fromJSON(U.doc,et.selection);else if("storedMarks"==Q.name)et.storedMarks&&(U.storedMarks=et.storedMarks.map(k.schema.markFromJSON));else{if(st)for(let nt in st){let kt=st[nt],jt=kt.spec.state;if(kt.key==Q.name&&jt&&jt.fromJSON&&Object.prototype.hasOwnProperty.call(et,nt))return void(U[Q.name]=jt.fromJSON.call(kt,k,et[nt],U))}U[Q.name]=Q.init(k,U)}}),U}}function Rt(ht,k,et){for(let st in ht){let it=ht[st];it instanceof Function?it=it.bind(k):"handleDOMEvents"==st&&(it=Rt(it,k,{})),et[st]=it}return et}class gt{constructor(k){this.spec=k,this.props={},k.props&&Rt(k.props,this,this.props),this.key=k.key?k.key.key:$t("plugin")}getState(k){return k[this.key]}}const Ft=Object.create(null);function $t(ht){return ht in Ft?ht+"$"+ ++Ft[ht]:(Ft[ht]=0,ht+"$")}class Gt{constructor(k="key"){this.key=$t(k)}get(k){return k.config.pluginsByKey[this.key]}getState(k){return k[this.key]}}},38480:(qt,Dt,c)=>{c.d(Dt,{Ax:()=>jt,FC:()=>Ot,GJ:()=>ve,Mn:()=>le,Pu:()=>At,dR:()=>Qe,k9:()=>Gt,nd:()=>k,nj:()=>ge,vs:()=>mt,wx:()=>fe});var v=c(77346);const T=Math.pow(2,16);function b(vt,D){return vt+D*T}function h(vt){return 65535&vt}class dt{constructor(D,y,S){this.pos=D,this.delInfo=y,this.recover=S}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class q{constructor(D,y=!1){if(this.ranges=D,this.inverted=y,!D.length&&q.empty)return q.empty}recover(D){let y=0,S=h(D);if(!this.inverted)for(let w=0;w<S;w++)y+=this.ranges[3*w+2]-this.ranges[3*w+1];return this.ranges[3*S]+y+((vt=D)-(65535&vt))/T;var vt}mapResult(D,y=1){return this._map(D,y,!1)}map(D,y=1){return this._map(D,y,!0)}_map(D,y,S){let w=0,Z=this.inverted?2:1,F=this.inverted?1:2;for(let Et=0;Et<this.ranges.length;Et+=3){let Bt=this.ranges[Et]-(this.inverted?w:0);if(Bt>D)break;let N=this.ranges[Et+Z],a=this.ranges[Et+F],d=Bt+N;if(D<=d){let A=Bt+w+((N?D==Bt?-1:D==d?1:y:y)<0?0:a);if(S)return A;let I=D==(y<0?Bt:d)?null:b(Et/3,D-Bt),W=D==Bt?2:D==d?1:4;return(y<0?D!=Bt:D!=d)&&(W|=8),new dt(A,W,I)}w+=a-N}return S?D+w:new dt(D+w,0,null)}touches(D,y){let S=0,w=h(y),Z=this.inverted?2:1,F=this.inverted?1:2;for(let Et=0;Et<this.ranges.length;Et+=3){let Bt=this.ranges[Et]-(this.inverted?S:0);if(Bt>D)break;let N=this.ranges[Et+Z];if(D<=Bt+N&&Et==3*w)return!0;S+=this.ranges[Et+F]-N}return!1}forEach(D){let y=this.inverted?2:1,S=this.inverted?1:2;for(let w=0,Z=0;w<this.ranges.length;w+=3){let F=this.ranges[w],Et=F-(this.inverted?Z:0),Bt=F+(this.inverted?0:Z),N=this.ranges[w+y],a=this.ranges[w+S];D(Et,Et+N,Bt,Bt+a),Z+=a-N}}invert(){return new q(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(D){return 0==D?q.empty:new q(D<0?[0,-D,0]:[0,0,D])}}q.empty=new q([]);class mt{constructor(D=[],y,S=0,w=D.length){this.maps=D,this.mirror=y,this.from=S,this.to=w}slice(D=0,y=this.maps.length){return new mt(this.maps,this.mirror,D,y)}copy(){return new mt(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(D,y){this.to=this.maps.push(D),null!=y&&this.setMirror(this.maps.length-1,y)}appendMapping(D){for(let y=0,S=this.maps.length;y<D.maps.length;y++){let w=D.getMirror(y);this.appendMap(D.maps[y],null!=w&&w<y?S+w:void 0)}}getMirror(D){if(this.mirror)for(let y=0;y<this.mirror.length;y++)if(this.mirror[y]==D)return this.mirror[y+(y%2?-1:1)]}setMirror(D,y){this.mirror||(this.mirror=[]),this.mirror.push(D,y)}appendMappingInverted(D){for(let y=D.maps.length-1,S=this.maps.length+D.maps.length;y>=0;y--){let w=D.getMirror(y);this.appendMap(D.maps[y].invert(),null!=w&&w>y?S-w-1:void 0)}}invert(){let D=new mt;return D.appendMappingInverted(this),D}map(D,y=1){if(this.mirror)return this._map(D,y,!0);for(let S=this.from;S<this.to;S++)D=this.maps[S].map(D,y);return D}mapResult(D,y=1){return this._map(D,y,!1)}_map(D,y,S){let w=0;for(let Z=this.from;Z<this.to;Z++){let Et=this.maps[Z].mapResult(D,y);if(null!=Et.recover){let Bt=this.getMirror(Z);if(null!=Bt&&Bt>Z&&Bt<this.to){Z=Bt,D=this.maps[Bt].recover(Et.recover);continue}}w|=Et.delInfo,D=Et.pos}return S?D:new dt(D,w,null)}}const lt=Object.create(null);class Ct{getMap(){return q.empty}merge(D){return null}static fromJSON(D,y){if(!y||!y.stepType)throw new RangeError("Invalid input for Step.fromJSON");let S=lt[y.stepType];if(!S)throw new RangeError(`No step type ${y.stepType} defined`);return S.fromJSON(D,y)}static jsonID(D,y){if(D in lt)throw new RangeError("Duplicate use of step JSON ID "+D);return lt[D]=y,y.prototype.jsonID=D,y}}class Nt{constructor(D,y){this.doc=D,this.failed=y}static ok(D){return new Nt(D,null)}static fail(D){return new Nt(null,D)}static fromReplace(D,y,S,w){try{return Nt.ok(D.replace(y,S,w))}catch(Z){if(Z instanceof v.e4)return Nt.fail(Z.message);throw Z}}}function xt(vt,D,y){let S=[];for(let w=0;w<vt.childCount;w++){let Z=vt.child(w);Z.content.size&&(Z=Z.copy(xt(Z.content,D,Z))),Z.isInline&&(Z=D(Z,y,w)),S.push(Z)}return v.HY.fromArray(S)}class bt extends Ct{constructor(D,y,S){super(),this.from=D,this.to=y,this.mark=S}apply(D){let y=D.slice(this.from,this.to),S=D.resolve(this.from),w=S.node(S.sharedDepth(this.to)),Z=new v.p2(xt(y.content,(F,Et)=>F.isAtom&&Et.type.allowsMarkType(this.mark.type)?F.mark(this.mark.addToSet(F.marks)):F,w),y.openStart,y.openEnd);return Nt.fromReplace(D,this.from,this.to,Z)}invert(){return new ut(this.from,this.to,this.mark)}map(D){let y=D.mapResult(this.from,1),S=D.mapResult(this.to,-1);return y.deleted&&S.deleted||y.pos>=S.pos?null:new bt(y.pos,S.pos,this.mark)}merge(D){return D instanceof bt&&D.mark.eq(this.mark)&&this.from<=D.to&&this.to>=D.from?new bt(Math.min(this.from,D.from),Math.max(this.to,D.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(D,y){if("number"!=typeof y.from||"number"!=typeof y.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new bt(y.from,y.to,D.markFromJSON(y.mark))}}Ct.jsonID("addMark",bt);class ut extends Ct{constructor(D,y,S){super(),this.from=D,this.to=y,this.mark=S}apply(D){let y=D.slice(this.from,this.to),S=new v.p2(xt(y.content,w=>w.mark(this.mark.removeFromSet(w.marks)),D),y.openStart,y.openEnd);return Nt.fromReplace(D,this.from,this.to,S)}invert(){return new bt(this.from,this.to,this.mark)}map(D){let y=D.mapResult(this.from,1),S=D.mapResult(this.to,-1);return y.deleted&&S.deleted||y.pos>=S.pos?null:new ut(y.pos,S.pos,this.mark)}merge(D){return D instanceof ut&&D.mark.eq(this.mark)&&this.from<=D.to&&this.to>=D.from?new ut(Math.min(this.from,D.from),Math.max(this.to,D.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(D,y){if("number"!=typeof y.from||"number"!=typeof y.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ut(y.from,y.to,D.markFromJSON(y.mark))}}Ct.jsonID("removeMark",ut);class pt extends Ct{constructor(D,y){super(),this.pos=D,this.mark=y}apply(D){let y=D.nodeAt(this.pos);if(!y)return Nt.fail("No node at mark step's position");let S=y.type.create(y.attrs,null,this.mark.addToSet(y.marks));return Nt.fromReplace(D,this.pos,this.pos+1,new v.p2(v.HY.from(S),0,y.isLeaf?0:1))}invert(D){let y=D.nodeAt(this.pos);if(y){let S=this.mark.addToSet(y.marks);if(S.length==y.marks.length){for(let w=0;w<y.marks.length;w++)if(!y.marks[w].isInSet(S))return new pt(this.pos,y.marks[w]);return new pt(this.pos,this.mark)}}return new K(this.pos,this.mark)}map(D){let y=D.mapResult(this.pos,1);return y.deletedAfter?null:new pt(y.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(D,y){if("number"!=typeof y.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new pt(y.pos,D.markFromJSON(y.mark))}}Ct.jsonID("addNodeMark",pt);class K extends Ct{constructor(D,y){super(),this.pos=D,this.mark=y}apply(D){let y=D.nodeAt(this.pos);if(!y)return Nt.fail("No node at mark step's position");let S=y.type.create(y.attrs,null,this.mark.removeFromSet(y.marks));return Nt.fromReplace(D,this.pos,this.pos+1,new v.p2(v.HY.from(S),0,y.isLeaf?0:1))}invert(D){let y=D.nodeAt(this.pos);return y&&this.mark.isInSet(y.marks)?new pt(this.pos,this.mark):this}map(D){let y=D.mapResult(this.pos,1);return y.deletedAfter?null:new K(y.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(D,y){if("number"!=typeof y.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new K(y.pos,D.markFromJSON(y.mark))}}Ct.jsonID("removeNodeMark",K);class At extends Ct{constructor(D,y,S,w=!1){super(),this.from=D,this.to=y,this.slice=S,this.structure=w}apply(D){return this.structure&&St(D,this.from,this.to)?Nt.fail("Structure replace would overwrite content"):Nt.fromReplace(D,this.from,this.to,this.slice)}getMap(){return new q([this.from,this.to-this.from,this.slice.size])}invert(D){return new At(this.from,this.from+this.slice.size,D.slice(this.from,this.to))}map(D){let y=D.mapResult(this.from,1),S=D.mapResult(this.to,-1);return y.deletedAcross&&S.deletedAcross?null:new At(y.pos,Math.max(y.pos,S.pos),this.slice)}merge(D){if(!(D instanceof At)||D.structure||this.structure)return null;if(this.from+this.slice.size!=D.from||this.slice.openEnd||D.slice.openStart){if(D.to!=this.from||this.slice.openStart||D.slice.openEnd)return null;{let y=this.slice.size+D.slice.size==0?v.p2.empty:new v.p2(D.slice.content.append(this.slice.content),D.slice.openStart,this.slice.openEnd);return new At(D.from,this.to,y,this.structure)}}{let y=this.slice.size+D.slice.size==0?v.p2.empty:new v.p2(this.slice.content.append(D.slice.content),this.slice.openStart,D.slice.openEnd);return new At(this.from,this.to+(D.to-D.from),y,this.structure)}}toJSON(){let D={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(D.slice=this.slice.toJSON()),this.structure&&(D.structure=!0),D}static fromJSON(D,y){if("number"!=typeof y.from||"number"!=typeof y.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new At(y.from,y.to,v.p2.fromJSON(D,y.slice),!!y.structure)}}Ct.jsonID("replace",At);class Ot extends Ct{constructor(D,y,S,w,Z,F,Et=!1){super(),this.from=D,this.to=y,this.gapFrom=S,this.gapTo=w,this.slice=Z,this.insert=F,this.structure=Et}apply(D){if(this.structure&&(St(D,this.from,this.gapFrom)||St(D,this.gapTo,this.to)))return Nt.fail("Structure gap-replace would overwrite content");let y=D.slice(this.gapFrom,this.gapTo);if(y.openStart||y.openEnd)return Nt.fail("Gap is not a flat range");let S=this.slice.insertAt(this.insert,y.content);return S?Nt.fromReplace(D,this.from,this.to,S):Nt.fail("Content does not fit in gap")}getMap(){return new q([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(D){let y=this.gapTo-this.gapFrom;return new Ot(this.from,this.from+this.slice.size+y,this.from+this.insert,this.from+this.insert+y,D.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(D){let y=D.mapResult(this.from,1),S=D.mapResult(this.to,-1),w=D.map(this.gapFrom,-1),Z=D.map(this.gapTo,1);return y.deletedAcross&&S.deletedAcross||w<y.pos||Z>S.pos?null:new Ot(y.pos,S.pos,w,Z,this.slice,this.insert,this.structure)}toJSON(){let D={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(D.slice=this.slice.toJSON()),this.structure&&(D.structure=!0),D}static fromJSON(D,y){if("number"!=typeof y.from||"number"!=typeof y.to||"number"!=typeof y.gapFrom||"number"!=typeof y.gapTo||"number"!=typeof y.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ot(y.from,y.to,y.gapFrom,y.gapTo,v.p2.fromJSON(D,y.slice),y.insert,!!y.structure)}}function St(vt,D,y){let S=vt.resolve(D),w=y-D,Z=S.depth;for(;w>0&&Z>0&&S.indexAfter(Z)==S.node(Z).childCount;)Z--,w--;if(w>0){let F=S.node(Z).maybeChild(S.indexAfter(Z));for(;w>0;){if(!F||F.isLeaf)return!0;F=F.firstChild,w--}}return!1}function $t(vt,D,y){return(0==D||vt.canReplace(D,vt.childCount))&&(y==vt.childCount||vt.canReplace(0,y))}function Gt(vt){let y=vt.parent.content.cutByIndex(vt.startIndex,vt.endIndex);for(let S=vt.depth;;--S){let w=vt.$from.node(S),Z=vt.$from.index(S),F=vt.$to.indexAfter(S);if(S<vt.depth&&w.canReplace(Z,F,y))return S;if(0==S||w.type.spec.isolating||!$t(w,Z,F))break}return null}function k(vt,D,y=null,S=vt){let w=function(vt,D){let{parent:y,startIndex:S,endIndex:w}=vt,Z=y.contentMatchAt(S).findWrapping(D);return Z&&y.canReplaceWith(S,w,Z.length?Z[0]:D)?Z:null}(vt,D),Z=w&&function(vt,D){let{parent:y,startIndex:S,endIndex:w}=vt,Z=y.child(S),F=D.contentMatch.findWrapping(Z.type);if(!F)return null;let Bt=(F.length?F[F.length-1]:D).contentMatch;for(let N=S;Bt&&N<w;N++)Bt=Bt.matchType(y.child(N).type);return Bt&&Bt.validEnd?F:null}(S,D);return Z?w.map(et).concat({type:D,attrs:y}).concat(Z.map(et)):null}function et(vt){return{type:vt,attrs:null}}function jt(vt,D,y=1,S){let w=vt.resolve(D),Z=w.depth-y,F=S&&S[S.length-1]||w.parent;if(Z<0||w.parent.type.spec.isolating||!w.parent.canReplace(w.index(),w.parent.childCount)||!F.type.validContent(w.parent.content.cutByIndex(w.index(),w.parent.childCount)))return!1;for(let N=w.depth-1,a=y-2;N>Z;N--,a--){let d=w.node(N),C=w.index(N);if(d.type.spec.isolating)return!1;let A=d.content.cutByIndex(C,d.childCount),I=S&&S[a]||d;if(I!=d&&(A=A.replaceChild(0,I.type.create(I.attrs))),!d.canReplace(C+1,d.childCount)||!I.type.validContent(A))return!1}let Et=w.indexAfter(Z),Bt=S&&S[0];return w.node(Z).canReplaceWith(Et,Et,Bt?Bt.type:w.node(Z+1).type)}function le(vt,D){let y=vt.resolve(D),S=y.index();return Vt(y.nodeBefore,y.nodeAfter)&&y.parent.canReplace(S,S+1)}function Vt(vt,D){return!(!vt||!D||vt.isLeaf||!vt.canAppend(D))}function ve(vt,D,y=-1){let S=vt.resolve(D);for(let w=S.depth;;w--){let Z,F,Et=S.index(w);if(w==S.depth?(Z=S.nodeBefore,F=S.nodeAfter):y>0?(Z=S.node(w+1),Et++,F=S.node(w).maybeChild(Et)):(Z=S.node(w).maybeChild(Et-1),F=S.node(w+1)),Z&&!Z.isTextblock&&Vt(Z,F)&&S.node(w).canReplace(Et,Et+1))return D;if(0==w)break;D=y<0?S.before(w):S.after(w)}}function ge(vt,D,y){let S=vt.resolve(D);if(!y.content.size)return D;let w=y.content;for(let Z=0;Z<y.openStart;Z++)w=w.firstChild.content;for(let Z=1;Z<=(0==y.openStart&&y.size?2:1);Z++)for(let F=S.depth;F>=0;F--){let Et=F==S.depth?0:S.pos<=(S.start(F+1)+S.end(F+1))/2?-1:1,Bt=S.index(F)+(Et>0?1:0),N=S.node(F),a=!1;if(1==Z)a=N.canReplace(Bt,Bt,w);else{let d=N.contentMatchAt(Bt).findWrapping(w.firstChild.type);a=d&&N.canReplaceWith(Bt,Bt,d[0])}if(a)return 0==Et?S.pos:Et<0?S.before(F+1):S.after(F+1)}return null}function Qe(vt,D,y=D,S=v.p2.empty){if(D==y&&!S.size)return null;let w=vt.resolve(D),Z=vt.resolve(y);return Le(w,Z,S)?new At(D,y,S):new Pe(w,Z,S).fit()}function Le(vt,D,y){return!y.openStart&&!y.openEnd&&vt.start()==D.start()&&vt.parent.canReplace(vt.index(),D.index(),y.content)}Ct.jsonID("replaceAround",Ot);class Pe{constructor(D,y,S){this.$from=D,this.$to=y,this.unplaced=S,this.frontier=[],this.placed=v.HY.empty;for(let w=0;w<=D.depth;w++){let Z=D.node(w);this.frontier.push({type:Z.type,match:Z.contentMatchAt(D.indexAfter(w))})}for(let w=D.depth;w>0;w--)this.placed=v.HY.from(D.node(w).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let N=this.findFittable();N?this.placeNodes(N):this.openMore()||this.dropNode()}let D=this.mustMoveInline(),y=this.placed.size-this.depth-this.$from.depth,S=this.$from,w=this.close(D<0?this.$to:S.doc.resolve(D));if(!w)return null;let Z=this.placed,F=S.depth,Et=w.depth;for(;F&&Et&&1==Z.childCount;)Z=Z.firstChild.content,F--,Et--;let Bt=new v.p2(Z,F,Et);return D>-1?new Ot(S.pos,D,this.$to.pos,this.$to.end(),Bt,y):Bt.size||S.pos!=this.$to.pos?new At(S.pos,w.pos,Bt):null}findFittable(){let D=this.unplaced.openStart;for(let y=this.unplaced.content,S=0,w=this.unplaced.openEnd;S<D;S++){let Z=y.firstChild;if(y.childCount>1&&(w=0),Z.type.spec.isolating&&w<=S){D=S;break}y=Z.content}for(let y=1;y<=2;y++)for(let S=1==y?D:this.unplaced.openStart;S>=0;S--){let w,Z=null;S?(Z=Je(this.unplaced.content,S-1).firstChild,w=Z.content):w=this.unplaced.content;let F=w.firstChild;for(let Et=this.depth;Et>=0;Et--){let a,{type:Bt,match:N}=this.frontier[Et],d=null;if(1==y&&(F?N.matchType(F.type)||(d=N.fillBefore(v.HY.from(F),!1)):Z&&Bt.compatibleContent(Z.type)))return{sliceDepth:S,frontierDepth:Et,parent:Z,inject:d};if(2==y&&F&&(a=N.findWrapping(F.type)))return{sliceDepth:S,frontierDepth:Et,parent:Z,wrap:a};if(Z&&N.matchType(Z.type))break}}}openMore(){let{content:D,openStart:y,openEnd:S}=this.unplaced,w=Je(D,y);return!(!w.childCount||w.firstChild.isLeaf||(this.unplaced=new v.p2(D,y+1,Math.max(S,w.size+y>=D.size-S?y+1:0)),0))}dropNode(){let{content:D,openStart:y,openEnd:S}=this.unplaced,w=Je(D,y);if(w.childCount<=1&&y>0){let Z=D.size-y<=y+w.size;this.unplaced=new v.p2(Ke(D,y-1,1),y-1,Z?y-1:S)}else this.unplaced=new v.p2(Ke(D,y,1),y,S)}placeNodes({sliceDepth:D,frontierDepth:y,parent:S,inject:w,wrap:Z}){for(;this.depth>y;)this.closeFrontierNode();if(Z)for(let W=0;W<Z.length;W++)this.openFrontierNode(Z[W]);let F=this.unplaced,Et=S?S.content:F.content,Bt=F.openStart-D,N=0,a=[],{match:d,type:C}=this.frontier[y];if(w){for(let W=0;W<w.childCount;W++)a.push(w.child(W));d=d.matchFragment(w)}let A=Et.size+D-(F.content.size-F.openEnd);for(;N<Et.childCount;){let W=Et.child(N),tt=d.matchType(W.type);if(!tt)break;N++,(N>1||0==Bt||W.content.size)&&(d=tt,a.push(Fe(W.mark(C.allowedMarks(W.marks)),1==N?Bt:0,N==Et.childCount?A:-1)))}let I=N==Et.childCount;I||(A=-1),this.placed=Ye(this.placed,y,v.HY.from(a)),this.frontier[y].match=d,I&&A<0&&S&&S.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let W=0,tt=Et;W<A;W++){let Lt=tt.lastChild;this.frontier.push({type:Lt.type,match:Lt.contentMatchAt(Lt.childCount)}),tt=Lt.content}this.unplaced=I?0==D?v.p2.empty:new v.p2(Ke(F.content,D-1,1),D-1,A<0?F.openEnd:D-1):new v.p2(Ke(F.content,D,N),F.openStart,F.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let y,D=this.frontier[this.depth];if(!D.type.isTextblock||!Ze(this.$to,this.$to.depth,D.type,D.match,!1)||this.$to.depth==this.depth&&(y=this.findCloseLevel(this.$to))&&y.depth==this.depth)return-1;let{depth:S}=this.$to,w=this.$to.after(S);for(;S>1&&w==this.$to.end(--S);)++w;return w}findCloseLevel(D){t:for(let y=Math.min(this.depth,D.depth);y>=0;y--){let{match:S,type:w}=this.frontier[y],Z=y<D.depth&&D.end(y+1)==D.pos+(D.depth-(y+1)),F=Ze(D,y,w,S,Z);if(F){for(let Et=y-1;Et>=0;Et--){let{match:Bt,type:N}=this.frontier[Et],a=Ze(D,Et,N,Bt,!0);if(!a||a.childCount)continue t}return{depth:y,fit:F,move:Z?D.doc.resolve(D.after(y+1)):D}}}}close(D){let y=this.findCloseLevel(D);if(!y)return null;for(;this.depth>y.depth;)this.closeFrontierNode();y.fit.childCount&&(this.placed=Ye(this.placed,y.depth,y.fit)),D=y.move;for(let S=y.depth+1;S<=D.depth;S++){let w=D.node(S),Z=w.type.contentMatch.fillBefore(w.content,!0,D.index(S));this.openFrontierNode(w.type,w.attrs,Z)}return D}openFrontierNode(D,y=null,S){let w=this.frontier[this.depth];w.match=w.match.matchType(D),this.placed=Ye(this.placed,this.depth,v.HY.from(D.create(y,S))),this.frontier.push({type:D,match:D.contentMatch})}closeFrontierNode(){let y=this.frontier.pop().match.fillBefore(v.HY.empty,!0);y.childCount&&(this.placed=Ye(this.placed,this.frontier.length,y))}}function Ke(vt,D,y){return 0==D?vt.cutByIndex(y,vt.childCount):vt.replaceChild(0,vt.firstChild.copy(Ke(vt.firstChild.content,D-1,y)))}function Ye(vt,D,y){return 0==D?vt.append(y):vt.replaceChild(vt.childCount-1,vt.lastChild.copy(Ye(vt.lastChild.content,D-1,y)))}function Je(vt,D){for(let y=0;y<D;y++)vt=vt.firstChild.content;return vt}function Fe(vt,D,y){if(D<=0)return vt;let S=vt.content;return D>1&&(S=S.replaceChild(0,Fe(S.firstChild,D-1,1==S.childCount?y-1:0))),D>0&&(S=vt.type.contentMatch.fillBefore(S).append(S),y<=0&&(S=S.append(vt.type.contentMatch.matchFragment(S).fillBefore(v.HY.empty,!0)))),vt.copy(S)}function Ze(vt,D,y,S,w){let Z=vt.node(D),F=w?vt.indexAfter(D):vt.index(D);if(F==Z.childCount&&!y.compatibleContent(Z.type))return null;let Et=S.fillBefore(Z.content,!0,F);return Et&&!function(vt,D,y){for(let S=y;S<D.childCount;S++)if(!vt.allowsMarks(D.child(S).marks))return!0;return!1}(y,Z.content,F)?Et:null}function Ne(vt){return vt.spec.defining||vt.spec.definingForContent}function $e(vt,D,y,S,w){if(D<y){let Z=vt.firstChild;vt=vt.replaceChild(0,Z.copy($e(Z.content,D+1,y,S,Z)))}if(D>S){let Z=w.contentMatchAt(0),F=Z.fillBefore(vt).append(vt);vt=F.append(Z.matchFragment(F).fillBefore(v.HY.empty,!0))}return vt}function je(vt,D){let y=[];for(let w=Math.min(vt.depth,D.depth);w>=0;w--){let Z=vt.start(w);if(Z<vt.pos-(vt.depth-w)||D.end(w)>D.pos+(D.depth-w)||vt.node(w).type.spec.isolating||D.node(w).type.spec.isolating)break;(Z==D.start(w)||w==vt.depth&&w==D.depth&&vt.parent.inlineContent&&D.parent.inlineContent&&w&&D.start(w-1)==Z-1)&&y.push(w)}return y}class Ve extends Ct{constructor(D,y,S){super(),this.pos=D,this.attr=y,this.value=S}apply(D){let y=D.nodeAt(this.pos);if(!y)return Nt.fail("No node at attribute step's position");let S=Object.create(null);for(let Z in y.attrs)S[Z]=y.attrs[Z];S[this.attr]=this.value;let w=y.type.create(S,null,y.marks);return Nt.fromReplace(D,this.pos,this.pos+1,new v.p2(v.HY.from(w),0,y.isLeaf?0:1))}getMap(){return q.empty}invert(D){return new Ve(this.pos,this.attr,D.nodeAt(this.pos).attrs[this.attr])}map(D){let y=D.mapResult(this.pos,1);return y.deletedAfter?null:new Ve(y.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(D,y){if("number"!=typeof y.pos||"string"!=typeof y.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ve(y.pos,y.attr,y.value)}}Ct.jsonID("attr",Ve);let Ie=class extends Error{};Ie=function vt(D){let y=Error.call(this,D);return y.__proto__=vt.prototype,y},(Ie.prototype=Object.create(Error.prototype)).constructor=Ie,Ie.prototype.name="TransformError";class fe{constructor(D){this.doc=D,this.steps=[],this.docs=[],this.mapping=new mt}get before(){return this.docs.length?this.docs[0]:this.doc}step(D){let y=this.maybeStep(D);if(y.failed)throw new Ie(y.failed);return this}maybeStep(D){let y=D.apply(this.doc);return y.failed||this.addStep(D,y.doc),y}get docChanged(){return this.steps.length>0}addStep(D,y){this.docs.push(this.doc),this.steps.push(D),this.mapping.appendMap(D.getMap()),this.doc=y}replace(D,y=D,S=v.p2.empty){let w=Qe(this.doc,D,y,S);return w&&this.step(w),this}replaceWith(D,y,S){return this.replace(D,y,new v.p2(v.HY.from(S),0,0))}delete(D,y){return this.replace(D,y,v.p2.empty)}insert(D,y){return this.replaceWith(D,D,y)}replaceRange(D,y,S){return function(vt,D,y,S){if(!S.size)return vt.deleteRange(D,y);let w=vt.doc.resolve(D),Z=vt.doc.resolve(y);if(Le(w,Z,S))return vt.step(new At(D,y,S));let F=je(w,vt.doc.resolve(y));0==F[F.length-1]&&F.pop();let Et=-(w.depth+1);F.unshift(Et);for(let C=w.depth,A=w.pos-1;C>0;C--,A--){let I=w.node(C).type.spec;if(I.defining||I.definingAsContext||I.isolating)break;F.indexOf(C)>-1?Et=C:w.before(C)==A&&F.splice(1,0,-C)}let Bt=F.indexOf(Et),N=[],a=S.openStart;for(let C=S.content,A=0;;A++){let I=C.firstChild;if(N.push(I),A==S.openStart)break;C=I.content}for(let C=a-1;C>=0;C--){let A=N[C].type,I=Ne(A);if(I&&w.node(Bt).type!=A)a=C;else if(I||!A.isTextblock)break}for(let C=S.openStart;C>=0;C--){let A=(C+a+1)%(S.openStart+1),I=N[A];if(I)for(let W=0;W<F.length;W++){let tt=F[(W+Bt)%F.length],Lt=!0;tt<0&&(Lt=!1,tt=-tt);let z=w.node(tt-1),B=w.index(tt-1);if(z.canReplaceWith(B,B,I.type,I.marks))return vt.replace(w.before(tt),Lt?Z.after(tt):y,new v.p2($e(S.content,0,S.openStart,A),A,S.openEnd))}}let d=vt.steps.length;for(let C=F.length-1;C>=0&&(vt.replace(D,y,S),!(vt.steps.length>d));C--){let A=F[C];A<0||(D=w.before(A),y=Z.after(A))}}(this,D,y,S),this}replaceRangeWith(D,y,S){return function(vt,D,y,S){if(!S.isInline&&D==y&&vt.doc.resolve(D).parent.content.size){let w=function(vt,D,y){let S=vt.resolve(D);if(S.parent.canReplaceWith(S.index(),S.index(),y))return D;if(0==S.parentOffset)for(let w=S.depth-1;w>=0;w--){let Z=S.index(w);if(S.node(w).canReplaceWith(Z,Z,y))return S.before(w+1);if(Z>0)return null}if(S.parentOffset==S.parent.content.size)for(let w=S.depth-1;w>=0;w--){let Z=S.indexAfter(w);if(S.node(w).canReplaceWith(Z,Z,y))return S.after(w+1);if(Z<S.node(w).childCount)return null}return null}(vt.doc,D,S.type);null!=w&&(D=y=w)}vt.replaceRange(D,y,new v.p2(v.HY.from(S),0,0))}(this,D,y,S),this}deleteRange(D,y){return function(vt,D,y){let S=vt.doc.resolve(D),w=vt.doc.resolve(y),Z=je(S,w);for(let F=0;F<Z.length;F++){let Et=Z[F],Bt=F==Z.length-1;if(Bt&&0==Et||S.node(Et).type.contentMatch.validEnd)return vt.delete(S.start(Et),w.end(Et));if(Et>0&&(Bt||S.node(Et-1).canReplace(S.index(Et-1),w.indexAfter(Et-1))))return vt.delete(S.before(Et),w.after(Et))}for(let F=1;F<=S.depth&&F<=w.depth;F++)if(D-S.start(F)==S.depth-F&&y>S.end(F)&&w.end(F)-y!=w.depth-F)return vt.delete(S.before(F),y);vt.delete(D,y)}(this,D,y),this}lift(D,y){return function(vt,D,y){let{$from:S,$to:w,depth:Z}=D,F=S.before(Z+1),Et=w.after(Z+1),Bt=F,N=Et,a=v.HY.empty,d=0;for(let I=Z,W=!1;I>y;I--)W||S.index(I)>0?(W=!0,a=v.HY.from(S.node(I).copy(a)),d++):Bt--;let C=v.HY.empty,A=0;for(let I=Z,W=!1;I>y;I--)W||w.after(I+1)<w.end(I)?(W=!0,C=v.HY.from(w.node(I).copy(C)),A++):N++;vt.step(new Ot(Bt,N,F,Et,new v.p2(a.append(C),d,A),a.size-d,!0))}(this,D,y),this}join(D,y=1){return function(vt,D,y){let S=new At(D-y,D+y,v.p2.empty,!0);vt.step(S)}(this,D,y),this}wrap(D,y){return function(vt,D,y){let S=v.HY.empty;for(let F=y.length-1;F>=0;F--){if(S.size){let Et=y[F].type.contentMatch.matchFragment(S);if(!Et||!Et.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}S=v.HY.from(y[F].type.create(y[F].attrs,S))}let w=D.start,Z=D.end;vt.step(new Ot(w,Z,w,Z,new v.p2(S,0,0),y.length,!0))}(this,D,y),this}setBlockType(D,y=D,S,w=null){return function(vt,D,y,S,w){if(!S.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let Z=vt.steps.length;vt.doc.nodesBetween(D,y,(F,Et)=>{if(F.isTextblock&&!F.hasMarkup(S,w)&&function(vt,D,y){let S=vt.resolve(D),w=S.index();return S.parent.canReplaceWith(w,w+1,y)}(vt.doc,vt.mapping.slice(Z).map(Et),S)){vt.clearIncompatible(vt.mapping.slice(Z).map(Et,1),S);let Bt=vt.mapping.slice(Z),N=Bt.map(Et,1),a=Bt.map(Et+F.nodeSize,1);return vt.step(new Ot(N,a,N+1,a-1,new v.p2(v.HY.from(S.create(w,null,F.marks)),0,0),1,!0)),!1}})}(this,D,y,S,w),this}setNodeMarkup(D,y,S=null,w){return function(vt,D,y,S,w){let Z=vt.doc.nodeAt(D);if(!Z)throw new RangeError("No node at given position");y||(y=Z.type);let F=y.create(S,null,w||Z.marks);if(Z.isLeaf)return vt.replaceWith(D,D+Z.nodeSize,F);if(!y.validContent(Z.content))throw new RangeError("Invalid content for node type "+y.name);vt.step(new Ot(D,D+Z.nodeSize,D+1,D+Z.nodeSize-1,new v.p2(v.HY.from(F),0,0),1,!0))}(this,D,y,S,w),this}setNodeAttribute(D,y,S){return this.step(new Ve(D,y,S)),this}addNodeMark(D,y){return this.step(new pt(D,y)),this}removeNodeMark(D,y){if(!(y instanceof v.vc)){let S=this.doc.nodeAt(D);if(!S)throw new RangeError("No node at position "+D);if(!(y=y.isInSet(S.marks)))return this}return this.step(new K(D,y)),this}split(D,y=1,S){return function(vt,D,y=1,S){let w=vt.doc.resolve(D),Z=v.HY.empty,F=v.HY.empty;for(let Et=w.depth,Bt=w.depth-y,N=y-1;Et>Bt;Et--,N--){Z=v.HY.from(w.node(Et).copy(Z));let a=S&&S[N];F=v.HY.from(a?a.type.create(a.attrs,F):w.node(Et).copy(F))}vt.step(new At(D,D,new v.p2(Z.append(F),y,y),!0))}(this,D,y,S),this}addMark(D,y,S){return function(vt,D,y,S){let F,Et,w=[],Z=[];vt.doc.nodesBetween(D,y,(Bt,N,a)=>{if(!Bt.isInline)return;let d=Bt.marks;if(!S.isInSet(d)&&a.type.allowsMarkType(S.type)){let C=Math.max(N,D),A=Math.min(N+Bt.nodeSize,y),I=S.addToSet(d);for(let W=0;W<d.length;W++)d[W].isInSet(I)||(F&&F.to==C&&F.mark.eq(d[W])?F.to=A:w.push(F=new ut(C,A,d[W])));Et&&Et.to==C?Et.to=A:Z.push(Et=new bt(C,A,S))}}),w.forEach(Bt=>vt.step(Bt)),Z.forEach(Bt=>vt.step(Bt))}(this,D,y,S),this}removeMark(D,y,S){return function(vt,D,y,S){let w=[],Z=0;vt.doc.nodesBetween(D,y,(F,Et)=>{if(!F.isInline)return;Z++;let Bt=null;if(S instanceof v.ZU){let a,N=F.marks;for(;a=S.isInSet(N);)(Bt||(Bt=[])).push(a),N=a.removeFromSet(N)}else S?S.isInSet(F.marks)&&(Bt=[S]):Bt=F.marks;if(Bt&&Bt.length){let N=Math.min(Et+F.nodeSize,y);for(let a=0;a<Bt.length;a++){let C,d=Bt[a];for(let A=0;A<w.length;A++){let I=w[A];I.step==Z-1&&d.eq(w[A].style)&&(C=I)}C?(C.to=N,C.step=Z):w.push({style:d,from:Math.max(Et,D),to:N,step:Z})}}}),w.forEach(F=>vt.step(new ut(F.from,F.to,F.style)))}(this,D,y,S),this}clearIncompatible(D,y,S){return function(vt,D,y,S=y.contentMatch){let w=vt.doc.nodeAt(D),Z=[],F=D+1;for(let Et=0;Et<w.childCount;Et++){let Bt=w.child(Et),N=F+Bt.nodeSize,a=S.matchType(Bt.type);if(a){S=a;for(let d=0;d<Bt.marks.length;d++)y.allowsMarkType(Bt.marks[d].type)||vt.step(new ut(F,N,Bt.marks[d]))}else Z.push(new At(F,N,v.p2.empty));F=N}if(!S.validEnd){let Et=S.fillBefore(v.HY.empty,!0);vt.replace(F,F,new v.p2(Et,0,0))}for(let Et=Z.length-1;Et>=0;Et--)vt.step(Z[Et])}(this,D,y,S),this}}},43594:(qt,Dt,c)=>{c.d(Dt,{EH:()=>Xe,p:()=>ln,tk:()=>Bo});var v=c(62463),l=c(77346),T=c(38480);const b=function(i){for(var n=0;;n++)if(!(i=i.previousSibling))return n},h=function(i){let n=i.assignedSlot||i.parentNode;return n&&11==n.nodeType?n.host:n};let J=null;const R=function(i,n,r){let u=J||(J=document.createRange());return u.setEnd(i,null==r?i.nodeValue.length:r),u.setStart(i,n||0),u},G=function(i,n,r,u){return r&&(ft(i,n,r,u,-1)||ft(i,n,r,u,1))},Y=/^(img|br|input|textarea|hr)$/i;function ft(i,n,r,u,m){for(;;){if(i==r&&n==u)return!0;if(n==(m<0?0:dt(i))){let t=i.parentNode;if(!t||1!=t.nodeType||mt(i)||Y.test(i.nodeName)||"false"==i.contentEditable)return!1;n=b(i)+(m<0?0:1),i=t}else{if(1!=i.nodeType)return!1;if("false"==(i=i.childNodes[n+(m<0?-1:0)]).contentEditable)return!1;n=m<0?dt(i):0}}}function dt(i){return 3==i.nodeType?i.nodeValue.length:i.childNodes.length}function mt(i){let n;for(let r=i;r&&!(n=r.pmViewDesc);r=r.parentNode);return n&&n.node&&n.node.isBlock&&(n.dom==i||n.contentDOM==i)}const lt=function(i){return i.focusNode&&G(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)};function Ct(i,n){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=i,r.key=r.code=n,r}const xt="undefined"!=typeof navigator?navigator:null,bt="undefined"!=typeof document?document:null,ut=xt&&xt.userAgent||"",pt=/Edge\/(\d+)/.exec(ut),K=/MSIE \d/.exec(ut),At=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ut),Ot=!!(K||At||pt),St=K?document.documentMode:At?+At[1]:pt?+pt[1]:0,Rt=!Ot&&/gecko\/(\d+)/i.test(ut);Rt&&/Firefox\/(\d+)/.exec(ut);const gt=!Ot&&/Chrome\/(\d+)/.exec(ut),Ft=!!gt,$t=gt?+gt[1]:0,Gt=!Ot&&!!xt&&/Apple Computer/.test(xt.vendor),ht=Gt&&(/Mobile\/\w+/.test(ut)||!!xt&&xt.maxTouchPoints>2),k=ht||!!xt&&/Mac/.test(xt.platform),et=/Android \d/.test(ut),st=!!bt&&"webkitFontSmoothing"in bt.documentElement.style,it=st?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function U(i){return{left:0,right:i.documentElement.clientWidth,top:0,bottom:i.documentElement.clientHeight}}function Q(i,n){return"number"==typeof i?i:i[n]}function nt(i){let n=i.getBoundingClientRect();return{left:n.left,right:n.left+i.clientWidth*(n.width/i.offsetWidth||1),top:n.top,bottom:n.top+i.clientHeight*(n.height/i.offsetHeight||1)}}function kt(i,n,r){let u=i.someProp("scrollThreshold")||0,m=i.someProp("scrollMargin")||5,t=i.dom.ownerDocument;for(let e=r||i.dom;e;e=h(e)){if(1!=e.nodeType)continue;let o=e,s=o==t.body,p=s?U(t):nt(o),f=0,E=0;if(n.top<p.top+Q(u,"top")?E=-(p.top-n.top+Q(m,"top")):n.bottom>p.bottom-Q(u,"bottom")&&(E=n.bottom-p.bottom+Q(m,"bottom")),n.left<p.left+Q(u,"left")?f=-(p.left-n.left+Q(m,"left")):n.right>p.right-Q(u,"right")&&(f=n.right-p.right+Q(m,"right")),f||E)if(s)t.defaultView.scrollBy(f,E);else{let O=o.scrollLeft,P=o.scrollTop;E&&(o.scrollTop+=E),f&&(o.scrollLeft+=f);let $=o.scrollLeft-O,V=o.scrollTop-P;n={left:n.left-$,top:n.top-V,right:n.right-$,bottom:n.bottom-V}}if(s)break}}function Yt(i){let n=[],r=i.ownerDocument;for(let u=i;u&&(n.push({dom:u,top:u.scrollTop,left:u.scrollLeft}),i!=r);u=h(u));return n}function Vt(i,n){for(let r=0;r<i.length;r++){let{dom:u,top:m,left:t}=i[r];u.scrollTop!=m+n&&(u.scrollTop=m+n),u.scrollLeft!=t&&(u.scrollLeft=t)}}let ve=null;function We(i,n){let r,m,u=2e8,t=0,e=n.top,o=n.top;for(let s=i.firstChild,p=0;s;s=s.nextSibling,p++){let f;if(1==s.nodeType)f=s.getClientRects();else{if(3!=s.nodeType)continue;f=R(s).getClientRects()}for(let E=0;E<f.length;E++){let O=f[E];if(O.top<=e&&O.bottom>=o){e=Math.max(O.bottom,e),o=Math.min(O.top,o);let P=O.left>n.left?O.left-n.left:O.right<n.left?n.left-O.right:0;if(P<u){r=s,u=P,m=P&&3==r.nodeType?{left:O.right<n.left?O.right:O.left,top:n.top}:n,1==s.nodeType&&P&&(t=p+(n.left>=(O.left+O.right)/2?1:0));continue}}!r&&(n.left>=O.right&&n.top>=O.top||n.left>=O.left&&n.top>=O.bottom)&&(t=p+1)}}return r&&3==r.nodeType?function(i,n){let r=i.nodeValue.length,u=document.createRange();for(let m=0;m<r;m++){u.setEnd(i,m+1),u.setStart(i,m);let t=Fe(u,1);if(t.top!=t.bottom&&Qe(n,t))return{node:i,offset:m+(n.left>=(t.left+t.right)/2?1:0)}}return{node:i,offset:0}}(r,m):!r||u&&1==r.nodeType?{node:i,offset:t}:We(r,m)}function Qe(i,n){return i.left>=n.left-1&&i.left<=n.right+1&&i.top>=n.top-1&&i.top<=n.bottom+1}function Ye(i,n,r){let u=i.childNodes.length;if(u&&r.top<r.bottom)for(let m=Math.max(0,Math.min(u-1,Math.floor(u*(n.top-r.top)/(r.bottom-r.top))-2)),t=m;;){let e=i.childNodes[t];if(1==e.nodeType){let o=e.getClientRects();for(let s=0;s<o.length;s++){let p=o[s];if(Qe(n,p))return Ye(e,n,p)}}if((t=(t+1)%u)==m)break}return i}function Je(i,n){let u,r=i.dom.ownerDocument,m=0;if(r.caretPositionFromPoint)try{let s=r.caretPositionFromPoint(n.left,n.top);s&&({offsetNode:u,offset:m}=s)}catch(s){}if(!u&&r.caretRangeFromPoint){let s=r.caretRangeFromPoint(n.left,n.top);s&&({startContainer:u,startOffset:m}=s)}let e,t=(i.root.elementFromPoint?i.root:r).elementFromPoint(n.left,n.top);if(!t||!i.dom.contains(1!=t.nodeType?t.parentNode:t)){let s=i.dom.getBoundingClientRect();if(!Qe(n,s)||(t=Ye(i.dom,n,s),!t))return null}if(Gt)for(let s=t;u&&s;s=h(s))s.draggable&&(u=void 0);if(t=function(i,n){let r=i.parentNode;return r&&/^li$/i.test(r.nodeName)&&n.left<i.getBoundingClientRect().left?r:i}(t,n),u){if(Rt&&1==u.nodeType&&(m=Math.min(m,u.childNodes.length),m<u.childNodes.length)){let p,s=u.childNodes[m];"IMG"==s.nodeName&&(p=s.getBoundingClientRect()).right<=n.left&&p.bottom>n.top&&m++}u==i.dom&&m==u.childNodes.length-1&&1==u.lastChild.nodeType&&n.top>u.lastChild.getBoundingClientRect().bottom?e=i.state.doc.content.size:(0==m||1!=u.nodeType||"BR"!=u.childNodes[m-1].nodeName)&&(e=function(i,n,r,u){let m=-1;for(let t=n;t!=i.dom;){let e=i.docView.nearestDesc(t,!0);if(!e)return null;if(1==e.dom.nodeType&&(e.node.isBlock&&e.parent||!e.contentDOM)){let o=e.dom.getBoundingClientRect();if(e.node.isBlock&&e.parent&&(o.left>u.left||o.top>u.top?m=e.posBefore:(o.right<u.left||o.bottom<u.top)&&(m=e.posAfter)),!e.contentDOM&&m<0)return(e.node.isBlock?u.top<(o.top+o.bottom)/2:u.left<(o.left+o.right)/2)?e.posBefore:e.posAfter}t=e.dom.parentNode}return m>-1?m:i.docView.posFromDOM(n,r,-1)}(i,u,m,n))}null==e&&(e=function(i,n,r){let{node:u,offset:m}=We(n,r),t=-1;if(1==u.nodeType&&!u.firstChild){let e=u.getBoundingClientRect();t=e.left!=e.right&&r.left>(e.left+e.right)/2?1:-1}return i.docView.posFromDOM(u,m,t)}(i,t,n));let o=i.docView.nearestDesc(t,!0);return{pos:e,inside:o?o.posAtStart-o.border:-1}}function Fe(i,n){let r=i.getClientRects();return r.length?r[n<0?0:r.length-1]:i.getBoundingClientRect()}const Ze=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function He(i,n,r){let{node:u,offset:m,atom:t}=i.docView.domFromPos(n,r<0?-1:1),e=st||Rt;if(3==u.nodeType){if(!e||!Ze.test(u.nodeValue)&&(r<0?m:m!=u.nodeValue.length)){let s=m,p=m,f=r<0?1:-1;return r<0&&!m?(p++,f=-1):r>=0&&m==u.nodeValue.length?(s--,f=1):r<0?s--:p++,Ne(Fe(R(u,s,p),1),f<0)}{let s=Fe(R(u,m,m),r);if(Rt&&m&&/\s/.test(u.nodeValue[m-1])&&m<u.nodeValue.length){let p=Fe(R(u,m-1,m-1),-1);if(p.top==s.top){let f=Fe(R(u,m,m+1),-1);if(f.top!=s.top)return Ne(f,f.left<p.left)}}return s}}if(!i.state.doc.resolve(n-(t||0)).parent.inlineContent){if(null==t&&m&&(r<0||m==dt(u))){let s=u.childNodes[m-1];if(1==s.nodeType)return Ge(s.getBoundingClientRect(),!1)}if(null==t&&m<dt(u)){let s=u.childNodes[m];if(1==s.nodeType)return Ge(s.getBoundingClientRect(),!0)}return Ge(u.getBoundingClientRect(),r>=0)}if(null==t&&m&&(r<0||m==dt(u))){let s=u.childNodes[m-1],p=3==s.nodeType?R(s,dt(s)-(e?0:1)):1!=s.nodeType||"BR"==s.nodeName&&s.nextSibling?null:s;if(p)return Ne(Fe(p,1),!1)}if(null==t&&m<dt(u)){let s=u.childNodes[m];for(;s.pmViewDesc&&s.pmViewDesc.ignoreForCoords;)s=s.nextSibling;let p=s?3==s.nodeType?R(s,0,e?0:1):1==s.nodeType?s:null:null;if(p)return Ne(Fe(p,-1),!0)}return Ne(Fe(3==u.nodeType?R(u):u,-r),r>=0)}function Ne(i,n){if(0==i.width)return i;let r=n?i.left:i.right;return{top:i.top,bottom:i.bottom,left:r,right:r}}function Ge(i,n){if(0==i.height)return i;let r=n?i.top:i.bottom;return{top:r,bottom:r,left:i.left,right:i.right}}function $e(i,n,r){let u=i.state,m=i.root.activeElement;u!=n&&i.updateState(n),m!=i.dom&&i.focus();try{return r()}finally{u!=n&&i.updateState(u),m!=i.dom&&m&&m.focus()}}const ze=/[\u0590-\u08ac]/;let Ve=null,Ie=null,fe=!1;class Z{constructor(n,r,u,m){this.parent=n,this.children=r,this.dom=u,this.contentDOM=m,this.dirty=0,u.pmViewDesc=this}matchesWidget(n){return!1}matchesMark(n){return!1}matchesNode(n,r,u){return!1}matchesHack(n){return!1}parseRule(){return null}stopEvent(n){return!1}get size(){let n=0;for(let r=0;r<this.children.length;r++)n+=this.children[r].size;return n}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let n=0;n<this.children.length;n++)this.children[n].destroy()}posBeforeChild(n){for(let r=0,u=this.posAtStart;;r++){let m=this.children[r];if(m==n)return u;u+=m.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(n,r,u){if(this.contentDOM&&this.contentDOM.contains(1==n.nodeType?n:n.parentNode)){if(u<0){let t,e;if(n==this.contentDOM)t=n.childNodes[r-1];else{for(;n.parentNode!=this.contentDOM;)n=n.parentNode;t=n.previousSibling}for(;t&&(!(e=t.pmViewDesc)||e.parent!=this);)t=t.previousSibling;return t?this.posBeforeChild(e)+e.size:this.posAtStart}{let t,e;if(n==this.contentDOM)t=n.childNodes[r];else{for(;n.parentNode!=this.contentDOM;)n=n.parentNode;t=n.nextSibling}for(;t&&(!(e=t.pmViewDesc)||e.parent!=this);)t=t.nextSibling;return t?this.posBeforeChild(e):this.posAtEnd}}let m;if(n==this.dom&&this.contentDOM)m=r>b(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))m=2&n.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==r)for(let t=n;;t=t.parentNode){if(t==this.dom){m=!1;break}if(t.previousSibling)break}if(null==m&&r==n.childNodes.length)for(let t=n;;t=t.parentNode){if(t==this.dom){m=!0;break}if(t.nextSibling)break}}return(null==m?u>0:m)?this.posAtEnd:this.posAtStart}nearestDesc(n,r=!1){for(let u=!0,m=n;m;m=m.parentNode){let e,t=this.getDesc(m);if(t&&(!r||t.node)){if(!u||!(e=t.nodeDOM)||(1==e.nodeType?e.contains(1==n.nodeType?n:n.parentNode):e==n))return t;u=!1}}}getDesc(n){let r=n.pmViewDesc;for(let u=r;u;u=u.parent)if(u==this)return r}posFromDOM(n,r,u){for(let m=n;m;m=m.parentNode){let t=this.getDesc(m);if(t)return t.localPosFromDOM(n,r,u)}return-1}descAt(n){for(let r=0,u=0;r<this.children.length;r++){let m=this.children[r],t=u+m.size;if(u==n&&t!=u){for(;!m.border&&m.children.length;)m=m.children[0];return m}if(n<t)return m.descAt(n-u-m.border);u=t}}domFromPos(n,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:n+1};let t,u=0,m=0;for(let t=0;u<this.children.length;u++){let e=this.children[u],o=t+e.size;if(o>n||e instanceof C){m=n-t;break}t=o}if(m)return this.children[u].domFromPos(m-this.children[u].border,r);for(;u&&!(t=this.children[u-1]).size&&t instanceof F&&t.side>=0;u--);if(r<=0){let t,e=!0;for(;t=u?this.children[u-1]:null,t&&t.dom.parentNode!=this.contentDOM;u--,e=!1);return t&&r&&e&&!t.border&&!t.domAtom?t.domFromPos(t.size,r):{node:this.contentDOM,offset:t?b(t.dom)+1:0}}{let t,e=!0;for(;t=u<this.children.length?this.children[u]:null,t&&t.dom.parentNode!=this.contentDOM;u++,e=!1);return t&&e&&!t.border&&!t.domAtom?t.domFromPos(0,r):{node:this.contentDOM,offset:t?b(t.dom):this.contentDOM.childNodes.length}}}parseRange(n,r,u=0){if(0==this.children.length)return{node:this.contentDOM,from:n,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let m=-1,t=-1;for(let e=u,o=0;;o++){let s=this.children[o],p=e+s.size;if(-1==m&&n<=p){let f=e+s.border;if(n>=f&&r<=p-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(n,r,f);n=e;for(let E=o;E>0;E--){let O=this.children[E-1];if(O.size&&O.dom.parentNode==this.contentDOM&&!O.emptyChildAt(1)){m=b(O.dom)+1;break}n-=O.size}-1==m&&(m=0)}if(m>-1&&(p>r||o==this.children.length-1)){r=p;for(let f=o+1;f<this.children.length;f++){let E=this.children[f];if(E.size&&E.dom.parentNode==this.contentDOM&&!E.emptyChildAt(-1)){t=b(E.dom);break}r+=E.size}-1==t&&(t=this.contentDOM.childNodes.length);break}e=p}return{node:this.contentDOM,from:n,to:r,fromOffset:m,toOffset:t}}emptyChildAt(n){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[n<0?0:this.children.length-1];return 0==r.size||r.emptyChildAt(n)}domAfterPos(n){let{node:r,offset:u}=this.domFromPos(n,0);if(1!=r.nodeType||u==r.childNodes.length)throw new RangeError("No node after pos "+n);return r.childNodes[u]}setSelection(n,r,u,m=!1){let t=Math.min(n,r),e=Math.max(n,r);for(let O=0,P=0;O<this.children.length;O++){let $=this.children[O],V=P+$.size;if(t>P&&e<V)return $.setSelection(n-P-$.border,r-P-$.border,u,m);P=V}let o=this.domFromPos(n,n?-1:1),s=r==n?o:this.domFromPos(r,r?-1:1),p=u.getSelection(),f=!1;if((Rt||Gt)&&n==r){let{node:O,offset:P}=o;if(3==O.nodeType){if(f=!(!P||"\n"!=O.nodeValue[P-1]),f&&P==O.nodeValue.length)for(let V,$=O;$;$=$.parentNode){if(V=$.nextSibling){"BR"==V.nodeName&&(o=s={node:V.parentNode,offset:b(V)+1});break}let rt=$.pmViewDesc;if(rt&&rt.node&&rt.node.isBlock)break}}else{let $=O.childNodes[P-1];f=$&&("BR"==$.nodeName||"false"==$.contentEditable)}}if(Rt&&p.focusNode&&p.focusNode!=s.node&&1==p.focusNode.nodeType){let O=p.focusNode.childNodes[p.focusOffset];O&&"false"==O.contentEditable&&(m=!0)}if(!(m||f&&Gt)&&G(o.node,o.offset,p.anchorNode,p.anchorOffset)&&G(s.node,s.offset,p.focusNode,p.focusOffset))return;let E=!1;if((p.extend||n==r)&&!f){p.collapse(o.node,o.offset);try{n!=r&&p.extend(s.node,s.offset),E=!0}catch(O){}}if(!E){if(n>r){let P=o;o=s,s=P}let O=document.createRange();O.setEnd(s.node,s.offset),O.setStart(o.node,o.offset),p.removeAllRanges(),p.addRange(O)}}ignoreMutation(n){return!this.contentDOM&&"selection"!=n.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(n,r){for(let u=0,m=0;m<this.children.length;m++){let t=this.children[m],e=u+t.size;if(u==e?n<=e&&r>=u:n<e&&r>u){let o=u+t.border,s=e-t.border;if(n>=o&&r<=s)return this.dirty=n==u||r==e?2:1,void(n!=o||r!=s||!t.contentLost&&t.dom.parentNode==this.contentDOM?t.markDirty(n-o,r-o):t.dirty=3);t.dirty=t.dom!=t.contentDOM||t.dom.parentNode!=this.contentDOM||t.children.length?3:2}u=e}this.dirty=2}markParentsDirty(){let n=1;for(let r=this.parent;r;r=r.parent,n++){let u=1==n?2:1;r.dirty<u&&(r.dirty=u)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class F extends Z{constructor(n,r,u,m){let t,e=r.type.toDOM;if("function"==typeof e&&(e=e(u,()=>t?t.parent?t.parent.posBeforeChild(t):void 0:m)),!r.type.spec.raw){if(1!=e.nodeType){let o=document.createElement("span");o.appendChild(e),e=o}e.contentEditable="false",e.classList.add("ProseMirror-widget")}super(n,[],e,null),this.widget=r,this.widget=r,t=this}matchesWidget(n){return 0==this.dirty&&n.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(n){let r=this.widget.spec.stopEvent;return!!r&&r(n)}ignoreMutation(n){return"selection"!=n.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Et extends Z{constructor(n,r,u,m){super(n,[],r,null),this.textDOM=u,this.text=m}get size(){return this.text.length}localPosFromDOM(n,r){return n!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(n){return{node:this.textDOM,offset:n}}ignoreMutation(n){return"characterData"===n.type&&n.target.nodeValue==n.oldValue}}class Bt extends Z{constructor(n,r,u,m){super(n,[],u,m),this.mark=r}static create(n,r,u,m){let t=m.nodeViews[r.type.name],e=t&&t(r,m,u);return(!e||!e.dom)&&(e=l.PW.renderSpec(document,r.type.spec.toDOM(r,u))),new Bt(n,r,e.dom,e.contentDOM||e.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(n){return 3!=this.dirty&&this.mark.eq(n)}markDirty(n,r){if(super.markDirty(n,r),0!=this.dirty){let u=this.parent;for(;!u.node;)u=u.parent;u.dirty<this.dirty&&(u.dirty=this.dirty),this.dirty=0}}slice(n,r,u){let m=Bt.create(this.parent,this.mark,!0,u),t=this.children,e=this.size;r<e&&(t=Mt(t,r,e,u)),n>0&&(t=Mt(t,0,n,u));for(let o=0;o<t.length;o++)t[o].parent=m;return m.children=t,m}}class N extends Z{constructor(n,r,u,m,t,e,o,s,p){super(n,[],t,e),this.node=r,this.outerDeco=u,this.innerDeco=m,this.nodeDOM=o,e&&this.updateChildren(s,p)}static create(n,r,u,m,t,e){let s,o=t.nodeViews[r.type.name],p=o&&o(r,t,()=>s?s.parent?s.parent.posBeforeChild(s):void 0:e,u,m),f=p&&p.dom,E=p&&p.contentDOM;if(r.isText)if(f){if(3!=f.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else f=document.createTextNode(r.text);else f||({dom:f,contentDOM:E}=l.PW.renderSpec(document,r.type.spec.toDOM(r)));!E&&!r.isText&&"BR"!=f.nodeName&&(f.hasAttribute("contenteditable")||(f.contentEditable="false"),r.type.spec.draggable&&(f.draggable=!0));let O=f;return f=ot(f,u,r),p?s=new A(n,r,u,m,f,E||null,O,p,t,e+1):r.isText?new d(n,r,u,m,f,O,t):new N(n,r,u,m,f,E||null,O,t,e+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let n={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(n.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let r=this.children.length-1;r>=0;r--){let u=this.children[r];if(this.dom.contains(u.dom.parentNode)){n.contentElement=u.dom.parentNode;break}}n.contentElement||(n.getContent=()=>l.HY.empty)}else n.contentElement=this.contentDOM;else n.getContent=()=>this.node.content;return n}matchesNode(n,r,u){return 0==this.dirty&&n.eq(this.node)&&_t(r,this.outerDeco)&&u.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(n,r){let u=this.node.inlineContent,m=r,t=n.composing?this.localCompositionInfo(n,r):null,e=t&&t.pos>-1?t:null,o=t&&t.pos<0,s=new Jt(this,e&&e.node,n);(function(i,n,r,u){let m=n.locals(i),t=0;if(0==m.length){for(let p=0;p<i.childCount;p++){let f=i.child(p);u(f,m,n.forChild(t,f),p),t+=f.nodeSize}return}let e=0,o=[],s=null;for(let p=0;;){if(e<m.length&&m[e].to==t){let V,$=m[e++];for(;e<m.length&&m[e].to==t;)(V||(V=[$])).push(m[e++]);if(V){V.sort(ee);for(let rt=0;rt<V.length;rt++)r(V[rt],p,!!s)}else r($,p,!!s)}let f,E;if(s)E=-1,f=s,s=null;else{if(!(p<i.childCount))break;E=p,f=i.child(p++)}for(let $=0;$<o.length;$++)o[$].to<=t&&o.splice($--,1);for(;e<m.length&&m[e].from<=t&&m[e].to>t;)o.push(m[e++]);let O=t+f.nodeSize;if(f.isText){let $=O;e<m.length&&m[e].from<$&&($=m[e].from);for(let V=0;V<o.length;V++)o[V].to<$&&($=o[V].to);$<O&&(s=f.cut($-t),f=f.cut(0,$-t),O=$,E=-1)}u(f,f.isInline&&!f.isLeaf?o.filter($=>!$.inline):o.slice(),n.forChild(t,f),E),t=O}})(this.node,this.innerDeco,(p,f,E)=>{p.spec.marks?s.syncToMarks(p.spec.marks,u,n):p.type.side>=0&&!E&&s.syncToMarks(f==this.node.childCount?l.vc.none:this.node.child(f).marks,u,n),s.placeWidget(p,n,m)},(p,f,E,O)=>{let P;s.syncToMarks(p.marks,u,n),s.findNodeMatch(p,f,E,O)||o&&n.state.selection.from>m&&n.state.selection.to<m+p.nodeSize&&(P=s.findIndexWithChild(t.node))>-1&&s.updateNodeAt(p,f,E,P,n)||s.updateNextNode(p,f,E,n,O)||s.addNode(p,f,E,n,m),m+=p.nodeSize}),s.syncToMarks([],u,n),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||2==this.dirty)&&(e&&this.protectLocalComposition(n,e),I(this.contentDOM,this.children,n),ht&&function(i){if("UL"==i.nodeName||"OL"==i.nodeName){let n=i.style.cssText;i.style.cssText=n+"; list-style: square !important",window.getComputedStyle(i),i.style.cssText=n}}(this.dom))}localCompositionInfo(n,r){let{from:u,to:m}=n.state.selection;if(!(n.state.selection instanceof v.Bs)||u<r||m>r+this.node.content.size)return null;let t=n.domSelectionRange(),e=function(i,n){for(;;){if(3==i.nodeType)return i;if(1==i.nodeType&&n>0){if(i.childNodes.length>n&&3==i.childNodes[n].nodeType)return i.childNodes[n];n=dt(i=i.childNodes[n-1])}else{if(!(1==i.nodeType&&n<i.childNodes.length))return null;i=i.childNodes[n],n=0}}}(t.focusNode,t.focusOffset);if(!e||!this.dom.contains(e.parentNode))return null;if(this.node.inlineContent){let o=e.nodeValue,s=function(i,n,r,u){for(let m=0,t=0;m<i.childCount&&t<=u;){let e=i.child(m++),o=t;if(t+=e.nodeSize,!e.isText)continue;let s=e.text;for(;m<i.childCount;){let p=i.child(m++);if(t+=p.nodeSize,!p.isText)break;s+=p.text}if(t>=r){let p=o<u?s.lastIndexOf(n,u-o-1):-1;if(p>=0&&p+n.length+o>=r)return o+p;if(r==u&&s.length>=u+n.length-o&&s.slice(u-o,u-o+n.length)==n)return u}}return-1}(this.node.content,o,u-r,m-r);return s<0?null:{node:e,pos:s,text:o}}return{node:e,pos:-1,text:""}}protectLocalComposition(n,{node:r,pos:u,text:m}){if(this.getDesc(r))return;let t=r;for(;t.parentNode!=this.contentDOM;t=t.parentNode){for(;t.previousSibling;)t.parentNode.removeChild(t.previousSibling);for(;t.nextSibling;)t.parentNode.removeChild(t.nextSibling);t.pmViewDesc&&(t.pmViewDesc=void 0)}let e=new Et(this,t,r,m);n.input.compositionNodes.push(e),this.children=Mt(this.children,u,u+m.length,n,e)}update(n,r,u,m){return!(3==this.dirty||!n.sameMarkup(this.node)||(this.updateInner(n,r,u,m),0))}updateInner(n,r,u,m){this.updateOuterDeco(r),this.node=n,this.innerDeco=u,this.contentDOM&&this.updateChildren(m,this.posAtStart),this.dirty=0}updateOuterDeco(n){if(_t(n,this.outerDeco))return;let r=1!=this.nodeDOM.nodeType,u=this.dom;this.dom=z(this.dom,this.nodeDOM,Lt(this.outerDeco,this.node,r),Lt(n,this.node,r)),this.dom!=u&&(u.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=n}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function a(i,n,r,u,m){return ot(u,n,i),new N(void 0,i,n,r,u,u,u,m,0)}class d extends N{constructor(n,r,u,m,t,e,o){super(n,r,u,m,t,null,e,o,0)}parseRule(){let n=this.nodeDOM.parentNode;for(;n&&n!=this.dom&&!n.pmIsDeco;)n=n.parentNode;return{skip:n||!0}}update(n,r,u,m){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!n.sameMarkup(this.node)||(this.updateOuterDeco(r),(0!=this.dirty||n.text!=this.node.text)&&n.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=n.text,m.trackWrites==this.nodeDOM&&(m.trackWrites=null)),this.node=n,this.dirty=0,0))}inParent(){let n=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==n)return!0;return!1}domFromPos(n){return{node:this.nodeDOM,offset:n}}localPosFromDOM(n,r,u){return n==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(n,r,u)}ignoreMutation(n){return"characterData"!=n.type&&"selection"!=n.type}slice(n,r,u){let m=this.node.cut(n,r),t=document.createTextNode(m.text);return new d(this.parent,m,this.outerDeco,this.innerDeco,t,t,u)}markDirty(n,r){super.markDirty(n,r),this.dom!=this.nodeDOM&&(0==n||r==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}}class C extends Z{parseRule(){return{ignore:!0}}matchesHack(n){return 0==this.dirty&&this.dom.nodeName==n}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class A extends N{constructor(n,r,u,m,t,e,o,s,p,f){super(n,r,u,m,t,e,o,p,f),this.spec=s}update(n,r,u,m){if(3==this.dirty)return!1;if(this.spec.update){let t=this.spec.update(n,r,u);return t&&this.updateInner(n,r,u,m),t}return!(!this.contentDOM&&!n.isLeaf)&&super.update(n,r,u,m)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(n,r,u,m){this.spec.setSelection?this.spec.setSelection(n,r,u):super.setSelection(n,r,u,m)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(n){return!!this.spec.stopEvent&&this.spec.stopEvent(n)}ignoreMutation(n){return this.spec.ignoreMutation?this.spec.ignoreMutation(n):super.ignoreMutation(n)}}function I(i,n,r){let u=i.firstChild,m=!1;for(let t=0;t<n.length;t++){let e=n[t],o=e.dom;if(o.parentNode==i){for(;o!=u;)u=Tt(u),m=!0;u=u.nextSibling}else m=!0,i.insertBefore(o,u);if(e instanceof Bt){let s=u?u.previousSibling:i.lastChild;I(e.contentDOM,e.children,r),u=s?s.nextSibling:i.firstChild}}for(;u;)u=Tt(u),m=!0;m&&r.trackWrites==i&&(r.trackWrites=null)}const W=function(i){i&&(this.nodeName=i)};W.prototype=Object.create(null);const tt=[new W];function Lt(i,n,r){if(0==i.length)return tt;let u=r?tt[0]:new W,m=[u];for(let t=0;t<i.length;t++){let e=i[t].type.attrs;if(e){e.nodeName&&m.push(u=new W(e.nodeName));for(let o in e){let s=e[o];null!=s&&(r&&1==m.length&&m.push(u=new W(n.isInline?"span":"div")),"class"==o?u.class=(u.class?u.class+" ":"")+s:"style"==o?u.style=(u.style?u.style+";":"")+s:"nodeName"!=o&&(u[o]=s))}}}return m}function z(i,n,r,u){if(r==tt&&u==tt)return n;let m=n;for(let t=0;t<u.length;t++){let e=u[t],o=r[t];if(t){let s;o&&o.nodeName==e.nodeName&&m!=i&&(s=m.parentNode)&&s.nodeName.toLowerCase()==e.nodeName||(s=document.createElement(e.nodeName),s.pmIsDeco=!0,s.appendChild(m),o=tt[0]),m=s}B(m,o||tt[0],e)}return m}function B(i,n,r){for(let u in n)"class"!=u&&"style"!=u&&"nodeName"!=u&&!(u in r)&&i.removeAttribute(u);for(let u in r)"class"!=u&&"style"!=u&&"nodeName"!=u&&r[u]!=n[u]&&i.setAttribute(u,r[u]);if(n.class!=r.class){let u=n.class?n.class.split(" ").filter(Boolean):[],m=r.class?r.class.split(" ").filter(Boolean):[];for(let t=0;t<u.length;t++)-1==m.indexOf(u[t])&&i.classList.remove(u[t]);for(let t=0;t<m.length;t++)-1==u.indexOf(m[t])&&i.classList.add(m[t]);0==i.classList.length&&i.removeAttribute("class")}if(n.style!=r.style){if(n.style){let m,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;m=u.exec(n.style);)i.style.removeProperty(m[1])}r.style&&(i.style.cssText+=r.style)}}function ot(i,n,r){return z(i,i,tt,Lt(n,r,1!=i.nodeType))}function _t(i,n){if(i.length!=n.length)return!1;for(let r=0;r<i.length;r++)if(!i[r].type.eq(n[r].type))return!1;return!0}function Tt(i){let n=i.nextSibling;return i.parentNode.removeChild(i),n}class Jt{constructor(n,r,u){this.lock=r,this.view=u,this.index=0,this.stack=[],this.changed=!1,this.top=n,this.preMatch=function(i,n){let r=n,u=r.children.length,m=i.childCount,t=new Map,e=[];t:for(;m>0;){let o;for(;;)if(u){let p=r.children[u-1];if(!(p instanceof Bt)){o=p,u--;break}r=p,u=p.children.length}else{if(r==n)break t;u=r.parent.children.indexOf(r),r=r.parent}let s=o.node;if(s){if(s!=i.child(m-1))break;--m,t.set(o,m),e.push(o)}}return{index:m,matched:t,matches:e.reverse()}}(n.node.content,n)}destroyBetween(n,r){if(n!=r){for(let u=n;u<r;u++)this.top.children[u].destroy();this.top.children.splice(n,r-n),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(n,r,u){let m=0,t=this.stack.length>>1,e=Math.min(t,n.length);for(;m<e&&(m==t-1?this.top:this.stack[m+1<<1]).matchesMark(n[m])&&!1!==n[m].type.spec.spanning;)m++;for(;m<t;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),t--;for(;t<n.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let s=this.index;s<Math.min(this.index+3,this.top.children.length);s++){let p=this.top.children[s];if(p.matchesMark(n[t])&&!this.isLocked(p.dom)){o=s;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let s=Bt.create(this.top,n[t],r,u);this.top.children.splice(this.index,0,s),this.top=s,this.changed=!0}this.index=0,t++}}findNodeMatch(n,r,u,m){let e,t=-1;if(m>=this.preMatch.index&&(e=this.preMatch.matches[m-this.preMatch.index]).parent==this.top&&e.matchesNode(n,r,u))t=this.top.children.indexOf(e,this.index);else for(let o=this.index,s=Math.min(this.top.children.length,o+5);o<s;o++){let p=this.top.children[o];if(p.matchesNode(n,r,u)&&!this.preMatch.matched.has(p)){t=o;break}}return!(t<0||(this.destroyBetween(this.index,t),this.index++,0))}updateNodeAt(n,r,u,m,t){let e=this.top.children[m];return 3==e.dirty&&e.dom==e.contentDOM&&(e.dirty=2),!!e.update(n,r,u,t)&&(this.destroyBetween(this.index,m),this.index++,!0)}findIndexWithChild(n){for(;;){let r=n.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let u=n.pmViewDesc;if(u)for(let m=this.index;m<this.top.children.length;m++)if(this.top.children[m]==u)return m;return-1}n=r}}updateNextNode(n,r,u,m,t){for(let e=this.index;e<this.top.children.length;e++){let o=this.top.children[e];if(o instanceof N){let s=this.preMatch.matched.get(o);if(null!=s&&s!=t)return!1;let p=o.dom;if((!this.isLocked(p)||n.isText&&o.node&&o.node.isText&&o.nodeDOM.nodeValue==n.text&&3!=o.dirty&&_t(r,o.outerDeco))&&o.update(n,r,u,m))return this.destroyBetween(this.index,e),o.dom!=p&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(n,r,u,m,t){this.top.children.splice(this.index++,0,N.create(this.top,n,r,u,m,t)),this.changed=!0}placeWidget(n,r,u){let m=this.index<this.top.children.length?this.top.children[this.index]:null;if(!m||!m.matchesWidget(n)||n!=m.widget&&m.widget.type.toDOM.parentNode){let t=new F(this.top,n,r,u);this.top.children.splice(this.index++,0,t),this.changed=!0}else this.index++}addTextblockHacks(){let n=this.top.children[this.index-1],r=this.top;for(;n instanceof Bt;)r=n,n=r.children[r.children.length-1];(!n||!(n instanceof d)||/\n$/.test(n.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(n.node.text))&&((Gt||Ft)&&n&&"false"==n.dom.contentEditable&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(n,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(n))this.index++;else{let u=document.createElement(n);"IMG"==n&&(u.className="ProseMirror-separator",u.alt=""),"BR"==n&&(u.className="ProseMirror-trailingBreak");let m=new C(this.top,[],u,null);r!=this.top?r.children.push(m):r.children.splice(this.index++,0,m),this.changed=!0}}isLocked(n){return this.lock&&(n==this.lock||1==n.nodeType&&n.contains(this.lock.parentNode))}}function ee(i,n){return i.type.side-n.type.side}function Mt(i,n,r,u,m){let t=[];for(let e=0,o=0;e<i.length;e++){let s=i[e],p=o,f=o+=s.size;p>=r||f<=n?t.push(s):(p<n&&t.push(s.slice(0,n-p,u)),m&&(t.push(m),m=void 0),f>r&&t.push(s.slice(r-p,s.size,u)))}return t}function Pt(i,n=null){let r=i.domSelectionRange(),u=i.state.doc;if(!r.focusNode)return null;let m=i.docView.nearestDesc(r.focusNode),t=m&&0==m.size,e=i.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(e<0)return null;let s,p,o=u.resolve(e);if(lt(r)){for(s=o;m&&!m.node;)m=m.parent;let f=m.node;if(m&&f.isAtom&&v.qv.isSelectable(f)&&m.parent&&(!f.isInline||!function(i,n,r){for(let u=0==n,m=n==dt(i);u||m;){if(i==r)return!0;let t=b(i);if(!(i=i.parentNode))return!1;u=u&&0==t,m=m&&t==dt(i)}}(r.focusNode,r.focusOffset,m.dom))){let E=m.posBefore;p=new v.qv(e==E?o:u.resolve(E))}}else{let f=i.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(f<0)return null;s=u.resolve(f)}return p||(p=Te(i,s,o,"pointer"==n||i.state.selection.head<o.pos&&!t?1:-1)),p}function Ht(i){return i.editable?i.hasFocus():Re(i)&&document.activeElement&&document.activeElement.contains(i.dom)}function zt(i,n=!1){let r=i.state.selection;if(de(i,r),Ht(i)){if(!n&&i.input.mouseDown&&i.input.mouseDown.allowDefault&&Ft){let u=i.domSelectionRange(),m=i.domObserver.currentSelection;if(u.anchorNode&&m.anchorNode&&G(u.anchorNode,u.anchorOffset,m.anchorNode,m.anchorOffset))return i.input.mouseDown.delayedSelectionSync=!0,void i.domObserver.setCurSelection()}if(i.domObserver.disconnectSelection(),i.cursorWrapper)!function(i){let n=i.domSelection(),r=document.createRange(),u=i.cursorWrapper.dom,m="IMG"==u.nodeName;m?r.setEnd(u.parentNode,b(u)+1):r.setEnd(u,0),r.collapse(!1),n.removeAllRanges(),n.addRange(r),!m&&!i.state.selection.visible&&Ot&&St<=11&&(u.disabled=!0,u.disabled=!1)}(i);else{let t,e,{anchor:u,head:m}=r;Ut&&!(r instanceof v.Bs)&&(r.$from.parent.inlineContent||(t=ne(i,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(e=ne(i,r.to))),i.docView.setSelection(u,m,i.root,n),Ut&&(t&&ae(t),e&&ae(e)),r.visible?i.dom.classList.remove("ProseMirror-hideselection"):(i.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(i){let n=i.dom.ownerDocument;n.removeEventListener("selectionchange",i.input.hideSelectionGuard);let r=i.domSelectionRange(),u=r.anchorNode,m=r.anchorOffset;n.addEventListener("selectionchange",i.input.hideSelectionGuard=()=>{(r.anchorNode!=u||r.anchorOffset!=m)&&(n.removeEventListener("selectionchange",i.input.hideSelectionGuard),setTimeout(()=>{(!Ht(i)||i.state.selection.visible)&&i.dom.classList.remove("ProseMirror-hideselection")},20))})}(i))}i.domObserver.setCurSelection(),i.domObserver.connectSelection()}}const Ut=Gt||Ft&&$t<63;function ne(i,n){let{node:r,offset:u}=i.docView.domFromPos(n,0),m=u<r.childNodes.length?r.childNodes[u]:null,t=u?r.childNodes[u-1]:null;if(Gt&&m&&"false"==m.contentEditable)return se(m);if(!(m&&"false"!=m.contentEditable||t&&"false"!=t.contentEditable)){if(m)return se(m);if(t)return se(t)}}function se(i){return i.contentEditable="true",Gt&&i.draggable&&(i.draggable=!1,i.wasDraggable=!0),i}function ae(i){i.contentEditable="false",i.wasDraggable&&(i.draggable=!0,i.wasDraggable=null)}function de(i,n){if(n instanceof v.qv){let r=i.docView.descAt(n.from);r!=i.lastSelectedViewDesc&&(Ee(i),r&&r.selectNode(),i.lastSelectedViewDesc=r)}else Ee(i)}function Ee(i){i.lastSelectedViewDesc&&(i.lastSelectedViewDesc.parent&&i.lastSelectedViewDesc.deselectNode(),i.lastSelectedViewDesc=void 0)}function Te(i,n,r,u){return i.someProp("createSelectionBetween",m=>m(i,n,r))||v.Bs.between(n,r,u)}function Ae(i){return!(i.editable&&!i.hasFocus())&&Re(i)}function Re(i){let n=i.domSelectionRange();if(!n.anchorNode)return!1;try{return i.dom.contains(3==n.anchorNode.nodeType?n.anchorNode.parentNode:n.anchorNode)&&(i.editable||i.dom.contains(3==n.focusNode.nodeType?n.focusNode.parentNode:n.focusNode))}catch(r){return!1}}function Ue(i,n){let{$anchor:r,$head:u}=i.selection,m=n>0?r.max(u):r.min(u),t=m.parent.inlineContent?m.depth?i.doc.resolve(n>0?m.after():m.before()):null:m;return t&&v.Y1.findFrom(t,n)}function Se(i,n){return i.dispatch(i.state.tr.setSelection(n).scrollIntoView()),!0}function _e(i,n,r){let u=i.state.selection;if(!(u instanceof v.Bs)){if(u instanceof v.qv&&u.node.isInline)return Se(i,new v.Bs(n>0?u.$to:u.$from));{let m=Ue(i.state,n);return!!m&&Se(i,m)}}if(!u.empty||r.indexOf("s")>-1)return!1;if(i.endOfTextblock(n>0?"right":"left")){let m=Ue(i.state,n);return!!(m&&m instanceof v.qv)&&Se(i,m)}if(!(k&&r.indexOf("m")>-1)){let e,m=u.$head,t=m.textOffset?null:n<0?m.nodeBefore:m.nodeAfter;if(!t||t.isText)return!1;let o=n<0?m.pos-t.nodeSize:m.pos;return!!(t.isAtom||(e=i.docView.descAt(o))&&!e.contentDOM)&&(v.qv.isSelectable(t)?Se(i,new v.qv(n<0?i.state.doc.resolve(m.pos-t.nodeSize):m)):!!st&&Se(i,new v.Bs(i.state.doc.resolve(n<0?o:o+t.nodeSize))))}}function we(i){return 3==i.nodeType?i.nodeValue.length:i.childNodes.length}function Be(i){let n=i.pmViewDesc;return n&&0==n.size&&(i.nextSibling||"BR"!=i.nodeName)}function g(i){let n=i.domSelectionRange(),r=n.focusNode,u=n.focusOffset;if(!r)return;let m,t,e=!1;for(Rt&&1==r.nodeType&&u<we(r)&&Be(r.childNodes[u])&&(e=!0);;)if(u>0){if(1!=r.nodeType)break;{let o=r.childNodes[u-1];if(Be(o))m=r,t=--u;else{if(3!=o.nodeType)break;r=o,u=r.nodeValue.length}}}else{if(x(r))break;{let o=r.previousSibling;for(;o&&Be(o);)m=r.parentNode,t=b(o),o=o.previousSibling;if(o)r=o,u=we(r);else{if(r=r.parentNode,r==i.dom)break;u=0}}}e?M(i,r,u):m&&M(i,m,t)}function _(i){let n=i.domSelectionRange(),r=n.focusNode,u=n.focusOffset;if(!r)return;let t,e,m=we(r);for(;;)if(u<m){if(1!=r.nodeType)break;if(!Be(r.childNodes[u]))break;t=r,e=++u}else{if(x(r))break;{let o=r.nextSibling;for(;o&&Be(o);)t=o.parentNode,e=b(o)+1,o=o.nextSibling;if(o)r=o,u=0,m=we(r);else{if(r=r.parentNode,r==i.dom)break;u=m=0}}}t&&M(i,t,e)}function x(i){let n=i.pmViewDesc;return n&&n.node&&n.node.isBlock}function M(i,n,r){let u=i.domSelection();if(lt(u)){let t=document.createRange();t.setEnd(n,r),t.setStart(n,r),u.removeAllRanges(),u.addRange(t)}else u.extend&&u.extend(n,r);i.domObserver.setCurSelection();let{state:m}=i;setTimeout(()=>{i.state==m&&zt(i)},50)}function L(i,n,r){let u=i.state.selection;if(u instanceof v.Bs&&!u.empty||r.indexOf("s")>-1||k&&r.indexOf("m")>-1)return!1;let{$from:m,$to:t}=u;if(!m.parent.inlineContent||i.endOfTextblock(n<0?"up":"down")){let e=Ue(i.state,n);if(e&&e instanceof v.qv)return Se(i,e)}if(!m.parent.inlineContent){let e=n<0?m:t,o=u instanceof v.C1?v.Y1.near(e,n):v.Y1.findFrom(e,n);return!!o&&Se(i,o)}return!1}function H(i,n){if(!(i.state.selection instanceof v.Bs))return!0;let{$head:r,$anchor:u,empty:m}=i.state.selection;if(!r.sameParent(u))return!0;if(!m)return!1;if(i.endOfTextblock(n>0?"forward":"backward"))return!0;let t=!r.textOffset&&(n<0?r.nodeBefore:r.nodeAfter);if(t&&!t.isText){let e=i.state.tr;return n<0?e.delete(r.pos-t.nodeSize,r.pos):e.delete(r.pos,r.pos+t.nodeSize),i.dispatch(e),!0}return!1}function j(i,n,r){i.domObserver.stop(),n.contentEditable=r,i.domObserver.start()}function It(i,n){i.someProp("transformCopied",P=>{n=P(n,i)});let r=[],{content:u,openStart:m,openEnd:t}=n;for(;m>1&&t>1&&1==u.childCount&&1==u.firstChild.childCount;){m--,t--;let P=u.firstChild;r.push(P.type.name,P.attrs!=P.type.defaultAttrs?P.attrs:null),u=P.content}let e=i.someProp("clipboardSerializer")||l.PW.fromSchema(i.state.schema),o=sn(),s=o.createElement("div");s.appendChild(e.serializeFragment(u,{document:o}));let f,p=s.firstChild,E=0;for(;p&&1==p.nodeType&&(f=pn[p.nodeName.toLowerCase()]);){for(let P=f.length-1;P>=0;P--){let $=o.createElement(f[P]);for(;s.firstChild;)$.appendChild(s.firstChild);s.appendChild($),E++}p=s.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",`${m} ${t}${E?` -${E}`:""} ${JSON.stringify(r)}`),{dom:s,text:i.someProp("clipboardTextSerializer",P=>P(n,i))||n.content.textBetween(0,n.content.size,"\n\n")}}function wt(i,n,r,u,m){let e,o,t=m.parent.type.spec.code;if(!r&&!n)return null;let s=n&&(u||t||!r);if(s){if(i.someProp("transformPastedText",O=>{n=O(n,t||u,i)}),t)return n?new l.p2(l.HY.from(i.state.schema.text(n.replace(/\r\n?/g,"\n"))),0,0):l.p2.empty;let E=i.someProp("clipboardTextParser",O=>O(n,m,u,i));if(E)o=E;else{let O=m.marks(),{schema:P}=i.state,$=l.PW.fromSchema(P);e=document.createElement("div"),n.split(/(?:\r\n?|\n)+/).forEach(V=>{let rt=e.appendChild(document.createElement("p"));V&&rt.appendChild($.serializeNode(P.text(V,O)))})}}else i.someProp("transformPastedHTML",E=>{r=E(r,i)}),e=function(i){let n=/^(\s*<meta [^>]*>)*/.exec(i);n&&(i=i.slice(n[0].length));let m,r=sn().createElement("div"),u=/<([a-z][^>\s]+)/i.exec(i);if((m=u&&pn[u[1].toLowerCase()])&&(i=m.map(t=>"<"+t+">").join("")+i+m.map(t=>"</"+t+">").reverse().join("")),r.innerHTML=i,m)for(let t=0;t<m.length;t++)r=r.querySelector(m[t])||r;return r}(r),st&&function(i){let n=i.querySelectorAll(Ft?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<n.length;r++){let u=n[r];1==u.childNodes.length&&"\xa0"==u.textContent&&u.parentNode&&u.parentNode.replaceChild(i.ownerDocument.createTextNode(" "),u)}}(e);let p=e&&e.querySelector("[data-pm-slice]"),f=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(f&&f[3])for(let E=+f[3];E>0;E--){let O=e.firstChild;for(;O&&1!=O.nodeType;)O=O.nextSibling;if(!O)break;e=O}if(o||(o=(i.someProp("clipboardParser")||i.someProp("domParser")||l.aw.fromSchema(i.state.schema)).parseSlice(e,{preserveWhitespace:!(!s&&!f),context:m,ruleFromNode:O=>"BR"!=O.nodeName||O.nextSibling||!O.parentNode||Zt.test(O.parentNode.nodeName)?null:{ignore:!0}})),f)o=function(i,n){if(!i.size)return i;let u,r=i.content.firstChild.type.schema;try{u=JSON.parse(n)}catch(o){return i}let{content:m,openStart:t,openEnd:e}=i;for(let o=u.length-2;o>=0;o-=2){let s=r.nodes[u[o]];if(!s||s.hasRequiredAttrs())break;m=l.HY.from(s.create(u[o+1],m)),t++,e++}return new l.p2(m,t,e)}(On(o,+f[1],+f[2]),f[4]);else if(o=l.p2.maxOpen(function(i,n){if(i.childCount<2)return i;for(let r=n.depth;r>=0;r--){let t,m=n.node(r).contentMatchAt(n.index(r)),e=[];if(i.forEach(o=>{if(!e)return;let p,s=m.findWrapping(o.type);if(!s)return e=null;if(p=e.length&&t.length&&ce(s,t,o,e[e.length-1],0))e[e.length-1]=p;else{e.length&&(e[e.length-1]=he(e[e.length-1],t.length));let f=re(o,s);e.push(f),m=m.matchType(f.type),t=s}}),e)return l.HY.from(e)}return i}(o.content,m),!0),o.openStart||o.openEnd){let E=0,O=0;for(let P=o.content.firstChild;E<o.openStart&&!P.type.spec.isolating;E++,P=P.firstChild);for(let P=o.content.lastChild;O<o.openEnd&&!P.type.spec.isolating;O++,P=P.lastChild);o=On(o,E,O)}return i.someProp("transformPasted",E=>{o=E(o,i)}),o}const Zt=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function re(i,n,r=0){for(let u=n.length-1;u>=r;u--)i=n[u].create(null,l.HY.from(i));return i}function ce(i,n,r,u,m){if(m<i.length&&m<n.length&&i[m]==n[m]){let t=ce(i,n,r,u.lastChild,m+1);if(t)return u.copy(u.content.replaceChild(u.childCount-1,t));if(u.contentMatchAt(u.childCount).matchType(m==i.length-1?r.type:i[m+1]))return u.copy(u.content.append(l.HY.from(re(r,i,m+1))))}}function he(i,n){if(0==n)return i;let r=i.content.replaceChild(i.childCount-1,he(i.lastChild,n-1)),u=i.contentMatchAt(i.childCount).fillBefore(l.HY.empty,!0);return i.copy(r.append(u))}function rn(i,n,r,u,m,t){let e=n<0?i.firstChild:i.lastChild,o=e.content;return m<u-1&&(o=rn(o,n,r,u,m+1,t)),m>=r&&(o=n<0?e.contentMatchAt(0).fillBefore(o,i.childCount>1||t<=m).append(o):o.append(e.contentMatchAt(e.childCount).fillBefore(l.HY.empty,!0))),i.replaceChild(n<0?0:i.childCount-1,e.copy(o))}function On(i,n,r){return n<i.openStart&&(i=new l.p2(rn(i.content,-1,n,i.openStart,0,i.openEnd),n,i.openEnd)),r<i.openEnd&&(i=new l.p2(rn(i.content,1,r,i.openEnd,0,0),i.openStart,r)),i}const pn={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let vn=null;function sn(){return vn||(vn=document.implementation.createHTMLDocument("title"))}const nn={},on={},uo={touchstart:!0,touchmove:!0};class po{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function cn(i,n){i.input.lastSelectionOrigin=n,i.input.lastSelectionTime=Date.now()}function Kn(i){i.someProp("handleDOMEvents",n=>{for(let r in n)i.input.eventHandlers[r]||i.dom.addEventListener(r,i.input.eventHandlers[r]=u=>Jn(i,u))})}function Jn(i,n){return i.someProp("handleDOMEvents",r=>{let u=r[n.type];return!!u&&(u(i,n)||n.defaultPrevented)})}function fo(i,n){if(!n.bubbles)return!0;if(n.defaultPrevented)return!1;for(let r=n.target;r!=i.dom;r=r.parentNode)if(!r||11==r.nodeType||r.pmViewDesc&&r.pmViewDesc.stopEvent(n))return!1;return!0}function wn(i){return{left:i.clientX,top:i.clientY}}function $n(i,n,r,u,m){if(-1==u)return!1;let t=i.state.doc.resolve(u);for(let e=t.depth+1;e>0;e--)if(i.someProp(n,o=>e>t.depth?o(i,r,t.nodeAfter,t.before(e),m,!0):o(i,r,t.node(e),t.before(e),m,!1)))return!0;return!1}function gn(i,n,r){i.focused||i.focus();let u=i.state.tr.setSelection(n);"pointer"==r&&u.setMeta("pointer",!0),i.dispatch(u)}function vo(i,n,r,u){return $n(i,"handleDoubleClickOn",n,r,u)||i.someProp("handleDoubleClick",m=>m(i,n,u))}function To(i,n,r,u){return $n(i,"handleTripleClickOn",n,r,u)||i.someProp("handleTripleClick",m=>m(i,n,u))||function(i,n,r){if(0!=r.button)return!1;let u=i.state.doc;if(-1==n)return!!u.inlineContent&&(gn(i,v.Bs.create(u,0,u.content.size),"pointer"),!0);let m=u.resolve(n);for(let t=m.depth+1;t>0;t--){let e=t>m.depth?m.nodeAfter:m.node(t),o=m.before(t);if(e.inlineContent)gn(i,v.Bs.create(u,o+1,o+1+e.content.size),"pointer");else{if(!v.qv.isSelectable(e))continue;gn(i,v.qv.create(u,o),"pointer")}return!0}}(i,r,u)}function En(i){return An(i)}on.keydown=(i,n)=>{let r=n;if(i.input.shiftKey=16==r.keyCode||r.shiftKey,!Xn(i,r)&&(i.input.lastKeyCode=r.keyCode,i.input.lastKeyCodeTime=Date.now(),!et||!Ft||13!=r.keyCode))if(229!=r.keyCode&&i.domObserver.forceFlush(),!ht||13!=r.keyCode||r.ctrlKey||r.altKey||r.metaKey)i.someProp("handleKeyDown",u=>u(i,r))||function(i,n){let r=n.keyCode,u=function(i){let n="";return i.ctrlKey&&(n+="c"),i.metaKey&&(n+="m"),i.altKey&&(n+="a"),i.shiftKey&&(n+="s"),n}(n);return 8==r||k&&72==r&&"c"==u?H(i,-1)||g(i):46==r||k&&68==r&&"c"==u?H(i,1)||_(i):13==r||27==r||(37==r||k&&66==r&&"c"==u?_e(i,-1,u)||g(i):39==r||k&&70==r&&"c"==u?_e(i,1,u)||_(i):38==r||k&&80==r&&"c"==u?L(i,-1,u)||g(i):40==r||k&&78==r&&"c"==u?function(i){if(!Gt||i.state.selection.$head.parentOffset>0)return!1;let{focusNode:n,focusOffset:r}=i.domSelectionRange();if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){let u=n.firstChild;j(i,u,"true"),setTimeout(()=>j(i,u,"false"),20)}return!1}(i)||L(i,1,u)||_(i):u==(k?"m":"c")&&(66==r||73==r||89==r||90==r))}(i,r)?r.preventDefault():cn(i,"key");else{let u=Date.now();i.input.lastIOSEnter=u,i.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{i.input.lastIOSEnter==u&&(i.someProp("handleKeyDown",m=>m(i,Ct(13,"Enter"))),i.input.lastIOSEnter=0)},200)}},on.keyup=(i,n)=>{16==n.keyCode&&(i.input.shiftKey=!1)},on.keypress=(i,n)=>{let r=n;if(Xn(i,r)||!r.charCode||r.ctrlKey&&!r.altKey||k&&r.metaKey)return;if(i.someProp("handleKeyPress",m=>m(i,r)))return void r.preventDefault();let u=i.state.selection;if(!(u instanceof v.Bs&&u.$from.sameParent(u.$to))){let m=String.fromCharCode(r.charCode);!/[\r\n]/.test(m)&&!i.someProp("handleTextInput",t=>t(i,u.$from.pos,u.$to.pos,m))&&i.dispatch(i.state.tr.insertText(m).scrollIntoView()),r.preventDefault()}};const Rn=k?"metaKey":"ctrlKey";nn.mousedown=(i,n)=>{let r=n;i.input.shiftKey=r.shiftKey;let u=En(i),m=Date.now(),t="singleClick";m-i.input.lastClick.time<500&&function(i,n){let r=n.x-i.clientX,u=n.y-i.clientY;return r*r+u*u<100}(r,i.input.lastClick)&&!r[Rn]&&("singleClick"==i.input.lastClick.type?t="doubleClick":"doubleClick"==i.input.lastClick.type&&(t="tripleClick")),i.input.lastClick={time:m,x:r.clientX,y:r.clientY,type:t};let e=i.posAtCoords(wn(r));!e||("singleClick"==t?(i.input.mouseDown&&i.input.mouseDown.done(),i.input.mouseDown=new Bn(i,e,r,!!u)):("doubleClick"==t?vo:To)(i,e.pos,e.inside,r)?r.preventDefault():cn(i,"pointer"))};class Bn{constructor(n,r,u,m){let t,e;if(this.view=n,this.pos=r,this.event=u,this.flushed=m,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=n.state.doc,this.selectNode=!!u[Rn],this.allowDefault=u.shiftKey,r.inside>-1)t=n.state.doc.nodeAt(r.inside),e=r.inside;else{let f=n.state.doc.resolve(r.pos);t=f.parent,e=f.depth?f.before():0}const o=m?null:u.target,s=o?n.docView.nearestDesc(o,!0):null;this.target=s?s.dom:null;let{selection:p}=n.state;(0==u.button&&t.type.spec.draggable&&!1!==t.type.spec.selectable||p instanceof v.qv&&p.from<=e&&p.to>e)&&(this.mightDrag={node:t,pos:e,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!Rt||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),n.root.addEventListener("mouseup",this.up=this.up.bind(this)),n.root.addEventListener("mousemove",this.move=this.move.bind(this)),cn(n,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>zt(this.view)),this.view.input.mouseDown=null}up(n){if(this.done(),!this.view.dom.contains(n.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(wn(n))),this.updateAllowDefault(n),this.allowDefault||!r?cn(this.view,"pointer"):function(i,n,r,u,m){return $n(i,"handleClickOn",n,r,u)||i.someProp("handleClick",t=>t(i,n,u))||(m?function(i,n){if(-1==n)return!1;let u,m,r=i.state.selection;r instanceof v.qv&&(u=r.node);let t=i.state.doc.resolve(n);for(let e=t.depth+1;e>0;e--){let o=e>t.depth?t.nodeAfter:t.node(e);if(v.qv.isSelectable(o)){m=u&&r.$from.depth>0&&e>=r.$from.depth&&t.before(r.$from.depth+1)==r.$from.pos?t.before(r.$from.depth):t.before(e);break}}return null!=m&&(gn(i,v.qv.create(i.state.doc,m),"pointer"),!0)}(i,r):function(i,n){if(-1==n)return!1;let r=i.state.doc.resolve(n),u=r.nodeAfter;return!!(u&&u.isAtom&&v.qv.isSelectable(u))&&(gn(i,new v.qv(r),"pointer"),!0)}(i,r))}(this.view,r.pos,r.inside,n,this.selectNode)?n.preventDefault():0==n.button&&(this.flushed||Gt&&this.mightDrag&&!this.mightDrag.node.isAtom||Ft&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(gn(this.view,v.Y1.near(this.view.state.doc.resolve(r.pos)),"pointer"),n.preventDefault()):cn(this.view,"pointer")}move(n){this.updateAllowDefault(n),cn(this.view,"pointer"),0==n.buttons&&this.done()}updateAllowDefault(n){!this.allowDefault&&(Math.abs(this.event.x-n.clientX)>4||Math.abs(this.event.y-n.clientY)>4)&&(this.allowDefault=!0)}}function Xn(i,n){return!!i.composing||!!(Gt&&Math.abs(n.timeStamp-i.input.compositionEndedAt)<500)&&(i.input.compositionEndedAt=-2e8,!0)}nn.touchstart=i=>{i.input.lastTouch=Date.now(),En(i),cn(i,"pointer")},nn.touchmove=i=>{i.input.lastTouch=Date.now(),cn(i,"pointer")},nn.contextmenu=i=>En(i);const Eo=et?5e3:-1;function Ln(i,n){clearTimeout(i.input.composingTimeout),n>-1&&(i.input.composingTimeout=setTimeout(()=>An(i),n))}function qn(i){for(i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=function(){let i=document.createEvent("Event");return i.initEvent("event",!0,!0),i.timeStamp}());i.input.compositionNodes.length>0;)i.input.compositionNodes.pop().markParentsDirty()}function An(i,n=!1){if(!(et&&i.domObserver.flushingSoon>=0)){if(i.domObserver.forceFlush(),qn(i),n||i.docView&&i.docView.dirty){let r=Pt(i);return r&&!r.eq(i.state.selection)?i.dispatch(i.state.tr.setSelection(r)):i.updateState(i.state),!0}return!1}}on.compositionstart=on.compositionupdate=i=>{if(!i.composing){i.domObserver.flush();let{state:n}=i,r=n.selection.$from;if(n.selection.empty&&(n.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(u=>!1===u.type.spec.inclusive)))i.markCursor=i.state.storedMarks||r.marks(),An(i,!0),i.markCursor=null;else if(An(i),Rt&&n.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let u=i.domSelectionRange();for(let m=u.focusNode,t=u.focusOffset;m&&1==m.nodeType&&0!=t;){let e=t<0?m.lastChild:m.childNodes[t-1];if(!e)break;if(3==e.nodeType){i.domSelection().collapse(e,e.nodeValue.length);break}m=e,t=-1}}i.input.composing=!0}Ln(i,Eo)},on.compositionend=(i,n)=>{i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=n.timeStamp,Ln(i,20))};const _n=Ot&&St<15||ht&&it<604;function Dn(i,n,r,u,m){let t=wt(i,n,r,u,i.state.selection.$from);if(i.someProp("handlePaste",s=>s(i,m,t||l.p2.empty)))return!0;if(!t)return!1;let e=function(i){return 0==i.openStart&&0==i.openEnd&&1==i.content.childCount?i.content.firstChild:null}(t),o=e?i.state.tr.replaceSelectionWith(e,i.input.shiftKey):i.state.tr.replaceSelection(t);return i.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}nn.copy=on.cut=(i,n)=>{let r=n,u=i.state.selection,m="cut"==r.type;if(u.empty)return;let t=_n?null:r.clipboardData,e=u.content(),{dom:o,text:s}=It(i,e);t?(r.preventDefault(),t.clearData(),t.setData("text/html",o.innerHTML),t.setData("text/plain",s)):function(i,n){if(!i.dom.parentNode)return;let r=i.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(n),r.style.cssText="position: fixed; left: -10000px; top: 10px";let u=getSelection(),m=document.createRange();m.selectNodeContents(n),i.dom.blur(),u.removeAllRanges(),u.addRange(m),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),i.focus()},50)}(i,o),m&&i.dispatch(i.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},on.paste=(i,n)=>{let r=n;if(i.composing&&!et)return;let u=_n?null:r.clipboardData;u&&Dn(i,u.getData("text/plain"),u.getData("text/html"),i.input.shiftKey,r)?r.preventDefault():function(i,n){if(!i.dom.parentNode)return;let r=i.input.shiftKey||i.state.selection.$from.parent.type.spec.code,u=i.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(u.contentEditable="true"),u.style.cssText="position: fixed; left: -10000px; top: 10px",u.focus(),setTimeout(()=>{i.focus(),u.parentNode&&u.parentNode.removeChild(u),r?Dn(i,u.value,null,i.input.shiftKey,n):Dn(i,u.textContent,u.innerHTML,i.input.shiftKey,n)},50)}(i,r)};class Yn{constructor(n,r){this.slice=n,this.move=r}}const xn=k?"altKey":"ctrlKey";nn.dragstart=(i,n)=>{let r=n,u=i.input.mouseDown;if(u&&u.done(),!r.dataTransfer)return;let m=i.state.selection,t=m.empty?null:i.posAtCoords(wn(r));if(!(t&&t.pos>=m.from&&t.pos<=(m instanceof v.qv?m.to-1:m.to)))if(u&&u.mightDrag)i.dispatch(i.state.tr.setSelection(v.qv.create(i.state.doc,u.mightDrag.pos)));else if(r.target&&1==r.target.nodeType){let p=i.docView.nearestDesc(r.target,!0);p&&p.node.type.spec.draggable&&p!=i.docView&&i.dispatch(i.state.tr.setSelection(v.qv.create(i.state.doc,p.posBefore)))}let e=i.state.selection.content(),{dom:o,text:s}=It(i,e);r.dataTransfer.clearData(),r.dataTransfer.setData(_n?"Text":"text/html",o.innerHTML),r.dataTransfer.effectAllowed="copyMove",_n||r.dataTransfer.setData("text/plain",s),i.dragging=new Yn(e,!r[xn])},nn.dragend=i=>{let n=i.dragging;window.setTimeout(()=>{i.dragging==n&&(i.dragging=null)},50)},on.dragover=on.dragenter=(i,n)=>n.preventDefault(),on.drop=(i,n)=>{let r=n,u=i.dragging;if(i.dragging=null,!r.dataTransfer)return;let m=i.posAtCoords(wn(r));if(!m)return;let t=i.state.doc.resolve(m.pos),e=u&&u.slice;e?i.someProp("transformPasted",$=>{e=$(e,i)}):e=wt(i,r.dataTransfer.getData(_n?"Text":"text/plain"),_n?null:r.dataTransfer.getData("text/html"),!1,t);let o=!(!u||r[xn]);if(i.someProp("handleDrop",$=>$(i,r,e||l.p2.empty,o)))return void r.preventDefault();if(!e)return;r.preventDefault();let s=e?(0,T.nj)(i.state.doc,t.pos,e):t.pos;null==s&&(s=t.pos);let p=i.state.tr;o&&p.deleteSelection();let f=p.mapping.map(s),E=0==e.openStart&&0==e.openEnd&&1==e.content.childCount,O=p.doc;if(E?p.replaceRangeWith(f,f,e.content.firstChild):p.replaceRange(f,f,e),p.doc.eq(O))return;let P=p.doc.resolve(f);if(E&&v.qv.isSelectable(e.content.firstChild)&&P.nodeAfter&&P.nodeAfter.sameMarkup(e.content.firstChild))p.setSelection(new v.qv(P));else{let $=p.mapping.map(s);p.mapping.maps[p.mapping.maps.length-1].forEach((V,rt,yt,Wt)=>$=Wt),p.setSelection(Te(i,P,p.doc.resolve($)))}i.focus(),i.dispatch(p.setMeta("uiEvent","drop"))},nn.focus=i=>{i.input.lastFocus=Date.now(),i.focused||(i.domObserver.stop(),i.dom.classList.add("ProseMirror-focused"),i.domObserver.start(),i.focused=!0,setTimeout(()=>{i.docView&&i.hasFocus()&&!i.domObserver.currentSelection.eq(i.domSelectionRange())&&zt(i)},20))},nn.blur=(i,n)=>{let r=n;i.focused&&(i.domObserver.stop(),i.dom.classList.remove("ProseMirror-focused"),i.domObserver.start(),r.relatedTarget&&i.dom.contains(r.relatedTarget)&&i.domObserver.currentSelection.clear(),i.focused=!1)},nn.beforeinput=(i,n)=>{if(Ft&&et&&"deleteContentBackward"==n.inputType){i.domObserver.flushSoon();let{domChangeCount:u}=i.input;setTimeout(()=>{if(i.input.domChangeCount!=u||(i.dom.blur(),i.focus(),i.someProp("handleKeyDown",t=>t(i,Ct(8,"Backspace")))))return;let{$cursor:m}=i.state.selection;m&&m.pos>0&&i.dispatch(i.state.tr.delete(m.pos-1,m.pos).scrollIntoView())},50)}};for(let i in on)nn[i]=on[i];function Mn(i,n){if(i==n)return!0;for(let r in i)if(i[r]!==n[r])return!1;for(let r in n)if(!(r in i))return!1;return!0}class Pn{constructor(n,r){this.toDOM=n,this.spec=r||Cn,this.side=this.spec.side||0}map(n,r,u,m){let{pos:t,deleted:e}=n.mapResult(r.from+m,this.side<0?-1:1);return e?null:new ln(t-u,t-u,this)}valid(){return!0}eq(n){return this==n||n instanceof Pn&&(this.spec.key&&this.spec.key==n.spec.key||this.toDOM==n.toDOM&&Mn(this.spec,n.spec))}destroy(n){this.spec.destroy&&this.spec.destroy(n)}}class dn{constructor(n,r){this.attrs=n,this.spec=r||Cn}map(n,r,u,m){let t=n.map(r.from+m,this.spec.inclusiveStart?-1:1)-u,e=n.map(r.to+m,this.spec.inclusiveEnd?1:-1)-u;return t>=e?null:new ln(t,e,this)}valid(n,r){return r.from<r.to}eq(n){return this==n||n instanceof dn&&Mn(this.attrs,n.attrs)&&Mn(this.spec,n.spec)}static is(n){return n.type instanceof dn}destroy(){}}class jn{constructor(n,r){this.attrs=n,this.spec=r||Cn}map(n,r,u,m){let t=n.mapResult(r.from+m,1);if(t.deleted)return null;let e=n.mapResult(r.to+m,-1);return e.deleted||e.pos<=t.pos?null:new ln(t.pos-u,e.pos-u,this)}valid(n,r){let t,{index:u,offset:m}=n.content.findIndex(r.from);return m==r.from&&!(t=n.child(u)).isText&&m+t.nodeSize==r.to}eq(n){return this==n||n instanceof jn&&Mn(this.attrs,n.attrs)&&Mn(this.spec,n.spec)}destroy(){}}class ln{constructor(n,r,u){this.from=n,this.to=r,this.type=u}copy(n,r){return new ln(n,r,this.type)}eq(n,r=0){return this.type.eq(n.type)&&this.from+r==n.from&&this.to+r==n.to}map(n,r,u){return this.type.map(n,this,r,u)}static widget(n,r,u){return new ln(n,n,new Pn(r,u))}static inline(n,r,u,m){return new ln(n,r,new dn(u,m))}static node(n,r,u,m){return new ln(n,r,new jn(u,m))}get spec(){return this.type.spec}get inline(){return this.type instanceof dn}}const yn=[],Cn={};class Xe{constructor(n,r){this.local=n.length?n:yn,this.children=r.length?r:yn}static create(n,r){return r.length?Fn(r,n,0,Cn):en}find(n,r,u){let m=[];return this.findInner(null==n?0:n,null==r?1e9:r,m,0,u),m}findInner(n,r,u,m,t){for(let e=0;e<this.local.length;e++){let o=this.local[e];o.from<=r&&o.to>=n&&(!t||t(o.spec))&&u.push(o.copy(o.from+m,o.to+m))}for(let e=0;e<this.children.length;e+=3)if(this.children[e]<r&&this.children[e+1]>n){let o=this.children[e]+1;this.children[e+2].findInner(n-o,r-o,u,m+o,t)}}map(n,r,u){return this==en||0==n.maps.length?this:this.mapInner(n,r,0,0,u||Cn)}mapInner(n,r,u,m,t){let e;for(let o=0;o<this.local.length;o++){let s=this.local[o].map(n,u,m);s&&s.type.valid(r,s)?(e||(e=[])).push(s):t.onRemove&&t.onRemove(this.local[o].spec)}return this.children.length?function(i,n,r,u,m,t,e){let o=i.slice();for(let p=0,f=t;p<r.maps.length;p++){let E=0;r.maps[p].forEach((O,P,$,V)=>{let rt=V-$-(P-O);for(let yt=0;yt<o.length;yt+=3){let Wt=o[yt+1];if(Wt<0||O>Wt+f-E)continue;let Qt=o[yt]+f-E;P>=Qt?o[yt+1]=O<=Qt?-2:-1:$>=m&&rt&&(o[yt]+=rt,o[yt+1]+=rt)}E+=rt}),f=r.maps[p].map(f,-1)}let s=!1;for(let p=0;p<o.length;p+=3)if(o[p+1]<0){if(-2==o[p+1]){s=!0,o[p+1]=-1;continue}let f=r.map(i[p]+t),E=f-m;if(E<0||E>=u.content.size){s=!0;continue}let P=r.map(i[p+1]+t,-1)-m,{index:$,offset:V}=u.content.findIndex(E),rt=u.maybeChild($);if(rt&&V==E&&V+rt.nodeSize==P){let yt=o[p+2].mapInner(r,rt,f+1,i[p]+t+1,e);yt!=en?(o[p]=E,o[p+1]=P,o[p+2]=yt):(o[p+1]=-2,s=!0)}else s=!0}if(s){let p=function(i,n,r,u,m,t,e){function o(s,p){for(let f=0;f<s.local.length;f++){let E=s.local[f].map(u,m,p);E?r.push(E):e.onRemove&&e.onRemove(s.local[f].spec)}for(let f=0;f<s.children.length;f+=3)o(s.children[f+2],s.children[f]+p+1)}for(let s=0;s<i.length;s+=3)-1==i[s+1]&&o(i[s+2],n[s]+t+1);return r}(o,i,n,r,m,t,e),f=Fn(p,u,0,e);n=f.local;for(let E=0;E<o.length;E+=3)o[E+1]<0&&(o.splice(E,3),E-=3);for(let E=0,O=0;E<f.children.length;E+=3){let P=f.children[E];for(;O<o.length&&o[O]<P;)O+=3;o.splice(O,0,f.children[E],f.children[E+1],f.children[E+2])}}return new Xe(n.sort(fn),o)}(this.children,e||[],n,r,u,m,t):e?new Xe(e.sort(fn),yn):en}add(n,r){return r.length?this==en?Xe.create(n,r):this.addInner(n,r,0):this}addInner(n,r,u){let m,t=0;n.forEach((o,s)=>{let f,p=s+u;if(f=Vn(r,o,p)){for(m||(m=this.children.slice());t<m.length&&m[t]<s;)t+=3;m[t]==s?m[t+2]=m[t+2].addInner(o,f,p+1):m.splice(t,0,s,s+o.nodeSize,Fn(f,o,p+1,Cn)),t+=3}});let e=eo(t?no(r):r,-u);for(let o=0;o<e.length;o++)e[o].type.valid(n,e[o])||e.splice(o--,1);return new Xe(e.length?this.local.concat(e).sort(fn):this.local,m||this.children)}remove(n){return 0==n.length||this==en?this:this.removeInner(n,0)}removeInner(n,r){let u=this.children,m=this.local;for(let t=0;t<u.length;t+=3){let e,o=u[t]+r,s=u[t+1]+r;for(let E,f=0;f<n.length;f++)(E=n[f])&&E.from>o&&E.to<s&&(n[f]=null,(e||(e=[])).push(E));if(!e)continue;u==this.children&&(u=this.children.slice());let p=u[t+2].removeInner(e,o+1);p!=en?u[t+2]=p:(u.splice(t,3),t-=3)}if(m.length)for(let e,t=0;t<n.length;t++)if(e=n[t])for(let o=0;o<m.length;o++)m[o].eq(e,r)&&(m==this.local&&(m=this.local.slice()),m.splice(o--,1));return u==this.children&&m==this.local?this:m.length||u.length?new Xe(m,u):en}forChild(n,r){if(this==en)return this;if(r.isLeaf)return Xe.empty;let u,m;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=n){this.children[o]==n&&(u=this.children[o+2]);break}let t=n+1,e=t+r.content.size;for(let o=0;o<this.local.length;o++){let s=this.local[o];if(s.from<e&&s.to>t&&s.type instanceof dn){let p=Math.max(t,s.from)-t,f=Math.min(e,s.to)-t;p<f&&(m||(m=[])).push(s.copy(p,f))}}if(m){let o=new Xe(m.sort(fn),yn);return u?new hn([o,u]):o}return u||en}eq(n){if(this==n)return!0;if(!(n instanceof Xe)||this.local.length!=n.local.length||this.children.length!=n.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(n.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=n.children[r]||this.children[r+1]!=n.children[r+1]||!this.children[r+2].eq(n.children[r+2]))return!1;return!0}locals(n){return Hn(this.localsInner(n))}localsInner(n){if(this==en)return yn;if(n.inlineContent||!this.local.some(dn.is))return this.local;let r=[];for(let u=0;u<this.local.length;u++)this.local[u].type instanceof dn||r.push(this.local[u]);return r}}Xe.empty=new Xe([],[]),Xe.removeOverlap=Hn;const en=Xe.empty;class hn{constructor(n){this.members=n}map(n,r){const u=this.members.map(m=>m.map(n,r,Cn));return hn.from(u)}forChild(n,r){if(r.isLeaf)return Xe.empty;let u=[];for(let m=0;m<this.members.length;m++){let t=this.members[m].forChild(n,r);t!=en&&(t instanceof hn?u=u.concat(t.members):u.push(t))}return hn.from(u)}eq(n){if(!(n instanceof hn)||n.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(n.members[r]))return!1;return!0}locals(n){let r,u=!0;for(let m=0;m<this.members.length;m++){let t=this.members[m].localsInner(n);if(t.length)if(r){u&&(r=r.slice(),u=!1);for(let e=0;e<t.length;e++)r.push(t[e])}else r=t}return r?Hn(u?r:r.sort(fn)):yn}static from(n){switch(n.length){case 0:return en;case 1:return n[0];default:return new hn(n.every(r=>r instanceof Xe)?n:n.reduce((r,u)=>r.concat(u instanceof Xe?u:u.members),[]))}}}function eo(i,n){if(!n||!i.length)return i;let r=[];for(let u=0;u<i.length;u++){let m=i[u];r.push(new ln(m.from+n,m.to+n,m.type))}return r}function Vn(i,n,r){if(n.isLeaf)return null;let u=r+n.nodeSize,m=null;for(let e,t=0;t<i.length;t++)(e=i[t])&&e.from>r&&e.to<u&&((m||(m=[])).push(e),i[t]=null);return m}function no(i){let n=[];for(let r=0;r<i.length;r++)null!=i[r]&&n.push(i[r]);return n}function Fn(i,n,r,u){let m=[],t=!1;n.forEach((o,s)=>{let p=Vn(i,o,s+r);if(p){t=!0;let f=Fn(p,o,r+s+1,u);f!=en&&m.push(s,s+o.nodeSize,f)}});let e=eo(t?no(i):i,-r).sort(fn);for(let o=0;o<e.length;o++)e[o].type.valid(n,e[o])||(u.onRemove&&u.onRemove(e[o].spec),e.splice(o--,1));return e.length||m.length?new Xe(e,m):en}function fn(i,n){return i.from-n.from||i.to-n.to}function Hn(i){let n=i;for(let r=0;r<n.length-1;r++){let u=n[r];if(u.from!=u.to)for(let m=r+1;m<n.length;m++){let t=n[m];if(t.from!=u.from){t.from<u.to&&(n==i&&(n=i.slice()),n[r]=u.copy(u.from,t.from),bo(n,m,u.copy(t.from,u.to)));break}t.to!=u.to&&(n==i&&(n=i.slice()),n[m]=t.copy(t.from,u.to),bo(n,m+1,t.copy(u.to,t.to)))}}return n}function bo(i,n,r){for(;n<i.length&&fn(r,i[n])>0;)n++;i.splice(n,0,r)}function oo(i){let n=[];return i.someProp("decorations",r=>{let u=r(i.state);u&&u!=en&&n.push(u)}),i.cursorWrapper&&n.push(Xe.create(i.state.doc,[i.cursorWrapper.deco])),hn.from(n)}const No={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Fo=Ot&&St<=11;class Ho{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(n){this.anchorNode=n.anchorNode,this.anchorOffset=n.anchorOffset,this.focusNode=n.focusNode,this.focusOffset=n.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(n){return n.anchorNode==this.anchorNode&&n.anchorOffset==this.anchorOffset&&n.focusNode==this.focusNode&&n.focusOffset==this.focusOffset}}class zo{constructor(n,r){this.view=n,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Ho,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(u=>{for(let m=0;m<u.length;m++)this.queue.push(u[m]);Ot&&St<=11&&u.some(m=>"childList"==m.type&&m.removedNodes.length||"characterData"==m.type&&m.oldValue.length>m.target.nodeValue.length)?this.flushSoon():this.flush()}),Fo&&(this.onCharData=u=>{this.queue.push({target:u.target,type:"characterData",oldValue:u.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,No)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let n=this.observer.takeRecords();if(n.length){for(let r=0;r<n.length;r++)this.queue.push(n[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Ae(this.view)){if(this.suppressingSelectionUpdates)return zt(this.view);if(Ot&&St<=11&&!this.view.state.selection.empty){let n=this.view.domSelectionRange();if(n.focusNode&&G(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(n){if(!n.focusNode)return!0;let u,r=new Set;for(let t=n.focusNode;t;t=h(t))r.add(t);for(let t=n.anchorNode;t;t=h(t))if(r.has(t)){u=t;break}let m=u&&this.view.docView.nearestDesc(u);return m&&m.ignoreMutation({type:"selection",target:3==u.nodeType?u.parentNode:u})?(this.setCurSelection(),!0):void 0}flush(){let{view:n}=this;if(!n.docView||this.flushingSoon>-1)return;let r=this.observer?this.observer.takeRecords():[];this.queue.length&&(r=this.queue.concat(r),this.queue.length=0);let u=n.domSelectionRange(),m=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(u)&&Ae(n)&&!this.ignoreSelectionChange(u),t=-1,e=-1,o=!1,s=[];if(n.editable)for(let f=0;f<r.length;f++){let E=this.registerMutation(r[f],s);E&&(t=t<0?E.from:Math.min(E.from,t),e=e<0?E.to:Math.max(E.to,e),E.typeOver&&(o=!0))}if(Rt&&s.length>1){let f=s.filter(E=>"BR"==E.nodeName);if(2==f.length){let E=f[0],O=f[1];E.parentNode&&E.parentNode.parentNode==O.parentNode?O.remove():E.remove()}}let p=null;t<0&&m&&n.input.lastFocus>Date.now()-200&&Math.max(n.input.lastTouch,n.input.lastClick.time)<Date.now()-300&&lt(u)&&(p=Pt(n))&&p.eq(v.Y1.near(n.state.doc.resolve(0),1))?(n.input.lastFocus=0,zt(n),this.currentSelection.set(u),n.scrollToSelection()):(t>-1||m)&&(t>-1&&(n.docView.markDirty(t,e),function(i){if(!Oo.has(i)&&(Oo.set(i,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(i.dom).whiteSpace))){if(i.requiresGeckoHackNode=Rt,Ao)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Ao=!0}}(n)),this.handleDOMChange(t,e,o,s),n.docView&&n.docView.dirty?n.updateState(n.state):this.currentSelection.eq(u)||zt(n),this.currentSelection.set(u))}registerMutation(n,r){if(r.indexOf(n.target)>-1)return null;let u=this.view.docView.nearestDesc(n.target);if("attributes"==n.type&&(u==this.view.docView||"contenteditable"==n.attributeName||"style"==n.attributeName&&!n.oldValue&&!n.target.getAttribute("style"))||!u||u.ignoreMutation(n))return null;if("childList"==n.type){for(let f=0;f<n.addedNodes.length;f++)r.push(n.addedNodes[f]);if(u.contentDOM&&u.contentDOM!=u.dom&&!u.contentDOM.contains(n.target))return{from:u.posBefore,to:u.posAfter};let m=n.previousSibling,t=n.nextSibling;if(Ot&&St<=11&&n.addedNodes.length)for(let f=0;f<n.addedNodes.length;f++){let{previousSibling:E,nextSibling:O}=n.addedNodes[f];(!E||Array.prototype.indexOf.call(n.addedNodes,E)<0)&&(m=E),(!O||Array.prototype.indexOf.call(n.addedNodes,O)<0)&&(t=O)}let e=m&&m.parentNode==n.target?b(m)+1:0,o=u.localPosFromDOM(n.target,e,-1),s=t&&t.parentNode==n.target?b(t):n.target.childNodes.length;return{from:o,to:u.localPosFromDOM(n.target,s,1)}}return"attributes"==n.type?{from:u.posAtStart-u.border,to:u.posAtEnd+u.border}:{from:u.posAtStart,to:u.posAtEnd,typeOver:n.target.nodeValue==n.oldValue}}}let Oo=new WeakMap,Ao=!1;function Po(i){let n=i.pmViewDesc;if(n)return n.parseRule();if("BR"==i.nodeName&&i.parentNode){if(Gt&&/^(ul|ol)$/i.test(i.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}if(i.parentNode.lastChild==i||Gt&&/^(tr|table)$/i.test(i.parentNode.nodeName))return{ignore:!0}}else if("IMG"==i.nodeName&&i.getAttribute("mark-placeholder"))return{ignore:!0};return null}function io(i,n,r){return Math.max(r.anchor,r.head)>n.content.size?null:Te(i,n.resolve(r.anchor),n.resolve(r.head))}function zn(i,n,r){let u=i.depth,m=n?i.end():i.pos;for(;u>0&&(n||i.indexAfter(u)==i.node(u).childCount);)u--,m++,n=!1;if(r){let t=i.node(u).maybeChild(i.indexAfter(u));for(;t&&!t.isLeaf;)t=t.firstChild,m++}return m}class Bo{constructor(n,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new po,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(ao),this.dispatch=this.dispatch.bind(this),this.dom=n&&n.mount||document.createElement("div"),n&&(n.appendChild?n.appendChild(this.dom):"function"==typeof n?n(this.dom):n.mount&&(this.mounted=!0)),this.editable=lo(this),so(this),this.nodeViews=In(this),this.docView=a(this.state.doc,ro(this),oo(this),this.dom,this),this.domObserver=new zo(this,(u,m,t,e)=>function(i,n,r,u,m){if(n<0){let me=i.input.lastSelectionTime>Date.now()-50?i.input.lastSelectionOrigin:null,un=Pt(i,me);if(un&&!i.state.selection.eq(un)){if(Ft&&et&&13===i.input.lastKeyCode&&Date.now()-100<i.input.lastKeyCodeTime&&i.someProp("handleKeyDown",Un=>Un(i,Ct(13,"Enter"))))return;let bn=i.state.tr.setSelection(un);"pointer"==me?bn.setMeta("pointer",!0):"key"==me&&bn.scrollIntoView(),i.dispatch(bn)}return}let t=i.state.doc.resolve(n),e=t.sharedDepth(r);n=t.before(e+1),r=i.state.doc.resolve(r).after(e+1);let E,O,o=i.state.selection,s=function(i,n,r){let p,{node:u,fromOffset:m,toOffset:t,from:e,to:o}=i.docView.parseRange(n,r),s=i.domSelectionRange(),f=s.anchorNode;if(f&&i.dom.contains(1==f.nodeType?f:f.parentNode)&&(p=[{node:f,offset:s.anchorOffset}],lt(s)||p.push({node:s.focusNode,offset:s.focusOffset})),Ft&&8===i.input.lastKeyCode)for(let rt=t;rt>m;rt--){let yt=u.childNodes[rt-1],Wt=yt.pmViewDesc;if("BR"==yt.nodeName&&!Wt){t=rt;break}if(!Wt||Wt.size)break}let E=i.state.doc,O=i.someProp("domParser")||l.aw.fromSchema(i.state.schema),P=E.resolve(e),$=null,V=O.parse(u,{topNode:P.parent,topMatch:P.parent.contentMatchAt(P.index()),topOpen:!0,from:m,to:t,preserveWhitespace:"pre"!=P.parent.type.whitespace||"full",findPositions:p,ruleFromNode:Po,context:P});if(p&&null!=p[0].pos){let rt=p[0].pos,yt=p[1]&&p[1].pos;null==yt&&(yt=rt),$={anchor:rt+e,head:yt+e}}return{doc:V,sel:$,from:e,to:o}}(i,n,r),p=i.state.doc,f=p.slice(s.from,s.to);8===i.input.lastKeyCode&&Date.now()-100<i.input.lastKeyCodeTime?(E=i.state.selection.to,O="end"):(E=i.state.selection.from,O="start"),i.input.lastKeyCode=null;let P=function(i,n,r,u,m){let t=i.findDiffStart(n,r);if(null==t)return null;let{a:e,b:o}=i.findDiffEnd(n,r+i.size,r+n.size);return"end"==m&&(u-=e+Math.max(0,t-Math.min(e,o))-t),e<t&&i.size<n.size?(t-=u<=t&&u>=e?t-u:0,o=t+(o-e),e=t):o<t&&(t-=u<=t&&u>=o?t-u:0,e=t+(e-o),o=t),{start:t,endA:e,endB:o}}(f.content,s.doc.content,s.from,E,O);if((ht&&i.input.lastIOSEnter>Date.now()-225||et)&&m.some(me=>"DIV"==me.nodeName||"P"==me.nodeName||"LI"==me.nodeName)&&(!P||P.endA>=P.endB)&&i.someProp("handleKeyDown",me=>me(i,Ct(13,"Enter"))))return void(i.input.lastIOSEnter=0);if(!P){if(!(u&&o instanceof v.Bs&&!o.empty&&o.$head.sameParent(o.$anchor))||i.composing||s.sel&&s.sel.anchor!=s.sel.head){if(s.sel){let me=io(i,i.state.doc,s.sel);me&&!me.eq(i.state.selection)&&i.dispatch(i.state.tr.setSelection(me))}return}P={start:o.from,endA:o.to,endB:o.to}}if(Ft&&i.cursorWrapper&&s.sel&&s.sel.anchor==i.cursorWrapper.deco.from&&s.sel.head==s.sel.anchor){let me=P.endB-P.start;s.sel={anchor:s.sel.anchor+me,head:s.sel.anchor+me}}i.input.domChangeCount++,i.state.selection.from<i.state.selection.to&&P.start==P.endB&&i.state.selection instanceof v.Bs&&(P.start>i.state.selection.from&&P.start<=i.state.selection.from+2&&i.state.selection.from>=s.from?P.start=i.state.selection.from:P.endA<i.state.selection.to&&P.endA>=i.state.selection.to-2&&i.state.selection.to<=s.to&&(P.endB+=i.state.selection.to-P.endA,P.endA=i.state.selection.to)),Ot&&St<=11&&P.endB==P.start+1&&P.endA==P.start&&P.start>s.from&&" \xa0"==s.doc.textBetween(P.start-s.from-1,P.start-s.from+1)&&(P.start--,P.endA--,P.endB--);let Wt,$=s.doc.resolveNoCache(P.start-s.from),V=s.doc.resolveNoCache(P.endB-s.from),rt=p.resolve(P.start),yt=$.sameParent(V)&&$.parent.inlineContent&&rt.end()>=P.endA;if((ht&&i.input.lastIOSEnter>Date.now()-225&&(!yt||m.some(me=>"DIV"==me.nodeName||"P"==me.nodeName))||!yt&&$.pos<s.doc.content.size&&(Wt=v.Y1.findFrom(s.doc.resolve($.pos+1),1,!0))&&Wt.head==V.pos)&&i.someProp("handleKeyDown",me=>me(i,Ct(13,"Enter"))))return void(i.input.lastIOSEnter=0);if(i.state.selection.anchor>P.start&&function(i,n,r,u,m){if(!u.parent.isTextblock||r-n<=m.pos-u.pos||zn(u,!0,!1)<m.pos)return!1;let t=i.resolve(n);if(t.parentOffset<t.parent.content.size||!t.parent.isTextblock)return!1;let e=i.resolve(zn(t,!0,!0));return!(!e.parent.isTextblock||e.pos>r||zn(e,!0,!1)<r)&&u.parent.content.cut(u.parentOffset).eq(e.parent.content)}(p,P.start,P.endA,$,V)&&i.someProp("handleKeyDown",me=>me(i,Ct(8,"Backspace"))))return void(et&&Ft&&i.domObserver.suppressSelectionUpdates());Ft&&et&&P.endB==P.start&&(i.input.lastAndroidDelete=Date.now()),et&&!yt&&$.start()!=V.start()&&0==V.parentOffset&&$.depth==V.depth&&s.sel&&s.sel.anchor==s.sel.head&&s.sel.head==P.endA&&(P.endB-=2,V=s.doc.resolveNoCache(P.endB-s.from),setTimeout(()=>{i.someProp("handleKeyDown",function(me){return me(i,Ct(13,"Enter"))})},20));let oe,pe,qe,Qt=P.start,Xt=P.endA;if(yt)if($.pos==V.pos)Ot&&St<=11&&0==$.parentOffset&&(i.domObserver.suppressSelectionUpdates(),setTimeout(()=>zt(i),20)),oe=i.state.tr.delete(Qt,Xt),pe=p.resolve(P.start).marksAcross(p.resolve(P.endA));else if(P.endA==P.endB&&(qe=function(i,n){let e,o,s,r=i.firstChild.marks,u=n.firstChild.marks,m=r,t=u;for(let f=0;f<u.length;f++)m=u[f].removeFromSet(m);for(let f=0;f<r.length;f++)t=r[f].removeFromSet(t);if(1==m.length&&0==t.length)o=m[0],e="add",s=f=>f.mark(o.addToSet(f.marks));else{if(0!=m.length||1!=t.length)return null;o=t[0],e="remove",s=f=>f.mark(o.removeFromSet(f.marks))}let p=[];for(let f=0;f<n.childCount;f++)p.push(s(n.child(f)));if(l.HY.from(p).eq(i))return{mark:o,type:e}}($.parent.content.cut($.parentOffset,V.parentOffset),rt.parent.content.cut(rt.parentOffset,P.endA-rt.start()))))oe=i.state.tr,"add"==qe.type?oe.addMark(Qt,Xt,qe.mark):oe.removeMark(Qt,Xt,qe.mark);else if($.parent.child($.index()).isText&&$.index()==V.index()-(V.textOffset?0:1)){let me=$.parent.textBetween($.parentOffset,V.parentOffset);if(i.someProp("handleTextInput",un=>un(i,Qt,Xt,me)))return;oe=i.state.tr.insertText(me,Qt,Xt)}if(oe||(oe=i.state.tr.replace(Qt,Xt,s.doc.slice(P.start-s.from,P.endB-s.from))),s.sel){let me=io(i,oe.doc,s.sel);me&&!(Ft&&et&&i.composing&&me.empty&&(P.start!=P.endB||i.input.lastAndroidDelete<Date.now()-100)&&(me.head==Qt||me.head==oe.mapping.map(Xt)-1)||Ot&&me.empty&&me.head==Qt)&&oe.setSelection(me)}pe&&oe.ensureMarks(pe),i.dispatch(oe.scrollIntoView())}(this,u,m,t,e)),this.domObserver.start(),function(i){for(let n in nn){let r=nn[n];i.dom.addEventListener(n,i.input.eventHandlers[n]=u=>{fo(i,u)&&!Jn(i,u)&&(i.editable||!(u.type in on))&&r(i,u)},uo[n]?{passive:!0}:void 0)}Gt&&i.dom.addEventListener("input",()=>null),Kn(i)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let n=this._props;this._props={};for(let r in n)this._props[r]=n[r];this._props.state=this.state}return this._props}update(n){n.handleDOMEvents!=this._props.handleDOMEvents&&Kn(this);let r=this._props;this._props=n,n.plugins&&(n.plugins.forEach(ao),this.directPlugins=n.plugins),this.updateStateInner(n.state,r)}setProps(n){let r={};for(let u in this._props)r[u]=this._props[u];r.state=this.state;for(let u in n)r[u]=n[u];this.update(r)}updateState(n){this.updateStateInner(n,this._props)}updateStateInner(n,r){let u=this.state,m=!1,t=!1;n.storedMarks&&this.composing&&(qn(this),t=!0),this.state=n;let e=u.plugins!=n.plugins||this._props.plugins!=r.plugins;if(e||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let O=In(this);(function(i,n){let r=0,u=0;for(let m in i){if(i[m]!=n[m])return!0;r++}for(let m in n)u++;return r!=u})(O,this.nodeViews)&&(this.nodeViews=O,m=!0)}(e||r.handleDOMEvents!=this._props.handleDOMEvents)&&Kn(this),this.editable=lo(this),so(this);let o=oo(this),s=ro(this),p=u.plugins==n.plugins||u.doc.eq(n.doc)?n.scrollToSelection>u.scrollToSelection?"to selection":"preserve":"reset",f=m||!this.docView.matchesNode(n.doc,s,o);(f||!n.selection.eq(u.selection))&&(t=!0);let E="preserve"==p&&t&&null==this.dom.style.overflowAnchor&&function(i){let u,m,n=i.dom.getBoundingClientRect(),r=Math.max(0,n.top);for(let t=(n.left+n.right)/2,e=r+1;e<Math.min(innerHeight,n.bottom);e+=5){let o=i.root.elementFromPoint(t,e);if(!o||o==i.dom||!i.dom.contains(o))continue;let s=o.getBoundingClientRect();if(s.top>=r-20){u=o,m=s.top;break}}return{refDOM:u,refTop:m,stack:Yt(i.dom)}}(this);if(t){this.domObserver.stop();let O=f&&(Ot||Ft)&&!this.composing&&!u.selection.empty&&!n.selection.empty&&function(i,n){let r=Math.min(i.$anchor.sharedDepth(i.head),n.$anchor.sharedDepth(n.head));return i.$anchor.start(r)!=n.$anchor.start(r)}(u.selection,n.selection);if(f){let P=Ft?this.trackWrites=this.domSelectionRange().focusNode:null;(m||!this.docView.update(n.doc,s,o,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=a(n.doc,s,o,this.dom,this)),P&&!this.trackWrites&&(O=!0)}O||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(i){let n=i.docView.domFromPos(i.state.selection.anchor,0),r=i.domSelectionRange();return G(n.node,n.offset,r.anchorNode,r.anchorOffset)}(this))?zt(this,O):(de(this,n.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(u),"reset"==p?this.dom.scrollTop=0:"to selection"==p?this.scrollToSelection():E&&function({refDOM:i,refTop:n,stack:r}){let u=i?i.getBoundingClientRect().top:0;Vt(r,0==u?0:u-n)}(E)}scrollToSelection(){let n=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof v.qv){let r=this.docView.domAfterPos(this.state.selection.from);1==r.nodeType&&kt(this,r.getBoundingClientRect(),n)}else kt(this,this.coordsAtPos(this.state.selection.head,1),n)}destroyPluginViews(){let n;for(;n=this.pluginViews.pop();)n.destroy&&n.destroy()}updatePluginViews(n){if(n&&n.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let r=0;r<this.pluginViews.length;r++){let u=this.pluginViews[r];u.update&&u.update(this,n)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let u=this.directPlugins[r];u.spec.view&&this.pluginViews.push(u.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let u=this.state.plugins[r];u.spec.view&&this.pluginViews.push(u.spec.view(this))}}}someProp(n,r){let m,u=this._props&&this._props[n];if(null!=u&&(m=r?r(u):u))return m;for(let e=0;e<this.directPlugins.length;e++){let o=this.directPlugins[e].props[n];if(null!=o&&(m=r?r(o):o))return m}let t=this.state.plugins;if(t)for(let e=0;e<t.length;e++){let o=t[e].props[n];if(null!=o&&(m=r?r(o):o))return m}}hasFocus(){if(Ot){let n=this.root.activeElement;if(n==this.dom)return!0;if(!n||!this.dom.contains(n))return!1;for(;n&&this.dom!=n&&this.dom.contains(n);){if("false"==n.contentEditable)return!1;n=n.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(i){if(i.setActive)return i.setActive();if(ve)return i.focus(ve);let n=Yt(i);i.focus(null==ve?{get preventScroll(){return ve={preventScroll:!0},!0}}:void 0),ve||(ve=!1,Vt(n,0))}(this.dom),zt(this),this.domObserver.start()}get root(){let n=this._root;if(null==n)for(let r=this.dom.parentNode;r;r=r.parentNode)if(9==r.nodeType||11==r.nodeType&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r;return n||document}posAtCoords(n){return Je(this,n)}coordsAtPos(n,r=1){return He(this,n,r)}domAtPos(n,r=0){return this.docView.domFromPos(n,r)}nodeDOM(n){let r=this.docView.descAt(n);return r?r.nodeDOM:null}posAtDOM(n,r,u=-1){let m=this.docView.posFromDOM(n,r,u);if(null==m)throw new RangeError("DOM position not inside the editor");return m}endOfTextblock(n,r){return function(i,n,r){return Ve==n&&Ie==r?fe:(Ve=n,Ie=r,fe="up"==r||"down"==r?function(i,n,r){let u=n.selection,m="up"==r?u.$from:u.$to;return $e(i,n,()=>{let{node:t}=i.docView.domFromPos(m.pos,"up"==r?-1:1);for(;;){let o=i.docView.nearestDesc(t,!0);if(!o)break;if(o.node.isBlock){t=o.contentDOM||o.dom;break}t=o.dom.parentNode}let e=He(i,m.pos,1);for(let o=t.firstChild;o;o=o.nextSibling){let s;if(1==o.nodeType)s=o.getClientRects();else{if(3!=o.nodeType)continue;s=R(o,0,o.nodeValue.length).getClientRects()}for(let p=0;p<s.length;p++){let f=s[p];if(f.bottom>f.top+1&&("up"==r?e.top-f.top>2*(f.bottom-e.top):f.bottom-e.bottom>2*(e.bottom-f.top)))return!1}}return!0})}(i,n,r):function(i,n,r){let{$head:u}=n.selection;if(!u.parent.isTextblock)return!1;let m=u.parentOffset,t=!m,e=m==u.parent.content.size,o=i.domSelection();return ze.test(u.parent.textContent)&&o.modify?$e(i,n,()=>{let{focusNode:s,focusOffset:p,anchorNode:f,anchorOffset:E}=i.domSelectionRange(),O=o.caretBidiLevel;o.modify("move",r,"character");let P=u.depth?i.docView.domAfterPos(u.before()):i.dom,{focusNode:$,focusOffset:V}=i.domSelectionRange(),rt=$&&!P.contains(1==$.nodeType?$:$.parentNode)||s==$&&p==V;try{o.collapse(f,E),s&&(s!=f||p!=E)&&o.extend&&o.extend(s,p)}catch(yt){}return null!=O&&(o.caretBidiLevel=O),rt}):"left"==r||"backward"==r?t:e}(i,n,r))}(this,r||this.state,n)}pasteHTML(n,r){return Dn(this,"",n,!1,r||new ClipboardEvent("paste"))}pasteText(n,r){return Dn(this,n,null,!0,r||new ClipboardEvent("paste"))}destroy(){!this.docView||(function(i){i.domObserver.stop();for(let n in i.input.eventHandlers)i.dom.removeEventListener(n,i.input.eventHandlers[n]);clearTimeout(i.input.composingTimeout),clearTimeout(i.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],oo(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(n){return function(i,n){!Jn(i,n)&&nn[n.type]&&(i.editable||!(n.type in on))&&nn[n.type](i,n)}(this,n)}dispatch(n){let r=this._props.dispatchTransaction;r?r.call(this,n):this.updateState(this.state.apply(n))}domSelectionRange(){return Gt&&11===this.root.nodeType&&function(i){let n=i.activeElement;for(;n&&n.shadowRoot;)n=n.shadowRoot.activeElement;return n}(this.dom.ownerDocument)==this.dom?function(i){let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}i.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),i.dom.removeEventListener("beforeinput",r,!0);let u=n.startContainer,m=n.startOffset,t=n.endContainer,e=n.endOffset,o=i.domAtPos(i.state.selection.anchor);return G(o.node,o.offset,t,e)&&([u,m,t,e]=[t,e,u,m]),{anchorNode:u,anchorOffset:m,focusNode:t,focusOffset:e}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function ro(i){let n=Object.create(null);return n.class="ProseMirror",n.contenteditable=String(i.editable),n.translate="no",i.someProp("attributes",r=>{if("function"==typeof r&&(r=r(i.state)),r)for(let u in r)"class"==u&&(n.class+=" "+r[u]),"style"==u?n.style=(n.style?n.style+";":"")+r[u]:!n[u]&&"contenteditable"!=u&&"nodeName"!=u&&(n[u]=String(r[u]))}),[ln.node(0,i.state.doc.content.size,n)]}function so(i){if(i.markCursor){let n=document.createElement("img");n.className="ProseMirror-separator",n.setAttribute("mark-placeholder","true"),n.setAttribute("alt",""),i.cursorWrapper={dom:n,deco:ln.widget(i.state.selection.head,n,{raw:!0,marks:i.markCursor})}}else i.cursorWrapper=null}function lo(i){return!i.someProp("editable",n=>!1===n(i.state))}function In(i){let n=Object.create(null);function r(u){for(let m in u)Object.prototype.hasOwnProperty.call(n,m)||(n[m]=u[m])}return i.someProp("nodeViews",r),i.someProp("markViews",r),n}function ao(i){if(i.spec.state||i.spec.filterTransaction||i.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}}}]);