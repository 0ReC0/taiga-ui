"use strict";var Qo=Object.defineProperty,Go=Object.defineProperties,Xo=Object.getOwnPropertyDescriptors,_o=Object.getOwnPropertySymbols,$o=Object.prototype.hasOwnProperty,Zo=Object.prototype.propertyIsEnumerable,Yo=(jt,Mt,c)=>Mt in jt?Qo(jt,Mt,{enumerable:!0,configurable:!0,writable:!0,value:c}):jt[Mt]=c,Gt=(jt,Mt)=>{for(var c in Mt||(Mt={}))$o.call(Mt,c)&&Yo(jt,c,Mt[c]);if(_o)for(var c of _o(Mt))Zo.call(Mt,c)&&Yo(jt,c,Mt[c]);return jt},me=(jt,Mt)=>Go(jt,Xo(Mt)),jo=(jt,Mt)=>{var c={};for(var v in jt)$o.call(jt,v)&&Mt.indexOf(v)<0&&(c[v]=jt[v]);if(null!=jt&&_o)for(var v of _o(jt))Mt.indexOf(v)<0&&Zo.call(jt,v)&&(c[v]=jt[v]);return c};(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[48014],{77361:(jt,Mt,c)=>{c.d(Mt,{_:()=>y});var v=c(79765),l=c(74788);let y=(()=>{class P{constructor(){this.stateChange$=new v.xQ,this.valueChange$=new v.xQ}}return P.\u0275fac=function(it){return new(it||P)},P.\u0275dir=l.lG2({type:P}),P})()},97019:(jt,Mt,c)=>{c.d(Mt,{h:()=>St});var v=c(64762),l=c(74788),y=c(50259),P=c(50170),g=c(1414),it=c(10200),N=c(33250),X=c(68874),tt=c(24751),ft=c(52219),ut=c(12057),et=c(65009),_t=c(10383),Tt=c(20933),bt=c(35065),It=c(63060),Pt=c(62733),Dt=c(48214),ht=c(11189),q=c(91030);function F(Et,Lt){if(1&Et&&(l.TgZ(0,"button",7),l._uU(1),l.qZA()),2&Et){const Ht=Lt.$implicit;l.Q6J("value",Ht),l.xp6(1),l.hij(" ",Ht," ")}}function mt(Et,Lt){if(1&Et&&(l.TgZ(0,"tui-data-list",5),l.YNc(1,F,2,2,"button",6),l.qZA()),2&Et){const Ht=l.oxw();l.xp6(1),l.Q6J("ngForOf",Ht.modes)}}function j(Et,Lt){if(1&Et){const Ht=l.EpF();l.TgZ(0,"tui-primitive-textfield",8),l.NdJ("valueChange",function(pt){return l.CHM(Ht),l.oxw().onHexChange(pt)}),l._UZ(1,"input",9),l.qZA()}if(2&Et){const Ht=l.oxw();l.Q6J("textMask",Ht.hexMask)("tuiTextfieldLabelOutside",!0)("value",Ht.hex)}}function At(Et,Lt){if(1&Et){const Ht=l.EpF();l.TgZ(0,"tui-input-count",10),l.NdJ("ngModelChange",function(pt){l.CHM(Ht);const B=l.oxw();return B.onRgbChange(pt,B.color[1],B.color[2],B.color[3])}),l.qZA(),l.TgZ(1,"tui-input-count",10),l.NdJ("ngModelChange",function(pt){l.CHM(Ht);const B=l.oxw();return B.onRgbChange(B.color[0],pt,B.color[2],B.color[3])}),l.qZA(),l.TgZ(2,"tui-input-count",10),l.NdJ("ngModelChange",function(pt){l.CHM(Ht);const B=l.oxw();return B.onRgbChange(B.color[0],B.color[1],pt,B.color[3])}),l.qZA()}if(2&Et){const Ht=l.oxw();l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Ht.color[0]),l.xp6(1),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Ht.color[1]),l.xp6(1),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",Ht.color[2])}}class St{constructor(){this.color=[0,0,0,1],this.colorChange=new l.vpe,this.hexMask={mask:({length:Lt})=>Array.from({length:Lt},()=>/\d|[a-f]|[A-F]/),guide:!1},this.modes=["HEX","RGB"],this.mode=this.modes[0]}get isHex(){return this.mode===this.modes[0]}get hex(){return(0,y.tuiRgbToHex)(this.color[0],this.color[1],this.color[2]).replace("#","")}get opacity(){return Math.round(100*this.color[3])}onHexChange(Lt){if(6!==Lt.length)return;const Ht=(0,y.tuiHexToRgb)(Lt);this.updateColor([Ht[0],Ht[1],Ht[2],this.color[3]])}onRgbChange(...Lt){this.updateColor(Lt)}updateColor(Lt){this.color=Lt,this.colorChange.emit(Lt)}}St.\u0275fac=function(Lt){return new(Lt||St)},St.\u0275cmp=l.Xpm({type:St,selectors:[["tui-color-edit"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:6,vars:8,consts:[["tuiTextfieldSize","m","tuiDropdownAlign","left","tuiDropdownLimitWidth","min",1,"t-select","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","ngModel","ngModelChange"],["size","s",4,"tuiDataList"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange",4,"ngIf","ngIfElse"],["rgb",""],["postfix","%","tuiTextfieldSize","m",1,"t-opacity","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"],["size","s"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange"],["tuiTextfield","","maxlength","6"],["tuiTextfieldSize","m",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"]],template:function(Lt,Ht){if(1&Lt&&(l.TgZ(0,"tui-select",0),l.NdJ("ngModelChange",function(pt){return Ht.mode=pt}),l.YNc(1,mt,2,1,"tui-data-list",1),l.qZA(),l.YNc(2,j,2,3,"tui-primitive-textfield",2),l.YNc(3,At,3,12,"ng-template",null,3,l.W1O),l.TgZ(5,"tui-input-count",4),l.NdJ("ngModelChange",function(pt){return Ht.onRgbChange(Ht.color[0],Ht.color[1],Ht.color[2],pt/100)}),l.qZA()),2&Lt){const Kt=l.MAs(4);l.Q6J("tuiTextfieldLabelOutside",!0)("ngModel",Ht.mode),l.xp6(2),l.Q6J("ngIf",Ht.isHex)("ngIfElse",Kt),l.xp6(3),l.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",100)("ngModel",Ht.opacity)}},directives:[P.u,g.O,it.s,N.Ek,X.x,tt.JJ,tt.On,ft.g,ut.O5,et.E,_t.a,Tt.q,ut.sg,bt.v,It.y,Pt.B,Dt.n,ht.h,q.M],styles:["[_nghost-%COMP%]{display:flex}.t-select[_ngcontent-%COMP%]{width:4.875rem}.t-opacity[_ngcontent-%COMP%]{width:4.275rem}"],changeDetection:0}),(0,v.gn)([(0,y.tuiDefaultProp)()],St.prototype,"color",void 0)},49289:(jt,Mt,c)=>{c.d(Mt,{$:()=>N});var v=c(64762),l=c(74788),y=c(91211),P=c(50259),g=c(71424),it=c(65720);class N{constructor(tt){this.sanitizer=tt,this.colorChange=new l.vpe,this.point=[0,1],this.hue=0,this.opacity=1}set color(tt){if(this.currentColor.every((_t,Tt)=>_t===tt[Tt])&&tt[3]===this.opacity)return;const[ft,ut,et]=(0,P.tuiRgbToHsv)(tt[0],tt[1],tt[2]);this.opacity=tt[3],this.hue=ft/360,this.point=[ut,1-et/255]}get currentColor(){return this.getCurrentColor(this.hue,this.point)}get base(){return`rgb(${(0,P.tuiHsvToRgb)(360*this.hue,1,255)})`}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(`linear-gradient(to right, rgba(${this.currentColor.join(",")}, 0), rgb(${this.currentColor.join(",")}))`)}onPointChange(tt){this.point=tt,this.updateColor()}onHueChange(tt){this.hue=tt,this.updateColor()}onOpacityChange(tt){this.opacity=(0,P.tuiRound)(tt,2),this.updateColor()}getCurrentColor(tt,ft){return(0,P.tuiHsvToRgb)(360*tt,ft[0],255*(1-ft[1]))}updateColor(){this.colorChange.emit([...this.currentColor,this.opacity])}}N.\u0275fac=function(tt){return new(tt||N)(l.Y36(y.H7))},N.\u0275cmp=l.Xpm({type:N,selectors:[["tui-color-picker"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:5,vars:7,consts:[[1,"t-flat",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_hue"],[1,"t-hue",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_opacity"],[1,"t-opacity",3,"value","valueChange"]],template:function(tt,ft){1&tt&&(l.TgZ(0,"tui-flat-picker",0),l.NdJ("valueChange",function(et){return ft.onPointChange(et)}),l.qZA(),l.TgZ(1,"div",1),l.TgZ(2,"tui-linear-picker",2),l.NdJ("valueChange",function(et){return ft.onHueChange(et)}),l.qZA(),l.qZA(),l.TgZ(3,"div",3),l.TgZ(4,"tui-linear-picker",4),l.NdJ("valueChange",function(et){return ft.onOpacityChange(et)}),l.qZA(),l.qZA()),2&tt&&(l.Udp("background-color",ft.base),l.Q6J("value",ft.point),l.xp6(2),l.Q6J("value",ft.hue),l.xp6(1),l.Udp("background",ft.gradient),l.xp6(1),l.Q6J("value",ft.opacity))},directives:[g.J,it.P],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block}.t-flat[_ngcontent-%COMP%]{height:14rem;background:linear-gradient(rgba(0,0,0,0),#000000),linear-gradient(to right,#ffffff,rgba(255,255,255,0));margin-bottom:.25rem;overflow:hidden}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1rem 1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper_hue[_ngcontent-%COMP%]{background:#ff0000}.t-wrapper_opacity[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hue[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff0000,#ffff00,#00ff00,#00ffff,#0000ff,#ff00ff,#ff0000);border-radius:inherit;margin:0 .5rem}.t-opacity[_ngcontent-%COMP%]{border-radius:inherit;margin:0 .5rem}'],changeDetection:0}),(0,v.gn)([(0,P.tuiDefaultProp)()],N.prototype,"color",null),(0,v.gn)([P.tuiPure],N.prototype,"getCurrentColor",null)},23999:(jt,Mt,c)=>{c.d(Mt,{s:()=>st});var v=c(64762),l=c(74788),y=c(91211),P=c(14309),g=c(27863),it=c(50259),N=c(62939),X=c(76189),tt=c(12057),ft=c(49289),ut=c(34880),et=c(20933),_t=c(35065),Tt=c(49472),bt=c(219),It=c(67446),Pt=c(29070),Dt=c(54255),ht=c(15491),q=c(97019),F=c(39607),mt=c(5451);function j(J,Q){if(1&J&&l._UZ(0,"tui-svg",9),2&J){l.oxw();const ot=l.MAs(1);l.ekj("t-arrow_rotated",ot.open)}}function At(J,Q){1&J&&l._UZ(0,"tui-svg",14)}function St(J,Q){if(1&J){const ot=l.EpF();l.TgZ(0,"button",12),l.NdJ("keydown.enter.prevent",function(){const Yt=l.CHM(ot).$implicit,ee=l.oxw(2),zt=l.MAs(1);return ee.onModeSelect(Yt,zt)})("keydown.space.prevent",function(){const Yt=l.CHM(ot).$implicit,ee=l.oxw(2),zt=l.MAs(1);return ee.onModeSelect(Yt,zt)})("click",function(){const Yt=l.CHM(ot).$implicit,ee=l.oxw(2),zt=l.MAs(1);return ee.onModeSelect(Yt,zt)}),l._uU(1),l.YNc(2,At,1,0,"tui-svg",13),l.qZA()}if(2&J){const ot=Q.$implicit,kt=l.oxw(2);l.uIk("aria-checked",kt.isModeActive(ot)),l.xp6(1),l.hij(" ",ot," "),l.xp6(1),l.Q6J("ngIf",kt.isModeActive(ot))}}function Et(J,Q){if(1&J&&(l.TgZ(0,"tui-data-list",10),l.YNc(1,St,3,3,"button",11),l.qZA()),2&J){const ot=l.oxw();l.xp6(1),l.Q6J("ngForOf",ot.modes)}}function Lt(J,Q){if(1&J){const ot=l.EpF();l.TgZ(0,"button",20),l.NdJ("click",function(){const Yt=l.CHM(ot).$implicit;return l.oxw(2).onDirectionChange(Yt)}),l.qZA()}if(2&J){const ot=Q.$implicit,kt=l.oxw(2);l.ekj("t-direction_active",kt.isDirectionActive(ot)),l.Q6J("icon",kt.getIcon(ot))("tuiHint",ot)}}function Ht(J,Q){if(1&J){const ot=l.EpF();l.ynx(0),l._UZ(1,"hr",15),l.TgZ(2,"div",16),l.TgZ(3,"tui-linear-multi-picker",17),l.NdJ("valueChange",function($t){return l.CHM(ot),l.oxw().onStopsChange($t)})("indexChange",function($t){return l.CHM(ot),l.oxw().onIndexChange($t)}),l.qZA(),l.qZA(),l.TgZ(4,"div",18),l.YNc(5,Lt,1,4,"button",19),l.qZA(),l.BQk()}if(2&J){const ot=l.oxw();l.xp6(2),l.Udp("background",ot.gradient),l.xp6(1),l.Q6J("value",ot.stopsKeys),l.xp6(2),l.Q6J("ngForOf",ot.buttons)}}function Kt(J,Q){if(1&J){const ot=l.EpF();l.TgZ(0,"tui-color-edit",21),l.NdJ("colorChange",function($t){return l.CHM(ot),l.oxw().onColorChange($t)}),l.qZA()}if(2&J){const ot=l.oxw();l.Q6J("color",ot.color)}}function pt(J,Q){if(1&J){const ot=l.EpF();l.TgZ(0,"tui-palette",22),l.NdJ("selectedColor",function($t){return l.CHM(ot),l.oxw().onPalettePick($t)}),l.qZA()}if(2&J){const ot=l.oxw();l.Q6J("colors",ot.palette)}}const B=[0,0,0,0],rt=[[0,[0,0,0,1]],[1,[255,255,255,1]]],at={"to top right":"tuiIconArrowUpRight","to right":"tuiIconArrowRight","to bottom right":"tuiIconArrowDownRight","to bottom":"tuiIconArrowDown","to bottom left":"tuiIconArrowDownLeft","to left":"tuiIconArrowLeft","to top left":"tuiIconArrowUpLeft","to top":"tuiIconArrowUp"};class st{constructor(Q,ot){this.sanitizer=Q,this.modes=ot,this.stops=new Map(rt),this.currentStop=0,this.direction="to bottom",this.colors=new Map,this.colorChange=new l.vpe,this.color=[0,0,0,1],this.currentMode=this.modes[0],this.buttons=["to top right","to right","to bottom right","to bottom","to bottom left","to left","to top left","to top"]}set colorSetter(Q){this.parse(Q)}get palette(){return this.filterPalette(this.colors,this.isGradient)}get stopsKeys(){return this.getStopsKeys(this.stops)}get currentColor(){return this.isGradient?this.getStop(this.currentStop):this.color}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(this.getGradient("to right"))}get isGradient(){return this.currentMode===this.modes[1]}getIcon(Q){return at[Q]}isModeActive(Q){return this.currentMode===Q}isDirectionActive(Q){return this.direction===Q}onPalettePick(Q){this.updateColor(Q)}onDirectionChange(Q){this.direction=Q,this.updateColor(this.getGradient(Q))}onModeSelect(Q,ot){this.currentMode=Q,ot.open=!1,this.updateColor(Q===this.modes[0]?`rgba(${this.color.join(", ")})`:this.getGradient(this.direction))}onIndexChange(Q){this.currentStop=this.stopsKeys[Q]}onColorChange(Q){this.isGradient?(this.stops.set(this.currentStop,Q),this.updateColor(this.getGradient(this.direction))):this.updateColor(`rgba(${Q.join(", ")})`)}onStopsChange(Q){const ot=this.stopsKeys.find($t=>!Q.includes($t)),kt=Q.find($t=>!this.stopsKeys.includes($t));void 0===ot&&void 0!==kt&&this.addStop(kt),void 0!==ot&&void 0===kt&&this.removeStop(ot),void 0!==ot&&void 0!==kt&&this.replaceStop(ot,kt),this.updateColor(this.getGradient(this.direction))}getStopsKeys(Q){return Array.from(Q.keys())}filterPalette(Q,ot){const kt=new Map(Q);return kt.forEach(($t,Yt)=>{($t.startsWith("linear-gradient")&&!ot||!$t.startsWith("linear-gradient")&&ot)&&kt.delete(Yt)}),kt}updateColor(Q){this.colorChange.emit(Q)}getGradient(Q){return`linear-gradient(${Q}, ${[...this.stopsKeys].sort().map(ot=>`rgba(${this.getStop(ot).join(", ")}) ${100*ot}%`).join(", ")})`}getStop(Q){return this.stops.get(Q)||B}addStop(Q){const ot=this.stopsKeys.reduce((kt,$t)=>Math.abs($t-Q)<Math.abs(kt-Q)?$t:kt,this.stopsKeys[0]);this.stops.set(Q,this.getStop(ot)),this.stops=new Map(this.stops),this.currentStop=Q}removeStop(Q){this.stops.delete(Q),this.stops=new Map(this.stops),this.currentStop=this.stopsKeys[0]}replaceStop(Q,ot){const kt=this.getStop(Q);this.currentStop=ot,this.stops=new Map(this.stopsKeys.map($t=>$t===Q?[ot,kt]:[$t,this.getStop($t)]))}parse(Q){Q.startsWith("linear-gradient")?this.parseGradient(Q):this.parseColor(Q)}parseGradient(Q){if(Q===this.getGradient(this.direction))return;const ot=(0,g._N)((0,g.U5)(Q));this.currentMode=this.modes[1],this.direction=ot.side,this.currentStop=0,this.stops=new Map(ot.stops.length?ot.stops.map(({color:kt,position:$t})=>[parseFloat($t)/100,(0,it.tuiParseColor)(kt)]):rt)}parseColor(Q){this.currentMode=this.modes[0],this.currentStop=0,this.color=(0,it.tuiParseColor)(Q)}}st.\u0275fac=function(Q){return new(Q||st)(l.Y36(y.H7),l.Y36(P.dj))},st.\u0275cmp=l.Xpm({type:st,selectors:[["tui-color-selector"]],inputs:{colors:"colors",colorSetter:["color","colorSetter"]},outputs:{colorChange:"colorChange"},decls:12,vars:7,consts:[[1,"t-select",3,"content"],["dropdown",""],["tuiButton","","appearance","","size","s","type","button",3,"iconRight"],["arrow",""],["menu",""],[4,"ngIf"],[3,"color","colorChange"],["tuiGroup","","class","t-edit",3,"color","colorChange",4,"ngIf"],["class","t-palette",3,"colors","selectedColor",4,"ngIf"],["src","tuiIconChevronDown",1,"t-arrow"],["role","menu","size","s",1,"t-menu"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click"],["src","tuiIconCheck","class","t-checkmark",4,"ngIf"],["src","tuiIconCheck",1,"t-checkmark"],[1,"t-hr"],[1,"t-wrapper"],[1,"t-gradient",3,"value","valueChange","indexChange"],[1,"t-buttons"],["tuiIconButton","","type","button","size","xs","appearance","","tuiHintDescribe","","class","t-direction",3,"t-direction_active","icon","tuiHint","click",4,"ngFor","ngForOf"],["tuiIconButton","","type","button","size","xs","appearance","","tuiHintDescribe","",1,"t-direction",3,"icon","tuiHint","click"],["tuiGroup","",1,"t-edit",3,"color","colorChange"],[1,"t-palette",3,"colors","selectedColor"]],template:function(Q,ot){if(1&Q&&(l.TgZ(0,"tui-hosted-dropdown",0,1),l.TgZ(2,"button",2),l._uU(3),l.qZA(),l.YNc(4,j,1,2,"ng-template",null,3,l.W1O),l.YNc(6,Et,2,1,"ng-template",null,4,l.W1O),l.qZA(),l.YNc(8,Ht,6,4,"ng-container",5),l.TgZ(9,"tui-color-picker",6),l.NdJ("colorChange",function($t){return ot.onColorChange($t)}),l.qZA(),l.YNc(10,Kt,1,1,"tui-color-edit",7),l.YNc(11,pt,1,1,"tui-palette",8)),2&Q){const kt=l.MAs(5),$t=l.MAs(7);l.Q6J("content",$t),l.xp6(2),l.Q6J("iconRight",kt),l.xp6(1),l.hij(" ",ot.currentMode," "),l.xp6(5),l.Q6J("ngIf",ot.isGradient),l.xp6(1),l.Q6J("color",ot.currentColor),l.xp6(1),l.Q6J("ngIf",!ot.isGradient),l.xp6(1),l.Q6J("ngIf",ot.palette.size)}},directives:[N.o,X.v,tt.O5,ft.$,ut.P,et.q,tt.sg,_t.v,Tt.e,bt.$,It.D,Pt.x,Dt.t,ht.D,q.h,F.g,mt.R],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block;width:22.6rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hr[_ngcontent-%COMP%]{height:1px;margin:0 0 0 -1px;border:none;background:var(--tui-base-03)}.t-gradient[_ngcontent-%COMP%]{margin:0 .5rem;border-radius:inherit}.t-select[_ngcontent-%COMP%]{margin:.75rem .5rem}.t-arrow[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-arrow_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.t-menu[_ngcontent-%COMP%]{width:11.25rem}.t-checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}.t-buttons[_ngcontent-%COMP%]{display:flex;padding:0 .75rem 1.25rem}.t-direction[_ngcontent-%COMP%]{color:var(--tui-text-02);margin:0 .375rem}.t-direction[_ngcontent-%COMP%]:hover, .t-direction_active[_ngcontent-%COMP%]{color:var(--tui-text-01);background:var(--tui-secondary-hover)}.t-edit[_ngcontent-%COMP%]{margin:1.25rem}.t-palette[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:inset 0 1px var(--tui-base-03)}'],changeDetection:0}),(0,v.gn)([(0,it.tuiDefaultProp)()],st.prototype,"colors",void 0),(0,v.gn)([(0,it.tuiRequiredSetter)()],st.prototype,"colorSetter",null),(0,v.gn)([it.tuiPure],st.prototype,"getStopsKeys",null),(0,v.gn)([it.tuiPure],st.prototype,"filterPalette",null)},71424:(jt,Mt,c)=>{c.d(Mt,{J:()=>g});var v=c(64762),l=c(74788),y=c(62141),P=c(50259);class g{constructor(N){this.value=[0,0],this.valueChange=new l.vpe,N.subscribe(X=>{this.value=X,this.valueChange.emit([X[0],X[1]])})}get left(){return 100*this.value[0]}get top(){return 100*this.value[1]}}g.\u0275fac=function(N){return new(N||g)(l.Y36(y.i))},g.\u0275cmp=l.Xpm({type:g,selectors:[["tui-flat-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[l._Bn([P.TuiDestroyService,y.i])],decls:1,vars:4,consts:[[1,"t-circle"]],template:function(N,X){1&N&&l._UZ(0,"div",0),2&N&&l.Udp("left",X.left,"%")("top",X.top,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:-.5rem 0 0 -.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,v.gn)([(0,P.tuiDefaultProp)()],g.prototype,"value",void 0)},27050:(jt,Mt,c)=>{c.d(Mt,{hR:()=>v.h,TD:()=>N,$v:()=>X.$,H9:()=>ut,sV:()=>et.s,wl:()=>It,Jd:()=>Pt.J,ui:()=>tt,es:()=>Dt.e,GU:()=>Tt,P:()=>ht.P,g7:()=>ft,Rh:()=>q.R,VM:()=>bt});var v=c(97019),l=c(12057),y=c(24751),P=c(3497),g=c(55908),it=c(74788);let N=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=it.oAB({type:F}),F.\u0275inj=it.cJS({imports:[[l.ez,y.u5,g.TextMaskModule,g.TuiValueAccessorModule,g.TuiSelectModule,P.TuiPrimitiveTextfieldModule,P.TuiTextfieldControllerModule,P.TuiDropdownModule,g.TuiInputCountModule,P.TuiDataListModule]]}),F})();var X=c(49289);let tt=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=it.oAB({type:F}),F.\u0275inj=it.cJS({imports:[[l.ez]]}),F})(),ft=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=it.oAB({type:F}),F.\u0275inj=it.cJS({imports:[[l.ez]]}),F})(),ut=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=it.oAB({type:F}),F.\u0275inj=it.cJS({imports:[[l.ez,tt,ft]]}),F})();var et=c(23999),_t=c(50259);let Tt=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=it.oAB({type:F}),F.\u0275inj=it.cJS({imports:[[l.ez]]}),F})(),bt=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=it.oAB({type:F}),F.\u0275inj=it.cJS({imports:[[l.ez,P.TuiHintModule]]}),F})(),It=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=it.oAB({type:F}),F.\u0275inj=it.cJS({imports:[[l.ez,P.TuiButtonModule,P.TuiHostedDropdownModule,ut,Tt,P.TuiHintModule,P.TuiSvgModule,P.TuiDataListModule,_t.TuiActiveZoneModule,N,P.TuiGroupModule,bt]]}),F})();var Pt=c(71424),Dt=c(49472),ht=c(65720),q=c(5451)},49472:(jt,Mt,c)=>{c.d(Mt,{e:()=>N});var v=c(64762),l=c(74788),y=c(62141),P=c(50259),g=c(12057);function it(X,tt){if(1&X){const ft=l.EpF();l.TgZ(0,"div",1),l.NdJ("mousedown",function(){const _t=l.CHM(ft).index;return l.oxw().onMouseDown(_t)})("dblclick",function(){const _t=l.CHM(ft).index;return l.oxw().onClick(_t)}),l.qZA()}2&X&&l.Udp("left",100*tt.$implicit,"%")}class N{constructor(tt){this.value=[0,1],this.valueChange=new l.vpe,this.indexChange=new l.vpe,this.index=NaN,tt.subscribe(([ft])=>{this.onPicker(ft)})}onMouseUp(){this.index=NaN}onMouseDown(tt){this.updateIndex(tt)}onClick(tt){this.value.length>2&&this.updateValue(this.value.filter((ft,ut)=>ut!==tt))}onPicker(tt){Number.isNaN(this.index)&&(this.updateIndex(this.value.length),this.value=[...this.value,0]),!this.value.some((ft,ut)=>ft===tt&&ut!==this.index)&&this.updateValue(this.value.map((ft,ut)=>ut===this.index?tt:ft))}updateIndex(tt){this.index=tt,this.indexChange.emit(tt)}updateValue(tt){this.value=tt,this.valueChange.emit(tt)}}N.\u0275fac=function(tt){return new(tt||N)(l.Y36(y.i))},N.\u0275cmp=l.Xpm({type:N,selectors:[["tui-linear-multi-picker"]],hostBindings:function(tt,ft){1&tt&&l.NdJ("mouseup",function(){return ft.onMouseUp()},!1,l.evT)},inputs:{value:"value"},outputs:{valueChange:"valueChange",indexChange:"indexChange"},features:[l._Bn([P.TuiDestroyService,y.i])],decls:1,vars:1,consts:[["class","t-circle",3,"left","mousedown","dblclick",4,"ngFor","ngForOf"],[1,"t-circle",3,"mousedown","dblclick"]],template:function(tt,ft){1&tt&&l.YNc(0,it,1,2,"div",0),2&tt&&l.Q6J("ngForOf",ft.value)},directives:[g.sg],styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,v.gn)([(0,P.tuiDefaultProp)()],N.prototype,"value",void 0)},65720:(jt,Mt,c)=>{c.d(Mt,{P:()=>g});var v=c(64762),l=c(74788),y=c(62141),P=c(50259);class g{constructor(N){this.value=0,this.valueChange=new l.vpe,N.subscribe(([X])=>{this.value=X,this.valueChange.emit(X)})}get left(){return 100*this.value}}g.\u0275fac=function(N){return new(N||g)(l.Y36(y.i))},g.\u0275cmp=l.Xpm({type:g,selectors:[["tui-linear-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[l._Bn([P.TuiDestroyService,y.i])],decls:1,vars:2,consts:[[1,"t-circle"]],template:function(N,X){1&N&&l._UZ(0,"div",0),2&N&&l.Udp("left",X.left,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,v.gn)([(0,P.tuiDefaultProp)()],g.prototype,"value",void 0)},5451:(jt,Mt,c)=>{c.d(Mt,{R:()=>ut});var v=c(64762),l=c(74788),y=c(50259),P=c(12057),g=c(67446),it=c(29070),N=c(54255),X=c(15491),tt=c(219);function ft(et,_t){if(1&et){const Tt=l.EpF();l.TgZ(0,"button",1),l.NdJ("click",function(){const Pt=l.CHM(Tt).$implicit;return l.oxw().selectedColor.emit(Pt.value)}),l.qZA()}if(2&et){const Tt=_t.$implicit;l.Udp("background",Tt.value),l.Q6J("tuiHint",Tt.key)("tuiHintDescribe",Tt.key)("id",Tt.key)}}class ut{constructor(){this.colors=new Map,this.selectedColor=new l.vpe,this.originalOrder=(_t,Tt)=>0}}ut.\u0275fac=function(_t){return new(_t||ut)},ut.\u0275cmp=l.Xpm({type:ut,selectors:[["tui-palette"]],inputs:{colors:"colors"},outputs:{selectedColor:"selectedColor"},decls:2,vars:4,consts:[["type","button","class","t-button",3,"background","tuiHint","tuiHintDescribe","id","click",4,"ngFor","ngForOf"],["type","button",1,"t-button",3,"tuiHint","tuiHintDescribe","id","click"]],template:function(_t,Tt){1&_t&&(l.YNc(0,ft,1,5,"button",0),l.ALo(1,"keyvalue")),2&_t&&l.Q6J("ngForOf",l.xi3(1,1,Tt.colors,Tt.originalOrder))},directives:[P.sg,g.D,it.x,N.t,X.D,tt.$],pipes:[P.Nd],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;padding:.875rem}.t-button[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;width:1.5625rem;height:1.5625rem;box-sizing:border-box;margin:.375rem;border-radius:var(--tui-radius-m);border:1px solid rgba(0,0,0,.08)}"],changeDetection:0}),(0,v.gn)([(0,y.tuiDefaultProp)()],ut.prototype,"colors",void 0)},45050:(jt,Mt,c)=>{c.d(Mt,{l:()=>Ht});var v=c(64762),l=c(12057),y=c(74788),P=c(84614),g=c(14309),it=c(50259),N=c(87623),X=c(20986),tt=c(24751),ft=c(34880),ut=c(76189),et=c(66596),_t=c(3881),Tt=c(22613),bt=c(98266);function It(Kt,pt){1&Kt&&(y.ynx(0),y._uU(1,"Edit anchor"),y.BQk())}function Pt(Kt,pt){1&Kt&&(y.TgZ(0,"span"),y._uU(1,"Link to anchor"),y.qZA())}function Dt(Kt,pt){1&Kt&&(y.TgZ(0,"span"),y._uU(1,"URL"),y.qZA())}function ht(Kt,pt){if(1&Kt&&(y.YNc(0,Pt,2,0,"span",1),y.YNc(1,Dt,2,0,"ng-template",null,12,y.W1O)),2&Kt){const B=y.MAs(2),rt=y.oxw(2);y.Q6J("ngIf",rt.prefixIsHashMode)("ngIfElse",B)}}function q(Kt,pt){if(1&Kt&&(y.ynx(0),y._uU(1),y.BQk()),2&Kt){const B=pt.ngIf,rt=y.oxw(2);y.xp6(1),y.hij(" ",rt.prefixIsHashMode?B.anchorExample:B.urlExample," ")}}function F(Kt,pt){if(1&Kt){const B=y.EpF();y.ynx(0),y.TgZ(1,"label",4),y.TgZ(2,"div",5),y.YNc(3,It,2,0,"ng-container",1),y.YNc(4,ht,3,2,"ng-template",null,6,y.W1O),y.qZA(),y.TgZ(6,"div",7),y.TgZ(7,"div",8),y._uU(8),y.qZA(),y.TgZ(9,"tui-input-inline",9),y.NdJ("ngModelChange",function(at){return y.CHM(B),y.oxw().url=at})("input",function(at){let J;return y.CHM(B),y.oxw().onChange(null==(J=at.target)?null:J.value)})("keydown.prevent.enter",function(){return y.CHM(B),y.oxw().onSave()})("keydown.backspace",function(){return y.CHM(B),y.oxw().onBackspace()}),y.YNc(10,q,2,1,"ng-container",3),y.ALo(11,"async"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(12,"tui-svg",10),y.NdJ("click",function(){return y.CHM(B),y.oxw().onClear()}),y.qZA(),y.TgZ(13,"button",11),y.NdJ("click",function(){return y.CHM(B),y.oxw().onSave()}),y.qZA(),y.BQk()}if(2&Kt){const B=y.MAs(5),rt=y.oxw();y.xp6(3),y.Q6J("ngIf",rt.anchorMode)("ngIfElse",B),y.xp6(5),y.Oqu(rt.prefix),y.xp6(1),y.ekj("t-input_filled",rt.hasUrl),y.Q6J("ngModel",rt.url),y.xp6(1),y.Q6J("ngIf",y.lcZ(11,9,rt.texts$)),y.xp6(2),y.ekj("t-cleaner_hidden",!rt.hasUrl)}}function mt(Kt,pt){if(1&Kt){const B=y.EpF();y.TgZ(0,"a",13),y._uU(1),y.ALo(2,"tuiShortUrl"),y.qZA(),y.TgZ(3,"button",14),y.NdJ("click",function(){return y.CHM(B),y.oxw().onEdit()}),y.qZA(),y.TgZ(4,"button",15),y.NdJ("click",function(){return y.CHM(B),y.oxw().onRemove()}),y.qZA()}if(2&Kt){const B=y.oxw();y.Q6J("href",B.href,y.LSH),y.xp6(1),y.AsE(" ",B.anchorMode?"#":"","",y.lcZ(2,3,B.url)," ")}}function j(Kt,pt){if(1&Kt){const B=y.EpF();y.TgZ(0,"button",19),y.NdJ("click",function(){const st=y.CHM(B).$implicit;return y.oxw(2).setAnchor(st)}),y._uU(1),y.qZA()}if(2&Kt){const B=pt.$implicit;y.xp6(1),y.hij(" #",B," ")}}function At(Kt,pt){if(1&Kt&&(y.ynx(0),y._UZ(1,"hr",16),y.TgZ(2,"tui-scrollbar"),y.TgZ(3,"div",17),y.YNc(4,j,2,1,"button",18),y.ALo(5,"tuiFilterAnchors"),y.qZA(),y.qZA(),y.BQk()),2&Kt){const B=y.oxw();y.xp6(4),y.Q6J("ngForOf",y.Dn7(5,1,B.anchorIds,B.prefix,B.url))}}const St="#",Et="http://",Lt="https://";class Ht{constructor(pt,B,rt){this.documentRef=pt,this.texts$=B,this.editor=rt,this.isOnlyAnchorMode=this.detectAnchorMode(),this.addLink=new y.vpe,this.removeLink=new y.vpe,this.url=this.getHrefOrAnchorId(),this.edit=!this.url,this.prefix=this.makeDefaultPrefix(),this.anchorIds=this.getAllAnchorsIds()}set anchorMode(pt){this.isOnlyAnchorMode=pt,this.prefix=pt?St:this.makeDefaultPrefix()}get anchorMode(){return this.isOnlyAnchorMode}get prefixIsHashMode(){return this.prefix===St}get hasUrl(){return!!this.url}get href(){return`${this.prefix}${this.url}`}get showAnchorsList(){return!this.anchorMode&&this.edit&&this.anchorIds.length>0}get isViewMode(){return!this.edit}onSelectionChange(){this.isViewMode&&(this.url=this.getHrefOrAnchorId(),this.anchorMode=this.detectAnchorMode())}onMouseDown(pt){(0,it.tuiIsElement)(pt.target)&&!pt.target.matches("a, button, input")&&pt.preventDefault()}setAnchor(pt){this.url=pt,this.changePrefix(!0)}changePrefix(pt){this.prefix=pt?St:Et}onSave(){this.url?this.addLink.emit(this.href):this.removeLink.emit()}onBackspace(){this.url||(this.prefix=this.isOnlyAnchorMode?St:Et)}onEdit(){this.edit=!0}onRemove(){this.removeLink.emit()}onChange(pt){this.url=this.removePrefix(pt)}onClear(){this.url=""}makeDefaultPrefix(){var pt;const B=this.getAnchorElement();return B&&(!B.getAttribute("href")&&B.getAttribute("id")||(null===(pt=B.getAttribute("href"))||void 0===pt?void 0:pt.startsWith(St)))?St:Et}detectAnchorMode(){const pt=this.getAnchorElement();return!(null==pt?void 0:pt.href)&&!!(null==pt?void 0:pt.getAttribute("id"))}getFocusedParentElement(){var pt,B;return(null===(B=null===(pt=this.documentRef.getSelection())||void 0===pt?void 0:pt.focusNode)||void 0===B?void 0:B.parentElement)||null}getAnchorElement(){var pt;return(null===(pt=this.getFocusedParentElement())||void 0===pt?void 0:pt.closest("a"))||null}getHrefOrAnchorId(){const pt=this.getAnchorElement();return pt?this.removePrefix(pt.getAttribute("href")||pt.getAttribute("id")||""):this.url}removePrefix(pt){return pt.startsWith(Et)?(this.prefix=this.isOnlyAnchorMode?St:Et,pt.replace(Et,"")):pt.startsWith(Lt)?(this.prefix=this.isOnlyAnchorMode?St:Lt,pt.replace(Lt,"")):pt.startsWith(St)?(this.prefix=St,pt.replace(St,"")):pt}getAllAnchorsIds(){var pt;const B=Array.from(null!==(pt=this.editor.getOriginTiptapEditor().view.dom.querySelectorAll('[data-type="jump-anchor"]'))&&void 0!==pt?pt:[]);return Array.from(B).map(rt=>rt.getAttribute("id")||"").filter(Boolean)}}Ht.\u0275fac=function(pt){return new(pt||Ht)(y.Y36(l.K0),y.Y36(g.b$),y.Y36(P.$3))},Ht.\u0275cmp=y.Xpm({type:Ht,selectors:[["tui-edit-link"]],hostBindings:function(pt,B){1&pt&&y.NdJ("selectionchange",function(){return B.onSelectionChange()},!1,y.evT)("mousedown",function(at){return B.onMouseDown(at)})},inputs:{anchorMode:"anchorMode"},outputs:{addLink:"addLink",removeLink:"removeLink"},decls:5,vars:3,consts:[[1,"t-edit-link"],[4,"ngIf","ngIfElse"],["view",""],[4,"ngIf"],[1,"t-label"],[1,"t-label-properties"],["fullOptions",""],[1,"t-url"],[1,"t-prefix"],["tuiAutoFocus","",1,"t-input",3,"ngModel","ngModelChange","input","keydown.prevent.enter","keydown.backspace"],["src","tuiIconCloseLarge",1,"t-cleaner",3,"click"],["tuiIconButton","","type","button","size","s","title","Insert link","icon","tuiIconCheckCircleLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],["urlTitle",""],["tuiLink","","target","_blank",1,"t-link",3,"href"],["tuiIconButton","","type","button","size","s","title","Change link","icon","tuiIconEdit2Large","shape","rounded","appearance","icon",1,"t-button","t-edit-button",3,"click"],["tuiIconButton","","type","button","size","s","title","Remove link","icon","tuiIconUnlinkLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],[1,"t-hr"],[1,"t-anchor-list"],["type","button","class","t-anchor",3,"click",4,"ngFor","ngForOf"],["type","button",1,"t-anchor",3,"click"]],template:function(pt,B){if(1&pt&&(y.TgZ(0,"div",0),y.YNc(1,F,14,11,"ng-container",1),y.YNc(2,mt,5,5,"ng-template",null,2,y.W1O),y.qZA(),y.YNc(4,At,6,5,"ng-container",3)),2&pt){const rt=y.MAs(3);y.xp6(1),y.Q6J("ngIf",B.edit)("ngIfElse",rt),y.xp6(3),y.Q6J("ngIf",B.showAnchorsList)}},directives:[l.O5,N.l,X.k,tt.JJ,tt.On,ft.P,ut.v,et.V,_t.I,l.sg],pipes:[l.Ov,Tt.X,bt.b],styles:["[_nghost-%COMP%]{display:block;min-width:18.75rem}.t-edit-link[_ngcontent-%COMP%]{display:flex;min-height:4rem;align-items:center;padding-right:.75rem}.t-label[_ngcontent-%COMP%]{font:var(--tui-font-text-s);height:var(--tui-height-l);box-sizing:border-box;padding:.4375rem 1rem;min-width:12.5rem;max-width:25rem;width:100%}.t-label-properties[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:8.375rem;justify-content:space-between}.t-property_inactive[_ngcontent-%COMP%]{opacity:.5}.t-url[_ngcontent-%COMP%]{display:flex;font:var(--tui-font-text-m);color:var(--tui-text-02)}.t-input[_ngcontent-%COMP%]{flex:1}.t-input_filled[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-button[_ngcontent-%COMP%]{width:2rem;height:2rem;margin:0 .25rem;transition:background .2s}.t-edit-button[_ngcontent-%COMP%]{margin-left:auto}.t-link[_ngcontent-%COMP%]{margin:0 1rem}.t-cleaner[_ngcontent-%COMP%]{transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;color:var(--tui-base-06);cursor:pointer;margin-left:auto}.t-cleaner[_ngcontent-%COMP%]:hover{color:var(--tui-base-07)}.t-cleaner_hidden[_ngcontent-%COMP%]{visibility:hidden}.t-anchor-list[_ngcontent-%COMP%]{display:flex;max-height:12.5rem;flex-direction:column}.t-anchor[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;background:none;font-size:inherit;line-height:inherit;min-height:2.75rem;padding:.375rem .5rem;margin:.125rem .5rem;border-radius:var(--tui-radius-m);text-align:left}.t-anchor[_ngcontent-%COMP%]:hover{background:var(--tui-base-02);cursor:pointer}"],changeDetection:0}),(0,v.gn)([(0,it.tuiDefaultProp)()],Ht.prototype,"anchorMode",null)},71115:(jt,Mt,c)=>{c.d(Mt,{lV:()=>v.l,Fu:()=>X,bL:()=>tt.b,X:()=>ft.X});var v=c(45050),l=c(12057),y=c(24751),P=c(50259),g=c(3497),it=c(55908),N=c(74788);let X=(()=>{class ut{}return ut.\u0275fac=function(_t){return new(_t||ut)},ut.\u0275mod=N.oAB({type:ut}),ut.\u0275inj=N.cJS({imports:[[l.ez,y.u5,P.TuiAutoFocusModule,g.TuiButtonModule,g.TuiSvgModule,g.TuiLinkModule,it.TuiInputInlineModule,it.TuiToggleModule,g.TuiScrollbarModule]]}),ut})();var tt=c(98266),ft=c(22613)},98266:(jt,Mt,c)=>{c.d(Mt,{b:()=>l});var v=c(74788);let l=(()=>{class y{transform(g,it,N){return"#"===it?g.filter(X=>X!==N):g}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275pipe=v.Yjl({name:"tuiFilterAnchors",type:y,pure:!0}),y})()},22613:(jt,Mt,c)=>{c.d(Mt,{X:()=>g});var v=c(74788);let g=(()=>{class it{transform(X){return X.length<60?X:`${X.slice(0,Math.max(0,40))}...${X.slice(X.length-10)}`}}return it.\u0275fac=function(X){return new(X||it)},it.\u0275pipe=v.Yjl({name:"tuiShortUrl",type:it,pure:!0}),it})()},96570:(jt,Mt,c)=>{c.d(Mt,{V:()=>ut});var v=c(74788),l=c(50259),y=c(25126),P=c(39953),g=c(12057);const it=function(){return[0,1]};function N(et,_t){if(1&et){const Tt=v.EpF();v.TgZ(0,"div",4),v.NdJ("tuiSizeChange",function(It){return v.CHM(Tt),v.oxw().sizeChange.emit(It)}),v.qZA()}2&et&&v.Q6J("tuiResizer",v.DdM(1,it))}const X=function(et){return[et,0]},tt=function(){return[1,0]},ft=["*"];let ut=(()=>{class et{constructor(){this.autoHeight=!1,this.width=null,this.height=null,this.sizeChange=new v.vpe}get hostWidth(){return(0,l.tuiIsNumber)(this.width)?(0,l.tuiPx)(this.width):this.width}get hostHeight(){return this.autoHeight?null:(0,l.tuiIsNumber)(this.height)?(0,l.tuiPx)(this.height):this.height}}return et.\u0275fac=function(Tt){return new(Tt||et)},et.\u0275cmp=v.Xpm({type:et,selectors:[["tui-editor-resizable"]],hostVars:4,hostBindings:function(Tt,bt){2&Tt&&v.Udp("width",bt.hostWidth)("height",bt.hostHeight)},inputs:{autoHeight:"autoHeight",width:"width",height:"height"},outputs:{sizeChange:"sizeChange"},ngContentSelectors:ft,decls:5,vars:8,consts:[["tuiResizeable","",1,"t-resizable"],[1,"t-handle","t-handle-left-side",3,"tuiResizer","tuiSizeChange"],["class","t-handle t-handle-bottom-side",3,"tuiResizer","tuiSizeChange",4,"ngIf"],[1,"t-handle","t-handle-right-side",3,"tuiResizer","tuiSizeChange"],[1,"t-handle","t-handle-bottom-side",3,"tuiResizer","tuiSizeChange"]],template:function(Tt,bt){1&Tt&&(v.F$t(),v.TgZ(0,"div",0),v.Hsn(1),v.TgZ(2,"div",1),v.NdJ("tuiSizeChange",function(Pt){return bt.sizeChange.emit(Pt)}),v.qZA(),v.YNc(3,N,1,2,"div",2),v.TgZ(4,"div",3),v.NdJ("tuiSizeChange",function(Pt){return bt.sizeChange.emit(Pt)}),v.qZA(),v.qZA()),2&Tt&&(v.ekj("t-resizable-auto-height",bt.autoHeight),v.xp6(2),v.Q6J("tuiResizer",v.VKq(5,X,-1)),v.xp6(1),v.Q6J("ngIf",!bt.autoHeight),v.xp6(1),v.Q6J("tuiResizer",v.DdM(7,tt)))},directives:[y.U,P.L,g.O5],styles:['[_nghost-%COMP%]{position:relative;display:inline-block;box-sizing:border-box}[_nghost-%COMP%]   .t-resizable[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]   .t-resizable-auto-height[_ngcontent-%COMP%]{height:auto!important}[_nghost-%COMP%]   iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}[_nghost-%COMP%]:hover   .t-handle[_ngcontent-%COMP%]:after{opacity:1}.t-handle[_ngcontent-%COMP%]{position:absolute;top:0;display:flex;width:.75rem;cursor:col-resize;justify-content:center;align-items:center;height:100%}.t-handle[_ngcontent-%COMP%]:after{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";width:50%;height:33%;box-sizing:border-box;border-radius:var(--tui-radius-m);background:var(--tui-base-08);border:1px solid var(--tui-base-03);opacity:0}.t-handle-left-side[_ngcontent-%COMP%]{left:0}.t-handle-bottom-side[_ngcontent-%COMP%]{top:unset;bottom:.3125rem;height:.95rem;width:100%}.t-handle-right-side[_ngcontent-%COMP%]{right:0}'],changeDetection:0}),et})()},95110:(jt,Mt,c)=>{c.d(Mt,{_3:()=>it,V_:()=>N.V,Sl:()=>tt});var v=c(40400),l=c(50259),y=c(66682),P=c(46782),g=c(74788);let it=(()=>{class ft extends v.d{constructor(et,_t){super(),this._height=0,this._width=0,(0,y.T)((0,l.tuiTypedFromEvent)(et,"touchend"),(0,l.tuiTypedFromEvent)(et,"mouseup")).pipe((0,P.R)(_t)).subscribe(()=>this.updateAttributes({width:this.width,height:this.height}))}get attrs(){var et;return(null===(et=this.node)||void 0===et?void 0:et.attrs)||{src:""}}get width(){return this._width||this.attrs.width||null}get height(){return this._height||this.attrs.height||null}}return ft.\u0275fac=function(et){return new(et||ft)(g.Y36(Document),g.Y36(l.TuiDestroyService))},ft.\u0275dir=g.lG2({type:ft,features:[g.qOj]}),ft})();var N=c(96570),X=c(12057);let tt=(()=>{class ft{}return ft.\u0275fac=function(et){return new(et||ft)},ft.\u0275mod=g.oAB({type:ft}),ft.\u0275inj=g.cJS({imports:[[X.ez,l.TuiResizeModule,l.TuiResizerModule]]}),ft})()},20179:(jt,Mt,c)=>{c.d(Mt,{D:()=>it});var v=c(12057),l=c(74788),y=c(82113),P=c(50259),g=c(3497);let it=(()=>{class N{constructor(tt,ft,ut,et,_t,Tt){this.elementRef=tt,this.renderer=ft,this.sanitizer=ut,this.tuiSanitizer=et,this.document=_t,this.editor=Tt}set content(tt){this.renderer.setProperty(this.elementRef.nativeElement,"innerHTML",this.tuiSanitizer?this.tuiSanitizer.sanitize(l.q3G.HTML,tt.replace(/colwidth/g,"width")):this.sanitizer.sanitize(l.q3G.HTML,tt))}click(tt){var ft,ut;if(this.editor||!(0,P.tuiIsElement)(tt.target))return;const et=(null===(ut=null===(ft=tt.target)||void 0===ft?void 0:ft.closest("a"))||void 0===ut?void 0:ut.getAttribute("href"))||"";!et.startsWith("#")||(this.document.location.hash=et.replace("#",""),tt.preventDefault())}}return N.\u0275fac=function(tt){return new(tt||N)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.Tiy),l.Y36(g.TUI_SANITIZER,8),l.Y36(v.K0),l.Y36(y.JU,8))},N.\u0275cmp=l.Xpm({type:N,selectors:[["tui-editor-socket"]],hostAttrs:[1,"tui-editor-socket"],hostBindings:function(tt,ft){1&tt&&l.NdJ("click",function(et){return ft.click(et)})},inputs:{content:"content"},decls:0,vars:0,template:function(tt,ft){},styles:['.tui-editor-socket{display:block;margin:0;overflow:hidden;color:var(--tui-text-01);font:var(--tui-font-text-m)}.tui-editor-socket._preview-image img{cursor:pointer}.tui-editor-socket h1,.tui-editor-socket h2,.tui-editor-socket h3,.tui-editor-socket h4,.tui-editor-socket h5,.tui-editor-socket h6{word-break:break-word;line-height:normal}.tui-editor-socket a:not([data-type="jump-anchor"]){color:var(--tui-link);text-decoration:none;outline:none}.tui-editor-socket a:not([data-type="jump-anchor"]):hover{color:var(--tui-link-hover);text-decoration:underline}.tui-editor-socket a:not([data-type="jump-anchor"]):active{color:var(--tui-primary-active)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]{text-decoration:underline;-webkit-text-decoration-color:var(--tui-link);text-decoration-color:var(--tui-link)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:before{content:"#"}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:hover{color:var(--tui-link)}.tui-editor-socket .ProseMirror video,.tui-editor-socket .ProseMirror audio{pointer-events:none}.tui-editor-socket .tableWrapper,.tui-editor-socket .tui-table-wrapper{overflow-x:auto}.tui-editor-socket mark{background:unset;color:inherit}.tui-editor-socket .ProseMirror{min-height:5.375rem;padding:.2rem 1rem;outline:none;white-space:pre-wrap}.tui-editor-socket p:empty:after{content:" ";white-space:pre}.tui-editor-socket p:first-child{margin-top:0}.tui-editor-socket ul,.tui-editor-socket ol{list-style-type:none;margin:1rem 1rem 1rem 1.5rem;padding:0}.tui-editor-socket li{margin:1rem 0}.tui-editor-socket li p{display:inline;margin:0 auto;word-break:break-word}.tui-editor-socket ul li p{display:inline-block}.tui-editor-socket ul>li:before{content:"";display:inline-block;width:.5rem;height:.5rem;border-radius:100%;margin:.5rem .875rem .0625rem -1.375rem;background-color:var(--tui-primary);vertical-align:top;box-sizing:border-box}.tui-editor-socket li ul>li:before{background:none;border:.125rem solid var(--tui-primary)}.tui-editor-socket li ul>li>ul>li:before{background:var(--tui-primary);border-radius:0;width:.375rem;height:.375rem}.tui-editor-socket ol{counter-reset:item}.tui-editor-socket ol>li:before{content:counters(item,".") ".";width:1.5rem;margin:0 .75rem 0 -1.5rem;counter-increment:item;color:var(--tui-base-05);vertical-align:top}.tui-editor-socket pre{white-space:pre-wrap;word-break:break-word;border-radius:.25rem;margin:1rem 0;padding:.75rem 1rem;font-family:Courier,monospace;color:var(--tui-text-02);background:var(--tui-base-02)}.tui-editor-socket code{box-shadow:none}.tui-editor-socket pre+pre{margin-top:-1.8125rem;padding-top:0}.tui-editor-socket blockquote{margin:1.25rem 0 1.25rem 1.5rem;padding-left:1.0625rem;border-left:1px solid var(--tui-base-04)}.tui-editor-socket p{margin:1rem 0}.tui-editor-socket hr{border:none;border-top:1px solid var(--tui-base-03);margin:1rem 0}.tui-editor-socket table{border-collapse:collapse;table-layout:fixed;width:100%;margin:0;overflow:hidden}.tui-editor-socket table td{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word}.tui-editor-socket table th{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word;font-weight:bold;text-align:left;background-color:var(--tui-base-02);min-height:2rem}.tui-editor-socket table .column-resize-handle{position:absolute;right:-2px;top:0;bottom:-2px;width:4px;background-color:#adf;pointer-events:none}.tui-editor-socket table td>*{margin-top:0;margin-bottom:0}.tui-editor-socket table th>*{margin-top:0;margin-bottom:0}.tui-editor-socket .resize-cursor{cursor:ew-resize;cursor:col-resize}.tui-editor-socket table .tableWrapper{overflow-x:auto}.tui-editor-socket .selectedCell:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:var(--tui-selection);pointer-events:none}.tui-editor-socket font[face="Courier New"]{display:inline-block;padding:.25rem .5rem;border-radius:.25rem;background-color:#ecf1f7;word-break:break-word}.tui-editor-socket details{width:100%;border:1px solid var(--tui-base-04);border-radius:var(--tui-radius-l)}.tui-editor-socket summary{display:flex;align-items:center;min-height:3.5rem;width:100%;padding:0 1.25rem;box-sizing:border-box;border-radius:var(--tui-radius-l);pointer-events:none}.tui-editor-socket summary p{min-width:1px;margin:0}.tui-editor-socket summary::-webkit-details-marker{display:none}.tui-editor-socket details[open] summary{border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-editor-socket div[data-type=details-content]{padding:1.25rem;min-height:3rem;border:1px solid var(--tui-base-04);border-width:1px 0 0}.tui-editor-socket .details-wrapper{position:relative;display:flex}.tui-editor-socket .details-arrow{position:absolute;top:1.5rem;right:1.25rem;height:.575rem;width:.575rem;border:1px solid var(--tui-base-06);border-width:0 2px 2px 0;transform:rotate(45deg);transition:var(--tui-duration, .3s);-webkit-appearance:none;-moz-appearance:none;appearance:none;box-sizing:border-box;padding:0;background:none;cursor:pointer}.tui-editor-socket .details-wrapper_rendered .details-arrow{pointer-events:none}.tui-editor-socket .details-wrapper_rendered summary{transition:transform var(--tui-duration, .3s);cursor:pointer;pointer-events:auto}.tui-editor-socket .details-wrapper_rendered summary:hover{background:var(--tui-base-02)}.tui-editor-socket details[open]+.details-arrow{top:1.75rem;transform:rotate(225deg)}.t-editor-placeholder:before{content:attr(data-placeholder);float:left;color:var(--tui-base-05);pointer-events:none;height:0}.tui-group-node{display:flex;flex-direction:row}.tui-group-node:hover>.tui-group-pointer{pointer-events:auto;opacity:1}.tui-group-pointer{opacity:0;min-height:.8125rem;max-height:.8125rem;min-width:.8125rem;max-width:.8125rem;margin:.3125rem .3125rem 0 0;cursor:-webkit-grab;cursor:grab;background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="black" /></svg>\');background-repeat:no-repeat;background-size:contain;background-position:center}[data-mode=onDark] .tui-group-pointer{background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="white" /></svg>\')}\n'],encapsulation:2,changeDetection:0}),N})()},69303:(jt,Mt,c)=>{c.d(Mt,{a:()=>st});var v=c(64762),l=c(12057),y=c(74788),P=c(24751),g=c(17406),it=c(19074),N=c(84614),X=c(14309),tt=c(27863),ft=c(50259),ut=c(79089),et=c(40939),_t=c(2697),Tt=c(17163),bt=c(3881),It=c(1433),Pt=c(9872),Dt=c(4997),ht=c(33250),q=c(26072),F=c(9829),mt=c(82886),j=c(39088),At=c(20179),St=c(74982),Et=c(45050);function Lt(J,Q){if(1&J){const ot=y.EpF();y.TgZ(0,"tui-toolbar",9),y.NdJ("fileAttached",function($t){return y.CHM(ot),y.oxw(2).fileAttached.emit($t)}),y.Hsn(1,1),y.qZA()}if(2&J){const ot=y.oxw(2);y.Q6J("tools",ot.tools)("disabled",!ot.interactive)}}function Ht(J,Q){if(1&J&&(y.TgZ(0,"div",10),y._uU(1),y.qZA()),2&J){const ot=y.oxw(2);y.xp6(1),y.hij(" ",ot.exampleText," ")}}function Kt(J,Q){if(1&J){const ot=y.EpF();y.TgZ(0,"div",11),y.TgZ(1,"tui-editor-socket",12),y.NdJ("valueChange",function($t){return y.CHM(ot),y.oxw(2).onModelChange($t)})("stateChange",function(){return 0}),y.qZA(),y.qZA()}if(2&J){y.oxw();const ot=y.MAs(9),kt=y.oxw();y.Q6J("tuiDropdownSelection",kt.dropdownSelectionHandler)("tuiDropdown",ot),y.xp6(1),y.Q6J("value",kt.value)("editable",kt.interactive)}}function pt(J,Q){if(1&J){const ot=y.EpF();y.TgZ(0,"tui-edit-link",13,14),y.NdJ("addLink",function($t){y.CHM(ot);const Yt=y.MAs(1),ee=y.oxw(2);return Yt.anchorMode?ee.addAnchor($t):ee.addLink($t)})("removeLink",function(){y.CHM(ot);const $t=y.MAs(1),Yt=y.oxw(2);return $t.anchorMode?Yt.removeAnchor():Yt.removeLink()}),y.qZA()}}function B(J,Q){if(1&J){const ot=y.EpF();y.TgZ(0,"div",1),y.NdJ("tuiActiveZoneChange",function($t){return y.CHM(ot),y.oxw().onActiveZone($t)}),y.TgZ(1,"div",2),y.YNc(2,Lt,2,2,"tui-toolbar",3),y.TgZ(3,"div",4),y.Hsn(4),y.qZA(),y.YNc(5,Ht,2,1,"div",5),y.qZA(),y.TgZ(6,"tui-scrollbar",6),y.YNc(7,Kt,2,4,"div",7),y.YNc(8,pt,2,0,"ng-template",null,8,y.W1O),y._UZ(10,"tui-editor-portal-host"),y.qZA(),y.qZA()}if(2&J){const ot=Q.tuiLet,kt=y.oxw();y.Q6J("readOnly",kt.readOnly)("disabled",kt.disabled)("focus",kt.computedFocused)("hover",kt.pseudoHover)("invalid",kt.computedInvalid),y.xp6(2),y.Q6J("ngIf",ot),y.xp6(1),y.ekj("t-placeholder_raised",kt.placeholderRaised),y.xp6(2),y.Q6J("ngIf",kt.hasExampleText),y.xp6(2),y.Q6J("ngIf",ot)}}const rt=["*",[["tools"]]];class st extends ft.AbstractTuiControl{constructor(Q,ot,kt,$t,Yt,ee){super(Q,ot),this.editorLoaded$=kt,this.editorService=$t,this.contentProcessor=Yt,this.documentRef=ee,this.exampleText="",this.tools=it.Db,this.fileAttached=new y.vpe,this.focused=!1,this.isSelectionLink=zt=>this.currentFocusedNodeIsAnchor(zt)&&(0,tt.nC)(zt)}get nativeFocusableElement(){var Q;return this.computedDisabled?null:(null===(Q=this.element)||void 0===Q?void 0:Q.nativeElement)||null}get dropdownSelectionHandler(){return this.focused?this.isSelectionLink:ft.ALWAYS_FALSE_HANDLER}get editor(){return this.editorService.getOriginTiptapEditor()?this.editorService:null}get placeholderRaised(){return this.computedFocused&&!this.readOnly||this.hasValue}get hasExampleText(){return!!this.exampleText&&this.computedFocused&&!this.hasValue&&!this.readOnly}writeValue(Q){var ot;if(Q===this.value)return;const kt=this.contentProcessor(Q||"");super.writeValue(kt),kt!==Q&&(null===(ot=this.control)||void 0===ot||ot.setValue(kt,{onlySelf:!1,emitEvent:!1,emitModelToViewChange:!1,emitViewToModelChange:!1}))}onActiveZone(Q){this.focused=Q,this.updateFocused(Q)}onModelChange(Q){this.updateValue(Q)}addAnchor(Q){var ot;null===(ot=this.editor)||void 0===ot||ot.setAnchor(Q)}removeAnchor(){var Q;null===(Q=this.editor)||void 0===Q||Q.removeAnchor()}addLink(Q){var ot,kt;null===(ot=this.editor)||void 0===ot||ot.selectClosest(),null===(kt=this.editor)||void 0===kt||kt.setLink(Q)}removeLink(){var Q;null===(Q=this.editor)||void 0===Q||Q.unsetLink()}ngOnDestroy(){var Q;null===(Q=this.editor)||void 0===Q||Q.destroy()}getFallbackValue(){return""}currentFocusedNodeIsAnchor(Q){var ot,kt,$t;return!!(null===(kt=null===(ot=Q.startContainer.parentElement)||void 0===ot?void 0:ot.closest("a"))||void 0===kt?void 0:kt.contains((null===($t=this.documentRef.getSelection())||void 0===$t?void 0:$t.focusNode)||null))}get hasValue(){return!!this.value}}st.\u0275fac=function(Q){return new(Q||st)(y.Y36(P.a5,10),y.Y36(y.sBO),y.Y36(X.ZW),y.Y36(N.$3),y.Y36(X.F1),y.Y36(l.K0))},st.\u0275cmp=y.Xpm({type:st,selectors:[["tui-editor"]],viewQuery:function(Q,ot){if(1&Q&&(y.Gf(N.JU,5,y.SBq),y.Gf(g.M6,5)),2&Q){let kt;y.iGM(kt=y.CRH())&&(ot.element=kt.first),y.iGM(kt=y.CRH())&&(ot.toolbar=kt.first)}},inputs:{exampleText:"exampleText",tools:"tools"},outputs:{fileAttached:"fileAttached"},features:[y._Bn([(0,ft.tuiAsFocusableItemAccessor)(st),ut.m]),y.qOj],ngContentSelectors:["*","tools"],decls:2,vars:3,consts:[["tuiWrapper","","appearance","textfield","class","t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange",4,"tuiLet"],["tuiWrapper","","appearance","textfield",1,"t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange"],[1,"t-toolbar-wrapper"],[3,"tools","disabled","fileAttached",4,"ngIf"],[1,"t-placeholder"],["class","t-example-text",4,"ngIf"],["tuiEditorPortal","",1,"t-scrollbar"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown",4,"ngIf"],["dropdown",""],[3,"tools","disabled","fileAttached"],[1,"t-example-text"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown"],["tuiTiptapEditor","","spellcheck","false",1,"tui-editor-socket",3,"value","editable","valueChange","stateChange"],[3,"addLink","removeLink"],["link",""]],template:function(Q,ot){1&Q&&(y.F$t(rt),y.YNc(0,B,11,10,"div",0),y.ALo(1,"async")),2&Q&&y.Q6J("tuiLet",y.lcZ(1,1,ot.editorLoaded$))},directives:[et.L,_t.o,Tt.e,l.O5,bt.I,It.A,Pt.d,Dt.M,ht.Ek,q.t,F.V,mt.A,j.y,At.D,St.J,Et.l],pipes:[l.Ov],styles:["[_nghost-%COMP%]{position:relative;z-index:0;display:block;font:var(--tui-font-text-m);border-radius:var(--tui-radius-m)}.t-wrapper[_ngcontent-%COMP%]{display:flex;max-height:inherit;min-height:10rem;cursor:text;overflow:hidden;flex-direction:column;border-radius:inherit}.t-placeholder[_ngcontent-%COMP%]{transition-property:transform,font-size,color,letter-spacing;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;font:var(--tui-font-text-s);color:var(--tui-text-01);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:var(--tui-text-02);pointer-events:none;will-change:transform;transform:translateY(0);position:absolute;left:1rem;margin-top:1rem;width:95%;font-size:.9375rem}.t-placeholder_raised[_ngcontent-%COMP%]{transform:translateY(-.625rem)}[data-size=m][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font:var(--tui-font-text-xs);transform:translateY(-.5rem);letter-spacing:.025rem}._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], ._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill)}[data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], [data-mode=onDark]._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill-night)}._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-03)}[data-size=l][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{font-size:.9375rem}[data-size=l][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font-size:.8156rem}[data-size=m]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01)}[data-mode=onDark][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}[data-size=m][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l][data-mode=onDark]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}@supports (-webkit-hyphens: none){.t-placeholder[_ngcontent-%COMP%]{will-change:unset;transition-property:transform,color,letter-spacing}}.t-placeholder_raised[_ngcontent-%COMP%]{width:110%}.t-example-text[_ngcontent-%COMP%]{position:absolute;left:1rem;margin-top:1.6rem;color:var(--tui-base-06);letter-spacing:normal;text-transform:none}.t-example-text_light[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}.t-example-text_dark[_ngcontent-%COMP%]{color:var(--tui-text-03)}.t-scrollbar[_ngcontent-%COMP%]{display:flex;max-height:inherit;border-top:1.625rem solid transparent;border-bottom:1px solid transparent;box-sizing:border-box}"],changeDetection:0}),(0,v.gn)([(0,ft.tuiDefaultProp)()],st.prototype,"exampleText",void 0),(0,v.gn)([(0,ft.tuiDefaultProp)()],st.prototype,"tools",void 0)},79089:(jt,Mt,c)=>{c.d(Mt,{m:()=>ft});var v=c(74788),l=c(84614),y=c(14309),P=c(82298),g=c(9112),it=c(15257),N=c(88002),X=c(47349),tt=c(73825);const ft=[{provide:y.F4,deps:[y.Wf],useFactory:ut=>{const et=new P.t(1);return Promise.all(ut).then(_t=>et.next(_t)),et}},{provide:y.Y1,deps:[v.Qsj],useFactory:ut=>ut.createElement("div")},{provide:y.ZW,deps:[y.Y1,y.F4,y.bG],useFactory:(ut,et,_t)=>(0,g.aj)([_t,et]).pipe((0,it.q)(1),(0,N.U)(([Tt,bt])=>new Tt({element:ut,extensions:bt})),(0,X.d)({bufferSize:1,refCount:!0}))},l.$3,tt.Y]},9872:(jt,Mt,c)=>{c.d(Mt,{d:()=>y});var v=c(50259),l=c(74788);let y=(()=>{class P extends v.AbstractTuiPortalHostComponent{}return P.\u0275fac=function(){let g;return function(N){return(g||(g=l.n5z(P)))(N||P)}}(),P.\u0275cmp=l.Xpm({type:P,selectors:[["tui-editor-portal-host"]],features:[l._Bn([{provide:v.AbstractTuiPortalService,useExisting:v.TuiDropdownPortalService},{provide:v.AbstractTuiPortalHostComponent,useExisting:P}]),l.qOj],decls:2,vars:0,consts:[["viewContainer",""]],template:function(it,N){1&it&&l.GkF(0,null,0)},styles:["[_nghost-%COMP%]{position:relative;z-index:1;display:block;height:100%}"],changeDetection:0}),P})()},1433:(jt,Mt,c)=>{c.d(Mt,{A:()=>g});var v=c(74788),l=c(50259),y=c(3497),P=c(73825);let g=(()=>{class it extends y.TuiRectAccessor{constructor(X){super(),this.elementRef=X,this.type="viewport"}getClientRect(){return this.elementRef.nativeElement.getBoundingClientRect()}}return it.\u0275fac=function(X){return new(X||it)(v.Y36(v.SBq))},it.\u0275dir=v.lG2({type:it,selectors:[["","tuiEditorPortal",""]],features:[v._Bn([{provide:l.TuiDropdownPortalService,useExisting:P.Y},(0,y.tuiAsViewport)(it)]),v.qOj]}),it})()},73825:(jt,Mt,c)=>{c.d(Mt,{Y:()=>y});var v=c(50259),l=c(74788);let y=(()=>{class P extends v.AbstractTuiPortalService{}return P.\u0275fac=function(){let g;return function(N){return(g||(g=l.n5z(P)))(N||P)}}(),P.\u0275prov=l.Yz7({token:P,factory:P.\u0275fac}),P})()},19769:(jt,Mt,c)=>{c.d(Mt,{j:()=>Pt});var v=c(64762),l=c(74788),y=c(24751),P=c(91211),g=c(27863),it=c(50259),N=c(3497),X=c(62939),tt=c(63060),ft=c(62733),ut=c(3729),et=c(23999),_t=c(17163);function Tt(Dt,ht){if(1&Dt&&l._UZ(0,"div",4),2&Dt){const q=l.oxw();l.Udp("background",q.background)}}function bt(Dt,ht){if(1&Dt){const q=l.EpF();l.TgZ(0,"tui-color-selector",5),l.NdJ("colorChange",function(mt){return l.CHM(q),l.oxw().onValueChange(mt)}),l.qZA()}if(2&Dt){const q=ht.$implicit,F=l.oxw();l.Q6J("tuiActiveZoneParent",q)("colors",F.colors)("color",F.value)}}class Pt extends it.AbstractTuiControl{constructor(ht,q,F){super(ht,q),this.domSanitizer=F,this.colors=new Map,this.open=!1}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return!!this.dropdown&&this.dropdown.focused}get background(){return this.sanitize(this.value,this.domSanitizer)}onClick(){this.open=!this.open}onValueChange(ht){this.updateValue(ht)}onFocused(ht){this.updateFocused(ht)}getFallbackValue(){return"#000000"}sanitize(ht,q){return ht.startsWith("linear-gradient(")?q.bypassSecurityTrustStyle((0,g.CH)((0,g._N)((0,g.U5)(ht)))):ht}}Pt.\u0275fac=function(ht){return new(ht||Pt)(l.Y36(y.a5,10),l.Y36(l.sBO),l.Y36(P.H7))},Pt.\u0275cmp=l.Xpm({type:Pt,selectors:[["tui-input-color"]],viewQuery:function(ht,q){if(1&ht&&(l.Gf(N.TuiPrimitiveTextfieldComponent,5),l.Gf(N.TuiHostedDropdownComponent,5)),2&ht){let F;l.iGM(F=l.CRH())&&(q.textfield=F.first),l.iGM(F=l.CRH())&&(q.dropdown=F.first)}},hostBindings:function(ht,q){1&ht&&l.NdJ("click",function(){return q.onClick()})},inputs:{colors:"colors"},features:[l._Bn([],[(0,N.tuiDropdownOptionsProvider)({maxHeight:600})]),l.qOj],ngContentSelectors:["*"],decls:7,vars:12,consts:[[1,"t-wrapper",3,"content","open","openChange"],[1,"t-textfield",3,"tuiTextfieldIconLeft","pseudoFocus","pseudoHover","pseudoActive","invalid","focusable","nativeId","disabled","readOnly","value","valueChange","focusedChange"],["color",""],["picker",""],[1,"t-color"],[3,"tuiActiveZoneParent","colors","color","colorChange"]],template:function(ht,q){if(1&ht&&(l.F$t(),l.TgZ(0,"tui-hosted-dropdown",0),l.NdJ("openChange",function(mt){return q.open=mt}),l.TgZ(1,"tui-primitive-textfield",1),l.NdJ("valueChange",function(mt){return q.onValueChange(mt)})("focusedChange",function(mt){return q.onFocused(mt)}),l.Hsn(2),l.qZA(),l.qZA(),l.YNc(3,Tt,1,2,"ng-template",null,2,l.W1O),l.YNc(5,bt,1,3,"ng-template",null,3,l.W1O)),2&ht){const F=l.MAs(4),mt=l.MAs(6);l.Q6J("content",mt)("open",q.open),l.xp6(1),l.Q6J("tuiTextfieldIconLeft",F)("pseudoFocus",q.computedFocused)("pseudoHover",q.pseudoHover)("pseudoActive",q.pseudoActive)("invalid",q.computedInvalid)("focusable",q.focusable)("nativeId",q.nativeId)("disabled",q.disabled)("readOnly",q.readOnly)("value",q.value)}},directives:[X.o,tt.y,ft.B,ut.aR,et.s,_t.e],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-wrapper[_ngcontent-%COMP%]{display:flex;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-color[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-03-dark);border-radius:.125rem}"],changeDetection:0}),(0,v.gn)([(0,it.tuiDefaultProp)()],Pt.prototype,"colors",void 0),(0,v.gn)([it.tuiPure],Pt.prototype,"sanitize",null)},37924:(jt,Mt,c)=>{c.d(Mt,{X:()=>Dt});var v=c(84614),l=c(14309),y=c(9112),P=c(88002),g=c(74788),it=c(12057),N=c(40939),X=c(62939),tt=c(76189),ft=c(219),ut=c(67446),et=c(29070),_t=c(54255),Tt=c(15491);function bt(ht,q){if(1&ht){const F=g.EpF();g.TgZ(0,"div",6),g.TgZ(1,"button",7),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.onAlign("left")}),g.qZA(),g.TgZ(2,"button",8),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.onAlign("center")}),g.qZA(),g.TgZ(3,"button",9),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.onAlign("right")}),g.qZA(),g.TgZ(4,"button",10),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.onAlign("justify")}),g.qZA(),g.qZA()}if(2&ht){const F=g.oxw().tuiLet,mt=g.oxw().ngIf;g.xp6(1),g.Q6J("pseudoActive",!(null==F||!F.left))("tuiHint",mt.justifyLeft),g.xp6(1),g.Q6J("pseudoActive",!(null==F||!F.center))("tuiHint",mt.justifyCenter),g.xp6(1),g.Q6J("pseudoActive",!(null==F||!F.right))("tuiHint",mt.justifyRight),g.xp6(1),g.Q6J("pseudoActive",!(null==F||!F.justify))("tuiHint",mt.justifyFull)}}function It(ht,q){if(1&ht&&(g.TgZ(0,"tui-hosted-dropdown",2,3),g._UZ(2,"button",4),g.YNc(3,bt,5,8,"ng-template",null,5,g.W1O),g.qZA()),2&ht){const F=g.MAs(1),mt=g.MAs(4),j=g.oxw().ngIf;g.Q6J("content",mt),g.xp6(2),g.Q6J("tuiHint",j.justify)("pseudoActive",F.open)("focusable",F.open)}}function Pt(ht,q){if(1&ht&&(g.ynx(0),g.YNc(1,It,5,4,"tui-hosted-dropdown",1),g.ALo(2,"async"),g.BQk()),2&ht){const F=g.oxw();g.xp6(1),g.Q6J("tuiLet",g.lcZ(2,1,F.alignState$))}}let Dt=(()=>{class ht{constructor(F,mt){this.editor=F,this.texts$=mt,this.alignState$=(0,y.aj)([this.editor.isActive$({textAlign:"left"}),this.editor.isActive$({textAlign:"right"}),this.editor.isActive$({textAlign:"center"}),this.editor.isActive$({textAlign:"justify"})]).pipe((0,P.U)(([j,At,St,Et])=>({left:j,right:At,center:St,justify:Et})))}}return ht.\u0275fac=function(F){return new(F||ht)(g.Y36(v.$3),g.Y36(l.rf))},ht.\u0275cmp=g.Xpm({type:ht,selectors:[["tui-align-content"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["align",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["alignDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignCenterLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignRightLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignJustifyLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"]],template:function(F,mt){1&F&&(g.YNc(0,Pt,3,3,"ng-container",0),g.ALo(1,"async")),2&F&&g.Q6J("ngIf",g.lcZ(1,1,mt.texts$))},directives:[it.O5,N.L,X.o,tt.v,ft.$,ut.D,et.x,_t.t,Tt.D],pipes:[it.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),ht})()},15587:(jt,Mt,c)=>{c.d(Mt,{T:()=>Dt});var v=c(84614),l=c(14309),y=c(88002),P=c(87519),g=c(74788),it=c(62939),N=c(76189),X=c(219),tt=c(67446),ft=c(29070),ut=c(54255),et=c(15491),_t=c(20933),Tt=c(12057),bt=c(35065);function It(ht,q){if(1&ht){const F=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){const At=g.CHM(F).index;return g.oxw(2).onCode(!!At)}),g._uU(1),g.qZA()}if(2&ht){const F=q.$implicit;g.xp6(1),g.hij(" ",F," ")}}function Pt(ht,q){if(1&ht&&(g.TgZ(0,"tui-data-list"),g.YNc(1,It,2,1,"button",4),g.ALo(2,"async"),g.qZA()),2&ht){const F=g.oxw();g.xp6(1),g.Q6J("ngForOf",g.lcZ(2,1,F.codeOptionsTexts$))}}let Dt=(()=>{class ht{constructor(F,mt,j){this.editor=F,this.texts$=mt,this.codeOptionsTexts$=j,this.hintText$=this.texts$.pipe((0,y.U)(At=>At.code)),this.insideCode$=this.editor.stateChange$.pipe((0,y.U)(()=>this.editor.isActive("code")||this.editor.isActive("codeBlock")),(0,P.x)())}onCode(F){F?this.editor.toggleCodeBlock():this.editor.toggleCode()}}return ht.\u0275fac=function(F){return new(F||ht)(g.Y36(v.$3),g.Y36(l.rf),g.Y36(l.Mr))},ht.\u0275cmp=g.Xpm({type:ht,selectors:[["tui-code"]],decls:7,vars:8,consts:[[3,"content"],["codes",""],["tuiIconButton","","type","button","size","s","icon","tuiIconCodeLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["codesDropdown",""],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(F,mt){if(1&F&&(g.TgZ(0,"tui-hosted-dropdown",0,1),g._UZ(2,"button",2),g.ALo(3,"async"),g.ALo(4,"async"),g.YNc(5,Pt,3,3,"ng-template",null,3,g.W1O),g.qZA()),2&F){const j=g.MAs(1),At=g.MAs(6);g.Q6J("content",At),g.xp6(2),g.Q6J("tuiHint",g.lcZ(3,4,mt.hintText$))("pseudoActive",j.open||g.lcZ(4,6,mt.insideCode$))("focusable",j.open)}},directives:[it.o,N.v,X.$,tt.D,ft.x,ut.t,et.D,_t.q,Tt.sg,bt.v],pipes:[Tt.Ov],encapsulation:2,changeDetection:0}),ht})()},18832:(jt,Mt,c)=>{c.d(Mt,{U:()=>Tt});var v=c(84614),l=c(14309),y=c(88002),P=c(87519),g=c(74788),it=c(12057),N=c(76189),X=c(219),tt=c(67446),ft=c(29070),ut=c(54255),et=c(15491);function _t(bt,It){if(1&bt){const Pt=g.EpF();g.TgZ(0,"button",1),g.NdJ("click",function(){return g.CHM(Pt),g.oxw().removeDetails()}),g.ALo(1,"async"),g.qZA()}if(2&bt){const Pt=It.ngIf,Dt=g.oxw();g.Q6J("tuiHint",Pt.removeDetails)("focusable",!1)("disabled",!!g.lcZ(1,3,Dt.disabled$))}}let Tt=(()=>{class bt{constructor(Pt,Dt){this.editor=Pt,this.texts$=Dt,this.disabled$=this.editor.stateChange$.pipe((0,y.U)(()=>!this.editor.isActive("details")),(0,P.x)())}removeDetails(){this.editor.removeDetails()}}return bt.\u0275fac=function(Pt){return new(Pt||bt)(g.Y36(v.$3),g.Y36(l.rf))},bt.\u0275cmp=g.Xpm({type:bt,selectors:[["tui-details-remove"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled","click"]],template:function(Pt,Dt){1&Pt&&(g.YNc(0,_t,2,5,"button",0),g.ALo(1,"async")),2&Pt&&g.Q6J("ngIf",g.lcZ(1,1,Dt.texts$))},directives:[it.O5,N.v,X.$,tt.D,ft.x,ut.t,et.D],pipes:[it.Ov],encapsulation:2,changeDetection:0}),bt})()},50237:(jt,Mt,c)=>{c.d(Mt,{y:()=>et});var v=c(84614),l=c(14309),y=c(74788),P=c(12057),g=c(76189),it=c(219),N=c(67446),X=c(29070),tt=c(54255),ft=c(15491);function ut(_t,Tt){if(1&_t){const bt=y.EpF();y.TgZ(0,"button",1),y.NdJ("click",function(){return y.CHM(bt),y.oxw().setDetails()}),y.qZA()}2&_t&&y.Q6J("tuiHint",Tt.ngIf.setDetails)("focusable",!1)}let et=(()=>{class _t{constructor(bt,It){this.editor=bt,this.texts$=It}setDetails(){this.editor.setDetails()}}return _t.\u0275fac=function(bt){return new(bt||_t)(y.Y36(v.$3),y.Y36(l.rf))},_t.\u0275cmp=y.Xpm({type:_t,selectors:[["tui-details"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","click"]],template:function(bt,It){1&bt&&(y.YNc(0,ut,1,2,"button",0),y.ALo(1,"async")),2&bt&&y.Q6J("ngIf",y.lcZ(1,1,It.texts$))},directives:[P.O5,g.v,it.$,N.D,X.x,tt.t,ft.D],pipes:[P.Ov],encapsulation:2,changeDetection:0}),_t})()},84985:(jt,Mt,c)=>{c.d(Mt,{m:()=>ht});var v=c(84614),l=c(14309),y=c(50259),P=c(88002),g=c(74788),it=c(62939),N=c(76189),X=c(219),tt=c(67446),ft=c(29070),ut=c(54255),et=c(15491),_t=c(20933),Tt=c(12057),bt=c(35065);const It=function(){return{}};function Pt(q,F){if(1&q){const mt=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){const St=g.CHM(mt).$implicit;return g.oxw(2).setFontOption(St)}),g.ALo(1,"lowercase"),g._uU(2),g.qZA()}if(2&q){const mt=F.$implicit;g.Udp("font-family",mt.family)("font-size",mt.px,"px")("font-weight",mt.weight),g.Q6J("ngClass",(null==mt?null:mt.ngClass)||g.DdM(11,It)),g.uIk("automation-id","tui_font__"+g.lcZ(1,9,mt.name||"")),g.xp6(2),g.hij(" ",mt.name," ")}}function Dt(q,F){if(1&q&&(g.TgZ(0,"tui-data-list"),g.YNc(1,Pt,3,12,"button",4),g.ALo(2,"async"),g.qZA()),2&q){const mt=g.oxw();g.xp6(1),g.Q6J("ngForOf",g.lcZ(2,1,mt.fontsOptions$))}}let ht=(()=>{class q{constructor(mt,j,At,St){this.options=mt,this.editor=j,this.texts$=At,this.fontOptionsTexts$=St,this.fontsOptions$=this.fontOptionsTexts$.pipe((0,P.U)(Et=>this.options.fontOptions(Et))),this.fontText$=this.texts$.pipe((0,P.U)(Et=>Et.font))}onClick({headingLevel:mt,px:j}){this.setFontOption({headingLevel:mt,px:j})}setFontOption({headingLevel:mt,px:j}){this.clearPreviousTextStyles(),mt?this.editor.setHeading(mt):this.editor.setParagraph({fontSize:(0,y.tuiPx)(j||0)})}clearPreviousTextStyles(){this.editor.removeEmptyTextStyle(),this.editor.toggleMark("textStyle")}}return q.\u0275fac=function(mt){return new(mt||q)(g.Y36(l.mJ),g.Y36(v.$3),g.Y36(l.rf),g.Y36(l.UN))},q.\u0275cmp=g.Xpm({type:q,selectors:[["tui-font-size"]],decls:6,vars:6,consts:[[3,"content"],["fonts",""],["tuiIconButton","","type","button","size","s","appearance","icon","icon","tuiIconFontLarge","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["fontsDropdown",""],["tuiOption","",3,"fontFamily","fontSize","fontWeight","ngClass","click",4,"ngFor","ngForOf"],["tuiOption","",3,"ngClass","click"]],template:function(mt,j){if(1&mt&&(g.TgZ(0,"tui-hosted-dropdown",0,1),g._UZ(2,"button",2),g.ALo(3,"async"),g.YNc(4,Dt,3,3,"ng-template",null,3,g.W1O),g.qZA()),2&mt){const At=g.MAs(1),St=g.MAs(5);g.Q6J("content",St),g.xp6(2),g.Q6J("tuiHint",g.lcZ(3,4,j.fontText$))("pseudoActive",At.open)("focusable",At.open)}},directives:[it.o,N.v,X.$,tt.D,ft.x,ut.t,et.D,_t.q,Tt.sg,bt.v,Tt.mk],pipes:[Tt.Ov,Tt.i8],encapsulation:2,changeDetection:0}),q})()},62976:(jt,Mt,c)=>{c.d(Mt,{h:()=>j});var v=c(19074),l=c(84614),y=c(48699),P=c(14309),g=c(9112),it=c(88002),N=c(74788),X=c(12057),tt=c(62939),ft=c(76189),ut=c(219),et=c(67446),_t=c(29070),Tt=c(54255),bt=c(15491);function It(At,St){if(1&At){const Et=N.EpF();N.TgZ(0,"button",11),N.NdJ("click",function(){return N.CHM(Et),N.oxw(4).editor.toggleBold()}),N.qZA()}if(2&At){const Et=N.oxw(2).ngIf,Lt=N.oxw().ngIf;N.Q6J("tuiHint",Lt.bold)("pseudoActive",Et.bold)}}function Pt(At,St){if(1&At){const Et=N.EpF();N.TgZ(0,"button",12),N.NdJ("click",function(){return N.CHM(Et),N.oxw(4).editor.toggleItalic()}),N.qZA()}if(2&At){const Et=N.oxw(2).ngIf,Lt=N.oxw().ngIf;N.Q6J("tuiHint",Lt.italic)("pseudoActive",Et.italic)}}function Dt(At,St){if(1&At){const Et=N.EpF();N.TgZ(0,"button",13),N.NdJ("click",function(){return N.CHM(Et),N.oxw(4).editor.toggleUnderline()}),N.qZA()}if(2&At){const Et=N.oxw(2).ngIf,Lt=N.oxw().ngIf;N.Q6J("tuiHint",Lt.underline)("pseudoActive",Et.underline)}}function ht(At,St){if(1&At){const Et=N.EpF();N.TgZ(0,"button",14),N.NdJ("click",function(){return N.CHM(Et),N.oxw(4).editor.toggleStrike()}),N.qZA()}if(2&At){const Et=N.oxw(2).ngIf,Lt=N.oxw().ngIf;N.Q6J("tuiHint",Lt.strikeThrough)("pseudoActive",Et.strike)}}function q(At,St){if(1&At&&(N.TgZ(0,"div",6),N.YNc(1,It,1,2,"button",7),N.YNc(2,Pt,1,2,"button",8),N.YNc(3,Dt,1,2,"button",9),N.YNc(4,ht,1,2,"button",10),N.qZA()),2&At){const Et=N.oxw(3);N.xp6(1),N.Q6J("ngIf",Et.isEnabled(Et.TuiEditorTool.Bold)),N.xp6(1),N.Q6J("ngIf",Et.isEnabled(Et.TuiEditorTool.Italic)),N.xp6(1),N.Q6J("ngIf",Et.isEnabled(Et.TuiEditorTool.Underline)),N.xp6(1),N.Q6J("ngIf",Et.isEnabled(Et.TuiEditorTool.Strikethrough))}}function F(At,St){if(1&At&&(N.TgZ(0,"tui-hosted-dropdown",2,3),N._UZ(2,"button",4),N.YNc(3,q,5,4,"ng-template",null,5,N.W1O),N.qZA()),2&At){const Et=St.ngIf,Lt=N.MAs(1),Ht=N.MAs(4),Kt=N.oxw().ngIf;N.Q6J("content",Ht),N.xp6(2),N.Q6J("tuiHint",Kt.fontStyle)("pseudoActive",Lt.open||Et.bold||Et.italic||Et.underline||Et.strike)("focusable",Lt.open)}}function mt(At,St){if(1&At&&(N.ynx(0),N.YNc(1,F,5,4,"tui-hosted-dropdown",1),N.ALo(2,"async"),N.BQk()),2&At){const Et=N.oxw();N.xp6(1),N.Q6J("ngIf",N.lcZ(2,1,Et.fontStyleState$))}}let j=(()=>{class At{constructor(Et,Lt){this.editor=Et,this.texts$=Lt,this.toolsSet=new Set(v.Db),this.TuiEditorTool=y._,this.fontStyleState$=(0,g.aj)([this.editor.isActive$("bold"),this.editor.isActive$("italic"),this.editor.isActive$("underline"),this.editor.isActive$("strike")]).pipe((0,it.U)(([Ht,Kt,pt,B])=>({bold:Ht,italic:Kt,underline:pt,strike:B})))}set enabledTools(Et){this.toolsSet=new Set(Et)}isEnabled(Et){return this.toolsSet.has(Et)}}return At.\u0275fac=function(Et){return new(Et||At)(N.Y36(l.$3),N.Y36(P.rf))},At.\u0275cmp=N.Xpm({type:At,selectors:[["tui-font-style"]],inputs:{enabledTools:"enabledTools"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"ngIf"],[3,"content"],["format",""],["tuiIconButton","","type","button","size","s","icon","tuiIconFormatLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__font-style-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["formatDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"]],template:function(Et,Lt){1&Et&&(N.YNc(0,mt,3,3,"ng-container",0),N.ALo(1,"async")),2&Et&&N.Q6J("ngIf",N.lcZ(1,1,Lt.texts$))},directives:[X.O5,tt.o,ft.v,ut.$,et.D,_t.x,Tt.t,bt.D],pipes:[X.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),At})()},19762:(jt,Mt,c)=>{c.d(Mt,{d:()=>_t});var v=c(84614),l=c(14309),y=c(88002),P=c(87519),g=c(74788),it=c(76189),N=c(219),X=c(67446),tt=c(29070),ft=c(54255),ut=c(15491),et=c(12057);let _t=(()=>{class Tt{constructor(It,Pt){this.editor=It,this.texts$=Pt,this.insertGroupText$=this.texts$.pipe((0,y.U)(Dt=>Dt.insertGroup)),this.removeGroupText$=this.texts$.pipe((0,y.U)(Dt=>Dt.removeGroup)),this.disabled$=this.editor.stateChange$.pipe((0,y.U)(()=>!this.editor.isActive("group")),(0,P.x)())}addGroup(){this.editor.setGroup()}removeGroup(){this.editor.removeGroup()}}return Tt.\u0275fac=function(It){return new(It||Tt)(g.Y36(v.$3),g.Y36(l.rf))},Tt.\u0275cmp=g.Xpm({type:Tt,selectors:[["tui-editor-group-tool"]],decls:5,vars:11,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconPlusLarge","appearance","icon","tuiHintDescribe","",3,"focusable","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconCloseLarge","appearance","icon","tuiHintDescribe","",3,"focusable","disabled","tuiHint","click"]],template:function(It,Pt){1&It&&(g.TgZ(0,"button",0),g.NdJ("click",function(){return Pt.addGroup()}),g.ALo(1,"async"),g.qZA(),g.TgZ(2,"button",1),g.NdJ("click",function(){return Pt.removeGroup()}),g.ALo(3,"async"),g.ALo(4,"async"),g.qZA()),2&It&&(g.Q6J("focusable",!1)("tuiHint",g.lcZ(1,5,Pt.insertGroupText$)),g.xp6(2),g.Q6J("focusable",!1)("disabled",!!g.lcZ(3,7,Pt.disabled$))("tuiHint",g.lcZ(4,9,Pt.removeGroupText$)))},directives:[it.v,N.$,X.D,tt.x,ft.t,ut.D],pipes:[et.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),Tt})()},7416:(jt,Mt,c)=>{c.d(Mt,{U:()=>j});var v=c(64762),l=c(84614),y=c(14309),P=c(50259),g=c(88002),it=c(87519),N=c(74788),X=c(40939),tt=c(62939),ft=c(33250),ut=c(76189),et=c(219),_t=c(67446),Tt=c(29070),bt=c(54255),It=c(15491),Pt=c(12057),Dt=c(5451),ht=c(17163);function q(At,St){if(1&At&&N._UZ(0,"div",6),2&At){const Et=N.oxw().tuiLet;N.Udp("background",Et)}}function F(At,St){if(1&At){const Et=N.EpF();N.TgZ(0,"tui-palette",7),N.NdJ("selectedColor",function(Ht){return N.CHM(Et),N.oxw(2).editor.setBackgroundColor(Ht)}),N.qZA()}if(2&At){const Et=St.$implicit,Lt=N.oxw(2);N.Q6J("tuiActiveZoneParent",Et)("colors",Lt.colors)}}function mt(At,St){if(1&At&&(N.TgZ(0,"tui-hosted-dropdown",1,2),N._UZ(2,"button",3),N.ALo(3,"async"),N.YNc(4,q,1,2,"div",4),N.YNc(5,F,1,2,"ng-template",null,5,N.W1O),N.qZA()),2&At){const Et=St.tuiLet,Lt=N.MAs(1),Ht=N.MAs(6),Kt=N.oxw();N.Q6J("content",Ht)("tuiDropdownMaxHeight",999),N.xp6(2),N.Q6J("tuiHint",N.lcZ(3,6,Kt.backColorText$))("pseudoActive",Lt.open)("focusable",Lt.open),N.xp6(2),N.Q6J("ngIf",!Kt.isBlankColor(Et||""))}}class j{constructor(St,Et,Lt){this.editor=St,this.texts$=Et,this.defaultOptions=Lt,this.colors=this.defaultOptions.colors,this.backgroundColor$=this.editor.stateChange$.pipe((0,g.U)(()=>this.editor.getBackgroundColor()||this.defaultOptions.blankColor),(0,it.x)()),this.backColorText$=this.texts$.pipe((0,g.U)(Ht=>Ht.backColor))}isBlankColor(St){return St===this.defaultOptions.blankColor}}j.\u0275fac=function(St){return new(St||j)(N.Y36(l.$3),N.Y36(y.rf),N.Y36(y.mJ))},j.\u0275cmp=N.Xpm({type:j,selectors:[["tui-highlight-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["hilite",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconHiliteLarge","automation-id","toolbar__hilite-button","tuiHintDescribe","",1,"t-tool",3,"tuiHint","pseudoActive","focusable"],["class","t-plate",3,"background",4,"ngIf"],["hiliteDropdown",""],[1,"t-plate"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(St,Et){1&St&&(N.YNc(0,mt,7,8,"tui-hosted-dropdown",0),N.ALo(1,"async")),2&St&&N.Q6J("tuiLet",N.lcZ(1,1,Et.backgroundColor$))},directives:[X.L,tt.o,ft.Ek,ut.v,et.$,_t.D,Tt.x,bt.t,It.D,Pt.O5,Dt.R,ht.e],pipes:[Pt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,v.gn)([(0,P.tuiDefaultProp)()],j.prototype,"colors",void 0)},93252:(jt,Mt,c)=>{c.d(Mt,{Xp:()=>v.X,pu:()=>it,Tf:()=>N.T,P_:()=>X,yj:()=>tt.y,y9:()=>ft,Un:()=>ut.U,dN:()=>It.d,jP:()=>Pt,mK:()=>et.m,p7:()=>_t,hr:()=>Tt.h,Zv:()=>bt,UT:()=>Dt.U,XC:()=>q,w2:()=>F.w,Ur:()=>mt,pH:()=>j.p,mp:()=>At,iN:()=>B.i,lT:()=>St.l,iA:()=>Ht,YH:()=>Kt.Y,er:()=>pt,_I:()=>B._,__:()=>rt,M8:()=>Et.M,kU:()=>Lt,G0:()=>at.G,_t:()=>st});var v=c(37924),l=c(12057),y=c(50259),P=c(3497),g=c(74788);let it=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,P.TuiHintModule,y.TuiLetModule]]}),J})();var N=c(15587);let X=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,P.TuiHintModule,P.TuiDataListModule]]}),J})();var tt=c(50237);let ft=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiButtonModule,P.TuiHintModule]]}),J})();var ut=c(18832),et=c(84985);let _t=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,P.TuiHintModule,P.TuiDataListModule]]}),J})();var Tt=c(62976);let bt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,P.TuiHintModule]]}),J})();var It=c(19762);let Pt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiButtonModule,P.TuiHintModule]]}),J})();var Dt=c(7416),ht=c(27050);let q=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,ht.VM,P.TuiHintModule,P.TuiDropdownModule,y.TuiActiveZoneModule,y.TuiLetModule]]}),J})();var F=c(13441);let mt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiButtonModule,P.TuiHintModule,y.TuiLetModule]]}),J})();var j=c(95558);let At=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,ht.VM,P.TuiButtonModule,P.TuiHintModule,y.TuiActiveZoneModule,P.TuiDropdownModule,y.TuiLetModule]]}),J})();var St=c(28962),Et=c(74549);let Lt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,y.TuiRepeatTimesModule]]}),J})(),Ht=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiDropdownModule,P.TuiButtonModule,P.TuiHintModule,Lt]]}),J})();var Kt=c(76965);let pt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiButtonModule,P.TuiHintModule,y.TuiLetModule]]}),J})();var B=c(22063);let rt=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiHostedDropdownModule,P.TuiHintModule,P.TuiButtonModule,P.TuiDataListModule,y.TuiLetModule]]}),J})();var at=c(10528);let st=(()=>{class J{}return J.\u0275fac=function(ot){return new(ot||J)},J.\u0275mod=g.oAB({type:J}),J.\u0275inj=g.cJS({imports:[[l.ez,P.TuiButtonModule,P.TuiHostedDropdownModule,P.TuiDropdownModule,P.TuiHintModule,ht.VM,y.TuiActiveZoneModule,y.TuiLetModule]]}),J})()},13441:(jt,Mt,c)=>{c.d(Mt,{w:()=>Dt});var v=c(84614),l=c(14309),y=c(9112),P=c(88002),g=c(74788),it=c(12057),N=c(40939),X=c(62939),tt=c(76189),ft=c(219),ut=c(67446),et=c(29070),_t=c(54255),Tt=c(15491);function bt(ht,q){if(1&ht){const F=g.EpF();g.TgZ(0,"div",6),g.TgZ(1,"button",7),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.toggleUnorderedList()}),g.qZA(),g.TgZ(2,"button",8),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).editor.toggleOrderedList()}),g.qZA(),g.TgZ(3,"button",9),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).sinkListItem()}),g.qZA(),g.TgZ(4,"button",10),g.NdJ("click",function(){return g.CHM(F),g.oxw(3).liftListItem()}),g.qZA(),g.qZA()}if(2&ht){const F=g.oxw().tuiLet,mt=g.oxw().ngIf;g.xp6(1),g.Q6J("tuiHint",mt.unorderedList)("pseudoActive",!(null==F||!F.unordered)),g.xp6(1),g.Q6J("tuiHint",mt.orderedList)("pseudoActive",!(null==F||!F.ordered)),g.xp6(1),g.Q6J("tuiHint",mt.indent)("disabled",!(null!=F&&F.ordered||null!=F&&F.unordered)),g.xp6(1),g.Q6J("tuiHint",mt.outdent)("disabled",!(null!=F&&F.ordered||null!=F&&F.unordered))}}function It(ht,q){if(1&ht&&(g.TgZ(0,"tui-hosted-dropdown",2,3),g._UZ(2,"button",4),g.YNc(3,bt,5,8,"ng-template",null,5,g.W1O),g.qZA()),2&ht){const F=q.tuiLet,mt=g.MAs(1),j=g.MAs(4),At=g.oxw().ngIf;g.Q6J("content",j),g.xp6(2),g.Q6J("tuiHint",At.list)("pseudoActive",(null==mt?null:mt.open)||(null==F?null:F.unordered)||(null==F?null:F.ordered)||!1)("focusable",mt.open)}}function Pt(ht,q){if(1&ht&&(g.ynx(0),g.YNc(1,It,5,4,"tui-hosted-dropdown",1),g.ALo(2,"async"),g.BQk()),2&ht){const F=g.oxw();g.xp6(1),g.Q6J("tuiLet",g.lcZ(2,1,F.listState$))}}let Dt=(()=>{class ht{constructor(F,mt){this.editor=F,this.texts$=mt,this.listState$=(0,y.aj)([this.editor.isActive$("orderedList"),this.editor.isActive$("bulletList")]).pipe((0,P.U)(([j,At])=>({ordered:j,unordered:At})))}sinkListItem(){this.editor.sinkListItem()}liftListItem(){this.editor.liftListItem()}}return ht.\u0275fac=function(F){return new(F||ht)(g.Y36(v.$3),g.Y36(l.rf))},ht.\u0275cmp=g.Xpm({type:ht,selectors:[["tui-list-configs"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["list",""],["tuiIconButton","","type","button","size","s","icon","tuiIconListLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__ordering-list-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["listDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconListLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOLLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconIndentLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","disabled","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOutdentLarge","appearance","icon",1,"t-option",3,"tuiHint","disabled","click"]],template:function(F,mt){1&F&&(g.YNc(0,Pt,3,3,"ng-container",0),g.ALo(1,"async")),2&F&&g.Q6J("ngIf",g.lcZ(1,1,mt.texts$))},directives:[it.O5,N.L,X.o,tt.v,ft.$,ut.D,et.x,_t.t,Tt.D],pipes:[it.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),ht})()},95558:(jt,Mt,c)=>{c.d(Mt,{p:()=>St});var v=c(64762),l=c(84614),y=c(14309),P=c(50259),g=c(9112),it=c(88002),N=c(87519),X=c(74788),tt=c(40939),ft=c(62939),ut=c(33250),et=c(76189),_t=c(219),Tt=c(67446),bt=c(29070),It=c(54255),Pt=c(15491),Dt=c(12057),ht=c(5451),q=c(17163);function F(Et,Lt){if(1&Et&&X._UZ(0,"div",7),2&Et){const Ht=X.oxw(2).tuiLet;X.Udp("background",Ht)}}function mt(Et,Lt){if(1&Et){const Ht=X.EpF();X.TgZ(0,"tui-palette",8),X.NdJ("selectedColor",function(pt){X.CHM(Ht),X.oxw();const B=X.MAs(1);return X.oxw(2).setCellColor(pt),B.close()}),X.qZA()}if(2&Et){const Ht=Lt.$implicit,Kt=X.oxw(3);X.Q6J("tuiActiveZoneParent",Ht)("colors",Kt.colors)}}function j(Et,Lt){if(1&Et&&(X.TgZ(0,"tui-hosted-dropdown",2,3),X._UZ(2,"button",4),X.ALo(3,"async"),X.YNc(4,F,1,2,"div",5),X.YNc(5,mt,1,2,"ng-template",null,6,X.W1O),X.qZA()),2&Et){const Ht=Lt.tuiLet,Kt=X.MAs(1),pt=X.MAs(6),B=X.oxw().tuiLet,rt=X.oxw();X.Q6J("content",pt)("tuiDropdownMaxHeight",999)("canOpen",!!Ht),X.xp6(2),X.Q6J("tuiHint",X.lcZ(3,8,rt.colorText$))("pseudoActive",Kt.open)("focusable",Kt.open)("disabled",!Ht),X.xp6(2),X.Q6J("ngIf",!rt.isBlankColor(B||""))}}function At(Et,Lt){if(1&Et&&(X.ynx(0),X.YNc(1,j,7,10,"tui-hosted-dropdown",1),X.ALo(2,"async"),X.BQk()),2&Et){const Ht=X.oxw();X.xp6(1),X.Q6J("tuiLet",X.lcZ(2,1,Ht.isActive$))}}class St{constructor(Lt,Ht,Kt){this.defaultOptions=Lt,this.editor=Ht,this.texts$=Kt,this.colors=this.defaultOptions.colors,this.colorText$=this.texts$.pipe((0,it.U)(pt=>this.editor.isActive("group")&&pt.hiliteGroup||this.editor.isActive("table")&&pt.cellColor||"")),this.isActive$=(0,g.aj)([this.editor.isActive$("table"),this.editor.isActive$("group")]).pipe((0,it.U)(([pt,B])=>pt||B)),this.color$=this.editor.stateChange$.pipe((0,it.U)(()=>this.editor.getCellColor()||this.editor.getGroupColor()||this.defaultOptions.blankColor),(0,N.x)())}isBlankColor(Lt){return Lt===this.defaultOptions.blankColor}setCellColor(Lt){this.editor.isActive("group")?this.editor.setGroupHilite(Lt):this.editor.isActive("table")&&this.editor.setCellColor(Lt)}}St.\u0275fac=function(Lt){return new(Lt||St)(X.Y36(y.mJ),X.Y36(l.$3),X.Y36(y.rf))},St.\u0275cmp=X.Xpm({type:St,selectors:[["tui-table-cell-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen"],["colorSelect",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconPaintLarge","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable","disabled"],["class","t-plate t-plate_paint",3,"background",4,"ngIf"],["cellColorDropdown",""],[1,"t-plate","t-plate_paint"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(Lt,Ht){1&Lt&&(X.YNc(0,At,3,3,"ng-container",0),X.ALo(1,"async")),2&Lt&&X.Q6J("tuiLet",X.lcZ(1,1,Ht.color$))},directives:[tt.L,ft.o,ut.Ek,et.v,_t.$,Tt.D,bt.x,It.t,Pt.D,Dt.O5,ht.R,q.e],pipes:[Dt.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,v.gn)([(0,P.tuiDefaultProp)()],St.prototype,"colors",void 0)},28962:(jt,Mt,c)=>{c.d(Mt,{l:()=>It});var v=c(84614),l=c(14309),y=c(88002),P=c(74788),g=c(62939),it=c(33250),N=c(76189),X=c(219),tt=c(67446),ft=c(29070),ut=c(54255),et=c(15491),_t=c(74549),Tt=c(12057);function bt(Pt,Dt){if(1&Pt){const ht=P.EpF();P.TgZ(0,"tui-table-size-selector",4),P.NdJ("onSelectSize",function(F){return P.CHM(ht),P.oxw().addTable(F)}),P.qZA()}}let It=(()=>{class Pt{constructor(ht,q){this.editor=ht,this.texts$=q,this.insertTableText$=this.texts$.pipe((0,y.U)(F=>F.insertTable))}addTable({rows:ht,cols:q}){this.editor.enter();const F=this.editor.state.selection.anchor;this.editor.enter(),this.editor.enter(),this.editor.setTextSelection(F),this.editor.insertTable(ht,q)}}return Pt.\u0275fac=function(ht){return new(ht||Pt)(P.Y36(v.$3),P.Y36(l.rf))},Pt.\u0275cmp=P.Xpm({type:Pt,selectors:[["tui-table-create"]],decls:6,vars:5,consts:[["tuiDropdownAlign","left","tuiDropdownDirection","bottom",3,"content"],["table",""],["tuiIconButton","","type","button","size","s","icon","tuiIconTableLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable"],["tableDropdown",""],[3,"onSelectSize"]],template:function(ht,q){if(1&ht&&(P.TgZ(0,"tui-hosted-dropdown",0,1),P._UZ(2,"button",2),P.ALo(3,"async"),P.qZA(),P.YNc(4,bt,1,0,"ng-template",null,3,P.W1O)),2&ht){const F=P.MAs(1),mt=P.MAs(5);P.Q6J("content",mt),P.xp6(2),P.Q6J("tuiHint",P.lcZ(3,3,q.insertTableText$))("focusable",F.open)}},directives:[g.o,it.Ek,N.v,X.$,tt.D,ft.x,ut.t,et.D,_t.M],pipes:[Tt.Ov],encapsulation:2,changeDetection:0}),Pt})()},76965:(jt,Mt,c)=>{c.d(Mt,{Y:()=>Pt});var v=c(84614),l=c(14309),y=c(88002),P=c(87519),g=c(74788),it=c(40939),N=c(12057),X=c(76189),tt=c(219),ft=c(67446),ut=c(29070),et=c(54255),_t=c(15491);function Tt(Dt,ht){if(1&Dt){const q=g.EpF();g.TgZ(0,"button",2),g.NdJ("click",function(){g.CHM(q);const mt=g.oxw().tuiLet,j=g.oxw();return mt.mergeCells?j.mergeCells():j.splitCell()}),g.qZA()}if(2&Dt){const q=ht.ngIf,F=g.oxw().tuiLet;g.Q6J("icon",F.mergeCells?"tuiIconTableMergeLarge":"tuiIconTableSplitLarge")("tuiHint",F.mergeCells?q.mergeCells:q.splitCells)("focusable",!1)("disabled",!F.mergeCells&&!F.splitCells)}}function bt(Dt,ht){if(1&Dt&&(g.ynx(0),g.YNc(1,Tt,1,4,"button",1),g.ALo(2,"async"),g.BQk()),2&Dt){const q=g.oxw();g.xp6(1),g.Q6J("ngIf",g.lcZ(2,1,q.texts$))}}const It=function(Dt,ht){return{mergeCells:Dt,splitCells:ht}};let Pt=(()=>{class Dt{constructor(q,F){this.editor=q,this.texts$=F,this.canMergeCells$=this.editor.stateChange$.pipe((0,y.U)(()=>this.editor.canMergeCells()),(0,P.x)()),this.canSplitCells$=this.editor.stateChange$.pipe((0,y.U)(()=>this.editor.canSplitCells()),(0,P.x)())}mergeCells(){this.editor.mergeCells()}splitCell(){this.editor.splitCell()}}return Dt.\u0275fac=function(q){return new(q||Dt)(g.Y36(v.$3),g.Y36(l.rf))},Dt.\u0275cmp=g.Xpm({type:Dt,selectors:[["tui-table-merge-cells"]],decls:3,vars:8,consts:[[4,"tuiLet"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"icon","tuiHint","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"icon","tuiHint","focusable","disabled","click"]],template:function(q,F){1&q&&(g.YNc(0,bt,3,3,"ng-container",0),g.ALo(1,"async"),g.ALo(2,"async")),2&q&&g.Q6J("tuiLet",g.WLB(5,It,g.lcZ(1,1,F.canMergeCells$),g.lcZ(2,3,F.canSplitCells$)))},directives:[it.L,N.O5,X.v,tt.$,ft.D,ut.x,et.t,_t.D],pipes:[N.Ov],encapsulation:2,changeDetection:0}),Dt})()},22063:(jt,Mt,c)=>{c.d(Mt,{_:()=>mt,i:()=>F});var v=c(84614),l=c(14309),y=c(88002),P=c(74788),g=c(40939),it=c(62939),N=c(76189),X=c(219),tt=c(67446),ft=c(29070),ut=c(54255),et=c(15491),_t=c(20933),Tt=c(12057),bt=c(89786),It=c(35065);function Pt(j,At){if(1&j&&(P.TgZ(0,"tui-hosted-dropdown",2,3),P._UZ(2,"button",4),P.ALo(3,"async"),P.qZA()),2&j){const St=At.tuiLet,Et=P.MAs(1),Lt=P.oxw(),Ht=P.MAs(3);P.Q6J("content",Ht)("canOpen",!!St),P.xp6(2),P.Q6J("tuiHint",P.lcZ(3,5,Lt.rowsColumnsManagingText$))("focusable",Et.open)("disabled",!St)}}function Dt(j,At){if(1&j){const St=P.EpF();P.TgZ(0,"button",7),P.NdJ("click",function(){const Ht=P.CHM(St).index,Kt=P.oxw().index;return P.oxw(2).onTableOption(2*Kt+Ht)}),P._uU(1),P.qZA()}if(2&j){const St=At.$implicit;P.xp6(1),P.hij(" ",St," ")}}function ht(j,At){if(1&j&&(P.TgZ(0,"tui-opt-group"),P.YNc(1,Dt,2,1,"button",6),P.qZA()),2&j){const St=At.$implicit;P.xp6(1),P.Q6J("ngForOf",St)}}function q(j,At){if(1&j&&(P.TgZ(0,"tui-data-list"),P.YNc(1,ht,2,1,"tui-opt-group",5),P.ALo(2,"async"),P.qZA()),2&j){const St=P.oxw();P.xp6(1),P.Q6J("ngForOf",P.lcZ(2,1,St.tableCommandTexts$))}}var F=(()=>{return(j=F||(F={}))[j.InsertColumnBefore=0]="InsertColumnBefore",j[j.InsertColumnAfter=1]="InsertColumnAfter",j[j.InsertRowBefore=2]="InsertRowBefore",j[j.InsertRowAfter=3]="InsertRowAfter",j[j.DeleteColumn=4]="DeleteColumn",j[j.DeleteRow=5]="DeleteRow",F;var j})();let mt=(()=>{class j{constructor(St,Et,Lt){this.editor=St,this.texts$=Et,this.tableCommandTexts$=Lt,this.commandsRegistry={[F.InsertColumnAfter]:()=>this.editor.addColumnAfter(),[F.InsertColumnBefore]:()=>this.editor.addColumnBefore(),[F.InsertRowAfter]:()=>this.editor.addRowAfter(),[F.InsertRowBefore]:()=>this.editor.addRowBefore(),[F.DeleteColumn]:()=>this.editor.deleteColumn(),[F.DeleteRow]:()=>this.editor.deleteRow()},this.isActive$=this.editor.isActive$("table"),this.rowsColumnsManagingText$=this.texts$.pipe((0,y.U)(Ht=>Ht.rowsColumnsManaging))}onTableOption(St){this.commandsRegistry[St]()}}return j.\u0275fac=function(St){return new(St||j)(P.Y36(v.$3),P.Y36(l.rf),P.Y36(l.$i))},j.\u0275cmp=P.Xpm({type:j,selectors:[["tui-table-row-column-manager"]],decls:4,vars:3,consts:[[3,"content","canOpen",4,"tuiLet"],["tableOptionsDropdown",""],[3,"content","canOpen"],["tableCommand",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAddRowLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled"],[4,"ngFor","ngForOf"],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(St,Et){1&St&&(P.YNc(0,Pt,4,7,"tui-hosted-dropdown",0),P.ALo(1,"async"),P.YNc(2,q,3,3,"ng-template",null,1,P.W1O)),2&St&&P.Q6J("tuiLet",P.lcZ(1,1,Et.isActive$))},directives:[g.L,it.o,N.v,X.$,tt.D,ft.x,ut.t,et.D,_t.q,Tt.sg,bt.R,It.v],pipes:[Tt.Ov],encapsulation:2,changeDetection:0}),j})()},74549:(jt,Mt,c)=>{c.d(Mt,{M:()=>ft});var v=c(74788),l=c(62579),y=c(3497),P=c(36097);function g(ut,et){if(1&ut){const _t=v.EpF();v.TgZ(0,"div",4),v.NdJ("mouseenter",function(bt){const Pt=v.CHM(_t).$implicit,Dt=v.oxw().$implicit;return v.oxw().updateCurrentSize(Pt+1,Dt+1,bt)})("click",function(){return v.CHM(_t),v.oxw(2).select()}),v.qZA()}if(2&ut){const _t=et.$implicit,Tt=v.oxw().$implicit,bt=v.oxw();v.ekj("t-cell_hovered",bt.tableSelectHovered(_t,Tt))}}function it(ut,et){if(1&ut&&(v.TgZ(0,"div",2),v.YNc(1,g,1,2,"div",3),v.qZA()),2&ut){const _t=v.oxw();v.xp6(1),v.Q6J("tuiRepeatTimesOf",_t.rowsNumber)}}let ft=(()=>{class ut{constructor(_t){this.windowRef=_t,this.selectSize=new v.vpe,this.onSelectSize=this.selectSize,this.tableSize={rows:1,cols:1}}get columnsNumber(){return Math.min(Math.max(3,this.tableSize.cols+1),15)}get rowsNumber(){return Math.min(Math.max(3,this.tableSize.rows+1),15)}tableSelectHovered(_t,Tt){return _t<this.tableSize.rows&&Tt<this.tableSize.cols}updateCurrentSize(_t,Tt,bt){(0,y.tuiGetViewportWidth)(this.windowRef)-bt.clientX>70&&(this.tableSize={rows:_t,cols:Tt})}onClick(){this.select()}select(){this.selectSize.emit(this.tableSize)}}return ut.\u0275fac=function(_t){return new(_t||ut)(v.Y36(l.m9))},ut.\u0275cmp=v.Xpm({type:ut,selectors:[["tui-table-size-selector"]],outputs:{selectSize:"selectSize",onSelectSize:"onSelectSize"},decls:3,vars:3,consts:[["class","t-column",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-description"],[1,"t-column"],["class","t-cell",3,"t-cell_hovered","mouseenter","click",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-cell",3,"mouseenter","click"]],template:function(_t,Tt){1&_t&&(v.YNc(0,it,2,1,"div",0),v.TgZ(1,"div",1),v._uU(2),v.qZA()),2&_t&&(v.Q6J("tuiRepeatTimesOf",Tt.columnsNumber),v.xp6(2),v.AsE("",Tt.tableSize.cols,"\xd7",Tt.tableSize.rows,""))},directives:[P.X],styles:["[_nghost-%COMP%]{display:block;padding:.75rem}.t-cell[_ngcontent-%COMP%]{display:inline-block;background-color:var(--tui-base-01);width:1.25rem;height:1.25rem;border-radius:.25rem;margin:.125rem;border:1px solid var(--tui-base-04);cursor:pointer}.t-cell_hovered[_ngcontent-%COMP%]{background-color:var(--tui-base-02)}.t-column[_ngcontent-%COMP%]{white-space:nowrap}.t-description[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),ut})()},10528:(jt,Mt,c)=>{c.d(Mt,{G:()=>mt});var v=c(64762),l=c(84614),y=c(14309),P=c(50259),g=c(88002),it=c(87519),N=c(74788),X=c(40939),tt=c(62939),ft=c(33250),ut=c(76189),et=c(219),_t=c(67446),Tt=c(29070),bt=c(54255),It=c(15491),Pt=c(5451),Dt=c(17163),ht=c(12057);function q(j,At){if(1&j){const St=N.EpF();N.TgZ(0,"tui-palette",6),N.NdJ("selectedColor",function(Lt){return N.CHM(St),N.oxw(2).editor.setFontColor(Lt)}),N.qZA()}if(2&j){const St=At.$implicit,Et=N.oxw(2);N.Q6J("tuiActiveZoneParent",St)("colors",Et.colors)}}function F(j,At){if(1&j&&(N.TgZ(0,"tui-hosted-dropdown",1,2),N._UZ(2,"button",3),N.ALo(3,"async"),N._UZ(4,"div",4),N.YNc(5,q,1,2,"ng-template",null,5,N.W1O),N.qZA()),2&j){const St=At.tuiLet,Et=N.MAs(1),Lt=N.MAs(6),Ht=N.oxw();N.Q6J("content",Lt)("tuiDropdownMaxHeight",999),N.xp6(2),N.Q6J("tuiHint",N.lcZ(3,7,Ht.foreColorText$))("pseudoActive",Et.open)("focusable",Et.open),N.xp6(2),N.Udp("background",St)}}class mt{constructor(At,St,Et){this.defaultOptions=At,this.editor=St,this.texts$=Et,this.colors=this.defaultOptions.colors,this.fontColor$=this.editor.stateChange$.pipe((0,g.U)(()=>this.editor.getFontColor()||this.defaultOptions.blankColor),(0,it.x)()),this.foreColorText$=this.texts$.pipe((0,g.U)(Lt=>Lt.foreColor))}}mt.\u0275fac=function(At){return new(At||mt)(N.Y36(y.mJ),N.Y36(l.$3),N.Y36(y.rf))},mt.\u0275cmp=N.Xpm({type:mt,selectors:[["tui-text-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["color",""],["tuiIconButton","","type","button","size","s","icon","tuiIconColorLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__color-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],[1,"t-plate"],["colorDropdown",""],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(At,St){1&At&&(N.YNc(0,F,7,9,"tui-hosted-dropdown",0),N.ALo(1,"async")),2&At&&N.Q6J("tuiLet",N.lcZ(1,1,St.fontColor$))},directives:[X.L,tt.o,ft.Ek,ut.v,et.$,_t.D,Tt.x,bt.t,It.D,Pt.R,Dt.e],pipes:[ht.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),(0,v.gn)([(0,P.tuiDefaultProp)()],mt.prototype,"colors",void 0)},17406:(jt,Mt,c)=>{c.d(Mt,{M6:()=>v.M,yB:()=>X,Bp:()=>tt.B});var v=c(4997),l=c(12057),y=c(71115),P=c(93252),g=c(50259),it=c(3497),N=c(74788);let X=(()=>{class ft{}return ft.\u0275fac=function(et){return new(et||ft)},ft.\u0275mod=N.oAB({type:ft}),ft.\u0275inj=N.cJS({imports:[[l.ez,it.TuiHintModule,g.TuiFocusableModule,it.TuiButtonModule,it.TuiHostedDropdownModule,y.Fu,P.er,P.mp,P.__,P.iA,P.p7,P.Zv,P.pu,P.Ur,P._t,P.XC,P.P_,P.y9,g.TuiItemModule,P.jP]]}),ft})();var tt=c(13044)},13044:(jt,Mt,c)=>{c.d(Mt,{B:()=>y});var v=c(74788),l=c(50259);let y=(()=>{class P{constructor(it){this.elementRef=it}get toolsContainers(){return Array.from(this.elementRef.nativeElement.querySelectorAll("[tuiItem]"))}onHorizontalNavigation(it){const{toolsContainers:N}=this,X=N.findIndex(l.tuiIsNativeFocusedIn),ft=N[(0,l.tuiClamp)(X+(it?-1:1),0,N.length-1)],ut=it?this.findPreviousTool(ft):this.findNextTool(ft);ut&&ut.focus()}findFirstFocusableTool(it=!1){const N=it?this.toolsContainers.slice().reverse():this.toolsContainers;for(const X of N){const tt=(0,l.tuiIsNativeMouseFocusable)(X)?X:(0,l.tuiGetClosestFocusable)({initial:X,root:X,keyboard:!1});if(tt)return tt}return null}findPreviousTool(it){return(0,l.tuiIsNativeMouseFocusable)(it)?it:(0,l.tuiGetClosestFocusable)({initial:it,root:it,keyboard:!1})||(0,l.tuiGetClosestFocusable)({initial:it,root:this.elementRef.nativeElement,previous:!0,keyboard:!1})}findNextTool(it){return(0,l.tuiIsNativeMouseFocusable)(it)?it:(0,l.tuiGetClosestFocusable)({initial:it,root:this.elementRef.nativeElement,keyboard:!1})}}return P.\u0275fac=function(it){return new(it||P)(v.Y36(v.SBq))},P.\u0275dir=v.lG2({type:P,selectors:[["","tuiToolbarNavigationManager",""]],hostBindings:function(it,N){1&it&&v.NdJ("keydown.arrowRight.prevent",function(){return N.onHorizontalNavigation(!1)})("keydown.arrowLeft.prevent",function(){return N.onHorizontalNavigation(!0)})}}),P})()},4997:(jt,Mt,c)=>{c.d(Mt,{M:()=>O});var v=c(64762),l=c(74788),y=c(19074),P=c(84614),g=c(48699),it=c(14309),N=c(50259),X=c(15257),tt=c(13044),ft=c(12057),ut=c(48893),et=c(76189),_t=c(82707),Tt=c(219),bt=c(67446),It=c(29070),Pt=c(54255),Dt=c(15491),ht=c(84985),q=c(62976),F=c(37924),mt=c(13441),j=c(62939),At=c(45050),St=c(10528),Et=c(7416),Lt=c(15587),Ht=c(50237),Kt=c(18832),pt=c(19762),B=c(95558),rt=c(28962),at=c(22063),st=c(76965);const J=["dropdown"];function Q(R,V){1&R&&l.GkF(0)}function ot(R,V){if(1&R){const U=l.EpF();l.TgZ(0,"div",6),l.TgZ(1,"button",7),l.NdJ("click",function(){return l.CHM(U),l.oxw(2).undo()}),l.qZA(),l.TgZ(2,"button",8),l.NdJ("click",function(){return l.CHM(U),l.oxw(2).redo()}),l.qZA(),l.qZA()}if(2&R){const U=l.oxw().ngIf,Ot=l.oxw();l.xp6(1),l.Q6J("tuiHint",U.undo)("disabled",Ot.undoDisabled)("focusable",!1),l.xp6(1),l.Q6J("tuiHint",U.redo)("disabled",Ot.redoDisabled)("focusable",!1)}}function kt(R,V){1&R&&(l.TgZ(0,"div",6),l._UZ(1,"tui-font-size",9),l.qZA())}function $t(R,V){if(1&R&&l._UZ(0,"tui-font-style",15),2&R){const U=l.oxw(3);l.Q6J("enabledTools",U.toolsSet)}}function Yt(R,V){1&R&&l._UZ(0,"tui-align-content",9)}function ee(R,V){1&R&&l._UZ(0,"tui-list-configs",9)}function zt(R,V){if(1&R){const U=l.EpF();l.TgZ(0,"button",16,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).toggleQuote()}),l.qZA()}if(2&R){const U=l.oxw(2).ngIf,Ot=l.oxw();l.Q6J("tuiHint",U.quote)("pseudoActive",Ot.blockquote)("disabled",Ot.unorderedList||Ot.orderedList)("focusable",!1)}}function ue(R,V){if(1&R){const U=l.EpF();l.TgZ(0,"tui-edit-link",22,23),l.NdJ("addLink",function(wt){l.CHM(U),l.oxw();const H=l.MAs(1);return l.oxw(3).onLink(H,wt)})("removeLink",function(){l.CHM(U),l.oxw();const wt=l.MAs(1);return l.oxw(3).onLink(wt)}),l.qZA()}}function ye(R,V){if(1&R&&(l.TgZ(0,"tui-hosted-dropdown",18,19),l._UZ(2,"button",20,17),l.YNc(4,ue,2,0,"ng-template",null,21,l.W1O),l.qZA()),2&R){const U=l.MAs(1),Ot=l.MAs(5),wt=l.oxw(2).ngIf,H=l.oxw();l.Q6J("canOpen",H.canOpenAnchor)("content",Ot),l.xp6(2),l.Q6J("tuiHint",wt.link)("pseudoActive",U.open||H.a)("focusable",U.open)}}function Oe(R,V){if(1&R){const U=l.EpF();l.TgZ(0,"tui-edit-link",28),l.NdJ("addLink",function(wt){l.CHM(U),l.oxw();const H=l.MAs(1);return l.oxw(3).setAnchor(H,wt)})("removeLink",function(){return l.CHM(U),l.oxw(4).removeAnchor()}),l.qZA()}2&R&&l.Q6J("anchorMode",!0)}function he(R,V){if(1&R&&(l.TgZ(0,"tui-hosted-dropdown",24,25),l._UZ(2,"button",26),l.YNc(3,Oe,1,1,"ng-template",null,27,l.W1O),l.qZA()),2&R){const U=l.MAs(1),Ot=l.MAs(4),wt=l.oxw(2).ngIf,H=l.oxw();l.Q6J("canOpen",H.canOpenAnchor)("content",Ot),l.xp6(2),l.Q6J("focusable",!1)("pseudoActive",U.open||H.jumpAnchor)("tuiHint",wt.insertAnchor)}}function Ke(R,V){if(1&R){const U=l.EpF();l.ynx(0),l.TgZ(1,"button",29,17),l.NdJ("click",function(){return l.CHM(U),l.MAs(4).click()}),l.qZA(),l.TgZ(3,"input",30,31),l.NdJ("change",function(){l.CHM(U);const wt=l.MAs(4);return l.oxw(3).onAttach(wt)}),l.qZA(),l.BQk()}if(2&R){const U=l.oxw(2).ngIf,Ot=l.oxw();l.xp6(1),l.Q6J("tuiHint",U.attach)("focusable",!1),l.xp6(2),l.Q6J("accept",Ot.attachOptions.accept)("multiple",Ot.attachOptions.multiple)("tuiFocusable",!1)}}function xe(R,V){if(1&R&&(l.TgZ(0,"div",6),l.YNc(1,$t,1,1,"tui-font-style",10),l.YNc(2,Yt,1,0,"tui-align-content",11),l.YNc(3,ee,1,0,"tui-list-configs",11),l.YNc(4,zt,2,4,"button",12),l.YNc(5,ye,6,5,"tui-hosted-dropdown",13),l.YNc(6,he,5,5,"tui-hosted-dropdown",14),l.YNc(7,Ke,5,5,"ng-container",1),l.qZA()),2&R){const U=l.oxw(2);l.xp6(1),l.Q6J("ngIf",U.formatEnabled),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Align)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.List)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Quote)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Link)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Anchor)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Attach))}}function Be(R,V){if(1&R){const U=l.EpF();l.TgZ(0,"button",34,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).toggleSubscript()}),l.qZA()}if(2&R){const U=l.oxw(2).ngIf,Ot=l.oxw();l.Q6J("tuiHint",U.subscript)("pseudoActive",Ot.subscript)("focusable",!1)}}function ge(R,V){if(1&R){const U=l.EpF();l.TgZ(0,"button",35,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).toggleSuperscript()}),l.qZA()}if(2&R){const U=l.oxw(2).ngIf,Ot=l.oxw();l.Q6J("tuiHint",U.superscript)("pseudoActive",Ot.superscript)("focusable",!1)}}function Ae(R,V){if(1&R&&(l.TgZ(0,"div",6),l.YNc(1,Be,2,3,"button",32),l.YNc(2,ge,2,3,"button",33),l.qZA()),2&R){const U=l.oxw(2);l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Sub)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Sup))}}function ve(R,V){if(1&R&&l._UZ(0,"tui-text-color",37),2&R){const U=l.oxw(3);l.Q6J("colors",U.colors)}}function Pe(R,V){if(1&R&&l._UZ(0,"tui-highlight-color",37),2&R){const U=l.oxw(3);l.Q6J("colors",U.colors)}}function Ne(R,V){if(1&R&&(l.TgZ(0,"div",6),l.YNc(1,ve,1,1,"tui-text-color",36),l.YNc(2,Pe,1,1,"tui-highlight-color",36),l.qZA()),2&R){const U=l.oxw(2);l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Color)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Hilite))}}function Me(R,V){1&R&&l._UZ(0,"tui-code",9)}function Ie(R,V){if(1&R){const U=l.EpF();l.TgZ(0,"button",41,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).onTeX()}),l.qZA()}if(2&R){const U=l.oxw(2).ngIf;l.Q6J("tuiHint",U.tex)("focusable",!1)}}function Ze(R,V){if(1&R){const U=l.EpF();l.TgZ(0,"div",42),l.TgZ(1,"button",43,17),l.NdJ("click",function(){return l.CHM(U),l.MAs(4).click()}),l.qZA(),l.TgZ(3,"input",44,45),l.NdJ("change",function(){l.CHM(U);const wt=l.MAs(4);return l.oxw(3).onImage(wt)}),l.qZA(),l.qZA()}if(2&R){const U=l.oxw(2).ngIf;l.xp6(1),l.Q6J("tuiHint",U.image)("focusable",!1),l.xp6(2),l.Q6J("tuiFocusable",!1)}}function He(R,V){if(1&R){const U=l.EpF();l.TgZ(0,"button",46,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(3).insertHorizontalRule()}),l.qZA()}if(2&R){const U=l.oxw(2).ngIf;l.Q6J("tuiHint",U.insertHorizontalRule)("focusable",!1)}}function Ue(R,V){if(1&R&&(l.TgZ(0,"div",6),l.YNc(1,Me,1,0,"tui-code",11),l.YNc(2,Ie,2,2,"button",38),l.YNc(3,Ze,5,3,"div",39),l.YNc(4,He,2,2,"button",40),l.qZA()),2&R){const U=l.oxw(2);l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Code)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Tex)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Img)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.HR))}}function Le(R,V){if(1&R){const U=l.EpF();l.TgZ(0,"div",6),l.TgZ(1,"button",47,17),l.NdJ("click",function(){return l.CHM(U),l.oxw(2).removeFormat()}),l.qZA(),l.qZA()}if(2&R){const U=l.oxw().ngIf;l.xp6(1),l.Q6J("tuiHint",U.clear)("focusable",!1)}}function ze(R,V){1&R&&(l.TgZ(0,"div",6),l._UZ(1,"tui-details",48),l._UZ(2,"tui-details-remove",48),l.qZA())}function _e(R,V){if(1&R&&l._UZ(0,"tui-table-cell-color",37),2&R){const U=l.oxw(3);l.Q6J("colors",U.colors)}}function fe(R,V){if(1&R&&(l.TgZ(0,"div",6),l._UZ(1,"tui-editor-group-tool",48),l.YNc(2,_e,1,1,"tui-table-cell-color",36),l.qZA()),2&R){const U=l.oxw(2);l.xp6(2),l.Q6J("ngIf",!U.enabled(U.TuiEditorTool.Table))}}function Ee(R,V){if(1&R&&(l.TgZ(0,"div",6),l._UZ(1,"tui-table-create",48),l._UZ(2,"tui-table-row-column-manager",48),l._UZ(3,"tui-table-merge-cells",48),l._UZ(4,"tui-table-cell-color",37),l.qZA()),2&R){const U=l.oxw(2);l.xp6(4),l.Q6J("colors",U.colors)}}function gt(R,V){if(1&R&&(l.TgZ(0,"section",4),l.YNc(1,ot,3,6,"div",5),l.YNc(2,kt,2,0,"div",5),l.YNc(3,xe,8,7,"div",5),l.YNc(4,Ae,3,2,"div",5),l.YNc(5,Ne,3,2,"div",5),l.YNc(6,Ue,5,4,"div",5),l.YNc(7,Le,3,2,"div",5),l.YNc(8,ze,3,0,"div",5),l.YNc(9,fe,3,1,"div",5),l.YNc(10,Ee,5,1,"div",5),l.TgZ(11,"div",6),l.Hsn(12),l.qZA(),l.qZA()),2&R){const U=l.oxw();l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Undo)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Size)),l.xp6(1),l.Q6J("ngIf",U.firstBigBlockEnabled),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Sub)||U.enabled(U.TuiEditorTool.Sup)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Color)||U.enabled(U.TuiEditorTool.Hilite)),l.xp6(1),l.Q6J("ngIf",U.secondBigBlockEnabled),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Clear)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Details)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Group)),l.xp6(1),l.Q6J("ngIf",U.enabled(U.TuiEditorTool.Table))}}class O{constructor(V,U,Ot,wt,H,a,p){this.elementRef=V,this.editor=U,this.imageLoader=Ot,this.attachOptions=wt,this.filesLoader=H,this.texts$=a,this.defaultOptions=p,this.dropdowns=N.EMPTY_QUERY,this.colors=this.defaultOptions.colors,this.disabled=!1,this.linkAdded=new l.vpe,this.texClicked=new l.vpe,this.fileAttached=new l.vpe,this.TuiEditorTool=g._,this.toolsSet=new Set(y.Db)}set tools(V){this.toolsSet=new Set(V)}get focused(){return(0,N.tuiIsNativeFocusedIn)(this.elementRef.nativeElement)||!!this.dropdowns.find(({nativeElement:V})=>(0,N.tuiIsNativeFocusedIn)(V))}get focusable(){return!this.focused&&!this.disabled}get unorderedList(){return this.editor.isActive("bulletList")}get orderedList(){return this.editor.isActive("orderedList")}get blockquote(){return this.editor.isActive("blockquote")}get a(){return this.editor.isActive("link")}get jumpAnchor(){return this.editor.isActive("jumpAnchor")}get canOpenAnchor(){return!this.a&&!this.jumpAnchor}get undoDisabled(){return this.editor.undoDisabled()}get redoDisabled(){return this.editor.redoDisabled()}get subscript(){return this.editor.isActive("subscript")}get superscript(){return this.editor.isActive("superscript")}get formatEnabled(){return this.enabled(g._.Bold)||this.enabled(g._.Italic)||this.enabled(g._.Underline)||this.enabled(g._.Strikethrough)}get firstBigBlockEnabled(){return this.formatEnabled||this.enabled(g._.Align)||this.enabled(g._.List)||this.enabled(g._.Quote)||this.enabled(g._.Link)||this.enabled(g._.Anchor)||this.enabled(g._.Attach)}get secondBigBlockEnabled(){return this.enabled(g._.Code)||this.enabled(g._.Tex)||this.enabled(g._.Img)||this.enabled(g._.HR)}onMouseDown(V,U){U.closest("button")||(V.preventDefault(),this.editor.focus())}onBottomFocus(){this.focusLast()}onTopFocus(){this.focusFirst()}onImage(V){var U;const Ot=null===(U=V.files)||void 0===U?void 0:U[0];V.value="",Ot&&this.imageLoader(Ot).pipe((0,X.q)(1)).subscribe(wt=>{this.addImage(wt)})}onAttach(V){var U;const Ot=Array.from(V.files||[]);V.value="",Ot&&(N.tuiAssert.assert(!!this.filesLoader,"Please provide TUI_ATTACH_FILES_LOADER"),null===(U=this.filesLoader)||void 0===U||U.call(this,Ot).pipe((0,X.q)(1)).subscribe(wt=>this.fileAttached.emit(wt)))}onTeX(){this.texClicked.emit()}onLink(V,U){V.open=!1,U&&this.editor.toggleLink(U)}setAnchor(V,U){V.open=!1,U&&(this.editor.setAnchor(U),this.editor.selectClosest())}removeAnchor(){this.editor.removeAnchor()}enabled(V){return this.toolsSet.has(V)}undo(){this.editor.undo()}redo(){this.editor.redo()}insertHorizontalRule(){this.editor.setHorizontalRule()}removeFormat(){this.editor.removeFormat()}toggleOrderedList(){this.editor.toggleOrderedList()}toggleQuote(){this.editor.toggleBlockquote()}toggleSubscript(){this.editor.toggleSubscript()}toggleSuperscript(){this.editor.toggleSuperscript()}addImage(V){this.editor.setImage(V)}focusFirst(){var V;const U=null===(V=this.navigationManager)||void 0===V?void 0:V.findFirstFocusableTool();U&&U.focus()}focusLast(){var V;const U=null===(V=this.navigationManager)||void 0===V?void 0:V.findFirstFocusableTool(!0);U&&U.focus()}}O.\u0275fac=function(V){return new(V||O)(l.Y36(l.SBq,8),l.Y36(P.$3),l.Y36(it.p7),l.Y36(it.dR),l.Y36(it.zc,8),l.Y36(it.rf),l.Y36(it.mJ))},O.\u0275cmp=l.Xpm({type:O,selectors:[["tui-toolbar"]],viewQuery:function(V,U){if(1&V&&(l.Gf(tt.B,5),l.Gf(J,5,l.SBq)),2&V){let Ot;l.iGM(Ot=l.CRH())&&(U.navigationManager=Ot.first),l.iGM(Ot=l.CRH())&&(U.dropdowns=Ot)}},hostAttrs:["role","toolbar"],hostVars:2,hostBindings:function(V,U){1&V&&l.NdJ("mousedown",function(wt){return U.onMouseDown(wt,wt.target)}),2&V&&l.ekj("_disabled",U.disabled)},inputs:{colors:"colors",disabled:"disabled",tools:"tools"},outputs:{linkAdded:"linkAdded",texClicked:"texClicked",fileAttached:"fileAttached"},ngContentSelectors:["*"],decls:7,vars:8,consts:[["type","button",1,"t-prevent-parent-label-behavior"],[4,"ngIf"],[3,"tuiFocusable","focus"],["tuiToolbarNavigationManager","","class","t-tools-wrapper",4,"ngIf"],["tuiToolbarNavigationManager","",1,"t-tools-wrapper"],["class","t-block",4,"ngIf"],[1,"t-block"],["tuiItem","","tuiIconButton","","type","button","size","s","icon","tuiIconUndoLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","disabled","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconRedoLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","disabled","focusable","click"],["tuiItem","",1,"t-tool","t-wrapper"],["tuiItem","","class","t-tool t-wrapper",3,"enabledTools",4,"ngIf"],["tuiItem","","class","t-tool t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","disabled","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",3,"canOpen","content",4,"ngIf"],["class","t-wrapper",3,"canOpen","content",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"enabledTools"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","disabled","focusable","click"],["button",""],["tuiItem","",1,"t-wrapper",3,"canOpen","content"],["link",""],["tuiIconButton","","type","button","size","s","icon","tuiIconLinkLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","pseudoActive","focusable"],["linkDropdown",""],[3,"addLink","removeLink"],["dropdown",""],[1,"t-wrapper",3,"canOpen","content"],["anchor",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAnchorLarge","tuiHintDirection","top-left","appearance","icon","tuiHintDescribe","",3,"focusable","pseudoActive","tuiHint"],["anchorDropdown",""],[3,"anchorMode","addLink","removeLink"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconPaperclipLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["type","file",1,"t-file-upload",3,"accept","multiple","tuiFocusable","change"],["fileUpload",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","focusable","click"],["tuiItem","","class","t-tool t-wrapper",3,"colors",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"colors"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool",3,"tuiHint","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","focusable","click"],["tuiItem","",1,"t-wrapper"],["tuiIconButton","","type","button","size","s","icon","tuiIconImageLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","focusable","click"],["type","file","accept","image/*",1,"t-image",3,"tuiFocusable","change"],["image",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconClearFormatLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["tuiItem","",1,"t-tool","t-tool_margin"]],template:function(V,U){1&V&&(l.F$t(),l._UZ(0,"button",0),l.YNc(1,Q,1,0,"ng-container",1),l.ALo(2,"async"),l.TgZ(3,"div",2),l.NdJ("focus",function(){return U.onTopFocus()}),l.qZA(),l.TgZ(4,"div",2),l.NdJ("focus",function(){return U.onBottomFocus()}),l.qZA(),l.YNc(5,gt,13,10,"section",3),l.ALo(6,"async")),2&V&&(l.xp6(1),l.Q6J("ngIf",l.lcZ(2,4,U.editor.stateChange$)),l.xp6(2),l.Q6J("tuiFocusable",U.focusable),l.xp6(1),l.Q6J("tuiFocusable",U.focusable),l.xp6(1),l.Q6J("ngIf",l.lcZ(6,6,U.texts$)))},directives:[ft.O5,ut.t,tt.B,et.v,_t.w,Tt.$,bt.D,It.x,Pt.t,Dt.D,ht.m,q.h,F.X,mt.w,j.o,At.l,St.G,Et.U,Lt.T,Ht.y,Kt.U,pt.d,B.p,rt.l,at._,st.Y],pipes:[ft.Ov],styles:['.t-tools-wrapper[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;padding:.25rem .75rem;overflow:auto;flex-wrap:wrap;box-shadow:0 .125rem .1875rem rgba(0,0,0,.1)}.t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar, .t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-tools-wrapper._disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:var(--tui-disabled-opacity)}.t-block[_ngcontent-%COMP%]{display:flex;padding:.25rem 0}.t-block[_ngcontent-%COMP%]:not(:last-child):after{content:"";display:block;margin:0 .25rem;width:1px;background:var(--tui-secondary-active)}.t-tool[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}button.t-tool[_ngcontent-%COMP%]:hover, .t-tool[_ngcontent-%COMP%]     button:hover{background:var(--tui-secondary-hover)}.t-tool_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-font[_ngcontent-%COMP%]{padding:.3em 0;outline:none;width:100%;pointer-events:none}.t-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;font-size:0;opacity:0;cursor:pointer}.t-image[_ngcontent-%COMP%]::-webkit-file-upload-button{display:none}.t-file-upload[_ngcontent-%COMP%]{display:none}.t-color-picker[_ngcontent-%COMP%]     tui-hosted-dropdown, .t-color-picker[_ngcontent-%COMP%]     tui-color-picker, .t-color-picker[_ngcontent-%COMP%]     tui-color-edit{display:none}.t-prevent-parent-label-behavior[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),(0,v.gn)([(0,N.tuiDefaultProp)()],O.prototype,"colors",void 0),(0,v.gn)([(0,N.tuiDefaultProp)()],O.prototype,"disabled",void 0),(0,v.gn)([(0,N.tuiDefaultProp)(function(R){return!R.includes(g._.Tex)&&!R.includes(g._.Attach)},"Attach and TeX are not yet implemented in Editor")],O.prototype,"tools",null)},19074:(jt,Mt,c)=>{c.d(Mt,{hK:()=>l,sw:()=>v,Db:()=>P,RR:()=>g});const v=new Map([["transparent","transparent"],["color-black-300","#333333"],["color-black-200","#666666"],["color-black-100","#909090"],["color-yellow-100","#FFDD2C"],["color-yellow-200","#FCC521"],["color-yellow-300","#FAB618"],["color-gray-100","#f5f5f6"],["color-gray-200","#e7e8ea"],["color-gray-300","#cbcfd3"],["color-gray-400","#959ba4"],["color-gray-500","#79818c"],["color-gray-600","#616871"],["color-light-blue-100","#ecf1f7"],["color-light-blue-200","#e4ebf3"],["color-light-blue-300","#dde4ed"],["color-blue-100","#1771e6"],["color-blue-200","#1464cc"],["color-blue-300","#0953b3"],["color-green-100","#39b54a"],["color-green-200","#2ca53a"],["color-green-300","#168a21"],["color-red-100","#e01f19"],["color-red-200","#d3120e"],["color-red-300","#c40b08"]]),l="rgb(51, 51, 51)";var y=c(48699);const P=[y._.Undo,y._.Size,y._.Bold,y._.Italic,y._.Underline,y._.Align,y._.List,y._.Quote,y._.Link,y._.Anchor,y._.Color,y._.Hilite,y._.Clear,y._.Strikethrough,y._.Code,y._.Img,y._.HR,y._.Sup,y._.Sub,y._.Table,y._.Details];function g(it){return[{px:13,name:it.small},{px:15,name:it.normal},{px:17,name:it.large},{px:24,family:"var(--tui-font-heading)",name:it.subtitle,headingLevel:2,weight:"bold"},{px:30,family:"var(--tui-font-heading)",name:it.title,headingLevel:1,weight:"bold"}]}},60153:(jt,Mt,c)=>{c.d(Mt,{Z:()=>l});var v=c(74788);let l=(()=>{class y{constructor(){this.imagePreview=new v.vpe}click(g){g instanceof HTMLImageElement&&this.imagePreview.emit(g)}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275dir=v.lG2({type:y,selectors:[["tui-editor-socket","imagePreview",""]],hostAttrs:[1,"_preview-image"],hostBindings:function(g,it){1&g&&v.NdJ("click",function(X){return it.click(X.target)})},outputs:{imagePreview:"imagePreview"}}),y})()},84614:(jt,Mt,c)=>{c.d(Mt,{Zj:()=>v.Z,BN:()=>y,JU:()=>P.JU,mJ:()=>P.mJ,$3:()=>P.$3});var v=c(60153),l=c(74788);let y=(()=>{class g{}return g.\u0275fac=function(N){return new(N||g)},g.\u0275mod=l.oAB({type:g}),g.\u0275inj=l.cJS({}),g})();var P=c(82113)},82113:(jt,Mt,c)=>{c.d(Mt,{JU:()=>v.J,mJ:()=>y,$3:()=>P.$});var v=c(74982),l=c(74788);let y=(()=>{class g{}return g.\u0275fac=function(N){return new(N||g)},g.\u0275mod=l.oAB({type:g}),g.\u0275inj=l.cJS({}),g})();var P=c(76954)},74982:(jt,Mt,c)=>{c.d(Mt,{J:()=>it});var v=c(74788),l=c(14309),y=c(50259),P=c(46782),g=c(76954);let it=(()=>{class N{constructor(tt,ft,ut,et,_t,Tt){this.elementRef=tt,this.renderer=ft,this.editor=ut,this.editorContainer=et,this.editorLoaded$=_t,this.valueChange=this.editor.valueChange$,this.stateChange=this.editor.stateChange$,this.editorLoaded$.pipe((0,P.R)(Tt)).subscribe(()=>{this.renderer.appendChild(this.elementRef.nativeElement,this.editorContainer)})}set value(tt){tt!==this.editor.html&&this.editor.setValue(tt)}set editable(tt){this.editor.editable=tt}}return N.\u0275fac=function(tt){return new(tt||N)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(g.$),v.Y36(l.Y1),v.Y36(l.ZW),v.Y36(y.TuiDestroyService,2))},N.\u0275dir=v.lG2({type:N,selectors:[["","tuiTiptapEditor",""]],inputs:{value:"value",editable:"editable"},outputs:{valueChange:"valueChange",stateChange:"stateChange"},features:[v._Bn([y.TuiDestroyService])]}),N})()},76954:(jt,Mt,c)=>{c.d(Mt,{$:()=>tt});var v=c(77361),l=c(14309),y=c(27863),P=c(39761),g=c(88002),it=c(87519),X=c(74788);let tt=(()=>{class ft extends v._{constructor(et){super(),this.editorRef=et,this.editorRef.subscribe(_t=>{this.editor=_t,_t.on("transaction",()=>{this.stateChange$.next()}),_t.on("update",()=>{const Tt=_t.getHTML(),It=function(ft){return Array.isArray(ft)&&1===ft.length&&!ft[0].hasOwnProperty("content")}(_t.getJSON().content)?"":Tt;this.valueChange$.next(It)})})}get isFocused(){return this.editor.isFocused}get html(){return this.editor.getHTML()}get editable(){return this.editor.isEditable}set editable(et){this.editor.setEditable(et)}get state(){return this.editor.state}getOriginTiptapEditor(){return this.editor}undoDisabled(){return!this.editor.can().undo()}redoDisabled(){return!this.editor.can().redo()}getFontColor(){return this.editor.getAttributes("textStyle").fontColor||"rgb(51, 51, 51)"}getBackgroundColor(){var et;return(null===(et=this.editor)||void 0===et?void 0:et.getAttributes("textStyle").backgroundColor)||"rgb(51, 51, 51)"}getCellColor(){return this.editor.getAttributes("tableCell").background||this.editor.getAttributes("tableHeader").background}getGroupColor(){var et,_t,Tt,bt;if(this.editor.isActive("group")){const It=null!==(_t=null===(et=this.editor.getAttributes("group"))||void 0===et?void 0:et.style)&&void 0!==_t?_t:"",Pt=(0,y.jx)(It);return null!==(bt=null!==(Tt=Pt["background-color"])&&void 0!==Tt?Tt:Pt.background)&&void 0!==bt?bt:""}return""}onAlign(et){this.editor.chain().focus().setTextAlign(et).run()}setImage(et){this.editor.chain().focus().command(({commands:_t,state:Tt})=>{var bt;const It=null!==(bt=_t.setEditableImage)&&void 0!==bt?bt:_t.setImage;if(It){const Pt=Tt.selection.anchor;return It({src:et}),_t.setTextSelection(Pt),_t.insertContent("<p></p>"),!0}return!1}).run()}undo(){this.editor.chain().undo().run()}redo(){this.editor.chain().redo().run()}setHorizontalRule(){this.editor.chain().focus().setHorizontalRule().run()}removeFormat(){this.editor.commands.unsetAllMarks(),this.editor.commands.clearNodes()}setFontColor(et){this.editor.chain().focus().setFontColor(et).run()}setBackgroundColor(et){this.editor.chain().focus().setBackgroundColor(et).run()}toggleUnderline(){this.editor.chain().focus().toggleUnderline().run()}toggleStrike(){this.editor.chain().focus().toggleStrike().run()}toggleOrderedList(){this.editor.chain().focus().toggleOrderedList().run()}toggleUnorderedList(){this.editor.chain().focus().toggleBulletList().run()}togglePre(){this.editor.chain().focus().toggleCodeBlock().run()}sinkListItem(){this.editor.chain().focus().sinkListItem("listItem").run()}liftListItem(){this.editor.chain().focus().liftListItem("listItem").run()}isActive(et){return this.editor.isActive(et)}isActive$(et){return this.stateChange$.pipe((0,P.O)(null),(0,g.U)(()=>this.isActive(et)),(0,it.x)())}toggleBold(){this.editor.chain().focus().toggleBold().run()}toggleCode(){this.editor.chain().focus().toggleCode().run()}toggleItalic(){this.editor.chain().focus().toggleItalic().run()}toggleBlockquote(){this.editor.chain().focus().toggleBlockquote().run()}toggleSubscript(){this.editor.chain().focus().toggleSubscript().run()}toggleSuperscript(){this.editor.chain().focus().toggleSuperscript().run()}toggleCodeBlock(){this.editor.chain().focus().toggleCodeBlock().run()}insertTable(et,_t){this.editor.chain().focus().insertTable({cols:et,rows:_t}).run()}addColumnAfter(){this.editor.chain().focus().addColumnAfter().run()}addColumnBefore(){this.editor.chain().focus().addColumnBefore().run()}addRowAfter(){this.editor.chain().focus().addRowAfter().run()}addRowBefore(){this.editor.chain().focus().addRowBefore().run()}deleteColumn(){this.editor.chain().focus().deleteColumn().run()}deleteRow(){this.editor.chain().focus().deleteRow().run()}mergeCells(){this.editor.chain().focus().mergeCells().run()}splitCell(){this.editor.chain().focus().splitCell().run()}canMergeCells(){return this.editor.can().mergeCells()}canSplitCells(){return this.editor.can().splitCell()}setHeading(et){this.editor.chain().focus().setHeading({level:et}).run()}setParagraph(et){this.editor.chain().focus().setParagraph().run(),et&&this.editor.chain().setMark("textStyle",et).run()}setHardBreak(){this.editor.chain().setHardBreak().run()}setTextSelection(et){this.editor.commands.setTextSelection(et)}toggleLink(et){this.editor.chain().focus().toggleLink({href:et}).run()}setLink(et){this.editor.chain().focus().setLink({href:et}).run()}unsetLink(){this.editor.chain().focus().unsetLink().run()}focus(){this.editor.chain().focus().run()}setValue(et){this.editor.commands.setContent(et)}destroy(){this.editor.destroy()}setCellColor(et){this.editor.chain().focus().setCellBackground(et).run()}selectClosest(){const et=this.editor.state.selection.anchor,{schema:_t,doc:Tt}=this.editor.state,bt=(0,y.Yz)(Tt.resolve(et),_t.marks.link);bt&&this.editor.chain().setTextSelection(bt).run()}enter(){this.editor.commands.enter()}setDetails(){this.editor.commands.setDetails()}removeDetails(){this.editor.commands.removeDetails()}setGroup(){this.editor.commands.setGroup()}removeGroup(){this.editor.commands.removeGroup()}setGroupHilite(et){this.editor.commands.setGroupHilite(et)}setAnchor(et){this.editor.commands.setAnchor(et.replace("#",""))}removeAnchor(){this.editor.commands.removeAnchor()}setFileLink(et){this.editor.commands.setFileLink(et)}setYoutubeVideo(et){this.editor.commands.setYoutubeVideo(et)}setIframe(et){this.editor.commands.setIframe(et)}removeEmptyTextStyle(){this.editor.commands.removeEmptyTextStyle()}toggleMark(et,_t,Tt){this.editor.commands.toggleMark(et,_t,Tt)}}return ft.\u0275fac=function(et){return new(et||ft)(X.LFG(l.ZW))},ft.\u0275prov=X.Yz7({token:ft,factory:ft.\u0275fac}),ft})()},48699:(jt,Mt,c)=>{c.d(Mt,{_:()=>v});var v=(()=>{return(l=v||(v={})).Undo="undo",l.Anchor="anchor",l.Size="fontSize",l.Bold="bold",l.Italic="italic",l.Underline="underline",l.Strikethrough="strikeThrough",l.Align="justify",l.List="list",l.Quote="quote",l.Color="foreColor",l.Hilite="hiliteColor",l.Clear="clear",l.Link="link",l.Attach="attach",l.Tex="tex",l.Code="code",l.Img="image",l.HR="insertHorizontalRule",l.Sup="superscript",l.Sub="subscript",l.Table="insertTable",l.MergeCells="mergeCells",l.SplitCells="splitCells",l.RowsColumnsManaging="rowsColumnsManaging",l.Details="details",l.Group="group",v;var l})()},15736:(jt,Mt,c)=>{c.r(Mt),c.d(Mt,{BackgroundColor:()=>y}),c(84402);const y=c(12867).Extension.create({name:"backgroundColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,renderHTML:({backgroundColor:P})=>P?{style:`background-color: ${P}`}:{},parseHTML:({style:P})=>P.backgroundColor.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setBackgroundColor:P=>({chain:g})=>g().setMark("textStyle",{backgroundColor:P}).run(),unsetBackgroundColor:()=>({chain:P})=>P().setMark("textStyle",{backgroundColor:null}).run()})})},93763:(jt,Mt,c)=>{c.r(Mt),c.d(Mt,{TuiFileLink:()=>l});const l=c(12867).Extension.create({name:"fileLink",addCommands:()=>({setFileLink:y=>({state:P,chain:g})=>{const{selection:it}=P,X='<span style="font-size: 15px"> </span>';return(Math.abs(it.to-it.from)>0?g().toggleMark("link",{href:y.link},{extendEmptyMarkRange:!0}).setTextSelection(it.to).insertContent(X):g().insertContent(`<a href="${y.link}">${y.name}</a>${X}`)).setTextSelection(it.to).run()}})})},52658:(jt,Mt,c)=>{c.r(Mt),c.d(Mt,{FontColor:()=>y}),c(84402);const y=c(12867).Extension.create({name:"fontColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontColor:{default:null,renderHTML:({fontColor:P})=>P?{style:`color: ${P}`}:{},parseHTML:({style:P})=>P.color.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setFontColor:P=>({chain:g})=>g().setMark("textStyle",{fontColor:P}).run(),unsetFontColor:()=>({chain:P})=>P().setMark("textStyle",{fontColor:null}).run()})})},9492:(jt,Mt,c)=>{c.r(Mt),c.d(Mt,{TuiFontSize:()=>y}),c(84402);const y=c(12867).Extension.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:({style:P})=>P.fontSize,renderHTML:({fontSize:P})=>P?{style:`font-size: ${P}`}:{}}}}]},addCommands:()=>({setFontSize:P=>({chain:g})=>g().setMark("textStyle",{fontSize:P}).run(),unsetFontSize:()=>({chain:P})=>P().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()})})},54920:(jt,Mt,c)=>{c.r(Mt),c.d(Mt,{TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>y,createGroupExtension:()=>P});var v=c(27863),l=c(12867);const y={groupNodeClass:"tui-group-node",groupPointerNodeClass:"tui-group-pointer",nested:!0,draggable:!0,createOnEnter:!1},P=(g={})=>{const{draggable:it,nested:N,groupNodeClass:X,groupPointerNodeClass:tt,createOnEnter:ft}=Object.assign(Object.assign({},y),g);return l.Node.create({name:"group",draggable:it,group:"block",content:N?"block+":"block",addAttributes:()=>({style:{default:null,parseHTML:ut=>ut.getAttribute("style"),renderHTML:ut=>ut.style?{style:ut.style}:{}}}),parseHTML:()=>[{tag:'div[data-type="group"]'}],renderHTML:({HTMLAttributes:ut})=>["div",(0,l.mergeAttributes)(ut,{"data-type":"group"}),0],addNodeView:()=>({HTMLAttributes:ut,node:et})=>{const _t=document.createElement("div"),Tt=document.createElement("div");if(_t.classList.add(X),Tt.setAttribute("data-type","group"),ut.style&&(et.attrs.style=ut.style,Tt.setAttribute("style",ut.style)),it){const bt=document.createElement("div");bt.classList.add(tt),bt.innerHTML="",bt.contentEditable="false",_t.append(bt,Tt)}else _t.append(Tt);return{dom:_t,contentDOM:Tt}},addCommands(){return{setGroup:()=>({commands:ut,state:et})=>{this.editor.chain().focus().run();const _t=(0,v.Ap)(et,""),bt=`<div data-type="group">${_t.trim().startsWith("<p>")?_t:`<p>${_t}</p>`}</div>`;return ut.insertContent(bt)},setGroupHilite:ut=>({editor:et})=>{for(let _t=et.state.selection.$anchor,Tt=_t.depth;Tt>0;Tt--){const bt=_t.node(Tt);if(bt.type.name===this.name){setTimeout(()=>et.commands.updateAttributes(bt.type,{style:`background: ${ut}`}));break}}return!0},removeGroup:()=>({state:ut,dispatch:et})=>(0,v.yU)(ut,et,this.name)}},addKeyboardShortcuts(){return ft?{Enter:()=>this.editor.commands.setGroup()}:{}}})}},20854:(jt,Mt,c)=>{c.r(Mt),c.d(Mt,{TUI_IFRAME_EDITOR_OPTIONS:()=>it,TuiIframeEditorComponent:()=>X,TuiIframeEditorModule:()=>et,createIframeEditorExtension:()=>ut});var v=c(12057),l=c(91211),y=c(95110),P=c(50259),g=c(74788);const it=new g.OlP("[TUI_IFRAME_EDITOR_OPTIONS]",{factory:()=>({minWidth:100,maxWidth:1/0,minHeight:100,maxHeight:1/0})});var N=c(96570);let X=(()=>{class _t extends y._3{constructor(bt,It,Pt,Dt){super(It,Dt),this.options=bt,this.sanitizer=Pt}get src(){var bt;return this.sanitizer.bypassSecurityTrustResourceUrl(null!==(bt=this.attrs.src)&&void 0!==bt?bt:"")}updateSize([bt,It]){this._width=Math.max(this.options.minWidth,Math.min(this.options.maxWidth,bt)),this._height=Math.max(this.options.minHeight,Math.min(this.options.maxHeight,It))}}return _t.\u0275fac=function(bt){return new(bt||_t)(g.Y36(it),g.Y36(v.K0),g.Y36(l.H7),g.Y36(P.TuiDestroyService,2))},_t.\u0275cmp=g.Xpm({type:_t,selectors:[["tui-iframe-editor"]],features:[g._Bn([P.TuiDestroyService]),g.qOj],decls:2,vars:13,consts:[[3,"width","height","sizeChange"],[3,"src","width","height"]],template:function(bt,It){1&bt&&(g.TgZ(0,"tui-editor-resizable",0),g.NdJ("sizeChange",function(Dt){return It.updateSize(Dt)}),g._UZ(1,"iframe",1),g.qZA()),2&bt&&(g.Q6J("width",It.width)("height",It.height),g.xp6(1),g.Udp("min-width",It.options.minWidth)("min-height",It.options.minHeight)("max-width",It.options.maxWidth)("max-height",It.options.maxHeight),g.Q6J("src",It.src,g.uOi)("width",It.width)("height",It.height))},directives:[N.V],styles:["iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}"],changeDetection:0}),_t})();var tt=c(40400),ft=c(12867);const ut=_t=>ft.Node.create({name:"iframe",group:"block",atom:!0,draggable:!1,parseHTML:()=>[{tag:'iframe[data-type="iframe-editor"]'}],addAttributes(){return{src:{default:null,keepOnSplit:!1,parseHTML:Tt=>Tt.getAttribute("src")},frameborder:{default:0,keepOnSplit:!1,parseHTML:Tt=>Tt.getAttribute("frameborder")},width:{default:"100%",keepOnSplit:!1,parseHTML:Tt=>Tt.getAttribute("width")},height:{default:null,keepOnSplit:!1,parseHTML:Tt=>Tt.getAttribute("height")},allowfullscreen:{keepOnSplit:!1,default:this.options.allowFullscreen,parseHTML:Tt=>Tt.getAttribute("allowfullscreen")}}},renderHTML:({HTMLAttributes:Tt})=>["iframe",(0,ft.mergeAttributes)(Tt,{"data-type":"iframe-editor"})],addNodeView:()=>(0,tt.x)(X,{injector:_t}),addCommands(){return{setIframe:Tt=>({commands:bt,state:It})=>{const Pt=It.selection.anchor;return bt.enter(),bt.setTextSelection(Pt),bt.insertContent({type:this.name,attrs:Tt}),bt.setTextSelection(It.selection.anchor),!0}}}});let et=(()=>{class _t{}return _t.\u0275fac=function(bt){return new(bt||_t)},_t.\u0275mod=g.oAB({type:_t}),_t.\u0275inj=g.cJS({imports:[[y.Sl]]}),_t})()},53380:(jt,Mt,c)=>{c.r(Mt),c.d(Mt,{TUI_EDITOR_MAX_IMAGE_WIDTH:()=>N,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>it,TUI_IMAGE_EDITOR_OPTIONS:()=>X,TuiImageEditorComponent:()=>ft,TuiImageEditorModule:()=>q,createImageEditorExtension:()=>Pt,tuiCreateImageEditorExtension:()=>ht});var v=c(12057),l=c(91211),y=c(95110),P=c(50259),g=c(74788);const it=new g.OlP("[TUI_EDITOR_MIN_IMAGE_WIDTH]",{factory:()=>null}),N=new g.OlP("[TUI_EDITOR_MAX_IMAGE_WIDTH]",{factory:()=>null}),X=new g.OlP("[TUI_IMAGE_EDITOR_OPTIONS]",{factory:()=>({minWidth:100,maxWidth:1/0})});var tt=c(96570);let ft=(()=>{class F extends y._3{constructor(j,At,St,Et,Lt,Ht){super(Et,Ht),this.minWidth=j,this.maxWidth=At,this.options=St,this.sanitizer=Lt}get dragHandle(){var j;return null!==(j=this.attrs.draggable)&&void 0!==j?j:null}get height(){return null}get alt(){return this.attrs.alt||""}get title(){return this.attrs.title||""}get src(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.attrs.src)}updateSize([j]){var At,St;const Et=null!==(At=this.minWidth)&&void 0!==At?At:this.options.minWidth,Lt=null!==(St=this.maxWidth)&&void 0!==St?St:this.options.maxWidth;this._width=Math.max(Et,Math.min(Lt,j))}}return F.\u0275fac=function(j){return new(j||F)(g.Y36(it),g.Y36(N),g.Y36(X),g.Y36(v.K0),g.Y36(l.H7),g.Y36(P.TuiDestroyService,2))},F.\u0275cmp=g.Xpm({type:F,selectors:[["tui-image-editor"]],hostVars:1,hostBindings:function(j,At){2&j&&g.uIk("data-drag-handle",At.dragHandle)},features:[g._Bn([P.TuiDestroyService]),g.qOj],decls:2,vars:10,consts:[[3,"width","autoHeight","sizeChange"],[3,"src","width","alt","title"]],template:function(j,At){1&j&&(g.TgZ(0,"tui-editor-resizable",0),g.NdJ("sizeChange",function(Et){return At.updateSize(Et)}),g._UZ(1,"img",1),g.qZA()),2&j&&(g.Q6J("width",At.width)("autoHeight",!0),g.xp6(1),g.Udp("min-width",At.options.minWidth,"px")("max-width",At.options.maxWidth,"px"),g.Q6J("src",At.src,g.LSH)("width",At.width)("alt",At.alt)("title",At.title))},directives:[tt.V],styles:["[data-drag-handle][_nghost-%COMP%]{cursor:move}img[_ngcontent-%COMP%]{pointer-events:none}"],changeDetection:0}),F})();var ut=c(40400),et=c(12867),_t=c(44632),Tt=c(62463);const bt=[{tag:'img[data-type="image-editor"]'}],It={src:{default:"",keepOnSplit:!1},width:{default:300,keepOnSplit:!1},alt:{default:"",keepOnSplit:!1},title:{default:"",keepOnSplit:!1}};function Pt(F,{draggable:mt}={}){const j=!(0,P.tuiIsPresent)(mt)||mt;return _t.Image.extend({name:"imageEditor",group:"block",atom:!0,draggable:j,parseHTML:()=>bt,addAttributes:()=>Object.assign(Object.assign({},It),{draggable:{default:j?"":null,keepOnSplit:!1}}),renderHTML:({HTMLAttributes:At})=>["img",(0,et.mergeAttributes)(At,{"data-type":"image-editor"})],addNodeView:()=>(0,ut.x)(ft,{injector:F}),addCommands(){return{setEditableImage:At=>({commands:St})=>St.insertContent({type:this.name,attrs:At})}},addProseMirrorPlugins:()=>[new Tt.Sy({props:{handleDOMEvents:{paste:Dt,drop:Dt}}})]})}function Dt(F,mt){var j;const At=mt instanceof DragEvent?mt.dataTransfer:mt.clipboardData,St=Array.from(null!==(j=null==At?void 0:At.files)&&void 0!==j?j:[]).filter(Et=>/image/i.test(Et.type));St.length&&mt.preventDefault();for(const Et of St){const Lt=new FileReader;Lt.onload=Ht=>{var Kt;const pt=F.state.schema.nodes.imageEditor.create({src:null===(Kt=Ht.target)||void 0===Kt?void 0:Kt.result}),B=F.state.tr.replaceSelectionWith(pt);setTimeout(()=>F.dispatch(B))},Lt.readAsDataURL(Et)}}function ht({injector:F,draggable:mt}){return Pt(F,{draggable:mt})}let q=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=g.oAB({type:F}),F.\u0275inj=g.cJS({imports:[[v.ez,y.Sl]]}),F})()},12177:(jt,Mt,c)=>{function l(P){return P.isActive("bulletList")||P.isActive("orderedList")}c.r(Mt),c.d(Mt,{TuiTabExtension:()=>y,tuiIsOrderedOrBulletList:()=>l});const y=c(12867).Extension.create({name:"indent",addKeyboardShortcuts(){return{Tab:()=>l(this.editor)?null:this.editor.commands.insertContent("\t")}}})},82091:(jt,Mt,c)=>{c.r(Mt),c.d(Mt,{TuiLink:()=>C});var v=c(27863),l=c(12867);const g=(m,f)=>{for(const M in f)m[M]=f[M];return m},it="numeric",N="ascii",X="alpha",tt="asciinumeric",ft="alphanumeric",ut="domain",bt="whitespace";function It(m,f){return m in f||(f[m]=[]),f[m]}function Pt(m,f,M){f[it]&&(f[tt]=!0,f[ft]=!0),f[N]&&(f[tt]=!0,f[X]=!0),f[tt]&&(f[ft]=!0),f[X]&&(f[ft]=!0),f[ft]&&(f[ut]=!0),f.emoji&&(f[ut]=!0);for(const x in f){const L=It(x,M);L.indexOf(m)<0&&L.push(m)}}function ht(m){void 0===m&&(m=null),this.j={},this.jr=[],this.jd=null,this.t=m}ht.groups={},ht.prototype={accepts(){return!!this.t},go(m){const f=this,M=f.j[m];if(M)return M;for(let x=0;x<f.jr.length;x++){const L=f.jr[x][0],Y=f.jr[x][1];if(Y&&L.test(m))return Y}return f.jd},has(m,f){return void 0===f&&(f=!1),f?m in this.j:!!this.go(m)},ta(m,f,M,x){for(let L=0;L<m.length;L++)this.tt(m[L],f,M,x)},tr(m,f,M,x){let L;return x=x||ht.groups,f&&f.j?L=f:(L=new ht(f),M&&x&&Pt(f,M,x)),this.jr.push([m,L]),L},ts(m,f,M,x){let L=this;const Y=m.length;if(!Y)return L;for(let W=0;W<Y-1;W++)L=L.tt(m[W]);return L.tt(m[Y-1],f,M,x)},tt(m,f,M,x){x=x||ht.groups;const L=this;if(f&&f.j)return L.j[m]=f,f;const Y=f;let W,G=L.go(m);if(G?(W=new ht,g(W.j,G.j),W.jr.push.apply(W.jr,G.jr),W.jd=G.jd,W.t=G.t):W=new ht,Y){if(x)if(W.t&&"string"==typeof W.t){const vt=g(function(m,f){const M={};for(const x in f)f[x].indexOf(m)>=0&&(M[x]=!0);return M}(W.t,x),M);Pt(Y,vt,x)}else M&&Pt(Y,M,x);W.t=Y}return L.j[m]=W,W}};const q=(m,f,M,x,L)=>m.ta(f,M,x,L),F=(m,f,M,x,L)=>m.tr(f,M,x,L),mt=(m,f,M,x,L)=>m.ts(f,M,x,L),j=(m,f,M,x,L)=>m.tt(f,M,x,L),At="WORD",St="UWORD",Et="LOCALHOST",Ht="UTLD",Kt="SCHEME",pt="SLASH_SCHEME",B="NUM",st="OPENBRACE",J="OPENBRACKET",Q="OPENANGLEBRACKET",ot="OPENPAREN",kt="CLOSEBRACE",$t="CLOSEBRACKET",Yt="CLOSEANGLEBRACKET",ee="CLOSEPAREN",zt="AMPERSAND",ue="APOSTROPHE",ye="ASTERISK",Oe="AT",he="BACKSLASH",Ke="BACKTICK",xe="CARET",Be="COLON",ge="COMMA",Ae="DOLLAR",ve="DOT",Pe="EQUALS",Ne="EXCLAMATION",Me="HYPHEN",Ie="PERCENT",Ze="PIPE",He="PLUS",Ue="POUND",Le="QUERY",ze="QUOTE",_e="SEMI",fe="SLASH",Ee="TILDE",gt="UNDERSCORE",b="EMOJI",O="SYM";var I=Object.freeze({__proto__:null,WORD:At,UWORD:St,LOCALHOST:Et,TLD:"TLD",UTLD:Ht,SCHEME:Kt,SLASH_SCHEME:pt,NUM:B,WS:"WS",NL:"NL",OPENBRACE:st,OPENBRACKET:J,OPENANGLEBRACKET:Q,OPENPAREN:ot,CLOSEBRACE:kt,CLOSEBRACKET:$t,CLOSEANGLEBRACKET:Yt,CLOSEPAREN:ee,AMPERSAND:zt,APOSTROPHE:ue,ASTERISK:ye,AT:Oe,BACKSLASH:he,BACKTICK:Ke,CARET:xe,COLON:Be,COMMA:ge,DOLLAR:Ae,DOT:ve,EQUALS:Pe,EXCLAMATION:Ne,HYPHEN:Me,PERCENT:Ie,PIPE:Ze,PLUS:He,POUND:Ue,QUERY:Le,QUOTE:ze,SEMI:_e,SLASH:fe,TILDE:Ee,UNDERSCORE:gt,EMOJI:b,SYM:O});const R=/[a-z]/,V=/\p{L}/u,U=/\p{Emoji}/u,wt=/\d/,H=/\s/;let w=null,K=null;function te(m,f,M,x,L){let Y;const W=f.length;for(let G=0;G<W-1;G++){const vt=f[G];m.j[vt]?Y=m.j[vt]:(Y=new ht(x),Y.jr=L.slice(),m.j[vt]=Y),m=Y}return Y=new ht(M),Y.jr=L.slice(),m.j[f[W-1]]=Y,Y}function ke(m){const f=[],M=[];let x=0;for(;x<m.length;){let Y=0;for(;"0123456789".indexOf(m[x+Y])>=0;)Y++;if(Y>0){f.push(M.join(""));let W=parseInt(m.substring(x,x+Y),10);for(;W>0;W--)M.pop();x+=Y}else"_"===m[x]?(f.push(M.join("")),x++):(M.push(m[x]),x++)}return f}const Je={defaultProtocol:"http",events:null,format:S,formatHref:S,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function $(m,f){void 0===f&&(f=null);let M=g({},Je);m&&(M=g(M,m instanceof $?m.o:m));const x=M.ignoreTags,L=[];for(let Y=0;Y<x.length;Y++)L.push(x[Y].toUpperCase());this.o=M,f&&(this.defaultRender=f),this.ignoreTags=L}function S(m){return m}function Ct(m,f){this.t="token",this.v=m,this.tk=f}function yt(m,f){class M extends Ct{constructor(L,Y){super(L,Y),this.t=m}}for(const x in f)M.prototype[x]=f[x];return M.t=m,M}$.prototype={o:Je,ignoreTags:[],defaultRender:m=>m,check(m){return this.get("validate",m.toString(),m)},get(m,f,M){const x=null!=f;let L=this.o[m];return L&&("object"==typeof L?(L=M.t in L?L[M.t]:Je[m],"function"==typeof L&&x&&(L=L(f,M))):"function"==typeof L&&x&&(L=L(f,M.t,M)),L)},getObj(m,f,M){let x=this.o[m];return"function"==typeof x&&null!=f&&(x=x(f,M.t,M)),x},render(m){const f=m.render(this);return(this.get("render",null,m)||this.defaultRender)(f,m.t,m)}},Ct.prototype={isLink:!1,toString(){return this.v},toHref(m){return this.toString()},toFormattedString(m){const f=this.toString(),M=m.get("truncate",f,this),x=m.get("format",f,this);return M&&x.length>M?x.substring(0,M)+"\u2026":x},toFormattedHref(m){return m.get("formatHref",this.toHref(m.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(m){return void 0===m&&(m=Je.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(m),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(m){return{type:this.t,value:this.toFormattedString(m),isLink:this.isLink,href:this.toFormattedHref(m),start:this.startIndex(),end:this.endIndex()}},validate(m){return m.get("validate",this.toString(),this)},render(m){const f=this,M=this.toFormattedHref(m),x=m.get("tagName",M,f),L=this.toFormattedString(m),Y={},W=m.get("className",M,f),G=m.get("target",M,f),vt=m.get("rel",M,f),xt=m.getObj("attributes",M,f),Nt=m.getObj("events",M,f);return Y.href=M,W&&(Y.class=W),G&&(Y.target=G),vt&&(Y.rel=vt),xt&&g(Y,xt),{tagName:x,attributes:Y,content:L,eventListeners:Nt}}};const Ft=yt("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Wt=yt("text"),Qt=yt("nl"),ne=yt("url",{isLink:!0,toHref(m){return void 0===m&&(m=Je.defaultProtocol),this.hasProtocol()?this.v:`${m}://${this.v}`},hasProtocol(){const m=this.tk;return m.length>=2&&m[0].t!==Et&&m[1].t===Be}}),se=m=>new ht(m);function we(m,f,M){return new m(f.slice(M[0].s,M[M.length-1].e),M)}const We="undefined"!=typeof console&&console&&console.warn||(()=>{}),de={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function pn(m,f){if(void 0===f&&(f=!1),de.initialized&&We(`linkifyjs: already initialized - will not register custom scheme "${m}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(m))throw new Error('linkifyjs: incorrect scheme format.\n 1. Must only contain digits, lowercase ASCII letters or "-"\n 2. Cannot start or end with "-"\n 3. "-" cannot repeat');de.customSchemes.push([m,f])}function _n(m){return de.initialized||function(){de.scanner=function(m){void 0===m&&(m=[]);const f={};ht.groups=f;const M=new ht;null==w&&(w=ke("aaa1rp3barth4b_ott3vie4c1le2ogado5udhabi7c_ademy5centure6ountant_s9o1tor4d_s1ult4e_g1ro2tna4f_l1rica5g_akhan5ency5i_g1rbus3force5tel5kdn3l_faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m_azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o_l2partments8p_le4q_uarelle8r_ab1mco4chi3my2pa2t_e3s_da2ia2sociates9t_hleta5torney7u_ction5di_ble3o3spost5thor3o_s4vianca6w_s2x_a2z_ure5ba_by2idu3namex3narepublic11d1k2r_celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b_c1t1va3cg1n2d1e_ats2uty4er2ntley5rlin4st_buy5t2f1g1h_arti5i_ble3d1ke2ng_o3o1z2j1lack_friday9ockbuster8g1omberg7ue3m_s1w2n_pparibas9o_ats3ehringer8fa2m1nd2o_k_ing5sch2tik2on4t1utique6x2r_adesco6idgestone9oadway5ker3ther5ussels7s1t1uild_ers6siness6y1zz3v1w1y1z_h3ca_b1fe2l_l1vinklein9m_era3p2non3petown5ital_one8r_avan4ds2e_er_s4s2sa1e1h1ino4t_ering5holic7ba1n1re2s2c1d1enter4o1rn3f_a1d2g1h_anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i_priani6rcle4sco3tadel4i_c2y_eats7k1l_aims4eaning6ick2nic1que6othing5ud3ub_med6m1n1o_ach3des3ffee4llege4ogne5m_cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking_channel11l1p2rsica5untry4pon_s4rses6pa2r_edit_card4union9icket5own3s1uise_s6u_isinella9v1w1x1y_mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e_al_er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si_gn4v2hl2iamonds6et2gital5rect_ory7scount3ver5h2y2j1k1m1np2o_cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c_o2deka3u_cation8e1g1mail3erck5nergy4gineer_ing9terprises10pson4quipment8r_icsson6ni3s_q1tate5t_isalat7u_rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n_s2rm_ers5shion4t3edex3edback6rrari3ero6i_at2delity5o2lm2nal1nce1ial7re_stone6mdale6sh_ing5t_ness6j1k1lickr3ghts4r2orist4wers5y2m1o_o_d_network8tball6rd1ex2sale4um3undation8x2r_ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n_d2rniture7tbol5yi3ga_l_lery3o1up4me_s3p1rden4y2b_iz3d_n2e_a1nt_ing5orge5f1g_ee3h1i_ft_s3ves2ing5l_ass3e1obal2o4m_ail3bh2o1x2n1odaddy5ld_point6f2o_dyear5g_le4p1t1v2p1q1r_ainger5phics5tis4een3ipe3ocery4up4s1t1u_ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc_bank7ealth_care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k_t2m1n1ockey4ldings5iday5medepot5goods5s_ense7nda3rse3spital5t_ing5t_eles2s3mail5use3w2r1sbc3t1u_ghes5yatt3undai7ibm2cbc2e1u2d1e_ee3fm2kano4l1m_amat4db2mo_bilien9n_c1dustries8finiti5o2g1k1stitute6urance4e4t_ernational10uit4vestments10o1piranga7q1r_ish4s_maili5t_anbul7t_au2v3jaguar4va3cb2e_ep2tzt3welry6io2ll2m_p2nj2o_bs1urg4t1y2p_morgan6rs3uegos4niper7kaufen5ddi3e_rryhotels6logistics9properties14fh2g1h1i_a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p_mg2n2r_d1ed3uokgroup8w1y_oto4z2la_caixa5mborghini8er3ncaster5ia3d_rover6xess5salle5t_ino3robe5w_yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i_dl2fe_insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan_s3cker3us3l1ndon4tte1o3ve3pl_financial11r1s1t_d_a3u_ndbeck6xe1ury5v1y2ma_cys3drid4if1son4keup4n_agement7go3p1rket_ing3s4riott5shalls7serati6ttel5ba2c_kinsey7d1e_d_ia3et2lbourne7me1orial6n_u2rckmsd7g1h1iami3crosoft7l1ni1t2t_subishi9k1l_b1s2m_a2n1o_bi_le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to_rcycles9v_ie4p1q1r1s_d2t_n1r2u_seum3ic3tual5v1w1x1y1z2na_b1goya4me2tura4vy3ba2c1e_c1t_bank4flix4work5ustar5w_s2xt_direct7us4f_l2g_o2hk2i_co2ke1on3nja3ssan1y5l1o_kia3rthwesternmutual14on4w_ruz3tv4p1r_a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan_group9dnavy5lo3m_ega4ne1g1l_ine5oo2pen3racle3nge4g_anic5igins6saka4tsuka4t2vh3pa_ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e_t2f_izer5g1h_armacy6d1ilips5one2to_graphy6s4ysio5ics1tet2ures6d1n_g1k2oneer5zza4k1l_ace2y_station9umbing5s3m1n_c2ohl2ker3litie5rn2st3r_america6xi3ess3ime3o_d_uctions8f1gressive8mo2perties3y5tection8u_dential9s1t1ub2w_c2y2qa1pon3uebec3st5racing4dio4e_ad1lestate6tor2y4cipes5d_stone5umbrella9hab3ise_n3t2liance6n_t_als5pair3ort3ublican8st_aurant8view_s5xroth6ich_ardli6oh3l1o1p2o_cher3ks3deo3gers4om3s_vp3u_gby3hr2n2w_e2yukyu6sa_arland6fe_ty4kura4le1on3msclub4ung5ndvik_coromant12ofi4p1rl2s1ve2xo3b_i1s2c_a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e_arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x_y3fr2g1h_angrila6rp2w2ell3ia1ksha5oes2p_ping5uji3w_time7i_lk2na1gles5te3j1k_i_n2y_pe4l_ing4m_art3ile4n_cf3o_ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa_ce3ort2t3r_l2s1t_ada2ples4r1tebank4farm7c_group6ockholm6rage3e3ream4udio2y3yle4u_cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y_dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x_i3c_i2d_k2eam2ch_nology8l1masek5nnis4va3f1g1h_d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j_maxx4x2k_maxx5l1m_all4n1o_day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r_ade1ing4ining5vel_channel7ers_insurance16ust3v2t1ube2i1nes3shu4v_s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va_cations7na1guard7c1e_gas3ntures6risign5m\xf6gensberater2ung14sicherung10t2g1i_ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u_elos6wales2mart4ter4ng_gou5tch_es6eather_channel12bcam3er2site5d_ding5ibo2r3f1hoswho6ien2ki2lliamhill9n_dows4e1ners6me2olterskluwer11odside6rk_s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u_tube6t1un3za_ppos4ra3ero3ip2m1one3uerich6w2")),null==K&&(K=ke("\u03b5\u03bb1\u03c52\u0431\u04331\u0435\u043b3\u0434\u0435\u0442\u04384\u0435\u044e2\u043a\u0430\u0442\u043e\u043b\u0438\u043a6\u043e\u043c3\u043c\u043a\u04342\u043e\u043d1\u0441\u043a\u0432\u04306\u043e\u043d\u043b\u0430\u0439\u043d5\u0440\u04333\u0440\u0443\u04412\u04442\u0441\u0430\u0439\u04423\u0440\u04313\u0443\u043a\u04403\u049b\u0430\u04373\u0570\u0561\u05753\u05d9\u05e9\u05e8\u05d0\u05dc5\u05e7\u05d5\u05dd3\u0627\u0628\u0648\u0638\u0628\u064a5\u062a\u0635\u0627\u0644\u0627\u062a6\u0631\u0627\u0645\u0643\u06485\u0644\u0627\u0631\u062f\u06464\u0628\u062d\u0631\u064a\u06465\u062c\u0632\u0627\u0626\u06315\u0633\u0639\u0648\u062f\u064a\u06296\u0639\u0644\u064a\u0627\u06465\u0645\u063a\u0631\u06285\u0645\u0627\u0631\u0627\u062a5\u06cc\u0631\u0627\u06465\u0628\u0627\u0631\u062a2\u0632\u0627\u06314\u064a\u062a\u06433\u06be\u0627\u0631\u062a5\u062a\u0648\u0646\u06334\u0633\u0648\u062f\u0627\u06463\u0631\u064a\u06295\u0634\u0628\u0643\u06294\u0639\u0631\u0627\u06422\u06282\u0645\u0627\u06464\u0641\u0644\u0633\u0637\u064a\u06466\u0642\u0637\u06313\u0643\u0627\u062b\u0648\u0644\u064a\u06436\u0648\u06453\u0645\u0635\u06312\u0644\u064a\u0633\u064a\u06275\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u06277\u0642\u06394\u0647\u0645\u0631\u0627\u06475\u067e\u0627\u06a9\u0633\u062a\u0627\u06467\u0680\u0627\u0631\u062a4\u0915\u0949\u092e3\u0928\u0947\u091f3\u092d\u093e\u0930\u0924_\u092e\u094d3\u094b\u09245\u0938\u0902\u0917\u0920\u09285\u09ac\u09be\u0982\u09b2\u09be5\u09ad\u09be\u09b0\u09a42\u09f0\u09a44\u0a2d\u0a3e\u0a30\u0a244\u0aad\u0abe\u0ab0\u0aa44\u0b2d\u0b3e\u0b30\u0b244\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe6\u0bb2\u0b99\u0bcd\u0b95\u0bc86\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd11\u0c2d\u0c3e\u0c30\u0c24\u0c4d5\u0cad\u0cbe\u0cb0\u0ca44\u0d2d\u0d3e\u0d30\u0d24\u0d025\u0dbd\u0d82\u0d9a\u0dcf4\u0e04\u0e2d\u0e213\u0e44\u0e17\u0e223\u0ea5\u0eb2\u0ea73\u10d2\u10d42\u307f\u3093\u306a3\u30a2\u30de\u30be\u30f34\u30af\u30e9\u30a6\u30c94\u30b0\u30fc\u30b0\u30eb4\u30b3\u30e02\u30b9\u30c8\u30a23\u30bb\u30fc\u30eb3\u30d5\u30a1\u30c3\u30b7\u30e7\u30f36\u30dd\u30a4\u30f3\u30c84\u4e16\u754c2\u4e2d\u4fe11\u56fd1\u570b1\u6587\u7f513\u4e9a\u9a6c\u900a3\u4f01\u4e1a2\u4f5b\u5c712\u4fe1\u606f2\u5065\u5eb72\u516b\u53662\u516c\u53f81\u76ca2\u53f0\u6e7e1\u70632\u5546\u57ce1\u5e971\u68072\u5609\u91cc_\u5927\u9152\u5e975\u5728\u7ebf2\u5927\u62ff2\u5929\u4e3b\u65593\u5a31\u4e502\u5bb6\u96fb2\u5e7f\u4e1c2\u5fae\u535a2\u6148\u55842\u6211\u7231\u4f603\u624b\u673a2\u62db\u80582\u653f\u52a11\u5e9c2\u65b0\u52a0\u57612\u95fb2\u65f6\u5c1a2\u66f8\u7c4d2\u673a\u67842\u6de1\u9a6c\u95213\u6e38\u620f2\u6fb3\u95802\u70b9\u770b2\u79fb\u52a82\u7ec4\u7ec7\u673a\u67844\u7f51\u57401\u5e971\u7ad91\u7edc2\u8054\u901a2\u8c37\u6b4c2\u8d2d\u72692\u901a\u8ca92\u96c6\u56e22\u96fb\u8a0a\u76c8\u79d14\u98de\u5229\u6d663\u98df\u54c12\u9910\u53852\u9999\u683c\u91cc\u62c93\u6e2f2\ub2f7\ub1371\ucef42\uc0bc\uc1312\ud55c\uad6d2")),j(M,"'",ue),j(M,"{",st),j(M,"[",J),j(M,"<",Q),j(M,"(",ot),j(M,"}",kt),j(M,"]",$t),j(M,">",Yt),j(M,")",ee),j(M,"&",zt),j(M,"*",ye),j(M,"@",Oe),j(M,"`",Ke),j(M,"^",xe),j(M,":",Be),j(M,",",ge),j(M,"$",Ae),j(M,".",ve),j(M,"=",Pe),j(M,"!",Ne),j(M,"-",Me),j(M,"%",Ie),j(M,"|",Ze),j(M,"+",He),j(M,"#",Ue),j(M,"?",Le),j(M,'"',ze),j(M,"/",fe),j(M,";",_e),j(M,"~",Ee),j(M,"_",gt),j(M,"\\",he);const x=F(M,wt,B,{[it]:!0});F(x,wt,x);const L=F(M,R,At,{[N]:!0});F(L,R,L);const Y=F(M,V,St,{[X]:!0});F(Y,R),F(Y,V,Y);const W=F(M,H,"WS",{[bt]:!0});j(M,"\n","NL",{[bt]:!0}),j(W,"\n"),F(W,H,W);const G=F(M,U,b,{emoji:!0});F(G,U,G),j(G,"\ufe0f",G);const vt=j(G,"\u200d");F(vt,U,G);const xt=[[R,L]],Nt=[[R,null],[V,Y]];for(let Ut=0;Ut<w.length;Ut++)te(M,w[Ut],"TLD",At,xt);for(let Ut=0;Ut<K.length;Ut++)te(M,K[Ut],Ht,St,Nt);Pt("TLD",{tld:!0,ascii:!0},f),Pt(Ht,{utld:!0,alpha:!0},f),te(M,"file",Kt,At,xt),te(M,"mailto",Kt,At,xt),te(M,"http",pt,At,xt),te(M,"https",pt,At,xt),te(M,"ftp",pt,At,xt),te(M,"ftps",pt,At,xt),Pt(Kt,{scheme:!0,ascii:!0},f),Pt(pt,{slashscheme:!0,ascii:!0},f),m=m.sort((Ut,Vt)=>Ut[0]>Vt[0]?1:-1);for(let Ut=0;Ut<m.length;Ut++){const Vt=m[Ut][0],ie=m[Ut][1]?{scheme:!0}:{slashscheme:!0};Vt.indexOf("-")>=0?ie[ut]=!0:R.test(Vt)?wt.test(Vt)?ie[tt]=!0:ie[N]=!0:ie[it]=!0,mt(M,Vt,Vt,ie)}return mt(M,"localhost",Et,{ascii:!0}),M.jd=new ht(O),{start:M,tokens:g({groups:f},I)}}(de.customSchemes);for(let m=0;m<de.tokenQueue.length;m++)de.tokenQueue[m][1]({scanner:de.scanner});de.parser=function(m){let{groups:f}=m;const M=f.domain.concat([zt,ye,Oe,he,Ke,xe,Ae,Pe,Me,B,Ie,Ze,He,Ue,fe,O,Ee,gt]),x=[ue,Yt,kt,$t,ee,Be,ge,ve,Ne,Q,st,J,ot,Le,ze,_e],L=[zt,ue,ye,he,Ke,xe,kt,Ae,Pe,Me,B,st,Ie,Ze,He,Ue,Le,fe,O,Ee,gt],Y=se(),W=j(Y,Ee);q(W,L,W),q(W,f.domain,W);const G=se(),vt=se(),xt=se();q(Y,f.domain,G),q(Y,f.scheme,vt),q(Y,f.slashscheme,xt),q(G,L,W),q(G,f.domain,G);const Nt=j(G,Oe);j(W,Oe,Nt),j(vt,Oe,Nt),j(xt,Oe,Nt);const Ut=j(W,ve);q(Ut,L,W),q(Ut,f.domain,W);const Vt=se();q(Nt,f.domain,Vt),q(Vt,f.domain,Vt);const re=j(Vt,ve);q(re,f.domain,Vt);const ie=se(Ft);q(re,f.tld,ie),q(re,f.utld,ie),j(Nt,Et,ie);const be=j(Vt,Me);q(be,f.domain,Vt),q(ie,f.domain,Vt),j(ie,ve,re),j(ie,Me,be);const qe=j(ie,Be);q(qe,f.numeric,Ft);const Ye=j(G,Me),Ce=j(G,ve);q(Ye,f.domain,G),q(Ce,L,W),q(Ce,f.domain,G);const De=se(ne);q(Ce,f.tld,De),q(Ce,f.utld,De),q(De,f.domain,G),q(De,L,W),j(De,ve,Ce),j(De,Me,Ye),j(De,Oe,Nt);const cn=j(De,Be),en=se(ne);q(cn,f.numeric,en);const pe=se(ne),Se=se();q(pe,M,pe),q(pe,x,Se),q(Se,M,pe),q(Se,x,Se),j(De,fe,pe),j(en,fe,pe);const Fe=j(vt,Be),Vn=j(xt,Be),Qn=j(Vn,fe);j(Qn,fe,Fe),q(vt,f.domain,G),j(vt,ve,Ce),j(vt,Me,Ye),q(xt,f.domain,G),j(xt,ve,Ce),j(xt,Me,Ye),q(Fe,f.domain,pe),j(Fe,fe,pe);const ln=j(pe,st),Ge=j(pe,J),In=j(pe,Q),Cn=j(pe,ot);j(Se,st,ln),j(Se,J,Ge),j(Se,Q,In),j(Se,ot,Cn),j(ln,kt,pe),j(Ge,$t,pe),j(In,Yt,pe),j(Cn,ee,pe),j(ln,kt,pe);const dn=se(ne),fn=se(ne),mn=se(ne),nn=se(ne);q(ln,M,dn),q(Ge,M,fn),q(In,M,mn),q(Cn,M,nn);const xn=se(),vn=se(),tn=se(),kn=se();return q(ln,x),q(Ge,x),q(In,x),q(Cn,x),q(dn,M,dn),q(fn,M,fn),q(mn,M,mn),q(nn,M,nn),q(dn,x,dn),q(fn,x,fn),q(mn,x,mn),q(nn,x,nn),q(xn,M,xn),q(vn,M,fn),q(tn,M,mn),q(kn,M,nn),q(xn,x,xn),q(vn,x,vn),q(tn,x,tn),q(kn,x,kn),j(fn,$t,pe),j(mn,Yt,pe),j(nn,ee,pe),j(dn,kt,pe),j(vn,$t,pe),j(tn,Yt,pe),j(kn,ee,pe),j(xn,ee,pe),j(Y,Et,De),j(Y,"NL",Qt),{start:Y,tokens:I}}(de.scanner.tokens);for(let m=0;m<de.pluginQueue.length;m++)de.pluginQueue[m][1]({scanner:de.scanner,parser:de.parser});de.initialized=!0}(),function(m,f,M){let x=M.length,L=0,Y=[],W=[];for(;L<x;){let G=m,vt=null,xt=null,Nt=0,Ut=null,Vt=-1;for(;L<x&&!(vt=G.go(M[L].t));)W.push(M[L++]);for(;L<x&&(xt=vt||G.go(M[L].t));)vt=null,G=xt,G.accepts()?(Vt=0,Ut=G):Vt>=0&&Vt++,L++,Nt++;if(Vt<0)L-=Nt,L<x&&(W.push(M[L]),L++);else{W.length>0&&(Y.push(we(Wt,f,W)),W=[]),L-=Vt,Nt-=Vt;const re=Ut.t,ie=M.slice(L-Nt,L);Y.push(we(re,f,ie))}}return W.length>0&&Y.push(we(Wt,f,W)),Y}(de.parser.start,m,function(m,f){const M=function(m){const f=[],M=m.length;let x=0;for(;x<M;){let Y,L=m.charCodeAt(x),W=L<55296||L>56319||x+1===M||(Y=m.charCodeAt(x+1))<56320||Y>57343?m[x]:m.slice(x,x+2);f.push(W),x+=W.length}return f}(f.replace(/[A-Z]/g,G=>G.toLowerCase())),x=M.length,L=[];let Y=0,W=0;for(;W<x;){let G=m,vt=null,xt=0,Nt=null,Ut=-1,Vt=-1;for(;W<x&&(vt=G.go(M[W]));)G=vt,G.accepts()?(Ut=0,Vt=0,Nt=G):Ut>=0&&(Ut+=M[W].length,Vt++),xt+=M[W].length,Y+=M[W].length,W++;Y-=Ut,W-=Vt,xt-=Ut,L.push({t:Nt.t,v:f.slice(Y-xt,Y),s:Y-xt,e:Y})}return L}(de.scanner.start,m))}function On(m,f,M){if(void 0===f&&(f=null),void 0===M&&(M=null),f&&"object"==typeof f){if(M)throw Error(`linkifyjs: Invalid link type ${f}; must be a string`);M=f,f=null}const x=new $(M),L=_n(m),Y=[];for(let W=0;W<L.length;W++){const G=L[W];G.isLink&&(!f||G.t===f)&&Y.push(G.toFormattedObject(x))}return Y}function Tn(m,f){void 0===f&&(f=null);const M=_n(m);return 1===M.length&&M[0].isLink&&(!f||M[0].t===f)}var Ve=c(62463);const C=l.Mark.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(m=>{"string"!=typeof m?pn(m.scheme,m.optionalSlashes):pn(m)})},onDestroy(){ht.groups={},de.scanner=null,de.parser=null,de.tokenQueue=[],de.pluginQueue=[],de.customSchemes=[],de.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}),addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML:()=>[{tag:'a[href]:not([href *= "javascript:" i])'}],renderHTML({HTMLAttributes:m}){return["a",(0,l.mergeAttributes)(this.options.HTMLAttributes,m),0]},addCommands(){return{setLink:m=>({chain:f})=>f().setMark(this.name,m).setMeta("preventAutolink",!0).run(),toggleLink:m=>({chain:f})=>f().toggleMark(this.name,m,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:m})=>m().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[(0,l.markPasteRule)({find:m=>On(m).filter(f=>!this.options.validate||this.options.validate(f.value)).filter(f=>f.isLink).map(f=>({text:f.value,index:f.start,data:f})),type:this.type,getAttributes:m=>{var f;return{href:null===(f=m.data)||void 0===f?void 0:f.href}}})]},addProseMirrorPlugins(){const m=[];return this.options.autolink&&m.push(function(m){return new Ve.Sy({key:new Ve.H$("autolink"),appendTransaction:(f,M,x)=>{const L=f.some(Nt=>Nt.docChanged)&&!M.doc.eq(x.doc),Y=f.some(Nt=>Nt.getMeta("preventAutolink"));if(!L||Y)return;const{tr:W}=x,G=(0,l.combineTransactionSteps)(M.doc,[...f]),{mapping:vt}=G;return(0,l.getChangedRanges)(G).forEach(({oldRange:Nt,newRange:Ut})=>{(0,l.getMarksBetween)(Nt.from,Nt.to,M.doc).filter(be=>be.mark.type===m.type).forEach(be=>{const qe=vt.map(be.from),Ye=vt.map(be.to),Ce=(0,l.getMarksBetween)(qe,Ye,x.doc).filter(Fe=>Fe.mark.type===m.type);if(!Ce.length)return;const De=Ce[0],cn=M.doc.textBetween(be.from,be.to,void 0," "),en=x.doc.textBetween(De.from,De.to,void 0," "),pe=Tn(cn),Se=Tn(en);pe&&!Se&&W.removeMark(De.from,De.to,m.type)});const Vt=(0,l.findChildrenInRange)(x.doc,Ut,be=>be.isTextblock);let re,ie;if(Vt.length>1?(re=Vt[0],ie=x.doc.textBetween(re.pos,re.pos+re.node.nodeSize,void 0," ")):Vt.length&&x.doc.textBetween(Ut.from,Ut.to," "," ").endsWith(" ")&&(re=Vt[0],ie=x.doc.textBetween(re.pos,Ut.to,void 0," ")),re&&ie){const be=ie.split(" ").filter(Ce=>""!==Ce);if(be.length<=0)return!1;const qe=be[be.length-1],Ye=re.pos+ie.lastIndexOf(qe);if(!qe)return!1;On(qe).filter(Ce=>Ce.isLink).filter(Ce=>!m.validate||m.validate(Ce.value)).map(Ce=>me(Gt({},Ce),{from:Ye+Ce.start+1,to:Ye+Ce.end+1})).forEach(Ce=>{W.addMark(Ce.from,Ce.to,m.type.create({href:Ce.href}))})}}),W.steps.length?W:void 0}})}({type:this.type,validate:this.options.validate})),this.options.openOnClick&&m.push(function(m){return new Ve.Sy({key:new Ve.H$("handleClickLink"),props:{handleClick:(f,M,x)=>{var L,Y,W;const G=(0,l.getAttributes)(f.state,m.type.name),vt=null===(L=x.target)||void 0===L?void 0:L.closest("a"),xt=null!==(Y=null==vt?void 0:vt.href)&&void 0!==Y?Y:G.href,Nt=null!==(W=null==vt?void 0:vt.target)&&void 0!==W?W:G.target;return!(!vt||!xt||(window.open(xt,Nt),0))}}})}({type:this.type})),this.options.linkOnPaste&&m.push(function(m){return new Ve.Sy({key:new Ve.H$("handlePasteLink"),props:{handlePaste:(f,M,x)=>{const{state:L}=f,{selection:Y}=L,{empty:W}=Y;if(W)return!1;let G="";x.content.forEach(xt=>{G+=xt.textContent});const vt=On(G).find(xt=>xt.isLink&&xt.value===G);return!(!G||!vt||(m.editor.commands.setMark(m.type,{href:vt.href}),0))}}})}({editor:this.editor,type:this.type})),m}}).extend({addAttributes(){var m;return Object.assign(Object.assign({},null===(m=this.parent)||void 0===m?void 0:m.call(this)),(0,v.x6)(["download"]))},addCommands(){var m;return Object.assign(Object.assign({},null===(m=this.parent)||void 0===m?void 0:m.call(this)),{toggleLink:f=>({chain:M,state:x})=>{{const{selection:L,doc:Y}=x,W=Y.cut(L.to,L.to+1),vt=" "===(0,l.getHTMLFromFragment)(W.content,x.schema).replace(/<\/?[^>]+(>|$)/g,""),xt=M().toggleMark(this.name,f,{extendEmptyMarkRange:!0});return(vt?xt.setTextSelection(L.to+1):xt.setTextSelection(L.to).insertContent('<span style="font-size: 15px"> </span>')).run()}}})}}).configure({openOnClick:!1})},41512:(jt,Mt,c)=>{c.r(Mt),c.d(Mt,{TuiAudio:()=>y,TuiSource:()=>P,TuiVideo:()=>g});var v=c(27863),l=c(12867);const y=l.Node.create({name:"audio",group:"block",content:"source+",addAttributes:()=>(0,v.x6)(["id","class","src","style","controls","loop","muted","preload","autoplay","width","height"]),parseHTML:()=>[{tag:"audio"}],renderHTML:({node:it,HTMLAttributes:N})=>["audio",N,...(0,v.YX)(it)]}),P=l.Node.create({name:"source",addAttributes:()=>(0,v.x6)(["src","type","width","height","media","sizes","srcset"]),parseHTML:()=>[{tag:"source"}],renderHTML:({HTMLAttributes:it})=>["source",(0,l.mergeAttributes)(it)]}),g=l.Node.create({name:"video",group:"block",content:"source+",addAttributes:()=>(0,v.x6)(["id","class","src","style","controls","loop","muted","preload","autoplay","width","height"]),parseHTML:()=>[{tag:"video"}],renderHTML:({node:it,HTMLAttributes:N})=>["video",N,...(0,v.YX)(it)]})},2823:(jt,Mt,c)=>{c.r(Mt),c.d(Mt,{StarterKit:()=>Je});var v=c(12867);const l=/^\s*>\s$/,y=v.Node.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:$}){return["blockquote",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setBlockquote:()=>({commands:$})=>$.wrapIn(this.name),toggleBlockquote:()=>({commands:$})=>$.toggleWrap(this.name),unsetBlockquote:()=>({commands:$})=>$.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,v.wrappingInputRule)({find:l,type:this.type})]}}),P=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,g=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,it=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,N=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,X=v.Mark.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:$=>"normal"!==$.style.fontWeight&&null},{style:"font-weight",getAttrs:$=>/^(bold(er)?|[5-9]\d{2,})$/.test($)&&null}],renderHTML({HTMLAttributes:$}){return["strong",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setBold:()=>({commands:$})=>$.setMark(this.name),toggleBold:()=>({commands:$})=>$.toggleMark(this.name),unsetBold:()=>({commands:$})=>$.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,v.markInputRule)({find:P,type:this.type}),(0,v.markInputRule)({find:it,type:this.type})]},addPasteRules(){return[(0,v.markPasteRule)({find:g,type:this.type}),(0,v.markPasteRule)({find:N,type:this.type})]}}),tt=v.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:$}){return["li",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ft=v.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:$=>!!$.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:$}){return["span",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:$,commands:S})=>{const ct=(0,v.getMarkAttributes)($,this.type);return!!Object.entries(ct).some(([,yt])=>!!yt)||S.unsetMark(this.name)}}}}),ut=/^\s*([-+*])\s$/,et=v.Node.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:$}){return["ul",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{toggleBulletList:()=>({commands:$,chain:S})=>this.options.keepAttributes?S().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(tt.name,this.editor.getAttributes(ft.name)).run():$.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let $=(0,v.wrappingInputRule)({find:ut,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&($=(0,v.wrappingInputRule)({find:ut,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ft.name),editor:this.editor})),[$]}}),_t=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,Tt=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,bt=v.Mark.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:$}){return["code",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setCode:()=>({commands:$})=>$.setMark(this.name),toggleCode:()=>({commands:$})=>$.toggleMark(this.name),unsetCode:()=>({commands:$})=>$.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,v.markInputRule)({find:_t,type:this.type})]},addPasteRules(){return[(0,v.markPasteRule)({find:Tt,type:this.type})]}});var It=c(62463);const Pt=/^```([a-z]+)?[\s\n]$/,Dt=/^~~~([a-z]+)?[\s\n]$/,ht=v.Node.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:$=>{var S;const{languageClassPrefix:ct}=this.options;return[...(null===(S=$.firstElementChild)||void 0===S?void 0:S.classList)||[]].filter(Wt=>Wt.startsWith(ct)).map(Wt=>Wt.replace(ct,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:$,HTMLAttributes:S}){return["pre",(0,v.mergeAttributes)(this.options.HTMLAttributes,S),["code",{class:$.attrs.language?this.options.languageClassPrefix+$.attrs.language:null},0]]},addCommands(){return{setCodeBlock:$=>({commands:S})=>S.setNode(this.name,$),toggleCodeBlock:$=>({commands:S})=>S.toggleNode(this.name,"paragraph",$)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:$,$anchor:S}=this.editor.state.selection;return!(!$||S.parent.type.name!==this.name)&&!(1!==S.pos&&S.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:$})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:S}=$,{selection:ct}=S,{$from:Ct,empty:yt}=ct;if(!yt||Ct.parent.type!==this.type)return!1;const Ft=Ct.parentOffset===Ct.parent.nodeSize-2,Wt=Ct.parent.textContent.endsWith("\n\n");return!(!Ft||!Wt)&&$.chain().command(({tr:Qt})=>(Qt.delete(Ct.pos-2,Ct.pos),!0)).exitCode().run()},ArrowDown:({editor:$})=>{if(!this.options.exitOnArrowDown)return!1;const{state:S}=$,{selection:ct,doc:Ct}=S,{$from:yt,empty:Ft}=ct;if(!Ft||yt.parent.type!==this.type||yt.parentOffset!==yt.parent.nodeSize-2)return!1;const Qt=yt.after();return void 0!==Qt&&!Ct.nodeAt(Qt)&&$.commands.exitCode()}}},addInputRules(){return[(0,v.textblockTypeInputRule)({find:Pt,type:this.type,getAttributes:$=>({language:$[1]})}),(0,v.textblockTypeInputRule)({find:Dt,type:this.type,getAttributes:$=>({language:$[1]})})]},addProseMirrorPlugins(){return[new It.Sy({key:new It.H$("codeBlockVSCodeHandler"),props:{handlePaste:($,S)=>{if(!S.clipboardData||this.editor.isActive(this.type.name))return!1;const ct=S.clipboardData.getData("text/plain"),Ct=S.clipboardData.getData("vscode-editor-data"),yt=Ct?JSON.parse(Ct):void 0,Ft=null==yt?void 0:yt.mode;if(!ct||!Ft)return!1;const{tr:Wt}=$.state;return Wt.replaceSelectionWith(this.type.create({language:Ft})),Wt.setSelection(It.Bs.near(Wt.doc.resolve(Math.max(0,Wt.selection.from-2)))),Wt.insertText(ct.replace(/\r\n?/g,"\n")),Wt.setMeta("paste",!0),$.dispatch(Wt),!0}}})]}}),q=v.Node.create({name:"doc",topNode:!0,content:"block+"});var F=c(38480);function mt($={}){return new It.Sy({view:S=>new j(S,$)})}class j{constructor(S,ct){this.editorView=S,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=ct.width||1,this.color=ct.color||"black",this.class=ct.class,this.handlers=["dragover","dragend","drop","dragleave"].map(Ct=>{let yt=Ft=>{this[Ct](Ft)};return S.dom.addEventListener(Ct,yt),{name:Ct,handler:yt}})}destroy(){this.handlers.forEach(({name:S,handler:ct})=>this.editorView.dom.removeEventListener(S,ct))}update(S,ct){null!=this.cursorPos&&ct.doc!=S.state.doc&&(this.cursorPos>S.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(S){S!=this.cursorPos&&(this.cursorPos=S,null==S?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let Ct,S=this.editorView.state.doc.resolve(this.cursorPos),ct=!S.parent.inlineContent;if(ct){let Qt=S.nodeBefore,ne=S.nodeAfter;if(Qt||ne){let Te=this.editorView.nodeDOM(this.cursorPos-(Qt?Qt.nodeSize:0));if(Te){let se=Te.getBoundingClientRect(),ae=Qt?se.bottom:se.top;Qt&&ne&&(ae=(ae+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),Ct={left:se.left,right:se.right,top:ae-this.width/2,bottom:ae+this.width/2}}}}if(!Ct){let Qt=this.editorView.coordsAtPos(this.cursorPos);Ct={left:Qt.left-this.width/2,right:Qt.left+this.width/2,top:Qt.top,bottom:Qt.bottom}}let Ft,Wt,yt=this.editorView.dom.offsetParent;if(this.element||(this.element=yt.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),this.element.classList.toggle("prosemirror-dropcursor-block",ct),this.element.classList.toggle("prosemirror-dropcursor-inline",!ct),!yt||yt==document.body&&"static"==getComputedStyle(yt).position)Ft=-pageXOffset,Wt=-pageYOffset;else{let Qt=yt.getBoundingClientRect();Ft=Qt.left-yt.scrollLeft,Wt=Qt.top-yt.scrollTop}this.element.style.left=Ct.left-Ft+"px",this.element.style.top=Ct.top-Wt+"px",this.element.style.width=Ct.right-Ct.left+"px",this.element.style.height=Ct.bottom-Ct.top+"px"}scheduleRemoval(S){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),S)}dragover(S){if(!this.editorView.editable)return;let ct=this.editorView.posAtCoords({left:S.clientX,top:S.clientY}),Ct=ct&&ct.inside>=0&&this.editorView.state.doc.nodeAt(ct.inside),yt=Ct&&Ct.type.spec.disableDropCursor,Ft="function"==typeof yt?yt(this.editorView,ct,S):yt;if(ct&&!Ft){let Wt=ct.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let Qt=(0,F.nj)(this.editorView.state.doc,Wt,this.editorView.dragging.slice);null!=Qt&&(Wt=Qt)}this.setCursor(Wt),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(S){(S.target==this.editorView.dom||!this.editorView.dom.contains(S.relatedTarget))&&this.setCursor(null)}}const At=v.Extension.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[mt(this.options)]}});var St=c(70768),Et=c(77346),Lt=c(43594);class Ht extends It.Y1{constructor(S){super(S,S)}map(S,ct){let Ct=S.resolve(ct.map(this.head));return Ht.valid(Ct)?new Ht(Ct):It.Y1.near(Ct)}content(){return Et.p2.empty}eq(S){return S instanceof Ht&&S.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(S,ct){if("number"!=typeof ct.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ht(S.resolve(ct.pos))}getBookmark(){return new Kt(this.anchor)}static valid(S){let ct=S.parent;if(ct.isTextblock||!function($){for(let S=$.depth;S>=0;S--){let ct=$.index(S),Ct=$.node(S);if(0!=ct)for(let yt=Ct.child(ct-1);;yt=yt.lastChild){if(0==yt.childCount&&!yt.inlineContent||yt.isAtom||yt.type.spec.isolating)return!0;if(yt.inlineContent)return!1}else if(Ct.type.spec.isolating)return!0}return!0}(S)||!function($){for(let S=$.depth;S>=0;S--){let ct=$.indexAfter(S),Ct=$.node(S);if(ct!=Ct.childCount)for(let yt=Ct.child(ct);;yt=yt.firstChild){if(0==yt.childCount&&!yt.inlineContent||yt.isAtom||yt.type.spec.isolating)return!0;if(yt.inlineContent)return!1}else if(Ct.type.spec.isolating)return!0}return!0}(S))return!1;let Ct=ct.type.spec.allowGapCursor;if(null!=Ct)return Ct;let yt=ct.contentMatchAt(S.index()).defaultType;return yt&&yt.isTextblock}static findGapCursorFrom(S,ct,Ct=!1){t:for(;;){if(!Ct&&Ht.valid(S))return S;let yt=S.pos,Ft=null;for(let Wt=S.depth;;Wt--){let Qt=S.node(Wt);if(ct>0?S.indexAfter(Wt)<Qt.childCount:S.index(Wt)>0){Ft=Qt.child(ct>0?S.indexAfter(Wt):S.index(Wt)-1);break}if(0==Wt)return null;yt+=ct;let ne=S.doc.resolve(yt);if(Ht.valid(ne))return ne}for(;;){let Wt=ct>0?Ft.firstChild:Ft.lastChild;if(!Wt){if(Ft.isAtom&&!Ft.isText&&!It.qv.isSelectable(Ft)){S=S.doc.resolve(yt+Ft.nodeSize*ct),Ct=!1;continue t}break}Ft=Wt,yt+=ct;let Qt=S.doc.resolve(yt);if(Ht.valid(Qt))return Qt}return null}}}Ht.prototype.visible=!1,Ht.findFrom=Ht.findGapCursorFrom,It.Y1.jsonID("gapcursor",Ht);class Kt{constructor(S){this.pos=S}map(S){return new Kt(S.map(this.pos))}resolve(S){let ct=S.resolve(this.pos);return Ht.valid(ct)?new Ht(ct):It.Y1.near(ct)}}const at=(0,St.$)({ArrowLeft:st("horiz",-1),ArrowRight:st("horiz",1),ArrowUp:st("vert",-1),ArrowDown:st("vert",1)});function st($,S){const ct="vert"==$?S>0?"down":"up":S>0?"right":"left";return function(Ct,yt,Ft){let Wt=Ct.selection,Qt=S>0?Wt.$to:Wt.$from,ne=Wt.empty;if(Wt instanceof It.Bs){if(!Ft.endOfTextblock(ct)||0==Qt.depth)return!1;ne=!1,Qt=Ct.doc.resolve(S>0?Qt.after():Qt.before())}let Te=Ht.findGapCursorFrom(Qt,S,ne);return!!Te&&(yt&&yt(Ct.tr.setSelection(new Ht(Te))),!0)}}function J($,S,ct){if(!$||!$.editable)return!1;let Ct=$.state.doc.resolve(S);if(!Ht.valid(Ct))return!1;let yt=$.posAtCoords({left:ct.clientX,top:ct.clientY});return!(yt&&yt.inside>-1&&It.qv.isSelectable($.state.doc.nodeAt(yt.inside))||($.dispatch($.state.tr.setSelection(new Ht(Ct))),0))}function Q($,S){if("insertCompositionText"!=S.inputType||!($.state.selection instanceof Ht))return!1;let{$from:ct}=$.state.selection,Ct=ct.parent.contentMatchAt(ct.index()).findWrapping($.state.schema.nodes.text);if(!Ct)return!1;let yt=Et.HY.empty;for(let Wt=Ct.length-1;Wt>=0;Wt--)yt=Et.HY.from(Ct[Wt].createAndFill(null,yt));let Ft=$.state.tr.replace(ct.pos,ct.pos,new Et.p2(yt,0,0));return Ft.setSelection(It.Bs.near(Ft.doc.resolve(ct.pos+1))),$.dispatch(Ft),!1}function ot($){if(!($.selection instanceof Ht))return null;let S=document.createElement("div");return S.className="ProseMirror-gapcursor",Lt.EH.create($.doc,[Lt.p.widget($.selection.head,S,{key:"gapcursor"})])}const kt=v.Extension.create({name:"gapCursor",addProseMirrorPlugins:()=>[new It.Sy({props:{decorations:ot,createSelectionBetween:($,S,ct)=>S.pos==ct.pos&&Ht.valid(ct)?new Ht(ct):null,handleClick:J,handleKeyDown:at,handleDOMEvents:{beforeinput:Q}}})],extendNodeSchema($){var S;return{allowGapCursor:null!==(S=(0,v.callOrReturn)((0,v.getExtensionField)($,"allowGapCursor",{name:$.name,options:$.options,storage:$.storage})))&&void 0!==S?S:null}}}),$t=v.Node.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:$}){return["br",(0,v.mergeAttributes)(this.options.HTMLAttributes,$)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:$,chain:S,state:ct,editor:Ct})=>$.first([()=>$.exitCode(),()=>$.command(()=>{const{selection:yt,storedMarks:Ft}=ct;if(yt.$from.parent.type.spec.isolating)return!1;const{keepMarks:Wt}=this.options,{splittableMarks:Qt}=Ct.extensionManager,ne=Ft||yt.$to.parentOffset&&yt.$from.marks();return S().insertContent({type:this.name}).command(({tr:Te,dispatch:se})=>{if(se&&ne&&Wt){const ae=ne.filter(ce=>Qt.includes(ce.type.name));Te.ensureMarks(ae)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Yt=v.Node.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map($=>({tag:`h${$}`,attrs:{level:$}}))},renderHTML({node:$,HTMLAttributes:S}){return[`h${this.options.levels.includes($.attrs.level)?$.attrs.level:this.options.levels[0]}`,(0,v.mergeAttributes)(this.options.HTMLAttributes,S),0]},addCommands(){return{setHeading:$=>({commands:S})=>!!this.options.levels.includes($.level)&&S.setNode(this.name,$),toggleHeading:$=>({commands:S})=>!!this.options.levels.includes($.level)&&S.toggleNode(this.name,"paragraph",$)}},addKeyboardShortcuts(){return this.options.levels.reduce(($,S)=>me(Gt({},$),{[`Mod-Alt-${S}`]:()=>this.editor.commands.toggleHeading({level:S})}),{})},addInputRules(){return this.options.levels.map($=>(0,v.textblockTypeInputRule)({find:new RegExp(`^(#{1,${$}})\\s$`),type:this.type,getAttributes:{level:$}}))}});var zt=function(){};zt.prototype.append=function(S){return S.length?(S=zt.from(S),!this.length&&S||S.length<200&&this.leafAppend(S)||this.length<200&&S.leafPrepend(this)||this.appendInner(S)):this},zt.prototype.prepend=function(S){return S.length?zt.from(S).append(this):this},zt.prototype.appendInner=function(S){return new ye(this,S)},zt.prototype.slice=function(S,ct){return void 0===S&&(S=0),void 0===ct&&(ct=this.length),S>=ct?zt.empty:this.sliceInner(Math.max(0,S),Math.min(this.length,ct))},zt.prototype.get=function(S){if(!(S<0||S>=this.length))return this.getInner(S)},zt.prototype.forEach=function(S,ct,Ct){void 0===ct&&(ct=0),void 0===Ct&&(Ct=this.length),ct<=Ct?this.forEachInner(S,ct,Ct,0):this.forEachInvertedInner(S,ct,Ct,0)},zt.prototype.map=function(S,ct,Ct){void 0===ct&&(ct=0),void 0===Ct&&(Ct=this.length);var yt=[];return this.forEach(function(Ft,Wt){return yt.push(S(Ft,Wt))},ct,Ct),yt},zt.from=function(S){return S instanceof zt?S:S&&S.length?new ue(S):zt.empty};var ue=function($){function S(Ct){$.call(this),this.values=Ct}$&&(S.__proto__=$),(S.prototype=Object.create($&&$.prototype)).constructor=S;var ct={length:{configurable:!0},depth:{configurable:!0}};return S.prototype.flatten=function(){return this.values},S.prototype.sliceInner=function(yt,Ft){return 0==yt&&Ft==this.length?this:new S(this.values.slice(yt,Ft))},S.prototype.getInner=function(yt){return this.values[yt]},S.prototype.forEachInner=function(yt,Ft,Wt,Qt){for(var ne=Ft;ne<Wt;ne++)if(!1===yt(this.values[ne],Qt+ne))return!1},S.prototype.forEachInvertedInner=function(yt,Ft,Wt,Qt){for(var ne=Ft-1;ne>=Wt;ne--)if(!1===yt(this.values[ne],Qt+ne))return!1},S.prototype.leafAppend=function(yt){if(this.length+yt.length<=200)return new S(this.values.concat(yt.flatten()))},S.prototype.leafPrepend=function(yt){if(this.length+yt.length<=200)return new S(yt.flatten().concat(this.values))},ct.length.get=function(){return this.values.length},ct.depth.get=function(){return 0},Object.defineProperties(S.prototype,ct),S}(zt);zt.empty=new ue([]);var ye=function($){function S(ct,Ct){$.call(this),this.left=ct,this.right=Ct,this.length=ct.length+Ct.length,this.depth=Math.max(ct.depth,Ct.depth)+1}return $&&(S.__proto__=$),(S.prototype=Object.create($&&$.prototype)).constructor=S,S.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},S.prototype.getInner=function(Ct){return Ct<this.left.length?this.left.get(Ct):this.right.get(Ct-this.left.length)},S.prototype.forEachInner=function(Ct,yt,Ft,Wt){var Qt=this.left.length;if(yt<Qt&&!1===this.left.forEachInner(Ct,yt,Math.min(Ft,Qt),Wt)||Ft>Qt&&!1===this.right.forEachInner(Ct,Math.max(yt-Qt,0),Math.min(this.length,Ft)-Qt,Wt+Qt))return!1},S.prototype.forEachInvertedInner=function(Ct,yt,Ft,Wt){var Qt=this.left.length;if(yt>Qt&&!1===this.right.forEachInvertedInner(Ct,yt-Qt,Math.max(Ft,Qt)-Qt,Wt+Qt)||Ft<Qt&&!1===this.left.forEachInvertedInner(Ct,Math.min(yt,Qt),Ft,Wt))return!1},S.prototype.sliceInner=function(Ct,yt){if(0==Ct&&yt==this.length)return this;var Ft=this.left.length;return yt<=Ft?this.left.slice(Ct,yt):Ct>=Ft?this.right.slice(Ct-Ft,yt-Ft):this.left.slice(Ct,Ft).append(this.right.slice(0,yt-Ft))},S.prototype.leafAppend=function(Ct){var yt=this.right.leafAppend(Ct);if(yt)return new S(this.left,yt)},S.prototype.leafPrepend=function(Ct){var yt=this.left.leafPrepend(Ct);if(yt)return new S(yt,this.right)},S.prototype.appendInner=function(Ct){return this.left.depth>=Math.max(this.right.depth,Ct.depth)+1?new S(this.left,new S(this.right,Ct)):new S(this,Ct)},S}(zt);const he=zt;class xe{constructor(S,ct){this.items=S,this.eventCount=ct}popEvent(S,ct){if(0==this.eventCount)return null;let yt,Ft,Ct=this.items.length;for(;;Ct--)if(this.items.get(Ct-1).selection){--Ct;break}ct&&(yt=this.remapping(Ct,this.items.length),Ft=yt.maps.length);let Qt,ne,Wt=S.tr,Te=[],se=[];return this.items.forEach((ae,ce)=>{if(!ae.step)return yt||(yt=this.remapping(Ct,ce+1),Ft=yt.maps.length),Ft--,void se.push(ae);if(yt){se.push(new ge(ae.map));let We,we=ae.step.map(yt.slice(Ft));we&&Wt.maybeStep(we).doc&&(We=Wt.mapping.maps[Wt.mapping.maps.length-1],Te.push(new ge(We,void 0,void 0,Te.length+se.length))),Ft--,We&&yt.appendMap(We,Ft)}else Wt.maybeStep(ae.step);return ae.selection?(Qt=yt?ae.selection.map(yt.slice(Ft)):ae.selection,ne=new xe(this.items.slice(0,Ct).append(se.reverse().concat(Te)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:ne,transform:Wt,selection:Qt}}addTransform(S,ct,Ct,yt){let Ft=[],Wt=this.eventCount,Qt=this.items,ne=!yt&&Qt.length?Qt.get(Qt.length-1):null;for(let se=0;se<S.steps.length;se++){let we,ae=S.steps[se].invert(S.docs[se]),ce=new ge(S.mapping.maps[se],ae,ct);(we=ne&&ne.merge(ce))&&(ce=we,se?Ft.pop():Qt=Qt.slice(0,Qt.length-1)),Ft.push(ce),ct&&(Wt++,ct=void 0),yt||(ne=ce)}let Te=Wt-Ct.depth;return Te>ve&&(Qt=function($,S){let ct;return $.forEach((Ct,yt)=>{if(Ct.selection&&0==S--)return ct=yt,!1}),$.slice(ct)}(Qt,Te),Wt-=Te),new xe(Qt.append(Ft),Wt)}remapping(S,ct){let Ct=new F.vs;return this.items.forEach((yt,Ft)=>{Ct.appendMap(yt.map,null!=yt.mirrorOffset&&Ft-yt.mirrorOffset>=S?Ct.maps.length-yt.mirrorOffset:void 0)},S,ct),Ct}addMaps(S){return 0==this.eventCount?this:new xe(this.items.append(S.map(ct=>new ge(ct))),this.eventCount)}rebased(S,ct){if(!this.eventCount)return this;let Ct=[],yt=Math.max(0,this.items.length-ct),Ft=S.mapping,Wt=S.steps.length,Qt=this.eventCount;this.items.forEach(ce=>{ce.selection&&Qt--},yt);let ne=ct;this.items.forEach(ce=>{let we=Ft.getMirror(--ne);if(null==we)return;Wt=Math.min(Wt,we);let We=Ft.maps[we];if(ce.step){let an=S.steps[we].invert(S.docs[we]),de=ce.selection&&ce.selection.map(Ft.slice(ne+1,we));de&&Qt++,Ct.push(new ge(We,an,de))}else Ct.push(new ge(We))},yt);let Te=[];for(let ce=ct;ce<Wt;ce++)Te.push(new ge(Ft.maps[ce]));let se=this.items.slice(0,yt).append(Te).append(Ct),ae=new xe(se,Qt);return ae.emptyItemCount()>500&&(ae=ae.compress(this.items.length-Ct.length)),ae}emptyItemCount(){let S=0;return this.items.forEach(ct=>{ct.step||S++}),S}compress(S=this.items.length){let ct=this.remapping(0,S),Ct=ct.maps.length,yt=[],Ft=0;return this.items.forEach((Wt,Qt)=>{if(Qt>=S)yt.push(Wt),Wt.selection&&Ft++;else if(Wt.step){let ne=Wt.step.map(ct.slice(Ct)),Te=ne&&ne.getMap();if(Ct--,Te&&ct.appendMap(Te,Ct),ne){let se=Wt.selection&&Wt.selection.map(ct.slice(Ct));se&&Ft++;let ce,ae=new ge(Te.invert(),ne,se),we=yt.length-1;(ce=yt.length&&yt[we].merge(ae))?yt[we]=ce:yt.push(ae)}}else Wt.map&&Ct--},this.items.length,0),new xe(he.from(yt.reverse()),Ft)}}xe.empty=new xe(he.empty,0);class ge{constructor(S,ct,Ct,yt){this.map=S,this.step=ct,this.selection=Ct,this.mirrorOffset=yt}merge(S){if(this.step&&S.step&&!S.selection){let ct=S.step.merge(this.step);if(ct)return new ge(ct.getMap().invert(),ct,this.selection)}}}class Ae{constructor(S,ct,Ct,yt){this.done=S,this.undone=ct,this.prevRanges=Ct,this.prevTime=yt}}const ve=20;function Me($){let S=[];return $.forEach((ct,Ct,yt,Ft)=>S.push(yt,Ft)),S}function Ie($,S){if(!$)return null;let ct=[];for(let Ct=0;Ct<$.length;Ct+=2){let yt=S.map($[Ct],1),Ft=S.map($[Ct+1],-1);yt<=Ft&&ct.push(yt,Ft)}return ct}function Ze($,S,ct,Ct){let yt=Le(S),Ft=_e.get(S).spec.config,Wt=(Ct?$.undone:$.done).popEvent(S,yt);if(!Wt)return;let Qt=Wt.selection.resolve(Wt.transform.doc),ne=(Ct?$.done:$.undone).addTransform(Wt.transform,S.selection.getBookmark(),Ft,yt),Te=new Ae(Ct?ne:Wt.remaining,Ct?Wt.remaining:ne,null,0);ct(Wt.transform.setSelection(Qt).setMeta(_e,{redo:Ct,historyState:Te}).scrollIntoView())}let He=!1,Ue=null;function Le($){let S=$.plugins;if(Ue!=S){He=!1,Ue=S;for(let ct=0;ct<S.length;ct++)if(S[ct].spec.historyPreserveItems){He=!0;break}}return He}const _e=new It.H$("history"),fe=new It.H$("closeHistory");function Ee($={}){return new It.Sy({key:_e,state:{init:()=>new Ae(xe.empty,xe.empty,null,0),apply:(S,ct,Ct)=>function($,S,ct,Ct){let Ft,yt=ct.getMeta(_e);if(yt)return yt.historyState;ct.getMeta(fe)&&($=new Ae($.done,$.undone,null,0));let Wt=ct.getMeta("appendedTransaction");if(0==ct.steps.length)return $;if(Wt&&Wt.getMeta(_e))return Wt.getMeta(_e).redo?new Ae($.done.addTransform(ct,void 0,Ct,Le(S)),$.undone,Me(ct.mapping.maps[ct.steps.length-1]),$.prevTime):new Ae($.done,$.undone.addTransform(ct,void 0,Ct,Le(S)),null,$.prevTime);if(!1===ct.getMeta("addToHistory")||Wt&&!1===Wt.getMeta("addToHistory"))return(Ft=ct.getMeta("rebased"))?new Ae($.done.rebased(ct,Ft),$.undone.rebased(ct,Ft),Ie($.prevRanges,ct.mapping),$.prevTime):new Ae($.done.addMaps(ct.mapping.maps),$.undone.addMaps(ct.mapping.maps),Ie($.prevRanges,ct.mapping),$.prevTime);{let Qt=0==$.prevTime||!Wt&&($.prevTime<(ct.time||0)-Ct.newGroupDelay||!function($,S){if(!S)return!1;if(!$.docChanged)return!0;let ct=!1;return $.mapping.maps[0].forEach((Ct,yt)=>{for(let Ft=0;Ft<S.length;Ft+=2)Ct<=S[Ft+1]&&yt>=S[Ft]&&(ct=!0)}),ct}(ct,$.prevRanges)),ne=Wt?Ie($.prevRanges,ct.mapping):Me(ct.mapping.maps[ct.steps.length-1]);return new Ae($.done.addTransform(ct,Qt?S.selection.getBookmark():void 0,Ct,Le(S)),xe.empty,ne,ct.time)}}(ct,Ct,S,$)},config:$={depth:$.depth||100,newGroupDelay:$.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(S,ct){let Ct=ct.inputType,yt="historyUndo"==Ct?gt:"historyRedo"==Ct?b:null;return!!yt&&(ct.preventDefault(),yt(S.state,S.dispatch))}}}})}const gt=($,S)=>{let ct=_e.getState($);return!(!ct||0==ct.done.eventCount||(S&&Ze(ct,$,S,!1),0))},b=($,S)=>{let ct=_e.getState($);return!(!ct||0==ct.undone.eventCount||(S&&Ze(ct,$,S,!0),0))},R=v.Extension.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:$,dispatch:S})=>gt($,S),redo:()=>({state:$,dispatch:S})=>b($,S)}),addProseMirrorPlugins(){return[Ee(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),V=v.Node.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:$}){return["hr",(0,v.mergeAttributes)(this.options.HTMLAttributes,$)]},addCommands(){return{setHorizontalRule:()=>({chain:$})=>$().insertContent({type:this.name}).command(({tr:S,dispatch:ct})=>{var Ct;if(ct){const{$to:yt}=S.selection,Ft=yt.end();if(yt.nodeAfter)S.setSelection(It.Bs.create(S.doc,yt.pos));else{const Wt=null===(Ct=yt.parent.type.contentMatch.defaultType)||void 0===Ct?void 0:Ct.create();Wt&&(S.insert(Ft,Wt),S.setSelection(It.Bs.create(S.doc,Ft)))}S.scrollIntoView()}return!0}).run()}},addInputRules(){return[(0,v.nodeInputRule)({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),U=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,Ot=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,wt=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,H=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,a=v.Mark.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:$=>"normal"!==$.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:$}){return["em",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setItalic:()=>({commands:$})=>$.setMark(this.name),toggleItalic:()=>({commands:$})=>$.toggleMark(this.name),unsetItalic:()=>({commands:$})=>$.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,v.markInputRule)({find:U,type:this.type}),(0,v.markInputRule)({find:wt,type:this.type})]},addPasteRules(){return[(0,v.markPasteRule)({find:Ot,type:this.type}),(0,v.markPasteRule)({find:H,type:this.type})]}}),p=v.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:$}){return["li",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),E=v.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:$}){return["li",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),D=v.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:$=>!!$.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:$}){return["span",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:$,commands:S})=>{const ct=(0,v.getMarkAttributes)($,this.type);return!!Object.entries(ct).some(([,yt])=>!!yt)||S.unsetMark(this.name)}}}}),w=/^(\d+)\.\s$/,K=v.Node.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:$=>$.hasAttribute("start")?parseInt($.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:$}){const Ct=$,{start:S}=Ct,ct=jo(Ct,["start"]);return 1===S?["ol",(0,v.mergeAttributes)(this.options.HTMLAttributes,ct),0]:["ol",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{toggleOrderedList:()=>({commands:$,chain:S})=>this.options.keepAttributes?S().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(E.name,this.editor.getAttributes(D.name)).run():$.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let $=(0,v.wrappingInputRule)({find:w,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&($=(0,v.wrappingInputRule)({find:w,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(D.name),editor:this.editor})),[$]}}),lt=v.Node.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:$}){return["p",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setParagraph:()=>({commands:$})=>$.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Rt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,qt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,te=v.Mark.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:$=>!!$.includes("line-through")&&{}}],renderHTML({HTMLAttributes:$}){return["s",(0,v.mergeAttributes)(this.options.HTMLAttributes,$),0]},addCommands(){return{setStrike:()=>({commands:$})=>$.setMark(this.name),toggleStrike:()=>({commands:$})=>$.toggleMark(this.name),unsetStrike:()=>({commands:$})=>$.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,v.markInputRule)({find:Rt,type:this.type})]},addPasteRules(){return[(0,v.markPasteRule)({find:qt,type:this.type})]}}),ke=v.Node.create({name:"text",group:"inline"}),Je=v.Extension.create({name:"starterKit",addExtensions(){const $=[],S=this.options;return!1!==(null==S?void 0:S.blockquote)&&$.push(y.configure(null==S?void 0:S.blockquote)),!1!==(null==S?void 0:S.bold)&&$.push(X.configure(null==S?void 0:S.bold)),!1!==(null==S?void 0:S.bulletList)&&$.push(et.configure(null==S?void 0:S.bulletList)),!1!==(null==S?void 0:S.code)&&$.push(bt.configure(null==S?void 0:S.code)),!1!==(null==S?void 0:S.codeBlock)&&$.push(ht.configure(null==S?void 0:S.codeBlock)),!1!==(null==S?void 0:S.document)&&$.push(q.configure(null==S?void 0:S.document)),!1!==(null==S?void 0:S.dropcursor)&&$.push(At.configure(null==S?void 0:S.dropcursor)),!1!==(null==S?void 0:S.gapcursor)&&$.push(kt.configure(null==S?void 0:S.gapcursor)),!1!==(null==S?void 0:S.hardBreak)&&$.push($t.configure(null==S?void 0:S.hardBreak)),!1!==(null==S?void 0:S.heading)&&$.push(Yt.configure(null==S?void 0:S.heading)),!1!==(null==S?void 0:S.history)&&$.push(R.configure(null==S?void 0:S.history)),!1!==(null==S?void 0:S.horizontalRule)&&$.push(V.configure(null==S?void 0:S.horizontalRule)),!1!==(null==S?void 0:S.italic)&&$.push(a.configure(null==S?void 0:S.italic)),!1!==(null==S?void 0:S.listItem)&&$.push(p.configure(null==S?void 0:S.listItem)),!1!==(null==S?void 0:S.orderedList)&&$.push(K.configure(null==S?void 0:S.orderedList)),!1!==(null==S?void 0:S.paragraph)&&$.push(lt.configure(null==S?void 0:S.paragraph)),!1!==(null==S?void 0:S.strike)&&$.push(te.configure(null==S?void 0:S.strike)),!1!==(null==S?void 0:S.text)&&$.push(ke.configure(null==S?void 0:S.text)),$}})},51919:(jt,Mt,c)=>{c.r(Mt),c.d(Mt,{TableCellBackground:()=>l});const l=c(12867).Extension.create({addGlobalAttributes:()=>[{types:["tableCell","tableHeader"],attributes:{background:{default:null,renderHTML:({background:y})=>y?{style:`background: ${y}`}:null,parseHTML:({style:y})=>y.background,keepOnSplit:!1}}}],addCommands:()=>({setCellBackground:y=>({chain:P})=>P().updateAttributes("tableCell",{background:y}).updateAttributes("tableHeader",{background:y}).run(),unsetCellBackground:()=>({chain:y})=>y().updateAttributes("tableCell",{background:null}).updateAttributes("tableHeader",{background:null}).run()})})},86624:(jt,Mt,c)=>{c.r(Mt),c.d(Mt,{TuiTable:()=>sn});var N,X,v=c(12867),l=c(62463),y=c(77346),P=c(43594),g=c(70768),it=c(38480);if("undefined"!=typeof WeakMap){let _=new WeakMap;N=C=>_.get(C),X=(C,m)=>(_.set(C,m),m)}else{const _=[],C=10;let m=0;N=f=>{for(let M=0;M<_.length;M+=2)if(_[M]==f)return _[M+1]},X=(f,M)=>(m==C&&(m=0),_[m++]=f,_[m++]=M)}var tt=class{constructor(_,C,m,f){this.width=_,this.height=C,this.map=m,this.problems=f}findCell(_){for(let C=0;C<this.map.length;C++){const m=this.map[C];if(m!=_)continue;const f=C%this.width,M=C/this.width|0;let x=f+1,L=M+1;for(let Y=1;x<this.width&&this.map[C+Y]==m;Y++)x++;for(let Y=1;L<this.height&&this.map[C+this.width*Y]==m;Y++)L++;return{left:f,top:M,right:x,bottom:L}}throw new RangeError(`No cell with offset ${_} found`)}colCount(_){for(let C=0;C<this.map.length;C++)if(this.map[C]==_)return C%this.width;throw new RangeError(`No cell with offset ${_} found`)}nextCell(_,C,m){const{left:f,right:M,top:x,bottom:L}=this.findCell(_);return"horiz"==C?(m<0?0==f:M==this.width)?null:this.map[x*this.width+(m<0?f-1:M)]:(m<0?0==x:L==this.height)?null:this.map[f+this.width*(m<0?x-1:L)]}rectBetween(_,C){const{left:m,right:f,top:M,bottom:x}=this.findCell(_),{left:L,right:Y,top:W,bottom:G}=this.findCell(C);return{left:Math.min(m,L),top:Math.min(M,W),right:Math.max(f,Y),bottom:Math.max(x,G)}}cellsInRect(_){const C=[],m={};for(let f=_.top;f<_.bottom;f++)for(let M=_.left;M<_.right;M++){const x=f*this.width+M,L=this.map[x];m[L]||(m[L]=!0,!(M==_.left&&M&&this.map[x-1]==L||f==_.top&&f&&this.map[x-this.width]==L)&&C.push(L))}return C}positionAt(_,C,m){for(let f=0,M=0;;f++){const x=M+m.child(f).nodeSize;if(f==_){let L=C+_*this.width;const Y=(_+1)*this.width;for(;L<Y&&this.map[L]<M;)L++;return L==Y?x-1:this.map[L]}M=x}}static get(_){return N(_)||X(_,function(_){if("table"!=_.type.spec.tableRole)throw new RangeError("Not a table node: "+_.type.name);const C=function(_){let C=-1,m=!1;for(let f=0;f<_.childCount;f++){const M=_.child(f);let x=0;if(m)for(let L=0;L<f;L++){const Y=_.child(L);for(let W=0;W<Y.childCount;W++){const G=Y.child(W);L+G.attrs.rowspan>f&&(x+=G.attrs.colspan)}}for(let L=0;L<M.childCount;L++){const Y=M.child(L);x+=Y.attrs.colspan,Y.attrs.rowspan>1&&(m=!0)}-1==C?C=x:C!=x&&(C=Math.max(C,x))}return C}(_),m=_.childCount,f=[];let M=0,x=null;const L=[];for(let G=0,vt=C*m;G<vt;G++)f[G]=0;for(let G=0,vt=0;G<m;G++){const xt=_.child(G);vt++;for(let Vt=0;;Vt++){for(;M<f.length&&0!=f[M];)M++;if(Vt==xt.childCount)break;const re=xt.child(Vt),{colspan:ie,rowspan:be,colwidth:qe}=re.attrs;for(let Ye=0;Ye<be;Ye++){if(Ye+G>=m){(x||(x=[])).push({type:"overlong_rowspan",pos:vt,n:be-Ye});break}const Ce=M+Ye*C;for(let De=0;De<ie;De++){0==f[Ce+De]?f[Ce+De]=vt:(x||(x=[])).push({type:"collision",row:G,pos:vt,n:ie-De});const cn=qe&&qe[De];if(cn){const en=(Ce+De)%C*2,pe=L[en];null==pe||pe!=cn&&1==L[en+1]?(L[en]=cn,L[en+1]=1):pe==cn&&L[en+1]++}}}M+=ie,vt+=re.nodeSize}const Nt=(G+1)*C;let Ut=0;for(;M<Nt;)0==f[M++]&&Ut++;Ut&&(x||(x=[])).push({type:"missing",row:G,n:Ut}),vt++}const Y=new tt(C,m,f,x);let W=!1;for(let G=0;!W&&G<L.length;G+=2)null!=L[G]&&L[G+1]<m&&(W=!0);return W&&function(_,C,m){_.problems||(_.problems=[]);const f={};for(let M=0;M<_.map.length;M++){const x=_.map[M];if(f[x])continue;f[x]=!0;const L=m.nodeAt(x);if(!L)throw new RangeError(`No cell with offset ${x} found`);let Y=null;const W=L.attrs;for(let G=0;G<W.colspan;G++){const xt=C[(M+G)%_.width*2];null!=xt&&(!W.colwidth||W.colwidth[G]!=xt)&&((Y||(Y=_t(W)))[G]=xt)}Y&&_.problems.unshift({type:"colwidth mismatch",pos:x,colwidth:Y})}}(Y,L,_),Y}(_))}};function _t(_){if(_.colwidth)return _.colwidth.slice();const C=[];for(let m=0;m<_.colspan;m++)C.push(0);return C}function Pt(_){let C=_.cached.tableNodeTypes;if(!C){C=_.cached.tableNodeTypes={};for(const m in _.nodes){const f=_.nodes[m],M=f.spec.tableRole;M&&(C[M]=f)}}return C}var Dt=new l.H$("selectingCells");function ht(_){for(let C=_.depth-1;C>0;C--)if("row"==_.node(C).type.spec.tableRole)return _.node(0).resolve(_.before(C+1));return null}function F(_){const C=_.selection.$head;for(let m=C.depth;m>0;m--)if("row"==C.node(m).type.spec.tableRole)return!0;return!1}function mt(_){const C=_.selection;if("$anchorCell"in C&&C.$anchorCell)return C.$anchorCell.pos>C.$headCell.pos?C.$anchorCell:C.$headCell;if("node"in C&&C.node&&"cell"==C.node.type.spec.tableRole)return C.$anchor;const m=ht(C.$head)||function(_){for(let C=_.nodeAfter,m=_.pos;C;C=C.firstChild,m++){const f=C.type.spec.tableRole;if("cell"==f||"header_cell"==f)return _.doc.resolve(m)}for(let C=_.nodeBefore,m=_.pos;C;C=C.lastChild,m--){const f=C.type.spec.tableRole;if("cell"==f||"header_cell"==f)return _.doc.resolve(m-C.nodeSize)}}(C.$head);if(m)return m;throw new RangeError(`No cell found around position ${C.head}`)}function At(_){return"row"==_.parent.type.spec.tableRole&&!!_.nodeAfter}function Et(_,C){return _.depth==C.depth&&_.pos>=C.start(-1)&&_.pos<=C.end(-1)}function Kt(_,C,m){const f=_.node(-1),M=tt.get(f),x=_.start(-1),L=M.nextCell(_.pos-x,C,m);return null==L?null:_.node(0).resolve(x+L)}function pt(_,C,m=1){const f=me(Gt({},_),{colspan:_.colspan-m});return f.colwidth&&(f.colwidth=f.colwidth.slice(),f.colwidth.splice(C,m),f.colwidth.some(M=>M>0)||(f.colwidth=null)),f}function B(_,C,m=1){const f=me(Gt({},_),{colspan:_.colspan+m});if(f.colwidth){f.colwidth=f.colwidth.slice();for(let M=0;M<m;M++)f.colwidth.splice(C,0,0)}return f}var at=class extends l.Y1{constructor(_,C=_){const m=_.node(-1),f=tt.get(m),M=_.start(-1),x=f.rectBetween(_.pos-M,C.pos-M),L=_.node(0),Y=f.cellsInRect(x).filter(G=>G!=C.pos-M);Y.unshift(C.pos-M);const W=Y.map(G=>{const vt=m.nodeAt(G);if(!vt)throw RangeError(`No cell with offset ${G} found`);const xt=M+G+1;return new l.xm(L.resolve(xt),L.resolve(xt+vt.content.size))});super(W[0].$from,W[0].$to,W),this.$anchorCell=_,this.$headCell=C}map(_,C){const m=_.resolve(C.map(this.$anchorCell.pos)),f=_.resolve(C.map(this.$headCell.pos));if(At(m)&&At(f)&&Et(m,f)){const M=this.$anchorCell.node(-1)!=m.node(-1);return M&&this.isRowSelection()?at.rowSelection(m,f):M&&this.isColSelection()?at.colSelection(m,f):new at(m,f)}return l.Bs.between(m,f)}content(){const _=this.$anchorCell.node(-1),C=tt.get(_),m=this.$anchorCell.start(-1),f=C.rectBetween(this.$anchorCell.pos-m,this.$headCell.pos-m),M={},x=[];for(let Y=f.top;Y<f.bottom;Y++){const W=[];for(let G=Y*C.width+f.left,vt=f.left;vt<f.right;vt++,G++){const xt=C.map[G];if(M[xt])continue;M[xt]=!0;const Nt=C.findCell(xt);let Ut=_.nodeAt(xt);if(!Ut)throw RangeError(`No cell with offset ${xt} found`);const Vt=f.left-Nt.left,re=Nt.right-f.right;if(Vt>0||re>0){let ie=Ut.attrs;if(Vt>0&&(ie=pt(ie,0,Vt)),re>0&&(ie=pt(ie,ie.colspan-re,re)),Nt.left<f.left){if(Ut=Ut.type.createAndFill(ie),!Ut)throw RangeError(`Could not create cell with attrs ${JSON.stringify(ie)}`)}else Ut=Ut.type.create(ie,Ut.content)}if(Nt.top<f.top||Nt.bottom>f.bottom){const ie=me(Gt({},Ut.attrs),{rowspan:Math.min(Nt.bottom,f.bottom)-Math.max(Nt.top,f.top)});Ut=Nt.top<f.top?Ut.type.createAndFill(ie):Ut.type.create(ie,Ut.content)}W.push(Ut)}x.push(_.child(Y).copy(y.HY.from(W)))}const L=this.isColSelection()&&this.isRowSelection()?_:x;return new y.p2(y.HY.from(L),1,1)}replace(_,C=y.p2.empty){const m=_.steps.length,f=this.ranges;for(let x=0;x<f.length;x++){const{$from:L,$to:Y}=f[x],W=_.mapping.slice(m);_.replace(W.map(L.pos),W.map(Y.pos),x?y.p2.empty:C)}const M=l.Y1.findFrom(_.doc.resolve(_.mapping.slice(m).map(this.to)),-1);M&&_.setSelection(M)}replaceWith(_,C){this.replace(_,new y.p2(y.HY.from(C),0,0))}forEachCell(_){const C=this.$anchorCell.node(-1),m=tt.get(C),f=this.$anchorCell.start(-1),M=m.cellsInRect(m.rectBetween(this.$anchorCell.pos-f,this.$headCell.pos-f));for(let x=0;x<M.length;x++)_(C.nodeAt(M[x]),f+M[x])}isColSelection(){const _=this.$anchorCell.index(-1),C=this.$headCell.index(-1);return!(Math.min(_,C)>0)&&Math.max(_+this.$anchorCell.nodeAfter.attrs.rowspan,C+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(_,C=_){const m=_.node(-1),f=tt.get(m),M=_.start(-1),x=f.findCell(_.pos-M),L=f.findCell(C.pos-M),Y=_.node(0);return x.top<=L.top?(x.top>0&&(_=Y.resolve(M+f.map[x.left])),L.bottom<f.height&&(C=Y.resolve(M+f.map[f.width*(f.height-1)+L.right-1]))):(L.top>0&&(C=Y.resolve(M+f.map[L.left])),x.bottom<f.height&&(_=Y.resolve(M+f.map[f.width*(f.height-1)+x.right-1]))),new at(_,C)}isRowSelection(){const _=this.$anchorCell.node(-1),C=tt.get(_),m=this.$anchorCell.start(-1),f=C.colCount(this.$anchorCell.pos-m),M=C.colCount(this.$headCell.pos-m);return!(Math.min(f,M)>0)&&Math.max(f+this.$anchorCell.nodeAfter.attrs.colspan,M+this.$headCell.nodeAfter.attrs.colspan)==C.width}eq(_){return _ instanceof at&&_.$anchorCell.pos==this.$anchorCell.pos&&_.$headCell.pos==this.$headCell.pos}static rowSelection(_,C=_){const m=_.node(-1),f=tt.get(m),M=_.start(-1),x=f.findCell(_.pos-M),L=f.findCell(C.pos-M),Y=_.node(0);return x.left<=L.left?(x.left>0&&(_=Y.resolve(M+f.map[x.top*f.width])),L.right<f.width&&(C=Y.resolve(M+f.map[f.width*(L.top+1)-1]))):(L.left>0&&(C=Y.resolve(M+f.map[L.top*f.width])),x.right<f.width&&(_=Y.resolve(M+f.map[f.width*(x.top+1)-1]))),new at(_,C)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(_,C){return new at(_.resolve(C.anchor),_.resolve(C.head))}static create(_,C,m=C){return new at(_.resolve(C),_.resolve(m))}getBookmark(){return new st(this.$anchorCell.pos,this.$headCell.pos)}};at.prototype.visible=!1,l.Y1.jsonID("cell",at);var st=class{constructor(_,C){this.anchor=_,this.head=C}map(_){return new st(_.map(this.anchor),_.map(this.head))}resolve(_){const C=_.resolve(this.anchor),m=_.resolve(this.head);return"row"==C.parent.type.spec.tableRole&&"row"==m.parent.type.spec.tableRole&&C.index()<C.parent.childCount&&m.index()<m.parent.childCount&&Et(C,m)?new at(C,m):l.Y1.near(m,1)}};function J(_){if(!(_.selection instanceof at))return null;const C=[];return _.selection.forEachCell((m,f)=>{C.push(P.p.node(f,f+m.nodeSize,{class:"selectedCell"}))}),P.EH.create(_.doc,C)}var $t=new l.H$("fix-tables");function Yt(_,C,m,f){const M=_.childCount,x=C.childCount;t:for(let L=0,Y=0;L<x;L++){const W=C.child(L);for(let G=Y,vt=Math.min(M,L+3);G<vt;G++)if(_.child(G)==W){Y=G+1,m+=W.nodeSize;continue t}f(W,m),Y<M&&_.child(Y).sameMarkup(W)?Yt(_.child(Y),W,m+1,f):W.nodesBetween(0,W.content.size,f,m+1),m+=W.nodeSize}}function ee(_,C){let m;const f=(M,x)=>{"table"==M.type.spec.tableRole&&(m=function(_,C,m,f){const M=tt.get(C);if(!M.problems)return f;f||(f=_.tr);const x=[];for(let W=0;W<M.height;W++)x.push(0);for(let W=0;W<M.problems.length;W++){const G=M.problems[W];if("collision"==G.type){const vt=C.nodeAt(G.pos);if(!vt)continue;const xt=vt.attrs;for(let Nt=0;Nt<xt.rowspan;Nt++)x[G.row+Nt]+=G.n;f.setNodeMarkup(f.mapping.map(m+1+G.pos),null,pt(xt,xt.colspan-G.n,G.n))}else if("missing"==G.type)x[G.row]+=G.n;else if("overlong_rowspan"==G.type){const vt=C.nodeAt(G.pos);if(!vt)continue;f.setNodeMarkup(f.mapping.map(m+1+G.pos),null,me(Gt({},vt.attrs),{rowspan:vt.attrs.rowspan-G.n}))}else if("colwidth mismatch"==G.type){const vt=C.nodeAt(G.pos);if(!vt)continue;f.setNodeMarkup(f.mapping.map(m+1+G.pos),null,me(Gt({},vt.attrs),{colwidth:G.colwidth}))}}let L,Y;for(let W=0;W<x.length;W++)x[W]&&(null==L&&(L=W),Y=W);for(let W=0,G=m+1;W<M.height;W++){const vt=C.child(W),xt=G+vt.nodeSize,Nt=x[W];if(Nt>0){let Ut="cell";vt.firstChild&&(Ut=vt.firstChild.type.spec.tableRole);const Vt=[];for(let ie=0;ie<Nt;ie++){const be=Pt(_.schema)[Ut].createAndFill();be&&Vt.push(be)}f.insert(f.mapping.map(0!=W&&L!=W-1||Y!=W?xt-1:G+1),Vt)}G=xt}return f.setMeta($t,{fixTables:!0})}(_,M,x,m))};return C?C.doc!=_.doc&&Yt(C.doc,_.doc,0,f):_.doc.descendants(f),m}function Oe(_,C){const m=_.createAndFill();return new it.wx(m).replace(0,m.content.size,C).doc}function xe(_,C,m,f,M,x,L,Y){if(0==L||L==C.height)return!1;let W=!1;for(let G=M;G<x;G++){const vt=L*C.width+G,xt=C.map[vt];if(C.map[vt-C.width]==xt){W=!0;const Nt=m.nodeAt(xt),{top:Ut,left:Vt}=C.findCell(xt);_.setNodeMarkup(_.mapping.slice(Y).map(xt+f),null,me(Gt({},Nt.attrs),{rowspan:L-Ut})),_.insert(_.mapping.slice(Y).map(C.positionAt(L,Vt,m)),Nt.type.createAndFill(me(Gt({},Nt.attrs),{rowspan:Ut+Nt.attrs.rowspan-L}))),G+=Nt.attrs.colspan-1}}return W}function Be(_,C,m,f,M,x,L,Y){if(0==L||L==C.width)return!1;let W=!1;for(let G=M;G<x;G++){const vt=G*C.width+L,xt=C.map[vt];if(C.map[vt-1]==xt){W=!0;const Nt=m.nodeAt(xt),Ut=C.colCount(xt),Vt=_.mapping.slice(Y).map(xt+f);_.setNodeMarkup(Vt,null,pt(Nt.attrs,L-Ut,Nt.attrs.colspan-(L-Ut))),_.insert(Vt+Nt.nodeSize,Nt.type.createAndFill(pt(Nt.attrs,0,L-Ut))),G+=Nt.attrs.rowspan-1}}return W}function ge(_,C,m,f,M){let x=m?_.doc.nodeAt(m-1):_.doc;if(!x)throw new Error("No table found");let L=tt.get(x);const{top:Y,left:W}=f,G=W+M.width,vt=Y+M.height,xt=_.tr;let Nt=0;function Ut(){if(x=m?xt.doc.nodeAt(m-1):xt.doc,!x)throw new Error("No table found");L=tt.get(x),Nt=xt.mapping.maps.length}(function(_,C,m,f,M,x,L){const W=Pt(_.doc.type.schema);let G,vt;if(M>C.width)for(let xt=0,Nt=0;xt<C.height;xt++){const Ut=m.child(xt);Nt+=Ut.nodeSize;const Vt=[];let re;re=null==Ut.lastChild||Ut.lastChild.type==W.cell?G||(G=W.cell.createAndFill()):vt||(vt=W.header_cell.createAndFill());for(let ie=C.width;ie<M;ie++)Vt.push(re);_.insert(_.mapping.slice(L).map(Nt-1+f),Vt)}if(x>C.height){const xt=[];for(let Vt=0,re=(C.height-1)*C.width;Vt<Math.max(C.width,M);Vt++){const ie=!(Vt>=C.width)&&m.nodeAt(C.map[re+Vt]).type==W.header_cell;xt.push(ie?vt||(vt=W.header_cell.createAndFill()):G||(G=W.cell.createAndFill()))}const Nt=W.row.create(null,y.HY.from(xt)),Ut=[];for(let Vt=C.height;Vt<x;Vt++)Ut.push(Nt);_.insert(_.mapping.slice(L).map(f+m.nodeSize-2),Ut)}return!(!G&&!vt)})(xt,L,x,m,G,vt,Nt)&&Ut(),xe(xt,L,x,m,W,G,Y,Nt)&&Ut(),xe(xt,L,x,m,W,G,vt,Nt)&&Ut(),Be(xt,L,x,m,Y,vt,W,Nt)&&Ut(),Be(xt,L,x,m,Y,vt,G,Nt)&&Ut();for(let Vt=Y;Vt<vt;Vt++){const re=L.positionAt(Vt,W,x),ie=L.positionAt(Vt,G,x);xt.replace(xt.mapping.slice(Nt).map(re+m),xt.mapping.slice(Nt).map(ie+m),new y.p2(M.rows[Vt-Y],0,0))}Ut(),xt.setSelection(new at(xt.doc.resolve(m+L.positionAt(Y,W,x)),xt.doc.resolve(m+L.positionAt(vt-1,G-1,x)))),C(xt)}var Ae=(0,g.$)({ArrowLeft:Pe("horiz",-1),ArrowRight:Pe("horiz",1),ArrowUp:Pe("vert",-1),ArrowDown:Pe("vert",1),"Shift-ArrowLeft":Ne("horiz",-1),"Shift-ArrowRight":Ne("horiz",1),"Shift-ArrowUp":Ne("vert",-1),"Shift-ArrowDown":Ne("vert",1),Backspace:Me,"Mod-Backspace":Me,Delete:Me,"Mod-Delete":Me});function ve(_,C,m){return!m.eq(_.selection)&&(C&&C(_.tr.setSelection(m).scrollIntoView()),!0)}function Pe(_,C){return(m,f,M)=>{if(!M)return!1;const x=m.selection;if(x instanceof at)return ve(m,f,l.Y1.near(x.$headCell,C));if("horiz"!=_&&!x.empty)return!1;const L=Ue(M,_,C);if(null==L)return!1;if("horiz"==_)return ve(m,f,l.Y1.near(m.doc.resolve(x.head+C),C));{const Y=m.doc.resolve(L),W=Kt(Y,_,C);let G;return G=W?l.Y1.near(W,1):C<0?l.Y1.near(m.doc.resolve(Y.before(-1)),-1):l.Y1.near(m.doc.resolve(Y.after(-1)),1),ve(m,f,G)}}}function Ne(_,C){return(m,f,M)=>{if(!M)return!1;const x=m.selection;let L;if(x instanceof at)L=x;else{const W=Ue(M,_,C);if(null==W)return!1;L=new at(m.doc.resolve(W))}const Y=Kt(L.$headCell,_,C);return!!Y&&ve(m,f,new at(L.$anchorCell,Y))}}function Me(_,C){const m=_.selection;if(!(m instanceof at))return!1;if(C){const f=_.tr,M=Pt(_.schema).cell.createAndFill().content;m.forEachCell((x,L)=>{x.content.eq(M)||f.replace(f.mapping.map(L+1),f.mapping.map(L+x.nodeSize-1),new y.p2(M,0,0))}),f.docChanged&&C(f)}return!0}function Ie(_,C){const f=ht(_.state.doc.resolve(C));return!!f&&(_.dispatch(_.state.tr.setSelection(new at(f))),!0)}function Ze(_,C,m){if(!F(_.state))return!1;let f=function(_){if(!_.size)return null;let{content:C,openStart:m,openEnd:f}=_;for(;1==C.childCount&&(m>0&&f>0||"table"==C.child(0).type.spec.tableRole);)m--,f--,C=C.child(0).content;const M=C.child(0),x=M.type.spec.tableRole,L=M.type.schema,Y=[];if("row"==x)for(let W=0;W<C.childCount;W++){let G=C.child(W).content;const vt=W?0:Math.max(0,m-1),xt=W<C.childCount-1?0:Math.max(0,f-1);(vt||xt)&&(G=Oe(Pt(L).row,new y.p2(G,vt,xt)).content),Y.push(G)}else{if("cell"!=x&&"header_cell"!=x)return null;Y.push(m||f?Oe(Pt(L).row,new y.p2(C,m,f)).content:C)}return function(_,C){const m=[];for(let M=0;M<C.length;M++){const x=C[M];for(let L=x.childCount-1;L>=0;L--){const{rowspan:Y,colspan:W}=x.child(L).attrs;for(let G=M;G<M+Y;G++)m[G]=(m[G]||0)+W}}let f=0;for(let M=0;M<m.length;M++)f=Math.max(f,m[M]);for(let M=0;M<m.length;M++)if(M>=C.length&&C.push(y.HY.empty),m[M]<f){const x=Pt(_).cell.createAndFill(),L=[];for(let Y=m[M];Y<f;Y++)L.push(x);C[M]=C[M].append(y.HY.from(L))}return{height:C.length,width:f,rows:C}}(L,Y)}(m);const M=_.state.selection;if(M instanceof at){f||(f={width:1,height:1,rows:[y.HY.from(Oe(Pt(_.state.schema).cell,m))]});const x=M.$anchorCell.node(-1),L=M.$anchorCell.start(-1),Y=tt.get(x).rectBetween(M.$anchorCell.pos-L,M.$headCell.pos-L);return f=function({width:_,height:C,rows:m},f,M){if(_!=f){const x=[],L=[];for(let Y=0;Y<m.length;Y++){const W=m[Y],G=[];for(let vt=x[Y]||0,xt=0;vt<f;xt++){let Nt=W.child(xt%W.childCount);vt+Nt.attrs.colspan>f&&(Nt=Nt.type.createChecked(pt(Nt.attrs,Nt.attrs.colspan,vt+Nt.attrs.colspan-f),Nt.content)),G.push(Nt),vt+=Nt.attrs.colspan;for(let Ut=1;Ut<Nt.attrs.rowspan;Ut++)x[Y+Ut]=(x[Y+Ut]||0)+Nt.attrs.colspan}L.push(y.HY.from(G))}m=L,_=f}if(C!=M){const x=[];for(let L=0,Y=0;L<M;L++,Y++){const W=[],G=m[Y%C];for(let vt=0;vt<G.childCount;vt++){let xt=G.child(vt);L+xt.attrs.rowspan>M&&(xt=xt.type.create(me(Gt({},xt.attrs),{rowspan:Math.max(1,M-xt.attrs.rowspan)}),xt.content)),W.push(xt)}x.push(y.HY.from(W))}m=x,C=M}return{width:_,height:C,rows:m}}(f,Y.right-Y.left,Y.bottom-Y.top),ge(_.state,_.dispatch,L,Y,f),!0}if(f){const x=mt(_.state),L=x.start(-1);return ge(_.state,_.dispatch,L,tt.get(x.node(-1)).findCell(x.pos-L),f),!0}return!1}function He(_,C){var m;if(C.ctrlKey||C.metaKey)return;const f=Le(_,C.target);let M;if(C.shiftKey&&_.state.selection instanceof at)x(_.state.selection.$anchorCell,C),C.preventDefault();else if(C.shiftKey&&f&&null!=(M=ht(_.state.selection.$anchor))&&(null==(m=ze(_,C))?void 0:m.pos)!=M.pos)x(M,C),C.preventDefault();else if(!f)return;function x(W,G){let vt=ze(_,G);const xt=null==Dt.getState(_.state);if(!vt||!Et(W,vt)){if(!xt)return;vt=W}const Nt=new at(W,vt);if(xt||!_.state.selection.eq(Nt)){const Ut=_.state.tr.setSelection(Nt);xt&&Ut.setMeta(Dt,W.pos),_.dispatch(Ut)}}function L(){_.root.removeEventListener("mouseup",L),_.root.removeEventListener("dragstart",L),_.root.removeEventListener("mousemove",Y),null!=Dt.getState(_.state)&&_.dispatch(_.state.tr.setMeta(Dt,-1))}function Y(W){const G=W,vt=Dt.getState(_.state);let xt;if(null!=vt)xt=_.state.doc.resolve(vt);else if(Le(_,G.target)!=f&&(xt=ze(_,C),!xt))return L();xt&&x(xt,G)}_.root.addEventListener("mouseup",L),_.root.addEventListener("dragstart",L),_.root.addEventListener("mousemove",Y)}function Ue(_,C,m){if(!(_.state.selection instanceof l.Bs))return null;const{$head:f}=_.state.selection;for(let M=f.depth-1;M>=0;M--){const x=f.node(M);if((m<0?f.index(M):f.indexAfter(M))!=(m<0?0:x.childCount))return null;if("cell"==x.type.spec.tableRole||"header_cell"==x.type.spec.tableRole){const Y=f.before(M);return _.endOfTextblock("vert"==C?m>0?"down":"up":m>0?"right":"left")?Y:null}}return null}function Le(_,C){for(;C&&C!=_.dom;C=C.parentNode)if("TD"==C.nodeName||"TH"==C.nodeName)return C;return null}function ze(_,C){const m=_.posAtCoords({left:C.clientX,top:C.clientY});return m&&m?ht(_.state.doc.resolve(m.pos)):null}var _e=class{constructor(_,C){this.node=_,this.cellMinWidth=C,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),fe(_,this.colgroup,this.table,C),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(_){return _.type==this.node.type&&(this.node=_,fe(_,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(_){return"attributes"==_.type&&(_.target==this.table||this.colgroup.contains(_.target))}};function fe(_,C,m,f,M,x){var L;let Y=0,W=!0,G=C.firstChild;const vt=_.firstChild;if(vt){for(let xt=0,Nt=0;xt<vt.childCount;xt++){const{colspan:Ut,colwidth:Vt}=vt.child(xt).attrs;for(let re=0;re<Ut;re++,Nt++){const ie=M==Nt?x:Vt&&Vt[re],be=ie?ie+"px":"";Y+=ie||f,ie||(W=!1),G?(G.style.width!=be&&(G.style.width=be),G=G.nextSibling):C.appendChild(document.createElement("col")).style.width=be}}for(;G;){const xt=G.nextSibling;null==(L=G.parentNode)||L.removeChild(G),G=xt}W?(m.style.width=Y+"px",m.style.minWidth=""):(m.style.width="",m.style.minWidth=Y+"px")}}var Ee=new l.H$("tableColumnResizing");function gt({handleWidth:_=5,cellMinWidth:C=25,View:m=_e,lastColumnResizable:f=!0}={}){const M=new l.Sy({key:Ee,state:{init:(x,L)=>(M.spec.props.nodeViews[Pt(L.schema).table.name]=(Y,W)=>new m(Y,C,W),new b(-1,!1)),apply:(x,L)=>L.apply(x)},props:{attributes:x=>{const L=Ee.getState(x);return L&&L.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(x,L)=>{!function(_,C,m,f,M){const x=Ee.getState(_.state);if(x&&!x.dragging){const L=function(_){for(;_&&"TD"!=_.nodeName&&"TH"!=_.nodeName;)_=_.classList&&_.classList.contains("ProseMirror")?null:_.parentNode;return _}(C.target);let Y=-1;if(L){const{left:W,right:G}=L.getBoundingClientRect();C.clientX-W<=m?Y=Ot(_,C,"left"):G-C.clientX<=m&&(Y=Ot(_,C,"right"))}if(Y!=x.activeHandle){if(!M&&-1!==Y){const W=_.state.doc.resolve(Y),G=W.node(-1),vt=tt.get(G),xt=W.start(-1);if(vt.colCount(W.pos-xt)+W.nodeAfter.attrs.colspan-1==vt.width-1)return}H(_,Y)}}}(x,L,_,0,f)},mouseleave:x=>{!function(_){const C=Ee.getState(_.state);C&&C.activeHandle>-1&&!C.dragging&&H(_,-1)}(x)},mousedown:(x,L)=>{!function(_,C,m){const f=Ee.getState(_.state);if(!f||-1==f.activeHandle||f.dragging)return!1;const M=_.state.doc.nodeAt(f.activeHandle),x=function(_,C,{colspan:m,colwidth:f}){const M=f&&f[f.length-1];if(M)return M;const x=_.domAtPos(C);let Y=x.node.childNodes[x.offset].offsetWidth,W=m;if(f)for(let G=0;G<m;G++)f[G]&&(Y-=f[G],W--);return Y/W}(_,f.activeHandle,M.attrs);function L(W){window.removeEventListener("mouseup",L),window.removeEventListener("mousemove",Y);const G=Ee.getState(_.state);(null==G?void 0:G.dragging)&&(function(_,C,m){const f=_.state.doc.resolve(C),M=f.node(-1),x=tt.get(M),L=f.start(-1),Y=x.colCount(f.pos-L)+f.nodeAfter.attrs.colspan-1,W=_.state.tr;for(let G=0;G<x.height;G++){const vt=G*x.width+Y;if(G&&x.map[vt]==x.map[vt-x.width])continue;const xt=x.map[vt],Nt=M.nodeAt(xt).attrs,Ut=1==Nt.colspan?0:Y-x.colCount(xt);if(Nt.colwidth&&Nt.colwidth[Ut]==m)continue;const Vt=Nt.colwidth?Nt.colwidth.slice():E(Nt.colspan);Vt[Ut]=m,W.setNodeMarkup(L+xt,null,me(Gt({},Nt),{colwidth:Vt}))}W.docChanged&&_.dispatch(W)}(_,G.activeHandle,wt(G.dragging,W,m)),_.dispatch(_.state.tr.setMeta(Ee,{setDragging:null})))}function Y(W){if(!W.which)return L(W);const G=Ee.getState(_.state);if(G&&G.dragging){const vt=wt(G.dragging,W,m);!function(_,C,m,f){const M=_.state.doc.resolve(C),x=M.node(-1),L=M.start(-1),Y=tt.get(x).colCount(M.pos-L)+M.nodeAfter.attrs.colspan-1;let W=_.domAtPos(M.start(-1)).node;for(;W&&"TABLE"!=W.nodeName;)W=W.parentNode;!W||fe(x,W.firstChild,W,f,Y,m)}(_,G.activeHandle,vt,m)}}_.dispatch(_.state.tr.setMeta(Ee,{setDragging:{startX:C.clientX,startWidth:x}})),window.addEventListener("mouseup",L),window.addEventListener("mousemove",Y),C.preventDefault()}(x,L,C)}},decorations:x=>{const L=Ee.getState(x);if(L&&L.activeHandle>-1)return function(_,C){const m=[],f=_.doc.resolve(C),M=f.node(-1);if(!M)return P.EH.empty;const x=tt.get(M),L=f.start(-1),Y=x.colCount(f.pos-L)+f.nodeAfter.attrs.colspan;for(let W=0;W<x.height;W++){const G=Y+W*x.width-1;if(!(Y!=x.width&&x.map[G]==x.map[G+1]||0!=W&&x.map[G-1]==x.map[G-1-x.width])){const vt=x.map[G],xt=L+vt+M.nodeAt(vt).nodeSize-1,Nt=document.createElement("div");Nt.className="column-resize-handle",m.push(P.p.widget(xt,Nt))}}return P.EH.create(_.doc,m)}(x,L.activeHandle)},nodeViews:{}}});return M}var b=class{constructor(_,C){this.activeHandle=_,this.dragging=C}apply(_){const C=this,m=_.getMeta(Ee);if(m&&null!=m.setHandle)return new b(m.setHandle,!1);if(m&&void 0!==m.setDragging)return new b(C.activeHandle,m.setDragging);if(C.activeHandle>-1&&_.docChanged){let f=_.mapping.map(C.activeHandle,-1);return At(_.doc.resolve(f))||(f=-1),new b(f,C.dragging)}return C}};function Ot(_,C,m){const f=_.posAtCoords({left:C.clientX,top:C.clientY});if(!f)return-1;const{pos:M}=f,x=ht(_.state.doc.resolve(M));if(!x)return-1;if("right"==m)return x.pos;const L=tt.get(x.node(-1)),Y=x.start(-1),W=L.map.indexOf(x.pos-Y);return W%L.width==0?-1:Y+L.map[W-1]}function wt(_,C,m){return Math.max(m,_.startWidth+(C.clientX-_.startX))}function H(_,C){_.dispatch(_.state.tr.setMeta(Ee,{setHandle:C}))}function E(_){return Array(_).fill(0)}function w(_){const C=_.selection,m=mt(_),f=m.node(-1),M=m.start(-1),x=tt.get(f),L=C instanceof at?x.rectBetween(C.$anchorCell.pos-M,C.$headCell.pos-M):x.findCell(m.pos-M);return me(Gt({},L),{tableStart:M,map:x,table:f})}function K(_,{map:C,tableStart:m,table:f},M){let x=M>0?-1:0;(function(_,C,m){const f=Pt(C.type.schema).header_cell;for(let M=0;M<_.height;M++)if(C.nodeAt(_.map[m+M*_.width]).type!=f)return!1;return!0})(C,f,M+x)&&(x=0==M||M==C.width?null:0);for(let L=0;L<C.height;L++){const Y=L*C.width+M;if(M>0&&M<C.width&&C.map[Y-1]==C.map[Y]){const W=C.map[Y],G=f.nodeAt(W);_.setNodeMarkup(_.mapping.map(m+W),null,B(G.attrs,M-C.colCount(W))),L+=G.attrs.rowspan-1}else{const W=null==x?Pt(f.type.schema).cell:f.nodeAt(C.map[Y+x]).type,G=C.positionAt(L,M,f);_.insert(_.mapping.map(m+G),W.createAndFill())}}return _}function qt(_,{map:C,table:m,tableStart:f},M){const x=_.mapping.maps.length;for(let L=0;L<C.height;){const Y=L*C.width+M,W=C.map[Y],G=m.nodeAt(W),vt=G.attrs;if(M>0&&C.map[Y-1]==W||M<C.width-1&&C.map[Y+1]==W)_.setNodeMarkup(_.mapping.slice(x).map(f+W),null,pt(vt,M-C.colCount(W)));else{const xt=_.mapping.slice(x).map(f+W);_.delete(xt,xt+G.nodeSize)}L+=vt.rowspan}}function Je(_,{map:C,tableStart:m,table:f},M){var x;let L=m;for(let G=0;G<M;G++)L+=f.child(G).nodeSize;const Y=[];let W=M>0?-1:0;(function(_,C,m){var f;const M=Pt(C.type.schema).header_cell;for(let x=0;x<_.width;x++)if((null==(f=C.nodeAt(_.map[x+m*_.width]))?void 0:f.type)!=M)return!1;return!0})(C,f,M+W)&&(W=0==M||M==C.height?null:0);for(let G=0,vt=C.width*M;G<C.width;G++,vt++)if(M>0&&M<C.height&&C.map[vt]==C.map[vt-C.width]){const xt=C.map[vt],Nt=f.nodeAt(xt).attrs;_.setNodeMarkup(m+xt,null,me(Gt({},Nt),{rowspan:Nt.rowspan+1})),G+=Nt.colspan-1}else{const xt=null==W?Pt(f.type.schema).cell:null==(x=f.nodeAt(C.map[vt+W*C.width]))?void 0:x.type,Nt=null==xt?void 0:xt.createAndFill();Nt&&Y.push(Nt)}return _.insert(L,Pt(f.type.schema).row.create(null,Y)),_}function ct(_,{map:C,table:m,tableStart:f},M){let x=0;for(let W=0;W<M;W++)x+=m.child(W).nodeSize;const L=x+m.child(M).nodeSize,Y=_.mapping.maps.length;_.delete(x+f,L+f);for(let W=0,G=M*C.width;W<C.width;W++,G++){const vt=C.map[G];if(M>0&&vt==C.map[G-C.width]){const xt=m.nodeAt(vt).attrs;_.setNodeMarkup(_.mapping.slice(Y).map(vt+f),null,me(Gt({},xt),{rowspan:xt.rowspan-1})),W+=xt.colspan-1}else if(M<C.width&&vt==C.map[G+C.width]){const xt=m.nodeAt(vt),Nt=xt.attrs,Ut=xt.type.create(me(Gt({},Nt),{rowspan:xt.attrs.rowspan-1}),xt.content),Vt=C.positionAt(M+1,W,m);_.insert(_.mapping.slice(Y).map(f+Vt),Ut),W+=Nt.colspan-1}}}function yt(_){const C=_.content;return 1==C.childCount&&C.child(0).isTextblock&&0==C.child(0).childCount}function Wt(_,C){const m=_.selection;if(!(m instanceof at)||m.$anchorCell.pos==m.$headCell.pos)return!1;const f=w(_),{map:M}=f;if(function({width:_,height:C,map:m},f){let M=f.top*_+f.left,x=M,L=(f.bottom-1)*_+f.left,Y=M+(f.right-f.left-1);for(let W=f.top;W<f.bottom;W++){if(f.left>0&&m[x]==m[x-1]||f.right<_&&m[Y]==m[Y+1])return!0;x+=_,Y+=_}for(let W=f.left;W<f.right;W++){if(f.top>0&&m[M]==m[M-_]||f.bottom<C&&m[L]==m[L+_])return!0;M++,L++}return!1}(M,f))return!1;if(C){const x=_.tr,L={};let W,G,Y=y.HY.empty;for(let vt=f.top;vt<f.bottom;vt++)for(let xt=f.left;xt<f.right;xt++){const Nt=M.map[vt*M.width+xt],Ut=f.table.nodeAt(Nt);if(!L[Nt]&&Ut)if(L[Nt]=!0,null==W)W=Nt,G=Ut;else{yt(Ut)||(Y=Y.append(Ut.content));const Vt=x.mapping.map(Nt+f.tableStart);x.delete(Vt,Vt+Ut.nodeSize)}}if(null==W||null==G)return!0;if(x.setNodeMarkup(W+f.tableStart,null,me(Gt({},B(G.attrs,G.attrs.colspan,f.right-f.left-G.attrs.colspan)),{rowspan:f.bottom-f.top})),Y.size){const vt=W+1+G.content.size,xt=yt(G)?W+1:vt;x.replaceWith(xt+f.tableStart,vt+f.tableStart,Y)}x.setSelection(new at(x.doc.resolve(W+f.tableStart))),C(x)}return!0}function Qt(_,C){const m=Pt(_.schema);return function(_){return(C,m)=>{var f;const M=C.selection;let x,L;if(M instanceof at){if(M.$anchorCell.pos!=M.$headCell.pos)return!1;x=M.$anchorCell.nodeAfter,L=M.$anchorCell.pos}else{if(x=function(_){for(let C=_.depth;C>0;C--){const m=_.node(C).type.spec.tableRole;if("cell"===m||"header_cell"===m)return _.node(C)}return null}(M.$from),!x)return!1;L=null==(f=ht(M.$from))?void 0:f.pos}if(null==x||null==L||1==x.attrs.colspan&&1==x.attrs.rowspan)return!1;if(m){let Y=x.attrs;const W=[],G=Y.colwidth;Y.rowspan>1&&(Y=me(Gt({},Y),{rowspan:1})),Y.colspan>1&&(Y=me(Gt({},Y),{colspan:1}));const vt=w(C),xt=C.tr;for(let Ut=0;Ut<vt.right-vt.left;Ut++)W.push(G?me(Gt({},Y),{colwidth:G&&G[Ut]?[G[Ut]]:null}):Y);let Nt;for(let Ut=vt.top;Ut<vt.bottom;Ut++){let Vt=vt.map.positionAt(Ut,vt.left,vt.table);Ut==vt.top&&(Vt+=x.nodeSize);for(let re=vt.left,ie=0;re<vt.right;re++,ie++)re==vt.left&&Ut==vt.top||xt.insert(Nt=xt.mapping.map(Vt+vt.tableStart,1),_({node:x,row:Ut,col:re}).createAndFill(W[ie]))}xt.setNodeMarkup(L,_({node:x,row:vt.top,col:vt.left}),W[0]),M instanceof at&&xt.setSelection(new at(xt.doc.resolve(M.$anchorCell.pos),Nt?xt.doc.resolve(Nt):void 0)),m(xt)}return!0}}(({node:f})=>m[f.type.spec.tableRole])(_,C)}function ae(_,C,m){const f=C.map.cellsInRect({left:0,top:0,right:"row"==_?C.map.width:1,bottom:"column"==_?C.map.height:1});for(let M=0;M<f.length;M++){const x=C.table.nodeAt(f[M]);if(x&&x.type!==m.header_cell)return!1}return!0}function ce(_,C){return(C=C||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(_){return function(C,m){if(!F(C))return!1;if(m){const f=Pt(C.schema),M=w(C),x=C.tr,L=M.map.cellsInRect("column"==_?{left:M.left,top:0,right:M.right,bottom:M.map.height}:"row"==_?{left:0,top:M.top,right:M.map.width,bottom:M.bottom}:M),Y=L.map(W=>M.table.nodeAt(W));for(let W=0;W<L.length;W++)Y[W].type==f.header_cell&&x.setNodeMarkup(M.tableStart+L[W],f.cell,Y[W].attrs);if(0==x.steps.length)for(let W=0;W<L.length;W++)x.setNodeMarkup(M.tableStart+L[W],f.header_cell,Y[W].attrs);m(x)}return!0}}(_):function(m,f){if(!F(m))return!1;if(f){const M=Pt(m.schema),x=w(m),L=m.tr,Y=ae("row",x,M),W=ae("column",x,M),vt=("column"===_?Y:"row"===_&&W)?1:0,Nt="column"==_?W?M.cell:M.header_cell:"row"==_?Y?M.cell:M.header_cell:M.cell;x.map.cellsInRect("column"==_?{left:0,top:vt,right:1,bottom:x.map.height}:"row"==_?{left:vt,top:0,right:x.map.width,bottom:1}:x).forEach(Ut=>{const Vt=Ut+x.tableStart,re=L.doc.nodeAt(Vt);re&&L.setNodeMarkup(Vt,Nt,re.attrs)}),f(L)}return!0}}ce("row",{useDeprecatedLogic:!0}),ce("column",{useDeprecatedLogic:!0});var an=ce("cell",{useDeprecatedLogic:!0});function Pn(_){return function(C,m){if(!F(C))return!1;const f=function(_,C){if(C<0){const m=_.nodeBefore;if(m)return _.pos-m.nodeSize;for(let f=_.index(-1)-1,M=_.before();f>=0;f--){const x=_.node(-1).child(f),L=x.lastChild;if(L)return M-1-L.nodeSize;M-=x.nodeSize}}else{if(_.index()<_.parent.childCount-1)return _.pos+_.nodeAfter.nodeSize;const m=_.node(-1);for(let f=_.indexAfter(-1),M=_.after();f<m.childCount;f++){const x=m.child(f);if(x.childCount)return M+1;M+=x.nodeSize}}return null}(mt(C),_);if(null==f)return!1;if(m){const M=C.doc.resolve(f);m(C.tr.setSelection(l.Bs.between(M,function(_){return _.node(0).resolve(_.pos+_.nodeAfter.nodeSize)}(M))).scrollIntoView())}return!0}}function Un({allowTableNodeSelection:_=!1}={}){return new l.Sy({key:Dt,state:{init:()=>null,apply(C,m){const f=C.getMeta(Dt);if(null!=f)return-1==f?null:f;if(null==m||!C.docChanged)return m;const{deleted:M,pos:x}=C.mapping.mapResult(m);return M?null:x}},props:{decorations:J,handleDOMEvents:{mousedown:He},createSelectionBetween:C=>null!=Dt.getState(C.state)?C.state.selection:null,handleTripleClick:Ie,handleKeyDown:Ae,handlePaste:Ze},appendTransaction:(C,m,f)=>function(_,C,m){const f=(C||_).selection,M=(C||_).doc;let x,L;if(f instanceof l.qv&&(L=f.node.type.spec.tableRole)){if("cell"==L||"header_cell"==L)x=at.create(M,f.from);else if("row"==L){const Y=M.resolve(f.from+1);x=at.rowSelection(Y,Y)}else if(!m){const Y=tt.get(f.node),W=f.from+1;x=at.create(M,W+1,W+Y.map[Y.width*Y.height-1])}}else f instanceof l.Bs&&function({$from:_,$to:C}){if(_.pos==C.pos||_.pos<_.pos-6)return!1;let m=_.pos,f=C.pos,M=_.depth;for(;M>=0&&!(_.after(M+1)<_.end(M));M--,m++);for(let x=C.depth;x>=0&&!(C.before(x+1)>C.start(x));x--,f--);return m==f&&/row|table/.test(_.node(M).type.spec.tableRole)}(f)?x=l.Bs.create(M,f.from):f instanceof l.Bs&&function({$from:_,$to:C}){let m,f;for(let M=_.depth;M>0;M--){const x=_.node(M);if("cell"===x.type.spec.tableRole||"header_cell"===x.type.spec.tableRole){m=x;break}}for(let M=C.depth;M>0;M--){const x=C.node(M);if("cell"===x.type.spec.tableRole||"header_cell"===x.type.spec.tableRole){f=x;break}}return m!==f&&0===C.parentOffset}(f)&&(x=l.Bs.create(M,f.$from.start(),f.$from.end()));return x&&(C||(C=_.tr)).setSelection(x),C}(f,ee(f,m),_)})}function pn(_,C,m,f,M,x){let L=0,Y=!0,W=C.firstChild;const G=_.firstChild;for(let vt=0,xt=0;vt<G.childCount;vt+=1){const{colspan:Nt,colwidth:Ut}=G.child(vt).attrs;for(let Vt=0;Vt<Nt;Vt+=1,xt+=1){const re=M===xt?x:Ut&&Ut[Vt],ie=re?`${re}px`:"";L+=re||f,re||(Y=!1),W?(W.style.width!==ie&&(W.style.width=ie),W=W.nextSibling):C.appendChild(document.createElement("col")).style.width=ie}}for(;W;){const vt=W.nextSibling;W.parentNode.removeChild(W),W=vt}Y?(m.style.width=`${L}px`,m.style.minWidth=""):(m.style.width="",m.style.minWidth=`${L}px`)}class Sn{constructor(C,m){this.node=C,this.cellMinWidth=m,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),pn(C,this.colgroup,this.table,m),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(C){return C.type===this.node.type&&(this.node=C,pn(C,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(C){return"attributes"===C.type&&(C.target===this.table||this.colgroup.contains(C.target))}}function _n(_,C){return C?_.createChecked(null,C):_.createAndFill()}const hn=({editor:_})=>{const{selection:C}=_.state;if(!function(_){return _ instanceof at}(C))return!1;let m=0;const f=(0,v.findParentNodeClosestToPos)(C.ranges[0].$from,x=>"table"===x.type.name);return null==f||f.node.descendants(x=>{if("table"===x.type.name)return!1;["tableCell","tableHeader"].includes(x.type.name)&&(m+=1)}),m===C.ranges.length&&(_.commands.deleteTable(),!0)},sn=v.Node.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Sn,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML({HTMLAttributes:_}){return["table",(0,v.mergeAttributes)(this.options.HTMLAttributes,_),["tbody",0]]},addCommands:()=>({insertTable:({rows:_=3,cols:C=3,withHeaderRow:m=!0}={})=>({tr:f,dispatch:M,editor:x})=>{const L=function(_,C,m,f,M){const x=function(_){if(_.cached.tableNodeTypes)return _.cached.tableNodeTypes;const C={};return Object.keys(_.nodes).forEach(m=>{const f=_.nodes[m];f.spec.tableRole&&(C[f.spec.tableRole]=f)}),_.cached.tableNodeTypes=C,C}(_),L=[],Y=[];for(let G=0;G<m;G+=1){const vt=_n(x.cell,M);if(vt&&Y.push(vt),f){const xt=_n(x.header_cell,M);xt&&L.push(xt)}}const W=[];for(let G=0;G<C;G+=1)W.push(x.row.createChecked(null,f&&0===G?L:Y));return x.table.createChecked(null,W)}(x.schema,_,C,m);if(M){const Y=f.selection.anchor+1;f.replaceSelectionWith(L).scrollIntoView().setSelection(l.Bs.near(f.doc.resolve(Y)))}return!0},addColumnBefore:()=>({state:_,dispatch:C})=>function(_,C){if(!F(_))return!1;if(C){const m=w(_);C(K(_.tr,m,m.left))}return!0}(_,C),addColumnAfter:()=>({state:_,dispatch:C})=>function(_,C){if(!F(_))return!1;if(C){const m=w(_);C(K(_.tr,m,m.right))}return!0}(_,C),deleteColumn:()=>({state:_,dispatch:C})=>function(_,C){if(!F(_))return!1;if(C){const m=w(_),f=_.tr;if(0==m.left&&m.right==m.map.width)return!1;for(let M=m.right-1;qt(f,m,M),M!=m.left;M--){const x=m.tableStart?f.doc.nodeAt(m.tableStart-1):f.doc;if(!x)throw RangeError("No table found");m.table=x,m.map=tt.get(x)}C(f)}return!0}(_,C),addRowBefore:()=>({state:_,dispatch:C})=>function(_,C){if(!F(_))return!1;if(C){const m=w(_);C(Je(_.tr,m,m.top))}return!0}(_,C),addRowAfter:()=>({state:_,dispatch:C})=>function(_,C){if(!F(_))return!1;if(C){const m=w(_);C(Je(_.tr,m,m.bottom))}return!0}(_,C),deleteRow:()=>({state:_,dispatch:C})=>function(_,C){if(!F(_))return!1;if(C){const m=w(_),f=_.tr;if(0==m.top&&m.bottom==m.map.height)return!1;for(let M=m.bottom-1;ct(f,m,M),M!=m.top;M--){const x=m.tableStart?f.doc.nodeAt(m.tableStart-1):f.doc;if(!x)throw RangeError("No table found");m.table=x,m.map=tt.get(m.table)}C(f)}return!0}(_,C),deleteTable:()=>({state:_,dispatch:C})=>function(_,C){const m=_.selection.$anchor;for(let f=m.depth;f>0;f--)if("table"==m.node(f).type.spec.tableRole)return C&&C(_.tr.delete(m.before(f),m.after(f)).scrollIntoView()),!0;return!1}(_,C),mergeCells:()=>({state:_,dispatch:C})=>Wt(_,C),splitCell:()=>({state:_,dispatch:C})=>Qt(_,C),toggleHeaderColumn:()=>({state:_,dispatch:C})=>ce("column")(_,C),toggleHeaderRow:()=>({state:_,dispatch:C})=>ce("row")(_,C),toggleHeaderCell:()=>({state:_,dispatch:C})=>an(_,C),mergeOrSplit:()=>({state:_,dispatch:C})=>!!Wt(_,C)||Qt(_,C),setCellAttribute:(_,C)=>({state:m,dispatch:f})=>function(_,C){return function(m,f){if(!F(m))return!1;const M=mt(m);if(M.nodeAfter.attrs[_]===C)return!1;if(f){const x=m.tr;m.selection instanceof at?m.selection.forEachCell((L,Y)=>{L.attrs[_]!==C&&x.setNodeMarkup(Y,null,me(Gt({},L.attrs),{[_]:C}))}):x.setNodeMarkup(M.pos,null,me(Gt({},M.nodeAfter.attrs),{[_]:C})),f(x)}return!0}}(_,C)(m,f),goToNextCell:()=>({state:_,dispatch:C})=>Pn(1)(_,C),goToPreviousCell:()=>({state:_,dispatch:C})=>Pn(-1)(_,C),fixTables:()=>({state:_,dispatch:C})=>(C&&ee(_),!0),setCellSelection:_=>({tr:C,dispatch:m})=>{if(m){const f=at.create(C.doc,_.anchorCell,_.headCell);C.setSelection(f)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:hn,"Mod-Backspace":hn,Delete:hn,"Mod-Delete":hn}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[gt({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],Un({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema:_=>({tableRole:(0,v.callOrReturn)((0,v.getExtensionField)(_,"tableRole",{name:_.name,options:_.options,storage:_.storage}))})}).extend({renderHTML({node:_,HTMLAttributes:C}){var m,f;let M=0,x=!0;try{const L=(null===(m=_.content)||void 0===m?void 0:m.content)[0];null===(f=null==L?void 0:L.content)||void 0===f||f.content.forEach(Y=>{Y.attrs.colwidth?Y.attrs.colwidth.forEach(W=>{W?M+=W:(x=!1,M+=this.options.cellMinWidth)}):(x=!1,M+=this.options.cellMinWidth*(Y.attrs.colspan||1))})}catch(L){x=!1}return C.style=x&&M>0?`width: ${M}px;`:M&&M>0?`min-width: ${M}px`:null,["div",{class:"tui-table-wrapper"},["table",(0,v.mergeAttributes)(this.options.HTMLAttributes,C),["tbody",0]]]}})},88806:(jt,Mt,c)=>{c.d(Mt,{v:()=>l});var v=c(74788);class l{constructor(P,g,it){const N=g.get(v.z2F),tt=g.get(v._Vd).resolveComponentFactory(P);this.componentRef=tt.create(g,[]),this.updateProps(it),N.attachView(this.componentRef.hostView)}get instance(){return this.componentRef.instance}get elementRef(){return this.componentRef.injector.get(v.SBq)}get dom(){return this.elementRef.nativeElement}updateProps(P){Object.entries(P).forEach(([g,it])=>{this.instance[g]=it})}detectChanges(){this.componentRef.changeDetectorRef.detectChanges()}destroy(){this.componentRef.destroy()}}},40400:(jt,Mt,c)=>{c.d(Mt,{d:()=>P,x:()=>it});var v=c(12057),l=c(12867),y=c(88806);class P{}class g extends l.NodeView{constructor(){super(...arguments),this.contentDOMElement=null}mount(){const X=this.options.injector,tt=X.get(v.K0);this.renderer=new y.v(this.component,X,{editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(ut={})=>this.updateAttributes(ut),deleteNode:()=>this.deleteNode()}),this.extension.config.draggable&&(this.renderer.elementRef.nativeElement.ondragstart=ut=>{this.onDragStart(ut)}),this.contentDOMElement=this.node.isLeaf?null:tt.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit",this.renderer.detectChanges())}get dom(){return this.renderer.dom}get contentDOM(){return this.node.isLeaf?null:(this.maybeMoveContentDOM(),this.contentDOMElement)}update(X,tt){return this.options.update?this.options.update(X,tt):X.type===this.node.type&&(X===this.node&&this.decorations===tt||(this.node=X,this.decorations=tt,this.renderer.updateProps({node:X,decorations:tt}),this.maybeMoveContentDOM()),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy()}maybeMoveContentDOM(){const X=this.dom.querySelector("[data-node-view-content]");this.contentDOMElement&&X&&!X.contains(this.contentDOMElement)&&X.appendChild(this.contentDOMElement)}}const it=(N,X)=>tt=>new g(N,tt,X)},48014:(jt,Mt,c)=>{c.r(Mt),c.d(Mt,{AbstractTuiEditor:()=>v._,AbstractTuiEditorResizable:()=>Dt._3,BackgroundColor:()=>At.BackgroundColor,EDITOR_BLANK_COLOR:()=>mt.hK,FontColor:()=>Lt.FontColor,INITIALIZATION_TIPTAP_CONTAINER:()=>Yt.Y1,LAZY_EDITOR_EXTENSIONS:()=>Yt.F4,LAZY_TIPTAP_EDITOR:()=>Yt.bG,StarterKit:()=>J.StarterKit,TIPTAP_EDITOR:()=>Yt.ZW,TUI_ATTACH_FILES_LOADER:()=>Yt.zc,TUI_ATTACH_FILES_OPTIONS:()=>Yt.dR,TUI_EDITOR_CODE_OPTIONS:()=>Yt.Mr,TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES:()=>Yt.dj,TUI_EDITOR_CONTENT_PROCESSOR:()=>Yt.F1,TUI_EDITOR_DEFAULT_OPTIONS:()=>Yt.HG,TUI_EDITOR_EXTENSIONS:()=>Yt.Wf,TUI_EDITOR_FONT_OPTIONS:()=>Yt.UN,TUI_EDITOR_GROUP_DEFAULT_OPTIONS:()=>Kt.TUI_EDITOR_GROUP_DEFAULT_OPTIONS,TUI_EDITOR_LINK_TEXTS:()=>Yt.b$,TUI_EDITOR_MAX_IMAGE_WIDTH:()=>B.TUI_EDITOR_MAX_IMAGE_WIDTH,TUI_EDITOR_MIN_IMAGE_WIDTH:()=>B.TUI_EDITOR_MIN_IMAGE_WIDTH,TUI_EDITOR_OPTIONS:()=>Yt.mJ,TUI_EDITOR_PROVIDERS:()=>Tt.m,TUI_EDITOR_TABLE_COMMANDS:()=>Yt.$i,TUI_EDITOR_TOOLBAR_TEXTS:()=>Yt.rf,TUI_IFRAME_EDITOR_OPTIONS:()=>pt.TUI_IFRAME_EDITOR_OPTIONS,TUI_IMAGE_EDITOR_OPTIONS:()=>B.TUI_IMAGE_EDITOR_OPTIONS,TUI_IMAGE_LOADER:()=>Yt.p7,TableCellBackground:()=>ot.TableCellBackground,TuiAlignContentComponent:()=>F.Xp,TuiAlignContentModule:()=>F.pu,TuiAudio:()=>st.TuiAudio,TuiCodeComponent:()=>F.Tf,TuiCodeModule:()=>F.P_,TuiColorEditComponent:()=>l.hR,TuiColorEditModule:()=>l.TD,TuiColorPickerComponent:()=>l.$v,TuiColorPickerModule:()=>l.H9,TuiColorSelectorComponent:()=>l.sV,TuiColorSelectorModule:()=>l.wl,TuiComponentRenderer:()=>kt.v,TuiDetailsComponent:()=>F.yj,TuiDetailsModule:()=>F.y9,TuiDetailsRemoveComponent:()=>F.Un,TuiEditLinkComponent:()=>y.lV,TuiEditLinkModule:()=>y.Fu,TuiEditorComponent:()=>P.a,TuiEditorGroupToolComponent:()=>F.dN,TuiEditorImagePreviewDirective:()=>ft.Zj,TuiEditorImagePreviewModule:()=>ft.BN,TuiEditorModule:()=>_t,TuiEditorPortalDirective:()=>bt.A,TuiEditorPortalHostComponent:()=>Pt.d,TuiEditorPortalService:()=>It.Y,TuiEditorResizableComponent:()=>Dt.V_,TuiEditorResizableModule:()=>Dt.Sl,TuiEditorSocketComponent:()=>it.D,TuiEditorSocketModule:()=>X,TuiEditorTool:()=>j._,TuiEditorToolGroup:()=>F.jP,TuiFileLink:()=>Et.TuiFileLink,TuiFilterAnchorsPipe:()=>y.bL,TuiFlatPickerComponent:()=>l.Jd,TuiFlatPickerModule:()=>l.ui,TuiFontSize:()=>Ht.TuiFontSize,TuiFontSizeComponent:()=>F.mK,TuiFontSizeModule:()=>F.p7,TuiFontStyleComponent:()=>F.hr,TuiFontStyleModule:()=>F.Zv,TuiHighlightColorComponent:()=>F.UT,TuiHighlightColorModule:()=>F.XC,TuiIframeEditorComponent:()=>pt.TuiIframeEditorComponent,TuiIframeEditorModule:()=>pt.TuiIframeEditorModule,TuiImageEditorComponent:()=>B.TuiImageEditorComponent,TuiImageEditorModule:()=>B.TuiImageEditorModule,TuiInputColorComponent:()=>ht.j,TuiInputColorModule:()=>q,TuiLinearMultiPickerComponent:()=>l.es,TuiLinearMultiPickerModule:()=>l.GU,TuiLinearPickerComponent:()=>l.P,TuiLinearPickerModule:()=>l.g7,TuiLink:()=>at.TuiLink,TuiListConfigsComponent:()=>F.w2,TuiListConfigsModule:()=>F.Ur,TuiNodeViewNgComponent:()=>$t.d,TuiNodeViewRenderer:()=>$t.x,TuiPaletteComponent:()=>l.Rh,TuiPaletteModule:()=>l.VM,TuiShortUrlPipe:()=>y.X,TuiSource:()=>st.TuiSource,TuiTabExtension:()=>rt.TuiTabExtension,TuiTable:()=>Q.TuiTable,TuiTableCellColorComponent:()=>F.pH,TuiTableCellColorModule:()=>F.mp,TuiTableCommands:()=>F.iN,TuiTableCreateComponent:()=>F.lT,TuiTableCreateModule:()=>F.iA,TuiTableMergeCellsComponent:()=>F.YH,TuiTableMergeCellsModule:()=>F.er,TuiTableRowColumnManagerComponent:()=>F._I,TuiTableRowColumnManagerModule:()=>F.__,TuiTableSizeSelectorComponent:()=>F.M8,TuiTableSizeSelectorModule:()=>F.kU,TuiTextColorComponent:()=>F.G0,TuiTextColorModule:()=>F._t,TuiTiptapEditorDirective:()=>ft.JU,TuiTiptapEditorModule:()=>ft.mJ,TuiTiptapEditorService:()=>ft.$3,TuiToolbarComponent:()=>tt.M6,TuiToolbarModule:()=>tt.yB,TuiToolbarNavigationManagerDirective:()=>tt.Bp,TuiVideo:()=>st.TuiVideo,createGroupExtension:()=>Kt.createGroupExtension,createIframeEditorExtension:()=>pt.createIframeEditorExtension,createImageEditorExtension:()=>B.createImageEditorExtension,defaultEditorColors:()=>mt.sw,defaultEditorExtensions:()=>St,defaultEditorTools:()=>mt.Db,tuiCreateImageEditorExtension:()=>B.tuiCreateImageEditorExtension,tuiDefaultFontOptionsHandler:()=>mt.RR,tuiDeleteNode:()=>ee.yU,tuiEditorOptionsProvider:()=>Yt.Uv,tuiGetElementPoint:()=>ee.Ws,tuiGetGradientData:()=>ee.U5,tuiGetMarkRange:()=>ee.Yz,tuiGetNestedNodes:()=>ee.YX,tuiGetSelectedContent:()=>ee.Ap,tuiInsertHtml:()=>ee.Xd,tuiInsertText:()=>ee.Oi,tuiIsOrderedOrBulletList:()=>rt.tuiIsOrderedOrBulletList,tuiIsSafeLinkRange:()=>ee.nC,tuiIsSelectionIn:()=>ee.i0,tuiLegacyEditorConverter:()=>ee.Er,tuiParseGradient:()=>ee._N,tuiParseNodeAttributes:()=>ee.x6,tuiParseStyle:()=>ee.jx,tuiToGradient:()=>ee.CH});var v=c(77361),l=c(27050),y=c(71115),P=c(69303),g=c(12057),it=c(20179),N=c(74788);let X=(()=>{class zt{}return zt.\u0275fac=function(ye){return new(ye||zt)},zt.\u0275mod=N.oAB({type:zt}),zt.\u0275inj=N.cJS({}),zt})();var tt=c(17406),ft=c(84614),ut=c(50259),et=c(3497);let _t=(()=>{class zt{}return zt.\u0275fac=function(ye){return new(ye||zt)},zt.\u0275mod=N.oAB({type:zt}),zt.\u0275inj=N.cJS({imports:[[g.ez,tt.yB,et.TuiWrapperModule,et.TuiScrollbarModule,y.Fu,ut.TuiActiveZoneModule,et.TuiDropdownModule,ft.mJ,X,ut.TuiLetModule]]}),zt})();var Tt=c(79089),bt=c(1433),It=c(73825),Pt=c(9872),Dt=c(95110),ht=c(19769);let q=(()=>{class zt{}return zt.\u0275fac=function(ye){return new(ye||zt)},zt.\u0275mod=N.oAB({type:zt}),zt.\u0275inj=N.cJS({imports:[[g.ez,et.TuiPrimitiveTextfieldModule,et.TuiTextfieldControllerModule,et.TuiHostedDropdownModule,l.wl,ut.TuiActiveZoneModule]]}),zt})();var F=c(93252),mt=c(19074),j=c(48699),At=c(15736);const St=[Promise.resolve().then(c.bind(c,2823)).then(({StarterKit:zt})=>zt).then(zt=>zt.configure({heading:{levels:[1,2]}})),c.e(73336).then(c.bind(c,73336)).then(({default:zt})=>zt.configure({types:["heading","paragraph"]})),Promise.resolve().then(c.bind(c,84402)).then(({default:zt})=>zt),c.e(17991).then(c.bind(c,17991)).then(({default:zt})=>zt),c.e(77147).then(c.bind(c,77147)).then(({default:zt})=>zt),c.e(25034).then(c.bind(c,25034)).then(({default:zt})=>zt),Promise.resolve().then(c.bind(c,52658)).then(({FontColor:zt})=>zt),Promise.resolve().then(c.bind(c,44632)).then(({default:zt})=>zt.configure({inline:!0,allowBase64:!0})),Promise.resolve().then(c.bind(c,82091)).then(({TuiLink:zt})=>zt),c.e(54058).then(c.bind(c,54058)).then(({TuiJumpAnchor:zt})=>zt),Promise.resolve().then(c.bind(c,93763)).then(({TuiFileLink:zt})=>zt),Promise.resolve().then(c.bind(c,15736)).then(({BackgroundColor:zt})=>zt),Promise.resolve().then(c.bind(c,86624)).then(({TuiTable:zt})=>zt.configure({resizable:!0})),c.e(45213).then(c.bind(c,45213)).then(({default:zt})=>zt),c.e(71397).then(c.bind(c,71397)).then(({default:zt})=>zt),c.e(38840).then(c.bind(c,38840)).then(({TableHeader:zt})=>zt),Promise.resolve().then(c.bind(c,12177)).then(({TuiTabExtension:zt})=>zt),Promise.resolve().then(c.bind(c,51919)).then(({TableCellBackground:zt})=>zt),c.e(44312).then(c.bind(c,44312)).then(({TuiDetailsContent:zt})=>zt),c.e(44312).then(c.bind(c,44312)).then(({TuiDetails:zt})=>zt),c.e(44312).then(c.bind(c,44312)).then(({TuiSummary:zt})=>zt),Promise.resolve().then(c.bind(c,9492)).then(({TuiFontSize:zt})=>zt)];var Et=c(93763),Lt=c(52658),Ht=c(9492),Kt=c(54920),pt=c(20854),B=c(53380),rt=c(12177),at=c(82091),st=c(41512),J=c(2823),Q=c(86624),ot=c(51919),kt=c(88806),$t=c(40400),Yt=c(14309),ee=c(27863)},62141:(jt,Mt,c)=>{c.d(Mt,{i:()=>ft});var v=c(12057),l=c(74788),y=c(27863),P=c(50259),g=c(18891),it=c(43190),N=c(88002),X=c(46782),tt=c(39761);let ft=(()=>{class ut extends g.y{constructor(_t,{nativeElement:Tt},bt){const It=(0,P.tuiTypedFromEvent)(Tt,"mousedown").pipe((0,P.tuiPreventDefault)(),(0,it.w)(Pt=>{const Dt=(0,P.tuiTypedFromEvent)(bt,"mousemove").pipe((0,N.U)(({clientX:ht,clientY:q})=>(0,y.Ws)(ht,q,Tt)),(0,X.R)((0,P.tuiTypedFromEvent)(bt,"mouseup")));return Pt.target===Tt?Dt.pipe((0,tt.O)((0,y.Ws)(Pt.clientX,Pt.clientY,Tt))):Dt}),(0,X.R)(_t));super(Pt=>It.subscribe(Pt))}}return ut.\u0275fac=function(_t){return new(_t||ut)(l.LFG(P.TuiDestroyService,2),l.LFG(l.SBq),l.LFG(v.K0))},ut.\u0275prov=l.Yz7({token:ut,factory:ut.\u0275fac}),ut})()},14309:(jt,Mt,c)=>{c.d(Mt,{Y1:()=>St,F4:()=>y,bG:()=>At,ZW:()=>j,zc:()=>ut,dR:()=>ft,Mr:()=>Pt,dj:()=>_t,F1:()=>tt,HG:()=>g,Wf:()=>l,UN:()=>Dt,b$:()=>It,mJ:()=>it,$i:()=>bt,rf:()=>Tt,p7:()=>F,Uv:()=>N});var v=c(74788);const l=new v.OlP("[TUI_EDITOR_EXTENSIONS]"),y=new v.OlP("[LAZY_EDITOR_EXTENSIONS]");var P=c(19074);const g={colors:P.sw,blankColor:P.hK,fontOptions:P.RR},it=new v.OlP("[TUI_EDITOR_OPTIONS]",{factory:()=>g});function N(Et){return{provide:it,useValue:Object.assign(Object.assign({},g),Et)}}var X=c(54487);const tt=new v.OlP("[TUI_EDITOR_CONTENT_PROCESSOR]",{factory:()=>X.y}),ft=new v.OlP("[TUI_ATTACH_FILES_OPTIONS]",{factory:()=>({accept:"*/*",multiple:!0})}),ut=new v.OlP("[TUI_ATTACH_FILES_LOADER]");var et=c(72773);const _t=new v.OlP("[TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES]",{factory:()=>["Solid color","Gradient"]}),Tt=new v.OlP("[TUI_EDITOR_TOOLBAR_TEXTS]",{factory:(0,et.vv)("toolbarTools")}),bt=new v.OlP("[TUI_EDITOR_TABLE_COMMANDS]",{factory:(0,et.vv)("editorTableCommands")}),It=new v.OlP("[TUI_EDITOR_LINK_TEXTS]",{factory:(0,et.vv)("editorEditLink")}),Pt=new v.OlP("[TUI_EDITOR_CODE_OPTIONS]",{factory:(0,et.vv)("editorCodeOptions")}),Dt=new v.OlP("[TUI_EDITOR_FONT_OPTIONS]",{factory:(0,et.vv)("editorFontOptions")});var ht=c(50259),q=c(88002);const F=new v.OlP("[TUI_IMAGE_LOADER]",{factory:()=>Et=>{const Lt=new FileReader;return Lt.readAsDataURL(Et),(0,ht.tuiTypedFromEvent)(Lt,"load").pipe((0,q.U)(()=>String(Lt.result)))}});var mt=c(82298);const j=new v.OlP("[TIPTAP_EDITOR]"),At=new v.OlP("[LAZY_TIPTAP_EDITOR]",{factory:()=>{const Et=new mt.t(1);return Promise.resolve().then(c.bind(c,12867)).then(Lt=>Et.next(Lt.Editor)),Et}}),St=new v.OlP("[INITIALIZATION_TIPTAP_CONTAINER]")},27863:(jt,Mt,c)=>{function v(st,J,Q){const ot=st.selection.$anchor;for(let kt=ot.depth;kt>0;kt--)if(ot.node(kt).type.name===Q)return J&&J(st.tr.delete(ot.before(kt),ot.after(kt)).scrollIntoView()),!0;return!1}c.d(Mt,{yU:()=>v,Ws:()=>y,U5:()=>P,Yz:()=>N,YX:()=>tt,Ap:()=>ut,Xd:()=>et,Oi:()=>_t,nC:()=>rt,i0:()=>Tt,Er:()=>bt,_N:()=>Ht,x6:()=>pt,jx:()=>B,CH:()=>at});var l=c(50259);function y(st,J,Q){const{left:ot,top:kt,width:$t,height:Yt}=Q.getBoundingClientRect();return[(0,l.tuiClamp)(st-ot,0,$t)/$t,(0,l.tuiClamp)(J-kt,0,Yt)/Yt]}function P(st){return st.slice(0,Math.max(0,st.length-1)).replace("linear-gradient(","")}function it(st,J,Q={}){return st.find(({attrs:ot,type:kt})=>kt===J&&function(st,J){const Q=Object.keys(J);return!Q.length||!!Q.filter(ot=>J[ot]===st[ot]).length}(ot,Q))||null}function N(st,J,Q={}){if(!st||!J)return null;const{node:ot,offset:kt}=st.parent.childAfter(st.parentOffset);if(!ot)return null;const $t=it(ot.marks,J,Q);if(!$t)return null;let Yt=st.index(),ee=st.start()+kt,zt=Yt+1,ue=ee+ot.nodeSize;for(it(ot.marks,J,Q);Yt>0&&$t.isInSet(st.parent.child(Yt-1).marks);)Yt-=1,ee-=st.parent.child(Yt).nodeSize;for(;zt<st.parent.childCount&&it(st.parent.child(zt).marks,J,Q);)ue+=st.parent.child(zt).nodeSize,zt+=1;return{from:ee,to:ue}}var X=c(77346);function tt(st){const J=[];return st.content.forEach(Q=>{Q instanceof X.NB&&J.push([Q.type.name,Q.attrs])}),J}var ft=c(12867);function ut(st,J){const Q=null!=J?J:st.selection.$head.parent.textContent,ot=st.doc.cut(st.selection.from,st.selection.to);return ot.content.size?(0,ft.getHTMLFromFragment)(ot.content,st.schema):Q}function et(st,J){if(st.queryCommandSupported("insertHTML"))return void st.execCommand("insertHTML",!1,J);const Q=st.getSelection();if(!Q)throw new l.TuiDocumentSelectionException;st.execCommand("ms-beginUndoUnit");const ot=Q.getRangeAt(0),kt=ot.createContextualFragment(J);ot.deleteContents(),ot.insertNode(kt),st.execCommand("ms-endUndoUnit")}function _t(st,J){if(st.queryCommandSupported("insertText"))return void st.execCommand("insertText",!1,J);const Q=st.getSelection();if(!Q)throw new l.TuiDocumentSelectionException;st.execCommand("ms-beginUndoUnit");const ot=Q.getRangeAt(0);ot.deleteContents(),ot.insertNode(st.createTextNode(J)),st.execCommand("ms-endUndoUnit")}function Tt({anchorNode:st,focusNode:J},Q){return!!st&&!!J&&(0,l.tuiIsNodeIn)(st,Q)&&(0,l.tuiIsNodeIn)(J,Q)}function bt(st){const J=(new DOMParser).parseFromString(st,"text/html");return It(J.body),J.body.innerHTML}function It(st){for(const J of Array.from(st.children))if(J.children.length&&It(J),"FONT"===J.tagName)if(J.hasAttribute("size"))switch(J.getAttribute("size")){case"6":Pt("h1",J);break;case"5":Pt("h2",J);break;case"4":Dt("17px",J);break;case"3":Dt("15px",J);break;case"2":Dt("13px",J)}else J.hasAttribute("color")&&ht(J)}function Pt(st,J){var Q,ot,kt,$t,Yt,ee,zt,ue,ye;const Oe=document.createElement(st);if(Oe.innerHTML=J.innerHTML,"P"===(null===(Q=J.parentElement)||void 0===Q?void 0:Q.tagName)){const he=null===(kt=null===(ot=J.parentElement)||void 0===ot?void 0:ot.parentElement)||void 0===kt?void 0:kt.insertBefore(Oe,J.parentElement);null===($t=J.parentElement)||void 0===$t||$t.removeChild(J),(null==he?void 0:he.nextSibling)&&!(null===(ee=null===(Yt=null==he?void 0:he.nextSibling)||void 0===Yt?void 0:Yt.textContent)||void 0===ee?void 0:ee.trim())&&(null===(ue=null===(zt=he.nextSibling)||void 0===zt?void 0:zt.parentElement)||void 0===ue||ue.removeChild(he.nextSibling))}else null===(ye=J.parentElement)||void 0===ye||ye.replaceChild(Oe,J)}function Dt(st,J){var Q;const ot=document.createElement("p"),kt=document.createElement("span");kt.setAttribute("style",`font-size: ${st}`),kt.innerHTML=J.innerHTML,ot.append(kt),null===(Q=J.parentElement)||void 0===Q||Q.replaceChild("P"===J.parentElement.tagName?kt:ot,J)}function ht(st){var J;const Q=document.createElement("span");Q.setAttribute("style",`color: ${st.getAttribute("color")}`),Q.innerHTML=st.innerHTML,null===(J=st.parentElement)||void 0===J||J.replaceChild(Q,st)}const Lt=["\\s*(","(?:","#(?:[a-f0-9]{6}|[a-f0-9]{3})","|","(?:rgb|hsl)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*\\)","|","(?:rgba|hsla)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*,\\s*\\d*\\.?\\d+\\)","|","[_a-z-][_a-z0-9-]*",")",")","(?:\\s+","(","(?:[+-]?\\d*\\.?\\d+)(?:%|[a-z]+)?","))?","(?:","\\s*,\\s*","\\s*)?"];function Ht(st){const J=new RegExp(Lt.join(""),"gi"),Q=st.startsWith("to")||st.match(/^\d/)?st.slice(Math.max(0,st.indexOf(",")+1)).trim():st,ot=st.startsWith("to")?st.split(",")[0]:"to bottom";let kt=[],$t=J.exec(Q);for(;null!==$t;)kt=kt.concat({color:$t[1],position:Kt($t[2],kt.length)}),$t=J.exec(Q);return kt=kt.filter(({color:Yt})=>Yt.startsWith("#")||Yt.startsWith("rgb")),{stops:kt,side:ot}}function Kt(st,J){const Q=1===J?"100%":`${J}%`;return(null==st?void 0:st.includes("%"))?st:Q}function pt(st){return st.reduce((J,Q)=>(J[Q]={parseHTML:ot=>null==ot?void 0:ot.getAttribute(`${Q}`)},J),{})}function B(st){return st.split(";").reduce((J,Q)=>{var ot;const[kt,$t]=null!==(ot=Q.split(":"))&&void 0!==ot?ot:[];return kt&&$t&&(J[kt.trim()]=$t.trim()),J},{})}function rt(st){var J;return st.endOffset-st.startOffset>0||0!==st.startOffset&&st.endOffset!==((null===(J=st.endContainer.nodeValue)||void 0===J?void 0:J.length)||0)}function at({stops:st,side:J}){return`linear-gradient(${J}, ${st.map(({color:Q,position:ot})=>`rgba(${(0,l.tuiParseColor)(Q).join(", ")}) ${ot}`).join(", ")})`}},12867:(jt,Mt,c)=>{c.r(Mt),c.d(Mt,{CommandManager:()=>b,Editor:()=>Fo,Extension:()=>ce,InputRule:()=>ke,Mark:()=>Nn,Node:()=>jn,NodeView:()=>mo,PasteRule:()=>Ct,Tracker:()=>d,callOrReturn:()=>a,combineTransactionSteps:()=>To,createChainableState:()=>gt,createDocument:()=>tn,createNodeFromContent:()=>Ut,createStyleTag:()=>po,defaultBlockAt:()=>eo,deleteProps:()=>Ge,elementFromString:()=>Nt,escapeForRegEx:()=>go,extensions:()=>uo,findChildren:()=>Co,findChildrenInRange:()=>vo,findDuplicates:()=>Qt,findParentNode:()=>wn,findParentNodeClosestToPos:()=>no,fromString:()=>E,generateHTML:()=>oo,generateJSON:()=>Mo,generateText:()=>io,getAttributes:()=>ro,getAttributesFromExtensions:()=>V,getChangedRanges:()=>yo,getDebugJSON:()=>Rn,getExtensionField:()=>I,getHTMLFromFragment:()=>Fn,getMarkAttributes:()=>Gn,getMarkRange:()=>C,getMarkType:()=>m,getMarksBetween:()=>Xn,getNodeAttributes:()=>zn,getNodeType:()=>U,getRenderedAttributes:()=>wt,getSchema:()=>Kn,getSchemaByResolvedExtensions:()=>K,getSchemaTypeByName:()=>lt,getSchemaTypeNameByName:()=>ln,getSplittedAttributes:()=>Ln,getText:()=>Jn,getTextBetween:()=>we,getTextContentFromNodes:()=>qt,getTextSerializersFromSchema:()=>We,injectExtensionAttributesToParseRule:()=>D,inputRulesPlugin:()=>S,isActive:()=>$n,isEmptyObject:()=>p,isExtensionRulesEnabled:()=>Rt,isFunction:()=>H,isList:()=>un,isMacOS:()=>De,isMarkActive:()=>Mn,isNodeActive:()=>pe,isNodeEmpty:()=>Zn,isNodeSelection:()=>on,isNumber:()=>ct,isPlainObject:()=>se,isRegExp:()=>te,isString:()=>r,isTextSelection:()=>x,isiOS:()=>W,markInputRule:()=>Ko,markPasteRule:()=>Lo,mergeAttributes:()=>Ot,mergeDeep:()=>ae,minMax:()=>L,nodeInputRule:()=>Jo,nodePasteRule:()=>o,objectIncludes:()=>rn,pasteRulesPlugin:()=>Wt,posToDOMRect:()=>Bn,removeDuplicates:()=>An,resolveFocusPosition:()=>Y,selectionToInsertionEnd:()=>Vt,splitExtensions:()=>R,textInputRule:()=>ho,textPasteRule:()=>s,textblockTypeInputRule:()=>Ro,wrappingInputRule:()=>fo});var v=c(62463),l=c(43594),y=c(70768),P=c(77346),g=c(38480);const it=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);const X=(e,t,n)=>{let i=function(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}(e,n);if(!i)return!1;let u=Tt(i);if(!u){let T=i.blockRange(),A=T&&(0,g.k9)(T);return null!=A&&(t&&t(e.tr.lift(T,A).scrollIntoView()),!0)}let h=u.nodeBefore;if(!h.type.spec.isolating&&at(e,u,t))return!0;if(0==i.parent.content.size&&(et(h,"end")||v.qv.isSelectable(h))){let T=(0,g.dR)(e.doc,i.before(),i.after(),P.p2.empty);if(T&&T.slice.size<T.to-T.from){if(t){let A=e.tr.step(T);A.setSelection(et(h,"end")?v.Y1.findFrom(A.doc.resolve(A.mapping.map(u.pos,-1)),-1):v.qv.create(A.doc,u.pos-h.nodeSize)),t(A.scrollIntoView())}return!0}}return!(!h.isAtom||u.depth!=i.depth-1||(t&&t(e.tr.delete(u.pos-h.nodeSize,u.pos).scrollIntoView()),0))};function et(e,t,n=!1){for(let i=e;i;i="start"==t?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&1!=i.childCount)return!1}return!1}const _t=(e,t,n)=>{let{$head:i,empty:u}=e.selection,h=i;if(!u)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):i.parentOffset>0)return!1;h=Tt(i)}let T=h&&h.nodeBefore;return!(!T||!v.qv.isSelectable(T)||(t&&t(e.tr.setSelection(v.qv.create(e.doc,h.pos-T.nodeSize)).scrollIntoView()),0))};function Tt(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}const It=(e,t,n)=>{let i=function(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}(e,n);if(!i)return!1;let u=Dt(i);if(!u)return!1;let h=u.nodeAfter;if(at(e,u,t))return!0;if(0==i.parent.content.size&&(et(h,"start")||v.qv.isSelectable(h))){let T=(0,g.dR)(e.doc,i.before(),i.after(),P.p2.empty);if(T&&T.slice.size<T.to-T.from){if(t){let A=e.tr.step(T);A.setSelection(et(h,"start")?v.Y1.findFrom(A.doc.resolve(A.mapping.map(u.pos)),1):v.qv.create(A.doc,A.mapping.map(u.pos))),t(A.scrollIntoView())}return!0}}return!(!h.isAtom||u.depth!=i.depth-1||(t&&t(e.tr.delete(u.pos,u.pos+h.nodeSize).scrollIntoView()),0))},Pt=(e,t,n)=>{let{$head:i,empty:u}=e.selection,h=i;if(!u)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size)return!1;h=Dt(i)}let T=h&&h.nodeAfter;return!(!T||!v.qv.isSelectable(T)||(t&&t(e.tr.setSelection(v.qv.create(e.doc,h.pos)).scrollIntoView()),0))};function Dt(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const mt=(e,t)=>{let{$head:n,$anchor:i}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(i)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))};function j(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const At=(e,t)=>{let{$head:n,$anchor:i}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let u=n.node(-1),h=n.indexAfter(-1),T=j(u.contentMatchAt(h));if(!T||!u.canReplaceWith(h,h,T))return!1;if(t){let A=n.after(),k=e.tr.replaceWith(A,A,T.createAndFill());k.setSelection(v.Y1.near(k.doc.resolve(A),1)),t(k.scrollIntoView())}return!0},St=(e,t)=>{let n=e.selection,{$from:i,$to:u}=n;if(n instanceof v.C1||i.parent.inlineContent||u.parent.inlineContent)return!1;let h=j(u.parent.contentMatchAt(u.indexAfter()));if(!h||!h.isTextblock)return!1;if(t){let T=(!i.parentOffset&&u.index()<u.parent.childCount?i:u).pos,A=e.tr.insert(T,h.createAndFill());A.setSelection(v.Bs.create(A.doc,T+1)),t(A.scrollIntoView())}return!0},Et=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let h=n.before();if((0,g.Ax)(e.doc,h))return t&&t(e.tr.split(h).scrollIntoView()),!0}let i=n.blockRange(),u=i&&(0,g.k9)(i);return null!=u&&(t&&t(e.tr.lift(i,u).scrollIntoView()),!0)};var e;function at(e,t,n){let h,T,i=t.nodeBefore,u=t.nodeAfter;if(i.type.spec.isolating||u.type.spec.isolating)return!1;if(function(e,t,n){let i=t.nodeBefore,u=t.nodeAfter,h=t.index();return!(!(i&&u&&i.type.compatibleContent(u.type))||(!i.content.size&&t.parent.canReplace(h-1,h)?(n&&n(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(h,h+1)||!u.isTextblock&&!(0,g.Mn)(e.doc,t.pos)||(n&&n(e.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;let A=t.parent.canReplace(t.index(),t.index()+1);if(A&&(h=(T=i.contentMatchAt(i.childCount)).findWrapping(u.type))&&T.matchType(h[0]||u.type).validEnd){if(n){let nt=t.pos+u.nodeSize,dt=P.HY.empty;for(let Zt=h.length-1;Zt>=0;Zt--)dt=P.HY.from(h[Zt].create(null,dt));dt=P.HY.from(i.copy(dt));let Bt=e.tr.step(new g.FC(t.pos-1,nt,t.pos,nt,new P.p2(dt,1,0),h.length,!0)),Jt=nt+2*h.length;(0,g.Mn)(Bt.doc,Jt)&&Bt.join(Jt),n(Bt.scrollIntoView())}return!0}let k=v.Y1.findFrom(t,1),z=k&&k.$from.blockRange(k.$to),Z=z&&(0,g.k9)(z);if(null!=Z&&Z>=t.depth)return n&&n(e.tr.lift(z,Z).scrollIntoView()),!0;if(A&&et(u,"start",!0)&&et(i,"end")){let nt=i,dt=[];for(;dt.push(nt),!nt.isTextblock;)nt=nt.lastChild;let Bt=u,Jt=1;for(;!Bt.isTextblock;Bt=Bt.firstChild)Jt++;if(nt.canReplace(nt.childCount,nt.childCount,Bt.content)){if(n){let Zt=P.HY.empty;for(let oe=dt.length-1;oe>=0;oe--)Zt=P.HY.from(dt[oe].copy(Zt));n(e.tr.step(new g.FC(t.pos-dt.length,t.pos+u.nodeSize,t.pos+Jt,t.pos+u.nodeSize-Jt,new P.p2(Zt,dt.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function st(e){return function(t,n){let i=t.selection,u=e<0?i.$from:i.$to,h=u.depth;for(;u.node(h).isInline;){if(!h)return!1;h--}return!!u.node(h).isTextblock&&(n&&n(t.tr.setSelection(v.Bs.create(t.doc,e<0?u.start(h):u.end(h)))),!0)}}const J=st(-1),Q=st(1);function kt(e,t=null){return function(n,i){let u=!1;for(let h=0;h<n.selection.ranges.length&&!u;h++){let{$from:{pos:T},$to:{pos:A}}=n.selection.ranges[h];n.doc.nodesBetween(T,A,(k,z)=>{if(u)return!1;if(k.isTextblock&&!k.hasMarkup(e,t))if(k.type==e)u=!0;else{let Z=n.doc.resolve(z),nt=Z.index();u=Z.parent.canReplaceWith(nt,nt+1,e)}})}if(!u)return!1;if(i){let h=n.tr;for(let T=0;T<n.selection.ranges.length;T++){let{$from:{pos:A},$to:{pos:k}}=n.selection.ranges[T];h.setBlockType(A,k,e,t)}i(h.scrollIntoView())}return!0}}function ue(...e){return function(t,n,i){for(let u=0;u<e.length;u++)if(e[u](t,n,i))return!0;return!1}}let ye=ue(it,X,_t),Oe=ue(it,It,Pt);const he={Enter:ue(mt,St,Et,(t,n)=>{let{$from:i,$to:u}=t.selection;if(t.selection instanceof v.qv&&t.selection.node.isBlock)return!(!i.parentOffset||!(0,g.Ax)(t.doc,i.pos)||(n&&n(t.tr.split(i.pos).scrollIntoView()),0));if(!i.parent.isBlock)return!1;if(n){let h=u.parentOffset==u.parent.content.size,T=t.tr;(t.selection instanceof v.Bs||t.selection instanceof v.C1)&&T.deleteSelection();let A=0==i.depth?null:j(i.node(-1).contentMatchAt(i.indexAfter(-1))),k=e,z=k?[k]:h&&A?[{type:A}]:void 0,Z=(0,g.Ax)(T.doc,T.mapping.map(i.pos),1,z);if(!z&&!Z&&(0,g.Ax)(T.doc,T.mapping.map(i.pos),1,A?[{type:A}]:void 0)&&(A&&(z=[{type:A}]),Z=!0),Z&&(T.split(T.mapping.map(i.pos),1,z),!h&&!i.parentOffset&&i.parent.type!=A)){let nt=T.mapping.map(i.before()),dt=T.doc.resolve(nt);A&&i.node(-1).canReplaceWith(dt.index(),dt.index()+1,A)&&T.setNodeMarkup(T.mapping.map(i.before()),A)}n(T.scrollIntoView())}return!0}),"Mod-Enter":At,Backspace:ye,"Mod-Backspace":ye,"Shift-Backspace":ye,Delete:Oe,"Mod-Delete":Oe,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new v.C1(e.doc))),!0)},Ke={"Ctrl-h":he.Backspace,"Alt-Backspace":he["Mod-Backspace"],"Ctrl-d":he.Delete,"Ctrl-Alt-Backspace":he["Mod-Delete"],"Alt-Delete":he["Mod-Delete"],"Alt-d":he["Mod-Delete"],"Ctrl-a":J,"Ctrl-e":Q};for(let e in he)Ke[e]=he[e];function gt(e){const{state:t,transaction:n}=e;let{selection:i}=n,{doc:u}=n,{storedMarks:h}=n;return me(Gt({},t),{apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),filterTransaction:t.filterTransaction,plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return h},get selection(){return i},get doc(){return u},get tr(){return i=n.selection,u=n.doc,h=n.storedMarks,n}})}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();class b{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:i}=this,{view:u}=n,{tr:h}=i,T=this.buildProps(h);return Object.fromEntries(Object.entries(t).map(([A,k])=>[A,(...Z)=>{const nt=k(...Z)(T);return!h.getMeta("preventDispatch")&&!this.hasCustomState&&u.dispatch(h),nt}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:i,editor:u,state:h}=this,{view:T}=u,A=[],k=!!t,z=t||h.tr,nt=me(Gt({},Object.fromEntries(Object.entries(i).map(([dt,Bt])=>[dt,(...Zt)=>{const Xt=this.buildProps(z,n),oe=Bt(...Zt)(Xt);return A.push(oe),nt}]))),{run:()=>(!k&&n&&!z.getMeta("preventDispatch")&&!this.hasCustomState&&T.dispatch(z),A.every(dt=>!0===dt))});return nt}createCan(t){const{rawCommands:n,state:i}=this,h=t||i.tr,T=this.buildProps(h,!1),A=Object.fromEntries(Object.entries(n).map(([k,z])=>[k,(...Z)=>z(...Z)(me(Gt({},T),{dispatch:void 0}))]));return me(Gt({},A),{chain:()=>this.createChain(h,!1)})}buildProps(t,n=!0){const{rawCommands:i,editor:u,state:h}=this,{view:T}=u;h.storedMarks&&t.setStoredMarks(h.storedMarks);const A={tr:t,editor:u,view:T,state:gt({state:h,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(i).map(([k,z])=>[k,(...Z)=>z(...Z)(A)]))}};return A}}function I(e,t,n){return void 0===e.config[t]&&e.parent?I(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind(me(Gt({},n),{parent:e.parent?I(e.parent,t,n):null})):e.config[t]}function R(e){return{baseExtensions:e.filter(u=>"extension"===u.type),nodeExtensions:e.filter(u=>"node"===u.type),markExtensions:e.filter(u=>"mark"===u.type)}}function V(e){const t=[],{nodeExtensions:n,markExtensions:i}=R(e),u=[...n,...i],h={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(T=>{const k=I(T,"addGlobalAttributes",{name:T.name,options:T.options,storage:T.storage});k&&k().forEach(Z=>{Z.types.forEach(nt=>{Object.entries(Z.attributes).forEach(([dt,Bt])=>{t.push({type:nt,name:dt,attribute:Gt(Gt({},h),Bt)})})})})}),u.forEach(T=>{const k=I(T,"addAttributes",{name:T.name,options:T.options,storage:T.storage});if(!k)return;const z=k();Object.entries(z).forEach(([Z,nt])=>{const dt=Gt(Gt({},h),nt);(null==nt?void 0:nt.isRequired)&&void 0===(null==nt?void 0:nt.default)&&delete dt.default,t.push({type:T.name,name:Z,attribute:dt})})}),t}function U(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function Ot(...e){return e.filter(t=>!!t).reduce((t,n)=>{const i=Gt({},t);return Object.entries(n).forEach(([u,h])=>{i[u]=i[u]?"class"===u?[i[u],h].join(" "):"style"===u?[i[u],h].join("; "):h:h}),i},{})}function wt(e,t){return t.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,i)=>Ot(n,i),{})}function H(e){return"function"==typeof e}function a(e,t,...n){return H(e)?t?e.bind(t)(...n):e(...n):e}function p(e={}){return 0===Object.keys(e).length&&e.constructor===Object}function E(e){return"string"!=typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}function D(e,t){return e.style?e:me(Gt({},e),{getAttrs:n=>{const i=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===i)return!1;const u=t.reduce((h,T)=>{const A=T.attribute.parseHTML?T.attribute.parseHTML(n):E(n.getAttribute(T.name));return null==A?h:me(Gt({},h),{[T.name]:A})},{});return Gt(Gt({},i),u)}})}function w(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>("attrs"!==t||!p(n))&&null!=n))}function K(e){var t;const n=V(e),{nodeExtensions:i,markExtensions:u}=R(e),h=null===(t=i.find(k=>I(k,"topNode")))||void 0===t?void 0:t.name,T=Object.fromEntries(i.map(k=>{const z=n.filter(Xt=>Xt.type===k.name),Z={name:k.name,options:k.options,storage:k.storage},nt=e.reduce((Xt,oe)=>{const Re=I(oe,"extendNodeSchema",Z);return Gt(Gt({},Xt),Re?Re(k):{})},{}),dt=w(me(Gt({},nt),{content:a(I(k,"content",Z)),marks:a(I(k,"marks",Z)),group:a(I(k,"group",Z)),inline:a(I(k,"inline",Z)),atom:a(I(k,"atom",Z)),selectable:a(I(k,"selectable",Z)),draggable:a(I(k,"draggable",Z)),code:a(I(k,"code",Z)),defining:a(I(k,"defining",Z)),isolating:a(I(k,"isolating",Z)),attrs:Object.fromEntries(z.map(Xt=>{var oe;return[Xt.name,{default:null===(oe=null==Xt?void 0:Xt.attribute)||void 0===oe?void 0:oe.default}]}))})),Bt=a(I(k,"parseHTML",Z));Bt&&(dt.parseDOM=Bt.map(Xt=>D(Xt,z)));const Jt=I(k,"renderHTML",Z);Jt&&(dt.toDOM=Xt=>Jt({node:Xt,HTMLAttributes:wt(Xt,z)}));const Zt=I(k,"renderText",Z);return Zt&&(dt.toText=Zt),[k.name,dt]})),A=Object.fromEntries(u.map(k=>{const z=n.filter(Zt=>Zt.type===k.name),Z={name:k.name,options:k.options,storage:k.storage},nt=e.reduce((Zt,Xt)=>{const oe=I(Xt,"extendMarkSchema",Z);return Gt(Gt({},Zt),oe?oe(k):{})},{}),dt=w(me(Gt({},nt),{inclusive:a(I(k,"inclusive",Z)),excludes:a(I(k,"excludes",Z)),group:a(I(k,"group",Z)),spanning:a(I(k,"spanning",Z)),code:a(I(k,"code",Z)),attrs:Object.fromEntries(z.map(Zt=>{var Xt;return[Zt.name,{default:null===(Xt=null==Zt?void 0:Zt.attribute)||void 0===Xt?void 0:Xt.default}]}))})),Bt=a(I(k,"parseHTML",Z));Bt&&(dt.parseDOM=Bt.map(Zt=>D(Zt,z)));const Jt=I(k,"renderHTML",Z);return Jt&&(dt.toDOM=Zt=>Jt({mark:Zt,HTMLAttributes:wt(Zt,z)})),[k.name,dt]}));return new P.V_({topNode:h,nodes:T,marks:A})}function lt(e,t){return t.nodes[e]||t.marks[e]||null}function Rt(e,t){return Array.isArray(t)?t.some(n=>("string"==typeof n?n:n.name)===e.name):t}const qt=(e,t=500)=>{let n="";const i=e.parentOffset;return e.parent.nodesBetween(Math.max(0,i-t),i,(u,h,T,A)=>{var k,z;n+=((null===(z=(k=u.type.spec).toText)||void 0===z?void 0:z.call(k,{node:u,pos:h,parent:T,index:A}))||u.textContent||"%leaf%").slice(0,Math.max(0,i-h))}),n};function te(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class ke{constructor(t){this.find=t.find,this.handler=t.handler}}function $(e){var t;const{editor:n,from:i,to:u,text:h,rules:T,plugin:A}=e,{view:k}=n;if(k.composing)return!1;const z=k.state.doc.resolve(i);if(z.parent.type.spec.code||(null===(t=z.nodeBefore||z.nodeAfter)||void 0===t?void 0:t.marks.find(dt=>dt.type.spec.code)))return!1;let Z=!1;const nt=qt(z)+h;return T.forEach(dt=>{if(Z)return;const Bt=((e,t)=>{if(te(t))return t.exec(e);const n=t(e);if(!n)return null;const i=[n.text];return i.index=n.index,i.input=e,i.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(n.replaceWith)),i})(nt,dt.find);if(!Bt)return;const Jt=k.state.tr,Zt=gt({state:k.state,transaction:Jt}),Xt={from:i-(Bt[0].length-h.length),to:u},{commands:oe,chain:Re,can:je}=new b({editor:n,state:Zt});null===dt.handler({state:Zt,range:Xt,match:Bt,commands:oe,chain:Re,can:je})||!Jt.steps.length||(Jt.setMeta(A,{transform:Jt,from:i,to:u,text:h}),k.dispatch(Jt),Z=!0)}),Z}function S(e){const{editor:t,rules:n}=e,i=new v.Sy({state:{init:()=>null,apply:(u,h)=>u.getMeta(i)||(u.selectionSet||u.docChanged?null:h)},props:{handleTextInput:(u,h,T,A)=>$({editor:t,from:h,to:T,text:A,rules:n,plugin:i}),handleDOMEvents:{compositionend:u=>(setTimeout(()=>{const{$cursor:h}=u.state.selection;h&&$({editor:t,from:h.pos,to:h.pos,text:"",rules:n,plugin:i})}),!1)},handleKeyDown(u,h){if("Enter"!==h.key)return!1;const{$cursor:T}=u.state.selection;return!!T&&$({editor:t,from:T.pos,to:T.pos,text:"\n",rules:n,plugin:i})}},isInputRules:!0});return i}function ct(e){return"number"==typeof e}class Ct{constructor(t){this.find=t.find,this.handler=t.handler}}function Wt(e){const{editor:t,rules:n}=e;let i=null,u=!1,h=!1;return n.map(A=>new v.Sy({view(k){const z=Z=>{var nt;i=(null===(nt=k.dom.parentElement)||void 0===nt?void 0:nt.contains(Z.target))?k.dom.parentElement:null};return window.addEventListener("dragstart",z),{destroy(){window.removeEventListener("dragstart",z)}}},props:{handleDOMEvents:{drop:k=>(h=i===k.dom.parentElement,!1),paste:(k,z)=>{var Z;const nt=null===(Z=z.clipboardData)||void 0===Z?void 0:Z.getData("text/html");return u=!!(null==nt?void 0:nt.includes("data-pm-slice")),!1}}},appendTransaction:(k,z,Z)=>{const nt=k[0],dt="paste"===nt.getMeta("uiEvent")&&!u,Bt="drop"===nt.getMeta("uiEvent")&&!h;if(!dt&&!Bt)return;const Jt=z.doc.content.findDiffStart(Z.doc.content),Zt=z.doc.content.findDiffEnd(Z.doc.content);if(!ct(Jt)||!Zt||Jt===Zt.b)return;const Xt=Z.tr,oe=gt({state:Z,transaction:Xt});return function(e){const{editor:t,state:n,from:i,to:u,rule:h}=e,{commands:T,chain:A,can:k}=new b({editor:t,state:n}),z=[];return n.doc.nodesBetween(i,u,(nt,dt)=>{if(!nt.isTextblock||nt.type.spec.code)return;const Bt=Math.max(i,dt),Jt=Math.min(u,dt+nt.content.size);((e,t)=>{if(te(t))return[...e.matchAll(t)];const n=t(e);return n?n.map(i=>{const u=[i.text];return u.index=i.index,u.input=e,u.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),u.push(i.replaceWith)),u}):[]})(nt.textBetween(Bt-dt,Jt-dt,void 0,"\ufffc"),h.find).forEach(oe=>{if(void 0===oe.index)return;const Re=Bt+oe.index+1,je=Re+oe[0].length,le={from:n.tr.mapping.map(Re),to:n.tr.mapping.map(je)},Xe=h.handler({state:n,range:le,match:oe,commands:T,chain:A,can:k});z.push(Xe)})}),z.every(nt=>null!==nt)}({editor:t,state:oe,from:Math.max(Jt-1,0),to:Zt.b-1,rule:A})&&Xt.steps.length?Xt:void 0}}))}function Qt(e){const t=e.filter((n,i)=>e.indexOf(n)!==i);return[...new Set(t)]}class ne{constructor(t,n){this.splittableMarks=[],this.editor=n,this.extensions=ne.resolve(t),this.schema=K(this.extensions),this.extensions.forEach(i=>{var u;this.editor.extensionStorage[i.name]=i.storage;const h={name:i.name,options:i.options,storage:i.storage,editor:this.editor,type:lt(i.name,this.schema)};"mark"===i.type&&(null===(u=a(I(i,"keepOnSplit",h)))||void 0===u||u)&&this.splittableMarks.push(i.name);const T=I(i,"onBeforeCreate",h);T&&this.editor.on("beforeCreate",T);const A=I(i,"onCreate",h);A&&this.editor.on("create",A);const k=I(i,"onUpdate",h);k&&this.editor.on("update",k);const z=I(i,"onSelectionUpdate",h);z&&this.editor.on("selectionUpdate",z);const Z=I(i,"onTransaction",h);Z&&this.editor.on("transaction",Z);const nt=I(i,"onFocus",h);nt&&this.editor.on("focus",nt);const dt=I(i,"onBlur",h);dt&&this.editor.on("blur",dt);const Bt=I(i,"onDestroy",h);Bt&&this.editor.on("destroy",Bt)})}static resolve(t){const n=ne.sort(ne.flatten(t)),i=Qt(n.map(u=>u.name));return i.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${i.map(u=>`'${u}'`).join(", ")}]. This can lead to issues.`),n}static flatten(t){return t.map(n=>{const u=I(n,"addExtensions",{name:n.name,options:n.options,storage:n.storage});return u?[n,...this.flatten(u())]:n}).flat(10)}static sort(t){return t.sort((i,u)=>{const h=I(i,"priority")||100,T=I(u,"priority")||100;return h>T?-1:h<T?1:0})}get commands(){return this.extensions.reduce((t,n)=>{const u=I(n,"addCommands",{name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:lt(n.name,this.schema)});return u?Gt(Gt({},t),u()):t},{})}get plugins(){const{editor:t}=this,n=ne.sort([...this.extensions].reverse()),i=[],u=[],h=n.map(T=>{const A={name:T.name,options:T.options,storage:T.storage,editor:t,type:lt(T.name,this.schema)},k=[],z=I(T,"addKeyboardShortcuts",A);let Z={};if("mark"===T.type&&T.config.exitable&&(Z.ArrowRight=()=>Nn.handleExit({editor:t,mark:T})),z){const Zt=Object.fromEntries(Object.entries(z()).map(([Xt,oe])=>[Xt,()=>oe({editor:t})]));Z=Gt(Gt({},Z),Zt)}const nt=(0,y.h)(Z);k.push(nt);const dt=I(T,"addInputRules",A);Rt(T,t.options.enableInputRules)&&dt&&i.push(...dt());const Bt=I(T,"addPasteRules",A);Rt(T,t.options.enablePasteRules)&&Bt&&u.push(...Bt());const Jt=I(T,"addProseMirrorPlugins",A);if(Jt){const Zt=Jt();k.push(...Zt)}return k}).flat();return[S({editor:t,rules:i}),...Wt({editor:t,rules:u}),...h]}get attributes(){return V(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:n}=R(this.extensions);return Object.fromEntries(n.filter(i=>!!I(i,"addNodeView")).map(i=>{const u=this.attributes.filter(k=>k.type===i.name),h={name:i.name,options:i.options,storage:i.storage,editor:t,type:U(i.name,this.schema)},T=I(i,"addNodeView",h);return T?[i.name,(k,z,Z,nt)=>{const dt=wt(k,u);return T()({editor:t,node:k,getPos:Z,decorations:nt,HTMLAttributes:dt,extension:i})}]:[]}))}}function se(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function ae(e,t){const n=Gt({},e);return se(e)&&se(t)&&Object.keys(t).forEach(i=>{se(t[i])?i in e?n[i]=ae(e[i],t[i]):Object.assign(n,{[i]:t[i]}):Object.assign(n,{[i]:t[i]})}),n}class ce{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Gt(Gt({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(I(this,"addOptions",{name:this.name}))),this.storage=a(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new ce(t)}configure(t={}){const n=this.extend();return n.options=ae(this.options,t),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new ce(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=a(I(n,"addOptions",{name:n.name})),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}}function we(e,t,n){const{from:i,to:u}=t,{blockSeparator:h="\n\n",textSerializers:T={}}=n||{};let A="",k=!0;return e.nodesBetween(i,u,(z,Z,nt,dt)=>{var Bt;const Jt=null==T?void 0:T[z.type.name];Jt?(z.isBlock&&!k&&(A+=h,k=!0),nt&&(A+=Jt({node:z,pos:Z,parent:nt,index:dt,range:t}))):z.isText?(A+=null===(Bt=null==z?void 0:z.text)||void 0===Bt?void 0:Bt.slice(Math.max(i,Z)-Z,u-Z),k=!1):z.isBlock&&!k&&(A+=h,k=!0)}),A}function We(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}const an=ce.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new v.Sy({key:new v.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:i,selection:u}=t,{ranges:h}=u;return we(i,{from:Math.min(...h.map(Z=>Z.$from.pos)),to:Math.max(...h.map(Z=>Z.$to.pos))},{textSerializers:We(n)})}}})]}});function rn(e,t,n={strict:!0}){const i=Object.keys(t);return!i.length||i.every(u=>n.strict?t[u]===e[u]:te(t[u])?t[u].test(e[u]):t[u]===e[u])}function sn(e,t,n={}){return e.find(i=>i.type===t&&rn(i.attrs,n))}function _(e,t,n={}){return!!sn(e,t,n)}function C(e,t,n={}){if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if(e.parentOffset===i.offset&&0!==i.offset&&(i=e.parent.childBefore(e.parentOffset)),!i.node)return;const u=sn([...i.node.marks],t,n);if(!u)return;let h=i.index,T=e.start()+i.offset,A=h+1,k=T+i.node.nodeSize;for(sn([...i.node.marks],t,n);h>0&&u.isInSet(e.parent.child(h-1).marks);)h-=1,T-=e.parent.child(h).nodeSize;for(;A<e.parent.childCount&&_([...e.parent.child(A).marks],t,n);)k+=e.parent.child(A).nodeSize,A+=1;return{from:T,to:k}}function m(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function x(e){return e instanceof v.Bs}function L(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Y(e,t=null){if(!t)return null;const n=v.Y1.atStart(e),i=v.Y1.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return i;const u=n.from,h=i.to;return"all"===t?v.Bs.create(e,L(0,u,h),L(e.content.size,u,h)):v.Bs.create(e,L(t,u,h),L(t,u,h))}function W(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Nt(e){const t=`<body>${e}</body>`;return(new window.DOMParser).parseFromString(t,"text/html").body}function Ut(e,t,n){if(n=Gt({slice:!0,parseOptions:{}},n),"object"==typeof e&&null!==e)try{return Array.isArray(e)&&e.length>0?P.HY.fromArray(e.map(i=>t.nodeFromJSON(i))):t.nodeFromJSON(e)}catch(i){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",i),Ut("",t,n)}if("string"==typeof e){const i=P.aw.fromSchema(t);return n.slice?i.parseSlice(Nt(e),n.parseOptions).content:i.parse(Nt(e),n.parseOptions)}return Ut("",t,n)}function Vt(e,t,n){const i=e.steps.length-1;if(i<t)return;const u=e.steps[i];if(!(u instanceof g.Pu||u instanceof g.FC))return;let T=0;e.mapping.maps[i].forEach((A,k,z,Z)=>{0===T&&(T=Z)}),e.setSelection(v.Y1.near(e.doc.resolve(T),n))}function De(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function pe(e,t,n={}){const{from:i,to:u,empty:h}=e.selection,T=t?U(t,e.schema):null,A=[];e.doc.nodesBetween(i,u,(nt,dt)=>{if(nt.isText)return;const Bt=Math.max(i,dt),Jt=Math.min(u,dt+nt.nodeSize);A.push({node:nt,from:Bt,to:Jt})});const k=u-i,z=A.filter(nt=>!T||T.name===nt.node.type.name).filter(nt=>rn(nt.node.attrs,n,{strict:!1}));return h?!!z.length:z.reduce((nt,dt)=>nt+dt.to-dt.from,0)>=k}function ln(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Ge(e,t){const n="string"==typeof t?[t]:t;return Object.keys(e).reduce((i,u)=>(n.includes(u)||(i[u]=e[u]),i),{})}function tn(e,t,n={}){return Ut(e,t,{slice:!1,parseOptions:n})}function To(e,t){const n=new g.wx(e);return t.forEach(i=>{i.steps.forEach(u=>{n.step(u)})}),n}function eo(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Co(e,t){const n=[];return e.descendants((i,u)=>{t(i)&&n.push({node:i,pos:u})}),n}function vo(e,t,n){const i=[];return e.nodesBetween(t.from,t.to,(u,h)=>{n(u)&&i.push({node:u,pos:h})}),i}function no(e,t){for(let n=e.depth;n>0;n-=1){const i=e.node(n);if(t(i))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:i}}}function wn(e){return t=>no(t.$from,e)}function Fn(e,t){const n=P.PW.fromSchema(t).serializeFragment(e),u=document.implementation.createHTMLDocument().createElement("div");return u.appendChild(n),u.innerHTML}function Kn(e){return K(ne.resolve(e))}function oo(e,t){const n=Kn(t);return Fn(P.NB.fromJSON(n,e).content,n)}function Mo(e,t){const n=Kn(t),i=Nt(e);return P.aw.fromSchema(n).parse(i).toJSON()}function Jn(e,t){return we(e,{from:0,to:e.content.size},t)}function io(e,t,n){const{blockSeparator:i="\n\n",textSerializers:u={}}=n||{},h=Kn(t);return Jn(P.NB.fromJSON(h,e),{blockSeparator:i,textSerializers:Gt(Gt({},We(h)),u)})}function Gn(e,t){const n=m(t,e.schema),{from:i,to:u,empty:h}=e.selection,T=[];h?(e.storedMarks&&T.push(...e.storedMarks),T.push(...e.selection.$head.marks())):e.doc.nodesBetween(i,u,k=>{T.push(...k.marks)});const A=T.find(k=>k.type.name===n.name);return A?Gt({},A.attrs):{}}function zn(e,t){const n=U(t,e.schema),{from:i,to:u}=e.selection,h=[];e.doc.nodesBetween(i,u,A=>{h.push(A)});const T=h.reverse().find(A=>A.type.name===n.name);return T?Gt({},T.attrs):{}}function ro(e,t){const n=ln("string"==typeof t?t:t.name,e.schema);return"node"===n?zn(e,t):"mark"===n?Gn(e,t):{}}function An(e,t=JSON.stringify){const n={};return e.filter(i=>{const u=t(i);return!Object.prototype.hasOwnProperty.call(n,u)&&(n[u]=!0)})}function yo(e){const{mapping:t,steps:n}=e,i=[];return t.maps.forEach((u,h)=>{const T=[];if(u.ranges.length)u.forEach((A,k)=>{T.push({from:A,to:k})});else{const{from:A,to:k}=n[h];if(void 0===A||void 0===k)return;T.push({from:A,to:k})}T.forEach(({from:A,to:k})=>{const z=t.slice(h).map(A,-1),Z=t.slice(h).map(k),nt=t.invert().map(z,-1),dt=t.invert().map(Z);i.push({oldRange:{from:nt,to:dt},newRange:{from:z,to:Z}})})}),function(e){const t=An(e);return 1===t.length?t:t.filter((n,i)=>!t.filter((h,T)=>T!==i).some(h=>n.oldRange.from>=h.oldRange.from&&n.oldRange.to<=h.oldRange.to&&n.newRange.from>=h.newRange.from&&n.newRange.to<=h.newRange.to))}(i)}function Rn(e,t=0){const i=e.type===e.type.schema.topNodeType?0:1,u=t,h=u+e.nodeSize,T=e.marks.map(z=>{const Z={type:z.type.name};return Object.keys(z.attrs).length&&(Z.attrs=Gt({},z.attrs)),Z}),A=Gt({},e.attrs),k={type:e.type.name,from:u,to:h};return Object.keys(A).length&&(k.attrs=A),T.length&&(k.marks=T),e.content.childCount&&(k.content=[],e.forEach((z,Z)=>{var nt;null===(nt=k.content)||void 0===nt||nt.push(Rn(z,t+Z+i))})),e.text&&(k.text=e.text),k}function Xn(e,t,n){const i=[];return e===t?n.resolve(e).marks().forEach(u=>{const T=C(n.resolve(e-1),u.type);!T||i.push(Gt({mark:u},T))}):n.nodesBetween(e,t,(u,h)=>{i.push(...u.marks.map(T=>({from:h,to:h+u.nodeSize,mark:T})))}),i}function Ln(e,t,n){return Object.fromEntries(Object.entries(n).filter(([i])=>{const u=e.find(h=>h.type===t&&h.name===i);return!!u&&u.attribute.keepOnSplit}))}function Mn(e,t,n={}){const{empty:i,ranges:u}=e.selection,h=t?m(t,e.schema):null;if(i)return!!(e.storedMarks||e.selection.$from.marks()).filter(nt=>!h||h.name===nt.type.name).find(nt=>rn(nt.attrs,n,{strict:!1}));let T=0;const A=[];if(u.forEach(({$from:nt,$to:dt})=>{const Bt=nt.pos,Jt=dt.pos;e.doc.nodesBetween(Bt,Jt,(Zt,Xt)=>{if(!Zt.isText&&!Zt.marks.length)return;const oe=Math.max(Bt,Xt),Re=Math.min(Jt,Xt+Zt.nodeSize);T+=Re-oe,A.push(...Zt.marks.map(le=>({mark:le,from:oe,to:Re})))})}),0===T)return!1;const k=A.filter(nt=>!h||h.name===nt.mark.type.name).filter(nt=>rn(nt.mark.attrs,n,{strict:!1})).reduce((nt,dt)=>nt+dt.to-dt.from,0),z=A.filter(nt=>!h||nt.mark.type!==h&&nt.mark.type.excludes(h)).reduce((nt,dt)=>nt+dt.to-dt.from,0);return(k>0?k+z:k)>=T}function $n(e,t,n={}){if(!t)return pe(e,null,n)||Mn(e,null,n);const i=ln(t,e.schema);return"node"===i?pe(e,t,n):"mark"===i&&Mn(e,t,n)}function un(e,t){const{nodeExtensions:n}=R(t),i=n.find(T=>T.name===e);if(!i)return!1;const h=a(I(i,"group",{name:i.name,options:i.options,storage:i.storage}));return"string"==typeof h&&h.split(" ").includes("list")}function Zn(e){var t;const n=null===(t=e.type.createAndFill())||void 0===t?void 0:t.toJSON(),i=e.toJSON();return JSON.stringify(n)===JSON.stringify(i)}function on(e){return e instanceof v.qv}function Bn(e,t,n){const u=e.state.doc.content.size,h=L(t,0,u),T=L(n,0,u),A=e.coordsAtPos(h),k=e.coordsAtPos(T,-1),z=Math.min(A.top,k.top),Z=Math.max(A.bottom,k.bottom),nt=Math.min(A.left,k.left),dt=Math.max(A.right,k.right),oe={top:z,bottom:Z,left:nt,right:dt,width:dt-nt,height:Z-z,x:nt,y:z};return me(Gt({},oe),{toJSON:()=>oe})}function qn(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const i=n.filter(u=>null==t?void 0:t.includes(u.type.name));e.tr.ensureMarks(i)}}const gn=(e,t)=>{const n=wn(T=>T.type===t)(e.selection);if(!n)return!0;const i=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===i)return!0;const u=e.doc.nodeAt(i);return n.node.type===(null==u?void 0:u.type)&&(0,g.Mn)(e.doc,n.pos)&&e.join(n.pos),!0},Wn=(e,t)=>{const n=wn(T=>T.type===t)(e.selection);if(!n)return!0;const i=e.doc.resolve(n.start).after(n.depth);if(void 0===i)return!0;const u=e.doc.nodeAt(i);return n.node.type===(null==u?void 0:u.type)&&(0,g.Mn)(e.doc,i)&&e.join(i),!0};var Po=Object.freeze({__proto__:null,blur:()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),null===(n=null==window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())}),!0),clearContent:(e=!1)=>({commands:t})=>t.setContent("",e),clearNodes:()=>({state:e,tr:t,dispatch:n})=>{const{selection:i}=t,{ranges:u}=i;return n&&u.forEach(({$from:h,$to:T})=>{e.doc.nodesBetween(h.pos,T.pos,(A,k)=>{if(A.type.isText)return;const{doc:z,mapping:Z}=t,nt=z.resolve(Z.map(k)),dt=z.resolve(Z.map(k+A.nodeSize)),Bt=nt.blockRange(dt);if(!Bt)return;const Jt=(0,g.k9)(Bt);if(A.type.isTextblock){const{defaultType:Zt}=nt.parent.contentMatchAt(nt.index());t.setNodeMarkup(Bt.start,Zt)}(Jt||0===Jt)&&t.lift(Bt,Jt)})}),!0},command:e=>t=>e(t),createParagraphNear:()=>({state:e,dispatch:t})=>St(e,t),deleteCurrentNode:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,i=n.$anchor.node();if(i.content.size>0)return!1;const u=e.selection.$anchor;for(let h=u.depth;h>0;h-=1)if(u.node(h).type===i.type){if(t){const A=u.before(h),k=u.after(h);e.delete(A,k).scrollIntoView()}return!0}return!1},deleteNode:e=>({tr:t,state:n,dispatch:i})=>{const u=U(e,n.schema),h=t.selection.$anchor;for(let T=h.depth;T>0;T-=1)if(h.node(T).type===u){if(i){const k=h.before(T),z=h.after(T);t.delete(k,z).scrollIntoView()}return!0}return!1},deleteRange:e=>({tr:t,dispatch:n})=>{const{from:i,to:u}=e;return n&&t.delete(i,u),!0},deleteSelection:()=>({state:e,dispatch:t})=>it(e,t),enter:()=>({commands:e})=>e.keyboardShortcut("Enter"),exitCode:()=>({state:e,dispatch:t})=>At(e,t),extendMarkRange:(e,t={})=>({tr:n,state:i,dispatch:u})=>{const h=m(e,i.schema),{doc:T,selection:A}=n,{$from:k,from:z,to:Z}=A;if(u){const nt=C(k,h,t);if(nt&&nt.from<=z&&nt.to>=Z){const dt=v.Bs.create(T,nt.from,nt.to);n.setSelection(dt)}}return!0},first:e=>t=>{const n="function"==typeof e?e(t):e;for(let i=0;i<n.length;i+=1)if(n[i](t))return!0;return!1},focus:(e=null,t={})=>({editor:n,view:i,tr:u,dispatch:h})=>{t=Gt({scrollIntoView:!0},t);const T=()=>{W()&&i.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(i.focus(),(null==t?void 0:t.scrollIntoView)&&n.commands.scrollIntoView())})};if(i.hasFocus()&&null===e||!1===e)return!0;if(h&&null===e&&!x(n.state.selection))return T(),!0;const A=Y(u.doc,e)||n.state.selection,k=n.state.selection.eq(A);return h&&(k||u.setSelection(A),k&&u.storedMarks&&u.setStoredMarks(u.storedMarks),T()),!0},forEach:(e,t)=>n=>e.every((i,u)=>t(i,me(Gt({},n),{index:u}))),insertContent:(e,t)=>({tr:n,commands:i})=>i.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),insertContentAt:(e,t,n)=>({tr:i,dispatch:u,editor:h})=>{if(u){n=Gt({parseOptions:{},updateSelection:!0},n);const T=Ut(t,h.schema,{parseOptions:Gt({preserveWhitespace:"full"},n.parseOptions)});if("<>"===T.toString())return!0;let{from:A,to:k}="number"==typeof e?{from:e,to:e}:e,z=!0,Z=!0;if(((e=>e.toString().startsWith("<"))(T)?T:[T]).forEach(dt=>{dt.check(),z=!!z&&dt.isText&&0===dt.marks.length,Z=!!Z&&dt.isBlock}),A===k&&Z){const{parent:dt}=i.doc.resolve(A);dt.isTextblock&&!dt.type.spec.code&&!dt.childCount&&(A-=1,k+=1)}z?Array.isArray(t)?i.insertText(t.map(dt=>dt.text||"").join(""),A,k):i.insertText("object"==typeof t&&t&&t.text?t.text:t,A,k):i.replaceWith(A,k,T),n.updateSelection&&Vt(i,i.steps.length-1,-1)}return!0},joinUp:()=>({state:e,dispatch:t})=>((e,t)=>{let u,n=e.selection,i=n instanceof v.qv;if(i){if(n.node.isTextblock||!(0,g.Mn)(e.doc,n.from))return!1;u=n.from}else if(u=(0,g.GJ)(e.doc,n.from,-1),null==u)return!1;if(t){let h=e.tr.join(u);i&&h.setSelection(v.qv.create(h.doc,u-e.doc.resolve(u).nodeBefore.nodeSize)),t(h.scrollIntoView())}return!0})(e,t),joinDown:()=>({state:e,dispatch:t})=>((e,t)=>{let i,n=e.selection;if(n instanceof v.qv){if(n.node.isTextblock||!(0,g.Mn)(e.doc,n.to))return!1;i=n.to}else if(i=(0,g.GJ)(e.doc,n.to,1),null==i)return!1;return t&&t(e.tr.join(i).scrollIntoView()),!0})(e,t),joinBackward:()=>({state:e,dispatch:t})=>X(e,t),joinForward:()=>({state:e,dispatch:t})=>It(e,t),keyboardShortcut:e=>({editor:t,view:n,tr:i,dispatch:u})=>{const h=function(e){const t=e.split(/-(?!$)/);let i,u,h,T,n=t[t.length-1];"Space"===n&&(n=" ");for(let A=0;A<t.length-1;A+=1){const k=t[A];if(/^(cmd|meta|m)$/i.test(k))T=!0;else if(/^a(lt)?$/i.test(k))i=!0;else if(/^(c|ctrl|control)$/i.test(k))u=!0;else if(/^s(hift)?$/i.test(k))h=!0;else{if(!/^mod$/i.test(k))throw new Error(`Unrecognized modifier name: ${k}`);W()||De()?T=!0:u=!0}}return i&&(n=`Alt-${n}`),u&&(n=`Ctrl-${n}`),T&&(n=`Meta-${n}`),h&&(n=`Shift-${n}`),n}(e).split(/-(?!$)/),T=h.find(z=>!["Alt","Ctrl","Meta","Shift"].includes(z)),A=new KeyboardEvent("keydown",{key:"Space"===T?" ":T,altKey:h.includes("Alt"),ctrlKey:h.includes("Ctrl"),metaKey:h.includes("Meta"),shiftKey:h.includes("Shift"),bubbles:!0,cancelable:!0}),k=t.captureTransaction(()=>{n.someProp("handleKeyDown",z=>z(n,A))});return null==k||k.steps.forEach(z=>{const Z=z.map(i.mapping);Z&&u&&i.maybeStep(Z)}),!0},lift:(e,t={})=>({state:n,dispatch:i})=>!!pe(n,U(e,n.schema),t)&&((e,t)=>{let{$from:n,$to:i}=e.selection,u=n.blockRange(i),h=u&&(0,g.k9)(u);return null!=h&&(t&&t(e.tr.lift(u,h).scrollIntoView()),!0)})(n,i),liftEmptyBlock:()=>({state:e,dispatch:t})=>Et(e,t),liftListItem:e=>({state:t,dispatch:n})=>function(e){return function(t,n){let{$from:i,$to:u}=t.selection,h=i.blockRange(u,T=>T.childCount>0&&T.firstChild.type==e);return!!h&&(!n||(i.node(h.depth-1).type==e?function(e,t,n,i){let u=e.tr,h=i.end,T=i.$to.end(i.depth);h<T&&(u.step(new g.FC(h-1,T,h,T,new P.p2(P.HY.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new P.Ts(u.doc.resolve(i.$from.pos),u.doc.resolve(T),i.depth));const A=(0,g.k9)(i);if(null==A)return!1;u.lift(i,A);let k=u.mapping.map(h,-1)-1;return(0,g.Mn)(u.doc,k)&&u.join(k),t(u.scrollIntoView()),!0}(t,n,e,h):function(e,t,n){let i=e.tr,u=n.parent;for(let Bt=n.end,Jt=n.endIndex-1,Zt=n.startIndex;Jt>Zt;Jt--)Bt-=u.child(Jt).nodeSize,i.delete(Bt-1,Bt+1);let h=i.doc.resolve(n.start),T=h.nodeAfter;if(i.mapping.map(n.end)!=n.start+h.nodeAfter.nodeSize)return!1;let A=0==n.startIndex,k=n.endIndex==u.childCount,z=h.node(-1),Z=h.index(-1);if(!z.canReplace(Z+(A?0:1),Z+1,T.content.append(k?P.HY.empty:P.HY.from(u))))return!1;let nt=h.pos,dt=nt+T.nodeSize;return i.step(new g.FC(nt-(A?1:0),dt+(k?1:0),nt+1,dt-1,new P.p2((A?P.HY.empty:P.HY.from(u.copy(P.HY.empty))).append(k?P.HY.empty:P.HY.from(u.copy(P.HY.empty))),A?0:1,k?0:1),A?0:1)),t(i.scrollIntoView()),!0}(t,n,h)))}}(U(e,t.schema))(t,n),newlineInCode:()=>({state:e,dispatch:t})=>mt(e,t),resetAttributes:(e,t)=>({tr:n,state:i,dispatch:u})=>{let h=null,T=null;const A=ln("string"==typeof e?e:e.name,i.schema);return!!A&&("node"===A&&(h=U(e,i.schema)),"mark"===A&&(T=m(e,i.schema)),u&&n.selection.ranges.forEach(k=>{i.doc.nodesBetween(k.$from.pos,k.$to.pos,(z,Z)=>{h&&h===z.type&&n.setNodeMarkup(Z,void 0,Ge(z.attrs,t)),T&&z.marks.length&&z.marks.forEach(nt=>{T===nt.type&&n.addMark(Z,Z+z.nodeSize,T.create(Ge(nt.attrs,t)))})})}),!0)},scrollIntoView:()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),selectAll:()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size}),selectNodeBackward:()=>({state:e,dispatch:t})=>_t(e,t),selectNodeForward:()=>({state:e,dispatch:t})=>Pt(e,t),selectParentNode:()=>({state:e,dispatch:t})=>((e,t)=>{let u,{$from:n,to:i}=e.selection,h=n.sharedDepth(i);return 0!=h&&(u=n.before(h),t&&t(e.tr.setSelection(v.qv.create(e.doc,u))),!0)})(e,t),selectTextblockEnd:()=>({state:e,dispatch:t})=>Q(e,t),selectTextblockStart:()=>({state:e,dispatch:t})=>J(e,t),setContent:(e,t=!1,n={})=>({tr:i,editor:u,dispatch:h})=>{const{doc:T}=i,A=tn(e,u.schema,n);return h&&i.replaceWith(0,T.content.size,A).setMeta("preventUpdate",!t),!0},setMark:(e,t={})=>({tr:n,state:i,dispatch:u})=>{const{selection:h}=n,{empty:T,ranges:A}=h,k=m(e,i.schema);if(u)if(T){const z=Gn(i,k);n.addStoredMark(k.create(Gt(Gt({},z),t)))}else A.forEach(z=>{const Z=z.$from.pos,nt=z.$to.pos;i.doc.nodesBetween(Z,nt,(dt,Bt)=>{const Jt=Math.max(Bt,Z),Zt=Math.min(Bt+dt.nodeSize,nt);dt.marks.find(oe=>oe.type===k)?dt.marks.forEach(oe=>{k===oe.type&&n.addMark(Jt,Zt,k.create(Gt(Gt({},oe.attrs),t)))}):n.addMark(Jt,Zt,k.create(t))})});return function(e,t,n){var i;const{selection:u}=t;let h=null;if(x(u)&&(h=u.$cursor),h){const A=null!==(i=e.storedMarks)&&void 0!==i?i:h.marks();return!!n.isInSet(A)||!A.some(k=>k.type.excludes(n))}const{ranges:T}=u;return T.some(({$from:A,$to:k})=>{let z=0===A.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(A.pos,k.pos,(Z,nt,dt)=>{if(z)return!1;if(Z.isInline){const Bt=!dt||dt.type.allowsMarkType(n),Jt=!!n.isInSet(Z.marks)||!Z.marks.some(Zt=>Zt.type.excludes(n));z=Bt&&Jt}return!z}),z})}(i,n,k)},setMeta:(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),setNode:(e,t={})=>({state:n,dispatch:i,chain:u})=>{const h=U(e,n.schema);return h.isTextblock?u().command(({commands:T})=>!!kt(h,t)(n)||T.clearNodes()).command(({state:T})=>kt(h,t)(T,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:i}=t,u=L(e,0,i.content.size),h=v.qv.create(i,u);t.setSelection(h)}return!0},setTextSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:i}=t,{from:u,to:h}="number"==typeof e?{from:e,to:e}:e,T=v.Bs.atStart(i).from,A=v.Bs.atEnd(i).to,k=L(u,T,A),z=L(h,T,A),Z=v.Bs.create(i,k,z);t.setSelection(Z)}return!0},sinkListItem:e=>({state:t,dispatch:n})=>function(e){return function(t,n){let{$from:i,$to:u}=t.selection,h=i.blockRange(u,z=>z.childCount>0&&z.firstChild.type==e);if(!h)return!1;let T=h.startIndex;if(0==T)return!1;let A=h.parent,k=A.child(T-1);if(k.type!=e)return!1;if(n){let z=k.lastChild&&k.lastChild.type==A.type,Z=P.HY.from(z?e.create():null),nt=new P.p2(P.HY.from(e.create(null,P.HY.from(A.type.create(null,Z)))),z?3:1,0),dt=h.start,Bt=h.end;n(t.tr.step(new g.FC(dt-(z?3:1),Bt,dt,Bt,nt,1,!0)).scrollIntoView())}return!0}}(U(e,t.schema))(t,n),splitBlock:({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:i,editor:u})=>{const{selection:h,doc:T}=t,{$from:A,$to:k}=h,Z=Ln(u.extensionManager.attributes,A.node().type.name,A.node().attrs);if(h instanceof v.qv&&h.node.isBlock)return!(!A.parentOffset||!(0,g.Ax)(T,A.pos)||(i&&(e&&qn(n,u.extensionManager.splittableMarks),t.split(A.pos).scrollIntoView()),0));if(!A.parent.isBlock)return!1;if(i){const nt=k.parentOffset===k.parent.content.size;h instanceof v.Bs&&t.deleteSelection();const dt=0===A.depth?void 0:eo(A.node(-1).contentMatchAt(A.indexAfter(-1)));let Bt=nt&&dt?[{type:dt,attrs:Z}]:void 0,Jt=(0,g.Ax)(t.doc,t.mapping.map(A.pos),1,Bt);if(!Bt&&!Jt&&(0,g.Ax)(t.doc,t.mapping.map(A.pos),1,dt?[{type:dt}]:void 0)&&(Jt=!0,Bt=dt?[{type:dt,attrs:Z}]:void 0),Jt&&(t.split(t.mapping.map(A.pos),1,Bt),dt&&!nt&&!A.parentOffset&&A.parent.type!==dt)){const Zt=t.mapping.map(A.before()),Xt=t.doc.resolve(Zt);A.node(-1).canReplaceWith(Xt.index(),Xt.index()+1,dt)&&t.setNodeMarkup(t.mapping.map(A.before()),dt)}e&&qn(n,u.extensionManager.splittableMarks),t.scrollIntoView()}return!0},splitListItem:e=>({tr:t,state:n,dispatch:i,editor:u})=>{var h;const T=U(e,n.schema),{$from:A,$to:k}=n.selection,z=n.selection.node;if(z&&z.isBlock||A.depth<2||!A.sameParent(k))return!1;const Z=A.node(-1);if(Z.type!==T)return!1;const nt=u.extensionManager.attributes;if(0===A.parent.content.size&&A.node(-1).childCount===A.indexAfter(-1)){if(2===A.depth||A.node(-3).type!==T||A.index(-2)!==A.node(-2).childCount-1)return!1;if(i){let Xt=P.HY.empty;const oe=A.index(-1)?1:A.index(-2)?2:3;for(let bn=A.depth-oe;bn>=A.depth-3;bn-=1)Xt=P.HY.from(A.node(bn).copy(Xt));const Re=A.indexAfter(-1)<A.node(-2).childCount?1:A.indexAfter(-2)<A.node(-3).childCount?2:3,je=Ln(nt,A.node().type.name,A.node().attrs),le=(null===(h=T.contentMatch.defaultType)||void 0===h?void 0:h.createAndFill(je))||void 0;Xt=Xt.append(P.HY.from(T.createAndFill(null,le)||void 0));const Xe=A.before(A.depth-(oe-1));t.replace(Xe,A.after(-Re),new P.p2(Xt,4-oe,0));let yn=-1;t.doc.nodesBetween(Xe,t.doc.content.size,(bn,Vo)=>{if(yn>-1)return!1;bn.isTextblock&&0===bn.content.size&&(yn=Vo+1)}),yn>-1&&t.setSelection(v.Bs.near(t.doc.resolve(yn))),t.scrollIntoView()}return!0}const dt=k.pos===A.end()?Z.contentMatchAt(0).defaultType:null,Bt=Ln(nt,Z.type.name,Z.attrs),Jt=Ln(nt,A.node().type.name,A.node().attrs);t.delete(A.pos,k.pos);const Zt=dt?[{type:T,attrs:Bt},{type:dt,attrs:Jt}]:[{type:T,attrs:Bt}];if(!(0,g.Ax)(t.doc,A.pos,2))return!1;if(i){const{selection:Xt,storedMarks:oe}=n,{splittableMarks:Re}=u.extensionManager,je=oe||Xt.$to.parentOffset&&Xt.$from.marks();if(t.split(A.pos,2,Zt).scrollIntoView(),!je||!i)return!0;const le=je.filter(Xe=>Re.includes(Xe.type.name));t.ensureMarks(le)}return!0},toggleList:(e,t,n)=>({editor:i,tr:u,state:h,dispatch:T,chain:A,commands:k,can:z})=>{const{extensions:Z,splittableMarks:nt}=i.extensionManager,dt=U(e,h.schema),Bt=U(t,h.schema),{selection:Jt,storedMarks:Zt}=h,{$from:Xt,$to:oe}=Jt,Re=Xt.blockRange(oe),je=Zt||Jt.$to.parentOffset&&Jt.$from.marks();if(!Re)return!1;const le=wn(Xe=>un(Xe.type.name,Z))(Jt);if(Re.depth>=1&&le&&Re.depth-le.depth<=1){if(le.node.type===dt)return k.liftListItem(Bt);if(un(le.node.type.name,Z)&&dt.validContent(le.node.content)&&T)return A().command(()=>(u.setNodeMarkup(le.pos,dt),!0)).command(()=>gn(u,dt)).command(()=>Wn(u,dt)).run()}return n&&je&&T?A().command(()=>{const Xe=z().wrapInList(dt),yn=je.filter(bn=>nt.includes(bn.type.name));return u.ensureMarks(yn),!!Xe||k.clearNodes()}).wrapInList(dt).command(()=>gn(u,dt)).command(()=>Wn(u,dt)).run():A().command(()=>!!z().wrapInList(dt)||k.clearNodes()).wrapInList(dt).command(()=>gn(u,dt)).command(()=>Wn(u,dt)).run()},toggleMark:(e,t={},n={})=>({state:i,commands:u})=>{const{extendEmptyMarkRange:h=!1}=n,T=m(e,i.schema);return Mn(i,T,t)?u.unsetMark(T,{extendEmptyMarkRange:h}):u.setMark(T,t)},toggleNode:(e,t,n={})=>({state:i,commands:u})=>{const h=U(e,i.schema),T=U(t,i.schema);return pe(i,h,n)?u.setNode(T):u.setNode(h,n)},toggleWrap:(e,t={})=>({state:n,commands:i})=>{const u=U(e,n.schema);return pe(n,u,t)?i.lift(u):i.wrapIn(u,t)},undoInputRule:()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let i=0;i<n.length;i+=1){const u=n[i];let h;if(u.spec.isInputRules&&(h=u.getState(e))){if(t){const T=e.tr,A=h.transform;for(let k=A.steps.length-1;k>=0;k-=1)T.step(A.steps[k].invert(A.docs[k]));if(h.text){const k=T.doc.resolve(h.from).marks();T.replaceWith(h.from,h.to,e.schema.text(h.text,k))}else T.delete(h.from,h.to)}return!0}}return!1},unsetAllMarks:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:i,ranges:u}=n;return i||t&&u.forEach(h=>{e.removeMark(h.$from.pos,h.$to.pos)}),!0},unsetMark:(e,t={})=>({tr:n,state:i,dispatch:u})=>{var h;const{extendEmptyMarkRange:T=!1}=t,{selection:A}=n,k=m(e,i.schema),{$from:z,empty:Z,ranges:nt}=A;if(!u)return!0;if(Z&&T){let{from:dt,to:Bt}=A;const Jt=null===(h=z.marks().find(Xt=>Xt.type===k))||void 0===h?void 0:h.attrs,Zt=C(z,k,Jt);Zt&&(dt=Zt.from,Bt=Zt.to),n.removeMark(dt,Bt,k)}else nt.forEach(dt=>{n.removeMark(dt.$from.pos,dt.$to.pos,k)});return n.removeStoredMark(k),!0},updateAttributes:(e,t={})=>({tr:n,state:i,dispatch:u})=>{let h=null,T=null;const A=ln("string"==typeof e?e:e.name,i.schema);return!!A&&("node"===A&&(h=U(e,i.schema)),"mark"===A&&(T=m(e,i.schema)),u&&n.selection.ranges.forEach(k=>{const z=k.$from.pos,Z=k.$to.pos;i.doc.nodesBetween(z,Z,(nt,dt)=>{h&&h===nt.type&&n.setNodeMarkup(dt,void 0,Gt(Gt({},nt.attrs),t)),T&&nt.marks.length&&nt.marks.forEach(Bt=>{if(T===Bt.type){const Jt=Math.max(dt,z),Zt=Math.min(dt+nt.nodeSize,Z);n.addMark(Jt,Zt,T.create(Gt(Gt({},Bt.attrs),t)))}})})}),!0)},wrapIn:(e,t={})=>({state:n,dispatch:i})=>function(e,t=null){return function(n,i){let{$from:u,$to:h}=n.selection,T=u.blockRange(h),A=T&&(0,g.nd)(T,e,t);return!!A&&(i&&i(n.tr.wrap(T,A).scrollIntoView()),!0)}}(U(e,n.schema),t)(n,i),wrapInList:(e,t={})=>({state:n,dispatch:i})=>function(e,t=null){return function(n,i){let{$from:u,$to:h}=n.selection,T=u.blockRange(h),A=!1,k=T;if(!T)return!1;if(T.depth>=2&&u.node(T.depth-1).type.compatibleContent(e)&&0==T.startIndex){if(0==u.index(T.depth-1))return!1;let Z=n.doc.resolve(T.start-2);k=new P.Ts(Z,Z,T.depth),T.endIndex<T.parent.childCount&&(T=new P.Ts(u,n.doc.resolve(h.end(T.depth)),T.depth)),A=!0}let z=(0,g.nd)(k,e,t,T);return!!z&&(i&&i(function(e,t,n,i,u){let h=P.HY.empty;for(let Z=n.length-1;Z>=0;Z--)h=P.HY.from(n[Z].type.create(n[Z].attrs,h));e.step(new g.FC(t.start-(i?2:0),t.end,t.start,t.end,new P.p2(h,0,0),n.length,!0));let T=0;for(let Z=0;Z<n.length;Z++)n[Z].type==u&&(T=Z+1);let A=n.length-T,k=t.start+n.length-(i?2:0),z=t.parent;for(let Z=t.startIndex,nt=t.endIndex,dt=!0;Z<nt;Z++,dt=!1)!dt&&(0,g.Ax)(e.doc,k,A)&&(e.split(k,A),k+=2*A),k+=z.child(Z).nodeSize;return e}(n.tr,T,z,A,e).scrollIntoView()),!0)}}(U(e,n.schema),t)(n,i)});const So=ce.create({name:"commands",addCommands:()=>Gt({},Po)}),Io=ce.create({name:"editable",addProseMirrorPlugins(){return[new v.Sy({key:new v.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),ko=ce.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new v.Sy({key:new v.H$("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const i=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1},blur:(t,n)=>{e.isFocused=!1;const i=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1}}}})]}}),co=ce.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:T})=>[()=>T.undoInputRule(),()=>T.command(({tr:A})=>{const{selection:k,doc:z}=A,{empty:Z,$anchor:nt}=k,{pos:dt,parent:Bt}=nt,Jt=v.Y1.atStart(z).from===dt;return!(!(Z&&Jt&&Bt.type.isTextblock)||Bt.textContent.length)&&T.clearNodes()}),()=>T.deleteSelection(),()=>T.joinBackward(),()=>T.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:T})=>[()=>T.deleteSelection(),()=>T.deleteCurrentNode(),()=>T.joinForward(),()=>T.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:T})=>[()=>T.newlineInCode(),()=>T.createParagraphNear(),()=>T.liftEmptyBlock(),()=>T.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},u=Gt({},i),h=me(Gt({},i),{"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return W()||De()?h:u},addProseMirrorPlugins(){return[new v.Sy({key:new v.H$("clearDocument"),appendTransaction:(e,t,n)=>{if(!e.some(Jt=>Jt.docChanged)||t.doc.eq(n.doc))return;const{empty:u,from:h,to:T}=t.selection,A=v.Y1.atStart(t.doc).from,k=v.Y1.atEnd(t.doc).to,z=h===A&&T===k,Z=0===n.doc.textBetween(0,n.doc.content.size," "," ").length;if(u||!z||!Z)return;const nt=n.tr,dt=gt({state:n,transaction:nt}),{commands:Bt}=new b({editor:this.editor,state:dt});return Bt.clearNodes(),nt.steps.length?nt:void 0}})]}}),wo=ce.create({name:"tabindex",addProseMirrorPlugins(){return[new v.Sy({key:new v.H$("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var uo=Object.freeze({__proto__:null,ClipboardTextSerializer:an,Commands:So,Editable:Io,FocusEvents:ko,Keymap:co,Tabindex:wo});function po(e,t){const n=document.querySelector("style[data-tiptap-style]");if(null!==n)return n;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}class Fo extends class{constructor(){this.callbacks={}}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),this}emit(t,...n){const i=this.callbacks[t];return i&&i.forEach(u=>u.apply(this,n)),this}off(t,n){const i=this.callbacks[t];return i&&(n?this.callbacks[t]=i.filter(u=>u!==n):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=po('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(t={}){this.options=Gt(Gt({},this.options),t),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,n=!0){this.setOptions({editable:t}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,n){const i=H(n)?n(t,[...this.state.plugins]):[...this.state.plugins,t],u=this.state.reconfigure({plugins:i});this.view.updateState(u)}unregisterPlugin(t){if(this.isDestroyed)return;const n="string"==typeof t?`${t}$`:t.key,i=this.state.reconfigure({plugins:this.state.plugins.filter(u=>!u.key.startsWith(n))});this.view.updateState(i)}createExtensionManager(){const n=[...this.options.enableCoreExtensions?Object.values(uo):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(null==i?void 0:i.type));this.extensionManager=new ne(n,this)}createCommandManager(){this.commandManager=new b({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=tn(this.options.content,this.schema,this.options.parseOptions),n=Y(t,this.options.autofocus);this.view=new l.tk(this.options.element,me(Gt({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:v.yy.create({doc:t,selection:n||void 0})}));const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach(T=>{var A;return null===(A=this.capturedTransaction)||void 0===A?void 0:A.step(T)}):void(this.capturedTransaction=t);const n=this.state.apply(t),i=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),i&&this.emit("selectionUpdate",{editor:this,transaction:t});const u=t.getMeta("focus"),h=t.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:t}),h&&this.emit("blur",{editor:this,event:h.event,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return ro(this.state,t)}isActive(t,n){return $n(this.state,"string"==typeof t?t:null,"string"==typeof t?n:t)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Fn(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:n="\n\n",textSerializers:i={}}=t||{};return Jn(this.state.doc,{blockSeparator:n,textSerializers:Gt(Gt({},We(this.schema)),i)})}get isEmpty(){return Zn(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}}function Ko(e){return new ke({find:e.find,handler:({state:t,range:n,match:i})=>{const u=a(e.getAttributes,void 0,i);if(!1===u||null===u)return null;const{tr:h}=t,T=i[i.length-1],A=i[0];let k=n.to;if(T){const z=A.search(/\S/),Z=n.from+A.indexOf(T),nt=Z+T.length;if(Xn(n.from,n.to,t.doc).filter(Bt=>Bt.mark.type.excluded.find(Zt=>Zt===e.type&&Zt!==Bt.mark.type)).filter(Bt=>Bt.to>Z).length)return null;nt<n.to&&h.delete(nt,n.to),Z>n.from&&h.delete(n.from+z,Z),k=n.from+z+T.length,h.addMark(n.from+z,k,e.type.create(u||{})),h.removeStoredMark(e.type)}}})}function Jo(e){return new ke({find:e.find,handler:({state:t,range:n,match:i})=>{const u=a(e.getAttributes,void 0,i)||{},{tr:h}=t,T=n.from;let A=n.to;if(i[1]){let z=T+i[0].lastIndexOf(i[1]);z>A?z=A:A=z+i[1].length,h.insertText(i[0][i[0].length-1],T+i[0].length-1),h.replaceWith(z,A,e.type.create(u))}else i[0]&&h.replaceWith(T,A,e.type.create(u))}})}function Ro(e){return new ke({find:e.find,handler:({state:t,range:n,match:i})=>{const u=t.doc.resolve(n.from),h=a(e.getAttributes,void 0,i)||{};if(!u.node(-1).canReplaceWith(u.index(-1),u.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,h)}})}function ho(e){return new ke({find:e.find,handler:({state:t,range:n,match:i})=>{let u=e.replace,h=n.from;const T=n.to;if(i[1]){const A=i[0].lastIndexOf(i[1]);u+=i[0].slice(A+i[1].length),h+=A;const k=h-T;k>0&&(u=i[0].slice(A-k,A)+u,h=T)}t.tr.insertText(u,h,T)}})}function fo(e){return new ke({find:e.find,handler:({state:t,range:n,match:i,chain:u})=>{const h=a(e.getAttributes,void 0,i)||{},T=t.tr.delete(n.from,n.to),k=T.doc.resolve(n.from).blockRange(),z=k&&(0,g.nd)(k,e.type,h);if(!z)return null;if(T.wrap(k,z),e.keepMarks&&e.editor){const{selection:nt,storedMarks:dt}=t,{splittableMarks:Bt}=e.editor.extensionManager,Jt=dt||nt.$to.parentOffset&&nt.$from.marks();if(Jt){const Zt=Jt.filter(Xt=>Bt.includes(Xt.type.name));T.ensureMarks(Zt)}}if(e.keepAttributes){const nt="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";u().updateAttributes(nt,h).run()}const Z=T.doc.resolve(n.from-1).nodeBefore;Z&&Z.type===e.type&&(0,g.Mn)(T.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(i,Z))&&T.join(n.from-1)}})}class Nn{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Gt(Gt({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(I(this,"addOptions",{name:this.name}))),this.storage=a(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Nn(t)}configure(t={}){const n=this.extend();return n.options=ae(this.options,t),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new Nn(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=a(I(n,"addOptions",{name:n.name})),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:t,mark:n}){const{tr:i}=t.state,u=t.state.selection.$from;if(u.pos===u.end()){const T=u.marks();if(!T.find(z=>(null==z?void 0:z.type.name)===n.name))return!1;const k=T.find(z=>(null==z?void 0:z.type.name)===n.name);return k&&i.removeStoredMark(k),i.insertText(" ",u.pos),t.view.dispatch(i),!0}return!1}}class jn{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Gt(Gt({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(I(this,"addOptions",{name:this.name}))),this.storage=a(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new jn(t)}configure(t={}){const n=this.extend();return n.options=ae(this.options,t),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new jn(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=a(I(n,"addOptions",{name:n.name})),n.storage=a(I(n,"addStorage",{name:n.name,options:n.options})),n}}class mo{constructor(t,n,i){this.isDragging=!1,this.component=t,this.editor=n.editor,this.options=Gt({stopEvent:null,ignoreMutation:null},i),this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var n,i,u,h,T,A,k;const{view:z}=this.editor,Z=t.target,nt=3===Z.nodeType?null===(n=Z.parentElement)||void 0===n?void 0:n.closest("[data-drag-handle]"):Z.closest("[data-drag-handle]");if(!this.dom||(null===(i=this.contentDOM)||void 0===i?void 0:i.contains(Z))||!nt)return;let dt=0,Bt=0;if(this.dom!==nt){const Xt=this.dom.getBoundingClientRect(),oe=nt.getBoundingClientRect(),Re=null!==(u=t.offsetX)&&void 0!==u?u:null===(h=t.nativeEvent)||void 0===h?void 0:h.offsetX,je=null!==(T=t.offsetY)&&void 0!==T?T:null===(A=t.nativeEvent)||void 0===A?void 0:A.offsetY;dt=oe.x-Xt.x+Re,Bt=oe.y-Xt.y+je}null===(k=t.dataTransfer)||void 0===k||k.setDragImage(this.dom,dt,Bt);const Jt=v.qv.create(z.state.doc,this.getPos()),Zt=z.state.tr.setSelection(Jt);z.dispatch(Zt)}stopEvent(t){var n;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:t});const i=t.target;if(!this.dom.contains(i)||(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(i)))return!1;const h=t.type.startsWith("drag"),T="drop"===t.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(i.tagName)||i.isContentEditable)&&!T&&!h)return!0;const{isEditable:k}=this.editor,{isDragging:z}=this,Z=!!this.node.type.spec.draggable,nt=v.qv.isSelectable(this.node),dt="copy"===t.type,Bt="paste"===t.type,Jt="cut"===t.type,Zt="mousedown"===t.type;if(!Z&&nt&&h&&t.preventDefault(),Z&&h&&!z)return t.preventDefault(),!1;if(Z&&k&&!z&&Zt){const Xt=i.closest("[data-drag-handle]");Xt&&(this.dom===Xt||this.dom.contains(Xt))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(z||T||dt||Bt||Jt||Zt&&nt)}ignoreMutation(t){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:t}):!(!this.node.isLeaf&&!this.node.isAtom&&("selection"===t.type||this.dom.contains(t.target)&&"childList"===t.type&&W()&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(i=>i.isContentEditable)||(this.contentDOM!==t.target||"attributes"!==t.type)&&this.contentDOM.contains(t.target))))}updateAttributes(t){this.editor.commands.command(({tr:n})=>{const i=this.getPos();return n.setNodeMarkup(i,void 0,Gt(Gt({},this.node.attrs),t)),!0})}deleteNode(){const t=this.getPos();this.editor.commands.deleteRange({from:t,to:t+this.node.nodeSize})}}function Lo(e){return new Ct({find:e.find,handler:({state:t,range:n,match:i})=>{const u=a(e.getAttributes,void 0,i);if(!1===u||null===u)return null;const{tr:h}=t,T=i[i.length-1],A=i[0];let k=n.to;if(T){const z=A.search(/\S/),Z=n.from+A.indexOf(T),nt=Z+T.length;if(Xn(n.from,n.to,t.doc).filter(Bt=>Bt.mark.type.excluded.find(Zt=>Zt===e.type&&Zt!==Bt.mark.type)).filter(Bt=>Bt.to>Z).length)return null;nt<n.to&&h.delete(nt,n.to),Z>n.from&&h.delete(n.from+z,Z),k=n.from+z+T.length,h.addMark(n.from+z,k,e.type.create(u||{})),h.removeStoredMark(e.type)}}})}function go(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function r(e){return"string"==typeof e}function o(e){return new Ct({find:e.find,handler({match:t,chain:n,range:i}){const u=a(e.getAttributes,void 0,t);if(!1===u||null===u)return null;t.input&&n().deleteRange(i).insertContentAt(i.from,{type:e.type.name,attrs:u})}})}function s(e){return new Ct({find:e.find,handler:({state:t,range:n,match:i})=>{let u=e.replace,h=n.from;const T=n.to;if(i[1]){const A=i[0].lastIndexOf(i[1]);u+=i[0].slice(A+i[1].length),h+=A;const k=h-T;k>0&&(u=i[0].slice(A-k,A)+u,h=T)}t.tr.insertText(u,h,T)}})}class d{constructor(t){this.transaction=t,this.currentStep=this.transaction.steps.length}map(t){let n=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((u,h)=>{const T=h.getMap().mapResult(u);return T.deleted&&(n=!0),T.pos},t),deleted:n}}}},44632:(jt,Mt,c)=>{c.r(Mt),c.d(Mt,{Image:()=>y,default:()=>y,inputRegex:()=>l});var v=c(12867);const l=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,y=v.Node.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:P}){return["img",(0,v.mergeAttributes)(this.options.HTMLAttributes,P)]},addCommands(){return{setImage:P=>({commands:g})=>g.insertContent({type:this.name,attrs:P})}},addInputRules(){return[(0,v.nodeInputRule)({find:l,type:this.type,getAttributes:P=>{const[,,g,it,N]=P;return{src:it,alt:g,title:N}}})]}})},84402:(jt,Mt,c)=>{c.r(Mt),c.d(Mt,{TextStyle:()=>l,default:()=>l});var v=c(12867);const l=v.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:y=>!!y.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:y}){return["span",(0,v.mergeAttributes)(this.options.HTMLAttributes,y),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:y,commands:P})=>{const g=(0,v.getMarkAttributes)(y,this.type);return!!Object.entries(g).some(([,N])=>!!N)||P.unsetMark(this.name)}}}})},70768:(jt,Mt,c)=>{c.d(Mt,{$:()=>Pt,h:()=>It});for(var v={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},y="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),g=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),it="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),N=g||y&&+y[1]<57,X=0;X<10;X++)v[48+X]=v[96+X]=String(X);for(X=1;X<=24;X++)v[X+111]="F"+X;for(X=65;X<=90;X++)v[X]=String.fromCharCode(X+32),l[X]=String.fromCharCode(X);for(var tt in v)l.hasOwnProperty(tt)||(l[tt]=v[tt]);var ut=c(62463);const et="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function _t(Dt){let F,mt,j,At,ht=Dt.split(/-(?!$)/),q=ht[ht.length-1];"Space"==q&&(q=" ");for(let St=0;St<ht.length-1;St++){let Et=ht[St];if(/^(cmd|meta|m)$/i.test(Et))At=!0;else if(/^a(lt)?$/i.test(Et))F=!0;else if(/^(c|ctrl|control)$/i.test(Et))mt=!0;else if(/^s(hift)?$/i.test(Et))j=!0;else{if(!/^mod$/i.test(Et))throw new Error("Unrecognized modifier name: "+Et);et?At=!0:mt=!0}}return F&&(q="Alt-"+q),mt&&(q="Ctrl-"+q),At&&(q="Meta-"+q),j&&(q="Shift-"+q),q}function bt(Dt,ht,q=!0){return ht.altKey&&(Dt="Alt-"+Dt),ht.ctrlKey&&(Dt="Ctrl-"+Dt),ht.metaKey&&(Dt="Meta-"+Dt),q&&ht.shiftKey&&(Dt="Shift-"+Dt),Dt}function It(Dt){return new ut.Sy({props:{handleKeyDown:Pt(Dt)}})}function Pt(Dt){let ht=function(Dt){let ht=Object.create(null);for(let q in Dt)ht[_t(q)]=Dt[q];return ht}(Dt);return function(q,F){let j,mt=function(Dt){var q=!(N&&(Dt.ctrlKey||Dt.altKey||Dt.metaKey)||it&&Dt.shiftKey&&Dt.key&&1==Dt.key.length||"Unidentified"==Dt.key)&&Dt.key||(Dt.shiftKey?l:v)[Dt.keyCode]||Dt.key||"Unidentified";return"Esc"==q&&(q="Escape"),"Del"==q&&(q="Delete"),"Left"==q&&(q="ArrowLeft"),"Up"==q&&(q="ArrowUp"),"Right"==q&&(q="ArrowRight"),"Down"==q&&(q="ArrowDown"),q}(F),At=ht[bt(mt,F)];if(At&&At(q.state,q.dispatch,q))return!0;if(1==mt.length&&" "!=mt){if(F.shiftKey){let St=ht[bt(mt,F,!1)];if(St&&St(q.state,q.dispatch,q))return!0}if((F.shiftKey||F.altKey||F.metaKey||mt.charCodeAt(0)>127)&&(j=v[F.keyCode])&&j!=mt){let St=ht[bt(j,F)];if(St&&St(q.state,q.dispatch,q))return!0}}return!1}}},77346:(jt,Mt,c)=>{function v(H){this.content=H}c.d(Mt,{aw:()=>Me,PW:()=>U,HY:()=>g,vc:()=>tt,ZU:()=>ve,NB:()=>pt,Ts:()=>Ht,e4:()=>ft,V_:()=>Pe,p2:()=>ut}),v.prototype={constructor:v,find:function(H){for(var a=0;a<this.content.length;a+=2)if(this.content[a]===H)return a;return-1},get:function(H){var a=this.find(H);return-1==a?void 0:this.content[a+1]},update:function(H,a,p){var E=p&&p!=H?this.remove(p):this,D=E.find(H),w=E.content.slice();return-1==D?w.push(p||H,a):(w[D+1]=a,p&&(w[D]=p)),new v(w)},remove:function(H){var a=this.find(H);if(-1==a)return this;var p=this.content.slice();return p.splice(a,2),new v(p)},addToStart:function(H,a){return new v([H,a].concat(this.remove(H).content))},addToEnd:function(H,a){var p=this.remove(H).content.slice();return p.push(H,a),new v(p)},addBefore:function(H,a,p){var E=this.remove(a),D=E.content.slice(),w=E.find(H);return D.splice(-1==w?D.length:w,0,a,p),new v(D)},forEach:function(H){for(var a=0;a<this.content.length;a+=2)H(this.content[a],this.content[a+1])},prepend:function(H){return(H=v.from(H)).size?new v(H.content.concat(this.subtract(H).content)):this},append:function(H){return(H=v.from(H)).size?new v(this.subtract(H).content.concat(H.content)):this},subtract:function(H){var a=this;H=v.from(H);for(var p=0;p<H.content.length;p+=2)a=a.remove(H.content[p]);return a},toObject:function(){var H={};return this.forEach(function(a,p){H[a]=p}),H},get size(){return this.content.length>>1}},v.from=function(H){if(H instanceof v)return H;var a=[];if(H)for(var p in H)a.push(p,H[p]);return new v(a)};const l=v;function y(H,a,p){for(let E=0;;E++){if(E==H.childCount||E==a.childCount)return H.childCount==a.childCount?null:p;let D=H.child(E),w=a.child(E);if(D!=w){if(!D.sameMarkup(w))return p;if(D.isText&&D.text!=w.text){for(let K=0;D.text[K]==w.text[K];K++)p++;return p}if(D.content.size||w.content.size){let K=y(D.content,w.content,p+1);if(null!=K)return K}p+=D.nodeSize}else p+=D.nodeSize}}function P(H,a,p,E){for(let D=H.childCount,w=a.childCount;;){if(0==D||0==w)return D==w?null:{a:p,b:E};let K=H.child(--D),lt=a.child(--w),Rt=K.nodeSize;if(K!=lt){if(!K.sameMarkup(lt))return{a:p,b:E};if(K.isText&&K.text!=lt.text){let qt=0,te=Math.min(K.text.length,lt.text.length);for(;qt<te&&K.text[K.text.length-qt-1]==lt.text[lt.text.length-qt-1];)qt++,p--,E--;return{a:p,b:E}}if(K.content.size||lt.content.size){let qt=P(K.content,lt.content,p-1,E-1);if(qt)return qt}p-=Rt,E-=Rt}else p-=Rt,E-=Rt}}class g{constructor(a,p){if(this.content=a,this.size=p||0,null==p)for(let E=0;E<a.length;E++)this.size+=a[E].nodeSize}nodesBetween(a,p,E,D=0,w){for(let K=0,lt=0;lt<p;K++){let Rt=this.content[K],qt=lt+Rt.nodeSize;if(qt>a&&!1!==E(Rt,D+lt,w||null,K)&&Rt.content.size){let te=lt+1;Rt.nodesBetween(Math.max(0,a-te),Math.min(Rt.content.size,p-te),E,D+te)}lt=qt}}descendants(a){this.nodesBetween(0,this.size,a)}textBetween(a,p,E,D){let w="",K=!0;return this.nodesBetween(a,p,(lt,Rt)=>{lt.isText?(w+=lt.text.slice(Math.max(a,Rt)-Rt,p-Rt),K=!E):lt.isLeaf?(D?w+="function"==typeof D?D(lt):D:lt.type.spec.leafText&&(w+=lt.type.spec.leafText(lt)),K=!E):!K&&lt.isBlock&&(w+=E,K=!0)},0),w}append(a){if(!a.size)return this;if(!this.size)return a;let p=this.lastChild,E=a.firstChild,D=this.content.slice(),w=0;for(p.isText&&p.sameMarkup(E)&&(D[D.length-1]=p.withText(p.text+E.text),w=1);w<a.content.length;w++)D.push(a.content[w]);return new g(D,this.size+a.size)}cut(a,p=this.size){if(0==a&&p==this.size)return this;let E=[],D=0;if(p>a)for(let w=0,K=0;K<p;w++){let lt=this.content[w],Rt=K+lt.nodeSize;Rt>a&&((K<a||Rt>p)&&(lt=lt.isText?lt.cut(Math.max(0,a-K),Math.min(lt.text.length,p-K)):lt.cut(Math.max(0,a-K-1),Math.min(lt.content.size,p-K-1))),E.push(lt),D+=lt.nodeSize),K=Rt}return new g(E,D)}cutByIndex(a,p){return a==p?g.empty:0==a&&p==this.content.length?this:new g(this.content.slice(a,p))}replaceChild(a,p){let E=this.content[a];if(E==p)return this;let D=this.content.slice(),w=this.size+p.nodeSize-E.nodeSize;return D[a]=p,new g(D,w)}addToStart(a){return new g([a].concat(this.content),this.size+a.nodeSize)}addToEnd(a){return new g(this.content.concat(a),this.size+a.nodeSize)}eq(a){if(this.content.length!=a.content.length)return!1;for(let p=0;p<this.content.length;p++)if(!this.content[p].eq(a.content[p]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(a){let p=this.content[a];if(!p)throw new RangeError("Index "+a+" out of range for "+this);return p}maybeChild(a){return this.content[a]||null}forEach(a){for(let p=0,E=0;p<this.content.length;p++){let D=this.content[p];a(D,E,p),E+=D.nodeSize}}findDiffStart(a,p=0){return y(this,a,p)}findDiffEnd(a,p=this.size,E=a.size){return P(this,a,p,E)}findIndex(a,p=-1){if(0==a)return N(0,a);if(a==this.size)return N(this.content.length,a);if(a>this.size||a<0)throw new RangeError(`Position ${a} outside of fragment (${this})`);for(let E=0,D=0;;E++){let K=D+this.child(E).nodeSize;if(K>=a)return K==a||p>0?N(E+1,K):N(E,D);D=K}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(a=>a.toJSON()):null}static fromJSON(a,p){if(!p)return g.empty;if(!Array.isArray(p))throw new RangeError("Invalid input for Fragment.fromJSON");return new g(p.map(a.nodeFromJSON))}static fromArray(a){if(!a.length)return g.empty;let p,E=0;for(let D=0;D<a.length;D++){let w=a[D];E+=w.nodeSize,D&&w.isText&&a[D-1].sameMarkup(w)?(p||(p=a.slice(0,D)),p[p.length-1]=w.withText(p[p.length-1].text+w.text)):p&&p.push(w)}return new g(p||a,E)}static from(a){if(!a)return g.empty;if(a instanceof g)return a;if(Array.isArray(a))return this.fromArray(a);if(a.attrs)return new g([a],a.nodeSize);throw new RangeError("Can not convert "+a+" to a Fragment"+(a.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}g.empty=new g([],0);const it={index:0,offset:0};function N(H,a){return it.index=H,it.offset=a,it}function X(H,a){if(H===a)return!0;if(!H||"object"!=typeof H||!a||"object"!=typeof a)return!1;let p=Array.isArray(H);if(Array.isArray(a)!=p)return!1;if(p){if(H.length!=a.length)return!1;for(let E=0;E<H.length;E++)if(!X(H[E],a[E]))return!1}else{for(let E in H)if(!(E in a)||!X(H[E],a[E]))return!1;for(let E in a)if(!(E in H))return!1}return!0}let tt=(()=>{class H{constructor(p,E){this.type=p,this.attrs=E}addToSet(p){let E,D=!1;for(let w=0;w<p.length;w++){let K=p[w];if(this.eq(K))return p;if(this.type.excludes(K.type))E||(E=p.slice(0,w));else{if(K.type.excludes(this.type))return p;!D&&K.type.rank>this.type.rank&&(E||(E=p.slice(0,w)),E.push(this),D=!0),E&&E.push(K)}}return E||(E=p.slice()),D||E.push(this),E}removeFromSet(p){for(let E=0;E<p.length;E++)if(this.eq(p[E]))return p.slice(0,E).concat(p.slice(E+1));return p}isInSet(p){for(let E=0;E<p.length;E++)if(this.eq(p[E]))return!0;return!1}eq(p){return this==p||this.type==p.type&&X(this.attrs,p.attrs)}toJSON(){let p={type:this.type.name};for(let E in this.attrs){p.attrs=this.attrs;break}return p}static fromJSON(p,E){if(!E)throw new RangeError("Invalid input for Mark.fromJSON");let D=p.marks[E.type];if(!D)throw new RangeError(`There is no mark type ${E.type} in this schema`);return D.create(E.attrs)}static sameSet(p,E){if(p==E)return!0;if(p.length!=E.length)return!1;for(let D=0;D<p.length;D++)if(!p[D].eq(E[D]))return!1;return!0}static setFrom(p){if(!p||Array.isArray(p)&&0==p.length)return H.none;if(p instanceof H)return[p];let E=p.slice();return E.sort((D,w)=>D.type.rank-w.type.rank),E}}return H.none=[],H})();class ft extends Error{}class ut{constructor(a,p,E){this.content=a,this.openStart=p,this.openEnd=E}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(a,p){let E=_t(this.content,a+this.openStart,p);return E&&new ut(E,this.openStart,this.openEnd)}removeBetween(a,p){return new ut(et(this.content,a+this.openStart,p+this.openStart),this.openStart,this.openEnd)}eq(a){return this.content.eq(a.content)&&this.openStart==a.openStart&&this.openEnd==a.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let a={content:this.content.toJSON()};return this.openStart>0&&(a.openStart=this.openStart),this.openEnd>0&&(a.openEnd=this.openEnd),a}static fromJSON(a,p){if(!p)return ut.empty;let E=p.openStart||0,D=p.openEnd||0;if("number"!=typeof E||"number"!=typeof D)throw new RangeError("Invalid input for Slice.fromJSON");return new ut(g.fromJSON(a,p.content),E,D)}static maxOpen(a,p=!0){let E=0,D=0;for(let w=a.firstChild;w&&!w.isLeaf&&(p||!w.type.spec.isolating);w=w.firstChild)E++;for(let w=a.lastChild;w&&!w.isLeaf&&(p||!w.type.spec.isolating);w=w.lastChild)D++;return new ut(a,E,D)}}function et(H,a,p){let{index:E,offset:D}=H.findIndex(a),w=H.maybeChild(E),{index:K,offset:lt}=H.findIndex(p);if(D==a||w.isText){if(lt!=p&&!H.child(K).isText)throw new RangeError("Removing non-flat range");return H.cut(0,a).append(H.cut(p))}if(E!=K)throw new RangeError("Removing non-flat range");return H.replaceChild(E,w.copy(et(w.content,a-D-1,p-D-1)))}function _t(H,a,p,E){let{index:D,offset:w}=H.findIndex(a),K=H.maybeChild(D);if(w==a||K.isText)return E&&!E.canReplace(D,D,p)?null:H.cut(0,a).append(p).append(H.cut(a));let lt=_t(K.content,a-w-1,p);return lt&&H.replaceChild(D,K.copy(lt))}function Tt(H,a,p){if(p.openStart>H.depth)throw new ft("Inserted content deeper than insertion position");if(H.depth-p.openStart!=a.depth-p.openEnd)throw new ft("Inconsistent open depths");return bt(H,a,p,0)}function bt(H,a,p,E){let D=H.index(E),w=H.node(E);if(D==a.index(E)&&E<H.depth-p.openStart){let K=bt(H,a,p,E+1);return w.copy(w.content.replaceChild(D,K))}if(p.content.size){if(p.openStart||p.openEnd||H.depth!=E||a.depth!=E){let{start:K,end:lt}=function(H,a){let p=a.depth-H.openStart,D=a.node(p).copy(H.content);for(let w=p-1;w>=0;w--)D=a.node(w).copy(g.from(D));return{start:D.resolveNoCache(H.openStart+p),end:D.resolveNoCache(D.content.size-H.openEnd-p)}}(p,H);return q(w,F(H,K,lt,a,E))}{let K=H.parent,lt=K.content;return q(K,lt.cut(0,H.parentOffset).append(p.content).append(lt.cut(a.parentOffset)))}}return q(w,mt(H,a,E))}function It(H,a){if(!a.type.compatibleContent(H.type))throw new ft("Cannot join "+a.type.name+" onto "+H.type.name)}function Pt(H,a,p){let E=H.node(p);return It(E,a.node(p)),E}function Dt(H,a){let p=a.length-1;p>=0&&H.isText&&H.sameMarkup(a[p])?a[p]=H.withText(a[p].text+H.text):a.push(H)}function ht(H,a,p,E){let D=(a||H).node(p),w=0,K=a?a.index(p):D.childCount;H&&(w=H.index(p),H.depth>p?w++:H.textOffset&&(Dt(H.nodeAfter,E),w++));for(let lt=w;lt<K;lt++)Dt(D.child(lt),E);a&&a.depth==p&&a.textOffset&&Dt(a.nodeBefore,E)}function q(H,a){return H.type.checkContent(a),H.copy(a)}function F(H,a,p,E,D){let w=H.depth>D&&Pt(H,a,D+1),K=E.depth>D&&Pt(p,E,D+1),lt=[];return ht(null,H,D,lt),w&&K&&a.index(D)==p.index(D)?(It(w,K),Dt(q(w,F(H,a,p,E,D+1)),lt)):(w&&Dt(q(w,mt(H,a,D+1)),lt),ht(a,p,D,lt),K&&Dt(q(K,mt(p,E,D+1)),lt)),ht(E,null,D,lt),new g(lt)}function mt(H,a,p){let E=[];return ht(null,H,p,E),H.depth>p&&Dt(q(Pt(H,a,p+1),mt(H,a,p+1)),E),ht(a,null,p,E),new g(E)}ut.empty=new ut(g.empty,0,0);class At{constructor(a,p,E){this.pos=a,this.path=p,this.parentOffset=E,this.depth=p.length/3-1}resolveDepth(a){return null==a?this.depth:a<0?this.depth+a:a}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(a){return this.path[3*this.resolveDepth(a)]}index(a){return this.path[3*this.resolveDepth(a)+1]}indexAfter(a){return a=this.resolveDepth(a),this.index(a)+(a!=this.depth||this.textOffset?1:0)}start(a){return 0==(a=this.resolveDepth(a))?0:this.path[3*a-1]+1}end(a){return a=this.resolveDepth(a),this.start(a)+this.node(a).content.size}before(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position before the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]}after(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position after the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]+this.path[3*a].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let a=this.parent,p=this.index(this.depth);if(p==a.childCount)return null;let E=this.pos-this.path[this.path.length-1],D=a.child(p);return E?a.child(p).cut(E):D}get nodeBefore(){let a=this.index(this.depth),p=this.pos-this.path[this.path.length-1];return p?this.parent.child(a).cut(0,p):0==a?null:this.parent.child(a-1)}posAtIndex(a,p){p=this.resolveDepth(p);let E=this.path[3*p],D=0==p?0:this.path[3*p-1]+1;for(let w=0;w<a;w++)D+=E.child(w).nodeSize;return D}marks(){let a=this.parent,p=this.index();if(0==a.content.size)return tt.none;if(this.textOffset)return a.child(p).marks;let E=a.maybeChild(p-1),D=a.maybeChild(p);if(!E){let lt=E;E=D,D=lt}let w=E.marks;for(var K=0;K<w.length;K++)!1===w[K].type.spec.inclusive&&(!D||!w[K].isInSet(D.marks))&&(w=w[K--].removeFromSet(w));return w}marksAcross(a){let p=this.parent.maybeChild(this.index());if(!p||!p.isInline)return null;let E=p.marks,D=a.parent.maybeChild(a.index());for(var w=0;w<E.length;w++)!1===E[w].type.spec.inclusive&&(!D||!E[w].isInSet(D.marks))&&(E=E[w--].removeFromSet(E));return E}sharedDepth(a){for(let p=this.depth;p>0;p--)if(this.start(p)<=a&&this.end(p)>=a)return p;return 0}blockRange(a=this,p){if(a.pos<this.pos)return a.blockRange(this);for(let E=this.depth-(this.parent.inlineContent||this.pos==a.pos?1:0);E>=0;E--)if(a.pos<=this.end(E)&&(!p||p(this.node(E))))return new Ht(this,a,E);return null}sameParent(a){return this.pos-this.parentOffset==a.pos-a.parentOffset}max(a){return a.pos>this.pos?a:this}min(a){return a.pos<this.pos?a:this}toString(){let a="";for(let p=1;p<=this.depth;p++)a+=(a?"/":"")+this.node(p).type.name+"_"+this.index(p-1);return a+":"+this.parentOffset}static resolve(a,p){if(!(p>=0&&p<=a.content.size))throw new RangeError("Position "+p+" out of range");let E=[],D=0,w=p;for(let K=a;;){let{index:lt,offset:Rt}=K.content.findIndex(w),qt=w-Rt;if(E.push(K,lt,D+Rt),!qt||(K=K.child(lt),K.isText))break;w=qt-1,D+=Rt+1}return new At(p,E,w)}static resolveCached(a,p){for(let D=0;D<St.length;D++){let w=St[D];if(w.pos==p&&w.doc==a)return w}let E=St[Et]=At.resolve(a,p);return Et=(Et+1)%Lt,E}}let St=[],Et=0,Lt=12;class Ht{constructor(a,p,E){this.$from=a,this.$to=p,this.depth=E}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Kt=Object.create(null);class pt{constructor(a,p,E,D=tt.none){this.type=a,this.attrs=p,this.marks=D,this.content=E||g.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(a){return this.content.child(a)}maybeChild(a){return this.content.maybeChild(a)}forEach(a){this.content.forEach(a)}nodesBetween(a,p,E,D=0){this.content.nodesBetween(a,p,E,D,this)}descendants(a){this.nodesBetween(0,this.content.size,a)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(a,p,E,D){return this.content.textBetween(a,p,E,D)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(a){return this==a||this.sameMarkup(a)&&this.content.eq(a.content)}sameMarkup(a){return this.hasMarkup(a.type,a.attrs,a.marks)}hasMarkup(a,p,E){return this.type==a&&X(this.attrs,p||a.defaultAttrs||Kt)&&tt.sameSet(this.marks,E||tt.none)}copy(a=null){return a==this.content?this:new pt(this.type,this.attrs,a,this.marks)}mark(a){return a==this.marks?this:new pt(this.type,this.attrs,this.content,a)}cut(a,p=this.content.size){return 0==a&&p==this.content.size?this:this.copy(this.content.cut(a,p))}slice(a,p=this.content.size,E=!1){if(a==p)return ut.empty;let D=this.resolve(a),w=this.resolve(p),K=E?0:D.sharedDepth(p),lt=D.start(K),qt=D.node(K).content.cut(D.pos-lt,w.pos-lt);return new ut(qt,D.depth-K,w.depth-K)}replace(a,p,E){return Tt(this.resolve(a),this.resolve(p),E)}nodeAt(a){for(let p=this;;){let{index:E,offset:D}=p.content.findIndex(a);if(p=p.maybeChild(E),!p)return null;if(D==a||p.isText)return p;a-=D+1}}childAfter(a){let{index:p,offset:E}=this.content.findIndex(a);return{node:this.content.maybeChild(p),index:p,offset:E}}childBefore(a){if(0==a)return{node:null,index:0,offset:0};let{index:p,offset:E}=this.content.findIndex(a);if(E<a)return{node:this.content.child(p),index:p,offset:E};let D=this.content.child(p-1);return{node:D,index:p-1,offset:E-D.nodeSize}}resolve(a){return At.resolveCached(this,a)}resolveNoCache(a){return At.resolve(this,a)}rangeHasMark(a,p,E){let D=!1;return p>a&&this.nodesBetween(a,p,w=>(E.isInSet(w.marks)&&(D=!0),!D)),D}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let a=this.type.name;return this.content.size&&(a+="("+this.content.toStringInner()+")"),rt(this.marks,a)}contentMatchAt(a){let p=this.type.contentMatch.matchFragment(this.content,0,a);if(!p)throw new Error("Called contentMatchAt on a node with invalid content");return p}canReplace(a,p,E=g.empty,D=0,w=E.childCount){let K=this.contentMatchAt(a).matchFragment(E,D,w),lt=K&&K.matchFragment(this.content,p);if(!lt||!lt.validEnd)return!1;for(let Rt=D;Rt<w;Rt++)if(!this.type.allowsMarks(E.child(Rt).marks))return!1;return!0}canReplaceWith(a,p,E,D){if(D&&!this.type.allowsMarks(D))return!1;let w=this.contentMatchAt(a).matchType(E),K=w&&w.matchFragment(this.content,p);return!!K&&K.validEnd}canAppend(a){return a.content.size?this.canReplace(this.childCount,this.childCount,a.content):this.type.compatibleContent(a.type)}check(){this.type.checkContent(this.content);let a=tt.none;for(let p=0;p<this.marks.length;p++)a=this.marks[p].addToSet(a);if(!tt.sameSet(a,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(p=>p.type.name)}`);this.content.forEach(p=>p.check())}toJSON(){let a={type:this.type.name};for(let p in this.attrs){a.attrs=this.attrs;break}return this.content.size&&(a.content=this.content.toJSON()),this.marks.length&&(a.marks=this.marks.map(p=>p.toJSON())),a}static fromJSON(a,p){if(!p)throw new RangeError("Invalid input for Node.fromJSON");let E=null;if(p.marks){if(!Array.isArray(p.marks))throw new RangeError("Invalid mark data for Node.fromJSON");E=p.marks.map(a.markFromJSON)}if("text"==p.type){if("string"!=typeof p.text)throw new RangeError("Invalid text node in JSON");return a.text(p.text,E)}let D=g.fromJSON(a,p.content);return a.nodeType(p.type).create(p.attrs,D,E)}}pt.prototype.text=void 0;class B extends pt{constructor(a,p,E,D){if(super(a,p,null,D),!E)throw new RangeError("Empty text nodes are not allowed");this.text=E}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):rt(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(a,p){return this.text.slice(a,p)}get nodeSize(){return this.text.length}mark(a){return a==this.marks?this:new B(this.type,this.attrs,this.text,a)}withText(a){return a==this.text?this:new B(this.type,this.attrs,a,this.marks)}cut(a=0,p=this.text.length){return 0==a&&p==this.text.length?this:this.withText(this.text.slice(a,p))}eq(a){return this.sameMarkup(a)&&this.text==a.text}toJSON(){let a=super.toJSON();return a.text=this.text,a}}function rt(H,a){for(let p=H.length-1;p>=0;p--)a=H[p].type.name+"("+a+")";return a}class at{constructor(a){this.validEnd=a,this.next=[],this.wrapCache=[]}static parse(a,p){let E=new st(a,p);if(null==E.next)return at.empty;let D=J(E);E.next&&E.err("Unexpected trailing text");let w=function(H){let a=Object.create(null);return function p(E){let D=[];E.forEach(K=>{H[K].forEach(({term:lt,to:Rt})=>{if(!lt)return;let qt;for(let te=0;te<D.length;te++)D[te][0]==lt&&(qt=D[te][1]);ye(H,Rt).forEach(te=>{qt||D.push([lt,qt=[]]),-1==qt.indexOf(te)&&qt.push(te)})})});let w=a[E.join(",")]=new at(E.indexOf(H.length-1)>-1);for(let K=0;K<D.length;K++){let lt=D[K][1].sort(ue);w.next.push({type:D[K][0],next:a[lt.join(",")]||p(lt)})}return w}(ye(H,0))}(function(H){let a=[[]];return D(function w(K,lt){if("choice"==K.type)return K.exprs.reduce((Rt,qt)=>Rt.concat(w(qt,lt)),[]);if("seq"!=K.type){if("star"==K.type){let Rt=p();return E(lt,Rt),D(w(K.expr,Rt),Rt),[E(Rt)]}if("plus"==K.type){let Rt=p();return D(w(K.expr,lt),Rt),D(w(K.expr,Rt),Rt),[E(Rt)]}if("opt"==K.type)return[E(lt)].concat(w(K.expr,lt));if("range"==K.type){let Rt=lt;for(let qt=0;qt<K.min;qt++){let te=p();D(w(K.expr,Rt),te),Rt=te}if(-1==K.max)D(w(K.expr,Rt),Rt);else for(let qt=K.min;qt<K.max;qt++){let te=p();E(Rt,te),D(w(K.expr,Rt),te),Rt=te}return[E(Rt)]}if("name"==K.type)return[E(lt,void 0,K.value)];throw new Error("Unknown expr type")}for(let Rt=0;;Rt++){let qt=w(K.exprs[Rt],lt);if(Rt==K.exprs.length-1)return qt;D(qt,lt=p())}}(H,0),p()),a;function p(){return a.push([])-1}function E(K,lt,Rt){let qt={term:Rt,to:lt};return a[K].push(qt),qt}function D(K,lt){K.forEach(Rt=>Rt.to=lt)}}(D));return function(H,a){for(let p=0,E=[H];p<E.length;p++){let D=E[p],w=!D.validEnd,K=[];for(let lt=0;lt<D.next.length;lt++){let{type:Rt,next:qt}=D.next[lt];K.push(Rt.name),w&&!(Rt.isText||Rt.hasRequiredAttrs())&&(w=!1),-1==E.indexOf(qt)&&E.push(qt)}w&&a.err("Only non-generatable nodes ("+K.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(w,E),w}matchType(a){for(let p=0;p<this.next.length;p++)if(this.next[p].type==a)return this.next[p].next;return null}matchFragment(a,p=0,E=a.childCount){let D=this;for(let w=p;D&&w<E;w++)D=D.matchType(a.child(w).type);return D}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let a=0;a<this.next.length;a++){let{type:p}=this.next[a];if(!p.isText&&!p.hasRequiredAttrs())return p}return null}compatible(a){for(let p=0;p<this.next.length;p++)for(let E=0;E<a.next.length;E++)if(this.next[p].type==a.next[E].type)return!0;return!1}fillBefore(a,p=!1,E=0){let D=[this];return function w(K,lt){let Rt=K.matchFragment(a,E);if(Rt&&(!p||Rt.validEnd))return g.from(lt.map(qt=>qt.createAndFill()));for(let qt=0;qt<K.next.length;qt++){let{type:te,next:ke}=K.next[qt];if(!te.isText&&!te.hasRequiredAttrs()&&-1==D.indexOf(ke)){D.push(ke);let Je=w(ke,lt.concat(te));if(Je)return Je}}return null}(this,[])}findWrapping(a){for(let E=0;E<this.wrapCache.length;E+=2)if(this.wrapCache[E]==a)return this.wrapCache[E+1];let p=this.computeWrapping(a);return this.wrapCache.push(a,p),p}computeWrapping(a){let p=Object.create(null),E=[{match:this,type:null,via:null}];for(;E.length;){let D=E.shift(),w=D.match;if(w.matchType(a)){let K=[];for(let lt=D;lt.type;lt=lt.via)K.push(lt.type);return K.reverse()}for(let K=0;K<w.next.length;K++){let{type:lt,next:Rt}=w.next[K];!lt.isLeaf&&!lt.hasRequiredAttrs()&&!(lt.name in p)&&(!D.type||Rt.validEnd)&&(E.push({match:lt.contentMatch,type:lt,via:D}),p[lt.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(a){if(a>=this.next.length)throw new RangeError(`There's no ${a}th edge in this content match`);return this.next[a]}toString(){let a=[];return function p(E){a.push(E);for(let D=0;D<E.next.length;D++)-1==a.indexOf(E.next[D].next)&&p(E.next[D].next)}(this),a.map((E,D)=>{let w=D+(E.validEnd?"*":" ")+" ";for(let K=0;K<E.next.length;K++)w+=(K?", ":"")+E.next[K].type.name+"->"+a.indexOf(E.next[K].next);return w}).join("\n")}}at.empty=new at(!0);class st{constructor(a,p){this.string=a,this.nodeTypes=p,this.inline=null,this.pos=0,this.tokens=a.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(a){return this.next==a&&(this.pos++||!0)}err(a){throw new SyntaxError(a+" (in content expression '"+this.string+"')")}}function J(H){let a=[];do{a.push(Q(H))}while(H.eat("|"));return 1==a.length?a[0]:{type:"choice",exprs:a}}function Q(H){let a=[];do{a.push(ot(H))}while(H.next&&")"!=H.next&&"|"!=H.next);return 1==a.length?a[0]:{type:"seq",exprs:a}}function ot(H){let a=function(H){if(H.eat("(")){let a=J(H);return H.eat(")")||H.err("Missing closing paren"),a}if(!/\W/.test(H.next)){let a=function(H,a){let p=H.nodeTypes,E=p[a];if(E)return[E];let D=[];for(let w in p){let K=p[w];K.groups.indexOf(a)>-1&&D.push(K)}return 0==D.length&&H.err("No node type or group '"+a+"' found"),D}(H,H.next).map(p=>(null==H.inline?H.inline=p.isInline:H.inline!=p.isInline&&H.err("Mixing inline and block content"),{type:"name",value:p}));return H.pos++,1==a.length?a[0]:{type:"choice",exprs:a}}H.err("Unexpected token '"+H.next+"'")}(H);for(;;)if(H.eat("+"))a={type:"plus",expr:a};else if(H.eat("*"))a={type:"star",expr:a};else if(H.eat("?"))a={type:"opt",expr:a};else{if(!H.eat("{"))break;a=$t(H,a)}return a}function kt(H){/\D/.test(H.next)&&H.err("Expected number, got '"+H.next+"'");let a=Number(H.next);return H.pos++,a}function $t(H,a){let p=kt(H),E=p;return H.eat(",")&&(E="}"!=H.next?kt(H):-1),H.eat("}")||H.err("Unclosed braced range"),{type:"range",min:p,max:E,expr:a}}function ue(H,a){return a-H}function ye(H,a){let p=[];return function E(D){let w=H[D];if(1==w.length&&!w[0].term)return E(w[0].to);p.push(D);for(let K=0;K<w.length;K++){let{term:lt,to:Rt}=w[K];!lt&&-1==p.indexOf(Rt)&&E(Rt)}}(a),p.sort(ue)}function Ke(H){let a=Object.create(null);for(let p in H){let E=H[p];if(!E.hasDefault)return null;a[p]=E.default}return a}function xe(H,a){let p=Object.create(null);for(let E in H){let D=a&&a[E];if(void 0===D){let w=H[E];if(!w.hasDefault)throw new RangeError("No value supplied for attribute "+E);D=w.default}p[E]=D}return p}function Be(H){let a=Object.create(null);if(H)for(let p in H)a[p]=new Ae(H[p]);return a}class ge{constructor(a,p,E){this.name=a,this.schema=p,this.spec=E,this.markSet=null,this.groups=E.group?E.group.split(" "):[],this.attrs=Be(E.attrs),this.defaultAttrs=Ke(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(E.inline||"text"==a),this.isText="text"==a}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==at.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let a in this.attrs)if(this.attrs[a].isRequired)return!0;return!1}compatibleContent(a){return this==a||this.contentMatch.compatible(a.contentMatch)}computeAttrs(a){return!a&&this.defaultAttrs?this.defaultAttrs:xe(this.attrs,a)}create(a=null,p,E){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new pt(this,this.computeAttrs(a),g.from(p),tt.setFrom(E))}createChecked(a=null,p,E){return p=g.from(p),this.checkContent(p),new pt(this,this.computeAttrs(a),p,tt.setFrom(E))}createAndFill(a=null,p,E){if(a=this.computeAttrs(a),(p=g.from(p)).size){let K=this.contentMatch.fillBefore(p);if(!K)return null;p=K.append(p)}let D=this.contentMatch.matchFragment(p),w=D&&D.fillBefore(g.empty,!0);return w?new pt(this,a,p.append(w),tt.setFrom(E)):null}validContent(a){let p=this.contentMatch.matchFragment(a);if(!p||!p.validEnd)return!1;for(let E=0;E<a.childCount;E++)if(!this.allowsMarks(a.child(E).marks))return!1;return!0}checkContent(a){if(!this.validContent(a))throw new RangeError(`Invalid content for node ${this.name}: ${a.toString().slice(0,50)}`)}allowsMarkType(a){return null==this.markSet||this.markSet.indexOf(a)>-1}allowsMarks(a){if(null==this.markSet)return!0;for(let p=0;p<a.length;p++)if(!this.allowsMarkType(a[p].type))return!1;return!0}allowedMarks(a){if(null==this.markSet)return a;let p;for(let E=0;E<a.length;E++)this.allowsMarkType(a[E].type)?p&&p.push(a[E]):p||(p=a.slice(0,E));return p?p.length?p:tt.none:a}static compile(a,p){let E=Object.create(null);a.forEach((w,K)=>E[w]=new ge(w,p,K));let D=p.spec.topNode||"doc";if(!E[D])throw new RangeError("Schema is missing its top node type ('"+D+"')");if(!E.text)throw new RangeError("Every schema needs a 'text' type");for(let w in E.text.attrs)throw new RangeError("The text node type should not have attributes");return E}}class Ae{constructor(a){this.hasDefault=Object.prototype.hasOwnProperty.call(a,"default"),this.default=a.default}get isRequired(){return!this.hasDefault}}class ve{constructor(a,p,E,D){this.name=a,this.rank=p,this.schema=E,this.spec=D,this.attrs=Be(D.attrs),this.excluded=null;let w=Ke(this.attrs);this.instance=w?new tt(this,w):null}create(a=null){return!a&&this.instance?this.instance:new tt(this,xe(this.attrs,a))}static compile(a,p){let E=Object.create(null),D=0;return a.forEach((w,K)=>E[w]=new ve(w,D++,p,K)),E}removeFromSet(a){for(var p=0;p<a.length;p++)a[p].type==this&&(a=a.slice(0,p).concat(a.slice(p+1)),p--);return a}isInSet(a){for(let p=0;p<a.length;p++)if(a[p].type==this)return a[p]}excludes(a){return this.excluded.indexOf(a)>-1}}class Pe{constructor(a){this.cached=Object.create(null);let p=this.spec={};for(let D in a)p[D]=a[D];p.nodes=l.from(a.nodes),p.marks=l.from(a.marks||{}),this.nodes=ge.compile(this.spec.nodes,this),this.marks=ve.compile(this.spec.marks,this);let E=Object.create(null);for(let D in this.nodes){if(D in this.marks)throw new RangeError(D+" can not be both a node and a mark");let w=this.nodes[D],K=w.spec.content||"",lt=w.spec.marks;w.contentMatch=E[K]||(E[K]=at.parse(K,this.nodes)),w.inlineContent=w.contentMatch.inlineContent,w.markSet="_"==lt?null:lt?Ne(this,lt.split(" ")):""!=lt&&w.inlineContent?null:[]}for(let D in this.marks){let w=this.marks[D],K=w.spec.excludes;w.excluded=null==K?[w]:""==K?[]:Ne(this,K.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(a,p=null,E,D){if("string"==typeof a)a=this.nodeType(a);else{if(!(a instanceof ge))throw new RangeError("Invalid node type: "+a);if(a.schema!=this)throw new RangeError("Node type from different schema used ("+a.name+")")}return a.createChecked(p,E,D)}text(a,p){let E=this.nodes.text;return new B(E,E.defaultAttrs,a,tt.setFrom(p))}mark(a,p){return"string"==typeof a&&(a=this.marks[a]),a.create(p)}nodeFromJSON(a){return pt.fromJSON(this,a)}markFromJSON(a){return tt.fromJSON(this,a)}nodeType(a){let p=this.nodes[a];if(!p)throw new RangeError("Unknown node type: "+a);return p}}function Ne(H,a){let p=[];for(let E=0;E<a.length;E++){let D=a[E],w=H.marks[D],K=w;if(w)p.push(w);else for(let lt in H.marks){let Rt=H.marks[lt];("_"==D||Rt.spec.group&&Rt.spec.group.split(" ").indexOf(D)>-1)&&p.push(K=Rt)}if(!K)throw new SyntaxError("Unknown mark type: '"+a[E]+"'")}return p}class Me{constructor(a,p){this.schema=a,this.rules=p,this.tags=[],this.styles=[],p.forEach(E=>{E.tag?this.tags.push(E):E.style&&this.styles.push(E)}),this.normalizeLists=!this.tags.some(E=>{if(!/^(ul|ol)\b/.test(E.tag)||!E.node)return!1;let D=a.nodes[E.node];return D.contentMatch.matchType(D)})}parse(a,p={}){let E=new Ee(this,p,!1);return E.addAll(a,p.from,p.to),E.finish()}parseSlice(a,p={}){let E=new Ee(this,p,!0);return E.addAll(a,p.from,p.to),ut.maxOpen(E.finish())}matchTag(a,p,E){for(let D=E?this.tags.indexOf(E)+1:0;D<this.tags.length;D++){let w=this.tags[D];if(b(a,w.tag)&&(void 0===w.namespace||a.namespaceURI==w.namespace)&&(!w.context||p.matchesContext(w.context))){if(w.getAttrs){let K=w.getAttrs(a);if(!1===K)continue;w.attrs=K||void 0}return w}}}matchStyle(a,p,E,D){for(let w=D?this.styles.indexOf(D)+1:0;w<this.styles.length;w++){let K=this.styles[w],lt=K.style;if(!(0!=lt.indexOf(a)||K.context&&!E.matchesContext(K.context)||lt.length>a.length&&(61!=lt.charCodeAt(a.length)||lt.slice(a.length+1)!=p))){if(K.getAttrs){let Rt=K.getAttrs(p);if(!1===Rt)continue;K.attrs=Rt||void 0}return K}}}static schemaRules(a){let p=[];function E(D){let w=null==D.priority?50:D.priority,K=0;for(;K<p.length;K++){let lt=p[K];if((null==lt.priority?50:lt.priority)<w)break}p.splice(K,0,D)}for(let D in a.marks){let w=a.marks[D].spec.parseDOM;w&&w.forEach(K=>{E(K=I(K)),K.mark||K.ignore||K.clearMark||(K.mark=D)})}for(let D in a.nodes){let w=a.nodes[D].spec.parseDOM;w&&w.forEach(K=>{E(K=I(K)),K.node||K.ignore||K.mark||(K.node=D)})}return p}static fromSchema(a){return a.cached.domParser||(a.cached.domParser=new Me(a,Me.schemaRules(a)))}}const Ie={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ze={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},He={ol:!0,ul:!0};function _e(H,a,p){return null!=a?(a?1:0)|("full"===a?2:0):H&&"pre"==H.whitespace?3:-5&p}class fe{constructor(a,p,E,D,w,K,lt){this.type=a,this.attrs=p,this.marks=E,this.pendingMarks=D,this.solid=w,this.options=lt,this.content=[],this.activeMarks=tt.none,this.stashMarks=[],this.match=K||(4&lt?null:a.contentMatch)}findWrapping(a){if(!this.match){if(!this.type)return[];let p=this.type.contentMatch.fillBefore(g.from(a));if(!p){let D,E=this.type.contentMatch;return(D=E.findWrapping(a.type))?(this.match=E,D):null}this.match=this.type.contentMatch.matchFragment(p)}return this.match.findWrapping(a.type)}finish(a){if(!(1&this.options)){let D,E=this.content[this.content.length-1];if(E&&E.isText&&(D=/[ \t\r\n\u000c]+$/.exec(E.text))){let w=E;E.text.length==D[0].length?this.content.pop():this.content[this.content.length-1]=w.withText(w.text.slice(0,w.text.length-D[0].length))}}let p=g.from(this.content);return!a&&this.match&&(p=p.append(this.match.fillBefore(g.empty,!0))),this.type?this.type.create(this.attrs,p,this.marks):p}popFromStashMark(a){for(let p=this.stashMarks.length-1;p>=0;p--)if(a.eq(this.stashMarks[p]))return this.stashMarks.splice(p,1)[0]}applyPending(a){for(let p=0,E=this.pendingMarks;p<E.length;p++){let D=E[p];(this.type?this.type.allowsMarkType(D.type):R(D.type,a))&&!D.isInSet(this.activeMarks)&&(this.activeMarks=D.addToSet(this.activeMarks),this.pendingMarks=D.removeFromSet(this.pendingMarks))}}inlineContext(a){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:a.parentNode&&!Ie.hasOwnProperty(a.parentNode.nodeName.toLowerCase())}}class Ee{constructor(a,p,E){this.parser=a,this.options=p,this.isOpen=E,this.open=0;let w,D=p.topNode,K=_e(null,p.preserveWhitespace,0)|(E?4:0);w=D?new fe(D.type,D.attrs,tt.none,tt.none,!0,p.topMatch||D.type.contentMatch,K):new fe(E?null:a.schema.topNodeType,null,tt.none,tt.none,!0,null,K),this.nodes=[w],this.find=p.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(a){if(3==a.nodeType)this.addTextNode(a);else if(1==a.nodeType){let p=a.getAttribute("style");if(p){let E=this.readStyles(function(H){let p,a=/\s*([\w-]+)\s*:\s*([^;]+)/g,E=[];for(;p=a.exec(H);)E.push(p[1],p[2].trim());return E}(p));if(!E)return;let[D,w]=E,K=this.top;for(let lt=0;lt<w.length;lt++)this.removePendingMark(w[lt],K);for(let lt=0;lt<D.length;lt++)this.addPendingMark(D[lt]);this.addElement(a);for(let lt=0;lt<D.length;lt++)this.removePendingMark(D[lt],K);for(let lt=0;lt<w.length;lt++)this.addPendingMark(w[lt])}else this.addElement(a)}}addTextNode(a){let p=a.nodeValue,E=this.top;if(2&E.options||E.inlineContext(a)||/[^ \t\r\n\u000c]/.test(p)){if(1&E.options)p=2&E.options?p.replace(/\r\n?/g,"\n"):p.replace(/\r?\n|\r/g," ");else if(p=p.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(p)&&this.open==this.nodes.length-1){let D=E.content[E.content.length-1],w=a.previousSibling;(!D||w&&"BR"==w.nodeName||D.isText&&/[ \t\r\n\u000c]$/.test(D.text))&&(p=p.slice(1))}p&&this.insertNode(this.parser.schema.text(p)),this.findInText(a)}else this.findInside(a)}addElement(a,p){let D,E=a.nodeName.toLowerCase();He.hasOwnProperty(E)&&this.parser.normalizeLists&&function(H){for(let a=H.firstChild,p=null;a;a=a.nextSibling){let E=1==a.nodeType?a.nodeName.toLowerCase():null;E&&He.hasOwnProperty(E)&&p?(p.appendChild(a),a=p):"li"==E?p=a:E&&(p=null)}}(a);let w=this.options.ruleFromNode&&this.options.ruleFromNode(a)||(D=this.parser.matchTag(a,this,p));if(w?w.ignore:Ze.hasOwnProperty(E))this.findInside(a),this.ignoreFallback(a);else if(!w||w.skip||w.closeParent){w&&w.closeParent?this.open=Math.max(0,this.open-1):w&&w.skip.nodeType&&(a=w.skip);let K,lt=this.top,Rt=this.needsBlock;if(Ie.hasOwnProperty(E))lt.content.length&&lt.content[0].isInline&&this.open&&(this.open--,lt=this.top),K=!0,lt.type||(this.needsBlock=!0);else if(!a.firstChild)return void this.leafFallback(a);this.addAll(a),K&&this.sync(lt),this.needsBlock=Rt}else this.addElementByRule(a,w,!1===w.consuming?D:void 0)}leafFallback(a){"BR"==a.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(a.ownerDocument.createTextNode("\n"))}ignoreFallback(a){"BR"==a.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(a){let p=tt.none,E=tt.none;t:for(let D=0;D<a.length;D+=2)for(let w;;){let K=this.parser.matchStyle(a[D],a[D+1],this,w);if(!K)continue t;if(K.ignore)return null;if(K.clearMark?this.top.pendingMarks.forEach(lt=>{K.clearMark(lt)&&(E=lt.addToSet(E))}):p=this.parser.schema.marks[K.mark].create(K.attrs).addToSet(p),!1!==K.consuming)break;w=K}return[p,E]}addElementByRule(a,p,E){let D,w,K;p.node?(w=this.parser.schema.nodes[p.node],w.isLeaf?this.insertNode(w.create(p.attrs))||this.leafFallback(a):D=this.enter(w,p.attrs||null,p.preserveWhitespace)):(K=this.parser.schema.marks[p.mark].create(p.attrs),this.addPendingMark(K));let lt=this.top;if(w&&w.isLeaf)this.findInside(a);else if(E)this.addElement(a,E);else if(p.getContent)this.findInside(a),p.getContent(a,this.parser.schema).forEach(Rt=>this.insertNode(Rt));else{let Rt=a;"string"==typeof p.contentElement?Rt=a.querySelector(p.contentElement):"function"==typeof p.contentElement?Rt=p.contentElement(a):p.contentElement&&(Rt=p.contentElement),this.findAround(a,Rt,!0),this.addAll(Rt)}D&&this.sync(lt)&&this.open--,K&&this.removePendingMark(K,lt)}addAll(a,p,E){let D=p||0;for(let w=p?a.childNodes[p]:a.firstChild,K=null==E?null:a.childNodes[E];w!=K;w=w.nextSibling,++D)this.findAtPoint(a,D),this.addDOM(w);this.findAtPoint(a,D)}findPlace(a){let p,E;for(let D=this.open;D>=0;D--){let w=this.nodes[D],K=w.findWrapping(a);if(K&&(!p||p.length>K.length)&&(p=K,E=w,!K.length)||w.solid)break}if(!p)return!1;this.sync(E);for(let D=0;D<p.length;D++)this.enterInner(p[D],null,!1);return!0}insertNode(a){if(a.isInline&&this.needsBlock&&!this.top.type){let p=this.textblockFromContext();p&&this.enterInner(p)}if(this.findPlace(a)){this.closeExtra();let p=this.top;p.applyPending(a.type),p.match&&(p.match=p.match.matchType(a.type));let E=p.activeMarks;for(let D=0;D<a.marks.length;D++)(!p.type||p.type.allowsMarkType(a.marks[D].type))&&(E=a.marks[D].addToSet(E));return p.content.push(a.mark(E)),!0}return!1}enter(a,p,E){let D=this.findPlace(a.create(p));return D&&this.enterInner(a,p,!0,E),D}enterInner(a,p=null,E=!1,D){this.closeExtra();let w=this.top;w.applyPending(a),w.match=w.match&&w.match.matchType(a);let K=_e(a,D,w.options);4&w.options&&0==w.content.length&&(K|=4),this.nodes.push(new fe(a,p,w.activeMarks,w.pendingMarks,E,null,K)),this.open++}closeExtra(a=!1){let p=this.nodes.length-1;if(p>this.open){for(;p>this.open;p--)this.nodes[p-1].content.push(this.nodes[p].finish(a));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(a){for(let p=this.open;p>=0;p--)if(this.nodes[p]==a)return this.open=p,!0;return!1}get currentPos(){this.closeExtra();let a=0;for(let p=this.open;p>=0;p--){let E=this.nodes[p].content;for(let D=E.length-1;D>=0;D--)a+=E[D].nodeSize;p&&a++}return a}findAtPoint(a,p){if(this.find)for(let E=0;E<this.find.length;E++)this.find[E].node==a&&this.find[E].offset==p&&(this.find[E].pos=this.currentPos)}findInside(a){if(this.find)for(let p=0;p<this.find.length;p++)null==this.find[p].pos&&1==a.nodeType&&a.contains(this.find[p].node)&&(this.find[p].pos=this.currentPos)}findAround(a,p,E){if(a!=p&&this.find)for(let D=0;D<this.find.length;D++)null==this.find[D].pos&&1==a.nodeType&&a.contains(this.find[D].node)&&p.compareDocumentPosition(this.find[D].node)&(E?2:4)&&(this.find[D].pos=this.currentPos)}findInText(a){if(this.find)for(let p=0;p<this.find.length;p++)this.find[p].node==a&&(this.find[p].pos=this.currentPos-(a.nodeValue.length-this.find[p].offset))}matchesContext(a){if(a.indexOf("|")>-1)return a.split(/\s*\|\s*/).some(this.matchesContext,this);let p=a.split("/"),E=this.options.context,D=!(this.isOpen||E&&E.parent.type!=this.nodes[0].type),w=(D?0:1)-(E?E.depth+1:0),K=(lt,Rt)=>{for(;lt>=0;lt--){let qt=p[lt];if(""==qt){if(lt==p.length-1||0==lt)continue;for(;Rt>=w;Rt--)if(K(lt-1,Rt))return!0;return!1}{let te=Rt>0||0==Rt&&D?this.nodes[Rt].type:E&&Rt>=w?E.node(Rt-w).type:null;if(!te||te.name!=qt&&-1==te.groups.indexOf(qt))return!1;Rt--}}return!0};return K(p.length-1,this.open)}textblockFromContext(){let a=this.options.context;if(a)for(let p=a.depth;p>=0;p--){let E=a.node(p).contentMatchAt(a.indexAfter(p)).defaultType;if(E&&E.isTextblock&&E.defaultAttrs)return E}for(let p in this.parser.schema.nodes){let E=this.parser.schema.nodes[p];if(E.isTextblock&&E.defaultAttrs)return E}}addPendingMark(a){let p=function(H,a){for(let p=0;p<a.length;p++)if(H.eq(a[p]))return a[p]}(a,this.top.pendingMarks);p&&this.top.stashMarks.push(p),this.top.pendingMarks=a.addToSet(this.top.pendingMarks)}removePendingMark(a,p){for(let E=this.open;E>=0;E--){let D=this.nodes[E];if(D.pendingMarks.lastIndexOf(a)>-1)D.pendingMarks=a.removeFromSet(D.pendingMarks);else{D.activeMarks=a.removeFromSet(D.activeMarks);let K=D.popFromStashMark(a);K&&D.type&&D.type.allowsMarkType(K.type)&&(D.activeMarks=K.addToSet(D.activeMarks))}if(D==p)break}}}function b(H,a){return(H.matches||H.msMatchesSelector||H.webkitMatchesSelector||H.mozMatchesSelector).call(H,a)}function I(H){let a={};for(let p in H)a[p]=H[p];return a}function R(H,a){let p=a.schema.nodes;for(let E in p){let D=p[E];if(!D.allowsMarkType(H))continue;let w=[],K=lt=>{w.push(lt);for(let Rt=0;Rt<lt.edgeCount;Rt++){let{type:qt,next:te}=lt.edge(Rt);if(qt==a||w.indexOf(te)<0&&K(te))return!0}};if(K(D.contentMatch))return!0}}class U{constructor(a,p){this.nodes=a,this.marks=p}serializeFragment(a,p={},E){E||(E=wt(p).createDocumentFragment());let D=E,w=[];return a.forEach(K=>{if(w.length||K.marks.length){let lt=0,Rt=0;for(;lt<w.length&&Rt<K.marks.length;){let qt=K.marks[Rt];if(this.marks[qt.type.name]){if(!qt.eq(w[lt][0])||!1===qt.type.spec.spanning)break;lt++,Rt++}else Rt++}for(;lt<w.length;)D=w.pop()[1];for(;Rt<K.marks.length;){let qt=K.marks[Rt++],te=this.serializeMark(qt,K.isInline,p);te&&(w.push([qt,D]),D.appendChild(te.dom),D=te.contentDOM||te.dom)}}D.appendChild(this.serializeNodeInner(K,p))}),E}serializeNodeInner(a,p){let{dom:E,contentDOM:D}=U.renderSpec(wt(p),this.nodes[a.type.name](a));if(D){if(a.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(a.content,p,D)}return E}serializeNode(a,p={}){let E=this.serializeNodeInner(a,p);for(let D=a.marks.length-1;D>=0;D--){let w=this.serializeMark(a.marks[D],a.isInline,p);w&&((w.contentDOM||w.dom).appendChild(E),E=w.dom)}return E}serializeMark(a,p,E={}){let D=this.marks[a.type.name];return D&&U.renderSpec(wt(E),D(a,p))}static renderSpec(a,p,E=null){if("string"==typeof p)return{dom:a.createTextNode(p)};if(null!=p.nodeType)return{dom:p};if(p.dom&&null!=p.dom.nodeType)return p;let D=p[0],w=D.indexOf(" ");w>0&&(E=D.slice(0,w),D=D.slice(w+1));let K,lt=E?a.createElementNS(E,D):a.createElement(D),Rt=p[1],qt=1;if(Rt&&"object"==typeof Rt&&null==Rt.nodeType&&!Array.isArray(Rt)){qt=2;for(let te in Rt)if(null!=Rt[te]){let ke=te.indexOf(" ");ke>0?lt.setAttributeNS(te.slice(0,ke),te.slice(ke+1),Rt[te]):lt.setAttribute(te,Rt[te])}}for(let te=qt;te<p.length;te++){let ke=p[te];if(0===ke){if(te<p.length-1||te>qt)throw new RangeError("Content hole must be the only child of its parent node");return{dom:lt,contentDOM:lt}}{let{dom:Je,contentDOM:$}=U.renderSpec(a,ke,E);if(lt.appendChild(Je),$){if(K)throw new RangeError("Multiple content holes");K=$}}}return{dom:lt,contentDOM:K}}static fromSchema(a){return a.cached.domSerializer||(a.cached.domSerializer=new U(this.nodesFromSchema(a),this.marksFromSchema(a)))}static nodesFromSchema(a){let p=Ot(a.nodes);return p.text||(p.text=E=>E.text),p}static marksFromSchema(a){return Ot(a.marks)}}function Ot(H){let a={};for(let p in H){let E=H[p].spec.toDOM;E&&(a[p]=E)}return a}function wt(H){return H.document||window.document}},62463:(jt,Mt,c)=>{c.d(Mt,{Bs:()=>X,C1:()=>et,H$:()=>Kt,Sy:()=>Et,Y1:()=>P,qv:()=>ft,xm:()=>g,yy:()=>At});var v=c(77346),l=c(38480);const y=Object.create(null);class P{constructor(B,rt,at){this.$anchor=B,this.$head=rt,this.ranges=at||[new g(B.min(rt),B.max(rt))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let B=this.ranges;for(let rt=0;rt<B.length;rt++)if(B[rt].$from.pos!=B[rt].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(B,rt=v.p2.empty){let at=rt.content.lastChild,st=null;for(let ot=0;ot<rt.openEnd;ot++)st=at,at=at.lastChild;let J=B.steps.length,Q=this.ranges;for(let ot=0;ot<Q.length;ot++){let{$from:kt,$to:$t}=Q[ot],Yt=B.mapping.slice(J);B.replaceRange(Yt.map(kt.pos),Yt.map($t.pos),ot?v.p2.empty:rt),0==ot&&bt(B,J,(at?at.isInline:st&&st.isTextblock)?-1:1)}}replaceWith(B,rt){let at=B.steps.length,st=this.ranges;for(let J=0;J<st.length;J++){let{$from:Q,$to:ot}=st[J],kt=B.mapping.slice(at),$t=kt.map(Q.pos),Yt=kt.map(ot.pos);J?B.deleteRange($t,Yt):(B.replaceRangeWith($t,Yt,rt),bt(B,at,rt.isInline?-1:1))}}static findFrom(B,rt,at=!1){let st=B.parent.inlineContent?new X(B):Tt(B.node(0),B.parent,B.pos,B.index(),rt,at);if(st)return st;for(let J=B.depth-1;J>=0;J--){let Q=rt<0?Tt(B.node(0),B.node(J),B.before(J+1),B.index(J),rt,at):Tt(B.node(0),B.node(J),B.after(J+1),B.index(J)+1,rt,at);if(Q)return Q}return null}static near(B,rt=1){return this.findFrom(B,rt)||this.findFrom(B,-rt)||new et(B.node(0))}static atStart(B){return Tt(B,B,0,0,1)||new et(B)}static atEnd(B){return Tt(B,B,B.content.size,B.childCount,-1)||new et(B)}static fromJSON(B,rt){if(!rt||!rt.type)throw new RangeError("Invalid input for Selection.fromJSON");let at=y[rt.type];if(!at)throw new RangeError(`No selection type ${rt.type} defined`);return at.fromJSON(B,rt)}static jsonID(B,rt){if(B in y)throw new RangeError("Duplicate use of selection JSON ID "+B);return y[B]=rt,rt.prototype.jsonID=B,rt}getBookmark(){return X.between(this.$anchor,this.$head).getBookmark()}}P.prototype.visible=!0;class g{constructor(B,rt){this.$from=B,this.$to=rt}}let it=!1;function N(pt){!it&&!pt.parent.inlineContent&&(it=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+pt.parent.type.name+")"))}class X extends P{constructor(B,rt=B){N(B),N(rt),super(B,rt)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(B,rt){let at=B.resolve(rt.map(this.head));if(!at.parent.inlineContent)return P.near(at);let st=B.resolve(rt.map(this.anchor));return new X(st.parent.inlineContent?st:at,at)}replace(B,rt=v.p2.empty){if(super.replace(B,rt),rt==v.p2.empty){let at=this.$from.marksAcross(this.$to);at&&B.ensureMarks(at)}}eq(B){return B instanceof X&&B.anchor==this.anchor&&B.head==this.head}getBookmark(){return new tt(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(B,rt){if("number"!=typeof rt.anchor||"number"!=typeof rt.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new X(B.resolve(rt.anchor),B.resolve(rt.head))}static create(B,rt,at=rt){let st=B.resolve(rt);return new this(st,at==rt?st:B.resolve(at))}static between(B,rt,at){let st=B.pos-rt.pos;if((!at||st)&&(at=st>=0?1:-1),!rt.parent.inlineContent){let J=P.findFrom(rt,at,!0)||P.findFrom(rt,-at,!0);if(!J)return P.near(rt,at);rt=J.$head}return B.parent.inlineContent||(0==st||(B=(P.findFrom(B,-at,!0)||P.findFrom(B,at,!0)).$anchor).pos<rt.pos!=st<0)&&(B=rt),new X(B,rt)}}P.jsonID("text",X);class tt{constructor(B,rt){this.anchor=B,this.head=rt}map(B){return new tt(B.map(this.anchor),B.map(this.head))}resolve(B){return X.between(B.resolve(this.anchor),B.resolve(this.head))}}class ft extends P{constructor(B){let rt=B.nodeAfter,at=B.node(0).resolve(B.pos+rt.nodeSize);super(B,at),this.node=rt}map(B,rt){let{deleted:at,pos:st}=rt.mapResult(this.anchor),J=B.resolve(st);return at?P.near(J):new ft(J)}content(){return new v.p2(v.HY.from(this.node),0,0)}eq(B){return B instanceof ft&&B.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new ut(this.anchor)}static fromJSON(B,rt){if("number"!=typeof rt.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ft(B.resolve(rt.anchor))}static create(B,rt){return new ft(B.resolve(rt))}static isSelectable(B){return!B.isText&&!1!==B.type.spec.selectable}}ft.prototype.visible=!1,P.jsonID("node",ft);class ut{constructor(B){this.anchor=B}map(B){let{deleted:rt,pos:at}=B.mapResult(this.anchor);return rt?new tt(at,at):new ut(at)}resolve(B){let rt=B.resolve(this.anchor),at=rt.nodeAfter;return at&&ft.isSelectable(at)?new ft(rt):P.near(rt)}}class et extends P{constructor(B){super(B.resolve(0),B.resolve(B.content.size))}replace(B,rt=v.p2.empty){if(rt==v.p2.empty){B.delete(0,B.doc.content.size);let at=P.atStart(B.doc);at.eq(B.selection)||B.setSelection(at)}else super.replace(B,rt)}toJSON(){return{type:"all"}}static fromJSON(B){return new et(B)}map(B){return new et(B)}eq(B){return B instanceof et}getBookmark(){return _t}}P.jsonID("all",et);const _t={map(){return this},resolve:pt=>new et(pt)};function Tt(pt,B,rt,at,st,J=!1){if(B.inlineContent)return X.create(pt,rt);for(let Q=at-(st>0?0:1);st>0?Q<B.childCount:Q>=0;Q+=st){let ot=B.child(Q);if(ot.isAtom){if(!J&&ft.isSelectable(ot))return ft.create(pt,rt-(st<0?ot.nodeSize:0))}else{let kt=Tt(pt,ot,rt+st,st<0?ot.childCount:0,st,J);if(kt)return kt}rt+=ot.nodeSize*st}return null}function bt(pt,B,rt){let at=pt.steps.length-1;if(at<B)return;let Q,st=pt.steps[at];(st instanceof l.Pu||st instanceof l.FC)&&(pt.mapping.maps[at].forEach((ot,kt,$t,Yt)=>{null==Q&&(Q=Yt)}),pt.setSelection(P.near(pt.doc.resolve(Q),rt)))}class ht extends l.wx{constructor(B){super(B.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=B.selection,this.storedMarks=B.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(B){if(B.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=B,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(B){return this.storedMarks=B,this.updated|=2,this}ensureMarks(B){return v.vc.sameSet(this.storedMarks||this.selection.$from.marks(),B)||this.setStoredMarks(B),this}addStoredMark(B){return this.ensureMarks(B.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(B){return this.ensureMarks(B.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(B,rt){super.addStep(B,rt),this.updated=-3&this.updated,this.storedMarks=null}setTime(B){return this.time=B,this}replaceSelection(B){return this.selection.replace(this,B),this}replaceSelectionWith(B,rt=!0){let at=this.selection;return rt&&(B=B.mark(this.storedMarks||(at.empty?at.$from.marks():at.$from.marksAcross(at.$to)||v.vc.none))),at.replaceWith(this,B),this}deleteSelection(){return this.selection.replace(this),this}insertText(B,rt,at){let st=this.doc.type.schema;if(null==rt)return B?this.replaceSelectionWith(st.text(B),!0):this.deleteSelection();{if(null==at&&(at=rt),at=null==at?rt:at,!B)return this.deleteRange(rt,at);let J=this.storedMarks;if(!J){let Q=this.doc.resolve(rt);J=at==rt?Q.marks():Q.marksAcross(this.doc.resolve(at))}return this.replaceRangeWith(rt,at,st.text(B,J)),this.selection.empty||this.setSelection(P.near(this.selection.$to)),this}}setMeta(B,rt){return this.meta["string"==typeof B?B:B.key]=rt,this}getMeta(B){return this.meta["string"==typeof B?B:B.key]}get isGeneric(){for(let B in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function q(pt,B){return B&&pt?pt.bind(B):pt}class F{constructor(B,rt,at){this.name=B,this.init=q(rt.init,at),this.apply=q(rt.apply,at)}}const mt=[new F("doc",{init:pt=>pt.doc||pt.schema.topNodeType.createAndFill(),apply:pt=>pt.doc}),new F("selection",{init:(pt,B)=>pt.selection||P.atStart(B.doc),apply:pt=>pt.selection}),new F("storedMarks",{init:pt=>pt.storedMarks||null,apply:(pt,B,rt,at)=>at.selection.$cursor?pt.storedMarks:null}),new F("scrollToSelection",{init:()=>0,apply:(pt,B)=>pt.scrolledIntoView?B+1:B})];class j{constructor(B,rt){this.schema=B,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=mt.slice(),rt&&rt.forEach(at=>{if(this.pluginsByKey[at.key])throw new RangeError("Adding different instances of a keyed plugin ("+at.key+")");this.plugins.push(at),this.pluginsByKey[at.key]=at,at.spec.state&&this.fields.push(new F(at.key,at.spec.state,at))})}}class At{constructor(B){this.config=B}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(B){return this.applyTransaction(B).state}filterTransaction(B,rt=-1){for(let at=0;at<this.config.plugins.length;at++)if(at!=rt){let st=this.config.plugins[at];if(st.spec.filterTransaction&&!st.spec.filterTransaction.call(st,B,this))return!1}return!0}applyTransaction(B){if(!this.filterTransaction(B))return{state:this,transactions:[]};let rt=[B],at=this.applyInner(B),st=null;for(;;){let J=!1;for(let Q=0;Q<this.config.plugins.length;Q++){let ot=this.config.plugins[Q];if(ot.spec.appendTransaction){let kt=st?st[Q].n:0,$t=st?st[Q].state:this,Yt=kt<rt.length&&ot.spec.appendTransaction.call(ot,kt?rt.slice(kt):rt,$t,at);if(Yt&&at.filterTransaction(Yt,Q)){if(Yt.setMeta("appendedTransaction",B),!st){st=[];for(let ee=0;ee<this.config.plugins.length;ee++)st.push(ee<Q?{state:at,n:rt.length}:{state:this,n:0})}rt.push(Yt),at=at.applyInner(Yt),J=!0}st&&(st[Q]={state:at,n:rt.length})}}if(!J)return{state:at,transactions:rt}}}applyInner(B){if(!B.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let rt=new At(this.config),at=this.config.fields;for(let st=0;st<at.length;st++){let J=at[st];rt[J.name]=J.apply(B,this[J.name],this,rt)}return rt}get tr(){return new ht(this)}static create(B){let rt=new j(B.doc?B.doc.type.schema:B.schema,B.plugins),at=new At(rt);for(let st=0;st<rt.fields.length;st++)at[rt.fields[st].name]=rt.fields[st].init(B,at);return at}reconfigure(B){let rt=new j(this.schema,B.plugins),at=rt.fields,st=new At(rt);for(let J=0;J<at.length;J++){let Q=at[J].name;st[Q]=this.hasOwnProperty(Q)?this[Q]:at[J].init(B,st)}return st}toJSON(B){let rt={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(rt.storedMarks=this.storedMarks.map(at=>at.toJSON())),B&&"object"==typeof B)for(let at in B){if("doc"==at||"selection"==at)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let st=B[at],J=st.spec.state;J&&J.toJSON&&(rt[at]=J.toJSON.call(st,this[st.key]))}return rt}static fromJSON(B,rt,at){if(!rt)throw new RangeError("Invalid input for EditorState.fromJSON");if(!B.schema)throw new RangeError("Required config field 'schema' missing");let st=new j(B.schema,B.plugins),J=new At(st);return st.fields.forEach(Q=>{if("doc"==Q.name)J.doc=v.NB.fromJSON(B.schema,rt.doc);else if("selection"==Q.name)J.selection=P.fromJSON(J.doc,rt.selection);else if("storedMarks"==Q.name)rt.storedMarks&&(J.storedMarks=rt.storedMarks.map(B.schema.markFromJSON));else{if(at)for(let ot in at){let kt=at[ot],$t=kt.spec.state;if(kt.key==Q.name&&$t&&$t.fromJSON&&Object.prototype.hasOwnProperty.call(rt,ot))return void(J[Q.name]=$t.fromJSON.call(kt,B,rt[ot],J))}J[Q.name]=Q.init(B,J)}}),J}}function St(pt,B,rt){for(let at in pt){let st=pt[at];st instanceof Function?st=st.bind(B):"handleDOMEvents"==at&&(st=St(st,B,{})),rt[at]=st}return rt}class Et{constructor(B){this.spec=B,this.props={},B.props&&St(B.props,this,this.props),this.key=B.key?B.key.key:Ht("plugin")}getState(B){return B[this.key]}}const Lt=Object.create(null);function Ht(pt){return pt in Lt?pt+"$"+ ++Lt[pt]:(Lt[pt]=0,pt+"$")}class Kt{constructor(B="key"){this.key=Ht(B)}get(B){return B.config.pluginsByKey[this.key]}getState(B){return B[this.key]}}},38480:(jt,Mt,c)=>{c.d(Mt,{Ax:()=>$t,FC:()=>j,GJ:()=>ue,Mn:()=>ee,Pu:()=>mt,dR:()=>Ke,k9:()=>Kt,nd:()=>B,nj:()=>he,vs:()=>_t,wx:()=>Ee});var v=c(77346);const y=Math.pow(2,16);function P(gt,b){return gt+b*y}function g(gt){return 65535&gt}class ut{constructor(b,O,I){this.pos=b,this.delInfo=O,this.recover=I}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class et{constructor(b,O=!1){if(this.ranges=b,this.inverted=O,!b.length&&et.empty)return et.empty}recover(b){let O=0,I=g(b);if(!this.inverted)for(let R=0;R<I;R++)O+=this.ranges[3*R+2]-this.ranges[3*R+1];return this.ranges[3*I]+O+((gt=b)-(65535&gt))/y;var gt}mapResult(b,O=1){return this._map(b,O,!1)}map(b,O=1){return this._map(b,O,!0)}_map(b,O,I){let R=0,V=this.inverted?2:1,U=this.inverted?1:2;for(let Ot=0;Ot<this.ranges.length;Ot+=3){let wt=this.ranges[Ot]-(this.inverted?R:0);if(wt>b)break;let H=this.ranges[Ot+V],a=this.ranges[Ot+U],p=wt+H;if(b<=p){let D=wt+R+((H?b==wt?-1:b==p?1:O:O)<0?0:a);if(I)return D;let w=b==(O<0?wt:p)?null:P(Ot/3,b-wt),K=b==wt?2:b==p?1:4;return(O<0?b!=wt:b!=p)&&(K|=8),new ut(D,K,w)}R+=a-H}return I?b+R:new ut(b+R,0,null)}touches(b,O){let I=0,R=g(O),V=this.inverted?2:1,U=this.inverted?1:2;for(let Ot=0;Ot<this.ranges.length;Ot+=3){let wt=this.ranges[Ot]-(this.inverted?I:0);if(wt>b)break;let H=this.ranges[Ot+V];if(b<=wt+H&&Ot==3*R)return!0;I+=this.ranges[Ot+U]-H}return!1}forEach(b){let O=this.inverted?2:1,I=this.inverted?1:2;for(let R=0,V=0;R<this.ranges.length;R+=3){let U=this.ranges[R],Ot=U-(this.inverted?V:0),wt=U+(this.inverted?0:V),H=this.ranges[R+O],a=this.ranges[R+I];b(Ot,Ot+H,wt,wt+a),V+=a-H}}invert(){return new et(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(b){return 0==b?et.empty:new et(b<0?[0,-b,0]:[0,0,b])}}et.empty=new et([]);class _t{constructor(b=[],O,I=0,R=b.length){this.maps=b,this.mirror=O,this.from=I,this.to=R}slice(b=0,O=this.maps.length){return new _t(this.maps,this.mirror,b,O)}copy(){return new _t(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(b,O){this.to=this.maps.push(b),null!=O&&this.setMirror(this.maps.length-1,O)}appendMapping(b){for(let O=0,I=this.maps.length;O<b.maps.length;O++){let R=b.getMirror(O);this.appendMap(b.maps[O],null!=R&&R<O?I+R:void 0)}}getMirror(b){if(this.mirror)for(let O=0;O<this.mirror.length;O++)if(this.mirror[O]==b)return this.mirror[O+(O%2?-1:1)]}setMirror(b,O){this.mirror||(this.mirror=[]),this.mirror.push(b,O)}appendMappingInverted(b){for(let O=b.maps.length-1,I=this.maps.length+b.maps.length;O>=0;O--){let R=b.getMirror(O);this.appendMap(b.maps[O].invert(),null!=R&&R>O?I-R-1:void 0)}}invert(){let b=new _t;return b.appendMappingInverted(this),b}map(b,O=1){if(this.mirror)return this._map(b,O,!0);for(let I=this.from;I<this.to;I++)b=this.maps[I].map(b,O);return b}mapResult(b,O=1){return this._map(b,O,!1)}_map(b,O,I){let R=0;for(let V=this.from;V<this.to;V++){let Ot=this.maps[V].mapResult(b,O);if(null!=Ot.recover){let wt=this.getMirror(V);if(null!=wt&&wt>V&&wt<this.to){V=wt,b=this.maps[wt].recover(Ot.recover);continue}}R|=Ot.delInfo,b=Ot.pos}return I?b:new ut(b,R,null)}}const Tt=Object.create(null);class bt{getMap(){return et.empty}merge(b){return null}static fromJSON(b,O){if(!O||!O.stepType)throw new RangeError("Invalid input for Step.fromJSON");let I=Tt[O.stepType];if(!I)throw new RangeError(`No step type ${O.stepType} defined`);return I.fromJSON(b,O)}static jsonID(b,O){if(b in Tt)throw new RangeError("Duplicate use of step JSON ID "+b);return Tt[b]=O,O.prototype.jsonID=b,O}}class It{constructor(b,O){this.doc=b,this.failed=O}static ok(b){return new It(b,null)}static fail(b){return new It(null,b)}static fromReplace(b,O,I,R){try{return It.ok(b.replace(O,I,R))}catch(V){if(V instanceof v.e4)return It.fail(V.message);throw V}}}function Pt(gt,b,O){let I=[];for(let R=0;R<gt.childCount;R++){let V=gt.child(R);V.content.size&&(V=V.copy(Pt(V.content,b,V))),V.isInline&&(V=b(V,O,R)),I.push(V)}return v.HY.fromArray(I)}class Dt extends bt{constructor(b,O,I){super(),this.from=b,this.to=O,this.mark=I}apply(b){let O=b.slice(this.from,this.to),I=b.resolve(this.from),R=I.node(I.sharedDepth(this.to)),V=new v.p2(Pt(O.content,(U,Ot)=>U.isAtom&&Ot.type.allowsMarkType(this.mark.type)?U.mark(this.mark.addToSet(U.marks)):U,R),O.openStart,O.openEnd);return It.fromReplace(b,this.from,this.to,V)}invert(){return new ht(this.from,this.to,this.mark)}map(b){let O=b.mapResult(this.from,1),I=b.mapResult(this.to,-1);return O.deleted&&I.deleted||O.pos>=I.pos?null:new Dt(O.pos,I.pos,this.mark)}merge(b){return b instanceof Dt&&b.mark.eq(this.mark)&&this.from<=b.to&&this.to>=b.from?new Dt(Math.min(this.from,b.from),Math.max(this.to,b.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Dt(O.from,O.to,b.markFromJSON(O.mark))}}bt.jsonID("addMark",Dt);class ht extends bt{constructor(b,O,I){super(),this.from=b,this.to=O,this.mark=I}apply(b){let O=b.slice(this.from,this.to),I=new v.p2(Pt(O.content,R=>R.mark(this.mark.removeFromSet(R.marks)),b),O.openStart,O.openEnd);return It.fromReplace(b,this.from,this.to,I)}invert(){return new Dt(this.from,this.to,this.mark)}map(b){let O=b.mapResult(this.from,1),I=b.mapResult(this.to,-1);return O.deleted&&I.deleted||O.pos>=I.pos?null:new ht(O.pos,I.pos,this.mark)}merge(b){return b instanceof ht&&b.mark.eq(this.mark)&&this.from<=b.to&&this.to>=b.from?new ht(Math.min(this.from,b.from),Math.max(this.to,b.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ht(O.from,O.to,b.markFromJSON(O.mark))}}bt.jsonID("removeMark",ht);class q extends bt{constructor(b,O){super(),this.pos=b,this.mark=O}apply(b){let O=b.nodeAt(this.pos);if(!O)return It.fail("No node at mark step's position");let I=O.type.create(O.attrs,null,this.mark.addToSet(O.marks));return It.fromReplace(b,this.pos,this.pos+1,new v.p2(v.HY.from(I),0,O.isLeaf?0:1))}invert(b){let O=b.nodeAt(this.pos);if(O){let I=this.mark.addToSet(O.marks);if(I.length==O.marks.length){for(let R=0;R<O.marks.length;R++)if(!O.marks[R].isInSet(I))return new q(this.pos,O.marks[R]);return new q(this.pos,this.mark)}}return new F(this.pos,this.mark)}map(b){let O=b.mapResult(this.pos,1);return O.deletedAfter?null:new q(O.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(b,O){if("number"!=typeof O.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new q(O.pos,b.markFromJSON(O.mark))}}bt.jsonID("addNodeMark",q);class F extends bt{constructor(b,O){super(),this.pos=b,this.mark=O}apply(b){let O=b.nodeAt(this.pos);if(!O)return It.fail("No node at mark step's position");let I=O.type.create(O.attrs,null,this.mark.removeFromSet(O.marks));return It.fromReplace(b,this.pos,this.pos+1,new v.p2(v.HY.from(I),0,O.isLeaf?0:1))}invert(b){let O=b.nodeAt(this.pos);return O&&this.mark.isInSet(O.marks)?new q(this.pos,this.mark):this}map(b){let O=b.mapResult(this.pos,1);return O.deletedAfter?null:new F(O.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(b,O){if("number"!=typeof O.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new F(O.pos,b.markFromJSON(O.mark))}}bt.jsonID("removeNodeMark",F);class mt extends bt{constructor(b,O,I,R=!1){super(),this.from=b,this.to=O,this.slice=I,this.structure=R}apply(b){return this.structure&&At(b,this.from,this.to)?It.fail("Structure replace would overwrite content"):It.fromReplace(b,this.from,this.to,this.slice)}getMap(){return new et([this.from,this.to-this.from,this.slice.size])}invert(b){return new mt(this.from,this.from+this.slice.size,b.slice(this.from,this.to))}map(b){let O=b.mapResult(this.from,1),I=b.mapResult(this.to,-1);return O.deletedAcross&&I.deletedAcross?null:new mt(O.pos,Math.max(O.pos,I.pos),this.slice)}merge(b){if(!(b instanceof mt)||b.structure||this.structure)return null;if(this.from+this.slice.size!=b.from||this.slice.openEnd||b.slice.openStart){if(b.to!=this.from||this.slice.openStart||b.slice.openEnd)return null;{let O=this.slice.size+b.slice.size==0?v.p2.empty:new v.p2(b.slice.content.append(this.slice.content),b.slice.openStart,this.slice.openEnd);return new mt(b.from,this.to,O,this.structure)}}{let O=this.slice.size+b.slice.size==0?v.p2.empty:new v.p2(this.slice.content.append(b.slice.content),this.slice.openStart,b.slice.openEnd);return new mt(this.from,this.to+(b.to-b.from),O,this.structure)}}toJSON(){let b={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(b.slice=this.slice.toJSON()),this.structure&&(b.structure=!0),b}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new mt(O.from,O.to,v.p2.fromJSON(b,O.slice),!!O.structure)}}bt.jsonID("replace",mt);class j extends bt{constructor(b,O,I,R,V,U,Ot=!1){super(),this.from=b,this.to=O,this.gapFrom=I,this.gapTo=R,this.slice=V,this.insert=U,this.structure=Ot}apply(b){if(this.structure&&(At(b,this.from,this.gapFrom)||At(b,this.gapTo,this.to)))return It.fail("Structure gap-replace would overwrite content");let O=b.slice(this.gapFrom,this.gapTo);if(O.openStart||O.openEnd)return It.fail("Gap is not a flat range");let I=this.slice.insertAt(this.insert,O.content);return I?It.fromReplace(b,this.from,this.to,I):It.fail("Content does not fit in gap")}getMap(){return new et([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(b){let O=this.gapTo-this.gapFrom;return new j(this.from,this.from+this.slice.size+O,this.from+this.insert,this.from+this.insert+O,b.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(b){let O=b.mapResult(this.from,1),I=b.mapResult(this.to,-1),R=b.map(this.gapFrom,-1),V=b.map(this.gapTo,1);return O.deletedAcross&&I.deletedAcross||R<O.pos||V>I.pos?null:new j(O.pos,I.pos,R,V,this.slice,this.insert,this.structure)}toJSON(){let b={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(b.slice=this.slice.toJSON()),this.structure&&(b.structure=!0),b}static fromJSON(b,O){if("number"!=typeof O.from||"number"!=typeof O.to||"number"!=typeof O.gapFrom||"number"!=typeof O.gapTo||"number"!=typeof O.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new j(O.from,O.to,O.gapFrom,O.gapTo,v.p2.fromJSON(b,O.slice),O.insert,!!O.structure)}}function At(gt,b,O){let I=gt.resolve(b),R=O-b,V=I.depth;for(;R>0&&V>0&&I.indexAfter(V)==I.node(V).childCount;)V--,R--;if(R>0){let U=I.node(V).maybeChild(I.indexAfter(V));for(;R>0;){if(!U||U.isLeaf)return!0;U=U.firstChild,R--}}return!1}function Ht(gt,b,O){return(0==b||gt.canReplace(b,gt.childCount))&&(O==gt.childCount||gt.canReplace(0,O))}function Kt(gt){let O=gt.parent.content.cutByIndex(gt.startIndex,gt.endIndex);for(let I=gt.depth;;--I){let R=gt.$from.node(I),V=gt.$from.index(I),U=gt.$to.indexAfter(I);if(I<gt.depth&&R.canReplace(V,U,O))return I;if(0==I||R.type.spec.isolating||!Ht(R,V,U))break}return null}function B(gt,b,O=null,I=gt){let R=function(gt,b){let{parent:O,startIndex:I,endIndex:R}=gt,V=O.contentMatchAt(I).findWrapping(b);return V&&O.canReplaceWith(I,R,V.length?V[0]:b)?V:null}(gt,b),V=R&&function(gt,b){let{parent:O,startIndex:I,endIndex:R}=gt,V=O.child(I),U=b.contentMatch.findWrapping(V.type);if(!U)return null;let wt=(U.length?U[U.length-1]:b).contentMatch;for(let H=I;wt&&H<R;H++)wt=wt.matchType(O.child(H).type);return wt&&wt.validEnd?U:null}(I,b);return V?R.map(rt).concat({type:b,attrs:O}).concat(V.map(rt)):null}function rt(gt){return{type:gt,attrs:null}}function $t(gt,b,O=1,I){let R=gt.resolve(b),V=R.depth-O,U=I&&I[I.length-1]||R.parent;if(V<0||R.parent.type.spec.isolating||!R.parent.canReplace(R.index(),R.parent.childCount)||!U.type.validContent(R.parent.content.cutByIndex(R.index(),R.parent.childCount)))return!1;for(let H=R.depth-1,a=O-2;H>V;H--,a--){let p=R.node(H),E=R.index(H);if(p.type.spec.isolating)return!1;let D=p.content.cutByIndex(E,p.childCount),w=I&&I[a]||p;if(w!=p&&(D=D.replaceChild(0,w.type.create(w.attrs))),!p.canReplace(E+1,p.childCount)||!w.type.validContent(D))return!1}let Ot=R.indexAfter(V),wt=I&&I[0];return R.node(V).canReplaceWith(Ot,Ot,wt?wt.type:R.node(V+1).type)}function ee(gt,b){let O=gt.resolve(b),I=O.index();return zt(O.nodeBefore,O.nodeAfter)&&O.parent.canReplace(I,I+1)}function zt(gt,b){return!(!gt||!b||gt.isLeaf||!gt.canAppend(b))}function ue(gt,b,O=-1){let I=gt.resolve(b);for(let R=I.depth;;R--){let V,U,Ot=I.index(R);if(R==I.depth?(V=I.nodeBefore,U=I.nodeAfter):O>0?(V=I.node(R+1),Ot++,U=I.node(R).maybeChild(Ot)):(V=I.node(R).maybeChild(Ot-1),U=I.node(R+1)),V&&!V.isTextblock&&zt(V,U)&&I.node(R).canReplace(Ot,Ot+1))return b;if(0==R)break;b=O<0?I.before(R):I.after(R)}}function he(gt,b,O){let I=gt.resolve(b);if(!O.content.size)return b;let R=O.content;for(let V=0;V<O.openStart;V++)R=R.firstChild.content;for(let V=1;V<=(0==O.openStart&&O.size?2:1);V++)for(let U=I.depth;U>=0;U--){let Ot=U==I.depth?0:I.pos<=(I.start(U+1)+I.end(U+1))/2?-1:1,wt=I.index(U)+(Ot>0?1:0),H=I.node(U),a=!1;if(1==V)a=H.canReplace(wt,wt,R);else{let p=H.contentMatchAt(wt).findWrapping(R.firstChild.type);a=p&&H.canReplaceWith(wt,wt,p[0])}if(a)return 0==Ot?I.pos:Ot<0?I.before(U+1):I.after(U+1)}return null}function Ke(gt,b,O=b,I=v.p2.empty){if(b==O&&!I.size)return null;let R=gt.resolve(b),V=gt.resolve(O);return xe(R,V,I)?new mt(b,O,I):new Be(R,V,I).fit()}function xe(gt,b,O){return!O.openStart&&!O.openEnd&&gt.start()==b.start()&&gt.parent.canReplace(gt.index(),b.index(),O.content)}bt.jsonID("replaceAround",j);class Be{constructor(b,O,I){this.$from=b,this.$to=O,this.unplaced=I,this.frontier=[],this.placed=v.HY.empty;for(let R=0;R<=b.depth;R++){let V=b.node(R);this.frontier.push({type:V.type,match:V.contentMatchAt(b.indexAfter(R))})}for(let R=b.depth;R>0;R--)this.placed=v.HY.from(b.node(R).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let H=this.findFittable();H?this.placeNodes(H):this.openMore()||this.dropNode()}let b=this.mustMoveInline(),O=this.placed.size-this.depth-this.$from.depth,I=this.$from,R=this.close(b<0?this.$to:I.doc.resolve(b));if(!R)return null;let V=this.placed,U=I.depth,Ot=R.depth;for(;U&&Ot&&1==V.childCount;)V=V.firstChild.content,U--,Ot--;let wt=new v.p2(V,U,Ot);return b>-1?new j(I.pos,b,this.$to.pos,this.$to.end(),wt,O):wt.size||I.pos!=this.$to.pos?new mt(I.pos,R.pos,wt):null}findFittable(){let b=this.unplaced.openStart;for(let O=this.unplaced.content,I=0,R=this.unplaced.openEnd;I<b;I++){let V=O.firstChild;if(O.childCount>1&&(R=0),V.type.spec.isolating&&R<=I){b=I;break}O=V.content}for(let O=1;O<=2;O++)for(let I=1==O?b:this.unplaced.openStart;I>=0;I--){let R,V=null;I?(V=ve(this.unplaced.content,I-1).firstChild,R=V.content):R=this.unplaced.content;let U=R.firstChild;for(let Ot=this.depth;Ot>=0;Ot--){let a,{type:wt,match:H}=this.frontier[Ot],p=null;if(1==O&&(U?H.matchType(U.type)||(p=H.fillBefore(v.HY.from(U),!1)):V&&wt.compatibleContent(V.type)))return{sliceDepth:I,frontierDepth:Ot,parent:V,inject:p};if(2==O&&U&&(a=H.findWrapping(U.type)))return{sliceDepth:I,frontierDepth:Ot,parent:V,wrap:a};if(V&&H.matchType(V.type))break}}}openMore(){let{content:b,openStart:O,openEnd:I}=this.unplaced,R=ve(b,O);return!(!R.childCount||R.firstChild.isLeaf||(this.unplaced=new v.p2(b,O+1,Math.max(I,R.size+O>=b.size-I?O+1:0)),0))}dropNode(){let{content:b,openStart:O,openEnd:I}=this.unplaced,R=ve(b,O);if(R.childCount<=1&&O>0){let V=b.size-O<=O+R.size;this.unplaced=new v.p2(ge(b,O-1,1),O-1,V?O-1:I)}else this.unplaced=new v.p2(ge(b,O,1),O,I)}placeNodes({sliceDepth:b,frontierDepth:O,parent:I,inject:R,wrap:V}){for(;this.depth>O;)this.closeFrontierNode();if(V)for(let K=0;K<V.length;K++)this.openFrontierNode(V[K]);let U=this.unplaced,Ot=I?I.content:U.content,wt=U.openStart-b,H=0,a=[],{match:p,type:E}=this.frontier[O];if(R){for(let K=0;K<R.childCount;K++)a.push(R.child(K));p=p.matchFragment(R)}let D=Ot.size+b-(U.content.size-U.openEnd);for(;H<Ot.childCount;){let K=Ot.child(H),lt=p.matchType(K.type);if(!lt)break;H++,(H>1||0==wt||K.content.size)&&(p=lt,a.push(Pe(K.mark(E.allowedMarks(K.marks)),1==H?wt:0,H==Ot.childCount?D:-1)))}let w=H==Ot.childCount;w||(D=-1),this.placed=Ae(this.placed,O,v.HY.from(a)),this.frontier[O].match=p,w&&D<0&&I&&I.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let K=0,lt=Ot;K<D;K++){let Rt=lt.lastChild;this.frontier.push({type:Rt.type,match:Rt.contentMatchAt(Rt.childCount)}),lt=Rt.content}this.unplaced=w?0==b?v.p2.empty:new v.p2(ge(U.content,b-1,1),b-1,D<0?U.openEnd:b-1):new v.p2(ge(U.content,b,H),U.openStart,U.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let O,b=this.frontier[this.depth];if(!b.type.isTextblock||!Ne(this.$to,this.$to.depth,b.type,b.match,!1)||this.$to.depth==this.depth&&(O=this.findCloseLevel(this.$to))&&O.depth==this.depth)return-1;let{depth:I}=this.$to,R=this.$to.after(I);for(;I>1&&R==this.$to.end(--I);)++R;return R}findCloseLevel(b){t:for(let O=Math.min(this.depth,b.depth);O>=0;O--){let{match:I,type:R}=this.frontier[O],V=O<b.depth&&b.end(O+1)==b.pos+(b.depth-(O+1)),U=Ne(b,O,R,I,V);if(U){for(let Ot=O-1;Ot>=0;Ot--){let{match:wt,type:H}=this.frontier[Ot],a=Ne(b,Ot,H,wt,!0);if(!a||a.childCount)continue t}return{depth:O,fit:U,move:V?b.doc.resolve(b.after(O+1)):b}}}}close(b){let O=this.findCloseLevel(b);if(!O)return null;for(;this.depth>O.depth;)this.closeFrontierNode();O.fit.childCount&&(this.placed=Ae(this.placed,O.depth,O.fit)),b=O.move;for(let I=O.depth+1;I<=b.depth;I++){let R=b.node(I),V=R.type.contentMatch.fillBefore(R.content,!0,b.index(I));this.openFrontierNode(R.type,R.attrs,V)}return b}openFrontierNode(b,O=null,I){let R=this.frontier[this.depth];R.match=R.match.matchType(b),this.placed=Ae(this.placed,this.depth,v.HY.from(b.create(O,I))),this.frontier.push({type:b,match:b.contentMatch})}closeFrontierNode(){let O=this.frontier.pop().match.fillBefore(v.HY.empty,!0);O.childCount&&(this.placed=Ae(this.placed,this.frontier.length,O))}}function ge(gt,b,O){return 0==b?gt.cutByIndex(O,gt.childCount):gt.replaceChild(0,gt.firstChild.copy(ge(gt.firstChild.content,b-1,O)))}function Ae(gt,b,O){return 0==b?gt.append(O):gt.replaceChild(gt.childCount-1,gt.lastChild.copy(Ae(gt.lastChild.content,b-1,O)))}function ve(gt,b){for(let O=0;O<b;O++)gt=gt.firstChild.content;return gt}function Pe(gt,b,O){if(b<=0)return gt;let I=gt.content;return b>1&&(I=I.replaceChild(0,Pe(I.firstChild,b-1,1==I.childCount?O-1:0))),b>0&&(I=gt.type.contentMatch.fillBefore(I).append(I),O<=0&&(I=I.append(gt.type.contentMatch.matchFragment(I).fillBefore(v.HY.empty,!0)))),gt.copy(I)}function Ne(gt,b,O,I,R){let V=gt.node(b),U=R?gt.indexAfter(b):gt.index(b);if(U==V.childCount&&!O.compatibleContent(V.type))return null;let Ot=I.fillBefore(V.content,!0,U);return Ot&&!function(gt,b,O){for(let I=O;I<b.childCount;I++)if(!gt.allowsMarks(b.child(I).marks))return!0;return!1}(O,V.content,U)?Ot:null}function Ie(gt){return gt.spec.defining||gt.spec.definingForContent}function He(gt,b,O,I,R){if(b<O){let V=gt.firstChild;gt=gt.replaceChild(0,V.copy(He(V.content,b+1,O,I,V)))}if(b>I){let V=R.contentMatchAt(0),U=V.fillBefore(gt).append(gt);gt=U.append(V.matchFragment(U).fillBefore(v.HY.empty,!0))}return gt}function ze(gt,b){let O=[];for(let R=Math.min(gt.depth,b.depth);R>=0;R--){let V=gt.start(R);if(V<gt.pos-(gt.depth-R)||b.end(R)>b.pos+(b.depth-R)||gt.node(R).type.spec.isolating||b.node(R).type.spec.isolating)break;(V==b.start(R)||R==gt.depth&&R==b.depth&&gt.parent.inlineContent&&b.parent.inlineContent&&R&&b.start(R-1)==V-1)&&O.push(R)}return O}class _e extends bt{constructor(b,O,I){super(),this.pos=b,this.attr=O,this.value=I}apply(b){let O=b.nodeAt(this.pos);if(!O)return It.fail("No node at attribute step's position");let I=Object.create(null);for(let V in O.attrs)I[V]=O.attrs[V];I[this.attr]=this.value;let R=O.type.create(I,null,O.marks);return It.fromReplace(b,this.pos,this.pos+1,new v.p2(v.HY.from(R),0,O.isLeaf?0:1))}getMap(){return et.empty}invert(b){return new _e(this.pos,this.attr,b.nodeAt(this.pos).attrs[this.attr])}map(b){let O=b.mapResult(this.pos,1);return O.deletedAfter?null:new _e(O.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(b,O){if("number"!=typeof O.pos||"string"!=typeof O.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new _e(O.pos,O.attr,O.value)}}bt.jsonID("attr",_e);let fe=class extends Error{};fe=function gt(b){let O=Error.call(this,b);return O.__proto__=gt.prototype,O},(fe.prototype=Object.create(Error.prototype)).constructor=fe,fe.prototype.name="TransformError";class Ee{constructor(b){this.doc=b,this.steps=[],this.docs=[],this.mapping=new _t}get before(){return this.docs.length?this.docs[0]:this.doc}step(b){let O=this.maybeStep(b);if(O.failed)throw new fe(O.failed);return this}maybeStep(b){let O=b.apply(this.doc);return O.failed||this.addStep(b,O.doc),O}get docChanged(){return this.steps.length>0}addStep(b,O){this.docs.push(this.doc),this.steps.push(b),this.mapping.appendMap(b.getMap()),this.doc=O}replace(b,O=b,I=v.p2.empty){let R=Ke(this.doc,b,O,I);return R&&this.step(R),this}replaceWith(b,O,I){return this.replace(b,O,new v.p2(v.HY.from(I),0,0))}delete(b,O){return this.replace(b,O,v.p2.empty)}insert(b,O){return this.replaceWith(b,b,O)}replaceRange(b,O,I){return function(gt,b,O,I){if(!I.size)return gt.deleteRange(b,O);let R=gt.doc.resolve(b),V=gt.doc.resolve(O);if(xe(R,V,I))return gt.step(new mt(b,O,I));let U=ze(R,gt.doc.resolve(O));0==U[U.length-1]&&U.pop();let Ot=-(R.depth+1);U.unshift(Ot);for(let E=R.depth,D=R.pos-1;E>0;E--,D--){let w=R.node(E).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;U.indexOf(E)>-1?Ot=E:R.before(E)==D&&U.splice(1,0,-E)}let wt=U.indexOf(Ot),H=[],a=I.openStart;for(let E=I.content,D=0;;D++){let w=E.firstChild;if(H.push(w),D==I.openStart)break;E=w.content}for(let E=a-1;E>=0;E--){let D=H[E].type,w=Ie(D);if(w&&R.node(wt).type!=D)a=E;else if(w||!D.isTextblock)break}for(let E=I.openStart;E>=0;E--){let D=(E+a+1)%(I.openStart+1),w=H[D];if(w)for(let K=0;K<U.length;K++){let lt=U[(K+wt)%U.length],Rt=!0;lt<0&&(Rt=!1,lt=-lt);let qt=R.node(lt-1),te=R.index(lt-1);if(qt.canReplaceWith(te,te,w.type,w.marks))return gt.replace(R.before(lt),Rt?V.after(lt):O,new v.p2(He(I.content,0,I.openStart,D),D,I.openEnd))}}let p=gt.steps.length;for(let E=U.length-1;E>=0&&(gt.replace(b,O,I),!(gt.steps.length>p));E--){let D=U[E];D<0||(b=R.before(D),O=V.after(D))}}(this,b,O,I),this}replaceRangeWith(b,O,I){return function(gt,b,O,I){if(!I.isInline&&b==O&&gt.doc.resolve(b).parent.content.size){let R=function(gt,b,O){let I=gt.resolve(b);if(I.parent.canReplaceWith(I.index(),I.index(),O))return b;if(0==I.parentOffset)for(let R=I.depth-1;R>=0;R--){let V=I.index(R);if(I.node(R).canReplaceWith(V,V,O))return I.before(R+1);if(V>0)return null}if(I.parentOffset==I.parent.content.size)for(let R=I.depth-1;R>=0;R--){let V=I.indexAfter(R);if(I.node(R).canReplaceWith(V,V,O))return I.after(R+1);if(V<I.node(R).childCount)return null}return null}(gt.doc,b,I.type);null!=R&&(b=O=R)}gt.replaceRange(b,O,new v.p2(v.HY.from(I),0,0))}(this,b,O,I),this}deleteRange(b,O){return function(gt,b,O){let I=gt.doc.resolve(b),R=gt.doc.resolve(O),V=ze(I,R);for(let U=0;U<V.length;U++){let Ot=V[U],wt=U==V.length-1;if(wt&&0==Ot||I.node(Ot).type.contentMatch.validEnd)return gt.delete(I.start(Ot),R.end(Ot));if(Ot>0&&(wt||I.node(Ot-1).canReplace(I.index(Ot-1),R.indexAfter(Ot-1))))return gt.delete(I.before(Ot),R.after(Ot))}for(let U=1;U<=I.depth&&U<=R.depth;U++)if(b-I.start(U)==I.depth-U&&O>I.end(U)&&R.end(U)-O!=R.depth-U)return gt.delete(I.before(U),O);gt.delete(b,O)}(this,b,O),this}lift(b,O){return function(gt,b,O){let{$from:I,$to:R,depth:V}=b,U=I.before(V+1),Ot=R.after(V+1),wt=U,H=Ot,a=v.HY.empty,p=0;for(let w=V,K=!1;w>O;w--)K||I.index(w)>0?(K=!0,a=v.HY.from(I.node(w).copy(a)),p++):wt--;let E=v.HY.empty,D=0;for(let w=V,K=!1;w>O;w--)K||R.after(w+1)<R.end(w)?(K=!0,E=v.HY.from(R.node(w).copy(E)),D++):H++;gt.step(new j(wt,H,U,Ot,new v.p2(a.append(E),p,D),a.size-p,!0))}(this,b,O),this}join(b,O=1){return function(gt,b,O){let I=new mt(b-O,b+O,v.p2.empty,!0);gt.step(I)}(this,b,O),this}wrap(b,O){return function(gt,b,O){let I=v.HY.empty;for(let U=O.length-1;U>=0;U--){if(I.size){let Ot=O[U].type.contentMatch.matchFragment(I);if(!Ot||!Ot.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}I=v.HY.from(O[U].type.create(O[U].attrs,I))}let R=b.start,V=b.end;gt.step(new j(R,V,R,V,new v.p2(I,0,0),O.length,!0))}(this,b,O),this}setBlockType(b,O=b,I,R=null){return function(gt,b,O,I,R){if(!I.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let V=gt.steps.length;gt.doc.nodesBetween(b,O,(U,Ot)=>{if(U.isTextblock&&!U.hasMarkup(I,R)&&function(gt,b,O){let I=gt.resolve(b),R=I.index();return I.parent.canReplaceWith(R,R+1,O)}(gt.doc,gt.mapping.slice(V).map(Ot),I)){gt.clearIncompatible(gt.mapping.slice(V).map(Ot,1),I);let wt=gt.mapping.slice(V),H=wt.map(Ot,1),a=wt.map(Ot+U.nodeSize,1);return gt.step(new j(H,a,H+1,a-1,new v.p2(v.HY.from(I.create(R,null,U.marks)),0,0),1,!0)),!1}})}(this,b,O,I,R),this}setNodeMarkup(b,O,I=null,R){return function(gt,b,O,I,R){let V=gt.doc.nodeAt(b);if(!V)throw new RangeError("No node at given position");O||(O=V.type);let U=O.create(I,null,R||V.marks);if(V.isLeaf)return gt.replaceWith(b,b+V.nodeSize,U);if(!O.validContent(V.content))throw new RangeError("Invalid content for node type "+O.name);gt.step(new j(b,b+V.nodeSize,b+1,b+V.nodeSize-1,new v.p2(v.HY.from(U),0,0),1,!0))}(this,b,O,I,R),this}setNodeAttribute(b,O,I){return this.step(new _e(b,O,I)),this}addNodeMark(b,O){return this.step(new q(b,O)),this}removeNodeMark(b,O){if(!(O instanceof v.vc)){let I=this.doc.nodeAt(b);if(!I)throw new RangeError("No node at position "+b);if(!(O=O.isInSet(I.marks)))return this}return this.step(new F(b,O)),this}split(b,O=1,I){return function(gt,b,O=1,I){let R=gt.doc.resolve(b),V=v.HY.empty,U=v.HY.empty;for(let Ot=R.depth,wt=R.depth-O,H=O-1;Ot>wt;Ot--,H--){V=v.HY.from(R.node(Ot).copy(V));let a=I&&I[H];U=v.HY.from(a?a.type.create(a.attrs,U):R.node(Ot).copy(U))}gt.step(new mt(b,b,new v.p2(V.append(U),O,O),!0))}(this,b,O,I),this}addMark(b,O,I){return function(gt,b,O,I){let U,Ot,R=[],V=[];gt.doc.nodesBetween(b,O,(wt,H,a)=>{if(!wt.isInline)return;let p=wt.marks;if(!I.isInSet(p)&&a.type.allowsMarkType(I.type)){let E=Math.max(H,b),D=Math.min(H+wt.nodeSize,O),w=I.addToSet(p);for(let K=0;K<p.length;K++)p[K].isInSet(w)||(U&&U.to==E&&U.mark.eq(p[K])?U.to=D:R.push(U=new ht(E,D,p[K])));Ot&&Ot.to==E?Ot.to=D:V.push(Ot=new Dt(E,D,I))}}),R.forEach(wt=>gt.step(wt)),V.forEach(wt=>gt.step(wt))}(this,b,O,I),this}removeMark(b,O,I){return function(gt,b,O,I){let R=[],V=0;gt.doc.nodesBetween(b,O,(U,Ot)=>{if(!U.isInline)return;V++;let wt=null;if(I instanceof v.ZU){let a,H=U.marks;for(;a=I.isInSet(H);)(wt||(wt=[])).push(a),H=a.removeFromSet(H)}else I?I.isInSet(U.marks)&&(wt=[I]):wt=U.marks;if(wt&&wt.length){let H=Math.min(Ot+U.nodeSize,O);for(let a=0;a<wt.length;a++){let E,p=wt[a];for(let D=0;D<R.length;D++){let w=R[D];w.step==V-1&&p.eq(R[D].style)&&(E=w)}E?(E.to=H,E.step=V):R.push({style:p,from:Math.max(Ot,b),to:H,step:V})}}}),R.forEach(U=>gt.step(new ht(U.from,U.to,U.style)))}(this,b,O,I),this}clearIncompatible(b,O,I){return function(gt,b,O,I=O.contentMatch){let R=gt.doc.nodeAt(b),V=[],U=b+1;for(let Ot=0;Ot<R.childCount;Ot++){let wt=R.child(Ot),H=U+wt.nodeSize,a=I.matchType(wt.type);if(a){I=a;for(let p=0;p<wt.marks.length;p++)O.allowsMarkType(wt.marks[p].type)||gt.step(new ht(U,H,wt.marks[p]))}else V.push(new mt(U,H,v.p2.empty));U=H}if(!I.validEnd){let Ot=I.fillBefore(v.HY.empty,!0);gt.replace(U,U,new v.p2(Ot,0,0))}for(let Ot=V.length-1;Ot>=0;Ot--)gt.step(V[Ot])}(this,b,O,I),this}}},43594:(jt,Mt,c)=>{c.d(Mt,{EH:()=>$e,p:()=>on,tk:()=>Ro});var v=c(62463),l=c(77346),y=c(38480);const P=function(r){for(var o=0;;o++)if(!(r=r.previousSibling))return o},g=function(r){let o=r.assignedSlot||r.parentNode;return o&&11==o.nodeType?o.host:o};let it=null;const N=function(r,o,s){let d=it||(it=document.createRange());return d.setEnd(r,null==s?r.nodeValue.length:s),d.setStart(r,o||0),d},X=function(r,o,s,d){return s&&(ft(r,o,s,d,-1)||ft(r,o,s,d,1))},tt=/^(img|br|input|textarea|hr)$/i;function ft(r,o,s,d,e){for(;;){if(r==s&&o==d)return!0;if(o==(e<0?0:ut(r))){let t=r.parentNode;if(!t||1!=t.nodeType||_t(r)||tt.test(r.nodeName)||"false"==r.contentEditable)return!1;o=P(r)+(e<0?0:1),r=t}else{if(1!=r.nodeType)return!1;if("false"==(r=r.childNodes[o+(e<0?-1:0)]).contentEditable)return!1;o=e<0?ut(r):0}}}function ut(r){return 3==r.nodeType?r.nodeValue.length:r.childNodes.length}function _t(r){let o;for(let s=r;s&&!(o=s.pmViewDesc);s=s.parentNode);return o&&o.node&&o.node.isBlock&&(o.dom==r||o.contentDOM==r)}const Tt=function(r){return r.focusNode&&X(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)};function bt(r,o){let s=document.createEvent("Event");return s.initEvent("keydown",!0,!0),s.keyCode=r,s.key=s.code=o,s}const Pt="undefined"!=typeof navigator?navigator:null,Dt="undefined"!=typeof document?document:null,ht=Pt&&Pt.userAgent||"",q=/Edge\/(\d+)/.exec(ht),F=/MSIE \d/.exec(ht),mt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ht),j=!!(F||mt||q),At=F?document.documentMode:mt?+mt[1]:q?+q[1]:0,St=!j&&/gecko\/(\d+)/i.test(ht);St&&/Firefox\/(\d+)/.exec(ht);const Et=!j&&/Chrome\/(\d+)/.exec(ht),Lt=!!Et,Ht=Et?+Et[1]:0,Kt=!j&&!!Pt&&/Apple Computer/.test(Pt.vendor),pt=Kt&&(/Mobile\/\w+/.test(ht)||!!Pt&&Pt.maxTouchPoints>2),B=pt||!!Pt&&/Mac/.test(Pt.platform),rt=/Android \d/.test(ht),at=!!Dt&&"webkitFontSmoothing"in Dt.documentElement.style,st=at?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function J(r){return{left:0,right:r.documentElement.clientWidth,top:0,bottom:r.documentElement.clientHeight}}function Q(r,o){return"number"==typeof r?r:r[o]}function ot(r){let o=r.getBoundingClientRect();return{left:o.left,right:o.left+r.clientWidth*(o.width/r.offsetWidth||1),top:o.top,bottom:o.top+r.clientHeight*(o.height/r.offsetHeight||1)}}function kt(r,o,s){let d=r.someProp("scrollThreshold")||0,e=r.someProp("scrollMargin")||5,t=r.dom.ownerDocument;for(let n=s||r.dom;n;n=g(n)){if(1!=n.nodeType)continue;let i=n,u=i==t.body,h=u?J(t):ot(i),T=0,A=0;if(o.top<h.top+Q(d,"top")?A=-(h.top-o.top+Q(e,"top")):o.bottom>h.bottom-Q(d,"bottom")&&(A=o.bottom-h.bottom+Q(e,"bottom")),o.left<h.left+Q(d,"left")?T=-(h.left-o.left+Q(e,"left")):o.right>h.right-Q(d,"right")&&(T=o.right-h.right+Q(e,"right")),T||A)if(u)t.defaultView.scrollBy(T,A);else{let k=i.scrollLeft,z=i.scrollTop;A&&(i.scrollTop+=A),T&&(i.scrollLeft+=T);let Z=i.scrollLeft-k,nt=i.scrollTop-z;o={left:o.left-Z,top:o.top-nt,right:o.right-Z,bottom:o.bottom-nt}}if(u)break}}function Yt(r){let o=[],s=r.ownerDocument;for(let d=r;d&&(o.push({dom:d,top:d.scrollTop,left:d.scrollLeft}),r!=s);d=g(d));return o}function zt(r,o){for(let s=0;s<r.length;s++){let{dom:d,top:e,left:t}=r[s];d.scrollTop!=e+o&&(d.scrollTop=e+o),d.scrollLeft!=t&&(d.scrollLeft=t)}}let ue=null;function Oe(r,o){let s,e,d=2e8,t=0,n=o.top,i=o.top;for(let u=r.firstChild,h=0;u;u=u.nextSibling,h++){let T;if(1==u.nodeType)T=u.getClientRects();else{if(3!=u.nodeType)continue;T=N(u).getClientRects()}for(let A=0;A<T.length;A++){let k=T[A];if(k.top<=n&&k.bottom>=i){n=Math.max(k.bottom,n),i=Math.min(k.top,i);let z=k.left>o.left?k.left-o.left:k.right<o.left?o.left-k.right:0;if(z<d){s=u,d=z,e=z&&3==s.nodeType?{left:k.right<o.left?k.right:k.left,top:o.top}:o,1==u.nodeType&&z&&(t=h+(o.left>=(k.left+k.right)/2?1:0));continue}}!s&&(o.left>=k.right&&o.top>=k.top||o.left>=k.left&&o.top>=k.bottom)&&(t=h+1)}}return s&&3==s.nodeType?function(r,o){let s=r.nodeValue.length,d=document.createRange();for(let e=0;e<s;e++){d.setEnd(r,e+1),d.setStart(r,e);let t=Pe(d,1);if(t.top!=t.bottom&&Ke(o,t))return{node:r,offset:e+(o.left>=(t.left+t.right)/2?1:0)}}return{node:r,offset:0}}(s,e):!s||d&&1==s.nodeType?{node:r,offset:t}:Oe(s,e)}function Ke(r,o){return r.left>=o.left-1&&r.left<=o.right+1&&r.top>=o.top-1&&r.top<=o.bottom+1}function Ae(r,o,s){let d=r.childNodes.length;if(d&&s.top<s.bottom)for(let e=Math.max(0,Math.min(d-1,Math.floor(d*(o.top-s.top)/(s.bottom-s.top))-2)),t=e;;){let n=r.childNodes[t];if(1==n.nodeType){let i=n.getClientRects();for(let u=0;u<i.length;u++){let h=i[u];if(Ke(o,h))return Ae(n,o,h)}}if((t=(t+1)%d)==e)break}return r}function ve(r,o){let d,s=r.dom.ownerDocument,e=0;if(s.caretPositionFromPoint)try{let u=s.caretPositionFromPoint(o.left,o.top);u&&({offsetNode:d,offset:e}=u)}catch(u){}if(!d&&s.caretRangeFromPoint){let u=s.caretRangeFromPoint(o.left,o.top);u&&({startContainer:d,startOffset:e}=u)}let n,t=(r.root.elementFromPoint?r.root:s).elementFromPoint(o.left,o.top);if(!t||!r.dom.contains(1!=t.nodeType?t.parentNode:t)){let u=r.dom.getBoundingClientRect();if(!Ke(o,u)||(t=Ae(r.dom,o,u),!t))return null}if(Kt)for(let u=t;d&&u;u=g(u))u.draggable&&(d=void 0);if(t=function(r,o){let s=r.parentNode;return s&&/^li$/i.test(s.nodeName)&&o.left<r.getBoundingClientRect().left?s:r}(t,o),d){if(St&&1==d.nodeType&&(e=Math.min(e,d.childNodes.length),e<d.childNodes.length)){let h,u=d.childNodes[e];"IMG"==u.nodeName&&(h=u.getBoundingClientRect()).right<=o.left&&h.bottom>o.top&&e++}d==r.dom&&e==d.childNodes.length-1&&1==d.lastChild.nodeType&&o.top>d.lastChild.getBoundingClientRect().bottom?n=r.state.doc.content.size:(0==e||1!=d.nodeType||"BR"!=d.childNodes[e-1].nodeName)&&(n=function(r,o,s,d){let e=-1;for(let t=o,n=!1;t!=r.dom;){let i=r.docView.nearestDesc(t,!0);if(!i)return null;if(1==i.dom.nodeType&&(i.node.isBlock&&i.parent&&!n||!i.contentDOM)){let u=i.dom.getBoundingClientRect();if(i.node.isBlock&&i.parent&&!n&&(n=!0,u.left>d.left||u.top>d.top?e=i.posBefore:(u.right<d.left||u.bottom<d.top)&&(e=i.posAfter)),!i.contentDOM&&e<0)return(i.node.isBlock?d.top<(u.top+u.bottom)/2:d.left<(u.left+u.right)/2)?i.posBefore:i.posAfter}t=i.dom.parentNode}return e>-1?e:r.docView.posFromDOM(o,s,-1)}(r,d,e,o))}null==n&&(n=function(r,o,s){let{node:d,offset:e}=Oe(o,s),t=-1;if(1==d.nodeType&&!d.firstChild){let n=d.getBoundingClientRect();t=n.left!=n.right&&s.left>(n.left+n.right)/2?1:-1}return r.docView.posFromDOM(d,e,t)}(r,t,o));let i=r.docView.nearestDesc(t,!0);return{pos:n,inside:i?i.posAtStart-i.border:-1}}function Pe(r,o){let s=r.getClientRects();return s.length?s[o<0?0:s.length-1]:r.getBoundingClientRect()}const Ne=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Me(r,o,s){let{node:d,offset:e,atom:t}=r.docView.domFromPos(o,s<0?-1:1),n=at||St;if(3==d.nodeType){if(!n||!Ne.test(d.nodeValue)&&(s<0?e:e!=d.nodeValue.length)){let u=e,h=e,T=s<0?1:-1;return s<0&&!e?(h++,T=-1):s>=0&&e==d.nodeValue.length?(u--,T=1):s<0?u--:h++,Ie(Pe(N(d,u,h),1),T<0)}{let u=Pe(N(d,e,e),s);if(St&&e&&/\s/.test(d.nodeValue[e-1])&&e<d.nodeValue.length){let h=Pe(N(d,e-1,e-1),-1);if(h.top==u.top){let T=Pe(N(d,e,e+1),-1);if(T.top!=u.top)return Ie(T,T.left<h.left)}}return u}}if(!r.state.doc.resolve(o-(t||0)).parent.inlineContent){if(null==t&&e&&(s<0||e==ut(d))){let u=d.childNodes[e-1];if(1==u.nodeType)return Ze(u.getBoundingClientRect(),!1)}if(null==t&&e<ut(d)){let u=d.childNodes[e];if(1==u.nodeType)return Ze(u.getBoundingClientRect(),!0)}return Ze(d.getBoundingClientRect(),s>=0)}if(null==t&&e&&(s<0||e==ut(d))){let u=d.childNodes[e-1],h=3==u.nodeType?N(u,ut(u)-(n?0:1)):1!=u.nodeType||"BR"==u.nodeName&&u.nextSibling?null:u;if(h)return Ie(Pe(h,1),!1)}if(null==t&&e<ut(d)){let u=d.childNodes[e];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let h=u?3==u.nodeType?N(u,0,n?0:1):1==u.nodeType?u:null:null;if(h)return Ie(Pe(h,-1),!0)}return Ie(Pe(3==d.nodeType?N(d):d,-s),s>=0)}function Ie(r,o){if(0==r.width)return r;let s=o?r.left:r.right;return{top:r.top,bottom:r.bottom,left:s,right:s}}function Ze(r,o){if(0==r.height)return r;let s=o?r.top:r.bottom;return{top:s,bottom:s,left:r.left,right:r.right}}function He(r,o,s){let d=r.state,e=r.root.activeElement;d!=o&&r.updateState(o),e!=r.dom&&r.focus();try{return s()}finally{d!=o&&r.updateState(d),e!=r.dom&&e&&e.focus()}}const Le=/[\u0590-\u08ac]/;let _e=null,fe=null,Ee=!1;class V{constructor(o,s,d,e){this.parent=o,this.children=s,this.dom=d,this.contentDOM=e,this.dirty=0,d.pmViewDesc=this}matchesWidget(o){return!1}matchesMark(o){return!1}matchesNode(o,s,d){return!1}matchesHack(o){return!1}parseRule(){return null}stopEvent(o){return!1}get size(){let o=0;for(let s=0;s<this.children.length;s++)o+=this.children[s].size;return o}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let o=0;o<this.children.length;o++)this.children[o].destroy()}posBeforeChild(o){for(let s=0,d=this.posAtStart;;s++){let e=this.children[s];if(e==o)return d;d+=e.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(o,s,d){if(this.contentDOM&&this.contentDOM.contains(1==o.nodeType?o:o.parentNode)){if(d<0){let t,n;if(o==this.contentDOM)t=o.childNodes[s-1];else{for(;o.parentNode!=this.contentDOM;)o=o.parentNode;t=o.previousSibling}for(;t&&(!(n=t.pmViewDesc)||n.parent!=this);)t=t.previousSibling;return t?this.posBeforeChild(n)+n.size:this.posAtStart}{let t,n;if(o==this.contentDOM)t=o.childNodes[s];else{for(;o.parentNode!=this.contentDOM;)o=o.parentNode;t=o.nextSibling}for(;t&&(!(n=t.pmViewDesc)||n.parent!=this);)t=t.nextSibling;return t?this.posBeforeChild(n):this.posAtEnd}}let e;if(o==this.dom&&this.contentDOM)e=s>P(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))e=2&o.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==s)for(let t=o;;t=t.parentNode){if(t==this.dom){e=!1;break}if(t.previousSibling)break}if(null==e&&s==o.childNodes.length)for(let t=o;;t=t.parentNode){if(t==this.dom){e=!0;break}if(t.nextSibling)break}}return(null==e?d>0:e)?this.posAtEnd:this.posAtStart}nearestDesc(o,s=!1){for(let d=!0,e=o;e;e=e.parentNode){let n,t=this.getDesc(e);if(t&&(!s||t.node)){if(!d||!(n=t.nodeDOM)||(1==n.nodeType?n.contains(1==o.nodeType?o:o.parentNode):n==o))return t;d=!1}}}getDesc(o){let s=o.pmViewDesc;for(let d=s;d;d=d.parent)if(d==this)return s}posFromDOM(o,s,d){for(let e=o;e;e=e.parentNode){let t=this.getDesc(e);if(t)return t.localPosFromDOM(o,s,d)}return-1}descAt(o){for(let s=0,d=0;s<this.children.length;s++){let e=this.children[s],t=d+e.size;if(d==o&&t!=d){for(;!e.border&&e.children.length;)e=e.children[0];return e}if(o<t)return e.descAt(o-d-e.border);d=t}}domFromPos(o,s){if(!this.contentDOM)return{node:this.dom,offset:0,atom:o+1};let t,d=0,e=0;for(let t=0;d<this.children.length;d++){let n=this.children[d],i=t+n.size;if(i>o||n instanceof E){e=o-t;break}t=i}if(e)return this.children[d].domFromPos(e-this.children[d].border,s);for(;d&&!(t=this.children[d-1]).size&&t instanceof U&&t.side>=0;d--);if(s<=0){let t,n=!0;for(;t=d?this.children[d-1]:null,t&&t.dom.parentNode!=this.contentDOM;d--,n=!1);return t&&s&&n&&!t.border&&!t.domAtom?t.domFromPos(t.size,s):{node:this.contentDOM,offset:t?P(t.dom)+1:0}}{let t,n=!0;for(;t=d<this.children.length?this.children[d]:null,t&&t.dom.parentNode!=this.contentDOM;d++,n=!1);return t&&n&&!t.border&&!t.domAtom?t.domFromPos(0,s):{node:this.contentDOM,offset:t?P(t.dom):this.contentDOM.childNodes.length}}}parseRange(o,s,d=0){if(0==this.children.length)return{node:this.contentDOM,from:o,to:s,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let e=-1,t=-1;for(let n=d,i=0;;i++){let u=this.children[i],h=n+u.size;if(-1==e&&o<=h){let T=n+u.border;if(o>=T&&s<=h-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(o,s,T);o=n;for(let A=i;A>0;A--){let k=this.children[A-1];if(k.size&&k.dom.parentNode==this.contentDOM&&!k.emptyChildAt(1)){e=P(k.dom)+1;break}o-=k.size}-1==e&&(e=0)}if(e>-1&&(h>s||i==this.children.length-1)){s=h;for(let T=i+1;T<this.children.length;T++){let A=this.children[T];if(A.size&&A.dom.parentNode==this.contentDOM&&!A.emptyChildAt(-1)){t=P(A.dom);break}s+=A.size}-1==t&&(t=this.contentDOM.childNodes.length);break}n=h}return{node:this.contentDOM,from:o,to:s,fromOffset:e,toOffset:t}}emptyChildAt(o){if(this.border||!this.contentDOM||!this.children.length)return!1;let s=this.children[o<0?0:this.children.length-1];return 0==s.size||s.emptyChildAt(o)}domAfterPos(o){let{node:s,offset:d}=this.domFromPos(o,0);if(1!=s.nodeType||d==s.childNodes.length)throw new RangeError("No node after pos "+o);return s.childNodes[d]}setSelection(o,s,d,e=!1){let t=Math.min(o,s),n=Math.max(o,s);for(let k=0,z=0;k<this.children.length;k++){let Z=this.children[k],nt=z+Z.size;if(t>z&&n<nt)return Z.setSelection(o-z-Z.border,s-z-Z.border,d,e);z=nt}let i=this.domFromPos(o,o?-1:1),u=s==o?i:this.domFromPos(s,s?-1:1),h=d.getSelection(),T=!1;if((St||Kt)&&o==s){let{node:k,offset:z}=i;if(3==k.nodeType){if(T=!(!z||"\n"!=k.nodeValue[z-1]),T&&z==k.nodeValue.length)for(let nt,Z=k;Z;Z=Z.parentNode){if(nt=Z.nextSibling){"BR"==nt.nodeName&&(i=u={node:nt.parentNode,offset:P(nt)+1});break}let dt=Z.pmViewDesc;if(dt&&dt.node&&dt.node.isBlock)break}}else{let Z=k.childNodes[z-1];T=Z&&("BR"==Z.nodeName||"false"==Z.contentEditable)}}if(St&&h.focusNode&&h.focusNode!=u.node&&1==h.focusNode.nodeType){let k=h.focusNode.childNodes[h.focusOffset];k&&"false"==k.contentEditable&&(e=!0)}if(!(e||T&&Kt)&&X(i.node,i.offset,h.anchorNode,h.anchorOffset)&&X(u.node,u.offset,h.focusNode,h.focusOffset))return;let A=!1;if((h.extend||o==s)&&!T){h.collapse(i.node,i.offset);try{o!=s&&h.extend(u.node,u.offset),A=!0}catch(k){}}if(!A){if(o>s){let z=i;i=u,u=z}let k=document.createRange();k.setEnd(u.node,u.offset),k.setStart(i.node,i.offset),h.removeAllRanges(),h.addRange(k)}}ignoreMutation(o){return!this.contentDOM&&"selection"!=o.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(o,s){for(let d=0,e=0;e<this.children.length;e++){let t=this.children[e],n=d+t.size;if(d==n?o<=n&&s>=d:o<n&&s>d){let i=d+t.border,u=n-t.border;if(o>=i&&s<=u)return this.dirty=o==d||s==n?2:1,void(o!=i||s!=u||!t.contentLost&&t.dom.parentNode==this.contentDOM?t.markDirty(o-i,s-i):t.dirty=3);t.dirty=t.dom!=t.contentDOM||t.dom.parentNode!=this.contentDOM||t.children.length?3:2}d=n}this.dirty=2}markParentsDirty(){let o=1;for(let s=this.parent;s;s=s.parent,o++){let d=1==o?2:1;s.dirty<d&&(s.dirty=d)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class U extends V{constructor(o,s,d,e){let t,n=s.type.toDOM;if("function"==typeof n&&(n=n(d,()=>t?t.parent?t.parent.posBeforeChild(t):void 0:e)),!s.type.spec.raw){if(1!=n.nodeType){let i=document.createElement("span");i.appendChild(n),n=i}n.contentEditable="false",n.classList.add("ProseMirror-widget")}super(o,[],n,null),this.widget=s,this.widget=s,t=this}matchesWidget(o){return 0==this.dirty&&o.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(o){let s=this.widget.spec.stopEvent;return!!s&&s(o)}ignoreMutation(o){return"selection"!=o.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Ot extends V{constructor(o,s,d,e){super(o,[],s,null),this.textDOM=d,this.text=e}get size(){return this.text.length}localPosFromDOM(o,s){return o!=this.textDOM?this.posAtStart+(s?this.size:0):this.posAtStart+s}domFromPos(o){return{node:this.textDOM,offset:o}}ignoreMutation(o){return"characterData"===o.type&&o.target.nodeValue==o.oldValue}}class wt extends V{constructor(o,s,d,e){super(o,[],d,e),this.mark=s}static create(o,s,d,e){let t=e.nodeViews[s.type.name],n=t&&t(s,e,d);return(!n||!n.dom)&&(n=l.PW.renderSpec(document,s.type.spec.toDOM(s,d))),new wt(o,s,n.dom,n.contentDOM||n.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(o){return 3!=this.dirty&&this.mark.eq(o)}markDirty(o,s){if(super.markDirty(o,s),0!=this.dirty){let d=this.parent;for(;!d.node;)d=d.parent;d.dirty<this.dirty&&(d.dirty=this.dirty),this.dirty=0}}slice(o,s,d){let e=wt.create(this.parent,this.mark,!0,d),t=this.children,n=this.size;s<n&&(t=ne(t,s,n,d)),o>0&&(t=ne(t,0,o,d));for(let i=0;i<t.length;i++)t[i].parent=e;return e.children=t,e}}class H extends V{constructor(o,s,d,e,t,n,i,u,h){super(o,[],t,n),this.node=s,this.outerDeco=d,this.innerDeco=e,this.nodeDOM=i,n&&this.updateChildren(u,h)}static create(o,s,d,e,t,n){let u,i=t.nodeViews[s.type.name],h=i&&i(s,t,()=>u?u.parent?u.parent.posBeforeChild(u):void 0:n,d,e),T=h&&h.dom,A=h&&h.contentDOM;if(s.isText)if(T){if(3!=T.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else T=document.createTextNode(s.text);else T||({dom:T,contentDOM:A}=l.PW.renderSpec(document,s.type.spec.toDOM(s)));!A&&!s.isText&&"BR"!=T.nodeName&&(T.hasAttribute("contenteditable")||(T.contentEditable="false"),s.type.spec.draggable&&(T.draggable=!0));let k=T;return T=ke(T,d,s),h?u=new D(o,s,d,e,T,A||null,k,h,t,n+1):s.isText?new p(o,s,d,e,T,k,t):new H(o,s,d,e,T,A||null,k,t,n+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let o={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(o.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let s=this.children.length-1;s>=0;s--){let d=this.children[s];if(this.dom.contains(d.dom.parentNode)){o.contentElement=d.dom.parentNode;break}}o.contentElement||(o.getContent=()=>l.HY.empty)}else o.contentElement=this.contentDOM;else o.getContent=()=>this.node.content;return o}matchesNode(o,s,d){return 0==this.dirty&&o.eq(this.node)&&Je(s,this.outerDeco)&&d.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(o,s){let d=this.node.inlineContent,e=s,t=o.composing?this.localCompositionInfo(o,s):null,n=t&&t.pos>-1?t:null,i=t&&t.pos<0,u=new S(this,n&&n.node,o);(function(r,o,s,d){let e=o.locals(r),t=0;if(0==e.length){for(let h=0;h<r.childCount;h++){let T=r.child(h);d(T,e,o.forChild(t,T),h),t+=T.nodeSize}return}let n=0,i=[],u=null;for(let h=0;;){if(n<e.length&&e[n].to==t){let nt,Z=e[n++];for(;n<e.length&&e[n].to==t;)(nt||(nt=[Z])).push(e[n++]);if(nt){nt.sort(Ct);for(let dt=0;dt<nt.length;dt++)s(nt[dt],h,!!u)}else s(Z,h,!!u)}let T,A;if(u)A=-1,T=u,u=null;else{if(!(h<r.childCount))break;A=h,T=r.child(h++)}for(let Z=0;Z<i.length;Z++)i[Z].to<=t&&i.splice(Z--,1);for(;n<e.length&&e[n].from<=t&&e[n].to>t;)i.push(e[n++]);let k=t+T.nodeSize;if(T.isText){let Z=k;n<e.length&&e[n].from<Z&&(Z=e[n].from);for(let nt=0;nt<i.length;nt++)i[nt].to<Z&&(Z=i[nt].to);Z<k&&(u=T.cut(Z-t),T=T.cut(0,Z-t),k=Z,A=-1)}d(T,T.isInline&&!T.isLeaf?i.filter(Z=>!Z.inline):i.slice(),o.forChild(t,T),A),t=k}})(this.node,this.innerDeco,(h,T,A)=>{h.spec.marks?u.syncToMarks(h.spec.marks,d,o):h.type.side>=0&&!A&&u.syncToMarks(T==this.node.childCount?l.vc.none:this.node.child(T).marks,d,o),u.placeWidget(h,o,e)},(h,T,A,k)=>{let z;u.syncToMarks(h.marks,d,o),u.findNodeMatch(h,T,A,k)||i&&o.state.selection.from>e&&o.state.selection.to<e+h.nodeSize&&(z=u.findIndexWithChild(t.node))>-1&&u.updateNodeAt(h,T,A,z,o)||u.updateNextNode(h,T,A,o,k)||u.addNode(h,T,A,o,e),e+=h.nodeSize}),u.syncToMarks([],d,o),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||2==this.dirty)&&(n&&this.protectLocalComposition(o,n),w(this.contentDOM,this.children,o),pt&&function(r){if("UL"==r.nodeName||"OL"==r.nodeName){let o=r.style.cssText;r.style.cssText=o+"; list-style: square !important",window.getComputedStyle(r),r.style.cssText=o}}(this.dom))}localCompositionInfo(o,s){let{from:d,to:e}=o.state.selection;if(!(o.state.selection instanceof v.Bs)||d<s||e>s+this.node.content.size)return null;let t=o.domSelectionRange(),n=function(r,o){for(;;){if(3==r.nodeType)return r;if(1==r.nodeType&&o>0){if(r.childNodes.length>o&&3==r.childNodes[o].nodeType)return r.childNodes[o];o=ut(r=r.childNodes[o-1])}else{if(!(1==r.nodeType&&o<r.childNodes.length))return null;r=r.childNodes[o],o=0}}}(t.focusNode,t.focusOffset);if(!n||!this.dom.contains(n.parentNode))return null;if(this.node.inlineContent){let i=n.nodeValue,u=function(r,o,s,d){for(let e=0,t=0;e<r.childCount&&t<=d;){let n=r.child(e++),i=t;if(t+=n.nodeSize,!n.isText)continue;let u=n.text;for(;e<r.childCount;){let h=r.child(e++);if(t+=h.nodeSize,!h.isText)break;u+=h.text}if(t>=s){let h=i<d?u.lastIndexOf(o,d-i-1):-1;if(h>=0&&h+o.length+i>=s)return i+h;if(s==d&&u.length>=d+o.length-i&&u.slice(d-i,d-i+o.length)==o)return d}}return-1}(this.node.content,i,d-s,e-s);return u<0?null:{node:n,pos:u,text:i}}return{node:n,pos:-1,text:""}}protectLocalComposition(o,{node:s,pos:d,text:e}){if(this.getDesc(s))return;let t=s;for(;t.parentNode!=this.contentDOM;t=t.parentNode){for(;t.previousSibling;)t.parentNode.removeChild(t.previousSibling);for(;t.nextSibling;)t.parentNode.removeChild(t.nextSibling);t.pmViewDesc&&(t.pmViewDesc=void 0)}let n=new Ot(this,t,s,e);o.input.compositionNodes.push(n),this.children=ne(this.children,d,d+e.length,o,n)}update(o,s,d,e){return!(3==this.dirty||!o.sameMarkup(this.node)||(this.updateInner(o,s,d,e),0))}updateInner(o,s,d,e){this.updateOuterDeco(s),this.node=o,this.innerDeco=d,this.contentDOM&&this.updateChildren(e,this.posAtStart),this.dirty=0}updateOuterDeco(o){if(Je(o,this.outerDeco))return;let s=1!=this.nodeDOM.nodeType,d=this.dom;this.dom=qt(this.dom,this.nodeDOM,Rt(this.outerDeco,this.node,s),Rt(o,this.node,s)),this.dom!=d&&(d.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=o}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function a(r,o,s,d,e){return ke(d,o,r),new H(void 0,r,o,s,d,d,d,e,0)}class p extends H{constructor(o,s,d,e,t,n,i){super(o,s,d,e,t,null,n,i,0)}parseRule(){let o=this.nodeDOM.parentNode;for(;o&&o!=this.dom&&!o.pmIsDeco;)o=o.parentNode;return{skip:o||!0}}update(o,s,d,e){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!o.sameMarkup(this.node)||(this.updateOuterDeco(s),(0!=this.dirty||o.text!=this.node.text)&&o.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=o.text,e.trackWrites==this.nodeDOM&&(e.trackWrites=null)),this.node=o,this.dirty=0,0))}inParent(){let o=this.parent.contentDOM;for(let s=this.nodeDOM;s;s=s.parentNode)if(s==o)return!0;return!1}domFromPos(o){return{node:this.nodeDOM,offset:o}}localPosFromDOM(o,s,d){return o==this.nodeDOM?this.posAtStart+Math.min(s,this.node.text.length):super.localPosFromDOM(o,s,d)}ignoreMutation(o){return"characterData"!=o.type&&"selection"!=o.type}slice(o,s,d){let e=this.node.cut(o,s),t=document.createTextNode(e.text);return new p(this.parent,e,this.outerDeco,this.innerDeco,t,t,d)}markDirty(o,s){super.markDirty(o,s),this.dom!=this.nodeDOM&&(0==o||s==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}}class E extends V{parseRule(){return{ignore:!0}}matchesHack(o){return 0==this.dirty&&this.dom.nodeName==o}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class D extends H{constructor(o,s,d,e,t,n,i,u,h,T){super(o,s,d,e,t,n,i,h,T),this.spec=u}update(o,s,d,e){if(3==this.dirty)return!1;if(this.spec.update){let t=this.spec.update(o,s,d);return t&&this.updateInner(o,s,d,e),t}return!(!this.contentDOM&&!o.isLeaf)&&super.update(o,s,d,e)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(o,s,d,e){this.spec.setSelection?this.spec.setSelection(o,s,d):super.setSelection(o,s,d,e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(o){return!!this.spec.stopEvent&&this.spec.stopEvent(o)}ignoreMutation(o){return this.spec.ignoreMutation?this.spec.ignoreMutation(o):super.ignoreMutation(o)}}function w(r,o,s){let d=r.firstChild,e=!1;for(let t=0;t<o.length;t++){let n=o[t],i=n.dom;if(i.parentNode==r){for(;i!=d;)d=$(d),e=!0;d=d.nextSibling}else e=!0,r.insertBefore(i,d);if(n instanceof wt){let u=d?d.previousSibling:r.lastChild;w(n.contentDOM,n.children,s),d=u?u.nextSibling:r.firstChild}}for(;d;)d=$(d),e=!0;e&&s.trackWrites==r&&(s.trackWrites=null)}const K=function(r){r&&(this.nodeName=r)};K.prototype=Object.create(null);const lt=[new K];function Rt(r,o,s){if(0==r.length)return lt;let d=s?lt[0]:new K,e=[d];for(let t=0;t<r.length;t++){let n=r[t].type.attrs;if(n){n.nodeName&&e.push(d=new K(n.nodeName));for(let i in n){let u=n[i];null!=u&&(s&&1==e.length&&e.push(d=new K(o.isInline?"span":"div")),"class"==i?d.class=(d.class?d.class+" ":"")+u:"style"==i?d.style=(d.style?d.style+";":"")+u:"nodeName"!=i&&(d[i]=u))}}}return e}function qt(r,o,s,d){if(s==lt&&d==lt)return o;let e=o;for(let t=0;t<d.length;t++){let n=d[t],i=s[t];if(t){let u;i&&i.nodeName==n.nodeName&&e!=r&&(u=e.parentNode)&&u.nodeName.toLowerCase()==n.nodeName||(u=document.createElement(n.nodeName),u.pmIsDeco=!0,u.appendChild(e),i=lt[0]),e=u}te(e,i||lt[0],n)}return e}function te(r,o,s){for(let d in o)"class"!=d&&"style"!=d&&"nodeName"!=d&&!(d in s)&&r.removeAttribute(d);for(let d in s)"class"!=d&&"style"!=d&&"nodeName"!=d&&s[d]!=o[d]&&r.setAttribute(d,s[d]);if(o.class!=s.class){let d=o.class?o.class.split(" ").filter(Boolean):[],e=s.class?s.class.split(" ").filter(Boolean):[];for(let t=0;t<d.length;t++)-1==e.indexOf(d[t])&&r.classList.remove(d[t]);for(let t=0;t<e.length;t++)-1==d.indexOf(e[t])&&r.classList.add(e[t]);0==r.classList.length&&r.removeAttribute("class")}if(o.style!=s.style){if(o.style){let e,d=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;e=d.exec(o.style);)r.style.removeProperty(e[1])}s.style&&(r.style.cssText+=s.style)}}function ke(r,o,s){return qt(r,r,lt,Rt(o,s,1!=r.nodeType))}function Je(r,o){if(r.length!=o.length)return!1;for(let s=0;s<r.length;s++)if(!r[s].type.eq(o[s].type))return!1;return!0}function $(r){let o=r.nextSibling;return r.parentNode.removeChild(r),o}class S{constructor(o,s,d){this.lock=s,this.view=d,this.index=0,this.stack=[],this.changed=!1,this.top=o,this.preMatch=function(r,o){let s=o,d=s.children.length,e=r.childCount,t=new Map,n=[];t:for(;e>0;){let i;for(;;)if(d){let h=s.children[d-1];if(!(h instanceof wt)){i=h,d--;break}s=h,d=h.children.length}else{if(s==o)break t;d=s.parent.children.indexOf(s),s=s.parent}let u=i.node;if(u){if(u!=r.child(e-1))break;--e,t.set(i,e),n.push(i)}}return{index:e,matched:t,matches:n.reverse()}}(o.node.content,o)}destroyBetween(o,s){if(o!=s){for(let d=o;d<s;d++)this.top.children[d].destroy();this.top.children.splice(o,s-o),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(o,s,d){let e=0,t=this.stack.length>>1,n=Math.min(t,o.length);for(;e<n&&(e==t-1?this.top:this.stack[e+1<<1]).matchesMark(o[e])&&!1!==o[e].type.spec.spanning;)e++;for(;e<t;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),t--;for(;t<o.length;){this.stack.push(this.top,this.index+1);let i=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let h=this.top.children[u];if(h.matchesMark(o[t])&&!this.isLocked(h.dom)){i=u;break}}if(i>-1)i>this.index&&(this.changed=!0,this.destroyBetween(this.index,i)),this.top=this.top.children[this.index];else{let u=wt.create(this.top,o[t],s,d);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,t++}}findNodeMatch(o,s,d,e){let n,t=-1;if(e>=this.preMatch.index&&(n=this.preMatch.matches[e-this.preMatch.index]).parent==this.top&&n.matchesNode(o,s,d))t=this.top.children.indexOf(n,this.index);else for(let i=this.index,u=Math.min(this.top.children.length,i+5);i<u;i++){let h=this.top.children[i];if(h.matchesNode(o,s,d)&&!this.preMatch.matched.has(h)){t=i;break}}return!(t<0||(this.destroyBetween(this.index,t),this.index++,0))}updateNodeAt(o,s,d,e,t){let n=this.top.children[e];return 3==n.dirty&&n.dom==n.contentDOM&&(n.dirty=2),!!n.update(o,s,d,t)&&(this.destroyBetween(this.index,e),this.index++,!0)}findIndexWithChild(o){for(;;){let s=o.parentNode;if(!s)return-1;if(s==this.top.contentDOM){let d=o.pmViewDesc;if(d)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==d)return e;return-1}o=s}}updateNextNode(o,s,d,e,t){for(let n=this.index;n<this.top.children.length;n++){let i=this.top.children[n];if(i instanceof H){let u=this.preMatch.matched.get(i);if(null!=u&&u!=t)return!1;let h=i.dom;if((!this.isLocked(h)||o.isText&&i.node&&i.node.isText&&i.nodeDOM.nodeValue==o.text&&3!=i.dirty&&Je(s,i.outerDeco))&&i.update(o,s,d,e))return this.destroyBetween(this.index,n),i.dom!=h&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(o,s,d,e,t){this.top.children.splice(this.index++,0,H.create(this.top,o,s,d,e,t)),this.changed=!0}placeWidget(o,s,d){let e=this.index<this.top.children.length?this.top.children[this.index]:null;if(!e||!e.matchesWidget(o)||o!=e.widget&&e.widget.type.toDOM.parentNode){let t=new U(this.top,o,s,d);this.top.children.splice(this.index++,0,t),this.changed=!0}else this.index++}addTextblockHacks(){let o=this.top.children[this.index-1],s=this.top;for(;o instanceof wt;)s=o,o=s.children[s.children.length-1];(!o||!(o instanceof p)||/\n$/.test(o.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(o.node.text))&&((Kt||Lt)&&o&&"false"==o.dom.contentEditable&&this.addHackNode("IMG",s),this.addHackNode("BR",this.top))}addHackNode(o,s){if(s==this.top&&this.index<s.children.length&&s.children[this.index].matchesHack(o))this.index++;else{let d=document.createElement(o);"IMG"==o&&(d.className="ProseMirror-separator",d.alt=""),"BR"==o&&(d.className="ProseMirror-trailingBreak");let e=new E(this.top,[],d,null);s!=this.top?s.children.push(e):s.children.splice(this.index++,0,e),this.changed=!0}}isLocked(o){return this.lock&&(o==this.lock||1==o.nodeType&&o.contains(this.lock.parentNode))}}function Ct(r,o){return r.type.side-o.type.side}function ne(r,o,s,d,e){let t=[];for(let n=0,i=0;n<r.length;n++){let u=r[n],h=i,T=i+=u.size;h>=s||T<=o?t.push(u):(h<o&&t.push(u.slice(0,o-h,d)),e&&(t.push(e),e=void 0),T>s&&t.push(u.slice(s-h,u.size,d)))}return t}function Te(r,o=null){let s=r.domSelectionRange(),d=r.state.doc;if(!s.focusNode)return null;let e=r.docView.nearestDesc(s.focusNode),t=e&&0==e.size,n=r.docView.posFromDOM(s.focusNode,s.focusOffset,1);if(n<0)return null;let u,h,i=d.resolve(n);if(Tt(s)){for(u=i;e&&!e.node;)e=e.parent;let T=e.node;if(e&&T.isAtom&&v.qv.isSelectable(T)&&e.parent&&(!T.isInline||!function(r,o,s){for(let d=0==o,e=o==ut(r);d||e;){if(r==s)return!0;let t=P(r);if(!(r=r.parentNode))return!1;d=d&&0==t,e=e&&t==ut(r)}}(s.focusNode,s.focusOffset,e.dom))){let A=e.posBefore;h=new v.qv(n==A?i:d.resolve(A))}}else{let T=r.docView.posFromDOM(s.anchorNode,s.anchorOffset,1);if(T<0)return null;u=d.resolve(T)}return h||(h=pn(r,u,i,"pointer"==o||r.state.selection.head<i.pos&&!t?1:-1)),h}function se(r){return r.editable?r.hasFocus():_n(r)&&document.activeElement&&document.activeElement.contains(r.dom)}function ae(r,o=!1){let s=r.state.selection;if(Hn(r,s),se(r)){if(!o&&r.input.mouseDown&&r.input.mouseDown.allowDefault&&Lt){let d=r.domSelectionRange(),e=r.domObserver.currentSelection;if(d.anchorNode&&e.anchorNode&&X(d.anchorNode,d.anchorOffset,e.anchorNode,e.anchorOffset))return r.input.mouseDown.delayedSelectionSync=!0,void r.domObserver.setCurSelection()}if(r.domObserver.disconnectSelection(),r.cursorWrapper)!function(r){let o=r.domSelection(),s=document.createRange(),d=r.cursorWrapper.dom,e="IMG"==d.nodeName;e?s.setEnd(d.parentNode,P(d)+1):s.setEnd(d,0),s.collapse(!1),o.removeAllRanges(),o.addRange(s),!e&&!r.state.selection.visible&&j&&At<=11&&(d.disabled=!0,d.disabled=!1)}(r);else{let t,n,{anchor:d,head:e}=s;ce&&!(s instanceof v.Bs)&&(s.$from.parent.inlineContent||(t=we(r,s.from)),!s.empty&&!s.$from.parent.inlineContent&&(n=we(r,s.to))),r.docView.setSelection(d,e,r.root,o),ce&&(t&&an(t),n&&an(n)),s.visible?r.dom.classList.remove("ProseMirror-hideselection"):(r.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(r){let o=r.dom.ownerDocument;o.removeEventListener("selectionchange",r.input.hideSelectionGuard);let s=r.domSelectionRange(),d=s.anchorNode,e=s.anchorOffset;o.addEventListener("selectionchange",r.input.hideSelectionGuard=()=>{(s.anchorNode!=d||s.anchorOffset!=e)&&(o.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(()=>{(!se(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})}(r))}r.domObserver.setCurSelection(),r.domObserver.connectSelection()}}const ce=Kt||Lt&&Ht<63;function we(r,o){let{node:s,offset:d}=r.docView.domFromPos(o,0),e=d<s.childNodes.length?s.childNodes[d]:null,t=d?s.childNodes[d-1]:null;if(Kt&&e&&"false"==e.contentEditable)return We(e);if(!(e&&"false"!=e.contentEditable||t&&"false"!=t.contentEditable)){if(e)return We(e);if(t)return We(t)}}function We(r){return r.contentEditable="true",Kt&&r.draggable&&(r.draggable=!1,r.wasDraggable=!0),r}function an(r){r.contentEditable="false",r.wasDraggable&&(r.draggable=!0,r.wasDraggable=null)}function Hn(r,o){if(o instanceof v.qv){let s=r.docView.descAt(o.from);s!=r.lastSelectedViewDesc&&(Un(r),s&&s.selectNode(),r.lastSelectedViewDesc=s)}else Un(r)}function Un(r){r.lastSelectedViewDesc&&(r.lastSelectedViewDesc.parent&&r.lastSelectedViewDesc.deselectNode(),r.lastSelectedViewDesc=void 0)}function pn(r,o,s,d){return r.someProp("createSelectionBetween",e=>e(r,o,s))||v.Bs.between(o,s,d)}function Sn(r){return!(r.editable&&!r.hasFocus())&&_n(r)}function _n(r){let o=r.domSelectionRange();if(!o.anchorNode)return!1;try{return r.dom.contains(3==o.anchorNode.nodeType?o.anchorNode.parentNode:o.anchorNode)&&(r.editable||r.dom.contains(3==o.focusNode.nodeType?o.focusNode.parentNode:o.focusNode))}catch(s){return!1}}function Tn(r,o){let{$anchor:s,$head:d}=r.selection,e=o>0?s.max(d):s.min(d),t=e.parent.inlineContent?e.depth?r.doc.resolve(o>0?e.after():e.before()):null:e;return t&&v.Y1.findFrom(t,o)}function Ve(r,o){return r.dispatch(r.state.tr.setSelection(o).scrollIntoView()),!0}function hn(r,o,s){let d=r.state.selection;if(!(d instanceof v.Bs)){if(d instanceof v.qv&&d.node.isInline)return Ve(r,new v.Bs(o>0?d.$to:d.$from));{let e=Tn(r.state,o);return!!e&&Ve(r,e)}}if(!d.empty||s.indexOf("s")>-1)return!1;if(r.endOfTextblock(o>0?"right":"left")){let e=Tn(r.state,o);return!!(e&&e instanceof v.qv)&&Ve(r,e)}if(!(B&&s.indexOf("m")>-1)){let n,e=d.$head,t=e.textOffset?null:o<0?e.nodeBefore:e.nodeAfter;if(!t||t.isText)return!1;let i=o<0?e.pos-t.nodeSize:e.pos;return!!(t.isAtom||(n=r.docView.descAt(i))&&!n.contentDOM)&&(v.qv.isSelectable(t)?Ve(r,new v.qv(o<0?r.state.doc.resolve(e.pos-t.nodeSize):e)):!!at&&Ve(r,new v.Bs(r.state.doc.resolve(o<0?i:i+t.nodeSize))))}}function rn(r){return 3==r.nodeType?r.nodeValue.length:r.childNodes.length}function sn(r){let o=r.pmViewDesc;return o&&0==o.size&&(r.nextSibling||"BR"!=r.nodeName)}function _(r){let o=r.domSelectionRange(),s=o.focusNode,d=o.focusOffset;if(!s)return;let e,t,n=!1;for(St&&1==s.nodeType&&d<rn(s)&&sn(s.childNodes[d])&&(n=!0);;)if(d>0){if(1!=s.nodeType)break;{let i=s.childNodes[d-1];if(sn(i))e=s,t=--d;else{if(3!=i.nodeType)break;s=i,d=s.nodeValue.length}}}else{if(m(s))break;{let i=s.previousSibling;for(;i&&sn(i);)e=s.parentNode,t=P(i),i=i.previousSibling;if(i)s=i,d=rn(s);else{if(s=s.parentNode,s==r.dom)break;d=0}}}n?f(r,s,d):e&&f(r,e,t)}function C(r){let o=r.domSelectionRange(),s=o.focusNode,d=o.focusOffset;if(!s)return;let t,n,e=rn(s);for(;;)if(d<e){if(1!=s.nodeType)break;if(!sn(s.childNodes[d]))break;t=s,n=++d}else{if(m(s))break;{let i=s.nextSibling;for(;i&&sn(i);)t=i.parentNode,n=P(i)+1,i=i.nextSibling;if(i)s=i,d=0,e=rn(s);else{if(s=s.parentNode,s==r.dom)break;d=e=0}}}t&&f(r,t,n)}function m(r){let o=r.pmViewDesc;return o&&o.node&&o.node.isBlock}function f(r,o,s){let d=r.domSelection();if(Tt(d)){let t=document.createRange();t.setEnd(o,s),t.setStart(o,s),d.removeAllRanges(),d.addRange(t)}else d.extend&&d.extend(o,s);r.domObserver.setCurSelection();let{state:e}=r;setTimeout(()=>{r.state==e&&ae(r)},50)}function M(r,o,s){let d=r.state.selection;if(d instanceof v.Bs&&!d.empty||s.indexOf("s")>-1||B&&s.indexOf("m")>-1)return!1;let{$from:e,$to:t}=d;if(!e.parent.inlineContent||r.endOfTextblock(o<0?"up":"down")){let n=Tn(r.state,o);if(n&&n instanceof v.qv)return Ve(r,n)}if(!e.parent.inlineContent){let n=o<0?e:t,i=d instanceof v.C1?v.Y1.near(n,o):v.Y1.findFrom(n,o);return!!i&&Ve(r,i)}return!1}function x(r,o){if(!(r.state.selection instanceof v.Bs))return!0;let{$head:s,$anchor:d,empty:e}=r.state.selection;if(!s.sameParent(d))return!0;if(!e)return!1;if(r.endOfTextblock(o>0?"forward":"backward"))return!0;let t=!s.textOffset&&(o<0?s.nodeBefore:s.nodeAfter);if(t&&!t.isText){let n=r.state.tr;return o<0?n.delete(s.pos-t.nodeSize,s.pos):n.delete(s.pos,s.pos+t.nodeSize),r.dispatch(n),!0}return!1}function L(r,o,s){r.domObserver.stop(),o.contentEditable=s,r.domObserver.start()}function vt(r,o){r.someProp("transformCopied",z=>{o=z(o,r)});let s=[],{content:d,openStart:e,openEnd:t}=o;for(;e>1&&t>1&&1==d.childCount&&1==d.firstChild.childCount;){e--,t--;let z=d.firstChild;s.push(z.type.name,z.attrs!=z.type.defaultAttrs?z.attrs:null),d=z.content}let n=r.someProp("clipboardSerializer")||l.PW.fromSchema(r.state.schema),i=De(),u=i.createElement("div");u.appendChild(n.serializeFragment(d,{document:i}));let T,h=u.firstChild,A=0;for(;h&&1==h.nodeType&&(T=Ye[h.nodeName.toLowerCase()]);){for(let z=T.length-1;z>=0;z--){let Z=i.createElement(T[z]);for(;u.firstChild;)Z.appendChild(u.firstChild);u.appendChild(Z),A++}h=u.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",`${e} ${t}${A?` -${A}`:""} ${JSON.stringify(s)}`),{dom:u,text:r.someProp("clipboardTextSerializer",z=>z(o,r))||o.content.textBetween(0,o.content.size,"\n\n")}}function xt(r,o,s,d,e){let n,i,t=e.parent.type.spec.code;if(!s&&!o)return null;let u=o&&(d||t||!s);if(u){if(r.someProp("transformPastedText",k=>{o=k(o,t||d,r)}),t)return o?new l.p2(l.HY.from(r.state.schema.text(o.replace(/\r\n?/g,"\n"))),0,0):l.p2.empty;let A=r.someProp("clipboardTextParser",k=>k(o,e,d,r));if(A)i=A;else{let k=e.marks(),{schema:z}=r.state,Z=l.PW.fromSchema(z);n=document.createElement("div"),o.split(/(?:\r\n?|\n)+/).forEach(nt=>{let dt=n.appendChild(document.createElement("p"));nt&&dt.appendChild(Z.serializeNode(z.text(nt,k)))})}}else r.someProp("transformPastedHTML",A=>{s=A(s,r)}),n=function(r){let o=/^(\s*<meta [^>]*>)*/.exec(r);o&&(r=r.slice(o[0].length));let e,s=De().createElement("div"),d=/<([a-z][^>\s]+)/i.exec(r);if((e=d&&Ye[d[1].toLowerCase()])&&(r=e.map(t=>"<"+t+">").join("")+r+e.map(t=>"</"+t+">").reverse().join("")),s.innerHTML=r,e)for(let t=0;t<e.length;t++)s=s.querySelector(e[t])||s;return s}(s),at&&function(r){let o=r.querySelectorAll(Lt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let s=0;s<o.length;s++){let d=o[s];1==d.childNodes.length&&"\xa0"==d.textContent&&d.parentNode&&d.parentNode.replaceChild(r.ownerDocument.createTextNode(" "),d)}}(n);let h=n&&n.querySelector("[data-pm-slice]"),T=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(T&&T[3])for(let A=+T[3];A>0;A--){let k=n.firstChild;for(;k&&1!=k.nodeType;)k=k.nextSibling;if(!k)break;n=k}if(i||(i=(r.someProp("clipboardParser")||r.someProp("domParser")||l.aw.fromSchema(r.state.schema)).parseSlice(n,{preserveWhitespace:!(!u&&!T),context:e,ruleFromNode:k=>"BR"!=k.nodeName||k.nextSibling||!k.parentNode||Nt.test(k.parentNode.nodeName)?null:{ignore:!0}})),T)i=function(r,o){if(!r.size)return r;let d,s=r.content.firstChild.type.schema;try{d=JSON.parse(o)}catch(i){return r}let{content:e,openStart:t,openEnd:n}=r;for(let i=d.length-2;i>=0;i-=2){let u=s.nodes[d[i]];if(!u||u.hasRequiredAttrs())break;e=l.HY.from(u.create(d[i+1],e)),t++,n++}return new l.p2(e,t,n)}(qe(i,+T[1],+T[2]),T[4]);else if(i=l.p2.maxOpen(function(r,o){if(r.childCount<2)return r;for(let s=o.depth;s>=0;s--){let t,e=o.node(s).contentMatchAt(o.index(s)),n=[];if(r.forEach(i=>{if(!n)return;let h,u=e.findWrapping(i.type);if(!u)return n=null;if(h=n.length&&t.length&&re(u,t,i,n[n.length-1],0))n[n.length-1]=h;else{n.length&&(n[n.length-1]=ie(n[n.length-1],t.length));let T=Vt(i,u);n.push(T),e=e.matchType(T.type),t=u}}),n)return l.HY.from(n)}return r}(i.content,e),!0),i.openStart||i.openEnd){let A=0,k=0;for(let z=i.content.firstChild;A<i.openStart&&!z.type.spec.isolating;A++,z=z.firstChild);for(let z=i.content.lastChild;k<i.openEnd&&!z.type.spec.isolating;k++,z=z.lastChild);i=qe(i,A,k)}return r.someProp("transformPasted",A=>{i=A(i,r)}),i}const Nt=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Vt(r,o,s=0){for(let d=o.length-1;d>=s;d--)r=o[d].create(null,l.HY.from(r));return r}function re(r,o,s,d,e){if(e<r.length&&e<o.length&&r[e]==o[e]){let t=re(r,o,s,d.lastChild,e+1);if(t)return d.copy(d.content.replaceChild(d.childCount-1,t));if(d.contentMatchAt(d.childCount).matchType(e==r.length-1?s.type:r[e+1]))return d.copy(d.content.append(l.HY.from(Vt(s,r,e+1))))}}function ie(r,o){if(0==o)return r;let s=r.content.replaceChild(r.childCount-1,ie(r.lastChild,o-1)),d=r.contentMatchAt(r.childCount).fillBefore(l.HY.empty,!0);return r.copy(s.append(d))}function be(r,o,s,d,e,t){let n=o<0?r.firstChild:r.lastChild,i=n.content;return e<d-1&&(i=be(i,o,s,d,e+1,t)),e>=s&&(i=o<0?n.contentMatchAt(0).fillBefore(i,r.childCount>1||t<=e).append(i):i.append(n.contentMatchAt(n.childCount).fillBefore(l.HY.empty,!0))),r.replaceChild(o<0?0:r.childCount-1,n.copy(i))}function qe(r,o,s){return o<r.openStart&&(r=new l.p2(be(r.content,-1,o,r.openStart,0,r.openEnd),o,r.openEnd)),s<r.openEnd&&(r=new l.p2(be(r.content,1,s,r.openEnd,0,0),r.openStart,s)),r}const Ye={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Ce=null;function De(){return Ce||(Ce=document.implementation.createHTMLDocument("title"))}const Se={},Fe={},Vn={touchstart:!0,touchmove:!0};class Qn{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Ge(r,o){r.input.lastSelectionOrigin=o,r.input.lastSelectionTime=Date.now()}function Cn(r){r.someProp("handleDOMEvents",o=>{for(let s in o)r.input.eventHandlers[s]||r.dom.addEventListener(s,r.input.eventHandlers[s]=d=>dn(r,d))})}function dn(r,o){return r.someProp("handleDOMEvents",s=>{let d=s[o.type];return!!d&&(d(r,o)||o.defaultPrevented)})}function fn(r,o){if(!o.bubbles)return!0;if(o.defaultPrevented)return!1;for(let s=o.target;s!=r.dom;s=s.parentNode)if(!s||11==s.nodeType||s.pmViewDesc&&s.pmViewDesc.stopEvent(o))return!1;return!0}function nn(r){return{left:r.clientX,top:r.clientY}}function vn(r,o,s,d,e){if(-1==d)return!1;let t=r.state.doc.resolve(d);for(let n=t.depth+1;n>0;n--)if(r.someProp(o,i=>n>t.depth?i(r,s,t.nodeAfter,t.before(n),e,!0):i(r,s,t.node(n),t.before(n),e,!1)))return!0;return!1}function tn(r,o,s){r.focused||r.focus();let d=r.state.tr.setSelection(o);"pointer"==s&&d.setMeta("pointer",!0),r.dispatch(d)}function Co(r,o,s,d){return vn(r,"handleDoubleClickOn",o,s,d)||r.someProp("handleDoubleClick",e=>e(r,o,d))}function vo(r,o,s,d){return vn(r,"handleTripleClickOn",o,s,d)||r.someProp("handleTripleClick",e=>e(r,o,d))||function(r,o,s){if(0!=s.button)return!1;let d=r.state.doc;if(-1==o)return!!d.inlineContent&&(tn(r,v.Bs.create(d,0,d.content.size),"pointer"),!0);let e=d.resolve(o);for(let t=e.depth+1;t>0;t--){let n=t>e.depth?e.nodeAfter:e.node(t),i=e.before(t);if(n.inlineContent)tn(r,v.Bs.create(d,i+1,i+1+n.content.size),"pointer");else{if(!v.qv.isSelectable(n))continue;tn(r,v.qv.create(d,i),"pointer")}return!0}}(r,s,d)}function wn(r){return zn(r)}Fe.keydown=(r,o)=>{let s=o;if(r.input.shiftKey=16==s.keyCode||s.shiftKey,!oo(r,s)&&(r.input.lastKeyCode=s.keyCode,r.input.lastKeyCodeTime=Date.now(),!rt||!Lt||13!=s.keyCode))if(229!=s.keyCode&&r.domObserver.forceFlush(),!pt||13!=s.keyCode||s.ctrlKey||s.altKey||s.metaKey)r.someProp("handleKeyDown",d=>d(r,s))||function(r,o){let s=o.keyCode,d=function(r){let o="";return r.ctrlKey&&(o+="c"),r.metaKey&&(o+="m"),r.altKey&&(o+="a"),r.shiftKey&&(o+="s"),o}(o);return 8==s||B&&72==s&&"c"==d?x(r,-1)||_(r):46==s||B&&68==s&&"c"==d?x(r,1)||C(r):13==s||27==s||(37==s||B&&66==s&&"c"==d?hn(r,-1,d)||_(r):39==s||B&&70==s&&"c"==d?hn(r,1,d)||C(r):38==s||B&&80==s&&"c"==d?M(r,-1,d)||_(r):40==s||B&&78==s&&"c"==d?function(r){if(!Kt||r.state.selection.$head.parentOffset>0)return!1;let{focusNode:o,focusOffset:s}=r.domSelectionRange();if(o&&1==o.nodeType&&0==s&&o.firstChild&&"false"==o.firstChild.contentEditable){let d=o.firstChild;L(r,d,"true"),setTimeout(()=>L(r,d,"false"),20)}return!1}(r)||M(r,1,d)||C(r):d==(B?"m":"c")&&(66==s||73==s||89==s||90==s))}(r,s)?s.preventDefault():Ge(r,"key");else{let d=Date.now();r.input.lastIOSEnter=d,r.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{r.input.lastIOSEnter==d&&(r.someProp("handleKeyDown",e=>e(r,bt(13,"Enter"))),r.input.lastIOSEnter=0)},200)}},Fe.keyup=(r,o)=>{16==o.keyCode&&(r.input.shiftKey=!1)},Fe.keypress=(r,o)=>{let s=o;if(oo(r,s)||!s.charCode||s.ctrlKey&&!s.altKey||B&&s.metaKey)return;if(r.someProp("handleKeyPress",e=>e(r,s)))return void s.preventDefault();let d=r.state.selection;if(!(d instanceof v.Bs&&d.$from.sameParent(d.$to))){let e=String.fromCharCode(s.charCode);!/[\r\n]/.test(e)&&!r.someProp("handleTextInput",t=>t(r,d.$from.pos,d.$to.pos,e))&&r.dispatch(r.state.tr.insertText(e).scrollIntoView()),s.preventDefault()}};const Fn=B?"metaKey":"ctrlKey";Se.mousedown=(r,o)=>{let s=o;r.input.shiftKey=s.shiftKey;let d=wn(r),e=Date.now(),t="singleClick";e-r.input.lastClick.time<500&&function(r,o){let s=o.x-r.clientX,d=o.y-r.clientY;return s*s+d*d<100}(s,r.input.lastClick)&&!s[Fn]&&("singleClick"==r.input.lastClick.type?t="doubleClick":"doubleClick"==r.input.lastClick.type&&(t="tripleClick")),r.input.lastClick={time:e,x:s.clientX,y:s.clientY,type:t};let n=r.posAtCoords(nn(s));!n||("singleClick"==t?(r.input.mouseDown&&r.input.mouseDown.done(),r.input.mouseDown=new Kn(r,n,s,!!d)):("doubleClick"==t?Co:vo)(r,n.pos,n.inside,s)?s.preventDefault():Ge(r,"pointer"))};class Kn{constructor(o,s,d,e){let t,n;if(this.view=o,this.pos=s,this.event=d,this.flushed=e,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=o.state.doc,this.selectNode=!!d[Fn],this.allowDefault=d.shiftKey,s.inside>-1)t=o.state.doc.nodeAt(s.inside),n=s.inside;else{let T=o.state.doc.resolve(s.pos);t=T.parent,n=T.depth?T.before():0}const i=e?null:d.target,u=i?o.docView.nearestDesc(i,!0):null;this.target=u?u.dom:null;let{selection:h}=o.state;(0==d.button&&t.type.spec.draggable&&!1!==t.type.spec.selectable||h instanceof v.qv&&h.from<=n&&h.to>n)&&(this.mightDrag={node:t,pos:n,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!St||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),o.root.addEventListener("mouseup",this.up=this.up.bind(this)),o.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ge(o,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ae(this.view)),this.view.input.mouseDown=null}up(o){if(this.done(),!this.view.dom.contains(o.target))return;let s=this.pos;this.view.state.doc!=this.startDoc&&(s=this.view.posAtCoords(nn(o))),this.updateAllowDefault(o),this.allowDefault||!s?Ge(this.view,"pointer"):function(r,o,s,d,e){return vn(r,"handleClickOn",o,s,d)||r.someProp("handleClick",t=>t(r,o,d))||(e?function(r,o){if(-1==o)return!1;let d,e,s=r.state.selection;s instanceof v.qv&&(d=s.node);let t=r.state.doc.resolve(o);for(let n=t.depth+1;n>0;n--){let i=n>t.depth?t.nodeAfter:t.node(n);if(v.qv.isSelectable(i)){e=d&&s.$from.depth>0&&n>=s.$from.depth&&t.before(s.$from.depth+1)==s.$from.pos?t.before(s.$from.depth):t.before(n);break}}return null!=e&&(tn(r,v.qv.create(r.state.doc,e),"pointer"),!0)}(r,s):function(r,o){if(-1==o)return!1;let s=r.state.doc.resolve(o),d=s.nodeAfter;return!!(d&&d.isAtom&&v.qv.isSelectable(d))&&(tn(r,new v.qv(s),"pointer"),!0)}(r,s))}(this.view,s.pos,s.inside,o,this.selectNode)?o.preventDefault():0==o.button&&(this.flushed||Kt&&this.mightDrag&&!this.mightDrag.node.isAtom||Lt&&!this.view.state.selection.visible&&Math.min(Math.abs(s.pos-this.view.state.selection.from),Math.abs(s.pos-this.view.state.selection.to))<=2)?(tn(this.view,v.Y1.near(this.view.state.doc.resolve(s.pos)),"pointer"),o.preventDefault()):Ge(this.view,"pointer")}move(o){this.updateAllowDefault(o),Ge(this.view,"pointer"),0==o.buttons&&this.done()}updateAllowDefault(o){!this.allowDefault&&(Math.abs(this.event.x-o.clientX)>4||Math.abs(this.event.y-o.clientY)>4)&&(this.allowDefault=!0)}}function oo(r,o){return!!r.composing||!!(Kt&&Math.abs(o.timeStamp-r.input.compositionEndedAt)<500)&&(r.input.compositionEndedAt=-2e8,!0)}Se.touchstart=r=>{r.input.lastTouch=Date.now(),wn(r),Ge(r,"pointer")},Se.touchmove=r=>{r.input.lastTouch=Date.now(),Ge(r,"pointer")},Se.contextmenu=r=>wn(r);const Mo=rt?5e3:-1;function Jn(r,o){clearTimeout(r.input.composingTimeout),o>-1&&(r.input.composingTimeout=setTimeout(()=>zn(r),o))}function io(r){for(r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=function(){let r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function zn(r,o=!1){if(!(rt&&r.domObserver.flushingSoon>=0)){if(r.domObserver.forceFlush(),io(r),o||r.docView&&r.docView.dirty){let s=Te(r);return s&&!s.eq(r.state.selection)?r.dispatch(r.state.tr.setSelection(s)):r.updateState(r.state),!0}return!1}}Fe.compositionstart=Fe.compositionupdate=r=>{if(!r.composing){r.domObserver.flush();let{state:o}=r,s=o.selection.$from;if(o.selection.empty&&(o.storedMarks||!s.textOffset&&s.parentOffset&&s.nodeBefore.marks.some(d=>!1===d.type.spec.inclusive)))r.markCursor=r.state.storedMarks||s.marks(),zn(r,!0),r.markCursor=null;else if(zn(r),St&&o.selection.empty&&s.parentOffset&&!s.textOffset&&s.nodeBefore.marks.length){let d=r.domSelectionRange();for(let e=d.focusNode,t=d.focusOffset;e&&1==e.nodeType&&0!=t;){let n=t<0?e.lastChild:e.childNodes[t-1];if(!n)break;if(3==n.nodeType){r.domSelection().collapse(n,n.nodeValue.length);break}e=n,t=-1}}r.input.composing=!0}Jn(r,Mo)},Fe.compositionend=(r,o)=>{r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=o.timeStamp,Jn(r,20))};const An=j&&At<15||pt&&st<604;function Rn(r,o,s,d,e){let t=xt(r,o,s,d,r.state.selection.$from);if(r.someProp("handlePaste",u=>u(r,e,t||l.p2.empty)))return!0;if(!t)return!1;let n=function(r){return 0==r.openStart&&0==r.openEnd&&1==r.content.childCount?r.content.firstChild:null}(t),i=n?r.state.tr.replaceSelectionWith(n,r.input.shiftKey):r.state.tr.replaceSelection(t);return r.dispatch(i.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Se.copy=Fe.cut=(r,o)=>{let s=o,d=r.state.selection,e="cut"==s.type;if(d.empty)return;let t=An?null:s.clipboardData,n=d.content(),{dom:i,text:u}=vt(r,n);t?(s.preventDefault(),t.clearData(),t.setData("text/html",i.innerHTML),t.setData("text/plain",u)):function(r,o){if(!r.dom.parentNode)return;let s=r.dom.parentNode.appendChild(document.createElement("div"));s.appendChild(o),s.style.cssText="position: fixed; left: -10000px; top: 10px";let d=getSelection(),e=document.createRange();e.selectNodeContents(o),r.dom.blur(),d.removeAllRanges(),d.addRange(e),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s),r.focus()},50)}(r,i),e&&r.dispatch(r.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Fe.paste=(r,o)=>{let s=o;if(r.composing&&!rt)return;let d=An?null:s.clipboardData;d&&Rn(r,d.getData("text/plain"),d.getData("text/html"),r.input.shiftKey,s)?s.preventDefault():function(r,o){if(!r.dom.parentNode)return;let s=r.input.shiftKey||r.state.selection.$from.parent.type.spec.code,d=r.dom.parentNode.appendChild(document.createElement(s?"textarea":"div"));s||(d.contentEditable="true"),d.style.cssText="position: fixed; left: -10000px; top: 10px",d.focus(),setTimeout(()=>{r.focus(),d.parentNode&&d.parentNode.removeChild(d),s?Rn(r,d.value,null,r.input.shiftKey,o):Rn(r,d.textContent,d.innerHTML,r.input.shiftKey,o)},50)}(r,s)};class Xn{constructor(o,s){this.slice=o,this.move=s}}const Ln=B?"altKey":"ctrlKey";Se.dragstart=(r,o)=>{let s=o,d=r.input.mouseDown;if(d&&d.done(),!s.dataTransfer)return;let e=r.state.selection,t=e.empty?null:r.posAtCoords(nn(s));if(!(t&&t.pos>=e.from&&t.pos<=(e instanceof v.qv?e.to-1:e.to)))if(d&&d.mightDrag)r.dispatch(r.state.tr.setSelection(v.qv.create(r.state.doc,d.mightDrag.pos)));else if(s.target&&1==s.target.nodeType){let h=r.docView.nearestDesc(s.target,!0);h&&h.node.type.spec.draggable&&h!=r.docView&&r.dispatch(r.state.tr.setSelection(v.qv.create(r.state.doc,h.posBefore)))}let n=r.state.selection.content(),{dom:i,text:u}=vt(r,n);s.dataTransfer.clearData(),s.dataTransfer.setData(An?"Text":"text/html",i.innerHTML),s.dataTransfer.effectAllowed="copyMove",An||s.dataTransfer.setData("text/plain",u),r.dragging=new Xn(n,!s[Ln])},Se.dragend=r=>{let o=r.dragging;window.setTimeout(()=>{r.dragging==o&&(r.dragging=null)},50)},Fe.dragover=Fe.dragenter=(r,o)=>o.preventDefault(),Fe.drop=(r,o)=>{let s=o,d=r.dragging;if(r.dragging=null,!s.dataTransfer)return;let e=r.posAtCoords(nn(s));if(!e)return;let t=r.state.doc.resolve(e.pos),n=d&&d.slice;n?r.someProp("transformPasted",Z=>{n=Z(n,r)}):n=xt(r,s.dataTransfer.getData(An?"Text":"text/plain"),An?null:s.dataTransfer.getData("text/html"),!1,t);let i=!(!d||s[Ln]);if(r.someProp("handleDrop",Z=>Z(r,s,n||l.p2.empty,i)))return void s.preventDefault();if(!n)return;s.preventDefault();let u=n?(0,y.nj)(r.state.doc,t.pos,n):t.pos;null==u&&(u=t.pos);let h=r.state.tr;i&&h.deleteSelection();let T=h.mapping.map(u),A=0==n.openStart&&0==n.openEnd&&1==n.content.childCount,k=h.doc;if(A?h.replaceRangeWith(T,T,n.content.firstChild):h.replaceRange(T,T,n),h.doc.eq(k))return;let z=h.doc.resolve(T);if(A&&v.qv.isSelectable(n.content.firstChild)&&z.nodeAfter&&z.nodeAfter.sameMarkup(n.content.firstChild))h.setSelection(new v.qv(z));else{let Z=h.mapping.map(u);h.mapping.maps[h.mapping.maps.length-1].forEach((nt,dt,Bt,Jt)=>Z=Jt),h.setSelection(pn(r,z,h.doc.resolve(Z)))}r.focus(),r.dispatch(h.setMeta("uiEvent","drop"))},Se.focus=r=>{r.input.lastFocus=Date.now(),r.focused||(r.domObserver.stop(),r.dom.classList.add("ProseMirror-focused"),r.domObserver.start(),r.focused=!0,setTimeout(()=>{r.docView&&r.hasFocus()&&!r.domObserver.currentSelection.eq(r.domSelectionRange())&&ae(r)},20))},Se.blur=(r,o)=>{let s=o;r.focused&&(r.domObserver.stop(),r.dom.classList.remove("ProseMirror-focused"),r.domObserver.start(),s.relatedTarget&&r.dom.contains(s.relatedTarget)&&r.domObserver.currentSelection.clear(),r.focused=!1)},Se.beforeinput=(r,o)=>{if(Lt&&rt&&"deleteContentBackward"==o.inputType){r.domObserver.flushSoon();let{domChangeCount:d}=r.input;setTimeout(()=>{if(r.input.domChangeCount!=d||(r.dom.blur(),r.focus(),r.someProp("handleKeyDown",t=>t(r,bt(8,"Backspace")))))return;let{$cursor:e}=r.state.selection;e&&e.pos>0&&r.dispatch(r.state.tr.delete(e.pos-1,e.pos).scrollIntoView())},50)}};for(let r in Fe)Se[r]=Fe[r];function Mn(r,o){if(r==o)return!0;for(let s in r)if(r[s]!==o[s])return!1;for(let s in o)if(!(s in r))return!1;return!0}class $n{constructor(o,s){this.toDOM=o,this.spec=s||Dn,this.side=this.spec.side||0}map(o,s,d,e){let{pos:t,deleted:n}=o.mapResult(s.from+e,this.side<0?-1:1);return n?null:new on(t-d,t-d,this)}valid(){return!0}eq(o){return this==o||o instanceof $n&&(this.spec.key&&this.spec.key==o.spec.key||this.toDOM==o.toDOM&&Mn(this.spec,o.spec))}destroy(o){this.spec.destroy&&this.spec.destroy(o)}}class un{constructor(o,s){this.attrs=o,this.spec=s||Dn}map(o,s,d,e){let t=o.map(s.from+e,this.spec.inclusiveStart?-1:1)-d,n=o.map(s.to+e,this.spec.inclusiveEnd?1:-1)-d;return t>=n?null:new on(t,n,this)}valid(o,s){return s.from<s.to}eq(o){return this==o||o instanceof un&&Mn(this.attrs,o.attrs)&&Mn(this.spec,o.spec)}static is(o){return o.type instanceof un}destroy(){}}class Zn{constructor(o,s){this.attrs=o,this.spec=s||Dn}map(o,s,d,e){let t=o.mapResult(s.from+e,1);if(t.deleted)return null;let n=o.mapResult(s.to+e,-1);return n.deleted||n.pos<=t.pos?null:new on(t.pos-d,n.pos-d,this)}valid(o,s){let t,{index:d,offset:e}=o.content.findIndex(s.from);return e==s.from&&!(t=o.child(d)).isText&&e+t.nodeSize==s.to}eq(o){return this==o||o instanceof Zn&&Mn(this.attrs,o.attrs)&&Mn(this.spec,o.spec)}destroy(){}}class on{constructor(o,s,d){this.from=o,this.to=s,this.type=d}copy(o,s){return new on(o,s,this.type)}eq(o,s=0){return this.type.eq(o.type)&&this.from+s==o.from&&this.to+s==o.to}map(o,s,d){return this.type.map(o,this,s,d)}static widget(o,s,d){return new on(o,o,new $n(s,d))}static inline(o,s,d,e){return new on(o,s,new un(d,e))}static node(o,s,d,e){return new on(o,s,new Zn(d,e))}get spec(){return this.type.spec}get inline(){return this.type instanceof un}}const Bn=[],Dn={};class $e{constructor(o,s){this.local=o.length?o:Bn,this.children=s.length?s:Bn}static create(o,s){return s.length?Yn(s,o,0,Dn):Qe}find(o,s,d){let e=[];return this.findInner(null==o?0:o,null==s?1e9:s,e,0,d),e}findInner(o,s,d,e,t){for(let n=0;n<this.local.length;n++){let i=this.local[n];i.from<=s&&i.to>=o&&(!t||t(i.spec))&&d.push(i.copy(i.from+e,i.to+e))}for(let n=0;n<this.children.length;n+=3)if(this.children[n]<s&&this.children[n+1]>o){let i=this.children[n]+1;this.children[n+2].findInner(o-i,s-i,d,e+i,t)}}map(o,s,d){return this==Qe||0==o.maps.length?this:this.mapInner(o,s,0,0,d||Dn)}mapInner(o,s,d,e,t){let n;for(let i=0;i<this.local.length;i++){let u=this.local[i].map(o,d,e);u&&u.type.valid(s,u)?(n||(n=[])).push(u):t.onRemove&&t.onRemove(this.local[i].spec)}return this.children.length?function(r,o,s,d,e,t,n){let i=r.slice();for(let h=0,T=t;h<s.maps.length;h++){let A=0;s.maps[h].forEach((k,z,Z,nt)=>{let dt=nt-Z-(z-k);for(let Bt=0;Bt<i.length;Bt+=3){let Jt=i[Bt+1];if(Jt<0||k>Jt+T-A)continue;let Zt=i[Bt]+T-A;z>=Zt?i[Bt+1]=k<=Zt?-2:-1:Z>=e&&dt&&(i[Bt]+=dt,i[Bt+1]+=dt)}A+=dt}),T=s.maps[h].map(T,-1)}let u=!1;for(let h=0;h<i.length;h+=3)if(i[h+1]<0){if(-2==i[h+1]){u=!0,i[h+1]=-1;continue}let T=s.map(r[h]+t),A=T-e;if(A<0||A>=d.content.size){u=!0;continue}let z=s.map(r[h+1]+t,-1)-e,{index:Z,offset:nt}=d.content.findIndex(A),dt=d.maybeChild(Z);if(dt&&nt==A&&nt+dt.nodeSize==z){let Bt=i[h+2].mapInner(s,dt,T+1,r[h]+t+1,n);Bt!=Qe?(i[h]=A,i[h+1]=z,i[h+2]=Bt):(i[h+1]=-2,u=!0)}else u=!0}if(u){let h=function(r,o,s,d,e,t,n){function i(u,h){for(let T=0;T<u.local.length;T++){let A=u.local[T].map(d,e,h);A?s.push(A):n.onRemove&&n.onRemove(u.local[T].spec)}for(let T=0;T<u.children.length;T+=3)i(u.children[T+2],u.children[T]+h+1)}for(let u=0;u<r.length;u+=3)-1==r[u+1]&&i(r[u+2],o[u]+t+1);return s}(i,r,o,s,e,t,n),T=Yn(h,d,0,n);o=T.local;for(let A=0;A<i.length;A+=3)i[A+1]<0&&(i.splice(A,3),A-=3);for(let A=0,k=0;A<T.children.length;A+=3){let z=T.children[A];for(;k<i.length&&i[k]<z;)k+=3;i.splice(k,0,T.children[A],T.children[A+1],T.children[A+2])}}return new $e(o.sort(gn),i)}(this.children,n||[],o,s,d,e,t):n?new $e(n.sort(gn),Bn):Qe}add(o,s){return s.length?this==Qe?$e.create(o,s):this.addInner(o,s,0):this}addInner(o,s,d){let e,t=0;o.forEach((i,u)=>{let T,h=u+d;if(T=qn(s,i,h)){for(e||(e=this.children.slice());t<e.length&&e[t]<u;)t+=3;e[t]==u?e[t+2]=e[t+2].addInner(i,T,h+1):e.splice(t,0,u,u+i.nodeSize,Yn(T,i,h+1,Dn)),t+=3}});let n=so(t?lo(s):s,-d);for(let i=0;i<n.length;i++)n[i].type.valid(o,n[i])||n.splice(i--,1);return new $e(n.length?this.local.concat(n).sort(gn):this.local,e||this.children)}remove(o){return 0==o.length||this==Qe?this:this.removeInner(o,0)}removeInner(o,s){let d=this.children,e=this.local;for(let t=0;t<d.length;t+=3){let n,i=d[t]+s,u=d[t+1]+s;for(let A,T=0;T<o.length;T++)(A=o[T])&&A.from>i&&A.to<u&&(o[T]=null,(n||(n=[])).push(A));if(!n)continue;d==this.children&&(d=this.children.slice());let h=d[t+2].removeInner(n,i+1);h!=Qe?d[t+2]=h:(d.splice(t,3),t-=3)}if(e.length)for(let n,t=0;t<o.length;t++)if(n=o[t])for(let i=0;i<e.length;i++)e[i].eq(n,s)&&(e==this.local&&(e=this.local.slice()),e.splice(i--,1));return d==this.children&&e==this.local?this:e.length||d.length?new $e(e,d):Qe}forChild(o,s){if(this==Qe)return this;if(s.isLeaf)return $e.empty;let d,e;for(let i=0;i<this.children.length;i+=3)if(this.children[i]>=o){this.children[i]==o&&(d=this.children[i+2]);break}let t=o+1,n=t+s.content.size;for(let i=0;i<this.local.length;i++){let u=this.local[i];if(u.from<n&&u.to>t&&u.type instanceof un){let h=Math.max(t,u.from)-t,T=Math.min(n,u.to)-t;h<T&&(e||(e=[])).push(u.copy(h,T))}}if(e){let i=new $e(e.sort(gn),Bn);return d?new En([i,d]):i}return d||Qe}eq(o){if(this==o)return!0;if(!(o instanceof $e)||this.local.length!=o.local.length||this.children.length!=o.children.length)return!1;for(let s=0;s<this.local.length;s++)if(!this.local[s].eq(o.local[s]))return!1;for(let s=0;s<this.children.length;s+=3)if(this.children[s]!=o.children[s]||this.children[s+1]!=o.children[s+1]||!this.children[s+2].eq(o.children[s+2]))return!1;return!0}locals(o){return Wn(this.localsInner(o))}localsInner(o){if(this==Qe)return Bn;if(o.inlineContent||!this.local.some(un.is))return this.local;let s=[];for(let d=0;d<this.local.length;d++)this.local[d].type instanceof un||s.push(this.local[d]);return s}}$e.empty=new $e([],[]),$e.removeOverlap=Wn;const Qe=$e.empty;class En{constructor(o){this.members=o}map(o,s){const d=this.members.map(e=>e.map(o,s,Dn));return En.from(d)}forChild(o,s){if(s.isLeaf)return $e.empty;let d=[];for(let e=0;e<this.members.length;e++){let t=this.members[e].forChild(o,s);t!=Qe&&(t instanceof En?d=d.concat(t.members):d.push(t))}return En.from(d)}eq(o){if(!(o instanceof En)||o.members.length!=this.members.length)return!1;for(let s=0;s<this.members.length;s++)if(!this.members[s].eq(o.members[s]))return!1;return!0}locals(o){let s,d=!0;for(let e=0;e<this.members.length;e++){let t=this.members[e].localsInner(o);if(t.length)if(s){d&&(s=s.slice(),d=!1);for(let n=0;n<t.length;n++)s.push(t[n])}else s=t}return s?Wn(d?s:s.sort(gn)):Bn}static from(o){switch(o.length){case 0:return Qe;case 1:return o[0];default:return new En(o.every(s=>s instanceof $e)?o:o.reduce((s,d)=>s.concat(d instanceof $e?d:d.members),[]))}}}function so(r,o){if(!o||!r.length)return r;let s=[];for(let d=0;d<r.length;d++){let e=r[d];s.push(new on(e.from+o,e.to+o,e.type))}return s}function qn(r,o,s){if(o.isLeaf)return null;let d=s+o.nodeSize,e=null;for(let n,t=0;t<r.length;t++)(n=r[t])&&n.from>s&&n.to<d&&((e||(e=[])).push(n),r[t]=null);return e}function lo(r){let o=[];for(let s=0;s<r.length;s++)null!=r[s]&&o.push(r[s]);return o}function Yn(r,o,s,d){let e=[],t=!1;o.forEach((i,u)=>{let h=qn(r,i,u+s);if(h){t=!0;let T=Yn(h,i,s+u+1,d);T!=Qe&&e.push(u,u+i.nodeSize,T)}});let n=so(t?lo(r):r,-s).sort(gn);for(let i=0;i<n.length;i++)n[i].type.valid(o,n[i])||(d.onRemove&&d.onRemove(n[i].spec),n.splice(i--,1));return n.length||e.length?new $e(n,e):Qe}function gn(r,o){return r.from-o.from||r.to-o.to}function Wn(r){let o=r;for(let s=0;s<o.length-1;s++){let d=o[s];if(d.from!=d.to)for(let e=s+1;e<o.length;e++){let t=o[e];if(t.from!=d.from){t.from<d.to&&(o==r&&(o=r.slice()),o[s]=d.copy(d.from,t.from),xo(o,e,d.copy(t.from,d.to)));break}t.to!=d.to&&(o==r&&(o=r.slice()),o[e]=t.copy(t.from,d.to),xo(o,e+1,t.copy(d.to,t.to)))}}return o}function xo(r,o,s){for(;o<r.length&&gn(s,r[o])>0;)o++;r.splice(o,0,s)}function ao(r){let o=[];return r.someProp("decorations",s=>{let d=s(r.state);d&&d!=Qe&&o.push(d)}),r.cursorWrapper&&o.push($e.create(r.state.doc,[r.cursorWrapper.deco])),En.from(o)}const Bo={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},No=j&&At<=11;class Ho{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(o){this.anchorNode=o.anchorNode,this.anchorOffset=o.anchorOffset,this.focusNode=o.focusNode,this.focusOffset=o.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(o){return o.anchorNode==this.anchorNode&&o.anchorOffset==this.anchorOffset&&o.focusNode==this.focusNode&&o.focusOffset==this.focusOffset}}class Uo{constructor(o,s){this.view=o,this.handleDOMChange=s,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Ho,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(d=>{for(let e=0;e<d.length;e++)this.queue.push(d[e]);j&&At<=11&&d.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),No&&(this.onCharData=d=>{this.queue.push({target:d.target,type:"characterData",oldValue:d.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Bo)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let o=this.observer.takeRecords();if(o.length){for(let s=0;s<o.length;s++)this.queue.push(o[s]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Sn(this.view)){if(this.suppressingSelectionUpdates)return ae(this.view);if(j&&At<=11&&!this.view.state.selection.empty){let o=this.view.domSelectionRange();if(o.focusNode&&X(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(o){if(!o.focusNode)return!0;let d,s=new Set;for(let t=o.focusNode;t;t=g(t))s.add(t);for(let t=o.anchorNode;t;t=g(t))if(s.has(t)){d=t;break}let e=d&&this.view.docView.nearestDesc(d);return e&&e.ignoreMutation({type:"selection",target:3==d.nodeType?d.parentNode:d})?(this.setCurSelection(),!0):void 0}flush(){let{view:o}=this;if(!o.docView||this.flushingSoon>-1)return;let s=this.observer?this.observer.takeRecords():[];this.queue.length&&(s=this.queue.concat(s),this.queue.length=0);let d=o.domSelectionRange(),e=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(d)&&Sn(o)&&!this.ignoreSelectionChange(d),t=-1,n=-1,i=!1,u=[];if(o.editable)for(let T=0;T<s.length;T++){let A=this.registerMutation(s[T],u);A&&(t=t<0?A.from:Math.min(A.from,t),n=n<0?A.to:Math.max(A.to,n),A.typeOver&&(i=!0))}if(St&&u.length>1){let T=u.filter(A=>"BR"==A.nodeName);if(2==T.length){let A=T[0],k=T[1];A.parentNode&&A.parentNode.parentNode==k.parentNode?k.remove():A.remove()}}let h=null;t<0&&e&&o.input.lastFocus>Date.now()-200&&Math.max(o.input.lastTouch,o.input.lastClick.time)<Date.now()-300&&Tt(d)&&(h=Te(o))&&h.eq(v.Y1.near(o.state.doc.resolve(0),1))?(o.input.lastFocus=0,ae(o),this.currentSelection.set(d),o.scrollToSelection()):(t>-1||e)&&(t>-1&&(o.docView.markDirty(t,n),function(r){if(!Ao.has(r)&&(Ao.set(r,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(r.dom).whiteSpace))){if(r.requiresGeckoHackNode=St,Do)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Do=!0}}(o)),this.handleDOMChange(t,n,i,u),o.docView&&o.docView.dirty?o.updateState(o.state):this.currentSelection.eq(d)||ae(o),this.currentSelection.set(d))}registerMutation(o,s){if(s.indexOf(o.target)>-1)return null;let d=this.view.docView.nearestDesc(o.target);if("attributes"==o.type&&(d==this.view.docView||"contenteditable"==o.attributeName||"style"==o.attributeName&&!o.oldValue&&!o.target.getAttribute("style"))||!d||d.ignoreMutation(o))return null;if("childList"==o.type){for(let T=0;T<o.addedNodes.length;T++)s.push(o.addedNodes[T]);if(d.contentDOM&&d.contentDOM!=d.dom&&!d.contentDOM.contains(o.target))return{from:d.posBefore,to:d.posAfter};let e=o.previousSibling,t=o.nextSibling;if(j&&At<=11&&o.addedNodes.length)for(let T=0;T<o.addedNodes.length;T++){let{previousSibling:A,nextSibling:k}=o.addedNodes[T];(!A||Array.prototype.indexOf.call(o.addedNodes,A)<0)&&(e=A),(!k||Array.prototype.indexOf.call(o.addedNodes,k)<0)&&(t=k)}let n=e&&e.parentNode==o.target?P(e)+1:0,i=d.localPosFromDOM(o.target,n,-1),u=t&&t.parentNode==o.target?P(t):o.target.childNodes.length;return{from:i,to:d.localPosFromDOM(o.target,u,1)}}return"attributes"==o.type?{from:d.posAtStart-d.border,to:d.posAtEnd+d.border}:{from:d.posAtStart,to:d.posAtEnd,typeOver:o.target.nodeValue==o.oldValue}}}let Ao=new WeakMap,Do=!1;function So(r){let o=r.pmViewDesc;if(o)return o.parseRule();if("BR"==r.nodeName&&r.parentNode){if(Kt&&/^(ul|ol)$/i.test(r.parentNode.nodeName)){let s=document.createElement("div");return s.appendChild(document.createElement("li")),{skip:s}}if(r.parentNode.lastChild==r||Kt&&/^(tr|table)$/i.test(r.parentNode.nodeName))return{ignore:!0}}else if("IMG"==r.nodeName&&r.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Io=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function co(r,o,s){return Math.max(s.anchor,s.head)>o.content.size?null:pn(r,o.resolve(s.anchor),o.resolve(s.head))}function to(r,o,s){let d=r.depth,e=o?r.end():r.pos;for(;d>0&&(o||r.indexAfter(d)==r.node(d).childCount);)d--,e++,o=!1;if(s){let t=r.node(d).maybeChild(r.indexAfter(d));for(;t&&!t.isLeaf;)t=t.firstChild,e++}return e}class Ro{constructor(o,s){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Qn,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=s,this.state=s.state,this.directPlugins=s.plugins||[],this.directPlugins.forEach(go),this.dispatch=this.dispatch.bind(this),this.dom=o&&o.mount||document.createElement("div"),o&&(o.appendChild?o.appendChild(this.dom):"function"==typeof o?o(this.dom):o.mount&&(this.mounted=!0)),this.editable=Nn(this),fo(this),this.nodeViews=mo(this),this.docView=a(this.state.doc,ho(this),ao(this),this.dom,this),this.domObserver=new Uo(this,(d,e,t,n)=>function(r,o,s,d,e){if(o<0){let le=r.input.lastSelectionTime>Date.now()-50?r.input.lastSelectionOrigin:null,Xe=Te(r,le);if(Xe&&!r.state.selection.eq(Xe)){if(Lt&&rt&&13===r.input.lastKeyCode&&Date.now()-100<r.input.lastKeyCodeTime&&r.someProp("handleKeyDown",bn=>bn(r,bt(13,"Enter"))))return;let yn=r.state.tr.setSelection(Xe);"pointer"==le?yn.setMeta("pointer",!0):"key"==le&&yn.scrollIntoView(),r.dispatch(yn)}return}let t=r.state.doc.resolve(o),n=t.sharedDepth(s);o=t.before(n+1),s=r.state.doc.resolve(s).after(n+1);let A,k,i=r.state.selection,u=function(r,o,s){let h,{node:d,fromOffset:e,toOffset:t,from:n,to:i}=r.docView.parseRange(o,s),u=r.domSelectionRange(),T=u.anchorNode;if(T&&r.dom.contains(1==T.nodeType?T:T.parentNode)&&(h=[{node:T,offset:u.anchorOffset}],Tt(u)||h.push({node:u.focusNode,offset:u.focusOffset})),Lt&&8===r.input.lastKeyCode)for(let dt=t;dt>e;dt--){let Bt=d.childNodes[dt-1],Jt=Bt.pmViewDesc;if("BR"==Bt.nodeName&&!Jt){t=dt;break}if(!Jt||Jt.size)break}let A=r.state.doc,k=r.someProp("domParser")||l.aw.fromSchema(r.state.schema),z=A.resolve(n),Z=null,nt=k.parse(d,{topNode:z.parent,topMatch:z.parent.contentMatchAt(z.index()),topOpen:!0,from:e,to:t,preserveWhitespace:"pre"!=z.parent.type.whitespace||"full",findPositions:h,ruleFromNode:So,context:z});if(h&&null!=h[0].pos){let dt=h[0].pos,Bt=h[1]&&h[1].pos;null==Bt&&(Bt=dt),Z={anchor:dt+n,head:Bt+n}}return{doc:nt,sel:Z,from:n,to:i}}(r,o,s),h=r.state.doc,T=h.slice(u.from,u.to);8===r.input.lastKeyCode&&Date.now()-100<r.input.lastKeyCodeTime?(A=r.state.selection.to,k="end"):(A=r.state.selection.from,k="start"),r.input.lastKeyCode=null;let z=function(r,o,s,d,e){let t=r.findDiffStart(o,s);if(null==t)return null;let{a:n,b:i}=r.findDiffEnd(o,s+r.size,s+o.size);return"end"==e&&(d-=n+Math.max(0,t-Math.min(n,i))-t),n<t&&r.size<o.size?(t-=d<=t&&d>=n?t-d:0,i=t+(i-n),n=t):i<t&&(t-=d<=t&&d>=i?t-d:0,n=t+(n-i),i=t),{start:t,endA:n,endB:i}}(T.content,u.doc.content,u.from,A,k);if((pt&&r.input.lastIOSEnter>Date.now()-225||rt)&&e.some(le=>1==le.nodeType&&!Io.test(le.nodeName))&&(!z||z.endA>=z.endB)&&r.someProp("handleKeyDown",le=>le(r,bt(13,"Enter"))))return void(r.input.lastIOSEnter=0);if(!z){if(!(d&&i instanceof v.Bs&&!i.empty&&i.$head.sameParent(i.$anchor))||r.composing||u.sel&&u.sel.anchor!=u.sel.head){if(u.sel){let le=co(r,r.state.doc,u.sel);le&&!le.eq(r.state.selection)&&r.dispatch(r.state.tr.setSelection(le))}return}z={start:i.from,endA:i.to,endB:i.to}}if(Lt&&r.cursorWrapper&&u.sel&&u.sel.anchor==r.cursorWrapper.deco.from&&u.sel.head==u.sel.anchor){let le=z.endB-z.start;u.sel={anchor:u.sel.anchor+le,head:u.sel.anchor+le}}r.input.domChangeCount++,r.state.selection.from<r.state.selection.to&&z.start==z.endB&&r.state.selection instanceof v.Bs&&(z.start>r.state.selection.from&&z.start<=r.state.selection.from+2&&r.state.selection.from>=u.from?z.start=r.state.selection.from:z.endA<r.state.selection.to&&z.endA>=r.state.selection.to-2&&r.state.selection.to<=u.to&&(z.endB+=r.state.selection.to-z.endA,z.endA=r.state.selection.to)),j&&At<=11&&z.endB==z.start+1&&z.endA==z.start&&z.start>u.from&&" \xa0"==u.doc.textBetween(z.start-u.from-1,z.start-u.from+1)&&(z.start--,z.endA--,z.endB--);let Jt,Z=u.doc.resolveNoCache(z.start-u.from),nt=u.doc.resolveNoCache(z.endB-u.from),dt=h.resolve(z.start),Bt=Z.sameParent(nt)&&Z.parent.inlineContent&&dt.end()>=z.endA;if((pt&&r.input.lastIOSEnter>Date.now()-225&&(!Bt||e.some(le=>"DIV"==le.nodeName||"P"==le.nodeName))||!Bt&&Z.pos<u.doc.content.size&&(Jt=v.Y1.findFrom(u.doc.resolve(Z.pos+1),1,!0))&&Jt.head==nt.pos)&&r.someProp("handleKeyDown",le=>le(r,bt(13,"Enter"))))return void(r.input.lastIOSEnter=0);if(r.state.selection.anchor>z.start&&function(r,o,s,d,e){if(!d.parent.isTextblock||s-o<=e.pos-d.pos||to(d,!0,!1)<e.pos)return!1;let t=r.resolve(o);if(t.parentOffset<t.parent.content.size||!t.parent.isTextblock)return!1;let n=r.resolve(to(t,!0,!0));return!(!n.parent.isTextblock||n.pos>s||to(n,!0,!1)<s)&&d.parent.content.cut(d.parentOffset).eq(n.parent.content)}(h,z.start,z.endA,Z,nt)&&r.someProp("handleKeyDown",le=>le(r,bt(8,"Backspace"))))return void(rt&&Lt&&r.domObserver.suppressSelectionUpdates());Lt&&rt&&z.endB==z.start&&(r.input.lastAndroidDelete=Date.now()),rt&&!Bt&&Z.start()!=nt.start()&&0==nt.parentOffset&&Z.depth==nt.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==z.endA&&(z.endB-=2,nt=u.doc.resolveNoCache(z.endB-u.from),setTimeout(()=>{r.someProp("handleKeyDown",function(le){return le(r,bt(13,"Enter"))})},20));let oe,Re,je,Zt=z.start,Xt=z.endA;if(Bt)if(Z.pos==nt.pos)j&&At<=11&&0==Z.parentOffset&&(r.domObserver.suppressSelectionUpdates(),setTimeout(()=>ae(r),20)),oe=r.state.tr.delete(Zt,Xt),Re=h.resolve(z.start).marksAcross(h.resolve(z.endA));else if(z.endA==z.endB&&(je=function(r,o){let n,i,u,s=r.firstChild.marks,d=o.firstChild.marks,e=s,t=d;for(let T=0;T<d.length;T++)e=d[T].removeFromSet(e);for(let T=0;T<s.length;T++)t=s[T].removeFromSet(t);if(1==e.length&&0==t.length)i=e[0],n="add",u=T=>T.mark(i.addToSet(T.marks));else{if(0!=e.length||1!=t.length)return null;i=t[0],n="remove",u=T=>T.mark(i.removeFromSet(T.marks))}let h=[];for(let T=0;T<o.childCount;T++)h.push(u(o.child(T)));if(l.HY.from(h).eq(r))return{mark:i,type:n}}(Z.parent.content.cut(Z.parentOffset,nt.parentOffset),dt.parent.content.cut(dt.parentOffset,z.endA-dt.start()))))oe=r.state.tr,"add"==je.type?oe.addMark(Zt,Xt,je.mark):oe.removeMark(Zt,Xt,je.mark);else if(Z.parent.child(Z.index()).isText&&Z.index()==nt.index()-(nt.textOffset?0:1)){let le=Z.parent.textBetween(Z.parentOffset,nt.parentOffset);if(r.someProp("handleTextInput",Xe=>Xe(r,Zt,Xt,le)))return;oe=r.state.tr.insertText(le,Zt,Xt)}if(oe||(oe=r.state.tr.replace(Zt,Xt,u.doc.slice(z.start-u.from,z.endB-u.from))),u.sel){let le=co(r,oe.doc,u.sel);le&&!(Lt&&rt&&r.composing&&le.empty&&(z.start!=z.endB||r.input.lastAndroidDelete<Date.now()-100)&&(le.head==Zt||le.head==oe.mapping.map(Xt)-1)||j&&le.empty&&le.head==Zt)&&oe.setSelection(le)}Re&&oe.ensureMarks(Re),r.dispatch(oe.scrollIntoView())}(this,d,e,t,n)),this.domObserver.start(),function(r){for(let o in Se){let s=Se[o];r.dom.addEventListener(o,r.input.eventHandlers[o]=d=>{fn(r,d)&&!dn(r,d)&&(r.editable||!(d.type in Fe))&&s(r,d)},Vn[o]?{passive:!0}:void 0)}Kt&&r.dom.addEventListener("input",()=>null),Cn(r)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let o=this._props;this._props={};for(let s in o)this._props[s]=o[s];this._props.state=this.state}return this._props}update(o){o.handleDOMEvents!=this._props.handleDOMEvents&&Cn(this);let s=this._props;this._props=o,o.plugins&&(o.plugins.forEach(go),this.directPlugins=o.plugins),this.updateStateInner(o.state,s)}setProps(o){let s={};for(let d in this._props)s[d]=this._props[d];s.state=this.state;for(let d in o)s[d]=o[d];this.update(s)}updateState(o){this.updateStateInner(o,this._props)}updateStateInner(o,s){let d=this.state,e=!1,t=!1;o.storedMarks&&this.composing&&(io(this),t=!0),this.state=o;let n=d.plugins!=o.plugins||this._props.plugins!=s.plugins;if(n||this._props.plugins!=s.plugins||this._props.nodeViews!=s.nodeViews){let k=mo(this);(function(r,o){let s=0,d=0;for(let e in r){if(r[e]!=o[e])return!0;s++}for(let e in o)d++;return s!=d})(k,this.nodeViews)&&(this.nodeViews=k,e=!0)}(n||s.handleDOMEvents!=this._props.handleDOMEvents)&&Cn(this),this.editable=Nn(this),fo(this);let i=ao(this),u=ho(this),h=d.plugins==o.plugins||d.doc.eq(o.doc)?o.scrollToSelection>d.scrollToSelection?"to selection":"preserve":"reset",T=e||!this.docView.matchesNode(o.doc,u,i);(T||!o.selection.eq(d.selection))&&(t=!0);let A="preserve"==h&&t&&null==this.dom.style.overflowAnchor&&function(r){let d,e,o=r.dom.getBoundingClientRect(),s=Math.max(0,o.top);for(let t=(o.left+o.right)/2,n=s+1;n<Math.min(innerHeight,o.bottom);n+=5){let i=r.root.elementFromPoint(t,n);if(!i||i==r.dom||!r.dom.contains(i))continue;let u=i.getBoundingClientRect();if(u.top>=s-20){d=i,e=u.top;break}}return{refDOM:d,refTop:e,stack:Yt(r.dom)}}(this);if(t){this.domObserver.stop();let k=T&&(j||Lt)&&!this.composing&&!d.selection.empty&&!o.selection.empty&&function(r,o){let s=Math.min(r.$anchor.sharedDepth(r.head),o.$anchor.sharedDepth(o.head));return r.$anchor.start(s)!=o.$anchor.start(s)}(d.selection,o.selection);if(T){let z=Lt?this.trackWrites=this.domSelectionRange().focusNode:null;(e||!this.docView.update(o.doc,u,i,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=a(o.doc,u,i,this.dom,this)),z&&!this.trackWrites&&(k=!0)}k||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(r){let o=r.docView.domFromPos(r.state.selection.anchor,0),s=r.domSelectionRange();return X(o.node,o.offset,s.anchorNode,s.anchorOffset)}(this))?ae(this,k):(Hn(this,o.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(d),"reset"==h?this.dom.scrollTop=0:"to selection"==h?this.scrollToSelection():A&&function({refDOM:r,refTop:o,stack:s}){let d=r?r.getBoundingClientRect().top:0;zt(s,0==d?0:d-o)}(A)}scrollToSelection(){let o=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",s=>s(this)))if(this.state.selection instanceof v.qv){let s=this.docView.domAfterPos(this.state.selection.from);1==s.nodeType&&kt(this,s.getBoundingClientRect(),o)}else kt(this,this.coordsAtPos(this.state.selection.head,1),o)}destroyPluginViews(){let o;for(;o=this.pluginViews.pop();)o.destroy&&o.destroy()}updatePluginViews(o){if(o&&o.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let s=0;s<this.pluginViews.length;s++){let d=this.pluginViews[s];d.update&&d.update(this,o)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let s=0;s<this.directPlugins.length;s++){let d=this.directPlugins[s];d.spec.view&&this.pluginViews.push(d.spec.view(this))}for(let s=0;s<this.state.plugins.length;s++){let d=this.state.plugins[s];d.spec.view&&this.pluginViews.push(d.spec.view(this))}}}someProp(o,s){let e,d=this._props&&this._props[o];if(null!=d&&(e=s?s(d):d))return e;for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n].props[o];if(null!=i&&(e=s?s(i):i))return e}let t=this.state.plugins;if(t)for(let n=0;n<t.length;n++){let i=t[n].props[o];if(null!=i&&(e=s?s(i):i))return e}}hasFocus(){if(j){let o=this.root.activeElement;if(o==this.dom)return!0;if(!o||!this.dom.contains(o))return!1;for(;o&&this.dom!=o&&this.dom.contains(o);){if("false"==o.contentEditable)return!1;o=o.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(r){if(r.setActive)return r.setActive();if(ue)return r.focus(ue);let o=Yt(r);r.focus(null==ue?{get preventScroll(){return ue={preventScroll:!0},!0}}:void 0),ue||(ue=!1,zt(o,0))}(this.dom),ae(this),this.domObserver.start()}get root(){let o=this._root;if(null==o)for(let s=this.dom.parentNode;s;s=s.parentNode)if(9==s.nodeType||11==s.nodeType&&s.host)return s.getSelection||(Object.getPrototypeOf(s).getSelection=()=>s.ownerDocument.getSelection()),this._root=s;return o||document}posAtCoords(o){return ve(this,o)}coordsAtPos(o,s=1){return Me(this,o,s)}domAtPos(o,s=0){return this.docView.domFromPos(o,s)}nodeDOM(o){let s=this.docView.descAt(o);return s?s.nodeDOM:null}posAtDOM(o,s,d=-1){let e=this.docView.posFromDOM(o,s,d);if(null==e)throw new RangeError("DOM position not inside the editor");return e}endOfTextblock(o,s){return function(r,o,s){return _e==o&&fe==s?Ee:(_e=o,fe=s,Ee="up"==s||"down"==s?function(r,o,s){let d=o.selection,e="up"==s?d.$from:d.$to;return He(r,o,()=>{let{node:t}=r.docView.domFromPos(e.pos,"up"==s?-1:1);for(;;){let i=r.docView.nearestDesc(t,!0);if(!i)break;if(i.node.isBlock){t=i.contentDOM||i.dom;break}t=i.dom.parentNode}let n=Me(r,e.pos,1);for(let i=t.firstChild;i;i=i.nextSibling){let u;if(1==i.nodeType)u=i.getClientRects();else{if(3!=i.nodeType)continue;u=N(i,0,i.nodeValue.length).getClientRects()}for(let h=0;h<u.length;h++){let T=u[h];if(T.bottom>T.top+1&&("up"==s?n.top-T.top>2*(T.bottom-n.top):T.bottom-n.bottom>2*(n.bottom-T.top)))return!1}}return!0})}(r,o,s):function(r,o,s){let{$head:d}=o.selection;if(!d.parent.isTextblock)return!1;let e=d.parentOffset,t=!e,n=e==d.parent.content.size,i=r.domSelection();return Le.test(d.parent.textContent)&&i.modify?He(r,o,()=>{let{focusNode:u,focusOffset:h,anchorNode:T,anchorOffset:A}=r.domSelectionRange(),k=i.caretBidiLevel;i.modify("move",s,"character");let z=d.depth?r.docView.domAfterPos(d.before()):r.dom,{focusNode:Z,focusOffset:nt}=r.domSelectionRange(),dt=Z&&!z.contains(1==Z.nodeType?Z:Z.parentNode)||u==Z&&h==nt;try{i.collapse(T,A),u&&(u!=T||h!=A)&&i.extend&&i.extend(u,h)}catch(Bt){}return null!=k&&(i.caretBidiLevel=k),dt}):"left"==s||"backward"==s?t:n}(r,o,s))}(this,s||this.state,o)}pasteHTML(o,s){return Rn(this,"",o,!1,s||new ClipboardEvent("paste"))}pasteText(o,s){return Rn(this,o,null,!0,s||new ClipboardEvent("paste"))}destroy(){!this.docView||(function(r){r.domObserver.stop();for(let o in r.input.eventHandlers)r.dom.removeEventListener(o,r.input.eventHandlers[o]);clearTimeout(r.input.composingTimeout),clearTimeout(r.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ao(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(o){return function(r,o){!dn(r,o)&&Se[o.type]&&(r.editable||!(o.type in Fe))&&Se[o.type](r,o)}(this,o)}dispatch(o){let s=this._props.dispatchTransaction;s?s.call(this,o):this.updateState(this.state.apply(o))}domSelectionRange(){return Kt&&11===this.root.nodeType&&function(r){let o=r.activeElement;for(;o&&o.shadowRoot;)o=o.shadowRoot.activeElement;return o}(this.dom.ownerDocument)==this.dom?function(r){let o;function s(u){u.preventDefault(),u.stopImmediatePropagation(),o=u.getTargetRanges()[0]}r.dom.addEventListener("beforeinput",s,!0),document.execCommand("indent"),r.dom.removeEventListener("beforeinput",s,!0);let d=o.startContainer,e=o.startOffset,t=o.endContainer,n=o.endOffset,i=r.domAtPos(r.state.selection.anchor);return X(i.node,i.offset,t,n)&&([d,e,t,n]=[t,n,d,e]),{anchorNode:d,anchorOffset:e,focusNode:t,focusOffset:n}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function ho(r){let o=Object.create(null);return o.class="ProseMirror",o.contenteditable=String(r.editable),o.translate="no",r.someProp("attributes",s=>{if("function"==typeof s&&(s=s(r.state)),s)for(let d in s)"class"==d&&(o.class+=" "+s[d]),"style"==d?o.style=(o.style?o.style+";":"")+s[d]:!o[d]&&"contenteditable"!=d&&"nodeName"!=d&&(o[d]=String(s[d]))}),[on.node(0,r.state.doc.content.size,o)]}function fo(r){if(r.markCursor){let o=document.createElement("img");o.className="ProseMirror-separator",o.setAttribute("mark-placeholder","true"),o.setAttribute("alt",""),r.cursorWrapper={dom:o,deco:on.widget(r.state.selection.head,o,{raw:!0,marks:r.markCursor})}}else r.cursorWrapper=null}function Nn(r){return!r.someProp("editable",o=>!1===o(r.state))}function mo(r){let o=Object.create(null);function s(d){for(let e in d)Object.prototype.hasOwnProperty.call(o,e)||(o[e]=d[e])}return r.someProp("nodeViews",s),r.someProp("markViews",s),o}function go(r){if(r.spec.state||r.spec.filterTransaction||r.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}}}]);