"use strict";(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[14875],{14875:(Z,m,o)=>{o.r(m),o.d(m,{ExampleTuiEditorUploadingImagesModule:()=>y});var I=o(12057),d=o(24751),T=o(33982),g=o(29851),s=o(48014),r=o(68339),l=o(76040),t=o(74788),p=o(88331),c=o(37159),D=o(66596),M=o(57068),F=o(22759),E=o(88002),L=o(43190);function N(e){return i=>{const n=new FileReader;return n.readAsDataURL(i),(0,F.R)(n,"load").pipe((0,E.U)(()=>String(n.result))).pipe((0,L.w)(a=>e.save(a)))}}var S=o(64762),O=o(94402),f=o(53585);let h=(()=>{class e{static createBody(n){const a=new FormData;return a.append("image",n.split(",").pop()||""),new URLSearchParams(a)}save(n){const{host:a,apiKey:R,expiration:P}=f.N.imgbb;return(0,O.D)(fetch(`${a}/1/upload?key=${R}&expiration=${P}`,{method:"POST",body:e.createBody(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(u=>(0,S.mG)(this,void 0,void 0,function*(){return u.json()}))).pipe((0,E.U)(u=>u.data.url))}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var v=o(69303),A=o(20179);let U=(()=>{class e{constructor(){this.builtInTools=[s.TuiEditorTool.Undo,s.TuiEditorTool.Img],this.control=new d.NI(""),this.control.patchValue('<img data-type="image-editor" src="/assets/images/lumberjack.png" width="300"><p>Try to drag right border of image!</p><p>To change min size of image use token <code>TUI_EDITOR_MIN_IMAGE_WIDTH</code>.</p><p>To change max size of image use token <code>TUI_EDITOR_MAX_IMAGE_WIDTH</code>.</p><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDUwIDUwIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiPjxzdHlsZT4uYXtmaWxsOiNkZDAwMzF9LmJ7ZmlsbDojYzMwMDJmfS5je2ZpbGw6I2ZmZn08L3N0eWxlPjxwYXRoIGNsYXNzPSJhIiBkPSJtNDMuNiAxMi42bC0yLjggMjQuNy0xNS44IDguNy0xNS44LTguNy0yLjgtMjQuNyAxOC42LTYuNnoiLz48cGF0aCBjbGFzcz0iYiIgZD0ibTI1IDZsMTguNiA2LjYtMi44IDI0LjctMTUuOCA4Ljd2LTE1LjMtMjAuMy00LjR6Ii8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGFzcz0iYyIgZD0ibTM2LjYgMzYuNWgtNC4zbC0yLjQtNS44aC05LjlsLTIuMyA1LjhoLTQuM2wxMS42LTI2LjF6bS0xMS42LTE3LjZsLTMuNCA4LjJoNi44eiIvPjwvc3ZnPg==" />')}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["tui-editor-uploading-images-example-1"]],features:[t._Bn([r.TuiDestroyService,{provide:s.TUI_EDITOR_EXTENSIONS,deps:[t.zs3],useFactory:i=>[Promise.resolve().then(o.bind(o,43904)).then(({StarterKit:n})=>n),Promise.resolve().then(o.bind(o,25039)).then(({createImageEditorExtension:n})=>n(i)),o.e(12955).then(o.bind(o,12955)).then(({default:n})=>n.configure({inline:!0,allowBase64:!0}))]},{provide:s.TUI_EDITOR_MIN_IMAGE_WIDTH,useValue:150},{provide:s.TUI_EDITOR_MAX_IMAGE_WIDTH,useValue:400},{provide:s.TUI_IMAGE_LOADER,useFactory:N,deps:[h]}])],decls:8,vars:4,consts:[[1,"editor",3,"formControl","tools"],[3,"content"]],template:function(n,a){1&n&&(t._UZ(0,"tui-editor",0),t.TgZ(1,"h4"),t._uU(2,"HTML:"),t.qZA(),t._UZ(3,"tui-editor-socket",1),t.TgZ(4,"h4"),t._uU(5,"Text:"),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.qZA()),2&n&&(t.Q6J("formControl",a.control)("tools",a.builtInTools),t.xp6(3),t.Q6J("content",a.control.value||""),t.xp6(4),t.Oqu(a.control.value))},directives:[v.a,d.JJ,d.oH,A.D],styles:[".editor[_ngcontent-%COMP%]{min-height:30rem}"],changeDetection:0}),e})();function x(e,i){if(1&e&&(t.TgZ(0,"p"),t.tHW(1,2),t._UZ(2,"a",3),t._UZ(3,"a",4),t.N_p(),t.qZA(),t.TgZ(4,"tui-doc-example",5),t._UZ(5,"tui-editor-uploading-images-example-1"),t.qZA()),2&e){const n=t.oxw();t.xp6(4),t.Q6J("content",n.example1)}}let C=(()=>{class e{constructor(){this.example1={TypeScript:o.e(62329).then(o.t.bind(o,62329,17)),HTML:o.e(18909).then(o.t.bind(o,18909,17)),LESS:o.e(83300).then(o.t.bind(o,83300,17)),"./image-loader.ts":o.e(53383).then(o.t.bind(o,53383,17)),"./imgbb.service.ts":o.e(48494).then(o.t.bind(o,48494,17))}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["editor-uploading-images"]],features:[t._Bn([{provide:s.TUI_EDITOR_EXTENSIONS,useValue:s.defaultEditorExtensions}])],decls:2,vars:0,consts:function(){let i,n;return i=$localize`:␟7384ac6e9673eac2ca0755fd1c7a8f4cd617d393␟6878290531283347707: Rich Text Editor based on ${"\ufffd#2\ufffd"}:START_LINK: TipTap Editor ${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd]"}:CLOSE_LINK: for using with Angular forms. For safety reasons use a ${"\ufffd#3\ufffd"}:START_LINK_1: sanitizer ${"[\ufffd/#2\ufffd|\ufffd/#3\ufffd]"}:CLOSE_LINK: with this component. `,i=t.Zx4(i),n=$localize`:␟bd608cde6ee5724a15ebb3be9804114cbd1782f8␟3767163507419562069:Uploading images to hosting`,[["header","Editor","package","ADDON-EDITOR","type","components"],["pageTab",""],i,["tuiLink","","href","https://www.tiptap.dev/"],["tuiLink","","routerLink","/icon-set","fragment","sanitizer"],["id","upload-images","heading",n,3,"content"]]},template:function(n,a){1&n&&(t.TgZ(0,"tui-doc-page",0),t.YNc(1,x,6,1,"ng-template",1),t.qZA())},directives:[p.q,c.n,D.V,T.yS,M.f,U],encapsulation:2,changeDetection:0}),e})(),y=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[I.ez,r.TuiActiveZoneModule,l.TuiSvgModule,l.TuiLinkModule,l.TuiHostedDropdownModule,l.TuiButtonModule,g.fV,d.u5,d.UX,s.TuiEditorModule,s.TuiEditorSocketModule,T.Bz.forChild((0,g.Ve)(C))]]}),e})()}}]);